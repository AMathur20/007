#include "ge007.u.old.elf.h"



s32 * get_cdata_vaddr(void)

{
  return (s32 *)rspbootTextStart;
}



s32 * get_cdata_rom_start(void)

{
  return (s32 *)&ROM_cdata_start;
}



s32 * get_cdata_rom_end(void)

{
  return (s32 *)&ROM_rarezip_start;
}



s32 * get_RareZipASMRomstart(void)

{
  return (s32 *)&ROM_rarezip_start;
}



s32 get_RareZipASMRomend(void)

{
  return 0x34b30;
}



void jump_decompressfile(int source,int target,int buffer)

{
  decompress_entry(source,target,buffer);
  return;
}



int init(EVP_PKEY_CTX *ctx)

{
  code cVar1;
  int iVar2;
  s32 *cdata_vaddr_start;
  s32 *cdata_rom_start;
  s32 *cdata_rom_end;
  s32 *rzASMRomStart;
  s32 rzASMRomEnd;
  code *pcVar3;
  uint uVar4;
  undefined4 *src;
  u32 uVar5;
  void *sp;
  int index;
  undefined4 *dest;
  undefined4 *next;
  
  cdata_vaddr_start = get_cdata_vaddr();
  cdata_rom_start = get_cdata_rom_start();
  cdata_rom_end = get_cdata_rom_end();
  cdata_rom_end = (s32 *)((int)cdata_rom_end - (int)cdata_rom_start);
  rzASMRomStart = get_RareZipASMRomstart();
  rzASMRomEnd = get_RareZipASMRomend();
  index = (int)cdata_rom_end + (rzASMRomEnd - (int)rzASMRomStart) + -1;
  if (-1 < index) {
    pcVar3 = (code *)((int)cdata_vaddr_start + index);
    do {
                    // loop
      cVar1 = *pcVar3;
      iVar2 = index - (int)cdata_rom_end;
      index += -1;
      pcVar3 = pcVar3 + -1;
      huft_build[iVar2] = cVar1;
    } while (-1 < index);
  }
                    // skip
  jump_decompressfile((int)(huft_build + -(int)cdata_rom_end),(int)cdata_vaddr_start,
                      (int)&rarezip_buffer);
  if (false) {
    osPiRawStartDma(0,0x101000,(void *)0x70100400,0xfff32590);
    uVar4 = osPiGetStatus();
    while ((uVar4 & 1) != 0) {
                    // wait_pi_ready
      uVar4 = osPiGetStatus();
    }
  }
  osInitialize();
  set_hardwire_TLB_to_2();
  src = (undefined4 *)resolve_TLBaddress_for_InvalidHit;
  dest = (undefined4 *)&UT_VEC;
  do {
    next = dest + 4;
    *dest = *src;
    dest[1] = src[1];
    dest[2] = src[2];
    dest[3] = src[3];
    src = src + 4;
    dest = next;
  } while (next != (undefined4 *)&XUT_VEC);
  osWritebackDCacheAll();
  osInvalICache(&UT_VEC,0x4000);
  index = 2;
  do {
    osUnmapTLB(index);
    index += 1;
  } while (index != 0x20);
  uVar5 = __osGetFpcCsr();
  __osSetFpcCsr(uVar5 | 0xe80);
  sp = set_stack_entry(&sp_main,0x8000);
  osCreateThread(&mainThread,3,main_entry,NULL,sp,10);
  osStartThread(&mainThread);
  return (int)sp;
}



void * set_stack_entry(void *stack,s32 size)

{
  return (void *)((int)stack + size + -8);
}



void set_hw_address_and_unknown(void)

{
  unknown_init_val = 1;
  cart_hw_address = 0x10000000;
  return;
}



void thread1_idle(void)

{
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



void dummy_70000730(void)

{
  return;
}



void start_idle_thread(void)

{
  void *sp;
  
  sp = set_stack_entry(&sp_idle,0x40);
  osCreateThread(&idleThread,1,thread1_idle,NULL,sp,0);
  osStartThread(&idleThread);
  return;
}



void start_rmon_thread(void)

{
  void *sp;
  
  sp = set_stack_entry(&sp_rmon,0x300);
  osCreateThread(&rmonThread,0,rmon_entry,NULL,sp,0xfa);
  osStartThread(&rmonThread);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void init_scheduler(void)

{
  osCreateMesgQueue(&gfxFrameMsgQ,gfxFrameMsgBuf,0x20);
  if (_osTVType == 2) {
    osCreateScheduler(&sc,&shedThread,'\x1e','\x01');
  }
  else {
    osCreateScheduler(&sc,&shedThread,'\x02','\x01');
  }
  osScAddClient(&sc,(OSScClient *)&gfxClient,&gfxFrameMsgQ);
  sched_cmdQ = osScGetCmdQ(&sc);
  return;
}



void main_entry(void)

{
  uint uVar1;
  
  start_idle_thread();
  removed_7000ad30();
  start_pi_manager();
  start_rmon_thread();
  uVar1 = check_boot_switches();
  if (uVar1 != 0) {
    osStopThread(NULL);
  }
  osSetThreadPri(NULL,10);
  init_scheduler();
  setup_gamevalues_and_launchmainloop();
  return;
}



void setuplastentryofdebughandler(void)

{
  debug_handler_entry *pdVar1;
  debug_handler_entry *pdVar2;
  debug_handler_entry *pdVar3;
  debug_handler_entry *pdVar4;
  debug_handler_entry local_38;
  void *pvStack48;
  
  pdVar2 = debug_handler_table;
  pdVar1 = &local_38;
  do {
    pdVar3 = pdVar1;
    pdVar4 = pdVar2;
    pdVar3->stackpointer = pdVar4->stackpointer;
    pdVar3->name = pdVar4->name;
    pdVar3[1].stackpointer = pdVar4[1].stackpointer;
    pdVar2 = (debug_handler_entry *)&pdVar4[1].name;
    pdVar1 = (debug_handler_entry *)&pdVar3[1].name;
  } while ((debug_handler_entry *)&pdVar4[1].name != &debug_handler_table_end);
  ((debug_handler_entry *)&pdVar3[1].name)->stackpointer = debug_handler_table_end.stackpointer;
  pdVar3[2].stackpointer = pdVar4[2].stackpointer;
  pdVar2 = &local_38;
  while (pvStack48 != NULL) {
    pvStack48 = pdVar2[2].stackpointer;
    pdVar2 = pdVar2 + 1;
  }
  return;
}



void activate_stderr(BOOL flag)

{
  stderr_active = flag;
  return;
}



void enable_stderr(BOOL flag)

{
  stderr_enabled = flag;
  return;
}



void permit_stderr(BOOL flag)

{
  stderr_permitted = flag;
  return;
}



void setUserCompareValue(u32 value)

{
  userCompareValue = value;
  return;
}



// WARNING: Instruction at (ram,0x700009c0) overlaps instruction at (ram,0x700009bc)
// 

void CheckDisplayErrorBuffer(void *frameBufPtr)

{
  if (((stderr_permitted != FALSE) && (stderr_active != FALSE)) || (stderr_enabled != FALSE)) {
    write_stderr_to_buffer(frameBufPtr);
    currentcount = osGetCount();
  }
  return;
}



void CheckDisplayErrorBufferEvery16Frames(u32 framecount)

{
  u32 uVar1;
  
  if ((((framecount & 0xf) == 0) &&
      (((stderr_permitted != FALSE && (stderr_active != FALSE)) || (stderr_enabled != FALSE)))) &&
     (uVar1 = osGetCount(), userCompareValue < uVar1 - currentcount)) {
    write_stderr_to_buffer(cfb_16_a);
    write_stderr_to_buffer(cfb_16_b);
  }
  return;
}



void osCreateLog(void)

{
  currentcount = osGetCount();
  return;
}



void osCreateScheduler(OSSched *sc,void *stack,u8 mode,u8 numFields)

{
  void *sp;
  OSMesgQueue *mq;
  uint uVar1;
  
  sc->curRSPTask = NULL;
  sc->curRDPTask = NULL;
  sc->clientList = NULL;
  sc->frameCount = 0;
  sc->audioListHead = NULL;
  sc->gfxListHead = NULL;
  sc->audioListTail = NULL;
  sc->gfxListTail = NULL;
  (sc->retraceMsg).type = 1;
  (sc->prenmiMsg).type = 5;
  mq = &sc->interruptQ;
  sc->thread = stack;
  osCreateMesgQueue(mq,sc->intBuf,8);
  osCreateMesgQueue(&sc->cmdQ,sc->cmdMsgBuf,8);
  osCreateViManager(0xfe);
  uVar1 = (uint)mode;
  viMode._0_4_ = &osViModeTable + uVar1;
  viMode.comRegs.ctrl = (&osViModeTable)[uVar1].comRegs.hStart;
  viMode.comRegs.width = (&osViModeTable)[uVar1].fldRegs[0].vStart;
  viMode.comRegs.burst = (&osViModeTable)[uVar1].fldRegs[1].vStart;
  osSetEventMesg(OS_EVENT_SP,mq,RSP_DONE_MSG);
  osSetEventMesg(OS_EVENT_DP,mq,RDP_DONE_MSG);
  osSetEventMesg(OS_EVENT_PRENMI,mq,PRE_NMI_MSG);
  osViSetEvent(mq,&UNK_0000029a,(int)(char)numFields);
  osCreateLog();
  sp = set_stack_entry(&sp_shed,0x200);
  osCreateThread(sc->thread,2,__scMain,sc,sp,0x1e);
  osStartThread(sc->thread);
  return;
}



void osScAddClient(OSSched *sc,OSScClient *c,OSMesgQueue *msgQ)

{
  OSIntMask mask;
  SCClient_s *in_a3_lo;
  
  mask = osSetIntMask(1);
  c->msgQ = msgQ;
  c[1].next = in_a3_lo;
  *(OSScClient **)&c->next = sc->clientList;
  sc->clientList = c;
  osSetIntMask(mask);
  return;
}



void osScRemoveClient(OSSched *sc,OSScClient *c)

{
  OSScClient *pOVar1;
  OSScClient *pOVar2;
  OSScClient *pOVar3;
  OSIntMask OVar4;
  
  pOVar1 = sc->clientList;
  OVar4 = osSetIntMask(1);
  pOVar3 = NULL;
  do {
    pOVar2 = pOVar1;
    if (pOVar2 == NULL) {
LAB_70000ce0:
      osSetIntMask(OVar4);
      return;
    }
    if (pOVar2 == c) {
      if (pOVar3 == NULL) {
        sc->clientList = (OSScClient *)c->next;
      }
      else {
        pOVar3->next = c->next;
      }
      goto LAB_70000ce0;
    }
    pOVar1 = (OSScClient *)pOVar2->next;
    pOVar3 = pOVar2;
  } while( true );
}



OSMesgQueue * osScGetCmdQ(OSSched *sc)

{
  return &sc->cmdQ;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __scMain(OSSched *sc)

{
  bool bVar1;
  OSMesgQueue *mq;
  OSScClient *pOVar2;
  undefined *msg;
  
  msg = NULL;
  bVar1 = false;
  do {
    osRecvMesg(&sc->interruptQ,&msg,1);
    if (msg == &UNK_0000029a) {
      __scHandleRetrace(sc);
    }
    else {
      if (msg == &UNK_0000029b) {
        __scHandleRSP(sc);
      }
      else {
        if (msg == &UNK_0000029c) {
          __scHandleRDP(sc);
        }
        else {
          if (msg == &UNK_0000029d) {
            reset_cont_rumble_detect();
            pOVar2 = sc->clientList;
            if (pOVar2 == NULL) {
              bVar1 = true;
            }
            else {
              mq = pOVar2->msgQ;
              while( true ) {
                osSendMesg(mq,&sc->prenmiMsg,0);
                pOVar2 = (OSScClient *)pOVar2->next;
                if (pOVar2 == NULL) break;
                mq = ((SCClient_s *)pOVar2)->msgQ;
              }
              bVar1 = true;
            }
          }
        }
      }
    }
  } while (!bVar1);
  if (_osTVType == 2) {
    osViSetMode(&OS_VI_MPAL_LAN1);
  }
  else {
    osViSetMode(&OS_VI_NTSC_LAN1);
  }
  osViSetXScale(1.00000000);
  osViSetYScale(1.00000000);
  osViRepeatLine('\0');
  osViBlack('\x01');
  do {
    do {
      osRecvMesg(&sc->interruptQ,&msg,1);
    } while (msg != &UNK_0000029a);
    controllerSchedulerRelated();
  } while( true );
}



void proc_70000E90(undefined param_1,undefined param_2,undefined param_3,undefined param_4,
                  undefined param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined4 param_9,undefined4 param_10,undefined4 param_11,undefined4 param_12)

{
  return;
}



void __scHandleRetrace(OSSched *sc)

{
  int iVar1;
  s32 sVar2;
  OSScTask *pOVar3;
  SCClient_s *pSVar4;
  ulonglong uVar5;
  OSScClient *pOVar6;
  OSScTask *pOStack20;
  OSScTask *apOStack16 [3];
  OSScTask *pOStack4;
  
  pOStack4 = NULL;
  apOStack16[0] = NULL;
  pOStack20 = NULL;
  video_related_1();
  sc->frameCount = sc->frameCount + 1;
  video_related_7();
  controllerSchedulerRelated();
  music_related_15();
  iVar1 = osRecvMesg(&sc->cmdQ,&pOStack4,0);
  while (iVar1 != -1) {
    __scAppendList(sc,pOStack4);
    iVar1 = osRecvMesg(&sc->cmdQ,&pOStack4,0);
  }
  if (sc->doAudio == 0) {
    pOVar3 = sc->curRSPTask;
  }
  else {
    if (sc->curRSPTask != NULL) {
      __scYield(sc);
      pOVar6 = sc->clientList;
      goto LAB_70000fb0;
    }
    pOVar3 = sc->curRSPTask;
  }
  uVar5 = (longlong)(int)((uint)(pOVar3 == NULL) << 1) | (ulonglong)(sc->curRDPTask == NULL);
  sVar2 = __scSchedule(sc,apOStack16,&pOStack20,(s32)uVar5);
  if ((longlong)sVar2 != uVar5) {
    __scExec(sc,apOStack16[0],pOStack20);
  }
  pOVar6 = sc->clientList;
LAB_70000fb0:
  if (pOVar6 != NULL) {
    pSVar4 = pOVar6[1].next;
    while( true ) {
      if ((pSVar4 == NULL) || ((sc->frameCount & 1) == 0)) {
        osSendMesg(pOVar6->msgQ,sc,0);
        pOVar6 = (OSScClient *)pOVar6->next;
      }
      else {
        pOVar6 = (OSScClient *)pOVar6->next;
      }
      if (pOVar6 == NULL) break;
      pSVar4 = ((SCClient_s *)pOVar6)[1].next;
    }
  }
  CheckDisplayErrorBufferEvery16Frames(sc->frameCount);
  return;
}



void __scHandleRSP(OSSched *sc)

{
  OSYieldResult OVar1;
  uint uVar2;
  uint availRCP;
  OSScTask *pOVar3;
  OSScTask *pOStack12;
  OSScTask *pOStack8;
  OSScTask *t;
  
  pOStack8 = NULL;
  pOStack12 = NULL;
  t = sc->curRSPTask;
  sc->curRSPTask = NULL;
  video_related_3(0x10001);
  if ((t->state & 0x10) == 0) {
    uVar2 = t->state;
LAB_700010ac:
    t->state = uVar2 & 0xfffffffd;
    __scTaskComplete(sc,t);
  }
  else {
    OVar1 = osSpTaskYielded((OSTask *)&t->list);
    if (OVar1 == 0) {
      uVar2 = t->state;
      goto LAB_700010ac;
    }
    t->state = t->state | 0x20;
    if ((t->flags & 7) == 3) {
      *(OSScTask **)&t->next = sc->gfxListHead;
      sc->gfxListHead = t;
      if (sc->gfxListTail != NULL) {
        pOVar3 = sc->curRSPTask;
        goto LAB_700010c4;
      }
      sc->gfxListTail = t;
    }
  }
  pOVar3 = sc->curRSPTask;
LAB_700010c4:
  availRCP = (uint)(pOVar3 == NULL) << 1 | (uint)(sc->curRDPTask == NULL);
  uVar2 = __scSchedule(sc,&pOStack8,&pOStack12,availRCP);
  if (uVar2 != availRCP) {
    __scExec(sc,pOStack8,pOStack12);
  }
  return;
}



undefined * get_counters(void)

{
  return &target_for_counters_maybe;
}



void __scHandleRDP(OSSched *sc)

{
  OSScTask *t;
  uint uVar1;
  uint availRCP;
  OSScTask *pOStack12;
  OSScTask *apOStack8 [2];
  
  apOStack8[0] = NULL;
  pOStack12 = NULL;
  if (sc->curRDPTask != NULL) {
    video_related_3(0x10002);
    osDpGetCounters((u32 *)&target_for_counters_maybe);
    t = sc->curRDPTask;
    sc->curRDPTask = NULL;
    t->state = t->state & 0xfffffffe;
    __scTaskComplete(sc,t);
    availRCP = (uint)(sc->curRSPTask == NULL) << 1 | (uint)(sc->curRDPTask == NULL);
    uVar1 = __scSchedule(sc,apOStack8,&pOStack12,availRCP);
    if (uVar1 != availRCP) {
      __scExec(sc,apOStack8[0],pOStack12);
    }
  }
  return;
}



OSScTask * ___scTaskReady(OSScTask *__return_storage_ptr__,OSScTask *t)

{
  int iVar1;
  int iVar2;
  
  if (__return_storage_ptr__ == NULL) {
    __return_storage_ptr__ = NULL;
  }
  else {
    iVar1 = osViGetCurrentFramebuffer();
    iVar2 = osViGetNextFramebuffer();
    if (iVar2 != iVar1) {
      __return_storage_ptr__ = NULL;
    }
  }
  return __return_storage_ptr__;
}



s32 __scTaskComplete(OSSched *sc,OSScTask *t)

{
  undefined4 *puVar1;
  s32 sVar2;
  OSIntMask OVar3;
  int iVar4;
  undefined4 *puVar5;
  uint uVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  
  sVar2 = 0;
  if ((t->state & 3) == 0) {
    osSendMesg(t->msgQ,t->msg,1);
    if ((((t->list).type == M_GFXTASK) && ((t->flags & 0x40) != 0)) && ((t->flags & 0x20) != 0)) {
      if (firsttime != 0) {
        osViBlack('\0');
        firsttime = 0;
      }
      iVar4 = (int)dword_800230B0[0] * 4;
      if (*(int *)(&DAT_800230c4 + iVar4) != 0) {
        OVar3 = osSetIntMask(0x80401);
        iVar4 = (int)dword_800230B0[0] * 0x50;
        puVar8 = (undefined4 *)(&DAT_8005db40 + iVar4);
        puVar1 = *(undefined4 **)(&DAT_8005dbe0 + (int)dword_800230B0[0] * 4);
        do {
          puVar5 = puVar1;
          puVar7 = puVar8;
          puVar8 = puVar7 + 3;
          *puVar5 = *puVar7;
          puVar5[1] = puVar7[1];
          puVar5[2] = puVar7[2];
          puVar1 = puVar5 + 3;
        } while (puVar8 != (undefined4 *)(iVar4 + -0x7ffa2478));
        puVar5[3] = *puVar8;
        puVar5[4] = puVar7[4];
        osSetIntMask(OVar3);
        iVar4 = (int)dword_800230B0[0] << 2;
      }
      osViSetXScale(*(f32 *)((int)dword_800230B0 + iVar4 + 4));
      osViSetYScale((f32)dword_800230B0[(int)dword_800230B0[0] + 3]);
      uVar6 = (int)dword_800230B0[0] + 1;
      dword_800230B0[0] = (float)(uVar6 & 1);
      if (((int)uVar6 < 0) && (dword_800230B0[0] != 0.00000000)) {
        dword_800230B0[0] = (float)((int)dword_800230B0[0] + -2);
      }
      CheckDisplayErrorBuffer(t->framebuffer);
      osViSwapBuffer(t->framebuffer);
    }
    sVar2 = 1;
  }
  return sVar2;
}



void __scAppendList(OSSched *sc,OSScTask *t)

{
  if ((t->list).type == M_AUDTASK) {
    if (sc->audioListTail == NULL) {
      sc->audioListHead = t;
    }
    else {
      *(OSScTask **)&sc->audioListTail->next = t;
    }
    sc->audioListTail = t;
    sc->doAudio = 1;
  }
  else {
    if (sc->gfxListTail == NULL) {
      sc->gfxListHead = t;
    }
    else {
      *(OSScTask **)&sc->gfxListTail->next = t;
    }
    sc->gfxListTail = t;
  }
  t->next = NULL;
  t->state = t->flags & 3;
  return;
}



void __scExec(OSSched *sc,OSScTask *sp,OSScTask *dp)

{
  uint uVar1;
  SCHEDTASKS type;
  u64 uVar2;
  u64 extraout_a1;
  u64 size;
  u64 uVar3;
  
  uVar3 = SEXT48((int)dp);
  uVar2 = SEXT48((int)sp);
  size = uVar2;
  if (uVar2 != 0) {
    type = (sp->list).type;
    if (type == M_AUDTASK) {
      osWritebackDCacheAll();
      type = (sp->list).type;
    }
    if ((type != M_AUDTASK) && ((sp->state & 0x10) == 0)) {
      osDpSetStatus(0x3c0);
      type = (sp->list).type;
    }
    if (type == M_AUDTASK) {
      video_related_3((uint)&DAT_00030001);
      uVar1 = sp->state;
    }
    else {
      video_related_3(0x40001);
      video_related_3(0x20002);
      uVar1 = sp->state;
    }
    sp->state = uVar1 & 0xffffffcf;
    osSpTaskLoad((OSTask *)&sp->list);
    osSpTaskStartGo((OSTask *)&sp->list);
    sc->curRSPTask = sp;
    size = extraout_a1;
    if (uVar2 == uVar3) {
      sc->curRDPTask = dp;
      size = extraout_a1;
    }
  }
  if ((uVar3 != 0) && (uVar3 != uVar2)) {
    osDpSetNextBuffer((dp->list).output_buff,size);
    dp_busy = 1;
    dpCount = 0;
    sc->curRDPTask = dp;
  }
  return;
}



void __scYield(OSSched *sc)

{
  OSScTask *pOVar1;
  
  pOVar1 = sc->curRSPTask;
  if ((pOVar1->list).type == M_GFXTASK) {
    pOVar1->state = pOVar1->state | 0x10;
    osSpTaskYield();
  }
  return;
}



s32 __scSchedule(OSSched *sc,OSScTask **sp,OSScTask **dp,s32 availRCP)

{
  OSScTask *__return_storage_ptr__;
  OSScTask_s *pOVar1;
  bool bVar2;
  OSScTask *pOVar3;
  uint uVar4;
  
  do {
    __return_storage_ptr__ = sc->gfxListHead;
    if ((sc->doAudio == 0) || ((availRCP & 2U) == 0)) {
      pOVar3 = ___scTaskReady(__return_storage_ptr__,(OSScTask *)sp);
      uVar4 = availRCP;
      if ((pOVar3 != NULL) && (uVar4 = availRCP, true)) {
        uVar4 = availRCP;
        switch(__return_storage_ptr__->flags & 7) {
        case 2:
        case 6:
        case 7:
          if ((__return_storage_ptr__->state & 2) == 0) {
            uVar4 = availRCP;
            if (((__return_storage_ptr__->state & 1) != 0) &&
               (uVar4 = availRCP, (availRCP & 1U) != 0)) {
              *dp = __return_storage_ptr__;
              pOVar1 = sc->gfxListHead->next;
              *(OSScTask_s **)&sc->gfxListHead = pOVar1;
              uVar4 = availRCP & 0xfffffffeU;
              if (pOVar1 == NULL) {
                sc->gfxListTail = NULL;
                uVar4 = availRCP & 0xfffffffeU;
              }
            }
          }
          else {
            uVar4 = availRCP;
            if ((availRCP & 2U) != 0) {
              *sp = __return_storage_ptr__;
              uVar4 = availRCP & 0xfffffffd;
            }
          }
          break;
        case 3:
          if ((__return_storage_ptr__->state & 0x20) == 0) {
            uVar4 = availRCP;
            if (availRCP == 3) {
              *dp = __return_storage_ptr__;
              *sp = __return_storage_ptr__;
              uVar4 = 0;
              pOVar1 = sc->gfxListHead->next;
              *(OSScTask_s **)&sc->gfxListHead = pOVar1;
              if (pOVar1 == NULL) {
                sc->gfxListTail = NULL;
              }
            }
          }
          else {
            uVar4 = availRCP;
            if ((availRCP & 2U) != 0) {
              *sp = __return_storage_ptr__;
              uVar4 = availRCP & 0xfffffffd;
              if ((__return_storage_ptr__->state & 1) == 0) {
                __return_storage_ptr__ = sc->gfxListHead;
              }
              else {
                *dp = __return_storage_ptr__;
                uVar4 = availRCP & 0xfffffffc;
                __return_storage_ptr__ = sc->gfxListHead;
              }
              pOVar1 = __return_storage_ptr__->next;
              *(OSScTask_s **)&sc->gfxListHead = pOVar1;
              if (pOVar1 == NULL) {
                sc->gfxListTail = NULL;
              }
            }
          }
        }
      }
    }
    else {
      if (__return_storage_ptr__ == NULL) {
        *sp = sc->audioListHead;
      }
      else {
        if ((__return_storage_ptr__->flags & 0x10) != 0) {
          *sp = __return_storage_ptr__;
          uVar4 = availRCP & 0xfffffffd;
          goto switchD_70001674_caseD_1;
        }
        *sp = sc->audioListHead;
      }
      sc->doAudio = 0;
      pOVar1 = sc->audioListHead->next;
      *(OSScTask_s **)&sc->audioListHead = pOVar1;
      uVar4 = availRCP & 0xfffffffdU;
      if (pOVar1 == NULL) {
        sc->audioListTail = NULL;
        uVar4 = availRCP & 0xfffffffdU;
      }
    }
switchD_70001674_caseD_1:
    bVar2 = uVar4 == availRCP;
    availRCP = uVar4;
    if (bVar2) {
      return (s32)uVar4;
    }
  } while( true );
}



void osMapTLBRdb(void)

{
  setCopReg(0,Index,0,0);
  setCopReg(0,PageMask,0,0);
  setCopReg(0,CONCAT44(uRegister00002050,EntryHi),0xffffffffc0000000,0);
  setCopReg(0,EntryLo0,0x2000017,0);
  setCopReg(0,EntryLo1,1,0);
  TLB_write_indexed_entry(Index,CONCAT44(uRegister00002050,EntryHi),EntryLo0,EntryLo1,PageMask);
  setCopReg(0,CONCAT44(uRegister00002050,EntryHi),(longlong)EntryHi,0);
  return;
}



void establish_TLB_buffer_management_table(void)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)TLB_managment_table;
  do {
    puVar1 = puVar1 + 4;
    *puVar1 = 1;
    puVar1[1] = 0;
    puVar1 = puVar1;
  } while (puVar1 < TLB_manager_mapping_table);
  TLB_manager_mapping_table[1] = 0;
  TLB_manager_mapping_table[0] = 1;
  TLB_manager_mapping_table[3] = 0;
  TLB_manager_mapping_table[2] = 1;
  puVar1 = (undefined4 *)(TLB_manager_mapping_table + 4);
  do {
    puVar1 = puVar1 + 2;
    *(undefined *)((int)puVar1 + 3) = 0;
    *(undefined *)((int)puVar1 + 2) = 1;
    *(undefined *)((int)puVar1 + 5) = 0;
    *(undefined *)(puVar1 + 1) = 1;
    *(undefined *)((int)puVar1 + 7) = 0;
    *(undefined *)((int)puVar1 + 6) = 1;
    *(undefined *)((int)puVar1 + 1) = 0;
    *(undefined *)puVar1 = 1;
    puVar1 = puVar1;
  } while (puVar1 != &TLB_manager_mapping_table_end);
  TLB_manager_mapping_table_end = 0x7fc65bf0;
  ptr_TLBallocatedblock = (undefined *)0x802f6000;
  return;
}



u32 mp_tlb_related(void)

{
  u32 uVar1;
  
  uVar1 = maybe_cur_TLB_entries;
  maybe_cur_TLB_entries = 0;
  return uVar1;
}



s32 return_TLB_index_for_entry(int param_1)

{
  u32 uVar1;
  s32 index;
  
  index = 0;
  do {
    uVar1 = __osGetTLBHi(index);
    if (uVar1 == param_1) {
      return index;
    }
    index += 1;
  } while (index != 0x20);
  return -0x80000000;
}



void find_remove_TLB_entry(int entry)

{
  s32 index;
  
  index = return_TLB_index_for_entry(entry);
  if (-1 < index) {
    osUnmapTLB(index);
  }
  return;
}



void remove_TLB_entry_from_table(int param_1)

{
  s32 index;
  
  param_1 *= 2;
  if (TLB_manager_mapping_table[param_1] == '\0') {
    index = return_TLB_index_for_entry
                      ((uint)(byte)TLB_manager_mapping_table[param_1 + 1] << 0xd | 0x7f000000);
    if (-1 < index) {
      osUnmapTLB(index);
    }
    *(undefined4 *)(TLB_managment_table + (uint)(byte)TLB_manager_mapping_table[param_1 + 1] * 0x10)
         = 1;
    TLB_manager_mapping_table[param_1] = '\x01';
  }
  return;
}



void translate_load_rom_from_TLBaddress(void *address)

{
  uint randval;
  u32 uVar1;
  undefined *rdramtarget;
  uint uVar2;
  int iVar3;
  
  maybe_cur_TLB_entries += 1;
  find_remove_TLB_entry((uint)address & 0x7fffe000);
  randval = return_tlb_random_value();
  randval %= 0x5a;
  tlb_segment_num = randval;
  remove_TLB_entry_from_table(randval);
  rdramtarget = ptr_TLBallocatedblock + randval * 0x2000;
  romCopy(rdramtarget,(void *)(((uint)address & 0xffe000) + 0x34b30),0x2000);
  osInvalICache((void *)0x40000000,0x40000000);
  osInvalICache(&UT_VEC,0x10000000);
  uVar2 = ((uint)address & 0xffe000) >> 0xd;
  iVar3 = uVar2 * 0x10;
  *(uint *)(TLB_managment_table + iVar3 + 4) = randval;
  uVar1 = osVirtualToPhysical(rdramtarget);
  TLB_manager_mapping_table[randval * 2] = 0;
  TLB_manager_mapping_table[randval * 2 + 1] = (char)uVar2;
  *(u32 *)(TLB_managment_table + iVar3) = (uVar1 >> 0xc) << 6 | 0x1f;
  return;
}



undefined * getptr_TLBallocatedblock(void)

{
  return ptr_TLBallocatedblock;
}



u32 return_tlb_random_value(void)

{
  tlb_random_seed =
       ((tlb_random_seed << 0x3f) >> 0x1f | (tlb_random_seed << 0x1f) >> 0x20) ^
       (tlb_random_seed << 0x2c) >> 0x20;
  tlb_random_seed = tlb_random_seed >> 0x14 & 0xfff ^ tlb_random_seed;
  return (u32)tlb_random_seed;
}



void resolve_TLBaddress_for_InvalidHit(void)

{
  setCopReg(0,PageMask,0,0);
  setCopReg(0,EntryLo0,(longlong)*(int *)(Context + TLB_manager_mapping_table_end),0);
  setCopReg(0,EntryLo1,(longlong)(*(int *)(Context + TLB_manager_mapping_table_end) + 0x40),0);
  TLB_write_random_entry(Random,EntryHi,EntryLo0,EntryLo1,PageMask);
  return;
}



void set_hardwire_TLB_to_2(void)

{
  setCopReg(0,Wired,2,0);
  setCopReg(0,Context,0,0);
  return;
}



void amCreateAudioMgr(ALSynConfig *c,OSPri pri,amConfig *amc)

{
  AudioInfo **ppAVar1;
  Acmd **ppAVar2;
  undefined4 *puVar3;
  AMDMABuffer *pAVar4;
  s32 sVar7;
  longlong lVar5;
  ulonglong uVar6;
  void *sp;
  longlong lVar8;
  undefined4 *puVar9;
  AMAudioMgr *pAVar10;
  AMDMABuffer *a;
  AMDMABuffer *b;
  int iVar11;
  float fVar12;
  uint uVar13;
  float fVar14;
  s32 asStack208 [52];
  
  *(code **)&c->dmaproc = __amDmaNew;
  sVar7 = osAiSetFrequency(0x5622);
  lVar5 = (longlong)sVar7;
  c->outputRate = sVar7;
  fVar12 = (float)(sVar7 << 1) / 60.00000000;
  if (false) {
    fVar14 = ROUND(fVar12);
  }
  else {
    fVar14 = FLOOR(fVar12);
  }
  uVar13 = (uint)fVar14;
  if (true) {
    if (-1 < (int)uVar13) goto LAB_70001cac;
  }
  else {
    if (false) {
      fVar14 = ROUND(fVar12 - 2147483648.00000000);
    }
    else {
      fVar14 = FLOOR(fVar12 - 2147483648.00000000);
    }
    if (true) {
      uVar13 = (int)fVar14 | 0x80000000;
      goto LAB_70001cac;
    }
  }
  uVar13 = 0xffffffff;
LAB_70001cac:
  fVar14 = (float)uVar13;
  if ((int)uVar13 < 0) {
    fVar14 = fVar14 + 4294967296.00000000;
  }
  frameSize = uVar13 + 1;
  if (fVar12 <= fVar14) {
    frameSize = uVar13;
  }
  if ((frameSize & 0xf) != 0) {
    frameSize = (frameSize & 0xfffffff0) + 0x10;
  }
  minFrameSize = frameSize - 0x10;
  maxFrameSize = frameSize + 0x35;
  if (c->fxType == '\x06') {
    lVar5 = (longlong)(int)asStack208;
    lVar8 = lVar5;
    puVar3 = &dword_80023100;
    do {
      puVar9 = puVar3;
      lVar8._4_4_ = (undefined4 *)lVar8;
      lVar8 = (longlong)(int)(lVar8._4_4_ + 3);
      *lVar8._4_4_ = *puVar9;
      lVar8._4_4_[1] = puVar9[1];
      lVar8._4_4_[2] = puVar9[2];
      puVar3 = puVar9 + 3;
    } while (puVar9 + 3 != (undefined4 *)0x800231c0);
    lVar8._4_4_[3] = uRam800231c0;
    lVar8._4_4_[4] = puVar9[4];
    c->params = asStack208;
    alInit((ALGlobals *)&_am.g.drvr.pFreeList.prev,c);
  }
  else {
    alInit((ALGlobals *)&_am.g.drvr.pFreeList.prev,c);
  }
  pAVar10 = &_am;
  do {
    _alHeapDBAlloc(NULL,0,c->heap,1,0x60);
    iVar11 = maxFrameSize;
    pAVar10->audioInfo[0] = (AudioInfo *)lVar5;
    _alHeapDBAlloc(NULL,0,c->heap,1,iVar11 << 2);
    ppAVar1 = pAVar10->audioInfo;
    pAVar10 = (AMAudioMgr *)(pAVar10->ACMDList + 1);
    (*ppAVar1)->data = (short *)lVar5;
  } while (pAVar10 < (AMAudioMgr *)0x8005e524);
  osCreateMesgQueue((OSMesgQueue *)&_am.audioReplyMsgQ.validCount,_am.audioReplyMsgBuf + 2,8);
  osCreateMesgQueue((OSMesgQueue *)&_am.audioFrameMsgQ.validCount,_am.audioFrameMsgBuf + 2,8);
  osCreateMesgQueue(&audDMAMessageQ,audDMAMessageBuf,0x40);
  uVar6 = ZEXT48(dmaBuffs);
  dmaBuffs[0].node.prev = NULL;
  dmaBuffs[0].node.next = NULL;
  a = dmaBuffs;
  iVar11 = 0;
  pAVar4 = dmaBuffs;
  do {
    b = pAVar4;
    a = a + 1;
    alLink((ALLink *)a,(ALLink *)b);
    _alHeapDBAlloc(NULL,0,c->heap,1,0x200);
    iVar11 += 1;
    b->ptr = (char *)uVar6;
    pAVar4 = b + 1;
  } while (iVar11 < 0x3f);
  _alHeapDBAlloc(NULL,0,c->heap,1,0x200);
  b[1].ptr = (char *)uVar6;
  pAVar10 = &_am;
  do {
    _alHeapDBAlloc(NULL,0,c->heap,1,24000);
    ppAVar2 = pAVar10->ACMDList;
    pAVar10->ACMDList[0] = (Acmd *)uVar6;
    pAVar10 = (AMAudioMgr *)(ppAVar2 + 1);
  } while ((AMAudioMgr *)(ppAVar2 + 1) != (AMAudioMgr *)_am.audioInfo);
  sp = set_stack_entry(&sp_audi,0x1000);
  osCreateThread((OSThread *)&_am.thread.priority,4,_amMain,NULL,sp,0x14);
  return;
}



void startaudithread(void)

{
  osStartThread((OSThread *)&_am.thread.priority);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void _amMain(void)

{
  short sVar1;
  OSTime OVar2;
  ulonglong uVar3;
  undefined4 in_v1_hi;
  uint in_v1_lo;
  uint uVar4;
  int iVar5;
  uint uStack48;
  uint uStack44;
  AudioMsg *msg;
  OSMesg *local_c;
  bool done;
  
  iVar5 = 0;
  done = false;
  local_c = NULL;
  msg = NULL;
  osScAddClient(&sc,&audi_client,(OSMesgQueue *)&_am.audioFrameMsgQ.validCount);
  do {
    osRecvMesg((OSMesgQueue *)&_am.audioFrameMsgQ.validCount,&local_c,1);
    sVar1 = *(short *)local_c;
    if (sVar1 == 1) {
      OVar2 = osGetTime();
      OSTime_8005e4d8._0_4_ = (int)OVar2;
      OSTime_8005e4d8._4_4_ = in_v1_lo;
      video_related_3(0x30000);
      __amHandleFrameMsg(_am.audioInfo[audFrameCt % 3],(AudioInfo *)msg);
      iVar5 += 1;
      video_related_3(0x60000);
      OVar2 = osGetTime();
      OSTime_8005e4e0._0_4_ = (int)OVar2;
      OSTime_8005e4c0._0_4_ =
           (OSTime_8005e4e0._0_4_ - OSTime_8005e4d8._0_4_) -
           (uint)(CONCAT44(in_v1_hi,in_v1_lo) < (ulonglong)(longlong)(int)OSTime_8005e4d8._4_4_);
      OSTime_8005e4c0._4_4_ = in_v1_lo - OSTime_8005e4d8._4_4_;
      if (iVar5 % 0xf0 == 0) {
        OSTime_8005e4e0._4_4_ = in_v1_lo;
        uVar3 = __ull_div((longlong)DAT_8005e4d0,(longlong)DAT_8005e4d4);
        DAT_8005e4c8 = (undefined4)uVar3;
        uStack48 = (OSTime_8005e4e0._0_4_ - OSTime_8005e4d8._0_4_) -
                   (uint)(OSTime_8005e4e0._4_4_ < OSTime_8005e4d8._4_4_);
        uStack44 = OSTime_8005e4e0._4_4_ - OSTime_8005e4d8._4_4_;
        DAT_8005e4bc = 0;
        DAT_8005e4b8 = 0;
        DAT_8005e4d4 = 0;
        DAT_8005e4d0 = 0;
        DAT_8005e4cc = in_v1_lo;
      }
      else {
        uVar4 = DAT_8005e4d4 + in_v1_lo;
        DAT_8005e4d0 = (((uint)(uVar4 < in_v1_lo) + DAT_8005e4d0 + OSTime_8005e4e0._0_4_) -
                       OSTime_8005e4d8._0_4_) - (uint)(uVar4 < OSTime_8005e4d8._4_4_);
        DAT_8005e4d4 = uVar4 - OSTime_8005e4d8._4_4_;
        OSTime_8005e4e0._4_4_ = in_v1_lo;
        uStack48 = OSTime_8005e4c0._0_4_;
        uStack44 = OSTime_8005e4c0._4_4_;
      }
      if ((DAT_8005e4b8 <= uStack48) && ((DAT_8005e4b8 < uStack48 || (DAT_8005e4bc < uStack44)))) {
        DAT_8005e4b8 = uStack48;
        DAT_8005e4bc = uStack44;
      }
      osRecvMesg((OSMesgQueue *)&_am.audioReplyMsgQ.validCount,&msg,1);
      __amHandleDoneMsg((AudioInfo *)msg);
    }
    else {
      if (sVar1 == 5) {
        done = true;
      }
      else {
        if (sVar1 == 10) {
          done = true;
        }
      }
    }
  } while (!done);
  alClose((ALGlobals *)&_am.g.drvr.pFreeList.prev);
  return;
}



u32 __amHandleFrameMsg(AudioInfo *info,AudioInfo *lastInfo)

{
  short sVar1;
  s16 *outBuf;
  uint samplesleft;
  Acmd AVar2;
  OSMesgQueue *sched_cmdQ;
  u32 uVar3;
  
  __clearAudioDMA();
  outBuf = (s16 *)osVirtualToPhysical(info->data);
  if (lastInfo != NULL) {
    osAiSetNextBuffer(lastInfo->data,(int)lastInfo->frameSamples << 2);
  }
  samplesleft = osAiGetLength();
  info->frameSamples = ((short)frameSize - (short)(samplesleft >> 2)) + 0x35U & 0xfff0;
  sVar1 = info->frameSamples;
  if ((longlong)sVar1 < (longlong)(int)(short)minFrameSize) {
    info->frameSamples = (short)minFrameSize;
    sVar1 = info->frameSamples;
  }
  AVar2 = _alAudioFrame(_am.ACMDList[curAcmdList],(s32 *)&cmdLen,outBuf,(int)sVar1);
  (info->task).next = NULL;
  (info->task).msgQ = (OSMesgQueue *)&_am.audioReplyMsgQ.validCount;
  *(AudioInfo **)&(info->task).msg = info;
  (info->task).flags = 2;
  (info->task).list.data_ptr = _am.ACMDList[curAcmdList];
  (info->task).list.data_size = ((int)AVar2 - (int)_am.ACMDList[curAcmdList] >> 3) << 3;
  (info->task).list.type = M_AUDTASK;
  *(code **)&(info->task).list.ucode_boot = rspbootTextStart;
  (info->task).list.ucode_boot_size = 0xd0;
  (info->task).list.flags = 0;
  (info->task).list.ucode = aspMainTextStart;
  *(undefined **)&(info->task).list.ucode_data = &aspMainDataStart;
  (info->task).list.ucode_data_size = 0x800;
  (info->task).list.yield_data_ptr = NULL;
  (info->task).list.yield_data_size = 0;
  sched_cmdQ = osScGetCmdQ(&sc);
  uVar3 = osSendMesg(sched_cmdQ,&info->task,0);
  curAcmdList = curAcmdList ^ 1;
  return uVar3;
}



void __amHandleDoneMsg(AudioInfo *info)

{
  int samplesLeft;
  
  samplesLeft = osAiGetLength();
  if ((samplesLeft >> 2 == 0) && (firstTime == 0)) {
    firstTime = 0;
  }
  return;
}



s32 __amDMA(s32 addr,s32 len,void *state)

{
  AMDMABuffer *a;
  AMDMABuffer *pAVar1;
  ALLink_s *pAVar2;
  u32 devAddr;
  char *virtualAddress;
  OSIoMesg *mb;
  AMDMABuffer *b;
  AMDMABuffer *pAVar3;
  char *foundBuffer;
  
  a = dmaState.firstFree;
  b = NULL;
  if (dmaState.firstUsed != NULL) {
    pAVar2 = (ALLink_s *)(dmaState.firstUsed)->startAddr;
    pAVar1 = dmaState.firstUsed;
    b = NULL;
    while( true ) {
      pAVar3 = pAVar1;
      if ((uint)addr < pAVar2) break;
      if (addr + len <= (int)(pAVar2 + 0x40)) {
        pAVar3->lastFrame = audFrameCt;
        devAddr = osVirtualToPhysical(pAVar3->ptr + (addr - (int)pAVar2));
        return devAddr;
      }
      pAVar1 = (AMDMABuffer *)(pAVar3->node).next;
      b = pAVar3;
      if (pAVar1 == NULL) break;
      pAVar2 = (ALLink_s *)pAVar1->startAddr;
      b = pAVar3;
    }
  }
  if (dmaState.firstFree == NULL) {
    if (b == NULL) {
      virtualAddress = (dmaState.firstUsed)->ptr;
    }
    else {
      virtualAddress = b->ptr;
    }
    devAddr = osVirtualToPhysical(virtualAddress);
  }
  else {
    dmaState.firstFree = (AMDMABuffer *)((dmaState.firstFree)->node).next;
    alUnlink((ALLink *)a);
    pAVar1 = dmaState.firstUsed;
    if (b == NULL) {
      if (dmaState.firstUsed == NULL) {
        dmaState.firstUsed = a;
        (a->node).next = NULL;
        (a->node).prev = NULL;
      }
      else {
        dmaState.firstUsed = a;
        *(AMDMABuffer **)&(a->node).next = pAVar1;
        (a->node).prev = NULL;
        *(AMDMABuffer **)&(pAVar1->node).prev = a;
      }
    }
    else {
      alLink((ALLink *)a,(ALLink *)b);
    }
    devAddr = addr - (addr & 1U);
    a->startAddr = devAddr;
    foundBuffer = a->ptr;
    a->lastFrame = audFrameCt;
    mb = audDMAIOMesgBuf + addr;
    addr = addr + 1;
    osPiStartDma(mb,1,0,devAddr,foundBuffer,0x200,&audDMAMessageQ);
    devAddr = osVirtualToPhysical(foundBuffer);
  }
  return (s32)(devAddr + (addr & 1U));
}



ALDMAproc __amDmaNew(AMDMAState **state)

{
  if (dmaState.initialized == '\0') {
    dmaState.firstUsed = NULL;
    dmaState.firstFree = dmaBuffs;
    dmaState.initialized = '\x01';
  }
  *state = &dmaState;
  return (ALDMAproc)__amDMA;
}



void __clearAudioDMA(void)

{
  u32 i;
  OSIoMesg *iomsg;
  AMDMABuffer *dmaPtr;
  AMDMABuffer *nextPtr;
  
  iomsg = NULL;
  i = 0;
  nextPtr = dmaState.firstUsed;
  if (addr != 0) {
    do {
      osRecvMesg(&audDMAMessageQ,&iomsg,0);
      i += 1;
      nextPtr = dmaState.firstUsed;
    } while (i < addr);
  }
  while (dmaPtr = nextPtr, dmaPtr != NULL) {
    nextPtr = (AMDMABuffer *)(dmaPtr->node).next;
    if ((int)&((ALLink_s *)dmaPtr->lastFrame)->next + 1U < audFrameCt) {
      if (dmaPtr == dmaState.firstUsed) {
        dmaState.firstUsed = nextPtr;
      }
      alUnlink((ALLink *)dmaPtr);
      if (dmaState.firstFree == NULL) {
        dmaState.firstFree = dmaPtr;
        (dmaPtr->node).next = NULL;
        (dmaPtr->node).prev = NULL;
      }
      else {
        alLink((ALLink *)dmaPtr,(ALLink *)dmaState.firstFree);
      }
    }
  }
  audFrameCt = audFrameCt + 1;
  addr = 0;
  return;
}



void displaylist_related(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  
  displaylist_0[0]._0_4_ = 0xb8000000;
  displaylist_0[0]._4_4_ = 0;
  displaylist_1._0_4_ = 0xb8000000;
  displaylist_1._4_4_ = 0;
  displaylist_bank = 0;
  puVar2 = buffer_800607b0;
  puVar1 = buffer_800607b0 + 8;
  do {
    puVar1 = puVar1 + 1;
    *puVar2 = 0;
    *puVar1 = 1;
    puVar2 = puVar2 + 1;
    puVar1 = puVar1;
  } while (puVar1 != (undefined4 *)&DAT_800607dc);
  video_related_2();
  return;
}



void video_related_1(void)

{
  int iVar1;
  int *piVar2;
  uint *puVar3;
  uint uVar4;
  
  count_800604a8 = osGetCount();
  piVar2 = buffer_800607b0 + 8;
  puVar3 = buffer_800607b0 + 4;
  do {
    iVar1 = *piVar2;
    piVar2 = piVar2 + 1;
    uVar4 = iVar1 + 0x1fU & 0x1f;
    if (((int)(iVar1 + 0x1fU) < 0) && (uVar4 != 0)) {
      uVar4 -= 0x20;
    }
    *puVar3 = uVar4;
    puVar3 = puVar3 + 1;
  } while (piVar2 != (int *)&DAT_800607dc);
  return;
}



void video_related_2(void)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  
  puVar3 = buffer_800607b0 + 4;
  count_800604a4 = count_800604a8;
  puVar2 = buffer_800607b0;
  do {
    uVar1 = *puVar3;
    puVar3 = puVar3 + 1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (puVar3 != buffer_800607b0 + 7);
  return;
}



void video_related_3(uint param_1)

{
  OSIntMask OVar1;
  u32 uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  OVar1 = osSetIntMask(1);
  uVar5 = param_1 & 0xffff;
  iVar3 = uVar5 * 4;
  param_1 = (int)param_1 >> 0x10;
  iVar4 = buffer_800607b0[uVar5 + 8];
  if (param_1 == 3) {
    param_1 = *(uint *)(&DAT_8005f3f0 + iVar3) | 0x8000;
  }
  else {
    if (param_1 == 6) {
      param_1 = *(uint *)(&DAT_8005f3f0 + iVar3) & 0x7fff;
    }
  }
  iVar6 = uVar5 * 0x100 + iVar4 * 8;
  *(uint *)(&DAT_800604b0 + iVar6) = param_1;
  uVar2 = osGetCount();
  *(u32 *)(iVar6 + -0x7ff9fb4c) = uVar2;
  iVar4 += 1;
  *(uint *)(&DAT_8005f3f0 + iVar3) = param_1;
  if (0x1f < iVar4) {
    iVar4 = 0;
  }
  buffer_800607b0[uVar5 + 8] = iVar4;
  osSetIntMask(OVar1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * display_speed_graph(void)

{
  undefined4 *in_a0_lo;
  int iVar1;
  float fVar2;
  undefined4 in_f5;
  float fVar3;
  undefined4 in_f11;
  undefined4 in_f19;
  byte abStack24 [20];
  int *local_4;
  
  dword_80023224 += dword_80048498;
  if (dword_80023228 < dword_80048498) {
    dword_80023228 = dword_80048498;
  }
  if (0x14 < dword_80023224) {
    while (0x14 < dword_80023224) {
      dword_80023224 -= 0x14;
    }
    local_4 = (int *)get_counters();
    set_debug_text_color(0xff,0xff,0xff,0xff);
    set_color_speedgraph(0,0,0,0xff);
    set_final_debug_text_positions(8,5);
    fVar3 = (float)(local_4[1] - local_4[3]);
    if (local_4[1] - local_4[3] < 0) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    fVar2 = (float)*local_4;
    if (*local_4 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    sprintf((char *)abStack24,aUtz2_0f,in_f11,SUB84((double)((fVar3 * 100.00000000) / fVar2),0));
    write_string_stdout(abStack24);
    set_final_debug_text_positions(8,6);
    iVar1 = *local_4;
    fVar3 = (float)(iVar1 - local_4[1]);
    if (iVar1 - local_4[1] < 0) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    fVar2 = (float)iVar1;
    if (iVar1 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    sprintf((char *)abStack24,aRsp2_0f,in_f5,SUB84((double)((fVar3 * 100.00000000) / fVar2),0));
    write_string_stdout(abStack24);
    set_final_debug_text_positions(8,7);
    fVar3 = (float)local_4[3];
    if (local_4[3] < 0) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    fVar2 = (float)*local_4;
    if (*local_4 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    sprintf((char *)abStack24,aTex2_0f,in_f19,SUB84((double)((fVar3 * 100.00000000) / fVar2),0));
    write_string_stdout(abStack24);
    set_final_debug_text_positions(0x1c,5);
    if (dword_80048498 == 0) {
      iVar1 = 0;
    }
    else {
      iVar1 = 0x3c / dword_80048498;
      if (dword_80048498 == 0) {
        trap(0x1c00);
      }
      if ((dword_80048498 == -1) && (false)) {
        trap(0x1800);
      }
    }
    sprintf((char *)abStack24,a2dHz,iVar1);
    write_string_stdout(abStack24);
    set_final_debug_text_positions(0x1c,6);
    sprintf((char *)abStack24,a2dFrames,dword_80048498);
    write_string_stdout(abStack24);
    if (dword_80023228 == dword_80048498) {
      sprintf((char *)abStack24,asc_80028468,dword_80023228);
    }
    else {
      sprintf((char *)abStack24,a2d,dword_80023228);
    }
    write_string_stdout(abStack24);
    dword_80023228 = 0;
  }
  *in_a0_lo = 0x6000000;
  *(u64 **)(in_a0_lo + 1) = displaylist_0 + (displaylist_bank ^ 1) * 0x10a;
  return in_a0_lo + 2;
}



void video_DL_related_4(void)

{
  uint uVar1;
  int iVar2;
  float fVar3;
  uint *puVar4;
  uint *puVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  uint *puVar12;
  uint *puVar13;
  uint uVar14;
  float fVar15;
  undefined4 *puStack96;
  int iStack80;
  uint auStack48 [10];
  int iStack8;
  
  counterforframes += dword_80048498;
  if (200 < counterforframes) {
    counterforframes -= 200;
    dword_80023234 ^= 1;
  }
  uVar7 = dword_8002322C & 1;
  dword_8002322C += 1;
  if (dword_80023234 != uVar7) {
    puVar4 = proc_7F0D1AC0((undefined4 *)(displaylist_0 + displaylist_bank * 0x10a));
    puVar5 = auStack48 + 3;
    do {
      puVar12 = puVar5 + 1;
      *puVar5 = 0;
      uVar7 = count_800604a4;
      puVar5 = puVar12;
    } while (puVar12 < auStack48 + 6);
    puVar5 = auStack48;
    do {
      puVar12 = puVar5 + 1;
      *puVar5 = uVar7;
      fVar3 = aIL0._0_4_;
      puVar5 = puVar12;
    } while (puVar12 < auStack48 + 3);
    puVar5 = buffer_800607b0 + 8;
    puStack96 = buffer_800607b0;
    iStack8 = 0;
    iStack80 = 0;
    do {
      uVar7 = *puVar5;
      uVar14 = *puStack96;
      puVar12 = (uint *)((int)auStack48 + iStack80 + 0xc);
      if (uVar14 != uVar7) {
        iVar8 = iStack8 * 0x100;
        puVar13 = (uint *)((int)auStack48 + iStack80);
        do {
          uVar11 = *(uint *)(&DAT_800604b0 + uVar14 * 8 + iVar8);
          if ((uVar11 & 0x8000) == 0) {
            uVar10 = *puVar13;
          }
          else {
            uVar11 = 3;
            uVar10 = *puVar13;
          }
          uVar1 = *(uint *)(&DAT_800604b0 + uVar14 * 8 + iVar8 + 1);
          uVar6 = count_800604a4;
          if (count_800604a4 <= uVar10) {
            uVar6 = uVar10;
          }
          if ((count_800604a4 <= uVar1) && (uVar6 <= uVar1)) {
            uVar7 = *puVar12;
            iVar9 = uVar7 * 0x10;
            fVar15 = (float)(uVar1 - uVar6);
            if ((int)(uVar1 - uVar6) < 0) {
              fVar15 = fVar15 + 4294967296.00000000;
            }
            fVar15 = fVar15 / fVar3;
            if (uVar7 == 1) {
              proc_7F0D1DCC(fVar15);
            }
            else {
              iVar2 = *(int *)(&DAT_800231d8 + iVar9);
              puVar4 = proc_7F0D1BD0(puVar4,fVar15,(uint)fVar15,iVar2 >> 0x18 & 0xff,
                                     iVar2 >> 0x10 & 0xff,iVar2 >> 8 & 0xff,
                                     *(int *)(&DAT_800231dc + iVar9));
            }
            *puVar4 = 0xe7000000;
            puVar4[1] = 0;
            puVar4 = puVar4 + 2;
            uVar7 = *puVar5;
          }
          uVar10 = uVar14 + 1;
          *puVar12 = uVar11;
          *puVar13 = uVar1;
          uVar14 = uVar10 & 0x1f;
          if (((int)uVar10 < 0) && (uVar14 != 0)) {
            uVar14 -= 0x20;
          }
        } while (uVar14 != uVar7);
      }
      if (iStack8 < 2) {
        proc_7F0D2320();
      }
      iStack8 += 1;
      iStack80 += 4;
      puStack96 = puStack96 + 1;
      puVar5 = puVar5 + 1;
    } while (iStack8 != 3);
    puVar5 = proc_7F0D1E98(puVar4,0,0,0);
    *puVar5 = 0xe7000000;
    puVar5[1] = 0;
    puVar5[2] = 0xb8000000;
    puVar5[3] = 0;
    displaylist_bank ^= 1;
  }
  return;
}



void init_video_settings(void)

{
  video1_settings.frameb = (int)cfb_16_a;
  video_mp_related_8002329C = 0;
  video_mp_related_800232A0 = 0;
  ptr_video_settings1 = &video1_settings;
  ptr_video_settings2 = &video2_settings;
  DAT_80060878 = 0;
  DAT_80060879 = 1;
  video2_settings.frameb = (int)cfb_16_b;
  return;
}



void init_both_video_buffers(void)

{
  undefined *puVar1;
  undefined *puVar2;
  
  remove_viewport_buffer();
  puVar1 = NULL;
  do {
    cfb_16_a[(int)puVar1] = 0;
    cfb_16_b[(int)puVar1] = 0;
    cfb_16_a[(int)(puVar1 + 1)] = 0;
    cfb_16_b[(int)(puVar1 + 1)] = 0;
    cfb_16_a[(int)(puVar1 + 2)] = 0;
    cfb_16_b[(int)(puVar1 + 2)] = 0;
    cfb_16_a[(int)(puVar1 + 3)] = 0;
    puVar2 = puVar1 + 4;
    cfb_16_b[(int)(puVar1 + 3)] = 0;
    puVar1 = puVar2;
  } while (puVar2 != &UNK_00025800);
  return;
}



void video_store_A0_plus_2_to_off_D_800232BC(int param_1)

{
  off_800232BC = param_1 + 2;
  return;
}



void video_related_7(void)

{
  int iVar1;
  
  if ((dword_800232B8 != 0) && (dword_800232B8 += -1, dword_800232B8 == 0)) {
    dword_800232B4 = 0;
  }
  iVar1 = dword_800232B0 * dword_800232B4;
  (viMode._0_4_)->fldRegs[0].vStart =
       (((int)viMode.comRegs.width >> 0x10) + iVar1) * 0x10000 |
       viMode.comRegs.width + iVar1 & 0xffff;
  (viMode._0_4_)->fldRegs[1].vStart =
       (((int)viMode.comRegs.burst >> 0x10) + iVar1) * 0x10000 |
       viMode.comRegs.burst + iVar1 & 0xffff;
  osViSetMode(viMode._0_4_);
  osViBlack((u8)off_800232BC);
  if ((off_800232BC != 0) && (off_800232BC < 3)) {
    off_800232BC = off_800232BC + -1;
  }
  osViSetSpecialFeatures(0x42);
  dword_800232B0 = -dword_800232B0;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void video_related_8(void)

{
  bool bVar1;
  short sVar2;
  u32 uVar3;
  s32 sVar4;
  video_settings *__src;
  COLORMODE CVar5;
  u32 *puVar6;
  char cVar7;
  u32 *puVar8;
  int iVar9;
  uint uVar10;
  OSViMode *pOVar11;
  OSViMode *pOVar12;
  int iVar13;
  int iVar14;
  u32 *puVar15;
  float fVar16;
  
  cVar7 = *(char *)&ptr_video_settings2->anonymous_0;
  if (cVar7 == *(char *)&ptr_video_settings1->anonymous_0) {
    sVar2 = ptr_video_settings2->txtClipW;
  }
  else {
    if (cVar7 == '\0') {
      osViSetYScale(1.00000000);
      osViBlack('\x01');
    }
    else {
      if (cVar7 == '\x01') {
        if (coloroutputmode == 32BIT) {
          if (_osTVType == 2) {
            pOVar12 = &OS_VI_MPAL_LAN2;
            puVar6 = &DAT_80060828;
            do {
              puVar8 = puVar6;
              pOVar11 = pOVar12;
              pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
              *puVar8 = *(u32 *)pOVar11;
              puVar8[1] = (pOVar11->comRegs).ctrl;
              puVar8[2] = (pOVar11->comRegs).width;
              puVar6 = puVar8 + 3;
            } while (pOVar12 != (OSViMode *)&OS_VI_MPAL_LAN2.fldRegs[1].vBurst);
            uVar3 = (pOVar11->comRegs).vSync;
            puVar8[3] = OS_VI_MPAL_LAN2.fldRegs[1].vBurst;
            puVar8[4] = uVar3;
          }
          else {
            pOVar12 = &OS_VI_NTSC_LAN2;
            puVar6 = &DAT_80060828;
            do {
              puVar8 = puVar6;
              pOVar11 = pOVar12;
              pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
              *puVar8 = *(u32 *)pOVar11;
              puVar8[1] = (pOVar11->comRegs).ctrl;
              puVar8[2] = (pOVar11->comRegs).width;
              puVar6 = puVar8 + 3;
            } while (pOVar12 != (OSViMode *)&OS_VI_NTSC_LAN2.fldRegs[1].vBurst);
            uVar3 = (pOVar11->comRegs).vSync;
            puVar8[3] = OS_VI_NTSC_LAN2.fldRegs[1].vBurst;
            puVar8[4] = uVar3;
          }
        }
        else {
          if (_osTVType == 2) {
            pOVar12 = &OS_VI_MPAL_LAN1;
            puVar6 = &DAT_80060828;
            do {
              puVar8 = puVar6;
              pOVar11 = pOVar12;
              pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
              *puVar8 = *(u32 *)pOVar11;
              puVar8[1] = (pOVar11->comRegs).ctrl;
              puVar8[2] = (pOVar11->comRegs).width;
              puVar6 = puVar8 + 3;
            } while (pOVar12 != (OSViMode *)&OS_VI_MPAL_LAN1.fldRegs[1].vBurst);
            uVar3 = (pOVar11->comRegs).vSync;
            puVar8[3] = OS_VI_MPAL_LAN1.fldRegs[1].vBurst;
            puVar8[4] = uVar3;
          }
          else {
            pOVar12 = &OS_VI_NTSC_LAN1;
            puVar6 = &DAT_80060828;
            do {
              puVar8 = puVar6;
              pOVar11 = pOVar12;
              pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
              *puVar8 = *(u32 *)pOVar11;
              puVar8[1] = (pOVar11->comRegs).ctrl;
              puVar8[2] = (pOVar11->comRegs).width;
              puVar6 = puVar8 + 3;
            } while (pOVar12 != (OSViMode *)&OS_VI_NTSC_LAN1.fldRegs[1].vBurst);
            uVar3 = (pOVar11->comRegs).vSync;
            puVar8[3] = OS_VI_NTSC_LAN1.fldRegs[1].vBurst;
            puVar8[4] = uVar3;
          }
        }
        viMode._0_4_ = (OSViMode *)&DAT_80060828;
        viMode.comRegs.ctrl = DAT_80060844;
        viMode.comRegs.width = DAT_80060858;
        viMode.comRegs.burst = DAT_8006086c;
        video_store_A0_plus_2_to_off_D_800232BC(0);
      }
      else {
        if (cVar7 == '\x02') {
          if (_osTVType == 2) {
            viMode._0_4_ = &OS_VI_MPAL_HAF1;
          }
          else {
            viMode._0_4_ = &OS_VI_NTSC_HAF1;
          }
          viMode.comRegs.ctrl = ((viMode._0_4_)->comRegs).hStart;
          viMode.comRegs.width = (viMode._0_4_)->fldRegs[0].vStart;
          viMode.comRegs.burst = (viMode._0_4_)->fldRegs[1].vStart;
          osViBlack('\0');
        }
      }
    }
    osViSetSpecialFeatures(0x42);
    cVar7 = *(char *)&ptr_video_settings2->anonymous_0;
    sVar2 = ptr_video_settings2->txtClipW;
  }
  __src = ptr_video_settings2;
  fVar16 = (float)(int)ptr_video_settings2->txtClipH / (float)(int)ptr_video_settings2->anonymous_8;
  if (cVar7 == '\0') {
    fVar16 = 1.00000000;
  }
  iVar9 = dword_800232C0 * 4;
  dword_800230B0[dword_800232C0 + 1] =
       (float)(int)sVar2 / (float)(int)ptr_video_settings2->anonymous_7;
  dword_800230B0[dword_800232C0 + 3] = fVar16;
  CVar5 = coloroutputmode;
  if (*(char *)&__src->anonymous_0 == '\x01') {
    bVar1 = coloroutputmode == 32BIT;
    *(undefined4 *)(&DAT_8005dbe0 + iVar9) = 0x80060828;
    if (bVar1) {
      if (_osTVType == 2) {
        puVar8 = (u32 *)(&DAT_8005db40 + dword_800232C0 * 0x50);
        pOVar12 = &OS_VI_MPAL_LAN2;
        puVar6 = puVar8;
        do {
          puVar15 = puVar6;
          pOVar11 = pOVar12;
          pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
          *puVar15 = *(u32 *)pOVar11;
          puVar15[1] = (pOVar11->comRegs).ctrl;
          puVar15[2] = (pOVar11->comRegs).width;
          puVar6 = puVar15 + 3;
        } while (pOVar12 != (OSViMode *)&OS_VI_MPAL_LAN2.fldRegs[1].vBurst);
        puVar15[3] = OS_VI_MPAL_LAN2.fldRegs[1].vBurst;
        puVar15[4] = (pOVar11->comRegs).vSync;
      }
      else {
        puVar8 = (u32 *)(&DAT_8005db40 + dword_800232C0 * 0x50);
        pOVar12 = &OS_VI_NTSC_LAN2;
        puVar6 = puVar8;
        do {
          puVar15 = puVar6;
          pOVar11 = pOVar12;
          pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
          *puVar15 = *(u32 *)pOVar11;
          puVar15[1] = (pOVar11->comRegs).ctrl;
          puVar15[2] = (pOVar11->comRegs).width;
          puVar6 = puVar15 + 3;
        } while (pOVar12 != (OSViMode *)&OS_VI_NTSC_LAN2.fldRegs[1].vBurst);
        puVar15[3] = OS_VI_NTSC_LAN2.fldRegs[1].vBurst;
        puVar15[4] = (pOVar11->comRegs).vSync;
      }
    }
    else {
      if (_osTVType == 2) {
        puVar8 = (u32 *)(&DAT_8005db40 + dword_800232C0 * 0x50);
        pOVar12 = &OS_VI_MPAL_LAN1;
        puVar6 = puVar8;
        do {
          puVar15 = puVar6;
          pOVar11 = pOVar12;
          pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
          *puVar15 = *(u32 *)pOVar11;
          puVar15[1] = (pOVar11->comRegs).ctrl;
          puVar15[2] = (pOVar11->comRegs).width;
          puVar6 = puVar15 + 3;
        } while (pOVar12 != (OSViMode *)&OS_VI_MPAL_LAN1.fldRegs[1].vBurst);
        puVar15[3] = OS_VI_MPAL_LAN1.fldRegs[1].vBurst;
        puVar15[4] = (pOVar11->comRegs).vSync;
      }
      else {
        puVar8 = (u32 *)(&DAT_8005db40 + dword_800232C0 * 0x50);
        pOVar12 = &OS_VI_NTSC_LAN1;
        puVar6 = puVar8;
        do {
          puVar15 = puVar6;
          pOVar11 = pOVar12;
          pOVar12 = (OSViMode *)&(pOVar11->comRegs).burst;
          *puVar15 = *(u32 *)pOVar11;
          puVar15[1] = (pOVar11->comRegs).ctrl;
          puVar15[2] = (pOVar11->comRegs).width;
          puVar6 = puVar15 + 3;
        } while (pOVar12 != (OSViMode *)&OS_VI_NTSC_LAN1.fldRegs[1].vBurst);
        puVar15[3] = OS_VI_NTSC_LAN1.fldRegs[1].vBurst;
        puVar15[4] = (pOVar11->comRegs).vSync;
      }
    }
    puVar8[2] = (int)__src->anonymous_7;
    puVar8[8] = ((int)__src->anonymous_7 << 10) / 0x280;
    iVar13 = (int)__src->anonymous_8 << 0xb;
    puVar8[0xb] = iVar13 / 0x1e0;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar13 == -0x80000000)) {
      trap(0x1800);
    }
    iVar13 = (int)__src->anonymous_8 << 0xb;
    puVar8[0x10] = iVar13 / 0x1e0;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar13 == -0x80000000)) {
      trap(0x1800);
    }
    puVar8[10] = (int)__src->anonymous_7 << 1;
    puVar8[0xf] = (int)__src->anonymous_7 << 1;
    iVar13 = ((int)puVar8[7] >> 0x10 & 0xffffU) + video_mp_related_8002329C;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar13 == -0x80000000)) {
      trap(0x1800);
    }
    iVar14 = (puVar8[7] & 0xffff) + video_mp_related_8002329C;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar14 == -0x80000000)) {
      trap(0x1800);
    }
    viMode.comRegs.ctrl = iVar13 % 0xffff << 0x10 | iVar14 % 0xffff;
    puVar8[7] = viMode.comRegs.ctrl;
    sVar4 = video_mp_related_800232A0;
    iVar13 = ((int)puVar8[0xc] >> 0x10 & 0xffffU) + video_mp_related_800232A0;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar13 == -0x80000000)) {
      trap(0x1800);
    }
    iVar14 = (puVar8[0xc] & 0xffff) + video_mp_related_800232A0;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar14 == -0x80000000)) {
      trap(0x1800);
    }
    viMode.comRegs.width = iVar13 % 0xffff << 0x10 | iVar14 % 0xffff;
    puVar8[0xc] = viMode.comRegs.width;
    iVar13 = ((int)puVar8[0x11] >> 0x10 & 0xffffU) + sVar4;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar13 == -0x80000000)) {
      trap(0x1800);
    }
    iVar14 = (puVar8[0x11] & 0xffff) + sVar4;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar14 == -0x80000000)) {
      trap(0x1800);
    }
    viMode.comRegs.burst = iVar13 % 0xffff << 0x10 | iVar14 % 0xffff;
    puVar8[0x11] = viMode.comRegs.burst;
    *(undefined4 *)(&DAT_800230c4 + iVar9) = 1;
  }
  else {
    *(undefined4 *)(&DAT_800230c4 + iVar9) = 0;
  }
  uVar10 = dword_800232C0 + 1;
  dword_800232C0 = uVar10 & 1;
  if (((int)uVar10 < 0) && (dword_800232C0 != 0)) {
    dword_800232C0 -= 2;
  }
  if (CVar5 == 32BIT) {
    *(undefined4 *)(fast3d_related_array + 0x58) = 0x803b5000;
  }
  else {
    *(int *)(fast3d_related_array + 0x58) = __src->frameb;
  }
  __src = ptr_video_settings2;
  DAT_80060878 = DAT_80060878 + 1 & 1;
  if ((false) && (DAT_80060878 != 0)) {
    DAT_80060878 -= 2;
  }
  DAT_80060879 = DAT_80060879 + 1 & 1;
  if ((false) && (DAT_80060879 != 0)) {
    DAT_80060879 -= 2;
  }
  ptr_video_settings1 = &video1_settings + (uint)DAT_80060878;
  ptr_video_settings2 = &video1_settings + (uint)DAT_80060879;
  _bcopy(__src,ptr_video_settings2,0x2c);
  *(undefined1 **)&ptr_video_settings2->frameb =
       cfb_16_a +
       (((uint)DAT_80060879 * 0x14 - (uint)DAT_80060879) * 4 - (uint)DAT_80060879) * 0x800;
  return;
}



void video_related_9(float param_1)

{
  float fVar1;
  
  fVar1 = 14.00000000;
  if (param_1 <= 14.00000000) {
    fVar1 = param_1;
  }
  if (fVar1 < 0.00000000) {
    dword_800232B4 = 0;
  }
  else {
    dword_800232B4 = (int)fVar1;
  }
  dword_800232B8 = 10;
  return;
}



void receive_vi_c_msgs(int msgcount)

{
  do {
    osRecvMesg(&vi_c_debug_MQ,NULL,1);
    msgcount += -1;
  } while (0 < msgcount);
  return;
}



void setVideoWidthHeightToMode(int videomode)

{
  u16 uVar1;
  
  *(char *)&ptr_video_settings2->anonymous_0 = (char)videomode;
  uVar1 = widths_80028480[videomode];
  ptr_video_settings2->anonymous_7 = uVar1;
  ptr_video_settings2->txtClipW = uVar1;
  uVar1 = heights_80028488[videomode];
  ptr_video_settings2->anonymous_8 = uVar1;
  ptr_video_settings2->txtClipH = uVar1;
  return;
}



void set_coloroutputmode_16bit(void)

{
  coloroutputmode = 16BIT;
  return;
}



void set_coloroutputmode_32bit(void)

{
  coloroutputmode = 32BIT;
  return;
}



int get_video_settings2_frameb(void)

{
  return ptr_video_settings2->frameb;
}



int get_video_settings1_frameb(void)

{
  return ptr_video_settings1->frameb;
}



void set_video_settings2_frameb(int framebuffer)

{
  ptr_video_settings2->frameb = framebuffer;
  return;
}



ulonglong get_80060824(void)

{
  return (ulonglong)DAT_80060824;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

uint * proc_70003C58(uint *param_1)

{
  short sVar1;
  uint *puVar2;
  undefined4 local_c;
  undefined4 local_8;
  undefined4 local_4;
  undefined4 local_20;
  float local_1c;
  float fovy;
  float aspect;
  undefined in_stack_00000000 [32];
  undefined4 local_18;
  undefined8 in_stack_ffffffec;
  
  if (ptr_BONDdata != NULL) {
    *(short *)(&ptr_BONDdata->field_7D0 + (uint)DAT_80060879 * 4) =
         (short)((int)ptr_video_settings2->width << 1);
    *(short *)(&ptr_BONDdata->field_7D8 + (uint)DAT_80060879 * 4) =
         (short)((int)ptr_video_settings2->width << 1) + (short)((int)ptr_video_settings2->ulx << 2)
    ;
    *(undefined2 *)((int)&ptr_BONDdata->field_7D0 + (uint)DAT_80060879 * 0x10 + 2) =
         (short)((int)ptr_video_settings2->height << 1);
    *(short *)((int)&ptr_BONDdata->field_7D8 + (uint)DAT_80060879 * 0x10 + 2) =
         (short)((int)ptr_video_settings2->height << 1) +
         (short)((int)ptr_video_settings2->uly << 2);
  }
  *param_1 = 0x3800010;
  *(int **)(param_1 + 1) = &ptr_BONDdata[0x30303].field_850 + (uint)DAT_80060879 * 4;
  puVar2 = param_1;
  proc_7F0BD6E0();
  local_20 = ptr_video_settings2->aspect;
  local_1c = ptr_video_settings2->anonymous_6;
  local_18 = 0x3f800000;
  DAT_80060820 = puVar2;
  guPerspectiveF((float  [4] [4])
                 CONCAT3232(CONCAT284(CONCAT244(CONCAT204(CONCAT128(CONCAT84(*(undefined8 *)
                                                                              &ptr_video_settings2->
                                                                               aspect,0x3f800000),
                                                                    in_stack_ffffffec),local_c),
                                                local_8),local_4),in_stack_00000000),
                 (u16 *)&DAT_800607e0,fovy,aspect,(float)&DAT_80060824,ptr_video_settings2->far,
                 ptr_video_settings2->scale);
  guMtxF2L((float  [4] [4])
           CONCAT3232(CONCAT284(CONCAT244(CONCAT204(CONCAT128(CONCAT84(CONCAT44(local_20,local_1c),
                                                                       local_18),in_stack_ffffffec),
                                                    local_c),local_8),local_4),in_stack_00000000),
           (Mtx *)&DAT_800607e0);
  param_1[2] = 0x1030040;
  *(uint **)(param_1 + 3) = DAT_80060820 + -0x20000000;
  param_1[4] = 0xbc00000e;
  param_1[5] = (uint)DAT_80060824;
  proc_7F078364(DAT_80060820);
  proc_7F0783D4(&DAT_800607e0);
  if (coloroutputmode == 32BIT) {
    sVar1 = ptr_video_settings2->anonymous_7;
    param_1[7] = 0x3b5000;
    param_1[6] = (int)sVar1 - 1U & 0xfff | 0xff180000;
  }
  else {
    param_1[6] = (int)ptr_video_settings2->anonymous_7 - 1U & 0xfff | 0xff100000;
    param_1[7] = ptr_video_settings2->frameb + 0x80000000;
  }
  return param_1 + 8;
}



undefined4 * proc_70003EB4(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  if (ptr_video_settings2->anonymous_12 != 0) {
    puVar1 = proc_7F0D2464(param_1);
    param_1 = proc_7F0D2518(puVar1);
  }
  return param_1;
}



undefined4 * insert_generic_fillrect(undefined4 *param_1)

{
  param_1[1] = 0x300000;
  *param_1 = 0xba001402;
  param_1[2] = ((int)ptr_video_settings2->anonymous_7 - 1U & 0x3ff) << 0xe | 0xf6000000 |
               ((int)ptr_video_settings2->anonymous_8 - 1U & 0x3ff) << 2;
  param_1[3] = 0;
  param_1[4] = 0xe7000000;
  param_1[5] = 0;
  return param_1 + 6;
}



uint * setupscreensfornumplayers(undefined4 *param_1)

{
  short txtClipW;
  short txtClipH;
  short uly;
  int curplayernum;
  int iVar2;
  short sVar3;
  short sVar4;
  ulonglong uVar1;
  short sVar5;
  u32 playercount;
  short sVar6;
  uint *puVar7;
  uint *puVar8;
  
  param_1[1] = 0x300000;
  *param_1 = 0xba001402;
  param_1[2] = 0xed000000;
  txtClipW = get_video2_settings_txtClipW();
  txtClipH = get_video2_settings_txtClipH();
  puVar7 = param_1 + 6;
  param_1[3] = (int)((float)(int)txtClipH * 4.00000000) & 0xfffU |
               ((int)((float)(int)txtClipW * 4.00000000) & 0xfffU) << 0xc;
  param_1[5] = 0x10001;
  param_1[4] = 0xf7000000;
  uly = get_video2_settings_uly();
  if (0 < uly) {
    curplayernum = get_cur_playernum();
    iVar2 = proc_7F09B4D8(curplayernum);
    if (iVar2 == 0) {
      sVar3 = get_video2_settings_txtClipW();
      sVar4 = get_video2_settings_uly();
      *puVar7 = ((int)sVar4 - 1U & 0x3ff) << 2 | 0xf6000000 | ((int)sVar3 - 1U & 0x3ff) << 0xe;
      param_1[7] = 0;
      param_1[8] = 0xe7000000;
      param_1[9] = 0;
      puVar7 = param_1 + 10;
    }
  }
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    sVar3 = get_video2_settings_height();
    sVar4 = get_video2_settings_uly();
    sVar5 = get_video2_settings_txtClipH();
    if ((longlong)sVar5 <= (longlong)((int)sVar4 + (int)sVar3)) {
      return puVar7;
    }
    sVar3 = get_video2_settings_txtClipW();
    sVar4 = get_video2_settings_txtClipH();
    *puVar7 = ((int)sVar4 - 1U & 0x3ff) << 2 | 0xf6000000 | ((int)sVar3 - 1U & 0x3ff) << 0xe;
    sVar3 = get_video2_settings_uly();
    sVar4 = get_video2_settings_height();
    puVar7[1] = ((int)sVar4 + (int)sVar3 & 0x3ffU) << 2;
    puVar7[3] = 0;
    puVar7[2] = 0xe7000000;
    puVar8 = puVar7;
  }
  else {
    playercount = get_cur_playernum();
    iVar2 = proc_7F09B4D8(playercount);
    if (iVar2 != 0) {
      return puVar7;
    }
    sVar3 = get_video2_settings_height();
    sVar4 = get_video2_settings_height();
    sVar5 = get_video2_settings_uly();
    sVar6 = get_video2_settings_txtClipH();
    if ((longlong)((int)sVar5 + (int)sVar4 + (int)sVar3) < (longlong)sVar6) {
      sVar3 = get_video2_settings_txtClipW();
      sVar4 = get_video2_settings_txtClipH();
      *puVar7 = ((int)sVar4 - 1U & 0x3ff) << 2 | 0xf6000000 | ((int)sVar3 - 1U & 0x3ff) << 0xe;
      sVar3 = get_video2_settings_height();
      sVar4 = get_video2_settings_uly();
      sVar5 = get_video2_settings_height();
      puVar7[1] = ((int)sVar5 + (int)sVar4 + (int)sVar3 & 0x3ffU) << 2;
      puVar7[2] = 0xe7000000;
      puVar7[3] = 0;
      puVar7 = puVar7 + 4;
    }
    sVar3 = get_video2_settings_txtClipW();
    puVar7[1] = 0x1dc;
    *puVar7 = ((int)sVar3 - 1U & 0x3ff) << 0xe | 0xf60001e0;
    puVar7[2] = 0xe7000000;
    puVar7[3] = 0;
    puVar8 = puVar7 + 4;
    uVar1 = get_num_players();
    if (2 < (longlong)uVar1) {
      sVar3 = get_video2_settings_txtClipH();
      *puVar8 = ((int)sVar3 - 1U & 0x3ff) << 2 | 0xf6280000;
      puVar7[5] = 0x27c000;
      puVar7[6] = 0xe7000000;
      puVar7[7] = 0;
      puVar8 = puVar7 + 8;
    }
    uVar1 = get_num_players();
    if (uVar1 != 3) {
      return puVar8;
    }
    sVar3 = get_video2_settings_txtClipW();
    sVar4 = get_video2_settings_txtClipH();
    *puVar8 = ((int)sVar4 - 1U & 0x3ff) << 2 | 0xf6000000 | ((int)sVar3 - 1U & 0x3ff) << 0xe;
    puVar8[1] = 0x2841e4;
    puVar8[2] = 0xe7000000;
    puVar8[3] = 0;
  }
  return puVar8 + 4;
}



void set_video_mp_related_800232A0(s32 param_1)

{
  video_mp_related_800232A0 = param_1;
  return;
}



s32 get_video_mp_related_800232A0(void)

{
  return video_mp_related_800232A0;
}



void set_video_mp_related_8002329C(undefined4 param_1)

{
  video_mp_related_8002329C = param_1;
  return;
}



undefined4 get_video_mp_related_8002329C(void)

{
  return video_mp_related_8002329C;
}



void set_video2_settings_offset_18_1A(short param_1,short param_2)

{
  ptr_video_settings2->anonymous_7 = param_1;
  ptr_video_settings2->anonymous_8 = param_2;
  return;
}



short get_video2_settings_offset_18(void)

{
  return ptr_video_settings2->anonymous_7;
}



short get_video2_settings_offset_1A(void)

{
  return ptr_video_settings2->anonymous_8;
}



void set_video2_text_clip_size(short txtClipW,short txtClipH)

{
  ptr_video_settings2->txtClipW = txtClipW;
  ptr_video_settings2->txtClipH = txtClipH;
  return;
}



short get_video2_settings_txtClipW(void)

{
  return ptr_video_settings2->txtClipW;
}



short get_video2_settings_txtClipH(void)

{
  return ptr_video_settings2->txtClipH;
}



void set_video2_width_height(short width,short height)

{
  ptr_video_settings2->width = width;
  ptr_video_settings2->height = height;
  set_BONDdata_screensize
            ((float)(int)ptr_video_settings2->width,(float)(int)ptr_video_settings2->height);
  proc_7F077C5C();
  return;
}



short get_video2_settings_width(void)

{
  return ptr_video_settings2->width;
}



short get_video2_settings_height(void)

{
  return ptr_video_settings2->height;
}



void set_video2_ulx_uly(short ulx,short uly)

{
  ptr_video_settings2->ulx = ulx;
  ptr_video_settings2->uly = uly;
  set_ulx_uly((f32)(float)(int)ptr_video_settings2->ulx,(f32)(float)(int)ptr_video_settings2->uly);
  return;
}



short get_video2_settings_ulx(void)

{
  return ptr_video_settings2->ulx;
}



short get_video2_settings_uly(void)

{
  return ptr_video_settings2->uly;
}



void set_video2_settings_offset_24(int param_1)

{
  ptr_video_settings2->anonymous_12 = param_1;
  return;
}



void video_related_1F(f32 param_1)

{
  f32 in_a0_lo;
  f32 in_a1_lo;
  
  *(f32 *)&ptr_video_settings2->far = param_1;
  proc_7F077C30((f32)ptr_video_settings2->aspect,(f32)ptr_video_settings2->far,in_a0_lo,in_a1_lo,
                (f32)ptr_video_settings2->scale);
  proc_7F077C5C();
  return;
}



void video_related_21(f32 param_1)

{
  f32 in_a0_lo;
  f32 in_a1_lo;
  
  *(f32 *)&ptr_video_settings2->scale = param_1;
  proc_7F077C30((f32)ptr_video_settings2->aspect,(f32)ptr_video_settings2->far,in_a0_lo,in_a1_lo,
                (f32)ptr_video_settings2->scale);
  proc_7F077C5C();
  return;
}



undefined4 video_related_23(void)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



void video_related_24(float param_1,float param_2,float param_3)

{
  f32 in_a1_lo;
  
  ptr_video_settings2->far = param_2;
  ptr_video_settings2->scale = param_1 / param_2;
  proc_7F077C30((f32)ptr_video_settings2->aspect,(f32)ptr_video_settings2->far,(f32)param_3,in_a1_lo
                ,(f32)ptr_video_settings2->scale);
  proc_7F077C5C();
  return;
}



void set_page_height(f32 param_1,f32 param_2)

{
  f32 in_a0_lo;
  f32 in_a1_lo;
  
  *(f32 *)&ptr_video_settings2->aspect = param_1;
  *(f32 *)&ptr_video_settings2->anonymous_6 = param_2;
  proc_7F077C30((f32)ptr_video_settings2->aspect,(f32)ptr_video_settings2->far,in_a0_lo,in_a1_lo,
                (f32)ptr_video_settings2->scale);
  proc_7F077C5C();
  return;
}



void video_related_27(undefined4 *param_1)

{
  *(float *)param_1 = ptr_video_settings2->aspect;
  *(float *)(param_1 + 1) = ptr_video_settings2->anonymous_6;
  return;
}



undefined4 * set_setfillcolor(undefined4 *DL,uint red,uint green,int blue)

{
  uint uVar1;
  
  if (coloroutputmode != 32BIT) {
    uVar1 = (red & 0xf8) << 8 | (green & 0xf8) << 3 | blue >> 2 & 0x3eU | 1;
    *DL = 0xf7000000;
    DL[1] = uVar1 << 0x10 | uVar1;
    return DL + 2;
  }
  DL[1] = red << 0x18 | green << 0x10 | blue << 8 | 0xff;
  *DL = 0xf7000000;
  return DL + 2;
}



void indy_grab_jpg_16bit(void)

{
  int iVar1;
  short iWidth;
  short iHeight;
  undefined4 iFileSize;
  char iFileName [256];
  
  while( true ) {
    sprintf(iFileName,aGrab_D_jpeg_1,jpg_16bit_grabnum);
    iVar1 = check_file_found_on_indy(iFileName,&iFileSize);
    if (iVar1 == 0) break;
    jpg_16bit_grabnum += 1;
  }
  sprintf(iFileName,aGrab_D_temp_uix,jpg_16bit_grabnum);
  iWidth = get_video2_settings_txtClipW();
  iHeight = get_video2_settings_txtClipH();
  indy_send_capture_data
            (iFileName,(undefined *)ptr_video_settings2->frameb,(int)iHeight * (int)iWidth * 2);
  sprintf(iFileName,aUix2pixGrab_D_temp_uix,jpg_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aFromaliasGrab_D_temp_pixGrab_D_tem,jpg_16bit_grabnum,jpg_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgcopyFjfifGrab_D_temp_rgbGrab_D_,jpg_16bit_grabnum,jpg_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aRmGrab_D_temp_uixGrab_D_temp_pixGr,jpg_16bit_grabnum,jpg_16bit_grabnum,
          jpg_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgviewGrab_D_jpeg,jpg_16bit_grabnum);
  send_command_string(iFileName);
  return;
}



void indy_grab_jpg_32bit(void)

{
  int iVar1;
  short iWidth;
  short iHeight;
  undefined2 uVar2;
  undefined4 iFileSize;
  char iFileName [256];
  
  while( true ) {
    sprintf(iFileName,aGrab_D_jpeg,jpg_32bit_grabnum);
    iVar1 = check_file_found_on_indy(iFileName,&iFileSize);
    if (iVar1 == 0) break;
    jpg_32bit_grabnum += 1;
  }
  sprintf(iFileName,aGrab_D_temp_uix_0,jpg_32bit_grabnum);
  iWidth = get_video2_settings_txtClipW();
  iHeight = get_video2_settings_txtClipH();
  indy_send_capture_data(iFileName,cfb_16_a,(int)iHeight * (int)iWidth * 4);
  uVar2 = get_video2_settings_txtClipW();
  sprintf(iFileName,aUix2pixXsDGrab_D_temp_uix,uVar2,jpg_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aFromaliasGrab_D_temp_pixGrab_D_t_0,jpg_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgcopyFjfifGrab_D_temp_rgbGrab__0,jpg_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aRmGrab_D_temp_uixGrab_D_temp_pix_0,jpg_32bit_grabnum,jpg_32bit_grabnum,
          jpg_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgviewGrab_D_jpeg_0,jpg_32bit_grabnum);
  send_command_string(iFileName);
  return;
}



void indy_grab_rgb_16bit(void)

{
  int iVar1;
  short iWidth;
  short iHeight;
  undefined4 iFileSize;
  char iFileName [256];
  
  while( true ) {
    sprintf(iFileName,aGrab_D_rgb,rgb_16bit_grabnum);
    iVar1 = check_file_found_on_indy(iFileName,&iFileSize);
    if (iVar1 == 0) break;
    rgb_16bit_grabnum += 1;
  }
  sprintf(iFileName,aGrab_D_temp_uix_1,rgb_16bit_grabnum);
  iWidth = get_video2_settings_txtClipW();
  iHeight = get_video2_settings_txtClipH();
  indy_send_capture_data
            (iFileName,(undefined *)ptr_video_settings2->frameb,(int)iHeight * (int)iWidth * 2);
  sprintf(iFileName,aUix2pixGrab_D_temp_uix_0,rgb_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aFromaliasGrab_D_temp_pixGrab_D_rgb,rgb_16bit_grabnum,rgb_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aRmGrab_D_temp_uixGrab_D_temp_pix,rgb_16bit_grabnum,rgb_16bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgviewGrab_D_rgb,rgb_16bit_grabnum);
  send_command_string(iFileName);
  return;
}



undefined4 indy_grab_rgb_32bit(void)

{
  int iVar1;
  short iWidth;
  short iHeight;
  undefined2 uVar3;
  undefined4 uVar2;
  undefined4 iFileSize;
  char iFileName [256];
  
  while( true ) {
    sprintf(iFileName,aGrab_D_rgb_0,rgb_32bit_grabnum);
    iVar1 = check_file_found_on_indy(iFileName,&iFileSize);
    if (iVar1 == 0) break;
    rgb_32bit_grabnum += 1;
  }
  sprintf(iFileName,aGrab_D_temp_uix_2,rgb_32bit_grabnum);
  iWidth = get_video2_settings_txtClipW();
  iHeight = get_video2_settings_txtClipH();
  indy_send_capture_data(iFileName,cfb_16_a,(int)iHeight * (int)iWidth * 4);
  uVar3 = get_video2_settings_txtClipW();
  sprintf(iFileName,aUix2pixXsDGrab_D_temp_uix_0,uVar3,rgb_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aFromaliasGrab_D_temp_pixGrab_D_r_0,rgb_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aRmGrab_D_temp_uixGrab_D_temp_pix_1,rgb_32bit_grabnum);
  send_command_string(iFileName);
  sprintf(iFileName,aImgviewGrab_D_rgb_0,rgb_32bit_grabnum);
  uVar2 = send_command_string(iFileName);
  return uVar2;
}



int * return_match_in_debug_notice_list(char *name,char *data)

{
  longlong lVar1;
  byte *pbVar2;
  int *piVar3;
  
  if (debug_notice_list == 0) {
LAB_70004d68:
    piVar3 = NULL;
  }
  else {
    pbVar2 = *(byte **)(debug_notice_list + 8);
    piVar3 = (int *)debug_notice_list;
    while (lVar1 = something_with_strings_0(pbVar2,name), lVar1 != 0) {
      piVar3 = (int *)*piVar3;
      if (piVar3 == NULL) goto LAB_70004d68;
      pbVar2 = (byte *)piVar3[2];
    }
  }
  return piVar3;
}



void get_entry_of_size_in_debug_notice_list(int size)

{
  debug_notice_list_data = debug_notice_list_data + size;
  if (&thread_video_manager_debugthread < debug_notice_list_data) {
    debug_notice_list_data = debug_notice_list_data + -size;
    allocate_bytes_in_bank(size,6);
  }
  return;
}



void add_new_entry_to_debug_notice_list(dword name,dword data)

{
  dword *in_v0_lo;
  
  get_entry_of_size_in_debug_notice_list(0x10);
  *in_v0_lo = debug_notice_list;
  in_v0_lo[1] = data;
  in_v0_lo[2] = name;
  debug_notice_list = (dword)in_v0_lo;
  return;
}



void add_debug_notice_deb_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&deb_c_ptr_debug_notice_list_entry,aDeb_c_debug);
  init_tlb();
  return;
}



void get_ptr_debug_notice_list_entry(undefined4 data,char *name)

{
  int *piVar1;
  
  piVar1 = return_match_in_debug_notice_list(name,name);
  if (piVar1 == NULL) {
    add_new_entry_to_debug_notice_list(name,data);
  }
  return;
}



void scan_debug_notice_list_till_NULL(void)

{
  undefined4 *puVar1;
  
  if (debug_notice_list != 0) {
    puVar1 = *(undefined4 **)debug_notice_list;
    while (puVar1 != NULL) {
      puVar1 = (undefined4 *)*puVar1;
    }
  }
  return;
}



void proc_70004EBC(void)

{
  return;
}



void debug_removed(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  return;
}



void init_tlb(void)

{
  set_video_buffer_pointers();
  osCreateMesgQueue(&interrupt_entry_c_buffer,&OSMesg_80063658,1);
  osCreateThread((OSThread *)&thread_video_manager_debugthread,5,translate_7F_address,NULL,&sp_tlb,
                 0x28);
  osStartThread((OSThread *)&thread_video_manager_debugthread);
  return;
}



// this clever function abuses watching for a faulted thread to load the right code to tlb the jump
// to it
// 

void translate_7F_address(void *param_1)

{
  OSIntMask save_mask;
  OSMesg pvStack4;
  
  pvStack4 = NULL;
  osSetEventMesg(OS_EVENT_FAULT,&interrupt_entry_c_buffer,0x10);
  DAT_80063660 = 0;
  while( true ) {
    do {
      osRecvMesg(&interrupt_entry_c_buffer,&pvStack4,1);
      save_mask = osSetIntMask(1);
      missingthread = __osGetCurrFaultedThread();
    } while (missingthread == NULL);
    if ((((missingthread->context).badvaddr & 0x7c) != 8) ||
       (((missingthread->context).rcp & 0xffc00000) != 0x7f000000)) break;
    translate_load_rom_from_TLBaddress((void *)(missingthread->context).rcp);
    missingthread->state = 10;
    missingthread->flags = 0;
    __osEnqueueThread(&__osRunQueue,missingthread);
    osSetIntMask(save_mask);
    osYieldThread();
  }
  osSetIntMask(save_mask);
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



int debug_related_8(uint *op_cur,uint *op_start,int fn_sp,undefined4 *fn_reg)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  undefined4 *puVar4;
  short sVar5;
  uint uVar6;
  
  bVar2 = false;
  bVar1 = false;
  iVar3 = 0;
  puVar4 = fn_reg;
  do {
    iVar3 += 4;
    *puVar4 = 0;
    puVar4[1] = 0;
    puVar4[2] = 0;
    puVar4[3] = 0;
    puVar4 = puVar4 + 4;
  } while (iVar3 != 0x20);
  if (op_cur < op_start) {
LAB_700051b8:
    if (bVar2) {
      if (!bVar1) {
        fn_sp = 0;
      }
    }
    else {
      fn_sp = 0;
    }
    return fn_sp;
  }
  uVar6 = *op_cur;
  do {
    op_cur = op_cur + -1;
    sVar5 = (short)uVar6;
    if ((uVar6 & 0xffff0000) == 0x27bd0000) {
      bVar2 = true;
      if ((0 < (int)sVar5) || (fn_sp += ((int)sVar5 >> 2) * -4, bVar1)) goto LAB_700051b8;
    }
    else {
      if ((uVar6 & 0xffe00000) == 0xafa00000) {
        uVar6 = uVar6 >> 0x10 & 0x1f;
        fn_reg[uVar6] = ((int)sVar5 >> 2) * 4 + fn_sp;
        if (uVar6 == 0x1f) {
          bVar1 = true;
        }
        if ((bVar2) && (bVar1)) goto LAB_700051b8;
      }
      else {
        if (uVar6 == 0x3e00008) goto LAB_700051b8;
      }
    }
    if (op_cur < op_start) goto LAB_700051b8;
    uVar6 = *op_cur;
  } while( true );
}



BOOL was_opcode_a_jal_r_within_70000450_70020D90(u32 *function)

{
  if (((((uint)function & 3) == 0) && ((u32 *)0x7000044f < function)) &&
     (function < (u32 *)0x70020d91)) {
    if ((function[-2] & 0xfc00003c) == 9) {
      return TRUE;
    }
    if ((function[-2] & 0xfc000000) == 0xc000000) {
      return TRUE;
    }
  }
  return FALSE;
}



int return_strlen(char *str)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  
  iVar2 = 0;
  pcVar3 = str + 1;
  if (*str != '\0') {
    iVar2 = 1;
    while ((iVar2 < 0x100 && (cVar1 = *pcVar3, pcVar3 = pcVar3 + 1, cVar1 != '\0'))) {
      iVar2 += 1;
    }
  }
  return iVar2;
}



uint indy_file_get_address_subsequent_data(int hardware_address)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  
  romCopy(ARRAY_80063670,(void *)hardware_address,0x60);
  current_indy_read_buf_resourceID = ARRAY_80063670._0_4_;
  PTR_80063668 = ARRAY_80063670 + 4;
  iVar1 = return_strlen(ARRAY_80063670 + 4);
  PTR_8006366c = PTR_80063668 + iVar1 + 1;
  iVar1 = return_strlen(PTR_80063668);
  iVar2 = return_strlen(PTR_8006366c);
  uVar3 = iVar2 + hardware_address + iVar1 + 6;
  if ((uVar3 & 3) != 0) {
    uVar3 = (uVar3 | 3) + 1;
  }
  return uVar3;
}



undefined8 scan_load_resourceID_from_indy_read_buf(uint resourceID)

{
  uint uVar1;
  uint hardware_address;
  uint hardware_address_00;
  
  hardware_address_00 = 0xe00004;
  hardware_address = 0xe00004;
  do {
    uVar1 = indy_file_get_address_subsequent_data(hardware_address);
    if (resourceID < current_indy_read_buf_resourceID) {
      indy_file_get_address_subsequent_data(hardware_address_00);
      return 1;
    }
    hardware_address_00 = hardware_address;
    hardware_address = uVar1;
  } while (current_indy_read_buf_resourceID != 0);
  return 0;
}



ulonglong is_valid_indy_read_buf_resourceID(void)

{
  indy_file_get_address_subsequent_data(0xe00000);
  return (ulonglong)(current_indy_read_buf_resourceID == -0x7d9b8a42);
}



void debug_indy_stub(void)

{
  return;
}



void debug_indy_stub_0(void)

{
  return;
}



void debug_indy_stub_1(void)

{
  return;
}



undefined4 return_indy_read_buf_resourceID(void)

{
  return current_indy_read_buf_resourceID;
}



uint debug_sp_related_11(void *addressspace,u32 entrynum)

{
  uint uVar1;
  uint local_28 [5];
  int local_14 [5];
  
  if (((int)entrynum < 1) || (5 < entrynum)) {
    uVar1 = 0;
  }
  else {
    uVar1 = local_28[entrynum];
    if (addressspace < &UT_VEC) {
      uVar1 = (uint)addressspace & 0xf0000000 | uVar1 - local_14[entrynum];
    }
  }
  return uVar1;
}



uint debug_sp_related_12(void *addressspace,u32 entrynum)

{
  uint uVar1;
  uint local_14 [5];
  
  if (((int)entrynum < 1) || (5 < entrynum)) {
    uVar1 = 0;
  }
  else {
    uVar1 = local_14[entrynum];
    if (addressspace < &UT_VEC) {
      uVar1 = (uint)addressspace & 0xf0000000;
    }
  }
  return uVar1;
}



BOOL _is_normal_single_precision_float(f32 fnum)

{
  bool bVar1;
  BOOL ret;
  uint uVar2;
  
  bVar1 = ((uint)fnum & 0x7fffff) == 0;
  ret = (BOOL)bVar1;
  if (!bVar1) {
    uVar2 = (uint)fnum >> 0x17 & 0xff;
    ret = (BOOL)(uVar2 != 0);
    if (uVar2 != 0) {
      ret = (BOOL)(uVar2 != 0xff);
    }
  }
  return ret;
}



void is_normal_single_precision_float(undefined8 target,uint float)

{
  _is_normal_single_precision_float((f32)float);
  return;
}



void set_normality_of_single_precision_floats
               (u64 target,f32 param_2,f32 param_3,f32 param_4,f32 param_5)

{
  int iVar1;
  uint float;
  uint float_00;
  
  iVar1 = (int)target;
  is_normal_single_precision_float(target,(uint)param_4);
  is_normal_single_precision_float((longlong)(iVar1 + 2),(uint)param_5);
  is_normal_single_precision_float((longlong)(iVar1 + 4),float);
  is_normal_single_precision_float((longlong)(iVar1 + 6),float_00);
  return;
}



void proc_70005628(void)

{
  return;
}



// WARNING: Instruction at (ram,0x70005668) overlaps instruction at (ram,0x70005664)
// 

void write_char_to_pos_stderr(int xpos,int ypos,byte letter)

{
  if ((letter == 9) || (letter == 10)) {
    letter = 0;
  }
  if (((letter != 0) && (letter < 0x20)) || (0x7e < letter)) {
    letter = 0x3f;
  }
  if (((-1 < xpos) && (xpos < 0x48)) && ((-1 < ypos && (ypos < 0x20)))) {
    stderr_buffer[ypos * 0x47 + xpos] = letter;
  }
  return;
}



u32 __osRdbSend(u8 *buf,u32 size,u32 type)

{
  u32 uVar1;
  longlong lVar2;
  longlong extraout_a1;
  ulonglong letter;
  ulonglong extraout_a2;
  
  lVar2 = (longlong)(int)size;
  letter = (longlong)(int)buf & 0xff;
  uVar1 = (u32)letter;
  letter._7_1_ = (byte)letter;
  if (letter != 0) {
    if (letter == 9) {
      do {
        uVar1 = __osRdbSend((u8 *)"GOLDENEYE           ",(u32)lVar2,(u32)letter);
        lVar2 = extraout_a1;
        letter = extraout_a2;
      } while ((stderr_buffer._2272_4_ & 7) != 0);
    }
    else {
      if (letter == 10) {
        stderr_buffer._2276_4_ += 1;
        stderr_buffer._2272_4_ = 0;
      }
      if (0x1e < stderr_buffer._2276_4_) {
        scroll_stderr_oneline((longlong)(stderr_buffer._2276_4_ + -0x1e));
        letter = SEXT48((int)uVar1);
        stderr_buffer._2276_4_ = 0x1e;
      }
      uVar1 = (u32)letter;
      if (letter != 10) {
        write_char_to_pos_stderr(stderr_buffer._2272_4_,stderr_buffer._2276_4_,(byte)letter);
        stderr_buffer._2272_4_ += 1;
        if (0x46 < (int)stderr_buffer._2272_4_) {
          stderr_buffer._2272_4_ = 0;
          stderr_buffer._2276_4_ += 1;
        }
      }
    }
  }
  return uVar1;
}



void scroll_stderr_oneline(longlong ypos)

{
  int iVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined *puVar4;
  undefined1 *puVar5;
  
  iVar3 = (int)ypos;
  if (0 < ypos) {
    do {
      iVar3 += -1;
      puVar5 = stderr_buffer;
      puVar2 = puVar5;
      do {
        iVar1 = 3;
        *puVar5 = puVar5[0x47];
        puVar5[1] = puVar5[0x48];
        puVar5[2] = puVar5[0x49];
        puVar4 = puVar2 + 3;
        do {
          iVar1 += 4;
          puVar4[1] = puVar4[0x48];
          puVar4[2] = puVar4[0x49];
          puVar4[3] = puVar4[0x4a];
          *puVar4 = puVar4[0x47];
          puVar4 = puVar4 + 4;
        } while (iVar1 != 0x47);
        puVar5 = puVar5 + 0x47;
        puVar2 = puVar2 + 0x47;
      } while (puVar5 != stderr_buffer + 0x899);
    } while (0 < iVar3);
  }
  return;
}



void print_to_vidbuff1(int xpos,int ypos,byte char)

{
  short sVar1;
  undefined2 *puVar2;
  ulonglong uVar3;
  int iVar4;
  uint uVar5;
  
  sVar1 = get_video2_settings_txtClipW();
  uVar3 = (ulonglong)char;
  if (char == 0) {
    uVar3 = 0x20;
  }
  if ((char == 0 || 0x1f < char) && (uVar3 < 0x7f)) {
    uVar5 = *(uint *)(stderr_buffer + (int)uVar3 * 4 + 0x868);
    iVar4 = 0;
    puVar2 = (undefined2 *)(ptr_videobuffer1 + ypos * (int)sVar1 * 2 + xpos * 2);
    do {
      if ((uVar5 & 0x80000000) == 0) {
        *puVar2 = 1;
      }
      else {
        *puVar2 = 0xffff;
      }
      if ((uVar5 & 0x40000000) == 0) {
        puVar2[1] = 1;
      }
      else {
        puVar2[1] = 0xffff;
      }
      if ((uVar5 & 0x20000000) == 0) {
        puVar2[2] = 1;
      }
      else {
        puVar2[2] = 0xffff;
      }
      if ((uVar5 & 0x10000000) == 0) {
        puVar2[3] = 1;
      }
      else {
        puVar2[3] = 0xffff;
      }
      iVar4 += 1;
      uVar5 <<= 4;
      puVar2 = puVar2 + (int)sVar1;
    } while (iVar4 != 7);
  }
  return;
}



void set_ptr_video_buffers(uint *buffer1,uint *buffer2)

{
  ptr_videobuffer1 = (undefined *)((uint)buffer1 | 0xa0000000);
  ptr_videobuffer2 = (undefined *)((uint)buffer2 | 0xa0000000);
  return;
}



void set_video_buffer_pointers(void)

{
  set_ptr_video_buffers((uint *)cfb_16_a,(uint *)cfb_16_b);
  return;
}



void write_stderr_to_buffer(void *buffer)

{
  short sVar1;
  int iVar2;
  int xpos;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  
  set_video_buffer_pointers();
  ptr_videobuffer1 = (undefined *)((uint)buffer | 0xa0000000);
  sVar1 = get_video2_settings_txtClipW();
  iVar2 = (int)sVar1 + -0xd;
  if (iVar2 < 0) {
    iVar2 = (int)sVar1 + -10;
  }
  sVar1 = get_video2_settings_txtClipH();
  iVar5 = ((int)sVar1 + -10) / 7 + -1;
  iVar4 = 0;
  if (0 < iVar5) {
    iVar2 = (iVar2 >> 2) + -5;
    do {
      if (0 < iVar2) {
        pbVar3 = stderr_buffer + iVar4 * 0x47;
        xpos = 0x14;
        do {
          print_to_vidbuff1(xpos,iVar4 * 7 + 7,*pbVar3);
          xpos += 4;
          pbVar3 = pbVar3 + 1;
          if (iVar2 * 4 + 0x14 <= xpos) break;
        } while (xpos != 0x130);
      }
      iVar4 += 1;
    } while ((iVar4 < iVar5) && (iVar4 != 0x1f));
  }
  return;
}



s32 return_last_RA_saved_to_stack(undefined4 param_1)

{
  uint uVar1;
  uint *unaff_retaddr;
  s32 asStackX0 [4];
  
  while( true ) {
    uVar1 = *unaff_retaddr >> 0x10;
    if (uVar1 == 0x27bd) {
      return -1;
    }
    if (uVar1 == 0xafbf) break;
    unaff_retaddr = unaff_retaddr + -1;
  }
  return *(s32 *)((int)asStackX0 + (int)(short)*unaff_retaddr);
}



void romCreateMesgQueue(void)

{
  osCreateMesgQueue(&memoryMesgQueue,&memoryMesg,1);
  return;
}



void doRomCopy(void *target,void *source,u32 size)

{
  osInvalDCache(target,size);
  osPiStartDma(&memoryMesgMB,0,0,(u32)source,target,size,&memoryMesgQueue);
  return;
}



void romReceiveMesg(void)

{
  osRecvMesg(&memoryMesgQueue,NULL,1);
  return;
}



void romCopy(void *rdramtarget,void *hw_address,u32 size)

{
  doRomCopy(rdramtarget,hw_address,size);
  romReceiveMesg();
  return;
}



s32 romCopyAligned(void *target,void *source,s32 length)

{
  void *target_aligned;
  void *source_aligned;
  
  source_aligned = (void *)(((uint)source | 1) ^ 1);
  target_aligned = (void *)(((int)target + 0xfU | 0xf) ^ 0xf);
  romCopy(target_aligned,source_aligned,
          ((int)(void *)((int)source - (int)source_aligned) + length + 0xf | 0xfU) ^ 0xf);
  return (s32)((int)target_aligned + (int)(void *)((int)source - (int)source_aligned));
}



void doRomWrite(void *source,void *target,u32 size)

{
  osWritebackDCache(source,size);
  osPiStartDma(&memoryMesgMB,0,1,(u32)target,source,size,&memoryMesgQueue);
  return;
}



void romWrite(void *source,void *target,u32 size)

{
  doRomWrite(source,target,size);
  romReceiveMesg();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void init_mainthread_data(void)

{
  ulonglong left;
  byte *__nptr;
  long lVar1;
  u32 uVar2;
  int iVar3;
  ulonglong right;
  OSTime value;
  char *__delim;
  OSMesgQueue OStack64;
  OSTimer OStack40;
  OSMesg pvStack4;
  
  add_debug_notice_deb_c_debug();
  romCreateMesgQueue();
  establish_TLB_buffer_management_table();
  image_entries_load();
  something_with_memp_c_debug();
  something_with_mema_c_debug();
  something_with_bg_c_debug();
  something_with_vi_c_debug();
  init_video_settings();
  init_indy_if_not_ready();
  debug_and_update_stage_flag = rmon_debug_is_final_build();
  ob_c_debug_setup();
  something_with_rsp_c_debug();
  something_with_dyn_c_debug();
  something_with_joy_c_debug();
  osCreateMesgQueue(&OStack64,&pvStack4,1);
  iVar3 = 0;
  do {
    left = __ll_mul(0,100000);
    left = __ull_div(left,right);
    osSetTimer(&OStack40,value,left,(OSMesgQueue *)right,NULL);
    osRecvMesg(&OStack64,&pvStack4,1);
    if (iVar3 == 1) {
      test_controller_presence();
    }
    else {
      if (1 < iVar3) {
        redirect_to_ramrom_replay_and_record_handlers_if_set();
      }
    }
    iVar3 += 1;
  } while (iVar3 != 4);
  __nptr = check_token(1,aLevel_);
  if (__nptr == NULL) {
    debug_and_update_stage_flag = TRUE;
  }
  something_stan_c_debug_related();
  something_game_c_debug_related();
  if (debug_and_update_stage_flag != FALSE) {
    strtok(aMl0Me0Mgfx100Mvtx50Mt700Ma400_1,__delim);
  }
  __nptr = check_token(1,aM);
  if (__nptr != NULL) {
    __nptr = check_token(1,aM_1);
    lVar1 = strtol((char *)__nptr,NULL,0);
    current_m_malloc_value = lVar1 << 10;
  }
  uVar2 = osVirtualToPhysical(&room_model_buffer);
  iVar3 = getptr_TLBallocatedblock();
  check_memflag_tokens(uVar2 | 0x80000000,iVar3 - (uVar2 | 0x80000000));
  resetMemBank(6);
  init_LnameX();
  something_with_lvl_c_debug();
  something_with_boss_c_debug();
  removed_7f0acb70();
  removed_7000ada8();
  default_player_perspective_and_height();
  store_osgetcount();
  removed_7f09b7a0();
  displaylist_related();
  set_gu_scale();
  removed_7f000bc0();
  proc_7F000980();
  alloc_load_expand_ani_table();
  init_weapon_animation_groups_maybe();
  reset_counter_rand_body_head();
  removed_7f0009d0();
  setup_ptr_playergait();
  initGameData();
  proc_7F01D6E0();
  clear_ramrom_block_buffer_heading_ptrs();
  return;
}



void enable_show_mem_use_flag(void)

{
  show_mem_use_flag = TRUE;
  return;
}



void mem_bars_flag_toggle(void)

{
  show_mem_bars_flag = show_mem_bars_flag ^ 1;
  return;
}



void setup_gamevalues_and_launchmainloop(void)

{
  init_mainthread_data();
  allocate_init_rsp_buffers();
  setupaudio();
  do {
    mainloop();
  } while( true );
}



// WARNING: Instruction at (ram,0x7000641c) overlaps instruction at (ram,0x70006418)
// 

void mainloop(void)

{
  byte *__nptr;
  u32 uVar3;
  DIFFICULTY difficulty;
  int iVar4;
  memoryallocation *pmVar5;
  long lVar6;
  void *ptr_allocmem;
  int playernum;
  undefined4 *puVar7;
  char cVar12;
  char cVar13;
  ulonglong uVar1;
  ulonglong uVar2;
  uint *puVar8;
  short sVar10;
  short sVar11;
  BOOL BVar9;
  LEVELID LVar14;
  int playercount;
  longlong lVar15;
  uint *puVar16;
  uint uVar17;
  undefined4 uStack392;
  char acStack388 [328];
  undefined4 *puStack60;
  uint *puStack56;
  uint uStack52;
  undefined4 uStack44;
  undefined4 uStack40;
  undefined4 uStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  OSMesg *msg;
  
  reset_mem_bank_5();
  __nptr = check_token(1,aLevel__0);
  if (__nptr != NULL) {
    __nptr = check_token(1,aLevel__1);
    current_stage_num = (uint)__nptr[1] + (uint)*__nptr * 10 + 0xfffffdf0;
  }
  if (current_stage_num != LEVELID_TITLE) {
    proc_7F01DF90();
    set_selected_folder_num(0);
    set_selected_difficulty(DIFFICULTY_AGENT);
    set_solo_and_ptr_briefing(current_stage_num);
    __nptr = check_token(1,aHard);
    if (__nptr != NULL) {
      __nptr = check_token(1,aHard_1);
      set_selected_difficulty((uint)*__nptr - 0x30);
      __nptr = check_token(1,aHard_2);
      set_difficulty((uint)*__nptr - 0x30);
    }
  }
  uVar3 = osGetCount();
  increment_random_num((longlong)(int)uVar3);
  do {
    msg = NULL;
    uStack44 = dword_80024304;
    uStack40 = dword_80024308;
    uVar17 = 0;
    uStack32 = dword_80024310;
    uStack36 = dword_8002430C;
    playercount = 0;
    uStack28 = dword_80024314;
    uStack24 = dword_80024318;
    uStack16 = dword_80024320;
    uStack20 = dword_8002431C;
    uStack52 = 0;
    difficulty = get_current_difficulty();
    test_if_replaying_or_recording_demos_this_stage_load(current_stage_num,difficulty);
    if (debug_and_update_stage_flag != 0) {
      playernum = -1;
      if ((current_stage_num != LEVELID_TITLE) && (iVar4 = get_selected_num_players(), 1 < iVar4)) {
        playernum = 0;
        if (memallocstringtable.number != 0) {
          pmVar5 = &memallocstringtable;
          iVar4 = memallocstringtable.number;
          do {
            if (current_stage_num + 400 == iVar4) break;
            iVar4 = pmVar5[1].number;
            playernum += 1;
            pmVar5 = pmVar5 + 1;
          } while (iVar4 != 0);
        }
        if ((&memallocstringtable)[playernum].number == 0) {
          playernum = -1;
        }
      }
      if ((playernum < 0) && (playernum = 0, memallocstringtable.number != 0)) {
        pmVar5 = &memallocstringtable;
        LVar14 = memallocstringtable.number;
        do {
          if (current_stage_num == LVar14) break;
          LVar14 = pmVar5[1].number;
          playernum += 1;
          pmVar5 = pmVar5 + 1;
        } while (LVar14 != ~LEVELID_NONE);
      }
      strtok((char *)(&memallocstringtable)[playernum].string,(char *)&memallocstringtable);
    }
    resetMemBank(4);
    something_mem_bank_a0('\x04');
    __nptr = check_token(1,aMa);
    if (__nptr != NULL) {
      __nptr = check_token(1,aMa_0);
      lVar6 = strtol((char *)__nptr,NULL,0);
      current_ma_malloc_value = lVar6 << 10;
    }
    ptr_allocmem = allocate_bytes_in_bank(current_ma_malloc_value,4);
    reinit_m_malloc_table(ptr_allocmem,current_ma_malloc_value);
    reset_play_data_ptrs();
    if (current_stage_num != LEVELID_TITLE) {
      playercount = 1;
      playernum = get_selected_num_players();
      if (1 < playernum) {
        playercount = get_selected_num_players();
      }
    }
    init_player_data_ptrs_construct_viewports(playercount);
    set_vtx_gfx_mem_alloc();
    test_controller_presence();
    stage_load(current_stage_num);
    init_both_video_buffers();
    debug_text_related_2();
    proc_7F0C0B4C();
    video_related_2();
    playernum = osRecvMesg(&gfxFrameMsgQ,&msg,0);
    while (playernum == 0) {
      playernum = osRecvMesg(&gfxFrameMsgQ,&msg,0);
    }
    if (loadedstage < 0) {
      do {
        osRecvMesg(&gfxFrameMsgQ,&msg,1);
        sVar10 = *(short *)msg;
        if (sVar10 == 1) {
          uVar3 = osGetCount();
          if (((0x5eb60 < uVar3 - copy_of_osgetcount_value_1) && (loadedstage < 0)) && (uVar17 < 2))
          {
            playernum = get_is_ramrom_flag();
            if (playernum == 0) {
              proc_7F0C0B4C();
            }
            else {
              iterate_ramrom_entries_handle_camera_out();
            }
            video_DL_related_4();
            video_related_2();
            video_related_3(0x20000);
            redirect_to_ramrom_replay_and_record_handlers_if_set();
            permit_stderr(FALSE);
            puVar7 = (undefined4 *)get_ptr_displaylist();
            puStack60 = puVar7;
            if (debug_feature_flag != 0) {
              puStack60 = puVar7;
              cVar12 = get_cur_controller_horz_stick_pos('\0');
              cVar13 = get_cur_controller_vert_stick_pos('\0');
              uVar1 = get_controller_buttons_held
                                ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|
                                      DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|
                                      Z_TRIG|B_BUTTON|A_BUTTON);
              uVar2 = get_controller_buttons_pressed
                                ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|
                                      DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|
                                      Z_TRIG|B_BUTTON|A_BUTTON);
              debug_feature_flag =
                   debug_menu_processor
                             ((longlong)(int)cVar12,(longlong)(int)cVar13,(controller_buttons)uVar1,
                              (controller_buttons)uVar2);
            }
            manage_mp_game();
            proc_7F09B41C();
            if (current_stage_num != LEVELID_TITLE) {
              lVar15 = 0;
              uVar1 = get_num_players();
              if (0 < (longlong)uVar1) {
                do {
                  playernum = proc_7F09B528((int)lVar15);
                  set_cur_player(playernum);
                  set_video2_width_height
                            (ptr_BONDdata->playerscreenwidth,ptr_BONDdata->playerscreenheight);
                  set_video2_ulx_uly(ptr_BONDdata->playerscreenulx,ptr_BONDdata->playerscreenuly);
                  proc_7F0BF800();
                  lVar15 = (longlong)((int)lVar15 + 1);
                  uVar1 = get_num_players();
                } while (lVar15 < (longlong)uVar1);
              }
            }
            puVar8 = proc_7F0BE30C(puVar7);
            playernum = get_linemode_flag();
            puVar16 = puVar8;
            if (playernum != 0) {
              *puVar8 = 0xe7000000;
              puVar8[1] = 0;
              puVar8[2] = 0xba001402;
              puVar8[3] = 0;
              puVar8[4] = 0xf9000000;
              puVar8[5] = 0xffffffff;
              puVar8[6] = 0xee000000;
              puVar8[7] = 0xffffffff;
              puVar8[9] = 4;
              puVar8[8] = 0xb9000201;
              puVar8[10] = 0xb900031d;
              puVar8[0xb] = 0xfa54040;
              puVar16 = puVar8 + 0xe;
              sVar10 = get_video2_settings_txtClipW();
              sVar11 = get_video2_settings_txtClipH();
              puVar8[0xc] = ((int)sVar11 - 1U & 0x3ff) << 2 | 0xf6000000 |
                            ((int)sVar10 - 1U & 0x3ff) << 0xe;
              puVar8[0xd] = 0;
            }
            puStack56 = read_screen_display_block_and_write_chars(puVar16);
            BVar9 = get_memusage_display_flag();
            if (BVar9 != FALSE) {
              puStack56 = (uint *)display_speed_graph();
            }
            if (debug_feature_flag != 0) {
              display_debug_menu_text_onscreen();
              puStack56 = (uint *)print_debug_mcm_to_stdout(puStack56);
            }
            *puStack56 = 0xe9000000;
            puStack56[1] = 0;
            puStack56[2] = 0xb8000000;
            puStack56[3] = 0;
            puStack56 = puStack56 + 4;
            if (show_mem_use_flag != FALSE) {
              nulled_list_all8_mem_alloc_banks_sizes();
              generate_lists_before_after_mem_merge();
              removed_debug_routine((int)puStack56);
              nullsub_41();
              show_mem_use_flag = FALSE;
            }
            if (show_mem_bars_flag != FALSE) {
              draw_membars();
            }
            allocate_something_in_mgfx((int)puStack56);
            allocate_something_in_mvtx();
            video_related_8();
            playernum = get_debug_taskgrab_val();
            if (((playernum != 0) &&
                (uVar1 = get_controller_buttons_pressed('\0',B_BUTTON|A_BUTTON), uVar1 != 0)) &&
               (uVar1 = get_controller_buttons_held('\0',B_BUTTON|A_BUTTON), uVar1 == 0xc000)) {
              while( true ) {
                sprintf(acStack388,aU64_taskgrab_D_core,u64_taskgrab_num);
                playernum = check_file_found_on_indy(acStack388,&uStack392);
                if (playernum == 0) break;
                u64_taskgrab_num += 1;
              }
              indy_send_capture_data(acStack388,&UT_VEC,0x400000);
            }
            load_rsp_microcode((int)puStack60,(int)puStack56,0,&uStack44);
            uVar17 += 1;
            mem_related_calls_sort_merge_entries();
            uStack52 ^= 1;
            video_related_3(0x10000);
          }
        }
        else {
          if (sVar10 == 2) {
            uVar17 -= 1;
          }
          else {
            if (sVar10 == 5) {
              uVar17 = 4;
            }
          }
        }
      } while ((loadedstage < 0) || (uVar17 != 0));
    }
    unload_stage_text_data();
    stop_demo_playback();
    set_bank_nextentry_to_NULL(4);
    something_mem_bank_a0('\x04');
    current_stage_num = loadedstage;
    loadedstage = LEVELID_NONE;
    if (false) {
      proc_7F0D1A7C();
      return;
    }
  } while( true );
}



void run_title_stage(void)

{
  set_loaded_stage(LEVELID_TITLE);
  return;
}



void set_loaded_stage(LEVELID stage)

{
  loadedstage = stage;
  return;
}



LEVELID get_stage_num(void)

{
  return current_stage_num;
}



void return_to_title_from_level_end(void)

{
  LEVELID stage;
  longlong objectives;
  
  stage = get_stage_num();
  if ((stage != LEVELID_CUBA) && (objectives = check_objectives_complete(), objectives != 0)) {
    end_of_mission_briefing();
  }
  run_title_stage();
  return;
}



undefined4 get_debug_parse_flag(void)

{
  return debug_feature_flag;
}



void something_with_boss_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&boss_c_ptr_debug_notice_list_entry,aBoss_c_debug);
  return;
}



void audio_related(void *datatable,int numsamples)

{
  longlong lVar1;
  void *pvVar2;
  int iVar3;
  
  lVar1 = 0;
  if (*(short *)datatable != 0) {
    iVar3 = *(int *)((int)datatable + 4);
    pvVar2 = datatable;
    while( true ) {
      lVar1 = (longlong)((int)lVar1 + 1);
      *(int *)((int)pvVar2 + 4) = iVar3 + numsamples;
      if ((longlong)(ulonglong)*(ushort *)datatable <= lVar1) break;
      iVar3 = *(int *)((int)pvVar2 + 0xc);
      pvVar2 = (void *)((int)pvVar2 + 8);
    }
  }
  return;
}



void setupaudio(void)

{
  ushort uVar1;
  u8 *base;
  ALBankFile *rdramtarget;
  ALCSPlayer *pAVar2;
  u8 *puVar3;
  ushort *puVar4;
  ALBankFile *pAVar5;
  s16 *psVar6;
  s16 *psVar7;
  int iVar8;
  ALSeqpConfig seqc_3;
  ALSeqpConfig seqc_2;
  ALSeqpConfig seqc_1;
  ALSynConfig local_44;
  ALBankFile *local_1c;
  ALBankFile *local_14;
  uint local_10;
  undefined4 local_c;
  undefined4 local_8;
  ALHeap *local_4;
  
  if (bootswitch_sound == '\0') {
    base = (u8 *)allocate_bytes_in_bank((int)&DAT_0002e000,6);
    puVar3 = base;
    do {
      puVar3 = puVar3 + 1;
      *puVar3 = '\0';
      puVar3 = puVar3;
    } while (puVar3 < base + 0x2e000);
    alHeapInit(&ALHeap_80063710,base,(s32)&DAT_0002e000);
    local_14 = (ALBankFile *)0x5bc0;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x5bc0);
    romCopy(local_14,&sfx_ctl,0x5bc0);
    alBnkfNew(local_14,&sfx_tbl);
    ptr_sfx_buf = (undefined *)local_14->bankArray[0];
    rdramtarget = (ALBankFile *)0x43a0;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x43a0);
    local_1c = rdramtarget;
    romCopy(rdramtarget,&instruments_ctl,0x43a0);
    alBnkfNew(local_1c,&instruments_tbl);
    DAT_80063724 = local_1c->bankArray[0];
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x10);
    ptr_musicdatatable = rdramtarget;
    romCopy(rdramtarget,&number_music_samples,0x10);
    iVar8 = (uint)(ushort)ptr_musicdatatable->revision * 8;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,iVar8 + 4);
    ptr_musicdatatable = rdramtarget;
    romCopy(rdramtarget,&number_music_samples,(iVar8 + 0x13U | 0xf) ^ 0xf);
    audio_related(ptr_musicdatatable,(int)&number_music_samples);
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x18c8);
    PTR_80063838 = (u8 *)rdramtarget;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,6000);
    DAT_80063840 = rdramtarget + 0xfa;
    puVar4 = &DAT_80063738;
    pAVar5 = ptr_musicdatatable;
    psVar6 = &DAT_800637b8;
    PTR_8006383c = (u8 *)rdramtarget;
    do {
      uVar1 = pAVar5[1].revision;
      pAVar2 = (ALCSPlayer *)(uint)uVar1;
      psVar7 = psVar6 + 1;
      *puVar4 = uVar1;
      *psVar6 = pAVar5[1].bankCount;
      if ((uVar1 & 1) != 0) {
        *puVar4 = uVar1 + 1;
      }
      puVar4 = puVar4 + 1;
      pAVar5 = pAVar5 + 1;
      psVar6 = psVar7;
    } while (psVar7 != (s16 *)&DAT_80063836);
    local_44.maxVVoices = 0;
    local_44.maxPVoices = 0x18;
    local_44.maxUpdates = 0x80;
    local_44.dmaproc = NULL;
    local_44.fxType = '\x06';
    local_44.outputRate = 0;
    local_44.heap = &ALHeap_80063710;
    amCreateAudioMgr(&local_44,(OSPri)&DAT_80063836,(amConfig *)&DAT_80063836);
    seqc_1.maxVoices = 0x10;
    seqc_1.maxEvents = 0x40;
    seqc_1.maxChannels = '\x10';
    seqc_1.heap = &ALHeap_80063710;
    seqc_1.initOsc = NULL;
    seqc_1.updateOsc = NULL;
    seqc_1.stopOsc = NULL;
    seqc_2.maxVoices = 0x10;
    seqc_2.maxEvents = 0x40;
    seqc_2.maxChannels = '\x10';
    seqc_2.heap = &ALHeap_80063710;
    seqc_2.initOsc = NULL;
    seqc_2.updateOsc = NULL;
    seqc_2.stopOsc = NULL;
    seqc_3.maxVoices = 0x10;
    seqc_3.maxEvents = 0x40;
    seqc_3.maxChannels = '\x10';
    seqc_3.heap = &ALHeap_80063710;
    seqc_3.initOsc = NULL;
    seqc_3.updateOsc = NULL;
    seqc_3.stopOsc = NULL;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x7c);
    seqp_1 = pAVar2;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x7c);
    seqp_2 = pAVar2;
    _alHeapDBAlloc(NULL,0,&ALHeap_80063710,1,0x7c);
    ptr_3rd_music_ctrl_block = pAVar2;
    alCSPNew(seqp_1,&seqc_1);
    __CSPPostNextSeqEvent(seqp_1);
    alCSPNew(seqp_2,&seqc_2);
    __CSPPostNextSeqEvent(seqp_2);
    alCSPNew(ptr_3rd_music_ctrl_block,&seqc_3);
    __CSPPostNextSeqEvent(ptr_3rd_music_ctrl_block);
    local_c = 0x40;
    local_10 = 0x40;
    local_8 = 8;
    local_4 = &ALHeap_80063710;
    music_related_16(&local_10);
    startaudithread();
  }
  return;
}



void musicTrack1Play(MUSIC_TRACKS track)

{
  void *hw_address;
  int iVar1;
  u16 uVar2;
  u8 *rdramtarget;
  uint size;
  undefined auStack8468 [8460];
  u8 *local_8;
  
  if (bootswitch_sound == '\0') {
    if (music1_track_num != 0) {
      musicTrack1Stop();
    }
    music1_track_num = (int)(char)track;
    iVar1 = ultra_proc_70012230(seqp_1);
    while (iVar1 != 0) {
      iVar1 = ultra_proc_70012230(seqp_1);
    }
    hw_address = *(void **)(ptr_musicdatatable + music1_track_num * 8 + 4);
    if (hw_address < (void *)0x10000) {
      musicTrack1Play(M_SHORT_SOLO_DEATH);
    }
    else {
      size = ((uint)(ushort)(&DAT_800637b8)[music1_track_num] + 0xf | 0xf) ^ 0xf;
      rdramtarget = PTR_80063838 +
                    (((((uint)(ushort)(&DAT_80063738)[music1_track_num] + 0xf | 0xf) ^ 0xf) + 0x40)
                    - size);
      local_8 = PTR_80063838;
      romCopy(rdramtarget,hw_address,size);
      decompressdata(rdramtarget,local_8,auStack8468);
      alCSeqNew(&ALCSeq_80063860,PTR_80063838);
      alCSPSetSeq(seqp_1,&ALCSeq_80063860);
      uVar2 = get_music1len();
      musicTrack1Vol(uVar2);
      alCSPPlay(seqp_1);
    }
  }
  return;
}



void musicTrack1Stop(void)

{
  int iVar1;
  
  if (bootswitch_sound == '\0') {
    music1_playing = 0;
    if ((music1_track_num != 0) && (iVar1 = ultra_proc_70012230(seqp_1), iVar1 == 1)) {
      alSeqpStop((ALSeqPlayer *)seqp_1);
    }
    music1_track_num = 0;
  }
  return;
}



u16 get_music1len(void)

{
  return music1len;
}



void musicTrack1Vol(s16 param_1)

{
  music1len = (u16)((longlong)param_1 & 0xffffU);
  ultra_proc_70012DA0(seqp_1,(short)((uint)((int)((longlong)param_1 & 0xffffU) *
                                           (int)(short)(&music_array_tempo_maybe)[music1_track_num])
                                    >> 0xf));
  return;
}



void music_related_0(void)

{
  u16 uVar2;
  undefined2 *puVar1;
  
  uVar2 = get_music1len();
  (&music_array_tempo_maybe)[music1_track_num] = uVar2;
  puVar1 = &music_array_tempo_maybe;
  uVar2 = music_related_array[0];
  if (-1 < music_array_tempo_maybe) {
    while (-1 < (short)uVar2) {
      uVar2 = puVar1[2];
      puVar1 = puVar1 + 1;
    }
  }
  return;
}



void music_related_1(f32 rate)

{
  if (-1 < music1_playing) {
    musicTrack1_length = get_music1len();
    music1_length = 0;
    music1_rate = (s32)((float)rate * 60.00000000);
    music1_playing = -1;
  }
  return;
}



void music_related_3(float rate,s32 param_2,short length)

{
  if (music1_playing < 1) {
    alCSPPlay(seqp_1);
    music1_length = length;
    if (length == -1) {
      music1_length = musicTrack1_length;
    }
    musicTrack1_length = 0;
    music1_rate = (s32)(rate * 60.00000000);
    music1_playing = 1;
  }
  return;
}



void music_related_2nd_block(int param_1)

{
  void *hw_address;
  int iVar1;
  u16 uVar2;
  u8 *rdramtarget;
  uint size;
  undefined auStack8468 [8460];
  u8 *local_8;
  
  if (bootswitch_sound == '\0') {
    if (music2_track_num != 0) {
      music_related_2nd_block_0();
    }
    music2_track_num = param_1;
    iVar1 = ultra_proc_70012230(seqp_2);
    while (iVar1 != 0) {
      iVar1 = ultra_proc_70012230(seqp_2);
    }
    hw_address = *(void **)(ptr_musicdatatable + music2_track_num * 8 + 4);
    if (hw_address < (void *)0x10000) {
      music_related_2nd_block(1);
    }
    else {
      size = ((uint)(ushort)(&DAT_800637b8)[music2_track_num] + 0xf | 0xf) ^ 0xf;
      rdramtarget = PTR_8006383c +
                    (((((uint)(ushort)(&DAT_80063738)[music2_track_num] + 0xf | 0xf) ^ 0xf) + 0x40)
                    - size);
      local_8 = PTR_8006383c;
      romCopy(rdramtarget,hw_address,size);
      decompressdata(rdramtarget,local_8,auStack8468);
      alCSeqNew(&ALCSeq_80063958,PTR_8006383c);
      alCSPSetSeq(seqp_2,&ALCSeq_80063958);
      uVar2 = get_music2len();
      music_related_2nd_block_1((longlong)(short)uVar2 & 0xffff);
      alCSPPlay(seqp_2);
    }
  }
  return;
}



void music_related_2nd_block_0(void)

{
  int iVar1;
  
  if (bootswitch_sound == '\0') {
    music2_playing = FALSE;
    if ((music2_track_num != 0) && (iVar1 = ultra_proc_70012230(seqp_2), iVar1 == 1)) {
      alSeqpStop((ALSeqPlayer *)seqp_2);
    }
    music2_track_num = 0;
  }
  return;
}



u16 get_music2len(void)

{
  return music2len;
}



void music_related_2nd_block_1(ulonglong param_1)

{
  music2len = (u16)(param_1 & 0xffff);
  ultra_proc_70012DA0(seqp_2,(short)((uint)((int)(param_1 & 0xffff) *
                                           (int)(short)(&music_array_tempo_maybe)[music2_track_num])
                                    >> 0xf));
  return;
}



void music_related_5(void)

{
  u16 uVar2;
  undefined2 *puVar1;
  
  uVar2 = get_music2len();
  (&music_array_tempo_maybe)[music2_track_num] = uVar2;
  puVar1 = &music_array_tempo_maybe;
  uVar2 = music_related_array[0];
  if (-1 < music_array_tempo_maybe) {
    while (-1 < (short)uVar2) {
      uVar2 = puVar1[2];
      puVar1 = puVar1 + 1;
    }
  }
  return;
}



void music_related_6(float param_1)

{
  if (-1 < (int)music2_playing) {
    DAT_80063846 = get_music2len();
    DAT_8006384c = 0;
    DAT_80063854 = (int)(param_1 * 60.00000000);
    music2_playing = ~FALSE;
  }
  return;
}



void music_related_8(float param_1,undefined8 param_2,short param_3)

{
  if ((int)music2_playing < 1) {
    alCSPPlay(seqp_2);
    DAT_8006384c = param_3;
    if (param_3 == -1) {
      DAT_8006384c = DAT_80063846;
    }
    DAT_80063846 = 0;
    DAT_80063854 = (int)(param_1 * 60.00000000);
    music2_playing = TRUE;
  }
  return;
}



void music_related_3rd_block(int tracknum)

{
  void *hw_address;
  int iVar1;
  u16 uVar2;
  u8 *rdramtarget;
  uint size;
  undefined auStack8468 [8460];
  u8 *local_8;
  
  if (bootswitch_sound == '\0') {
    if (music3_track_num != 0) {
      music_related_3rd_block_0();
    }
    music3_track_num = tracknum;
    iVar1 = ultra_proc_70012230(ptr_3rd_music_ctrl_block);
    while (iVar1 != 0) {
      iVar1 = ultra_proc_70012230(ptr_3rd_music_ctrl_block);
    }
    hw_address = *(void **)(ptr_musicdatatable + music3_track_num * 8 + 4);
    if (hw_address < (void *)0x10000) {
      music_related_3rd_block(1);
    }
    else {
      size = ((uint)(ushort)(&DAT_800637b8)[music3_track_num] + 0xf | 0xf) ^ 0xf;
      rdramtarget = DAT_80063840 +
                    (((((uint)(ushort)(&DAT_80063738)[music3_track_num] + 0xf | 0xf) ^ 0xf) + 0x40)
                    - size);
      local_8 = DAT_80063840;
      romCopy(rdramtarget,hw_address,size);
      decompressdata(rdramtarget,local_8,auStack8468);
      alCSeqNew(&ALCSeq_80063a50,DAT_80063840);
      alCSPSetSeq(ptr_3rd_music_ctrl_block,&ALCSeq_80063a50);
      uVar2 = get_music3len();
      music_related_3rd_block_1((longlong)(short)uVar2 & 0xffff);
      alCSPPlay(ptr_3rd_music_ctrl_block);
    }
  }
  return;
}



void music_related_3rd_block_0(void)

{
  int iVar1;
  
  if (bootswitch_sound == '\0') {
    music3_playing = FALSE;
    if ((music3_track_num != 0) &&
       (iVar1 = ultra_proc_70012230(ptr_3rd_music_ctrl_block), iVar1 == 1)) {
      alSeqpStop((ALSeqPlayer *)ptr_3rd_music_ctrl_block);
    }
    music3_track_num = 0;
  }
  return;
}



u16 get_music3len(void)

{
  return music3len;
}



void music_related_3rd_block_1(ulonglong param_1)

{
  music3len = (u16)(param_1 & 0xffff);
  ultra_proc_70012DA0(ptr_3rd_music_ctrl_block,
                      (short)((uint)((int)(param_1 & 0xffff) *
                                    (int)(short)(&music_array_tempo_maybe)[music3_track_num]) >> 0xf
                             ));
  return;
}



void music_related_10(void)

{
  u16 uVar2;
  undefined2 *puVar1;
  
  uVar2 = get_music3len();
  (&music_array_tempo_maybe)[music3_track_num] = uVar2;
  puVar1 = &music_array_tempo_maybe;
  uVar2 = music_related_array[0];
  if (-1 < music_array_tempo_maybe) {
    while (-1 < (short)uVar2) {
      uVar2 = puVar1[2];
      puVar1 = puVar1 + 1;
    }
  }
  return;
}



void music_related_11(float param_1)

{
  if (-1 < (int)music3_playing) {
    music3_len = get_music3len();
    DAT_8006384e = 0;
    DAT_80063858 = (int)(param_1 * 60.00000000);
    music3_playing = ~FALSE;
  }
  return;
}



void music_related_13(float param_1,undefined8 param_2,short param_3)

{
  if ((int)music3_playing < 1) {
    alCSPPlay(ptr_3rd_music_ctrl_block);
    DAT_8006384e = param_3;
    if (param_3 == -1) {
      DAT_8006384e = music3_len;
    }
    music3_len = 0;
    DAT_80063858 = (int)(param_1 * 60.00000000);
    music3_playing = TRUE;
  }
  return;
}



void music_related_15(void)

{
  short sVar1;
  u16 uVar2;
  ulonglong uVar3;
  
  if (music1_playing != 0) {
    uVar2 = get_music1len();
    sVar1 = uVar2 + (short)(int)((float)((uint)music1_length - (int)(short)uVar2) /
                                (float)music1_rate);
    musicTrack1Vol(sVar1);
    music1_rate += -1;
    if (music1_rate < 1) {
      if (sVar1 == 0) {
        alSeqpStop((ALSeqPlayer *)seqp_1);
      }
      music1_rate = 0;
      music1_playing = 0;
    }
  }
  if (music2_playing != FALSE) {
    uVar2 = get_music2len();
    uVar3 = (longlong)
            ((int)(short)uVar2 +
            (int)((float)((uint)DAT_8006384c - (int)(short)uVar2) / (float)DAT_80063854)) & 0xffff;
    music_related_2nd_block_1(uVar3);
    DAT_80063854 += -1;
    if (DAT_80063854 < 1) {
      if ((short)uVar3 == 0) {
        alSeqpStop((ALSeqPlayer *)seqp_2);
      }
      DAT_80063854 = 0;
      music2_playing = FALSE;
    }
  }
  if (music3_playing != FALSE) {
    uVar2 = get_music3len();
    uVar3 = (longlong)
            ((int)(short)uVar2 +
            (int)((float)((uint)DAT_8006384e - (int)(short)uVar2) / (float)DAT_80063858)) & 0xffff;
    music_related_3rd_block_1(uVar3);
    DAT_80063858 += -1;
    if (DAT_80063858 < 1) {
      if ((short)uVar3 == 0) {
        alSeqpStop((ALSeqPlayer *)ptr_3rd_music_ctrl_block);
      }
      DAT_80063858 = 0;
      music3_playing = FALSE;
    }
  }
  return;
}



void music_related_16(uint *param_1)

{
  ALEventListItem *items;
  ALMicroTime AVar1;
  ALEventListItem *a;
  ALHeap *hp;
  uint uVar2;
  ALEvent AStack24;
  
  *(uint *)(off_800243F0 + 0x44) = param_1[2];
  *(undefined4 *)(off_800243F0 + 0x3c) = 0;
  *(undefined4 *)(off_800243F0 + 0x48) = 33000;
  _alHeapDBAlloc(NULL,0,(ALHeap *)param_1[3],1,*param_1 << 6);
  *(ALEventListItem **)(off_800243F0 + 0x40) = items;
  _alHeapDBAlloc(NULL,0,(ALHeap *)param_1[3],1,param_1[1] * 0x1c);
  alEvtqNew((ALEventQueue *)(off_800243F0 + 0x14),items,param_1[1]);
  uVar2 = 1;
  dword_800243EC = *(undefined4 *)(off_800243F0 + 0x40);
  if (*param_1 < 2) {
    hp = (ALHeap *)param_1[3];
  }
  else {
    do {
      items = *(ALEventListItem **)(off_800243F0 + 0x40);
      a = (ALEventListItem *)(uVar2 * 0x40 + (int)items);
      alLink((ALLink *)a,(ALLink *)((int)&a[-3].evt.msg + 10));
      uVar2 += 1;
    } while (uVar2 < *param_1);
    hp = (ALHeap *)param_1[3];
  }
  _alHeapDBAlloc(NULL,0,hp,2,7);
  DAT_80063ba4 = items;
  _alHeapDBAlloc(NULL,0,(ALHeap *)param_1[3],2,7);
  DAT_80063ba8 = items;
  *(undefined2 *)&(DAT_80063ba4->node).next = 0x7fff;
  *(undefined2 *)&(DAT_80063ba8->node).next = *(undefined2 *)&(DAT_80063ba4->node).next;
  *(undefined2 *)((int)&(DAT_80063ba4->node).next + 2) = 0x7fff;
  *(undefined2 *)((int)&(DAT_80063ba8->node).next + 2) =
       *(undefined2 *)((int)&(DAT_80063ba4->node).next + 2);
  *(undefined2 *)&(DAT_80063ba4->node).prev = 0x7fff;
  *(undefined2 *)&(DAT_80063ba8->node).prev = *(undefined2 *)&(DAT_80063ba4->node).prev;
  *(undefined2 *)((int)&(DAT_80063ba4->node).prev + 2) = 0x7fff;
  *(undefined2 *)((int)&(DAT_80063ba8->node).prev + 2) =
       *(undefined2 *)((int)&(DAT_80063ba4->node).prev + 2);
  *(undefined2 *)&DAT_80063ba4->delta = 0x7fff;
  *(undefined2 *)&DAT_80063ba8->delta = *(undefined2 *)&DAT_80063ba4->delta;
  *(undefined2 *)((int)&DAT_80063ba4->delta + 2) = 0x7fff;
  *(undefined2 *)((int)&DAT_80063ba8->delta + 2) = *(undefined2 *)((int)&DAT_80063ba4->delta + 2);
  (DAT_80063ba4->evt).type = 0x7fff;
  (DAT_80063ba8->evt).type = (DAT_80063ba4->evt).type;
  *(ALGlobals **)(off_800243F0 + 0x38) = slg;
  *(undefined4 *)off_800243F0 = 0;
  *(undefined4 *)(off_800243F0 + 8) = 0x70007ddc;
  *(undefined **)(off_800243F0 + 4) = off_800243F0;
  alSynAddPlayer(*(ALSynth **)(off_800243F0 + 0x38),(ALPlayer *)off_800243F0);
  AStack24.type = 0x20;
  alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),&AStack24,
                  *(ALMicroTime *)(off_800243F0 + 0x48));
  AVar1 = alEvtqNextEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)(off_800243F0 + 0x28));
  *(ALMicroTime *)(off_800243F0 + 0x4c) = AVar1;
  return;
}



void music_related_17(int param_1)

{
  ALMicroTime AVar1;
  ALEvent AStack20;
  
  do {
    if (*(short *)(param_1 + 0x28) == 0x20) {
      AStack20.type = 0x20;
      alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),&AStack20,*(ALMicroTime *)(param_1 + 0x48));
    }
    else {
      music_related_18(param_1,(ushort *)(ALEvent *)(param_1 + 0x28));
    }
    AVar1 = alEvtqNextEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)(param_1 + 0x28));
    *(ALMicroTime *)(param_1 + 0x4c) = AVar1;
  } while (AVar1 == 0);
  *(int *)(param_1 + 0x50) = *(int *)(param_1 + 0x50) + AVar1;
  return;
}



void music_related_18(int param_1,ushort *param_2)

{
  byte bVar1;
  char cVar2;
  int **ppiVar3;
  int *piVar4;
  bool bVar5;
  ushort uVar6;
  int iVar7;
  s16 volume;
  u8 pan;
  uint uVar8;
  ALVoice *voice;
  int *piVar9;
  f32 pitch;
  f32 pitch_00;
  f32 extraout_f12;
  f32 extraout_f12_00;
  f32 extraout_f12_01;
  f32 extraout_f12_02;
  f32 extraout_f12_03;
  f32 extraout_f12_04;
  f32 extraout_f12_05;
  f32 extraout_f12_06;
  f32 extraout_f12_07;
  f32 extraout_f12_08;
  f32 extraout_f12_09;
  f32 extraout_f12_10;
  f32 extraout_f12_11;
  f32 extraout_f12_12;
  int *piVar10;
  int t;
  s16 sStack116;
  int iStack112;
  int iStack100;
  short sStack96;
  short sStack94;
  int **ppiStack92;
  int **ppiStack88;
  s32 sStack84;
  uint uStack80;
  int iStack64;
  s16 sStack52;
  int **ppiStack48;
  undefined4 uStack44;
  s16 sStack36;
  int **ppiStack32;
  ALVoiceConfig AStack8;
  
  uStack80 = 1;
  sStack84 = 0;
  ppiStack92 = NULL;
  do {
    if (ppiStack92 == NULL) {
      ppiStack88 = *(int ***)((int)&((ALEvent *)param_2)->msg + 2);
    }
    else {
      sStack52 = ((ALEvent *)param_2)->type;
      uStack44 = *(undefined4 *)((int)&((ALEvent *)param_2)->msg + 6);
      param_2 = (ushort *)&sStack52;
      ppiStack48 = ppiStack88;
    }
    ppiVar3 = (int **)ppiStack88[2];
    if (ppiVar3 == NULL) {
      music_related_22(&sStack94,&sStack96);
      return;
    }
    ppiStack92 = (int **)*ppiStack88;
    piVar4 = ppiVar3[1];
    uVar6 = ((ALEvent *)param_2)->type;
    if (uVar6 < 0x101) {
      if (uVar6 < 0x41) {
        if (uVar6 < 0x11) {
          if (false) {
switchD_70007fb4_caseD_3:
            uVar6 &= 0x2d1;
          }
          else {
            switch(uVar6) {
            case 1:
              if ((*(char *)((int)ppiStack88 + 0x3f) != '\x05') &&
                 (*(char *)((int)ppiStack88 + 0x3f) != '\x04')) {
                return;
              }
              AStack8.fxBus = 0;
              AStack8.unityPitch = '\0';
              AStack8.priority = (ushort)*(byte *)((int)ppiStack88 + 0x36);
              bVar5 = (longlong)*(int *)(param_1 + 0x44) <= (longlong)dword_800243F4;
              if ((!bVar5) || (bVar1 = *(byte *)((int)ppiStack88 + 0x3e), (bVar1 & 0x10) != 0)) {
                sStack84 = alSynAllocVoice(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3)
                                           ,&AStack8);
                bVar1 = *(byte *)((int)ppiStack88 + 0x3e);
              }
              voice = (ALVoice *)(ppiStack88 + 3);
              if (sStack84 == 0) {
                if (((bVar1 & 0x12) == 0) && ((int)ppiStack88[0xe] < 1)) {
                  if (bVar5) {
                    bVar1 = *(byte *)(dword_800243E8 + 0x3e);
                    t = dword_800243E8;
                    while( true ) {
                      if ((((bVar1 & 0x12) == 0) && ((bVar1 & 4) != 0)) &&
                         (*(char *)(t + 0x3f) != '\x03')) {
                        sStack116 = 0x80;
                        *(undefined *)(t + 0x3f) = 3;
                        bVar5 = false;
                        iStack112 = t;
                        iStack100 = t;
                        alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)&sStack116,1000)
                        ;
                        alSynSetVol(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(iStack100 + 0xc),0,
                                    1000);
                        t = iStack100;
                      }
                      t = *(int *)(t + 4);
                      if ((!bVar5) || (t == 0)) break;
                      bVar1 = *(byte *)(t + 0x3e);
                    }
                    if (bVar5) {
                      music_related_19(ppiStack88);
                    }
                    else {
                      ppiStack88[0xe] = (int *)((int)&rgba + 2);
                      alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)param_2,0x3e9);
                    }
                  }
                  else {
                    music_related_19(ppiStack88);
                  }
                }
                else {
                  *(undefined *)((int)ppiStack88 + 0x3f) = 4;
                  ppiStack88[0xe] = (int *)((int)ppiStack88[0xe] + -1);
                  alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)param_2,0x8235);
                }
                return;
              }
              *(byte *)((int)ppiStack88 + 0x3e) = bVar1 | 4;
              alSynStartVoice(*(ALSynth **)(param_1 + 0x38),voice,(ALWaveTable *)ppiVar3[2]);
              *(undefined *)((int)ppiStack88 + 0x3f) = 1;
              dword_800243F4 += 1;
              t = **ppiVar3;
              piVar9 = ppiStack88[0xb];
              piVar10 = ppiStack88[10];
              iStack64 = ((int)*(short *)(DAT_80063ba4 +
                                         ((uint)*(byte *)((int)piVar4 + 2) & 0x3f) * 2) *
                         ((int)((uint)*(byte *)(*ppiVar3 + 3) * (int)*(short *)(ppiStack88 + 0xd) *
                               (uint)*(byte *)((int)ppiVar3 + 0xd)) / 0x3f01)) / 0x7fff + -1;
              if (iStack64 < 0) {
                iStack64 = 0;
              }
              alSynSetVol(*(ALSynth **)(param_1 + 0x38),voice,0,0);
              alSynSetVol(*(ALSynth **)(param_1 + 0x38),voice,(s16)iStack64,
                          (int)(((float)t / (float)piVar9) / (float)piVar10));
              pan = '\x7f';
              iVar7 = (uint)*(byte *)(ppiStack88 + 0xf) + (uint)*(byte *)(ppiVar3 + 3) + -0x40;
              t = 0;
              if (0 < iVar7) {
                t = iVar7;
              }
              if (t < 0x7f) {
                if (iVar7 < 1) {
                  pan = '\0';
                }
                else {
                  pan = (u8)iVar7;
                }
              }
              alSynSetPan(*(ALSynth **)(param_1 + 0x38),voice,pan);
              alSynSetPitch(*(ALSynth **)(param_1 + 0x38),voice,pitch_00);
              uVar8 = ((uint)*(byte *)((int)ppiStack88 + 0x3d) +
                      ((uint)*(byte *)((int)piVar4 + 3) & 0xf)) * 8;
              pan = (u8)uVar8;
              if (false) {
                uVar8 = 0;
              }
              if (uVar8 < 0x80) {
                if (false) {
                  pan = '\0';
                }
              }
              else {
                pan = '\x7f';
              }
              alSynSetFXMix(*(ALSynth **)(param_1 + 0x38),voice,pan);
              sStack36 = 0x40;
              ppiStack32 = ppiStack88;
              alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)&sStack36,
                              (int)(((float)**ppiVar3 / (float)ppiStack88[0xb]) /
                                   (float)ppiStack88[10]));
              uVar6 = ((ALEvent *)param_2)->type & 0x2d1;
              pitch = extraout_f12;
              break;
            case 2:
              goto LAB_7000838c;
            default:
              goto switchD_70007fb4_caseD_3;
            case 4:
              uVar8 = *(uint *)((int)&((ALEvent *)param_2)->msg + 6);
              *(char *)(ppiStack88 + 0xf) = (char)uVar8;
              if (*(char *)((int)ppiStack88 + 0x3f) == '\x01') {
                iVar7 = (uVar8 & 0xff) + (uint)*(byte *)(ppiVar3 + 3) + -0x40;
                pan = '\x7f';
                t = 0;
                if (0 < iVar7) {
                  t = iVar7;
                }
                if (t < 0x7f) {
                  if (iVar7 < 1) {
                    pan = '\0';
                  }
                  else {
                    pan = (u8)iVar7;
                  }
                }
                alSynSetPan(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),pan);
                pitch = extraout_f12_03;
              }
              uVar6 = ((ALEvent *)param_2)->type & 0x2d1;
              break;
            case 8:
              *(short *)(ppiStack88 + 0xd) =
                   (short)*(undefined4 *)((int)&((ALEvent *)param_2)->msg + 6);
              if (*(char *)((int)ppiStack88 + 0x3f) == '\x01') {
                t = ((int)*(short *)(DAT_80063ba4 + ((uint)*(byte *)((int)piVar4 + 2) & 0x3f) * 2) *
                    ((int)((uint)*(byte *)((int)*ppiVar3 + 0xd) * (int)*(short *)(ppiStack88 + 0xd)
                          * (uint)*(byte *)((int)ppiVar3 + 0xd)) / 0x3f01)) / 0x7fff + -1;
                volume = (s16)t;
                if (t < 0) {
                  volume = 0;
                }
                alSynSetVol(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),volume,1000);
                pitch = extraout_f12_07;
              }
              uVar6 = ((ALEvent *)param_2)->type & 0x2d1;
              break;
            case 0x10:
              ppiStack88[0xb] = *(int **)((int)&((ALEvent *)param_2)->msg + 6);
              if (*(char *)((int)ppiStack88 + 0x3f) == '\x01') {
                alSynSetPitch(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),pitch);
                if ((*(byte *)((int)ppiStack88 + 0x3e) & 0x20) != 0) {
                  music_related_20((int)ppiStack88);
                  pitch = extraout_f12_05;
                  goto LAB_70008538;
                }
                uVar6 = ((ALEvent *)param_2)->type;
                pitch = extraout_f12_04;
              }
              else {
LAB_70008538:
                uVar6 = ((ALEvent *)param_2)->type;
              }
              uVar6 &= 0x2d1;
            }
          }
        }
        else {
          if (uVar6 == 0x40) {
            if ((*(byte *)((int)ppiStack88 + 0x3e) & 2) == 0) {
              t = ((int)*(short *)(DAT_80063ba4 + ((uint)*(byte *)((int)piVar4 + 2) & 0x3f) * 2) *
                  ((int)((uint)*(byte *)((int)*ppiVar3 + 0xd) * (int)*(short *)(ppiStack88 + 0xd) *
                        (uint)*(byte *)((int)ppiVar3 + 0xd)) / 0x3f01)) / 0x7fff + -1;
              volume = (s16)t;
              if (t < 0) {
                volume = 0;
              }
              t = (int)(((float)(*ppiVar3)[1] / (float)ppiStack88[10]) / (float)ppiStack88[0xb]);
              alSynSetVol(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),volume,t);
              sStack36 = 2;
              ppiStack32 = ppiStack88;
              alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)&sStack36,t);
              if ((*(byte *)((int)ppiStack88 + 0x3e) & 0x20) == 0) {
                uVar6 = ((ALEvent *)param_2)->type;
                pitch = extraout_f12_09;
              }
              else {
                music_related_20((int)ppiStack88);
                uVar6 = ((ALEvent *)param_2)->type;
                pitch = extraout_f12_10;
              }
            }
            else {
              uVar6 = ((ALEvent *)param_2)->type;
            }
            uVar6 &= 0x2d1;
          }
          else {
            uVar6 &= 0x2d1;
          }
        }
      }
      else {
        if (uVar6 == 0x80) {
          music_related_19(ppiStack88);
          uVar6 = ((ALEvent *)param_2)->type & 0x2d1;
          pitch = extraout_f12_11;
        }
        else {
          if (uVar6 == 0x100) {
            uVar8 = *(uint *)((int)&((ALEvent *)param_2)->msg + 6);
            *(undefined *)((int)ppiStack88 + 0x3d) = (char)uVar8;
            if (*(char *)((int)ppiStack88 + 0x3f) == '\x01') {
              uVar8 = ((uVar8 & 0xff) + ((uint)*(byte *)((int)piVar4 + 3) & 0xf)) * 8;
              pan = (u8)uVar8;
              if (false) {
                uVar8 = 0;
              }
              if (uVar8 < 0x80) {
                if (false) {
                  pan = '\0';
                }
              }
              else {
                pan = '\x7f';
              }
              alSynSetFXMix(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),pan);
              pitch = extraout_f12_06;
            }
            uVar6 = ((ALEvent *)param_2)->type & 0x2d1;
          }
          else {
            uVar6 &= 0x2d1;
          }
        }
      }
    }
    else {
      if (uVar6 == 0x200) {
        if ((*(byte *)((int)ppiStack88 + 0x3e) & 0x10) != 0) {
          play_sfx_a1(*(void **)((int)&((ALEvent *)param_2)->msg + 10),
                      *(short *)((int)&((ALEvent *)param_2)->msg + 8),(sfxdata *)ppiStack88[0xc]);
          uVar6 = ((ALEvent *)param_2)->type;
          pitch = extraout_f12_12;
        }
        uVar6 &= 0x2d1;
      }
      else {
        if (uVar6 == 0x400) {
LAB_7000838c:
          if (uVar6 == 0x1000) {
            if ((*(byte *)((int)ppiStack88 + 0x3e) & 2) != 0) {
              cVar2 = *(char *)((int)ppiStack88 + 0x3f);
              goto LAB_700083a8;
            }
          }
          else {
            cVar2 = *(char *)((int)ppiStack88 + 0x3f);
LAB_700083a8:
            if (cVar2 == '\x01') {
              music_related_21((int **)(ALEventQueue *)(param_1 + 0x14),(int *)ppiStack88,0x40);
              t = (int)(((float)(*ppiVar3)[2] / (float)ppiStack88[10]) / (float)ppiStack88[0xb]);
              alSynSetVol(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),0,t);
              if (t == 0) {
                music_related_19(ppiStack88);
                pitch = extraout_f12_01;
              }
              else {
                sStack36 = 0x80;
                ppiStack32 = ppiStack88;
                alEvtqPostEvent((ALEventQueue *)(param_1 + 0x14),(ALEvent *)&sStack36,t);
                *(undefined *)((int)ppiStack88 + 0x3f) = 2;
                pitch = extraout_f12_00;
              }
              uVar6 = ((ALEvent *)param_2)->type;
            }
            else {
              if ((cVar2 == '\x04') || (cVar2 == '\x05')) {
                music_related_19(ppiStack88);
                uVar6 = ((ALEvent *)param_2)->type;
                pitch = extraout_f12_02;
              }
            }
            if (uVar6 == 2) {
              ((ALEvent *)param_2)->type = 0x1000;
              uVar6 = 0;
            }
          }
          uVar6 &= 0x2d1;
        }
        else {
          if (uVar6 == 0x800) {
            if (*(char *)((int)ppiStack88 + 0x3f) == '\x01') {
              t = ((int)*(short *)(DAT_80063ba4 + ((uint)*(byte *)((int)piVar4 + 2) & 0x3f) * 2) *
                  ((int)((uint)*(byte *)((int)*ppiVar3 + 0xd) * (int)*(short *)(ppiStack88 + 0xd) *
                        (uint)*(byte *)((int)ppiVar3 + 0xd)) / 0x3f01)) / 0x7fff + -1;
              volume = (s16)t;
              if (t < 0) {
                volume = 0;
              }
              alSynSetVol(*(ALSynth **)(param_1 + 0x38),(ALVoice *)(ppiStack88 + 3),volume,
                          (int)(((float)(*ppiVar3)[2] / (float)ppiStack88[10]) /
                               (float)ppiStack88[0xb]));
              uVar6 = ((ALEvent *)param_2)->type;
              pitch = extraout_f12_08;
            }
            uVar6 &= 0x2d1;
          }
          else {
            if (uVar6 == 0x1000) goto LAB_7000838c;
            uVar6 &= 0x2d1;
          }
        }
      }
    }
    if ((ppiStack92 != NULL) && (uVar6 == 0)) {
      uStack80 = (uint)*(byte *)((int)ppiStack92 + 0x3e) & 1;
    }
    if (uStack80 != 0) {
      return;
    }
    if (ppiStack92 == NULL) {
      return;
    }
    ppiStack88 = ppiStack92;
    if (uVar6 != 0) {
      return;
    }
  } while( true );
}



void music_related_19(int **param_1)

{
  if ((*(byte *)((int)param_1 + 0x3e) & 4) != 0) {
    alSynStopVoice(*(ALSynth **)(off_800243F0 + 0x38),(ALVoice *)(param_1 + 3));
    alSynFreeVoice(*(ALSynth **)(off_800243F0 + 0x38),(ALVoice *)(param_1 + 3));
  }
  music_related_24(param_1);
  music_related_21((int **)(off_800243F0 + 0x14),(int *)param_1,0xffff);
  return;
}



void music_related_20(int param_1)

{
  f32 fVar1;
  s16 sStack16;
  int iStack12;
  float fStack8;
  
  fVar1 = alCents2Ratio((int)*(char *)(*(int *)(*(int *)(param_1 + 8) + 4) + 5));
  sStack16 = 0x10;
  fStack8 = (float)fVar1 * *(float *)(param_1 + 0x2c);
  iStack12 = param_1;
  alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack16,0x8235);
  return;
}



void music_related_21(int **param_1,int *param_2,ushort param_3)

{
  ALLink_s *pAVar1;
  ALLink *a;
  OSIntMask OVar2;
  
  OVar2 = osSetIntMask(1);
  pAVar1 = (ALLink_s *)param_1[2];
  while (a = (ALLink *)pAVar1, a != NULL) {
    pAVar1 = a->next;
    if (((ALLink_s *)param_2 == a[2].next) && ((*(ushort *)&a[1].prev & param_3) != 0)) {
      if (pAVar1 != NULL) {
        pAVar1[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar1[1].next)->next);
      }
      alUnlink(a);
      alLink(a,(ALLink *)param_1);
    }
  }
  osSetIntMask(OVar2);
  return;
}



uint music_related_22(short *param_1,short *param_2)

{
  int *piVar1;
  short sVar2;
  int iVar3;
  short sVar4;
  short sVar5;
  uint uVar6;
  
  sVar4 = 0;
  piVar1 = dword_800243E4;
  sVar5 = 0;
  if (dword_800243E4 != NULL) {
    do {
      piVar1 = (int *)*piVar1;
      sVar4 = sVar5 + 1;
      sVar5 = sVar4;
    } while (piVar1 != NULL);
  }
  sVar2 = 0;
  piVar1 = dword_800243EC;
  sVar5 = 0;
  if (dword_800243EC != NULL) {
    do {
      piVar1 = (int *)*piVar1;
      sVar2 = sVar5 + 1;
      sVar5 = sVar2;
    } while (piVar1 != NULL);
  }
  uVar6 = 0;
  iVar3 = dword_800243E8;
  if (dword_800243E8 != 0) {
    do {
      iVar3 = *(int *)(iVar3 + 4);
      uVar6 = uVar6 + 1 & 0xffff;
    } while (iVar3 != 0);
  }
  *param_1 = sVar2;
  *param_2 = sVar4;
  return uVar6;
}



int ** music_related_23(undefined8 param_1,int *param_2)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  ALLink *a;
  OSIntMask OVar4;
  char cVar5;
  ALLink_s *pAVar6;
  
  a = dword_800243EC;
  iVar2 = param_2[1];
  if (dword_800243EC != NULL) {
    OVar4 = osSetIntMask(1);
    dword_800243EC = (ALLink *)a->next;
    alUnlink(a);
    if (dword_800243E4 == NULL) {
      a->prev = NULL;
      a->next = NULL;
      dword_800243E8 = a;
    }
    else {
      *(ALLink **)&a->next = dword_800243E4;
      a->prev = NULL;
      *(ALLink **)&dword_800243E4->prev = a;
    }
    dword_800243E4 = a;
    osSetIntMask(OVar4);
    iVar3 = *(int *)(*param_2 + 4);
    *(undefined *)((int)&a[7].prev + 3) = 5;
    cVar5 = (iVar3 == -1) + '@';
    *(char *)((int)&a[6].prev + 2) = cVar5;
    a[7].next = (ALLink_s *)0x2;
    *(int **)&a[1].next = param_2;
    a[5].prev = (ALLink_s *)0x3f800000;
    bVar1 = *(byte *)(iVar2 + 3);
    a[6].next = NULL;
    *(byte *)((int)&a[7].prev + 2) = bVar1 & 0xf0;
    if ((bVar1 & 0x20) == 0) {
      pAVar6 = (ALLink_s *)
               alCents2Ratio(((uint)*(byte *)(iVar2 + 4) * 0x18 + (uint)*(byte *)(iVar2 + 4)) * 4 +
                             (int)*(char *)(iVar2 + 5) + -6000);
      a[5].next = pAVar6;
    }
    else {
      pAVar6 = (ALLink_s *)
               alCents2Ratio(((uint)*(byte *)(iVar2 + 4) * 0x18 + (uint)*(byte *)(iVar2 + 4)) * 4 +
                             -6000);
      a[5].next = pAVar6;
    }
    if (cVar5 != '@') {
      *(byte *)((int)&a[7].prev + 2) = *(byte *)((int)&a[7].prev + 2) | 2;
    }
    *(undefined *)((int)&a[7].prev + 1) = 0;
    *(undefined *)&a[7].prev = 0x40;
    *(undefined2 *)&a[6].prev = 0x7fff;
  }
  return (int **)a;
}



void music_related_24(int **param_1)

{
  int **ppiVar1;
  
  if (param_1 == dword_800243E4) {
    dword_800243E4 = (int **)*param_1;
  }
  if (param_1 == dword_800243E8) {
    dword_800243E8 = (int **)param_1[1];
  }
  alUnlink((ALLink *)param_1);
  if (dword_800243EC == NULL) {
    param_1[1] = NULL;
    *param_1 = NULL;
  }
  else {
    *(int ***)param_1 = dword_800243EC;
    param_1[1] = NULL;
    *(int ***)((int *)dword_800243EC + 1) = param_1;
  }
  if ((*(byte *)((int)param_1 + 0x3e) & 4) == 0) {
    ppiVar1 = (int **)param_1[0xc];
  }
  else {
    dword_800243F4 += -1;
    ppiVar1 = (int **)param_1[0xc];
  }
  dword_800243EC = param_1;
  *(undefined *)((int)param_1 + 0x3f) = 0;
  if (ppiVar1 != NULL) {
    if (param_1 == (int **)*ppiVar1) {
      *ppiVar1 = NULL;
      param_1[0xc] = NULL;
    }
    else {
      param_1[0xc] = NULL;
    }
  }
  return;
}



void music_related_25(int param_1,undefined param_2)

{
  if (param_1 != 0) {
    *(undefined *)(param_1 + 0x36) = param_2;
  }
  return;
}



ulonglong music_related_26(int param_1)

{
  if (param_1 != 0) {
    return (ulonglong)*(byte *)(param_1 + 0x3f);
  }
  return 0;
}



int ** play_sfx_a1(void *buffer,short entry,sfxdata *data)

{
  byte bVar1;
  int *piVar2;
  int **ppiVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int **ppiVar7;
  int iVar8;
  s16 sStack64;
  int **ppiStack60;
  int iStack56;
  void *pvStack52;
  s16 sStack48;
  int **ppiStack44;
  int iStack28;
  int iStack24;
  short sStack18;
  
  iVar4 = (int)entry;
  ppiVar7 = NULL;
  sStack18 = 0;
  iVar6 = 0;
  if (bootswitch_sound == '\0') {
    if (iVar4 == 0) {
      ppiVar7 = NULL;
    }
    else {
      iVar8 = *(int *)((int)buffer + 0xc);
      iVar5 = iStack28;
      while( true ) {
        piVar2 = *(int **)(iVar8 + iVar4 * 4 + 0xc);
        ppiVar3 = music_related_23((longlong)(int)buffer,piVar2);
        if (ppiVar3 != NULL) {
          *(int ***)(off_800243F0 + 0x3c) = ppiVar3;
          sStack48 = 1;
          bVar1 = *(byte *)(piVar2[1] + 1);
          iVar5 = ((uint)bVar1 * 0x208 + (uint)bVar1) * 0x40 + (uint)bVar1 * -0xb;
          if ((*(byte *)((int)ppiVar3 + 0x3e) & 0x10) == 0) {
            ppiStack44 = ppiVar3;
            alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack48,iVar5 + 1);
            ppiVar7 = ppiVar3;
          }
          else {
            *(byte *)((int)ppiVar3 + 0x3e) = *(byte *)((int)ppiVar3 + 0x3e) & 0xef;
            ppiStack44 = ppiVar3;
            alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack48,iVar6 + 1);
            iStack24 = iVar5 + 1;
            sStack18 = (short)iVar4;
            ppiVar7 = ppiVar3;
          }
        }
        iVar6 += iVar5;
        iVar4 = (int)(((uint)*(byte *)piVar2[1] + ((uint)((byte *)piVar2[1])[2] & 0xc0) * 4) *
                     0x10000) >> 0x10;
        iVar8 = iStack28;
        if ((iVar4 == 0) || (iVar8 = iVar5, ppiVar3 == NULL)) break;
        iVar8 = *(int *)((int)buffer + 0xc);
      }
      iStack28 = iVar8;
      if (ppiVar7 != NULL) {
        bVar1 = *(byte *)((int)ppiVar7 + 0x3e);
        *(byte *)((int)ppiVar7 + 0x3e) = bVar1 | 1;
        *(sfxdata **)(ppiVar7 + 0xc) = data;
        if (sStack18 != 0) {
          *(byte *)((int)ppiVar7 + 0x3e) = bVar1 | 0x11;
          sStack64 = 0x200;
          iStack56 = (int)sStack18;
          ppiStack60 = ppiVar7;
          pvStack52 = buffer;
          alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack64,iStack24);
        }
      }
      if (data != NULL) {
        *(int ***)&data->target_volume = ppiVar7;
      }
    }
  }
  else {
    ppiVar7 = NULL;
  }
  return ppiVar7;
}



void music_related_28(int param_1)

{
  s16 sStack16;
  int iStack12;
  
  sStack16 = 0x400;
  if (param_1 != 0) {
    *(byte *)(param_1 + 0x3e) = *(byte *)(param_1 + 0x3e) & 0xef;
    iStack12 = param_1;
    alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack16,0);
  }
  return;
}



void music_related_29(byte param_1)

{
  undefined4 *puVar1;
  s16 sStack20;
  undefined4 *puStack16;
  OSIntMask OStack4;
  
  OStack4 = osSetIntMask(1);
  puVar1 = dword_800243E4;
  while (puVar1 != NULL) {
    sStack20 = 0x400;
    puStack16 = puVar1;
    if (param_1 == (*(byte *)((int)puVar1 + 0x3e) & param_1)) {
      *(byte *)((int)puVar1 + 0x3e) = *(byte *)((int)puVar1 + 0x3e) & 0xef;
      puStack16 = puVar1;
      alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack20,0);
    }
    puVar1 = (undefined4 *)*puVar1;
  }
  osSetIntMask(OStack4);
  return;
}



void music_related_30(void)

{
  music_related_29(1);
  return;
}



void music_related_32(void)

{
  music_related_29(0x11);
  return;
}



void music_related_34(void)

{
  music_related_29(3);
  return;
}



void music_related_36(longlong param_1,s16 param_2,undefined4 param_3)

{
  s16 sStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  
  uStack12 = (undefined4)param_1;
  if (param_1 != 0) {
    sStack16 = param_2;
    uStack8 = param_3;
    alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack16,0);
  }
  return;
}



u32 music_related_37(void)

{
  ulonglong uVar1;
  
  uVar1 = music_related_40(0);
  return (u32)uVar1;
}



void music_related_38(ulonglong param_1)

{
  ulonglong uVar1;
  
  uVar1 = 0;
  do {
    music_related_42(uVar1,param_1 & 0xffff);
    uVar1 = (longlong)((int)uVar1 + 1) & 0xff;
  } while (uVar1 < 7);
  return;
}



void music_related_39(f32 param_1)

{
  u32 uVar1;
  
  flt_800243FC = param_1;
  uVar1 = music_related_37();
  music_related_38((longlong)(int)uVar1 & 0xffff);
  return;
}



ulonglong music_related_40(uint param_1)

{
  return (ulonglong)*(ushort *)(DAT_80063ba8 + (param_1 & 0xff) * 2);
}



void music_related_42(ulonglong param_1,ulonglong param_2)

{
  int iVar1;
  undefined4 *puVar2;
  float fVar3;
  s16 sStack24;
  undefined4 *puStack20;
  
  puVar2 = dword_800243E4;
  iVar1 = (int)(param_1 & 0xff) * 2;
  *(undefined2 *)(DAT_80063ba8 + iVar1) = (short)(param_2 & 0xffff);
  fVar3 = (float)(int)(param_2 & 0xffff);
  if (false) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_80063ba4 + iVar1) = (short)(int)(fVar3 * (float)flt_800243FC);
  if (puVar2 != NULL) {
    iVar1 = puVar2[2];
    while( true ) {
      if (iVar1 == 0) {
        puVar2 = (undefined4 *)*puVar2;
      }
      else {
        if ((param_1 & 0xff) == ((ulonglong)*(byte *)(*(int *)(iVar1 + 4) + 2) & 0x3f)) {
          sStack24 = 0x800;
          puStack20 = puVar2;
          alEvtqPostEvent((ALEventQueue *)(off_800243F0 + 0x14),(ALEvent *)&sStack24,0);
          puVar2 = (undefined4 *)*puVar2;
        }
        else {
          puVar2 = (undefined4 *)*puVar2;
        }
      }
      if (puVar2 == NULL) break;
      iVar1 = puVar2[2];
    }
  }
  return;
}



void something_with_memp_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&memp_c_debug_debug_notice_list_entry,aMemp_c_debug);
  return;
}



void check_memflag_tokens(int param_1,int param_2)

{
  byte *__nptr;
  int iVar1;
  int local_20;
  long local_1c;
  undefined4 local_18;
  long local_14;
  undefined4 local_10;
  long local_c;
  undefined4 local_8;
  undefined4 local_4;
  
  memory_bank_ptrs.bankend = (void *)(param_1 + param_2);
  local_20 = dword_80024414;
  local_1c = dword_80024418;
  local_14 = dword_80024420;
  local_18 = dword_8002441C;
  local_10 = dword_80024424;
  local_c = dword_80024428;
  local_4 = dword_80024430;
  local_8 = dword_8002442C;
  memory_bank_ptrs.bankstart = (void *)param_1;
  __nptr = check_token(1,aMf);
  if (__nptr != NULL) {
    __nptr = check_token(1,aMf_0);
    local_1c = strtol((char *)__nptr,NULL,0);
  }
  __nptr = check_token(1,aMl);
  if (__nptr != NULL) {
    __nptr = check_token(1,aMl_0);
    local_14 = strtol((char *)__nptr,NULL,0);
  }
  __nptr = check_token(1,aMe);
  if (__nptr != NULL) {
    __nptr = check_token(1,aMe_0);
    local_c = strtol((char *)__nptr,NULL,0);
  }
  if (local_c == 0) {
    local_1c = 0;
    iVar1 = 0x128;
    if (j_text_trigger != 0) {
      iVar1 = 0x134;
    }
    local_c = iVar1 * 0x400;
    local_14 = param_2 + iVar1 * -0x400;
  }
  memp_related_0(&local_20);
  return;
}



void memp_related_0(int *param_1)

{
  uint uVar1;
  longlong left;
  int iVar2;
  longlong right;
  uint uVar3;
  uint *puVar4;
  uint *puVar5;
  uint uStack32;
  int iStack28;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  uint uStack8;
  uint uStack4;
  
  uVar1 = dword_80024434;
  uStack32 = dword_80024434;
  iStack28 = dword_80024438;
  puVar4 = &uStack32;
  iStack24 = dword_8002443C;
  iStack20 = dword_80024440;
  iStack16 = dword_80024444;
  iStack12 = dword_80024448;
  uStack8 = dword_8002444C;
  iVar2 = *param_1;
  uVar3 = param_1[1];
  while( true ) {
    (&uStack32)[iVar2] = uVar3;
    iVar2 = param_1[2];
    if (iVar2 == 0) break;
    uVar3 = param_1[3];
    param_1 = param_1 + 2;
  }
  do {
    puVar5 = puVar4 + 1;
    puVar4 = puVar4 + 1;
    uVar1 = *puVar5 + uVar1;
    *puVar4 = uVar1;
  } while (puVar4 < &uStack8);
  right = (longlong)(int)((int)memory_bank_ptrs.bankend - (int)memory_bank_ptrs.bankstart);
  puVar4 = &uStack32;
  do {
    left = __ll_mul((longlong)((int)*puVar4 >> 0x1f),(longlong)(int)*puVar4);
    __ll_div(left,right);
    puVar5 = puVar4 + 1;
    *puVar4 = (uint)right;
    puVar4 = puVar5;
  } while (puVar5 < &uStack4);
  puVar4 = &uStack32;
  do {
    puVar5 = puVar4 + 1;
    *puVar4 = (*puVar4 | 0xf) ^ 0xf;
    puVar4 = puVar5;
  } while (puVar5 < &uStack4);
  memorybank1.bankstart = (void *)(uStack32 + (int)memory_bank_ptrs.bankstart);
  memorybank1.nextentry = NULL;
  memorybank1.bankend = (void *)(iStack28 + (int)memory_bank_ptrs.bankstart);
  memorybank2.bankstart = (void *)(iStack28 + (int)memory_bank_ptrs.bankstart);
  memorybank2.nextentry = NULL;
  memorybank2.bankend = (void *)(iStack24 + (int)memory_bank_ptrs.bankstart);
  memorybank3.bankstart = (void *)(iStack24 + (int)memory_bank_ptrs.bankstart);
  memorybank3.nextentry = NULL;
  memorybank3.bankend = (void *)(iStack20 + (int)memory_bank_ptrs.bankstart);
  memorybank4_room.bankstart = (void *)(iStack20 + (int)memory_bank_ptrs.bankstart);
  memorybank4_room.nextentry = NULL;
  memorybank4_room.bankend = (void *)(iStack16 + (int)memory_bank_ptrs.bankstart);
  memorybank5_font.bankstart = (void *)(iStack16 + (int)memory_bank_ptrs.bankstart);
  memorybank5_font.nextentry = NULL;
  memorybank5_font.bankend = (void *)(iStack12 + (int)memory_bank_ptrs.bankstart);
  memorybank6_text.bankstart = (void *)(iStack12 + (int)memory_bank_ptrs.bankstart);
  memorybank6_text.nextentry = NULL;
  memorybank6_text.bankend = (void *)(uStack8 + (int)memory_bank_ptrs.bankstart);
  return;
}



void * allocate_bytes_in_bank(int bytes,u32 bank)

{
  void *pvVar1;
  void *pvVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = (bank & 0xff) << 4;
  while( true ) {
    iVar3 = tied_to_mem_management;
    pvVar1 = *(void **)((int)&memory_bank_ptrs.nextentry + iVar4);
    if (pvVar1 == NULL) {
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
    pvVar2 = *(void **)((int)&memory_bank_ptrs.bankend + iVar4);
    if (pvVar2 < pvVar1) {
      nulled_list_all8_mem_alloc_banks_sizes();
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
    if ((void *)((int)pvVar1 + bytes) <= pvVar2) {
      *(int *)((int)&memory_bank_ptrs.nextentry + iVar4) = (int)pvVar1 + bytes;
      *(void **)((int)&memory_bank_ptrs.data2 + iVar4) = pvVar1;
      return pvVar1;
    }
    if (memorybank6_text.bankend < (void *)((int)memorybank6_text.nextentry + bytes)) break;
    tied_to_mem_management = 1;
    if (iVar3 == 0) {
      iVar4 = 0x60;
    }
    else {
      iVar4 = 0x60;
    }
  }
  nulled_list_all8_mem_alloc_banks_sizes();
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



undefined8 memp_related_1(void *ptrdata,int size,uint bank)

{
  void *pvVar1;
  undefined8 uVar2;
  
  bank &= 0xff;
  if ((tied_to_mem_management != 0) && (ptrdata == memorybank6_text.data2)) {
    bank = 6;
  }
  pvVar1 = (&memory_bank_ptrs)[bank].nextentry;
  if (pvVar1 == NULL) {
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  if (ptrdata == (&memory_bank_ptrs)[bank].data2) {
    size -= (int)((int)pvVar1 - (int)(&memory_bank_ptrs)[bank].data2);
    if (size < 1) {
      (&memory_bank_ptrs)[bank].nextentry = (void *)((int)pvVar1 + size);
      uVar2 = 1;
    }
    else {
      if ((&memory_bank_ptrs)[bank].bankend < pvVar1) {
        nulled_list_all8_mem_alloc_banks_sizes();
        do {
                    // WARNING: Do nothing block with infinite loop
        } while( true );
      }
      if ((&memory_bank_ptrs)[bank].bankend < (void *)((int)pvVar1 + size)) {
        nulled_list_all8_mem_alloc_banks_sizes();
        do {
                    // WARNING: Do nothing block with infinite loop
        } while( true );
      }
      (&memory_bank_ptrs)[bank].nextentry = (void *)((int)pvVar1 + size);
      uVar2 = 1;
    }
  }
  else {
    uVar2 = 2;
  }
  return uVar2;
}



void nulled_list_all8_mem_alloc_banks_sizes(void)

{
  u32 bank;
  
  bank._0_1_ = 1;
  do {
    bank._0_1_ += 1;
  } while (bank._0_1_ < 7);
  return;
}



int memp_related_3(uint bank)

{
  bank &= 0xff;
  if (tied_to_mem_management != 0) {
    bank = 6;
  }
  if ((bank == 4) && (memorybank4_room.bankstart == memorybank4_room.bankend)) {
    bank = 6;
  }
  return (int)((int)(&memory_bank_ptrs)[bank].bankend - (int)(&memory_bank_ptrs)[bank].nextentry);
}



uint memp_related_4(uint param_1,u32 param_2)

{
  void *pvVar1;
  
  pvVar1 = allocate_bytes_in_bank(param_1 >> 3,param_1 & 7);
  return (uint)pvVar1;
}



void resetMemBank(u32 bank)

{
  void *pvVar1;
  uint uVar2;
  
  uVar2 = bank & 0xff;
  pvVar1 = (&memory_bank_ptrs)[uVar2].bankstart;
  (&memory_bank_ptrs)[uVar2].data2 = NULL;
  (&memory_bank_ptrs)[uVar2].nextentry = pvVar1;
  return;
}



void set_bank_nextentry_to_NULL(u32 bank)

{
  nulled_list_all8_mem_alloc_banks_sizes();
  if ((&memory_bank_ptrs)[bank & 0xff].nextentry != NULL) {
    (&memory_bank_ptrs)[bank & 0xff].nextentry = NULL;
  }
  return;
}



void swap_entries(memorybank *a,memorybank *b)

{
  void *tempstart;
  void *tempend;
  
  tempstart = a->bankstart;
  tempend = a->nextentry;
  a->bankstart = b->bankstart;
  a->nextentry = b->nextentry;
  b->bankstart = tempstart;
  b->nextentry = tempend;
  return;
}



void merge_alloc_entries(memorybank *param_1,memorybank *param_2)

{
  param_1->nextentry = (void *)((int)param_1->nextentry + (int)param_2->nextentry);
  param_2->bankstart = NULL;
  param_2->nextentry = NULL;
  return;
}



undefined8 sort_merge_entries_in_alloc_table(int param_1)

{
  void *pvVar1;
  memorybank *a;
  memorybank *pmVar2;
  memorybank *b;
  memorybank *pmVar3;
  void *b_bStart;
  undefined8 uVar4;
  void *a_bStart;
  void *b_bNext;
  
  a = (memorybank *)(param_1 + 0x10);
  uVar4 = 0;
  b_bStart = NULL;
  if (a <= (memorybank *)(param_1 + 0xfe8)) {
    pvVar1 = *(void **)(param_1 + 0x14);
    b = (memorybank *)(param_1 + 8);
    while( true ) {
      pmVar3 = b;
      pmVar2 = a;
      if (pvVar1 != NULL) {
        a_bStart = a->bankstart;
        if (a_bStart < b_bStart) {
          swap_entries(a,b);
          a_bStart = a->bankstart;
          b_bNext = b->nextentry;
        }
        else {
          b_bNext = b->nextentry;
        }
        b_bNext = (void *)((int)b_bNext + (int)b_bStart);
        b_bStart = a_bStart;
        pmVar3 = a;
        pmVar2 = a;
        if (a_bStart == b_bNext) {
          uVar4 = 1;
          merge_alloc_entries(b,a);
          b_bStart = b->bankstart;
          pmVar3 = b;
          pmVar2 = b;
        }
      }
      a = (memorybank *)&pmVar2->bankend;
      if ((memorybank *)(param_1 + 0xfe8) < a) break;
      pvVar1 = pmVar2->data2;
      b = pmVar3;
    }
  }
  return uVar4;
}



void memp_related_7(void)

{
  longlong lVar1;
  
  lVar1 = sort_merge_entries_in_alloc_table((int)&ptr_table_allocated_mem_blocks);
  while (lVar1 != 0) {
    lVar1 = sort_merge_entries_in_alloc_table((int)&ptr_table_allocated_mem_blocks);
  }
  return;
}



uint * mem_related(int param_1)

{
  void *pvVar1;
  memorybank *pmVar2;
  memorybank *a;
  void *pvVar3;
  void *pvVar4;
  memorybank *pmVar5;
  memorybank *pmVar6;
  int iVar7;
  
  pmVar5 = (memorybank *)(param_1 + 0x10);
  pmVar6 = (memorybank *)(param_1 + 0xfe8);
  iVar7 = 0;
  pmVar2 = pmVar5;
  while( true ) {
    while (a = pmVar2, pmVar6 < a) {
      iVar7 += 1;
      pmVar2 = pmVar5;
      if (0x1fb < iVar7) {
        if (pmVar6 < pmVar5) {
          return (uint *)pmVar5;
        }
        pvVar1 = (void *)0xffffffff;
        pvVar3 = *(void **)(param_1 + 0x14);
        pmVar2 = pmVar5;
        while( true ) {
          a = pmVar5;
          if (pvVar1 <= pvVar3) {
            pvVar3 = pvVar1;
            a = pmVar2;
          }
          if (pmVar6 < (memorybank *)&pmVar5->bankend) break;
          pvVar1 = pvVar3;
          pvVar3 = pmVar5->data2;
          pmVar5 = (memorybank *)&pmVar5->bankend;
          pmVar2 = a;
        }
        return (uint *)a;
      }
    }
    pvVar3 = a->nextentry;
    if (pvVar3 == NULL) break;
    pvVar1 = a->bankend;
    if (pvVar1 < a->bankstart) {
      swap_entries(a,(memorybank *)&a->bankend);
      pvVar3 = a->nextentry;
      pvVar1 = a->bankend;
      pvVar4 = (void *)((int)a->bankstart + (int)pvVar3);
    }
    else {
      pvVar4 = (void *)((int)a->bankstart + (int)pvVar3);
    }
    pmVar2 = (memorybank *)&a->bankend;
    if (pvVar1 == pvVar4) {
      pvVar1 = a->data2;
      a->bankend = NULL;
      a->data2 = NULL;
      a->nextentry = (void *)((int)pvVar3 + (int)pvVar1);
      return (uint *)(memorybank *)&a->bankend;
    }
  }
  return (uint *)a;
}



void mem_related_model_room_buffers(uint param_1,uint param_2)

{
  int iVar1;
  uint *puVar2;
  uint *puVar3;
  uint *puVar4;
  uint uVar5;
  int iVar6;
  
  iVar6 = (param_1 - memorybank7_roomsec) * 0x1fc;
  iVar1 = iVar6 / size_modelroom_buf;
  puVar4 = &ptr_first_entry_in_alloc_table + iVar1 * 2;
  if (size_modelroom_buf == 0) {
    trap(0x1c00);
  }
  if ((size_modelroom_buf == -1) && (iVar6 == -0x80000000)) {
    trap(0x1800);
  }
  if ((&DAT_80063c3c)[iVar1 * 2] == 0) {
    uVar5 = *puVar4;
    puVar2 = puVar4;
  }
  else {
    uVar5 = (&DAT_80063c44)[iVar1 * 2];
    puVar3 = puVar4;
    while (puVar2 = puVar3 + 2, uVar5 != 0) {
      uVar5 = puVar3[5];
      puVar3 = puVar2;
    }
    uVar5 = *puVar2;
  }
  if (uVar5 == 0xffffffff) {
    puVar2 = puVar4;
    if ((&DAT_80063c3c)[iVar1 * 2] != 0) {
      uVar5 = (&DAT_80063c34)[iVar1 * 2];
      while (puVar2 = puVar4 + -2, uVar5 != 0) {
        uVar5 = puVar4[-3];
        puVar4 = puVar2;
      }
    }
    if (*puVar2 == 0) {
      puVar2 = mem_related((int)&ptr_table_allocated_mem_blocks);
    }
  }
  *puVar2 = param_1;
  puVar2[1] = param_2;
  return;
}



void something_with_mema_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&mema_c_debug_debug_notice_list_entry,aMema_c_debug);
  return;
}



void reinit_m_malloc_table(void *ptr_allocmem,u32 size)

{
  undefined4 *puVar1;
  
  s32_80064c18 = -1;
  s32_80064c20 = -1;
  ptr_table_allocated_mem_blocks = 0;
  DAT_80063c2c = 0;
  memorybank8_unk = 0;
  DAT_80063c34 = 0;
  DAT_80064c1c = 0;
  s32_80064c24 = -1;
  puVar1 = &ptr_first_entry_in_alloc_table;
  do {
    puVar1 = puVar1 + 2;
    *puVar1 = 0;
    puVar1[1] = 0;
    puVar1 = puVar1;
  } while (puVar1 < (undefined4 *)0x80064c11);
  memorybank7_roomsec = ptr_allocmem;
  size_modelroom_buf = size;
  ptr_first_entry_in_alloc_table = ptr_allocmem;
  DAT_80063c3c = size;
  return;
}



void mem_related_calls_sort_merge_entries(void)

{
  sort_merge_entries_in_alloc_table((int)&ptr_table_allocated_mem_blocks);
  return;
}



int mem_related_something_find_first(uint param_1)

{
  int iVar1;
  uint uVar2;
  int *piVar3;
  uint uVar4;
  int iVar5;
  int *piVar6;
  
  piVar6 = &ptr_first_entry_in_alloc_table;
  uVar4 = 0xffffffff;
  piVar3 = NULL;
  iVar5 = 0;
  do {
    iVar5 += 1;
    uVar2 = piVar6[1] - param_1;
    if (param_1 <= (uint)piVar6[1]) {
      if ((*piVar6 == -1) ||
         ((uVar2 < uVar4 &&
          ((piVar3 = piVar6, uVar2 < 0x40 || (uVar4 = uVar2, piVar3 = piVar6, uVar2 < param_1 >> 2))
          )))) break;
    }
    piVar6 = piVar6 + 2;
  } while (iVar5 != 0x10);
  if (piVar3 == NULL) {
    iVar5 = 0;
    piVar3 = piVar6;
    if ((uint)piVar6[1] < param_1) {
      uVar4 = piVar6[3];
      while (piVar3 = piVar6 + 2, uVar4 < param_1) {
        uVar4 = piVar6[5];
        piVar6 = piVar3;
      }
    }
    if (*piVar3 == -1) {
      piVar3 = &ptr_first_entry_in_alloc_table;
      do {
        sort_merge_entries_in_alloc_table((int)&ptr_table_allocated_mem_blocks);
        iVar5 += 1;
      } while (iVar5 != 8);
      uVar4 = DAT_80063c44;
      iVar5 = ptr_first_entry_in_alloc_table;
      piVar6 = piVar3;
      if (DAT_80063c3c < param_1) {
        while (piVar3 = piVar6 + 2, uVar4 < param_1) {
          uVar4 = piVar6[5];
          piVar6 = piVar3;
        }
        iVar5 = *piVar3;
      }
      if (iVar5 == -1) {
        return 0;
      }
    }
    iVar5 = *piVar3;
  }
  else {
    iVar5 = *piVar3;
  }
  iVar1 = piVar3[1];
  *piVar3 = iVar5 + param_1;
  piVar3[1] = iVar1 - param_1;
  if (iVar1 - param_1 == 0) {
    *piVar3 = 0;
  }
  return iVar5;
}



int mem_related_something_find_first_0(int param_1,uint param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  
  piVar1 = &ptr_first_entry_in_alloc_table;
  iVar2 = ptr_first_entry_in_alloc_table;
  if (ptr_first_entry_in_alloc_table != -1) {
    do {
      if (param_1 == iVar2) {
        if (param_2 <= (uint)piVar1[1]) {
          iVar3 = piVar1[1] - param_2;
          *piVar1 = iVar2 + param_2;
          piVar1[1] = iVar3;
          if (iVar3 == 0) {
            *piVar1 = 0;
          }
          return param_1;
        }
        iVar2 = piVar1[2];
      }
      else {
        iVar2 = piVar1[2];
      }
      piVar1 = piVar1 + 2;
    } while (iVar2 != -1);
  }
  return 0;
}



void mem_related_model_room_buffers_0(uint param_1,uint param_2)

{
  mem_related_model_room_buffers(param_1,param_2);
  return;
}



void mem_related_allocated_table_related(void)

{
  undefined4 *puVar1;
  
  puVar1 = &DAT_80063c48;
  while (puVar1 != (undefined4 *)&DAT_80064c08) {
    puVar1 = puVar1 + 8;
  }
  return;
}



float mem_related_something_first_related(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  undefined4 *puVar4;
  float fVar5;
  float fVar6;
  
  iVar2 = 0;
  uVar3 = 0;
  puVar4 = &ptr_first_entry_in_alloc_table;
  uVar1 = DAT_80063c3c;
  if (ptr_first_entry_in_alloc_table != -1) {
    while( true ) {
      iVar2 += uVar1;
      if (uVar3 < uVar1) {
        uVar3 = uVar1;
      }
      if (puVar4[2] == -1) break;
      uVar1 = puVar4[3];
      puVar4 = puVar4 + 2;
    }
  }
  if (iVar2 != 0) {
    fVar5 = (float)(iVar2 - uVar3);
    if ((int)(iVar2 - uVar3) < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fVar6 = (float)iVar2;
    if (iVar2 < 0) {
      fVar6 = fVar6 + 4294967296.00000000;
    }
    return fVar5 / fVar6;
  }
  return 0.00000000;
}



uint generate_list_alloc_mem(void)

{
  int *piVar1;
  int *piVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  undefined4 *puVar7;
  char *__s;
  int iVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  undefined auStack4116 [4116];
  
  uVar5 = 0x80000000;
  iVar8 = 0;
  puVar7 = &ptr_first_entry_in_alloc_table;
  uVar4 = 0;
  if (ptr_first_entry_in_alloc_table != -1) {
    do {
      piVar1 = puVar7 + 2;
      piVar2 = puVar7 + 1;
      puVar7 = puVar7 + 2;
      uVar4 += *piVar2;
    } while (*piVar1 != -1);
  }
  __s = auStack4116;
  iVar6 = ptr_first_entry_in_alloc_table;
  while( true ) {
    puVar7 = &ptr_first_entry_in_alloc_table;
    iVar10 = 0;
    uVar9 = 0;
    uVar3 = DAT_80063c3c;
    if (iVar6 != -1) break;
LAB_7000a1c4:
    uVar5 = uVar9;
    if (iVar10 == 0) {
      if (200 < iVar8) {
        uVar4 = sprintf(__s,aD_5,iVar8);
      }
      return uVar4;
    }
    puVar7 = &ptr_first_entry_in_alloc_table;
    uVar9 = DAT_80063c3c;
    if (iVar6 != -1) {
      while( true ) {
        uVar4 = uVar9;
        if (uVar5 == uVar4) {
          if (iVar8 < 200) {
            uVar4 = sprintf(__s,aD_3,uVar4 + 0x200 >> 10);
            __s = __s + uVar4;
          }
          else {
            if (iVar8 == 200) {
              uVar4 = sprintf(__s,a___);
              __s = __s + uVar4;
            }
          }
          iVar8 += 1;
          iVar10 = puVar7[2];
        }
        else {
          iVar10 = puVar7[2];
        }
        iVar6 = ptr_first_entry_in_alloc_table;
        if (iVar10 == -1) break;
        uVar9 = puVar7[3];
        puVar7 = puVar7 + 2;
      }
    }
  }
  do {
    uVar4 = uVar3;
    if (uVar4 < uVar5) {
      if (uVar9 < uVar4) {
        iVar10 += 1;
        uVar9 = uVar4;
        goto LAB_7000a1b4;
      }
      iVar11 = puVar7[2];
    }
    else {
LAB_7000a1b4:
      iVar11 = puVar7[2];
    }
    if (iVar11 == -1) goto LAB_7000a1c4;
    uVar3 = puVar7[3];
    puVar7 = puVar7 + 2;
  } while( true );
}



uint generate_lists_before_after_mem_merge(void)

{
  uint uVar1;
  int count;
  
  generate_list_alloc_mem();
  count = 0;
  do {
    sort_merge_entries_in_alloc_table((int)&ptr_table_allocated_mem_blocks);
    count += 1;
  } while (count != 0x1fc);
  uVar1 = generate_list_alloc_mem();
  return uVar1;
}



void mem_related_something_first_related_0(undefined *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  
  puVar1 = &ptr_first_entry_in_alloc_table;
  iVar2 = ptr_first_entry_in_alloc_table;
  iVar3 = DAT_80063c3c;
  if (ptr_first_entry_in_alloc_table != -1) {
    while( true ) {
      (*(code *)param_1)(iVar2 + iVar3,puVar1);
      if (puVar1[2] == -1) break;
      iVar2 = puVar1[2];
      iVar3 = puVar1[3];
      puVar1 = puVar1 + 2;
    }
  }
  return;
}



uint mem_related_0(void)

{
  uint uVar1;
  undefined4 *puVar2;
  uint uVar3;
  int iVar4;
  
  memp_related_7();
  uVar3 = 0;
  puVar2 = &ptr_first_entry_in_alloc_table;
  uVar1 = DAT_80063c3c;
  if (ptr_first_entry_in_alloc_table != -1) {
    while( true ) {
      if (uVar3 < uVar1) {
        iVar4 = puVar2[2];
        uVar3 = uVar1;
      }
      else {
        iVar4 = puVar2[2];
      }
      if (iVar4 == -1) break;
      uVar1 = puVar2[3];
      puVar2 = puVar2 + 2;
    }
  }
  if (uVar3 == 0) {
    uVar3 = 0;
  }
  return uVar3;
}



undefined8 mem_related_1(int param_1,ulonglong param_2,ulonglong param_3)

{
  int iVar2;
  undefined8 uVar1;
  int iVar3;
  
  iVar3 = (int)param_3;
  iVar2 = (int)param_2;
  if (param_2 < param_3) {
    iVar2 = mem_related_something_find_first_0(param_1 + iVar2,iVar3 - iVar2);
    if (iVar2 == 0) {
      uVar1 = 0;
    }
    else {
      uVar1 = 1;
    }
  }
  else {
    if (param_3 < param_2) {
      mem_related_model_room_buffers_0(param_1 + iVar3,iVar2 - iVar3);
    }
    uVar1 = 1;
  }
  return uVar1;
}



u32 get_random_value(void)

{
  ulonglong uVar1;
  
  uVar1 = ((randseed << 0x3f) >> 0x1f | (randseed << 0x1f) >> 0x20) ^ (randseed << 0x2c) >> 0x20;
  randseed = uVar1 >> 0x14 & 0xfff ^ uVar1;
  return (u32)randseed;
}



void increment_random_num(u64 param_1)

{
  randseed = param_1 + 1;
  return;
}



u32 lotsa_shifting_random_related(ulonglong *param_1)

{
  ulonglong uVar1;
  
  uVar1 = *param_1;
  uVar1 = ((uVar1 << 0x3f) >> 0x1f | (uVar1 << 0x1f) >> 0x20) ^ (uVar1 << 0x2c) >> 0x20;
  uVar1 = uVar1 >> 0x14 & 0xfff ^ uVar1;
  *param_1 = uVar1;
  return (u32)uVar1;
}



byte * check_string_something(byte *param_1)

{
  byte bVar1;
  byte *pbVar2;
  
  strstr_numstings = 1;
  bVar1 = *param_1;
  strstr_ptrcurrent_string = str_empty;
  while (bVar1 != 0) {
    if (bVar1 == 0x20) {
      bVar1 = param_1[1];
      pbVar2 = param_1;
      while( true ) {
        *pbVar2 = 0;
        param_1 = pbVar2 + 1;
        if (bVar1 != 0x20) break;
        bVar1 = pbVar2[2];
        pbVar2 = param_1;
      }
    }
    (&strstr_ptrcurrent_string)[strstr_numstings] = param_1;
    strstr_numstings += 1;
    bVar1 = *param_1;
    if (0x20 < bVar1) {
      bVar1 = param_1[1];
      pbVar2 = param_1;
      while (param_1 = pbVar2 + 1, 0x20 < bVar1) {
        bVar1 = pbVar2[2];
        pbVar2 = param_1;
      }
    }
  }
  return param_1;
}



char * strtok(char *__s,char *__delim)

{
  byte *pbVar1;
  
  textpointer_load_parse_something((char *)&OSMesg_boot_token_from_indy_80064c30,__s);
  pbVar1 = check_string_something((byte *)&OSMesg_boot_token_from_indy_80064c30);
  return (char *)pbVar1;
}



uint check_boot_switches(void)

{
  BOOL BVar1;
  byte *pbVar2;
  OSMesg *data;
  u32 devAddr;
  uint uStack16;
  
  devAddr = 0xffb000;
  BVar1 = rmon_debug_is_final_build();
  if (BVar1 == FALSE) {
    data = &OSMesg_boot_token_from_indy_80064c30;
    do {
      osPiReadIo(devAddr,(u32 *)data);
      data = data + 1;
      devAddr += 4;
    } while (data != piCmdBuf);
  }
  else {
    OSMesg_boot_token_from_indy_80064c30 = NULL;
  }
  check_string_something((byte *)&OSMesg_boot_token_from_indy_80064c30);
  pbVar2 = check_token(1,aD_6);
  uStack16 = (uint)(pbVar2 != NULL);
  pbVar2 = check_token(1,aS_2);
  if (pbVar2 != NULL) {
    bootswitch_sound = 1;
  }
  pbVar2 = check_token(1,aJ);
  if (pbVar2 != NULL) {
    j_text_trigger = 1;
  }
  return uStack16;
}



byte * check_token(int instance,char *token)

{
  size_t sVar2;
  longlong lVar1;
  byte **ppbVar3;
  int iVar4;
  
  sVar2 = strlen(token);
  iVar4 = 1;
  if (1 < (int)strstr_numstings) {
    ppbVar3 = (byte **)&dword_80024478;
    do {
      lVar1 = string_related((byte *)token,*ppbVar3,(longlong)(int)sVar2);
      if ((lVar1 == 0) && (instance += -1, instance == 0)) {
        return *ppbVar3 + sVar2;
      }
      iVar4 += 1;
      ppbVar3 = ppbVar3 + 1;
    } while (iVar4 < (int)strstr_numstings);
  }
  return NULL;
}



char * textpointer_load_parse_something(char *param_1,char *param_2)

{
  char cVar1;
  char *pcVar2;
  
  cVar1 = *param_2;
  param_2 = param_2 + 1;
  *param_1 = cVar1;
  pcVar2 = param_1 + 1;
  while (cVar1 != '\0') {
    cVar1 = *param_2;
    param_2 = param_2 + 1;
    *pcVar2 = cVar1;
    pcVar2 = pcVar2 + 1;
  }
  return param_1;
}



char * something_with_strings(char *param_1,char *param_2,int param_3)

{
  char cVar1;
  char *pcVar2;
  
  cVar1 = *param_2;
  param_2 = param_2 + 1;
  *param_1 = cVar1;
  pcVar2 = param_1 + 1;
  while ((cVar1 != '\0' && (param_3 += -1, param_3 != 0))) {
    cVar1 = *param_2;
    param_2 = param_2 + 1;
    *pcVar2 = cVar1;
    pcVar2 = pcVar2 + 1;
  }
  while (param_3 != 0) {
    param_3 += -1;
    *pcVar2 = '\0';
    pcVar2 = pcVar2 + 1;
  }
  return param_1;
}



char * string_load_parse_something(char *param_1,char *param_2)

{
  char cVar1;
  char *pcVar2;
  char *pcVar3;
  
  if (*param_1 == '\0') {
    cVar1 = *param_2;
    pcVar3 = param_1;
  }
  else {
    cVar1 = param_1[1];
    pcVar2 = param_1;
    while (pcVar3 = pcVar2 + 1, cVar1 != '\0') {
      cVar1 = pcVar2[2];
      pcVar2 = pcVar3;
    }
    cVar1 = *param_2;
  }
  param_2 = param_2 + 1;
  *pcVar3 = cVar1;
  while (cVar1 != '\0') {
    pcVar3 = pcVar3 + 1;
    cVar1 = *param_2;
    param_2 = param_2 + 1;
    *pcVar3 = cVar1;
  }
  return param_1;
}



undefined8 something_with_strings_0(byte *param_1,char *param_2)

{
  byte bVar1;
  undefined8 uVar2;
  
  bVar1 = *param_1;
  if (bVar1 == *param_2) {
    if (bVar1 == 0) {
      return 0;
    }
    uVar2 = something_with_strings_0(param_1 + 1,param_2 + 1);
    return uVar2;
  }
  if (bVar1 < (byte)*param_2) {
    return 0xffffffffffffffff;
  }
  return 1;
}



void dummy7000A890(void)

{
  return;
}



undefined8 string_related(byte *param_1,byte *param_2,longlong param_3)

{
  byte bVar1;
  undefined8 uVar2;
  
  if (param_3 == 0) {
    return 0;
  }
  bVar1 = *param_1;
  if (bVar1 != *param_2) {
    if (bVar1 < *param_2) {
      return 0xffffffffffffffff;
    }
    return 1;
  }
  if (bVar1 == 0) {
    return 0;
  }
  uVar2 = string_related(param_1 + 1,param_2 + 1,(longlong)((int)param_3 + -1));
  return uVar2;
}



void dummy7000A8F0(void)

{
  return;
}



uint strtol_related(uint param_1)

{
  param_1 &= 0xff;
  if ((0x60 < param_1) && (param_1 < 0x7b)) {
    return param_1 - 0x20 & 0xff;
  }
  return param_1;
}



ulonglong strtol_related_0(byte param_1)

{
  ulonglong uVar1;
  
  uVar1 = (ulonglong)(param_1 < 0x30) ^ 1;
  if (uVar1 != 0) {
    uVar1 = (ulonglong)(param_1 < 0x3a);
  }
  return uVar1;
}



ulonglong strtol_related_1(byte param_1)

{
  ulonglong uVar1;
  
  if (((param_1 < 0x61) || (uVar1 = (ulonglong)(param_1 < 0x7b), param_1 >= 0x7b)) &&
     (uVar1 = (ulonglong)(param_1 < 0x41) ^ 1, uVar1 != 0)) {
    uVar1 = (ulonglong)(param_1 < 0x5b);
  }
  return uVar1;
}



ulonglong strtol_related_2(char param_1)

{
  ulonglong uVar1;
  
  uVar1 = (ulonglong)(param_1 == ' ');
  if ((((param_1 != ' ') && (uVar1 = (ulonglong)(param_1 == '\t'), param_1 != '\t')) &&
      (uVar1 = (ulonglong)(param_1 == '\n'), param_1 != '\n')) &&
     (uVar1 = (ulonglong)(param_1 == '\f'), param_1 != '\f')) {
    uVar1 = (ulonglong)(param_1 == '\v');
  }
  return uVar1;
}



long strtol(char *__nptr,char **__endptr,int __base)

{
  byte *pbVar1;
  byte bVar2;
  bool bVar3;
  bool bVar4;
  ulonglong uVar5;
  uint uVar7;
  ulonglong uVar6;
  char cVar8;
  uint uVar9;
  byte *pbVar10;
  byte *pbVar11;
  
  if (((__base < 0) || (__base == 1)) || (0x24 < __base)) {
    __base = 10;
    cVar8 = *__nptr;
  }
  else {
    cVar8 = *__nptr;
  }
  uVar5 = strtol_related_2(cVar8);
  if (uVar5 == 0) {
    bVar2 = *__nptr;
    pbVar10 = (byte *)__nptr;
  }
  else {
    pbVar10 = (byte *)(__nptr + 1);
    while (uVar5 = strtol_related_2(*pbVar10), uVar5 != 0) {
      pbVar10 = pbVar10 + 1;
    }
    bVar2 = *pbVar10;
  }
  if (bVar2 != 0) {
    if (bVar2 == 0x2d) {
      bVar3 = true;
      pbVar10 = pbVar10 + 1;
    }
    else {
      if (bVar2 == 0x2b) {
        bVar3 = false;
        pbVar10 = pbVar10 + 1;
      }
      else {
        bVar3 = false;
      }
    }
    if (((__base == 0x10) && (*pbVar10 == 0x30)) &&
       (uVar7 = strtol_related((uint)pbVar10[1]), uVar7 == 0x58)) {
      pbVar10 = pbVar10 + 2;
    }
    uVar5 = (ulonglong)*pbVar10;
    if ((__base == 0) && (__base = 10, *pbVar10 == 0x30)) {
      uVar7 = strtol_related((uint)pbVar10[1]);
      __base = 8;
      if (uVar7 == 0x58) {
        pbVar10 = pbVar10 + 2;
        __base = 0x10;
      }
      uVar5 = (ulonglong)*pbVar10;
    }
    bVar4 = false;
    uVar7 = 0;
    pbVar11 = pbVar10;
    if (uVar5 != 0) {
      do {
        uVar6 = strtol_related_0((byte)uVar5);
        if (uVar6 == 0) {
          uVar6 = strtol_related_1((byte)uVar5);
          if (uVar6 == 0) break;
          uVar9 = strtol_related((uint)uVar5);
          uVar9 -= 0x37;
        }
        else {
          uVar9 = (uint)uVar5 - 0x30;
        }
        uVar9 &= 0xff;
        if (__base <= (int)uVar9) break;
        if (__base == 0) {
          trap(0x1c00);
        }
        if (0xffffffffU / (uint)__base < uVar7) {
LAB_7000abb8:
          bVar4 = true;
        }
        else {
          if (uVar7 == 0xffffffffU / (uint)__base) {
            if (__base == 0) {
              trap(0x1c00);
            }
            if (0xffffffffU % __base < uVar9) goto LAB_7000abb8;
          }
          uVar7 = uVar7 * __base + uVar9;
        }
        pbVar1 = pbVar11 + 1;
        uVar5 = (ulonglong)*pbVar1;
        pbVar11 = pbVar11 + 1;
      } while (*pbVar1 != 0);
    }
    if (pbVar11 != pbVar10) {
      if (__endptr != NULL) {
        *(byte **)__endptr = pbVar11;
      }
      if (!bVar4) {
        if (bVar3) {
          return -uVar7;
        }
        return uVar7;
      }
      return -1;
    }
  }
  if (__endptr != NULL) {
    *__endptr = __nptr;
  }
  return 0;
}



u8 * proutSprintf(void *dest,void *src,size_t size)

{
  void *pvVar1;
  
  pvVar1 = memcpy(dest,src,size);
  return (u8 *)((int)pvVar1 + size);
}



int sprintf(char *__s,char *__format,...)

{
  int iVar1;
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  undefined4 uStackX8;
  undefined4 uStackX12;
  
  uStackX8 = in_a2_lo;
  uStackX12 = in_a3_lo;
  iVar1 = _Printf(proutSprintf,__s,__format,&uStackX8);
  if (-1 < iVar1) {
    __s[iVar1] = '\0';
  }
  return iVar1 + -1;
}



void start_pi_manager(void)

{
  osCreatePiManager(0x96,&piCmdQ,piCmdBuf,8);
  return;
}



void removed_7000ad30(void)

{
  return;
}



void something_with_vi_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&ptr_vi_c_debug_debug_notice_list,aVi_c_debug);
  osCreateMesgQueue(&vi_c_debug_MQ,vi_c_debug_MSG,8);
  return;
}



undefined8 removed_7000AD80(undefined4 param_1,undefined4 param_2)

{
  return 0;
}



undefined8 removed_7000AD90(undefined4 param_1,undefined4 param_2)

{
  return 0;
}



void removed_7000ada0(void)

{
  return;
}



void removed_7000ada8(void)

{
  return;
}



void debug_text_related_2(void)

{
  debug_text_related_1();
  return;
}



void display_text_to_coord(int x,int y,char char)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  undefined *puVar4;
  undefined uVar5;
  
  puVar4 = stdout_primary_color_table;
  iVar2 = 0;
  iVar3 = 0;
  do {
    uVar5 = (undefined)iVar2;
    piVar1 = (int *)(puVar4 + 4);
    puVar4 = puVar4 + 8;
    if ((debug_text_color == *piVar1) &&
       (speedgraph_color == *(int *)(stdout_environment_color_table + iVar3 + 4)))
    goto LAB_7000aea8;
    iVar2 += 1;
    iVar3 += 8;
  } while (iVar2 < 0x20);
  iVar2 = (int)string_formatting[0] * 8;
  *(undefined4 *)(stdout_primary_color_table + iVar2) = stdout_primary_color;
  puVar4 = string_formatting[0] + 1;
  *(int *)(stdout_primary_color_table + iVar2 + 4) = debug_text_color;
  *(undefined4 *)(stdout_environment_color_table + iVar2) = debug_text_bg_color;
  *(int *)(stdout_environment_color_table + iVar2 + 4) = speedgraph_color;
  string_formatting[0] = (undefined *)((uint)puVar4 & 0x1f);
  if (((int)puVar4 < 0) && (string_formatting[0] != NULL)) {
    string_formatting[0] = string_formatting[0] + -0x20;
  }
  uVar5 = SUB41(string_formatting[0],0);
LAB_7000aea8:
  iVar2 = x * 0x46 + y * 2;
  stdout_debug_menu_screen_buffer[iVar2] = char;
  stdout_debug_menu_screen_buffer[iVar2 + 1] = uVar5;
  return;
}



void debugMenuSetTextPOStoOffset(void)

{
  debug_menu_x_text_pos = debug_menu_x_pos_offset;
  debug_menu_y_text_pos = debug_menu_y_pos_offset;
  return;
}



void debug_text_related_1(void)

{
  int x;
  int y;
  
  y = 0;
  do {
    x = 0;
    do {
      display_text_to_coord(x,y,'\0');
      x += 1;
    } while (x != 0x50);
    y += 1;
  } while (y != 0x23);
  debugMenuSetTextPOStoOffset();
  removed_7000ada0();
  string_formatting[0] = NULL;
  return;
}



void removed_7000af84(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  return;
}



int something_debug_info_related(int param_1)

{
  bool bVar1;
  int x;
  int y;
  
  y = 0x21;
  param_1 += 0x21;
  do {
    if ((param_1 < 0) || (x = 0, 0x22 < param_1)) {
      x = 0;
      do {
        display_text_to_coord(x,y,'\0');
        x += 1;
      } while (x != 0x50);
    }
    else {
      do {
        removed_7000af84(x,param_1,x,y);
        x += 1;
      } while (x != 0x50);
    }
    param_1 += -1;
    bVar1 = y != 0;
    y += -1;
  } while (bVar1);
  return 0;
}



void set_final_debug_text_positions(int xadjust,int yadjust)

{
  debug_menu_x_text_pos = xadjust + debug_menu_x_pos_offset;
  debug_menu_y_text_pos = yadjust + debug_menu_y_pos_offset;
  return;
}



void set_debug_text_color(s32 red,s32 blue,s32 green,s32 alpha)

{
  debug_text_color = red << 0x18 | blue << 0x10 | green << 8 | 0xffU - alpha;
  return;
}



void set_color_speedgraph(int red,int green,int blue,int alpha)

{
  speedgraph_color = red << 0x18 | green << 0x10 | blue << 8 | 0xffU - alpha;
  return;
}



// WARNING: Instruction at (ram,0x7000b120) overlaps instruction at (ram,0x7000b11c)
// 

void write_char_to_screen(byte char)

{
  short txtClipW;
  short txtClipH;
  int iVar1;
  
  txtClipW = get_video2_settings_txtClipW();
  iVar1 = (int)txtClipW + -0xd;
  if (iVar1 < 0) {
    iVar1 = (int)txtClipW + -10;
  }
  txtClipH = get_video2_settings_txtClipH();
  if ((char == 0) || ((0x1f < char && (char < 0x7f)))) {
    display_text_to_coord(debug_menu_x_text_pos,debug_menu_y_text_pos,char);
  }
  debug_menu_x_text_pos += 1;
  if (((char == 0xd) || (char == 10)) || (iVar1 >> 2 <= debug_menu_x_text_pos)) {
    debug_menu_y_text_pos += 1;
    debug_menu_x_text_pos = debug_menu_x_pos_offset;
    if (((int)txtClipH + -10) / 7 <= debug_menu_y_text_pos) {
      debug_menu_y_text_pos = debug_menu_y_pos_offset;
    }
  }
  return;
}



void debug_text_related_0(int x,int y,byte char)

{
  set_final_debug_text_positions(x,y);
  write_char_to_screen(char);
  return;
}



void write_string_stdout(byte *string)

{
  byte char;
  
  char = *string;
  while (char != 0) {
    string = string + 1;
    write_char_to_screen(char);
    char = *string;
  }
  return;
}



void debug_text_related(int x,int y,byte *character)

{
  byte char;
  
  set_final_debug_text_positions(x,y);
  char = *character;
  while (char != 0) {
    character = character + 1;
    write_char_to_screen(char);
    char = *character;
  }
  return;
}



uint * read_screen_display_block_and_write_chars(uint *param_1)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  u32 uVar4;
  char *pcVar5;
  undefined1 *puVar6;
  ulonglong uVar7;
  uint uVar8;
  int iVar9;
  uint *ptr_DLtarget;
  int iVar10;
  byte *pbVar11;
  int iStack72;
  
  uVar7 = 0xffffffffffffffff;
  iVar9 = 0;
  ptr_DLtarget = param_1;
  do {
    puVar6 = stdout_debug_menu_screen_buffer;
    pcVar5 = stdout_debug_menu_screen_buffer + iVar9;
    do {
      puVar6 = puVar6 + 0x46;
      if (*pcVar5 != '\0') {
        if ((ulonglong)(byte)pcVar5[1] == uVar7) {
          ptr_DLtarget = ptr_DLtarget + 6;
        }
        else {
          ptr_DLtarget = ptr_DLtarget + 10;
          uVar7 = (ulonglong)(byte)pcVar5[1];
        }
      }
      pcVar5 = pcVar5 + 0x46;
    } while (puVar6 != stdout_primary_color_table);
    iVar9 += 2;
  } while (iVar9 < 0x46);
  iVar9 = num_microcode_cmds_that_fit((int)param_1);
  ptr_DLtarget = (uint *)((int)ptr_DLtarget - (int)param_1);
  iVar9 += -0x800;
  if (0 < (int)ptr_DLtarget) {
    uVar7 = 0xffffffffffffffff;
    if (iVar9 < 1) {
      dword_800268B8 = 0;
    }
    else {
      if (iVar9 < (int)ptr_DLtarget) {
        dword_800268B8 = (iVar9 * 0xff) / (int)ptr_DLtarget;
        if (ptr_DLtarget == NULL) {
          trap(0x1c00);
        }
        if ((ptr_DLtarget == (uint *)0xffffffff) && (iVar9 * 0xff == -0x80000000)) {
          trap(0x1800);
        }
      }
      else {
        dword_800268B8 = 0x100;
      }
    }
    *param_1 = 0x6000000;
    param_1[1] = 0x80024fb0;
    param_1 = param_1 + 2;
    iStack72 = 0;
    iVar9 = 0;
    do {
      iVar10 = 0;
      pbVar11 = stdout_debug_menu_screen_buffer + iStack72;
      do {
        bVar1 = *pbVar11;
        bVar2 = pbVar11[1];
        if (bVar1 != 0) {
          iVar3 = (uint)bVar2 * 8;
          ptr_DLtarget = param_1;
          if ((ulonglong)bVar2 != uVar7) {
            ptr_DLtarget = param_1 + 4;
            *param_1 = *(uint *)(stdout_primary_color_table + iVar3);
            param_1[1] = *(uint *)(stdout_primary_color_table + iVar3 + 4);
            param_1[2] = *(uint *)(stdout_environment_color_table + iVar3);
            param_1[3] = *(uint *)(stdout_environment_color_table + iVar3 + 4);
            uVar7 = (ulonglong)bVar2;
          }
          uVar4 = get_random_value();
          param_1 = ptr_DLtarget;
          if (((uVar4 & 0xff) < dword_800268B8) &&
             (iVar3 = num_microcode_cmds_that_fit((int)ptr_DLtarget), param_1 = ptr_DLtarget,
             0x3ff < iVar3)) {
            uVar8 = (uint)bVar1 - 0x20;
            *ptr_DLtarget =
                 (iVar10 * 0x10 + 0x10U & 0xfff) << 0xc | 0xe4000000 | iVar9 * 0x1c + 0x1cU & 0xfff;
            ptr_DLtarget[1] = (iVar10 * 0x10 & 0xfffU) << 0xc | iVar9 * 0x1c & 0xfffU;
            ptr_DLtarget[2] = 0xb4000000;
            ptr_DLtarget[3] = (uVar8 & 0x1f) << 0x17 | ((int)uVar8 >> 5) * 0xe0 & 0xffffU;
            ptr_DLtarget[4] = 0xb3000000;
            ptr_DLtarget[5] = 0x4000400;
            param_1 = ptr_DLtarget + 6;
          }
        }
        iVar10 += 1;
        pbVar11 = pbVar11 + 0x46;
      } while (iVar10 != 0x50);
      iVar9 += 1;
      iStack72 += 2;
    } while (iVar9 != 0x23);
  }
  return param_1;
}



void something_with_joy_c_debug(void)

{
  OSContPad *pOVar1;
  OSContPad *pOVar2;
  OSContPad *pOVar3;
  
  get_ptr_debug_notice_list_entry(&joy_c_ptr_debug_notice_list_entry,aJoy_c_debug);
  osCreateMesgQueue(&cont1MesgMQ,&cont1Mesg,1);
  osCreateMesgQueue(&cont2MesgMQ,&cont2Mesg,1);
  osCreateMesgQueue(&cont3MesgMQ,&cont3Mesg,1);
  osCreateMesgQueue(&cont4MesgMQ,&cont4Mesg,1);
  osCreateMesgQueue(&contDEMOMesgMQ,&contDEMOMesg,10);
  osSetEventMesg(OS_EVENT_SI,&contDEMOMesgMQ,0);
  enableControllers = TRUE;
  disable_all_rumble = 0;
  pOVar3 = &OSContPad_80064f30;
  ptr_to_tlb_ramrom_record = 0;
  pOVar2 = pOVar3;
  do {
    *(undefined4 *)(pOVar3 + 0x50) = 0;
    *(undefined4 *)&pOVar3[0x50].errno = 0;
    *(undefined4 *)&pOVar3[0x51].stick_x = 0;
    *(undefined4 *)(pOVar3 + 0x52) = 0;
    *(undefined4 *)(pOVar3 + 0x54) = 0xffffffff;
    pOVar1 = pOVar2 + 0x54;
    pOVar3 = (OSContPad *)&pOVar3[0x54].errno;
    pOVar2[3].errno = '\0';
    pOVar2[3].stick_y = '\0';
    pOVar2[3].stick_x = '\0';
    pOVar2[3].button = 0;
    pOVar2[2].errno = '\0';
    pOVar2[2].stick_y = '\0';
    pOVar2[2].stick_x = '\0';
    pOVar2[2].button = 0;
    pOVar2[1].errno = '\0';
    pOVar2[1].stick_y = '\0';
    pOVar2[1].stick_x = '\0';
    pOVar2[1].button = 0;
    pOVar2->button = 0;
    pOVar2->stick_x = '\0';
    pOVar2->stick_y = '\0';
    pOVar2->errno = '\0';
    pOVar2 = (OSContPad *)&pOVar1->errno;
  } while ((OSContPad *)&pOVar1->errno != (OSContPad *)&contDEMOMesg);
  return;
}



void test_controller_presence(void)

{
  OSMesg pvStack4;
  
  if (enableControllers != FALSE) {
    osSendMesg(&cont1MesgMQ,&pvStack4,0);
    osRecvMesg(&cont2MesgMQ,&pvStack4,1);
    controller_check_for_rumble_maybe();
    osSendMesg(&cont3MesgMQ,&pvStack4,0);
    osRecvMesg(&cont4MesgMQ,&pvStack4,1);
  }
  return;
}



s32 osPfsChecker(OSPfs *pfs)

{
  return 3;
}



// WARNING: Instruction at (ram,0x7000b7d4) overlaps instruction at (ram,0x7000b7d0)
// 

void controller_7000B734(uint param_1)

{
  s32 sVar1;
  int iVar2;
  int *piVar3;
  
  piVar3 = &controller_1_rumble_inserted + param_1;
  if (((-1 < *piVar3) && (((&player1_controllerstatus)[param_1 * 2] & 4) != 0)) &&
     (((&DAT_800653ea)[param_1 * 4] & 1) != 0)) {
    sVar1 = osPfsInit(&contDEMOMesgMQ,(OSPfs *)(&player1_controller_packet + param_1 * 0x68),param_1
                     );
    if ((sVar1 == 10) || (sVar1 == 0xb)) {
      iVar2 = controller_7000CD38(&contDEMOMesgMQ,
                                  (undefined4 *)
                                  (OSPfs *)(&player1_controller_packet + param_1 * 0x68),param_1);
      if (iVar2 == 0) {
        *piVar3 = 1;
      }
      else {
        *piVar3 = -1;
      }
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7000b980) overlaps instruction at (ram,0x7000b97c)
// 

void controller_check_for_rumble_maybe(void)

{
  ulonglong uVar1;
  byte bVar4;
  int iVar2;
  uint uVar3;
  
  if (dword_8002692C == 0) {
    bVar4 = 0xf;
    osContStartQuery(&contDEMOMesgMQ);
    osRecvMesg(&contDEMOMesgMQ,NULL,1);
    osContGetQuery((OSContStatus *)&player1_controllerstatus);
    if ((DAT_800653eb & 8) != 0) {
      bVar4 = 0xe;
    }
    if ((DAT_800653ef & 8) != 0) {
      bVar4 -= 2;
    }
    if ((DAT_800653f3 & 8) != 0) {
      bVar4 -= 4;
    }
    num_controller_plugged_in_flags = bVar4;
    if ((DAT_800653f7 & 8) != 0) {
      num_controller_plugged_in_flags = bVar4 - 8;
    }
  }
  else {
    dword_8002692C = 0;
    osContInit(&contDEMOMesgMQ,&num_controller_plugged_in_flags,
               (OSContStatus *)&player1_controllerstatus);
    dword_8002691C = 1;
  }
  iVar2 = 1;
  while ((int)(char)iVar2 < 4) {
    iVar2 = (int)(char)iVar2 + 1;
  }
  uVar3 = 0;
  do {
    iVar2 = 1 << (uVar3 & 0x1f);
    uVar1 = SEXT48(iVar2);
    bVar4 = (byte)iVar2;
    if (((((ulonglong)num_controller_plugged_in_flags & uVar1) == 0) ||
        (((&player1_controllerstatus)[uVar3 * 2] & 3) == 0)) || ((&DAT_800653eb)[uVar3 * 4] != '\0')
       ) {
      if (((ulonglong)num_controller_plugged_in_flags_0 & uVar1) != 0) {
        num_controller_plugged_in_flags_0 = num_controller_plugged_in_flags_0 ^ bVar4;
        (&controller_1_rumble_inserted)[uVar3] = 0;
      }
    }
    else {
      if ((((ulonglong)(num_controller_plugged_in_flags_0 == 0) & uVar1) != 0) ||
         ((int)(&controller_1_rumble_inserted)[uVar3] < 1)) {
        controller_7000B734(uVar3);
      }
      num_controller_plugged_in_flags_0 |= bVar4;
    }
    uVar3 = (int)((uVar3 + 1) * 0x1000000) >> 0x18;
  } while ((int)uVar3 < 4);
  return;
}



undefined get_attached_controller_count(void)

{
  if (-1 < *(int *)(ptr_current_point_in_controller_input_index + 0x1f8)) {
    return (char)*(int *)(ptr_current_point_in_controller_input_index + 0x1f8);
  }
  if ((num_controller_plugged_in_flags & 1) == 0) {
    return 0;
  }
  if ((num_controller_plugged_in_flags & 2) == 0) {
    return 1;
  }
  if ((num_controller_plugged_in_flags & 4) == 0) {
    return 2;
  }
  if ((num_controller_plugged_in_flags & 8) == 0) {
    return 3;
  }
  return 4;
}



ulonglong get_num_controllers_plugged_in(void)

{
  return (ulonglong)num_controller_plugged_in_flags;
}



void controller_rumble_related(void)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  
  piVar6 = &controller_1_rumble_pulse;
  piVar3 = &controller_1_rumble_state;
  piVar2 = &controller_1_rumble_duration;
  iVar4 = 0;
  iVar5 = 0;
  do {
    if (*piVar3 != *piVar6) {
      if (*piVar6 == 1) {
        iVar1 = controller_7000CAAC((int)(&player1_controller_packet + iVar4 * 0x68));
        if (iVar1 == 0) {
          *piVar3 = 1;
        }
        else {
          *(undefined4 *)((int)&controller_1_rumble_inserted + iVar5) = 0;
        }
      }
      else {
        iVar1 = send_rumble_off_to_PIF((int)(&player1_controller_packet + iVar4 * 0x68));
        if (iVar1 == 0) {
          *piVar3 = 0;
        }
        else {
          *(undefined4 *)((int)&controller_1_rumble_inserted + iVar5) = 0;
        }
      }
    }
    iVar4 += 1;
    iVar5 += 4;
    piVar3 = piVar3 + 1;
    if (*piVar2 < 1) {
      *piVar2 = 0;
    }
    else {
      iVar1 = *piVar2 + -1;
      *piVar2 = iVar1;
      if (iVar1 < 1) {
        *piVar2 = 0;
        *piVar6 = 0;
      }
    }
    piVar6 = piVar6 + 1;
    piVar2 = piVar2 + 1;
  } while (iVar4 != 4);
  return;
}



void set_disable_all_rumble_and_something(undefined4 param_1,undefined4 param_2)

{
  disable_all_rumble = param_1;
  dword_CODE_bss_80065324 = param_2;
  return;
}



void set_ptr_tlb_ramrom_record(undefined4 param_1)

{
  ptr_to_tlb_ramrom_record = param_1;
  return;
}



void probably_ramrom_related(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = 0;
  *(undefined4 *)(param_1 + 0x1e4) = *(undefined4 *)(param_1 + 0x1e0);
  *(undefined4 *)(param_1 + 0x1e0) = *(undefined4 *)(param_1 + 0x1e8);
  iVar4 = 0;
  while( true ) {
    iVar4 = param_1 + iVar4;
    *(undefined2 *)(iVar4 + 0x1f0) = 0;
    iVar3 = *(int *)(param_1 + 0x1e4) + 1;
    if (*(int *)(param_1 + 0x1e4) != *(int *)(param_1 + 0x1e0)) {
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar3 == -0x80000000)) {
        trap(0x1800);
      }
      while( true ) {
        iVar2 = iVar3 % 0x14;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar2 + 0x13 == -0x80000000)) {
          trap(0x1800);
        }
        *(ushort *)(iVar4 + 0x1f0) =
             *(ushort *)(iVar4 + 0x1f0) |
             *(ushort *)(param_1 + iVar2 * 0x18 + iVar1 * 6) &
             ~*(ushort *)(param_1 + ((iVar2 + 0x13) % 0x14) * 0x18 + iVar1 * 6);
        iVar3 = iVar2 + 1;
        if (iVar2 == *(int *)(param_1 + 0x1e0)) break;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar3 == -0x80000000)) {
          trap(0x1800);
        }
      }
    }
    iVar1 = (int)(char)((char)iVar1 + '\x01');
    if (3 < iVar1) break;
    iVar4 = iVar1 << 1;
  }
  return;
}



void redirect_to_ramrom_replay_and_record_handlers_if_set(void)

{
  if (disable_all_rumble != NULL) {
    DAT_80065314 = (*disable_all_rumble)(&DAT_8006512c,DAT_8006530c);
    probably_ramrom_related((int)&DAT_8006512c);
  }
  probably_ramrom_related((int)&OSContPad_80064f30);
  if (ptr_to_tlb_ramrom_record != NULL) {
    (*ptr_to_tlb_ramrom_record)(&OSContPad_80064f30,DAT_80065114,DAT_80065110);
  }
  return;
}



longlong controllerSchedulerRelated(void)

{
  s32 sVar2;
  longlong lVar1;
  int iVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  int *piVar7;
  int *piVar8;
  OSMesg pvStack4;
  
  sVar2 = osRecvMesg(&cont1MesgMQ,&pvStack4,0);
  if (sVar2 == 0) {
    if (dword_800268C8 != 0) {
      osRecvMesg(&contDEMOMesgMQ,&pvStack4,1);
      dword_800268C8 = 0;
    }
    sVar2 = osSendMesg(&cont2MesgMQ,&pvStack4,0);
    lVar1 = (longlong)sVar2;
    dword_800268CC += 1;
  }
  else {
    sVar2 = osRecvMesg(&cont3MesgMQ,&pvStack4,0);
    lVar1 = (longlong)sVar2;
    if (lVar1 == 0) {
      osContStartReadData(&contDEMOMesgMQ);
      dword_800268C8 = 1;
      sVar2 = osSendMesg(&cont4MesgMQ,&pvStack4,0);
      lVar1 = (longlong)sVar2;
      dword_800268CC += -1;
    }
    else {
      if ((dword_800268CC == 0) && (dword_8002691C != 0)) {
        sVar2 = osRecvMesg(&contDEMOMesgMQ,&pvStack4,0);
        lVar1 = (longlong)sVar2;
        if (lVar1 == 0) {
          dword_800268C8 = 0;
          iVar5 = (DAT_80065118 + 1) % 0x14;
          iVar3 = DAT_80065118;
          if (iVar5 != DAT_80065114) {
            iVar3 = iVar5;
          }
          osContGetReadData(&OSContPad_80064f30 + iVar3 * 4);
          DAT_8006511c = (iVar3 + 0x13) % 0x14;
          dword_80026920 += 1;
          DAT_80065118 = iVar3;
          if (dword_80026920 % 0x78 == 0) {
            DAT_80065118 = iVar3;
            controller_check_for_rumble_maybe();
          }
          iVar5 = 0;
          do {
            if ((((&OSContPad_80064f30)[iVar5 + DAT_80065118 * 4].errno == '\0') &&
                ((&OSContPad_80064f30)[iVar5 + DAT_8006511c * 4].errno != '\0')) ||
               (((&OSContPad_80064f30)[iVar5 + DAT_80065118 * 4].errno != '\0' &&
                ((&OSContPad_80064f30)[iVar5 + DAT_8006511c * 4].errno == '\0')))) {
              controller_check_for_rumble_maybe();
              break;
            }
            iVar5 = (iVar5 + 1) * 0x1000000 >> 0x18;
          } while (iVar5 < 4);
          controller_rumble_related();
          sVar2 = osContStartReadData(&contDEMOMesgMQ);
          lVar1 = (longlong)sVar2;
          dword_800268C8 = 1;
          dword_80026970 += 1;
          if (0x3b < dword_80026970) {
            piVar4 = &pl1_controller_failure_pressed;
            piVar7 = &pl1_controller_failure_held;
            piVar6 = &pl1_controller_failure_ud;
            piVar8 = &pl1_controller_failure_lr;
            do {
              if (*piVar8 == 0) {
                if (*piVar6 != 0) {
                  *piVar8 = 0;
                  goto LAB_7000c074;
                }
                if (*piVar7 != 0) {
                  *piVar8 = 0;
                  goto LAB_7000c074;
                }
                if (*piVar4 != 0) {
                  *piVar8 = 0;
                  goto LAB_7000c074;
                }
                iVar5 = piVar8[1];
              }
              else {
                *piVar8 = 0;
LAB_7000c074:
                *piVar6 = 0;
                *piVar7 = 0;
                *piVar4 = 0;
                iVar5 = piVar8[1];
              }
              lVar1 = (longlong)iVar5;
              if (lVar1 == 0) {
                if (piVar6[1] != 0) {
                  piVar8[1] = 0;
                  goto LAB_7000c0b4;
                }
                if (piVar7[1] != 0) {
                  piVar8[1] = 0;
                  goto LAB_7000c0b4;
                }
                if (piVar4[1] != 0) {
                  piVar8[1] = 0;
                  goto LAB_7000c0b4;
                }
              }
              else {
                piVar8[1] = 0;
LAB_7000c0b4:
                piVar6[1] = 0;
                piVar7[1] = 0;
                piVar4[1] = 0;
              }
              piVar4 = piVar4 + 2;
              piVar8 = piVar8 + 2;
              piVar6 = piVar6 + 2;
              piVar7 = piVar7 + 2;
            } while (piVar4 != &dword_80026970);
            dword_80026970 = 0;
          }
        }
      }
    }
  }
  return lVar1;
}



undefined get_cur_controller_horz_stick_pos(char param_1)

{
  uint uVar1;
  
  uVar1 = SEXT14(param_1);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_lr)[uVar1] = (&pl1_controller_failure_lr)[uVar1] + 1;
    return 0;
  }
  return ptr_current_point_in_controller_input_index
         [uVar1 * 6 + *(int *)(ptr_current_point_in_controller_input_index + 0x1e0) * 0x18 + 2];
}



undefined controller_7000C174(char param_1)

{
  uint uVar1;
  
  uVar1 = SEXT14(param_1);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_lr)[uVar1] = (&pl1_controller_failure_lr)[uVar1] + 1;
    return 0;
  }
  return ptr_current_point_in_controller_input_index
         [uVar1 * 6 + *(int *)(ptr_current_point_in_controller_input_index + 0x1e4) * 0x18 + 2];
}



undefined get_cur_controller_vert_stick_pos(char param_1)

{
  uint uVar1;
  
  uVar1 = SEXT14(param_1);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_ud)[uVar1] = (&pl1_controller_failure_ud)[uVar1] + 1;
    return 0;
  }
  return ptr_current_point_in_controller_input_index
         [uVar1 * 6 + *(int *)(ptr_current_point_in_controller_input_index + 0x1e0) * 0x18 + 3];
}



undefined controller_7000C284(char param_1)

{
  uint uVar1;
  
  uVar1 = SEXT14(param_1);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_ud)[uVar1] = (&pl1_controller_failure_ud)[uVar1] + 1;
    return 0;
  }
  return ptr_current_point_in_controller_input_index
         [uVar1 * 6 + *(int *)(ptr_current_point_in_controller_input_index + 0x1e4) * 0x18 + 3];
}



ulonglong get_controller_buttons_held(char param_1,controller_buttons buttons)

{
  uint uVar1;
  
  uVar1 = SEXT14(param_1);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_held)[uVar1] = (&pl1_controller_failure_held)[uVar1] + 1;
    return 0;
  }
  return (ulonglong)
         *(ushort *)
          (ptr_current_point_in_controller_input_index +
          uVar1 * 6 + *(int *)(ptr_current_point_in_controller_input_index + 0x1e0) * 0x18) &
         (longlong)(short)buttons & 0xffffU;
}



ulonglong get_controller_buttons_pressed(char controller,controller_buttons buttonmask)

{
  uint uVar1;
  
  uVar1 = SEXT14(controller);
  if ((*(int *)(ptr_current_point_in_controller_input_index + 0x1f8) < 0) &&
     (((int)(uint)num_controller_plugged_in_flags >> (uVar1 & 0x1f) & 1U) == 0)) {
    (&pl1_controller_failure_pressed)[uVar1] = (&pl1_controller_failure_pressed)[uVar1] + 1;
    return 0;
  }
  return (ulonglong)*(ushort *)(ptr_current_point_in_controller_input_index + uVar1 * 2 + 0x1f0) &
         (longlong)(short)buttonmask & 0xffffU;
}



void proc_7000C430(char *param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  
  uVar2 = 0xf;
  do {
    uVar1 = uVar2 & 0x1f;
    uVar2 -= 1;
    *param_1 = (((int)(param_2 & 0xffff) >> uVar1 & 1U) != 0) * '\x11' + ' ';
    param_1 = param_1 + 1;
  } while (-1 < (int)uVar2);
  return;
}



void proc_7000C470(void)

{
  longlong lVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  lVar1 = get_attached_controller_count();
  if (0 < lVar1) {
    do {
      iVar3 += 1;
      iVar2 = get_attached_controller_count();
    } while (iVar3 < iVar2);
  }
  return;
}



int get_controller_3dstick_L_R(char param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = get_cur_controller_horz_stick_pos(param_1);
  iVar1 += 0x3c;
  if (0x78 < iVar1) {
    iVar1 = 0x78;
  }
  if (iVar1 < 0) {
    iVar1 = 0;
  }
  return (iVar1 * (param_3 - param_2)) / 0x78 + param_2;
}



int get_controller_3dstick_U_D(char param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = get_cur_controller_vert_stick_pos(param_1);
  iVar1 += 0x3c;
  if (0x78 < iVar1) {
    iVar1 = 0x78;
  }
  if (iVar1 < 0) {
    iVar1 = 0;
  }
  return (iVar1 * (param_3 - param_2)) / 0x78 + param_2;
}



float controller_7000C59C(char param_1,float param_2,float param_3)

{
  int iVar1;
  float in_a1_lo;
  float in_a2_lo;
  
  iVar1 = get_cur_controller_horz_stick_pos(param_1);
  iVar1 += 0x3c;
  if (0x78 < iVar1) {
    iVar1 = 0x78;
  }
  if (iVar1 < 0) {
    iVar1 = 0;
  }
  return ((float)iVar1 / 120.00000000) * (in_a2_lo - in_a1_lo) + in_a1_lo;
}



float controller_7000C60C(char param_1,float param_2,float param_3)

{
  int iVar1;
  float in_a1_lo;
  float in_a2_lo;
  
  iVar1 = get_cur_controller_vert_stick_pos(param_1);
  iVar1 += 0x3c;
  if (0x78 < iVar1) {
    iVar1 = 0x78;
  }
  if (iVar1 < 0) {
    iVar1 = 0;
  }
  return ((float)iVar1 / 120.00000000) * (in_a2_lo - in_a1_lo) + in_a1_lo;
}



void controller_7000C67C(void)

{
  OSMesg pvStack4;
  
  osSendMesg(&cont1MesgMQ,&pvStack4,0);
  osRecvMesg(&cont2MesgMQ,&pvStack4,1);
  return;
}



void controller_7000C6BC(void)

{
  OSMesg pvStack4;
  
  osSendMesg(&cont3MesgMQ,&pvStack4,0);
  osRecvMesg(&cont4MesgMQ,&pvStack4,1);
  return;
}



s32 save_7000C6FC(void)

{
  s32 sVar1;
  
  controller_7000C67C();
  sVar1 = osEepromProbe(&contDEMOMesgMQ);
  controller_7000C6BC();
  return sVar1;
}



int save_7000C734(byte param_1,undefined *param_2)

{
  s32 sVar1;
  
  controller_7000C67C();
  sVar1 = osEepromRead(&contDEMOMesgMQ,param_1,param_2);
  controller_7000C6BC();
  return (int)sVar1;
}



int save_7000C778(byte param_1,undefined *param_2)

{
  s32 sVar1;
  
  controller_7000C67C();
  sVar1 = osEepromWrite(&contDEMOMesgMQ,param_1,param_2);
  controller_7000C6BC();
  return (int)sVar1;
}



s32 save_7000C7BC(byte param_1,save_file *param_2,int param_3)

{
  s32 sVar1;
  
  controller_7000C67C();
  sVar1 = osEepromLongRead(&contDEMOMesgMQ,param_1,(u8 *)param_2,param_3);
  controller_7000C6BC();
  return sVar1;
}



s32 save_7000C808(byte address,u8 *buffer,int length)

{
  s32 sVar1;
  
  controller_7000C67C();
  sVar1 = osEepromLongWrite(&contDEMOMesgMQ,address,buffer,length);
  controller_7000C6BC();
  return sVar1;
}



void controller_7000C854(int param_1,float param_2)

{
  float in_a1_lo;
  
  if ((disable_all_rumble == 0) && (0 < (int)(&controller_1_rumble_inserted)[param_1])) {
    if ((int)(&controller_1_rumble_duration)[param_1] < (int)(in_a1_lo * 60.00000000)) {
      (&controller_1_rumble_duration)[param_1] = (int)(in_a1_lo * 60.00000000);
    }
    if ((&controller_1_rumble_state)[param_1] == 0) {
      (&controller_1_rumble_pulse)[param_1] = 1;
    }
  }
  return;
}



void reset_cont_rumble_detect(void)

{
  controller_1_rumble_state = 1;
  controller_2_rumble_state = 1;
  controller_3_rumble_state = 1;
  controller_4_rumble_state = 1;
  controller_1_rumble_pulse = 0;
  controller_2_rumble_pulse = 0;
  controller_3_rumble_pulse = 0;
  controller_4_rumble_pulse = 0;
  return;
}



void controller_7000C930(int param_1)

{
  ptr_current_point_in_controller_input_index =
       (undefined *)((int)&OSContPad_80064f30 + param_1 * 0x1fc);
  return;
}



int controller_7000C954(void)

{
  return (int)(ptr_current_point_in_controller_input_index + 0x7ff9b0d0) / 0x1fc;
}



int send_rumble_off_to_PIF(int param_1)

{
  int iVar1;
  int iVar2;
  OSPifRam *pOVar3;
  u32 *puVar4;
  u32 *puVar5;
  OSPifRam *pOVar6;
  OSPifRam *pOVar7;
  undefined4 uStack52;
  char cStack14;
  int iStack8;
  
  __osSiGetAccess();
  __osContLastCmd = '\x03';
  __osSiRawStartDma(1,&rumble_off_player1_packet_buffer + *(int *)(param_1 + 8) * 0x40);
  osRecvMesg(*(OSMesgQueue **)(param_1 + 4),NULL,1);
  __osSiRawStartDma(0,&__osPfsPifRam);
  osRecvMesg(*(OSMesgQueue **)(param_1 + 4),NULL,1);
  pOVar3 = &__osPfsPifRam;
  iVar1 = *(int *)(param_1 + 8);
  if ((iVar1 != 0) && (iVar2 = 0, pOVar3 = &__osPfsPifRam, 0 < iVar1)) {
    do {
      iVar2 += 1;
      pOVar3 = (OSPifRam *)((int)pOVar3->ramarray + 1);
    } while (iVar2 < iVar1);
  }
  pOVar6 = pOVar3;
  puVar4 = &uStack52;
  do {
    pOVar7 = (OSPifRam *)(pOVar6->ramarray + 3);
    puVar5 = puVar4 + 3;
    *puVar4 = pOVar6->ramarray[0];
    puVar4[1] = pOVar6->ramarray[1];
    puVar4[2] = pOVar6->ramarray[2];
    pOVar6 = pOVar7;
    puVar4 = puVar5;
  } while (pOVar7 != (OSPifRam *)(pOVar3->ramarray + 9));
  *puVar5 = pOVar7->ramarray[0];
  iStack8 = (int)((uint)uStack52._2_1_ & 0xc0) >> 4;
  if ((iStack8 == 0) && (cStack14 != '\0')) {
    iStack8 = 4;
  }
  __osSiRelAccess();
  return iStack8;
}



int controller_7000CAAC(int param_1)

{
  int iVar1;
  int iVar2;
  OSPifRam *pOVar3;
  u32 *puVar4;
  u32 *puVar5;
  OSPifRam *pOVar6;
  OSPifRam *pOVar7;
  undefined4 uStack52;
  char cStack14;
  int iStack8;
  
  __osSiGetAccess();
  __osContLastCmd = '\x03';
  __osSiRawStartDma(1,&rumble_on_player_packet_buffers + *(int *)(param_1 + 8) * 0x40);
  osRecvMesg(*(OSMesgQueue **)(param_1 + 4),NULL,1);
  __osSiRawStartDma(0,&__osPfsPifRam);
  osRecvMesg(*(OSMesgQueue **)(param_1 + 4),NULL,1);
  pOVar3 = &__osPfsPifRam;
  iVar1 = *(int *)(param_1 + 8);
  if ((iVar1 != 0) && (iVar2 = 0, pOVar3 = &__osPfsPifRam, 0 < iVar1)) {
    do {
      iVar2 += 1;
      pOVar3 = (OSPifRam *)((int)pOVar3->ramarray + 1);
    } while (iVar2 < iVar1);
  }
  pOVar6 = pOVar3;
  puVar4 = &uStack52;
  do {
    pOVar7 = (OSPifRam *)(pOVar6->ramarray + 3);
    puVar5 = puVar4 + 3;
    *puVar4 = pOVar6->ramarray[0];
    puVar4[1] = pOVar6->ramarray[1];
    puVar4[2] = pOVar6->ramarray[2];
    pOVar6 = pOVar7;
    puVar4 = puVar5;
  } while (pOVar7 != (OSPifRam *)(pOVar3->ramarray + 9));
  *puVar5 = pOVar7->ramarray[0];
  iStack8 = (int)((uint)uStack52._2_1_ & 0xc0) >> 4;
  if ((iStack8 == 0) && (cStack14 != -0x15)) {
    iStack8 = 4;
  }
  __osSiRelAccess();
  return iStack8;
}



// WARNING: Instruction at (ram,0x7000ccb8) overlaps instruction at (ram,0x7000ccb4)
// 

void controller_7000CBDC(uint channel,uint param_2,undefined *param_3,undefined4 *param_4)

{
  undefined uVar1;
  undefined4 *puVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  u16 uStackX6;
  undefined uStack44;
  undefined uStack43;
  undefined uStack42;
  undefined uStack41;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 *puStack4;
  
  iVar3 = 0;
  puVar2 = param_4;
  do {
    iVar3 += 1;
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  } while (iVar3 < 0xf);
  param_4[0xf] = 1;
  uStack44 = 0xff;
  uStack43 = 0x23;
  uStack42 = 1;
  uStack41 = 3;
  uStackX6 = (u16)param_2;
  puStack4 = param_4;
  __osContAddressCrc(uStackX6);
  puVar2 = (undefined4 *)&uStack44;
  do {
    uVar1 = *param_3;
    puVar6 = (undefined4 *)((int)puVar2 + 1);
    param_3 = param_3 + 1;
    *(undefined *)((int)puVar2 + 6) = uVar1;
    puVar2 = puVar6;
  } while (puVar6 < &uStack12);
  puVar2 = puStack4;
  if ((channel != 0) && (uVar5 = 0, puVar2 = puStack4, 0 < (int)channel)) {
    if ((channel & 3) == 0) goto LAB_7000ccb8;
    do {
      uVar4 = uVar5;
      uVar4 = uVar4 + 1;
      *(undefined *)puStack4 = 0;
      puStack4 = (undefined4 *)((int)puStack4 + 1);
      uVar5 = uVar4;
    } while ((channel & 3) != uVar4);
    uVar5 = uVar4 + 5;
    puVar2 = puStack4;
    if (uVar4 != channel) {
      while( true ) {
        *(undefined *)((int)puStack4 + 1) = 0;
        *(undefined *)((int)puStack4 + 2) = 0;
        *(undefined *)((int)puStack4 + 3) = 0;
        puVar2 = puStack4 + 1;
        *(undefined *)puStack4 = 0;
        puStack4 = puVar2;
        if (uVar5 == channel) break;
LAB_7000ccb8:
        uVar5 += 4;
      }
    }
  }
  puVar6 = puVar2;
  puVar8 = (undefined4 *)&uStack44;
  do {
    puVar9 = puVar8 + 3;
    puVar7 = puVar6 + 3;
    *puVar6 = *puVar8;
    puVar6[1] = puVar8[1];
    puVar6[2] = puVar8[2];
    puVar6 = puVar7;
    puVar8 = puVar9;
  } while (puVar9 != &uStack8);
  *puVar7 = *puVar9;
  *(undefined *)(puVar2 + 10) = 0xfe;
  return;
}



int controller_7000CD38(OSMesgQueue *mq,undefined4 *param_2,uint channel)

{
  u8 *puVar1;
  s32 sVar2;
  undefined *puVar3;
  undefined1 *puVar4;
  u8 buffer [31];
  char cStack9;
  u8 auStack8 [8];
  
  *(OSMesgQueue **)(param_2 + 1) = mq;
  param_2[2] = channel;
  *param_2 = 0;
  *(undefined *)((int)param_2 + 0x65) = 0x80;
  puVar1 = buffer;
  do {
    puVar1 = puVar1 + 1;
    *puVar1 = -0x80;
    puVar1 = puVar1;
  } while (puVar1 < auStack8);
  sVar2 = __osContRamWrite(mq,channel,0x400,buffer,0);
  if (sVar2 == 2) {
    sVar2 = __osContRamWrite(mq,channel,0x400,buffer,0);
  }
  if ((sVar2 == 0) && (sVar2 = __osContRamRead(mq,channel,0x400,buffer), sVar2 == 0)) {
    if (cStack9 == -0x80) {
      puVar4 = &rumble_off_buffer;
      puVar3 = &rumble_on_buffer;
      do {
        puVar3 = puVar3 + 4;
        puVar4[1] = 1;
        puVar3[1] = 0;
        puVar4[2] = 1;
        puVar3[2] = 0;
        puVar4[3] = 1;
        puVar3[3] = 0;
        *puVar4 = 1;
        *puVar3 = 0;
        puVar4 = puVar4 + 4;
        puVar3 = puVar3;
      } while (puVar3 != &rumble_off_buffer);
      controller_7000CBDC(channel,0x600,&rumble_off_buffer,
                          (undefined4 *)(&rumble_on_player_packet_buffers + channel * 0x40));
      controller_7000CBDC(channel,0x600,&rumble_on_buffer,
                          (undefined4 *)(&rumble_off_player1_packet_buffer + channel * 0x40));
      sVar2 = 0;
    }
    else {
      sVar2 = 0xb;
    }
  }
  return (int)sVar2;
}



void rmon_entry(void)

{
  return;
}



BOOL rmon_debug_is_final_build(void)

{
  return TRUE;
}



s32 rmon_debug_returns_neg_1(void)

{
  return -1;
}



void removed_7000ceb8(void)

{
  return;
}



void removed_7000cec0(void)

{
  return;
}



void removed_7000cec8(void)

{
  return;
}



void removed_7000ced0(void)

{
  return;
}



void removed_7000ced8(void)

{
  return;
}



void removed_7000cee0(void)

{
  return;
}



void * proutSyncPrintf(void *str,char *buf,size_t n)

{
  longlong lVar1;
  longlong extraout_a1;
  longlong lVar2;
  longlong lVar3;
  longlong extraout_a2;
  longlong sent;
  longlong lVar4;
  byte buffer;
  
  lVar2 = (longlong)(int)n;
  lVar1 = (longlong)(int)buf;
  sent = 0;
  if (lVar2 != 0) {
    buffer = *buf;
    lVar3 = lVar2;
    lVar4 = lVar1;
    while( true ) {
      sent = (longlong)((int)sent + 1);
      lVar4._4_4_ = (byte *)((int)lVar4 + 1);
      lVar4 = (longlong)(int)lVar4._4_4_;
      __osRdbSend((u8 *)(uint)buffer,(u32)lVar1,(u32)lVar3);
      if (sent == lVar2) break;
      buffer = *lVar4._4_4_;
      lVar1 = extraout_a1;
      lVar3 = extraout_a2;
    }
  }
  return (void *)((int)&rgba + 1);
}



void osSyncPrintf(char *fmt,...)

{
  va_list in_a1_lo;
  va_list ap;
  
  ap = in_a1_lo;
  _Printf(proutSyncPrintf,NULL,fmt,&ap);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osPiRawStartDma(s32 direction,u32 devAddr,void *dramAddr,u32 size)

{
  do {
  } while ((_PI_STATUS_REG & 3) != 0);
  _PI_DRAM_ADDR_REG = osVirtualToPhysical(dramAddr);
  _PI_CART_ADDR_REG = (_osRomBase | devAddr) & 0x1fffffff;
  if (direction == 0) {
    _PI_WR_LEN_REG = size - 1;
  }
  else {
    if (direction != 1) {
      return -1;
    }
    _PI_RD_LEN_REG = size - 1;
  }
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

u32 osPiGetStatus(void)

{
  return _PI_STATUS_REG;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention yet parameter storage is locked

void osInitialize(void)

{
  uint tmpSR;
  int iVar3;
  longlong lVar1;
  ulonglong uVar2;
  int in_v1_lo;
  u32 clock;
  u32 pifdata;
  
  clock = 0;
  __osFinalRom = 1;
  tmpSR = __osGetSR();
  __osSetSR(tmpSR | 0x20000000);
  __osSetFpcCsr(0x1000800);
  iVar3 = __osSiRawReadIo(0x1fc007fc,&pifdata);
  while (iVar3 != 0) {
                    // WARNING: Read-only address (ram,0x70010190) is written
                    // WARNING: Read-only address (ram,0x70010194) is written
    iVar3 = __osSiRawReadIo(0x1fc007fc,&pifdata);
  }
                    // WARNING: Read-only address (ram,0x70010190) is written
                    // WARNING: Read-only address (ram,0x70010194) is written
  iVar3 = __osSpRawWriteIo(0x1fc007fc,pifdata | 8);
  while (iVar3 != 0) {
                    // WARNING: Read-only address (ram,0x70010190) is written
                    // WARNING: Read-only address (ram,0x70010194) is written
    iVar3 = __osSpRawWriteIo(0x1fc007fc,pifdata | 8);
  }
                    // WARNING: Read-only address (ram,0x70010190) is written
                    // WARNING: Read-only address (ram,0x70010194) is written
  _DAT_80000008 = 0x3400008;
  _DAT_8000000c = 0;
  _XUT_VEC = 0x3c1a7001;
  _DAT_80000084 = 0x275a01a0;
  _DAT_80000088 = 0x3400008;
  _DAT_8000008c = 0;
  _ECC_VEC = 0x3c1a7001;
  _DAT_80000104 = 0x275a01a0;
  _DAT_80000108 = 0x3400008;
  _DAT_8000010c = 0;
  _E_VEC = 0x3c1a7001;
  _DAT_80000184 = 0x275a01a0;
  _DAT_80000188 = 0x3400008;
  _DAT_8000018c = 0;
  _UT_VEC = ___osExceptionPreamble;
  _DAT_80000004 = uRam70010194;
  osWritebackDCache(&UT_VEC,400);
  osInvalICache(&UT_VEC,400);
  osMapTLBRdb();
  osPiRawReadIo(4,&clock);
  clock &= 0xfffffff0;
  if (clock != 0) {
    osClockRate._0_4_ = 0;
    osClockRate._4_4_ = clock;
  }
  lVar1 = __ll_mul((longlong)osClockRate._0_4_,(longlong)(int)osClockRate._4_4_);
  uVar2 = __ull_div((longlong)(int)lVar1,(longlong)in_v1_lo);
  osClockRate._0_4_ = (int)uVar2;
  osClockRate._4_4_ = in_v1_lo;
  if (_osResetType == 0) {
    osClockRate._4_4_ = in_v1_lo;
    bzero((void *)0x8000031c,0x40);
  }
  do {
  } while ((_PI_STATUS_REG & 3) != 0);
  if ((_data & 0xffff) == 0) {
    osDiskExist = 1;
    __osSetHWIntrRoutine(1,(s32 *)__osLeoInterrupt);
  }
  else {
    osDiskExist = 0;
  }
  return;
}



void osWritebackDCacheAll(void)

{
  bool bVar1;
  ulonglong uVar2;
  
  uVar2 = 0xffffffff80000000;
  do {
    cacheOp(1,uVar2);
    bVar1 = uVar2 < 0xffffffff80001ff0;
    uVar2 = SEXT48((int)uVar2 + 0x10);
  } while (bVar1);
  return;
}



void osInvalICache(void *addr,int nbytes)

{
  bool bVar1;
  ulonglong uVar2;
  void *pvVar3;
  
  if (0 < nbytes) {
    if (0x3fff < (uint)nbytes) {
      uVar2 = 0xffffffff80000000;
      do {
        cacheOp(0,uVar2);
        bVar1 = uVar2 < 0xffffffff80003fe0;
        uVar2 = SEXT48((int)uVar2 + 0x20);
      } while (bVar1);
      return;
    }
    if (addr < (void *)((int)addr + nbytes)) {
      pvVar3 = (void *)((int)addr - ((uint)addr & 0x1f));
      do {
        uVar2 = SEXT48((int)pvVar3);
        cacheOp(0x10,uVar2);
        pvVar3 = (void *)((int)pvVar3 + 0x20);
      } while (uVar2 < (ulonglong)(longlong)((int)(void *)((int)addr + nbytes) + -0x20));
    }
  }
  return;
}



void osUnmapTLB(int index)

{
  setCopReg(0,Index,(longlong)index,0);
  setCopReg(0,CONCAT44(uRegister00002050,EntryHi),0xffffffff80000000,0);
  setCopReg(0,EntryLo0,0,0);
  setCopReg(0,EntryLo1,0,0);
  TLB_write_indexed_entry(Index,CONCAT44(uRegister00002050,EntryHi),EntryLo0,EntryLo1,PageMask);
  setCopReg(0,CONCAT44(uRegister00002050,EntryHi),(longlong)EntryHi,0);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

u32 __osGetFpcCsr(void)

{
  u32 in_fcsr;
  
  return in_fcsr;
}



u32 __osSetFpcCsr(u32 param_1)

{
  u32 in_fcsr;
  
  return in_fcsr;
}



void osCreateThread(OSThread *t,OSId id,void *entry,void *arg,void *sp,OSPri p)

{
  ulonglong saveMask;
  
  t->id = id;
  t->priority = p;
  t->next = NULL;
  t->queue = NULL;
  *(void **)&(t->context).cause = entry;
  *(int *)((int)&(t->context).a0 + 4) = (int)arg >> 0x1f;
  *(void **)&(t->context).a1 = arg;
  *(int *)&(t->context).s8 = (int)sp + -0x10;
  *(int *)((int)&(t->context).sp + 4) = ((int)sp >> 0x1f) - (uint)(sp < &caseD_0);
  *(undefined4 *)((int)&(t->context).ra + 4) = 0;
  *(undefined4 *)&(t->context).lo = 0x70010a80;
  (t->context).pc = 0xff03;
  (t->context).fpcsr = 0x3f;
  *(undefined4 *)&(t->context).fp0 = 0x1000800;
  t->fp = 0;
  t->state = 1;
  t->flags = 0;
  saveMask._4_4_ = __osDisableInt();
  *(OSThread **)&t->tlnext = __osActiveQueue;
  __osActiveQueue = t;
  __osRestoreInt(saveMask._4_4_);
  return;
}



void osStartThread(OSThread *t)

{
  ulonglong saveMask;
  u32 tmpsaveMask;
  
  saveMask._4_4_ = __osDisableInt();
  if (t->state == 1) {
    if (((OSThread *)t->queue == NULL) || ((OSThread *)t->queue == (OSThread *)&__osRunQueue)) {
      t->state = 2;
      __osEnqueueThread(&__osRunQueue,t);
    }
    else {
      t->state = 8;
      __osEnqueueThread((OSThread **)t->queue,t);
      tmpsaveMask = (u32)__osPopThread((OSThread *)t->queue);
      __osEnqueueThread(&__osRunQueue,(OSThread *)tmpsaveMask);
    }
  }
  else {
    if (t->state == 8) {
      t->state = 2;
      __osEnqueueThread(&__osRunQueue,t);
    }
  }
  if (__osRunningThread == NULL) {
    __osDispatchThread();
  }
  else {
    if (__osRunningThread->priority < __osRunQueue->priority) {
      __osRunningThread->state = 2;
      __osEnqueueAndYield(&__osRunQueue);
    }
  }
  __osRestoreInt(saveMask._4_4_);
  return;
}



void osCreateMesgQueue(OSMesgQueue *mq,OSMesg *msg,s32 msgCount)

{
  mq->mtqueue = (OSThread *)0x80027720;
  *(__OSThreadTail **)&mq->fullqueue = &__osThreadTail;
  mq->validCount = 0;
  mq->first = 0;
  mq->msgCount = msgCount;
  mq->msg = msg;
  return;
}



void osStopThread(OSThread *t)

{
  u32 saveMask;
  u16 state;
  
  saveMask = __osDisableInt();
  if (t == NULL) {
    state = 4;
  }
  else {
    state = t->state;
  }
  if (state != 2) {
    if (state == 4) {
      __osRunningThread->state = 1;
      __osEnqueueAndYield(NULL);
      goto LAB_7000d7e0;
    }
    if (state != 8) goto LAB_7000d7e0;
  }
  t->state = 1;
  __osDequeueThread((OSThread **)t->queue,t);
LAB_7000d7e0:
  __osRestoreInt(saveMask);
  return;
}



void osSetThreadPri(OSThread *t,OSPri p)

{
  u32 saveMask;
  OSThread *pOStackX0;
  
  saveMask = __osDisableInt();
  pOStackX0 = t;
  if (t == NULL) {
    pOStackX0 = __osRunningThread;
  }
  if (pOStackX0->priority != p) {
    pOStackX0->priority = p;
    if ((pOStackX0 != __osRunningThread) && (pOStackX0->state != 1)) {
      __osDequeueThread((OSThread **)pOStackX0->queue,pOStackX0);
      __osEnqueueThread((OSThread **)pOStackX0->queue,pOStackX0);
    }
    if (__osRunningThread->priority < __osRunQueue->priority) {
      __osRunningThread->state = 2;
      __osEnqueueAndYield(&__osRunQueue);
    }
  }
  __osRestoreInt(saveMask);
  return;
}



u32 osGetCount(void)

{
  return Count;
}



void osCreateViManager(OSPri pri)

{
  int myPri;
  u32 savedMask;
  int oldPri;
  
  if (__osViDevMgr.active == 0) {
    __osTimerServicesInit();
    osCreateMesgQueue(&viEventQueue,viEventBuf,5);
    viRetraceMsg.hdr.type = 0xd;
    viRetraceMsg.hdr.pri = '\0';
    viRetraceMsg.hdr.retQueue = NULL;
    viCounterMsg.hdr.type = 0xe;
    viCounterMsg.hdr.pri = '\0';
    viCounterMsg.hdr.retQueue = NULL;
    osSetEventMesg(OS_EVENT_VI,&viEventQueue,0x69d0);
    osSetEventMesg(OS_EVENT_COUNTER,&viEventQueue,0x69e8);
    oldPri = -1;
    myPri = osGetThreadPri(NULL);
    if (myPri < pri) {
      osSetThreadPri(NULL,pri);
      oldPri = myPri;
    }
    savedMask = __osDisableInt();
    __osViDevMgr.active = 1;
    __osViDevMgr.thread = &viThread;
    __osViDevMgr.cmdQueue = &viEventQueue;
    __osViDevMgr.evtQueue = &viEventQueue;
    __osViDevMgr.acsQueue = NULL;
    __osViDevMgr.dma = NULL;
    __osViDevMgr.edma = NULL;
    osCreateThread(&viThread,0,viMgrMain,&__osViDevMgr,&viEventQueue,pri);
    __osViInit();
    osStartThread(&viThread);
    __osRestoreInt(savedMask);
    if (oldPri != -1) {
      osSetThreadPri(NULL,oldPri);
    }
  }
  return;
}



void viMgrMain(void *arg)

{
  __OSViContext *vc;
  __OSViContext *p_Var1;
  uint uVar2;
  short *psStack12;
  OSDevMgr *dm;
  undefined *a;
  u32 Count;
  
  psStack12 = NULL;
  vc = __osViGetCurrentContext();
  retrace = vc->retraceCount;
  dm = (OSDevMgr *)arg;
  if (retrace == 0) {
    retrace = 1;
    dm = (OSDevMgr *)arg;
  }
  do {
    while( true ) {
      osRecvMesg(dm->evtQueue,&psStack12,1);
      if (*psStack12 == 0xd) break;
      if (*psStack12 == 0xe) {
        __osTimerInterrupt();
      }
    }
    __osViSwapContext();
    retrace -= 1;
    if (retrace == 0) {
      p_Var1 = __osViGetCurrentContext();
      if (p_Var1->msgq != NULL) {
        osSendMesg(p_Var1->msgq,p_Var1->msg,0);
      }
      retrace = p_Var1->retraceCount;
    }
    __osViIntrCount += 1;
    if (false) {
      __osCurrentTime._4_4_ = osGetCount();
      __osCurrentTime._0_4_ = 0;
    }
    Count = __osBaseCounter;
    __osBaseCounter = osGetCount();
    uVar2 = (__osBaseCounter - Count) + __osCurrentTime._4_4_;
    __osCurrentTime._0_4_ = (uint)(uVar2 < __osCurrentTime._4_4_) + __osCurrentTime._0_4_;
    __osCurrentTime._4_4_ = uVar2;
  } while( true );
}



void osCreateViManager_sub
               (undefined param_1,undefined param_2,undefined param_3,undefined param_4,
               undefined param_5,undefined param_6,undefined4 param_7,undefined4 param_8)

{
  return;
}



void osSetEventMesg(enumOSEvent e,OSMesgQueue *mq,enumOSEventMsg m)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  __OSEventStateTab[(int)(char)e].messageQueue = mq;
  __OSEventStateTab[(int)(char)e].message = (OSMesg)(int)(short)m;
  __osRestoreInt(saveMask);
  return;
}



void osViSetEvent(OSMesgQueue *mq,OSMesg m,u32 retraceCount)

{
  u32 savemask;
  
  savemask = __osDisableInt();
  __osViNext->msgq = mq;
  __osViNext->msg = m;
  __osViNext->retraceCount = (u16)retraceCount;
  __osRestoreInt(savemask);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

OSIntMask osSetIntMask(OSIntMask param_1)

{
  uint uVar1;
  
  if (_MI_INTR_MASK_REG != 0) {
    _MI_INTR_MASK_REG |= ((uint)__OSGlobalIntMask >> 0x10 ^ 0xffffffff) & 0x3f;
  }
  uVar1 = _MI_INTR_MASK_REG << 0x10;
  setCopReg(0,CONCAT44(uRegister00002060,Status),
            (longlong)(int)Status & 0xffffffffffff00ffU |
            (longlong)(int)param_1 & 0xff01U & (longlong)(int)__OSGlobalIntMask & 0xff00U,0);
  _MI_INTR_MASK_REG =
       (uint)*(ushort *)
              ((int)__osRcpImTable + ((param_1 & 0x3f0000 & (uint)__OSGlobalIntMask) >> 0xf));
  return (OSIntMask)(Status & 0xff01 | ((uint)__OSGlobalIntMask ^ 0xffffffff) & 0xff00 | uVar1);
}



s32 osRecvMesg(OSMesgQueue *mq,OSMesg *msg,s32 flags)

{
  int iVar1;
  u32 saveMask;
  OSThread *t;
  int iVar2;
  
  saveMask = __osDisableInt();
  iVar1 = mq->validCount;
  while( true ) {
    if (iVar1 != 0) {
      if (msg != NULL) {
        *msg = mq->msg[mq->first];
      }
      iVar1 = mq->msgCount;
      iVar2 = mq->first + 1;
      mq->first = iVar2 % iVar1;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
      mq->validCount = mq->validCount + -1;
      if (mq->fullqueue->next != NULL) {
        t = __osPopThread((OSThread *)&mq->fullqueue);
        osStartThread(t);
      }
      __osRestoreInt(saveMask);
      return 0;
    }
    if (flags == 0) break;
    __osRunningThread->state = 8;
    __osEnqueueAndYield((OSThread **)mq);
    iVar1 = mq->validCount;
  }
  __osRestoreInt(saveMask);
  return -1;
}



s32 osSendMesg(OSMesgQueue *mq,OSMesg msg,s32 flags)

{
  int iVar1;
  u32 saveMask;
  OSThread *t;
  int iVar2;
  
  saveMask = __osDisableInt();
  if (mq->msgCount <= mq->validCount) {
    do {
      if (flags != 1) {
        __osRestoreInt(saveMask);
        return -1;
      }
      __osRunningThread->state = 8;
      __osEnqueueAndYield(&mq->fullqueue);
    } while (mq->msgCount <= mq->validCount);
  }
  iVar1 = mq->msgCount;
  iVar2 = mq->first + mq->validCount;
  mq->msg[iVar2 % iVar1] = msg;
  if (iVar1 == 0) {
    trap(0x1c00);
  }
  if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
    trap(0x1800);
  }
  mq->validCount = mq->validCount + 1;
  if (mq->mtqueue->next != NULL) {
    t = __osPopThread((OSThread *)mq);
    osStartThread(t);
  }
  __osRestoreInt(saveMask);
  return 0;
}



void osViSetMode(OSViMode *modep)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  __osViNext->modep = modep;
  __osViNext->state = 1;
  __osViNext->control = (__osViNext->modep->comRegs).ctrl;
  __osRestoreInt(saveMask);
  return;
}



void osViSetXScale(f32 value)

{
  float fVar1;
  u32 saveMask;
  uint uVar2;
  float nomValue;
  
  saveMask = __osDisableInt();
  (__osViNext->x).factor = value;
  __osViNext->state = __osViNext->state | 2;
  nomValue = (float)((__osViNext->modep->comRegs).xScale & 0xfff);
  if (false) {
    nomValue = nomValue + 4294967296.00000000;
  }
  nomValue = (float)(__osViNext->x).factor * nomValue;
  if (false) {
    fVar1 = ROUND(nomValue);
  }
  else {
    fVar1 = FLOOR(nomValue);
  }
  uVar2 = (uint)fVar1;
  if (true) {
    if (-1 < (int)uVar2) goto LAB_7000e1d0;
  }
  else {
    if (false) {
      fVar1 = ROUND(nomValue - 2147483648.00000000);
    }
    else {
      fVar1 = FLOOR(nomValue - 2147483648.00000000);
    }
    if (true) {
      uVar2 = (int)fVar1 | 0x80000000;
      goto LAB_7000e1d0;
    }
  }
  uVar2 = 0xffffffff;
LAB_7000e1d0:
  *(uint *)&(__osViNext->x).field_0x8 = uVar2 & 0xfff;
  __osRestoreInt(saveMask);
  return;
}



void osViSetYScale(f32 value)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  *(f32 *)((int)&(__osViNext->y).factor + 2) = value;
  __osViNext->state = __osViNext->state | 4;
  __osRestoreInt(saveMask);
  return;
}



void osViRepeatLine(u8 active)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  if (active == '\0') {
    __osViNext->state = __osViNext->state & 0xffbf;
  }
  else {
    __osViNext->state = __osViNext->state | 0x40;
  }
  __osRestoreInt(saveMask);
  return;
}



void osViBlack(u8 active)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  if (active == '\0') {
    __osViNext->state = __osViNext->state & 0xffdf;
  }
  else {
    __osViNext->state = __osViNext->state | 0x20;
  }
  __osRestoreInt(saveMask);
  return;
}



OSYieldResult osSpTaskYielded(OSTask *tp)

{
  u32 status;
  OSYieldResult result;
  
  status = __osSpGetStatus();
  result = (OSYieldResult)((status & 0x100) != 0);
  if ((status & 0x80) != 0) {
    *(uint *)(*tp + 4) = *(uint *)(*tp + 4) | result;
    *(uint *)(*tp + 4) = *(uint *)(*tp + 4) & 0xfffffffd;
  }
  return result;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void osDpGetCounters(u32 *array)

{
  *array = _DPC_CLOCK_REG;
  array[1] = _DPC_BUFBUSY_REG;
  array[2] = _DPC_PIPEBUSY_REG;
  array[3] = _DPC_TMEM_REG;
  return;
}



void * osViGetCurrentFramebuffer(void)

{
  u32 saveMask;
  void *framep;
  
  saveMask = __osDisableInt();
  framep = __osViCurr->framep;
  __osRestoreInt(saveMask);
  return framep;
}



void * osViGetNextFramebuffer(void)

{
  u32 saveMask;
  void *framep;
  
  saveMask = __osDisableInt();
  framep = __osViNext->framep;
  __osRestoreInt(saveMask);
  return framep;
}



void osViSwapBuffer(void *frameBufPtr)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  __osViNext->framep = frameBufPtr;
  __osViNext->state = __osViNext->state | 0x10;
  __osRestoreInt(saveMask);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void osDpSetStatus(u32 data)

{
  _DPC_STATUS_REG = data;
  return;
}



OSTask * _VirtualToPhysicalTask(OSTask *intp)

{
  _bcopy(intp,&tp,0x40);
  if (tp.ucode != NULL) {
    tp.ucode = (u64 *)osVirtualToPhysical(tp.ucode);
  }
  if (tp.ucode_data != NULL) {
    tp.ucode_data = (u64 *)osVirtualToPhysical(tp.ucode_data);
  }
  if (tp.dram_stack != NULL) {
    tp.dram_stack = (u64 *)osVirtualToPhysical(tp.dram_stack);
  }
  if (tp.output_buff != NULL) {
    tp.output_buff = (u64 *)osVirtualToPhysical(tp.output_buff);
  }
  if (tp.output_buff_size != NULL) {
    tp.output_buff_size = (u64 *)osVirtualToPhysical(tp.output_buff_size);
  }
  if (tp.data_ptr != NULL) {
    tp.data_ptr = (u64 *)osVirtualToPhysical(tp.data_ptr);
  }
  if (tp.yield_data_ptr != NULL) {
    tp.yield_data_ptr = (u64 *)osVirtualToPhysical(tp.yield_data_ptr);
  }
  return (OSTask *)&tp;
}



void osSpTaskLoad(OSTask *intp)

{
  OSTask *tp;
  int iVar1;
  
  tp = _VirtualToPhysicalTask(intp);
  if ((*(uint *)(*tp + 4) & 1) != 0) {
    *(undefined4 *)(*tp + 0x18) = *(undefined4 *)(*tp + 0x38);
    *(undefined4 *)(*tp + 0x1c) = *(undefined4 *)(*tp + 0x3c);
    *(uint *)(*intp + 4) = *(uint *)(*intp + 4) & 0xfffffffe;
  }
  osWritebackDCache(tp,0x40);
  __osSpSetStatus(0x2b00);
  iVar1 = __osSpSetPc(0x4001000);
  while (iVar1 == -1) {
    iVar1 = __osSpSetPc(0x4001000);
  }
  iVar1 = __osSpRawStartDma(1,0x4000fc0,tp,0x40);
  while (iVar1 == -1) {
    iVar1 = __osSpRawStartDma(1,0x4000fc0,tp,0x40);
  }
  iVar1 = __osSpDeviceBusy();
  while (iVar1 != 0) {
    iVar1 = __osSpDeviceBusy();
  }
  iVar1 = __osSpRawStartDma(1,0x4001000,*(void **)(*tp + 8),*(u32 *)(*tp + 0xc));
  while (iVar1 == -1) {
    iVar1 = __osSpRawStartDma(1,0x4001000,*(void **)(*tp + 8),*(u32 *)(*tp + 0xc));
  }
  return;
}



void osSpTaskStartGo(OSTask *tp)

{
  int iVar1;
  
  iVar1 = __osSpDeviceBusy();
  while (iVar1 != 0) {
    iVar1 = __osSpDeviceBusy();
  }
  __osSpSetStatus(0x125);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osDpSetNextBuffer(void *bufPtr,u64 size)

{
  ulonglong uVar1;
  s32 sVar2;
  u32 uVar3;
  int in_a3_lo;
  
  uVar1 = __osDpDeviceBusy();
  if (uVar1 == 0) {
    _DPC_STATUS_REG = 1;
    do {
    } while (true);
    _DPC_START_REG = osVirtualToPhysical(bufPtr);
    uVar3 = osVirtualToPhysical(bufPtr);
    _DAT_a4100004 = uVar3 + in_a3_lo;
    sVar2 = 0;
  }
  else {
    sVar2 = -1;
  }
  return sVar2;
}



void osSpTaskYield(void)

{
  __osSpSetStatus(0x400);
  return;
}



u32 __osGetTLBHi(s32 index)

{
  setCopReg(0,Index,(longlong)index,0);
  EntryHi = TLB_read_indexed_entryHi(Index);
  EntryLo0 = TLB_read_indexed_entryLo0(Index);
  EntryLo1 = TLB_read_indexed_entryLo1(Index);
  PageMask = TLB_read_indexed_entryLo1(Index);
  return EntryHi._4_4_;
}



u32 osVirtualToPhysical(void *virtualAddress)

{
  uint in_v0_lo;
  
  if ((virtualAddress < &UT_VEC) || ((void *)0x9fffffff < virtualAddress)) {
    if ((virtualAddress < (void *)0xa0000000) || ((void *)0xbfffffff < virtualAddress)) {
      __osProbeTLB(virtualAddress);
    }
    else {
      in_v0_lo = (uint)virtualAddress & 0x1fffffff;
    }
  }
  else {
    in_v0_lo = (uint)virtualAddress & 0x1fffffff;
  }
  return (u32)in_v0_lo;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osAiSetFrequency(u32 frequency)

{
  int iVar1;
  uint bitRate;
  uint dacRate;
  float fVar2;
  float f;
  
  fVar2 = (float)frequency;
  if ((int)frequency < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  f = (float)osViClock / fVar2 + 0.50000000;
  if (false) {
    fVar2 = ROUND(f);
  }
  else {
    fVar2 = FLOOR(f);
  }
  dacRate = (uint)fVar2;
  if (true) {
    if (-1 < (int)dacRate) goto LAB_7000e9f4;
  }
  else {
    if (false) {
      fVar2 = ROUND(f - 2147483648.00000000);
    }
    else {
      fVar2 = FLOOR(f - 2147483648.00000000);
    }
    if (true) {
      dacRate = (int)fVar2 | 0x80000000;
      goto LAB_7000e9f4;
    }
  }
  dacRate = 0xffffffff;
LAB_7000e9f4:
  if (dacRate < 0x84) {
    iVar1 = -1;
  }
  else {
    bitRate = dacRate / 0x42 & 0xff;
    if (0x10 < bitRate) {
      bitRate = 0x10;
    }
    _AI_DACRATE_REG = dacRate - 1;
    _AI_BITRATE_REG = bitRate - 1;
    _AI_CONTROL_REG = 1;
    iVar1 = osViClock / (int)dacRate;
    if (dacRate == 0) {
      trap(0x1c00);
    }
    if ((dacRate == 0xffffffff) && (osViClock == -0x80000000)) {
      trap(0x1800);
    }
  }
  return (s32)iVar1;
}



void alUnlink(ALLink *a)

{
  ALLink_s *ln;
  
  if (a->next == NULL) {
    ln = a->prev;
  }
  else {
    a->next->prev = a->prev;
    ln = a->prev;
  }
  if (ln != NULL) {
    ln->next = a->next;
  }
  return;
}



void alLink(ALLink *a,ALLink *b)

{
  ALLink_s *to;
  
  to = b->next;
  *(ALLink **)&a->prev = b;
  a->next = to;
  if (b->next != NULL) {
    *(ALLink **)&b->next->prev = a;
  }
  *(ALLink **)&b->next = a;
  return;
}



void alClose(ALGlobals *glob)

{
  if (slg != NULL) {
    alSynDelete((ALSynth *)glob);
    slg = NULL;
  }
  return;
}



void alInit(ALGlobals *g,ALSynConfig *c)

{
  if (slg == NULL) {
    slg = g;
    alSynNew((ALSynth *)g,c);
  }
  return;
}



void _alHeapDBAlloc(u8 *file,s32 line,ALHeap *hp,s32 num,s32 size)

{
  uint bytes;
  
  bytes = num * size + 0xfU & 0xfffffff0;
  if (hp->cur + bytes <= hp->base + hp->len) {
    hp->cur = hp->cur + bytes;
  }
  return;
}



OSTime osGetTime(void)

{
  int iVar1;
  uint uVar2;
  u32 savedMask;
  u32 CurrentCount;
  int elapseCount;
  
  savedMask = __osDisableInt();
  CurrentCount = osGetCount();
  uVar2 = __osCurrentTime._4_4_;
  iVar1 = __osCurrentTime._0_4_;
  elapseCount = CurrentCount - __osBaseCounter;
  __osRestoreInt(savedMask);
  return (longlong)(int)((uint)(elapseCount + uVar2 < uVar2) + iVar1);
}



longlong __ull_rshift(ulonglong left,longlong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  return (longlong)((right & 0xffffffffU | left << 0x20) >> CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



ulonglong __ull_rem(ulonglong left,ulonglong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  if (CONCAT44(in_a2_lo,in_a3_lo) == 0) {
    trap(0x1c00);
  }
  return (longlong)((right & 0xffffffff | left << 0x20) % CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



ulonglong __ull_div(ulonglong left,ulonglong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  if (CONCAT44(in_a2_lo,in_a3_lo) == 0) {
    trap(0x1c00);
  }
  return (longlong)((right & 0xffffffff | left << 0x20) / CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



longlong __ll_lshift(longlong left,longlong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  return (longlong)((right & 0xffffffffU | left << 0x20) << CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



longlong __ll_rem(longlong left,longlong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  if (CONCAT44(in_a2_lo,in_a3_lo) == 0) {
    trap(0x1c00);
  }
  return (longlong)((right & 0xffffffffU | left << 0x20) % CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



longlong __ll_div(longlong left,longlong right)

{
  ulonglong uVar1;
  longlong lVar2;
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  lVar2 = CONCAT44(in_a2_lo,in_a3_lo);
  uVar1 = right & 0xffffffffU | left << 0x20;
  if (lVar2 == 0) {
    trap(0x1c00);
  }
  if ((lVar2 == -1) && (uVar1 == 0x8000000000000000)) {
    trap(0x1800);
  }
  return (longlong)uVar1 / lVar2 >> 0x20;
}



longlong __ll_mul(longlong a,longlong b)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  return (longlong)((b & 0xffffffffU | a << 0x20) * CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



void __ull_divremi(ulonglong *param_1,ulonglong *param_2,longlong dividend,ushort divisor)

{
  short in_stack_00000012;
  
  if ((longlong)in_stack_00000012 == 0) {
    trap(0x1c00);
  }
  *param_1 = CONCAT44((int)dividend,(int)(short)divisor) / (ulonglong)(longlong)in_stack_00000012;
  if ((longlong)in_stack_00000012 == 0) {
    trap(0x1c00);
  }
  *param_2 = CONCAT44((int)dividend,(int)(short)divisor) % (longlong)in_stack_00000012;
  return;
}



longlong __ll_mod(longlong left,longlong right)

{
  ulonglong uVar1;
  longlong lVar2;
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  longlong lVar3;
  int iStack8;
  
  lVar2 = CONCAT44(in_a2_lo,in_a3_lo);
  uVar1 = right & 0xffffffffU | left << 0x20;
  lVar3 = (longlong)uVar1 % lVar2;
  if (lVar2 == 0) {
    trap(0x1c00);
  }
  if ((lVar2 == -1) && (uVar1 == 0x8000000000000000)) {
    trap(0x1800);
  }
  iStack8 = (int)((ulonglong)lVar3 >> 0x20);
  if (((lVar3 < 0) && (0 < lVar2)) || ((0 < lVar3 && (CONCAT44(in_a2_lo,in_a3_lo) < 0)))) {
    iStack8 = (int)((ulonglong)(lVar3 + CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20);
  }
  return (longlong)iStack8;
}



longlong __ll_lshift(longlong left,longlong right)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  
  return ((longlong)(right & 0xffffffffU | left << 0x20) >> CONCAT44(in_a2_lo,in_a3_lo)) >> 0x20;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osAiSetNextBuffer(void *bufPtr,u32 size)

{
  ulonglong uVar1;
  s32 sVar2;
  void *bPtr;
  
  bPtr = bufPtr;
  if (hdwrBugFlag != false) {
    bPtr = (void *)((int)bufPtr + -0x2000);
  }
  hdwrBugFlag = ((int)bufPtr + size & 0x3fff) == 0x2000;
  uVar1 = __osAiDeviceBusy();
  if (uVar1 == 0) {
    _AI_DRAM_ADDR_REG = osVirtualToPhysical(bPtr);
    sVar2 = 0;
    _AI_LEN_REG = size;
  }
  else {
    sVar2 = -1;
  }
  return sVar2;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 osAiGetLength(void)

{
  return _AI_LEN_REG;
}



void dummy7000EFBC(void)

{
  return;
}



int _timeToSamples(ALSynth *synth,int micros)

{
  uint in_register_00001030;
  
  return (int)((int)((double)((float)micros * (float)synth->outputRate) / dbl_80029420 +
                    (double)((ulonglong)in_register_00001030 << 0x20)) & 0xfffffff0);
}



void _freePVoice(ALSynth *drvr,PVoice *pvoice)

{
  alUnlink((ALLink *)pvoice);
  alLink((ALLink *)pvoice,&drvr->pLameList);
  return;
}



void _collectPVoices(ALSynth *drvr)

{
  ALLink *dl;
  
  dl = (ALLink *)(drvr->pLameList).next;
  while (dl != NULL) {
    alUnlink(dl);
    alLink(dl,&drvr->pFreeList);
    dl = (ALLink *)(drvr->pLameList).next;
  }
  return;
}



void __freeParam(ALParam *param)

{
  ALGlobals *pAVar1;
  
  pAVar1 = slg;
  *(ALParam_s **)param = (slg->drvr).paramList;
  *(ALParam **)&(pAVar1->drvr).paramList = param;
  return;
}



ALParam ___allocParam(void)

{
  ALParam_s **ppAVar1;
  ALParam_s *update;
  ALParam_s *drvr;
  
  ppAVar1 = (ALParam_s **)(slg->drvr).paramList;
  update._3_1_ = (ALParam)0x0;
  if (ppAVar1 != NULL) {
    (slg->drvr).paramList = *ppAVar1;
    *ppAVar1 = NULL;
    update._3_1_ = SUB41(ppAVar1,0);
  }
  return update._3_1_;
}



void dummy7000F100(void)

{
  return;
}



longlong _alAudioFrame(Acmd *cmdList,s32 *cmdLen,s16 *outBuf,s32 outLen)

{
  ALPlayer_s *pAVar1;
  ALFilter_s *pAVar2;
  ALSynth *pAVar3;
  ALGlobals *drvr;
  double dVar4;
  ALPlayer *pAVar6;
  ALMicroTime AVar7;
  longlong lVar5;
  s32 sVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  s32 sVar12;
  ulonglong unaff_f22;
  undefined2 auStack14 [5];
  ALPlayer *pAStack4;
  
  drvr = slg;
  lVar5 = (longlong)(int)cmdList;
  auStack14[0] = 0;
  if ((slg->drvr).head == NULL) {
    *cmdLen = 0;
  }
  else {
    pAStack4 = NULL;
    pAVar6 = (slg->drvr).head;
    iVar9 = 0x7fffffff;
    if (pAVar6 != NULL) {
      sVar8 = (slg->drvr).curSamples;
      sVar12 = pAVar6->samplesLeft;
      while( true ) {
        if (sVar12 - sVar8 < iVar9) {
          sVar8 = (slg->drvr).curSamples;
          iVar9 = pAVar6->samplesLeft - sVar8;
          pAVar1 = pAVar6->next;
          pAStack4 = pAVar6;
        }
        else {
          pAVar1 = pAVar6->next;
        }
        if (pAVar1 == NULL) break;
        sVar12 = pAVar1->samplesLeft;
        pAVar6 = (ALPlayer *)pAVar1;
      }
    }
    pAVar3 = &slg->drvr;
    iVar9 = pAStack4->samplesLeft;
    (slg->drvr).paramSamples = iVar9;
    dVar4 = dbl_80029428;
    if (iVar9 - pAVar3->curSamples < outLen) {
      do {
        iVar9 = 0x7fffffff;
        (drvr->drvr).paramSamples = (drvr->drvr).paramSamples & 0xfffffff0;
        AVar7 = (*pAStack4->handler)(pAStack4);
        pAStack4->samplesLeft =
             pAStack4->samplesLeft +
             (int)((double)((float)AVar7 * (float)(drvr->drvr).outputRate) / dVar4 +
                  (double)(unaff_f22 & 0xffffffff00000000));
        pAStack4 = NULL;
        pAVar6 = (drvr->drvr).head;
        if (pAVar6 != NULL) {
          sVar8 = (drvr->drvr).curSamples;
          sVar12 = pAVar6->samplesLeft;
          while( true ) {
            if (sVar12 - sVar8 < iVar9) {
              sVar8 = (drvr->drvr).curSamples;
              iVar9 = pAVar6->samplesLeft - sVar8;
              pAVar1 = pAVar6->next;
              pAStack4 = pAVar6;
            }
            else {
              pAVar1 = pAVar6->next;
            }
            if (pAVar1 == NULL) break;
            sVar12 = pAVar1->samplesLeft;
            pAVar6 = (ALPlayer *)pAVar1;
          }
        }
        iVar9 = pAStack4->samplesLeft;
        (drvr->drvr).paramSamples = iVar9;
      } while (iVar9 - (drvr->drvr).curSamples < outLen);
    }
    (drvr->drvr).paramSamples = (drvr->drvr).paramSamples & 0xfffffff0;
    if (0 < outLen) {
      do {
        iVar9 = (drvr->drvr).maxOutSamples;
        iVar10 = outLen;
        if (iVar9 < outLen) {
          iVar10 = iVar9;
        }
        puVar11 = (undefined4 *)lVar5;
        *puVar11 = 0x7000000;
        puVar11[1] = 0;
        pAVar2 = (drvr->drvr).outputFilter;
        (**(code **)(pAVar2 + 8))(pAVar2,6,outBuf);
        lVar5 = (**(code **)(pAVar2 + 4))
                          (pAVar2,auStack14,iVar10,(drvr->drvr).curSamples,puVar11 + 2);
        outLen -= iVar10;
        outBuf = outBuf + iVar10 * 2;
        (drvr->drvr).curSamples = (drvr->drvr).curSamples + iVar10;
      } while (0 < outLen);
    }
    *cmdLen = (int)lVar5 - (int)cmdList >> 3;
    _collectPVoices((ALSynth *)drvr);
  }
  return lVar5;
}



void alSynNew(ALSynth *drvr,ALSynConfig *c)

{
  ALHeap *hp;
  ALAuxBus_s *save;
  ALSave *sources;
  ALFxRef pvVar1;
  int iVar2;
  s32 sVar3;
  ALParam_s **ppAVar4;
  ALLink *a;
  ALParam_s *pAVar5;
  longlong lVar6;
  ALEnvMixer *e;
  ALResampler *r;
  ALLoadFilter *f;
  int iVar7;
  
  hp = c->heap;
  drvr->head = NULL;
  sVar3 = c->maxPVoices;
  drvr->curSamples = 0;
  drvr->paramSamples = 0;
  drvr->numPVoices = sVar3;
  sVar3 = c->outputRate;
  drvr->maxOutSamples = 0xa0;
  drvr->outputRate = sVar3;
  drvr->dma = c->dmaproc;
  _alHeapDBAlloc(NULL,0,hp,1,0x1c);
  sources = (ALSave *)save;
  alSaveNew((ALSave *)save);
  *(ALAuxBus_s **)&drvr->outputFilter = save;
  _alHeapDBAlloc(NULL,0,hp,1,0x4c);
  *(ALSave **)&drvr->auxBus = sources;
  drvr->maxAuxBusses = 1;
  _alHeapDBAlloc(NULL,0,hp,c->maxPVoices,4);
  alAuxBusNew((ALAuxBus *)drvr->auxBus,sources,c->maxPVoices);
  _alHeapDBAlloc(NULL,0,hp,1,0x20);
  *(ALSave **)&drvr->mainBus = sources;
  _alHeapDBAlloc(NULL,0,hp,c->maxPVoices,4);
  alMainBusNew((ALMainBus *)drvr->mainBus,sources,c->maxPVoices);
  if (c->fxType == '\0') {
    pvVar1 = (ALFxRef)alMainBusParam(drvr->mainBus,2,drvr->auxBus);
    (drvr->pFreeList).next = NULL;
  }
  else {
    pvVar1 = _alSynAllocFX(drvr,0,c,hp);
    (drvr->pFreeList).next = NULL;
  }
  lVar6 = (longlong)(int)pvVar1;
  (drvr->pFreeList).prev = NULL;
  (drvr->pLameList).next = NULL;
  (drvr->pLameList).prev = NULL;
  (drvr->pAllocList).next = NULL;
  (drvr->pAllocList).prev = NULL;
  _alHeapDBAlloc(NULL,0,hp,c->maxPVoices,0xdc);
  iVar7 = 0;
  if (0 < c->maxPVoices) {
    iVar2 = (int)lVar6;
    e = (ALEnvMixer *)(iVar2 + 0x8c);
    r = (ALResampler *)(iVar2 + 0x58);
    f = (ALLoadFilter *)(iVar2 + 0x10);
    do {
      a = (ALLink *)lVar6;
      alLink(a,&drvr->pFreeList);
      a[1].next = NULL;
      alLoadNew(f,drvr->dma,hp);
      alLoadParam(f,1,NULL);
      alResampleNew(r,hp);
      alResampleParam(r,1,f);
      alEnvmixerNew(e,hp);
      alEnvmixerParam(e,1,r);
      alAuxBusParam(drvr->auxBus,2,e);
      a[1].prev = (ALLink_s *)&a[0x11].prev;
      iVar7 += 1;
      lVar6 = (longlong)(int)&a[0x1b].prev;
      e = (ALEnvMixer *)&e[3].first;
      r = (ALResampler *)&r[6].state;
      f = (ALLoadFilter *)&f[3].memin;
    } while (iVar7 < c->maxPVoices);
  }
  iVar7 = 0;
  sVar3 = alSaveParam(save,1,drvr->mainBus);
  lVar6 = (longlong)sVar3;
  _alHeapDBAlloc(NULL,0,hp,c->maxUpdates,0x1c);
  drvr->paramList = NULL;
  if (c->maxUpdates < 1) {
    drvr->heap = hp;
  }
  else {
    pAVar5 = drvr->paramList;
    while( true ) {
      iVar7 += 1;
      ppAVar4 = (ALParam_s **)lVar6;
      *ppAVar4 = pAVar5;
      *(ALParam_s ***)&drvr->paramList = ppAVar4;
      lVar6 = (longlong)(int)(ppAVar4 + 7);
      if (c->maxUpdates <= iVar7) break;
      pAVar5 = drvr->paramList;
    }
    drvr->heap = hp;
  }
  return;
}



s32 osPiStartDma(OSIoMesg *mb,s32 priority,s32 direction,u32 devAddr,void *dramAddr,u32 size,
                OSMesgQueue *mq)

{
  OSMesgQueue *mq_00;
  s32 ret;
  
  if (__osPiDevMgr.active == 0) {
    ret = -1;
  }
  else {
    if (direction == 0) {
      (mb->hdr).type = 0xb;
    }
    else {
      (mb->hdr).type = 0xc;
    }
    (mb->hdr).pri = (u8)priority;
    (mb->hdr).retQueue = mq;
    mb->dramAddr = dramAddr;
    mb->devAddr = devAddr;
    mb->size = size;
    mb->piHandle = NULL;
    if (priority == 1) {
      mq_00 = osPiGetCmdQueue();
      ret = osJamMesg(mq_00,mb,0);
    }
    else {
      mq_00 = osPiGetCmdQueue();
      ret = osSendMesg(mq_00,mb,0);
    }
  }
  return ret;
}



void osViSetSpecialFeatures(u32 func)

{
  u32 saveMask;
  
  saveMask = __osDisableInt();
  if ((func & 1) != 0) {
    __osViNext->control = __osViNext->control | 8;
  }
  if ((func & 2) != 0) {
    __osViNext->control = __osViNext->control & 0xfffffff7;
  }
  if ((func & 4) != 0) {
    __osViNext->control = __osViNext->control | 4;
  }
  if ((func & 8) != 0) {
    __osViNext->control = __osViNext->control & 0xfffffffb;
  }
  if ((func & 0x10) != 0) {
    __osViNext->control = __osViNext->control | 0x10;
  }
  if ((func & 0x20) != 0) {
    __osViNext->control = __osViNext->control & 0xffffffef;
  }
  if ((func & 0x40) != 0) {
    __osViNext->control = __osViNext->control | 0x10000;
    __osViNext->control = __osViNext->control & 0xfffffcff;
  }
  if ((func & 0x80) != 0) {
    __osViNext->control = __osViNext->control & 0xfffeffff;
    __osViNext->control = __osViNext->control | (__osViNext->modep->comRegs).ctrl & 0x300;
  }
  __osViNext->state = __osViNext->state | 8;
  __osRestoreInt(saveMask);
  return;
}



void _bcopy(void *__src,void *__dest,size_t __n)

{
  undefined uVar1;
  undefined2 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined2 *puVar11;
  uint uVar12;
  undefined *puVar13;
  uint uVar14;
  undefined *puVar15;
  undefined4 *puVar16;
  undefined4 *puVar17;
  
  if ((__n != 0) && (__src != __dest)) {
    if (((int)__dest < (int)__src) || ((int)((int)__src + __n) <= (int)__dest)) {
      if ((0xf < (int)__n) && (uVar14 = (uint)__src & 3, uVar14 == ((uint)__dest & 3))) {
        puVar16 = (undefined4 *)__dest;
        if (uVar14 != 0) {
          if (uVar14 == 1) {
            uVar1 = *(undefined *)__src;
            uVar2 = *(undefined2 *)((int)__src + 1);
            __src = (void *)((int)__src + 3);
            puVar16 = (undefined4 *)((int)__dest + 3);
            __n -= 3;
            *(undefined *)__dest = uVar1;
            *(undefined2 *)((int)__dest + 1) = uVar2;
          }
          else {
            if (uVar14 == 2) {
              uVar2 = *(undefined2 *)__src;
              __src = (void *)((int)__src + 2);
              __n -= 2;
              *(undefined2 *)__dest = uVar2;
              puVar16 = (undefined4 *)((int)__dest + 2);
            }
            else {
              uVar1 = *(undefined *)__src;
              __src = (void *)((int)__src + 1);
              puVar16 = (undefined4 *)((int)__dest + 1);
              __n -= 1;
              *(undefined *)__dest = uVar1;
            }
          }
        }
        while (0x1f < (int)__n) {
          uVar10 = *(undefined4 *)__src;
          uVar7 = ((undefined4 *)__src)[1];
          uVar8 = ((undefined4 *)__src)[2];
          uVar9 = ((undefined4 *)__src)[3];
          uVar3 = ((undefined4 *)__src)[4];
          uVar4 = ((undefined4 *)__src)[5];
          uVar5 = ((undefined4 *)__src)[6];
          uVar6 = ((undefined4 *)__src)[7];
          __src = (undefined4 *)__src + 8;
          __n -= 0x20;
          *puVar16 = uVar10;
          puVar16[1] = uVar7;
          puVar16[2] = uVar8;
          puVar16[3] = uVar9;
          puVar16[4] = uVar3;
          puVar16[5] = uVar4;
          puVar16[6] = uVar5;
          puVar16[7] = uVar6;
          puVar16 = puVar16 + 8;
        }
        while (__dest = puVar16, 0xf < (int)__n) {
          uVar10 = *(undefined4 *)__src;
          uVar7 = ((undefined4 *)__src)[1];
          uVar8 = ((undefined4 *)__src)[2];
          uVar9 = ((undefined4 *)__src)[3];
          __src = (undefined4 *)__src + 4;
          __n -= 0x10;
          *puVar16 = uVar10;
          puVar16[1] = uVar7;
          puVar16[2] = uVar8;
          puVar16[3] = uVar9;
          puVar16 = puVar16 + 4;
        }
        while (3 < (int)__n) {
          uVar10 = *(undefined4 *)__src;
          __src = (undefined4 *)__src + 1;
          __n -= 4;
          *(undefined4 *)__dest = uVar10;
          __dest = (undefined4 *)__dest + 1;
        }
      }
      if (__n != 0) {
        puVar16 = (undefined4 *)((int)__src + __n);
        do {
          uVar1 = *(undefined *)__src;
          __src = (void *)((int)__src + 1);
          *(undefined *)__dest = uVar1;
          __dest = (undefined4 *)((int)__dest + 1);
        } while ((undefined4 *)__src != puVar16);
      }
    }
    else {
      uVar14 = (int)__src + __n;
      puVar16 = (undefined4 *)((int)__dest + __n);
      if ((0xf < (int)__n) && (uVar12 = uVar14 & 3, uVar12 == ((uint)puVar16 & 3))) {
        puVar17 = puVar16;
        if (uVar12 != 0) {
          if (uVar12 == 3) {
            puVar13 = (undefined *)(uVar14 - 1);
            uVar2 = *(undefined2 *)(uVar14 - 3);
            uVar14 -= 3;
            puVar17 = (undefined4 *)((int)puVar16 + -3);
            __n -= 3;
            *(undefined *)((int)puVar16 + -1) = *puVar13;
            *(undefined2 *)puVar17 = uVar2;
          }
          else {
            if (uVar12 == 2) {
              puVar11 = (undefined2 *)(uVar14 - 2);
              uVar14 -= 2;
              __n -= 2;
              *(undefined2 *)(undefined4 *)((int)puVar16 + -2) = *puVar11;
              puVar17 = (undefined4 *)((int)puVar16 + -2);
            }
            else {
              puVar13 = (undefined *)(uVar14 - 1);
              uVar14 -= 1;
              puVar17 = (undefined4 *)((int)puVar16 + -1);
              __n -= 1;
              *(undefined *)puVar17 = *puVar13;
            }
          }
        }
        while (0x1f < (int)__n) {
          puVar16 = (undefined4 *)(uVar14 - 4);
          uVar10 = *(undefined4 *)(uVar14 - 8);
          uVar7 = *(undefined4 *)(uVar14 - 0xc);
          uVar8 = *(undefined4 *)(uVar14 - 0x10);
          uVar9 = *(undefined4 *)(uVar14 - 0x14);
          uVar3 = *(undefined4 *)(uVar14 - 0x18);
          uVar4 = *(undefined4 *)(uVar14 - 0x1c);
          uVar5 = *(undefined4 *)(uVar14 - 0x20);
          uVar14 -= 0x20;
          __n -= 0x20;
          puVar17[-1] = *puVar16;
          puVar17[-2] = uVar10;
          puVar17[-3] = uVar7;
          puVar17[-4] = uVar8;
          puVar17[-5] = uVar9;
          puVar17[-6] = uVar3;
          puVar17[-7] = uVar4;
          puVar17[-8] = uVar5;
          puVar17 = puVar17 + -8;
        }
        while (puVar16 = puVar17, 0xf < (int)__n) {
          puVar16 = (undefined4 *)(uVar14 - 4);
          uVar10 = *(undefined4 *)(uVar14 - 8);
          uVar7 = *(undefined4 *)(uVar14 - 0xc);
          uVar8 = *(undefined4 *)(uVar14 - 0x10);
          uVar14 -= 0x10;
          __n -= 0x10;
          puVar17[-1] = *puVar16;
          puVar17[-2] = uVar10;
          puVar17[-3] = uVar7;
          puVar17[-4] = uVar8;
          puVar17 = puVar17 + -4;
        }
        while (3 < (int)__n) {
          puVar17 = (undefined4 *)(uVar14 - 4);
          uVar14 -= 4;
          __n -= 4;
          puVar16[-1] = *puVar17;
          puVar16 = puVar16 + -1;
        }
      }
      if (__n != 0) {
        puVar15 = (undefined *)(uVar14 - 1);
        puVar13 = puVar15 + -__n;
        do {
          puVar16 = (undefined4 *)((int)puVar16 + -1);
          uVar1 = *puVar15;
          puVar15 = puVar15 + -1;
          *(undefined *)puVar16 = uVar1;
        } while (puVar15 != puVar13);
        return;
      }
    }
  }
  return;
}


/*
Unable to decompile 'guPerspectiveF'
Cause: 
Low-level Error: Symbol $$undef00000013 extends beyond the end of the address space
*/


void guPerspective(Mtx *m,u16 *perspNorm,float fovy,float aspect,float near,float far,float scale)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_00000014;
  undefined4 in_stack_00000018;
  undefined8 in_stack_ffffffb4;
  undefined in_stack_ffffffc0 [40];
  
  guPerspectiveF((float  [4] [4])
                 CONCAT2440(CONCAT204(CONCAT128(CONCAT84(CONCAT44(scale,in_stack_00000014),
                                                         in_stack_00000018),in_stack_ffffffb4),
                                      unaff_retaddr),in_stack_ffffffc0),(u16 *)&stack0xffffffc0,near
                 ,far,(float)perspNorm,near,far);
  guMtxF2L((float  [4] [4])
           CONCAT2440(CONCAT204(CONCAT128(CONCAT84(CONCAT44(scale,in_stack_00000014),
                                                   in_stack_00000018),in_stack_ffffffb4),
                                unaff_retaddr),in_stack_ffffffc0),(Mtx *)&stack0xffffffc0);
  return;
}



void guMtxF2L(float mf [4] [4],Mtx *m)

{
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  int iVar4;
  uint *in_a1_lo;
  int iVar5;
  Mtx *pabVar6;
  float fVar7;
  float fVar8;
  
  iVar5 = 0;
  puVar3 = in_a1_lo + 8;
  do {
    iVar4 = 1;
    fVar8 = *(float *)*m;
    fVar7 = *(float *)(*m + 4) * 65536.00000000;
    puVar1 = in_a1_lo;
    puVar2 = puVar3;
    pabVar6 = m;
    if (true) {
      do {
        iVar4 += 1;
        in_a1_lo = puVar1 + 1;
        puVar3 = puVar2 + 1;
        *puVar1 = (int)(fVar8 * 65536.00000000) & 0xffff0000U | (int)fVar7 >> 0x10 & 0xffffU;
        *puVar2 = (int)(fVar8 * 65536.00000000) << 0x10 | (int)fVar7 & 0xffffU;
        fVar8 = *(float *)*(Mtx *)(*pabVar6 + 8);
        fVar7 = *(float *)(*pabVar6 + 0xc) * 65536.00000000;
        puVar1 = in_a1_lo;
        puVar2 = puVar3;
        pabVar6 = (Mtx *)(*pabVar6 + 8);
      } while (iVar4 != 2);
    }
    *in_a1_lo = (int)(fVar8 * 65536.00000000) & 0xffff0000U | (int)fVar7 >> 0x10 & 0xffffU;
    *puVar3 = (int)(fVar8 * 65536.00000000) << 0x10 | (int)fVar7 & 0xffffU;
    iVar5 += 1;
    m = (Mtx *)(*m + 0x10);
    in_a1_lo = in_a1_lo + 1;
    puVar3 = puVar3 + 1;
  } while (iVar5 != 4);
  return;
}



void guMtxIdentF(float mf [4] [4])

{
  int iVar1;
  undefined4 *in_a0_lo;
  
  iVar1 = 0;
  do {
    if (iVar1 == 0) {
      *in_a0_lo = 0x3f800000;
    }
    else {
      *in_a0_lo = 0;
    }
    if (iVar1 == 1) {
      in_a0_lo[1] = 0x3f800000;
    }
    else {
      in_a0_lo[1] = 0;
    }
    if (iVar1 == 2) {
      in_a0_lo[2] = 0x3f800000;
    }
    else {
      in_a0_lo[2] = 0;
    }
    if (iVar1 == 3) {
      in_a0_lo[3] = 0x3f800000;
    }
    else {
      in_a0_lo[3] = 0;
    }
    iVar1 += 1;
    in_a0_lo = in_a0_lo + 4;
  } while (iVar1 != 4);
  return;
}



void guMtxIdent(Mtx *m)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_ffffffb8;
  undefined in_stack_ffffffc0 [56];
  
  guMtxIdentF((float  [4] [4])CONCAT856(CONCAT44(in_stack_ffffffb8,unaff_retaddr),in_stack_ffffffc0)
             );
  guMtxF2L((float  [4] [4])CONCAT856(CONCAT44(in_stack_ffffffb8,unaff_retaddr),in_stack_ffffffc0),
           (Mtx *)&stack0xffffffc0);
  return;
}



void guMtxL2F(float mf_4__4_,Mtx *m)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  int iVar6;
  uint *in_a1_lo;
  int iVar7;
  Mtx *pabVar8;
  
  puVar5 = in_a1_lo + 8;
  iVar7 = 0;
  do {
    iVar6 = 0;
    pabVar8 = m;
    do {
      uVar1 = *puVar5;
      uVar2 = *in_a1_lo;
      iVar6 += 1;
      uVar3 = *puVar5;
      uVar4 = *in_a1_lo;
      in_a1_lo = in_a1_lo + 1;
      puVar5 = puVar5 + 1;
      *(float *)*pabVar8 = (float)(uVar1 >> 0x10 | uVar2 & 0xffff0000) / 65536.00000000;
      *(float *)(*pabVar8 + 4) = (float)(uVar3 & 0xffff | uVar4 << 0x10) / 65536.00000000;
      pabVar8 = (Mtx *)(*pabVar8 + 8);
    } while (iVar6 != 2);
    iVar7 += 1;
    m = (Mtx *)(*m + 0x10);
  } while (iVar7 != 4);
  return;
}



OSThread * __osGetCurrFaultedThread(void)

{
  return __osFaultedThread_0;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void __osExceptionPreamble(void)

{
  __osException();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention yet parameter storage is locked

void __osException(void)

{
  u64 in_at;
  undefined8 in_v0;
  undefined8 in_v1;
  undefined8 in_a0;
  undefined8 in_a1;
  undefined8 in_a2;
  undefined8 in_a3;
  u64 in_t0;
  u64 in_t1;
  u64 in_t2;
  uint uVar1;
  undefined8 in_t3;
  undefined8 in_t4;
  undefined8 in_t5;
  undefined8 in_t6;
  undefined8 in_t7;
  undefined8 unaff_s0;
  undefined8 unaff_s1;
  undefined8 unaff_s2;
  undefined8 unaff_s3;
  undefined8 unaff_s4;
  undefined8 unaff_s5;
  undefined8 unaff_s6;
  undefined8 unaff_s7;
  undefined8 in_t8;
  undefined8 in_t9;
  OSThread *new;
  uint uVar2;
  undefined8 unaff_s8;
  undefined8 unaff_retaddr;
  undefined8 in_f0;
  undefined8 in_f2;
  undefined8 in_f4;
  undefined8 in_f6;
  undefined8 in_f8;
  undefined8 in_f10;
  undefined8 in_f12;
  undefined8 in_f14;
  undefined8 in_f16;
  undefined8 in_f18;
  undefined8 unaff_f20;
  undefined8 unaff_f22;
  undefined8 unaff_f24;
  undefined8 unaff_f26;
  undefined8 unaff_f28;
  undefined8 unaff_f30;
  undefined4 in_fcsr;
  undefined8 in_hi;
  undefined8 in_lo;
  undefined auStackX0 [16];
  
  new = __osRunningThread;
  __osThreadSave.context.pc = Status;
  setCopReg(0,CONCAT44(uRegister00002060,Status),(longlong)(int)Status & 0xfffffffffffffffc,0);
  __osThreadSave.fp = 0;
  __osThreadSave.context._4_8_ = in_at;
  __osThreadSave.context._60_8_ = in_t0;
  __osThreadSave.context._68_8_ = in_t1;
  __osThreadSave.context._76_8_ = in_t2;
  *(u64 *)((int)&(__osRunningThread->context).at + 4) = in_at;
  *(ulonglong *)&(new->context).pc =
       CONCAT44(__osThreadSave.context.pc,__osThreadSave.context.cause);
  *(u64 *)((int)&(new->context).t0 + 4) = __osThreadSave.context._60_8_;
  *(u64 *)((int)&(new->context).t1 + 4) = __osThreadSave.context._68_8_;
  *(u64 *)((int)&(new->context).t2 + 4) = __osThreadSave.context._76_8_;
  uVar2 = (new->context).pc;
  *(undefined8 *)((int)&(new->context).lo + 4) = in_lo;
  *(undefined8 *)((int)&(new->context).v0 + 4) = in_v0;
  *(undefined8 *)((int)&(new->context).v1 + 4) = in_v1;
  *(undefined8 *)((int)&(new->context).a0 + 4) = in_a0;
  *(undefined8 *)((int)&(new->context).a1 + 4) = in_a1;
  *(undefined8 *)((int)&(new->context).a2 + 4) = in_a2;
  *(undefined8 *)((int)&(new->context).a3 + 4) = in_a3;
  *(undefined8 *)((int)&(new->context).t3 + 4) = in_t3;
  *(undefined8 *)((int)&(new->context).t4 + 4) = in_t4;
  *(undefined8 *)((int)&(new->context).t5 + 4) = in_t5;
  *(undefined8 *)((int)&(new->context).t6 + 4) = in_t6;
  *(undefined8 *)((int)&(new->context).t7 + 4) = in_t7;
  *(undefined8 *)((int)&(new->context).s0 + 4) = unaff_s0;
  *(undefined8 *)((int)&(new->context).s1 + 4) = unaff_s1;
  *(undefined8 *)((int)&(new->context).s2 + 4) = unaff_s2;
  *(undefined8 *)((int)&(new->context).s3 + 4) = unaff_s3;
  *(undefined8 *)((int)&(new->context).s4 + 4) = unaff_s4;
  *(undefined8 *)((int)&(new->context).s5 + 4) = unaff_s5;
  *(undefined8 *)((int)&(new->context).s6 + 4) = unaff_s6;
  *(undefined8 *)((int)&(new->context).s7 + 4) = unaff_s7;
  *(undefined8 *)((int)&(new->context).t8 + 4) = in_t8;
  *(undefined8 *)((int)&(new->context).t9 + 4) = in_t9;
  *(undefined8 *)((int)&(new->context).gp + 4) = 0x140;
  *(ulonglong *)((int)&(new->context).sp + 4) = ZEXT48(register0x000000ec);
  *(undefined8 *)((int)&(new->context).s8 + 4) = unaff_s8;
  *(undefined8 *)((int)&(new->context).ra + 4) = unaff_retaddr;
  *(undefined8 *)((int)&(new->context).hi + 4) = in_hi;
  if ((uVar2 & 0xff00) != 0) {
    uVar2 = uVar2 & 0xffff00ff | uVar2 & 0xff00 | ((uint)__OSGlobalIntMask ^ 0xffffffff) & 0xff00;
    (new->context).pc = uVar2;
  }
  uVar1 = _MI_INTR_MASK_REG;
  if (_MI_INTR_MASK_REG != 0) {
    uVar1 = _MI_INTR_MASK_REG |
            ((uint)__OSGlobalIntMask >> 0x10 ^ 0xffffffff) & 0x3f & (new->context).fpcsr;
  }
  (new->context).fpcsr = uVar1;
  (new->context).cause = EPC;
  if (new->fp != 0) {
    *(undefined4 *)&(new->context).fp0 = in_fcsr;
    *(undefined8 *)((int)&(new->context).fp0 + 4) = in_f0;
    *(undefined8 *)((int)&(new->context).fp2 + 4) = in_f2;
    *(undefined8 *)((int)&(new->context).fp4 + 4) = in_f4;
    *(undefined8 *)((int)&(new->context).fp6 + 4) = in_f6;
    *(undefined8 *)((int)&(new->context).fp8 + 4) = in_f8;
    *(undefined8 *)((int)&(new->context).fp10 + 4) = in_f10;
    *(undefined8 *)((int)&(new->context).fp12 + 4) = in_f12;
    *(undefined8 *)((int)&(new->context).fp14 + 4) = in_f14;
    *(undefined8 *)((int)&(new->context).fp16 + 4) = in_f16;
    *(undefined8 *)((int)&(new->context).fp18 + 4) = in_f18;
    *(undefined8 *)((int)&(new->context).fp20 + 4) = unaff_f20;
    *(undefined8 *)((int)&(new->context).fp22 + 4) = unaff_f22;
    *(undefined8 *)((int)&(new->context).fp24 + 4) = unaff_f24;
    *(undefined8 *)((int)&(new->context).fp26 + 4) = unaff_f26;
    *(undefined8 *)((int)&(new->context).fp28 + 4) = unaff_f28;
    *(undefined8 *)((int)&(new->context).fp30 + 4) = unaff_f30;
  }
  (new->context).badvaddr = Cause;
  new->state = 2;
  uVar1 = Cause & 0x7c;
  if (uVar1 != 0x24) {
    if (uVar1 == 0x2c) {
      if ((Cause & 0x30000000) == 0x10000000) {
        uVar2 = (new->context).pc;
        new->fp = 1;
        (new->context).pc = uVar2 | 0x20000000;
        goto LAB_7001067c;
      }
    }
    else {
      if (uVar1 == 0) {
        uVar2 = uVar2 & Cause & 0xff00;
        uVar1 = uVar2 >> 0xc;
        if (uVar1 == 0) {
          uVar1 = (uVar2 >> 8) + 0x10;
        }
                    // WARNING: Could not recover jumptable at 0x700103c0. Too many branches
                    // WARNING: Treating indirect jump as call
        (**(code **)((int)&__osIntTable + (uint)*(byte *)((int)&__osIntOffTable + uVar1)))();
        return;
      }
    }
    __osFaultedThread_0 = new;
    new->state = 1;
    new->flags = 2;
    (new->context).rcp = BadVAddr;
    send_mesg();
    __osDispatchThread();
    return;
  }
  new->flags = 1;
  send_mesg();
  if (new->priority < __osRunQueue->priority) {
    __osEnqueueThread(&__osRunQueue,new);
    __osDispatchThread();
    return;
  }
LAB_7001067c:
  *(OSThread **)&new->next = __osRunQueue;
  __osRunQueue = new;
  __osDispatchThread();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void send_mesg(void)

{
  OSThread_s *pOVar1;
  int iVar2;
  OSThread *list;
  int in_a0_lo;
  int iVar3;
  code *UNRECOVERED_JUMPTABLE;
  
  list = *(OSThread **)((int)&__OSEventStateTab[0].messageQueue + in_a0_lo);
  if (list != NULL) {
    pOVar1 = (OSThread_s *)list->queue;
    iVar2 = *(int *)&list->state;
    if ((int)pOVar1 < iVar2) {
      iVar3 = (int)&pOVar1->next + (int)&list->tlnext->next;
      if (iVar2 == 0) {
        trap(0x1c00);
      }
      if ((iVar2 == -1) && (iVar3 == -0x80000000)) {
        trap(0x1800);
      }
      *(undefined4 *)(list->id + (iVar3 % iVar2) * 4) =
           *(undefined4 *)((int)&__OSEventStateTab[0].message + in_a0_lo);
      *(OSThread_s **)&list->queue = (OSThread_s *)((int)&pOVar1->next + 1);
      if (list->next->next != NULL) {
        list = __osPopThread(list);
        __osEnqueueThread(&__osRunQueue,list);
      }
    }
  }
                    // WARNING: Could not recover jumptable at 0x70010770. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void handle_CpU(void)

{
  uint uVar1;
  uint in_t0_lo;
  OSThread *in_k0_lo;
  
  if ((in_t0_lo & 0x30000000) == 0x10000000) {
    uVar1 = (in_k0_lo->context).pc;
    in_k0_lo->fp = 1;
    (in_k0_lo->context).pc = uVar1 | 0x20000000;
    *(OSThread **)&in_k0_lo->next = __osRunQueue;
    __osRunQueue = in_k0_lo;
    __osDispatchThread();
    return;
  }
  __osFaultedThread_0 = in_k0_lo;
  in_k0_lo->state = 1;
  in_k0_lo->flags = 2;
  (in_k0_lo->context).rcp = BadVAddr;
  send_mesg();
  __osDispatchThread();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __osEnqueueAndYield(OSThread **queue)

{
  int iVar1;
  OSThread *new;
  uint uVar2;
  undefined8 unaff_s0;
  undefined8 unaff_s1;
  undefined8 unaff_s2;
  undefined8 unaff_s3;
  undefined8 unaff_s4;
  undefined8 unaff_s5;
  undefined8 unaff_s6;
  undefined8 unaff_s7;
  uint uVar3;
  undefined8 unaff_s8;
  undefined8 unaff_retaddr;
  undefined8 unaff_f20;
  undefined8 unaff_f22;
  undefined8 unaff_f24;
  undefined8 unaff_f26;
  undefined8 unaff_f28;
  undefined8 unaff_f30;
  undefined4 in_fcsr;
  undefined auStackX0 [16];
  
  new = __osRunningThread;
  iVar1 = __osRunningThread->fp;
  (__osRunningThread->context).pc = Status | 2;
  *(undefined8 *)((int)&(new->context).s0 + 4) = unaff_s0;
  *(undefined8 *)((int)&(new->context).s1 + 4) = unaff_s1;
  *(undefined8 *)((int)&(new->context).s2 + 4) = unaff_s2;
  *(undefined8 *)((int)&(new->context).s3 + 4) = unaff_s3;
  *(undefined8 *)((int)&(new->context).s4 + 4) = unaff_s4;
  *(undefined8 *)((int)&(new->context).s5 + 4) = unaff_s5;
  *(undefined8 *)((int)&(new->context).s6 + 4) = unaff_s6;
  *(undefined8 *)((int)&(new->context).s7 + 4) = unaff_s7;
  *(undefined8 *)((int)&(new->context).gp + 4) = 0x140;
  *(ulonglong *)((int)&(new->context).sp + 4) = ZEXT48(register0x000000ec);
  *(undefined8 *)((int)&(new->context).s8 + 4) = unaff_s8;
  *(undefined8 *)((int)&(new->context).ra + 4) = unaff_retaddr;
  (new->context).cause = (u32)unaff_retaddr;
  if (iVar1 != 0) {
    *(undefined8 *)((int)&(new->context).fp20 + 4) = unaff_f20;
    *(undefined8 *)((int)&(new->context).fp22 + 4) = unaff_f22;
    *(undefined8 *)((int)&(new->context).fp24 + 4) = unaff_f24;
    *(undefined8 *)((int)&(new->context).fp26 + 4) = unaff_f26;
    *(undefined8 *)((int)&(new->context).fp28 + 4) = unaff_f28;
    *(undefined8 *)((int)&(new->context).fp30 + 4) = unaff_f30;
    *(undefined4 *)&(new->context).fp0 = in_fcsr;
  }
  uVar3 = (new->context).pc;
  uVar2 = uVar3 & 0xff00;
  if (uVar2 != 0) {
    (new->context).pc = uVar3 & 0xffff00ff | uVar2 | ((uint)__OSGlobalIntMask ^ 0xffffffff) & 0xff00
    ;
  }
  uVar3 = _MI_INTR_MASK_REG;
  if (_MI_INTR_MASK_REG != 0) {
    uVar3 = _MI_INTR_MASK_REG |
            ((uint)__OSGlobalIntMask >> 0x10 ^ 0xffffffff) & 0x3f & (new->context).fpcsr;
  }
  (new->context).fpcsr = uVar3;
  if (queue != NULL) {
    __osEnqueueThread(queue,new);
  }
  __osDispatchThread();
  return;
}



void __osEnqueueThread(OSThread **queue,OSThread *new)

{
  int iVar1;
  OSThread_s *pOVar2;
  OSThread *succ;
  OSThread *pred;
  
  iVar1 = (*queue)->priority;
  pOVar2 = (OSThread_s *)*queue;
  pred = (OSThread *)queue;
  while (succ = (OSThread *)pOVar2, new->priority <= iVar1) {
    pOVar2 = succ->next;
    iVar1 = pOVar2->priority;
    pred = succ;
  }
  new->next = pred->next;
  *(OSThread **)&pred->next = new;
  *(OSThread ***)&new->queue = queue;
  return;
}



OSThread * __osPopThread(OSThread *list)

{
  OSThread *pOVar1;
  
  pOVar1 = (OSThread *)list->next;
  list->next = pOVar1->next;
  return pOVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 __osDispatchThread(void)

{
  OSThread *pOVar1;
  ulonglong uVar2;
  
  pOVar1 = __osPopThread((OSThread *)&__osRunQueue);
  __osRunningThread = pOVar1;
  pOVar1->state = 4;
  uVar2 = SEXT48((int)(pOVar1->context).pc);
  setCopReg(0,Status,uVar2 & 0xffffffffffff00ff |
                     uVar2 & 0xff00 & (longlong)(int)__OSGlobalIntMask & 0xff00U,0);
  setCopReg(0,EPC,(longlong)(int)(pOVar1->context).cause,0);
  _MI_INTR_MASK_REG =
       (uint)__osRcpImTable[(pOVar1->context).fpcsr & (uint)__OSGlobalIntMask >> 0x10];
  return *(undefined8 *)((int)&(pOVar1->context).v0 + 4);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 __osDispatchThreadSave(void)

{
  int in_k0_lo;
  
  setCopReg(0,Status,(longlong)*(int *)(in_k0_lo + 0x118) & 0xffffffffffff00ffU |
                     (longlong)*(int *)(in_k0_lo + 0x118) & 0xff00U &
                     (longlong)(int)__OSGlobalIntMask & 0xff00U,0);
  setCopReg(0,EPC,(longlong)*(int *)(in_k0_lo + 0x11c),0);
  _MI_INTR_MASK_REG =
       (uint)__osRcpImTable[*(uint *)(in_k0_lo + 0x128) & (uint)__OSGlobalIntMask >> 0x10];
  return *(undefined8 *)(in_k0_lo + 0x28);
}



void __osCleanupThread(void)

{
  int *piVar1;
  longlong lVar2;
  longlong lVar3;
  longlong extraout_a0;
  longlong extraout_a1;
  
  osDestroyThread(NULL);
  piVar1 = (int *)*(int *)extraout_a0;
  lVar3 = extraout_a0;
  while( true ) {
    lVar2 = (longlong)(int)piVar1;
    if (lVar2 == 0) {
      return;
    }
    if (lVar2 == extraout_a1) break;
    piVar1 = (int *)*piVar1;
    lVar3 = lVar2;
  }
  *(undefined4 *)lVar3 = *(undefined4 *)extraout_a1;
  return;
}



void __osDequeueThread(OSThread **queue,OSThread *t)

{
  OSThread *pOVar1;
  OSThread *pOVar2;
  
  pOVar2 = *queue;
  while( true ) {
    pOVar1 = pOVar2;
    if (pOVar1 == NULL) {
      return;
    }
    if (pOVar1 == t) break;
    pOVar2 = (OSThread *)pOVar1->next;
    queue = (OSThread **)pOVar1;
  }
  ((OSThread *)queue)->next = t->next;
  return;
}



void osYieldThread(void)

{
  u32 mask;
  
  mask = __osDisableInt();
  __osRunningThread->state = 2;
  __osEnqueueAndYield(&__osRunQueue);
  __osRestoreInt(mask);
  return;
}



void osInvalDCache(void *addr,int nbytes)

{
  bool bVar1;
  ulonglong uVar2;
  ulonglong uVar3;
  
  uVar2 = SEXT48((int)addr);
  if (0 < nbytes) {
    if (0x1fff < (uint)nbytes) {
      uVar2 = 0xffffffff80000000;
      do {
        cacheOp(1,uVar2);
        bVar1 = uVar2 < 0xffffffff80001ff0;
        uVar2 = SEXT48((int)uVar2 + 0x10);
      } while (bVar1);
      return;
    }
    if (uVar2 < (ulonglong)(longlong)((int)addr + nbytes)) {
      uVar3._4_4_ = (int)addr + nbytes + -0x10;
      uVar3 = SEXT48(uVar3._4_4_);
      if ((uVar2 & 0xf) != 0) {
        addr = (void *)((int)addr - (int)(uVar2 & 0xf));
        cacheOp(0x15,(longlong)(int)addr);
        if (uVar3 <= (ulonglong)(longlong)(int)addr) {
          return;
        }
        uVar2 = SEXT48((int)addr + 0x10);
      }
      if ((uVar3 & 0xf) != 0) {
        uVar3 = SEXT48(uVar3._4_4_ - (int)(uVar3 & 0xf));
        cacheOp(0x15,uVar3 + 0x10);
        if (uVar3 < uVar2) {
          return;
        }
      }
      do {
        cacheOp(0x11,uVar2);
        bVar1 = uVar2 < uVar3;
        uVar2 = SEXT48((int)uVar2 + 0x10);
      } while (bVar1);
    }
  }
  return;
}



void osWritebackDCache(void *addr,s32 nbytes)

{
  bool bVar1;
  ulonglong uVar2;
  void *pvVar3;
  
  if (0 < nbytes) {
    if (0x1fff < (uint)nbytes) {
      uVar2 = 0xffffffff80000000;
      do {
        cacheOp(1,uVar2);
        bVar1 = uVar2 < 0xffffffff80001ff0;
        uVar2 = SEXT48((int)uVar2 + 0x10);
      } while (bVar1);
      return;
    }
    if (addr < (void *)((int)addr + nbytes)) {
      pvVar3 = (void *)((int)addr - ((uint)addr & 0xf));
      do {
        uVar2 = SEXT48((int)pvVar3);
        cacheOp(0x19,uVar2);
        pvVar3 = (void *)((int)pvVar3 + 0x10);
      } while (uVar2 < (ulonglong)(longlong)((int)(void *)((int)addr + nbytes) + -0x10));
    }
  }
  return;
}



int osSetTimer(OSTimer *t,OSTime value,OSTime interval,OSMesgQueue *mq,OSMesg msg)

{
  OSTime tim;
  undefined4 in_stack_00000014;
  OSMesgQueue *in_stack_00000018;
  OSMesg in_stack_0000001c;
  
  t->next = NULL;
  t->prev = NULL;
  *(undefined4 *)((int)&t->interval + 4) = in_stack_00000014;
  *(OSMesg *)&t->interval = msg;
  if (((int)interval == 0) && (mq == NULL)) {
    *(OSMesg *)&t->value = msg;
    *(undefined4 *)((int)&t->value + 4) = in_stack_00000014;
  }
  else {
    *(int *)&t->value = (int)interval;
    *(OSMesgQueue **)((int)&t->value + 4) = mq;
  }
  t->mq = in_stack_00000018;
  t->msg = in_stack_0000001c;
  tim = __osInsertTimer(t);
  if (__osTimerList->next == (OSTimer_s *)t) {
    __osSetTimerIntr((longlong)(int)tim);
  }
  return 0;
}



void alHeapInit(ALHeap *hp,u8 *base,s32 len)

{
  int iVar1;
  
  iVar1 = 0x10 - ((uint)base & 0xf);
  if (iVar1 == 0x10) {
    hp->base = base;
  }
  else {
    hp->base = base + iVar1;
  }
  hp->len = len;
  hp->count = 0;
  hp->cur = hp->base;
  return;
}



void removed_70010D70(void)

{
  return;
}



void removed_70010D78(void)

{
  return;
}



void _bnkfPatchInst(ALInstrument *inst,s32 offset,s32 table)

{
  int iVar1;
  longlong lVar2;
  ALInstrument *pAVar3;
  int in_a3_lo;
  ALSound *pAVar5;
  longlong lVar4;
  ALWaveTable *pAVar6;
  
  if (inst->flags == '\0') {
    inst->flags = '\x01';
    lVar2 = 0;
    if (0 < inst->soundCount) {
      pAVar5 = inst->soundArray[0];
      pAVar3 = inst;
      do {
        pAVar5 = (ALSound *)((int)&pAVar5->envelope + offset);
        pAVar3->soundArray[0] = pAVar5;
        if (pAVar5->flags == '\0') {
          pAVar5->flags = '\x01';
          pAVar5->envelope = (ALEnvelope *)((int)&pAVar5->envelope->attackTime + offset);
          pAVar6 = (ALWaveTable *)((int)&pAVar5->wavetable->base + offset);
          pAVar5->keyMap = (ALKeyMap *)(&pAVar5->keyMap->velocityMin + offset);
          pAVar5->wavetable = pAVar6;
          if (pAVar6->flags == '\0') {
            pAVar6->flags = '\x01';
            pAVar6->base = pAVar6->base + in_a3_lo;
            if (pAVar6->type == '\0') {
              iVar1 = *(int *)((int)&pAVar6->waveInfo + 2);
              *(int *)((int)&pAVar6->waveInfo + 6) = *(int *)((int)&pAVar6->waveInfo + 6) + offset;
              if (iVar1 != 0) {
                *(int *)((int)&pAVar6->waveInfo + 2) = iVar1 + offset;
              }
            }
            else {
              if (pAVar6->type != '\x01') {
                lVar4 = (longlong)inst->soundCount;
                goto LAB_70010e50;
              }
              iVar1 = *(int *)((int)&pAVar6->waveInfo + 2);
              if (iVar1 != 0) {
                *(int *)((int)&pAVar6->waveInfo + 2) = iVar1 + offset;
              }
            }
            lVar4 = (longlong)inst->soundCount;
          }
          else {
            lVar4 = (longlong)inst->soundCount;
          }
        }
        else {
          lVar4 = (longlong)inst->soundCount;
        }
LAB_70010e50:
        lVar2 = (longlong)((int)lVar2 + 1);
        if (lVar4 <= lVar2) {
          return;
        }
        pAVar5 = *(ALSound **)(pAVar3 + 1);
        pAVar3 = (ALInstrument *)&pAVar3->tremType;
      } while( true );
    }
  }
  return;
}



void removed_70010E6C(void)

{
  return;
}



void alBnkfNew(ALBankFile *file,char *table)

{
  ALInstrument *inst;
  s32 table_00;
  s32 extraout_a2_lo;
  s32 extraout_a2_lo_00;
  int iVar1;
  longlong lVar2;
  int iVar3;
  longlong lVar4;
  ALBankFile *pAVar5;
  longlong lVar6;
  ALBank *pAVar7;
  longlong lVar8;
  int iVar9;
  
  if ((file->revision != 0x4231) || (lVar6 = 0, file->bankCount < 1)) {
    return;
  }
  pAVar7 = file->bankArray[0];
  pAVar5 = file;
  do {
    pAVar7 = (ALBank *)((int)&file->revision + (int)&pAVar7->instCount);
    lVar8 = (longlong)(int)pAVar7;
    pAVar5->bankArray[0] = pAVar7;
    if (lVar8 == 0) {
LAB_70010f40:
      lVar8 = (longlong)file->bankCount;
    }
    else {
      if (pAVar7->flags == '\0') {
        pAVar7->flags = '\x01';
        lVar2 = 0;
        inst = (ALInstrument *)((int)&file->revision + (int)&pAVar7->percussion->volume);
        if (pAVar7->percussion != NULL) {
          pAVar7->percussion = inst;
          _bnkfPatchInst(inst,(s32)file,table_00);
          table_00 = extraout_a2_lo;
        }
        if (0 < *(short *)lVar8) {
          iVar9 = *(int *)((short *)lVar8 + 6);
          lVar4 = lVar8;
          while( true ) {
            iVar1 = (int)lVar8;
            iVar3 = (int)lVar2;
            inst = (ALInstrument *)((int)&file->revision + iVar9);
            *(ALInstrument **)(iVar1 + 0xc) = inst;
            if (inst != NULL) {
              _bnkfPatchInst(inst,(s32)file,table_00);
              table_00 = extraout_a2_lo_00;
            }
            lVar2 = (longlong)(iVar3 + 1);
            lVar8 = (longlong)(iVar1 + 4);
            if ((longlong)*(short *)lVar4 <= lVar2) break;
            iVar9 = *(int *)(iVar1 + 0x10);
          }
          goto LAB_70010f40;
        }
        lVar8 = (longlong)file->bankCount;
      }
      else {
        lVar8 = (longlong)file->bankCount;
      }
    }
    lVar6 = (longlong)((int)lVar6 + 1);
    if (lVar8 <= lVar6) {
      return;
    }
    pAVar7 = *(ALBank **)(pAVar5 + 1);
    pAVar5 = (ALBankFile *)pAVar5->bankArray;
  } while( true );
}



void alSeqFileNew(ALSeqFile *file,u8 *base)

{
  longlong lVar1;
  ALSeqFile *pAVar2;
  u8 *puVar3;
  
  lVar1 = 0;
  if (0 < file->seqCount) {
    puVar3 = file->seqArray[0].offset;
    pAVar2 = file;
    while( true ) {
      lVar1 = (longlong)((int)lVar1 + 1);
      pAVar2->seqArray[0].offset = base + (int)puVar3;
      if ((longlong)file->seqCount <= lVar1) break;
      puVar3 = *(u8 **)(pAVar2 + 1);
      pAVar2 = (ALSeqFile *)&pAVar2->seqArray[0].len;
    }
  }
  return;
}



void __CSPPostNextSeqEvent(ALCSPlayer *seqp)

{
  char cVar1;
  int deltaTicks;
  ALEvent evt;
  
  if (seqp->state == 1) {
    if ((seqp->target != NULL) &&
       (cVar1 = __alCSeqNextDelta(seqp->target,&deltaTicks), cVar1 != '\0')) {
      evt.type = 0;
      alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,&evt,seqp->uspt * deltaTicks);
    }
  }
  return;
}



void __setUsptFromTempo(ALCSPlayer *seqp,f32 tempo)

{
  if (seqp->target == NULL) {
    seqp->uspt = 0x1e8;
    return;
  }
  seqp->uspt = (int)((float)tempo * (float)seqp->target->qnpt);
  return;
}



void proc_70011064(void)

{
  return;
}



void __CSPRepostEvent(ALEventQueue *evtq,ALEventListItem *item)

{
  int iVar1;
  ALLink_s *pAVar2;
  ALLink_s *pAVar3;
  ALLink_s *pAVar4;
  ulonglong mask;
  ALLink_s *pAVar5;
  ALLink_s *b;
  ALLink *b_00;
  ALLink *a;
  ALCSPlayer *seqp;
  
  b_00 = NULL;
  if ((*(char *)&item->delta == -1) && (*(char *)((int)&item->delta + 1) == 'Q')) {
    iVar1 = seqp->uspt;
    __setUsptFromTempo(seqp,(f32)(float)((uint)*(byte *)((int)&item->delta + 3) << 0x10 |
                                         (uint)*(byte *)&(item->evt).type << 8 |
                                        (uint)*(byte *)((int)&(item->evt).type + 1)));
    pAVar2 = (ALLink_s *)(seqp->evtq).allocList.prev;
    pAVar5 = NULL;
    while (a = (ALLink *)pAVar2, a != NULL) {
      pAVar2 = a->next;
      b = (ALLink_s *)((int)&(a[1].next)->next + (int)&pAVar5->next);
      pAVar5 = b;
      if (*(short *)&a[1].prev == 0x15) {
        alUnlink(a);
        if (b_00 == NULL) {
          a->next = NULL;
          a->prev = NULL;
          b_00 = a;
        }
        else {
          alLink(a,b_00);
        }
        pAVar5 = b;
        if (pAVar2 != NULL) {
          pAVar5 = (ALLink_s *)((int)b - (int)a[1].next);
          pAVar2[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar2[1].next)->next);
        }
        a[1].next = b;
      }
    }
    if (b_00 != NULL) {
      a = (ALLink *)&(seqp->evtq).allocList.prev;
      do {
        pAVar2 = b_00->next;
        if (iVar1 == 0) {
          trap(0x1c00);
        }
        if ((iVar1 == -1) && (b_00[1].next == (ALLink_s *)0x80000000)) {
          trap(0x1800);
        }
        b_00[1].next = (ALLink_s *)(seqp->uspt * ((int)b_00[1].next / iVar1));
        mask._4_4_ = osSetIntMask(1);
        if (seqp != (ALCSPlayer *)0xffffffb0) {
          pAVar5 = a->next;
          b = (ALLink_s *)a;
          while (pAVar5 != NULL) {
            pAVar3 = b_00[1].next;
            pAVar4 = pAVar5[1].next;
            if ((int)pAVar3 < (int)pAVar4) {
              pAVar5[1].next = (ALLink_s *)((int)pAVar4 - (int)pAVar3);
              alLink(b_00,(ALLink *)b);
              goto LAB_7001121c;
            }
            b_00[1].next = (ALLink_s *)((int)pAVar3 - (int)pAVar4);
            b = ((ALLink *)b)->next;
            if (b == NULL) goto LAB_7001121c;
            pAVar5 = b->next;
          }
          alLink(b_00,(ALLink *)b);
        }
LAB_7001121c:
        osSetIntMask(mask._4_4_);
        b_00 = (ALLink *)pAVar2;
      } while (pAVar2 != NULL);
    }
  }
  return;
}



// WARNING: Type propagation algorithm not settling

void __CSPHandleMIDIMsg(ALCSPlayer *seqp,ALEvent *event)

{
  byte key;
  byte fxmix;
  int iVar1;
  int iVar2;
  ALSound *pAVar3;
  ALVoiceState_s **ppAVar4;
  ALVoiceState *vs;
  s16 volume;
  ALMicroTime t;
  ALPan pan;
  uint uVar5;
  ALVoice *voice;
  byte key_00;
  u8 channel;
  int in_t0_lo;
  ulonglong uVar6;
  ALSeqPlayer *seqp_00;
  ALEventQueue *evtq;
  s32 chan;
  f32 pitch;
  PVoice_s *pPVar7;
  float fVar8;
  ALVoiceState_s *pAVar9;
  u8 uVar11;
  float fVar10;
  f32 pitch_00;
  f32 extraout_f12;
  f32 extraout_f12_00;
  u8 channel_00;
  undefined4 auStack92 [2];
  float afStack84 [4];
  ALVoiceConfig config [4];
  s16 sStack44;
  ALVoiceState *pAStack40;
  uint uStack36;
  byte bStack32;
  
  key = *(byte *)(in_t0_lo + 9);
  fxmix = *(byte *)(in_t0_lo + 10);
  uVar5 = (uint)*(byte *)(in_t0_lo + 8) & 0xf0;
  uVar6 = (ulonglong)*(byte *)(in_t0_lo + 8) & 0xf;
  if (0x60 < uVar5 - 0x80) {
    return;
  }
  chan = (s32)uVar6;
  key_00 = (byte)uVar6;
  switch(uVar5) {
  case 0x80:
    goto LAB_70011624;
  case 0x90:
    if (fxmix != 0) {
      if (seqp_00->state != 1) {
        return;
      }
      pAVar3 = __lookupSoundQuick(seqp_00,key,fxmix,key_00);
      if (pAVar3 == NULL) {
        return;
      }
      config[0].fxBus = 0;
      config[0].unityPitch = '\0';
      config[0].priority = ZEXT12(*(byte *)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev);
      vs = ___mapVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,fxmix,key_00,channel_00);
      if (vs == NULL) {
        return;
      }
      voice = &vs->voice;
      alSynAllocVoice(seqp_00->drvr,voice,config);
      vs->sound = pAVar3;
      vs->envPhase = '\0';
      if (*(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev + 3) < 0x40) {
        vs->phase = '\0';
      }
      else {
        vs->phase = '\x02';
      }
      pitch = alCents2Ratio((int)((((uint)key - (uint)pAVar3->keyMap->keyBase) * 100 +
                                  (int)pAVar3->keyMap->detune) * 0x10000) >> 0x10);
      vs->pitch = pitch;
      vs->envGain = pAVar3->envelope->attackVolume;
      iVar2 = seqp_00->curTime;
      iVar1 = pAVar3->envelope->attackTime;
      vs->flags = '\0';
      vs->envEndTime = iVar2 + iVar1;
      pAVar9 = (&seqp_00->vAllocHead->next)[chan * 4];
      afStack84[0] = 127.00000000;
      if (((*(char *)&(pAVar9->voice).node.next != '\0') && (seqp_00->updateOsc != NULL)) &&
         (t = (*seqp_00->updateOsc)(auStack92,(f32 *)afStack84), t != 0)) {
        sStack44 = 0x16;
        uStack36 = auStack92[0];
        pAStack40 = vs;
        alEvtqPostEvent((ALEventQueue *)&(seqp_00->evtq).freeList.prev,(ALEvent *)&sStack44,t);
        vs->flags = vs->flags | 1;
      }
      if (false) {
        fVar8 = ROUND(afStack84[0]);
      }
      else {
        fVar8 = FLOOR(afStack84[0]);
      }
      uVar11 = (u8)(int)fVar8;
      if (false) {
        if (false) {
          fVar8 = ROUND(afStack84[0] - 2147483648.00000000);
        }
        else {
          fVar8 = FLOOR(afStack84[0] - 2147483648.00000000);
        }
        if (true) {
          uVar11 = (u8)(int)fVar8;
          goto LAB_70011490;
        }
      }
      else {
        if (-1 < (int)fVar8) goto LAB_70011490;
      }
      uVar11 = -1;
LAB_70011490:
      vs->tremelo = uVar11;
      afStack84[0] = 1.00000000;
      evtq = (ALEventQueue *)&(seqp_00->evtq).freeList.prev;
      if (((*(char *)&(pAVar9->voice).node.prev != '\0') && (seqp_00->updateOsc != NULL)) &&
         (t = (*seqp_00->updateOsc)(auStack92,(f32 *)afStack84), t != 0)) {
        sStack44 = 0x17;
        uStack36 = auStack92[0];
        pAStack40 = vs;
        bStack32 = key_00;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack44,t);
        vs->flags = vs->flags | 2;
      }
      fVar10 = (float)vs->pitch;
      *(float *)&vs->vibrato = afStack84[0];
      fVar8 = (float)vs->vibrato;
      ppAVar4 = &seqp_00->vAllocHead->next + chan * 4;
      pAVar9 = ppAVar4[3];
      fxmix = *(byte *)((int)ppAVar4 + 10);
      pan = __vsPan(vs,seqp_00);
      volume = __vsVol(vs,seqp_00);
      t = pAVar3->envelope->attackTime;
      alSynStartVoiceParams
                (seqp_00->drvr,voice,pAVar3->wavetable,pitch_00,
                 SUB42((float)pAVar9 * fVar10 * fVar8,0),(ALPan)volume,pan,(uint)fxmix);
      sStack44 = 6;
      bStack32 = pAVar3->envelope->decayVolume;
      uStack36 = pAVar3->envelope->decayTime;
      pAStack40 = (ALVoiceState *)voice;
      alEvtqPostEvent(evtq,(ALEvent *)&sStack44,t);
      if (*(int *)(in_t0_lo + 0xc) == 0) {
        return;
      }
      sStack44 = 0x15;
      uStack36 = (uint)key_00 << 0x18 | 0x80000000 |
                 (uint)CONCAT12(key,(short)uStack36) & 0xffff00ff;
      alEvtqPostEvent(evtq,(ALEvent *)&sStack44,seqp_00->uspt * *(int *)(in_t0_lo + 0xc));
      return;
    }
LAB_70011624:
    vs = ___lookupVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,key_00,channel);
    if (vs != NULL) {
      if (vs->phase == '\x02') {
        vs->phase = '\x04';
      }
      else {
        vs->phase = '\x03';
        __seqpReleaseVoice(seqp_00,&vs->voice,vs->sound->envelope->releaseTime);
      }
    }
    break;
  case 0xa0:
    vs = ___lookupVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,key_00,channel);
    if (vs != NULL) {
      vs->velocity = fxmix;
      volume = __vsVol(vs,seqp_00);
      t = __vsDelta(vs,seqp_00->curTime);
      alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
    }
    break;
  case 0xb0:
    if (key == 7) {
      *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev + 1) = fxmix;
      vs = seqp_00->vAllocTail;
      if (vs != NULL) {
        key = vs->channel;
        while( true ) {
          if (uVar6 == (ulonglong)key) {
            if (vs->envPhase == '\x03') {
              vs = (ALVoiceState *)vs->next;
            }
            else {
              volume = __vsVol(vs,seqp_00);
              t = __vsDelta(vs,seqp_00->curTime);
              alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
              vs = (ALVoiceState *)vs->next;
            }
          }
          else {
            vs = (ALVoiceState *)vs->next;
          }
          if (vs == NULL) break;
          key = ((ALVoiceState_s *)vs)->channel;
        }
      }
    }
    else {
      if (key == 10) {
        *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].next + 3) = fxmix;
        vs = seqp_00->vAllocTail;
        if (vs != NULL) {
          key = vs->channel;
          while( true ) {
            if (uVar6 == (ulonglong)key) {
              pan = __vsPan(vs,seqp_00);
              alSynSetPan(seqp_00->drvr,&vs->voice,pan);
              vs = (ALVoiceState *)vs->next;
            }
            else {
              vs = (ALVoiceState *)vs->next;
            }
            if (vs == NULL) break;
            key = ((ALVoiceState_s *)vs)->channel;
          }
        }
      }
      else {
        if (key == 0x10) {
          *(byte *)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev = fxmix;
        }
        else {
          if (key == 0x40) {
            *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev + 3) = fxmix;
            vs = seqp_00->vAllocTail;
            if (vs != NULL) {
              key = vs->channel;
              do {
                if (uVar6 == (ulonglong)key) {
                  uVar11 = vs->phase;
                  if (uVar11 == '\x03') {
                    vs = (ALVoiceState *)vs->next;
                  }
                  else {
                    if (fxmix < 0x40) {
                      if (uVar11 == '\x02') {
                        vs->phase = '\0';
                      }
                      else {
                        if (uVar11 != '\x04') {
                          vs = (ALVoiceState *)vs->next;
                          goto LAB_70011928;
                        }
                        vs->phase = '\x03';
                        __seqpReleaseVoice(seqp_00,&vs->voice,vs->sound->envelope->releaseTime);
                      }
                    }
                    else {
                      if (uVar11 != '\0') {
                        vs = (ALVoiceState *)vs->next;
                        goto LAB_70011928;
                      }
                      vs->phase = '\x02';
                    }
                    vs = (ALVoiceState *)vs->next;
                  }
                }
                else {
                  vs = (ALVoiceState *)vs->next;
                }
LAB_70011928:
                if (vs == NULL) {
                  return;
                }
                key = ((ALVoiceState_s *)vs)->channel;
              } while( true );
            }
          }
          else {
            if (key == 0x5b) {
              *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].prev + 2) = fxmix;
              vs = seqp_00->vAllocTail;
              if (vs != NULL) {
                key = vs->channel;
                while( true ) {
                  if (uVar6 == (ulonglong)key) {
                    alSynSetFXMix(seqp_00->drvr,&vs->voice,fxmix);
                    vs = (ALVoiceState *)vs->next;
                  }
                  else {
                    vs = (ALVoiceState *)vs->next;
                  }
                  if (vs == NULL) break;
                  key = ((ALVoiceState_s *)vs)->channel;
                }
              }
            }
          }
        }
      }
    }
    break;
  case 0xc0:
    if ((longlong)(ulonglong)key < (longlong)seqp_00->bank->instCount) {
      __setInstChanState(seqp_00,seqp_00->bank->instArray[(uint)key],chan);
    }
    break;
  case 0xd0:
    vs = seqp_00->vAllocTail;
    if (vs != NULL) {
      fxmix = vs->channel;
      while( true ) {
        if (uVar6 == (ulonglong)fxmix) {
          vs->velocity = key;
          volume = __vsVol(vs,seqp_00);
          t = __vsDelta(vs,seqp_00->curTime);
          alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
          vs = (ALVoiceState *)vs->next;
        }
        else {
          vs = (ALVoiceState *)vs->next;
        }
        if (vs == NULL) break;
        fxmix = ((ALVoiceState_s *)vs)->channel;
      }
    }
    break;
  case 0xe0:
    iVar2 = (int)*(short *)&(&(seqp_00->vAllocHead->voice).node)[chan * 2].next *
            ((uint)fxmix * 0x80 + (uint)key + -0x2000);
    if (iVar2 < 0) {
      iVar2 += 0x1fff;
    }
    pPVar7 = (PVoice_s *)alCents2Ratio(iVar2 >> 0xd);
    (&(seqp_00->vAllocHead->voice).pvoice)[chan * 4] = pPVar7;
    vs = seqp_00->vAllocTail;
    if (vs != NULL) {
      key = vs->channel;
      pitch = extraout_f12;
      while( true ) {
        if (uVar6 == (ulonglong)key) {
          alSynSetPitch(seqp_00->drvr,&vs->voice,pitch);
          vs = (ALVoiceState *)vs->next;
          pitch = extraout_f12_00;
        }
        else {
          vs = (ALVoiceState *)vs->next;
        }
        if (vs == NULL) break;
        key = ((ALVoiceState_s *)vs)->channel;
      }
    }
  }
  return;
}



void proc_70011A64(void)

{
  return;
}



ALMicroTime __CSPVoiceHandler(void *node)

{
  undefined uVar1;
  int t;
  void *oscState;
  ALVoiceState *vs;
  ALBank *b;
  float fVar2;
  ALSeqPlayer *seqp;
  s16 volume;
  ALMicroTime t_00;
  char cVar3;
  ALMicroTime delta;
  longlong lVar4;
  ALCSPlayer *seqp_00;
  longlong extraout_a0;
  undefined8 in_a1;
  ALEvent *event;
  undefined8 extraout_a1;
  undefined8 in_a2;
  undefined8 extraout_a2;
  ALVoice *v;
  longlong lVar5;
  ALEventQueue *evtq;
  u8 uVar6;
  f32 pitch;
  undefined2 uStack72;
  f32 fStack40;
  s16 sStack20;
  ALVoiceState *pAStack16;
  void *pvStack12;
  undefined uStack8;
  
  lVar4 = (longlong)(int)node;
  evtq = (ALEventQueue *)((int)node + 0x48);
  lVar5 = lVar4;
  do {
    seqp = (ALSeqPlayer *)lVar5;
    if (true) {
      switch(*(undefined2 *)&(seqp->nextEvent).msg) {
      case 0:
        if (((ALCSeq *)seqp->target != NULL) &&
           (__alCSeqGetTrackEvent((ALCSeq *)seqp->target,(u32)&uStack72,(ALEvent *)in_a2), true)) {
          switch(uStack72) {
          case 1:
            __CSPHandleMIDIMsg(seqp_00,event);
            lVar5 = (longlong)(int)seqp;
            __CSPPostNextSeqEvent((ALCSPlayer *)seqp);
            break;
          case 3:
            __CSPRepostEvent((ALEventQueue *)seqp_00,&uStack72);
            lVar5 = (longlong)(int)seqp;
            __CSPPostNextSeqEvent((ALCSPlayer *)seqp);
            break;
          case 4:
            seqp->state = 2;
            uStack72 = 0x10;
            alEvtqPostEvent(evtq,(ALEvent *)&uStack72,0x7fffffff);
            break;
          case 0x12:
          case 0x13:
          case 0x14:
            __CSPPostNextSeqEvent((ALCSPlayer *)seqp);
          }
        }
        break;
      case 2:
      case 0x15:
        __CSPHandleMIDIMsg((ALCSPlayer *)lVar4,(ALEvent *)in_a1);
        lVar5 = (longlong)(int)seqp;
        break;
      case 5:
        v = *(ALVoice **)((int)&(seqp->nextEvent).msg + 4);
        alSynStopVoice(seqp->drvr,v);
        alSynFreeVoice(seqp->drvr,v);
        if (((ALVoiceState *)v->clientPrivate)->flags != '\0') {
          __seqpStopOsc(seqp,(ALVoiceState *)v->clientPrivate);
        }
        __unmapVoice(seqp,v);
        break;
      case 6:
        v = *(ALVoice **)((int)&(seqp->nextEvent).msg + 4);
        vs = (ALVoiceState *)v->clientPrivate;
        if (vs->envPhase == '\0') {
          vs->envPhase = '\x01';
          t = *(int *)((int)&(seqp->nextEvent).msg + 8);
        }
        else {
          t = *(int *)((int)&(seqp->nextEvent).msg + 8);
        }
        vs->envEndTime = seqp->curTime + t;
        vs->envGain = *(u8 *)&(seqp->evtq).freeList.next;
        volume = __vsVol(vs,seqp);
        alSynSetVol(seqp->drvr,v,volume,t);
        break;
      case 7:
        __CSPRepostEvent((ALEventQueue *)(ALCSPlayer *)lVar4,(ALEventListItem *)((int)node + 0x38));
        lVar5 = (longlong)(int)seqp;
        break;
      case 9:
        sStack20 = 9;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,(ALMicroTime)seqp->chanState);
        break;
      case 10:
        vs = seqp->vAllocTail;
        seqp->vol = *(s16 *)((int)&(seqp->nextEvent).msg + 4);
        while (vs != NULL) {
          volume = __vsVol(vs,seqp);
          delta = __vsDelta(vs,seqp->curTime);
          alSynSetVol(seqp->drvr,&vs->voice,volume,delta);
          vs = (ALVoiceState *)vs->next;
        }
        break;
      case 0xc:
        *(undefined *)
         &(&(seqp->vAllocHead->voice).node)[(uint)*(byte *)((int)&(seqp->nextEvent).msg + 4) * 2].
          prev = *(undefined *)((int)&(seqp->nextEvent).msg + 5);
        break;
      case 0xd:
        seqp->target = *(ALSeq **)((int)&(seqp->nextEvent).msg + 4);
        __setUsptFromTempo((ALCSPlayer *)seqp,(f32)flt_800296C4);
        if (seqp->bank != NULL) {
          __initFromBank(seqp,seqp->bank);
        }
        break;
      case 0xe:
        b = *(ALBank **)((int)&(seqp->nextEvent).msg + 4);
        seqp->bank = b;
        __initFromBank(seqp,b);
        break;
      case 0xf:
        if (seqp->state != 1) {
          seqp->state = 1;
          __CSPPostNextSeqEvent((ALCSPlayer *)seqp);
        }
        break;
      case 0x10:
        if (seqp->state == 2) {
          vs = seqp->vAllocTail;
          while (vs != NULL) {
            v = &vs->voice;
            alSynStopVoice(seqp->drvr,v);
            alSynFreeVoice(seqp->drvr,v);
            if (vs->flags != '\0') {
              __seqpStopOsc(seqp,vs);
            }
            __unmapVoice(seqp,v);
            vs = seqp->vAllocTail;
          }
          seqp->state = 0;
        }
        break;
      case 0x11:
        if (seqp->state == 1) {
          alEvtqFlushType(evtq,0);
          alEvtqFlushType(evtq,0x15);
          alEvtqFlushType(evtq,2);
          vs = seqp->vAllocTail;
          while (vs != NULL) {
            cVar3 = __voiceNeedsNoteKill(seqp,&vs->voice,50000);
            if (cVar3 != '\0') {
              __seqpReleaseVoice(seqp,&vs->voice,50000);
            }
            vs = (ALVoiceState *)vs->next;
          }
          seqp->state = 2;
          sStack20 = 0x10;
          alEvtqPostEvent(evtq,(ALEvent *)&sStack20,0x7fffffff);
        }
        break;
      case 0x16:
        oscState = *(void **)((int)&(seqp->nextEvent).msg + 8);
        vs = *(ALVoiceState **)((int)&(seqp->nextEvent).msg + 4);
        delta = (*seqp->stopOsc)(oscState);
        if (false) {
          fVar2 = ROUND((float)fStack40);
        }
        else {
          fVar2 = FLOOR((float)fStack40);
        }
        uVar6 = (u8)(int)fVar2;
        if (false) {
          if (false) {
            fVar2 = ROUND((float)fStack40 - 2147483648.00000000);
          }
          else {
            fVar2 = FLOOR((float)fStack40 - 2147483648.00000000);
          }
          if (false) goto LAB_70011cf8;
          uVar6 = (u8)(int)fVar2;
        }
        else {
          if ((int)fVar2 < 0) {
LAB_70011cf8:
            uVar6 = -1;
          }
        }
        vs->tremelo = uVar6;
        volume = __vsVol(vs,seqp);
        t_00 = __vsDelta(vs,seqp->curTime);
        alSynSetVol(seqp->drvr,&vs->voice,volume,t_00);
        sStack20 = 0x16;
        pAStack16 = vs;
        pvStack12 = oscState;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,delta);
        break;
      case 0x17:
        oscState = *(void **)((int)&(seqp->nextEvent).msg + 8);
        vs = *(ALVoiceState **)((int)&(seqp->nextEvent).msg + 4);
        uVar1 = *(undefined *)&(seqp->evtq).freeList.next;
        delta = (*seqp->stopOsc)(oscState);
        vs->vibrato = fStack40;
        alSynSetPitch(seqp->drvr,&vs->voice,pitch);
        sStack20 = 0x17;
        pAStack16 = vs;
        pvStack12 = oscState;
        uStack8 = uVar1;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,delta);
      }
    }
    delta = alEvtqNextEvent(evtq,(ALEvent *)(ALEventListItem *)((int)node + 0x38));
    t = (int)lVar5;
    *(ALMicroTime *)(t + 0x28) = delta;
    lVar4 = extraout_a0;
    in_a1 = extraout_a1;
    in_a2 = extraout_a2;
    if (delta != 0) {
      *(int *)(t + 0x1c) = *(int *)(t + 0x1c) + delta;
      return delta;
    }
  } while( true );
}



void alCSPNew(ALCSPlayer *seqp,ALSeqpConfig *c)

{
  ALHeap *hp;
  ALPlayer_s *pAVar1;
  ALGlobals *pAVar2;
  ALVoiceState *items;
  ALVoiceState *pAVar3;
  int iVar4;
  ALLink_s *pAVar5;
  
  hp = c->heap;
  seqp->bank = NULL;
  seqp->target = NULL;
  pAVar2 = slg;
  seqp->chanMask = 0xff;
  seqp->uspt = 0x1e8;
  seqp->nextDelta = 0;
  seqp->state = 0;
  seqp->vol = 0x7fff;
  seqp->chanState = (ALChanState *)0x3e80;
  seqp->curTime = 0;
  *(ALGlobals **)&seqp->drvr = pAVar2;
  seqp->updateOsc = c->initOsc;
  seqp->stopOsc = c->updateOsc;
  pAVar1 = (ALPlayer_s *)c->stopOsc;
  *(undefined2 *)&(seqp->nextEvent).msg = 9;
  seqp[1].node.next = pAVar1;
  seqp->maxChannels = c->maxChannels;
  _alHeapDBAlloc(NULL,0,hp,(uint)c->maxChannels,0x10);
  seqp->vAllocHead = items;
  __initChanState((ALSeqPlayer *)seqp);
  _alHeapDBAlloc(NULL,0,hp,c->maxVoices,0x38);
  seqp->initOsc = NULL;
  iVar4 = 0;
  if (0 < c->maxVoices) {
    pAVar5 = (ALLink_s *)seqp->initOsc;
    pAVar3 = items;
    while( true ) {
      iVar4 += 1;
      ((ALLink *)&pAVar3->next)->next = pAVar5;
      *(ALVoiceState **)&seqp->initOsc = pAVar3;
      pAVar3 = pAVar3 + 1;
      if (c->maxVoices <= iVar4) break;
      pAVar5 = (ALLink_s *)seqp->initOsc;
    }
  }
  seqp->vAllocTail = NULL;
  seqp->vFreeList = NULL;
  _alHeapDBAlloc(NULL,0,hp,c->maxEvents,0x1c);
  alEvtqNew((ALEventQueue *)&(seqp->evtq).freeList.prev,(ALEventListItem *)items,c->maxEvents);
  (seqp->node).next = NULL;
  (seqp->node).handler = __CSPVoiceHandler;
  *(ALCSPlayer **)&(seqp->node).clientData = seqp;
  alSynAddPlayer((ALSynth *)slg,(ALPlayer *)seqp);
  return;
}



void __CSPPostNextSeqEvent(ALCSPlayer *seqp)

{
  ALEvent evt;
  
  evt.type = 0xe;
  alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,&evt,0);
  return;
}



s32 ultra_proc_70012230(ALCSPlayer *param_1)

{
  return param_1->state;
}



void alCSeqGetLoc(ALCSeq *seq,ALCSeqMarker *marker)

{
  int i;
  ALCSeqMarker *m;
  ALCSeq *pAVar1;
  
  marker->validTracks = seq->validTracks;
  i = 0;
  marker->lastTicks = seq->lastTicks;
  marker->lastDeltaTicks = seq->lastDeltaTicks;
  pAVar1 = seq;
  m = marker;
  do {
    i += 2;
    marker->curLoc[0] = seq->curLoc[0];
    marker->curBUPtr[0] = seq->curBUPtr[0];
    m->curBULen[0] = pAVar1->curBULen[0];
    m->lastStatus[0] = pAVar1->lastStatus[0];
    marker->evtDeltaTicks[0] = seq->evtDeltaTicks[0];
    marker->curLoc[1] = seq->curLoc[1];
    marker->curBUPtr[1] = seq->curBUPtr[1];
    m->curBULen[1] = pAVar1->curBULen[1];
    m->lastStatus[1] = pAVar1->lastStatus[1];
    marker->evtDeltaTicks[1] = seq->evtDeltaTicks[1];
    seq = (ALCSeq *)&seq->qnpt;
    pAVar1 = (ALCSeq *)((int)&pAVar1->base + 2);
    marker = (ALCSeqMarker *)&marker->lastDeltaTicks;
    m = (ALCSeqMarker *)((int)&m->validTracks + 2);
  } while (i != 0x10);
  return;
}



void alCSeqSetLoc(ALCSeq *seq,ALCSeqMarker *m)

{
  int i;
  ALCSeq *pAVar1;
  ALCSeqMarker *pAVar2;
  
  seq->validTracks = m->validTracks;
  i = 0;
  seq->lastTicks = m->lastTicks;
  seq->lastDeltaTicks = m->lastDeltaTicks;
  pAVar2 = m;
  pAVar1 = seq;
  do {
    i += 2;
    seq->curLoc[0] = m->curLoc[0];
    seq->curBUPtr[0] = m->curBUPtr[0];
    pAVar1->curBULen[0] = pAVar2->curBULen[0];
    pAVar1->lastStatus[0] = pAVar2->lastStatus[0];
    seq->evtDeltaTicks[0] = m->evtDeltaTicks[0];
    seq->curLoc[1] = m->curLoc[1];
    seq->curBUPtr[1] = m->curBUPtr[1];
    pAVar1->curBULen[1] = pAVar2->curBULen[1];
    pAVar1->lastStatus[1] = pAVar2->lastStatus[1];
    seq->evtDeltaTicks[1] = m->evtDeltaTicks[1];
    m = (ALCSeqMarker *)&m->lastDeltaTicks;
    pAVar2 = (ALCSeqMarker *)((int)&pAVar2->validTracks + 2);
    seq = (ALCSeq *)&seq->qnpt;
    pAVar1 = (ALCSeq *)((int)&pAVar1->base + 2);
  } while (i != 0x10);
  return;
}



u8 __getTrackByte(ALCSeq *seq,u32 track)

{
  byte bVar1;
  byte bVar2;
  undefined uVar3;
  ALCMidiHdr *pAVar4;
  int iVar5;
  u8 uVar6;
  ALCMidiHdr **ppAVar7;
  ALCMidiHdr *pAVar8;
  ALCMidiHdr *pAVar9;
  
  iVar5 = (int)&seq->base + track;
  ppAVar7 = &seq->base + track;
  if (*(char *)(iVar5 + 0x98) == '\0') {
    pAVar4 = ppAVar7[6];
    uVar6 = *(u8 *)pAVar4->trackOffset;
    pAVar8 = (ALCMidiHdr *)((int)pAVar4->trackOffset + 1);
    ppAVar7[6] = pAVar8;
    if (uVar6 == -2) {
      bVar1 = *(byte *)pAVar8->trackOffset;
      pAVar9 = (ALCMidiHdr *)((int)pAVar4->trackOffset + 2);
      ppAVar7[6] = pAVar9;
      pAVar8 = (ALCMidiHdr *)((int)pAVar4->trackOffset + 3);
      if (bVar1 != 0xfe) {
        bVar2 = *(byte *)pAVar9->trackOffset;
        ppAVar7[6] = pAVar8;
        uVar3 = *(undefined *)pAVar8->trackOffset;
        ppAVar7[6] = (ALCMidiHdr *)(pAVar4->trackOffset + 1);
        ppAVar7[0x16] =
             (ALCMidiHdr *)
             ((int)(ALCMidiHdr *)(pAVar4->trackOffset + 1) +
             (-4 - ((uint)bVar1 * 0x100 + (uint)bVar2)));
        *(undefined *)(iVar5 + 0x98) = uVar3;
        uVar6 = *(u8 *)ppAVar7[0x16]->trackOffset;
        ppAVar7[0x16] = (ALCMidiHdr *)((int)ppAVar7[0x16]->trackOffset + 1);
        *(char *)(iVar5 + 0x98) = *(char *)(iVar5 + 0x98) + -1;
      }
    }
    return uVar6;
  }
  pAVar4 = (&seq->base + track)[0x16];
  uVar6 = *(u8 *)pAVar4->trackOffset;
  (&seq->base + track)[0x16] = (ALCMidiHdr *)((int)pAVar4->trackOffset + 1);
  *(char *)(iVar5 + 0x98) = *(char *)(iVar5 + 0x98) + -1;
  return uVar6;
}



u32 __readVarLen(ALCSeq *seq,u32 track)

{
  u8 uVar1;
  u8 c;
  ulonglong uVar2;
  int iVar3;
  u32 value;
  undefined8 _seq;
  undefined8 in_t3;
  
  uVar1 = __getTrackByte((ALCSeq *)_seq,(u32)in_t3);
  value = SEXT14((char)uVar1);
  if (((longlong)(char)uVar1 & 0x80U) != 0) {
    uVar2 = (longlong)(char)uVar1 & 0x7f;
    do {
      iVar3 = (int)uVar2;
      c = __getTrackByte((ALCSeq *)_seq,(u32)in_t3);
      value = iVar3 * 0x80 + ((int)(char)c & 0x7fU);
      uVar2 = SEXT48((int)value);
    } while (((longlong)(char)c & 0x80U) != 0);
  }
  return value;
}



void proc_7001249C(void)

{
  return;
}



u32 __alCSeqGetTrackEvent(ALCSeq *seq,u32 track,ALEvent *event)

{
  u32 uVar1;
  u8 uVar3;
  u8 uVar4;
  byte *pbVar2;
  ALCSeq *extraout_a0_lo;
  ALCSeq *extraout_a0_lo_00;
  ALCSeq *extraout_a0_lo_01;
  ALCSeq *extraout_a0_lo_02;
  ALCSeq *extraout_a0_lo_03;
  ALCSeq *seq_00;
  ALCSeq *extraout_a0_lo_04;
  ALCSeq *seq_01;
  u32 extraout_a1_lo;
  u32 extraout_a1_lo_00;
  u32 extraout_a1_lo_01;
  u32 extraout_a1_lo_02;
  u32 track_00;
  u32 extraout_a1_lo_03;
  u32 track_01;
  u32 extraout_a1_lo_04;
  ALCMidiHdr *pAVar5;
  ALCMidiHdr *pAVar6;
  ALCMidiHdr **ppAVar7;
  u32 uVar8;
  uint uVar9;
  byte bVar10;
  u32 uStack12;
  
  track_00 = seq->lastDeltaTicks;
  uVar9 = 0;
  uVar8 = seq->validTracks;
  pAVar5 = (ALCMidiHdr *)0xffffffff;
  while( true ) {
    pAVar6 = pAVar5;
    uVar1 = uStack12;
    if ((uVar8 >> (uVar9 & 0x1f) & 1) != 0) {
      ppAVar7 = &seq->base + uVar9;
      if (seq->deltaFlag == 0) {
        pAVar6 = ppAVar7[0x2e];
      }
      else {
        ppAVar7[0x2e] = (ALCMidiHdr *)((int)ppAVar7[0x2e] - track_00);
        pAVar6 = ppAVar7[0x2e];
      }
      uVar1 = uVar9;
      if (pAVar5 <= pAVar6) {
        pAVar6 = pAVar5;
        uVar1 = uStack12;
      }
    }
    uStack12 = uVar1;
    uVar9 += 1;
    if (uVar9 == 0x10) break;
    uVar8 = seq->validTracks;
    pAVar5 = pAVar6;
  }
  uVar3 = __getTrackByte(seq,uStack12);
  if ((longlong)(char)uVar3 == 0xff) {
    uVar4 = __getTrackByte(seq,uStack12);
    pbVar2 = (byte *)(int)(char)uVar4;
    if (uVar4 == 'Q') {
      *(undefined2 *)track = 3;
      *(u8 *)(track + 8) = uVar3;
      *(undefined *)(track + 9) = 0x51;
      uVar3 = __getTrackByte(seq,uStack12);
      *(u8 *)(track + 0xb) = uVar3;
      uVar3 = __getTrackByte(seq,uStack12);
      *(u8 *)(track + 0xc) = uVar3;
      uVar3 = __getTrackByte(seq,uStack12);
      pbVar2 = (byte *)(int)(char)uVar3;
      *(u8 *)(track + 0xd) = uVar3;
      seq->lastStatus[uStack12] = '\0';
      seq_01 = extraout_a0_lo_01;
      track_00 = extraout_a1_lo_01;
    }
    else {
      if (uVar4 == '/') {
        uVar9 = seq->validTracks ^ 1 << (uStack12 & 0x1f);
        seq->validTracks = uVar9;
        if (uVar9 == 0) {
          *(undefined2 *)track = 4;
          seq_01 = extraout_a0_lo_00;
          track_00 = extraout_a1_lo_00;
        }
        else {
          *(undefined2 *)track = 0x12;
          seq_01 = extraout_a0_lo_00;
          track_00 = extraout_a1_lo_00;
        }
      }
      else {
        if (uVar4 == '.') {
          __getTrackByte(seq,uStack12);
          uVar3 = __getTrackByte(seq,uStack12);
          pbVar2 = (byte *)(int)(char)uVar3;
          seq->lastStatus[uStack12] = '\0';
          *(undefined2 *)track = 0x13;
          seq_01 = extraout_a0_lo_02;
          track_00 = extraout_a1_lo_02;
        }
        else {
          seq_01 = seq;
          track_00 = extraout_a1_lo_00;
          if (uVar4 == '-') {
            ppAVar7 = &seq->base + uStack12;
            pAVar5 = ppAVar7[6];
            bVar10 = *(byte *)((int)pAVar5->trackOffset + 1);
            seq_01 = (ALCSeq *)(uint)bVar10;
            pbVar2 = (byte *)((int)pAVar5->trackOffset + 1);
            track_00 = (u32)*(byte *)pAVar5->trackOffset;
            if (bVar10 == 0) {
              *pbVar2 = *(byte *)pAVar5->trackOffset;
              ppAVar7[6] = (ALCMidiHdr *)((int)pAVar5->trackOffset + 6);
            }
            else {
              if (bVar10 != 0xff) {
                *pbVar2 = bVar10 - 1;
              }
              pbVar2 = (byte *)((int)pAVar5->trackOffset + 6);
              ppAVar7[6] = (ALCMidiHdr *)
                           (pbVar2 + -((uint)*(byte *)((int)pAVar5->trackOffset + 2) * 0x1000000 +
                                       (uint)*(byte *)((int)pAVar5->trackOffset + 3) * 0x10000 +
                                       (uint)*(byte *)(pAVar5->trackOffset + 1) * 0x100 +
                                      (uint)*(byte *)((int)pAVar5->trackOffset + 5)));
            }
            seq->lastStatus[uStack12] = '\0';
            *(undefined2 *)track = 0x14;
          }
        }
      }
    }
  }
  else {
    *(undefined2 *)track = 1;
    if (((longlong)(char)uVar3 & 0x80U) == 0) {
      uVar4 = seq->lastStatus[uStack12];
      *(u8 *)(track + 9) = uVar3;
      *(u8 *)(track + 8) = uVar4;
      track_00 = extraout_a1_lo;
      seq_01 = extraout_a0_lo;
    }
    else {
      *(u8 *)(track + 8) = uVar3;
      uVar4 = __getTrackByte(seq,uStack12);
      *(u8 *)(track + 9) = uVar4;
      seq->lastStatus[uStack12] = uVar3;
      track_00 = extraout_a1_lo_03;
      seq_01 = extraout_a0_lo_03;
    }
    pbVar2 = (byte *)(uint)*(byte *)(track + 8);
    bVar10 = *(byte *)(track + 8) & 0xf0;
    if ((bVar10 == 0xc0) || (seq_01 = seq, bVar10 == 0xd0)) {
      *(undefined *)(track + 10) = 0;
    }
    else {
      uVar3 = __getTrackByte(seq,uStack12);
      pbVar2 = (byte *)(int)(char)uVar3;
      *(u8 *)(track + 10) = uVar3;
      seq_01 = seq_00;
      track_00 = track_01;
      if ((*(byte *)(track + 8) & 0xf0) == 0x90) {
        pbVar2 = (byte *)__readVarLen(seq_00,track_01);
        *(byte **)(track + 0xc) = pbVar2;
        seq_01 = extraout_a0_lo_04;
        track_00 = extraout_a1_lo_04;
      }
    }
  }
  *(ALCMidiHdr **)(track + 4) = pAVar6;
  *(ALCMidiHdr **)&seq->lastDeltaTicks = pAVar6;
  seq->lastTicks = (int)pAVar6->trackOffset + seq->lastTicks;
  if (*(short *)track != 0x12) {
    ppAVar7 = &seq->base + uStack12;
    pbVar2 = (byte *)__readVarLen(seq_01,track_00);
    ppAVar7[0x2e] = (ALCMidiHdr *)(pbVar2 + (int)ppAVar7[0x2e]);
  }
  seq->deltaFlag = 1;
  return (u32)pbVar2;
}



void alCSeqNew(ALCSeq *seq,u8 *ptr)

{
  int iVar1;
  int iVar2;
  u32 uVar3;
  longlong lVar4;
  longlong extraout_a0;
  longlong lVar5;
  longlong extraout_a1;
  int iVar7;
  longlong lVar6;
  uint uVar8;
  longlong lVar9;
  int iVar10;
  uint in_register_00001020;
  float fVar11;
  
  lVar5 = (longlong)(int)ptr;
  lVar4 = (longlong)(int)seq;
  *(u8 **)&seq->base = ptr;
  seq->validTracks = 0;
  seq->lastDeltaTicks = 0;
  seq->lastTicks = 0;
  seq->deltaFlag = 1;
  iVar10 = 0;
  uVar8 = 0;
  lVar6 = lVar4;
  lVar9 = lVar4;
  do {
    iVar7 = (int)lVar6;
    iVar2 = (int)lVar9;
    *(undefined *)(iVar2 + 0xa8) = 0;
    *(undefined4 *)(iVar7 + 0x58) = 0;
    *(undefined *)(iVar2 + 0x98) = 0;
    iVar1 = *(int *)((int)seq->base->trackOffset + iVar10);
    if (iVar1 == 0) {
      *(undefined4 *)(iVar7 + 0x18) = 0;
    }
    else {
      seq->validTracks = seq->validTracks | 1 << (uVar8 & 0x1f);
      *(u8 **)(iVar7 + 0x18) = ptr + iVar1;
      uVar3 = __readVarLen((ALCSeq *)lVar4,(u32)lVar5);
      *(u32 *)(iVar7 + 0xb8) = uVar3;
      lVar4 = extraout_a0;
      lVar5 = extraout_a1;
    }
    uVar8 += 1;
    lVar9 = (longlong)(iVar2 + 1);
    iVar10 += 4;
    lVar6 = (longlong)(iVar7 + 4);
  } while (uVar8 != 0x10);
  uVar3 = seq->base->division;
  fVar11 = (float)uVar3;
  if ((int)uVar3 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  *(float *)&seq->qnpt = (float)((double)((ulonglong)in_register_00001020 << 0x20) / (double)fVar11)
  ;
  return;
}



void alCSeqNewMarker(ALCSeq *seq,ALCSeqMarker *m,u32 ticks)

{
  ALCSeqMarker *pAVar1;
  undefined *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  ALCSeqMarker *pAVar5;
  undefined8 extraout_a2;
  undefined8 uVar6;
  undefined8 extraout_a2_00;
  undefined auStack264 [4];
  u32 uStack260;
  uint uStack252;
  u32 uStack248;
  short sStack16;
  
  alCSeqNew((ALCSeq *)auStack264,(u8 *)seq->base);
  uVar6 = extraout_a2;
  do {
    m->validTracks = uStack260;
    m->lastTicks = uStack252;
    m->lastDeltaTicks = uStack248;
    puVar2 = auStack264;
    puVar3 = auStack264;
    pAVar1 = m;
    pAVar5 = m;
    do {
      puVar4 = puVar3 + 4;
      pAVar1->curLoc[0] = *(u8 **)(puVar2 + 0x18);
      pAVar1->curBUPtr[0] = *(u8 **)(puVar2 + 0x58);
      pAVar5->curBULen[0] = puVar3[0x98];
      pAVar5->lastStatus[0] = puVar3[0xa8];
      pAVar1->evtDeltaTicks[0] = *(u32 *)(puVar2 + 0xb8);
      ((ALCSeqMarker *)(pAVar1->curLoc + 1))->validTracks = *(u32 *)(puVar2 + 0x1c);
      pAVar1->curBUPtr[1] = *(u8 **)(puVar2 + 0x5c);
      pAVar5->curBULen[1] = puVar3[0x99];
      pAVar5->lastStatus[1] = puVar3[0xa9];
      pAVar1->evtDeltaTicks[1] = *(u32 *)(puVar2 + 0xbc);
      pAVar1->curLoc[2] = *(u8 **)(puVar2 + 0x20);
      pAVar1->curBUPtr[2] = *(u8 **)(puVar2 + 0x60);
      pAVar5->curBULen[2] = puVar3[0x9a];
      pAVar5->lastStatus[2] = puVar3[0xaa];
      pAVar1->evtDeltaTicks[2] = *(u32 *)(puVar2 + 0xc0);
      pAVar1->curLoc[3] = *(u8 **)(puVar2 + 0x24);
      pAVar1->curBUPtr[3] = *(u8 **)(puVar2 + 100);
      pAVar5->curBULen[3] = puVar3[0x9b];
      pAVar5->lastStatus[3] = puVar3[0xab];
      pAVar1->evtDeltaTicks[3] = *(u32 *)(puVar2 + 0xc4);
      puVar2 = puVar2 + 0x10;
      puVar3 = puVar4;
      pAVar1 = (ALCSeqMarker *)(pAVar1->curLoc + 1);
      pAVar5 = (ALCSeqMarker *)&pAVar5->lastTicks;
    } while (puVar4 != auStack264 + 0x10);
    __alCSeqGetTrackEvent((ALCSeq *)auStack264,(u32)(auStack264 + 0xf8),(ALEvent *)uVar6);
  } while ((sStack16 != 4) && (uVar6 = extraout_a2_00, uStack252 < ticks));
  return;
}



s32 alCSeqGetTicks(ALCSeq *seq)

{
  return (s32)seq->lastTicks;
}



u32 alCSeqSecToTicks(ALCSeq *seq,f32 sec,u32 tempo)

{
  u32 uVar1;
  double dVar2;
  undefined4 in_a2_hi;
  int in_a2_lo;
  double dVar3;
  double dVar4;
  uint in_register_00001090;
  
  uVar1 = seq->base->division;
  dVar4 = (double)uVar1;
  if ((int)uVar1 < 0) {
    dVar4 = dVar4 + (double)((ulonglong)in_register_00001090 << 0x20);
  }
  dVar3 = (double)in_a2_lo;
  if (CONCAT44(in_a2_hi,in_a2_lo) < 0) {
    dVar3 = dVar3 + (double)((ulonglong)in_register_00001090 << 0x20);
  }
  dVar3 = ((double)(float)tempo * dbl_800296D0 * dVar4) / dVar3;
  if (false) {
    dVar2 = ROUND(dVar3);
  }
  else {
    dVar2 = FLOOR(dVar3);
  }
  if (false) {
    dVar3 = dVar3 - (double)((ulonglong)dVar4 & 0xffffffff00000000);
    if (false) {
      dVar3 = ROUND(dVar3);
    }
    else {
      dVar3 = FLOOR(dVar3);
    }
    if (true) {
      return (u32)((int)dVar3 | 0x80000000);
    }
  }
  else {
    if (-1 < (int)dVar2) {
      return (u32)(int)dVar2;
    }
  }
  return 0xffffffff;
}



f32 alCSeqTicksToSec(ALCSeq *seq,s32 ticks,u32 tempo)

{
  u32 uVar1;
  float fVar2;
  float fVar3;
  
  fVar2 = (float)tempo;
  if ((int)tempo < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  uVar1 = seq->base->division;
  fVar3 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  return (f32)(float)((double)((float)ticks * fVar2) / ((double)fVar3 * dbl_800296D8));
}



char __alCSeqNextDelta(ALCSeq *seq,s32 *pDeltaTicks)

{
  u32 uVar1;
  ALCMidiHdr *pAVar2;
  ALCMidiHdr *pAVar3;
  uint uVar4;
  ALCMidiHdr **ppAVar5;
  uint uVar6;
  uint uVar7;
  
  pAVar3 = (ALCMidiHdr *)0xffffffff;
  uVar1 = seq->lastDeltaTicks;
  if (seq->validTracks == 0) {
    return '\0';
  }
  uVar4 = 0;
  uVar7 = seq->validTracks;
  do {
    uVar6 = uVar4 + 1;
    if ((uVar7 >> (uVar4 & 0x1f) & 1) == 0) {
      uVar6 = uVar7 >> (uVar6 & 0x1f);
      pAVar2 = pAVar3;
    }
    else {
      ppAVar5 = &seq->base + uVar4;
      if (seq->deltaFlag == 0) {
        pAVar2 = ppAVar5[0x2e];
      }
      else {
        ppAVar5[0x2e] = (ALCMidiHdr *)((int)ppAVar5[0x2e] - uVar1);
        uVar7 = seq->validTracks;
        pAVar2 = ppAVar5[0x2e];
      }
      if (pAVar2 < pAVar3) {
        uVar6 = uVar7 >> (uVar6 & 0x1f);
      }
      else {
        uVar6 = uVar7 >> (uVar6 & 0x1f);
        pAVar2 = pAVar3;
      }
    }
    pAVar3 = pAVar2;
    if ((uVar6 & 1) == 0) {
LAB_70012c48:
      uVar6 = uVar7 >> (uVar4 + 2 & 0x1f);
    }
    else {
      ppAVar5 = &seq->base + uVar4;
      if (seq->deltaFlag == 0) {
        pAVar3 = ppAVar5[0x2f];
      }
      else {
        ppAVar5[0x2f] = (ALCMidiHdr *)((int)ppAVar5[0x2f] - uVar1);
        uVar7 = seq->validTracks;
        pAVar3 = ppAVar5[0x2f];
      }
      if (pAVar3 < pAVar2) goto LAB_70012c48;
      uVar6 = uVar7 >> (uVar4 + 2 & 0x1f);
      pAVar3 = pAVar2;
    }
    pAVar2 = pAVar3;
    if ((uVar6 & 1) == 0) {
LAB_70012c90:
      uVar7 >>= uVar4 + 3 & 0x1f;
    }
    else {
      ppAVar5 = &seq->base + uVar4;
      if (seq->deltaFlag == 0) {
        pAVar2 = ppAVar5[0x30];
      }
      else {
        ppAVar5[0x30] = (ALCMidiHdr *)((int)ppAVar5[0x30] - uVar1);
        uVar7 = seq->validTracks;
        pAVar2 = ppAVar5[0x30];
      }
      if (pAVar2 < pAVar3) goto LAB_70012c90;
      uVar7 >>= uVar4 + 3 & 0x1f;
      pAVar2 = pAVar3;
    }
    pAVar3 = pAVar2;
    if ((uVar7 & 1) != 0) {
      ppAVar5 = &seq->base + uVar4;
      if (seq->deltaFlag == 0) {
        pAVar3 = ppAVar5[0x31];
      }
      else {
        ppAVar5[0x31] = (ALCMidiHdr *)((int)ppAVar5[0x31] - uVar1);
        pAVar3 = ppAVar5[0x31];
      }
      if (pAVar2 <= pAVar3) {
        pAVar3 = pAVar2;
      }
    }
    uVar4 += 4;
    if (uVar4 == 0x10) {
      seq->deltaFlag = 0;
      *(ALCMidiHdr **)pDeltaTicks = pAVar3;
      return '\x01';
    }
    uVar7 = seq->validTracks;
  } while( true );
}



void alCSPSetSeq(ALCSPlayer *seqp,ALCSeq *seq)

{
  s16 sStack16;
  ALCSeq *pAStack12;
  
  sStack16 = 0xd;
  pAStack12 = seq;
  alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,(ALEvent *)&sStack16,0);
  return;
}



void alCSPPlay(ALCSPlayer *seqp)

{
  ALEvent AStack16;
  
  AStack16.type = 0xf;
  alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,&AStack16,0);
  return;
}



void alSeqpStop(ALSeqPlayer *seqp)

{
  ALEvent AStack16;
  
  AStack16.type = 0x11;
  alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,&AStack16,0);
  return;
}



void ultra_proc_70012DA0(ALCSPlayer *param_1,undefined2 param_2)

{
  s16 sStack16;
  undefined2 uStack12;
  
  sStack16 = 10;
  uStack12 = param_2;
  alEvtqPostEvent((ALEventQueue *)&(param_1->evtq).freeList.prev,(ALEvent *)&sStack16,0);
  return;
}



void alEvtqFlushType(ALEventQueue *evtq,s16 type)

{
  ALLink_s *pAVar1;
  ALLink *a;
  OSIntMask OVar2;
  
  OVar2 = osSetIntMask(1);
  pAVar1 = (ALLink_s *)(evtq->allocList).next;
  while (a = (ALLink *)pAVar1, a != NULL) {
    pAVar1 = a->next;
    if ((longlong)(int)type == (longlong)*(short *)&a[1].prev) {
      if (pAVar1 != NULL) {
        pAVar1[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar1[1].next)->next);
      }
      alUnlink(a);
      alLink(a,(ALLink *)evtq);
    }
  }
  osSetIntMask(OVar2);
  return;
}



void alEvtqFlush(ALEventQueue *evtq)

{
  OSIntMask mask;
  ALLink *thisNode;
  ALLink_s *nextNode;
  
  mask = osSetIntMask(1);
  thisNode = (ALLink *)(evtq->allocList).next;
  while (thisNode != NULL) {
    nextNode = thisNode->next;
    alUnlink(thisNode);
    alLink(thisNode,(ALLink *)evtq);
    thisNode = (ALLink *)nextNode;
  }
  osSetIntMask(mask);
  return;
}



void alEvtqPostEvent(ALEventQueue *evtq,ALEvent *evt,ALMicroTime delta)

{
  ALLink_s *pAVar1;
  OSIntMask mask;
  ALLink *b;
  int postAtEnd;
  ALLink *item;
  
  postAtEnd = 0;
  mask = osSetIntMask(1);
  item = (ALLink *)(evtq->freeList).next;
  if (item == NULL) {
    osSetIntMask(mask);
  }
  else {
    alUnlink(item);
    alCopy(evt,&item[1].prev,0x10);
    if (delta == 0x7fffffff) {
      postAtEnd = -1;
    }
    b = &evtq->allocList;
    if (evtq != (ALEventQueue *)0xfffffff8) {
      do {
        pAVar1 = b->next;
        if (pAVar1 == NULL) {
          if (postAtEnd == 0) {
            *(ALMicroTime *)&item[1].next = delta;
          }
          else {
            item[1].next = NULL;
          }
          alLink(item,b);
          break;
        }
        if (delta < (int)pAVar1[1].next) {
          *(ALMicroTime *)&item[1].next = delta;
          pAVar1[1].next = (ALLink_s *)((int)pAVar1[1].next - delta);
          alLink(item,b);
          break;
        }
        delta -= (int)pAVar1[1].next;
        b = (ALLink *)pAVar1;
      } while (pAVar1 != NULL);
    }
    osSetIntMask(mask);
  }
  return;
}



ALMicroTime alEvtqNextEvent(ALEventQueue *evtq,ALEvent *evt)

{
  ALLink *a;
  OSIntMask OVar1;
  ALLink_s *pAVar2;
  
  OVar1 = osSetIntMask(1);
  a = (ALLink *)(evtq->allocList).next;
  pAVar2 = NULL;
  if (a == NULL) {
    evt->type = -1;
  }
  else {
    alUnlink(a);
    alCopy(&a[1].prev,evt,0x10);
    alLink(a,(ALLink *)evtq);
    pAVar2 = a[1].next;
  }
  osSetIntMask(OVar1);
  return (ALMicroTime)pAVar2;
}



void alEvtqNew(ALEventQueue *evtq,ALEventListItem *items,s32 itemCount)

{
  int iVar1;
  
  evtq->eventCount = 0;
  (evtq->allocList).next = NULL;
  (evtq->allocList).prev = NULL;
  (evtq->freeList).next = NULL;
  (evtq->freeList).prev = NULL;
  iVar1 = 0;
  if (0 < itemCount) {
    do {
      alLink((ALLink *)items,(ALLink *)evtq);
      iVar1 += 1;
      items = items + 1;
    } while (iVar1 != itemCount);
  }
  return;
}



void alSynAddPlayer(ALSynth *drvr,ALPlayer *client)

{
  OSIntMask OVar1;
  
  OVar1 = osSetIntMask(1);
  client->samplesLeft = drvr->curSamples;
  *(ALPlayer **)&client->next = drvr->head;
  drvr->head = client;
  osSetIntMask(OVar1);
  return;
}



s32 _allocatePVoice(ALSynth *drvr,PVoice **pvoice,s16 priority)

{
  ALLink *a;
  ALLink_s *pAVar1;
  s32 stolen;
  longlong lVar2;
  PVoice *pv;
  
  a = (ALLink *)(drvr->pLameList).next;
  lVar2 = (longlong)(int)priority;
  stolen = 0;
  if (a == NULL) {
    a = (ALLink *)(drvr->pFreeList).next;
    if (a == NULL) {
      pv = (PVoice *)(drvr->pAllocList).next;
      if ((ALLink_s *)pv != NULL) {
        pAVar1 = ((ALLink_s *)pv)[1].next;
        while( true ) {
          if (lVar2 < (longlong)*(short *)((int)&pAVar1[2].prev + 2)) {
            pv = (PVoice *)((ALLink_s *)pv)->next;
          }
          else {
            if (((ALLink_s *)pv)[0x1b].next == NULL) {
              *pvoice = pv;
              stolen = 1;
              lVar2 = (longlong)*(short *)((int)&((ALLink_s *)pv)[1].next[2].prev + 2);
              pv = (PVoice *)((ALLink_s *)pv)->next;
            }
            else {
              pv = (PVoice *)((ALLink_s *)pv)->next;
            }
          }
          if (pv == NULL) break;
          pAVar1 = *(ALLink_s **)(pv + 8);
        }
      }
    }
    else {
      *(ALLink **)pvoice = a;
      alUnlink(a);
      alLink(a,&drvr->pAllocList);
      stolen = 0;
    }
  }
  else {
    *(ALLink **)pvoice = a;
    alUnlink(a);
    alLink(a,&drvr->pAllocList);
    stolen = 0;
  }
  return stolen;
}



s32 alSynAllocVoice(ALSynth *drvr,ALVoice *voice,ALVoiceConfig *vc)

{
  byte bVar1;
  s16 sVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  s32 sVar6;
  ALParam AVar7;
  PVoice_s *pPStack4;
  
  pPStack4 = NULL;
  voice->priority = vc->priority;
  bVar1 = vc->unityPitch;
  voice->table = NULL;
  voice->unityPitch = (ushort)bVar1;
  sVar2 = vc->fxBus;
  voice->state = 0;
  voice->pvoice = NULL;
  voice->fxBus = sVar2;
  sVar6 = _allocatePVoice(drvr,(PVoice **)&pPStack4,vc->priority);
  if (pPStack4 != NULL) {
    iVar3 = *(int *)(pPStack4 + 0xc);
    if (sVar6 == 0) {
      *(undefined4 *)(pPStack4 + 0xd8) = 0;
    }
    else {
      *(undefined4 *)(pPStack4 + 0xd8) = 0x200;
      *(undefined4 *)(*(int *)(pPStack4 + 8) + 8) = 0;
      AVar7 = ___allocParam();
      sVar6 = drvr->paramSamples;
      *(undefined2 *)((int)(char)AVar7 + 8) = 0xb;
      *(undefined4 *)((int)(char)AVar7 + 0xc) = 0;
      *(s32 *)((int)(char)AVar7 + 4) = sVar6;
      *(int *)((int)(char)AVar7 + 0x10) = *(int *)(pPStack4 + 0xd8) + -0x40;
      (**(code **)(iVar3 + 8))(iVar3,3,AVar7);
      AVar7 = ___allocParam();
      if (AVar7 != (ALParam)0x0) {
        iVar4 = drvr->paramSamples;
        iVar5 = *(int *)(pPStack4 + 0xd8);
        *(undefined2 *)((int)(char)AVar7 + 8) = 0xf;
        *(undefined4 *)(int)(char)AVar7 = 0;
        *(int *)((int)(char)AVar7 + 4) = iVar4 + iVar5;
        (**(code **)(iVar3 + 8))(iVar3,3,AVar7);
      }
    }
    *(ALVoice **)(pPStack4 + 8) = voice;
    voice->pvoice = pPStack4;
  }
  return (s32)(uint)(pPStack4 != NULL);
}



void alSynSetVol(ALSynth *synth,ALVoice *v,s16 volume,ALMicroTime t)

{
  int iVar1;
  ALParam AVar3;
  int iVar2;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar2 = synth->paramSamples;
    iVar1 = *(int *)(v->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 0xb;
    *(int *)((int)(char)AVar3 + 4) = iVar2 + iVar1;
    *(int *)((int)(char)AVar3 + 0xc) = (int)volume;
    iVar2 = _timeToSamples(synth,t);
    ((undefined4 *)(int)(char)AVar3)[4] = iVar2;
    *(undefined4 *)(int)(char)AVar3 = 0;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3);
  }
  return;
}



void alSynStartVoice(ALSynth *synth,ALVoice *voice,ALWaveTable *table)

{
  int iVar1;
  int iVar2;
  ALParam AVar3;
  
  if ((voice->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar1 = synth->paramSamples;
    iVar2 = *(int *)(voice->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 0xe;
    *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
    *(undefined4 *)(int)(char)AVar3 = 0;
    *(ALWaveTable **)((int)(char)AVar3 + 0xc) = table;
    *(s16 *)((int)(char)AVar3 + 10) = voice->unityPitch;
    (**(code **)(*(int *)(voice->pvoice + 0xc) + 8))(*(int *)(voice->pvoice + 0xc),3,AVar3);
  }
  return;
}



void alSynSetPan(ALSynth *synth,ALVoice *v,u8 pan)

{
  int iVar1;
  int iVar2;
  ALParam AVar3;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar1 = synth->paramSamples;
    iVar2 = *(int *)(v->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 0xc;
    *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
    *(undefined4 *)(int)(char)AVar3 = 0;
    *(uint *)((int)(char)AVar3 + 0xc) = (uint)pan;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3,AVar3);
  }
  return;
}



void alSynSetPitch(ALSynth *synth,ALVoice *v,f32 pitch)

{
  int iVar1;
  int iVar2;
  ALParam AVar3;
  undefined4 in_a2_lo;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar1 = synth->paramSamples;
    iVar2 = *(int *)(v->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 7;
    *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
    *(undefined4 *)(int)(char)AVar3 = 0;
    *(undefined4 *)((int)(char)AVar3 + 0xc) = in_a2_lo;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3,AVar3);
  }
  return;
}



void alSynSetFXMix(ALSynth *synth,ALVoice *v,u8 fxmix)

{
  int iVar1;
  int iVar2;
  ALParam AVar3;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar1 = synth->paramSamples;
    iVar2 = *(int *)(v->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 0x10;
    *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
    if ((longlong)(ulonglong)fxmix < 0) {
      *(int *)((int)(char)AVar3 + 0xc) = -(uint)fxmix;
    }
    else {
      *(uint *)((int)(char)AVar3 + 0xc) = (uint)fxmix;
    }
    *(undefined4 *)(int)(char)AVar3 = 0;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3);
  }
  return;
}



void alSynStopVoice(ALSynth *synth,ALVoice *v)

{
  int iVar1;
  int iVar2;
  ALParam AVar3;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    iVar1 = synth->paramSamples;
    iVar2 = *(int *)(v->pvoice + 0xd8);
    *(undefined2 *)((int)(char)AVar3 + 8) = 0xf;
    *(undefined4 *)(int)(char)AVar3 = 0;
    *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3,AVar3);
  }
  return;
}



void alSynFreeVoice(ALSynth *drvr,ALVoice *voice)

{
  PVoice *pvoice;
  int iVar1;
  int iVar2;
  ALParam AVar3;
  
  pvoice = (PVoice *)voice->pvoice;
  if (pvoice != NULL) {
    if (*(int *)((pvoice->envmixer).state + 9) == 0) {
      _freePVoice(drvr,pvoice);
    }
    else {
      AVar3 = ___allocParam();
      if (AVar3 == (ALParam)0x0) {
        return;
      }
      iVar1 = drvr->paramSamples;
      iVar2 = *(int *)(voice->pvoice + 0xd8);
      *(undefined2 *)((int)(char)AVar3 + 8) = 0;
      *(int *)((int)(char)AVar3 + 4) = iVar1 + iVar2;
      *(PVoice_s **)((int)(char)AVar3 + 0xc) = voice->pvoice;
      (**(code **)(*(int *)(voice->pvoice + 0xc) + 8))(*(int *)(voice->pvoice + 0xc),3,AVar3);
    }
    voice->pvoice = NULL;
  }
  return;
}



// WARNING: Instruction at (ram,0x700137e8) overlaps instruction at (ram,0x700137e4)
// 

f32 alCents2Ratio(s32 cents)

{
  float fVar1;
  uint uVar2;
  float fVar3;
  
  fVar3 = 1.00000000;
  fVar1 = flt_800296E0;
  if (cents < 0) {
    cents = -cents;
    fVar1 = flt_800296E4;
  }
  while (cents != 0) {
    uVar2 = cents & 1;
    cents >>= 1;
    if (uVar2 != 0) {
      fVar3 = fVar3 * fVar1;
    }
    fVar1 = fVar1 * fVar1;
  }
  return (f32)fVar3;
}



s32 osPiReadIo(u32 devAddr,u32 *data)

{
  s32 ret;
  
  __osPiGetAccess();
  ret = osPiRawReadIo(devAddr,data);
  __osPiRelAccess();
  return ret;
}



void * memcpy(void *__dest,void *__src,size_t __n)

{
  undefined uVar1;
  undefined *puVar2;
  
  puVar2 = (undefined *)__dest;
  if (__n != 0) {
    do {
      uVar1 = *(undefined *)__src;
      __n -= 1;
      __src = (undefined *)__src + 1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    } while (__n != 0);
  }
  return __dest;
}



size_t strlen(char *__s)

{
  char cVar1;
  char *pcVar2;
  
  pcVar2 = __s;
  if (*__s != '\0') {
    cVar1 = __s[1];
    pcVar2 = __s;
    while (pcVar2 = pcVar2 + 1, cVar1 != '\0') {
      cVar1 = pcVar2[2];
      pcVar2 = pcVar2;
    }
  }
  return (size_t)(pcVar2 + -(int)__s);
}



char * strchr(char *__s,int __c)

{
  ulonglong uVar1;
  
  uVar1 = (ulonglong)(byte)*__s;
  if (((longlong)__c & 0xffU) != uVar1) {
    do {
      if (uVar1 == 0) {
        return NULL;
      }
      uVar1 = (ulonglong)(byte)__s[1];
      __s = __s + 1;
    } while (((longlong)__c & 0xffU) != uVar1);
  }
  return __s;
}



void _Putfld(undefined8 param_1,ulonglong param_2,uint **param_3,int param_4)

{
  undefined4 uVar1;
  size_t sVar2;
  int iVar3;
  char *__s;
  size_t sVar4;
  uint *puVar5;
  char code;
  int iVar6;
  uint uVar7;
  size_t **ppsVar8;
  int *piVar9;
  char **ppcVar10;
  _Pft *px;
  undefined4 *puVar11;
  
  param_2 &= 0xff;
  px->n0 = 0;
  px->nz0 = 0;
  px->n1 = 0;
  px->nz1 = 0;
  px->n2 = 0;
  px->nz2 = 0;
  code = (char)param_2;
  if (param_2 < 0x26) {
    if (param_2 == 0x25) {
      *(undefined *)(param_4 + px->n0) = 0x25;
      px->n0 = px->n0 + 1;
      return;
    }
    iVar6 = px->n0;
    goto LAB_70013f3c;
  }
  if (true) {
    switch((int)param_2) {
    case 0x45:
    case 0x47:
    case 0x65:
    case 0x66:
    case 0x67:
      if (px->qual == 'L') {
        puVar5 = *param_3;
        if (((uint)puVar5 & 1) == 0) {
          if (((uint)puVar5 & 2) == 0) {
            puVar5 = (uint *)(((int)puVar5 + 7U & 0xfffffff8) + 8);
            *param_3 = puVar5;
          }
          else {
            *param_3 = (uint *)((int)puVar5 + 10);
            puVar5 = (uint *)((int)puVar5 - 0x1e);
          }
        }
        else {
          *param_3 = (uint *)((int)puVar5 + 7);
          puVar5 = (uint *)((int)puVar5 - 0xf);
        }
        px->v = *(undefined8 *)(puVar5 + -2);
      }
      else {
        puVar5 = *param_3;
        if (((uint)puVar5 & 1) == 0) {
          if (((uint)puVar5 & 2) == 0) {
            puVar5 = (uint *)(((int)puVar5 + 7U & 0xfffffff8) + 8);
            *param_3 = puVar5;
          }
          else {
            *param_3 = (uint *)((int)puVar5 + 10);
            puVar5 = (uint *)((int)puVar5 - 0x1e);
          }
        }
        else {
          *param_3 = (uint *)((int)puVar5 + 7);
          puVar5 = (uint *)((int)puVar5 - 0xf);
        }
        px->v = *(undefined8 *)(puVar5 + -2);
      }
      if ((*(ushort *)&px->v & 0x8000) == 0) {
        if ((px->flags & 2) == 0) {
          if ((px->flags & 1) == 0) {
            iVar6 = px->n0;
            goto LAB_70013da4;
          }
          *(undefined *)(param_4 + px->n0) = 0x20;
          px->n0 = px->n0 + 1;
        }
        else {
          *(undefined *)(param_4 + px->n0) = 0x2b;
          px->n0 = px->n0 + 1;
        }
      }
      else {
        *(undefined *)(param_4 + px->n0) = 0x2d;
        px->n0 = px->n0 + 1;
      }
      iVar6 = px->n0;
LAB_70013da4:
      px->s = (char *)(iVar6 + param_4);
      _Ldtob(px,code);
      return;
    case 0x58:
    case 0x6f:
    case 0x75:
    case 0x78:
      if (px->qual == 'l') {
        piVar9 = (int *)((int)*param_3 + 3U & 0xfffffffc);
        *(int **)param_3 = piVar9 + 1;
        iVar6 = *piVar9;
        *(int *)&px->v = iVar6 >> 0x1f;
        *(int *)((int)&px->v + 4) = iVar6;
      }
      else {
        if (px->qual == 'L') {
          puVar11 = (undefined4 *)((int)*param_3 + 7U & 0xfffffff8);
          *param_3 = puVar11 + 2;
          uVar1 = *puVar11;
          *(undefined4 *)((int)&px->v + 4) = puVar11[1];
          *(undefined4 *)&px->v = uVar1;
        }
        else {
          piVar9 = (int *)((int)*param_3 + 3U & 0xfffffffc);
          *(int **)param_3 = piVar9 + 1;
          iVar6 = *piVar9;
          *(int *)&px->v = iVar6 >> 0x1f;
          *(int *)((int)&px->v + 4) = iVar6;
        }
      }
      if (px->qual == 'h') {
        uVar7 = *(uint *)((int)&px->v + 4);
        *(undefined4 *)&px->v = 0;
        *(uint *)((int)&px->v + 4) = uVar7 & 0xffff;
      }
      else {
        if (px->qual != '\0') {
          uVar7 = px->flags;
          goto LAB_70013be8;
        }
        uVar1 = *(undefined4 *)((int)&px->v + 4);
        *(undefined4 *)&px->v = 0;
        *(undefined4 *)((int)&px->v + 4) = uVar1;
      }
      uVar7 = px->flags;
LAB_70013be8:
      if ((uVar7 & 8) == 0) {
        iVar6 = px->n0;
      }
      else {
        *(undefined *)(param_4 + px->n0) = 0x30;
        px->n0 = px->n0 + 1;
        if ((param_2 == 0x78) || (param_2 == 0x58)) {
          *(char *)(param_4 + px->n0) = code;
          px->n0 = px->n0 + 1;
          iVar6 = px->n0;
        }
        else {
          iVar6 = px->n0;
        }
      }
      px->s = (char *)(iVar6 + param_4);
      _Litob(px,code);
      return;
    case 99:
      puVar11 = (undefined4 *)((int)*param_3 + 3U & 0xfffffffc);
      *param_3 = puVar11 + 1;
      *(undefined *)(param_4 + px->n0) = (char)*puVar11;
      px->n0 = px->n0 + 1;
      return;
    case 100:
    case 0x69:
      if (px->qual == 'l') {
        piVar9 = (int *)((int)*param_3 + 3U & 0xfffffffc);
        *(int **)param_3 = piVar9 + 1;
        iVar6 = *piVar9;
        *(int *)&px->v = iVar6 >> 0x1f;
        *(int *)((int)&px->v + 4) = iVar6;
      }
      else {
        if (px->qual == 'L') {
          puVar11 = (undefined4 *)((int)*param_3 + 7U & 0xfffffff8);
          *param_3 = puVar11 + 2;
          uVar1 = puVar11[1];
          *(undefined4 *)&px->v = *puVar11;
          *(undefined4 *)((int)&px->v + 4) = uVar1;
        }
        else {
          piVar9 = (int *)((int)*param_3 + 3U & 0xfffffffc);
          *(int **)param_3 = piVar9 + 1;
          iVar6 = *piVar9;
          *(int *)&px->v = iVar6 >> 0x1f;
          *(int *)((int)&px->v + 4) = iVar6;
        }
      }
      if (px->qual == 'h') {
        iVar6 = (int)(short)*(undefined4 *)((int)&px->v + 4);
        *(int *)&px->v = iVar6 >> 0x1f;
        *(int *)((int)&px->v + 4) = iVar6;
        iVar6 = *(int *)&px->v;
      }
      else {
        iVar6 = *(int *)&px->v;
      }
      if (iVar6 < 1) {
        if (-1 < iVar6) {
          uVar7 = px->flags;
          goto LAB_70013a9c;
        }
        *(undefined *)(param_4 + px->n0) = 0x2d;
        px->n0 = px->n0 + 1;
      }
      else {
        uVar7 = px->flags;
LAB_70013a9c:
        if ((uVar7 & 2) == 0) {
          if ((uVar7 & 1) == 0) {
            iVar6 = px->n0;
            goto LAB_70013af0;
          }
          *(undefined *)(param_4 + px->n0) = 0x20;
          px->n0 = px->n0 + 1;
        }
        else {
          *(undefined *)(param_4 + px->n0) = 0x2b;
          px->n0 = px->n0 + 1;
        }
      }
      iVar6 = px->n0;
LAB_70013af0:
      px->s = (char *)(iVar6 + param_4);
      _Litob(px,code);
      return;
    case 0x6e:
      code = px->qual;
      if (code == 'h') {
        puVar11 = (undefined4 *)((int)*param_3 + 3U & 0xfffffffc);
        *param_3 = puVar11 + 1;
        *(undefined2 *)*puVar11 = (short)px->nchar;
        return;
      }
      if (code != 'l') {
        if (code != 'L') {
          ppsVar8 = (size_t **)((int)*param_3 + 3U & 0xfffffffc);
          *(size_t ***)param_3 = ppsVar8 + 1;
          **ppsVar8 = px->nchar;
          return;
        }
        puVar11 = (undefined4 *)((int)*param_3 + 3U & 0xfffffffc);
        *param_3 = puVar11 + 1;
        puVar11 = (undefined4 *)*puVar11;
        sVar2 = px->nchar;
        *puVar11 = 0;
        puVar11[1] = sVar2;
        return;
      }
      ppsVar8 = (size_t **)((int)*param_3 + 3U & 0xfffffffc);
      *(size_t ***)param_3 = ppsVar8 + 1;
      **ppsVar8 = px->nchar;
      return;
    case 0x70:
      piVar9 = (int *)((int)*param_3 + 3U & 0xfffffffc);
      *(int **)param_3 = piVar9 + 1;
      iVar6 = *piVar9;
      iVar3 = px->n0;
      *(int *)((int)&px->v + 4) = iVar6;
      *(int *)&px->v = iVar6 >> 0x1f;
      px->s = (char *)(iVar3 + param_4);
      _Litob(px,'x');
      return;
    case 0x73:
      ppcVar10 = (char **)((int)*param_3 + 3U & 0xfffffffc);
      *(char ***)param_3 = ppcVar10 + 1;
      __s = *ppcVar10;
      px->s = __s;
      sVar4 = strlen(__s);
      iVar6 = px->prec;
      px->n1 = sVar4;
      if (iVar6 < 0) {
        return;
      }
      if ((int)sVar4 <= iVar6) {
        return;
      }
      px->n1 = iVar6;
      return;
    }
  }
  iVar6 = px->n0;
LAB_70013f3c:
  *(char *)(param_4 + iVar6) = code;
  px->n0 = px->n0 + 1;
  return;
}



// WARNING: Type propagation algorithm not settling

int _Printf(void *pfn,void *arg,char *fmt,va_list ap)

{
  bool bVar1;
  byte *pbVar2;
  byte *pbVar3;
  char *pcVar4;
  undefined8 extraout_a0;
  byte bVar5;
  uint __c;
  uint uVar6;
  byte *pbVar7;
  int *piVar8;
  uint *puStackX12;
  undefined auStack100 [52];
  int iStack48;
  int iStack44;
  uint uStack40;
  int iStack36;
  uint uStack32;
  int iStack28;
  uint uStack24;
  int iStack20;
  uint uStack16;
  byte *pbStack12;
  uint uStack8;
  byte bStack4;
  
  pbStack12 = NULL;
  puStackX12 = (uint *)ap;
  while( true ) {
    bVar5 = *fmt;
    pbVar3 = (byte *)fmt;
    while ((pbVar2 = pbVar3 + 1, pbVar7 = pbVar2, bVar5 != 0 && (pbVar7 = pbVar3, bVar5 != 0x25))) {
      bVar5 = *pbVar2;
      pbVar3 = pbVar2;
    }
    pbVar3 = pbVar7 + -(int)fmt;
    if (0 < (int)pbVar3) {
      arg = (void *)(*(code *)pfn)(arg,fmt,pbVar3);
      if (arg == NULL) {
        return (int)pbStack12;
      }
      pbStack12 = pbVar3 + (int)pbStack12;
    }
    pbVar7 = pbVar7 + 1;
    if (bVar5 == 0) break;
    uStack8 = 0;
    pcVar4 = strchr(printf_symbols,(uint)*pbVar7);
    while (pcVar4 != NULL) {
      pbVar7 = pbVar7 + 1;
      uStack8 |= (&byteshiftleft_lookup)[(int)(pcVar4 + 0x7ffd690c)];
      pcVar4 = strchr(printf_symbols,(uint)*pbVar7);
    }
    if (*pbVar7 == 0x2a) {
      piVar8 = (int *)((int)puStackX12 + 3U & 0xfffffffc);
      puStackX12 = (uint *)(piVar8 + 1);
      uStack16 = *piVar8;
      pbVar7 = pbVar7 + 1;
      if ((int)uStack16 < 0) {
        uStack16 = -uStack16;
        uStack8 |= 4;
      }
      bVar5 = *pbVar7;
    }
    else {
      uStack16 = 0;
      bVar5 = *pbVar7;
      while ((0x2f < bVar5 && (bVar5 < 0x3a))) {
        if ((int)uStack16 < 999) {
          uStack16 = (uint)bVar5 + uStack16 * 10 + -0x30;
          bVar5 = pbVar7[1];
        }
        else {
          bVar5 = pbVar7[1];
        }
        pbVar7 = pbVar7 + 1;
      }
    }
    if (bVar5 == 0x2e) {
      if (pbVar7[1] == 0x2a) {
        piVar8 = (int *)((int)puStackX12 + 3U & 0xfffffffc);
        puStackX12 = (uint *)(piVar8 + 1);
        iStack20 = *piVar8;
        pbVar7 = pbVar7 + 2;
        __c = (uint)*pbVar7;
      }
      else {
        iStack20 = 0;
        bVar5 = pbVar7[1];
        pbVar7 = pbVar7 + 1;
        while ((__c = (uint)bVar5, 0x2f < bVar5 && (bVar5 < 0x3a))) {
          if (iStack20 < 999) {
            iStack20 = (uint)bVar5 + iStack20 * 10 + -0x30;
            bVar5 = pbVar7[1];
          }
          else {
            bVar5 = pbVar7[1];
          }
          pbVar7 = pbVar7 + 1;
        }
      }
    }
    else {
      iStack20 = -1;
      __c = (uint)*pbVar7;
    }
    pcVar4 = strchr(aHll,__c);
    if (pcVar4 == NULL) {
      bStack4 = 0;
    }
    else {
      bStack4 = *pbVar7;
      pbVar7 = pbVar7 + 1;
    }
    if ((bStack4 == 0x6c) && (*pbVar7 == 0x6c)) {
      bStack4 = 0x4c;
      pbVar7 = pbVar7 + 1;
    }
    _Putfld(extraout_a0,(ulonglong)*pbVar7,&puStackX12,(int)auStack100);
    uStack16 = (((((uStack16 - iStack44) - uStack40) - iStack36) - uStack32) - iStack28) - uStack24;
    bVar1 = 0 < (int)uStack16;
    if (((uStack8 & 4) == 0) && (__c = uStack16, bVar1)) {
      while (bVar1) {
        uVar6 = __c;
        if (0x20 < __c) {
          uVar6 = 0x20;
        }
        if (0 < (int)uVar6) {
          arg = (void *)(*(code *)pfn)(arg,stdout_bg_alpha,uVar6);
          if (arg == NULL) {
            return (int)pbStack12;
          }
          pbStack12 = pbStack12 + uVar6;
        }
        bVar1 = 0 < (int)(__c - uVar6);
        __c = __c - uVar6;
      }
    }
    if (0 < iStack44) {
      arg = (void *)(*(code *)pfn)(arg,auStack100,iStack44);
      if (arg == NULL) {
        return (int)pbStack12;
      }
      pbStack12 = pbStack12 + iStack44;
    }
    bVar1 = 0 < (int)uStack40;
    __c = uStack40;
    if (bVar1) {
      while (bVar1) {
        uVar6 = __c;
        if (0x20 < __c) {
          uVar6 = 0x20;
        }
        if (0 < (int)uVar6) {
          arg = (void *)(*(code *)pfn)(arg,stdout_fg_alpha,uVar6);
          if (arg == NULL) {
            return (int)pbStack12;
          }
          pbStack12 = pbStack12 + uVar6;
        }
        bVar1 = 0 < (int)(__c - uVar6);
        __c = __c - uVar6;
      }
    }
    if (0 < iStack36) {
      arg = (void *)(*(code *)pfn)(arg,iStack48,iStack36);
      if (arg == NULL) {
        return (int)pbStack12;
      }
      pbStack12 = pbStack12 + iStack36;
    }
    bVar1 = 0 < (int)uStack32;
    __c = uStack32;
    if (bVar1) {
      while (bVar1) {
        uVar6 = __c;
        if (0x20 < __c) {
          uVar6 = 0x20;
        }
        if (0 < (int)uVar6) {
          arg = (void *)(*(code *)pfn)(arg,stdout_fg_alpha,uVar6);
          if (arg == NULL) {
            return (int)pbStack12;
          }
          pbStack12 = pbStack12 + uVar6;
        }
        bVar1 = 0 < (int)(__c - uVar6);
        __c = __c - uVar6;
      }
    }
    if (0 < iStack28) {
      arg = (void *)(*(code *)pfn)(arg,iStack48 + iStack36,iStack28);
      if (arg == NULL) {
        return (int)pbStack12;
      }
      pbStack12 = pbStack12 + iStack28;
    }
    bVar1 = 0 < (int)uStack24;
    __c = uStack24;
    if (bVar1) {
      while (bVar1) {
        uVar6 = __c;
        if (0x20 < __c) {
          uVar6 = 0x20;
        }
        if (0 < (int)uVar6) {
          arg = (void *)(*(code *)pfn)(arg,stdout_fg_alpha,uVar6);
          if (arg == NULL) {
            return (int)pbStack12;
          }
          pbStack12 = pbStack12 + uVar6;
        }
        bVar1 = 0 < (int)(__c - uVar6);
        __c = __c - uVar6;
      }
    }
    bVar1 = 0 < (int)uStack16;
    if (((uStack8 & 4) != 0) && (__c = uStack16, bVar1)) {
      while (bVar1) {
        uVar6 = __c;
        if (0x20 < __c) {
          uVar6 = 0x20;
        }
        if (0 < (int)uVar6) {
          arg = (void *)(*(code *)pfn)(arg,stdout_bg_alpha,uVar6);
          if (arg == NULL) {
            return (int)pbStack12;
          }
          pbStack12 = pbStack12 + uVar6;
        }
        bVar1 = 0 < (int)(__c - uVar6);
        __c = __c - uVar6;
      }
    }
    fmt = (char *)(pbVar7 + 1);
  }
  return (int)pbStack12;
}



void osCreatePiManager(OSPri pri,OSMesgQueue *cmdQ,OSMesg *cmdBuf,s32 cmdMsgCnt)

{
  OSPri myPri;
  u32 savedMask;
  int oldPri;
  
  if (__osPiDevMgr.active == 0) {
    osCreateMesgQueue(cmdQ,cmdBuf,cmdMsgCnt);
    osCreateMesgQueue(&piEventQueue,&piEventBuf,1);
    if (__osPiAccessQueueEnabled == 0) {
      __osPiCreateAccessQueue();
    }
    osSetEventMesg(OS_EVENT_PI,&piEventQueue,0x2222);
    oldPri = -1;
    myPri = osGetThreadPri(NULL);
    if (myPri < pri) {
      osSetThreadPri(NULL,pri);
      oldPri = myPri;
    }
    savedMask = __osDisableInt();
    __osPiDevMgr.active = 1;
    __osPiDevMgr.thread = &piThread;
    __osPiDevMgr.evtQueue = &piEventQueue;
    __osPiDevMgr.acsQueue = &__osPiAccessQueue;
    __osPiDevMgr.cmdQueue = cmdQ;
    __osPiDevMgr.dma = osPiRawStartDma;
    __osPiDevMgr.edma = osEPiRawStartDma;
    osCreateThread(&piThread,0,__osDevMgrMain,&__osPiDevMgr,&piEventQueue,pri);
    osStartThread(&piThread);
    __osRestoreInt(savedMask);
    if (oldPri != -1) {
      osSetThreadPri(NULL,oldPri);
    }
  }
  return;
}



s32 osPfsInit(OSMesgQueue *queue,OSPfs *pfs,int channel)

{
  s32 ret;
  
  __osSiGetAccess();
  ret = __osPfsGetStatus(queue,channel);
  __osSiRelAccess();
  if (ret == 0) {
    pfs->queue = queue;
    pfs->channel = channel;
    pfs->status = 0;
    ret = __osGetId(pfs);
    if (ret == 0) {
      ret = osPfsChecker(pfs);
      pfs->status = pfs->status | 1;
    }
  }
  return ret;
}



s32 __osPfsGetStatus(OSMesgQueue *queue,int channel)

{
  s32 sVar1;
  s32 ret;
  OSContStatus data;
  u8 bitpattern;
  OSMesg dummy;
  
  __osPfsRequestData('\0');
  __osSiRawStartDma(1,&__osPfsPifRam);
  osRecvMesg(queue,&dummy,1);
  sVar1 = __osSiRawStartDma(0,&__osPfsPifRam);
  osRecvMesg(queue,&dummy,1);
  __osPfsGetInitData(&bitpattern,&data);
  if ((((&data)[channel].status & 1) == 0) || (((&data)[channel].status & 2) == 0)) {
    if (((&data)[channel].errno == '\0') && (((&data)[channel].status & 1) != 0)) {
      if (((&data)[channel].status & 4) != 0) {
        sVar1 = 4;
      }
    }
    else {
      sVar1 = 1;
    }
  }
  else {
    sVar1 = 2;
  }
  return sVar1;
}



s32 osContInit(OSMesgQueue *mq,u8 *bitpattern,OSContStatus *data)

{
  OSTime OVar1;
  int iVar4;
  longlong lVar2;
  ulonglong uVar3;
  s32 ret;
  undefined4 in_v1_hi;
  uint in_v1_lo;
  uint uVar5;
  OSTime value;
  OSMesgQueue timerMesgQueue;
  OSTimer mytimer;
  OSMesg dummy;
  
  if (__osContinitialized == 0) {
    __osContinitialized = 1;
    OVar1 = osGetTime();
    iVar4 = (int)OVar1;
    uVar5 = in_v1_lo;
    lVar2 = __ll_mul(0,500000);
    uVar3 = __ull_div((longlong)(int)lVar2,(longlong)(int)uVar5);
    if (((ulonglong)(longlong)iVar4 <= uVar3) &&
       (((ulonglong)(longlong)iVar4 < uVar3 ||
        ((ulonglong)(longlong)(int)in_v1_lo < CONCAT44(in_v1_hi,uVar5))))) {
      osCreateMesgQueue(&timerMesgQueue,&dummy,1);
      lVar2 = __ll_mul(0,500000);
      uVar3 = __ull_div((longlong)(int)lVar2,(longlong)(int)uVar5);
      osSetTimer(&mytimer,value,(longlong)(int)(((int)uVar3 - iVar4) - (uint)(uVar5 < in_v1_lo)),
                 (OSMesgQueue *)(uVar5 - in_v1_lo),NULL);
      osRecvMesg(&timerMesgQueue,&dummy,1);
    }
    __osMaxControllers = '\x04';
    __osPackRequestData('\0');
    __osSiRawStartDma(1,&__osContPifRam);
    osRecvMesg(mq,&dummy,1);
    ret = __osSiRawStartDma(0,&__osContPifRam);
    osRecvMesg(mq,&dummy,1);
    __osContGetInitData(bitpattern,data);
    __osContLastCmd = '\0';
    __osSiCreateAccessQueue();
    osCreateMesgQueue(&__osEepromTimerQ,&__osEepromTimerMsg,1);
  }
  else {
    ret = 0;
  }
  return ret;
}



void __osContGetInitData(u8 *pattern,OSContStatus *data)

{
  u32 uVar1;
  byte local_11;
  uint local_10;
  undefined local_8;
  undefined uStack7;
  u8 uStack6;
  OSPifRam *local_4;
  
  local_11 = 0;
  local_4 = &__osContPifRam;
  local_10 = 0;
  if (__osMaxControllers != '\0') {
    do {
      uVar1 = local_4->ramarray[1];
      data->errno = (u8)((int)(local_4->ramarray[0] >> 8 & 0xc0) >> 4);
      if (data->errno == '\0') {
        uStack7 = (undefined)(uVar1 >> 0x10);
        local_8 = (undefined)(uVar1 >> 0x18);
        data->type = CONCAT11(uStack7,local_8);
        uStack6 = (u8)(uVar1 >> 8);
        data->status = uStack6;
        local_11 |= (byte)(1 << (local_10 & 0x1f));
      }
      local_10 += 1;
      local_4 = (OSPifRam *)(local_4->ramarray + 2);
      data = data + 1;
    } while ((longlong)(int)local_10 < (longlong)(ulonglong)__osMaxControllers);
  }
  *pattern = local_11;
  return;
}



void __osPackRequestData(u8 cmd)

{
  int iStack16;
  uint uStack12;
  OSPifRam *pOStack4;
  
  iStack16 = 0;
  do {
    __osContPifRam.ramarray[iStack16] = 0;
    iStack16 += 1;
  } while (iStack16 < 0x10);
  __osContPifRam.pifstatus = 1;
  pOStack4 = &__osContPifRam;
  uStack12 = CONCAT31(0xff0100,cmd) | 0x300;
  iStack16 = 0;
  if (__osMaxControllers != '\0') {
    do {
      pOStack4->ramarray[0] = uStack12;
      pOStack4->ramarray[1] = 0xffffffff;
      iStack16 += 1;
      pOStack4 = (OSPifRam *)(pOStack4->ramarray + 2);
    } while ((longlong)iStack16 < (longlong)(ulonglong)__osMaxControllers);
  }
  *(undefined *)pOStack4->ramarray = 0xfe;
  return;
}



s32 osContStartQuery(OSMesgQueue *mq)

{
  s32 ret;
  
  __osSiGetAccess();
  if (__osContLastCmd != '\0') {
    __osPackRequestData('\0');
    __osSiRawStartDma(1,&__osContPifRam);
    osRecvMesg(mq,NULL,1);
  }
  ret = __osSiRawStartDma(0,&__osContPifRam);
  __osContLastCmd = '\0';
  __osSiRelAccess();
  return ret;
}



void osContGetQuery(OSContStatus *data)

{
  u8 pattern;
  
  __osContGetInitData(&pattern,data);
  return;
}



s32 osContStartReadData(OSMesgQueue *mq)

{
  s32 ret;
  int i;
  
  __osSiGetAccess();
  if (__osContLastCmd != '\x01') {
    __osPackReadData();
    __osSiRawStartDma(1,&__osContPifRam);
    osRecvMesg(mq,NULL,1);
  }
  i = 0;
  do {
    __osContPifRam.ramarray[i] = 0xff;
    i += 1;
  } while (i < 0x10);
  __osContPifRam.pifstatus = 0;
  ret = __osSiRawStartDma(0,&__osContPifRam);
  __osContLastCmd = '\x01';
  __osSiRelAccess();
  return ret;
}



void osContGetReadData(OSContPad *data)

{
  u32 uVar1;
  int local_10;
  u16 local_8;
  s8 sStack6;
  s8 sStack5;
  OSPifRam *local_4;
  
  local_4 = &__osContPifRam;
  local_10 = 0;
  if (__osMaxControllers != '\0') {
    do {
      uVar1 = local_4->ramarray[1];
      data->errno = (u8)((int)(local_4->ramarray[0] >> 8 & 0xc0) >> 4);
      if (data->errno == '\0') {
        local_8 = (u16)(uVar1 >> 0x10);
        data->button = local_8;
        sStack6 = (s8)(uVar1 >> 8);
        data->stick_x = sStack6;
        sStack5 = (s8)uVar1;
        data->stick_y = sStack5;
      }
      local_10 += 1;
      local_4 = (OSPifRam *)(local_4->ramarray + 2);
      data = data + 1;
    } while ((longlong)local_10 < (longlong)(ulonglong)__osMaxControllers);
  }
  return;
}



void __osPackReadData(void)

{
  int i;
  OSPifRam *pOStack4;
  
  pOStack4 = &__osContPifRam;
  i = 0;
  do {
    __osContPifRam.ramarray[i] = 0;
    i += 1;
  } while (i < 0x10);
  __osContPifRam.pifstatus = 1;
  i = 0;
  if (__osMaxControllers != '\0') {
    do {
      pOStack4->ramarray[0] = 0xff010401;
      pOStack4->ramarray[1] = 0xffffffff;
      i += 1;
      pOStack4 = (OSPifRam *)(pOStack4->ramarray + 2);
    } while ((longlong)i < (longlong)(ulonglong)__osMaxControllers);
  }
  *(undefined *)pOStack4->ramarray = 0xfe;
  return;
}



s32 osEepromProbe(OSMesgQueue *mq)

{
  s32 _ret;
  OSContStatus sdata;
  s32 ret;
  
  __osSiGetAccess();
  _ret = __osEepStatus(mq,&sdata);
  if ((_ret == 0) && ((sdata.type & 0x8000) != 0)) {
    ret = 1;
  }
  else {
    ret = 0;
  }
  __osSiRelAccess();
  return ret;
}



s32 osEepromRead(OSMesgQueue *mq,u8 address,u8 *buffer)

{
  s32 ret;
  s32 sVar1;
  OSPifRam *pOVar2;
  u8 *puStackX8;
  undefined4 uStack24;
  undefined4 uStack20;
  OSContStatus sdata;
  OSPifRam *pOStack12;
  int iStack8;
  
  if (address < 0x41) {
    __osSiGetAccess();
    ret = __osEepStatus(mq,&sdata);
    if ((ret == 0) && (sdata.type == 0x8000)) {
      while ((sdata.status & 0x80) != 0) {
        __osEepStatus(mq,&sdata);
      }
      __osPackEepReadData(address);
      __osSiRawStartDma(1,&__osEepPifRam);
      osRecvMesg(mq,NULL,1);
      iStack8 = 0;
      do {
        __osEepPifRam.ramarray[iStack8] = 0xff;
        iStack8 += 1;
      } while (iStack8 < 0x10);
      __osEepPifRam.pifstatus = 0;
      __osSiRawStartDma(0,&__osEepPifRam);
      __osContLastCmd = '\x04';
      osRecvMesg(mq,NULL,1);
      iStack8 = 0;
      pOVar2 = &__osEepPifRam;
      do {
        pOStack12 = pOVar2;
        iStack8 += 1;
        pOVar2 = (OSPifRam *)((int)pOStack12->ramarray + 1);
      } while (iStack8 < 4);
      uStack24 = *(undefined4 *)((int)pOStack12->ramarray + 5);
      uStack20 = *(undefined4 *)((int)pOStack12->ramarray + 9);
      sVar1 = (int)(pOVar2->ramarray[0] >> 0x10 & 0xc0) >> 4;
      if (sVar1 == 0) {
        iStack8 = 0;
        puStackX8 = buffer;
        do {
          *puStackX8 = *(u8 *)((int)&uStack24 + iStack8);
          iStack8 += 1;
          puStackX8 = puStackX8 + 1;
        } while (iStack8 < 8);
      }
      __osSiRelAccess();
    }
    else {
      sVar1 = 8;
    }
  }
  else {
    sVar1 = -1;
  }
  return sVar1;
}



void __osPackEepReadData(u8 address)

{
  OSPifRam *pOVar1;
  int iStack20;
  uint uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  OSPifRam *pOStack4;
  
  iStack20 = 0;
  do {
    __osEepPifRam.ramarray[iStack20] = 0xff;
    iStack20 += 1;
  } while (iStack20 < 0x10);
  __osEepPifRam.pifstatus = 1;
  uStack16 = CONCAT31(0x20800,address) | 0x400;
  iStack20 = 0;
  do {
    *(undefined *)((int)&uStack12 + iStack20) = 0;
    iStack20 += 1;
  } while (iStack20 < 8);
  iStack20 = 0;
  pOVar1 = &__osEepPifRam;
  do {
    pOStack4 = pOVar1;
    *(undefined *)pOStack4->ramarray = 0;
    iStack20 += 1;
    pOVar1 = (OSPifRam *)((int)pOStack4->ramarray + 1);
  } while (iStack20 < 4);
  pOVar1->ramarray[0] = uStack16;
  *(undefined4 *)((int)pOStack4->ramarray + 5) = uStack12;
  *(undefined4 *)((int)pOStack4->ramarray + 9) = uStack8;
  *(undefined *)((int)pOStack4->ramarray + 0xd) = 0xfe;
  return;
}



s32 osEepromWrite(OSMesgQueue *mq,u8 address,u8 *buffer)

{
  s32 ret;
  s32 sVar1;
  OSContStatus sdata;
  OSPifRam *pOStack12;
  int iStack8;
  
  pOStack12 = &__osEepPifRam;
  if (address < 0x41) {
    __osSiGetAccess();
    ret = __osEepStatus(mq,&sdata);
    if ((ret == 0) && (sdata.type == 0x8000)) {
      while ((sdata.status & 0x80) != 0) {
        __osEepStatus(mq,&sdata);
      }
      __osPackEepWriteData(address,buffer);
      __osSiRawStartDma(1,&__osEepPifRam);
      osRecvMesg(mq,NULL,1);
      iStack8 = 0;
      do {
        __osEepPifRam.ramarray[iStack8] = 0xff;
        iStack8 += 1;
      } while (iStack8 < 0x10);
      __osEepPifRam.pifstatus = 0;
      __osSiRawStartDma(0,&__osEepPifRam);
      __osContLastCmd = '\x05';
      osRecvMesg(mq,NULL,1);
      iStack8 = 0;
      do {
        iStack8 += 1;
        pOStack12 = (OSPifRam *)((int)pOStack12->ramarray + 1);
      } while (iStack8 < 4);
      sVar1 = (int)(pOStack12->ramarray[0] >> 0x10 & 0xc0) >> 4;
      __osSiRelAccess();
    }
    else {
      sVar1 = 8;
    }
  }
  else {
    sVar1 = -1;
  }
  return sVar1;
}



void __osPackEepWriteData(u8 address,u8 *buffer)

{
  u8 uVar1;
  OSPifRam *pOVar2;
  int iStack20;
  uint uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  OSPifRam *pOStack4;
  
  iStack20 = 0;
  do {
    __osEepPifRam.ramarray[iStack20] = 0xff;
    iStack20 += 1;
  } while (iStack20 < 0x10);
  __osEepPifRam.pifstatus = 1;
  uStack16 = CONCAT31(0xa0100,address) | 0x500;
  iStack20 = 0;
  do {
    uVar1 = *buffer;
    buffer = buffer + 1;
    *(u8 *)((int)&uStack12 + iStack20) = uVar1;
    iStack20 += 1;
  } while (iStack20 < 8);
  iStack20 = 0;
  pOVar2 = &__osEepPifRam;
  do {
    pOStack4 = pOVar2;
    *(undefined *)pOStack4->ramarray = 0;
    iStack20 += 1;
    pOVar2 = (OSPifRam *)((int)pOStack4->ramarray + 1);
  } while (iStack20 < 4);
  pOVar2->ramarray[0] = uStack16;
  *(undefined4 *)((int)pOStack4->ramarray + 5) = uStack12;
  *(undefined4 *)((int)pOStack4->ramarray + 9) = uStack8;
  *(undefined *)((int)pOStack4->ramarray + 0xd) = 0xfe;
  return;
}



s32 __osEepStatus(OSMesgQueue *mq,OSContStatus *data)

{
  undefined4 uVar1;
  uint uVar2;
  OSPifRam *pOVar3;
  undefined uStack16;
  undefined uStack15;
  u8 uStack14;
  OSPifRam *pOStack12;
  int iStack8;
  
  iStack8 = 0;
  do {
    __osEepPifRam.ramarray[iStack8] = 0;
    iStack8 += 1;
  } while (iStack8 < 0x10);
  __osEepPifRam.pifstatus = 1;
  iStack8 = 0;
  pOVar3 = &__osEepPifRam;
  do {
    pOStack12 = pOVar3;
    *(undefined *)pOStack12->ramarray = 0;
    iStack8 += 1;
    pOVar3 = (OSPifRam *)((int)pOStack12->ramarray + 1);
  } while (iStack8 < 4);
  pOVar3->ramarray[0] = 0xff010300;
  *(undefined4 *)((int)pOStack12->ramarray + 5) = 0xffffffff;
  *(undefined *)((int)pOStack12->ramarray + 9) = 0xfe;
  __osSiRawStartDma(1,&__osEepPifRam);
  osRecvMesg(mq,NULL,1);
  __osContLastCmd = '\x05';
  uVar2 = __osSiRawStartDma(0,&__osEepPifRam);
  osRecvMesg(mq,NULL,1);
  if (uVar2 == 0) {
    iStack8 = 0;
    pOVar3 = &__osEepPifRam;
    do {
      pOStack12 = pOVar3;
      *(undefined *)pOStack12->ramarray = 0;
      iStack8 += 1;
      pOVar3 = (OSPifRam *)((int)pOStack12->ramarray + 1);
    } while (iStack8 < 4);
    uVar1 = *(undefined4 *)((int)pOStack12->ramarray + 5);
    data->errno = (u8)((int)(pOVar3->ramarray[0] >> 8 & 0xc0) >> 4);
    uStack15 = (undefined)((uint)uVar1 >> 0x10);
    uStack16 = (undefined)((uint)uVar1 >> 0x18);
    data->type = CONCAT11(uStack15,uStack16);
    uStack14 = (u8)((uint)uVar1 >> 8);
    data->status = uStack14;
    if (data->errno == 0) {
      uVar2 = 0;
    }
    else {
      uVar2 = (uint)data->errno;
    }
  }
  return (s32)uVar2;
}



s32 osEepromLongRead(OSMesgQueue *mq,u8 address,u8 *buffer,int length)

{
  longlong lVar1;
  ulonglong uVar2;
  OSMesgQueue *mq_00;
  OSTime value;
  u8 *puStackX8;
  int iStackX12;
  s32 ret;
  
  ret = 0;
  if (address < 0x41) {
    puStackX8 = buffer;
    iStackX12 = length;
    if (0 < length) {
      do {
        ret = osEepromRead(mq,address,puStackX8);
        if (ret != 0) {
          return ret;
        }
        iStackX12 += -8;
        address += '\x01';
        puStackX8 = puStackX8 + 8;
        lVar1 = __ll_mul(0,12000);
        uVar2 = __ull_div((longlong)(int)lVar1,(longlong)(int)mq_00);
        osSetTimer(&__osEepromTimer,value,(longlong)(int)uVar2,mq_00,NULL);
        osRecvMesg(&__osEepromTimerQ,NULL,1);
      } while (0 < iStackX12);
    }
  }
  else {
    ret = -1;
  }
  return ret;
}



s32 osEepromLongWrite(OSMesgQueue *mq,u8 address,u8 *buffer,int length)

{
  longlong lVar1;
  ulonglong uVar2;
  OSMesgQueue *mq_00;
  OSTime value;
  u8 *_buffer;
  int _length;
  s32 ret;
  
  ret = 0;
  if (address < 0x41) {
    _buffer = buffer;
    _length = length;
    if (0 < length) {
      do {
        ret = osEepromWrite(mq,address,_buffer);
        if (ret != 0) {
          return ret;
        }
        _length += -8;
        address += '\x01';
        _buffer = _buffer + 8;
        lVar1 = __ll_mul(0,12000);
        uVar2 = __ull_div((longlong)(int)lVar1,(longlong)(int)mq_00);
        osSetTimer(&__osEepromTimer,value,(longlong)(int)uVar2,mq_00,NULL);
        osRecvMesg(&__osEepromTimerQ,NULL,1);
      } while (0 < _length);
    }
  }
  else {
    ret = -1;
  }
  return ret;
}



s32 osPfsIsPlug(OSMesgQueue *queue,u8 *pattern)

{
  int crc_error_cnt;
  byte bits;
  uint channel;
  OSContStatus data [4];
  u8 bitpattern;
  OSMesg pvStack8;
  s32 ret;
  
  ret = 0;
  bits = 0;
  crc_error_cnt = 3;
  __osSiGetAccess();
  do {
    __osPfsRequestData('\0');
    ret = __osSiRawStartDma(1,&__osPfsPifRam);
    osRecvMesg(queue,&pvStack8,1);
    ret = __osSiRawStartDma(0,&__osPfsPifRam);
    osRecvMesg(queue,&pvStack8,1);
    __osPfsGetInitData(&bitpattern,data);
    channel = 0;
    if (__osMaxControllers != '\0') {
      do {
        if ((data[channel].status & 4) == 0) {
          crc_error_cnt += -1;
          break;
        }
        channel += 1;
      } while ((longlong)(int)channel < (longlong)(ulonglong)__osMaxControllers);
    }
    if ((ulonglong)__osMaxControllers == (longlong)(int)channel) {
      crc_error_cnt = 0;
    }
    if (crc_error_cnt < 1) {
      channel = 0;
      if (__osMaxControllers != '\0') {
        do {
          if ((data[channel].errno == '\0') && ((data[channel].status & 1) != 0)) {
            bits |= (byte)(1 << (channel & 0x1f));
          }
          channel += 1;
        } while ((longlong)(int)channel < (longlong)(ulonglong)__osMaxControllers);
      }
      __osSiRelAccess();
      *pattern = bits;
      return ret;
    }
  } while( true );
}



void __osPfsRequestData(u8 cmd)

{
  int iStack16;
  uint uStack12;
  OSPifRam *pOStack4;
  
  iStack16 = 0;
  __osContLastCmd = cmd;
  do {
    __osPfsPifRam.ramarray[iStack16] = 0;
    iStack16 += 1;
  } while (iStack16 < 0x10);
  __osPfsPifRam.pifstatus = 1;
  pOStack4 = &__osPfsPifRam;
  uStack12 = CONCAT31(0xff0100,cmd) | 0x300;
  iStack16 = 0;
  if (__osMaxControllers != '\0') {
    do {
      pOStack4->ramarray[0] = uStack12;
      pOStack4->ramarray[1] = 0xffffffff;
      iStack16 += 1;
      pOStack4 = (OSPifRam *)(pOStack4->ramarray + 2);
    } while ((longlong)iStack16 < (longlong)(ulonglong)__osMaxControllers);
  }
  *(undefined *)pOStack4->ramarray = 0xfe;
  return;
}



void __osPfsGetInitData(u8 *pattern,OSContStatus *data)

{
  u32 uVar1;
  byte local_11;
  uint local_10;
  undefined local_8;
  undefined uStack7;
  u8 uStack6;
  OSPifRam *local_4;
  
  local_11 = 0;
  local_4 = &__osPfsPifRam;
  local_10 = 0;
  if (__osMaxControllers != '\0') {
    do {
      uVar1 = local_4->ramarray[1];
      data->errno = (u8)((int)(local_4->ramarray[0] >> 8 & 0xc0) >> 4);
      if (data->errno == '\0') {
        uStack7 = (undefined)(uVar1 >> 0x10);
        local_8 = (undefined)(uVar1 >> 0x18);
        data->type = CONCAT11(uStack7,local_8);
        uStack6 = (u8)(uVar1 >> 8);
        data->status = uStack6;
        local_11 |= (byte)(1 << (local_10 & 0x1f));
      }
      local_10 += 1;
      local_4 = (OSPifRam *)(local_4->ramarray + 2);
      data = data + 1;
    } while ((longlong)(int)local_10 < (longlong)(ulonglong)__osMaxControllers);
  }
  *pattern = local_11;
  return;
}



void __osSiCreateAccessQueue(void)

{
  __osSiAccessQueueEnabled = 1;
  osCreateMesgQueue(&__osSiAccessQueue,&siAccessBuf,1);
  osSendMesg(&__osSiAccessQueue,NULL,0);
  return;
}



void __osSiGetAccess(void)

{
  OSMesg dummyMesg;
  
  if (__osSiAccessQueueEnabled == 0) {
    __osSiCreateAccessQueue();
  }
  osRecvMesg(&__osSiAccessQueue,&dummyMesg,1);
  return;
}



void __osSiRelAccess(void)

{
  osSendMesg(&__osSiAccessQueue,NULL,0);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 __osSiRawStartDma(s32 direction,void *dramAddr)

{
  int iVar1;
  s32 ret;
  
  iVar1 = __osSiDeviceBusy();
  if (iVar1 == 0) {
    if (direction == 1) {
      osWritebackDCache(dramAddr,0x40);
    }
    _SI_DRAM_ADDR_REG = osVirtualToPhysical(dramAddr);
    if (direction == 0) {
      _SI_PIF_ADDR_RD64B_REG = 0x1fc007c0;
      osInvalDCache(dramAddr,0x40);
    }
    else {
      _SI_PIF_ADDR_WR64B_REG = 0x1fc007c0;
    }
    ret = 0;
  }
  else {
    ret = -1;
  }
  return ret;
}



u8 __osContAddressCrc(u16 addr)

{
  ulonglong uVar1;
  ulonglong uVar2;
  int i;
  byte temp2;
  byte temp;
  
  uVar2 = SEXT28((short)addr);
  temp = 0;
  i = 0;
  do {
    if ((temp & 0x10) == 0) {
      temp2 = 0;
    }
    else {
      temp2 = 0x15;
    }
    uVar1 = uVar2 & 0x400;
    uVar2 = SEXT48((int)(((uint)uVar2 & 0xffff) << 1));
    i += 1;
    temp = (temp << 1 | uVar1 != 0) ^ temp2;
  } while (i < 0x10);
  return (u8)(temp & 0x1f);
}



u8 __osContDataCrc(u8 *data)

{
  uint uStack12;
  int iStack8;
  byte bStack2;
  byte bStack1;
  
  bStack1 = 0;
  iStack8 = 0;
  do {
    uStack12 = 7;
    do {
      if ((bStack1 & 0x80) == 0) {
        bStack2 = 0;
      }
      else {
        bStack2 = 0x85;
      }
      bStack1 <<= 1;
      if (iStack8 != 0x20) {
        bStack1 |= ((ulonglong)*data & (longlong)(1 << (uStack12 & 0x1f))) != 0;
      }
      uStack12 -= 1;
      bStack1 ^= bStack2;
    } while (-1 < (int)uStack12);
    data = data + 1;
    iStack8 += 1;
  } while (iStack8 < 0x21);
  return (u8)bStack1;
}



s32 __osContRamWrite(OSMesgQueue *mq,int channel,u16 address,u8 *buffer,int force)

{
  bool bVar1;
  u8 uVar2;
  u32 *puVar3;
  u32 *puVar4;
  OSPifRam *pOVar5;
  OSPifRam *pOVar6;
  int retry;
  undefined4 uStack52;
  byte bStack14;
  OSPifRam *pOStack12;
  int iStack8;
  s32 ret;
  
  ret = 0;
  pOStack12 = &__osPfsPifRam;
  retry = 2;
  if (((force == 1) || (6 < address)) || (address == 0)) {
    __osSiGetAccess();
    __osContLastCmd = '\x03';
    __osPackRamWriteData(channel,address,buffer);
    ret = __osSiRawStartDma(1,&__osPfsPifRam);
    osRecvMesg(mq,NULL,1);
    do {
      iStack8 = 0;
      do {
        __osPfsPifRam.ramarray[iStack8] = 0xff;
        iStack8 += 1;
      } while (iStack8 < 0x10);
      __osPfsPifRam.pifstatus = 0;
      ret = __osSiRawStartDma(0,&__osPfsPifRam);
      osRecvMesg(mq,NULL,1);
      pOStack12 = &__osPfsPifRam;
      if ((channel != 0) && (iStack8 = 0, 0 < channel)) {
        do {
          iStack8 += 1;
          pOStack12 = (OSPifRam *)((int)pOStack12->ramarray + 1);
        } while (iStack8 < channel);
      }
      pOVar5 = pOStack12;
      puVar3 = &uStack52;
      do {
        pOVar6 = (OSPifRam *)(pOVar5->ramarray + 3);
        puVar4 = puVar3 + 3;
        *puVar3 = pOVar5->ramarray[0];
        puVar3[1] = pOVar5->ramarray[1];
        puVar3[2] = pOVar5->ramarray[2];
        pOVar5 = pOVar6;
        puVar3 = puVar4;
      } while (pOVar6 != (OSPifRam *)(pOStack12->ramarray + 9));
      *puVar4 = pOVar6->ramarray[0];
      ret = (int)((uint)uStack52._2_1_ & 0xc0) >> 4;
      if ((ret == 0) &&
         (uVar2 = __osContDataCrc(buffer), (longlong)(char)uVar2 != (ulonglong)bStack14)) {
        ret = __osPfsGetStatus(mq,channel);
        if (ret != 0) {
          __osSiRelAccess();
          return ret;
        }
        ret = 4;
      }
    } while ((ret == 4) && (bVar1 = -1 < retry, retry += -1, bVar1));
    __osSiRelAccess();
  }
  else {
    ret = 0;
  }
  return ret;
}



void __osPackRamWriteData(int channel,u16 address,u8 *buffer)

{
  u32 *puVar1;
  OSPifRam *pOVar2;
  u32 *puVar3;
  u32 *puVar4;
  u8 *puStackX8;
  int iStack48;
  undefined uStack44;
  undefined uStack43;
  undefined uStack42;
  undefined uStack41;
  u8 auStack38 [30];
  u32 uStack8;
  OSPifRam *pOStack4;
  
  pOStack4 = &__osPfsPifRam;
  iStack48 = 0;
  do {
    __osPfsPifRam.ramarray[iStack48] = 0;
    iStack48 += 1;
  } while (iStack48 < 0x10);
  __osPfsPifRam.pifstatus = 1;
  uStack44 = 0xff;
  uStack43 = 0x23;
  uStack42 = 1;
  uStack41 = 3;
  __osContAddressCrc(address);
  iStack48 = 0;
  puStackX8 = buffer;
  do {
    auStack38[iStack48] = *puStackX8;
    iStack48 += 1;
    puStackX8 = puStackX8 + 1;
  } while (iStack48 < 0x20);
  if ((channel != 0) && (iStack48 = 0, 0 < channel)) {
    do {
      *(undefined *)pOStack4->ramarray = 0;
      iStack48 += 1;
      pOStack4 = (OSPifRam *)((int)pOStack4->ramarray + 1);
    } while (iStack48 < channel);
  }
  puVar3 = (u32 *)&uStack44;
  pOVar2 = pOStack4;
  do {
    puVar4 = puVar3 + 3;
    puVar1 = pOVar2->ramarray;
    pOVar2->ramarray[0] = *puVar3;
    pOVar2->ramarray[1] = puVar3[1];
    pOVar2->ramarray[2] = puVar3[2];
    puVar3 = puVar4;
    pOVar2 = (OSPifRam *)(puVar1 + 3);
  } while (puVar4 != &uStack8);
  ((OSPifRam *)(puVar1 + 3))->ramarray[0] = *puVar4;
  *(undefined *)(pOStack4->ramarray + 10) = 0xfe;
  return;
}



s32 __osContRamRead(OSMesgQueue *mq,int channel,u16 address,u8 *buffer)

{
  bool bVar1;
  u8 uVar2;
  u32 *puVar3;
  u32 *puVar4;
  OSPifRam *pOVar5;
  OSPifRam *pOVar6;
  u8 *puStackX12;
  int retry;
  undefined4 uStack52;
  u8 auStack46 [32];
  u8 uStack14;
  OSPifRam *pOStack12;
  int iStack8;
  s32 ret;
  
  ret = 0;
  pOStack12 = &__osPfsPifRam;
  retry = 2;
  __osSiGetAccess();
  __osContLastCmd = '\x02';
  __osPackRamReadData(channel,address);
  ret = __osSiRawStartDma(1,&__osPfsPifRam);
  osRecvMesg(mq,NULL,1);
  puStackX12 = buffer;
  do {
    iStack8 = 0;
    do {
      __osPfsPifRam.ramarray[iStack8] = 0xff;
      iStack8 += 1;
    } while (iStack8 < 0x10);
    __osPfsPifRam.pifstatus = 0;
    ret = __osSiRawStartDma(0,&__osPfsPifRam);
    osRecvMesg(mq,NULL,1);
    pOStack12 = &__osPfsPifRam;
    if ((channel != 0) && (iStack8 = 0, 0 < channel)) {
      do {
        iStack8 += 1;
        pOStack12 = (OSPifRam *)((int)pOStack12->ramarray + 1);
      } while (iStack8 < channel);
    }
    pOVar5 = pOStack12;
    puVar3 = &uStack52;
    do {
      pOVar6 = (OSPifRam *)(pOVar5->ramarray + 3);
      puVar4 = puVar3 + 3;
      *puVar3 = pOVar5->ramarray[0];
      puVar3[1] = pOVar5->ramarray[1];
      puVar3[2] = pOVar5->ramarray[2];
      pOVar5 = pOVar6;
      puVar3 = puVar4;
    } while (pOVar6 != (OSPifRam *)(pOStack12->ramarray + 9));
    *puVar4 = pOVar6->ramarray[0];
    ret = (int)((uint)uStack52._2_1_ & 0xc0) >> 4;
    if (ret == 0) {
      uVar2 = __osContDataCrc(auStack46);
      if (uVar2 == uStack14) {
        iStack8 = 0;
        do {
          *puStackX12 = auStack46[iStack8];
          iStack8 += 1;
          puStackX12 = puStackX12 + 1;
        } while (iStack8 < 0x20);
      }
      else {
        ret = __osPfsGetStatus(mq,channel);
        if (ret != 0) {
          __osSiRelAccess();
          return ret;
        }
        ret = 4;
      }
    }
  } while ((ret == 4) && (bVar1 = -1 < retry, retry += -1, bVar1));
  __osSiRelAccess();
  return ret;
}



void __osPackRamReadData(int channel,u16 address)

{
  u32 *puVar1;
  OSPifRam *pOVar2;
  u32 *puVar3;
  u32 *puVar4;
  int iStack48;
  undefined uStack44;
  undefined uStack43;
  undefined uStack42;
  undefined uStack41;
  undefined auStack38 [30];
  u32 uStack8;
  OSPifRam *pOStack4;
  
  pOStack4 = &__osPfsPifRam;
  iStack48 = 0;
  do {
    __osPfsPifRam.ramarray[iStack48] = 0;
    iStack48 += 1;
  } while (iStack48 < 0x10);
  __osPfsPifRam.pifstatus = 1;
  uStack44 = 0xff;
  uStack43 = 3;
  uStack42 = 0x21;
  uStack41 = 2;
  __osContAddressCrc(address);
  iStack48 = 0;
  do {
    auStack38[iStack48] = 0xff;
    iStack48 += 1;
  } while (iStack48 < 0x20);
  if ((channel != 0) && (iStack48 = 0, 0 < channel)) {
    do {
      *(undefined *)pOStack4->ramarray = 0;
      iStack48 += 1;
      pOStack4 = (OSPifRam *)((int)pOStack4->ramarray + 1);
    } while (iStack48 < channel);
  }
  puVar3 = (u32 *)&uStack44;
  pOVar2 = pOStack4;
  do {
    puVar4 = puVar3 + 3;
    puVar1 = pOVar2->ramarray;
    pOVar2->ramarray[0] = *puVar3;
    pOVar2->ramarray[1] = puVar3[1];
    pOVar2->ramarray[2] = puVar3[2];
    puVar3 = puVar4;
    pOVar2 = (OSPifRam *)(puVar1 + 3);
  } while (puVar4 != &uStack8);
  ((OSPifRam *)(puVar1 + 3))->ramarray[0] = *puVar4;
  *(undefined *)(pOStack4->ramarray + 10) = 0xfe;
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guAlignF(float mf [4] [4],float a,float x,float y,float z)

{
  float in_a2_lo;
  float in_a3_lo;
  undefined4 unaff_s0_lo;
  undefined4 unaff_retaddr;
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  undefined4 uStackX0;
  float fStackX8;
  float fStackX12;
  undefined8 in_stack_ffffffe0;
  undefined4 in_stack_fffffff0;
  
  flt_CODE_bss_80067DD0 = flt_800297F0;
  fStackX8 = in_a2_lo;
  fStackX12 = in_a3_lo;
  guNormalize(&fStackX8,&fStackX12,(float *)mf);
  z = z * flt_CODE_bss_80067DD0;
  fVar1 = sinf(z);
  fVar2 = cosf(z);
  fVar3 = sqrtf(fStackX8 * fStackX8 + mf[0][0] * mf[0][0]);
  guMtxIdentF((float  [4] [4])
              CONCAT3232(CONCAT284(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(
                                                  in_stack_ffffffe0,unaff_s0_lo),unaff_retaddr),
                                                  in_stack_fffffff0),fVar3),fVar2),fVar1),
                         CONCAT2012(CONCAT164(CONCAT124(CONCAT84(CONCAT44(uStackX0,z),fStackX8),
                                                        fStackX12),mf[0][0]),mf[0]._4_12_)));
  if (fVar3 != 0.00000000) {
    fVar4 = 1.00000000 / fVar3;
    *(float *)y = (-mf[0][0] * fVar2 - fVar1 * fStackX12 * fStackX8) * fVar4;
    *(float *)((int)y + 0x10) = (mf[0][0] * fVar1 - fVar2 * fStackX12 * fStackX8) * fVar4;
    *(undefined4 *)((int)y + 0x30) = 0;
    *(float *)((int)y + 0x20) = -fStackX8;
    *(float *)((int)y + 4) = fVar1 * fVar3;
    *(float *)((int)y + 0x14) = fVar2 * fVar3;
    *(undefined4 *)((int)y + 0x34) = 0;
    *(float *)((int)y + 0x24) = -fStackX12;
    *(float *)((int)y + 8) = (fVar2 * fStackX8 - fVar1 * fStackX12 * mf[0][0]) * fVar4;
    *(float *)((int)y + 0x18) = (-fVar1 * fStackX8 - fVar2 * fStackX12 * mf[0][0]) * fVar4;
    *(undefined4 *)((int)y + 0x38) = 0;
    *(undefined4 *)((int)y + 0xc) = 0;
    *(undefined4 *)((int)y + 0x1c) = 0;
    *(float *)((int)y + 0x28) = -mf[0][0];
    *(undefined4 *)((int)y + 0x2c) = 0;
    *(undefined4 *)((int)y + 0x3c) = 0x3f800000;
  }
  return;
}



void guAlign(Mtx *m,float a,float x,float y,float z)

{
  undefined4 local_44;
  undefined4 local_50;
  undefined8 in_stack_ffffffb4;
  undefined in_stack_ffffffc0 [48];
  
  guAlignF((float  [4] [4])
           CONCAT1648(CONCAT124(CONCAT48(local_50,in_stack_ffffffb4),local_44),in_stack_ffffffc0),y,
           z,(float)&stack0xffffffc0,y);
  guMtxF2L((float  [4] [4])
           CONCAT1648(CONCAT124(CONCAT48(local_50,in_stack_ffffffb4),local_44),in_stack_ffffffc0),
           (Mtx *)&stack0xffffffc0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guOrthoF(float mf [4] [4],float l,float r,float b,float t,float n,float f,float scale)

{
  float *pfVar1;
  int iVar2;
  undefined4 unaff_retaddr;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  undefined4 in_stack_fffffff8;
  
  guMtxIdentF((float  [4] [4])
              CONCAT856(CONCAT44(in_stack_fffffff8,unaff_retaddr),
                        CONCAT3224(CONCAT284(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(
                                                  CONCAT44(b,t),n),f),mf[0][0]),mf[0][1]),mf[0][2]),
                                             mf[0][3]),mf._16_24_)));
  *(float *)b = 2.00000000 / (n - t);
  *(float *)((int)b + 0x28) = -2.00000000 / (mf[0][2] - mf[0][1]);
  *(float *)((int)b + 0x14) = 2.00000000 / (mf[0][0] - f);
  *(float *)((int)b + 0x30) = -(n + t) / (n - t);
  *(float *)((int)b + 0x34) = -(mf[0][0] + f) / (mf[0][0] - f);
  *(undefined4 *)((int)b + 0x3c) = 0x3f800000;
  *(float *)((int)b + 0x38) = -(mf[0][2] + mf[0][1]) / (mf[0][2] - mf[0][1]);
  iVar2 = 1;
  fVar9 = *(float *)((int)b + 4);
  fVar6 = *(float *)b * mf[0][3];
  fVar7 = *(float *)((int)b + 8);
  fVar8 = *(float *)((int)b + 0xc);
  pfVar1 = (float *)b;
  if (true) {
    do {
      fVar5 = fVar9 * mf[0][3];
      fVar9 = pfVar1[5];
      fVar4 = fVar7 * mf[0][3];
      fVar7 = pfVar1[6];
      iVar2 += 1;
      fVar3 = fVar8 * mf[0][3];
      fVar8 = pfVar1[7];
      *pfVar1 = fVar6;
      fVar6 = pfVar1[4] * mf[0][3];
      pfVar1[1] = fVar5;
      pfVar1[2] = fVar4;
      b = (float)(pfVar1 + 4);
      pfVar1[3] = fVar3;
      pfVar1 = (float *)b;
    } while (iVar2 != 4);
  }
  *(float *)b = fVar6;
  ((float *)b)[1] = fVar9 * mf[0][3];
  ((float *)b)[2] = fVar7 * mf[0][3];
  ((float *)b)[3] = fVar8 * mf[0][3];
  return;
}



void guOrtho(Mtx *m,float l,float r,float b,float t,float n,float f,float scale)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_00000018;
  undefined4 in_stack_0000001c;
  undefined4 in_stack_ffffffb8;
  undefined in_stack_ffffffc0 [40];
  float scale_00;
  
  guOrthoF((float  [4] [4])
           CONCAT2440(CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(f,scale),in_stack_00000018),
                                                    in_stack_0000001c),in_stack_ffffffb8),
                                unaff_retaddr),in_stack_ffffffc0),b,t,(float)&stack0xffffffc0,b,t,n,
           scale_00);
  guMtxF2L((float  [4] [4])
           CONCAT2440(CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(f,scale),in_stack_00000018),
                                                    in_stack_0000001c),in_stack_ffffffb8),
                                unaff_retaddr),in_stack_ffffffc0),(Mtx *)&stack0xffffffc0);
  return;
}



short coss(ushort x)

{
  short sVar1;
  
  sVar1 = sins(x + 0x4000);
  return sVar1;
}



short sins(ushort x)

{
  word wVar1;
  uint uVar2;
  
  uVar2 = ((int)(short)x & 0xffffU) >> 4;
  if ((uVar2 & 0x400) == 0) {
    wVar1 = sin_table[uVar2 & 0x3ff];
  }
  else {
    wVar1 = sin_table[(uVar2 & 0x3ff) * 0x7fffffff + 0x3ff];
  }
  if ((uVar2 & 0x800) != 0) {
    return (short)((uint)((int)(short)wVar1 * -0x10000) >> 0x10);
  }
  return (short)wVar1;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guTranslateF(float mf_4__4_,float x,float y,float z)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  undefined4 unaff_retaddr;
  undefined in_stack_00000010 [40];
  undefined4 in_stack_fffffff8;
  
  guMtxIdentF((float  [4] [4])
              CONCAT856(CONCAT44(in_stack_fffffff8,unaff_retaddr),
                        CONCAT1640(CONCAT124(CONCAT84(CONCAT44(y,z),in_a2_lo),in_a3_lo),
                                   in_stack_00000010)));
  *(float *)((int)y + 0x30) = z;
  *(undefined4 *)((int)y + 0x34) = in_a2_lo;
  *(undefined4 *)((int)y + 0x38) = in_a3_lo;
  return;
}



void guTranslate(Mtx *m,float x,float y,float z)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_ffffffa8;
  undefined in_stack_ffffffb0 [56];
  float fStack16;
  
  guMtxIdentF((float  [4] [4])CONCAT856(CONCAT44(in_stack_ffffffa8,unaff_retaddr),in_stack_ffffffb0)
             );
  fStack16 = z;
  guMtxF2L((float  [4] [4])CONCAT856(CONCAT44(in_stack_ffffffa8,unaff_retaddr),in_stack_ffffffb0),
           (Mtx *)&stack0xffffffc0);
  return;
}



// WARNING: Instruction at (ram,0x70016dac) overlaps instruction at (ram,0x70016da8)
// 

int _bcmp(void *__s1,void *__s2,size_t __n)

{
  char cVar1;
  char cVar2;
  uint uVar3;
  int *piVar4;
  int *piVar5;
  uint in_v1_lo;
  uint uVar6;
  uint *puVar7;
  uint uVar8;
  
  if (0xf < (int)__n) {
    if ((((uint)__s1 ^ (uint)__s2) & 3) == 0) {
      uVar8 = -(int)__s1 & 3;
      if (uVar8 != 0) {
        uVar6 = (uint)__s1 & 3;
        piVar4 = (int *)((int)__s1 - uVar6);
        uVar3 = (uint)__s2 & 3;
        piVar5 = (int *)((int)__s2 - uVar3);
        __s1 = (void *)((int)__s1 + uVar8);
        __s2 = (void *)((int)__s2 + uVar8);
        if ((*piVar4 << uVar6 * 8 | in_v1_lo & 0xffffffffU >> (4 - uVar6) * 8) !=
            (*piVar5 << uVar3 * 8 | in_v1_lo & 0xffffffffU >> (4 - uVar3) * 8)) {
          return 1;
        }
      }
      uVar6 = __n - uVar8 & 0xfffffffc;
      __n = (__n - uVar8) - uVar6;
      if (uVar6 != 0) {
        puVar7 = (uint *)(uVar6 + (int)__s1);
        uVar8 = *(uint *)__s1;
        while( true ) {
          uVar6 = *(uint *)__s2;
          __s1 = (uint *)__s1 + 1;
          __s2 = (uint *)__s2 + 1;
          if (uVar8 != uVar6) {
            return 1;
          }
          if ((uint *)__s1 == puVar7) break;
          uVar8 = *(uint *)__s1;
        }
      }
    }
    else {
      uVar8 = -(int)__s2 & 3;
      if (uVar8 != 0) {
        puVar7 = (uint *)(uVar8 + (int)__s1);
        cVar1 = *(char *)__s1;
        while( true ) {
          cVar2 = *(char *)__s2;
          __s1 = (void *)((int)__s1 + 1);
          __s2 = (void *)((int)__s2 + 1);
          if (cVar1 != cVar2) {
            return 1;
          }
          if ((uint *)__s1 == puVar7) break;
          cVar1 = *(char *)__s1;
        }
      }
      uVar6 = __n - uVar8 & 0xfffffffc;
      __n = (__n - uVar8) - uVar6;
      if (uVar6 != 0) {
        puVar7 = (uint *)(uVar6 + (int)__s1);
        uVar8 = *(uint *)__s1;
        while( true ) {
          uVar6 = *(uint *)__s2;
          __s1 = (uint *)__s1 + 1;
          __s2 = (uint *)__s2 + 1;
          if (uVar8 != uVar6) {
            return 1;
          }
          if ((uint *)__s1 == puVar7) break;
          uVar6 = (uint)__s1 & 3;
          uVar8 = *(uint *)((int)__s1 - uVar6) << uVar6 * 8 | uVar8 & 0xffffffffU >> (4 - uVar6) * 8
          ;
        }
      }
    }
  }
  puVar7 = (uint *)(__n + (int)__s1);
  if (0 < (int)__n) {
    cVar1 = *(char *)__s1;
    while( true ) {
      cVar2 = *(char *)__s2;
      __s1 = (void *)((int)__s1 + 1);
      __s2 = (void *)((int)__s2 + 1);
      if (cVar1 != cVar2) {
        return 1;
      }
      if ((uint *)__s1 == puVar7) break;
      cVar1 = *(char *)__s1;
    }
    return 0;
  }
  return 0;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guScaleF(float mf_4__4_,float x,float y,float z)

{
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  undefined4 unaff_retaddr;
  undefined in_stack_00000010 [40];
  undefined4 in_stack_fffffff8;
  
  guMtxIdentF((float  [4] [4])
              CONCAT856(CONCAT44(in_stack_fffffff8,unaff_retaddr),
                        CONCAT1640(CONCAT124(CONCAT84(CONCAT44(y,z),in_a2_lo),in_a3_lo),
                                   in_stack_00000010)));
  *(float *)y = z;
  *(undefined4 *)((int)y + 0x14) = in_a2_lo;
  *(undefined4 *)((int)y + 0x3c) = 0x3f800000;
  *(undefined4 *)((int)y + 0x28) = in_a3_lo;
  return;
}



void guScale(Mtx *m,float x,float y,float z)

{
  float x_00;
  undefined4 local_44;
  undefined4 in_stack_ffffffb8;
  undefined in_stack_ffffffc0 [56];
  
  guScaleF(z,x_00,(float)&stack0xffffffc0,z);
  guMtxF2L((float  [4] [4])CONCAT856(CONCAT44(in_stack_ffffffb8,local_44),in_stack_ffffffc0),
           (Mtx *)&stack0xffffffc0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guLookAtReflectF(float mf [4] [4],LookAt *l,float xEye,float yEye,float zEye,float xAt,
                     float yAt,float zAt,float xUp,float yUp,float zUp)

{
  undefined4 unaff_retaddr;
  float fVar1;
  double dVar2;
  uint uVar3;
  undefined8 in_f8;
  double dVar4;
  double dVar5;
  float fVar6;
  uint in_register_00001080;
  float fVar7;
  float fVar8;
  undefined8 unaff_f20;
  undefined8 unaff_f22;
  undefined8 unaff_f24;
  undefined8 unaff_f26;
  float fVar9;
  undefined8 unaff_f28;
  float fVar10;
  undefined8 unaff_f30;
  float fVar11;
  undefined4 in_stack_fffffff8;
  
  uVar3 = (uint)((ulonglong)in_f8 >> 0x20);
  guMtxIdentF((float  [4] [4])
              CONCAT568(CONCAT524(CONCAT484(CONCAT408(CONCAT328(CONCAT248(CONCAT168(CONCAT88(
                                                  unaff_f20,unaff_f22),unaff_f24),unaff_f26),
                                                  unaff_f28),unaff_f30),in_stack_fffffff8),
                                  unaff_retaddr),CONCAT44(l,zEye)));
  mf[0][1] = mf[0][1] - xAt;
  mf[0][2] = mf[0][2] - yAt;
  mf[0][3] = mf[0][3] - mf[0][0];
  fVar1 = sqrtf(mf[0][1] * mf[0][1] + mf[0][2] * mf[0][2] + mf[0][3] * mf[0][3]);
  dVar2 = (double)((ulonglong)uVar3 << 0x20) / (double)fVar1;
  fVar1 = (float)dVar2;
  mf[0][1] = mf[0][1] * fVar1;
  mf[0][2] = mf[0][2] * fVar1;
  mf[0][3] = mf[0][3] * fVar1;
  uVar3 = (uint)((ulonglong)dVar2 >> 0x20);
  fVar9 = mf[1][1] * mf[0][3] - mf[1][2] * mf[0][2];
  fVar10 = mf[1][2] * mf[0][1] - mf[1][0] * mf[0][3];
  fVar11 = mf[1][0] * mf[0][2] - mf[1][1] * mf[0][1];
  fVar1 = sqrtf(fVar9 * fVar9 + fVar10 * fVar10 + fVar11 * fVar11);
  fVar6 = (float)((double)((ulonglong)uVar3 << 0x20) / (double)fVar1);
  fVar9 = fVar9 * fVar6;
  fVar10 = fVar10 * fVar6;
  fVar11 = fVar11 * fVar6;
  uVar3 = (uint)((ulonglong)(double)fVar1 >> 0x20);
  fVar6 = mf[0][2] * fVar11 - mf[0][3] * fVar10;
  fVar7 = mf[0][3] * fVar9 - mf[0][1] * fVar11;
  fVar8 = mf[0][1] * fVar10 - mf[0][2] * fVar9;
  fVar1 = sqrtf(fVar6 * fVar6 + fVar7 * fVar7 + fVar8 * fVar8);
  dVar2 = dbl_80029800;
  fVar1 = (float)((double)((ulonglong)uVar3 << 0x20) / (double)fVar1);
  fVar6 = fVar6 * fVar1;
  fVar7 = fVar7 * fVar1;
  fVar8 = fVar8 * fVar1;
  dVar4 = (double)fVar9 * (double)((ulonglong)in_register_00001080 << 0x20);
  if (dbl_80029800 <= dVar4) {
    dVar4 = dbl_80029800;
  }
  dVar5 = (double)fVar10 * (double)((ulonglong)in_register_00001080 << 0x20);
  *(undefined *)((int)zEye + 8) = (char)(int)dVar4;
  if (dVar2 <= dVar5) {
    dVar5 = dVar2;
  }
  dVar4 = (double)fVar11 * (double)((ulonglong)in_register_00001080 << 0x20);
  *(undefined *)((int)zEye + 9) = (char)(int)dVar5;
  if (dVar2 <= dVar4) {
    dVar4 = dVar2;
  }
  *(undefined *)((int)zEye + 10) = (char)(int)dVar4;
  dVar4 = (double)fVar6 * (double)((ulonglong)in_register_00001080 << 0x20);
  if (dVar2 <= dVar4) {
    dVar4 = dVar2;
  }
  *(undefined *)((int)zEye + 0x18) = (char)(int)dVar4;
  dVar4 = (double)fVar7 * (double)((ulonglong)in_register_00001080 << 0x20);
  if (dVar2 <= dVar4) {
    dVar4 = dVar2;
  }
  *(undefined *)((int)zEye + 0x19) = (char)(int)dVar4;
  dVar4 = (double)fVar8 * (double)((ulonglong)in_register_00001080 << 0x20);
  if (dVar2 <= dVar4) {
    dVar4 = dVar2;
  }
  *(undefined *)zEye = 0;
  *(undefined *)((int)zEye + 1) = 0;
  *(undefined *)((int)zEye + 2) = 0;
  *(undefined *)((int)zEye + 3) = 0;
  *(undefined *)((int)zEye + 4) = 0;
  *(undefined *)((int)zEye + 5) = 0;
  *(undefined *)((int)zEye + 6) = 0;
  *(undefined *)((int)zEye + 7) = 0;
  *(undefined *)((int)zEye + 0x10) = 0;
  *(undefined *)((int)zEye + 0x11) = 0x80;
  *(undefined *)((int)zEye + 0x12) = 0;
  *(undefined *)((int)zEye + 0x13) = 0;
  *(undefined *)((int)zEye + 0x14) = 0;
  *(undefined *)((int)zEye + 0x15) = 0x80;
  *(undefined *)((int)zEye + 0x16) = 0;
  *(undefined *)((int)zEye + 0x17) = 0;
  *(undefined *)((int)zEye + 0x1a) = (char)(int)dVar4;
  *(float *)l->l = fVar9;
  *(float *)(l->l + 0x10) = fVar10;
  *(float *)l[1].l = fVar11;
  *(float *)(l->l + 8) = mf[0][1];
  *(float *)(l->l + 0x18) = mf[0][2];
  *(float *)(l[1].l + 8) = mf[0][3];
  *(float *)(l->l + 4) = fVar6;
  *(float *)(l->l + 0x14) = fVar7;
  *(float *)(l[1].l + 4) = fVar8;
  *(float *)(l[1].l + 0x10) = -(xAt * fVar9 + yAt * fVar10 + mf[0][0] * fVar11);
  *(float *)(l[1].l + 0x14) = -(xAt * fVar6 + yAt * fVar7 + mf[0][0] * fVar8);
  *(undefined4 *)(l->l + 0xc) = 0;
  *(undefined4 *)(l->l + 0x1c) = 0;
  *(undefined4 *)(l[1].l + 0xc) = 0;
  *(undefined4 *)(l[1].l + 0x1c) = 0x3f800000;
  *(float *)(l[1].l + 0x18) = -(xAt * mf[0][1] + yAt * mf[0][2] + mf[0][0] * mf[0][3]);
  return;
}



void guLookAtReflect(Mtx *m,LookAt *l,float xEye,float yEye,float zEye,float xAt,float yAt,float zAt
                    ,float xUp,float yUp,float zUp)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_00000024;
  undefined4 in_stack_00000028;
  undefined8 in_stack_ffffffb4;
  undefined in_stack_ffffffc0 [24];
  float zAt_00;
  float xUp_00;
  float yUp_00;
  float zUp_00;
  
  guLookAtReflectF((float  [4] [4])
                   CONCAT4024(CONCAT364(CONCAT288(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(
                                                  CONCAT44(yAt,zAt),xUp),yUp),zUp),in_stack_00000024
                                                  ),in_stack_00000028),in_stack_ffffffb4),
                                        unaff_retaddr),in_stack_ffffffc0),(LookAt *)&stack0xffffffc0
                   ,zEye,xAt,(float)l,zEye,xAt,zAt_00,xUp_00,yUp_00,zUp_00);
  guMtxF2L((float  [4] [4])
           CONCAT4024(CONCAT364(CONCAT288(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(
                                                  yAt,zAt),xUp),yUp),zUp),in_stack_00000024),
                                                  in_stack_00000028),in_stack_ffffffb4),
                                unaff_retaddr),in_stack_ffffffc0),(Mtx *)&stack0xffffffc0);
  return;
}



void guLookAtF(float mf [4] [4],float xEye,float yEye,float zEye,float xAt,float yAt,float zAt,
              float xUp,float yUp,float zUp)

{
  undefined4 unaff_s0_lo;
  undefined4 unaff_retaddr;
  float fVar1;
  float fVar2;
  double dVar3;
  uint uVar4;
  undefined8 in_f8;
  float fVar5;
  float fVar6;
  undefined8 unaff_f20;
  undefined8 unaff_f22;
  undefined8 unaff_f24;
  undefined8 unaff_f26;
  float fVar7;
  undefined8 unaff_f28;
  float fVar8;
  undefined8 unaff_f30;
  float fVar9;
  undefined8 in_stack_ffffffc0;
  
  uVar4 = (uint)((ulonglong)in_f8 >> 0x20);
  guMtxIdentF((float  [4] [4])
              CONCAT604(CONCAT564(CONCAT488(CONCAT408(CONCAT328(CONCAT248(CONCAT168(CONCAT88(
                                                  in_stack_ffffffc0,unaff_f20),unaff_f22),unaff_f24)
                                                  ,unaff_f26),unaff_f28),unaff_f30),unaff_s0_lo),
                        unaff_retaddr));
  mf[0][0] = mf[0][0] - xAt;
  mf[0][1] = mf[0][1] - yAt;
  mf[0][2] = mf[0][2] - zAt;
  fVar1 = sqrtf(mf[0][0] * mf[0][0] + mf[0][1] * mf[0][1] + mf[0][2] * mf[0][2]);
  dVar3 = (double)((ulonglong)uVar4 << 0x20) / (double)fVar1;
  fVar1 = (float)dVar3;
  mf[0][0] = mf[0][0] * fVar1;
  mf[0][1] = mf[0][1] * fVar1;
  mf[0][2] = mf[0][2] * fVar1;
  uVar4 = (uint)((ulonglong)dVar3 >> 0x20);
  fVar7 = mf[1][0] * mf[0][2] - mf[1][1] * mf[0][1];
  fVar8 = mf[1][1] * mf[0][0] - mf[0][3] * mf[0][2];
  fVar9 = mf[0][3] * mf[0][1] - mf[1][0] * mf[0][0];
  fVar1 = sqrtf(fVar7 * fVar7 + fVar8 * fVar8 + fVar9 * fVar9);
  fVar2 = (float)((double)((ulonglong)uVar4 << 0x20) / (double)fVar1);
  fVar7 = fVar7 * fVar2;
  fVar8 = fVar8 * fVar2;
  fVar9 = fVar9 * fVar2;
  uVar4 = (uint)((ulonglong)(double)fVar1 >> 0x20);
  fVar2 = mf[0][1] * fVar9 - mf[0][2] * fVar8;
  fVar5 = mf[0][2] * fVar7 - mf[0][0] * fVar9;
  fVar6 = mf[0][0] * fVar8 - mf[0][1] * fVar7;
  fVar1 = sqrtf(fVar2 * fVar2 + fVar5 * fVar5 + fVar6 * fVar6);
  fVar1 = (float)((double)((ulonglong)uVar4 << 0x20) / (double)fVar1);
  *(float *)zEye = fVar7;
  *(float *)((int)zEye + 0x10) = fVar8;
  *(float *)((int)zEye + 0x20) = fVar9;
  *(float *)((int)zEye + 4) = fVar2 * fVar1;
  *(float *)((int)zEye + 0x14) = fVar5 * fVar1;
  *(float *)((int)zEye + 0x30) = -(xAt * fVar7 + yAt * fVar8 + zAt * fVar9);
  *(float *)((int)zEye + 0x24) = fVar6 * fVar1;
  *(float *)((int)zEye + 8) = mf[0][0];
  *(float *)((int)zEye + 0x18) = mf[0][1];
  *(float *)((int)zEye + 0x28) = mf[0][2];
  *(undefined4 *)((int)zEye + 0xc) = 0;
  *(undefined4 *)((int)zEye + 0x1c) = 0;
  *(undefined4 *)((int)zEye + 0x2c) = 0;
  *(float *)((int)zEye + 0x34) = -(xAt * fVar2 * fVar1 + yAt * fVar5 * fVar1 + zAt * fVar6 * fVar1);
  *(undefined4 *)((int)zEye + 0x3c) = 0x3f800000;
  *(float *)((int)zEye + 0x38) = -(xAt * mf[0][0] + yAt * mf[0][1] + zAt * mf[0][2]);
  return;
}



void guLookAt(Mtx *m,float xEye,float yEye,float zEye,float xAt,float yAt,float zAt,float xUp,
             float yUp,float zUp)

{
  undefined4 unaff_retaddr;
  undefined4 in_stack_00000020;
  undefined4 in_stack_00000024;
  undefined4 in_stack_ffffffb8;
  undefined in_stack_ffffffc0 [32];
  float xUp_00;
  float yUp_00;
  float zUp_00;
  
  guLookAtF((float  [4] [4])
            CONCAT3232(CONCAT284(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(zAt,xUp),
                                                                                  yUp),zUp),
                                                               in_stack_00000020),in_stack_00000024)
                                           ,in_stack_ffffffb8),unaff_retaddr),in_stack_ffffffc0),
            zEye,xAt,(float)&stack0xffffffc0,zEye,xAt,yAt,xUp_00,yUp_00,zUp_00);
  guMtxF2L((float  [4] [4])
           CONCAT3232(CONCAT284(CONCAT244(CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(zAt,xUp),
                                                                                 yUp),zUp),
                                                              in_stack_00000020),in_stack_00000024),
                                          in_stack_ffffffb8),unaff_retaddr),in_stack_ffffffc0),
           (Mtx *)&stack0xffffffc0);
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void guRotateF(float mf [4] [4],float a,float x,float y,float z)

{
  float in_a2_lo;
  float in_a3_lo;
  undefined4 unaff_s0_lo;
  undefined4 unaff_retaddr;
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined4 uStackX0;
  float fStackX8;
  float fStackX12;
  undefined8 in_stack_ffffffd8;
  undefined4 in_stack_ffffffe8;
  
  flt_CODE_bss_80067DE0 = flt_80029810;
  fStackX8 = in_a2_lo;
  fStackX12 = in_a3_lo;
  guNormalize(&fStackX8,&fStackX12,(float *)mf);
  z = z * flt_CODE_bss_80067DE0;
  fVar1 = sinf(z);
  fVar2 = cosf(z);
  fVar3 = 1.00000000 - fVar2;
  fVar4 = fStackX8 * fStackX12 * fVar3;
  fVar5 = fStackX12 * mf[0][0] * fVar3;
  fVar3 = mf[0][0] * fStackX8 * fVar3;
  guMtxIdentF((float  [4] [4])
              CONCAT4024(CONCAT364(CONCAT324(CONCAT284(CONCAT244(CONCAT204(CONCAT164(CONCAT124(
                                                  CONCAT84(in_stack_ffffffd8,unaff_s0_lo),
                                                  unaff_retaddr),in_stack_ffffffe8),fVar3),fVar5),
                                                  fVar4),fVar2),fVar1),
                         CONCAT204(CONCAT164(CONCAT124(CONCAT84(CONCAT44(uStackX0,z),fStackX8),
                                                       fStackX12),mf[0][0]),mf[0][1])));
  *(float *)y = (1.00000000 - fStackX8 * fStackX8) * fVar2 + fStackX8 * fStackX8;
  *(float *)((int)y + 0x24) = fVar5 - fStackX8 * fVar1;
  *(float *)((int)y + 0x18) = fStackX8 * fVar1 + fVar5;
  *(float *)((int)y + 0x14) = (1.00000000 - fStackX12 * fStackX12) * fVar2 + fStackX12 * fStackX12;
  *(float *)((int)y + 0x20) = fStackX12 * fVar1 + fVar3;
  *(float *)((int)y + 8) = fVar3 - fStackX12 * fVar1;
  *(float *)((int)y + 0x28) = (1.00000000 - mf[0][0] * mf[0][0]) * fVar2 + mf[0][0] * mf[0][0];
  *(float *)((int)y + 0x10) = fVar4 - mf[0][0] * fVar1;
  *(float *)((int)y + 4) = mf[0][0] * fVar1 + fVar4;
  return;
}



void guRotate(Mtx *m,float a,float x,float y,float z)

{
  undefined4 local_44;
  undefined4 local_50;
  undefined8 in_stack_ffffffb4;
  undefined in_stack_ffffffc0 [48];
  
  guRotateF((float  [4] [4])
            CONCAT1648(CONCAT124(CONCAT48(local_50,in_stack_ffffffb4),local_44),in_stack_ffffffc0),y
            ,z,(float)&stack0xffffffc0,y);
  guMtxF2L((float  [4] [4])
           CONCAT1648(CONCAT124(CONCAT48(local_50,in_stack_ffffffb4),local_44),in_stack_ffffffc0),
           (Mtx *)&stack0xffffffc0);
  return;
}



longlong __d_to_ll(double d)

{
  return (longlong)d >> 0x20;
}



longlong __f_to_ll(float f)

{
  return (longlong)f >> 0x20;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

longlong __d_to_ull(double d)

{
  double dVar1;
  ulonglong uVar2;
  
  if (false) {
    dVar1 = ROUND(d);
  }
  else {
    dVar1 = FLOOR(d);
  }
  uVar2 = (ulonglong)dVar1;
  if (true) {
    if (-1 < (longlong)uVar2) goto LAB_700179d4;
  }
  else {
    d = d - (double)(uVar2 & 0xffffffff00000000);
    if (false) {
      d = ROUND(d);
    }
    else {
      d = FLOOR(d);
    }
    if (true) {
      uVar2 = (longlong)d | _dword_80029820;
      goto LAB_700179d4;
    }
  }
  uVar2 = 0xffffffffffffffff;
LAB_700179d4:
  return (longlong)uVar2 >> 0x20;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

longlong __f_to_ull(float f)

{
  float fVar1;
  ulonglong uVar2;
  
  if (false) {
    fVar1 = ROUND(f);
  }
  else {
    fVar1 = FLOOR(f);
  }
  uVar2 = (ulonglong)fVar1;
  if (true) {
    if (-1 < (longlong)uVar2) goto LAB_70017a70;
  }
  else {
    if (false) {
      fVar1 = ROUND(f - 9223372036854775808.00000000);
    }
    else {
      fVar1 = FLOOR(f - 9223372036854775808.00000000);
    }
    if (true) {
      uVar2 = (longlong)fVar1 | _dword_80029828;
      goto LAB_70017a70;
    }
  }
  uVar2 = 0xffffffffffffffff;
LAB_70017a70:
  return (longlong)uVar2 >> 0x20;
}



double __ll_to_d(longlong l)

{
  undefined4 in_a1_lo;
  
  return (double)CONCAT44((int)l,in_a1_lo);
}



float __ll_to_f(longlong l)

{
  undefined4 in_a1_lo;
  
  return (float)CONCAT44((int)l,in_a1_lo);
}



double __ull_to_d(ulonglong l)

{
  longlong lVar1;
  undefined4 in_a1_lo;
  double dVar2;
  uint in_register_00001030;
  
  lVar1 = CONCAT44((int)l,in_a1_lo);
  dVar2 = (double)lVar1;
  if (lVar1 < 0) {
    dVar2 = dVar2 + (double)((ulonglong)in_register_00001030 << 0x20);
  }
  return dVar2;
}



float __ull_to_f(ulonglong l)

{
  longlong lVar1;
  undefined4 in_a1_lo;
  float fVar2;
  
  lVar1 = CONCAT44((int)l,in_a1_lo);
  fVar2 = (float)lVar1;
  if (lVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  return fVar2;
}



void __osSetSR(u32 param_1)

{
  setCopReg(0,Status,(longlong)(int)param_1,0);
  return;
}



u32 __osGetSR(void)

{
  return Status;
}



s32 __osSiRawReadIo(u32 devAddr,u32 *data)

{
  int iVar1;
  s32 ret;
  
  iVar1 = __osSiDeviceBusy();
  if (iVar1 == 0) {
    ret = 0;
    *data = *(u32 *)(devAddr | 0xa0000000);
  }
  else {
    ret = -1;
  }
  return ret;
}



s32 __osSpRawWriteIo(u32 devAddr,u32 data)

{
  int iVar1;
  s32 ret;
  
  iVar1 = __osSiDeviceBusy();
  if (iVar1 == 0) {
    ret = 0;
    *(u32 *)(devAddr | 0xa0000000) = data;
  }
  else {
    ret = -1;
  }
  return ret;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osPiRawReadIo(u32 devAddr,u32 *data)

{
  do {
  } while ((_PI_STATUS_REG & 3) != 0);
  *data = *(u32 *)(_osRomBase | devAddr | 0xa0000000);
  return 0;
}



void bzero(void *dst,int len)

{
  undefined4 *puVar1;
  uint uVar2;
  uint uVar3;
  undefined4 *puVar4;
  
  if (0xb < len) {
    uVar2 = -(int)dst & 3;
    if (uVar2 != 0) {
      uVar3 = (uint)dst & 3;
      *(uint *)((int)dst - uVar3) =
           *(uint *)((int)dst - uVar3) & -1 << (4 - uVar3) * 8 | 0U >> uVar3 * 8;
      dst = (void *)((int)dst + uVar2);
    }
    uVar3 = len - uVar2 & 0xffffffe0;
    uVar2 = (len - uVar2) - uVar3;
    if (uVar3 != 0) {
      puVar4 = (undefined4 *)(uVar3 + (int)dst);
      puVar1 = (undefined4 *)dst;
      do {
        dst = puVar1 + 8;
        *puVar1 = 0;
        puVar1[1] = 0;
        puVar1[2] = 0;
        puVar1[3] = 0;
        puVar1[4] = 0;
        puVar1[5] = 0;
        puVar1[6] = 0;
        puVar1[7] = 0;
        puVar1 = (undefined4 *)dst;
      } while ((undefined4 *)dst != puVar4);
    }
    uVar3 = uVar2 & 0xfffffffc;
    len = uVar2 - uVar3;
    if (uVar3 != 0) {
      puVar4 = (undefined4 *)(uVar3 + (int)dst);
      puVar1 = (undefined4 *)dst;
      do {
        dst = puVar1 + 1;
        *puVar1 = 0;
        puVar1 = (undefined4 *)dst;
      } while ((undefined4 *)dst != puVar4);
    }
  }
  if (0 < len) {
    puVar1 = (undefined4 *)dst;
    do {
      puVar4 = (undefined4 *)((int)puVar1 + 1);
      *(undefined *)puVar1 = 0;
      puVar1 = puVar4;
    } while (puVar4 != (undefined4 *)(len + (int)dst));
  }
  return;
}



void __osSetHWIntrRoutine(OSHWIntr interrupt,s32 *handler)

{
  u32 mask;
  
  mask = __osDisableInt();
  *(s32 **)(interrupt * 4 + -0x7ffd8900) = handler;
  __osRestoreInt(mask);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 __osLeoInterrupt(void)

{
  ushort uVar1;
  uint *puVar2;
  OSPiHandle *pOVar3;
  uint uVar4;
  s32 sVar5;
  u32 *puVar6;
  u32 *puVar7;
  __OSTranxInfo *p_Var8;
  
  uVar4 = _data;
  pOVar3 = __osDiskHandle;
  if (osDiskExist == 0) {
    sVar5 = 0;
  }
  else {
    p_Var8 = &__osDiskHandle->transferInfo;
    puVar6 = &p_Var8->cmdType + (uint)(__osDiskHandle->transferInfo).blockNum * 9;
    puVar7 = puVar6 + 6;
    if ((_PI_STATUS_REG & 1) == 0) {
      do {
      } while ((_PI_STATUS_REG & 2) != 0);
      if ((_data & 0x2000000) == 0) {
        if ((_data & 0x8000000) == 0) {
          if (p_Var8->cmdType == 1) {
            if ((_data & 0x40000000) == 0) {
              uVar1 = (__osDiskHandle->transferInfo).transferMode;
              if ((__osDiskHandle->transferInfo).sectorNum + 1 ==
                  ((uint)uVar1 * 0x14 + (uint)uVar1) * 4 + (uint)uVar1) {
                _PI_STATUS_REG = 2;
                __OSGlobalIntMask = (undefined *)((uint)__OSGlobalIntMask | 0x100401);
                *puVar7 = 0;
                __osLeoResume();
                sVar5 = 1;
              }
              else {
                *puVar7 = 6;
                __osLeoAbnormalResume();
                sVar5 = 1;
              }
            }
            else {
              puVar6[7] = puVar6[7] + puVar6[9];
              (pOVar3->transferInfo).sectorNum = (pOVar3->transferInfo).sectorNum + 1;
              osEPiRawStartDma(__osDiskHandle,1,0x5000400,(void *)puVar6[7],puVar6[9]);
              sVar5 = 1;
            }
          }
          else {
            if (p_Var8->cmdType == 0) {
              if ((__osDiskHandle->transferInfo).transferMode == 3) {
                if ((int)(puVar6[10] + 0x11) < (__osDiskHandle->transferInfo).sectorNum) {
                  *puVar7 = 0;
                  __osLeoAbnormalResume();
                  return 1;
                }
                if ((_data & 0x40000000) == 0) {
                  *puVar7 = 0x11;
                  __osLeoAbnormalResume();
                  return 1;
                }
              }
              else {
                puVar6[7] = puVar6[7] + puVar6[9];
              }
              if ((((_ASIC_BM_CTL & 0x200000) != 0) && ((_ASIC_BM_CTL & 0x400000) != 0)) ||
                 ((_ASIC_BM_CTL & 0x2000000) != 0)) {
                if (puVar6[10] < 4) {
                  puVar6[puVar6[10] + 0xb] = (pOVar3->transferInfo).sectorNum + 1;
                }
                else {
                  if (((pOVar3->transferInfo).transferMode != 3) ||
                     (0x52 < (pOVar3->transferInfo).sectorNum)) {
                    *puVar7 = 0x11;
                    __osLeoAbnormalResume();
                    return 1;
                  }
                }
                puVar6[10] = puVar6[10] + 1;
              }
              if ((uVar4 & 0x10000000) == 0) {
                if ((((pOVar3->transferInfo).sectorNum == -1) &&
                    ((pOVar3->transferInfo).transferMode == 2)) &&
                   ((pOVar3->transferInfo).blockNum == 1)) {
                  if (((pOVar3->transferInfo).block[0].C1ErrNum == 0) &&
                     (puVar2 = (uint *)(pOVar3->transferInfo).block[0].C2Addr,
                     (puVar2[3] | *puVar2 | puVar2[1] | puVar2[2]) != 0)) {
                    *puVar7 = 6;
                    __osLeoAbnormalResume();
                    return 1;
                  }
                  *puVar7 = 0;
                  __osLeoResume();
                }
                (pOVar3->transferInfo).sectorNum = (pOVar3->transferInfo).sectorNum + 1;
                if ((uVar4 & 0x40000000) == 0) {
                  if ((pOVar3->transferInfo).sectorNum < 0x55) {
                    *puVar7 = 6;
                    __osLeoAbnormalResume();
                    sVar5 = 1;
                  }
                  else {
                    sVar5 = 1;
                  }
                }
                else {
                  if ((pOVar3->transferInfo).sectorNum < 0x55) {
                    osEPiRawStartDma(__osDiskHandle,0,0x5000400,(void *)puVar6[7],puVar6[9]);
                    sVar5 = 1;
                    *puVar7 = 0;
                  }
                  else {
                    *puVar7 = 6;
                    __osLeoAbnormalResume();
                    sVar5 = 1;
                  }
                }
              }
              else {
                if ((pOVar3->transferInfo).sectorNum != 0x57) {
                  *puVar7 = 6;
                  __osLeoAbnormalResume();
                }
                if (((pOVar3->transferInfo).transferMode == 2) &&
                   ((pOVar3->transferInfo).blockNum == 0)) {
                  (pOVar3->transferInfo).blockNum = 1;
                  (pOVar3->transferInfo).sectorNum = -1;
                  (pOVar3->transferInfo).block[1].dramAddr =
                       (void *)((int)(pOVar3->transferInfo).block[1].dramAddr -
                               (pOVar3->transferInfo).block[1].sectorSize);
                }
                else {
                  _PI_STATUS_REG = 2;
                  __OSGlobalIntMask = (undefined *)((uint)__OSGlobalIntMask | 0x100401);
                }
                osEPiRawStartDma(__osDiskHandle,0,0x5000000,(void *)puVar6[8],puVar6[9] << 2);
                sVar5 = 1;
                *puVar7 = 0;
              }
            }
            else {
              *puVar7 = 0x4b;
              __osLeoAbnormalResume();
              sVar5 = 1;
            }
          }
        }
        else {
          *puVar7 = 3;
          __osLeoResume();
          _PI_STATUS_REG = 2;
          __OSGlobalIntMask = (undefined *)((uint)__OSGlobalIntMask | 0x100401);
          sVar5 = 1;
        }
      }
      else {
        do {
        } while ((_PI_STATUS_REG & 2) != 0);
        sVar5 = 0;
        _ASIC_BM_CTL = (__osDiskHandle->transferInfo).bmCtlShadow | 0x1000000;
        *puVar7 = 0;
      }
    }
    else {
      _PI_STATUS_REG = 3;
      if (true) {
        do {
        } while (true);
      }
      if ((_data & 0x2000000) != 0) {
        if (true) {
          do {
          } while (true);
        }
        _ASIC_BM_CTL = (__osDiskHandle->transferInfo).bmCtlShadow | 0x1000000;
      }
      *puVar7 = 0x4b;
      __osLeoAbnormalResume();
      sVar5 = 1;
    }
  }
  return sVar5;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __osLeoAbnormalResume(void)

{
  do {
  } while ((_PI_STATUS_REG & 2) != 0);
  do {
  } while ((_PI_STATUS_REG & 2) != 0);
  _ASIC_BM_CTL = *(undefined4 *)(__osDiskHandle + 0x24);
  __osLeoResume();
  __OSGlobalIntMask = (undefined *)((uint)__OSGlobalIntMask | 0x100401);
  _PI_STATUS_REG = 2;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void __osLeoResume(void)

{
  int iVar1;
  OSThread *new;
  int iVar2;
  OSMesgQueue *mq;
  
  mq = es[0].messageQueue;
  if ((es[0].messageQueue != NULL) &&
     ((es[0].messageQueue)->validCount < (es[0].messageQueue)->msgCount)) {
    iVar1 = (es[0].messageQueue)->msgCount;
    iVar2 = (es[0].messageQueue)->first + (es[0].messageQueue)->validCount;
    (es[0].messageQueue)->msg[iVar2 % iVar1] = es[0].message;
    if (iVar1 == 0) {
      trap(0x1c00);
    }
    if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
      trap(0x1800);
    }
    mq->validCount = mq->validCount + 1;
    if (mq->mtqueue->next != NULL) {
      new = __osPopThread((OSThread *)mq);
      __osEnqueueThread(&__osRunQueue,new);
    }
  }
  return;
}



u32 __osDisableInt(void)

{
  setCopReg(0,CONCAT44(uRegister00002060,Status),(longlong)(int)Status & 0xfffffffffffffffe,0);
  return (u32)(Status & 1);
}



void __osRestoreInt(u32 mask)

{
  setCopReg(0,CONCAT44(uRegister00002060,Status),(longlong)(int)(Status | mask),0);
  return;
}



void __osTimerServicesInit(void)

{
  undefined4 uVar1;
  OSTimer *pOVar2;
  
  __osCurrentTime._4_4_ = 0;
  __osCurrentTime._0_4_ = 0;
  __osBaseCounter = 0;
  __osViIntrCount = 0;
  *(OSTimer **)&__osTimerList->prev = __osTimerList;
  __osTimerList->next = __osTimerList->prev;
  pOVar2 = __osTimerList;
  *(undefined4 *)&__osTimerList->value = 0;
  *(undefined4 *)((int)&pOVar2->value + 4) = 0;
  pOVar2 = __osTimerList;
  uVar1 = *(undefined4 *)((int)&__osTimerList->value + 4);
  *(undefined4 *)&__osTimerList->interval = *(undefined4 *)&__osTimerList->value;
  *(undefined4 *)((int)&pOVar2->interval + 4) = uVar1;
  __osTimerList->mq = NULL;
  __osTimerList->msg = NULL;
  return;
}



void __osTimerInterrupt(void)

{
  OSTimer *t;
  uint uVar1;
  int iVar2;
  u32 uVar3;
  uint uVar4;
  
  if ((OSTimer *)__osTimerList->next != __osTimerList) {
    while (t = (OSTimer *)__osTimerList->next, t != __osTimerList) {
      uVar3 = osGetCount();
      uVar4 = uVar3 - __osTimerCounter;
      if ((true) && ((*(int *)&t->value != 0 || (uVar4 < *(uint *)((int)&t->value + 4))))) {
        uVar1 = *(uint *)((int)&t->value + 4);
        iVar2 = *(int *)&t->value;
        __osTimerCounter = uVar3;
        *(int *)((int)&t->value + 4) = uVar1 - uVar4;
        *(uint *)&t->value = iVar2 - (uint)(uVar1 < uVar4);
        __osSetTimerIntr((longlong)*(int *)&t->value);
        return;
      }
      __osTimerCounter = uVar3;
      t->prev->next = t->next;
      t->next->prev = t->prev;
      t->next = NULL;
      t->prev = NULL;
      if (t->mq != NULL) {
        osSendMesg(t->mq,t->msg,0);
      }
      iVar2 = *(int *)((int)&t->interval + 4);
      if ((*(int *)&t->interval != 0) || (iVar2 != 0)) {
        *(int *)&t->value = *(int *)&t->interval;
        *(int *)((int)&t->value + 4) = iVar2;
        __osInsertTimer(t);
      }
    }
    __osSetCompare(0);
    __osTimerCounter = 0;
  }
  return;
}



void __osSetTimerIntr(OSTime tim)

{
  u32 mask;
  int in_a1_lo;
  
  mask = __osDisableInt();
  __osTimerCounter = osGetCount();
  __osSetCompare(__osTimerCounter + in_a1_lo);
  __osRestoreInt(mask);
  return;
}



OSTime __osInsertTimer(OSTimer *t)

{
  uint uVar1;
  int iVar2;
  u32 mask;
  uint uStack16;
  uint uStack12;
  OSTimer *pOStack4;
  
  mask = __osDisableInt();
  pOStack4 = (OSTimer *)__osTimerList->next;
  uStack12 = *(uint *)((int)&t->value + 4);
  uStack16 = *(uint *)&t->value;
  if (pOStack4 != __osTimerList) {
    if ((*(uint *)&pOStack4->value <= uStack16) &&
       ((*(uint *)&pOStack4->value < uStack16 || (*(uint *)((int)&pOStack4->value + 4) < uStack12)))
       ) {
      while( true ) {
        uVar1 = *(uint *)((int)&pOStack4->value + 4);
        uStack16 = (uStack16 - *(int *)&pOStack4->value) - (uint)(uStack12 < uVar1);
        uStack12 -= uVar1;
        pOStack4 = (OSTimer *)pOStack4->next;
        if (pOStack4 == __osTimerList) break;
        if ((uStack16 <= *(uint *)&((OSTimer_s *)pOStack4)->value) &&
           ((uStack16 < *(uint *)&((OSTimer_s *)pOStack4)->value ||
            (uStack12 <= *(uint *)((int)&((OSTimer_s *)pOStack4)->value + 4))))) break;
      }
    }
  }
  *(uint *)&t->value = uStack16;
  *(uint *)((int)&t->value + 4) = uStack12;
  if (pOStack4 != __osTimerList) {
    uVar1 = *(uint *)((int)&((OSTimer_s *)pOStack4)->value + 4);
    iVar2 = *(int *)&((OSTimer_s *)pOStack4)->value;
    *(int *)((int)&((OSTimer_s *)pOStack4)->value + 4) = uVar1 - uStack12;
    *(uint *)&((OSTimer_s *)pOStack4)->value = (iVar2 - uStack16) - (uint)(uVar1 < uStack12);
  }
  *(OSTimer **)&t->next = pOStack4;
  t->prev = ((OSTimer_s *)pOStack4)->prev;
  *(OSTimer **)&((OSTimer_s *)pOStack4)->prev->next = t;
  *(OSTimer **)&((OSTimer_s *)pOStack4)->prev = t;
  __osRestoreInt(mask);
  return (longlong)(int)uStack16;
}



OSPri osGetThreadPri(OSThread *t)

{
  if (t == NULL) {
    t = __osRunningThread;
  }
  return t->priority;
}



// WARNING: Heritage AFTER dead removal. Example location: r0x80028018 : 0x70018b14
// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Restarted to delay deadcode elimination for space: ram

void __osViInit(void)

{
  bzero(&vi,0x60);
  __osViCurr = &vi;
  __osViNext = &vi_buffer_next;
  vi_buffer_next.retraceCount = 1;
  vi.retraceCount = 1;
  if (osTvType == 0) {
    osViClock = 0x2f5b2d2;
    vi_buffer_next.modep = (OSViMode *)osViModePalLan1;
  }
  else {
    osViClock = 0x2e6d354;
    vi_buffer_next.modep = (OSViMode *)osViModeNtscLan1;
  }
  vi_buffer_next.state = 0x20;
  vi_buffer_next.control = ((vi_buffer_next.modep)->comRegs).ctrl;
  do {
  } while (10 < _VI_CURRENT_REG);
  _VI_CONTROL_REG = 0;
  __osViSwapContext();
  return;
}



__OSViContext * __osViGetCurrentContext(void)

{
  return __osViCurr;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __osViSwapContext(void)

{
  float fVar1;
  __OSViContext *p_Var2;
  uint uVar3;
  __OSViContext *p_Var4;
  __OSViContext *p_Var5;
  float fVar6;
  uint uVar7;
  u32 hStart;
  u32 uStack12;
  __OSViContext *vc;
  OSViMode *vm;
  
  vc = __osViNext;
  vm = __osViNext->modep;
  uVar3 = _VI_CURRENT_REG & 1;
  uStack12 = osVirtualToPhysical(__osViNext->framep);
  uStack12 = vm->fldRegs[uVar3].origin + uStack12;
  if ((vc->state & 2) == 0) {
    *(u32 *)&(vc->x).field_0x8 = (vm->comRegs).xScale;
  }
  else {
    *(uint *)&(vc->x).field_0x8 = *(uint *)&(vc->x).field_0x8 | (vm->comRegs).xScale & 0xfffff000;
  }
  if ((vc->state & 4) == 0) {
    *(u32 *)(vc + 1) = vm->fldRegs[uVar3].yScale;
    goto LAB_70018d30;
  }
  fVar6 = (float)(vm->fldRegs[uVar3].yScale & 0xfff);
  if (false) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  fVar6 = *(float *)((int)&(vc->y).factor + 2) * fVar6;
  if (false) {
    fVar1 = ROUND(fVar6);
  }
  else {
    fVar1 = FLOOR(fVar6);
  }
  uVar7 = (uint)fVar1;
  if (true) {
    if ((int)uVar7 < 0) goto LAB_70018cc4;
  }
  else {
    if (false) {
      fVar6 = ROUND(fVar6 - 2147483648.00000000);
    }
    else {
      fVar6 = FLOOR(fVar6 - 2147483648.00000000);
    }
    if (false) {
LAB_70018cc4:
      uVar7 = 0xffffffff;
    }
    else {
      uVar7 = (int)fVar6 | 0x80000000;
    }
  }
  *(uint *)(vc + 1) = uVar7;
  *(uint *)(vc + 1) = *(uint *)(vc + 1) | vm->fldRegs[uVar3].yScale & 0xfffff000;
LAB_70018d30:
  hStart = (vm->comRegs).hStart;
  if ((vc->state & 0x20) != 0) {
    hStart = 0;
  }
  if ((vc->state & 0x40) != 0) {
    *(undefined4 *)(vc + 1) = 0;
    uStack12 = osVirtualToPhysical(vc->framep);
  }
  if ((vc->state & 0x80) != 0) {
    *(uint *)(vc + 1) = ((uint)*(ushort *)&(vc->y).field_0x6 & 0x3ff) << 0x10;
    uStack12 = osVirtualToPhysical(vc->framep);
  }
  p_Var2 = __osViCurr;
  _VI_ORIGIN_REG = uStack12;
  _VI_WIDTH_REG = (vm->comRegs).width;
  _VI_BURST_REG = (vm->comRegs).burst;
  _VI_V_SYNC_REG = (vm->comRegs).vSync;
  _VI_H_SYNC_REG = (vm->comRegs).hSync;
  _VI_LEAP_REG = (vm->comRegs).leap;
  _VI_H_START_REG = hStart;
  _VI_V_START_REG = vm->fldRegs[uVar3].vStart;
  _VI_V_BURST_REG = vm->fldRegs[uVar3].vBurst;
  _VI_V_INTR_REG = vm->fldRegs[uVar3].vIntr;
  _VI_X_SCALE_REG = *(undefined4 *)&(vc->x).field_0x8;
  _VI_Y_SCALE_REG = *(undefined4 *)(vc + 1);
  _VI_CONTROL_REG = vc->control;
  __osViNext = __osViCurr;
  __osViCurr = vc;
  p_Var4 = vc;
  do {
    p_Var5 = (__OSViContext *)&p_Var4->control;
    *(undefined4 *)p_Var2 = *(undefined4 *)p_Var4;
    p_Var2->framep = p_Var4->framep;
    p_Var2->modep = p_Var4->modep;
    p_Var4 = p_Var5;
    p_Var2 = (__OSViContext *)&p_Var2->control;
  } while (p_Var5 != (__OSViContext *)&vc[1].framep);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

u32 __osSpGetStatus(void)

{
  return _SP_STATUS_REG;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void __osSpSetStatus(u32 data)

{
  _SP_STATUS_REG = data;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 __osSpSetPc(u32 data)

{
  s32 sVar1;
  
  if ((_SP_STATUS_REG & 1) == 0) {
    sVar1 = -1;
  }
  else {
    sVar1 = 0;
    _SP_PC_REG = data;
  }
  return sVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 __osSpRawStartDma(s32 direction,u32 devAddr,void *dramAddr,u32 size)

{
  int iVar1;
  s32 ret;
  
  iVar1 = __osSpDeviceBusy();
  if (iVar1 == 0) {
    _SP_MEM_ADDR_REG = devAddr;
    _SP_DRAM_ADDR_REG = osVirtualToPhysical(dramAddr);
    if (direction == 0) {
      _SP_WR_LEN_REG = size - 1;
    }
    else {
      _SP_RD_LEN_REG = size - 1;
    }
    ret = 0;
  }
  else {
    ret = -1;
  }
  return ret;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int __osSpDeviceBusy(void)

{
  return (int)(uint)((_SP_STATUS_REG & 0x1c) != 0);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

ulonglong __osDpDeviceBusy(void)

{
  return (ulonglong)((_DPC_STATUS_REG & 0x100) != 0);
}



void __osProbeTLB(void *vaddr)

{
  setCopReg(0,EntryHi,(longlong)EntryHi._4_4_ & 0xffU | (longlong)(int)vaddr & 0xffffffffffffe000U,0
           );
  Index = TLB_probe_for_matching_entry(EntryHi);
  if ((Index & 0x80000000) == 0) {
    EntryHi = TLB_read_indexed_entryHi(Index);
    EntryLo0 = TLB_read_indexed_entryLo0(Index);
    EntryLo1 = TLB_read_indexed_entryLo1(Index);
    PageMask = TLB_read_indexed_entryLo1(Index);
  }
  setCopReg(0,EntryHi,(longlong)EntryHi._4_4_,0);
  return;
}



void alSynDelete(ALSynth *drvr)

{
  drvr->head = NULL;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

ulonglong __osAiDeviceBusy(void)

{
  return (ulonglong)((_AI_STATUS_REG & 0x80000000) != 0);
}



void alSaveNew(ALSave *f)

{
  alFilterNew((ALFilter *)f,_alSavePull,alSaveParam,3);
  f[1].first = 0;
  *(undefined4 *)(f + 2) = 1;
  return;
}



void alMainBusNew(ALMainBus *m,void *sources,int maxSources)

{
  alFilterNew((ALFilter *)m,_alMainBusPull,alMainBusParam,7);
  *(undefined4 *)(m + 0x14) = 0;
  *(int *)(m + 0x18) = maxSources;
  *(void **)(m + 0x1c) = sources;
  return;
}



void alAuxBusNew(ALAuxBus *m,void *sources,int maxSources)

{
  alFilterNew((ALFilter *)m,_alAuxBusPull,alAuxBusParam,6);
  *(undefined4 *)(m + 0x14) = 0;
  *(int *)(m + 0x18) = maxSources;
  *(void **)(m + 0x1c) = sources;
  return;
}



void alResampleNew(ALResampler *r,ALHeap *hp)

{
  s32 in_v0_lo;
  
  alFilterNew((ALFilter *)r,alResamplePull,alResampleParam,1);
  _alHeapDBAlloc(NULL,0,hp,1,0x20);
  r->first = in_v0_lo;
  *(undefined4 *)(r + 1) = 1;
  r[1].upitch = 0;
  r->ctrlTail = NULL;
  r[1].state = NULL;
  r[1].ratio = 0.00000000;
  r->motion = 0;
  r->ctrlList = (ALParam *)0x3f800000;
  return;
}



void alLoadNew(ALLoadFilter *f,ALDMANew dmaNew,ALHeap *hp)

{
  ALWaveTable_s *in_v0_lo;
  ALDMAproc pAVar1;
  
  alFilterNew((ALFilter *)f,alAdpcmPull,alLoadParam,0);
  _alHeapDBAlloc(NULL,0,hp,1,0x20);
  *(ALWaveTable_s **)&(f->loop).count = in_v0_lo;
  _alHeapDBAlloc(NULL,0,hp,1,0x20);
  f->table = in_v0_lo;
  pAVar1 = (*dmaNew)(&f->memin);
  *(ALDMAproc *)&f->first = pAVar1;
  f[1].state = NULL;
  f[1].lstate = (ADPCM_STATE *)((int)&rgba + 1);
  f[1].loop.start = 0;
  return;
}



void alEnvmixerNew(ALEnvMixer *e,ALHeap *hp)

{
  undefined4 in_v0_lo;
  
  alFilterNew((ALFilter *)e,_alEnvmixerPull,alEnvmixerParam,4);
  _alHeapDBAlloc(NULL,0,hp,1,0x50);
  *(undefined4 *)&e->lratl = in_v0_lo;
  e->motion = 1;
  *(undefined4 *)&e[1].cvolL = 0;
  e->rratl = 1;
  *(undefined2 *)&e->first = 1;
  *(undefined2 *)((int)&e->ctrlList + 2) = 1;
  e->rratm = 1;
  e->rtgt = 1;
  *(undefined2 *)&e->delta = 0;
  *(undefined2 *)((int)&e->delta + 2) = 0;
  *(undefined2 *)((int)&e->segEnd + 2) = 1;
  *(undefined2 *)&e->segEnd = 0;
  e->ctrlTail = NULL;
  e->sources = NULL;
  e->ltgt = 0;
  *(undefined4 *)(e + 1) = 0;
  e[1].state = NULL;
  *(undefined4 *)&e[1].pan = 0;
  return;
}



void init_lpfilter(ALLowPass *lp)

{
  byte *pbVar1;
  int iVar2;
  int iVar3;
  ALLowPass *pAVar4;
  short sVar5;
  double dVar6;
  double dVar7;
  uint in_register_00001060;
  
  sVar5 = (short)(((int)lp->fc << 0xe) >> 0xf);
  lp->fgain = 0x4000 - sVar5;
  *(undefined4 *)(lp + 1) = 1;
  iVar2 = 0;
  do {
    pAVar4 = lp;
    iVar3 = iVar2;
    iVar2 = iVar3 + 1;
    *(undefined2 *)(pAVar4->fcvec + 4) = 0;
    lp = (ALLowPass *)&pAVar4->fgain;
  } while (iVar2 < 8);
  iVar3 += 2;
  *(short *)(pAVar4->fcvec + 6) = sVar5;
  dVar7 = (double)(int)sVar5 / (double)((ulonglong)in_register_00001060 << 0x20);
  dVar6 = dVar7;
  pbVar1 = pAVar4->fcvec;
  while (iVar3 < 0x10) {
    dVar6 = dVar6 * dVar7;
    iVar3 += 1;
    *(short *)(pbVar1 + 8) = (short)(int)(dVar6 * (double)((ulonglong)in_register_00001060 << 0x20))
    ;
    pbVar1 = pbVar1 + 2;
  }
  return;
}



void alFxNew(ALFx *r,ALSynConfig *c,ALHeap *hp)

{
  byte bVar1;
  double dVar2;
  ALSynConfig *pAVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  uint uVar7;
  undefined4 *puVar8;
  ulonglong uVar9;
  uint uVar10;
  double dVar11;
  double dVar12;
  
  alFilterNew((ALFilter *)r,NULL,alFxParam,5);
  *(code **)&r->base = _alFxPull;
  r[1].length = 0x7001ffa8;
  puVar8 = NULL_PARAMS;
  switch(c->fxType) {
  case '\x01':
    puVar8 = SMALLROOM_PARAMS;
    break;
  case '\x02':
    puVar8 = BIGROOM_PARAMS;
    break;
  case '\x03':
    puVar8 = CHORUS_PARAMS;
    break;
  case '\x04':
    puVar8 = FLANGE_PARAMS;
    break;
  case '\x05':
    puVar8 = ECHO_PARAMS;
    break;
  case '\x06':
    puVar8 = c->params;
  }
  uVar10 = *puVar8;
  uVar4 = 2;
  *(char *)&r[1].input = (char)uVar10;
  *(undefined4 *)(r + 1) = puVar8[1];
  pAVar3 = c;
  _alHeapDBAlloc(NULL,0,hp,uVar10 & 0xff,0x28);
  *(ALSynConfig **)&r[1].base = pAVar3;
  _alHeapDBAlloc(NULL,0,hp,*(s32 *)(r + 1),2);
  *(ALSynConfig **)&r->section_count = pAVar3;
  *(ALSynConfig **)&r->paramHdl = pAVar3;
  uVar10 = 0;
  if (*(int *)(r + 1) != 0) {
    iVar5 = *(int *)&r->section_count;
    while( true ) {
      *(undefined2 *)(iVar5 + uVar10 * 2) = 0;
      uVar10 = uVar10 + 1 & 0xffff;
      if (*(uint *)(r + 1) <= uVar10) break;
      iVar5 = *(int *)&r->section_count;
    }
  }
  dVar2 = CONVERT;
  uVar9 = 0;
  if (*(char *)&r[1].input != '\0') {
    do {
      uVar7 = uVar4 + 1 & 0xffff;
      puVar6 = (uint *)(r[1].base + (int)uVar9 * 0x14);
      *puVar6 = puVar8[uVar4];
      uVar10 = uVar7 + 1 & 0xffff;
      puVar6[1] = puVar8[uVar7];
      uVar4 = uVar10 + 1 & 0xffff;
      *(undefined2 *)((int)puVar6 + 10) = (short)puVar8[uVar10];
      uVar10 = uVar4 + 1 & 0xffff;
      *(short *)(puVar6 + 2) = (short)puVar8[uVar4];
      uVar4 = uVar10 + 1 & 0xffff;
      *(short *)(puVar6 + 3) = (short)puVar8[uVar10];
      uVar10 = puVar8[uVar4];
      uVar7 = uVar4 + 2;
      if (uVar10 == 0) {
        puVar6[9] = 0;
      }
      else {
        uVar7 = uVar4 + 1 & 0xffff;
        dVar11 = (double)((float)uVar10 / 1000.00000000) + (double)((float)uVar10 / 1000.00000000);
        dVar12 = (double)(puVar6[1] - *puVar6);
        *(float *)(puVar6 + 4) = (float)(dVar11 / (double)c->outputRate);
        if ((int)(puVar6[1] - *puVar6) < 0) {
          dVar12 = dVar12 + (double)((ulonglong)dVar11 & 0xffffffff00000000);
        }
        uVar4 = puVar8[uVar7];
        uVar7 += 1;
        puVar6[5] = 0x3f800000;
        puVar6[6] = 0;
        *(float *)(puVar6 + 7) = (float)(((double)uVar4 / dVar2) * dVar12);
        _alHeapDBAlloc(NULL,0,hp,1,0x34);
        puVar6[9] = uVar10;
        _alHeapDBAlloc(NULL,0,hp,1,0x20);
        *(uint *)(puVar6[9] + 0x14) = uVar10;
        *(undefined4 *)(puVar6[9] + 0x20) = 0;
        *(undefined4 *)(puVar6[9] + 0x24) = 1;
      }
      if (puVar8[uVar7 & 0xffff] == 0) {
        puVar6[8] = 0;
        bVar1 = *(byte *)&r[1].input;
      }
      else {
        _alHeapDBAlloc(NULL,0,hp,1,0x30);
        puVar6[8] = uVar10;
        _alHeapDBAlloc(NULL,0,hp,1,8);
        *(uint *)(puVar6[8] + 0x28) = uVar10;
        *(undefined2 *)puVar6[8] = (short)puVar8[uVar7 & 0xffff];
        init_lpfilter((ALLowPass *)puVar6[8]);
        bVar1 = *(byte *)&r[1].input;
      }
      uVar4 = (uVar7 & 0xffff) + 1 & 0xffff;
      uVar9 = (longlong)((int)uVar9 + 1) & 0xffff;
    } while (uVar9 < (ulonglong)bVar1);
  }
  return;
}



ALFxRef _alSynAllocFX(ALSynth *s,s16 bus,ALSynConfig *c,ALHeap *hp)

{
  int iVar1;
  
  iVar1 = (int)bus * 0x4c;
  alFxNew((ALFx *)(s->auxBus + iVar1 + 0x20),c,hp);
  alFxParam(s->auxBus + iVar1 + 0x20,1,s->auxBus + iVar1);
  alMainBusParam(s->mainBus,2,s->auxBus + iVar1 + 0x20);
  return (ALFxRef)(s->auxBus + iVar1 + 0x20);
}



s32 alMainBusParam(void *filter,s32 paramID,void *param)

{
  if (paramID == 2) {
    *(void **)(*(int *)((int)filter + 0x1c) + *(int *)((int)filter + 0x14) * 4) = param;
    *(int *)((int)filter + 0x14) = *(int *)((int)filter + 0x14) + 1;
  }
  return 0;
}



longlong _alMainBusPull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  uint uVar1;
  undefined4 *puVar2;
  int iVar3;
  int *piVar4;
  longlong lVar5;
  
  piVar4 = *(int **)((int)filter + 0x1c);
  uVar1 = outCount << 1;
  *(undefined4 *)p = 0x2000440;
  *(uint *)((int)p + 4) = uVar1;
  *(undefined4 *)(p + 1) = 0x2000580;
  *(uint *)((int)p + 0xc) = uVar1;
  iVar3 = 0;
  lVar5 = (longlong)(int)(p + 2);
  if (0 < *(int *)((int)filter + 0x14)) {
    do {
      puVar2 = (undefined4 *)
               (**(code **)(*piVar4 + 4))(*piVar4,outp,outCount,sampleOffset,(int)lVar5);
      *puVar2 = 0x8000000;
      puVar2[1] = uVar1 & 0xffff;
      puVar2[3] = 0x6c00440;
      puVar2[2] = 0xc007fff;
      puVar2[5] = 0x8000580;
      puVar2[4] = 0xc007fff;
      iVar3 += 1;
      piVar4 = piVar4 + 1;
      lVar5 = (longlong)(int)(puVar2 + 6);
    } while (iVar3 < *(int *)((int)filter + 0x14));
  }
  return lVar5;
}



s32 alLoadParam(void *filter,s32 paramID,void *param)

{
  byte bVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *in_v0_lo;
  
  if (paramID == 4) {
    in_v0_lo = *(undefined4 **)((int)filter + 0x28);
    *(undefined4 *)((int)filter + 0x3c) = 0;
    *(undefined4 *)((int)filter + 0x40) = 1;
    *(undefined4 *)((int)filter + 0x38) = 0;
    if (in_v0_lo != NULL) {
      *(undefined4 *)((int)filter + 0x44) = *in_v0_lo;
      if (*(char *)(in_v0_lo + 2) == '\0') {
        if (in_v0_lo[3] != 0) {
          *(undefined4 *)((int)filter + 0x24) = *(undefined4 *)(in_v0_lo[3] + 8);
        }
      }
      else {
        if ((*(char *)(in_v0_lo + 2) == '\x01') && (in_v0_lo[3] != 0)) {
          *(undefined4 *)((int)filter + 0x24) = *(undefined4 *)(in_v0_lo[3] + 8);
        }
      }
    }
  }
  else {
    if (paramID == 5) {
      *(void **)((int)filter + 0x28) = param;
      uVar2 = *(undefined4 *)param;
      *(undefined4 *)((int)filter + 0x38) = 0;
      *(undefined4 *)((int)filter + 0x44) = uVar2;
      bVar1 = *(byte *)((int)param + 8);
      in_v0_lo = (undefined4 *)(uint)bVar1;
      if (bVar1 == 0) {
        *(undefined4 *)((int)filter + 4) = 0x7001a15c;
        iVar3 = *(int *)(*(int *)((int)filter + 0x28) + 4);
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar3 == -0x80000000)) {
          trap(0x1800);
        }
        *(int *)(*(int *)((int)filter + 0x28) + 4) = (iVar3 / 9) * 9;
        in_v0_lo = *(undefined4 **)((int)filter + 0x28);
        *(int *)((int)filter + 0x2c) = *(int *)in_v0_lo[4] * 0x10 * ((int *)in_v0_lo[4])[1];
        if ((undefined4 *)in_v0_lo[3] == NULL) {
          *(undefined4 *)((int)filter + 0x24) = 0;
          *(undefined4 *)((int)filter + 0x20) = 0;
          *(undefined4 *)((int)filter + 0x1c) = 0;
        }
        else {
          *(undefined4 *)((int)filter + 0x1c) = *(undefined4 *)in_v0_lo[3];
          *(undefined4 *)((int)filter + 0x20) = *(undefined4 *)(in_v0_lo[3] + 4);
          *(undefined4 *)((int)filter + 0x24) = *(undefined4 *)(in_v0_lo[3] + 8);
          alCopy((void *)(in_v0_lo[3] + 0xc),*(void **)((int)filter + 0x18),0x20);
        }
      }
      else {
        if (bVar1 == 1) {
          in_v0_lo = *(undefined4 **)((int)filter + 0x28);
          *(undefined4 *)((int)filter + 4) = 0x70019c84;
          if ((undefined4 *)in_v0_lo[3] == NULL) {
            *(undefined4 *)((int)filter + 0x24) = 0;
            *(undefined4 *)((int)filter + 0x20) = 0;
            *(undefined4 *)((int)filter + 0x1c) = 0;
          }
          else {
            *(undefined4 *)((int)filter + 0x1c) = *(undefined4 *)in_v0_lo[3];
            *(undefined4 *)((int)filter + 0x20) = *(undefined4 *)(in_v0_lo[3] + 4);
            *(undefined4 *)((int)filter + 0x24) = *(undefined4 *)(in_v0_lo[3] + 8);
          }
        }
      }
    }
  }
  return (s32)in_v0_lo;
}



// WARNING: Instruction at (ram,0x70019e78) overlaps instruction at (ram,0x70019e74)
// 

longlong _alRaw16Pull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  short sVar1;
  int *piVar2;
  bool bVar3;
  uint uVar5;
  ulonglong uVar4;
  int iVar6;
  short sVar9;
  int iVar7;
  uint uVar8;
  uint uVar10;
  longlong lVar11;
  ulonglong uVar12;
  int iVar13;
  uint *puVar14;
  uint *puVar15;
  uint uVar16;
  uint uVar17;
  
  lVar11 = (longlong)(int)p;
  if (outCount != 0) {
    if (*(uint *)((int)filter + 0x20) < (uint)(*(int *)((int)filter + 0x38) + outCount)) {
      uVar16 = *(uint *)((int)filter + 0x20) - *(int *)((int)filter + 0x38);
      if (*(int *)((int)filter + 0x24) != 0) {
        uVar17 = uVar16 * 2;
        if ((int)uVar16 < 1) {
          sVar9 = 0;
        }
        else {
          uVar5 = (**(code **)((int)filter + 0x30))
                            (*(undefined4 *)((int)filter + 0x44),uVar17,
                             *(undefined4 *)((int)filter + 0x34));
          uVar8 = uVar5 & 7;
          sVar1 = *outp;
          sVar9 = (short)uVar8;
          *(uint *)((int)p + 4) = ((uVar17 + uVar8) - (uVar17 + uVar8 & 7)) + 8 & 0xffff;
          *(uint *)p = (int)sVar1 & 0xffffU | 0x8000000;
          *(int *)((int)p + 0xc) = uVar5 - uVar8;
          *(undefined4 *)(p + 1) = 0x4000000;
          lVar11 = (longlong)(int)(p + 2);
        }
        *outp = *outp + sVar9;
        iVar6 = **(int **)((int)filter + 0x28);
        *(int *)((int)filter + 0x38) = *(int *)((int)filter + 0x1c);
        *(int *)((int)filter + 0x44) = iVar6 + *(int *)((int)filter + 0x1c) * 2;
        uVar12 = SEXT28(*outp);
        if ((int)uVar16 < outCount) {
          iVar6 = *(int *)((int)filter + 0x24);
          while( true ) {
            iVar13 = (int)uVar12 + uVar17;
            outCount -= uVar16;
            if ((iVar6 != -1) && (iVar6 != 0)) {
              *(int *)((int)filter + 0x24) = iVar6 + -1;
            }
            uVar16 = *(int *)((int)filter + 0x20) - *(int *)((int)filter + 0x1c);
            if ((uint)outCount < uVar16) {
              uVar16 = outCount;
            }
            puVar14 = (uint *)lVar11;
            uVar17 = uVar16 * 2;
            uVar4 = (**(code **)((int)filter + 0x30))
                              (*(undefined4 *)((int)filter + 0x44),uVar17,
                               *(undefined4 *)((int)filter + 0x34));
            uVar12 = SEXT48(iVar13);
            iVar6 = (int)(uVar4 & 7);
            if ((uVar12 & 7) == 0) {
              iVar7 = 0;
            }
            else {
              iVar7 = 8 - (int)(uVar12 & 7);
            }
            puVar14[1] = ((uVar17 + iVar6) - (uVar17 + iVar6 & 7)) + 8 & 0xffff;
            *puVar14 = iVar13 + iVar7 & 0xffffU | 0x8000000;
            puVar14[2] = 0x4000000;
            puVar14[3] = (int)uVar4 - iVar6;
            puVar15 = puVar14 + 4;
            if (((uVar4 & 7) != 0) || (iVar7 != 0)) {
              *puVar15 = iVar13 + iVar6 + iVar7 & 0xffffffU | 0xa000000;
              puVar14[5] = iVar13 * 0x10000 | uVar17 & 0xffff;
              puVar15 = puVar14 + 6;
            }
            lVar11 = (longlong)(int)puVar15;
            if (outCount <= (int)uVar16) break;
            iVar6 = *(int *)((int)filter + 0x24);
          }
        }
        *(int *)((int)filter + 0x38) = *(int *)((int)filter + 0x38) + outCount;
        *(int *)((int)filter + 0x44) = *(int *)((int)filter + 0x44) + outCount * 2;
        return lVar11;
      }
      piVar2 = *(int **)((int)filter + 0x28);
    }
    else {
      piVar2 = *(int **)((int)filter + 0x28);
    }
    uVar16 = outCount * 2;
    iVar6 = *(int *)((int)filter + 0x44) + uVar16;
    uVar17 = (iVar6 - *piVar2) - piVar2[1];
    if ((int)uVar17 < 0) {
      uVar17 = 0;
      bVar3 = (int)uVar16 < 0;
    }
    else {
      bVar3 = (int)uVar16 < (int)uVar17;
    }
    uVar5 = uVar16;
    if (!bVar3) {
      uVar5 = uVar17;
    }
    if (bVar3 || (int)uVar16 <= (int)uVar17) {
      *(int *)((int)filter + 0x44) = iVar6;
    }
    else {
      sVar9 = 0;
      if (0 < outCount) {
        uVar17 = (**(code **)((int)filter + 0x30))
                           (*(int *)((int)filter + 0x44),uVar16 - uVar5,
                            *(undefined4 *)((int)filter + 0x34));
        uVar8 = uVar17 & 7;
        sVar1 = *outp;
        sVar9 = (short)uVar8;
        uVar10 = (uVar16 - uVar5) + uVar8;
        *(uint *)((int)p + 4) = (uVar10 - (uVar10 & 7)) + 8 & 0xffff;
        *(uint *)p = (int)sVar1 & 0xffffU | 0x8000000;
        *(int *)((int)p + 0xc) = uVar17 - uVar8;
        *(undefined4 *)(p + 1) = 0x4000000;
        lVar11 = (longlong)(int)(p + 2);
      }
      *outp = *outp + sVar9;
      *(int *)((int)filter + 0x38) = *(int *)((int)filter + 0x38) + outCount;
      *(int *)((int)filter + 0x44) = *(int *)((int)filter + 0x44) + uVar16;
    }
    iVar6 = uVar16 - uVar5;
    if (uVar5 != 0) {
      if (iVar6 < 0) {
        iVar6 = 0;
      }
      puVar14 = (uint *)lVar11;
      *puVar14 = (int)*outp + iVar6 & 0xffffffU | 0x2000000;
      puVar14[1] = uVar5;
      lVar11 = (longlong)(int)(puVar14 + 2);
    }
  }
  return lVar11;
}



uint * proc_7001A030(void)

{
  uint uVar1;
  uint uVar2;
  uint *unaff_s0_lo;
  longlong unaff_s1;
  uint uVar3;
  int unaff_s2_lo;
  short unaff_s3_lo;
  ulonglong unaff_s4;
  short unaff_s5_lo;
  uint unaff_s6_lo;
  
  if (unaff_s1 < 1) {
    uVar2 = 0;
  }
  else {
    uVar1 = (**(code **)(unaff_s2_lo + 0x30))
                      (*(undefined4 *)(unaff_s2_lo + 0x44),unaff_s1,
                       *(undefined4 *)(unaff_s2_lo + 0x34));
    uVar2 = uVar1 & 7;
    uVar3 = (int)unaff_s1 + uVar2;
    *unaff_s0_lo = (int)unaff_s3_lo & 0xffffU | 0x8000000;
    unaff_s0_lo[1] = (uVar3 - (uVar3 & 7)) + 8 & 0xffff;
    unaff_s0_lo[2] = 0x4000000;
    unaff_s0_lo[3] = uVar1 - uVar2;
    unaff_s0_lo = unaff_s0_lo + 4;
  }
  if ((unaff_s4 & 2) != 0) {
    *unaff_s0_lo = 0xf000000;
    unaff_s0_lo[1] = *(uint *)(unaff_s2_lo + 0x18) & 0x1fffffff;
    unaff_s0_lo = unaff_s0_lo + 2;
  }
  *unaff_s0_lo = (int)unaff_s3_lo + uVar2 & 0xffff | 0x8000000;
  unaff_s0_lo[1] = (int)unaff_s5_lo << 0x10 | (unaff_s6_lo & 0x7fff) << 1;
  unaff_s0_lo[2] = ((uint)unaff_s4 & 0xff) << 0x10 | 0x1000000;
  unaff_s0_lo[3] = *(uint *)(unaff_s2_lo + 0x14) & 0x1fffffff;
  *(undefined4 *)(unaff_s2_lo + 0x40) = 0;
  return unaff_s0_lo + 4;
}



uint * alAdpcmPull(int param_1,short *param_2,uint param_3,undefined8 param_4,uint *param_5)

{
  short sVar1;
  bool bVar2;
  bool bVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  int iVar8;
  longlong lVar7;
  int iVar9;
  int iVar10;
  int iVar11;
  
  bVar3 = false;
  if (param_3 != 0) {
    *param_5 = *(uint *)(param_1 + 0x2c) & 0xffffff | 0xb000000;
    iVar8 = 0;
    param_5[1] = *(int *)(*(int *)(param_1 + 0x28) + 0x10) + 8U & 0x1fffffff;
    bVar2 = *(uint *)(param_1 + 0x20) < *(int *)(param_1 + 0x38) + param_3;
    if (bVar2) {
      bVar2 = *(int *)(param_1 + 0x24) != 0;
    }
    uVar6 = param_3;
    if (bVar2) {
      uVar6 = *(uint *)(param_1 + 0x20) - *(int *)(param_1 + 0x38);
    }
    if (*(int *)(param_1 + 0x3c) != 0) {
      iVar8 = 0x10 - *(int *)(param_1 + 0x3c);
    }
    iVar5 = uVar6 - iVar8;
    if (iVar5 < 0) {
      iVar5 = 0;
    }
    if (bVar2) {
      iVar8 = iVar5 + 0xf >> 4;
      param_5 = proc_7001A030();
      if (*(int *)(param_1 + 0x3c) == 0) {
        *param_2 = *param_2 + 0x20;
      }
      else {
        *param_2 = *param_2 + (short)(*(int *)(param_1 + 0x3c) << 1);
      }
      uVar4 = *(uint *)(param_1 + 0x1c);
      *(uint *)(param_1 + 0x3c) = uVar4 & 0xf;
      *(int *)(param_1 + 0x44) = **(int **)(param_1 + 0x28) + (uVar4 >> 4) * 9 + 9;
      *(uint *)(param_1 + 0x38) = uVar4;
      lVar7 = (longlong)*param_2;
      if ((int)uVar6 < (int)param_3) {
        uVar4 = uVar6 << 1;
        do {
          iVar11 = iVar8 + 1;
          iVar8 = *(int *)(param_1 + 0x24);
          iVar5 = (int)lVar7;
          param_3 -= uVar6;
          iVar9 = iVar5 + uVar4;
          if ((iVar8 != -1) && (iVar8 != 0)) {
            *(int *)(param_1 + 0x24) = iVar8 + -1;
          }
          uVar6 = *(int *)(param_1 + 0x20) - *(int *)(param_1 + 0x1c);
          if (param_3 < uVar6) {
            uVar6 = param_3;
          }
          iVar8 = uVar6 + *(int *)(param_1 + 0x3c) + -0x10;
          if (iVar8 < 0) {
            iVar8 = 0;
          }
          iVar8 = iVar8 + 0xf >> 4;
          param_5 = proc_7001A030();
          lVar7 = (longlong)iVar9;
          uVar4 = uVar6 << 1;
          *param_5 = *(int *)(param_1 + 0x3c) * 2 + (iVar11 * 0x20 + iVar5 & 0xffffffe0U) & 0xffffff
                     | 0xa000000;
          param_5[1] = iVar9 * 0x10000 | uVar4 & 0xffff;
          param_5 = param_5 + 2;
        } while ((int)uVar6 < (int)param_3);
      }
      *(uint *)(param_1 + 0x3c) = *(int *)(param_1 + 0x3c) + param_3 & 0xf;
      *(int *)(param_1 + 0x38) = *(int *)(param_1 + 0x38) + param_3;
      *(int *)(param_1 + 0x44) = *(int *)(param_1 + 0x44) + iVar8 * 9;
    }
    else {
      iVar10 = iVar5 + 0xf >> 4;
      iVar5 = iVar10 * 9;
      iVar11 = *(int *)(param_1 + 0x44) + iVar5;
      iVar9 = (iVar11 - **(int **)(param_1 + 0x28)) - (*(int **)(param_1 + 0x28))[1];
      if (iVar9 < 0) {
        iVar9 = 0;
      }
      uVar6 = iVar9 / 9 << 4;
      uVar4 = iVar10 * 0x10 + iVar8;
      if ((int)uVar4 < (int)uVar6) {
        uVar6 = uVar4;
      }
      if ((int)(uVar6 - (uVar6 & 0xf)) < (int)param_3) {
        param_5 = proc_7001A030();
        bVar3 = true;
        if (*(int *)(param_1 + 0x3c) == 0) {
          *param_2 = *param_2 + 0x20;
        }
        else {
          *param_2 = *param_2 + (short)(*(int *)(param_1 + 0x3c) << 1);
        }
        *(uint *)(param_1 + 0x3c) = *(int *)(param_1 + 0x3c) + param_3 & 0xf;
        *(int *)(param_1 + 0x38) = *(int *)(param_1 + 0x38) + param_3;
        *(int *)(param_1 + 0x44) = *(int *)(param_1 + 0x44) + iVar5;
      }
      else {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        *(int *)(param_1 + 0x44) = iVar11;
        param_5 = param_5 + 2;
      }
      if (uVar6 != 0) {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        if (bVar3) {
          iVar8 = (uVar4 - uVar6) * 2;
        }
        else {
          iVar8 = 0;
        }
        sVar1 = *param_2;
        param_5[1] = uVar6 << 1;
        *param_5 = (int)sVar1 + iVar8 & 0xffffffU | 0x2000000;
        param_5 = param_5 + 2;
      }
    }
  }
  return param_5;
}



s32 alResampleParam(void *filter,s32 paramID,void *param)

{
  int iVar1;
  
  if (false) {
switchD_7001a628_caseD_2:
    if (*(int *)filter != 0) {
      (**(code **)(*(int *)filter + 8))();
    }
  }
  else {
    switch(paramID) {
    case 1:
      *(void **)filter = param;
      break;
    default:
      goto switchD_7001a628_caseD_2;
    case 4:
      iVar1 = *(int *)filter;
      *(undefined4 *)((int)filter + 0x24) = 1;
      *(undefined4 *)((int)filter + 0x30) = 0;
      *(undefined4 *)((int)filter + 0x1c) = 0;
      *(undefined4 *)((int)filter + 0x20) = 0;
      if (iVar1 != 0) {
        (**(code **)(iVar1 + 8))(iVar1,4,0);
      }
      break;
    case 7:
      *(void **)((int)filter + 0x18) = param;
      break;
    case 8:
      *(undefined4 *)((int)filter + 0x1c) = 1;
      break;
    case 9:
      iVar1 = *(int *)filter;
      *(undefined4 *)((int)filter + 0x30) = 1;
      if (iVar1 != 0) {
        (**(code **)(iVar1 + 8))(iVar1,9,0);
      }
    }
  }
  return 0;
}



uint * alResamplePull(int *param_1,short *param_2,longlong param_3,undefined8 param_4,uint *param_5)

{
  int iVar1;
  uint *puVar2;
  u32 uVar3;
  uint uVar4;
  float fVar5;
  int iVar6;
  short sStack10;
  uint *puStack8;
  
  iVar1 = *param_1;
  sStack10 = 0x140;
  puStack8 = param_5;
  if (param_3 != 0) {
    uVar4 = (uint)param_3;
    if (param_1[7] == 0) {
      fVar5 = (float)param_1[6];
      if (dbl_80029878 < (double)fVar5) {
        param_1[6] = DOUBLE_80029880._0_4_;
        fVar5 = (float)param_1[6];
      }
      *(float *)(param_1 + 6) = (float)(int)(fVar5 * 32768.00000000);
      *(float *)(param_1 + 6) = (float)param_1[6] / 32768.00000000;
      fVar5 = (float)param_1[8] + (float)param_1[6] * (float)uVar4;
      iVar6 = (int)fVar5;
      *(float *)(param_1 + 8) = fVar5 - (float)iVar6;
      puVar2 = (uint *)(**(code **)(iVar1 + 4))(iVar1,&sStack10,iVar6,param_4,param_5);
      fVar5 = (float)param_1[6];
      *puVar2 = (int)sStack10 & 0xffffU | 0x8000000;
      puVar2[1] = (int)*param_2 << 0x10 | (uVar4 & 0x7fff) << 1;
      puVar2[2] = (param_1[9] & 0xffU) << 0x10 | 0x5000000 | (int)(fVar5 * 32768.00000000) & 0xffffU
      ;
      puStack8 = puVar2 + 4;
      uVar3 = osVirtualToPhysical((void *)param_1[5]);
      puVar2[3] = uVar3;
      param_1[9] = 0;
    }
    else {
      puVar2 = (uint *)(**(code **)(iVar1 + 4))(iVar1,&sStack10,param_3,param_4,param_5);
      *puVar2 = (int)sStack10 & 0xffffffU | 0xa000000;
      puStack8 = puVar2 + 2;
      puVar2[1] = (int)*param_2 << 0x10 | (uVar4 & 0x7fff) << 1;
    }
  }
  return puStack8;
}



float _ldexpf(float __x,int __exponent)

{
  undefined4 in_a2_hi;
  uint in_a2_lo;
  undefined4 in_register_00001060;
  
  if (CONCAT44(in_a2_hi,in_a2_lo) != 0) {
    __x = SUB84((double)CONCAT44(in_register_00001060,__x) * (double)(1 << (in_a2_lo & 0x1f)),0);
  }
  return __x;
}



float _frexpf(float __x,int *__exponent)

{
  int *in_a2_lo;
  double dVar1;
  ulonglong in_f2;
  double dVar2;
  float fVar3;
  undefined4 in_register_00001060;
  uint in_register_00001070;
  uint in_register_00001080;
  
  dVar2 = (double)(in_f2 & 0xffffffff00000000);
  *in_a2_lo = 0;
  if ((double)CONCAT44(in_register_00001060,__x) == dVar2) {
    return __x;
  }
  if (dVar2 < (double)CONCAT44(in_register_00001060,__x)) {
    dVar1 = (double)CONCAT44(in_register_00001060,__x);
  }
  else {
    dVar1 = -(double)CONCAT44(in_register_00001060,__x);
  }
  if ((double)((ulonglong)in_register_00001070 << 0x20) <= dVar1) {
    do {
      dVar1 = dVar1 * (double)((ulonglong)in_register_00001080 << 0x20);
      *in_a2_lo = *in_a2_lo + 1;
    } while ((double)((ulonglong)in_register_00001070 << 0x20) <= dVar1);
  }
  if (dVar1 < (double)((ulonglong)in_register_00001080 << 0x20)) {
    dVar1 = dVar1 + dVar1;
    while (*in_a2_lo = *in_a2_lo + -1, dVar1 < (double)((ulonglong)in_register_00001080 << 0x20)) {
      dVar1 = dVar1 + dVar1;
    }
  }
  fVar3 = SUB84(dVar1,0);
  if ((double)CONCAT44(in_register_00001060,__x) <= dVar2) {
    fVar3 = SUB84(-dVar1,0);
  }
  return fVar3;
}



s32 alEnvmixerParam(void *filter,s32 paramID,void *param)

{
  int iVar1;
  
  if (paramID == 1) {
    *(void **)filter = param;
  }
  else {
    if (paramID == 3) {
      if (*(void ***)((int)filter + 0x40) == NULL) {
        *(void **)((int)filter + 0x3c) = param;
      }
      else {
        **(void ***)((int)filter + 0x40) = param;
      }
      *(void **)((int)filter + 0x40) = param;
    }
    else {
      if (paramID == 4) {
        iVar1 = *(int *)filter;
        *(undefined4 *)((int)filter + 0x38) = 1;
        *(undefined4 *)((int)filter + 0x48) = 0;
        *(undefined2 *)((int)filter + 0x1a) = 1;
        if (iVar1 != 0) {
          (**(code **)(iVar1 + 8))(iVar1,4);
        }
      }
      else {
        if (paramID == 9) {
          iVar1 = *(int *)filter;
          *(undefined4 *)((int)filter + 0x48) = 1;
          if (iVar1 != 0) {
            (**(code **)(iVar1 + 8))(iVar1,9);
          }
        }
        else {
          if (*(int *)filter != 0) {
            (**(code **)(*(int *)filter + 8))();
          }
        }
      }
    }
  }
  return 0;
}



int proc_7001AAF4(float param_1,float param_2,longlong param_3,undefined2 *param_4)

{
  float fVar1;
  uint in_register_00001020;
  short sVar2;
  double dVar3;
  
  if (param_3 != 0) {
    dVar3 = (double)((param_1 - param_2) / (float)(int)param_3) *
            (double)((ulonglong)in_register_00001020 << 0x20);
    fVar1 = (float)dVar3;
    if (fVar1 < 0.00000000) {
      fVar1 = fVar1 - 1.00000000;
      sVar2 = (short)(int)fVar1;
    }
    else {
      sVar2 = (short)(int)dVar3;
    }
    *param_4 = (short)(int)((fVar1 - (float)(int)sVar2) * flt_80029964);
    return (int)sVar2;
  }
  if (param_1 < param_2) {
    *param_4 = 0;
    return -0x8000;
  }
  *param_4 = 0xffff;
  return 0x7fff;
}



Acmd * _pullSubFrame(void *filter,s16 *inp,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  uint *puVar1;
  int iVar2;
  u32 uVar3;
  int *unaff_s0_lo;
  longlong unaff_s2;
  short *unaff_s3_lo;
  Acmd *unaff_s4_lo;
  uint uVar4;
  short *unaff_s5_lo;
  undefined8 unaff_s6;
  
  iVar2 = *unaff_s0_lo;
  if (unaff_s2 != 0) {
    if (iVar2 == 0) {
      osSyncPrintf(aAssertionFaultSSLineD_1,aSource,aEnv_c_1,0x175);
    }
    puVar1 = (uint *)(**(code **)(iVar2 + 4))(iVar2,unaff_s5_lo,unaff_s2,unaff_s6);
    uVar4 = (int)unaff_s2 << 1;
    *puVar1 = (int)*unaff_s5_lo & 0xffffU | 0x8000000;
    puVar1[1] = ((int)*unaff_s3_lo + 0x440) * 0x10000 | uVar4 & 0xffff;
    puVar1[2] = (int)*unaff_s3_lo + 0x580U & 0xffff | 0x8080000;
    puVar1[3] = (int)*unaff_s3_lo + 0x800U & 0xffff | ((int)*unaff_s3_lo + 0x6c0) * 0x10000;
    if (unaff_s0_lo[0xe] == 0) {
      puVar1[4] = 0x3080000;
      unaff_s4_lo = (Acmd *)(puVar1 + 6);
      uVar3 = osVirtualToPhysical((void *)unaff_s0_lo[5]);
      puVar1[5] = uVar3;
    }
    else {
      unaff_s0_lo[0xe] = 0;
      *(short *)(unaff_s0_lo + 10) =
           (short)((int)eqpower[(int)*(short *)(unaff_s0_lo + 6)] *
                   (int)*(short *)((int)unaff_s0_lo + 0x1a) >> 0xf);
      iVar2 = proc_7001AAF4((float)(int)*(short *)(unaff_s0_lo + 10),
                            (float)(int)*(short *)(unaff_s0_lo + 7),(longlong)unaff_s0_lo[0xd],
                            (undefined2 *)(unaff_s0_lo + 9));
      *(undefined2 *)((int)unaff_s0_lo + 0x26) = (short)iVar2;
      *(undefined2 *)((int)unaff_s0_lo + 0x2e) =
           (short)((int)eqpower[(int)*(short *)(unaff_s0_lo + 6) * 0x7fffffff + 0x7f] *
                   (int)*(short *)((int)unaff_s0_lo + 0x1a) >> 0xf);
      iVar2 = proc_7001AAF4((float)(int)*(short *)((int)unaff_s0_lo + 0x2e),
                            (float)(int)*(short *)((int)unaff_s0_lo + 0x1e),
                            (longlong)unaff_s0_lo[0xd],(undefined2 *)((int)unaff_s0_lo + 0x2a));
      *(short *)(unaff_s0_lo + 0xb) = (short)iVar2;
      puVar1[4] = (int)*(short *)(unaff_s0_lo + 7) & 0xffffU | 0x9060000;
      puVar1[5] = 0;
      puVar1[6] = (int)*(short *)((int)unaff_s0_lo + 0x1e) & 0xffffU | 0x9040000;
      puVar1[7] = 0;
      puVar1[8] = (int)*(short *)(unaff_s0_lo + 10) & 0xffffU | 0x9020000;
      puVar1[9] = CONCAT22(*(undefined2 *)((int)unaff_s0_lo + 0x26),*(undefined2 *)(unaff_s0_lo + 9)
                          );
      puVar1[10] = (int)*(short *)((int)unaff_s0_lo + 0x2e) & 0xffffU | 0x9000000;
      puVar1[0xb] = CONCAT22(*(undefined2 *)(unaff_s0_lo + 0xb),
                             *(undefined2 *)((int)unaff_s0_lo + 0x2a));
      puVar1[0xc] = (int)*(short *)(unaff_s0_lo + 8) & 0xffffU | 0x9080000;
      puVar1[0xd] = (int)*(short *)((int)unaff_s0_lo + 0x22) & 0xffff;
      puVar1[0xe] = 0x3090000;
      unaff_s4_lo = (Acmd *)(puVar1 + 0x10);
      uVar3 = osVirtualToPhysical((void *)unaff_s0_lo[5]);
      puVar1[0xf] = uVar3;
    }
    *unaff_s5_lo = *unaff_s5_lo + (short)uVar4;
  }
  return unaff_s4_lo;
}



void proc_7001AE54(void)

{
  return;
}



longlong _alEnvmixerPull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  int iVar1;
  code *pcVar2;
  int *param;
  ALGlobals *drvr;
  undefined **extraout_a0_lo;
  undefined **filter_00;
  char *extraout_a0_lo_00;
  char *filter_01;
  longlong lVar3;
  undefined **extraout_a1_lo;
  undefined **extraout_a1_lo_00;
  undefined **inp;
  int iVar4;
  longlong extraout_a1;
  longlong lVar5;
  s16 *extraout_a2_lo;
  s16 *extraout_a2_lo_00;
  longlong extraout_a2;
  longlong lVar6;
  s32 extraout_a3_lo;
  s32 extraout_a3_lo_00;
  longlong extraout_a3;
  short sVar7;
  int samples;
  float fVar8;
  ulonglong unaff_f20;
  ulonglong unaff_f22;
  s32 sStackX8;
  s32 sampleOffset_00;
  Acmd *p_00;
  s32 sStack20;
  Acmd *pAStack4;
  
  lVar6 = (longlong)sampleOffset;
  lVar5 = (longlong)outCount;
  lVar3 = (longlong)(int)outp;
  pAStack4 = p;
  if (*(int *)((int)filter + 0x3c) == 0) {
    iVar4 = *(int *)((int)filter + 0x48);
    filter_01 = (char *)filter;
    sStackX8 = outCount;
  }
  else {
    iVar4 = *(int *)((int)filter + 0x3c);
    sStackX8 = outCount;
    sStack20 = sampleOffset;
    while( true ) {
      sampleOffset = (s32)lVar6;
      outCount = (s32)(s16 *)lVar5;
      outp = (s16 *)lVar3;
      iVar1 = *(int *)(iVar4 + 4);
      filter_01 = aAssertionFaultSSLineD;
      samples = iVar1 - sStack20;
      if (sStackX8 < samples) break;
      inp = ptr_crouched_doubles_firing_animation_groups + 2;
      if (samples < 0) {
        osSyncPrintf(aAssertionFaultSSLineD,aSamples0,aEnv_c,0x68);
        inp = extraout_a1_lo;
        outCount = (s32)extraout_a2_lo;
        sampleOffset = extraout_a3_lo;
      }
      filter_00 = ptr_crouched_doubles_firing_animation_groups + 2;
      if (0xa0 < samples) {
        osSyncPrintf(aAssertionFaultSSLineD_0,aSamplesAl_max_rsp_samples,aEnv_c_0,0x69);
        filter_00 = extraout_a0_lo;
        inp = extraout_a1_lo_00;
        outCount = (s32)extraout_a2_lo_00;
        sampleOffset = extraout_a3_lo_00;
      }
      drvr = slg;
      iVar4 = *(int *)((int)filter + 0x3c);
      if (false) {
switchD_7001af6c_caseD_1:
        pAStack4 = _pullSubFrame(filter_00,(s16 *)inp,(s16 *)outCount,sampleOffset,sampleOffset_00,
                                 p_00);
        *(int *)((int)filter + 0x30) = *(int *)((int)filter + 0x30) + samples;
        (**(code **)((int)filter + 8))
                  (filter,*(undefined2 *)(*(int *)((int)filter + 0x3c) + 8),
                   *(undefined4 *)(*(int *)((int)filter + 0x3c) + 0xc));
      }
      else {
        switch(*(undefined2 *)(iVar4 + 8)) {
        case 0:
          *(undefined4 *)(*(int *)(iVar4 + 0xc) + 0xd8) = 0;
          _freePVoice((ALSynth *)drvr,*(PVoice **)(iVar4 + 0xc));
          break;
        default:
          goto switchD_7001af6c_caseD_1;
        case 0xb:
        case 0xc:
        case 0x10:
          pAStack4 = _pullSubFrame(filter_00,(s16 *)inp,(s16 *)outCount,sampleOffset,sampleOffset_00
                                   ,p_00);
          iVar4 = *(int *)((int)filter + 0x30) + samples;
          *(int *)((int)filter + 0x30) = iVar4;
          if (iVar4 < *(int *)((int)filter + 0x34)) {
            fVar8 = (float)(uint)*(ushort *)((int)filter + 0x24);
            if (false) {
              fVar8 = fVar8 + 4294967296.00000000;
            }
            *(undefined2 *)((int)filter + 0x1c) =
                 (short)(int)((double)(int)*(short *)((int)filter + 0x1c) +
                             (double)((float)((double)((float)((int)*(short *)((int)filter + 0x26)
                                                              << 0x10) + fVar8) /
                                             (double)(unaff_f20 & 0xffffffff00000000)) *
                                     (float)iVar4) * (double)(unaff_f22 & 0xffffffff00000000));
            fVar8 = (float)(uint)*(ushort *)((int)filter + 0x2a);
            if (false) {
              fVar8 = fVar8 + 4294967296.00000000;
            }
            *(undefined2 *)((int)filter + 0x1e) =
                 (short)(int)((double)(int)*(short *)((int)filter + 0x1e) +
                             (double)((float)((double)((float)((int)*(short *)((int)filter + 0x2c)
                                                              << 0x10) + fVar8) /
                                             (double)(unaff_f20 & 0xffffffff00000000)) *
                                     (float)iVar4) * (double)(unaff_f22 & 0xffffffff00000000));
          }
          else {
            *(undefined2 *)((int)filter + 0x28) =
                 (short)((int)eqpower[(int)*(short *)((int)filter + 0x18)] *
                         (int)*(short *)((int)filter + 0x1a) >> 0xf);
            sVar7 = eqpower[(int)*(short *)((int)filter + 0x18) * 0x7fffffff + 0x7f];
            *(int *)((int)filter + 0x30) = *(int *)((int)filter + 0x34);
            *(undefined2 *)((int)filter + 0x1c) = *(undefined2 *)((int)filter + 0x28);
            *(undefined2 *)((int)filter + 0x2e) =
                 (short)((int)sVar7 * (int)*(short *)((int)filter + 0x1a) >> 0xf);
            *(undefined2 *)((int)filter + 0x1e) = *(undefined2 *)((int)filter + 0x2e);
          }
          if (*(short *)((int)filter + 0x1c) == 0) {
            *(undefined2 *)((int)filter + 0x1c) = 1;
            sVar7 = *(short *)((int)filter + 0x1e);
          }
          else {
            sVar7 = *(short *)((int)filter + 0x1e);
          }
          if (sVar7 == 0) {
            *(undefined2 *)((int)filter + 0x1e) = 1;
            iVar4 = *(int *)((int)filter + 0x3c);
          }
          else {
            iVar4 = *(int *)((int)filter + 0x3c);
          }
          sVar7 = *(short *)(iVar4 + 8);
          if (sVar7 == 0xc) {
            *(undefined2 *)((int)filter + 0x18) = (short)*(undefined4 *)(iVar4 + 0xc);
            sVar7 = *(short *)(iVar4 + 8);
          }
          if (sVar7 == 0xb) {
            *(undefined4 *)((int)filter + 0x30) = 0;
            *(undefined2 *)((int)filter + 0x1a) =
                 (short)(*(int *)(iVar4 + 0xc) * *(int *)(iVar4 + 0xc) >> 0xf);
            *(undefined4 *)((int)filter + 0x34) = *(undefined4 *)(iVar4 + 0x10);
            sVar7 = *(short *)(iVar4 + 8);
          }
          if (sVar7 == 0x10) {
            *(s16 *)((int)filter + 0x20) = eqpower[*(int *)(iVar4 + 0xc)];
            *(s16 *)((int)filter + 0x22) = eqpower[*(int *)(iVar4 + 0xc) * 0x7fffffff + 0x7f];
          }
          *(undefined4 *)((int)filter + 0x38) = 1;
          break;
        case 0xd:
          if (*(short *)(iVar4 + 10) == 0) {
            pcVar2 = *(code **)((int)filter + 8);
          }
          else {
            (**(code **)((int)filter + 8))(filter,8,0);
            pcVar2 = *(code **)((int)filter + 8);
          }
          (*pcVar2)(filter,5,*(undefined4 *)(iVar4 + 0x18));
          (**(code **)((int)filter + 8))(filter,9,0);
          *(undefined4 *)((int)filter + 0x38) = 1;
          *(undefined4 *)((int)filter + 0x30) = 0;
          *(undefined4 *)((int)filter + 0x34) = *(undefined4 *)(iVar4 + 0x14);
          *(undefined2 *)((int)filter + 0x1a) =
               (short)((int)*(short *)(iVar4 + 0x10) * (int)*(short *)(iVar4 + 0x10) >> 0xf);
          *(ushort *)((int)filter + 0x18) = (ushort)*(byte *)(iVar4 + 0x12);
          *(s16 *)((int)filter + 0x20) = eqpower[(uint)*(byte *)(iVar4 + 0x13)];
          *(s16 *)((int)filter + 0x22) = eqpower[(uint)*(byte *)(iVar4 + 0x13) * 0x7fffffff + 0x7f];
          if (*(int *)(iVar4 + 0x14) == 0) {
            *(undefined2 *)((int)filter + 0x1c) =
                 (short)((int)eqpower[(int)*(short *)((int)filter + 0x18)] *
                         (int)*(short *)((int)filter + 0x1a) >> 0xf);
            *(undefined2 *)((int)filter + 0x1e) =
                 (short)((int)eqpower[(int)*(short *)((int)filter + 0x18) * 0x7fffffff + 0x7f] *
                         (int)*(short *)((int)filter + 0x1a) >> 0xf);
          }
          else {
            *(undefined2 *)((int)filter + 0x1c) = 1;
            *(undefined2 *)((int)filter + 0x1e) = 1;
          }
          if (*(int *)filter != 0) {
            (**(code **)(*(int *)filter + 8))(*(int *)filter,7,*(undefined4 *)(iVar4 + 0xc));
          }
          break;
        case 0xe:
          if (*(short *)(iVar4 + 10) == 0) {
            pcVar2 = *(code **)((int)filter + 8);
          }
          else {
            (**(code **)((int)filter + 8))(filter,8,0);
            pcVar2 = *(code **)((int)filter + 8);
          }
          (*pcVar2)(filter,5,*(undefined4 *)(iVar4 + 0xc));
          (**(code **)((int)filter + 8))(filter,9,0);
          break;
        case 0xf:
          pAStack4 = _pullSubFrame(filter_00,(s16 *)inp,(s16 *)outCount,sampleOffset,sampleOffset_00
                                   ,p_00);
          (**(code **)((int)filter + 8))(filter,4,0);
        }
      }
      sStackX8 -= samples;
      param = *(int **)((int)filter + 0x3c);
      iVar4 = *param;
      *(int *)((int)filter + 0x3c) = iVar4;
      if (iVar4 == 0) {
        *(undefined4 *)((int)filter + 0x40) = 0;
      }
      __freeParam((ALParam *)param);
      sampleOffset = (s32)extraout_a3;
      outCount = (s32)(s16 *)extraout_a2;
      outp = (s16 *)extraout_a1;
      filter_01 = extraout_a0_lo_00;
      if (*(int *)((int)filter + 0x3c) == 0) break;
      iVar4 = *(int *)((int)filter + 0x3c);
      lVar3 = extraout_a1;
      lVar5 = extraout_a2;
      lVar6 = extraout_a3;
      sStack20 = iVar1;
    }
    iVar4 = *(int *)((int)filter + 0x48);
  }
  if (iVar4 == 1) {
    pAStack4 = _pullSubFrame(filter_01,outp,(s16 *)outCount,sampleOffset,sampleOffset_00,p_00);
    *(int *)((int)filter + 0x30) = *(int *)((int)filter + 0x30) + sStackX8;
  }
  if (*(int *)((int)filter + 0x34) < *(int *)((int)filter + 0x30)) {
    *(int *)((int)filter + 0x30) = *(int *)((int)filter + 0x34);
  }
  return (longlong)(int)pAStack4;
}



s32 alAuxBusParam(void *filter,s32 paramID,void *param)

{
  if (paramID == 2) {
    *(void **)(*(int *)((int)filter + 0x1c) + *(int *)((int)filter + 0x14) * 4) = param;
    *(int *)((int)filter + 0x14) = *(int *)((int)filter + 0x14) + 1;
  }
  return 0;
}



longlong _alAuxBusPull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  int iVar1;
  int *piVar2;
  longlong lVar3;
  
  piVar2 = *(int **)((int)filter + 0x1c);
  *(undefined4 *)p = 0x20006c0;
  *(int *)((int)p + 4) = outCount << 1;
  *(undefined4 *)(p + 1) = 0x2000800;
  *(int *)((int)p + 0xc) = outCount << 1;
  iVar1 = 0;
  lVar3 = (longlong)(int)(p + 2);
  if (0 < *(int *)((int)filter + 0x14)) {
    do {
      lVar3 = (**(code **)(*piVar2 + 4))(*piVar2,outp,outCount,sampleOffset,(int)lVar3);
      iVar1 += 1;
      piVar2 = piVar2 + 1;
    } while (iVar1 < *(int *)((int)filter + 0x14));
  }
  return lVar3;
}



s32 alSaveParam(void *filter,s32 paramID,void *param)

{
  if (paramID == 1) {
    *(void **)filter = param;
    return 0;
  }
  if (paramID == 6) {
    *(void **)((int)filter + 0x14) = param;
    return 0;
  }
  return 0;
}



longlong _alSavePull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)
           (**(code **)(*(int *)filter + 4))(*(int *)filter,outp,outCount,sampleOffset,p);
  puVar1[1] = (outCount & 0x7fffU) << 1;
  *puVar1 = 0x8000000;
  puVar1[2] = 0xd000000;
  puVar1[3] = 0x4400580;
  puVar1[5] = (outCount & 0x3fffU) << 2;
  puVar1[4] = 0x8000000;
  puVar1[6] = 0x6000000;
  puVar1[7] = *(undefined4 *)((int)filter + 0x14);
  return (longlong)(int)(puVar1 + 8);
}



s32 osJamMesg(OSMesgQueue *mq,OSMesg msg,s32 flags)

{
  int iVar1;
  u32 saveMask;
  OSThread *t;
  int iVar2;
  
  saveMask = __osDisableInt();
  if (mq->msgCount <= mq->validCount) {
    do {
      if (flags != 1) {
        __osRestoreInt(saveMask);
        return -1;
      }
      __osRunningThread->state = 8;
      __osEnqueueAndYield(&mq->fullqueue);
    } while (mq->msgCount <= mq->validCount);
  }
  iVar1 = mq->msgCount;
  iVar2 = mq->first + iVar1 + -1;
  mq->first = iVar2 % iVar1;
  if (iVar1 == 0) {
    trap(0x1c00);
  }
  if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
    trap(0x1800);
  }
  mq->msg[mq->first] = msg;
  mq->validCount = mq->validCount + 1;
  if (mq->mtqueue->next != NULL) {
    t = __osPopThread((OSThread *)mq);
    osStartThread(t);
  }
  __osRestoreInt(saveMask);
  return 0;
}



OSMesgQueue * osPiGetCmdQueue(void)

{
  if (__osPiDevMgr.active == 0) {
    return NULL;
  }
  return __osPiDevMgr.cmdQueue;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ulonglong proc_7001B830(void)

{
  ulonglong in_f0;
  double dVar1;
  double dVar2;
  ulonglong in_f4;
  float in_f12;
  double dVar3;
  double dVar4;
  double dVar5;
  uint in_register_00001090;
  
  if (0x135 < ((int)in_f12 >> 0x16 & 0x1ffU)) {
    if (false) {
      return in_f0 & 0xffffffff00000000 | (ulonglong)dbl_80029D40._0_4_;
    }
    return in_f0 & 0xffffffff00000000 | (ulonglong)dbl_800299F0;
  }
  if (in_f12 <= 0.00000000) {
    in_f12 = -in_f12;
  }
  dVar3 = (double)in_f12 * dbl_800299D8 + (double)((ulonglong)in_register_00001090 << 0x20);
  if ((double)(in_f4 & 0xffffffff00000000) <= dVar3) {
    dVar3 = dVar3 + (double)((ulonglong)in_register_00001090 << 0x20);
  }
  else {
    dVar3 = dVar3 - (double)((ulonglong)in_register_00001090 << 0x20);
  }
  dVar1 = (double)(int)dVar3 - (double)((ulonglong)in_register_00001090 << 0x20);
  dVar2 = ((double)in_f12 - dVar1 * dbl_800299E0) - dVar1 * dbl_800299E8;
  dVar4 = dVar2 * dVar2;
  dVar5 = dbl_800299B8 + ((dbl_800299D0 * dVar4 + dbl_800299C8) * dVar4 + dbl_800299C0) * dVar4;
  if (((int)dVar3 & 1U) != 0) {
    return (ulonglong)dVar1 & 0xffffffff00000000 |
           (ulonglong)(uint)-(float)(dVar2 * dVar4 * dVar5 + dVar2);
  }
  return (ulonglong)dVar1 & 0xffffffff00000000 |
         (ulonglong)(uint)(float)(dVar2 * dVar4 * dVar5 + dVar2);
}



// WARNING: Unknown calling convention yet parameter storage is locked

ulonglong proc_7001B9A0(void)

{
  uint uVar1;
  ulonglong in_f0;
  double dVar2;
  double dVar3;
  ulonglong in_f6;
  ulonglong in_f8;
  float in_f12;
  double dVar4;
  double dVar5;
  double dVar6;
  ulonglong in_f16;
  
  uVar1 = (int)in_f12 >> 0x16 & 0x1ff;
  if (uVar1 < 0xff) {
    dVar2 = (double)in_f12;
    if (0xe5 < uVar1) {
      dVar4 = dVar2 * dVar2;
      return in_f0 & 0xffffffff00000000 |
             (ulonglong)
             (uint)(float)(dVar2 * dVar4 *
                           (dbl_80029A08 +
                           ((dbl_80029A20 * dVar4 + dbl_80029A18) * dVar4 + dbl_80029A10) * dVar4) +
                          dVar2);
    }
    return in_f0 & 0xffffffff00000000 | (ulonglong)(uint)in_f12;
  }
  if (0x135 < uVar1) {
    if (true) {
      return in_f0 & 0xffffffff00000000 | (ulonglong)dbl_80029A40._0_4_;
    }
    return in_f0 & 0xffffffff00000000 | (ulonglong)dbl_80029D40._0_4_;
  }
  dVar2 = (double)in_f12 * dbl_80029A28;
  if ((double)(in_f8 & 0xffffffff00000000) <= dVar2) {
    dVar2 = dVar2 + (double)(in_f16 & 0xffffffff00000000);
  }
  else {
    dVar2 = dVar2 - (double)(in_f6 & 0xffffffff00000000);
  }
  dVar4 = (double)(int)dVar2;
  dVar3 = ((double)in_f12 - dVar4 * dbl_80029A30) - dVar4 * dbl_80029A38;
  dVar5 = dVar3 * dVar3;
  dVar6 = dbl_80029A08 + ((dbl_80029A20 * dVar5 + dbl_80029A18) * dVar5 + dbl_80029A10) * dVar5;
  if (((int)dVar2 & 1U) == 0) {
    return (ulonglong)dVar4 & 0xffffffff00000000 |
           (ulonglong)(uint)(float)(dVar3 * dVar5 * dVar6 + dVar3);
  }
  return (ulonglong)dVar4 & 0xffffffff00000000 |
         (ulonglong)(uint)-(float)(dVar3 * dVar5 * dVar6 + dVar3);
}



void osDestroyThread(OSThread *t)

{
  OSThread *pOVar1;
  OSThread *pOVar2;
  OSThread *pOVar3;
  u32 mask;
  OSThread *pOStackX0;
  
  mask = __osDisableInt();
  if (t == NULL) {
    pOStackX0 = __osRunningThread;
  }
  else {
    pOStackX0 = t;
    if (t->state != 1) {
      __osDequeueThread((OSThread **)t->queue,t);
      pOStackX0 = t;
    }
  }
  if (__osActiveQueue == pOStackX0) {
    __osActiveQueue = (OSThread *)__osActiveQueue->tlnext;
  }
  else {
    pOVar3 = (OSThread *)__osActiveQueue->tlnext;
    pOVar2 = __osActiveQueue;
    while (pOVar1 = pOVar3, pOVar1 != NULL) {
      if (pOVar1 == pOStackX0) {
        pOVar2->tlnext = pOStackX0->tlnext;
        break;
      }
      pOVar3 = (OSThread *)pOVar1->tlnext;
      pOVar2 = pOVar1;
    }
  }
  if (pOStackX0 == __osRunningThread) {
    __osDispatchThread();
  }
  __osRestoreInt(mask);
  return;
}



void __setInstChanState(ALSeqPlayer *seqp,ALInstrument *inst,s32 chan)

{
  *(ALInstrument **)(&seqp->vAllocHead->next + chan * 4) = inst;
  *(ALPan *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].next + 3) = inst->pan;
  *(u8 *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev + 1) = inst->volume;
  *(u8 *)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev = inst->priority;
  *(s16 *)&(&(seqp->vAllocHead->voice).node)[chan * 2].next = inst->bendRange;
  return;
}



void __resetPerfChanState(ALSeqPlayer *seqp,s32 chan)

{
  *(undefined *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].next + 2) = 0;
  *(undefined *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev + 2) = 0;
  *(undefined *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].next + 3) = 0x40;
  *(undefined *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev + 1) = 0x7f;
  *(undefined *)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev = 5;
  *(undefined *)((int)&(&(seqp->vAllocHead->voice).node)[chan * 2].prev + 3) = 0;
  *(undefined2 *)&(&(seqp->vAllocHead->voice).node)[chan * 2].next = 200;
  (&(seqp->vAllocHead->voice).pvoice)[chan * 4] = (PVoice_s *)0x3f800000;
  return;
}



void __initFromBank(ALSeqPlayer *seqp,ALBank *b)

{
  ALInstrument *inst;
  ALBank *pAVar1;
  longlong lVar2;
  s32 chan;
  
  inst = b->instArray[0];
  pAVar1 = b;
  while (inst == NULL) {
    inst = *(ALInstrument **)(pAVar1 + 1);
    pAVar1 = (ALBank *)&pAVar1->sampleRate;
  }
  lVar2 = 0;
  chan = 0;
  if (seqp->maxChannels != '\0') {
    do {
      chan = (s32)lVar2;
      __resetPerfChanState(seqp,chan);
      __setInstChanState(seqp,inst,chan);
      chan += 1;
      lVar2 = (longlong)chan;
    } while (lVar2 < (longlong)(ulonglong)seqp->maxChannels);
  }
  if (b->percussion != NULL) {
    __resetPerfChanState(seqp,chan);
    __setInstChanState(seqp,b->percussion,9);
  }
  return;
}



void proc_7001BDE8(void)

{
  return;
}



ALMicroTime __vsDelta(ALVoiceState *vs,ALMicroTime t)

{
  int iVar1;
  
  iVar1 = vs->envEndTime - t;
  if (-1 < iVar1) {
    return (ALMicroTime)iVar1;
  }
  return 1000;
}



s16 __vsVol(ALVoiceState *vs,ALSeqPlayer *seqp)

{
  return (s16)((uint)(((int)((uint)vs->tremelo * (uint)vs->velocity * (uint)vs->envGain) >> 6) *
                     ((int)((uint)*(byte *)((int)&(&(seqp->vAllocHead->voice).node)
                                                  [(uint)vs->channel * 2].prev + 1) *
                            (uint)vs->sound->sampleVolume * (int)seqp->vol) >> 0xe)) >> 0xf);
}



void __seqpReleaseVoice(ALSeqPlayer *seqp,ALVoice *voice,ALMicroTime deltaTime)

{
  void *pvVar1;
  ALLink_s *pAVar2;
  ALLink *a;
  s16 sStack16;
  ALVoice *pAStack12;
  
  pvVar1 = voice->clientPrivate;
  if (*(char *)((int)pvVar1 + 0x34) == '\0') {
    pAVar2 = (ALLink_s *)(seqp->evtq).allocList.prev;
    while (a = (ALLink *)pAVar2, a != NULL) {
      pAVar2 = a->next;
      if ((*(short *)&a[1].prev == 6) && (voice == (ALVoice *)a[2].next)) {
        if (pAVar2 != NULL) {
          pAVar2[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar2[1].next)->next);
        }
        alUnlink(a);
        alLink(a,(ALLink *)&(seqp->evtq).freeList.prev);
      }
    }
  }
  *(undefined *)((int)pvVar1 + 0x33) = 0;
  *(undefined *)((int)pvVar1 + 0x34) = 3;
  *(undefined *)((int)pvVar1 + 0x30) = 0;
  *(int *)((int)pvVar1 + 0x24) = seqp->curTime + deltaTime;
  alSynSetPriority(seqp->drvr,voice,0);
  alSynSetVol(seqp->drvr,voice,0,deltaTime);
  sStack16 = 5;
  pAStack12 = voice;
  alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,(ALEvent *)&sStack16,deltaTime);
  return;
}



char __voiceNeedsNoteKill(ALSeqPlayer *seqp,ALVoice *voice,ALMicroTime killTime)

{
  ALLink_s *pAVar1;
  ALLink *a;
  int iVar2;
  char cVar3;
  
  iVar2 = 0;
  pAVar1 = (ALLink_s *)(seqp->evtq).allocList.prev;
  do {
    a = (ALLink *)pAVar1;
    if (a == NULL) {
      return '\x01';
    }
    pAVar1 = a->next;
    iVar2 = (int)&(a[1].next)->next + iVar2;
  } while ((*(short *)&a[1].prev != 5) || (voice != (ALVoice *)a[2].next));
  if (killTime < iVar2) {
    if (pAVar1 != NULL) {
      pAVar1[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar1[1].next)->next);
    }
    alUnlink(a);
    alLink(a,(ALLink *)&(seqp->evtq).freeList.prev);
    cVar3 = '\x01';
  }
  else {
    cVar3 = '\0';
  }
  return cVar3;
}



void __unmapVoice(ALSeqPlayer *seqp,ALVoice *voice)

{
  ALVoiceState *pAVar1;
  ALVoiceState *pAVar2;
  ALVoiceState *pAVar3;
  ALVoiceState_s *pAVar4;
  
                    // WARNING: ptrarith problems
  pAVar3 = seqp->vAllocTail;
  pAVar2 = NULL;
  while( true ) {
    pAVar1 = pAVar3;
    if (pAVar1 == NULL) {
      return;
    }
    if (pAVar1 == (ALVoiceState *)((int)voice + -4)) break;
    pAVar3 = (ALVoiceState *)pAVar1->next;
    pAVar2 = pAVar1;
  }
  if (pAVar2 == NULL) {
    *(ALVoiceState_s **)&seqp->vAllocTail = pAVar1->next;
  }
  else {
    pAVar2->next = pAVar1->next;
  }
  if (pAVar1 == seqp->vFreeList) {
    seqp->vFreeList = pAVar2;
    pAVar4 = (ALVoiceState_s *)seqp->initOsc;
  }
  else {
    pAVar4 = (ALVoiceState_s *)seqp->initOsc;
  }
  pAVar1->next = pAVar4;
  *(ALVoiceState **)&seqp->initOsc = pAVar1;
  return;
}



void __postNextSeqEvent(ALSeqPlayer *seqp)

{
  ALSeq *seq;
  ALPlayer_s *pAVar1;
  char cVar3;
  s32 sVar2;
  int iStack20;
  ALEvent AStack16;
  
  seq = seqp->target;
  if (((seqp->state == 1) && (seq != NULL)) &&
     (cVar3 = __alSeqNextDelta(seq,&iStack20), cVar3 != '\0')) {
    if ((seqp[1].node.next != NULL) &&
       (sVar2 = alSeqGetTicks(seq), *(int *)(seqp->loopCount + 8) <= sVar2 + iStack20)) {
      alSeqSetLoc(seq,seqp->loopEnd);
      pAVar1 = seqp[1].node.next;
      if (pAVar1 != (ALPlayer_s *)0xffffffff) {
        seqp[1].node.next = (ALPlayer_s *)((int)&pAVar1->callTime + 3);
      }
    }
    AStack16.type = 0;
    alEvtqPostEvent((ALEventQueue *)&(seqp->evtq).freeList.prev,&AStack16,seqp->uspt * iStack20);
  }
  return;
}



void proc_7001C1BC(int param_1,int param_2)

{
  if ((*(char *)(param_1 + 8) == -1) && (*(char *)(param_1 + 9) == 'Q')) {
    if (*(int *)(param_2 + 0x18) != 0) {
      *(int *)(param_2 + 0x24) =
           (int)((float)((uint)*(byte *)(param_1 + 0xb) << 0x10 |
                         (uint)*(byte *)(param_1 + 0xc) << 8 | (uint)*(byte *)(param_1 + 0xd)) *
                *(float *)(*(int *)(param_2 + 0x18) + 0x14));
      return;
    }
    *(undefined4 *)(param_2 + 0x24) = 0x1e8;
  }
  return;
}



ALPan __vsPan(ALVoiceState *vs,ALSeqPlayer *seqp)

{
  int iVar1;
  ALPan AVar2;
  
  iVar1 = (uint)*(byte *)((int)&(&(seqp->vAllocHead->voice).node)[(uint)vs->channel * 2].next + 3) +
          (uint)vs->sound->samplePan + -0x40;
  AVar2 = (ALPan)iVar1;
  if (iVar1 < 1) {
    AVar2 = '\0';
  }
  if (0x7e < iVar1) {
    AVar2 = '\x7f';
  }
  return AVar2;
}



ALVoiceState *
___lookupVoice(ALVoiceState *__return_storage_ptr__,ALSeqPlayer *seqp,u8 key,u8 channel)

{
  byte bVar1;
  ALVoiceState *pAVar2;
  
  pAVar2 = (ALVoiceState *)__return_storage_ptr__[1].vibrato;
  if (pAVar2 != NULL) {
    bVar1 = pAVar2->key;
    while( true ) {
      if (((longlong)(int)seqp & 0xffU) == (ulonglong)bVar1) {
        if (key == pAVar2->channel) {
          if (pAVar2->phase == '\x03') {
            pAVar2 = (ALVoiceState *)pAVar2->next;
          }
          else {
            if (pAVar2->phase != '\x04') {
              return pAVar2;
            }
            pAVar2 = (ALVoiceState *)pAVar2->next;
          }
        }
        else {
          pAVar2 = (ALVoiceState *)pAVar2->next;
        }
      }
      else {
        pAVar2 = (ALVoiceState *)pAVar2->next;
      }
      if (pAVar2 == NULL) break;
      bVar1 = ((ALVoiceState_s *)pAVar2)->key;
    }
  }
  return NULL;
}



// WARNING: Type propagation algorithm not settling

ALVoiceState *
___mapVoice(ALVoiceState *__return_storage_ptr__,ALSeqPlayer *seqp,u8 key,u8 vel,u8 channel)

{
  ALVoiceState *pAVar1;
  
  pAVar1 = *(ALVoiceState **)&__return_storage_ptr__[1].envPhase;
  if (pAVar1 != NULL) {
    *(ALVoiceState_s **)&__return_storage_ptr__[1].envPhase = pAVar1->next;
    pAVar1->next = NULL;
    if (__return_storage_ptr__[1].vibrato == 0.00000000) {
      *(ALVoiceState **)&__return_storage_ptr__[1].vibrato = pAVar1;
    }
    else {
      *(ALVoiceState **)&(*(ALVoiceState **)&__return_storage_ptr__[1].envGain)->next = pAVar1;
    }
    *(ALVoiceState **)&__return_storage_ptr__[1].envGain = pAVar1;
    pAVar1->channel = vel;
    pAVar1->key = (u8)seqp;
    pAVar1->velocity = key;
    *(ALVoiceState **)&(pAVar1->voice).clientPrivate = pAVar1;
  }
  return pAVar1;
}



// WARNING: Type propagation algorithm not settling

ALSound * __lookupSoundQuick(ALSeqPlayer *seqp,u8 key,u8 vel,u8 chan)

{
  short sVar1;
  ALVoiceState_s *pAVar2;
  ALSound *pAVar3;
  ALKeyMap *pAVar4;
  longlong lVar5;
  int iVar6;
  longlong lVar7;
  
  pAVar2 = (&seqp->vAllocHead->next)[((int)(char)chan & 0xffU) * 4];
  sVar1 = *(short *)((int)&(pAVar2->voice).pvoice + 2);
  lVar7 = (longlong)sVar1;
  lVar5 = 1;
  iVar6 = (int)sVar1 + 1;
  if (lVar7 < 1) {
    return NULL;
  }
  do {
    if (iVar6 < 0) {
      iVar6 += 1;
    }
    iVar6 >>= 1;
    pAVar3 = (ALSound *)(&(pAVar2->voice).pvoice)[iVar6];
    pAVar4 = pAVar3->keyMap;
    if ((((pAVar4->keyMin <= key) && (key <= pAVar4->keyMax)) && (pAVar4->velocityMin <= vel)) &&
       (vel <= pAVar4->velocityMax)) {
      return pAVar3;
    }
    if (key < pAVar4->keyMin) {
LAB_7001c438:
      lVar7 = (longlong)(iVar6 + -1);
    }
    else {
      if (vel < pAVar4->velocityMin) {
        if (key <= pAVar4->keyMax) goto LAB_7001c438;
        lVar5 = (longlong)(iVar6 + 1);
      }
      else {
        lVar5 = (longlong)(iVar6 + 1);
      }
    }
    if (lVar7 < lVar5) {
      return NULL;
    }
    iVar6 = (int)lVar5 + (int)lVar7;
  } while( true );
}



// WARNING: Type propagation algorithm not settling

void __handleMIDIMsg(ALSeqPlayer *seqp,ALEvent *event)

{
  byte bVar1;
  byte key;
  byte fxmix;
  int iVar2;
  int iVar3;
  ALSound *pAVar4;
  ALVoiceState_s **ppAVar5;
  ALPan pan;
  ALVoiceState *vs;
  s16 volume;
  uint uVar6;
  ALMicroTime t;
  ALVoice *voice;
  u8 channel;
  ulonglong uVar7;
  ALSeqPlayer *seqp_00;
  ALEventQueue *evtq;
  s32 key_00;
  f32 pitch;
  PVoice_s *pPVar8;
  float fVar9;
  ALVoiceState_s *pAVar10;
  u8 uVar12;
  float fVar11;
  f32 pitch_00;
  f32 extraout_f12;
  f32 extraout_f12_00;
  u8 channel_00;
  undefined4 auStack92 [2];
  float afStack84 [4];
  ALVoiceConfig aAStack68 [4];
  s16 sStack44;
  ALVoiceState *pAStack40;
  ALMicroTime AStack36;
  u8 uStack32;
  
  bVar1 = *(byte *)&(seqp->node).handler;
  key = *(byte *)((int)&(seqp->node).handler + 1);
  fxmix = *(byte *)((int)&(seqp->node).handler + 2);
  uVar6 = (uint)bVar1 & 0xf0;
  uVar7 = (ulonglong)bVar1 & 0xf;
  if (0x60 < uVar6 - 0x80) {
    return;
  }
  key_00 = (s32)uVar7;
  key_00._3_1_ = (u8)uVar7;
  switch(uVar6) {
  case 0x80:
    goto LAB_7001c7f8;
  case 0x90:
    if (fxmix != 0) {
      if (seqp_00->state != 1) {
        return;
      }
      pAVar4 = __lookupSoundQuick(seqp_00,key,fxmix,(u8)key_00);
      if (pAVar4 == NULL) {
        return;
      }
      aAStack68[0].fxBus = 0;
      aAStack68[0].unityPitch = '\0';
      aAStack68[0].priority =
           (ushort)*(byte *)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev;
      vs = ___mapVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,fxmix,(u8)key_00,channel_00)
      ;
      if (vs == NULL) {
        return;
      }
      voice = &vs->voice;
      alSynAllocVoice(seqp_00->drvr,voice,aAStack68);
      vs->sound = pAVar4;
      vs->envPhase = '\0';
      if (*(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev + 3) < 0x40) {
        vs->phase = '\0';
      }
      else {
        vs->phase = '\x02';
      }
      pitch = alCents2Ratio((int)((((uint)key - (uint)pAVar4->keyMap->keyBase) * 100 +
                                  (int)pAVar4->keyMap->detune) * 0x10000) >> 0x10);
      vs->pitch = pitch;
      vs->envGain = pAVar4->envelope->attackVolume;
      iVar3 = seqp_00->curTime;
      iVar2 = pAVar4->envelope->attackTime;
      vs->flags = '\0';
      vs->envEndTime = iVar3 + iVar2;
      pAVar10 = (&seqp_00->vAllocHead->next)[key_00 * 4];
      afStack84[0] = 127.00000000;
      if (((*(char *)&(pAVar10->voice).node.next != '\0') && (seqp_00->updateOsc != NULL)) &&
         (t = (*seqp_00->updateOsc)(auStack92,(f32 *)afStack84), t != 0)) {
        sStack44 = 0x16;
        AStack36 = auStack92[0];
        pAStack40 = vs;
        alEvtqPostEvent((ALEventQueue *)&(seqp_00->evtq).freeList.prev,(ALEvent *)&sStack44,t);
        vs->flags = vs->flags | 1;
      }
      if (false) {
        fVar9 = ROUND(afStack84[0]);
      }
      else {
        fVar9 = FLOOR(afStack84[0]);
      }
      uVar12 = (u8)(int)fVar9;
      if (false) {
        if (false) {
          fVar9 = ROUND(afStack84[0] - 2147483648.00000000);
        }
        else {
          fVar9 = FLOOR(afStack84[0] - 2147483648.00000000);
        }
        if (true) {
          uVar12 = (u8)(int)fVar9;
          goto LAB_7001c6ac;
        }
      }
      else {
        if (-1 < (int)fVar9) goto LAB_7001c6ac;
      }
      uVar12 = -1;
LAB_7001c6ac:
      vs->tremelo = uVar12;
      afStack84[0] = 1.00000000;
      evtq = (ALEventQueue *)&(seqp_00->evtq).freeList.prev;
      if (((*(char *)&(pAVar10->voice).node.prev != '\0') && (seqp_00->updateOsc != NULL)) &&
         (t = (*seqp_00->updateOsc)(auStack92,(f32 *)afStack84), t != 0)) {
        sStack44 = 0x17;
        AStack36 = auStack92[0];
        pAStack40 = vs;
        uStack32 = (u8)key_00;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack44,t);
        vs->flags = vs->flags | 2;
      }
      fVar11 = (float)vs->pitch;
      *(float *)&vs->vibrato = afStack84[0];
      fVar9 = (float)vs->vibrato;
      ppAVar5 = &seqp_00->vAllocHead->next + key_00 * 4;
      pAVar10 = ppAVar5[3];
      bVar1 = *(byte *)((int)ppAVar5 + 10);
      pan = __vsPan(vs,seqp_00);
      volume = __vsVol(vs,seqp_00);
      alSynStartVoiceParams
                (seqp_00->drvr,voice,pAVar4->wavetable,pitch_00,
                 SUB42((float)pAVar10 * fVar11 * fVar9,0),(ALPan)volume,pan,(uint)bVar1);
      sStack44 = 6;
      uStack32 = pAVar4->envelope->decayVolume;
      AStack36 = pAVar4->envelope->decayTime;
      pAStack40 = (ALVoiceState *)voice;
      alEvtqPostEvent(evtq,(ALEvent *)&sStack44,pAVar4->envelope->attackTime);
      return;
    }
LAB_7001c7f8:
    vs = ___lookupVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,(u8)key_00,channel);
    if (vs != NULL) {
      if (vs->phase == '\x02') {
        vs->phase = '\x04';
      }
      else {
        vs->phase = '\x03';
        __seqpReleaseVoice(seqp_00,&vs->voice,vs->sound->envelope->releaseTime);
      }
    }
    break;
  case 0xa0:
    vs = ___lookupVoice((ALVoiceState *)seqp_00,(ALSeqPlayer *)(uint)key,(u8)key_00,channel);
    if (vs != NULL) {
      vs->velocity = fxmix;
      volume = __vsVol(vs,seqp_00);
      t = vs->envEndTime - seqp_00->curTime;
      if (t < 0) {
        t = 1000;
      }
      alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
    }
    break;
  case 0xb0:
    if (key < 0x41) {
      if (key < 0x1c) {
        if (true) {
          switch(key) {
          case 7:
            *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev + 1) = fxmix;
            vs = seqp_00->vAllocTail;
            if (vs != NULL) {
              bVar1 = vs->channel;
              while( true ) {
                if (uVar7 == (ulonglong)bVar1) {
                  if (vs->envPhase == '\x03') {
                    vs = (ALVoiceState *)vs->next;
                  }
                  else {
                    volume = __vsVol(vs,seqp_00);
                    t = vs->envEndTime - seqp_00->curTime;
                    if (t < 0) {
                      t = 1000;
                    }
                    alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
                    vs = (ALVoiceState *)vs->next;
                  }
                }
                else {
                  vs = (ALVoiceState *)vs->next;
                }
                if (vs == NULL) break;
                bVar1 = ((ALVoiceState_s *)vs)->channel;
              }
            }
            break;
          case 10:
            *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].next + 3) = fxmix;
            vs = seqp_00->vAllocTail;
            if (vs != NULL) {
              bVar1 = vs->channel;
              while( true ) {
                if (uVar7 == (ulonglong)bVar1) {
                  pan = __vsPan(vs,seqp_00);
                  alSynSetPan(seqp_00->drvr,&vs->voice,pan);
                  vs = (ALVoiceState *)vs->next;
                }
                else {
                  vs = (ALVoiceState *)vs->next;
                }
                if (vs == NULL) break;
                bVar1 = ((ALVoiceState_s *)vs)->channel;
              }
            }
            break;
          case 0x10:
            *(byte *)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev = fxmix;
          }
        }
      }
      else {
        if (key == 0x40) {
          *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev + 3) = fxmix;
          vs = seqp_00->vAllocTail;
          if (vs != NULL) {
            bVar1 = vs->channel;
            do {
              if (uVar7 == (ulonglong)bVar1) {
                key_00._3_1_ = vs->phase;
                if ((u8)key_00 == '\x03') {
                  vs = (ALVoiceState *)vs->next;
                }
                else {
                  if (fxmix < 0x40) {
                    if ((u8)key_00 == '\x02') {
                      vs->phase = '\0';
                    }
                    else {
                      if ((u8)key_00 != '\x04') {
                        vs = (ALVoiceState *)vs->next;
                        goto LAB_7001cb38;
                      }
                      vs->phase = '\x03';
                      __seqpReleaseVoice(seqp_00,&vs->voice,vs->sound->envelope->releaseTime);
                    }
                  }
                  else {
                    if ((u8)key_00 != '\0') {
                      vs = (ALVoiceState *)vs->next;
                      goto LAB_7001cb38;
                    }
                    vs->phase = '\x02';
                  }
                  vs = (ALVoiceState *)vs->next;
                }
              }
              else {
                vs = (ALVoiceState *)vs->next;
              }
LAB_7001cb38:
              if (vs == NULL) {
                return;
              }
              bVar1 = ((ALVoiceState_s *)vs)->channel;
            } while( true );
          }
        }
      }
    }
    else {
      if (key == 0x5b) {
        *(byte *)((int)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].prev + 2) = fxmix;
        vs = seqp_00->vAllocTail;
        if (vs != NULL) {
          bVar1 = vs->channel;
          while( true ) {
            if (uVar7 == (ulonglong)bVar1) {
              alSynSetFXMix(seqp_00->drvr,&vs->voice,fxmix);
              vs = (ALVoiceState *)vs->next;
            }
            else {
              vs = (ALVoiceState *)vs->next;
            }
            if (vs == NULL) break;
            bVar1 = ((ALVoiceState_s *)vs)->channel;
          }
        }
      }
    }
    break;
  case 0xc0:
    if ((longlong)(ulonglong)key < (longlong)seqp_00->bank->instCount) {
      __setInstChanState(seqp_00,seqp_00->bank->instArray[(uint)key],key_00);
    }
    break;
  case 0xd0:
    vs = seqp_00->vAllocTail;
    if (vs != NULL) {
      bVar1 = vs->channel;
      while( true ) {
        if (uVar7 == (ulonglong)bVar1) {
          vs->velocity = key;
          volume = __vsVol(vs,seqp_00);
          t = vs->envEndTime - seqp_00->curTime;
          if (t < 0) {
            t = 1000;
          }
          alSynSetVol(seqp_00->drvr,&vs->voice,volume,t);
          vs = (ALVoiceState *)vs->next;
        }
        else {
          vs = (ALVoiceState *)vs->next;
        }
        if (vs == NULL) break;
        bVar1 = ((ALVoiceState_s *)vs)->channel;
      }
    }
    break;
  case 0xe0:
    iVar3 = (int)*(short *)&(&(seqp_00->vAllocHead->voice).node)[key_00 * 2].next *
            ((uint)fxmix * 0x80 + (uint)key + -0x2000);
    if (iVar3 < 0) {
      iVar3 += 0x1fff;
    }
    pPVar8 = (PVoice_s *)alCents2Ratio(iVar3 >> 0xd);
    (&(seqp_00->vAllocHead->voice).pvoice)[key_00 * 4] = pPVar8;
    vs = seqp_00->vAllocTail;
    if (vs != NULL) {
      bVar1 = vs->channel;
      pitch = extraout_f12;
      while( true ) {
        if (uVar7 == (ulonglong)bVar1) {
          alSynSetPitch(seqp_00->drvr,&vs->voice,pitch);
          vs = (ALVoiceState *)vs->next;
          pitch = extraout_f12_00;
        }
        else {
          vs = (ALVoiceState *)vs->next;
        }
        if (vs == NULL) break;
        bVar1 = ((ALVoiceState_s *)vs)->channel;
      }
    }
  }
  return;
}



void proc_7001CC74(void)

{
  return;
}



ALMicroTime __seqpVoiceHandler(void *node)

{
  undefined uVar1;
  undefined4 uVar2;
  ALVoiceState *vs;
  undefined4 *puVar3;
  int t;
  float fVar4;
  s16 volume;
  char cVar5;
  ALMicroTime delta;
  ALMicroTime t_00;
  undefined8 in_a1;
  ALEvent *event;
  undefined8 extraout_a1;
  ALSeqPlayer *seqp;
  u8 uVar6;
  ALVoice *v;
  ALEventQueue *evtq;
  f32 pitch;
  ALEvent aAStack72 [2];
  ALBank *apAStack40 [5];
  s16 sStack20;
  ALVoiceState *pAStack16;
  undefined4 uStack12;
  undefined uStack8;
  
  seqp = (ALSeqPlayer *)((int)node + 0x38);
  evtq = (ALEventQueue *)((int)node + 0x48);
  do {
    if (true) {
      switch(*(undefined2 *)((int)node + 0x38)) {
      case 0:
        if (*(ALSeq **)((int)node + 0x18) != NULL) {
          alSeqNextEvent(*(ALSeq **)((int)node + 0x18),aAStack72);
          if (aAStack72[0].type == 1) {
            __handleMIDIMsg((ALSeqPlayer *)aAStack72,event);
            __postNextSeqEvent((ALSeqPlayer *)node);
          }
          else {
            if (aAStack72[0].type == 3) {
              proc_7001C1BC((int)aAStack72,(int)node);
              __postNextSeqEvent((ALSeqPlayer *)node);
            }
            else {
              if (aAStack72[0].type == 4) {
                *(undefined4 *)((int)node + 0x2c) = 2;
                aAStack72[0].type = 0x10;
                alEvtqPostEvent(evtq,aAStack72,0x7fffffff);
              }
            }
          }
        }
        break;
      case 2:
        __handleMIDIMsg(seqp,(ALEvent *)in_a1);
        break;
      case 5:
        v = *(ALVoice **)((int)node + 0x3c);
        alSynStopVoice(*(ALSynth **)((int)node + 0x14),v);
        alSynFreeVoice(*(ALSynth **)((int)node + 0x14),v);
        if (((ALVoiceState *)v->clientPrivate)->flags != '\0') {
          __seqpStopOsc((ALSeqPlayer *)node,(ALVoiceState *)v->clientPrivate);
        }
        __unmapVoice((ALSeqPlayer *)node,v);
        break;
      case 6:
        v = *(ALVoice **)((int)node + 0x3c);
        vs = (ALVoiceState *)v->clientPrivate;
        if (vs->envPhase == '\0') {
          vs->envPhase = '\x01';
          uVar6 = *(u8 *)((int)node + 0x44);
        }
        else {
          uVar6 = *(u8 *)((int)node + 0x44);
        }
        t = *(int *)((int)node + 0x40);
        vs->envGain = uVar6;
        vs->envEndTime = *(int *)((int)node + 0x1c) + t;
        volume = __vsVol(vs,(ALSeqPlayer *)node);
        alSynSetVol(*(ALSynth **)((int)node + 0x14),v,volume,t);
        break;
      case 7:
        proc_7001C1BC((int)seqp,(int)node);
        break;
      case 9:
        sStack20 = 9;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,*(ALMicroTime *)((int)node + 0x5c));
        break;
      case 10:
        vs = *(ALVoiceState **)((int)node + 100);
        *(undefined2 *)((int)node + 0x32) = *(undefined2 *)((int)node + 0x3c);
        while (vs != NULL) {
          volume = __vsVol(vs,(ALSeqPlayer *)node);
          delta = vs->envEndTime - *(int *)((int)node + 0x1c);
          if (delta < 0) {
            delta = 1000;
          }
          alSynSetVol(*(ALSynth **)((int)node + 0x14),&vs->voice,volume,delta);
          vs = (ALVoiceState *)vs->next;
        }
        break;
      case 0xb:
        *(undefined4 *)((int)node + 0x7c) = *(undefined4 *)((int)node + 0x3c);
        *(undefined4 *)((int)node + 0x80) = *(undefined4 *)((int)node + 0x40);
        *(undefined4 *)((int)node + 0x84) = *(undefined4 *)((int)node + 0x44);
        break;
      case 0xc:
        *(undefined *)(*(int *)((int)node + 0x60) + (uint)*(byte *)((int)node + 0x3c) * 0x10 + 8) =
             *(undefined *)((int)node + 0x3d);
        break;
      case 0xd:
        t = *(int *)((int)node + 0x3c);
        *(int *)((int)node + 0x18) = t;
        if (t == 0) {
          *(undefined4 *)((int)node + 0x24) = 0x1e8;
        }
        else {
          *(int *)((int)node + 0x24) = (int)(flt_80029C88 * *(float *)(t + 0x14));
        }
        if (*(ALBank **)((int)node + 0x20) != NULL) {
          __initFromBank((ALSeqPlayer *)node,*(ALBank **)((int)node + 0x20));
        }
        break;
      case 0xe:
        *(ALBank **)((int)node + 0x20) = *(ALBank **)((int)node + 0x3c);
        __initFromBank((ALSeqPlayer *)node,*(ALBank **)((int)node + 0x3c));
        break;
      case 0xf:
        if (*(int *)((int)node + 0x2c) != 1) {
          *(undefined4 *)((int)node + 0x2c) = 1;
          __postNextSeqEvent((ALSeqPlayer *)node);
        }
        break;
      case 0x10:
        if (*(int *)((int)node + 0x2c) == 2) {
          vs = *(ALVoiceState **)((int)node + 100);
          while (vs != NULL) {
            v = &vs->voice;
            alSynStopVoice(*(ALSynth **)((int)node + 0x14),v);
            alSynFreeVoice(*(ALSynth **)((int)node + 0x14),v);
            if (vs->flags != '\0') {
              __seqpStopOsc((ALSeqPlayer *)node,vs);
            }
            __unmapVoice((ALSeqPlayer *)node,v);
            vs = *(ALVoiceState **)((int)node + 100);
          }
          *(undefined4 *)((int)node + 0x1c) = 0;
          *(undefined4 *)((int)node + 0x2c) = 0;
        }
        break;
      case 0x11:
        if (*(int *)((int)node + 0x2c) == 1) {
          alEvtqFlushType(evtq,0);
          alEvtqFlushType(evtq,2);
          puVar3 = *(undefined4 **)((int)node + 100);
          while (puVar3 != NULL) {
            cVar5 = __voiceNeedsNoteKill((ALSeqPlayer *)node,(ALVoice *)(puVar3 + 1),50000);
            if (cVar5 != '\0') {
              __seqpReleaseVoice((ALSeqPlayer *)node,(ALVoice *)(puVar3 + 1),50000);
            }
            puVar3 = (undefined4 *)*puVar3;
          }
          *(undefined4 *)((int)node + 0x2c) = 2;
          sStack20 = 0x10;
          alEvtqPostEvent(evtq,(ALEvent *)&sStack20,0x7fffffff);
        }
        break;
      case 0x16:
        uVar2 = *(undefined4 *)((int)node + 0x40);
        vs = *(ALVoiceState **)((int)node + 0x3c);
        delta = (**(code **)((int)node + 0x74))(uVar2,apAStack40);
        if (false) {
          fVar4 = ROUND((float)apAStack40[0]);
        }
        else {
          fVar4 = FLOOR((float)apAStack40[0]);
        }
        uVar6 = (u8)(int)fVar4;
        if (false) {
          if (false) {
            fVar4 = ROUND((float)apAStack40[0] - 2147483648.00000000);
          }
          else {
            fVar4 = FLOOR((float)apAStack40[0] - 2147483648.00000000);
          }
          if (false) goto LAB_7001cee8;
          uVar6 = (u8)(int)fVar4;
        }
        else {
          if ((int)fVar4 < 0) {
LAB_7001cee8:
            uVar6 = -1;
          }
        }
        vs->tremelo = uVar6;
        volume = __vsVol(vs,(ALSeqPlayer *)node);
        t_00 = vs->envEndTime - *(int *)((int)node + 0x1c);
        if (t_00 < 0) {
          t_00 = 1000;
        }
        alSynSetVol(*(ALSynth **)((int)node + 0x14),&vs->voice,volume,t_00);
        sStack20 = 0x16;
        pAStack16 = vs;
        uStack12 = uVar2;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,delta);
        break;
      case 0x17:
        uVar2 = *(undefined4 *)((int)node + 0x40);
        vs = *(ALVoiceState **)((int)node + 0x3c);
        uVar1 = *(undefined *)((int)node + 0x44);
        delta = (**(code **)((int)node + 0x74))(uVar2,apAStack40);
        *(ALBank **)&vs->vibrato = apAStack40[0];
        alSynSetPitch(*(ALSynth **)((int)node + 0x14),&vs->voice,pitch);
        sStack20 = 0x17;
        pAStack16 = vs;
        uStack12 = uVar2;
        uStack8 = uVar1;
        alEvtqPostEvent(evtq,(ALEvent *)&sStack20,delta);
      }
    }
    delta = alEvtqNextEvent(evtq,(ALEvent *)seqp);
    *(ALMicroTime *)((int)node + 0x28) = delta;
    in_a1 = extraout_a1;
    if (delta != 0) {
      *(int *)((int)node + 0x1c) = *(int *)((int)node + 0x1c) + delta;
      return delta;
    }
  } while( true );
}



void __seqpStopOsc(ALSeqPlayer *seqp,ALVoiceState *vs)

{
  short sVar1;
  ALLink_s *pAVar2;
  ALVoiceState *pAVar3;
  ALLink *a;
  
  pAVar2 = (ALLink_s *)(seqp->evtq).allocList.prev;
joined_r0x7001d2d4:
  do {
    a = (ALLink *)pAVar2;
    if (a == NULL) {
      return;
    }
    sVar1 = *(short *)&a[1].prev;
    pAVar2 = a->next;
    if (sVar1 == 0x16) {
      pAVar3 = (ALVoiceState *)a[2].next;
    }
    else {
      if (sVar1 != 0x17) goto joined_r0x7001d2d4;
      pAVar3 = (ALVoiceState *)a[2].next;
    }
    if (vs == pAVar3) {
      (*(code *)seqp->loopStart)(a[2].prev);
      alUnlink(a);
      if (pAVar2 != NULL) {
        pAVar2[1].next = (ALLink_s *)((int)&(a[1].next)->next + (int)&(pAVar2[1].next)->next);
      }
      alLink(a,(ALLink *)&(seqp->evtq).freeList.prev);
      if (sVar1 == 0x16) {
        vs->flags = vs->flags & 0xfe;
      }
      else {
        vs->flags = vs->flags & 0xfd;
      }
      if (vs->flags == '\0') {
        return;
      }
    }
  } while( true );
}



void __initChanState(ALSeqPlayer *seqp)

{
  ALVoiceState *pAVar1;
  longlong lVar2;
  int iVar3;
  
  lVar2 = 0;
  iVar3 = 0;
  if (seqp->maxChannels != '\0') {
    pAVar1 = seqp->vAllocHead;
    while( true ) {
      *(undefined4 *)((int)&pAVar1->next + iVar3) = 0;
      __resetPerfChanState(seqp,(s32)lVar2);
      lVar2 = (longlong)((s32)lVar2 + 1);
      iVar3 += 0x10;
      if ((longlong)(ulonglong)seqp->maxChannels <= lVar2) break;
      pAVar1 = seqp->vAllocHead;
    }
  }
  return;
}



void alSeqpNew(ALSeqPlayer *seqp,ALSeqpConfig *c)

{
  u8 uVar1;
  ALHeap *hp;
  ALSeqMarker *pAVar2;
  ALGlobals *pAVar3;
  ALVoiceState *items;
  ALVoiceState *pAVar4;
  int iVar5;
  ALLink_s *pAVar6;
  
  hp = c->heap;
  seqp->bank = NULL;
  seqp->target = NULL;
  pAVar3 = slg;
  seqp->chanMask = 0xff;
  seqp->uspt = 0x1e8;
  seqp->nextDelta = 0;
  seqp->state = 0;
  seqp->vol = 0x7fff;
  *(ALGlobals **)&seqp->drvr = pAVar3;
  uVar1 = c->debugFlags;
  seqp->chanState = (ALChanState *)0x3e80;
  seqp->curTime = 0;
  seqp->debugFlags = uVar1;
  seqp->updateOsc = c->initOsc;
  seqp->stopOsc = c->updateOsc;
  pAVar2 = (ALSeqMarker *)c->stopOsc;
  seqp->loopEnd = NULL;
  seqp->loopCount = 0;
  seqp[1].node.next = NULL;
  *(undefined2 *)&(seqp->nextEvent).msg = 9;
  seqp->loopStart = pAVar2;
  seqp->maxChannels = c->maxChannels;
  _alHeapDBAlloc(NULL,0,hp,(uint)c->maxChannels,0x10);
  seqp->vAllocHead = items;
  __initChanState(seqp);
  _alHeapDBAlloc(NULL,0,hp,c->maxVoices,0x38);
  seqp->initOsc = NULL;
  iVar5 = 0;
  if (0 < c->maxVoices) {
    pAVar6 = (ALLink_s *)seqp->initOsc;
    pAVar4 = items;
    while( true ) {
      iVar5 += 1;
      ((ALLink *)&pAVar4->next)->next = pAVar6;
      *(ALVoiceState **)&seqp->initOsc = pAVar4;
      pAVar4 = pAVar4 + 1;
      if (c->maxVoices <= iVar5) break;
      pAVar6 = (ALLink_s *)seqp->initOsc;
    }
  }
  seqp->vAllocTail = NULL;
  seqp->vFreeList = NULL;
  _alHeapDBAlloc(NULL,0,hp,c->maxEvents,0x1c);
  alEvtqNew((ALEventQueue *)&(seqp->evtq).freeList.prev,(ALEventListItem *)items,c->maxEvents);
  (seqp->node).next = NULL;
  (seqp->node).handler = __seqpVoiceHandler;
  *(ALSeqPlayer **)&(seqp->node).clientData = seqp;
  alSynAddPlayer((ALSynth *)slg,(ALPlayer *)seqp);
  return;
}



void alSynStartVoiceParams
               (ALSynth *s,ALVoice *v,ALWaveTable *w,f32 pitch,s16 vol,ALPan pan,u8 fxmix,
               ALMicroTime t)

{
  int iVar1;
  ALParam AVar3;
  int iVar2;
  undefined in_stack_00000012;
  undefined2 uStack00000012;
  int micros;
  
  if ((v->pvoice != NULL) && (AVar3 = ___allocParam(), AVar3 != (ALParam)0x0)) {
    if (false) {
      t._3_1_ = -(char)t;
    }
    iVar2 = s->paramSamples;
    iVar1 = *(int *)(v->pvoice + 0xd8);
    *(undefined4 *)(int)(char)AVar3 = 0;
    *(undefined2 *)((int)(char)AVar3 + 8) = 0xd;
    *(int *)((int)(char)AVar3 + 4) = iVar2 + iVar1;
    *(s16 *)((int)(char)AVar3 + 10) = v->unityPitch;
    *(u8 *)((int)(char)AVar3 + 0x12) = fxmix;
    *(char *)((int)(char)AVar3 + 0x13) = (char)t;
    *(undefined2 *)((int)(char)AVar3 + 0x10) = uStack00000012;
    *(int *)((int)(char)AVar3 + 0xc) = (int)vol;
    iVar2 = _timeToSamples(s,micros);
    *(int *)((int)(char)AVar3 + 0x14) = iVar2;
    *(ALWaveTable **)((int)(char)AVar3 + 0x18) = w;
    (**(code **)(*(int *)(v->pvoice + 0xc) + 8))(*(int *)(v->pvoice + 0xc),3);
  }
  return;
}



void alCopy(void *src,void *dest,s32 len)

{
  undefined uVar1;
  undefined *puVar2;
  uint uVar3;
  
  uVar3 = 0;
  if (0 < len) {
    if ((len & 3U) != 0) {
      do {
        uVar1 = *(undefined *)src;
        uVar3 += 1;
        puVar2 = (undefined *)dest + 1;
        src = (undefined *)src + 1;
        *(undefined *)dest = uVar1;
        dest = puVar2;
      } while ((len & 3U) != uVar3);
      dest = puVar2;
      if (uVar3 == len) {
        return;
      }
    }
    do {
      uVar3 += 4;
      *(undefined *)dest = *(undefined *)src;
      ((undefined *)dest)[1] = ((undefined *)src)[1];
      ((undefined *)dest)[2] = ((undefined *)src)[2];
      ((undefined *)dest)[3] = ((undefined *)src)[3];
      src = (undefined *)src + 4;
      dest = (undefined *)dest + 4;
    } while (uVar3 != len);
  }
  return;
}



void __osPiCreateAccessQueue(void)

{
  __osPiAccessQueueEnabled = 1;
  osCreateMesgQueue(&__osPiAccessQueue,&piAccessBuf,1);
  osSendMesg(&__osPiAccessQueue,NULL,0);
  return;
}



void __osPiGetAccess(void)

{
  OSMesg pvStack4;
  
  if (__osPiAccessQueueEnabled == 0) {
    __osPiCreateAccessQueue();
  }
  osRecvMesg(&__osPiAccessQueue,&pvStack4,1);
  return;
}



void __osPiRelAccess(void)

{
  osSendMesg(&__osPiAccessQueue,NULL,0);
  return;
}



void _Litob(_Pft *px,char code)

{
  int iVar1;
  ulonglong uVar2;
  longlong __numer;
  longlong extraout_a1;
  longlong extraout_a1_00;
  int iVar3;
  char *pcVar4;
  int iStack80;
  undefined4 uStack64;
  undefined4 uStack60;
  int iStack52;
  uint uStack48;
  int iStack44;
  undefined4 uStack32;
  char acStack25 [24];
  char cStack1;
  
  __numer = 0x58;
  if (code == 'X') {
    pcVar4 = auppercase_hex_char;
  }
  else {
    pcVar4 = alowercase_hex_char;
  }
  iVar3 = 0x18;
  if (code == 'o') {
    uStack32 = 8;
  }
  else {
    uStack32 = 0x10;
    if ((code != 'x') && (code != 'X')) {
      uStack32 = 10;
    }
  }
  uStack48 = *(uint *)&px->v;
  iStack44 = *(int *)((int)&px->v + 4);
  if ((((code == 'd') || (code == 'i')) && ((int)uStack48 < 1)) && ((int)uStack48 < 0)) {
    uStack48 = ~uStack48 + (uint)(iStack44 == 0);
    iStack44 = -iStack44;
  }
  if (((uStack48 != 0) || (iStack44 != 0)) || (px->prec != 0)) {
    iVar3 = 0x17;
    __ull_rem((longlong)(int)uStack48,(longlong)iStack44);
    cStack1 = pcVar4[(int)__numer];
  }
  uVar2 = __ull_div((longlong)(int)uStack48,(longlong)iStack44);
  *(undefined4 *)((int)&px->v + 4) = (int)__numer;
  *(int *)&px->v = (int)uVar2;
  if (((-1 < (longlong)uVar2) && ((0 < (longlong)uVar2 || (__numer != 0)))) && (iVar3 != 0)) {
    iStack80 = *(int *)&px->v;
    __numer = extraout_a1;
    while( true ) {
      lldiv((lldiv_t *)&uStack64,__numer,(longlong)iStack80);
      iVar3 += -1;
      *(undefined4 *)&px->v = uStack64;
      *(undefined4 *)((int)&px->v + 4) = uStack60;
      (acStack25 + 1)[iVar3] = pcVar4[iStack52];
      iStack80 = *(int *)&px->v;
      if (iStack80 < 0) break;
      if (((iStack80 < 1) && (*(int *)((int)&px->v + 4) == 0)) ||
         (__numer = extraout_a1_00, iVar3 < 1)) break;
    }
  }
  px->n1 = 0x18U - iVar3;
  memcpy(px->s,acStack25 + 1 + iVar3,0x18U - iVar3);
  iVar3 = px->n1;
  iVar1 = px->prec;
  if (iVar3 < iVar1) {
    px->nz0 = iVar1 - iVar3;
  }
  if (((iVar1 < 0) && ((px->flags & 0x14) == 0x10)) &&
     (iVar3 = ((px->width - px->n0) - px->nz0) - iVar3, 0 < iVar3)) {
    px->nz0 = px->nz0 + iVar3;
  }
  return;
}



// WARNING: Instruction at (ram,0x7001dac8) overlaps instruction at (ram,0x7001dac4)
// 

void _Genld(_Pft *px,char code,char *p,short nsig,short xexp)

{
  bool bVar1;
  size_t sVar2;
  int iVar3;
  int unaff_s0_lo;
  char *__src;
  char *pcVar4;
  char *pcVar5;
  short unaff_s2_lo;
  int iVar6;
  size_t __n;
  short unaff_s3_lo;
  size_t __n_00;
  char unaff_s4_lo;
  
  iVar6 = (int)unaff_s2_lo;
  __n_00 = SEXT24(unaff_s3_lo);
  if ((int)__n_00 < 1) {
    __src = asc_80029CE0;
    __n_00 = 1;
  }
  if ((unaff_s4_lo != 'f') &&
     ((((unaff_s4_lo != 'g' && (unaff_s4_lo != 'G')) || (iVar6 < -4)) ||
      (*(int *)(unaff_s0_lo + 0x24) <= iVar6)))) {
    if ((unaff_s4_lo == 'g') || (unaff_s4_lo == 'G')) {
      __n = *(size_t *)(unaff_s0_lo + 0x24);
      if ((int)__n_00 < (int)__n) {
        *(size_t *)(unaff_s0_lo + 0x24) = __n_00;
        __n = __n_00;
      }
      *(int *)(unaff_s0_lo + 0x24) = __n - 1;
      if ((int)(__n - 1) < 0) {
        *(undefined4 *)(unaff_s0_lo + 0x24) = 0;
      }
      bVar1 = unaff_s4_lo == 'g';
      unaff_s4_lo = 'E';
      if (bVar1) {
        unaff_s4_lo = 'e';
      }
      iVar3 = *(int *)(unaff_s0_lo + 8);
    }
    else {
      iVar3 = *(int *)(unaff_s0_lo + 8);
    }
    *(char *)(iVar3 + *(int *)(unaff_s0_lo + 0x14)) = *__src;
    iVar3 = *(int *)(unaff_s0_lo + 0x24);
    *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + 1;
    if ((0 < iVar3) || ((*(uint *)(unaff_s0_lo + 0x30) & 8) != 0)) {
      *(undefined *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)) = 0x2e;
      iVar3 = *(int *)(unaff_s0_lo + 0x24);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + 1;
    }
    if (iVar3 < 1) {
      iVar3 = *(int *)(unaff_s0_lo + 8);
    }
    else {
      __n_00 = (int)((__n_00 - 1) * 0x10000) >> 0x10;
      if (iVar3 < (int)__n_00) {
        __n_00 = SEXT24((short)iVar3);
      }
      memcpy((void *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)),__src + 1,__n_00);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + __n_00;
      *(int *)(unaff_s0_lo + 0x18) = *(int *)(unaff_s0_lo + 0x24) - __n_00;
      iVar3 = *(int *)(unaff_s0_lo + 8);
    }
    pcVar4 = (char *)(iVar3 + *(int *)(unaff_s0_lo + 0x14));
    *pcVar4 = unaff_s4_lo;
    if (iVar6 < 0) {
      iVar6 = iVar6 * -0x10000 >> 0x10;
      pcVar4[1] = '-';
    }
    else {
      pcVar4[1] = '+';
    }
    pcVar5 = pcVar4 + 2;
    if (99 < iVar6) {
      if (999 < iVar6) {
        iVar3 = iVar6 / 1000;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar6 == -0x80000000)) {
          trap(0x1800);
        }
        iVar6 = (int)(short)(iVar6 % 1000);
        *pcVar5 = (char)iVar3 + '0';
        pcVar5 = pcVar4 + 3;
      }
      iVar3 = iVar6 / 100;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar6 == -0x80000000)) {
        trap(0x1800);
      }
      iVar6 = (int)(short)(iVar6 % 100);
      *pcVar5 = (char)iVar3 + '0';
      pcVar5 = pcVar5 + 1;
    }
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    *pcVar5 = (char)(iVar6 / 10) + '0';
    pcVar5[1] = (char)(iVar6 % 10) + '0';
    *(char **)(unaff_s0_lo + 0x1c) =
         pcVar5 + ((2 - *(int *)(unaff_s0_lo + 8)) - *(int *)(unaff_s0_lo + 0x14));
    goto LAB_7001df7c;
  }
  __n = (iVar6 + 1) * 0x10000 >> 0x10;
  if (unaff_s4_lo != 'f') {
    sVar2 = *(size_t *)(unaff_s0_lo + 0x24);
    if ((*(uint *)(unaff_s0_lo + 0x30) & 8) == 0) {
      if ((int)__n_00 < (int)sVar2) {
        *(size_t *)(unaff_s0_lo + 0x24) = __n_00;
        sVar2 = __n_00;
        goto LAB_7001db18;
      }
      iVar6 = sVar2 - __n;
    }
    else {
LAB_7001db18:
      iVar6 = sVar2 - __n;
    }
    *(int *)(unaff_s0_lo + 0x24) = iVar6;
    if (iVar6 < 0) {
      *(undefined4 *)(unaff_s0_lo + 0x24) = 0;
    }
  }
  if ((int)__n < 1) {
    iVar3 = -__n;
    *(undefined *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)) = 0x30;
    iVar6 = *(int *)(unaff_s0_lo + 0x24);
    *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + 1;
    if ((0 < iVar6) || ((*(uint *)(unaff_s0_lo + 0x30) & 8) != 0)) {
      *(undefined *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)) = 0x2e;
      iVar6 = *(int *)(unaff_s0_lo + 0x24);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + 1;
    }
    if (iVar6 < iVar3) {
      __n = iVar6 * -0x10000 >> 0x10;
      iVar3 = -__n;
    }
    iVar6 += __n;
    *(int *)(unaff_s0_lo + 0x18) = iVar3;
    *(int *)(unaff_s0_lo + 0x24) = iVar6;
    if (iVar6 < (int)__n_00) {
      __n_00 = iVar6 * 0x10000 >> 0x10;
    }
    *(size_t *)(unaff_s0_lo + 0x1c) = __n_00;
    memcpy((void *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)),__src,__n_00);
    *(int *)(unaff_s0_lo + 0x20) = *(int *)(unaff_s0_lo + 0x24) - __n_00;
  }
  else {
    if ((int)__n_00 < (int)__n) {
      memcpy((void *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)),__src,__n_00);
      iVar6 = *(int *)(unaff_s0_lo + 0x24);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + __n_00;
      *(int *)(unaff_s0_lo + 0x18) = __n - __n_00;
      if ((0 < iVar6) || ((*(uint *)(unaff_s0_lo + 0x30) & 8) != 0)) {
        *(undefined *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)) = 0x2e;
        iVar6 = *(int *)(unaff_s0_lo + 0x24);
        *(int *)(unaff_s0_lo + 0x1c) = *(int *)(unaff_s0_lo + 0x1c) + 1;
      }
      *(int *)(unaff_s0_lo + 0x20) = iVar6;
    }
    else {
      memcpy((void *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)),__src,__n);
      iVar6 = *(int *)(unaff_s0_lo + 0x24);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + __n;
      __n_00 = (int)((__n_00 - __n) * 0x10000) >> 0x10;
      if ((0 < iVar6) || ((*(uint *)(unaff_s0_lo + 0x30) & 8) != 0)) {
        *(undefined *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)) = 0x2e;
        iVar6 = *(int *)(unaff_s0_lo + 0x24);
        *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + 1;
      }
      if (iVar6 < (int)__n_00) {
        __n_00 = SEXT24((short)iVar6);
      }
      memcpy((void *)(*(int *)(unaff_s0_lo + 8) + *(int *)(unaff_s0_lo + 0x14)),__src + __n,__n_00);
      *(int *)(unaff_s0_lo + 0x14) = *(int *)(unaff_s0_lo + 0x14) + __n_00;
      *(int *)(unaff_s0_lo + 0x18) = *(int *)(unaff_s0_lo + 0x24) - __n_00;
    }
  }
LAB_7001df7c:
  if (((*(uint *)(unaff_s0_lo + 0x30) & 0x14) == 0x10) &&
     (iVar6 = *(int *)(unaff_s0_lo + 0xc) + *(int *)(unaff_s0_lo + 0x14) +
              *(int *)(unaff_s0_lo + 0x18) + *(int *)(unaff_s0_lo + 0x1c) +
              *(int *)(unaff_s0_lo + 0x20), iVar6 < *(int *)(unaff_s0_lo + 0x28))) {
    *(int *)(unaff_s0_lo + 0x10) = *(int *)(unaff_s0_lo + 0x28) - iVar6;
  }
  return;
}



void dummy7001DFD8(void)

{
  return;
}



// WARNING: Instruction at (ram,0x7001e380) overlaps instruction at (ram,0x7001e37c)
// 

void _Ldtob(_Pft *px,char code)

{
  byte *pbVar1;
  ulonglong uVar2;
  ushort uVar3;
  ushort uVar4;
  int __denom;
  ulonglong uVar5;
  ulonglong extraout_a0;
  char *p;
  int iVar6;
  _Pft *px_00;
  undefined8 in_a2;
  undefined8 extraout_a2;
  short nsig;
  short extraout_a3_lo;
  ulonglong uVar7;
  int iVar8;
  ushort uVar9;
  char *pcVar10;
  char *pcVar11;
  short sVar12;
  ulonglong in_f0;
  double dVar13;
  uint in_register_00001010;
  double dVar14;
  short xexp;
  int iStack92;
  undefined4 uStack88;
  ushort uStack54;
  undefined uStack32;
  char acStack31 [31];
  
  p = (char *)in_a2;
  dVar14 = (double)px->v;
  if (px->prec < 0) {
    px->prec = 6;
  }
  else {
    if ((px->prec == 0) && ((code == 'g' || (code == 'G')))) {
      px->prec = 1;
    }
  }
  uVar3 = *(ushort *)&px->v;
  uVar5 = (ulonglong)uVar3;
  px_00 = (_Pft *)(uint)uVar3;
  sVar12 = (short)((int)((uint)uVar3 & 0x7ff0) >> 4);
  if (sVar12 == 0x7ff) {
    uStack54 = 0;
    if (((((*(ushort *)&px->v & 0xf) == 0) && (*(short *)((int)&px->v + 2) == 0)) &&
        (*(short *)((int)&px->v + 4) == 0)) && (*(short *)((int)&px->v + 6) == 0)) {
      sVar12 = 1;
    }
    else {
      sVar12 = 2;
    }
  }
  else {
    if (sVar12 == 0) {
      sVar12 = 0;
      if (true) {
        uStack54 = 0;
      }
      else {
        sVar12 = 2;
      }
    }
    else {
      uStack54 = sVar12 + -0x3fe;
      *(ushort *)&px->v = uVar3 & 0x800f | 0x3ff0;
      sVar12 = -1;
    }
  }
  if (sVar12 < 1) {
    if (sVar12 == 0) {
      uStack54 = 0;
    }
    else {
      __denom = 0;
      pcVar10 = acStack31;
      if (dVar14 < (double)((ulonglong)in_register_00001010 << 0x20)) {
        dVar14 = -dVar14;
      }
      iVar6 = 6;
      iVar8 = ((int)(short)uStack54 * 0x7597) / 100000 + -4;
      uStack54 = (ushort)iVar8;
      if (iVar8 * 0x10000 >> 0x10 < 0) {
        uVar5 = SEXT48(3 - (iVar8 * 0x10000 >> 0x10));
        uVar2 = uVar5 & 0xfffffffffffffffc;
        uStack54 = -(short)uVar2;
        if (0 < (longlong)uVar2) {
          uVar5 = ZEXT48(&digits);
          do {
            uVar7 = uVar2 & 1;
            uVar2 = SEXT48((int)uVar2 >> 1);
            if (uVar7 != 0) {
              dVar14 = dVar14 * (&digits)[__denom];
            }
            __denom += 1;
          } while (0 < (longlong)uVar2);
        }
      }
      else {
        __denom = 0;
        uVar3 = uStack54 & 0xfffc;
        if (0 < (short)uStack54) {
          dVar13 = (double)(in_f0 & 0xffffffff00000000);
          if (0 < (short)uVar3) {
            uVar5 = ZEXT48(&digits);
            uVar4 = uVar3;
            do {
              uVar9 = uVar4 & 1;
              uVar4 = (short)uVar4 >> 1;
              if (uVar9 != 0) {
                dVar13 = dVar13 * (&digits)[__denom];
              }
              __denom += 1;
            } while (0 < (short)uVar4);
          }
          dVar14 = dVar14 / dVar13;
          uStack54 = uVar3;
        }
      }
      px_00 = (_Pft *)uVar5;
      if (code == 'f') {
        iVar6 = (int)(short)uStack54 + 10;
      }
      iVar6 += px->prec;
      if (0x13 < iVar6) {
        iVar6 = 0x13;
      }
      uStack32 = 0x30;
      if (0 < iVar6) {
        if ((double)((ulonglong)in_register_00001010 << 0x20) < dVar14) {
          do {
            __denom = (int)dVar14;
            iVar6 += -8;
            pcVar10 = pcVar10 + 8;
            if (0 < iVar6) {
              dVar14 = (dVar14 - (double)__denom) * dbl_80029CE8;
            }
            iVar8 = 8;
            if ((0 < __denom) && (iVar8 = 7, uVar5 = (longlong)(int)&iStack92, true)) {
              do {
                ldiv((long)&iStack92,__denom);
                pcVar10 = pcVar10 + -1;
                *pcVar10 = (char)uStack88 + '0';
                uVar5 = extraout_a0;
                in_a2 = extraout_a2;
                nsig = extraout_a3_lo;
                if (iStack92 < 1) break;
                iVar8 += -1;
                uVar5 = extraout_a0;
                in_a2 = extraout_a2;
                nsig = extraout_a3_lo;
                __denom = iStack92;
              } while (-1 < iVar8);
            }
            p = (char *)in_a2;
            px_00 = (_Pft *)uVar5;
            __denom = iVar8 + -2;
            if (-1 < iVar8 + -1) {
              while( true ) {
                pcVar10 = pcVar10 + -1;
                *pcVar10 = '0';
                if (__denom < 0) break;
                __denom += -1;
              }
            }
            pcVar10 = pcVar10 + 8;
          } while ((0 < iVar6) && ((double)((ulonglong)in_register_00001010 << 0x20) < dVar14));
        }
      }
      uStack54 += 7;
      pcVar10 = pcVar10 + (-1 - (int)&uStack32);
      pcVar11 = acStack31;
      while (acStack31[0] == '0') {
        pcVar11 = pcVar11 + 1;
        pcVar10 = pcVar10 + -1;
        uStack54 += -1;
        acStack31[0] = *pcVar11;
      }
      if (code == 'f') {
        __denom = (int)(short)uStack54 + 1;
      }
      else {
        if ((code == 'e') || (__denom = 0, code == 'E')) {
          __denom = 1;
        }
      }
      code = (char)__denom;
      __denom = (__denom + px->prec) * 0x10000 >> 0x10;
      if ((int)pcVar10 < __denom) {
        __denom = (int)(short)pcVar10;
      }
      if (0 < __denom) {
        if ((__denom < (int)pcVar10) && (0x34 < (byte)pcVar11[__denom])) {
          uVar5 = 0x39;
        }
        else {
          uVar5 = 0x30;
        }
        code = (char)uVar5;
        px_00 = (_Pft *)uVar5;
        iVar6 = __denom + -1;
        if (uVar5 == (ulonglong)(byte)pcVar11[__denom + -1]) {
          pcVar10 = pcVar11 + iVar6;
          do {
            pbVar1 = (byte *)(pcVar10 + -1);
            iVar6 += -1;
            pcVar10 = pcVar10 + -1;
          } while (uVar5 == (ulonglong)*pbVar1);
        }
        if (uVar5 == 0x39) {
          pcVar11[iVar6] = pcVar11[iVar6] + '\x01';
        }
        if (iVar6 < 0) {
          uStack54 += 1;
        }
      }
    }
    _Genld(px_00,code,p,nsig,xexp);
  }
  else {
    if (sVar12 == 2) {
      p = aNan;
    }
    else {
      p = aInf;
    }
    px->n1 = 3;
    memcpy(px->s,p,3);
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osEPiRawStartDma(OSPiHandle *pihandle,s32 direction,u32 devAddr,void *dramAddr,u32 size)

{
  do {
  } while ((_PI_STATUS_REG & 3) != 0);
  _PI_DRAM_ADDR_REG = osVirtualToPhysical(dramAddr);
  _PI_CART_ADDR_REG = (pihandle->baseAddress | devAddr) & 0x1fffffff;
  if (direction == 0) {
    _PI_WR_LEN_REG = size - 1;
  }
  else {
    if (direction != 1) {
      return -1;
    }
    _PI_RD_LEN_REG = size - 1;
  }
  return 0;
}



void __osDevMgrMain(void *arg)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  int iStack16;
  OSMesg pvStack12;
  OSMesg pvStack8;
  undefined2 *puStack4;
  
  puStack4 = NULL;
  do {
    while( true ) {
      osRecvMesg(*(OSMesgQueue **)((int)arg + 8),&puStack4,1);
      iVar1 = *(int *)(puStack4 + 10);
      if (((iVar1 == 0) || (*(char *)(iVar1 + 4) != '\x02')) ||
         ((*(int *)(iVar1 + 0x14) != 0 && (*(int *)(iVar1 + 0x14) != 1)))) break;
      iVar1 = *(int *)(puStack4 + 10);
      iVar3 = iVar1 + 0x14 + (uint)*(ushort *)(iVar1 + 0x1a) * 0x24;
      *(undefined4 *)(iVar1 + 0x1c) = 0xffffffff;
      if (*(short *)(iVar1 + 0x18) != 3) {
        *(int *)(iVar3 + 0x1c) = *(int *)(iVar3 + 0x1c) - *(int *)(iVar3 + 0x24);
      }
      if ((*(short *)(iVar1 + 0x18) == 2) && (*(int *)(*(int *)(puStack4 + 10) + 0x14) == 0)) {
        bVar2 = true;
      }
      else {
        bVar2 = false;
      }
      osRecvMesg(*(OSMesgQueue **)((int)arg + 0x10),&pvStack12,1);
      __osResetGlobalIntMask(0x100401);
      osEPiRawWriteIo(*(OSPiHandle **)(puStack4 + 10),0x5000510,*(uint *)(iVar1 + 0x24) | 0x80000000
                     );
      while( true ) {
        osRecvMesg(*(OSMesgQueue **)((int)arg + 0xc),&pvStack8,1);
        osSendMesg(*(OSMesgQueue **)(puStack4 + 2),puStack4,0);
        if ((!bVar2) || (*(int *)(*(int *)(puStack4 + 10) + 0x2c) != 0)) break;
        bVar2 = false;
      }
      osSendMesg(*(OSMesgQueue **)((int)arg + 0x10),NULL,0);
      if (*(short *)(*(int *)(puStack4 + 10) + 0x1a) == 1) {
        osYieldThread();
      }
    }
    if (false) {
switchD_7001e80c_caseD_d:
      iStack16 = -1;
    }
    else {
      switch(*puStack4) {
      case 10:
        osSendMesg(*(OSMesgQueue **)(puStack4 + 2),puStack4,0);
        iStack16 = -1;
        break;
      case 0xb:
        osRecvMesg(*(OSMesgQueue **)((int)arg + 0x10),&pvStack12,1);
        iStack16 = (**(code **)((int)arg + 0x14))
                             (0,*(undefined4 *)(puStack4 + 6),*(undefined4 *)(puStack4 + 4),
                              *(undefined4 *)(puStack4 + 8));
        break;
      case 0xc:
        osRecvMesg(*(OSMesgQueue **)((int)arg + 0x10),&pvStack12,1);
        iStack16 = (**(code **)((int)arg + 0x14))
                             (1,*(undefined4 *)(puStack4 + 6),*(undefined4 *)(puStack4 + 4),
                              *(undefined4 *)(puStack4 + 8));
        break;
      default:
        goto switchD_7001e80c_caseD_d;
      case 0xf:
        osRecvMesg(*(OSMesgQueue **)((int)arg + 0x10),&pvStack12,1);
        iStack16 = (**(code **)((int)arg + 0x18))
                             (*(undefined4 *)(puStack4 + 10),0,*(undefined4 *)(puStack4 + 6),
                              *(undefined4 *)(puStack4 + 4),*(undefined4 *)(puStack4 + 8));
        break;
      case 0x10:
        osRecvMesg(*(OSMesgQueue **)((int)arg + 0x10),&pvStack12,1);
        iStack16 = (**(code **)((int)arg + 0x18))
                             (*(undefined4 *)(puStack4 + 10),1,*(undefined4 *)(puStack4 + 6),
                              *(undefined4 *)(puStack4 + 4),*(undefined4 *)(puStack4 + 8));
      }
    }
    if (iStack16 == 0) {
      osRecvMesg(*(OSMesgQueue **)((int)arg + 0xc),&pvStack8,1);
      osSendMesg(*(OSMesgQueue **)(puStack4 + 2),puStack4,0);
      osSendMesg(*(OSMesgQueue **)((int)arg + 0x10),NULL,0);
    }
  } while( true );
}



void proc_7001E9B0(undefined param_1,undefined param_2,undefined param_3,undefined param_4,
                  undefined param_5,undefined param_6,undefined param_7,undefined4 param_8)

{
  return;
}



// WARNING: Could not reconcile some variable overlaps

u16 __osSumcalc(u8 *ptr,int length)

{
  byte bVar1;
  byte *pbStack12;
  undefined4 uStack8;
  int iStack4;
  
  uStack8 = 0;
  uStack8._2_2_ = 0;
  iStack4 = 0;
  pbStack12 = ptr;
  if (0 < length) {
    do {
      bVar1 = *pbStack12;
      pbStack12 = pbStack12 + 1;
      iStack4 += 1;
      uStack8 = uStack8 + (uint)bVar1 & 0xffff;
    } while (iStack4 < length);
  }
  return uStack8._2_2_;
}



s32 __osIdCheckSum(u16 *ptr,u16 *csum,u16 *icsum)

{
  ushort uVar1;
  uint uStack8;
  
  *icsum = 0;
  *csum = *icsum;
  uStack8 = 0;
  do {
    uVar1 = *(ushort *)((int)ptr + uStack8);
    *csum = *csum + uVar1;
    *icsum = *icsum + ~uVar1;
    uStack8 += 2;
  } while (uStack8 < 0x1c);
  return 0;
}



s32 __osRepairPackId(OSPfs *pfs,__OSPackId *badid,__OSPackId *newid)

{
  undefined4 uVar1;
  u32 uVar2;
  u16 auStack88 [4];
  int iStack80;
  int iStack76;
  bool bStack69;
  byte abStack68 [32];
  byte abStack36 [32];
  s32 sStack4;
  
  sStack4 = 0;
  bStack69 = false;
  if (pfs->activebank != '\0') {
    pfs->activebank = '\0';
    sStack4 = __osPfsSelectBank(pfs);
    if (sStack4 != 0) {
      return sStack4;
    }
  }
  newid->repaired = 0xffffffff;
  uVar2 = osGetCount();
  newid->random = uVar2;
  uVar1 = *(undefined4 *)((int)&badid->serial_mid + 4);
  *(undefined4 *)&newid->serial_mid = *(undefined4 *)&badid->serial_mid;
  *(undefined4 *)((int)&newid->serial_mid + 4) = uVar1;
  uVar1 = *(undefined4 *)((int)&badid->serial_low + 4);
  *(undefined4 *)&newid->serial_low = *(undefined4 *)&badid->serial_low;
  *(undefined4 *)((int)&newid->serial_low + 4) = uVar1;
  iStack80 = 0;
  do {
    pfs->activebank = (u8)iStack80;
    sStack4 = __osPfsSelectBank(pfs);
    if (sStack4 != 0) {
      return sStack4;
    }
    sStack4 = __osContRamRead(pfs->queue,pfs->channel,0,abStack36);
    if (sStack4 != 0) {
      return sStack4;
    }
    abStack36[0] = (byte)iStack80 | 0x80;
    iStack76 = 1;
    do {
      abStack36[iStack76] = ~abStack36[iStack76];
      iStack76 += 1;
    } while (iStack76 < 0x20);
    sStack4 = __osContRamWrite(pfs->queue,pfs->channel,0,abStack36,0);
    if (sStack4 != 0) {
      return sStack4;
    }
    sStack4 = __osContRamRead(pfs->queue,pfs->channel,0,abStack68);
    if (sStack4 != 0) {
      return sStack4;
    }
    iStack76 = 0;
    do {
      if (abStack36[iStack76] != abStack68[iStack76]) break;
      iStack76 += 1;
    } while (iStack76 < 0x20);
    if (iStack76 != 0x20) break;
    if (0 < iStack80) {
      pfs->activebank = '\0';
      sStack4 = __osPfsSelectBank(pfs);
      if (sStack4 != 0) {
        return sStack4;
      }
      sStack4 = __osContRamRead(pfs->queue,pfs->channel,0,abStack36);
      if (sStack4 != 0) {
        return sStack4;
      }
      if (abStack36[0] != 0x80) break;
    }
    iStack80 += 1;
  } while (iStack80 < 0x3e);
  pfs->activebank = '\0';
  sStack4 = __osPfsSelectBank(pfs);
  if (sStack4 == 0) {
    bStack69 = 0 < iStack80;
    newid->deviceid = badid->deviceid & 0xfffe | (ushort)bStack69;
    newid->banks = (u8)iStack80;
    newid->version = badid->version;
    __osIdCheckSum((u16 *)newid,&newid->checksum,&newid->inverted_checksum);
    auStack88[0] = 1;
    auStack88[1] = 3;
    auStack88[2] = 4;
    auStack88[3] = 6;
    iStack76 = 0;
    do {
      sStack4 = __osContRamWrite(pfs->queue,pfs->channel,auStack88[iStack76],(u8 *)newid,1);
      if (sStack4 != 0) {
        return sStack4;
      }
      iStack76 += 1;
    } while (iStack76 < 4);
    sStack4 = __osContRamRead(pfs->queue,pfs->channel,1,abStack36);
    if (sStack4 == 0) {
      iStack76 = 0;
      do {
        if (*(byte *)((int)&newid->repaired + iStack76) != abStack36[iStack76]) {
          return 10;
        }
        iStack76 += 1;
      } while (iStack76 < 0x20);
      sStack4 = 0;
    }
  }
  return sStack4;
}



s32 __osCheckPackId(OSPfs *pfs,__OSPackId *temp)

{
  s32 sVar1;
  int iStack24;
  int iStack20;
  u16 uStack16;
  u16 uStack14;
  s32 sStack12;
  u16 auStack8 [4];
  
  sStack12 = 0;
  if (pfs->activebank != '\0') {
    pfs->activebank = '\0';
    sStack12 = __osPfsSelectBank(pfs);
    if (sStack12 != 0) {
      return sStack12;
    }
  }
  auStack8[0] = 1;
  auStack8[1] = 3;
  auStack8[2] = 4;
  auStack8[3] = 6;
  iStack20 = 1;
  do {
    sStack12 = __osContRamRead(pfs->queue,pfs->channel,auStack8[iStack20],(u8 *)temp);
    if (sStack12 != 0) {
      return sStack12;
    }
    __osIdCheckSum((u16 *)temp,&uStack14,&uStack16);
  } while (((temp->checksum != uStack14) || (temp->inverted_checksum != uStack16)) &&
          (iStack20 += 1, iStack20 < 4));
  if (iStack20 == 4) {
    sVar1 = 10;
  }
  else {
    iStack24 = 0;
    do {
      if ((iStack24 != iStack20) &&
         (sStack12 = __osContRamWrite(pfs->queue,pfs->channel,auStack8[iStack24],(u8 *)temp,1),
         sStack12 != 0)) {
        return sStack12;
      }
      iStack24 += 1;
    } while (iStack24 < 4);
    sVar1 = 0;
  }
  return sVar1;
}



s32 __osGetId(OSPfs *pfs)

{
  s32 sVar1;
  __OSPackId *p_Stack80;
  __OSPackId _Stack72;
  __OSPackId _Stack40;
  u16 uStack8;
  u16 uStack6;
  int iStack4;
  
  if (pfs->activebank != '\0') {
    pfs->activebank = '\0';
    sVar1 = __osPfsSelectBank(pfs);
    if (sVar1 != 0) {
      return sVar1;
    }
  }
  sVar1 = __osContRamRead(pfs->queue,pfs->channel,1,(u8 *)&_Stack40);
  if (sVar1 != 0) {
    return sVar1;
  }
  __osIdCheckSum((u16 *)&_Stack40,&uStack6,&uStack8);
  p_Stack80 = &_Stack40;
  if ((_Stack40.checksum != uStack6) || (_Stack40.inverted_checksum != uStack8)) {
    sVar1 = __osCheckPackId(pfs,p_Stack80);
    if (sVar1 == 10) {
      sVar1 = __osRepairPackId(pfs,p_Stack80,&_Stack72);
      if (sVar1 != 0) {
        return sVar1;
      }
      p_Stack80 = &_Stack72;
    }
    else {
      if (sVar1 != 0) {
        return sVar1;
      }
    }
  }
  if ((p_Stack80->deviceid & 1) == 0) {
    sVar1 = __osRepairPackId(pfs,p_Stack80,&_Stack72);
    if (sVar1 != 0) {
      return sVar1;
    }
    p_Stack80 = &_Stack72;
    if ((_Stack72.deviceid & 1) == 0) {
      return 0xb;
    }
  }
  iStack4 = 0;
  do {
    pfs->id[iStack4] = *(u8 *)((int)&p_Stack80->repaired + iStack4);
    iStack4 += 1;
  } while (iStack4 < 0x20);
  pfs->version = (uint)p_Stack80->version;
  pfs->banks = p_Stack80->banks;
  pfs->inode_start_page = (uint)pfs->banks * 2 + 3;
  pfs->dir_size = 0x10;
  pfs->inode_table = 8;
  pfs->minode_table = (uint)pfs->banks * 8 + 8;
  pfs->dir_table = pfs->minode_table + (uint)pfs->banks * 8;
  sVar1 = __osContRamRead(pfs->queue,pfs->channel,7,pfs->label);
  if (sVar1 == 0) {
    sVar1 = 0;
  }
  return sVar1;
}



s32 __osCheckId(OSPfs *pfs)

{
  s32 sVar1;
  u8 auStack36 [32];
  int iStack4;
  
  if (pfs->activebank != '\0') {
    pfs->activebank = '\0';
    sVar1 = __osPfsSelectBank(pfs);
    if (sVar1 != 0) {
      return sVar1;
    }
  }
  sVar1 = __osContRamRead(pfs->queue,pfs->channel,1,auStack36);
  if ((sVar1 == 0) ||
     ((sVar1 == 2 && (sVar1 = __osContRamRead(pfs->queue,pfs->channel,1,auStack36), sVar1 == 0)))) {
    iStack4 = 0;
    do {
      if (auStack36[iStack4] != pfs->id[iStack4]) {
        return 2;
      }
      iStack4 += 1;
    } while (iStack4 < 0x20);
    sVar1 = 0;
  }
  return sVar1;
}



s32 __osPfsRWInode(OSPfs *pfs,__OSInode *inode,u8 flag,u8 bank)

{
  short sVar1;
  s32 sVar2;
  u16 uVar3;
  __OSInodeUnit *buffer;
  int iStack16;
  s32 sStack12;
  int iStack8;
  
  if (pfs->activebank != '\0') {
    pfs->activebank = '\0';
    sVar2 = __osPfsSelectBank(pfs);
    if (sVar2 != 0) {
      return sVar2;
    }
  }
  if (bank == '\0') {
    iStack16 = pfs->inode_start_page;
  }
  else {
    iStack16 = 1;
  }
  if (flag == '\x01') {
    uVar3 = __osSumcalc((u8 *)(inode->inode_page + iStack16),iStack16 * -2 + 0x100);
    *(undefined *)((int)inode->inode_page + 1) = (char)uVar3;
  }
  iStack8 = 0;
  do {
    buffer = inode->inode_page + iStack8 * 0x10;
    sVar1 = (short)iStack8;
    if (flag == '\x01') {
      __osContRamWrite(pfs->queue,pfs->channel,(short)pfs->inode_table + (ushort)bank * 8 + sVar1,
                       (u8 *)buffer,0);
      sStack12 = __osContRamWrite(pfs->queue,pfs->channel,
                                  (short)pfs->minode_table + (ushort)bank * 8 + sVar1,(u8 *)buffer,0
                                 );
    }
    else {
      sStack12 = __osContRamRead(pfs->queue,pfs->channel,
                                 (short)pfs->inode_table + (ushort)bank * 8 + sVar1,(u8 *)buffer);
    }
    if (sStack12 != 0) {
      return sStack12;
    }
    iStack8 += 1;
  } while (iStack8 < 8);
  if (flag == '\0') {
    uVar3 = __osSumcalc((u8 *)(inode->inode_page + iStack16),iStack16 * -2 + 0x100);
    if (*(char *)((int)inode->inode_page + 1) == (char)uVar3) {
      iStack8 = 0;
      do {
        __osContRamWrite(pfs->queue,pfs->channel,
                         (short)pfs->minode_table + (ushort)bank * 8 + (short)iStack8,
                         (u8 *)(inode->inode_page + iStack8 * 0x10),0);
        iStack8 += 1;
      } while (iStack8 < 8);
    }
    else {
      iStack8 = 0;
      do {
        __osContRamRead(pfs->queue,pfs->channel,
                        (short)pfs->minode_table + (ushort)bank * 8 + (short)iStack8,
                        (u8 *)(inode->inode_page + iStack8 * 0x10));
        iStack8 += 1;
      } while (iStack8 < 8);
      if (*(char *)((int)inode->inode_page + 1) != (char)uVar3) {
        return 3;
      }
      iStack8 = 0;
      do {
        __osContRamWrite(pfs->queue,pfs->channel,
                         (short)pfs->inode_table + (ushort)bank * 8 + (short)iStack8,
                         (u8 *)(inode->inode_page + iStack8 * 0x10),0);
        iStack8 += 1;
      } while (iStack8 < 8);
    }
  }
  return 0;
}



s32 __osPfsSelectBank(OSPfs *pfs)

{
  s32 sVar1;
  int iStack36;
  u8 auStack32 [32];
  
  iStack36 = 0;
  do {
    auStack32[iStack36] = pfs->activebank;
    iStack36 += 1;
  } while (iStack36 < 0x20);
  sVar1 = __osContRamWrite(pfs->queue,pfs->channel,0x400,auStack32,0);
  return sVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int __osSiDeviceBusy(void)

{
  return (int)(uint)((_SI_STATUS_REG & 3) != 0);
}



void guNormalize(float *x,float *y,float *z)

{
  float m;
  
  m = sqrtf(*z * *z + *x * *x + *y * *y);
  m = 1.00000000 / m;
  *x = *x * m;
  *y = *y * m;
  *z = *z * m;
  return;
}



float sqrtf(float __x)

{
  return SQRT(__x);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

OSPiHandle * osLeoDiskInit(void)

{
  u32 mask;
  
  LeoDiskHandle.type = '\x02';
  LeoDiskHandle.baseAddress = 0xa5000000;
  LeoDiskHandle.latency = '\x03';
  LeoDiskHandle.pulse = '\x06';
  LeoDiskHandle.pageSize = '\x06';
  LeoDiskHandle.relDuration = '\x02';
  _PI_BSD_DOM2_LAT_REG = 3;
  _PI_BSD_DOM2_PWD_REG = 6;
  _PI_BSD_DOM2_PGS_REG = 6;
  _PI_BSD_DOM2_RLS_REG = 2;
  bzero(&LeoDiskHandle.transferInfo,0x60);
  mask = __osDisableInt();
  LeoDiskHandle.next = (OSPiHandle_s *)__osPiTable;
  __osPiTable = &LeoDiskHandle;
  __osDiskHandle = &LeoDiskHandle;
  __osRestoreInt(mask);
  return &LeoDiskHandle;
}



void __osSetCompare(u32 param_1)

{
  setCopReg(0,Compare,(longlong)(int)param_1,0);
  return;
}



void alFilterNew(ALFilter *f,ALCmdHandler h,ALSetParam s,int type)

{
  *(undefined4 *)f = 0;
  *(ALCmdHandler *)(f + 4) = h;
  *(ALSetParam *)(f + 8) = s;
  *(undefined2 *)(f + 0xc) = 0;
  *(undefined2 *)(f + 0xe) = 0;
  *(int *)(f + 0x10) = type;
  return;
}



f32 _doModFunc(ALDelay *d,s32 count)

{
  double dVar1;
  float fVar2;
  ulonglong in_f4;
  uint in_register_00001040;
  
  *(float *)&d->rsval = (float)d->rsval + (float)d->rsinc * (float)count;
  dVar1 = (double)(float)d->rsval;
  if ((double)(in_f4 & 0xffffffff00000000) < dVar1) {
    *(float *)&d->rsval = (float)(dVar1 - (double)((ulonglong)in_register_00001040 << 0x20));
  }
  else {
    d->rsval = d->rsval;
  }
  fVar2 = (float)d->rsval;
  if (fVar2 < 0.00000000) {
    fVar2 = -fVar2;
  }
  return (f32)((float)d->rsgain *
              (float)((double)fVar2 - (double)((ulonglong)in_register_00001040 << 0x20)));
}



longlong __filterBuffer(ALLowPass *lp,s32 buff,s32 count,Acmd *p)

{
  u32 uVar1;
  
  *(uint *)((int)p + 4) = (buff & 0xffffU) << 0x10 | (count & 0x7fffU) << 1;
  *(uint *)p = buff & 0xffffU | 0x8000000;
  *(undefined4 *)(p + 1) = 0xb000020;
  uVar1 = osVirtualToPhysical(lp->fcvec + 4);
  *(u32 *)((int)p + 0xc) = uVar1;
  *(uint *)(p + 2) = (*(uint *)(lp + 1) & 0xff) << 0x10 | 0xe000000 | (int)lp->fgain & 0xffffU;
  uVar1 = osVirtualToPhysical((void *)lp->first);
  *(u32 *)((int)p + 0x14) = uVar1;
  *(undefined4 *)(lp + 1) = 0;
  return (longlong)(int)(p + 3);
}



longlong __saveBuffer(ALFx *r,s16 *curr_ptr,s32 buff,s32 count,Acmd *p)

{
  u32 uVar1;
  s16 *psVar2;
  uint uVar3;
  Acmd *pAVar4;
  
  psVar2 = *(s16 **)&r->section_count + *(int *)(r + 1);
  if (curr_ptr < *(s16 **)&r->section_count) {
    curr_ptr = curr_ptr + *(int *)(r + 1);
  }
  if (psVar2 < curr_ptr + count) {
    *(undefined4 *)p = 0x8000000;
    uVar3 = ((int)((int)psVar2 - (int)curr_ptr) >> 1) * 2;
    *(uint *)((int)p + 4) = buff << 0x10 | uVar3 & 0xffff;
    *(undefined4 *)(p + 1) = 0x6000000;
    uVar1 = osVirtualToPhysical(curr_ptr);
    *(u32 *)((int)p + 0xc) = uVar1;
    *(undefined4 *)(p + 2) = 0x8000000;
    *(uint *)((int)p + 0x14) =
         (uVar3 + buff) * 0x10000 |
         ((int)((int)(curr_ptr + count) - (int)psVar2) >> 1 & 0x7fffU) << 1;
    *(undefined4 *)(p + 3) = 0x6000000;
    uVar1 = osVirtualToPhysical(*(void **)&r->section_count);
    *(u32 *)((int)p + 0x1c) = uVar1;
    *(uint *)((int)p + 0x24) = count * 2 & 0xffff;
    *(undefined4 *)(p + 4) = 0x8000000;
    pAVar4 = p + 5;
  }
  else {
    *(undefined4 *)p = 0x8000000;
    *(uint *)((int)p + 4) = buff << 0x10 | count * 2 & 0xffffU;
    *(undefined4 *)(p + 1) = 0x6000000;
    pAVar4 = p + 2;
    uVar1 = osVirtualToPhysical(curr_ptr);
    *(u32 *)((int)p + 0xc) = uVar1;
  }
  return (longlong)(int)pAVar4;
}



longlong __loadBuffer(ALFx *r,s16 *curr_ptr,s32 buff,s32 count,Acmd *p)

{
  u32 uVar1;
  s16 *psVar2;
  uint uVar3;
  Acmd *pAVar4;
  
  psVar2 = *(s16 **)&r->section_count + *(int *)(r + 1);
  if (curr_ptr < *(s16 **)&r->section_count) {
    curr_ptr = curr_ptr + *(int *)(r + 1);
  }
  if (psVar2 < curr_ptr + count) {
    uVar3 = ((int)((int)psVar2 - (int)curr_ptr) >> 1) * 2;
    *(uint *)p = buff & 0xffffU | 0x8000000;
    *(uint *)((int)p + 4) = uVar3 & 0xffff;
    *(undefined4 *)(p + 1) = 0x4000000;
    uVar1 = osVirtualToPhysical(curr_ptr);
    *(u32 *)((int)p + 0xc) = uVar1;
    *(uint *)(p + 2) = uVar3 + buff & 0xffff | 0x8000000;
    *(int *)((int)p + 0x14) = ((int)((int)(curr_ptr + count) - (int)psVar2) >> 1 & 0x7fffU) << 1;
    *(undefined4 *)(p + 3) = 0x4000000;
    pAVar4 = p + 4;
    uVar1 = osVirtualToPhysical(*(void **)&r->section_count);
    *(u32 *)((int)p + 0x1c) = uVar1;
  }
  else {
    *(uint *)((int)p + 4) = count * 2 & 0xffff;
    *(uint *)p = buff & 0xffffU | 0x8000000;
    *(undefined4 *)(p + 1) = 0x4000000;
    pAVar4 = p + 2;
    uVar1 = osVirtualToPhysical(curr_ptr);
    *(u32 *)((int)p + 0xc) = uVar1;
  }
  *(undefined4 *)pAVar4 = 0x8000000;
  *(uint *)((int)pAVar4 + 4) = count * 2 & 0xffff;
  return (longlong)(int)(pAVar4 + 1);
}



longlong __loadOutputBuffer(ALFx *r,ALDelay *d,s32 buff,s32 incount,Acmd *p)

{
  u32 uVar1;
  Acmd AVar2;
  uint *puVar3;
  u32 uVar4;
  longlong lVar5;
  int iVar6;
  f32 fVar7;
  float fVar8;
  uint in_register_00001020;
  float fVar9;
  int iVar10;
  
  if (d->rs == NULL) {
    lVar5 = __loadBuffer(r,(s16 *)(r->paramHdl + d->output * -2),buff,incount,p);
  }
  else {
    uVar4 = d->output;
    uVar1 = d->input;
    fVar7 = _doModFunc(d,incount);
    fVar8 = (float)((double)((ulonglong)in_register_00001020 << 0x20) -
                   (double)((float)(int)(((float)fVar7 / (float)(uVar4 - uVar1)) * 32768.00000000) /
                           32768.00000000));
    fVar9 = (float)d->rs->motion + fVar8 * (float)incount;
    iVar10 = (int)fVar9;
    *(float *)&d->rs->motion = fVar9 - (float)iVar10;
    iVar6 = (int)((uint)(r->paramHdl + (d->output - d->rsdelta) * -2) & 7) >> 1;
    AVar2 = __loadBuffer(r,(s16 *)(r->paramHdl + (d->output - d->rsdelta) * -2 + iVar6 * -2),0x280,
                         iVar10 + iVar6,p);
    puVar3 = (uint *)AVar2;
    *puVar3 = iVar6 * 2 + 0x280U | 0x8000000;
    puVar3[1] = buff << 0x10 | (incount & 0x7fffU) << 1;
    puVar3[2] = (*(uint *)(d->rs + 1) & 0xff) << 0x10 | 0x5000000 |
                (int)(fVar8 * 32768.00000000) & 0xffffU;
    uVar4 = osVirtualToPhysical((void *)d->rs->first);
    lVar5 = (longlong)(int)(puVar3 + 4);
    puVar3[3] = uVar4;
    *(undefined4 *)(d->rs + 1) = 0;
    d->rsdelta = (d->rsdelta + iVar10) - incount;
  }
  return lVar5;
}



s32 alFxParamHdl(void *filter,s32 paramID,void *param)

{
  int iVar1;
  undefined2 *puVar2;
  uint uVar3;
  undefined2 uVar4;
  int *piVar5;
  int iVar6;
  ulonglong in_f4;
  double dVar7;
  
  uVar3 = paramID - 2;
  iVar1 = *(int *)param;
  if ((uVar3 & 7) < 8) {
    uVar4 = (undefined2)iVar1;
    iVar6 = (int)uVar3 >> 3;
    switch(uVar3 & 7) {
    case 0:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(int *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28) = iVar1;
      return 0;
    case 1:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(int *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 4) = iVar1;
      return 0;
    case 2:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(undefined2 *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 10) = uVar4;
      return 0;
    case 3:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(undefined2 *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 8) = uVar4;
      return 0;
    case 4:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(undefined2 *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 0xc) = uVar4;
      return 0;
    case 5:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      *(float *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 0x10) =
           (float)iVar1 / dbl_80029D30._0_4_;
      return 0;
    case 6:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      piVar5 = (int *)(*(int *)((int)filter + 0x20) + iVar6 * 0x28);
      dVar7 = (double)(piVar5[1] - *piVar5);
      if (piVar5[1] - *piVar5 < 0) {
        dVar7 = dVar7 + (double)(in_f4 & 0xffffffff00000000);
      }
      *(float *)(piVar5 + 7) = (float)(dVar7 * ((double)iVar1 / dbl_80029D38));
      return 0;
    case 7:
      if ((int)uVar3 < 0) {
        iVar6 = paramID + 5 >> 3;
      }
      puVar2 = *(undefined2 **)(*(int *)((int)filter + 0x20) + iVar6 * 0x28 + 0x20);
      if (puVar2 != NULL) {
        *puVar2 = uVar4;
      }
    }
  }
  return 0;
}



s32 alFxParam(void *filter,s32 paramID,void *param)

{
  if (paramID == 1) {
    *(void **)filter = param;
  }
  return 0;
}



longlong _alFxPull(void *filter,s16 *outp,s32 outCount,s32 sampleOffset,Acmd *p)

{
  Acmd AVar1;
  undefined4 *puVar2;
  uint *puVar3;
  s16 *psVar4;
  int iVar5;
  ALResampler *pAVar6;
  longlong lVar7;
  Acmd *p_00;
  uint uVar8;
  ALDelay *d;
  short sVar9;
  s16 *curr_ptr;
  longlong lVar10;
  uint buff;
  uint buff_00;
  s16 *curr_ptr_00;
  
  puVar2 = (undefined4 *)
           (**(code **)(*(int *)filter + 4))(*(int *)filter,outp,outCount,sampleOffset,p);
  uVar8 = outCount * 2;
  *puVar2 = 0x8000000;
  puVar2[1] = uVar8 & 0xffff;
  puVar2[2] = 0xc00da83;
  puVar2[3] = 0x6c006c0;
  puVar2[4] = 0xc005a82;
  puVar2[5] = 0x80006c0;
  buff_00 = 0;
  buff = 0x140;
  AVar1 = __saveBuffer((ALFx *)filter,*(s16 **)((int)filter + 0x18),0x6c0,outCount,
                       (Acmd *)(puVar2 + 6));
  psVar4 = NULL;
  puVar2 = (undefined4 *)AVar1;
  *puVar2 = 0x2000800;
  puVar2[1] = uVar8;
  puVar2 = puVar2 + 2;
  lVar7 = (longlong)(int)puVar2;
  lVar10 = 0;
  if (*(char *)((int)filter + 0x24) == '\0') {
    iVar5 = *(int *)((int)filter + 0x1c);
  }
  else {
    iVar5 = *(int *)((int)filter + 0x18);
    do {
      p_00 = (Acmd *)lVar7;
      d = (ALDelay *)(*(int *)((int)filter + 0x20) + (int)lVar10 * 0x28);
      curr_ptr = (s16 *)(iVar5 + d->input * -2);
      curr_ptr_00 = (s16 *)(iVar5 + d->output * -2);
      if (curr_ptr == psVar4) {
        sVar9 = (short)buff_00;
        buff_00 = SEXT24((short)buff);
        buff = SEXT24(sVar9);
      }
      else {
        AVar1 = __loadBuffer((ALFx *)filter,curr_ptr,buff_00,outCount,p_00);
        p_00 = (Acmd *)AVar1;
      }
      lVar7 = __loadOutputBuffer((ALFx *)filter,d,buff,outCount,p_00);
      if (d->ffcoef == 0) {
LAB_700203b0:
        sVar9 = d->fbcoef;
      }
      else {
        puVar3 = (uint *)lVar7;
        *puVar3 = (int)d->ffcoef & 0xffffU | 0xc000000;
        puVar3[1] = buff_00 << 0x10 | buff;
        lVar7 = (longlong)(int)(puVar3 + 2);
        if (d->rs == NULL) {
          if (d->lp == NULL) {
            lVar7 = __saveBuffer((ALFx *)filter,curr_ptr_00,buff,outCount,(Acmd *)(puVar3 + 2));
          }
          goto LAB_700203b0;
        }
        sVar9 = d->fbcoef;
      }
      if (sVar9 != 0) {
        puVar3 = (uint *)lVar7;
        *puVar3 = (int)sVar9 & 0xffffU | 0xc000000;
        puVar3[1] = buff << 0x10 | buff_00;
        lVar7 = __saveBuffer((ALFx *)filter,curr_ptr,buff_00,outCount,(Acmd *)(puVar3 + 2));
      }
      if (d->lp == NULL) {
        pAVar6 = d->rs;
      }
      else {
        lVar7 = __filterBuffer(d->lp,buff,outCount,(Acmd *)lVar7);
        pAVar6 = d->rs;
      }
      if (pAVar6 == NULL) {
        lVar7 = __saveBuffer((ALFx *)filter,curr_ptr_00,buff,outCount,(Acmd *)lVar7);
      }
      lVar10 = (longlong)(((int)lVar10 + 1) * 0x10000 >> 0x10);
      if (d->gain != 0) {
        puVar3 = (uint *)lVar7;
        *puVar3 = (int)d->gain & 0xffffU | 0xc000000;
        puVar3[1] = buff << 0x10 | 0x800;
        lVar7 = (longlong)(int)(puVar3 + 2);
      }
      puVar2 = (undefined4 *)lVar7;
      iVar5 = *(int *)((int)filter + 0x18);
      psVar4 = (s16 *)(iVar5 + d->output * 2);
    } while (lVar10 < (longlong)(ulonglong)*(byte *)((int)filter + 0x24));
    iVar5 = *(int *)((int)filter + 0x1c);
  }
  buff_00 = *(int *)((int)filter + 0x18) + uVar8;
  *(uint *)((int)filter + 0x18) = buff_00;
  if ((uint)(*(int *)((int)filter + 0x14) + iVar5 * 2) < buff_00) {
    *(int *)((int)filter + 0x18) = buff_00 + iVar5 * -2;
  }
  *puVar2 = 0xa000800;
  puVar2[1] = uVar8 & 0xffff | 0x6c00000;
  return (longlong)(int)(puVar2 + 2);
}



uint * alFxParam(int *param_1,undefined8 param_2,undefined8 param_3,undefined param_4,
                undefined4 param_5,undefined param_6,undefined param_7,undefined param_8,
                undefined4 param_9,undefined param_10,undefined4 param_11,undefined4 param_12)

{
  u32 uVar1;
  Acmd AVar2;
  undefined4 *puVar3;
  uint *puVar4;
  s16 *psVar5;
  int iVar6;
  uint buff;
  ALResampler *pAVar7;
  longlong lVar8;
  Acmd *p;
  uint uVar9;
  ALDelay *d;
  short sVar10;
  ALFx *r;
  s16 *curr_ptr;
  longlong lVar11;
  uint buff_00;
  ALSetFXParam pAVar12;
  uint uStack00000048;
  uint uStack00000050;
  s16 *psStack00000080;
  
  psStack00000080 = NULL;
  puVar3 = (undefined4 *)(**(code **)(*param_1 + 4))();
  uVar9 = param_3._4_4_ << 1;
  uStack00000048 = uVar9 & 0xffff;
  *puVar3 = 0x8000000;
  puVar3[1] = uStack00000048;
  puVar3[2] = 0xc00da83;
  puVar3[3] = 0x6c006c0;
  puVar3[4] = 0xc005a82;
  puVar3[5] = 0x80006c0;
  buff = 0;
  buff_00 = 0x140;
  uStack00000050 = uVar9;
  AVar2 = __saveBuffer(r,(s16 *)r->paramHdl,0x6c0,param_3._4_4_,(Acmd *)(puVar3 + 6));
  puVar3 = (undefined4 *)AVar2;
  *puVar3 = 0x2000800;
  puVar3[1] = uVar9;
  puVar3 = puVar3 + 2;
  lVar8 = (longlong)(int)puVar3;
  lVar11 = 0;
  if (*(char *)&r[1].input == '\0') {
    iVar6 = *(int *)(r + 1);
  }
  else {
    pAVar12 = r->paramHdl;
    psVar5 = psStack00000080;
    do {
      p = (Acmd *)lVar8;
      d = (ALDelay *)(r[1].base + (int)lVar11 * 0x14);
      uVar1 = d->output;
      curr_ptr = (s16 *)(pAVar12 + d->input * -2);
      if (curr_ptr == psVar5) {
        sVar10 = (short)buff;
        buff = SEXT24((short)buff_00);
        buff_00 = SEXT24(sVar10);
      }
      else {
        AVar2 = __loadBuffer(r,curr_ptr,buff,param_3._4_4_,p);
        p = (Acmd *)AVar2;
      }
      lVar8 = __loadOutputBuffer(r,d,buff_00,param_3._4_4_,p);
      if (d->ffcoef == 0) {
LAB_700203b0:
        sVar10 = d->fbcoef;
      }
      else {
        puVar4 = (uint *)lVar8;
        *puVar4 = (int)d->ffcoef & 0xffffU | 0xc000000;
        puVar4[1] = buff << 0x10 | buff_00;
        lVar8 = (longlong)(int)(puVar4 + 2);
        if (d->rs == NULL) {
          if (d->lp == NULL) {
            lVar8 = __saveBuffer(r,(s16 *)(pAVar12 + uVar1 * -2),buff_00,param_3._4_4_,
                                 (Acmd *)(puVar4 + 2));
          }
          goto LAB_700203b0;
        }
        sVar10 = d->fbcoef;
      }
      if (sVar10 != 0) {
        puVar4 = (uint *)lVar8;
        *puVar4 = (int)sVar10 & 0xffffU | 0xc000000;
        puVar4[1] = buff_00 << 0x10 | buff;
        lVar8 = __saveBuffer(r,curr_ptr,buff,param_3._4_4_,(Acmd *)(puVar4 + 2));
      }
      if (d->lp == NULL) {
        pAVar7 = d->rs;
      }
      else {
        lVar8 = __filterBuffer(d->lp,buff_00,param_3._4_4_,(Acmd *)lVar8);
        pAVar7 = d->rs;
      }
      if (pAVar7 == NULL) {
        lVar8 = __saveBuffer(r,(s16 *)(pAVar12 + uVar1 * -2),buff_00,param_3._4_4_,(Acmd *)lVar8);
      }
      lVar11 = (longlong)(((int)lVar11 + 1) * 0x10000 >> 0x10);
      if (d->gain != 0) {
        puVar4 = (uint *)lVar8;
        *puVar4 = (int)d->gain & 0xffffU | 0xc000000;
        puVar4[1] = buff_00 << 0x10 | 0x800;
        lVar8 = (longlong)(int)(puVar4 + 2);
      }
      puVar3 = (undefined4 *)lVar8;
      pAVar12 = r->paramHdl;
      psVar5 = (s16 *)(pAVar12 + d->output * 2);
    } while (lVar11 < (longlong)(ulonglong)*(byte *)&r[1].input);
    iVar6 = *(int *)(r + 1);
  }
  pAVar12 = r->paramHdl + uStack00000050;
  r->paramHdl = pAVar12;
  if ((ALSetFXParam)(*(int *)&r->section_count + iVar6 * 2) < pAVar12) {
    r->paramHdl = pAVar12 + iVar6 * -2;
  }
  *puVar3 = 0xa000800;
  puVar3[1] = uStack00000048 | 0x6c00000;
  return (uint *)(puVar3 + 2);
}



uint * alFxPull(int param_1,undefined param_2,undefined param_3,undefined param_4,undefined4 param_5
               ,undefined param_6,undefined param_7,undefined param_8,undefined4 param_9,
               undefined4 param_10,undefined4 param_11,undefined4 param_12,undefined4 param_13,
               undefined4 param_14,undefined4 param_15,undefined4 param_16,undefined4 param_17,
               undefined4 param_18,undefined4 param_19,undefined4 param_20,undefined4 param_21)

{
  u32 uVar1;
  Acmd AVar2;
  undefined4 *puVar3;
  uint *puVar4;
  int iVar5;
  uint buff;
  ALResampler *pAVar6;
  longlong lVar7;
  Acmd *p;
  uint uVar8;
  ALDelay *d;
  short sVar9;
  ALFx *r;
  s16 *curr_ptr;
  int count;
  longlong lVar10;
  uint buff_00;
  ALSetFXParam pAVar11;
  s16 *in_stack_00000080;
  
  puVar3 = (undefined4 *)(**(code **)(param_1 + 4))(param_1,param_2,param_3,param_4);
  uVar8 = count * 2;
  *puVar3 = 0x8000000;
  puVar3[1] = uVar8 & 0xffff;
  puVar3[2] = 0xc00da83;
  puVar3[3] = 0x6c006c0;
  puVar3[4] = 0xc005a82;
  puVar3[5] = 0x80006c0;
  buff = 0;
  buff_00 = 0x140;
  AVar2 = __saveBuffer(r,(s16 *)r->paramHdl,0x6c0,count,(Acmd *)(puVar3 + 6));
  puVar3 = (undefined4 *)AVar2;
  *puVar3 = 0x2000800;
  puVar3[1] = uVar8;
  puVar3 = puVar3 + 2;
  lVar7 = (longlong)(int)puVar3;
  lVar10 = 0;
  if (*(char *)&r[1].input == '\0') {
    iVar5 = *(int *)(r + 1);
  }
  else {
    pAVar11 = r->paramHdl;
    do {
      p = (Acmd *)lVar7;
      d = (ALDelay *)(r[1].base + (int)lVar10 * 0x14);
      uVar1 = d->output;
      curr_ptr = (s16 *)(pAVar11 + d->input * -2);
      if (curr_ptr == in_stack_00000080) {
        sVar9 = (short)buff;
        buff = SEXT24((short)buff_00);
        buff_00 = SEXT24(sVar9);
      }
      else {
        AVar2 = __loadBuffer(r,curr_ptr,buff,count,p);
        p = (Acmd *)AVar2;
      }
      lVar7 = __loadOutputBuffer(r,d,buff_00,count,p);
      if (d->ffcoef == 0) {
LAB_700203b0:
        sVar9 = d->fbcoef;
      }
      else {
        puVar4 = (uint *)lVar7;
        *puVar4 = (int)d->ffcoef & 0xffffU | 0xc000000;
        puVar4[1] = buff << 0x10 | buff_00;
        lVar7 = (longlong)(int)(puVar4 + 2);
        if (d->rs == NULL) {
          if (d->lp == NULL) {
            lVar7 = __saveBuffer(r,(s16 *)(pAVar11 + uVar1 * -2),buff_00,count,(Acmd *)(puVar4 + 2))
            ;
          }
          goto LAB_700203b0;
        }
        sVar9 = d->fbcoef;
      }
      if (sVar9 != 0) {
        puVar4 = (uint *)lVar7;
        *puVar4 = (int)sVar9 & 0xffffU | 0xc000000;
        puVar4[1] = buff_00 << 0x10 | buff;
        lVar7 = __saveBuffer(r,curr_ptr,buff,count,(Acmd *)(puVar4 + 2));
      }
      if (d->lp == NULL) {
        pAVar6 = d->rs;
      }
      else {
        lVar7 = __filterBuffer(d->lp,buff_00,count,(Acmd *)lVar7);
        pAVar6 = d->rs;
      }
      if (pAVar6 == NULL) {
        lVar7 = __saveBuffer(r,(s16 *)(pAVar11 + uVar1 * -2),buff_00,count,(Acmd *)lVar7);
      }
      lVar10 = (longlong)(((int)lVar10 + 1) * 0x10000 >> 0x10);
      if (d->gain != 0) {
        puVar4 = (uint *)lVar7;
        *puVar4 = (int)d->gain & 0xffffU | 0xc000000;
        puVar4[1] = buff_00 << 0x10 | 0x800;
        lVar7 = (longlong)(int)(puVar4 + 2);
      }
      puVar3 = (undefined4 *)lVar7;
      pAVar11 = r->paramHdl;
      in_stack_00000080 = (s16 *)(pAVar11 + d->output * 2);
    } while (lVar10 < (longlong)(ulonglong)*(byte *)&r[1].input);
    iVar5 = *(int *)(r + 1);
  }
  pAVar11 = r->paramHdl + uVar8;
  r->paramHdl = pAVar11;
  if ((ALSetFXParam)(*(int *)&r->section_count + iVar5 * 2) < pAVar11) {
    r->paramHdl = pAVar11 + iVar5 * -2;
  }
  *puVar3 = 0xa000800;
  puVar3[1] = uVar8 & 0xffff | 0x6c00000;
  return (uint *)(puVar3 + 2);
}



void alSeqGetLoc(ALSeq *seq,ALSeqMarker *m)

{
  m->curPtr = seq->curPtr;
  m->lastStatus = seq->lastStatus;
  m->lastTicks = seq->lastTicks;
  return;
}



void alSeqSetLoc(ALSeq *seq,ALSeqMarker *m)

{
  seq->curPtr = m->curPtr;
  seq->lastStatus = m->lastStatus;
  seq->lastTicks = m->lastTicks;
  return;
}



s32 alSeqGetTicks(ALSeq *seq)

{
  return seq->lastTicks;
}



void dummy70020560(void)

{
  return;
}



s32 readVarLen(ALSeq *seq)

{
  byte bVar1;
  ulonglong uVar2;
  uint uVar3;
  
  bVar1 = *seq->curPtr;
  uVar3 = (uint)bVar1;
  seq->curPtr = seq->curPtr + 1;
  if ((bVar1 & 0x80) != 0) {
    uVar2 = (ulonglong)bVar1 & 0x7f;
    do {
      bVar1 = *seq->curPtr;
      seq->curPtr = seq->curPtr + 1;
      uVar3 = (int)uVar2 * 0x80 + ((uint)bVar1 & 0x7f);
      uVar2 = SEXT48((int)uVar3);
    } while ((bVar1 & 0x80) != 0);
  }
  return (s32)uVar3;
}



void alSeqNextEvent(ALSeq *seq,ALEvent *event)

{
  byte bVar1;
  undefined uVar2;
  undefined2 uVar3;
  byte *pbVar4;
  s32 deltaTicks;
  int extraout_a2_lo;
  undefined2 *extraout_a3_lo;
  
  deltaTicks = readVarLen(seq);
  pbVar4 = *(byte **)(extraout_a2_lo + 8);
  *(int *)(extraout_a2_lo + 0xc) = *(int *)(extraout_a2_lo + 0xc) + deltaTicks;
  bVar1 = *pbVar4;
  *(byte **)(extraout_a2_lo + 8) = pbVar4 + 1;
  if (bVar1 == 0xff) {
    bVar1 = pbVar4[1];
    *(byte **)(extraout_a2_lo + 8) = pbVar4 + 2;
    if (bVar1 == 0x51) {
      *extraout_a3_lo = 3;
      *(s32 *)(extraout_a3_lo + 2) = deltaTicks;
      *(undefined *)(extraout_a3_lo + 4) = 0xff;
      *(undefined *)((int)extraout_a3_lo + 9) = 0x51;
      uVar2 = **(undefined **)(extraout_a2_lo + 8);
      *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
      *(undefined *)(extraout_a3_lo + 5) = uVar2;
      uVar2 = **(undefined **)(extraout_a2_lo + 8);
      *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
      *(undefined *)((int)extraout_a3_lo + 0xb) = uVar2;
      uVar2 = **(undefined **)(extraout_a2_lo + 8);
      *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
      *(undefined *)(extraout_a3_lo + 6) = uVar2;
      uVar2 = **(undefined **)(extraout_a2_lo + 8);
      *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
      *(undefined *)((int)extraout_a3_lo + 0xd) = uVar2;
    }
    else {
      if (bVar1 == 0x2f) {
        *extraout_a3_lo = 4;
        *(s32 *)(extraout_a3_lo + 2) = deltaTicks;
        *(undefined *)(extraout_a3_lo + 4) = 0xff;
        *(undefined *)((int)extraout_a3_lo + 9) = 0x2f;
        uVar2 = **(undefined **)(extraout_a2_lo + 8);
        *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
        *(undefined *)(extraout_a3_lo + 5) = uVar2;
      }
    }
    *(undefined2 *)(extraout_a2_lo + 0x1a) = 0;
  }
  else {
    *extraout_a3_lo = 1;
    *(s32 *)(extraout_a3_lo + 2) = deltaTicks;
    if ((bVar1 & 0x80) == 0) {
      uVar3 = *(undefined2 *)(extraout_a2_lo + 0x1a);
      *(byte *)((int)extraout_a3_lo + 9) = bVar1;
      *(char *)(extraout_a3_lo + 4) = (char)uVar3;
    }
    else {
      *(byte *)(extraout_a3_lo + 4) = bVar1;
      uVar2 = **(undefined **)(extraout_a2_lo + 8);
      *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
      *(undefined *)((int)extraout_a3_lo + 9) = uVar2;
      *(ushort *)(extraout_a2_lo + 0x1a) = (ushort)bVar1;
    }
    if ((*(byte *)(extraout_a3_lo + 4) & 0xf0) == 0xc0) {
      *(undefined *)(extraout_a3_lo + 5) = 0;
    }
    else {
      if ((*(byte *)(extraout_a3_lo + 4) & 0xf0) == 0xd0) {
        *(undefined *)(extraout_a3_lo + 5) = 0;
      }
      else {
        uVar2 = **(undefined **)(extraout_a2_lo + 8);
        *(undefined **)(extraout_a2_lo + 8) = *(undefined **)(extraout_a2_lo + 8) + 1;
        *(undefined *)(extraout_a3_lo + 5) = uVar2;
      }
    }
  }
  return;
}



void alSeqNewMarker(ALSeq *seq,ALSeqMarker *m,u32 ticks)

{
  s16 sVar1;
  u8 *puVar2;
  s32 sVar3;
  uint uVar4;
  u8 *puVar5;
  s16 sVar6;
  ALEvent AStack16;
  
  if (ticks == 0) {
    puVar2 = seq->trackStart;
    m->lastStatus = 0;
    m->lastTicks = 0;
    m->curTicks = 0;
    m->curPtr = puVar2;
  }
  else {
    puVar2 = seq->curPtr;
    sVar1 = seq->lastStatus;
    sVar3 = seq->lastTicks;
    seq->lastStatus = 0;
    seq->lastTicks = 0;
    seq->curPtr = seq->trackStart;
    puVar5 = seq->curPtr;
    uVar4 = 0;
    while( true ) {
      sVar6 = seq->lastStatus;
      alSeqNextEvent(seq,&AStack16);
      if (AStack16.type == 4) break;
      if (ticks <= (uint)seq->lastTicks) goto LAB_70020800;
      puVar5 = seq->curPtr;
      uVar4 = seq->lastTicks;
    }
    puVar5 = seq->curPtr;
    sVar6 = seq->lastStatus;
    uVar4 = seq->lastTicks;
LAB_70020800:
    m->curPtr = puVar5;
    m->lastStatus = sVar6;
    m->lastTicks = uVar4;
    m->curTicks = seq->lastTicks;
    seq->curPtr = puVar2;
    seq->lastStatus = sVar1;
    seq->lastTicks = sVar3;
  }
  return;
}



u32 alSeqSecToTicks(ALSeq *seq,f32 sec,u32 tempo)

{
  double dVar1;
  undefined4 in_a2_hi;
  int in_a2_lo;
  double dVar2;
  uint in_register_00001050;
  
  dVar2 = (double)in_a2_lo;
  if (CONCAT44(in_a2_hi,in_a2_lo) < 0) {
    dVar2 = dVar2 + (double)((ulonglong)in_register_00001050 << 0x20);
  }
  dVar2 = ((double)(float)tempo * dbl_80029D50 * (double)(int)seq->division) / dVar2;
  if (false) {
    dVar1 = ROUND(dVar2);
  }
  else {
    dVar1 = FLOOR(dVar2);
  }
  if (false) {
    dVar2 = dVar2 - (double)((ulonglong)(double)(int)seq->division & 0xffffffff00000000);
    if (false) {
      dVar2 = ROUND(dVar2);
    }
    else {
      dVar2 = FLOOR(dVar2);
    }
    if (true) {
      return (u32)((int)dVar2 | 0x80000000);
    }
  }
  else {
    if (-1 < (int)dVar1) {
      return (u32)(int)dVar1;
    }
  }
  return 0xffffffff;
}



f32 alSeqTicksToSec(ALSeq *seq,s32 ticks,u32 tempo)

{
  float fVar1;
  
  fVar1 = (float)tempo;
  if ((int)tempo < 0) {
    fVar1 = fVar1 + 4294967296.00000000;
  }
  return (f32)(float)((double)((float)ticks * fVar1) / ((double)(int)seq->division * dbl_80029D58));
}



char __alSeqNextDelta(ALSeq *seq,s32 *pDeltaTicks)

{
  bool bVar1;
  s32 sVar2;
  int extraout_a2_lo;
  undefined4 extraout_a3_lo;
  
  bVar1 = seq->curPtr < seq->base + seq->len;
  if (bVar1) {
    sVar2 = readVarLen(seq);
    *pDeltaTicks = sVar2;
    *(undefined4 *)(extraout_a2_lo + 8) = extraout_a3_lo;
  }
  return (char)bVar1;
}



s32 read32(ALSeq *seq)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  byte *pbVar5;
  
  pbVar5 = seq->curPtr;
  bVar1 = *pbVar5;
  seq->curPtr = pbVar5 + 1;
  bVar2 = pbVar5[1];
  seq->curPtr = pbVar5 + 2;
  bVar3 = pbVar5[2];
  seq->curPtr = pbVar5 + 3;
  bVar4 = pbVar5[3];
  seq->curPtr = pbVar5 + 4;
  return (s32)((uint)bVar1 << 0x18 | (uint)bVar2 << 0x10 | (uint)bVar3 << 8 | (uint)bVar4);
}



s16 read16(ALSeq *seq)

{
  u8 uVar1;
  u8 uVar2;
  u8 *puVar3;
  
  puVar3 = seq->curPtr;
  uVar1 = *puVar3;
  seq->curPtr = puVar3 + 1;
  uVar2 = puVar3[1];
  seq->curPtr = puVar3 + 2;
  return CONCAT11(uVar1,uVar2);
}



void alSeqNew(ALSeq *seq,u8 *ptr,s32 len)

{
  s32 sVar1;
  s16 sVar2;
  ALSeq *seq_00;
  ALSeq *seq_01;
  ALSeq *seq_02;
  ALSeq *seq_03;
  ALSeq *seq_04;
  ALSeq *seq_05;
  int extraout_a3_lo;
  uint in_register_00001020;
  
  seq->base = ptr;
  seq->len = len;
  seq->lastStatus = 0;
  seq->lastTicks = 0;
  seq->curPtr = ptr;
  sVar1 = read32(seq);
  if (sVar1 == 0x4d546864) {
    read32(seq_00);
    sVar2 = read16(seq_01);
    if ((sVar2 == 0) && (sVar2 = read16(seq_02), sVar2 == 1)) {
      sVar2 = read16(seq_03);
      seq_04->division = sVar2;
      if (((longlong)seq_04->division & 0x8000U) == 0) {
        *(float *)&seq_04->qnpt =
             (float)((double)((ulonglong)in_register_00001020 << 0x20) /
                    (double)(int)seq_04->division);
        sVar1 = read32(seq_04);
        if (sVar1 == 0x4d54726b) {
          read32(seq_05);
          *(undefined4 *)(extraout_a3_lo + 4) = *(undefined4 *)(extraout_a3_lo + 8);
        }
      }
    }
  }
  return;
}



void alSynSetPriority(ALSynth *s,ALVoice *voice,s16 priority)

{
  voice->priority = priority;
  return;
}



lldiv_t * lldiv(lldiv_t *__return_storage_ptr__,longlong __numer,longlong __denom)

{
  longlong lVar1;
  undefined4 in_v1_hi;
  int in_v1_lo;
  int iVar2;
  longlong right;
  int in_stack_00000010;
  uint in_stack_00000014;
  int iStack16;
  int iStack12;
  int iStack8;
  uint uStack4;
  
  lVar1 = __ll_div(__denom,right);
  iStack16 = (int)lVar1;
  iVar2 = in_v1_lo;
  lVar1 = __ll_mul((longlong)in_stack_00000010,(longlong)(int)in_stack_00000014);
  iStack8 = ((int)__denom - (int)lVar1) -
            (uint)((ulonglong)(longlong)(int)right < CONCAT44(in_v1_hi,iVar2));
  uStack4 = (int)right - iVar2;
  iStack12 = in_v1_lo;
  if ((((iStack16 < 1) && (iStack12 = in_v1_lo, iStack16 < 0)) &&
      (iStack12 = in_v1_lo, -1 < iStack8)) && ((0 < iStack8 || (iStack12 = in_v1_lo, uStack4 != 0)))
     ) {
    iStack16 += (uint)(in_v1_lo + 1 == 0);
    iStack8 = (iStack8 - in_stack_00000010) - (uint)(uStack4 < in_stack_00000014);
    uStack4 -= in_stack_00000014;
    iStack12 = in_v1_lo + 1;
  }
  *(int *)&__return_storage_ptr__->quot = iStack16;
  *(int *)((int)&__return_storage_ptr__->quot + 4) = iStack12;
  *(int *)&__return_storage_ptr__->rem = iStack8;
  *(uint *)((int)&__return_storage_ptr__->rem + 4) = uStack4;
  return __return_storage_ptr__;
}



ldiv_t ldiv(long __numer,long __denom)

{
  undefined4 in_a2_hi;
  int in_a2_lo;
  int local_8;
  int local_4;
  
  local_8 = __denom / in_a2_lo;
  if (CONCAT44(in_a2_hi,in_a2_lo) == 0) {
    trap(0x1c00);
  }
  if ((CONCAT44(in_a2_hi,in_a2_lo) == -1) && (__denom == -0x80000000)) {
    trap(0x1800);
  }
  local_4 = __denom - in_a2_lo * local_8;
  if (local_8 < 0) {
    if (0 < local_4) {
      local_8 += 1;
      local_4 -= in_a2_lo;
    }
  }
  *(int *)__numer = local_8;
  *(int *)(__numer + 4) = local_4;
  return (ldiv_t)(longlong)__numer;
}



void __osResetGlobalIntMask(OSHWIntr interrupt)

{
  u32 mask;
  
  mask = __osDisableInt();
  __OSGlobalIntMask = (undefined *)((uint)__OSGlobalIntMask & ~(interrupt & 0xfffffbfe));
  __osRestoreInt(mask);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

s32 osEPiRawWriteIo(OSPiHandle *pihandle,u32 devAddr,u32 data)

{
  do {
  } while ((_PI_STATUS_REG & 3) != 0);
  *(u32 *)(pihandle->baseAddress | devAddr | 0xa0000000) = data;
  return 0;
}



// WARNING: Instruction at (ram,0x70200594) overlaps instruction at (ram,0x70200590)
// 
// WARNING: Could not reconcile some variable overlaps

int huft_build(uint *b,uint n,uint s,ush *d,ush *e,huft **t,int *m)

{
  uint *puVar1;
  uint uVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int *piVar7;
  huft *phVar8;
  int iVar9;
  uint uVar10;
  uint *puVar11;
  uint uVar12;
  huft **pphVar13;
  uint *puVar14;
  int iVar15;
  huft *phVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  int *piVar24;
  uint *puVar25;
  uint *puStack1440;
  uint auStack1404 [2];
  int aiStack1396 [16];
  uint auStack1332 [288];
  huft *aphStack180 [16];
  undefined4 uStack116;
  huft *phStack112;
  uint uStack72;
  int aiStack68 [15];
  int iStack8;
  int iStack4;
  
  piVar3 = aiStack68;
  do {
    piVar24 = piVar3 + 4;
    piVar3[1] = 0;
    piVar3[2] = 0;
    piVar3[3] = 0;
    *piVar3 = 0;
    piVar3 = piVar24;
  } while (piVar24 != &iStack4);
  uVar17 = n;
  puVar11 = b;
  if (-(n & 3) == 0) goto LAB_702000a4;
  uVar17 = n;
  puVar25 = b;
  do {
    uVar21 = *puVar25;
    uVar17 -= 1;
    puVar25 = puVar25 + 1;
    (&uStack72)[uVar21] = (&uStack72)[uVar21] + 1;
  } while (-(n & 3) + n != uVar17);
  while (puVar11 = puVar25, uVar17 != 0) {
LAB_702000a4:
    uVar17 -= 4;
    puVar25 = puVar11 + 4;
    puVar14 = &uStack72 + *puVar11;
    *puVar14 = *puVar14 + 1;
    puVar14 = &uStack72 + puVar11[1];
    *puVar14 = *puVar14 + 1;
    puVar14 = &uStack72 + puVar11[2];
    *puVar14 = *puVar14 + 1;
    puVar11 = &uStack72 + puVar11[3];
    *puVar11 = *puVar11 + 1;
  }
  uVar17 = 1;
  puVar11 = (uint *)aiStack68;
  if (n == 0) {
    *t = NULL;
    *m = 0;
    return 0;
  }
  do {
    if (*puVar11 != 0) break;
    uVar17 += 1;
    puVar11 = puVar11 + 1;
  } while (uVar17 != 0x11);
  uVar21 = *m;
  if ((uint)*m < uVar17) {
    uVar21 = uVar17;
  }
  uVar18 = 0x10;
  piVar3 = &iStack8;
  do {
    if (*piVar3 != 0) break;
    uVar18 -= 1;
    piVar3 = piVar3 + -1;
  } while (uVar18 != 0);
  if (uVar18 < uVar21) {
    uVar21 = uVar18;
  }
  *m = uVar21;
  iVar4 = 1 << (uVar17 & 0x1f);
  if (uVar17 < uVar18) {
    do {
      uVar19 = *puVar11;
      puVar11 = puVar11 + 1;
      iVar4 = (iVar4 - uVar19) * 2;
    } while (puVar11 < &uStack72 + uVar18);
  }
  uVar19 = uVar18 - 1;
  iVar9 = 0;
  iVar4 -= *piVar3;
  *piVar3 = *piVar3 + iVar4;
  piVar24 = aiStack68;
  piVar7 = aiStack1396;
  puVar11 = (uint *)(piVar3 + -1);
  if (uVar19 != 0) {
    if (-(uVar19 & 3) != 0) {
      do {
        puVar11 = puVar11 + -1;
        piVar3 = piVar7 + 1;
        iVar9 += *piVar24;
        *piVar7 = iVar9;
        piVar24 = piVar24 + 1;
        piVar7 = piVar3;
      } while (&uStack72 + -(uVar19 & 3) + uVar19 != puVar11);
      piVar7 = piVar3;
      if (puVar11 == &uStack72) goto LAB_70200290;
    }
    do {
      iVar15 = *piVar24;
      puVar11 = puVar11 + -4;
      *piVar7 = iVar9 + iVar15;
      iVar9 = iVar9 + iVar15 + piVar24[1];
      piVar7[1] = iVar9;
      iVar9 += piVar24[2];
      piVar7[2] = iVar9;
      iVar9 += piVar24[3];
      piVar7[3] = iVar9;
      piVar24 = piVar24 + 4;
      piVar7 = piVar7 + 4;
    } while (puVar11 != &uStack72);
  }
LAB_70200290:
  uVar20 = 0;
  puVar11 = auStack1332;
  uVar19 = *b;
  while( true ) {
    b = b + 1;
    if (uVar19 != 0) {
      uVar12 = auStack1404[uVar19];
      puVar11[uVar12] = uVar20;
      auStack1404[uVar19] = uVar12 + 1;
    }
    uVar20 += 1;
    if (n <= uVar20) break;
    uVar19 = *b;
  }
  uVar20 = 0;
  iVar9 = -1;
  uVar19 = -uVar21;
  phVar8 = NULL;
  uVar12 = 0;
  if ((int)uVar17 <= (int)uVar18) {
    puStack1440 = &uStack72 + uVar17;
    do {
      iVar15 = iVar9 * 4;
      if (*puStack1440 != 0) {
        puVar14 = auStack1404 + iVar9;
        uVar23 = 1 << (uVar17 + 0x1f & 0x1f);
        puVar25 = puVar11;
        uVar10 = *puStack1440;
        do {
          uVar22 = uVar10 - 1;
          if ((int)(uVar19 + uVar21) < (int)uVar17) {
            uVar2 = uVar19 + uVar21;
            pphVar13 = (huft **)((int)aphStack180 + iVar15);
            do {
              uVar19 = uVar2;
              iVar9 += 1;
              iVar15 += 4;
              puVar14 = puVar14 + 1;
              uVar12 = uVar18 - uVar19;
              if (uVar21 < uVar18 - uVar19) {
                uVar12 = uVar21;
              }
              uVar2 = uVar17 - uVar19;
              uVar6 = 1 << (uVar2 & 0x1f);
              if (uVar10 < uVar6) {
                iVar5 = (uVar6 - uVar22) + -1;
                puVar11 = &uStack72 + uVar17;
                while (uVar2 += 1, uVar2 < uVar12) {
                  puVar1 = puVar11 + 1;
                  puVar11 = puVar11 + 1;
                  if ((uint)(iVar5 * 2) <= *puVar1) break;
                  iVar5 = iVar5 * 2 - *puVar1;
                }
              }
              uVar12 = 1 << (uVar2 & 0x1f);
              iVar5 = hufts * 8;
              hufts = hufts + uVar12 + 1;
              iVar5 += rarezip_ptrbuffer;
              phVar8 = (huft *)(iVar5 + 8);
              *t = phVar8;
              *(undefined4 *)(iVar5 + 4) = 0;
              t = (huft **)(iVar5 + 4);
              pphVar13[1] = phVar8;
              if (iVar9 != 0) {
                *puVar14 = uVar20;
                uStack116._1_3_ = CONCAT12((char)uVar21,uStack116._2_2_);
                uStack116 = CONCAT13((char)uVar2 + '\x10',uStack116._1_3_);
                phVar16 = (huft *)((int)*pphVar13 + (uVar20 >> (uVar19 - uVar21 & 0x1f)) * 8);
                *(undefined4 *)phVar16 = uStack116;
                *(huft **)((int)&phVar16->v + 2) = phVar8;
                phStack112 = phVar8;
              }
              uVar2 = uVar19 + uVar21;
              pphVar13 = pphVar13 + 1;
            } while ((int)(uVar19 + uVar21) < (int)uVar17);
          }
          uStack116._1_3_ = CONCAT12((char)(uVar17 - uVar19),uStack116._2_2_);
          if (puVar25 < auStack1332 + n) {
            uVar10 = *puVar25;
            if (uVar10 < s) {
              if (uVar10 < 0x100) {
                uStack116 = CONCAT13(0x10,uStack116._1_3_);
              }
              else {
                uStack116 = CONCAT13(0xf,uStack116._1_3_);
              }
              puVar11 = puVar25 + 1;
              phStack112 = (huft *)((uint)phStack112 & 0xffff | *puVar25 << 0x10);
            }
            else {
              puVar11 = puVar25 + 1;
              uStack116 = CONCAT13(*(undefined *)((uVar10 - s) + (int)e),uStack116._1_3_);
              phStack112 = (huft *)((uint)phStack112 & 0xffff |
                                   (uint)d[*puVar25 + s * 0x7fffffff] << 0x10);
            }
          }
          else {
            uStack116 = CONCAT13(99,uStack116._1_3_);
            puVar11 = puVar25;
          }
          uVar10 = uVar20 >> (uVar19 & 0x1f);
          if (uVar10 < uVar12) {
            do {
              phVar16 = (huft *)((int)phVar8 + uVar10 * 8);
              *(undefined4 *)phVar16 = uStack116;
              uVar10 += 1 << (uVar17 - uVar19 & 0x1f);
              *(huft **)((int)&phVar16->v + 2) = phStack112;
            } while (uVar10 < uVar12);
          }
          uVar2 = uVar20 & uVar23;
          uVar10 = uVar23;
          while (uVar2 != 0) {
            uVar20 ^= uVar10;
            uVar2 = uVar20 & uVar10 >> 1;
            uVar10 = uVar10 >> 1;
          }
          uVar20 ^= uVar10;
          if ((uVar20 & (1 << (uVar19 & 0x1f)) - 1U) != *puVar14) {
            do {
              uVar19 -= uVar21;
              puVar25 = puVar14 + -1;
              iVar9 += -1;
              iVar15 += -4;
              puVar14 = puVar14 + -1;
            } while ((uVar20 & (1 << (uVar19 & 0x1f)) - 1U) != *puVar25);
          }
          puVar25 = puVar11;
          uVar10 = uVar22;
        } while (uVar22 != 0);
      }
      uVar17 += 1;
      puStack1440 = puStack1440 + 1;
    } while ((int)uVar17 <= (int)uVar18);
  }
  return (int)(uint)(iVar4 != 0 && uVar18 != 1);
}



int inflate_codes(huft *tl,huft *td,int bl,int bd)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  ulonglong uVar6;
  uint uVar7;
  huft *phVar8;
  ulonglong uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  byte *pbVar13;
  undefined *puVar14;
  undefined *puVar15;
  ushort ml;
  ushort md;
  
  uVar9 = SEXT48((int)bk);
  ml = mask_bits[bl];
  md = mask_bits[bd];
  while( true ) {
    while( true ) {
      while (uVar12 = (uint)uVar9, uVar9 < (ulonglong)(longlong)bl) {
        pbVar13 = (byte *)(rarezip_ptr_source + inptr);
        inptr += 1;
        uVar9 = SEXT48((int)(uVar12 + 8));
        bb |= (uint)*pbVar13 << (uVar12 & 0x1f);
      }
      phVar8 = (huft *)((bb & (uint)ml) * 8 + (int)tl);
      uVar6 = (ulonglong)phVar8->e;
      if (phVar8->e < 0x11) {
        bVar1 = phVar8->b;
      }
      else {
        bVar1 = phVar8->b;
        while( true ) {
          iVar3 = (int)uVar6 + -0x10;
          uVar12 = (int)uVar9 - (uint)bVar1;
          bb >>= (uint)bVar1 & 0x1f;
          while (uVar9 = SEXT48((int)uVar12), uVar9 < (ulonglong)(longlong)iVar3) {
            pbVar13 = (byte *)(rarezip_ptr_source + inptr);
            inptr += 1;
            uVar10 = uVar12 & 0x1f;
            uVar12 += 8;
            bb |= (uint)*pbVar13 << uVar10;
          }
          phVar8 = (huft *)(((uint)mask_bits[iVar3] & bb) * 8 + *(int *)((int)&phVar8->v + 2));
          uVar6 = (ulonglong)phVar8->e;
          if (phVar8->e < 0x11) break;
          bVar1 = phVar8->b;
        }
        bVar1 = phVar8->b;
      }
      bb >>= (uint)bVar1 & 0x1f;
      bk = uVar12 - (uint)bVar1;
      uVar9 = SEXT48((int)bk);
      if (uVar6 != 0x10) break;
      puVar14 = (undefined *)(rarezip_ptr_target + wp);
      wp += 1;
      *puVar14 = (char)*(undefined2 *)((int)&phVar8->v + 2);
    }
    if (uVar6 == 0xf) break;
    uVar12 = (uint)uVar6;
    while (uVar9 < uVar6) {
      pbVar13 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      uVar10 = (uint)uVar9;
      bk = uVar10 + 8;
      uVar9 = SEXT48((int)bk);
      bb |= (uint)*pbVar13 << (uVar10 & 0x1f);
    }
    uVar10 = bk - uVar12;
    uVar11 = bb >> (uVar12 & 0x1f);
    uVar12 = ((uint)mask_bits[uVar12] & bb) + (uint)*(ushort *)((int)&phVar8->v + 2);
    while (uVar10 < (uint)bd) {
      pbVar13 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      uVar7 = uVar10 & 0x1f;
      uVar10 += 8;
      uVar11 |= (uint)*pbVar13 << uVar7;
    }
    phVar8 = (huft *)((uVar11 & (uint)md) * 8 + (int)td);
    uVar9 = (ulonglong)phVar8->e;
    if (phVar8->e < 0x11) {
      bVar1 = phVar8->b;
    }
    else {
      bVar1 = phVar8->b;
      while( true ) {
        uVar7 = (int)uVar9 - 0x10;
        uVar10 -= (uint)bVar1;
        uVar11 >>= (uint)bVar1 & 0x1f;
        while (uVar10 < uVar7) {
          pbVar13 = (byte *)(rarezip_ptr_source + inptr);
          inptr += 1;
          uVar2 = uVar10 & 0x1f;
          uVar10 += 8;
          uVar11 |= (uint)*pbVar13 << uVar2;
        }
        phVar8 = (huft *)(((uint)mask_bits[uVar7] & uVar11) * 8 + *(int *)((int)&phVar8->v + 2));
        uVar9 = (ulonglong)phVar8->e;
        if (phVar8->e < 0x11) break;
        bVar1 = phVar8->b;
      }
      bVar1 = phVar8->b;
    }
    uVar10 -= (uint)bVar1;
    uVar11 >>= (uint)bVar1 & 0x1f;
    while ((ulonglong)(longlong)(int)uVar10 < uVar9) {
      pbVar13 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      uVar7 = uVar10 & 0x1f;
      uVar10 += 8;
      uVar11 |= (uint)*pbVar13 << uVar7;
    }
    uVar7 = (uint)uVar9;
    uVar9 = SEXT48((int)(uVar10 - uVar7));
    iVar3 = (wp - (uint)*(ushort *)((int)&phVar8->v + 2)) - ((uint)mask_bits[uVar7] & uVar11);
    bb = uVar11 >> (uVar7 & 0x1f);
    while( true ) {
      if (-(uVar12 & 3) == 0) goto LAB_70200990;
      uVar10 = -(uVar12 & 3) + uVar12;
      do {
        uVar12 -= 1;
        puVar14 = (undefined *)(iVar3 + rarezip_ptr_target);
        puVar15 = (undefined *)(rarezip_ptr_target + wp);
        wp += 1;
        iVar3 += 1;
        *puVar15 = *puVar14;
      } while (uVar10 != uVar12);
      while (uVar12 != 0) {
LAB_70200990:
        uVar12 -= 4;
        *(undefined *)(rarezip_ptr_target + wp) = *(undefined *)(iVar3 + rarezip_ptr_target);
        *(undefined *)(rarezip_ptr_target + wp + 1) = *(undefined *)(iVar3 + 1 + rarezip_ptr_target)
        ;
        iVar4 = iVar3 + 3;
        *(undefined *)(rarezip_ptr_target + wp + 2) = *(undefined *)(iVar3 + 2 + rarezip_ptr_target)
        ;
        iVar5 = wp + 3;
        wp += 4;
        iVar3 += 4;
        *(undefined *)(rarezip_ptr_target + iVar5) = *(undefined *)(iVar4 + rarezip_ptr_target);
      }
      if (true) break;
      uVar12 = 0;
    }
  }
  return 0;
}



int inflate_stored(void)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  byte *pbVar4;
  
  uVar3 = bk - (bk & 7);
  bb >>= bk & 7;
  while (uVar3 < 0x10) {
    pbVar4 = (byte *)(rarezip_ptr_source + inptr);
    inptr += 1;
    uVar2 = uVar3 & 0x1f;
    uVar3 += 8;
    bb |= (uint)*pbVar4 << uVar2;
  }
  uVar3 -= 0x10;
  uVar2 = bb & 0xffff;
  bb = 0;
  while (uVar3 < 0x10) {
    pbVar4 = (byte *)(rarezip_ptr_source + inptr);
    inptr += 1;
    uVar1 = uVar3 & 0x1f;
    uVar3 += 8;
    bb |= (uint)*pbVar4 << uVar1;
  }
  bb >>= 0x10;
  bk = uVar3 - 0x10;
  while (uVar2 != 0) {
    uVar2 -= 1;
    uVar3 = bb;
    while (bk < 8) {
      pbVar4 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      uVar1 = bk & 0x1f;
      bk += 8;
      uVar3 |= (uint)*pbVar4 << uVar1;
    }
    bb = uVar3 >> 8;
    *(undefined *)(rarezip_ptr_target + wp) = (char)uVar3;
    wp += 1;
    bk -= 8;
  }
  return 0;
}



int inflate_fixed(void)

{
  uint *puVar1;
  uint *puVar2;
  uint l [288];
  int bd;
  int bl;
  huft *td;
  huft *tl;
  
  puVar1 = l;
  do {
    puVar2 = puVar1 + 4;
    puVar1[1] = 8;
    puVar1[2] = 8;
    puVar1[3] = 8;
    *puVar1 = 8;
    puVar1 = puVar2;
  } while (puVar2 != l + 0x90);
  if (puVar2 < l + 0x100) {
    puVar1 = puVar2;
    do {
      puVar2 = puVar1 + 1;
      *puVar1 = 9;
      puVar1 = puVar2;
    } while (puVar2 < l + 0x100);
  }
  if (puVar2 < l + 0x118) {
    puVar1 = puVar2;
    do {
      puVar2 = puVar1 + 1;
      *puVar1 = 7;
      puVar1 = puVar2;
    } while (puVar2 < l + 0x118);
  }
  if (puVar2 < &bd) {
    do {
      puVar1 = puVar2 + 1;
      *puVar2 = 8;
      puVar2 = puVar1;
    } while (puVar1 < &bd);
  }
  bl = 7;
  huft_build(l,0x120,0x101,cplens,(ush *)cplext,&tl,&bl);
  l[1] = 5;
  l[0] = 5;
  puVar1 = l + 2;
  do {
    puVar2 = puVar1 + 4;
    puVar1[1] = 5;
    puVar1[2] = 5;
    puVar1[3] = 5;
    *puVar1 = 5;
    puVar1 = puVar2;
  } while (puVar2 != l + 0x1e);
  bd = 5;
  huft_build(l,0x1e,0,cpdist,(ush *)cpdext,&td,&bd);
  inflate_codes(tl,td,bl,bd);
  return 0;
}



int inflate_dynamic(void)

{
  byte bVar1;
  ushort uVar2;
  ushort uVar3;
  bool bVar4;
  uint *puVar5;
  uint uVar6;
  int iVar7;
  byte *pbVar8;
  ulonglong uVar9;
  ulg b_;
  ulg b;
  uint uVar10;
  uint nd;
  uint nl;
  uint uVar11;
  byte *pbVar12;
  uint uVar13;
  uint ll [316];
  int bd;
  int bl;
  huft *td;
  huft *tl;
  uint k;
  
  b = bk;
  b_ = bk;
  k = bb;
  if (bk < 5) {
    do {
      pbVar8 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      b = b_ + 8;
      k |= (uint)*pbVar8 << (b_ & 0x1f);
      b_ = b;
    } while (b < 5);
  }
  uVar10 = b - 5;
  nl = (k & 0x1f) + 0x101;
  k >>= 5;
  while (uVar10 < 5) {
    pbVar8 = (byte *)(rarezip_ptr_source + inptr);
    inptr += 1;
    uVar11 = uVar10 & 0x1f;
    uVar10 += 8;
    k |= (uint)*pbVar8 << uVar11;
  }
  uVar10 -= 5;
  nd = (k & 0x1f) + 1;
  k >>= 5;
  while (uVar10 < 4) {
    pbVar8 = (byte *)(rarezip_ptr_source + inptr);
    inptr += 1;
    uVar11 = uVar10 & 0x1f;
    uVar10 += 8;
    k |= (uint)*pbVar8 << uVar11;
  }
  uVar11 = k >> 4;
  uVar10 -= 4;
  uVar6 = 0;
  if ((k & 0xf) != 0xfffffffc) {
    pbVar8 = border;
    do {
      uVar6 += 1;
      while (uVar10 < 3) {
        pbVar12 = (byte *)(rarezip_ptr_source + inptr);
        inptr += 1;
        uVar13 = uVar10 & 0x1f;
        uVar10 += 8;
        uVar11 |= (uint)*pbVar12 << uVar13;
      }
      bVar1 = *pbVar8;
      uVar13 = uVar11 & 7;
      pbVar8 = pbVar8 + 1;
      uVar11 >>= 3;
      ll[(uint)bVar1] = uVar13;
      uVar10 -= 3;
    } while (uVar6 != (k & 0xf) + 4);
  }
  if (uVar6 < 0x13) {
    pbVar8 = border + uVar6;
    do {
      bVar1 = *pbVar8;
      pbVar8 = pbVar8 + 1;
      ll[(uint)bVar1] = 0;
    } while (pbVar8 < border + 0x13);
  }
  bl = 7;
  huft_build(ll,0x13,0x13,NULL,NULL,&tl,&bl);
  uVar6 = nl + nd;
  uVar2 = mask_bits[bl];
  uVar9 = 0;
  k = 0;
  if (uVar6 != 0) {
    do {
      while (uVar10 < (uint)bl) {
        pbVar8 = (byte *)(rarezip_ptr_source + inptr);
        inptr += 1;
        uVar13 = uVar10 & 0x1f;
        uVar10 += 8;
        uVar11 |= (uint)*pbVar8 << uVar13;
      }
      td = (huft *)((uVar11 & (uint)uVar2) * 8 + (int)tl);
      uVar11 >>= (uint)td->b & 0x1f;
      uVar10 -= (uint)td->b;
      uVar3 = *(ushort *)((int)&td->v + 2);
      if (uVar3 < 0x10) {
        ll[k] = (uint)uVar3;
        k += 1;
        uVar9 = (ulonglong)uVar3;
LAB_7020115c:
        bVar4 = k < uVar6;
      }
      else {
        if (uVar3 != 0x10) {
          uVar9 = 0;
          if (uVar3 == 0x11) {
            while (uVar10 < 3) {
              pbVar8 = (byte *)(rarezip_ptr_source + inptr);
              inptr += 1;
              uVar13 = uVar10 & 0x1f;
              uVar10 += 8;
              uVar11 |= (uint)*pbVar8 << uVar13;
            }
            uVar13 = uVar11 & 7;
            uVar11 >>= 3;
            uVar10 -= 3;
            iVar7 = uVar13 + 2;
            if (uVar13 != 0xfffffffd) {
              puVar5 = ll + k;
              do {
                *puVar5 = 0;
                k += 1;
                puVar5 = puVar5 + 1;
                bVar4 = iVar7 != 0;
                iVar7 += -1;
              } while (bVar4);
              bVar4 = k < uVar6;
              goto LAB_70201160;
            }
          }
          else {
            while (uVar10 < 7) {
              pbVar8 = (byte *)(rarezip_ptr_source + inptr);
              inptr += 1;
              uVar13 = uVar10 & 0x1f;
              uVar10 += 8;
              uVar11 |= (uint)*pbVar8 << uVar13;
            }
            uVar13 = uVar11 & 0x7f;
            uVar11 >>= 7;
            uVar10 -= 7;
            iVar7 = uVar13 + 10;
            if (uVar13 != 0xfffffff5) {
              puVar5 = ll + k;
              do {
                *puVar5 = 0;
                k += 1;
                puVar5 = puVar5 + 1;
                bVar4 = iVar7 != 0;
                iVar7 += -1;
              } while (bVar4);
            }
          }
          goto LAB_7020115c;
        }
        while (uVar10 < 2) {
          pbVar8 = (byte *)(rarezip_ptr_source + inptr);
          inptr += 1;
          uVar13 = uVar10 & 0x1f;
          uVar10 += 8;
          uVar11 |= (uint)*pbVar8 << uVar13;
        }
        uVar13 = uVar11 & 3;
        uVar11 >>= 2;
        uVar10 -= 2;
        iVar7 = uVar13 + 2;
        if (uVar13 == 0xfffffffd) goto LAB_7020115c;
        puVar5 = ll + k;
        do {
          *puVar5 = (uint)uVar9;
          k += 1;
          puVar5 = puVar5 + 1;
          bVar4 = iVar7 != 0;
          iVar7 += -1;
        } while (bVar4);
        bVar4 = k < uVar6;
      }
LAB_70201160:
    } while (bVar4);
  }
  bl = lbits;
  bb = uVar11;
  bk = uVar10;
  huft_build(ll,nl,0x101,cplens,(ush *)cplext,&tl,&bl);
  bd = dbits;
  huft_build(ll + nl,nd,0,cpdist,(ush *)cpdext,&td,&bd);
  inflate_codes(tl,td,bl,bd);
  return 0;
}



int inflate_block(int *e)

{
  uint uVar1;
  uint t;
  int iVar2;
  uint uVar3;
  uint uVar4;
  byte *pbVar5;
  
  if (bk == 0) {
    do {
      pbVar5 = (byte *)(rarezip_ptr_source + inptr);
      inptr += 1;
      uVar3 = bk & 0x1f;
      bk += 8;
      bb |= (uint)*pbVar5 << uVar3;
    } while (bk == 0);
  }
  uVar3 = bk - 1;
  uVar4 = bb >> 1;
  *e = bb & 1;
  while (uVar3 < 2) {
    pbVar5 = (byte *)(rarezip_ptr_source + inptr);
    inptr += 1;
    uVar1 = uVar3 & 0x1f;
    uVar3 += 8;
    uVar4 |= (uint)*pbVar5 << uVar1;
  }
  t = uVar4 & 3;
  bb = uVar4 >> 2;
  bk = uVar3 - 2;
  if (t == 2) {
    iVar2 = inflate_dynamic();
  }
  else {
    if (t == 0) {
      iVar2 = inflate_stored();
    }
    else {
      if (t == 1) {
        iVar2 = inflate_fixed();
      }
      else {
        iVar2 = 2;
      }
    }
  }
  return iVar2;
}



int inflate(void)

{
  int r;
  uint h;
  int e;
  
  wp = 0;
  bk = 0;
  bb = 0;
  h = 0;
  do {
    hufts = 0;
    r = inflate_block(&e);
    if (r != 0) {
      return r;
    }
    if (h < hufts) {
      h = hufts;
    }
  } while (e == 0);
  while (7 < bk) {
    bk -= 8;
    inptr += -1;
  }
  return 0;
}



void decompress_entry(int source,int target,int buffer)

{
  rarezip_ptr_source = source + 2;
  wp = 0;
  inptr = 0;
  rarezip_ptr_target = target;
  rarezip_ptrbuffer = buffer;
  inflate();
  return;
}



void initGameData(void)

{
  current_menu = ~MENU_LEGAL_SCREEN;
  menu_update = MENU_LEGAL_SCREEN;
  maybe_prev_menu = ~MENU_LEGAL_SCREEN;
  menu_timer = 0;
  selected_folder_num = 0;
  selected_stage = LEVELID_NONE;
  briefingpage = 0xffffffff;
  selected_difficulty = DIFFICULTY_MULTI;
  folder_selection_screen_option_icon = 0;
  mission_failed_or_aborted = FALSE;
  is_first_time_on_legal_screen = TRUE;
  is_first_time_on_main_menu = TRUE;
  prev_keypresses = 0;
  maybe_is_in_menu = TRUE;
  screen_size = SCREEN_SIZE_320x240;
  slider_007_mode_reaction = 0.00000000;
  slider_007_mode_health = 1.00000000;
  slider_007_mode_accuracy = 1.00000000;
  slider_007_mode_damage = 1.00000000;
  do_not_play_intro_movie = 0;
  randomly_selected_intro_animation = 0;
  intro_animation_count = 0;
  objinstance = NULL;
  ptrobjinstance = NULL;
  full_actor_intro = FALSE;
  return;
}



void init_weapon_animation_groups_maybe(void)

{
  set_8003608C(get_ptr_allocated_block_for_weapon_vertices);
  somethingwith_weapon_animation_groups();
  return;
}



void reset_counter_rand_body_head(void)

{
  num_bodies = 0;
  if (-1 < list_of_bodies[0]) {
    num_bodies = 1;
    while (-1 < (int)list_of_bodies[num_bodies]) {
      num_bodies += 1;
    }
  }
  num_male_heads = 0;
  if (-1 < random_male_heads[0]) {
    num_male_heads = 1;
    while (-1 < (int)random_male_heads[num_male_heads]) {
      num_male_heads += 1;
    }
  }
  num_female_heads = 0;
  if (-1 < random_female_heads[0]) {
    num_female_heads = 1;
    while (-1 < (int)random_female_heads[num_female_heads]) {
      num_female_heads += 1;
    }
  }
  return;
}



uint proc_7F0001F0(int param_1,int param_2,int param_3)

{
  uint uVar1;
  uint uVar2;
  short asStack8 [4];
  
  uVar2 = 0;
  if (param_2 < param_3) {
    do {
      uVar1 = proc_7F06D2E4(0,0,&model_guard_character,param_1,param_2,asStack8);
      param_2 += 1;
      uVar2 = uVar2 + uVar1 & 0xffff;
    } while (param_2 < param_3);
  }
  return uVar2;
}



int proc_7F000290(int param_1,int param_2,int param_3)

{
  int iVar1;
  short asStack12 [2];
  short sStack8;
  
  iVar1 = 0;
  if (param_2 < param_3) {
    do {
      proc_7F06D2E4(0,0,&model_guard_character,param_1,param_2,asStack12);
      param_2 += 1;
      iVar1 += (int)sStack8;
    } while (param_2 < param_3);
  }
  return iVar1;
}



int proc_7F00032C(struct_1 *param_1)

{
  float fVar1;
  float fVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  float fVar6;
  float fVar7;
  
  fVar2 = flt_8004ED74;
  fVar1 = flt_8004ED70;
  iVar3 = param_1->anonymous_0;
  iVar5 = 0;
  while (iVar3 != 0) {
    param_1->anonymous_0 = iVar3 + ptr_animation_table;
    iVar3 = proc_7F05C3D8(param_1->anonymous_1);
    uVar4 = proc_7F0001F0(param_1->anonymous_0,0,iVar3);
    fVar6 = param_1->anonymous_1;
    uVar4 &= 0xffff;
    if (0.00000000 < fVar6) {
      if (uVar4 < 0x8000) {
        fVar7 = (float)uVar4;
        if (false) {
          fVar7 = fVar7 + 4294967296.00000000;
        }
        param_1->anonymous_2 = (fVar7 * fVar2) / fVar6;
      }
      else {
        fVar7 = (float)uVar4;
        if (false) {
          fVar7 = fVar7 + 4294967296.00000000;
        }
        param_1->anonymous_2 = (fVar7 * fVar2 - fVar1) / fVar6;
      }
    }
    else {
      param_1->anonymous_2 = 0.00000000;
    }
    iVar3 = param_1[1].anonymous_0;
    param_1 = param_1 + 1;
    iVar5 += 1;
  }
  return iVar5;
}



// WARNING: Type propagation algorithm not settling

void proc_7F00046C(int **param_1)

{
  float fVar1;
  int iVar2;
  
  iVar2 = 0;
  do {
    if ((int)((struct_1 *)*param_1)->anonymous_1 < 0) {
      fVar1 = (float)proc_7F00032C((struct_1 *)((struct_1 *)*param_1)->anonymous_0);
      ((struct_1 *)*param_1)->anonymous_1 = fVar1;
    }
    iVar2 += 4;
    param_1 = (int **)((struct_1 **)param_1 + 1);
  } while (iVar2 != 0x80);
  return;
}



int proc_7F0004D0(int *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar1 = 0;
  if (*param_1 != 0) {
    iVar2 = *param_1;
    do {
      iVar1 += 1;
      iVar3 = iVar2 + ptr_animation_table;
      iVar2 = param_1[7];
      *param_1 = iVar3;
      param_1 = param_1 + 7;
    } while (iVar2 != 0);
  }
  return iVar1;
}



void somethingwith_weapon_animation_groups(void)

{
  float fVar1;
  int iVar2;
  struck_animation_table *psVar3;
  animation_something *paVar4;
  float fVar5;
  
  if (dword_8002C914.anonymous_0 != -1) {
    psVar3 = dword_8002C914.field_1C;
    paVar4 = &dword_8002C914;
    while( true ) {
      if (psVar3 == NULL) {
        psVar3 = paVar4->field_24;
      }
      else {
        iVar2 = proc_7F0004D0((int *)psVar3);
        paVar4->field_20 = iVar2;
        psVar3 = paVar4->field_24;
      }
      if (psVar3 == NULL) {
        iVar2 = paVar4[1].anonymous_0;
      }
      else {
        iVar2 = proc_7F0004D0((int *)psVar3);
        paVar4->field_28 = iVar2;
        iVar2 = paVar4[1].anonymous_0;
      }
      if (iVar2 == -1) break;
      psVar3 = paVar4[1].field_1C;
      paVar4 = paVar4 + 1;
    }
  }
  proc_7F0004D0((int *)&stru_8002DEBC);
  proc_7F00046C((int **)ptr_rifle_firing_animation_groups);
  proc_7F00046C((int **)ptr_pistol_firing_animation_groups);
  proc_7F00046C((int **)ptr_doubles_firing_animation_groups);
  proc_7F00046C((int **)ptr_crouched_rifle_firing_animation_groups);
  proc_7F00046C((int **)ptr_crouched_pistol_firing_animation_groups);
  proc_7F00046C((int **)ptr_crouched_doubles_firing_animation_groups);
  proc_7F00032C((struct_1 *)&stru_80030078);
  proc_7F00032C((struct_1 *)&stru_80030660);
  iVar2 = proc_7F000290(ptr_animation_table + 0x4018,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x401c) - 1);
  fVar1 = flt_8004ED78;
  dword_80030984 = (float)(uint)*(ushort *)(ptr_animation_table + 0x401c);
  if (false) {
    dword_80030984 = dword_80030984 + 4294967296.00000000;
  }
  dword_80030984 = ((float)iVar2 * flt_8004ED78) / dword_80030984;
  iVar2 = proc_7F000290(ptr_animation_table + 0x40d4,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x40d8) - 1);
  dword_80030988 = (float)(uint)*(ushort *)(ptr_animation_table + 0x40d8);
  if (false) {
    dword_80030988 = dword_80030988 + 4294967296.00000000;
  }
  dword_80030988 = ((float)iVar2 * fVar1) / dword_80030988;
  iVar2 = proc_7F000290(ptr_animation_table + 0x4070,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x4074) - 1);
  dword_8003098C = (float)(uint)*(ushort *)(ptr_animation_table + 0x4074);
  if (false) {
    dword_8003098C = dword_8003098C + 4294967296.00000000;
  }
  dword_8003098C = ((float)iVar2 * fVar1) / dword_8003098C;
  iVar2 = proc_7F000290(ptr_animation_table + 0x8204,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x8208) - 1);
  dword_80030990 = (float)(uint)*(ushort *)(ptr_animation_table + 0x8208);
  if (false) {
    dword_80030990 = dword_80030990 + 4294967296.00000000;
  }
  dword_80030990 = ((float)iVar2 * fVar1) / dword_80030990;
  iVar2 = proc_7F000290(ptr_animation_table + 0x777c,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x7780) - 1);
  dword_80030994 = (float)(uint)*(ushort *)(ptr_animation_table + 0x7780);
  if (false) {
    dword_80030994 = dword_80030994 + 4294967296.00000000;
  }
  dword_80030994 = ((float)iVar2 * fVar1) / dword_80030994;
  iVar2 = proc_7F000290(ptr_animation_table + 0x77d4,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x77d8) - 1);
  dword_80030998 = (float)(uint)*(ushort *)(ptr_animation_table + 0x77d8);
  if (false) {
    dword_80030998 = dword_80030998 + 4294967296.00000000;
  }
  dword_80030998 = ((float)iVar2 * fVar1) / dword_80030998;
  iVar2 = proc_7F000290(ptr_animation_table + 0x84c4,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x84c8) - 1);
  dword_8003099C = (float)(uint)*(ushort *)(ptr_animation_table + 0x84c8);
  if (false) {
    dword_8003099C = dword_8003099C + 4294967296.00000000;
  }
  dword_8003099C = ((float)iVar2 * fVar1) / dword_8003099C;
  iVar2 = proc_7F000290(ptr_animation_table + 0x8520,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x8524) - 1);
  dword_800309A0 = (float)(uint)*(ushort *)(ptr_animation_table + 0x8524);
  if (false) {
    dword_800309A0 = dword_800309A0 + 4294967296.00000000;
  }
  dword_800309A0 = ((float)iVar2 * fVar1) / dword_800309A0;
  iVar2 = proc_7F000290(ptr_animation_table + 0x77d4,0,
                        (uint)*(ushort *)(ptr_animation_table + 0x77d8) - 1);
  fVar5 = (float)(uint)*(ushort *)(ptr_animation_table + 0x77d8);
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  dword_800309A4 = ((float)iVar2 * fVar1) / fVar5;
  return;
}



void proc_7F000980(void)

{
  proc_7F0009A0();
  return;
}



void proc_7F0009A0(void)

{
  undefined *puVar1;
  
  puVar1 = &DAT_80075dc8;
  do {
    puVar1 = puVar1 + 0xa0;
    *(undefined4 *)(puVar1 + 0x9c) = 0;
    puVar1 = puVar1;
  } while (puVar1 < &DAT_80076a48);
  return;
}



void removed_7f0009d0(void)

{
  return;
}



void proc_7F0009E0(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  dword_80036414 = param_1;
  dword_80036418 = param_2;
  dword_8003641C = param_3;
  return;
}



void expand_ani_table_entries(void *param_1)

{
  int *piVar1;
  int iVar2;
  
  iVar2 = *(int *)param_1;
  if (iVar2 != 0) {
    iVar2 = *(int *)param_1;
    piVar1 = (int *)param_1;
    do {
      if (iVar2 == 1) {
        iVar2 = piVar1[1];
      }
      else {
        iVar2 += ptr_animation_table;
        *piVar1 = iVar2;
        *(int *)(iVar2 + 8) = *(int *)(iVar2 + 8) + ptr_animation_table;
        *(int *)(*piVar1 + 0x10) = *(int *)(*piVar1 + 0x10) + ptr_animation_table;
        iVar2 = piVar1[1];
      }
      piVar1 = piVar1 + 1;
    } while (iVar2 != 0);
    iVar2 = *(int *)param_1;
  }
  if (iVar2 != 0) {
    piVar1 = *(int **)param_1;
    do {
      if (piVar1 == (int *)((int)&rgba + 1)) {
        piVar1 = *(int **)((int)param_1 + 4);
      }
      else {
        *(undefined **)piVar1 = &animation_table + *piVar1;
        piVar1 = *(int **)((int)param_1 + 4);
      }
      param_1 = (void *)((int)param_1 + 4);
    } while (piVar1 != NULL);
  }
  return;
}



void alloc_load_expand_ani_table(void)

{
  osCreateMesgQueue(&animMQ,animMesg,8);
  proc_7F0009E0(&dword_80029D60,&animMQ,&DAT_80069458);
  ptr_animation_table = allocate_bytes_in_bank(0xe7e0,6);
  romCopy(ptr_animation_table,animation_data,0xe7e0);
  expand_ani_table_entries(animation_table_ptrs1);
  expand_ani_table_entries(animation_table_ptrs2);
  return;
}



void setup_ptr_playergait(void)

{
  ptr_player_gait_object.offset_obj_table = (int)&playergait;
  return;
}



void set_gu_scale(void)

{
  float x;
  float y;
  
  guScale((Mtx *)&DAT_8007a100,x,y,default_gu_scale);
  return;
}



void removed_7f000bc0(void)

{
  return;
}



void image_entries_load(void)

{
  image_entry *piVar1;
  image_entry *piVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  piVar1 = image_entries;
  uVar3 = 0;
  piVar2 = image_entries;
  if ((image_entries[0]._0_4_ & 0xffffff) != 0xffff) {
    uVar5 = image_entries[0]._0_4_ & 0xffffff;
    uVar4 = image_entries[0]._0_4_;
    do {
      uVar6 = (uVar3 & 0xffffff ^ uVar4) & 0xffffff ^ uVar4;
      uVar4 = *(uint *)(piVar1 + 1);
      uVar3 += uVar5;
      *(uint *)piVar1 = uVar6;
      uVar5 = uVar4 & 0xffffff;
      piVar1 = piVar1 + 1;
      piVar2 = piVar1;
    } while (uVar5 != 0xffff);
  }
  *(uint *)piVar2 = (uVar3 & 0xffffff ^ *(uint *)piVar2) & 0xffffff ^ *(uint *)piVar2;
  return;
}



void alloc_intro_matrices(void)

{
  DAT_8002a7d0 = 0;
  matrix_buffer_rarelogo_0 = allocate_bytes_in_bank(0x80,4);
  matrix_buffer_gunbarrel_0 = (Mtx *)allocate_bytes_in_bank(0x40,4);
  matrix_buffer_rarelogo_1 = allocate_bytes_in_bank(0x80,4);
  matrix_buffer_rarelogo_2 = allocate_bytes_in_bank(0x80,4);
  matrix_buffer_gunbarrel_1 = allocate_bytes_in_bank(0x80,4);
  matrix_buffer_intro_backdrop = allocate_bytes_in_bank(0x80,4);
  matrix_buffer_intro_bond = allocate_bytes_in_bank(0x80,4);
  return;
}



void init_menus_or_reset(void)

{
  void *pvVar1;
  
  current_menu = ~MENU_LEGAL_SCREEN;
  maybe_prev_menu = ~MENU_LEGAL_SCREEN;
  screen_size = SCREEN_SIZE_320x240;
  spectrum_related_flag = TRUE;
  is_emulating_spectrum = FALSE;
  folder_selection_screen_option_icon = 0;
  folder_selected_for_deletion = -1;
  folder_selected_for_deletion_choice = 1;
  tab_1_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_3_highlight = FALSE;
  maybe_is_in_menu = TRUE;
  if (prev_keypresses != 0) {
    menu_update = MENU_FILE_SELECT;
  }
  if ((int)menu_update < 0) {
    menu_update = MENU_FILE_SELECT;
  }
  ptr_logo_and_walletbond_DL = (undefined *)allocate_bytes_in_bank(0x78000,4);
  pvVar1 = allocate_bytes_in_bank(0x4b040,4);
  ptr_menu_videobuffer = (undefined *)((int)pvVar1 + 0x3fU & 0xffffffc0);
  ptr_folder_object_instance = NULL;
  set0_never_used = 0;
  set0_never_used_0 = 0;
  dword_8002A968 = 0;
  alloc_intro_matrices();
  return;
}



void initguards(void)

{
  animation_rate = 1.00000000;
  dword_8002C904 = 0;
  dword_8002C908 = 0;
  dword_8002C90C = 0;
  dword_8002C910 = 0;
  dword_8002CC58 = 0;
  show_patrols_flag = 0;
  player1_guardID = 5000;
  ptr_guard_data = NULL;
  num_guards = 0;
  init_obj_register_difficulty_vals();
  return;
}



void alloc_init_GUARDdata_entries(int param_1)

{
  int iVar1;
  int iVar2;
  
  num_guards = param_1 + 10;
  ptr_guard_data = (GUARDdata *)allocate_bytes_in_bank((num_guards * 0x1dc + 0xfU | 0xf) ^ 0xf,4);
  iVar2 = 0;
  if (0 < num_guards) {
    iVar1 = 0;
    do {
      iVar2 += 1;
      *(undefined4 *)((int)&ptr_guard_data->MODELdata_pointer + iVar1) = 0;
      iVar1 += 0x1dc;
    } while (iVar2 < num_guards);
  }
  return;
}



void set_new_rand_head_bodies(void)

{
  c_itementry *pcVar1;
  c_itementry *pcVar2;
  u32 uVar3;
  
  if (c_item_entries[0].header != NULL) {
    pcVar2 = c_item_entries;
    (c_item_entries[0].header)->offset_obj_table = 0;
    while( true ) {
      pcVar1 = pcVar2 + 1;
      pcVar2 = pcVar2 + 1;
      if (pcVar1->header == NULL) break;
      pcVar1->header->offset_obj_table = 0;
    }
  }
  uVar3 = get_random_value();
  current_random_male_head = uVar3 % num_male_heads;
  if (num_male_heads == 0) {
    trap(0x1c00);
  }
  uVar3 = get_random_value();
  current_random_female_head = uVar3 % num_female_heads;
  if (num_female_heads == 0) {
    trap(0x1c00);
  }
  uVar3 = get_random_value();
  if (num_bodies == 0) {
    trap(0x1c00);
  }
  current_random_body = uVar3 % num_bodies;
  return;
}



void init_obj_register_difficulty_vals(void)

{
  ai_accuracy_modifier = 1.00000000;
  ai_damage_modifier = 1.00000000;
  ai_health_modifier = 1.00000000;
  ai_reaction_speed = 1.00000000;
  setting_007_5 = 0.00000000;
  objectiveregisters1 = 0;
  return;
}



void alloc_false_GUARDdata_to_exec_global_action(void)

{
  undefined4 *puVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 auStack484 [117];
  undefined4 auStack16 [2];
  int local_8;
  
  objectiveregisters2 = NULL;
  objectiveregisters3 = 0;
  if (ptr_setup_actions != NULL) {
    if (*(int *)ptr_setup_actions != 0) {
      iVar4 = *(int *)(ptr_setup_actions + 4);
      puVar3 = ptr_setup_actions;
      while( true ) {
        if (iVar4 < 0x1000) {
          iVar4 = *(int *)(puVar3 + 8);
        }
        else {
          objectiveregisters3 += 1;
          iVar4 = *(int *)(puVar3 + 8);
        }
        if (iVar4 == 0) break;
        iVar4 = *(int *)(puVar3 + 0xc);
        puVar3 = puVar3 + 8;
      }
    }
    if (0 < objectiveregisters3) {
      local_8 = 0;
      objectiveregisters2 =
           allocate_bytes_in_bank((objectiveregisters3 * 0x1dc + 0xfU | 0xf) ^ 0xf,4);
      iVar4 = 0;
      if (*(int *)ptr_setup_actions != 0) {
        iVar5 = *(int *)(ptr_setup_actions + 4);
        puVar3 = ptr_setup_actions;
        while( true ) {
          puVar7 = global_action_block_temp_buffer;
          puVar1 = auStack484;
          puVar2 = puVar3;
          if (0xfff < iVar5) {
            do {
              puVar6 = puVar1;
              puVar8 = puVar7;
              *puVar6 = *puVar8;
              puVar6[1] = puVar8[1];
              puVar6[2] = puVar8[2];
              puVar7 = puVar8 + 3;
              puVar1 = puVar6 + 3;
            } while (puVar8 + 3 != global_action_block_temp_buffer + 0x75);
            iVar5 = local_8 * 0x1dc;
            puVar6[3] = global_action_block_temp_buffer[117];
            puVar6[4] = puVar8[4];
            puVar7 = auStack484;
            puVar1 = (undefined4 *)((int)objectiveregisters2 + iVar5);
            do {
              puVar8 = puVar1;
              puVar6 = puVar7;
              puVar7 = puVar6 + 3;
              *puVar8 = *puVar6;
              puVar8[1] = puVar6[1];
              puVar8[2] = puVar6[2];
              puVar1 = puVar8 + 3;
            } while (puVar7 != auStack16);
            local_8 += 1;
            puVar8[3] = *puVar7;
            puVar8[4] = puVar6[4];
            *(undefined2 *)((int)objectiveregisters2 + iVar5) = 0xfe;
            *(undefined4 *)((int)objectiveregisters2 + iVar5 + 0x104) =
                 *(undefined4 *)(ptr_setup_actions + iVar4);
            *(undefined2 *)((int)objectiveregisters2 + iVar5 + 0x108) = 0;
            *(undefined2 *)((int)objectiveregisters2 + iVar5 + 0x10a) = 0xffff;
            *(undefined *)((int)objectiveregisters2 + iVar5 + 7) = 0x1a;
            puVar2 = ptr_setup_actions + iVar4;
          }
          iVar4 += 8;
          puVar3 = puVar2 + 8;
          if (*(int *)(puVar2 + 8) == 0) break;
          iVar5 = *(int *)(puVar2 + 0xc);
        }
      }
    }
  }
  return;
}



void debug_object_load_all_models(void)

{
  char cVar1;
  int iVar2;
  char *modelid;
  int iVar3;
  
  modelid = *(char **)ptr_setup_actions;
  iVar3 = 0;
  if (modelid == NULL) {
    return;
  }
  do {
    cVar1 = *modelid;
    while (cVar1 == '\x04') {
      modelid = *(char **)(ptr_setup_actions + iVar3 + 8);
      iVar3 += 8;
      if (modelid == NULL) {
        return;
      }
      cVar1 = *modelid;
    }
    if (cVar1 == '\x1b') {
      load_model((uint)*(ushort *)(modelid + 1));
    }
    else {
      if (cVar1 == -0x43) {
        load_body_head_if_not_loaded((uint)(byte)modelid[1]);
        if (-1 < modelid[2]) {
          load_body_head_if_not_loaded((int)modelid[2]);
        }
      }
      else {
        if (cVar1 == -0x42) {
          load_body_head_if_not_loaded((uint)(byte)modelid[1]);
          if (-1 < modelid[2]) {
            load_body_head_if_not_loaded((int)modelid[2]);
          }
        }
        else {
          if (cVar1 == -0x41) {
            load_model((uint)*(ushort *)(modelid + 1));
            set_weapon_model_generated_thrown_object((uint)(byte)modelid[3]);
          }
          else {
            if (cVar1 == -0x40) {
              load_model((uint)*(ushort *)(modelid + 1));
            }
          }
        }
      }
    }
    iVar2 = get_length_of_action_block((int)modelid,0);
    modelid = modelid + iVar2;
  } while( true );
}



void debug_weapon_load_table(void)

{
  PROJECTILES *pPVar1;
  PROJECTILES modelid;
  PROJECTILES *pPVar2;
  PROJECTILES PStack32;
  PROJECTILES PStack28;
  PROJECTILES PStack24;
  PROJECTILES PStack20;
  PROJECTILES PStack16;
  PROJECTILES PStack12;
  PROJECTILES PStack8;
  PROJECTILES PStack4;
  
  PStack32 = weapon_models_for_weapon_load[0];
  PStack28 = weapon_models_for_weapon_load[1];
  pPVar2 = &PStack32;
  PStack20 = weapon_models_for_weapon_load[3];
  PStack24 = weapon_models_for_weapon_load[2];
  PStack16 = weapon_models_for_weapon_load[4];
  PStack12 = weapon_models_for_weapon_load[5];
  PStack4 = weapon_models_for_weapon_load[7];
  PStack8 = weapon_models_for_weapon_load[6];
  modelid = weapon_models_for_weapon_load[0];
  if (-1 < (int)weapon_models_for_weapon_load[0]) {
    do {
      load_model(modelid);
      pPVar1 = pPVar2 + 1;
      pPVar2 = pPVar2 + 1;
      modelid = *pPVar1;
    } while (-1 < (int)*pPVar1);
  }
  return;
}



void init_sound_effects_registers(void)

{
  sfx_register_struct *psVar1;
  
  psVar1 = &sfx_related;
  do {
    psVar1 = psVar1 + 4;
    psVar1[1].field_0x0 = 0;
    psVar1[2].field_0x0 = 0;
    psVar1[3].field_0x0 = 0;
    psVar1->field_0x0 = 0;
    psVar1 = psVar1;
  } while (psVar1 != (sfx_register_struct *)&ptr_list_object_lookup_indices);
  return;
}



void init_load_objpos_table(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  undefined *puVar5;
  
  difficulty = 0x3f800000;
  ptr_obj_pos_list_first_entry = NULL;
  ptr_obj_pos_list_current_entry = NULL;
  DAT_80071df4 = 0;
  DAT_80071620 = 0;
  DAT_80071df0 = &DAT_80071620;
  DAT_80069c5c = &DAT_80069c6c;
  DAT_80069c90 = &DAT_80069ca0;
  puVar1 = &DAT_80069cd4;
  puVar5 = &DAT_80069d70;
  puVar4 = &DAT_80069d3c;
  puVar3 = &DAT_80069d08;
  puVar2 = &DAT_80069da4;
  DAT_80069cc4 = &DAT_80069cd4;
  ptr_obj_pos_list_final_entry = (object_standard *)pos_data_entry;
  do {
    *(undefined **)(puVar1 + 0xc0) = puVar2;
    puVar2 = puVar2 + 0xd0;
    *(undefined **)(puVar1 + 0x58) = puVar4;
    *(undefined **)(puVar1 + 0x8c) = puVar5;
    *(undefined **)(puVar1 + 0x24) = puVar3;
    puVar3 = puVar3 + 0xd0;
    puVar5 = puVar5 + 0xd0;
    puVar4 = puVar4 + 0xd0;
    puVar1 = puVar1 + 0xd0;
  } while (puVar2 != &DAT_800716b4);
  alloc_lookup_buffers();
  return;
}



void alloc_lookup_buffers(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  ptr_list_object_lookup_indices = (undefined2 *)allocate_bytes_in_bank(0x400,4);
  ptr_room_lookup_buffer_maybe = allocate_bytes_in_bank((max_num_rooms * 4 + 0xf | 0xf) ^ 0xf,4);
  DAT_8007161c = allocate_bytes_in_bank(0x2000,4);
  *ptr_list_object_lookup_indices = 0xffff;
  iVar4 = 0;
  if (0 < (int)max_num_rooms) {
    iVar2 = 0;
    do {
      iVar4 += 1;
      *(undefined2 *)((int)ptr_room_lookup_buffer_maybe + iVar2) = 0xffff;
      iVar2 += 2;
    } while (iVar4 < (int)max_num_rooms);
  }
  iVar4 = 0;
  iVar2 = 0;
  do {
    *(undefined2 *)((int)DAT_8007161c + iVar2) = 0xfffe;
    iVar3 = 8;
    *(undefined2 *)((int)DAT_8007161c + iVar4 * 0x20 + 2) = 0xffff;
    *(undefined2 *)((int)DAT_8007161c + iVar4 * 0x20 + 4) = 0xffff;
    *(undefined2 *)((int)DAT_8007161c + iVar4 * 0x20 + 6) = 0xffff;
    do {
      *(undefined2 *)((int)DAT_8007161c + iVar3 + iVar4 * 0x20) = 0xffff;
      *(undefined2 *)((int)DAT_8007161c + iVar3 + iVar4 * 0x20 + 2) = 0xffff;
      *(undefined2 *)((int)DAT_8007161c + iVar3 + iVar4 * 0x20 + 4) = 0xffff;
      iVar1 = iVar3 + iVar4 * 0x20;
      iVar3 += 8;
      *(undefined2 *)((int)DAT_8007161c + iVar1 + 6) = 0xffff;
    } while (iVar3 != 0x20);
    iVar4 += 1;
    iVar2 += 0x20;
  } while (iVar4 != 0x100);
  return;
}



void reinit_between_menus(void)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  
  write_monitor_ani_control_blocks();
  initialize_80071E00_to_80071E78();
  alarm_timer = 0;
  ptr_alarm_sfx = 0;
  toxic_gas_sound_timer = 0;
  activate_gas_sound_timer = 0;
  flt_80030AD0 = 0;
  flt_80030AD4 = 0;
  flt_80030AD8 = 0;
  dword_80030ADC = 0;
  dword_80030AE0 = 0;
  dword_80030AE4 = 0;
  clock_drawn_flag = 1;
  clock_enable = 0;
  clock_time = 0;
  dword_80030AF4 = 0;
  puVar1 = &ProjectileData_start_address;
  do {
    puVar1 = puVar1 + 0x88;
    *(undefined4 *)(puVar1 + 0x10) = 0;
    puVar1 = puVar1;
  } while (puVar1 < (undefined *)0x80072e70);
  dword_80030AF8 = 0;
  puVar1 = (undefined *)0x80072e70;
  do {
    puVar1 = puVar1 + 0x80;
    *(undefined4 *)(puVar1 + 0x10) = 0;
    puVar1 = puVar1;
  } while (puVar1 < &DAT_80073370);
  dword_80030AFC = 0;
  puVar2 = (undefined4 *)&DAT_80073370;
  do {
    puVar3 = puVar2 + 0x21;
    puVar2[4] = 0;
    puVar2 = puVar3;
  } while (puVar3 < &DAT_80073dc0);
  puVar2 = &DAT_80073dc0;
  do {
    puVar3 = puVar2 + 0x3b;
    *puVar2 = 0x80000000;
    puVar2[0x26] = 0;
    puVar2[0x27] = 0;
    puVar2 = puVar3;
  } while (puVar3 < &DAT_80075030);
  puVar2 = &DAT_80075030;
  do {
    puVar3 = puVar2 + 0x48;
    puVar2[0x12] = 1;
    puVar2[0x24] = 1;
    puVar2[0x36] = 1;
    *puVar2 = 1;
    puVar2 = puVar3;
  } while (puVar3 != &objinst);
  dword_80030B00 = 0;
  dword_80030B04 = 0;
  dword_80030B08 = 0;
  dword_80030B0C = 0;
  bodypartshot = 0xffffffff;
  flt_80030B14 = 1.00000000;
  flt_80030B18 = 1.00000000;
  flt_80030B1C = 1.00000000;
  flt_80030B20 = 1.00000000;
  flt_80030B24 = 1.00000000;
  solo_ammo_multiplier = 1.00000000;
  return;
}



void proc_7F001910(int param_1)

{
  *(undefined4 *)(param_1 + 0xc) = dword_80030B00;
  dword_80030B00 = param_1;
  return;
}



void proc_7F001928(int param_1)

{
  *(undefined4 *)(param_1 + 0xc) = dword_80030B04;
  dword_80030B04 = param_1;
  return;
}



void proc_7F001940(int param_1)

{
  *(undefined4 *)(param_1 + 0x10) = dword_80030B08;
  dword_80030B08 = param_1;
  return;
}



void write_monitor_ani_control_blocks(void)

{
  object_animation_controller *poVar1;
  void **ppvVar2;
  void **ppvVar3;
  void **ppvVar4;
  void **ppvVar5;
  object_animation_controller *poVar6;
  void *apvStack348 [27];
  void *apvStack240 [2];
  void *apvStack232 [27];
  void *apvStack124 [2];
  void *apvStack116 [27];
  void *apvStack8 [2];
  
  poVar1 = &ptr_monitorimageobjectanimationcontroller;
  ppvVar5 = apvStack116;
  do {
    ppvVar2 = ppvVar5;
    poVar6 = poVar1;
    *ppvVar2 = poVar6->ptranimation;
    ppvVar2[1] = *(void **)&poVar6->offsettocurcmd;
    ppvVar2[2] = (void *)poVar6->imagenum;
    poVar1 = (object_animation_controller *)&poVar6->rotation;
    ppvVar5 = ppvVar2 + 3;
  } while ((object_animation_controller *)&poVar6->rotation !=
           (object_animation_controller *)&ptr_monitorimageobjectanimationcontroller.startcolorshift
          );
  *(f32 *)(ppvVar2 + 3) = ptr_monitorimageobjectanimationcontroller.startcolorshift;
  ppvVar2[4] = (void *)poVar6->curzoomx;
  ppvVar5 = apvStack116;
  ppvVar2 = (void **)&DAT_80075b98;
  do {
    ppvVar3 = ppvVar2;
    ppvVar4 = ppvVar5;
    ppvVar5 = ppvVar4 + 3;
    *ppvVar3 = *ppvVar4;
    ppvVar3[1] = ppvVar4[1];
    ppvVar3[2] = ppvVar4[2];
    ppvVar2 = ppvVar3 + 3;
  } while (ppvVar5 != apvStack8);
  ppvVar3[3] = *ppvVar5;
  ppvVar3[4] = ppvVar4[4];
  poVar1 = &unknown_object_animation_controller;
  ppvVar5 = apvStack232;
  do {
    ppvVar2 = ppvVar5;
    poVar6 = poVar1;
    *ppvVar2 = poVar6->ptranimation;
    ppvVar2[1] = *(void **)&poVar6->offsettocurcmd;
    ppvVar2[2] = (void *)poVar6->imagenum;
    poVar1 = (object_animation_controller *)&poVar6->rotation;
    ppvVar5 = ppvVar2 + 3;
  } while ((object_animation_controller *)&poVar6->rotation !=
           (object_animation_controller *)&unknown_object_animation_controller.startcolorshift);
  *(f32 *)(ppvVar2 + 3) = unknown_object_animation_controller.startcolorshift;
  ppvVar2[4] = (void *)poVar6->curzoomx;
  ppvVar5 = apvStack232;
  ppvVar2 = (void **)&DAT_80075c10;
  do {
    ppvVar4 = ppvVar2;
    ppvVar3 = ppvVar5;
    ppvVar5 = ppvVar3 + 3;
    *ppvVar4 = *ppvVar3;
    ppvVar4[1] = ppvVar3[1];
    ppvVar4[2] = ppvVar3[2];
    ppvVar2 = ppvVar4 + 3;
  } while (ppvVar5 != apvStack124);
  ppvVar4[3] = *ppvVar5;
  ppvVar4[4] = ppvVar3[4];
  poVar1 = &taser_object_animation_controller;
  ppvVar5 = apvStack348;
  do {
    ppvVar2 = ppvVar5;
    poVar6 = poVar1;
    *ppvVar2 = poVar6->ptranimation;
    ppvVar2[1] = *(void **)&poVar6->offsettocurcmd;
    ppvVar2[2] = (void *)poVar6->imagenum;
    poVar1 = (object_animation_controller *)&poVar6->rotation;
    ppvVar5 = ppvVar2 + 3;
  } while ((object_animation_controller *)&poVar6->rotation !=
           (object_animation_controller *)&taser_object_animation_controller.startcolorshift);
  *(f32 *)(ppvVar2 + 3) = taser_object_animation_controller.startcolorshift;
  ppvVar2[4] = (void *)poVar6->curzoomx;
  ppvVar5 = apvStack348;
  ppvVar2 = (void **)&DAT_80075c88;
  do {
    ppvVar4 = ppvVar2;
    ppvVar3 = ppvVar5;
    ppvVar5 = ppvVar3 + 3;
    *ppvVar4 = *ppvVar3;
    ppvVar4[1] = ppvVar3[1];
    ppvVar4[2] = ppvVar3[2];
    ppvVar2 = ppvVar4 + 3;
  } while (ppvVar5 != apvStack240);
  ppvVar4[3] = *ppvVar5;
  ppvVar4[4] = ppvVar3[4];
  return;
}



void initialize_80071E00_to_80071E78(void)

{
  float *pfVar1;
  
  DAT_80071e00 = 0;
  DAT_80071e04 = 0;
  pfVar1 = (float *)buffer_80071e08;
  do {
    pfVar1 = pfVar1 + 4;
    pfVar1[1] = 0.00000000;
    pfVar1[2] = 0.00000000;
    pfVar1[3] = 0.00000000;
    *pfVar1 = 0.00000000;
    pfVar1 = pfVar1;
  } while (pfVar1 != &gas_damage_flag);
  return;
}



int load_proptype(u8 param_1)

{
  u8 uVar1;
  undefined8 uVar2;
  int *object;
  int iVar3;
  
  iVar3 = 0;
  if (ptr_setup_objects != NULL) {
    uVar1 = ptr_setup_objects[3];
    object = (int *)ptr_setup_objects;
    while (uVar1 != '0') {
      if (param_1 == uVar1) {
        iVar3 += 1;
      }
      uVar2 = get_size_of_setup_object_type(object);
      object = object + (int)uVar2;
      uVar1 = *(u8 *)((int)object + 3);
    }
  }
  return iVar3;
}



void proc_7F001BD4(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  
  fVar2 = param_1[0xb];
  fVar5 = param_1[0xc];
  fVar10 = param_1[0xd];
  fVar9 = param_1[0xe];
  fVar3 = param_1[0xf];
  fVar6 = param_1[0x10];
  fVar7 = param_1[4] * param_1[8] - param_1[7] * param_1[5];
  fVar4 = param_1[5] * param_1[6] - param_1[8] * param_1[3];
  fVar8 = param_1[3] * param_1[7] - param_1[6] * param_1[4];
  fVar1 = sqrtf(fVar8 * fVar8 + fVar7 * fVar7 + fVar4 * fVar4);
  fVar1 = 1.00000000 / fVar1;
  fVar3 = fVar3 + fVar6;
  fVar2 = fVar2 + fVar5;
  fVar10 = fVar10 + fVar9;
  *param_2 = (param_1[6] * fVar3 + fVar2 * fVar7 * fVar1 + fVar10 * param_1[3]) * 0.50000000 +
             *param_1;
  param_2[1] = (param_1[7] * fVar3 + fVar2 * fVar4 * fVar1 + fVar10 * param_1[4]) * 0.50000000 +
               param_1[1];
  param_2[2] = (param_1[8] * fVar3 + fVar2 * fVar8 * fVar1 + fVar10 * param_1[5]) * 0.50000000 +
               param_1[2];
  return;
}



void prepare_load_objects(undefined8 param_1,ushort *param_2)

{
  ushort uVar1;
  uint uVar2;
  bool bVar3;
  ulonglong uVar4;
  int instancecontroller;
  GUARDdata *pGVar6;
  float *pfVar7;
  longlong lVar5;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined *puVar8;
  float *pfVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  f32 extraout_f12_02;
  f32 extraout_f12_03;
  f32 extraout_f12_04;
  f32 extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  f32 extraout_f12_10;
  f32 extraout_f12_11;
  f32 extraout_f12_12;
  f32 scale;
  f32 extraout_f12_13;
  f32 scale_00;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fStack160;
  object_standard *poStack152;
  float fStack120;
  float fStack116;
  float fStack112;
  float afStack108 [16];
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  undefined4 auStack24 [4];
  int iStack8;
  
  pfVar9 = NULL;
  iStack8 = (int)(short)param_2[2];
  load_model(iStack8);
  *(float *)(param_2 + 0x3a) = (float)*(int *)(param_2 + 0x3a) / 65536.00000000;
  uVar4 = get_num_players();
  fVar10 = extraout_f12;
  fVar12 = extraout_f14;
  if ((longlong)uVar4 < 2) {
LAB_7f001e90:
    uVar2 = *(uint *)(param_2 + 4);
  }
  else {
    instancecontroller = get_scenario();
    uVar4 = SEXT48(instancecontroller);
    if ((uVar4 == 2) && (param_2[2] == 0x14d)) {
      bVar3 = false;
      fVar10 = extraout_f12_00;
      fVar12 = extraout_f14_00;
    }
    else {
      instancecontroller = get_scenario();
      uVar4 = SEXT48(instancecontroller);
      bVar3 = true;
      fVar10 = extraout_f12_01;
      fVar12 = extraout_f14_01;
      if ((uVar4 == 3) && (fVar10 = extraout_f12_01, fVar12 = extraout_f14_01, param_2[2] == 0xd0))
      {
        bVar3 = false;
        fVar10 = extraout_f12_01;
        fVar12 = extraout_f14_01;
      }
    }
    if (bVar3) {
      *(byte *)(param_2 + 1) = *(byte *)(param_2 + 1) | 4;
      goto LAB_7f001e90;
    }
    uVar2 = *(uint *)(param_2 + 4);
  }
  if ((uVar2 & 0x8000) != 0) {
    if (*(char *)((int)param_2 + 3) == '\b') {
      proc_7F051DD8((int)param_2,(ushort **)PitemZ_entries[iStack8].header);
      instancecontroller = *(int *)(param_2 + 10);
      scale_00 = extraout_f12_02;
    }
    else {
      proc_7F0406F8((int)param_2,(ushort **)PitemZ_entries[iStack8].header);
      instancecontroller = *(int *)(param_2 + 10);
      scale_00 = extraout_f12_03;
    }
    set_obj_instance_controller_scale(instancecontroller,scale_00);
    return;
  }
  if ((uVar2 & 0x4000) != 0) {
    pGVar6 = check_if_guardnum_loaded_get_ptr_GUARDdata(param_2[3]);
    if (pGVar6 == NULL) {
      return;
    }
    if (pGVar6->POSdata_pointer == 0) {
      return;
    }
    if (pGVar6->MODELdata_pointer == 0) {
      return;
    }
    if (*(char *)((int)param_2 + 3) == '\b') {
      puVar8 = proc_7F051DD8((int)param_2,(ushort **)PitemZ_entries[iStack8].header);
      scale_00 = extraout_f12_04;
    }
    else {
      puVar8 = proc_7F0406F8((int)param_2,(ushort **)PitemZ_entries[iStack8].header);
      scale_00 = extraout_f12_05;
    }
    set_obj_instance_controller_scale(*(int *)(param_2 + 10),scale_00);
    proc_7F03A5A4((int)puVar8,pGVar6->POSdata_pointer);
    return;
  }
  uVar1 = param_2[3];
  if ((short)uVar1 < 10000) {
    pfVar7 = (float *)(ptr_0xxxpresets + (int)(short)uVar1 * 0x2c);
    proc_7F059908(afStack108,fVar10,fVar12,0.00000000,0.00000000,0.00000000,-pfVar7[6],-pfVar7[7],
                  -pfVar7[8],pfVar7[3]);
    fStack40 = *pfVar7;
    fStack36 = pfVar7[1];
    fStack32 = pfVar7[2];
    if ((*(uint *)(param_2 + 4) & 2) == 0) {
      fStack120 = *pfVar7;
      fStack116 = pfVar7[1];
      fStack112 = pfVar7[2];
    }
    else {
      fStack120 = *pfVar7;
      fStack116 = pfVar7[1];
      fStack112 = pfVar7[2];
    }
    fStack44 = pfVar7[10];
    fVar10 = extraout_f12_06;
  }
  else {
    puVar8 = ptr_2xxxpresets + (int)(short)uVar1 * 0x44;
    pfVar9 = (float *)(puVar8 + -680000);
    proc_7F059908(afStack108,fVar10,fVar12,0.00000000,0.00000000,0.00000000,
                  -*(float *)(puVar8 + -0xa6028),-*(float *)(puVar8 + -0xa6024),
                  -*(float *)(puVar8 + -0xa6020),*(float *)(puVar8 + -0xa6034));
    if ((*(uint *)(param_2 + 6) & 1) == 0) {
      proc_7F001BD4(pfVar9,&fStack40);
      fStack120 = *(float *)(puVar8 + -0xa6034) *
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 +
                  fStack40;
      fStack116 = *(float *)(puVar8 + -0xa6030) *
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 +
                  fStack36;
      fStack112 = *(float *)(puVar8 + -0xa602c) *
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 +
                  fStack32;
      fStack44 = *(float *)(puVar8 + -0xa6018);
      proc_7F0B0BE4((int *)&fStack44,extraout_f12_07,extraout_f14_02,*pfVar9,
                    *(float *)(puVar8 + -0xa6038));
      fVar10 = extraout_f12_08;
      if (uVar4 == 0) {
        fStack40 = *pfVar9;
        fStack36 = *(float *)(puVar8 + -0xa603c);
        fStack32 = *(float *)(puVar8 + -0xa6038);
        fStack44 = *(float *)(puVar8 + -0xa6018);
        fVar10 = extraout_f12_08;
      }
    }
    else {
      fStack40 = *pfVar9;
      fStack36 = *(float *)(puVar8 + -0xa603c);
      fStack32 = *(float *)(puVar8 + -0xa6038);
      fStack44 = *(float *)(puVar8 + -0xa6018);
      proc_7F001BD4(pfVar9,&fStack120);
      fStack120 = fStack120 +
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 *
                  *(float *)(puVar8 + -0xa6034);
      fStack116 = fStack116 +
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 *
                  *(float *)(puVar8 + -0xa6030);
      fStack112 = fStack112 +
                  (*(float *)(puVar8 + -0xa600c) - *(float *)(puVar8 + -0xa6008)) * 0.50000000 *
                  *(float *)(puVar8 + -0xa602c);
      fVar10 = extraout_f12_09;
    }
  }
  lVar5 = proc_7F056850(&fStack40,(longlong)(int)fStack44,fVar10,NULL,auStack24);
  if (lVar5 == 0) {
    return;
  }
  if (*(char *)((int)param_2 + 3) == '\b') {
    poStack152 = (object_standard *)
                 proc_7F051DD8((int)param_2,(ushort **)PitemZ_entries[iStack8].header);
    scale_00 = extraout_f12_10;
  }
  else {
    poStack152 = (object_standard *)proc_7F04071C((int)param_2);
    scale_00 = extraout_f12_11;
  }
  if (pfVar9 == NULL) {
    instancecontroller = *(int *)(param_2 + 10);
    goto LAB_7f002698;
  }
  instancecontroller = proc_7F040078((int)param_2);
  scale_00 = extraout_f12_12;
  if (instancecontroller != 0) {
    fStack160 = 1.00000000;
    uVar2 = *(uint *)(param_2 + 4);
    if ((uVar2 & 0x30) != 0) {
      fVar12 = *(float *)(instancecontroller + 4);
      fVar10 = *(float *)(instancecontroller + 8);
      if (fVar12 < fVar10) {
        if ((uVar2 & 2) == 0) {
          fStack160 = (pfVar9[0xc] - pfVar9[0xb]) /
                      ((fVar10 - fVar12) * *(float *)(*(int *)(param_2 + 10) + 0x14));
        }
        else {
          fStack160 = (pfVar9[0xc] - pfVar9[0xb]) /
                      ((fVar10 - fVar12) * *(float *)(*(int *)(param_2 + 10) + 0x14));
        }
      }
    }
    fVar10 = 1.00000000;
    fVar12 = 1.00000000;
    if ((uVar2 & 0x50) != 0) {
      fVar13 = *(float *)(instancecontroller + 0xc);
      fVar11 = *(float *)(instancecontroller + 0x10);
      fVar10 = 1.00000000;
      fVar12 = 1.00000000;
      if (fVar13 < fVar11) {
        if ((uVar2 & 2) == 0) {
          fVar10 = (pfVar9[0xe] - pfVar9[0xd]) /
                   ((fVar11 - fVar13) * *(float *)(*(int *)(param_2 + 10) + 0x14));
          fVar12 = 1.00000000;
        }
        else {
          fVar10 = 1.00000000;
          fVar12 = (pfVar9[0x10] - pfVar9[0xf]) /
                   ((fVar11 - fVar13) * *(float *)(*(int *)(param_2 + 10) + 0x14));
        }
      }
    }
    if ((uVar2 & 0x90) != 0) {
      fVar13 = *(float *)(instancecontroller + 0x14);
      fVar11 = *(float *)(instancecontroller + 0x18);
      if (fVar13 < fVar11) {
        if ((uVar2 & 2) == 0) {
          fVar12 = (pfVar9[0x10] - pfVar9[0xf]) /
                   ((fVar11 - fVar13) * *(float *)(*(int *)(param_2 + 10) + 0x14));
        }
        else {
          fVar10 = (pfVar9[0xe] - pfVar9[0xd]) /
                   ((fVar11 - fVar13) * *(float *)(*(int *)(param_2 + 10) + 0x14));
        }
      }
    }
    fVar11 = fVar10;
    if (fStack160 <= fVar10) {
      fVar11 = fStack160;
    }
    fVar13 = fVar12;
    if (fVar11 <= fVar12) {
      fVar13 = fVar11;
    }
    fVar11 = fVar10;
    if (fVar10 <= fStack160) {
      fVar11 = fStack160;
    }
    fVar14 = fVar12;
    if (fVar12 <= fVar11) {
      fVar14 = fVar11;
    }
    fVar11 = fVar13;
    fVar16 = fVar13;
    if ((uVar2 & 0x10) == 0) {
      fVar13 = fStack160;
      if ((uVar2 & 0x20) == 0) {
        if ((uVar2 & 2) == 0) {
          fVar13 = fVar14;
          if (*(float *)(instancecontroller + 4) != *(float *)(instancecontroller + 8)) {
            fVar13 = fStack160;
          }
        }
        else {
          fVar13 = fVar14;
          if (*(float *)(instancecontroller + 4) != *(float *)(instancecontroller + 8)) {
            fVar13 = fStack160;
          }
        }
      }
      fVar15 = fVar10;
      fVar17 = fVar12;
      if ((uVar2 & 0x40) == 0) {
        if ((uVar2 & 2) == 0) {
          fVar15 = fVar14;
          fVar17 = fVar12;
          if (*(float *)(instancecontroller + 0xc) != *(float *)(instancecontroller + 0x10)) {
            fVar15 = fVar10;
            fVar17 = fVar12;
          }
        }
        else {
          fVar15 = fVar10;
          fVar17 = fVar14;
          if (*(float *)(instancecontroller + 0xc) != *(float *)(instancecontroller + 0x10)) {
            fVar15 = fVar10;
            fVar17 = fVar12;
          }
        }
      }
      fVar11 = fVar15;
      fVar16 = fVar17;
      if ((uVar2 & 0x80) != 0) goto LAB_7f0025fc;
      if ((uVar2 & 2) == 0) {
        fVar11 = fVar15;
        fVar16 = fVar14;
        if (*(float *)(instancecontroller + 0x14) == *(float *)(instancecontroller + 0x18))
        goto LAB_7f0025fc;
        fVar13 = fVar13 / fVar14;
      }
      else {
        fVar11 = fVar14;
        fVar16 = fVar17;
        if (*(float *)(instancecontroller + 0x14) == *(float *)(instancecontroller + 0x18))
        goto LAB_7f0025fc;
        fVar13 = fVar13 / fVar14;
      }
    }
    else {
LAB_7f0025fc:
      fVar13 = fVar13 / fVar14;
      fVar15 = fVar11;
      fVar17 = fVar16;
    }
    fVar15 = fVar15 / fVar14;
    fVar17 = fVar17 / fVar14;
    if (((fVar13 <= flt_8004EEB4) || (fVar15 <= flt_8004EEB4)) || (fVar17 <= flt_8004EEB4)) {
      fVar13 = 1.00000000;
      fVar15 = 1.00000000;
      fVar17 = fVar13;
    }
    proc_7F0589B4(fVar13,extraout_a0,afStack108);
    proc_7F0589E4(fVar15,extraout_a0_00,(int)afStack108);
    proc_7F058A4C(fVar17,extraout_a0_01,(int)afStack108);
    set_obj_instance_controller_scale(*(int *)(param_2 + 10),scale);
    scale_00 = extraout_f12_13;
  }
  instancecontroller = *(int *)(param_2 + 10);
LAB_7f002698:
  set_obj_instance_controller_scale(instancecontroller,scale_00);
  matrix_multiply_A1_by_F12(*(float *)(*(int *)(param_2 + 10) + 0x14),extraout_a0_02,afStack108);
  if ((*(uint *)(param_2 + 4) & 2) == 0) {
    proc_7F04088C();
  }
  else {
    proc_7F040BA0();
  }
  proc_7F056CA0((int)param_2);
  set_current_objposdata_plus_0x28(poStack152);
  set_stateflag_0x04_for_posdata((int)poStack152);
  return;
}



// WARNING: Switch with 1 destination removed at 0x7f002854 : 8 cases all go to same destination

void expand_08_obj_set_guard_MP_weapons(int param_1,ushort *param_2)

{
  char cVar1;
  byte bVar2;
  float fVar3;
  GUARDdata *pGVar5;
  uint uVar6;
  ulonglong uVar4;
  int iVar7;
  int iVar8;
  undefined4 *puVar9;
  float fVar10;
  ushort uVar11;
  
  if ((*(uint *)(param_2 + 4) & 0x4000) != 0) {
    pGVar5 = check_if_guardnum_loaded_get_ptr_GUARDdata(param_2[3]);
    if (pGVar5 == NULL) {
      return;
    }
    if (pGVar5->POSdata_pointer == 0) {
      return;
    }
    if (pGVar5->MODELdata_pointer == 0) {
      return;
    }
    uVar6 = proc_7F0927BC(0x1c);
    if ((uVar6 != 0) && (true)) {
      switch(*(undefined *)(param_2 + 0x40)) {
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
      case 8:
      case 9:
      case 10:
      case 0xb:
      case 0xc:
      case 0xd:
      case 0xe:
      case 0xf:
      case 0x10:
      case 0x11:
      case 0x12:
      case 0x13:
      case 0x14:
      case 0x15:
      case 0x16:
      case 0x17:
      case 0x1d:
      case 0x1e:
      case 0x1f:
        *(undefined *)(param_2 + 0x40) = 0x19;
        param_2[2] = 0xd3;
        *param_2 = 0x100;
      }
    }
    set_weapon_model_generated_thrown_object((int)*(char *)(param_2 + 0x40));
    proc_7F052030(param_2,(int)pGVar5);
    return;
  }
  uVar4 = get_num_players();
  iVar7 = 1;
  if (1 < (longlong)uVar4) {
    lastmpweaponnum = -1;
    bVar2 = *(byte *)(param_2 + 0x40);
    if (bVar2 < 0x59) {
      if (bVar2 != 0x58) {
        cVar1 = *(char *)(param_2 + 0x40);
        goto LAB_7f002970;
      }
      iVar8 = get_scenario();
      iVar7 = 1;
      if (iVar8 != 2) {
        iVar7 = 0;
      }
    }
    else {
      if ((uint)bVar2 - 0xf0 < 8) {
        iVar7 = get_ptr_mp_weapon_set_data();
        lastmpweaponnum = (uint)*(byte *)(param_2 + 0x40) - 0xf0;
        puVar9 = (undefined4 *)(iVar7 + lastmpweaponnum * 0x18);
        *(char *)(param_2 + 0x40) = (char)*puVar9;
        param_2[2] = (ushort)puVar9[1];
        fVar10 = (float)puVar9[2] * 256.00000000;
        if (false) {
          fVar3 = ROUND(fVar10);
        }
        else {
          fVar3 = FLOOR(fVar10);
        }
        uVar11 = (ushort)(int)fVar3;
        if (false) {
          if (false) {
            fVar10 = ROUND(fVar10 - 2147483648.00000000);
          }
          else {
            fVar10 = FLOOR(fVar10 - 2147483648.00000000);
          }
          if (false) goto LAB_7f002924;
          uVar11 = (ushort)(int)fVar10;
        }
        else {
          if ((int)fVar3 < 0) {
LAB_7f002924:
            uVar11 = 0xffff;
          }
        }
        *param_2 = uVar11;
        iVar7 = puVar9[5];
      }
    }
  }
  cVar1 = *(char *)(param_2 + 0x40);
LAB_7f002970:
  if ((cVar1 != '\0') && (iVar7 != 0)) {
    set_weapon_model_generated_thrown_object((int)cVar1);
    prepare_load_objects((longlong)param_1,param_2);
  }
  return;
}



void expand_type_0D_MP_weapon_expansion_routine(undefined8 param_1,ushort *param_2)

{
  GUARDdata *pGVar1;
  
  if ((*(uint *)(param_2 + 4) & 0x4000) == 0) {
    prepare_load_objects(param_1,param_2);
  }
  else {
    pGVar1 = check_if_guardnum_loaded_get_ptr_GUARDdata(param_2[3]);
    if (((pGVar1 != NULL) && (pGVar1->POSdata_pointer != 0)) && (pGVar1->MODELdata_pointer != 0)) {
      proc_7F051084(param_2,(int)pGVar1);
    }
  }
  return;
}



void expand_type_04_object(undefined8 param_1,ushort *param_2)

{
  prepare_load_objects(param_1,param_2);
  return;
}



void expand_type_06_object(undefined8 param_1,ushort *param_2)

{
  int iVar1;
  float *pfVar2;
  undefined8 extraout_a0;
  float fVar3;
  undefined4 uVar4;
  float fVar5;
  float extraout_f12;
  float extraout_f14;
  float fStack20;
  float fStack16;
  float fStack12;
  float *pfStack8;
  
  prepare_load_objects(param_1,param_2);
  iVar1 = *(int *)(param_2 + 0x40);
  if (-1 < iVar1) {
    pfVar2 = *(float **)(**(int **)(*(int *)(*(int *)(param_2 + 10) + 8) + 8) + 4);
    if (iVar1 < 10000) {
      pfStack8 = (float *)(ptr_0xxxpresets + iVar1 * 0x2c);
    }
    else {
      pfStack8 = (float *)(ptr_2xxxpresets + iVar1 * 0x44 + -680000);
    }
    fStack20 = *pfVar2;
    fStack16 = pfVar2[1];
    fStack12 = pfVar2[2];
    proc_7F0583D8((float *)(param_2 + 0xc),&fStack20);
    fStack20 = fStack20 + *(float *)(*(int *)(param_2 + 8) + 8);
    fStack16 = fStack16 + *(float *)(*(int *)(param_2 + 8) + 0xc);
    fStack12 = fStack12 + *(float *)(*(int *)(param_2 + 8) + 0x10);
    proc_7F059908((float *)(param_2 + 0x42),extraout_f12,extraout_f14,0.00000000,0.00000000,
                  0.00000000,fStack20 - *pfStack8,fStack16 - pfStack8[1],fStack12 - pfStack8[2],
                  0.00000000);
    matrix_multiply_A1_by_F12
              (*(float *)(*(int *)(param_2 + 10) + 0x14),extraout_a0,(float *)(param_2 + 0x42));
    fVar3 = flt_8004EF50;
    if (*(int *)(param_2 + 0x72) == 0) {
      fVar5 = (float)*(int *)(param_2 + 0x66) * flt_8004EF50;
      *(undefined4 *)(param_2 + 0x72) = 1;
      *(float *)(param_2 + 0x66) = fVar5 / 65536.00000000;
      *(float *)(param_2 + 0x68) = ((float)*(int *)(param_2 + 0x68) * fVar3) / 65536.00000000;
      *(float *)(param_2 + 0x74) = (float)*(int *)(param_2 + 0x74);
      *(float *)(param_2 + 0x6e) = ((float)*(int *)(param_2 + 0x6e) * fVar3) / 65536.00000000;
      uVar4 = *(undefined4 *)(param_2 + 0x66);
    }
    else {
      uVar4 = *(undefined4 *)(param_2 + 0x66);
    }
    *(undefined4 *)(param_2 + 0x6a) = 0;
    *(undefined4 *)(param_2 + 0x6c) = 0;
    *(undefined4 *)(param_2 + 100) = uVar4;
    fVar3 = convert_angle_using_inverse((f32)(fStack20 - *pfStack8),(f32)(fStack12 - pfStack8[2]));
    *(float *)(param_2 + 0x62) = fVar3;
    *(undefined4 *)(param_2 + 0x70) = 0;
  }
  return;
}



void expand_type_0D_object_autoturret(undefined8 param_1,ushort *param_2)

{
  int iVar1;
  undefined *puVar2;
  float *pfVar3;
  float vector2;
  float fVar4;
  float fVar5;
  float vector1;
  float vector2_00;
  
  prepare_load_objects(param_1,param_2);
  vector2 = flt_8004EF54;
  fVar4 = (float)*(int *)(param_2 + 0x52) * flt_8004EF54;
  *(undefined4 *)(param_2 + 0x56) = 0;
  *(undefined4 *)(param_2 + 0x5c) = 0xffffffff;
  *(undefined4 *)(param_2 + 0x5e) = 0xffffffff;
  *(undefined4 *)(param_2 + 0x60) = 0xffffffff;
  *(undefined4 *)(param_2 + 0x62) = 0;
  *(undefined4 *)(param_2 + 100) = 0;
  *(undefined4 *)(param_2 + 0x48) = 0;
  *(undefined4 *)(param_2 + 0x4a) = 0;
  *(undefined4 *)(param_2 + 0x42) = 0;
  *(undefined4 *)(param_2 + 0x4e) = 0;
  *(undefined4 *)(param_2 + 0x50) = 0;
  *(undefined4 *)(param_2 + 0x4c) = 0;
  *(undefined4 *)(param_2 + 0x58) = 0;
  *(undefined4 *)(param_2 + 0x5a) = 0;
  *(float *)(param_2 + 0x52) = fVar4 / 65536.00000000;
  *(float *)(param_2 + 0x54) = ((float)*(int *)(param_2 + 0x54) * 100.00000000) / 65536.00000000;
  *(float *)(param_2 + 0x44) = ((float)*(int *)(param_2 + 0x44) * vector2) / 65536.00000000;
  *(float *)(param_2 + 0x46) = ((float)*(int *)(param_2 + 0x46) * vector2) / 65536.00000000;
  puVar2 = (undefined *)allocate_bytes_in_bank(0x30,4);
  *(undefined **)(param_2 + 0x66) = puVar2;
  *puVar2 = 0xff;
  iVar1 = *(int *)(param_2 + 0x40);
  *(undefined4 *)(param_2 + 0x68) = 0;
  *(undefined4 *)(param_2 + 0x6a) = 0;
  if (-1 < iVar1) {
    if (iVar1 < 10000) {
      pfVar3 = (float *)(ptr_0xxxpresets + iVar1 * 0x2c);
    }
    else {
      pfVar3 = (float *)(ptr_2xxxpresets + iVar1 * 0x44 + -680000);
    }
    iVar1 = *(int *)(param_2 + 8);
    fVar4 = pfVar3[1];
    fVar5 = *(float *)(iVar1 + 0xc);
    vector1 = *pfVar3 - *(float *)(iVar1 + 8);
    vector2_00 = pfVar3[2] - *(float *)(iVar1 + 0x10);
    vector2 = convert_angle_using_inverse((f32)vector1,(f32)vector2_00);
    *(float *)(param_2 + 0x42) = vector2;
    vector2 = sqrtf(vector1 * vector1 + vector2_00 * vector2_00);
    vector2 = convert_angle_using_inverse((f32)(fVar4 - fVar5),(f32)vector2);
    *(float *)(param_2 + 0x4c) = vector2;
  }
  return;
}



void expand_type_0C_object(undefined8 param_1,ushort *param_2)

{
  prepare_load_objects(param_1,param_2);
  return;
}



void expand_type_0A_object(int param_1,ushort *param_2,int param_3)

{
  ushort uVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  int iVar5;
  ulonglong uVar4;
  undefined *puVar6;
  int iVar7;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined4 *puVar8;
  undefined4 *puVar9;
  f32 scale;
  
  puVar2 = &DAT_80075b98;
  puVar3 = (undefined4 *)(param_2 + 0x40);
  do {
    puVar8 = puVar3;
    puVar9 = puVar2;
    *puVar8 = *puVar9;
    puVar8[1] = puVar9[1];
    puVar8[2] = puVar9[2];
    puVar2 = puVar9 + 3;
    puVar3 = puVar8 + 3;
  } while (puVar9 + 3 != (undefined4 *)0x80075c04);
  puVar8[3] = uRam80075c04;
  puVar8[4] = puVar9[4];
  set_ptr_monitor_img_to_obj_ani_slot
            ((undefined4 *)(param_2 + 0x40),*(undefined4 *)(param_2 + 0x7e));
  if (((short)param_2[3] < 0) && ((*(uint *)(param_2 + 4) & 0x8000) == 0)) {
    uVar1 = param_2[2];
    iVar5 = proc_7F056A88(*(int *)(param_2 + 0x7a) + param_3);
    load_model((int)(short)uVar1);
    *(float *)(param_2 + 0x3a) = (float)*(int *)(param_2 + 0x3a) / 65536.00000000;
    uVar4 = get_num_players();
    if (1 < (longlong)uVar4) {
      *(byte *)(param_2 + 1) = *(byte *)(param_2 + 1) | 4;
    }
    puVar6 = proc_7F04071C((int)param_2);
    iVar7 = proc_7F03FE98();
    *(int *)(param_2 + 0x36) = iVar7;
    if (puVar6 == NULL) {
      iVar5 = *(int *)(param_2 + 4);
    }
    else {
      if (iVar7 == 0) {
        iVar5 = *(int *)(param_2 + 4);
      }
      else {
        *(uint *)(param_2 + 0x32) = *(uint *)(param_2 + 0x32) | 0x40;
        set_obj_instance_controller_scale(*(int *)(param_2 + 10),scale);
        *(undefined4 *)(*(int *)(param_2 + 10) + 0x18) = *(undefined4 *)(iVar5 + 0x14);
        iVar7 = *(int *)(param_2 + 0x7c);
        if (iVar7 == 0) {
          *(undefined4 *)(*(int *)(param_2 + 10) + 0x1c) =
               **(undefined4 **)(*(int *)(*(int *)(iVar5 + 0x14) + 8) + 8);
        }
        else {
          if (iVar7 == 1) {
            *(undefined4 *)(*(int *)(param_2 + 10) + 0x1c) =
                 *(undefined4 *)(*(int *)(*(int *)(*(int *)(iVar5 + 0x14) + 8) + 8) + 4);
          }
          else {
            if (iVar7 == 2) {
              *(undefined4 *)(*(int *)(param_2 + 10) + 0x1c) =
                   *(undefined4 *)(*(int *)(*(int *)(*(int *)(iVar5 + 0x14) + 8) + 8) + 8);
            }
            else {
              *(undefined4 *)(*(int *)(param_2 + 10) + 0x1c) =
                   *(undefined4 *)(*(int *)(*(int *)(*(int *)(iVar5 + 0x14) + 8) + 8) + 0xc);
            }
          }
        }
        proc_7F03A5A4((int)puVar6,*(int *)(iVar5 + 0x10));
        proc_7F058570(flt_8004EF58,extraout_a0,(undefined4 *)(*(int *)(param_2 + 0x36) + 4));
        matrix_multiply_A1_by_F12
                  (*(float *)(*(int *)(param_2 + 10) + 0x14) /
                   *(float *)(*(int *)(iVar5 + 0x14) + 0x14),extraout_a0_00,
                   (float *)(*(int *)(param_2 + 0x36) + 4));
        iVar5 = *(int *)(param_2 + 4);
      }
    }
  }
  else {
    prepare_load_objects((longlong)param_1,param_2);
    iVar5 = *(int *)(param_2 + 4);
  }
  if ((iVar5 << 1 < 0) && (iVar5 = *(int *)(param_2 + 8), iVar5 != 0)) {
    *(byte *)(iVar5 + 1) = *(byte *)(iVar5 + 1) | 1;
  }
  return;
}



void expand_type_0B_object(int param_1,ushort *param_2)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  
  puVar1 = &DAT_80075b98;
  puVar2 = (undefined4 *)(param_2 + 0x40);
  do {
    puVar3 = puVar2;
    puVar4 = puVar1;
    *puVar3 = *puVar4;
    puVar3[1] = puVar4[1];
    puVar3[2] = puVar4[2];
    puVar1 = puVar4 + 3;
    puVar2 = puVar3 + 3;
  } while (puVar4 + 3 != (undefined4 *)0x80075c04);
  puVar3[3] = uRam80075c04;
  puVar3[4] = puVar4[4];
  set_ptr_monitor_img_to_obj_ani_slot
            ((undefined4 *)(param_2 + 0x40),(uint)*(byte *)(param_2 + 0x128));
  puVar1 = &DAT_80075b98;
  puVar2 = (undefined4 *)(param_2 + 0x7a);
  do {
    puVar4 = puVar2;
    puVar3 = puVar1;
    *puVar4 = *puVar3;
    puVar4[1] = puVar3[1];
    puVar4[2] = puVar3[2];
    puVar1 = puVar3 + 3;
    puVar2 = puVar4 + 3;
  } while (puVar3 + 3 != (undefined4 *)0x80075c04);
  puVar4[3] = uRam80075c04;
  puVar4[4] = puVar3[4];
  set_ptr_monitor_img_to_obj_ani_slot
            ((undefined4 *)(param_2 + 0x7a),(uint)*(byte *)((int)param_2 + 0x251));
  puVar1 = &DAT_80075b98;
  puVar2 = (undefined4 *)(param_2 + 0xb4);
  do {
    puVar3 = puVar2;
    puVar4 = puVar1;
    *puVar3 = *puVar4;
    puVar3[1] = puVar4[1];
    puVar3[2] = puVar4[2];
    puVar1 = puVar4 + 3;
    puVar2 = puVar3 + 3;
  } while (puVar4 + 3 != (undefined4 *)0x80075c04);
  puVar3[3] = uRam80075c04;
  puVar3[4] = puVar4[4];
  set_ptr_monitor_img_to_obj_ani_slot
            ((undefined4 *)(param_2 + 0xb4),(uint)*(byte *)(param_2 + 0x129));
  puVar1 = &DAT_80075b98;
  puVar2 = (undefined4 *)(param_2 + 0xee);
  do {
    puVar4 = puVar2;
    puVar3 = puVar1;
    *puVar4 = *puVar3;
    puVar4[1] = puVar3[1];
    puVar4[2] = puVar3[2];
    puVar1 = puVar3 + 3;
    puVar2 = puVar4 + 3;
  } while (puVar3 + 3 != (undefined4 *)0x80075c04);
  puVar4[3] = uRam80075c04;
  puVar4[4] = puVar3[4];
  set_ptr_monitor_img_to_obj_ani_slot
            ((undefined4 *)(param_2 + 0xee),(uint)*(byte *)((int)param_2 + 0x253));
  prepare_load_objects((longlong)param_1,param_2);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F00324C(void)

{
  byte bVar1;
  longlong in_v0;
  float *in_a0_lo;
  uint *in_a1_lo;
  uint *in_a2_lo;
  float *in_a3_lo;
  float extraout_f12;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar2;
  float *in_stack_00000010;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  proc_7F001BD4(in_a0_lo,&fStack32);
  fStack36 = in_a0_lo[10];
  proc_7F0B0BE4((int *)&fStack36,extraout_f12,extraout_f14,*in_a0_lo,in_a0_lo[2]);
  if (in_v0 == 0) {
    fStack36 = in_a0_lo[10];
    fStack32 = *in_a0_lo;
    fStack28 = in_a0_lo[1];
    fStack24 = in_a0_lo[2];
    fVar2 = in_a0_lo[4];
  }
  else {
    fVar2 = in_a0_lo[4];
  }
  fStack16 = fVar2 * in_a0_lo[8] - in_a0_lo[7] * in_a0_lo[5];
  fStack12 = in_a0_lo[5] * in_a0_lo[6] - in_a0_lo[8] * in_a0_lo[3];
  fStack8 = in_a0_lo[3] * in_a0_lo[7] - in_a0_lo[6] * in_a0_lo[4];
  fVar2 = sqrtf(fStack8 * fStack8 + fStack16 * fStack16 + fStack12 * fStack12);
  fVar2 = 1.00000000 / fVar2;
  fStack4 = fStack36;
  fStack16 = fStack16 * fVar2;
  fStack12 = fStack12 * fVar2;
  fStack8 = fStack8 * fVar2;
  *in_a3_lo = fStack16 * 50.00000000 + fStack32;
  in_a3_lo[1] = fStack28;
  in_a3_lo[2] = fStack8 * 50.00000000 + fStack24;
  proc_7F0B0BE4((int *)&fStack4,50.00000000,extraout_f14_00,fStack32,fStack24);
  *in_a1_lo = (uint)*(byte *)((int)fStack4 + 3);
  fStack4 = fStack36;
  *in_stack_00000010 = fStack32 - fStack16 * 50.00000000;
  in_stack_00000010[1] = fStack28;
  in_stack_00000010[2] = fStack24 - fStack8 * 50.00000000;
  proc_7F0B0BE4((int *)&fStack4,50.00000000,extraout_f14_01,fStack32,fStack24);
  bVar1 = *(byte *)((int)fStack4 + 3);
  *in_a2_lo = (uint)bVar1;
  if ((ulonglong)bVar1 == (longlong)(int)*in_a1_lo) {
    *in_a2_lo = 0xffffffff;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0034f0) overlaps instruction at (ram,0x7f0034ec)
// 
// WARNING: Could not reconcile some variable overlaps
// WARNING: Unknown calling convention yet parameter storage is locked

void expand_type_01_object(void)

{
  char cVar1;
  ulonglong uVar2;
  longlong lVar3;
  short sVar5;
  object_standard *poVar4;
  int instancecontroller;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  int *stdobject;
  int in_a2_lo;
  float *pfVar6;
  f32 fVar7;
  float fVar8;
  float fVar9;
  float scale;
  float fVar10;
  float extraout_f12;
  float extraout_f12_00;
  float fVar11;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  float fVar12;
  float fStack348;
  float fStack344;
  float fStack340;
  float afStack336 [16];
  float fStack272;
  undefined4 uStack268;
  float fStack264;
  float afStack260 [16];
  int *piStack196;
  float fStack192;
  undefined4 uStack188;
  float fStack184;
  PitemZ_header *pPStack180;
  float afStack172 [16];
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float afStack68 [3];
  float afStack56 [3];
  undefined4 uStack44;
  undefined4 uStack40;
  int iStack36;
  float fStack32;
  undefined4 uStack28;
  float fStack24;
  int *piStack16;
  int iStack8;
  
  iStack36 = -1;
  uStack40 = -1;
  uStack44 = -1;
  iStack8 = (int)*(short *)(stdobject + 1);
  uVar2 = load_model(iStack8);
  pfVar6 = (float *)(ptr_2xxxpresets + (int)*(short *)((int)stdobject + 6) * 0x44);
  if ((stdobject[2] << 3 < 0) || (stdobject[2] << 1 < 0)) {
    uVar2 = proc_7F00324C();
    if ((stdobject[2] << 3 < 0) && ((-1 < (longlong)uStack40 && (-1 < (longlong)uStack44)))) {
      iStack36 = proc_7F0B9CC8((longlong)uStack40,(longlong)uStack44,afStack56,afStack68);
      uVar2 = SEXT48(iStack36);
    }
  }
  scale = scale_1_0_item_related;
  if (scale_1_0_item_related == 1.00000000) {
    fVar9 = pfVar6[10];
    scale = scale_1_0_item_related;
  }
  else {
    if (iStack36 < 0) {
      pfVar6[0xb] = pfVar6[0xb] * scale_1_0_item_related;
      pfVar6[0xc] = pfVar6[0xc] * scale_1_0_item_related;
    }
    else {
      proc_7F0B96CC(iStack36,&fStack88);
      fVar7 = proc_7F0B4830();
      fStack76 = fStack76 * (float)fVar7;
      fVar9 = *pfVar6;
      scale = fStack80 * pfVar6[2] + fVar9 * fStack88 + pfVar6[1] * fStack84;
      if (scale_1_0_item_related < 1.00000000) {
        scale = (scale - fStack76) * (1.00000000 - scale_1_0_item_related);
        fStack104 = fVar9 - fStack88 * scale;
        fStack100 = pfVar6[1] - fStack84 * scale;
        fStack96 = pfVar6[2] - fStack80 * scale;
      }
      else {
        scale = (scale - fStack76) * (scale_1_0_item_related - 1.00000000);
        fStack104 = fStack88 * scale + fVar9;
        fStack100 = fStack84 * scale + pfVar6[1];
        fStack96 = fStack80 * scale + pfVar6[2];
      }
      fStack108 = pfVar6[10];
      proc_7F0B0BE4((int *)&fStack108,scale_1_0_item_related,fVar9,*pfVar6,pfVar6[2]);
      scale = extraout_f12;
      if (uVar2 != 0) {
        pfVar6[10] = fStack108;
        *pfVar6 = fStack104;
        pfVar6[1] = fStack100;
        pfVar6[2] = fStack96;
        pfVar6[0xb] = pfVar6[0xb] * scale_1_0_item_related;
        pfVar6[0xc] = pfVar6[0xc] * scale_1_0_item_related;
        scale = extraout_f12;
      }
    }
    fVar9 = pfVar6[10];
  }
  lVar3 = proc_7F056850(pfVar6,(longlong)(int)fVar9,scale,NULL,&fStack32);
  if (lVar3 == 0) {
    stdobject[4] = 0;
    return;
  }
  proc_7F059908(afStack172,extraout_f12_00,extraout_f14,0.00000000,0.00000000,0.00000000,-pfVar6[6],
                -pfVar6[7],-pfVar6[8],pfVar6[3]);
  pPStack180 = PitemZ_entries[iStack8].header;
  piStack196 = piStack16;
  fVar12 = pfVar6[0xb];
  fVar9 = pfVar6[0xc];
  fVar10 = pfVar6[0xd];
  fVar8 = pfVar6[0xe];
  scale = pfVar6[0xf];
  fStack340 = pfVar6[0x10];
  proc_7F058570(flt_8004EF5C,extraout_a0,afStack260);
  proc_7F058688(flt_8004EF60,extraout_a0_00,afStack336);
  proc_7F058068(afStack336,afStack260);
  proc_7F058068(afStack172,afStack260);
  proc_7F001BD4(pfVar6,&fStack192);
  instancecontroller = *(int *)(*(int *)(pPStack180->microcode_entry_num + 0x14) + 4);
  lVar3 = (longlong)instancecontroller;
  fVar11 = (fVar8 - fVar10) /
           (*(float *)(instancecontroller + 8) - *(float *)(instancecontroller + 4));
  fStack340 = fStack340 - scale;
  scale = fStack340 / (*(float *)(instancecontroller + 0x10) - *(float *)(instancecontroller + 0xc))
  ;
  fVar9 = (fVar9 - fVar12) /
          (*(float *)(instancecontroller + 0x18) - *(float *)(instancecontroller + 0x14));
  if (((fVar11 <= flt_8004EF64) || (scale <= flt_8004EF64)) || (fVar9 <= flt_8004EF64)) {
    fVar11 = 1.00000000;
    scale = fVar11;
    fVar9 = fVar11;
  }
  proc_7F0589B4(fVar11,extraout_a0_01,afStack260);
  proc_7F0589E4(scale,extraout_a0_02,(int)afStack260);
  proc_7F058A4C(fVar9,extraout_a0_03,(int)afStack260);
  fStack272 = fStack192;
  uStack268 = uStack188;
  fStack264 = fStack184;
  if ((stdobject[3] & 1U) == 0) {
    proc_7F0B0BE4((int *)&piStack196,extraout_f12_01,extraout_f14_00,fStack32,fStack24);
    if (lVar3 != 0) {
      piStack16 = piStack196;
      goto LAB_7f003978;
    }
    fStack192 = fStack32;
    fStack184 = fStack24;
    if ((stdobject[2] & 0x1000U) == 0) {
      sVar5 = *(short *)((int)stdobject + 0x9a);
    }
    else {
      sVar5 = *(short *)((int)stdobject + 0x9a);
    }
  }
  else {
    fStack192 = fStack32;
    uStack188 = uStack28;
    fStack184 = fStack24;
LAB_7f003978:
    sVar5 = *(short *)((int)stdobject + 0x9a);
  }
  if ((sVar5 == 4) || (sVar5 == 8)) {
    fStack348 = pfVar6[6] * fStack340;
    fStack344 = pfVar6[7] * fStack340;
    fStack340 = pfVar6[8] * fStack340;
  }
  else {
    fVar10 = fVar10 - fVar8;
    fStack348 = pfVar6[3] * fVar10;
    fStack344 = pfVar6[4] * fVar10;
    fStack340 = pfVar6[5] * fVar10;
  }
  *(float *)(stdobject + 0x21) = (float)stdobject[0x21] / 65536.00000000;
  *(float *)(stdobject + 0x22) = (float)stdobject[0x22] / 65536.00000000;
  *(float *)(stdobject + 0x23) = (float)stdobject[0x23] / 65536.00000000;
  *(float *)(stdobject + 0x24) = (float)stdobject[0x24] / 65536.00000000;
  *(float *)(stdobject + 0x25) = (float)stdobject[0x25] / 65536.00000000;
  poVar4 = (object_standard *)
           initialize_door(stdobject,(int *)&fStack192,(int)afStack260,piStack16,(int)&fStack348,
                           (int *)&fStack272);
  if (stdobject[2] << 3 < 0) {
    stdobject[0x3c] = iStack36;
    if (iStack36 < 0) {
      instancecontroller = poVar4->runtime_ptr_obj_instance_controller;
    }
    else {
      if ((float)stdobject[0x2d] == 0.00000000) {
        proc_7F0535C4((int)stdobject);
        instancecontroller = poVar4->runtime_ptr_obj_instance_controller;
      }
      else {
        instancecontroller = poVar4->runtime_ptr_obj_instance_controller;
      }
    }
  }
  else {
    instancecontroller = poVar4->runtime_ptr_obj_instance_controller;
  }
  *(undefined *)&poVar4->runtime_MATRIX5 = *(undefined *)(instancecontroller + 3);
  proc_7F03DD9C((int)poVar4,(ushort)*(byte *)(instancecontroller + 3));
  *(undefined *)((int)&poVar4->runtime_MATRIX5 + 1) = 0xff;
  *(undefined *)((int)&poVar4->runtime_MATRIX5 + 2) = 0xff;
  if ((-1 < stdobject[2] << 3) && (-1 < stdobject[2] << 1)) {
    instancecontroller = stdobject[5];
    goto LAB_7f003b5c;
  }
  if ((longlong)uStack40 == (ulonglong)*(byte *)(poVar4->runtime_ptr_obj_instance_controller + 3)) {
    if (-1 < uStack44) {
      *(undefined *)((int)&poVar4->runtime_MATRIX5 + 1) = (char)uStack44;
      proc_7F03DD9C((int)poVar4,uStack44._2_2_);
    }
LAB_7f003b48:
    cVar1 = *(char *)((int)&poVar4->runtime_MATRIX5 + 1);
  }
  else {
    if ((longlong)uStack40 < 0) goto LAB_7f003b48;
    *(undefined *)((int)&poVar4->runtime_MATRIX5 + 1) = (char)uStack40;
    proc_7F03DD9C((int)poVar4,uStack40._2_2_);
    cVar1 = *(char *)((int)&poVar4->runtime_MATRIX5 + 1);
  }
  if (cVar1 == -1) {
    instancecontroller = stdobject[5];
  }
  else {
    instancecontroller = stdobject[5];
  }
LAB_7f003b5c:
  if (instancecontroller != 0) {
    set_obj_instance_controller_scale(instancecontroller,(f32)scale);
  }
  set_current_objposdata_plus_0x28(poVar4);
  set_stateflag_0x04_for_posdata((int)poVar4);
  if (stdobject[0x20] != 0) {
    instancecontroller = proc_7F056A88(stdobject[0x20] + in_a2_lo);
    stdobject[0x32] = instancecontroller;
  }
  return;
}



void stage_loading_setup_objparse_cleanupafter(longlong param_1)

{
  char cVar1;
  ushort *partdesc;
  bool bVar2;
  PitemZ_header **ppPVar3;
  byte *pbVar6;
  p_itementry *ppVar7;
  ulonglong uVar4;
  undefined8 uVar5;
  int *objdata1;
  undefined *puVar8;
  int additionalentries;
  int iVar9;
  int iVar10;
  int objinst;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  int iVar18;
  int iVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  int iVar23;
  int iVar24;
  int iVar25;
  int iVar26;
  DIFFICULTY DVar27;
  GUARDdata *pGVar28;
  uint *puVar29;
  int *objdata2;
  short sVar30;
  int **ppiVar31;
  undefined4 *puVar32;
  undefined4 *puVar33;
  float *pfVar35;
  longlong lVar34;
  int *object;
  uint uVar36;
  LEVELID LVar37;
  undefined4 *puVar38;
  undefined4 *puVar39;
  f32 fVar40;
  float fVar41;
  float fVar42;
  f32 scale;
  float fStack408;
  float fStack372;
  float fStack368;
  float fStack364;
  float fStack360;
  float fStack356;
  float fStack352;
  float fStack304;
  float fStack292;
  undefined uStack268;
  undefined uStack267;
  uint uStack8;
  
  pbVar6 = check_token(1,aNochr);
  bVar2 = pbVar6 == NULL;
  if (bVar2) {
    pbVar6 = check_token(1,aNoprop);
    bVar2 = pbVar6 == NULL;
  }
  uStack8 = (uint)bVar2;
  pbVar6 = check_token(1,aNoobj);
  bVar2 = pbVar6 == NULL;
  if (bVar2) {
    pbVar6 = check_token(1,aNoprop_0);
    bVar2 = pbVar6 == NULL;
  }
  ppVar7 = PitemZ_entries;
  scale_1_0_item_related = 1.00000000;
  do {
    ppPVar3 = &ppVar7->header;
    ppVar7 = ppVar7 + 1;
    (*ppPVar3)->microcode_entry_num = 0;
  } while (ppVar7 < PitemZ_entries + 0x154);
  LVar37 = (LEVELID)param_1;
  if (param_1 < 0x3b) {
    puVar8 = *(undefined **)(&setup_text_pointers + LVar37 * 4);
    puVar38 = only_read_by_stageload;
    puVar32 = (undefined4 *)&uStack268;
    if (puVar8 != NULL) {
      do {
        puVar39 = puVar38 + 3;
        puVar33 = puVar32 + 3;
        *puVar32 = *puVar38;
        puVar32[1] = puVar38[1];
        puVar32[2] = puVar38[2];
        puVar38 = puVar39;
        puVar32 = puVar33;
      } while (puVar39 != (undefined4 *)0x8004eeac);
      additionalentries = 0;
      objinst = 0;
      *puVar33 = uRam8004eeac;
      uStack268 = *puVar8;
      uStack267 = 0;
      uVar4 = get_num_players();
      if (1 < (longlong)uVar4) {
        string_load_parse_something(&uStack268,aMp_);
      }
      object = (int *)string_load_parse_something
                                (&uStack268,
                                 (char *)(*(int *)(&setup_text_pointers + LVar37 * 4) + 1));
      _load_resource_named_to_membank(&uStack268,1,0x100,4);
      DAT_80075d28 = object;
      uVar5 = get_textbank_number_for_stagenum(LVar37);
      load_mission_text_bank((u32)uVar5);
      objdata1 = (int *)((int)object + *object);
      ptr_setup_path_link = (undefined *)((int)object + object[1]);
      ptr_setup_intro = (undefined *)((int)object + object[2]);
      ptr_setup_objects = (undefined *)((int)object + object[3]);
      ptr_setup_path_sets = (undefined *)((int)object + object[4]);
      ptr_setup_actions = (undefined *)((int)object + object[5]);
      ptr_0xxxpresets = (undefined *)((int)object + object[6]);
      ptr_2xxxpresets = (undefined *)((int)object + object[7]);
      DAT_80075d20 = (int *)((int)object + object[8]);
      if (object[8] == 0) {
        DAT_80075d20 = NULL;
      }
      DAT_80075d24 = (int *)((int)object + object[9]);
      if (object[9] == 0) {
        DAT_80075d24 = NULL;
      }
      ptr_setup_path_tbl = (undefined *)objdata1;
      if ((objdata1 != NULL) &&
         (iVar9 = 0, ptr_setup_path_tbl = (undefined *)objdata1, -1 < *objdata1)) {
        iVar10 = objdata1[1];
        ptr_setup_path_tbl = (undefined *)objdata1;
        while( true ) {
          iVar9 += 0x10;
          objdata1[1] = iVar10 + (int)object;
          objdata1 = (int *)(ptr_setup_path_tbl + iVar9);
          if (*objdata1 < 0) break;
          iVar10 = objdata1[1];
        }
      }
      if ((ptr_setup_path_link != NULL) && (iVar9 = 0, *(int *)ptr_setup_path_link != 0)) {
        iVar10 = *(int *)ptr_setup_path_link;
        objdata1 = (int *)ptr_setup_path_link;
        do {
          *objdata1 = iVar10 + (int)object;
          puVar8 = ptr_setup_path_link + iVar9;
          iVar9 += 0xc;
          *(int *)(puVar8 + 4) = *(int *)(puVar8 + 4) + (int)object;
          objdata1 = (int *)(ptr_setup_path_link + iVar9);
          iVar10 = *objdata1;
        } while (iVar10 != 0);
      }
      if ((ptr_setup_actions != NULL) && (iVar9 = 0, *(int *)ptr_setup_actions != 0)) {
        iVar10 = *(int *)ptr_setup_actions;
        objdata1 = (int *)ptr_setup_actions;
        do {
          *objdata1 = iVar10 + (int)object;
          iVar9 += 8;
          objdata1 = (int *)(ptr_setup_actions + iVar9);
          iVar10 = *objdata1;
        } while (iVar10 != 0);
      }
      if ((ptr_setup_path_sets != NULL) && (iVar9 = 0, *(int *)ptr_setup_path_sets != 0)) {
        iVar10 = *(int *)ptr_setup_path_sets;
        objdata1 = (int *)ptr_setup_path_sets;
        do {
          *objdata1 = iVar10 + (int)object;
          sVar30 = 0;
          ppiVar31 = (int **)(ptr_setup_path_sets + iVar9);
          objdata1 = *ppiVar31;
          if (*objdata1 < 0) {
            *(undefined2 *)((int)ppiVar31 + 6) = 0;
          }
          else {
            iVar10 = objdata1[1];
            while( true ) {
              sVar30 += 1;
              if (iVar10 < 0) break;
              iVar10 = objdata1[2];
              objdata1 = objdata1 + 1;
            }
            *(short *)((int)ppiVar31 + 6) = sVar30;
          }
          iVar9 += 8;
          objdata1 = (int *)(ptr_setup_path_sets + iVar9);
          iVar10 = *objdata1;
        } while (iVar10 != 0);
      }
      if (ptr_0xxxpresets != NULL) {
        fVar40 = proc_7F0B4830();
        fVar41 = *(float *)(ptr_0xxxpresets + 0x24);
        if (fVar41 != 0.00000000) {
          fVar42 = *(float *)ptr_0xxxpresets;
          fStack292 = (float)fVar40;
          pfVar35 = (float *)ptr_0xxxpresets;
          while( true ) {
            *(byte **)(pfVar35 + 9) = (byte *)((int)object + (int)fVar41);
            *pfVar35 = fVar42 * fStack292;
            pfVar35[1] = pfVar35[1] * fStack292;
            pfVar35[2] = pfVar35[2] * fStack292;
            init_pathtable_something
                      (pfVar35,(byte *)((int)object + (int)fVar41),(int **)(pfVar35 + 10));
            fVar41 = pfVar35[0x14];
            pfVar35 = pfVar35 + 0xb;
            if (fVar41 == 0.00000000) break;
            fVar42 = *pfVar35;
          }
        }
      }
      if (ptr_2xxxpresets != NULL) {
        fVar40 = proc_7F0B4830();
        fVar41 = *(float *)(ptr_2xxxpresets + 0x24);
        if (fVar41 != 0.00000000) {
          fVar42 = *(float *)ptr_2xxxpresets;
          fStack304 = (float)fVar40;
          pfVar35 = (float *)ptr_2xxxpresets;
          while( true ) {
            *(byte **)(pfVar35 + 9) = (byte *)((int)object + (int)fVar41);
            *pfVar35 = fVar42 * fStack304;
            pfVar35[1] = pfVar35[1] * fStack304;
            pfVar35[2] = pfVar35[2] * fStack304;
            pfVar35[0xb] = pfVar35[0xb] * fStack304;
            pfVar35[0xc] = pfVar35[0xc] * fStack304;
            pfVar35[0xd] = pfVar35[0xd] * fStack304;
            pfVar35[0xe] = pfVar35[0xe] * fStack304;
            pfVar35[0xf] = pfVar35[0xf] * fStack304;
            pfVar35[0x10] = pfVar35[0x10] * fStack304;
            init_pathtable_something
                      (pfVar35,(byte *)((int)object + (int)fVar41),(int **)(pfVar35 + 10));
            fVar41 = pfVar35[0x1a];
            pfVar35 = pfVar35 + 0x11;
            if (fVar41 == 0.00000000) break;
            fVar42 = *pfVar35;
          }
        }
      }
      if ((DAT_80075d20 != NULL) && (iVar9 = 0, *DAT_80075d20 != 0)) {
        iVar10 = *DAT_80075d20;
        objdata1 = DAT_80075d20;
        do {
          *objdata1 = iVar10 + (int)object;
          iVar9 += 4;
          objdata1 = (int *)((int)DAT_80075d20 + iVar9);
          iVar10 = *objdata1;
        } while (iVar10 != 0);
      }
      if (DAT_80075d24 != NULL) {
        iVar9 = *DAT_80075d24;
        iVar10 = 0;
        objdata1 = DAT_80075d24;
        while (iVar9 != 0) {
          *objdata1 = iVar9 + (int)object;
          iVar10 += 4;
          objdata1 = (int *)((int)DAT_80075d24 + iVar10);
          iVar9 = *objdata1;
        }
      }
      if (uStack8 == 0) {
        alloc_init_GUARDdata_entries(0);
      }
      else {
        additionalentries = load_proptype('\t');
        alloc_init_GUARDdata_entries(additionalentries);
        additionalentries = load_proptype('\t');
        iVar9 = load_proptype('\b');
        iVar10 = load_proptype('\x04');
        objinst = load_proptype('\x11');
        objinst = iVar9 + iVar10 + objinst;
      }
      if (bVar2) {
        iVar9 = load_proptype('\x01');
        iVar10 = load_proptype('\x06');
        iVar11 = load_proptype('\r');
        iVar12 = load_proptype('\f');
        iVar13 = load_proptype('\n');
        iVar14 = load_proptype('\v');
        iVar15 = load_proptype('\x15');
        iVar16 = load_proptype('\x03');
        iVar17 = load_proptype('*');
        iVar18 = load_proptype('/');
        iVar19 = load_proptype('+');
        iVar20 = load_proptype(')');
        iVar21 = load_proptype('$');
        iVar22 = load_proptype('\x05');
        iVar23 = load_proptype('\a');
        iVar24 = load_proptype('\x14');
        iVar25 = load_proptype('\'');
        iVar26 = load_proptype('-');
        objinst = objinst + iVar9 + iVar10 + iVar11 + iVar12 + iVar13 + iVar14 + iVar15 + iVar16 +
                  iVar17 + iVar18 + iVar19 + iVar20 + iVar21 + iVar22 + iVar23 + iVar24 + iVar25 +
                  iVar26;
        iVar9 = load_proptype('(');
        additionalentries += iVar9;
      }
      proc_7F005540(objinst);
      proc_7F005624(additionalentries);
      lVar34 = 0;
      uVar4 = get_num_players();
      if (0 < (longlong)uVar4) {
        do {
          set_cur_player((int)lVar34);
          additionalentries = load_proptype('\x0e');
          alloc_additional_item_slots(additionalentries);
          lVar34 = (longlong)((int)lVar34 + 1);
          uVar4 = get_num_players();
        } while (lVar34 < (longlong)uVar4);
      }
      if (ptr_setup_objects != NULL) {
        DVar27 = get_current_difficulty();
        uVar36 = 1 << (DVar27 + 4U & 0x1f);
        uVar4 = get_num_players();
        if (1 < (longlong)uVar4) {
          uVar4 = get_num_players();
          uVar36 |= 1 << ((int)uVar4 + 0x14U & 0x1f);
        }
        additionalentries = 0;
        cVar1 = ptr_setup_objects[3];
        object = (int *)ptr_setup_objects;
        if (cVar1 == '0') {
          cVar1 = ptr_setup_objects[3];
        }
        else {
          do {
            if (true) {
              switch(cVar1) {
              case '\x01':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_01_object();
                }
                break;
              case '\x02':
                scale_1_0_item_related = (float)object[1] / 65536.00000000;
                break;
              case '\x03':
              case '\x05':
              case '\a':
              case '$':
              case ')':
              case '*':
              case '+':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  prepare_load_objects(param_1,(ushort *)object);
                }
                break;
              case '\x04':
                if ((uStack8 != 0) && ((object[3] & uVar36) == 0)) {
                  expand_type_04_object(param_1,(ushort *)object);
                }
                break;
              case '\x06':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_06_object(param_1,(ushort *)object);
                }
                break;
              case '\b':
                if ((uStack8 != 0) && ((object[3] & uVar36) == 0)) {
                  expand_08_obj_set_guard_MP_weapons(LVar37,(ushort *)object);
                }
                break;
              case '\t':
                if (uStack8 != 0) {
                  expand_09_characters();
                }
                break;
              case '\n':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_0A_object(LVar37,(ushort *)object,additionalentries);
                }
                break;
              case '\v':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_0B_object(LVar37,(ushort *)object);
                }
                break;
              case '\f':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_0C_object(param_1,(ushort *)object);
                }
                break;
              case '\r':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  expand_type_0D_object_autoturret(param_1,(ushort *)object);
                }
                break;
              case '\x11':
                if ((uStack8 != 0) && ((object[3] & uVar36) == 0)) {
                  expand_type_0D_MP_weapon_expansion_routine(param_1,(ushort *)object);
                }
                break;
              case '\x12':
                cVar1 = *(char *)((int)object + 0xb);
                pGVar28 = check_if_guardnum_loaded_get_ptr_GUARDdata((short)object[1]);
                if (((pGVar28 != NULL) && (pGVar28->POSdata_pointer != 0)) &&
                   (pGVar28->MODELdata_pointer != 0)) {
                  pGVar28->beligerancy = cVar1;
                }
                break;
              case '\x14':
                objinst = 1;
                uVar4 = get_num_players();
                if (1 < (longlong)uVar4) {
                  iVar9 = get_ptr_mp_weapon_set_data();
                  iVar9 += lastmpweaponnum * 0x18;
                  objinst = *(int *)(iVar9 + 0x10);
                  *(undefined2 *)((int)object + *(int *)(iVar9 + 0xc) * 4 + 0x7e) = (short)objinst;
                }
                if (((0 < objinst) && (bVar2)) &&
                   (objinst = 0, objdata1 = object, (object[3] & uVar36) == 0)) {
                  do {
                    if ((*(short *)((int)objdata1 + 0x82) != 0) &&
                       (*(ushort *)(objdata1 + 0x20) != 0xffff)) {
                      load_model((uint)*(ushort *)(objdata1 + 0x20));
                    }
                    objinst += 4;
                    objdata1 = objdata1 + 1;
                  } while (objinst != 0x34);
                  prepare_load_objects(param_1,(ushort *)object);
                }
                break;
              case '\x15':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  *(float *)(object + 0x20) = (float)object[0x20] / 65536.00000000;
                  object[0x21] = object[0x20];
                  prepare_load_objects(param_1,(ushort *)object);
                }
                break;
              case '\x16':
                objinst = proc_7F056EA0(param_1,(int)*(short *)((int)object + 6) + additionalentries
                                       );
                object[3] = objinst;
                if (objinst != 0) {
                  *(uint *)(objinst + 100) = *(uint *)(objinst + 100) | 0x10;
                }
                set_parent_cur_tag_entry((int)object);
                break;
              case '\x17':
                add_ptr_to_objective((int)object);
                break;
              case '\x1e':
                set_parent_cur_obj_photograph((int)object);
                break;
              case ' ':
                set_parent_cur_obj_enter_room((int)object);
                break;
              case '!':
                set_parent_cur_obj_deposited_in_room((int)object);
                break;
              case '#':
                setup_briefing_text_entry_parent((int)object);
                break;
              case '%':
                objinst = proc_7F056EA0(param_1,object[1] + additionalentries);
                object[9] = objinst;
                if (objinst != 0) {
                  *(uint *)(objinst + 100) = *(uint *)(objinst + 100) | 0x400;
                }
                proc_7F08D8A0((int)object);
                break;
              case '\'':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  prepare_load_objects(param_1,(ushort *)object);
                  objinst = object[5];
                  if ((objinst != 0) &&
                     (partdesc = *(ushort **)(*(int *)(*(int *)(objinst + 8) + 8) + 0x14),
                     partdesc != NULL)) {
                    puVar29 = (uint *)extract_id_from_object_structure_microcode(objinst,partdesc);
                    *puVar29 = (uint)((object[2] & 0x10000000U) == 0);
                  }
                  object[0x22] = 0;
                  object[0x23] = 0;
                  object[0x24] = 0;
                  object[0x25] = 0;
                  object[0x27] = 0;
                  object[0x28] = 0;
                  object[0x26] = -0x40800000;
                  puVar8 = proc_7F035398((undefined *)object[0x20]);
                  *(undefined **)(object + 0x20) = puVar8;
                  *(undefined2 *)(object + 0x21) = 0;
                  *(undefined2 *)((int)object + 0x86) = 0xffff;
                  object[0x29] = 0;
                  object[0x2a] = 0;
                  object[0x2b] = 0;
                }
                break;
              case '(':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  prepare_load_objects(param_1,(ushort *)object);
                  object[0x26] = 0;
                  object[0x27] = 0;
                  object[0x22] = 0;
                  object[0x23] = 0;
                  object[0x24] = 0;
                  object[0x29] = 0;
                  object[0x28] = -0x40800000;
                  object[0x25] = -0x40800000;
                  puVar8 = proc_7F035398((undefined *)object[0x20]);
                  *(undefined **)(object + 0x20) = puVar8;
                  *(undefined2 *)(object + 0x21) = 0;
                  *(undefined2 *)((int)object + 0x86) = 0xffff;
                  object[0x2a] = 0;
                  object[0x2b] = 0;
                  object[0x2c] = 0;
                }
                break;
              case '-':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  fStack408 = 0.00000000;
                  set_weapon_model_generated_thrown_object(0x20);
                  prepare_load_objects(param_1,(ushort *)object);
                  object[0x32] = 0;
                  object[0x33] = 0;
                  fVar41 = convert_angle_using_inverse((f32)object[0xe],(f32)object[0x10]);
                  *(float *)(object + 0x37) = flt_8004F024 - fVar41;
                  if (object[4] != 0) {
                    fStack408 = (float)proc_7F0B2970();
                  }
                  *(float *)(object + 0x35) = fStack408;
                  *(float *)(object + 0x34) = fStack408 / flt_8004F028;
                }
                break;
              case '.':
                *(float *)(object + 1) = (float)object[1] / 100.00000000;
                *(float *)(object + 2) = (float)object[2] / 100.00000000;
                *(float *)(object + 3) = (float)object[3] / 100.00000000;
                *(float *)(object + 4) = (float)object[4] / 65536.00000000;
                *(float *)(object + 5) = (float)object[5] / 65536.00000000;
                break;
              case '/':
                if ((bVar2) && ((object[3] & uVar36) == 0)) {
                  if (object[2] << 3 < 0) {
                    if (9999 < *(short *)((int)object + 6)) {
                      puVar8 = ptr_2xxxpresets + (int)*(short *)((int)object + 6) * 0x44;
                      proc_7F001BD4((float *)(puVar8 + -680000),&fStack360);
                      fStack372 = *(float *)(puVar8 + -0xa6034) * 10.00000000 + fStack360;
                      fStack368 = *(float *)(puVar8 + -0xa6030) * 10.00000000 + fStack356;
                      fStack364 = *(float *)(puVar8 + -0xa602c) * 10.00000000 + fStack352;
                      fStack360 = fStack360 - *(float *)(puVar8 + -0xa6034) * 10.00000000;
                      fStack356 = fStack356 - *(float *)(puVar8 + -0xa6030) * 10.00000000;
                      fStack352 = fStack352 - *(float *)(puVar8 + -0xa602c) * 10.00000000;
                      objinst = proc_7F0B9E04(&fStack360,&fStack372);
                      object[0x23] = objinst;
                      *(float *)(object + 0x24) = (float)object[0x24] / 65536.00000000;
                    }
                  }
                  prepare_load_objects(param_1,(ushort *)object);
                }
              }
            }
            uVar5 = get_size_of_setup_object_type(object);
            object = object + (int)uVar5;
            cVar1 = *(char *)((int)object + 3);
            additionalentries += 1;
          } while (cVar1 != '0');
          cVar1 = ptr_setup_objects[3];
        }
        additionalentries = 0;
        object = (int *)ptr_setup_objects;
        while (cVar1 != '0') {
          if (true) {
            switch(cVar1) {
            case '\x03':
            case '\x04':
            case '\a':
            case '\b':
            case '\n':
            case '\x14':
            case '\x15':
            case '$':
            case ')':
            case '*':
            case '+':
            case '/':
              if (((object[4] != 0) && ((object[2] & 0x8000U) != 0)) &&
                 ((objinst = proc_7F056EA0(param_1,additionalentries +
                                                   (int)*(short *)((int)object + 6)), objinst != 0
                  && (*(int *)(objinst + 0x10) != 0)))) {
                object[0x19] = object[0x19] | 0x80000;
                set_obj_instance_controller_scale(object[5],scale);
                proc_7F03A5A4(object[4],*(int *)(objinst + 0x10));
              }
              break;
            case '\x0e':
              objdata1 = (int *)proc_7F056A88(object[1] + additionalentries);
              objdata2 = (int *)proc_7F056A88(object[2] + additionalentries);
              if ((((objdata1 != NULL) && (objdata2 != NULL)) &&
                  (*(char *)((int)objdata1 + 3) == '\b')) && (*(char *)((int)objdata2 + 3) == '\b'))
              {
                link_objects(objdata1,objdata2);
              }
              break;
            case '\x13':
              objinst = object[2];
              iVar9 = proc_7F056EA0(param_1,additionalentries + object[1]);
              objinst = proc_7F056A88(additionalentries + objinst);
              if (((iVar9 != 0) && (*(int *)(iVar9 + 0x10) != 0)) &&
                 ((objinst != 0 &&
                  ((*(char *)(objinst + 3) == '\x01' && (*(int *)(objinst + 0x10) != 0)))))) {
                object[1] = *(int *)(iVar9 + 0x10);
                object[2] = *(int *)(objinst + 0x10);
                proc_7F001910((int)object);
                *(uint *)(iVar9 + 100) = *(uint *)(iVar9 + 100) | 1;
              }
              break;
            case '&':
              objinst = object[2];
              iVar9 = proc_7F056EA0(param_1,additionalentries + object[1]);
              objinst = proc_7F056EA0(param_1,additionalentries + objinst);
              if ((((iVar9 != 0) && (*(int *)(iVar9 + 0x10) != 0)) && (objinst != 0)) &&
                 ((*(int *)(objinst + 0x10) != 0 && (*(char *)(iVar9 + 3) == '\x01')))) {
                object[1] = iVar9;
                object[2] = objinst;
                proc_7F001928((int)object);
                *(uint *)(iVar9 + 100) = *(uint *)(iVar9 + 100) | 0x2000;
              }
              break;
            case ',':
              objinst = object[3];
              iVar9 = object[2];
              iVar10 = proc_7F056EA0(param_1,additionalentries + object[1]);
              iVar9 = proc_7F056EA0(param_1,additionalentries + iVar9);
              objinst = proc_7F056EA0(param_1,additionalentries + objinst);
              if ((((((iVar10 != 0) && (*(int *)(iVar10 + 0x10) != 0)) && (iVar9 != 0)) &&
                   ((*(int *)(iVar9 + 0x10) != 0 && (*(char *)(iVar9 + 3) == '+')))) &&
                  (objinst != 0)) &&
                 ((*(int *)(objinst + 0x10) != 0 && (*(char *)(objinst + 3) == '\x01')))) {
                object[1] = iVar10;
                object[2] = iVar9;
                object[3] = objinst;
                proc_7F001940((int)object);
                *(uint *)(iVar10 + 0xc) = *(uint *)(iVar10 + 0xc) | 0x400;
                *(uint *)(objinst + 0xc) = *(uint *)(objinst + 0xc) | 0x400;
              }
            }
          }
          uVar5 = get_size_of_setup_object_type(object);
          object = object + (int)uVar5;
          cVar1 = *(char *)((int)object + 3);
          additionalentries += 1;
        }
      }
      goto LAB_7f004e78;
    }
  }
  ptr_setup_path_tbl = NULL;
  ptr_setup_path_link = NULL;
  ptr_setup_intro = NULL;
  ptr_setup_objects = NULL;
  ptr_setup_path_sets = NULL;
  ptr_setup_actions = NULL;
  ptr_0xxxpresets = NULL;
  ptr_2xxxpresets = NULL;
  DAT_80075d20 = NULL;
  DAT_80075d24 = NULL;
  alloc_init_GUARDdata_entries(0);
  proc_7F005540(0);
  proc_7F005624(0);
LAB_7f004e78:
  alloc_false_GUARDdata_to_exec_global_action();
  return;
}



void something_with_stage_objectives(void)

{
  LEVELID LVar1;
  undefined4 *puVar2;
  
  LVar1 = get_stage_num();
  if (LVar1 != LEVELID_TITLE) {
    num_objective_ptrs = 0xffffffff;
    DAT_80075d58 = 0;
    DAT_80075d5c = 0;
    puVar2 = &DAT_80075d60;
    do {
      puVar2 = puVar2 + 4;
      puVar2[1] = 0;
      puVar2[2] = 0;
      puVar2[3] = 0;
      *puVar2 = 0;
      puVar2 = puVar2;
    } while (puVar2 != &ptr_last_tag_entry_type16);
  }
  objective_ptrs[0] = 0;
  objective_ptrs[1] = 0;
  puVar2 = objective_ptrs + 2;
  do {
    puVar2 = puVar2 + 4;
    puVar2[1] = 0;
    puVar2[2] = 0;
    puVar2[3] = 0;
    *puVar2 = 0;
    puVar2 = puVar2;
  } while (puVar2 != &DAT_80075d58);
  ptr_last_tag_entry_type16 = 0;
  ptr_last_briefing_setup_entry_type23 = 0;
  ptr_last_enter_room_subobject_entry_type20 = 0;
  ptr_last_deposit_in_room_subobject_entry_type21 = 0;
  ptr_last_photo_obj_in_room_subobject_entry_type1E = 0;
  return;
}



void set_parent_cur_tag_entry(int param_1)

{
  *(undefined4 *)(param_1 + 8) = ptr_last_tag_entry_type16;
  ptr_last_tag_entry_type16 = param_1;
  return;
}



void setup_briefing_text_entry_parent(int param_1)

{
  *(undefined4 *)(param_1 + 0xc) = ptr_last_briefing_setup_entry_type23;
  ptr_last_briefing_setup_entry_type23 = param_1;
  return;
}



void add_ptr_to_objective(int param_1)

{
  objective_ptrs[*(int *)(param_1 + 4)] = param_1;
  if (num_objective_ptrs < *(int *)(param_1 + 4)) {
    num_objective_ptrs = *(int *)(param_1 + 4);
  }
  return;
}



void set_parent_cur_obj_enter_room(int param_1)

{
  *(undefined4 *)(param_1 + 0xc) = ptr_last_enter_room_subobject_entry_type20;
  ptr_last_enter_room_subobject_entry_type20 = param_1;
  return;
}



void set_parent_cur_obj_deposited_in_room(int param_1)

{
  *(undefined4 *)(param_1 + 0x10) = ptr_last_deposit_in_room_subobject_entry_type21;
  ptr_last_deposit_in_room_subobject_entry_type21 = param_1;
  return;
}



void set_parent_cur_obj_photograph(int param_1)

{
  *(undefined4 *)(param_1 + 0xc) = ptr_last_photo_obj_in_room_subobject_entry_type1E;
  ptr_last_photo_obj_in_room_subobject_entry_type1E = param_1;
  return;
}



void something_with_ejected_cartridges(void)

{
  undefined4 *puVar1;
  object_header *header;
  ejected_cart *peVar2;
  
  DAT_80075db0 = 0;
  puVar1 = &DAT_80075db8;
  do {
    puVar1 = puVar1 + 1;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 < &DAT_80075dc8);
  DAT_80034c9c = 0;
  DAT_80034ca0 = 0;
  if (ejected_cartridge.header != NULL) {
    peVar2 = &ejected_cartridge;
    header = (object_header *)ejected_cartridge.header;
    do {
      load_object_into_memory(header,(int *)peVar2->text);
      header = (object_header *)peVar2[1].header;
      peVar2 = peVar2 + 1;
    } while (header != NULL);
  }
  return;
}



void init_player_BONDdata_stats(void)

{
  void *pvVar2;
  ulonglong uVar1;
  int iVar3;
  int iVar4;
  BONDdata *pBVar5;
  int *piVar6;
  int *piVar7;
  BONDdata *pBVar8;
  int *piVar9;
  struct_18 *psVar10;
  struct_18 *psVar11;
  int aiStack940 [234];
  int iStack4;
  float fPoint9;
  
  psVar10 = &BONDdata_item_control_blocks_initdata;
  piVar9 = aiStack940;
  do {
    psVar11 = (struct_18 *)&psVar10->field_C;
    *piVar9 = psVar10->BONDdata_item_control_blocks_initdata;
    piVar9[1] = psVar10->field_4;
    piVar9[2] = psVar10->field_8;
    psVar10 = psVar11;
    piVar9 = piVar9 + 3;
  } while (psVar11 != (struct_18 *)&BONDdata_item_control_blocks_initdata.anonymous_0);
  pvVar2 = allocate_bytes_in_bank(size_right_item_buffer,4);
  ptr_BONDdata->ptr_right_weapon_buffer = pvVar2;
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    pvVar2 = allocate_bytes_in_bank(size_left_item_buffer,4);
    ptr_BONDdata->ptr_left_weapon_buffer = pvVar2;
  }
  piVar9 = aiStack940;
  ptr_BONDdata->right_invisible = 0;
  ptr_BONDdata->left_invisible = 0;
  ptr_BONDdata->item_right = 0;
  ptr_BONDdata->item_left = 0;
  ptr_BONDdata->field_2A44 = -1;
  ptr_BONDdata->field_2A48 = -1;
  ptr_BONDdata->lock_right_hand_model = 0;
  ptr_BONDdata->lock_left_hand_model = 0;
  pBVar5 = ptr_BONDdata;
  piVar6 = piVar9;
  do {
    piVar7 = piVar6 + 3;
    pBVar5->right_weapon = *piVar6;
    pBVar5->right_weapon_attack = piVar6[1];
    pBVar5->previous_right_weapon = piVar6[2];
    pBVar5 = (BONDdata *)&pBVar5->zpos;
    piVar6 = piVar7;
    pBVar8 = ptr_BONDdata;
  } while (piVar7 != &iStack4);
  do {
    piVar6 = piVar9 + 3;
    pBVar8->left_weapon = *piVar9;
    pBVar8->left_weapon_attack = piVar9[1];
    pBVar8->left_weapon_previous = piVar9[2];
    piVar9 = piVar6;
    pBVar8 = (BONDdata *)&pBVar8->zpos;
    iVar3 = 0;
  } while (piVar6 != &iStack4);
  do {
    iVar4 = iVar3 + 4;
    *(undefined4 *)((int)ptr_BONDdata->ammo_totals + iVar3) = 0;
    iVar3 = iVar4;
  } while (iVar4 < 0x78);
  cur_player_stat_ptr->shots_fired = 0;
  cur_player_stat_ptr->head_hits = 0;
  cur_player_stat_ptr->body_hits = 0;
  cur_player_stat_ptr->leg_hits = 0;
  cur_player_stat_ptr->other_hit_weapon = 0;
  cur_player_stat_ptr->other_hit_hat = 0;
  cur_player_stat_ptr->other_hit_objects = 0;
  fPoint9 = flt_8004F0E0;
  cur_player_stat_ptr->killed_civilians = 0;
  cur_player_stat_ptr->kill_count = 0;
  cur_player_stat_ptr->killed_gg_owner_count = 0;
  ptr_BONDdata->num_deaths = 0;
  ptr_BONDdata->num_suicides = 0;
  ptr_BONDdata->field_FC0 = 1.00000000;
  ptr_BONDdata->field_FC4 = 1.00000000;
  ptr_BONDdata->field_FC8 = 0;
  ptr_BONDdata->field_FCC = 0;
  ptr_BONDdata->field_FD0 = 0;
  ptr_BONDdata->field_FD4 = 0;
  ptr_BONDdata->field_FD8 = 0;
  ptr_BONDdata->field_FDC = -1;
  ptr_BONDdata->field_FDD = -1;
  ptr_BONDdata->field_FDE = -1;
  ptr_BONDdata->field_FDF = '\0';
  ptr_BONDdata->field_FE0 = 1;
  ptr_BONDdata->field_FE4 = 0;
  ptr_BONDdata->field_FE8 = 0.00000000;
  ptr_BONDdata->field_FEC = 0.00000000;
  ptr_BONDdata->field_FF0 = 0.00000000;
  ptr_BONDdata->field_FF4 = 0.00000000;
  *(float *)&ptr_BONDdata->field_FF8 = fPoint9;
  ptr_BONDdata->field_FFC = 0.00000000;
  ptr_BONDdata->field_1000 = 0.00000000;
  ptr_BONDdata->field_1004 = 0.00000000;
  ptr_BONDdata->field_1008 = 0.00000000;
  *(float *)&ptr_BONDdata->field_100C = fPoint9;
  ptr_BONDdata->field_1010 = 0.00000000;
  *(float *)&ptr_BONDdata->holds_neg_pi = fl_neg_pi;
  ptr_BONDdata->field_1018 = 0.00000000;
  ptr_BONDdata->GEkey_analyzed = 0;
  ptr_BONDdata->field_1270 = -1;
  ptr_BONDdata->field_106C = 0.00000000;
  ptr_BONDdata->field_1070 = 0.00000000;
  ptr_BONDdata->field_1074 = 0.00000000;
  ptr_BONDdata->field_1078 = 0;
  ptr_BONDdata->field_107C = 0.00000000;
  ptr_BONDdata->field_1080 = 0.00000000;
  unknown_takes_playerhand(0);
  unknown_takes_playerhand(0);
  unknown_takes_playerhand(0);
  unknown_takes_playerhand(1);
  unknown_takes_playerhand(1);
  unknown_takes_playerhand(1);
  ptr_BONDdata->somekinda_flags = 0;
  ptr_BONDdata->somekinda_bitflags = 2;
  ptr_BONDdata->sniper_zoom = GsniperrifleZ_stats.zoom;
  ptr_BONDdata->camera_zoom = GcameraZ_stats.zoom;
  return;
}



void proc_7F005450(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  undefined *puVar5;
  undefined *puVar6;
  undefined4 *puVar7;
  
  dword_80036060 = &DAT_80076a50;
  DAT_80076a5c = &DAT_80076a64;
  puVar4 = &DAT_80076a78;
  DAT_80076a70 = &DAT_80076a78;
  DAT_80076a74 = &DAT_80076a50;
  puVar1 = &DAT_80076a8c;
  DAT_80076a84 = &DAT_80076a8c;
  puVar7 = (undefined4 *)&DAT_80076adc;
  puVar6 = &DAT_80076ac8;
  puVar5 = &DAT_80076ab4;
  puVar3 = &DAT_80076aa0;
  DAT_80076a88 = &DAT_80076a64;
  puVar2 = puVar1;
  do {
    *(undefined4 **)(puVar1 + 0x48) = puVar7;
    puVar7 = puVar7 + 0x14;
    *(undefined **)(puVar1 + 0x20) = puVar5;
    *(undefined **)(puVar1 + 0x24) = puVar2;
    *(undefined **)(puVar1 + 0x34) = puVar6;
    *(undefined **)(puVar1 + 0x38) = puVar3;
    *(undefined **)(puVar1 + 0x4c) = puVar5;
    *(undefined **)(puVar1 + 0xc) = puVar3;
    *(undefined **)(puVar1 + 0x10) = puVar4;
    puVar4 = puVar4 + 0x50;
    puVar3 = puVar3 + 0x50;
    puVar5 = puVar5 + 0x50;
    puVar6 = puVar6 + 0x50;
    puVar2 = puVar2 + 0x50;
    puVar1 = puVar1 + 0x50;
  } while (puVar7 != &flt_8007A02C);
  DAT_8007992c = &DAT_80079908;
  return;
}



void proc_7F005520(void)

{
  dword_80036070 = 0;
  dword_80036074 = 0;
  return;
}



void proc_7F005534(undefined4 param_1)

{
  dword_80036078 = param_1;
  return;
}



void proc_7F005540(int param_1)

{
  void *pvVar1;
  int iVar2;
  int iVar3;
  
  dword_80036074 = param_1 + 0x1e;
  ptr_allocation_1 = allocate_bytes_in_bank(dword_80036074 * 0x20,4);
  iVar3 = 0;
  if (0 < dword_80036074) {
    iVar2 = 0;
    do {
      *(undefined4 *)((int)ptr_allocation_1 + iVar2 + 8) = 0;
      if (iVar3 < param_1) {
        *(undefined4 *)((int)ptr_allocation_1 + iVar2 + 0x10) = 0;
      }
      else {
        pvVar1 = allocate_bytes_in_bank(0x50,4);
        *(void **)((int)ptr_allocation_1 + iVar2 + 0x10) = pvVar1;
        *(undefined2 *)((int)ptr_allocation_1 + iVar2 + 2) = 0x14;
      }
      iVar3 += 1;
      iVar2 += 0x20;
    } while (iVar3 < dword_80036074);
  }
  return;
}



void proc_7F005624(int param_1)

{
  void *pvVar1;
  int iVar2;
  int iVar3;
  
  dword_80036070 = param_1 + 10;
  ptr_allocation_0 = allocate_bytes_in_bank(dword_80036070 * 0xc0,4);
  iVar3 = 0;
  if (0 < dword_80036070) {
    iVar2 = 0;
    do {
      *(undefined4 *)((int)ptr_allocation_0 + iVar2 + 8) = 0;
      if (iVar3 < param_1) {
        *(undefined4 *)((int)ptr_allocation_0 + iVar2 + 0x10) = 0;
      }
      else {
        pvVar1 = allocate_bytes_in_bank(0x230,4);
        *(void **)((int)ptr_allocation_0 + iVar2 + 0x10) = pvVar1;
        *(undefined2 *)((int)ptr_allocation_0 + iVar2 + 2) = 0x8c;
      }
      iVar3 += 1;
      iVar2 += 0xbc;
    } while (iVar3 < dword_80036070);
  }
  return;
}



ulonglong set_weapon_model_generated_thrown_object(undefined4 param_1)

{
  ulonglong uVar1;
  longlong model;
  
  model = -1;
  if (true) {
    switch(param_1) {
    case 3:
      model = 0xba;
      break;
    case 0x18:
      model = 0xcb;
      break;
    case 0x19:
      model = 0xca;
      break;
    case 0x1a:
      model = 0xc4;
      break;
    case 0x1b:
      model = 0xc9;
      break;
    case 0x1c:
      model = 200;
      break;
    case 0x1d:
      model = 199;
      break;
    case 0x20:
      model = 0xca;
      break;
    case 0x21:
      model = 0xe2;
      break;
    case 0x22:
      model = 0x111;
      break;
    case 0x2f:
      model = 0xf5;
      break;
    case 0x30:
      model = 0xf6;
    }
  }
  uVar1 = 0;
  if (-1 < model) {
    uVar1 = load_model((int)model);
  }
  return uVar1;
}



// WARNING: Instruction at (ram,0x7f005e34) overlaps instruction at (ram,0x7f005e30)
// 

void load_camera_intro_type_values(void)

{
  float *pfVar1;
  LEVELID LVar3;
  void *pvVar4;
  u32 uVar5;
  undefined4 *puVar6;
  object_standard *poVar7;
  ulonglong uVar2;
  uint uVar8;
  uint *puVar9;
  float fVar10;
  float extraout_f12;
  int *piStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  puVar9 = (uint *)ptr_setup_intro;
  fStack12 = dword_8002A780;
  fStack8 = dword_8002A784;
  fStack4 = dword_8002A788;
  mission_kia = FALSE;
  camera_80036424 = 0;
  resolution = 0;
  camera_8003642C = 0;
  camera_80036430 = 0;
  camera_80036434 = 0;
  fStack16 = 0.00000000;
  LVar3 = get_stage_num();
  if (LVar3 == LEVELID_CUBA) {
    pvVar4 = allocate_bytes_in_bank(0x46ea0,4);
    resolution = (int)pvVar4 + 0x3fU & 0xffffffc0;
    camera_80036430 = 1;
  }
  camera_80036438 = 0;
  dword_8003643C = 0;
  dword_80036440 = 0;
  DAT_80079990 = 0;
  DAT_80079994 = 0;
  DAT_80079998 = 0;
  dword_80036444 = 0;
  DAT_80079c68 = 0;
  in_tank_flag = FALSE;
  dword_8003644C = 0;
  ptr_playerstank = 0;
  dword_80036454 = 0;
  dword_80036458 = 0;
  dword_8003645C = 0;
  dword_80036460 = 0;
  dword_80036464 = 0;
  dword_80036468 = 0;
  dword_8003646C = 0;
  dword_80036470 = 0;
  dword_80036474 = 0;
  dword_80036478 = 0;
  dword_8003647C = 0;
  dword_80036480 = 0;
  dword_80036484 = 0;
  dword_80036488 = 0;
  dword_8003648C = 0;
  dword_800364B0 = 1;
  disable_player_pickups_flag = 0;
  cameramode = 0;
  enable_move_after_cinema = 0;
  dword_8003649C = 0;
  stop_time_flag = 0;
  dword_800364A4 = 0;
  dword_800364A8 = 1;
  ptr_firstcommand_rotatingcam = NULL;
  ptr_random06cam_entry = NULL;
  ptr_last_06_cam_entry = NULL;
  num_06_cam_entries = 0;
  missiontime = 0;
  watch_time = 0;
  selected_stage_intro_anim = 0;
  watch_transition_time = flt_8004F1A8;
  flt_8007A0A4 = NULL;
  PTR_800799e0 = NULL;
  if (puVar9 != NULL) {
    uVar8 = *puVar9;
    while (uVar8 != 9) {
      if (uVar8 < 9) {
                    // WARNING: Could not recover jumptable at 0x7f005a74. Too many branches
                    // WARNING: Treating indirect jump as call
        (*(code *)(&jpt_700399A4)[uVar8])();
        return;
      }
      puVar9 = puVar9 + 1;
      uVar8 = *puVar9;
    }
  }
  if (false) {
    ptr_random06cam_entry = NULL;
    uVar5 = get_random_value();
    uVar8 = uVar5 % num_06_cam_entries;
    if (num_06_cam_entries == 0) {
      trap(0x1c00);
    }
    while (0 < (int)uVar8) {
      uVar8 -= 1;
      ptr_random06cam_entry = *(undefined **)(ptr_random06cam_entry + 0x24);
    }
  }
  add_item_to_inventory(ITEM_FIST);
  if (true) {
    PTR_800799e0 = (undefined *)((int)&rgba + 1);
  }
  ptr_BONDdata->field_78 = 0.00000000;
  *(float *)&ptr_BONDdata->field_7C = flt_8004F1D0;
  ptr_BONDdata->field_80 = 0.00000000;
  if (DAT_80079c68 < 1) {
    piStack20 = proc_7F0AFB78(&fStack12,&fStack8,&fStack4,extraout_f12);
    fVar10 = proc_7F080D60((longlong)(int)piStack20,fStack12,fStack4);
    fStack8 = (float)ptr_BONDdata->field_29BC + fVar10;
    *(float *)&ptr_BONDdata->field_70 = fVar10;
  }
  else {
    uVar2 = get_num_players();
    if ((longlong)uVar2 < 2) {
      uVar8 = 0;
    }
    else {
      if (DAT_80079c68 < 1) {
        uVar8 = 0;
      }
      else {
        uVar8 = proc_7F0790F0();
      }
    }
    pfVar1 = (float *)(&DAT_80079c28)[uVar8];
    fStack12 = *pfVar1;
    fStack4 = pfVar1[2];
    piStack20 = (int *)pfVar1[10];
    fVar10 = proc_7F080D60((longlong)(int)piStack20,fStack12,fStack4);
    fStack8 = (float)ptr_BONDdata->field_29BC + fVar10;
    *(float *)&ptr_BONDdata->field_70 = fVar10;
    pfVar1 = (float *)(&DAT_80079c28)[uVar8];
    fStack16 = convert_angle_using_inverse((f32)pfVar1[6],(f32)pfVar1[8]);
    fStack16 = flt_8004F1D4 - fStack16;
  }
  ptr_BONDdata->azimuth_angle = (fStack16 * 360.00000000) / flt_8004F1D8;
  *(float *)&ptr_BONDdata->clipping_height = fVar10;
  *(float *)&ptr_BONDdata->field_6C = fVar10 / flt_8004F1DC;
  change_player_pos_to_target(&ptr_BONDdata->ptr_tile_printmanpos,(int *)&fStack12,piStack20);
  fVar10 = sinf(fStack16);
  *(float *)&ptr_BONDdata->field_498 = -fVar10;
  ptr_BONDdata->field_49C = 0;
  fVar10 = cosf(fStack16);
  *(float *)&ptr_BONDdata->field_4A0 = fVar10;
  proc_7F089718(flt_800364D0);
  DAT_80079da0 = 0;
  DAT_80079da4 = 0;
  puVar6 = &DAT_80079da8;
  do {
    puVar6 = puVar6 + 4;
    puVar6[1] = 0;
    puVar6[2] = 0;
    puVar6[3] = 0;
    *puVar6 = 0;
    puVar6 = puVar6;
  } while (puVar6 != (undefined4 *)0x80079dc8);
  reset_intro_camera_message_dialogs_for_BONDdata();
  proc_7F08A900();
  poVar7 = remove_last_obj_pos_data_entry();
  *(object_standard **)&ptr_BONDdata->position_data_pointer = poVar7;
  *(undefined4 *)(ptr_BONDdata->position_data_pointer + 4) = 0;
  *(undefined *)ptr_BONDdata->position_data_pointer = 6;
  *(float *)&ptr_BONDdata->field_408 = fStack12;
  *(float *)(ptr_BONDdata->position_data_pointer + 8) = fStack12;
  *(float *)&ptr_BONDdata->field_40C = fStack8;
  *(float *)(ptr_BONDdata->position_data_pointer + 0xc) = fStack8;
  *(float *)&ptr_BONDdata->field_410 = fStack4;
  *(float *)(ptr_BONDdata->position_data_pointer + 0x10) = fStack4;
  *(int **)(ptr_BONDdata->position_data_pointer + 0x14) = piStack20;
  set_current_objposdata_plus_0x28((object_standard *)ptr_BONDdata->position_data_pointer);
  set_stateflag_0x04_for_posdata(ptr_BONDdata->position_data_pointer);
  fVar10 = flt_8004F1E0;
  *(float *)&ptr_BONDdata->field_3B8 = (float)ptr_BONDdata->field_4B4 / flt_8004F1E0;
  *(float *)&ptr_BONDdata->field_3BC = (float)ptr_BONDdata->field_4B8 / fVar10;
  *(float *)&ptr_BONDdata->field_3C0 = (float)ptr_BONDdata->field_4BC / fVar10;
  uVar2 = get_num_players();
  if (uVar2 == 1) {
    set_camera_mode(1);
  }
  else {
    set_camera_mode(9);
  }
  total_player_death_anim = 0;
  if (player_death_ani_list[0] != 0) {
    total_player_death_anim = 1;
    while (player_death_ani_list[total_player_death_anim] != 0) {
      total_player_death_anim += 1;
    }
  }
  ptr_BONDdata->field_420 = 1;
  ptr_BONDdata->field_424 = 0;
  ptr_BONDdata->field_428 = 0;
  dword_80036510 = 0;
  return;
}



void proc_7F0061F0(void)

{
  int iVar1;
  int iVar2;
  
  ptr_BONDdata->flag_for_allguns = 0;
  ptr_BONDdata->field_1200 = -1;
  ptr_BONDdata->field_120C = -1;
  iVar1 = 0x18;
  do {
    *(undefined4 *)((int)&ptr_BONDdata->field_1200 + iVar1) = 0xffffffff;
    *(undefined4 *)((int)&ptr_BONDdata->field_120C + iVar1) = 0xffffffff;
    *(undefined4 *)((int)&ptr_BONDdata->field_1218 + iVar1) = 0xffffffff;
    iVar2 = iVar1 + 0x30;
    *(undefined4 *)((int)&ptr_BONDdata->field_1224 + iVar1) = 0xffffffff;
    iVar1 = iVar2;
  } while (iVar2 != 0x78);
  return;
}



void alloc_additional_item_slots(int additionalentries)

{
  void *pvVar1;
  
  ptr_BONDdata->items_max = additionalentries + 0x1e;
  pvVar1 = allocate_bytes_in_bank((ptr_BONDdata->items_max * 0x14 + 0xfU | 0xf) ^ 0xf,4);
  *(void **)&ptr_BONDdata->p_itemcur = pvVar1;
  reinit_BONDdata_inventory();
  return;
}



void proc_7F0062C0(int param_1,int param_2,int param_3,int *param_4)

{
  short sStack8;
  short sStack6;
  short sStack4;
  
  *param_4 = 0;
  param_4[1] = 0;
  param_4[2] = 0;
  if (param_2 < param_3) {
    do {
      proc_7F06D2E4(0,0,&model_guard_character,param_1,param_2,&sStack8);
      *param_4 = *param_4 + (int)sStack8;
      param_2 += 1;
      param_4[1] = param_4[1] + (int)sStack6;
      param_4[2] = param_4[2] + (int)sStack4;
    } while (param_2 < param_3);
  }
  return;
}



void sets_a_bunch_of_BONDdata_values_to_default(void)

{
  float fVar1;
  float fVar2;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  float **ppfVar3;
  float **ppfVar4;
  int *piVar5;
  int *piVar6;
  float **ppfVar7;
  float **ppfVar8;
  f32 scale;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  f32 afStack144 [16];
  f32 *apfStack80 [4];
  int *piStack64;
  int aiStack16 [2];
  int iStack8;
  
  if (0x1e < ptr_player_gait_object.num_table_entries) {
    return_null();
  }
  proc_7F075FAC((int)&ptr_BONDdata->field_598,(player_gait_header *)&ptr_player_gait_object,
                &ptr_BONDdata->field_654);
  fVar1 = flt_8004F1F0;
  set_obj_instance_controller_scale((int)&ptr_BONDdata->field_598,scale);
  fVar2 = flt_8004F1F4;
  ptr_BONDdata->field_4E8 = 0;
  *(float *)&ptr_BONDdata->field_4EC = flt_8004F1F8;
  ptr_BONDdata->field_4F0 = 0;
  ptr_BONDdata->field_4F4 = 1.00000000;
  ptr_BONDdata->field_4F8 = 1.00000000;
  ptr_BONDdata->scaled_velocity = 0.00000000;
  ptr_BONDdata->field_500 = 0.00000000;
  ptr_BONDdata->field_504 = 0.00000000;
  ptr_BONDdata->field_508 = 0.00000000;
  ptr_BONDdata->field_50C = 0.00000000;
  ptr_BONDdata->field_510 = 0.00000000;
  ptr_BONDdata->field_514 = 0.00000000;
  ptr_BONDdata->field_518 = 0.00000000;
  ptr_BONDdata->field_51C = 0.00000000;
  ptr_BONDdata->velocity = 0.00000000;
  ptr_BONDdata->field_524 = 0.00000000;
  ptr_BONDdata->field_528 = 0.00000000;
  ptr_BONDdata->field_52C = 0.00000000;
  ptr_BONDdata->field_530 = 0.00000000;
  *(float *)&ptr_BONDdata->field_534 = fVar2;
  ptr_BONDdata->field_538 = 0;
  *(float *)&ptr_BONDdata->field_53C = fVar2;
  ptr_BONDdata->field_540 = 0.00000000;
  ptr_BONDdata->field_4DC = 1;
  ptr_BONDdata->field_4E0 = 1;
  ptr_BONDdata->field_4E4 = 1;
  ptr_BONDdata->field_544 = 0.00000000;
  ptr_BONDdata->field_548 = 0.00000000;
  ptr_BONDdata->field_54C = 0.00000000;
  ptr_BONDdata->stationary_ground_offset = 0.00000000;
  ptr_BONDdata->field_554 = 0.00000000;
  ptr_BONDdata->field_558 = 0.00000000;
  ptr_BONDdata->field_55C = 0.00000000;
  ptr_BONDdata->field_560 = 0.00000000;
  ptr_BONDdata->field_564 = 0.00000000;
  ptr_BONDdata->field_568 = 0.00000000;
  ptr_BONDdata->field_56C = 1.00000000;
  ptr_BONDdata->field_570 = 0.00000000;
  ptr_BONDdata->field_574 = 0.00000000;
  ptr_BONDdata->field_578 = 1.00000000;
  ptr_BONDdata->field_57C = 0.00000000;
  ptr_BONDdata->field_580 = 1.00000000;
  ptr_BONDdata->field_584 = 0.00000000;
  ptr_BONDdata->field_588 = 0.00000000;
  ptr_BONDdata->field_58C = 1.00000000;
  ptr_BONDdata->field_590 = 0.00000000;
  ptr_BONDdata->field_594 = 0;
  piVar5 = &dword_80036AD0;
  do {
    proc_7F0062C0(*piVar5 + ptr_animation_table,(int)(float)piVar5[1],(int)(float)piVar5[2],
                  aiStack16);
    piVar6 = piVar5 + 6;
    *(float *)(piVar5 + 3) = ((float)iStack8 * fVar1) / ((float)piVar5[2] - (float)piVar5[1]);
    piVar5 = piVar6;
  } while (piVar6 != &dword_80036B00);
  ppfVar7 = (float **)dword_8002A790;
  ppfVar3 = (float **)apfStack80;
  do {
    ppfVar8 = ppfVar7 + 3;
    ppfVar4 = ppfVar3 + 3;
    *ppfVar3 = *ppfVar7;
    ppfVar3[1] = ppfVar7[1];
    ppfVar3[2] = ppfVar7[2];
    ppfVar7 = ppfVar8;
    ppfVar3 = ppfVar4;
  } while (ppfVar8 != (float **)0x8002a7cc);
  *ppfVar4 = pfRam8002a7cc;
  proc_7F06FCA8((int)&ptr_BONDdata->field_598,ptr_animation_table + 0x1c,0,extraout_f12,0,
                extraout_f14);
  subcalcpos((int)&ptr_BONDdata->field_598,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  apfStack80[0] = afStack144;
  proc_7F057FD0(apfStack80[0]);
  piStack64 = &ptr_BONDdata->field_6D0;
  subcalcmatrices((float **)apfStack80,(uint)&ptr_BONDdata->field_598,extraout_a2_lo_00,
                  extraout_a3_lo_00);
  *(int *)&ptr_BONDdata->stationary_ground_offset = ptr_BONDdata->field_704;
  ptr_BONDdata->field_554 = 0.00000000;
  *(float *)&ptr_BONDdata->field_558 =
       (float)ptr_BONDdata->field_744 - (float)ptr_BONDdata->field_704;
  *(float *)&ptr_BONDdata->field_55C =
       (float)ptr_BONDdata->field_748 - (float)ptr_BONDdata->field_708;
  proc_7F06FCA8((int)&ptr_BONDdata->field_598,
                (&dword_80036AD0)[ptr_BONDdata->field_4E8 * 6] + ptr_animation_table,0,
                extraout_f12_00,(&FLOAT_80036ad4)[ptr_BONDdata->field_4E8 * 6],extraout_f14_00);
  proc_7F06FDCC((int)&ptr_BONDdata->field_598,(&FLOAT_80036ad4)[ptr_BONDdata->field_4E8 * 6],0);
  proc_7F06FDE8((int)&ptr_BONDdata->field_598,extraout_f12_01);
  proc_7F06FE3C((int)&ptr_BONDdata->field_598,proc_7F08DBB0);
  proc_7F08DBC8();
  return;
}



ulonglong init_pathtable_something(float *param_1,byte *param_2,int **param_3)

{
  int *piVar3;
  longlong lVar1;
  ulonglong uVar2;
  float extraout_f12;
  float extraout_f12_00;
  float fVar4;
  float extraout_f12_01;
  float extraout_f14;
  float fStack12;
  float fStack8;
  float fStack4;
  
  piVar3 = stanMatchTileName(param_2);
  *param_3 = piVar3;
  fVar4 = extraout_f12;
  if ((piVar3 == NULL) || (lVar1 = proc_7F0B036C(), fVar4 = extraout_f12_00, lVar1 == 0)) {
    fStack12 = *param_1;
    fStack8 = param_1[1];
    fStack4 = param_1[2];
    piVar3 = proc_7F0AFB78(&fStack12,&fStack8,&fStack4,fVar4);
    lVar1 = (longlong)(int)piVar3;
    *param_3 = piVar3;
    if (lVar1 == 0) {
      *param_3 = NULL;
    }
    else {
      proc_7F0B0BE4((int *)param_3,extraout_f12_01,extraout_f14,fStack12,fStack4);
      if (lVar1 != 0) {
        return 2;
      }
      *param_3 = NULL;
    }
    uVar2 = 0;
  }
  else {
    uVar2 = 1;
  }
  return uVar2;
}



void init_path_table_links(void)

{
  bool bVar1;
  bool bVar2;
  bool bVar3;
  undefined *puVar4;
  int *piVar5;
  undefined *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int **ppiVar12;
  int *piVar13;
  int **ppiStack152;
  int iStack68;
  int aiStack64 [14];
  int *piStack8;
  
  puVar4 = ptr_setup_path_tbl;
  bVar1 = false;
  piStack8 = (int *)ptr_setup_path_link;
  if ((ptr_setup_path_tbl != NULL) && (iVar11 = 0, -1 < *(int *)ptr_setup_path_tbl)) {
    piVar13 = *(int **)(ptr_setup_path_tbl + 4);
    do {
      iVar8 = *piVar13;
      while (-1 < iVar8) {
        if (iVar8 == iVar11) {
          bVar1 = true;
          if (DAT_80075d20 == 0) {
            iVar8 = piVar13[1];
          }
          else {
            iVar8 = piVar13[1];
          }
        }
        else {
          piVar5 = *(int **)(ptr_setup_path_tbl + iVar8 * 0x10 + 4);
          iVar7 = 0;
          if (*piVar5 < 0) {
            iVar7 = 0;
          }
          else {
            if (iVar11 == *piVar5) {
LAB_7f00696c:
              iVar7 <<= 2;
            }
            else {
              iVar9 = 4;
              while (iVar7 += 1, -1 < *(int *)((int)piVar5 + iVar9)) {
                if (iVar11 == *(int *)(*(int *)(ptr_setup_path_tbl + iVar8 * 0x10 + 4) + iVar9))
                goto LAB_7f00696c;
                iVar9 += 4;
              }
              iVar7 *= 4;
            }
          }
          if (iVar11 == *(int *)((int)piVar5 + iVar7)) {
            iVar8 = piVar13[1];
          }
          else {
            bVar1 = true;
            iVar8 = piVar13[1];
          }
        }
        piVar13 = piVar13 + 1;
      }
      iVar11 += 1;
      if (*(int *)(ptr_setup_path_tbl + iVar11 * 0x10) < 0) break;
      piVar13 = *(int **)(ptr_setup_path_tbl + iVar11 * 0x10 + 1);
    } while( true );
  }
  if (ptr_setup_path_link != NULL) {
    iVar11 = 0;
    if (*(int *)ptr_setup_path_link != 0) {
      ppiStack152 = (int **)ptr_setup_path_link;
      piVar13 = *(int **)ptr_setup_path_link;
      do {
        iVar7 = 0;
        iVar8 = *piVar13;
        while (-1 < iVar8) {
          if (iVar8 == iVar11) {
            bVar1 = true;
            if (DAT_80075d24 == 0) {
              piVar13 = *ppiStack152;
            }
            else {
              piVar13 = *ppiStack152;
            }
          }
          else {
            iVar9 = 0;
            ppiVar12 = (int **)(piStack8 + iVar8 * 3);
            piVar13 = *ppiVar12;
            if (*piVar13 < 0) {
              iVar9 = 0;
            }
            else {
              iVar8 = 0;
              if (iVar11 == *piVar13) {
                iVar9 = 0;
              }
              else {
                iVar10 = piVar13[1];
                piVar5 = piVar13;
                while( true ) {
                  iVar9 += 1;
                  iVar8 += 4;
                  if ((iVar10 < 0) || (iVar11 == *(int *)((int)*ppiVar12 + iVar8))) break;
                  iVar10 = piVar5[2];
                  piVar5 = piVar5 + 1;
                }
                iVar9 *= 4;
              }
            }
            if (iVar11 == *(int *)((int)piVar13 + iVar9)) {
              if (ptr_setup_path_tbl != NULL) {
                proc_7F08F438((int)ppiStack152,(int)ppiVar12,aiStack64,&iStack68);
                if (aiStack64[0] == 0) {
                  bVar1 = true;
                }
                else {
                  if (iStack68 != 0) {
                    piVar13 = *ppiStack152;
                    goto LAB_7f006ad4;
                  }
                  bVar1 = true;
                }
              }
              piVar13 = *ppiStack152;
            }
            else {
              bVar1 = true;
              if (DAT_80075d24 == 0) {
                piVar13 = *ppiStack152;
              }
              else {
                piVar13 = *ppiStack152;
              }
            }
          }
LAB_7f006ad4:
          iVar7 += 4;
          iVar8 = *(int *)((int)piVar13 + iVar7);
        }
        iVar11 += 1;
        ppiStack152 = ppiStack152 + 3;
        if (*ppiStack152 == NULL) break;
        piVar13 = *ppiStack152;
      } while( true );
    }
  }
  if ((puVar4 != NULL) && (piStack8 != NULL)) {
    iVar11 = *piStack8;
    iVar8 = 0;
    piVar13 = piStack8;
    if (iVar11 != 0) {
      do {
        piVar5 = (int *)piVar13[1];
        iVar7 = 0;
        iVar11 = *piVar5;
        while (-1 < iVar11) {
          iVar9 = *(int *)(puVar4 + iVar11 * 0x10 + 8);
          if (iVar9 < 0) {
            *(int *)(puVar4 + iVar11 * 0x10 + 8) = iVar8;
            piVar5 = (int *)piVar13[1];
            iVar11 = (int)piVar5 + iVar7;
          }
          else {
            iVar11 = (int)piVar5 + iVar7;
            if (iVar8 != iVar9) {
              bVar1 = true;
            }
          }
          iVar11 = *(int *)(iVar11 + 4);
          iVar7 += 4;
        }
        piVar5 = piVar13 + 3;
        iVar8 += 1;
        piVar13 = piVar13 + 3;
      } while (*piVar5 != 0);
      iVar11 = *piStack8;
    }
    iVar8 = 0;
    if (-1 < *(int *)puVar4) {
      iVar7 = *(int *)(puVar4 + 8);
      while( true ) {
        iVar8 += 1;
        if (iVar7 < 0) {
          bVar1 = true;
        }
        if (*(int *)(puVar4 + iVar8 * 0x10) < 0) break;
        iVar7 = *(int *)(puVar4 + iVar8 * 0x10 + 2);
      }
    }
    if (iVar11 != 0) {
      piVar13 = (int *)piStack8[1];
      do {
        iVar11 = *piVar13;
        iVar8 = 0;
        if (-1 < iVar11) {
          do {
            if (iVar8 == 0) {
              *(undefined4 *)(puVar4 + iVar11 * 0x10 + 0xc) = 1;
            }
            else {
              *(undefined4 *)(puVar4 + iVar11 * 0x10 + 0xc) = 0;
            }
            piVar13 = (int *)piStack8[1];
            iVar8 += 4;
            iVar11 = *(int *)((int)piVar13 + iVar8);
          } while (-1 < iVar11);
          iVar11 = *piVar13;
        }
        do {
          bVar2 = false;
          bVar3 = false;
          iVar8 = 0;
          if (-1 < iVar11) {
            do {
              puVar6 = puVar4 + iVar11 * 0x10;
              iVar8 += 4;
              if (*(int *)(puVar6 + 0xc) == 1) {
                piVar5 = *(int **)(puVar6 + 4);
                iVar7 = 0;
                iVar11 = *piVar5;
                if (-1 < iVar11) {
                  do {
                    iVar7 += 4;
                    if (*(int *)(puVar4 + iVar11 * 0x10 + 0xc) != 1) {
                      *(undefined4 *)(puVar4 + iVar11 * 0x10 + 0xc) = 1;
                      piVar5 = *(int **)(puVar6 + 4);
                      bVar2 = true;
                    }
                    iVar11 = *(int *)((int)piVar5 + iVar7);
                  } while (-1 < iVar11);
                  piVar13 = (int *)piStack8[1];
                }
              }
              iVar11 = *(int *)((int)piVar13 + iVar8);
            } while (-1 < iVar11);
            iVar11 = *piVar13;
          }
          iVar7 = 0;
          iVar8 = iVar11;
          while (-1 < iVar8) {
            iVar7 += 1;
            if (*(int *)(puVar4 + iVar8 * 0x10 + 0xc) != 1) {
              bVar3 = true;
              break;
            }
            iVar8 = piVar13[iVar7];
          }
        } while ((bVar2) && (bVar3));
        if (bVar3) {
          bVar1 = true;
          if (DAT_80075d24 == 0) {
            iVar11 = piStack8[3];
          }
          else {
            iVar11 = piStack8[3];
          }
        }
        else {
          iVar11 = piStack8[3];
        }
        if (iVar11 == 0) break;
        piVar13 = (int *)piStack8[4];
        piStack8 = piStack8 + 3;
      } while( true );
    }
  }
  if (!bVar1) {
    return;
  }
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



void alloc_explosion_smoke_casing_scorch_impact_buffers(void)

{
  int iVar1;
  int iVar3;
  ulonglong uVar2;
  int iVar4;
  int iVar5;
  undefined2 *puVar6;
  
  DAT_80040170 = 0;
  DAT_80040174 = 0;
  DAT_80040800 = 0;
  DAT_80040804 = 0;
  DAT_80040808 = 0;
  dword_80040178 = 1.00000000;
  DAT_8007a144 = allocate_bytes_in_bank(0x1740,4);
  iVar4 = 0;
  iVar5 = 0;
  do {
    iVar3 = 0;
    *(undefined4 *)((int)DAT_8007a144 + iVar5) = 0;
    do {
      *(undefined2 *)((int)DAT_8007a144 + iVar3 + iVar4 * 0x3e0 + 0x1c) = 0;
      *(undefined2 *)((int)DAT_8007a144 + iVar3 + iVar4 * 0x3e0 + 0x34) = 0;
      *(undefined2 *)((int)DAT_8007a144 + iVar3 + iVar4 * 0x3e0 + 0x4c) = 0;
      iVar1 = iVar3 + iVar4 * 0x3e0;
      iVar3 += 0x60;
      *(undefined2 *)((int)DAT_8007a144 + iVar1 + 100) = 0;
    } while (iVar3 != 0x3c0);
    iVar4 += 1;
    iVar5 += 0x3e0;
  } while (iVar4 < 6);
  DAT_8007a140 = allocate_bytes_in_bank(0x1fe0,4);
  iVar4 = 0;
  iVar5 = 0;
  do {
    *(undefined4 *)((int)DAT_8007a140 + iVar5) = 0;
    *(undefined4 *)((int)DAT_8007a140 + iVar4 * 0x198 + 0x14) = 0;
    *(undefined4 *)((int)DAT_8007a140 + iVar4 * 0x198 + 0x3c) = 0;
    iVar3 = 0x50;
    do {
      *(undefined4 *)((int)DAT_8007a140 + iVar3 + iVar4 * 0x198 + 0x14) = 0;
      *(undefined4 *)((int)DAT_8007a140 + iVar3 + iVar4 * 0x198 + 0x3c) = 0;
      *(undefined4 *)((int)DAT_8007a140 + iVar3 + iVar4 * 0x198 + 100) = 0;
      iVar1 = iVar3 + iVar4 * 0x198;
      iVar3 += 0xa0;
      *(undefined4 *)((int)DAT_8007a140 + iVar1 + 0x8c) = 0;
    } while (iVar3 != 400);
    iVar4 += 1;
    iVar5 += 0x198;
  } while (iVar4 < 0x14);
  uVar2 = get_num_players();
  if (uVar2 == 1) {
    DAT_8007a150 = allocate_bytes_in_bank(0x6e0,4);
    iVar4 = 0;
    do {
      *(undefined2 *)((int)DAT_8007a150 + iVar4) = 0xffff;
      *(undefined2 *)((int)DAT_8007a150 + iVar4 + 0x58) = 0xffff;
      *(undefined2 *)((int)DAT_8007a150 + iVar4 + 0xb0) = 0xffff;
      iVar5 = iVar4 + 0x160;
      *(undefined2 *)((int)DAT_8007a150 + iVar4 + 0x108) = 0xffff;
      iVar4 = iVar5;
    } while (iVar5 != 0x6e0);
  }
  DAT_8007a154 = allocate_bytes_in_bank(8000,4);
  iVar4 = 0;
  do {
    puVar6 = (undefined2 *)((int)DAT_8007a154 + iVar4);
    iVar4 += 0x50;
    *puVar6 = 0xffff;
  } while (iVar4 < 8000);
  uVar2 = get_num_players();
  DAT_8007a148 = 200 / (int)uVar2;
  if (uVar2 == 0) {
    trap(0x1c00);
  }
  if ((uVar2 == 0xffffffffffffffff) && (false)) {
    trap(0x1800);
  }
  iVar4 = proc_7F0BDF04();
  if ((iVar4 == 0x1d) || (iVar4 = proc_7F0BDF04(), iVar4 == 0x1e)) {
    DAT_8007a148 >>= 1;
  }
  DAT_8007a14c = allocate_bytes_in_bank(DAT_8007a148 * 0x78 + 0xfU & 0xfffffff0,4);
  iVar4 = 0;
  if (0 < DAT_8007a148) {
    iVar5 = 0;
    do {
      iVar4 += 1;
      *(undefined4 *)((int)DAT_8007a14c + iVar5) = 0;
      iVar5 += 0x78;
    } while (iVar4 < DAT_8007a148);
  }
  return;
}



void proc_7F007180(void)

{
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  
  iVar2 = proc_7F0BDF04();
  uVar1 = get_num_players();
  DAT_8007a160 = 200 / (int)uVar1;
  if (uVar1 == 0) {
    trap(0x1c00);
  }
  if ((uVar1 == 0xffffffffffffffff) && (false)) {
    trap(0x1800);
  }
  if ((iVar2 == 0x1d) || (iVar2 == 0x1e)) {
    DAT_8007a160 >>= 1;
  }
  DAT_8007a164 = allocate_bytes_in_bank(DAT_8007a160 * 0x68 + 0xfU & 0xfffffff0,4);
  iVar2 = 0;
  if (0 < DAT_8007a160) {
    iVar3 = 0;
    do {
      iVar2 += 1;
      *(undefined4 *)((int)DAT_8007a164 + iVar3) = 0;
      iVar3 += 0x68;
    } while (iVar2 < DAT_8007a160);
  }
  dword_80040940 = 0;
  return;
}



void proc_7F007290(void)

{
  FLOAT_80079e80 = 0.00000000;
  FLOAT_80079e84 = 0.00000000;
  FLOAT_80079e88 = 0.00000000;
  return;
}



void proc_7F0072B0(void)

{
  undefined *puVar1;
  
  DAT_80079e30 = 0;
  DAT_80079e31 = 0;
  DAT_80079e32 = 0;
  puVar1 = &DAT_80079e33;
  do {
    puVar1 = puVar1 + 4;
    puVar1[1] = 0;
    puVar1[2] = 0;
    puVar1[3] = 0;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 != &DAT_80079e7b);
  return;
}



void disable_onscreen_cheat_text(void)

{
  ptr_BONDdata->something_with_cheat_text = '\0';
  ptr_BONDdata->can_display_cheat_text = '\0';
  return;
}



void set_mt_tex_alloc(void)

{
  byte *__nptr;
  long lVar1;
  void *pvVar2;
  
  DAT_8008d090 = 0;
  __nptr = check_token(1,str_Mt);
  if (__nptr != NULL) {
    __nptr = check_token(1,str_Mt_0);
    lVar1 = strtol((char *)__nptr,NULL,0);
    bytes = lVar1 << 10;
  }
  pvVar2 = allocate_bytes_in_bank(bytes,4);
  proc_7F0CBAF4(&ptr_texture_alloc_start,(int)pvVar2,bytes);
  return;
}



void unload_loop_all_guards(void)

{
  int guardcount;
  int iVar1;
  int curguard;
  
  curguard = 0;
  if (0 < num_guards) {
    iVar1 = 0;
    guardcount = num_guards;
    do {
      if (*(int *)(&ptr_guard_data->guardID_1 + iVar1 + 0x1c) != 0) {
        disable_sounds_attached_to_player_then_something
                  (*(int *)(&ptr_guard_data->guardID_1 + iVar1 + 0x18));
        proc_7F03A538(*(int *)((int)&ptr_guard_data->POSdata_pointer + iVar1));
        unset_stateflag_0x04_for_posdata(*(int *)((int)&ptr_guard_data->POSdata_pointer + iVar1));
        set_last_obj_pos_data(*(object_standard **)((int)&ptr_guard_data->POSdata_pointer + iVar1));
        guardcount = num_guards;
      }
      curguard += 1;
      iVar1 += 0x1dc;
    } while (curguard < guardcount);
  }
  return;
}



void unload_loop_all_sfx(void)

{
  ulonglong uVar1;
  int iVar2;
  sfx_register_struct *psVar3;
  
  psVar3 = &sfx_related;
  iVar2 = sfx_related.field_0x0;
  while( true ) {
    if ((iVar2 != 0) && (uVar1 = music_related_26(iVar2), uVar1 != 0)) {
      music_related_28(psVar3->field_0x0);
    }
    psVar3 = psVar3 + 1;
    if (psVar3 == (sfx_register_struct *)&ptr_list_object_lookup_indices) break;
    iVar2 = psVar3->field_0x0;
  }
  return;
}



void unload_alarms_something(void)

{
  stop_alarm();
  proc_7F055EF8();
  return;
}



void cleanupObjects(void)

{
  char cVar1;
  undefined8 uVar2;
  int *object;
  
  if (ptr_setup_objects != NULL) {
    cVar1 = ptr_setup_objects[3];
    object = (int *)ptr_setup_objects;
    while (cVar1 != '0') {
      if (true) {
        switch(cVar1) {
        case '\x01':
        case '\x03':
        case '\x04':
        case '\x05':
        case '\x06':
        case '\a':
        case '\b':
        case '\n':
        case '\v':
        case '\f':
        case '\r':
        case '\x11':
        case '\x14':
        case '\x15':
        case '$':
        case '\'':
        case '(':
        case ')':
        case '*':
        case '+':
        case '-':
        case '/':
          proc_7F041024((int)object,1);
        }
      }
      uVar2 = get_size_of_setup_object_type(object);
      object = object + (int)uVar2;
      cVar1 = *(char *)((int)object + 3);
    }
  }
  return;
}



void cleanupObjectives(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  piVar3 = objective_ptrs + 2;
  iVar2 = 8;
  if (((objective_ptrs[0] != 0) && ((*(byte *)(objective_ptrs[0] + 0xe) & 1) != 0)) &&
     (DAT_80075d58 != 2)) {
    DAT_80075d58 = 1;
  }
  if (((objective_ptrs[1] != 0) && ((*(byte *)(objective_ptrs[1] + 0xe) & 1) != 0)) &&
     (DAT_80075d5c != 2)) {
    DAT_80075d5c = 1;
  }
  do {
    if (*piVar3 == 0) {
      iVar1 = piVar3[1];
    }
    else {
      if ((*(byte *)(*piVar3 + 0xe) & 1) == 0) {
        iVar1 = piVar3[1];
      }
      else {
        if (*(int *)((int)&DAT_80075d58 + iVar2) == 2) {
          iVar1 = piVar3[1];
        }
        else {
          *(int *)((int)&DAT_80075d58 + iVar2) = 1;
          iVar1 = piVar3[1];
        }
      }
    }
    if (iVar1 == 0) {
      iVar1 = piVar3[2];
    }
    else {
      if ((*(byte *)(iVar1 + 0xe) & 1) == 0) {
        iVar1 = piVar3[2];
      }
      else {
        if (*(int *)((int)&DAT_80075d5c + iVar2) == 2) {
          iVar1 = piVar3[2];
        }
        else {
          *(undefined4 *)((int)&DAT_80075d5c + iVar2) = 1;
          iVar1 = piVar3[2];
        }
      }
    }
    if (iVar1 == 0) {
      iVar1 = piVar3[3];
    }
    else {
      if ((*(byte *)(iVar1 + 0xe) & 1) == 0) {
        iVar1 = piVar3[3];
      }
      else {
        if (*(int *)((int)&DAT_80075d60 + iVar2) == 2) {
          iVar1 = piVar3[3];
        }
        else {
          *(undefined4 *)((int)&DAT_80075d60 + iVar2) = 1;
          iVar1 = piVar3[3];
        }
      }
    }
    piVar3 = piVar3 + 4;
    if (((iVar1 != 0) && ((*(byte *)(iVar1 + 0xe) & 1) != 0)) &&
       (*(int *)((int)&DAT_80075d64 + iVar2) != 2)) {
      *(undefined4 *)((int)&DAT_80075d64 + iVar2) = 1;
    }
    iVar2 += 0x10;
  } while (piVar3 != &DAT_80075d58);
  return;
}



void unload_music_related(void)

{
  ulonglong uVar1;
  
  if ((dword_80036458 != 0) && (uVar1 = music_related_26(dword_80036458), uVar1 != 0)) {
    music_related_28(dword_80036458);
  }
  if ((dword_8003645C != 0) && (uVar1 = music_related_26(dword_8003645C), uVar1 != 0)) {
    music_related_28(dword_8003645C);
  }
  return;
}



void proc_7F007770(void)

{
  ulonglong uVar1;
  u32 playernum;
  ulonglong uVar2;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uVar1 = get_num_players();
  playernum = get_cur_playernum();
  uVar2 = 0;
  if (0 < (longlong)uVar1) {
    do {
      set_cur_player((int)uVar2);
      proc_7F08DB08(&uStack4,&uStack8);
      store_favorite_weapon_current_player(uStack4,uStack8);
      uVar2 = SEXT48((int)uVar2 + 1);
    } while (uVar2 != uVar1);
  }
  set_cur_player(playernum);
  return;
}



void unload_loop_all_objects(void)

{
  int iVar1;
  
  DAT_80040170 = 0;
  video_related_9(0.00000000);
  iVar1 = 0;
  if (DAT_8007a144 != 0) {
    do {
      if (*(int *)(DAT_8007a144 + iVar1) != 0) {
        proc_7F03A538(*(int *)(DAT_8007a144 + iVar1));
        unset_stateflag_0x04_for_posdata(*(int *)(DAT_8007a144 + iVar1));
        set_last_obj_pos_data(*(object_standard **)(DAT_8007a144 + iVar1));
        *(undefined4 *)(DAT_8007a144 + iVar1) = 0;
      }
      iVar1 += 0x3e0;
    } while (iVar1 != 0x1740);
  }
  iVar1 = 0;
  if (DAT_8007a140 != 0) {
    do {
      if (*(int *)(DAT_8007a140 + iVar1) != 0) {
        proc_7F03A538(*(int *)(DAT_8007a140 + iVar1));
        unset_stateflag_0x04_for_posdata(*(int *)(DAT_8007a140 + iVar1));
        set_last_obj_pos_data(*(object_standard **)(DAT_8007a140 + iVar1));
        *(undefined4 *)(DAT_8007a140 + iVar1) = 0;
      }
      iVar1 += 0x198;
    } while (iVar1 != 0x1fe0);
  }
  return;
}



void unload_something_7f007920(void)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  iVar2 = 0;
  if (0 < DAT_8007a160) {
    do {
      iVar1 += 1;
      *(undefined4 *)(DAT_8007a164 + iVar2) = 0;
      iVar2 += 0x68;
    } while (iVar1 < DAT_8007a160);
  }
  return;
}



void unload_removed_7f007970(void)

{
  return;
}



void unload_music_related_7F007980(void)

{
  int iVar1;
  ulonglong uVar2;
  int iVar3;
  int iVar4;
  BONDdata **ppBVar5;
  longlong lVar6;
  BONDdata *pBVar7;
  
  lVar6 = 0;
  uVar2 = get_num_players();
  if (0 < (longlong)uVar2) {
    ppBVar5 = &ptr_BONDdata_p1;
    do {
      iVar4 = 0;
      pBVar7 = *ppBVar5;
      while( true ) {
        iVar3 = (int)&pBVar7->unknown + iVar4;
        iVar1 = *(int *)(iVar3 + 0xa44);
        if ((iVar1 != 0) && (uVar2 = music_related_26(iVar1), uVar2 != 0)) {
          music_related_28(*(int *)(iVar3 + 0xa44));
        }
        iVar4 += 0x3a8;
        if (iVar4 == 0x750) break;
        pBVar7 = *ppBVar5;
      }
      lVar6 = (longlong)((int)lVar6 + 1);
      ppBVar5 = ppBVar5 + 1;
      uVar2 = get_num_players();
    } while (lVar6 < (longlong)uVar2);
  }
  return;
}



undefined4 * something_with_gunbarrel_and_rareware_logo_matrix_manip(undefined4 *displaylist)

{
  Gfx *glistp;
  undefined4 *puVar1;
  u32 uVar2;
  float x;
  float x_00;
  float y;
  float y_00;
  
  guTranslate((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_2),x,y,
              num_obj_position_data_entries);
  guTranslate((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_gunbarrel_1),x_00,y_00,DAT_8006957c);
  *displaylist = 0x6000000;
  displaylist[1] = 0x1000000;
  glistp = (Gfx *)insert_imageDL(displaylist + 2);
  puVar1 = proc_7F01C1A4(glistp);
  *puVar1 = 0xfcffffff;
  puVar1[1] = 0xfffdf6fb;
  puVar1[2] = 0xfa000000;
  puVar1[3] = 0xe6e6e600;
  puVar1[4] = 0x6000000;
  puVar1[5] = DAT_80069554 + -0x80000000;
  puVar1[6] = 0x1020040;
  uVar2 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_gunbarrel_1));
  puVar1[7] = uVar2;
  puVar1[8] = 0x6000000;
  puVar1[9] = DAT_80069554 + -0x80000000;
  return puVar1 + 10;
}



Gfx * insert_sight_backdrop_eye_intro(Gfx *glistp)

{
  undefined4 *puVar1;
  u32 uVar2;
  float x;
  float x_00;
  float y;
  float y_00;
  
  guTranslate((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_2),x,y,
              num_obj_position_data_entries + 768.00000000);
  guScale((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_gunbarrel_1),x_00,y_00,2.70000005);
  *(undefined4 *)(*glistp + 4) = 0x1000000;
  *(undefined4 *)*glistp = 0x6000000;
  *(undefined4 *)(*glistp + 0xc) = 0x1000040;
  *(undefined4 *)(*glistp + 8) = 0x6000000;
  puVar1 = proc_7F01C1A4(glistp + 1);
  *puVar1 = 0x1000040;
  uVar2 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_gunbarrel_1));
  puVar1[1] = uVar2;
  puVar1[2] = 0x6000000;
  puVar1[3] = DAT_80069554 + -0x80000000;
  return (Gfx *)(puVar1 + 4);
}



undefined4 * proc_7F007CC8(undefined4 *param_1,int param_2,int *param_3,int *param_4)

{
  undefined4 *puVar1;
  
  *param_1 = 0xb900031d;
  param_1[1] = 0xf0a4000;
  param_1[2] = 0xba001402;
  param_1[3] = 0;
  param_1[4] = 0xba001301;
  param_1[5] = 0;
  param_1[6] = 0xba000c02;
  param_1[7] = 0;
  param_1[8] = 0xe7000000;
  param_1[9] = 0;
  puVar1 = proc_7F01B240(param_1 + 10,DAT_8006958c + -0x80000000,(longlong)param_2,param_3,param_4);
  return puVar1;
}



Gfx * insert_sniper_sight_eye_intro(Gfx *glistp)

{
  undefined4 *puVar1;
  short sVar3;
  Gfx *pabVar2;
  float fVar4;
  int iStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  int iStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  iStack12 = DAT_8002a7dc;
  uStack8 = DAT_8002a7e0;
  uStack4 = DAT_8002a7e4;
  iStack24 = dword_8002A7E8;
  uStack20 = DAT_8002a7ec;
  uStack16 = DAT_8002a7f0;
  *(undefined4 *)*glistp = 0x6000000;
  *(undefined4 *)(*glistp + 4) = 0x1000000;
  puVar1 = insert_imageDL((undefined4 *)(*glistp + 8));
  puVar1[1] = 0xfffff7fb;
  *puVar1 = 0xfc11fe23;
  sVar3 = get_video2_settings_txtClipW();
  fVar4 = truncf(((float)(int)sVar3 * num_obj_position_data_entries) / 1280.00000000);
  pabVar2 = (Gfx *)proc_7F007CC8(puVar1 + 2,(int)fVar4,&iStack12,&iStack24);
  return pabVar2;
}



undefined4 * proc_7F007E70(undefined4 *param_1,uint param_2)

{
  undefined4 *puVar1;
  short sVar2;
  short sVar3;
  
  puVar1 = proc_7F01C1A4((Gfx *)param_1);
  *puVar1 = 0xb900031d;
  puVar1[1] = 0x504340;
  puVar1[2] = 0xfcffffff;
  puVar1[3] = 0xfffdf6fb;
  puVar1[4] = 0xfa000000;
  puVar1[5] = param_2 & 0xff;
  puVar1[6] = 0xba000602;
  puVar1[7] = 0;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  puVar1[8] = ((int)sVar3 & 0x3ffU) << 2 | 0xf6000000 | ((int)sVar2 & 0x3ffU) << 0xe;
  puVar1[9] = 0;
  return puVar1 + 10;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F007F30(void)

{
  ushort **ppuVar1;
  int *piVar2;
  int **in_v0_lo;
  float *pfVar3;
  int *piVar4;
  uint *puVar5;
  undefined4 in_a0_lo;
  int in_a1_lo;
  uint extraout_a1_lo;
  ushort *partdesc;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a2_lo_03;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  undefined4 extraout_a3_lo_03;
  int **ppiVar6;
  int iVar7;
  float **ppfVar8;
  float **ppfVar9;
  float **ppfVar10;
  float **ppfVar11;
  int iVar13;
  longlong lVar12;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float in_f14;
  float extraout_f14;
  float extraout_f14_00;
  undefined4 auStack216 [16];
  undefined4 auStack152 [21];
  float *pfStack68;
  undefined4 uStack64;
  undefined4 uStack60;
  undefined4 uStack56;
  int **ppiStack52;
  undefined4 uStack20;
  
  ppfVar10 = (float **)&buffer_8002a7fc;
  ppfVar8 = &pfStack68;
  do {
    ppfVar11 = ppfVar10 + 3;
    ppfVar9 = ppfVar8 + 3;
    *ppfVar8 = *ppfVar10;
    ppfVar8[1] = ppfVar10[1];
    ppfVar8[2] = ppfVar10[2];
    ppfVar10 = ppfVar11;
    ppfVar8 = ppfVar9;
  } while (ppfVar11 != (float **)&DWORD_8002a838);
  piVar4 = NULL;
  iVar13 = 0;
  *(dword *)ppfVar9 = DWORD_8002a838;
  piVar2 = NULL;
  if (0 < in_a1_lo) {
    do {
      piVar4 = piVar2;
      ppiVar6 = (int **)((int)DAT_80069594 + 1);
      in_v0_lo = DAT_80069594;
      if (-1 < (int)DAT_80069594) {
        DAT_80069594 = ppiVar6;
        if (ppiVar6 == (int **)((int)&USHORT_00000088 + 1)) {
          DAT_80069594 = ppiVar6;
          proc_7F06FCA8(DAT_8002a7f4,ptr_animation_table + 0x4298,0,in_f12,0x40000000,in_f14);
          in_f12 = extraout_f12;
        }
        in_v0_lo = DAT_80069594;
        if (DAT_80069594 == (int **)&USHORT_000000d4) {
          in_v0_lo = DAT_80069594;
          proc_7F06FE4C(DAT_8002a7f4,0x3fcccccd,in_f12);
        }
      }
      proc_7F070AEC(DAT_8002a7f4,1,1);
      in_f12 = extraout_f12_00;
      in_f14 = extraout_f14;
      if (DAT_80069594 == (int **)&USHORT_000000e6) {
        piVar4 = (int *)((int)&rgba + 1);
        in_v0_lo = play_sfx_a1(ptr_sfx_buf,0x6f,NULL);
        in_f12 = extraout_f12_01;
        in_f14 = extraout_f14_00;
      }
      iVar13 += 1;
      piVar2 = piVar4;
    } while (iVar13 != in_a1_lo);
  }
  lVar12 = 0;
  set_80036084(1);
  proc_7F073FC8(0x50);
  subcalcpos(DAT_8002a7f4,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  ppuVar1 = *(ushort ***)(*(int *)(DAT_8002a7f8 + 8) + 8);
  partdesc = *ppuVar1;
  if (partdesc == NULL) {
    partdesc = ppuVar1[2];
  }
  else {
    in_v0_lo = (int **)extract_id_from_object_structure_microcode(DAT_8002a7f8,partdesc);
    *(short *)in_v0_lo = (short)piVar4;
    partdesc = *(ushort **)(*(int *)(*(int *)(DAT_8002a7f8 + 8) + 8) + 8);
  }
  if (partdesc != NULL) {
    in_v0_lo = (int **)extract_id_from_object_structure_microcode(DAT_8002a7f8,partdesc);
    *in_v0_lo = piVar4;
  }
  proc_7F0BD714((int)*(short *)(*(int *)(DAT_8002a7f4 + 8) + 0xe) << 6);
  ppiStack52 = in_v0_lo;
  subcalcmatrices(&pfStack68,DAT_8002a7f4,extraout_a2_lo_00,extraout_a3_lo_00);
  pfVar3 = (float *)proc_7F06C660(DAT_8002a7f4,*(ushort **)(DAT_8002a7f8 + 0x1c),0);
  pfStack68 = pfVar3;
  proc_7F0BD714((int)*(short *)(*(int *)(DAT_8002a7f8 + 8) + 0xe) << 6);
  ppiStack52 = (int **)pfVar3;
  instcalcmatrices(&pfStack68,DAT_8002a7f8,extraout_a2_lo_01,extraout_a3_lo_01);
  piVar4 = proc_7F06B120(NULL,DAT_8002a7f4);
  piVar4 = proc_7F06B120(piVar4,DAT_8002a7f8);
  proc_7F06B29C(piVar4);
  puVar5 = (uint *)proc_7F06BB28((int)piVar4);
  uStack20 = 7;
  uStack64 = 0;
  uStack60 = 1;
  uStack56 = in_a0_lo;
  drawjointlist((int)&pfStack68,puVar5,extraout_a2_lo_02,extraout_a3_lo_02);
  uStack60 = 2;
  drawjointlist((int)&pfStack68,puVar5,extraout_a2_lo_03,extraout_a3_lo_03);
  set_80036084(0);
  proc_7F06B248((int)puVar5);
  iVar13 = 0;
  if (0 < *(short *)(*(int *)(DAT_8002a7f4 + 8) + 0xe)) {
    iVar7 = *(int *)(DAT_8002a7f4 + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar7 + iVar13),auStack152);
      proc_7F058C9C((int)auStack152,(uint *)(*(int *)(DAT_8002a7f4 + 0xc) + (int)lVar12 * 0x40));
      lVar12 = (longlong)((int)lVar12 + 1);
      iVar13 += 0x40;
      if ((longlong)*(short *)(*(int *)(DAT_8002a7f4 + 8) + 0xe) <= lVar12) break;
      iVar7 = *(int *)(DAT_8002a7f4 + 0xc);
    }
  }
  lVar12 = 0;
  iVar13 = 0;
  if (0 < *(short *)(*(int *)(DAT_8002a7f8 + 8) + 0xe)) {
    iVar7 = *(int *)(DAT_8002a7f8 + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar7 + iVar13),auStack216);
      proc_7F058C9C((int)auStack216,(uint *)(*(int *)(DAT_8002a7f8 + 0xc) + (int)lVar12 * 0x40));
      lVar12 = (longlong)((int)lVar12 + 1);
      iVar13 += 0x40;
      if ((longlong)*(short *)(*(int *)(DAT_8002a7f8 + 8) + 0xe) <= lVar12) break;
      iVar7 = *(int *)(DAT_8002a7f8 + 0xc);
    }
  }
  return uStack56;
}



void insert_bond_eye_intro(undefined4 *displaylist)

{
  u32 uVar1;
  float x;
  float fovy;
  float y;
  float aspect;
  float extraout_f14;
  ushort local_42;
  float afStack64 [16];
  
  guTranslate((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_intro_backdrop),x,y,0.00000000);
  guPerspective((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_intro_bond),&local_42,fovy,aspect,
                46.00000000,1.33333337,10.00000000);
  *displaylist = 0xbc00000e;
  displaylist[1] = (uint)local_42;
  displaylist[2] = 0xfcffffff;
  displaylist[3] = 0xfffe793c;
  displaylist[4] = 0xb900031d;
  displaylist[5] = 0x552048;
  displaylist[6] = 0x1030040;
  uVar1 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_intro_bond));
  displaylist[7] = uVar1;
  displaylist[8] = 0x1020040;
  uVar1 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_intro_backdrop));
  displaylist[9] = uVar1;
  proc_7F059694(afStack64,FLOAT_8002a844,extraout_f14,dword_8002A83C,FLOAT_8002a840,FLOAT_8002a844,
                FLOAT_8002a848 + dword_8002A83C,FLOAT_8002a84c + FLOAT_8002a840,
                flt_8002A850 + FLOAT_8002a844,dword_8002A854);
  proc_7F007F30();
  return;
}



undefined4 *
load_display_rare_logo
          (undefined4 *param_1,undefined8 param_2,undefined8 param_3,int param_4,uint param_5)

{
  undefined4 *puVar1;
  u32 uVar2;
  uint uVar3;
  float fovy;
  float a;
  float aspect;
  float yEye;
  float x;
  ushort local_6 [3];
  
  dword_8002A880 = (f32)(float)param_4;
  *param_1 = 0x6000000;
  param_1[1] = 0x1000000;
  puVar1 = insert_imageDL(param_1 + 2);
  guPerspective((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_0),local_6,fovy,aspect,
                60.00000000,1.33333337,100.00000000);
  *puVar1 = 0xbc00000e;
  puVar1[1] = (uint)local_6[0];
  puVar1[2] = 0x1030040;
  uVar2 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_0));
  puVar1[3] = uVar2;
  puVar1[5] = 0xffffffff;
  puVar1[4] = 0xb6000000;
  puVar1[6] = 0xb7000000;
  puVar1[7] = 0x62204;
  guLookAt((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_1),(float)dword_8002A880,yEye,
           dword_8002A878,dword_8002A87C,(float)dword_8002A880,DAT_8002a884 + dword_8002A878,
           DAT_8002a888 + dword_8002A87C,flt_8002A88C + (float)dword_8002A880,dword_8002A890);
  puVar1[8] = 0x1020040;
  uVar2 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_1));
  puVar1[9] = uVar2;
  guRotate((Mtx *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_2),a,x,a,0.00000000);
  a = a + 2.00000000;
  puVar1[10] = 0x1000040;
  uVar2 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_2));
  puVar1[0xb] = uVar2;
  puVar1[0xc] = 0xbc000002;
  puVar1[0xd] = 0x80000040;
  puVar1[0xe] = 0x3860010;
  puVar1[0xf] = 0x8002a868;
  puVar1[0x10] = 0x3880010;
  puVar1[0x11] = 0x8002a860;
  stru_8002A860.R = (char)param_5;
  stru_8002A860.G = stru_8002A860.R;
  stru_8002A860.B = stru_8002A860.R;
  stru_8002A864.R = stru_8002A860.R;
  stru_8002A864.G = stru_8002A860.R;
  stru_8002A864.B = stru_8002A860.R;
  puVar1[0x12] = 0xe7000000;
  puVar1[0x13] = 0;
  puVar1[0x15] = 0;
  puVar1[0x14] = 0xe7000000;
  puVar1[0x17] = 0xfffff9fc;
  puVar1[0x16] = 0xfc127e24;
  puVar1[0x19] = 0x80000;
  puVar1[0x18] = 0xba001301;
  puVar1[0x1a] = 0xba001102;
  puVar1[0x1b] = 0;
  puVar1[0x1c] = 0xba001001;
  puVar1[0x1d] = 0;
  puVar1[0x1e] = 0xba000e02;
  puVar1[0x1f] = 0;
  puVar1[0x21] = 0x2000;
  puVar1[0x20] = 0xba000c02;
  puVar1[0x22] = 0xba000903;
  puVar1[0x23] = 0xc00;
  puVar1[0x25] = 0;
  puVar1[0x24] = 0xe7000000;
  puVar1[0x27] = 0;
  puVar1[0x26] = 0xe7000000;
  puVar1[0x28] = 0xbb000001;
  puVar1[0x29] = 0x8000800;
  puVar1[0x2b] = 0x2004fe8;
  puVar1[0x2a] = 0xfd100000;
  puVar1[0x2c] = 0xf5100000;
  puVar1[0x2d] = 0x7014050;
  puVar1[0x2e] = 0xe6000000;
  puVar1[0x2f] = 0;
  puVar1[0x31] = 0x73ff100;
  puVar1[0x30] = 0xf3000000;
  puVar1[0x33] = 0;
  puVar1[0x32] = 0xe7000000;
  puVar1[0x35] = 82000;
  puVar1[0x34] = 0xf5101000;
  puVar1[0x36] = 0xf2000000;
  uVar3 = param_5 & 0xff;
  puVar1[0x37] = 0x7c07c;
  puVar1[0x38] = 0xfa000000;
  puVar1[0x39] = uVar3 << 0x18 | uVar3 << 0x10 | uVar3 << 8 | 0xff;
  puVar1[0x3a] = 0x6000000;
  puVar1[0x3b] = 0x20043e8;
  puVar1[0x3d] = 0x20044b0;
  puVar1[0x3c] = 0x6000000;
  puVar1[0x3f] = 0x2005ff0;
  puVar1[0x3e] = 0xfd100000;
  puVar1[0x41] = 0x7014050;
  puVar1[0x40] = 0xf5100000;
  puVar1[0x43] = 0;
  puVar1[0x42] = 0xe6000000;
  puVar1[0x45] = 0x73ff100;
  puVar1[0x44] = 0xf3000000;
  puVar1[0x47] = 0;
  puVar1[0x46] = 0xe7000000;
  puVar1[0x49] = 82000;
  puVar1[0x48] = 0xf5101000;
  puVar1[0x4a] = 0xf2000000;
  puVar1[0x4b] = 0x7c07c;
  puVar1[0x4c] = 0xfa000000;
  uVar3 = (int)(param_5 * 0xf0) / 0xff & 0xff;
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (param_5 * 0xf0 == -0x80000000)) {
    trap(0x1800);
  }
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (param_5 * 0xd0 == -0x80000000)) {
    trap(0x1800);
  }
  puVar1[0x4d] = uVar3 << 0x18 | ((int)(param_5 * 0xd0) / 0xff & 0xffU) << 0x10 | uVar3 << 8 | 0xff;
  puVar1[0x4e] = 0x6000000;
  puVar1[0x4f] = 0x2004758;
  return puVar1 + 0x50;
}



void proc_7F008B58(ulonglong param_1,u32 param_2)

{
  virtualaddress = (void *)param_1;
  dword_8002A7D4 = 0;
  num_obj_position_data_entries = 0x445c0000;
  a = -40.00000000;
  intro_eye_counter = 0;
  romCopy(virtualaddress,&Globalimagetable_commandblock,0x6800);
  return;
}



undefined4 * retrieve_display_rareware_logo(undefined4 *param_1)

{
  bool bVar1;
  u32 uVar2;
  int iVar3;
  undefined4 *puVar4;
  int iVar5;
  
  DAT_8002a7d0 = 1 - DAT_8002a7d0;
  *param_1 = 0xbc000806;
  puVar4 = param_1 + 2;
  uVar2 = osVirtualToPhysical(virtualaddress);
  param_1[1] = uVar2;
  if ((dword_8002A7D4 == '\0') || (dword_8002A7D4 == '\x01')) {
    iVar3 = intro_eye_counter * 0xff;
    iVar5 = iVar3 / 0x46;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar3 == -0x80000000)) {
      trap(0x1800);
    }
    if (0xff < iVar5) {
      iVar5 = 0xff;
    }
    if (iVar5 < 0) {
      iVar5 = 0;
    }
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar3 + -0x9f60 == -0x80000000)) {
      trap(0x1800);
    }
    iVar3 = 0xff - (iVar3 + -0x9f60) / 0x46;
    if (0xff < iVar3) {
      iVar3 = 0xff;
    }
    if (iVar3 < 0) {
      iVar3 = 0;
    }
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar5 * iVar3 == -0x80000000)) {
      trap(0x1800);
    }
    puVar4 = load_display_rare_logo
                       (puVar4,0x193,0x1e8,(int)num_obj_position_data_entries,(iVar5 * iVar3) / 0xff
                       );
    bVar1 = 0x103 < intro_eye_counter;
    intro_eye_counter += 1;
    if ((bVar1) && (0x121 < intro_eye_counter)) {
      intro_eye_counter = 0;
      dword_8002A7D4 += '\x02';
    }
  }
  return puVar4;
}



ulonglong proc_7F008DD0(void)

{
  return (ulonglong)(dword_8002A7D4 == '\x02');
}



void proc_7F008DE4(ushort **param_1,int *param_2)

{
  DAT_8006958c = *param_1;
  *param_2 = *param_2 + -0x40400;
  DAT_80069588 = *param_1 + 0x20200;
  *param_1 = DAT_80069588;
  romCopy(DAT_80069588,&unknown2,0x1a580);
  proc_7F01B0E0(DAT_80069588,(byte *)DAT_8006958c);
  return;
}



void proc_7F008E80(short *param_1,int param_2)

{
  ushort uVar1;
  short *psVar2;
  uint *puVar3;
  int iVar4;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  uint uVar5;
  float l;
  f32 scale;
  float extraout_f12;
  f32 extraout_f12_00;
  float extraout_f12_01;
  f32 scale_00;
  float r;
  f32 extraout_f14;
  float extraout_f14_00;
  uint *local_res0;
  int local_res4 [3];
  int aiStack32 [4];
  float local_10;
  undefined4 local_c;
  undefined4 local_8;
  
  dword_8002A7D4 = 2;
  local_res0 = (uint *)param_1;
  local_res4[0] = param_2;
  guOrtho(matrix_buffer_gunbarrel_0,l,r,0.00000000,1280.00000000,0.00000000,960.00000000,1.00000000)
  ;
  psVar2 = (short *)local_res0;
  num_obj_position_data_entries = 0xc1f00000;
  pos_data_entry = 0x43f10000;
  DAT_8006957c = 0xc2c80000;
  DAT_80069580 = 0x43f10000;
  DAT_80069584 = 0x42;
  DAT_80069550 = (short *)local_res0;
  local_res0 = (uint *)((short *)local_res0 + 0x100);
  local_res4[0] += -0x200;
  proc_7F01BAE0(psVar2,0x1e);
  puVar3 = local_res0;
  DAT_80069554 = local_res0;
  local_res0 = local_res0 + 0x40;
  local_res4[0] += -0x100;
  proc_7F01BFF8(puVar3,(uint)(DAT_80069550 + -0x40000000),0x1e);
  proc_7F008DE4((ushort **)register0x000000ec,local_res4);
  local_10 = dword_8002A8A8;
  local_c = dword_8002A8AC;
  local_8 = dword_8002A8B0;
  proc_7F0CBAF4(aiStack32,(int)local_res0,0x12c00);
  local_res0 = local_res0 + 0x4b00;
  local_res4[0] += -0x12c00;
  load_object_fill_header
            (c_item_entries[5].header,(int *)c_item_entries[5].filename,(int)local_res0,
             local_res4[0],(int)aiStack32);
  iVar4 = proc_7F0BD188((byte *)c_item_entries[5].filename);
  uVar5 = (iVar4 + 0x3fU | 0x3f) ^ 0x3f;
  local_res0 = (uint *)((int)local_res0 + uVar5);
  local_res4[0] -= uVar5;
  load_object_fill_header
            (c_item_entries[78].header,(int *)c_item_entries[78].filename,(int)local_res0,
             local_res4[0],(int)aiStack32);
  iVar4 = proc_7F0BD188((byte *)c_item_entries[78].filename);
  uVar5 = (iVar4 + 0x3fU | 0x3f) ^ 0x3f;
  local_res4[0] -= uVar5;
  local_res0 = (uint *)((int)local_res0 + uVar5);
  DAT_8002a7f4 = setup_chr_instance(5,0x4e,c_item_entries[5].header,c_item_entries[78].header,0);
  set_obj_instance_controller_scale(DAT_8002a7f4,scale);
  proc_7F06CE84(DAT_8002a7f4,0x3f800000);
  setsuboffset(DAT_8002a7f4,&local_10,extraout_a2_lo,extraout_a3_lo);
  setsubroty(DAT_8002a7f4,extraout_f12,0.00000000,extraout_a2_lo_00);
  proc_7F06FF18(DAT_8002a7f4,extraout_f12_00,extraout_f14);
  uVar1 = *(ushort *)(ptr_animation_table + 0x4148);
  iVar4 = (uint)uVar1 - 0x44;
  if (iVar4 < 0) {
    iVar4 += (uint)uVar1;
    while (iVar4 < 0) {
      iVar4 += (uint)uVar1;
    }
  }
  proc_7F06FCA8(DAT_8002a7f4,ptr_animation_table + 0x4144,0,extraout_f12_01,(float)iVar4,
                extraout_f14_00);
  load_object_fill_header
            ((object_header *)PitemZ_entries[191].header,(int *)PitemZ_entries[191].filename,
             (int)local_res0,local_res4[0],(int)aiStack32);
  iVar4 = proc_7F0BD188((byte *)PitemZ_entries[191].filename);
  uVar5 = (iVar4 + 0x3fU | 0x3f) ^ 0x3f;
  local_res4[0] -= uVar5;
  local_res0 = (uint *)((int)local_res0 + uVar5);
  set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[191].header);
  DAT_8002a7f8 = get_obj_instance_controller_for_header(PitemZ_entries[191].header);
  set_obj_instance_controller_scale(DAT_8002a7f8,scale_00);
  *(uint *)(DAT_8002a7f8 + 0x18) = DAT_8002a7f4;
  *(undefined4 *)(DAT_8002a7f8 + 0x1c) =
       *(undefined4 *)(*(int *)(*(int *)(DAT_8002a7f4 + 8) + 8) + 0xc);
  DAT_80069594 = 0;
  return;
}



void proc_7F00920C(void)

{
  if (DAT_8002a7f4 != NULL) {
    set_aircraft_obj_inst_scale_to_zero(DAT_8002a7f4);
  }
  if (DAT_8002a7f8 != NULL) {
    set_obj_instance_scale_to_zero(DAT_8002a7f8);
  }
  return;
}



longlong proc_7F009254(longlong param_1)

{
  bool bVar1;
  ulonglong uVar2;
  short sVar4;
  Gfx *glistp;
  undefined4 *puVar3;
  ushort x;
  
  glistp = (Gfx *)param_1;
  DAT_8002a7d0 = 1 - DAT_8002a7d0;
  switch(dword_8002A7D4) {
  case '\x02':
    puVar3 = something_with_gunbarrel_and_rareware_logo_matrix_manip((undefined4 *)glistp);
    param_1 = (longlong)(int)puVar3;
    num_obj_position_data_entries = num_obj_position_data_entries + 6.00000000;
    if (DAT_80069584 < 0) {
      DAT_80069584 = 200;
      DAT_8006957c = num_obj_position_data_entries - 12.00000000;
    }
    else {
      DAT_80069584 += -6;
    }
    if (flt_8004F2FC < num_obj_position_data_entries) {
      dword_8002A7D4 += '\x01';
      num_obj_position_data_entries = flt_8004F300;
    }
    break;
  case '\x03':
    *(undefined4 *)*glistp = 0x6000000;
    *(undefined4 *)(*glistp + 4) = 0x1000000;
    puVar3 = insert_imageDL((undefined4 *)(*glistp + 8));
    puVar3 = insert_imageDL(puVar3);
    puVar3 = insert_imageDL(puVar3);
    puVar3 = insert_imageDL(puVar3);
    glistp = (Gfx *)insert_imageDL(puVar3);
    glistp = insert_sniper_sight_eye_intro(glistp);
    glistp = insert_sight_backdrop_eye_intro(glistp);
    param_1 = (longlong)(int)glistp;
    if (num_obj_position_data_entries < 600.00000000) {
      insert_bond_eye_intro((undefined4 *)glistp);
    }
    num_obj_position_data_entries = num_obj_position_data_entries - flt_8004F304;
    if (num_obj_position_data_entries <= -80.00000000) {
      dword_8002A7D4 += '\x01';
      intro_eye_counter = 0x14;
    }
    break;
  case '\x04':
    glistp = insert_sniper_sight_eye_intro(glistp);
    glistp = insert_sight_backdrop_eye_intro(glistp);
    param_1 = (longlong)(int)glistp;
    insert_bond_eye_intro((undefined4 *)glistp);
    intro_eye_counter -= 1;
    if ((int)intro_eye_counter < 0) {
      dword_8002A7D4 += '\x01';
      die_blood_image_routine(0);
      intro_state_blood_animation = 0;
      param_1 = (longlong)(int)param_1;
      intro_eye_counter = 1;
    }
    break;
  case '\x05':
    intro_eye_counter -= 1;
    if (intro_eye_counter == 0) {
      uVar2 = die_blood_image_routine(1);
      intro_state_blood_animation = (int)uVar2;
      intro_eye_counter = 2;
    }
    glistp = insert_sniper_sight_eye_intro(glistp);
    glistp = insert_sight_backdrop_eye_intro(glistp);
    insert_bond_eye_intro((undefined4 *)glistp);
    puVar3 = proc_7F01C400((undefined4 *)glistp);
    param_1 = (longlong)(int)puVar3;
    if (intro_state_blood_animation != 0) {
      dword_8002A7D4 += '\x01';
      DAT_80069584 = 0;
      DAT_8006957c = num_obj_position_data_entries;
      intro_eye_counter = 0;
    }
    break;
  case '\x06':
    intro_eye_counter += 1;
    x = DAT_80069584 + 0x38e;
    DAT_80069584 = DAT_80069584 + 0x38e;
    sVar4 = sins(x);
    num_obj_position_data_entries =
         ((float)(int)sVar4 * 64.00000000) / 32768.00000000 + DAT_8006957c;
    glistp = insert_sniper_sight_eye_intro(glistp);
    glistp = insert_sight_backdrop_eye_intro(glistp);
    param_1 = (longlong)(int)glistp;
    insert_bond_eye_intro((undefined4 *)glistp);
    proc_7F01CA18((Gfx *)param_1);
    if (0x6b < (int)intro_eye_counter) {
      intro_eye_counter = 0;
      dword_8002A7D4 += '\x01';
    }
    break;
  case '\a':
    x = DAT_80069584 + 0x38e;
    DAT_80069584 = DAT_80069584 + 0x38e;
    sVar4 = sins(x);
    num_obj_position_data_entries =
         ((float)(int)sVar4 * 64.00000000) / 32768.00000000 + DAT_8006957c;
    glistp = insert_sniper_sight_eye_intro(glistp);
    glistp = insert_sight_backdrop_eye_intro(glistp);
    insert_bond_eye_intro((undefined4 *)glistp);
    proc_7F01CA18(glistp);
    intro_eye_counter += 8;
    puVar3 = proc_7F007E70((undefined4 *)glistp,intro_eye_counter);
    param_1 = (longlong)(int)puVar3;
    if (0xf6 < (int)intro_eye_counter) {
      intro_eye_counter = 0;
      dword_8002A7D4 += '\x01';
    }
    break;
  case '\b':
    *(undefined4 *)*glistp = 0x6000000;
    *(undefined4 *)(*glistp + 4) = 0x1000000;
    puVar3 = insert_imageDL((undefined4 *)(*glistp + 8));
    param_1 = (longlong)(int)puVar3;
    bVar1 = 0x1d < (int)intro_eye_counter;
    intro_eye_counter += 1;
    if (bVar1) {
      intro_eye_counter = 0;
      dword_8002A7D4 += '\x01';
    }
  }
  return param_1;
}



ulonglong proc_7F009744(void)

{
  return (ulonglong)(dword_8002A7D4 == '\t');
}



uint * write_text_at_abs_coord
                 (uint *param_1,uint *param_2,uint *param_3,byte *param_4,int param_5,int param_6,
                 uint param_7,int param_8,int param_9,int param_10,int param_11)

{
  uint *puVar1;
  
  if (j_text_trigger == 0) {
    puVar1 = en_text_write_stuff(param_1,(int *)param_2,(int *)param_3,param_4,param_5,param_6,
                                 param_7,param_8,param_9,param_10,param_11);
  }
  else {
    puVar1 = jp_text_stuff(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                           (uint)dword_8002A9B0 << 0x18 | (uint)dword_8002A9B4 << 0x10 |
                           (uint)dword_8002A9B8 << 8 | (uint)dword_8002A9BC,param_8,param_9,param_10
                           ,param_11);
  }
  return puVar1;
}



ulonglong check_if_cheat_available(u32 cheat)

{
  ulonglong uVar1;
  save_file *folder;
  u32 uVar2;
  
  switch(cheat) {
  case 1:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
  case 9:
  case 0xd:
  case 0x10:
  case 0x16:
  case 0x19:
  case 0x23:
  case 0x24:
  case 0x25:
  case 0x26:
  case 0x27:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
  case 0x2c:
  case 0x2d:
  case 0x2e:
  case 0x2f:
  case 0x30:
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
  case 0x3a:
  case 0x3b:
  case 0x3c:
  case 0x3d:
  case 0x3e:
  case 0x3f:
  case 0x40:
  case 0x41:
  case 0x42:
  case 0x43:
  case 0x44:
  case 0x45:
  case 0x46:
  case 0x47:
  case 0x48:
  case 0x49:
  case 0x4a:
    uVar1 = 0;
    break;
  case 2:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,1);
    break;
  case 3:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0x13);
    break;
  case 10:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,10);
    break;
  case 0xb:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0xf);
    break;
  case 0xc:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,2);
    break;
  case 0xe:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,7);
    break;
  case 0xf:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0);
    break;
  case 0x11:
    uVar2 = check_cradle_completed_in_folder(selected_folder_num);
    uVar1 = SEXT48((int)uVar2);
    break;
  case 0x12:
    uVar2 = check_aztec_completed_in_folder_secret_00(selected_folder_num);
    uVar1 = SEXT48((int)uVar2);
    break;
  case 0x13:
    uVar2 = check_egypt_completed_in_folder_00(selected_folder_num);
    uVar1 = SEXT48((int)uVar2);
    break;
  case 0x14:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0xd);
    break;
  case 0x15:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0x11);
    break;
  case 0x17:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,6);
    break;
  case 0x18:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,5);
    break;
  case 0x1a:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,9);
    break;
  case 0x1b:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0xc);
    break;
  case 0x1c:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0xb);
    break;
  case 0x1d:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,4);
    break;
  case 0x1e:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,3);
    break;
  case 0x1f:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0x10);
    break;
  case 0x20:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,8);
    break;
  case 0x21:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0xe);
    break;
  case 0x22:
    folder = getEEPROMforFoldernum(selected_folder_num);
    uVar1 = check_if_cheat_unlocked(folder,0x12);
    break;
  default:
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  return uVar1;
}



int getplayerfavoredweapon(int param_1,int param_2)

{
  int iVar1;
  
  iVar1 = get_ptr_long_watch_text_for_item((&(&fav_weapon_player1)[param_1].right)[param_2]);
  return iVar1;
}



int menu_control_stick_tracking(void)

{
  char cVar3;
  int iVar1;
  int iVar2;
  int iVar4;
  f32 fVar5;
  f32 fVar6;
  
  cVar3 = get_cur_controller_horz_stick_pos('\0');
  iVar1 = get_cur_controller_vert_stick_pos('\0');
  iVar1 = iVar1 * -0x1000000 >> 0x18;
  if (cVar3 < -5) {
    iVar4 = ((int)cVar3 + 5) * 0x1000000 >> 0x18;
  }
  else {
    if (cVar3 < '\x06') {
      iVar4 = 0;
    }
    else {
      iVar4 = ((int)cVar3 + -5) * 0x1000000 >> 0x18;
    }
  }
  if (iVar4 < 0x47) {
    if (iVar4 < -0x46) {
      iVar4 = -0x46;
    }
  }
  else {
    iVar4 = 0x46;
  }
  if (iVar1 < -5) {
    iVar2 = (iVar1 + 5) * 0x1000000 >> 0x18;
  }
  else {
    iVar2 = 0;
    if (5 < iVar1) {
      iVar2 = (iVar1 + -5) * 0x1000000 >> 0x18;
    }
  }
  cVar3 = (char)iVar2;
  if (iVar2 < 0x47) {
    if (iVar2 < -0x46) {
      cVar3 = -0x46;
    }
  }
  else {
    cVar3 = 'F';
  }
  if (iVar4 < 1) {
    if (iVar4 < 0) {
      cursor_h_pos = (f32)((float)cursor_h_pos +
                          ((float)iVar4 * folder_menu_z_dim - 0.50000000) * global_timer_delta);
    }
  }
  else {
    cursor_h_pos = (f32)((float)cursor_h_pos +
                        ((float)iVar4 * folder_menu_x_dim + 0.50000000) * global_timer_delta);
  }
  fVar5 = get_ulx();
  fVar6 = get_screen_width();
  if (((float)fVar6 + (float)fVar5) - 20.00000000 < (float)cursor_h_pos) {
    fVar5 = get_ulx();
    fVar6 = get_screen_width();
    cursor_h_pos = (f32)(((float)fVar6 + (float)fVar5) - 20.00000000);
  }
  else {
    fVar5 = get_ulx();
    if ((float)cursor_h_pos < (float)fVar5 + 20.00000000) {
      cursor_h_pos = get_ulx();
      cursor_h_pos = (f32)((float)cursor_h_pos + 20.00000000);
    }
  }
  iVar1 = (int)cVar3;
  if (cVar3 < '\x01') {
    if (cVar3 < '\0') {
      cursor_v_pos = (f32)((float)cursor_v_pos +
                          ((float)iVar1 * flt_800519D4 - 0.50000000) * global_timer_delta);
    }
  }
  else {
    cursor_v_pos = (f32)((float)cursor_v_pos +
                        ((float)iVar1 * flt_800519D0 + 0.50000000) * global_timer_delta);
  }
  fVar5 = get_uly();
  fVar6 = get_screen_height();
  if (((float)fVar6 + (float)fVar5) - 20.00000000 < (float)cursor_v_pos) {
    fVar5 = get_uly();
    fVar6 = get_screen_height();
    cursor_v_pos = (f32)(((float)fVar6 + (float)fVar5) - 20.00000000);
  }
  else {
    fVar5 = get_uly();
    if ((float)cursor_v_pos < (float)fVar5 + 20.00000000) {
      cursor_v_pos = get_uly();
      cursor_v_pos = (f32)((float)cursor_v_pos + 20.00000000);
    }
  }
  return iVar1;
}



undefined4 load_draw_selected_icon_folder_select(undefined4 param_1)

{
  f32 wdivh;
  undefined4 local_res0;
  uint *local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  if (folder_selection_screen_option_icon == 0) {
    local_14 = imgcall;
  }
  else {
    if (folder_selection_screen_option_icon == 1) {
      local_14 = DAT_8008d128;
    }
    else {
      if (folder_selection_screen_option_icon == 2) {
        local_14 = DAT_8008d128 + 3;
      }
    }
  }
  local_res0 = param_1;
  likely_generate_DL_for_image_declaration((uint **)register0x000000ec,local_14,4,0,0);
  local_8 = truncf((float)cursor_h_pos + 0.50000000);
  local_4 = truncf((float)cursor_v_pos + 0.50000000);
  local_10 = (float)(uint)*(byte *)(local_14 + 1);
  if (false) {
    local_10 = local_10 + 4294967296.00000000;
  }
  local_10 = local_10 * 0.50000000;
  local_c = (float)(uint)*(byte *)((int)local_14 + 5);
  if (false) {
    local_c = local_c + 4294967296.00000000;
  }
  local_c = local_c * 0.50000000;
  display_image_at_on_screen_coord
            ((int *)register0x000000ec,(int *)&local_8,wdivh,(int)&local_10,
             (uint)*(byte *)(local_14 + 1),(uint)*(byte *)((int)local_14 + 5),0,0,1,0xff,0xff,0xff,
             0xdc,(uint)(*(char *)((int)local_14 + 6) != '\0'));
  return local_res0;
}



uint * add_tab1_start(undefined4 *param_1)

{
  int iVar1;
  short sVar3;
  short sVar4;
  uint *puVar2;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  dword_CODE_bss_80069770 = get_textptr_for_textID(0x9c04);
  proc_7F0ACB78(1);
  iStack16 = 0;
  iStack12 = 0;
  proc_7F0AE98C(&iStack12,&iStack16,dword_CODE_bss_80069770,D_80040EB0,D_80040EAC,0);
  iStack4 = 0x33;
  iVar1 = iStack12;
  if (iStack12 < 0) {
    iVar1 = iStack12 + 1;
  }
  iStack8 = 0x19b - (iVar1 >> 1);
  if (tab_1_highlight != FALSE) {
    param_1 = microcode_constructor_related_to_menus
                        (param_1,(longlong)((iStack8 - iStack12) + 1),0x33,(longlong)iStack8,0x75,
                         0x32);
  }
  proc_7F0ACB88(1);
  iVar1 = iStack16;
  if (iStack16 < 0) {
    iVar1 = iStack16 + 1;
  }
  iStack4 = 0x54 - (iVar1 >> 1);
  sVar3 = get_video2_settings_txtClipH();
  sVar4 = get_video2_settings_txtClipW();
  puVar2 = en_text_write_stuff(param_1,&iStack4,&iStack8,dword_CODE_bss_80069770,D_80040EB0,
                               (int)D_80040EAC,0xff,(int)sVar3,(int)sVar4,0,0);
  proc_7F0ACB88(0);
  proc_7F0ACB78(0);
  return puVar2;
}



BOOL isontab1(void)

{
  if ((390.00000000 < (float)cursor_h_pos) && ((float)cursor_v_pos <= (float)tab1_max_x_coord)) {
    return TRUE;
  }
  return FALSE;
}



uint * add_tab3_previous(undefined4 *param_1)

{
  int iVar1;
  short sVar3;
  short sVar4;
  uint *puVar2;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  DAT_80069778 = get_textptr_for_textID(0x9c06);
  proc_7F0ACB78(1);
  iStack16 = 0;
  iStack12 = 0;
  proc_7F0AE98C(&iStack12,&iStack16,DAT_80069778,D_80040EB0,D_80040EAC,0);
  iStack4 = 0xec;
  iVar1 = iStack12;
  if (iStack12 < 0) {
    iVar1 = iStack12 + 1;
  }
  iStack8 = 0x19b - (iVar1 >> 1);
  if (tab_3_highlight != FALSE) {
    param_1 = microcode_constructor_related_to_menus
                        (param_1,(longlong)((iStack8 - iStack12) + 1),0xec,(longlong)iStack8,0x12e,
                         0x32);
  }
  proc_7F0ACB88(1);
  iVar1 = iStack16;
  if (iStack16 < 0) {
    iVar1 = iStack16 + 1;
  }
  iStack4 = 0x10d - (iVar1 >> 1);
  sVar3 = get_video2_settings_txtClipH();
  sVar4 = get_video2_settings_txtClipW();
  puVar2 = en_text_write_stuff(param_1,&iStack4,&iStack8,DAT_80069778,D_80040EB0,(int)D_80040EAC,
                               0xff,(int)sVar3,(int)sVar4,0,0);
  proc_7F0ACB88(0);
  proc_7F0ACB78(0);
  return puVar2;
}



BOOL isontab3(void)

{
  if ((390.00000000 < (float)cursor_h_pos) && (223.00000000 < (float)cursor_v_pos)) {
    return TRUE;
  }
  return FALSE;
}



void set_cursor_pos_tab2(void)

{
  cursor_h_pos = tab2_first_x_coord;
  cursor_v_pos = 144.00000000;
  return;
}



uint * add_tab2_next(undefined4 *param_1)

{
  int iVar1;
  short sVar3;
  short sVar4;
  uint *puVar2;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  DAT_80069774 = get_textptr_for_textID(0x9c05);
  proc_7F0ACB78(1);
  iStack16 = 0;
  iStack12 = 0;
  proc_7F0AE98C(&iStack12,&iStack16,DAT_80069774,D_80040EB0,D_80040EAC,0);
  iStack4 = 0x90;
  iVar1 = iStack12;
  if (iStack12 < 0) {
    iVar1 = iStack12 + 1;
  }
  iStack8 = 0x19b - (iVar1 >> 1);
  if (tab_2_highlight != FALSE) {
    param_1 = microcode_constructor_related_to_menus
                        (param_1,(longlong)((iStack8 - iStack12) + 1),0x90,(longlong)iStack8,0xd2,
                         0x32);
  }
  proc_7F0ACB88(1);
  iVar1 = iStack16;
  if (iStack16 < 0) {
    iVar1 = iStack16 + 1;
  }
  iStack4 = 0xb1 - (iVar1 >> 1);
  sVar3 = get_video2_settings_txtClipH();
  sVar4 = get_video2_settings_txtClipW();
  puVar2 = en_text_write_stuff(param_1,&iStack4,&iStack8,DAT_80069774,D_80040EB0,(int)D_80040EAC,
                               0xff,(int)sVar3,(int)sVar4,0,0);
  proc_7F0ACB88(0);
  proc_7F0ACB78(0);
  return puVar2;
}



BOOL isontab2(void)

{
  if (((390.00000000 < (float)cursor_h_pos) && ((float)tab2_bottom_y_coord < (float)cursor_v_pos))
     && ((float)cursor_v_pos <= 223.00000000)) {
    return TRUE;
  }
  return FALSE;
}



void init_menu00_legalscreen(void)

{
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  f32 scale;
  float fStack16;
  float fStack12;
  float fStack8;
  
  musicTrack1Stop();
  maybe_is_in_menu = TRUE;
  menu_timer = 0;
  fStack16 = dword_8002A9C0.x;
  fStack12 = dword_8002A9C0.y;
  fStack8 = dword_8002A9C0.z;
  load_object_fill_header
            ((object_header *)PitemZ_entries[319].header,(int *)PitemZ_entries[319].filename,
             (int)ptr_logo_and_walletbond_DL,0x3c000,0);
  set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[319].header);
  something_screen_constructor = get_obj_instance_controller_for_header(PitemZ_entries[319].header);
  set_obj_instance_controller_scale(something_screen_constructor,scale);
  setsuboffset(something_screen_constructor,&fStack16,extraout_a2_lo,extraout_a3_lo);
  proc_7F01DF90();
  return;
}



void update_menu00_legalscreen(void)

{
  is_first_time_on_legal_screen = FALSE;
  set_obj_instance_scale_to_zero(something_screen_constructor);
  return;
}



void interface_menu00_legalscreen(undefined8 param_1,undefined8 param_2)

{
  longlong lVar1;
  ulonglong uVar2;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu00_aspect);
  set_page_height(100.00000000,(f32)menu00_pageheight);
  set_video2_settings_offset_24(0);
  menu_timer += clock_timer;
  if (menu_timer < 0xf1) {
    uVar2 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if ((uVar2 != 0) && (is_first_time_on_legal_screen == FALSE)) {
      if (is_first_time_on_main_menu == FALSE) {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
      else {
        set_menu_to_mode(MENU_NINTENDO_LOGO,1);
      }
    }
  }
  else {
    lVar1 = get_attached_controller_count();
    if ((lVar1 < 1) && (is_first_time_on_legal_screen != FALSE)) {
      set_menu_to_mode(MENU_NO_CONTROLLERS,1);
    }
    else {
      set_menu_to_mode(MENU_NINTENDO_LOGO,1);
    }
  }
  return;
}



uint * display_aligned_white_text_to_screen
                 (undefined4 *param_1,int param_2,int param_3,int param_4,int param_5,byte *param_6,
                 int param_7,int param_8)

{
  short sVar2;
  short sVar3;
  uint *puVar1;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  iStack8 = 0;
  iStack4 = 0;
  proc_7F0AE98C(&iStack4,&iStack8,param_6,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  param_4 *= iStack8;
  if (param_4 < 0) {
    param_4 += 1;
  }
  param_5 *= iStack4;
  iStack12 = param_2 - (param_4 >> 1);
  if (param_5 < 0) {
    param_5 += 1;
  }
  iStack16 = param_3 - (param_5 >> 1);
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  puVar1 = en_text_write_stuff(param_1,&iStack12,&iStack16,param_6,param_7,param_8,0xffffffff,
                               (int)sVar2,(int)sVar3,0,0);
  return puVar1;
}



void constructor_menu00_legalscreen(undefined4 *param_1)

{
  undefined4 *DL;
  uint *puVar1;
  byte *pbVar2;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float **ppfVar3;
  float **ppfVar4;
  float **ppfVar5;
  float **ppfVar6;
  int iVar7;
  longlong lVar8;
  legal_screen_text *plVar9;
  int iVar10;
  float extraout_f12;
  float extraout_f14;
  undefined4 auStack208 [18];
  float afStack136 [17];
  float *pfStack68;
  undefined4 uStack64;
  undefined4 uStack60;
  undefined4 *puStack56;
  undefined4 *puStack52;
  
  ppfVar5 = (float **)dword_8002AABC;
  ppfVar3 = &pfStack68;
  do {
    ppfVar6 = ppfVar5 + 3;
    ppfVar4 = ppfVar3 + 3;
    *ppfVar3 = *ppfVar5;
    ppfVar3[1] = ppfVar5[1];
    ppfVar3[2] = ppfVar5[2];
    ppfVar5 = ppfVar6;
    ppfVar3 = ppfVar4;
  } while (ppfVar6 != (float **)0x8002aaf8);
  *ppfVar4 = pfRam8002aaf8;
  puStack56 = insert_imageDL(param_1);
  puStack52 = puStack56;
  proc_7F059694(afStack136,extraout_f12,extraout_f14,0.00000000,0.00000000,4000.00000000,0.00000000,
                0.00000000,0.00000000,0.00000000);
  pfStack68 = afStack136;
  proc_7F0BD714((int)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) << 6);
  proc_7F058020(afStack136,puStack52);
  *(undefined4 **)(something_screen_constructor + 0xc) = puStack52;
  proc_7F06EFC4(something_screen_constructor);
  uStack60 = 3;
  uStack64 = 0;
  subdraw((int)&pfStack68,something_screen_constructor,extraout_a2_lo,extraout_a3_lo);
  DL = puStack56;
  lVar8 = 0;
  iVar10 = 0;
  if (0 < *(short *)(*(int *)(something_screen_constructor + 8) + 0xe)) {
    iVar7 = *(int *)(something_screen_constructor + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar7 + iVar10),auStack208);
      proc_7F058C9C((int)auStack208,
                    (uint *)(*(int *)(something_screen_constructor + 0xc) + (int)lVar8 * 0x40));
      lVar8 = (longlong)((int)lVar8 + 1);
      iVar10 += 0x40;
      if ((longlong)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) <= lVar8) break;
      iVar7 = *(int *)(something_screen_constructor + 0xc);
    }
  }
  puVar1 = microcode_constructor(DL);
  plVar9 = legal_screen_constructer_table;
  do {
    pbVar2 = get_textptr_for_textID(plVar9->txtID);
    puVar1 = display_aligned_white_text_to_screen
                       (puVar1,plVar9->h_pos,plVar9->v_pos,plVar9->flag,plVar9->flag2,pbVar2,
                        (int)ptrSecondFontTable,(int)ptrFirstFontTable);
    plVar9 = plVar9 + 1;
  } while (plVar9 < dword_8002AABC);
  return;
}



void reset_menutimer(void)

{
  menu_timer = 0;
  return;
}



void dummy7F00AAF8(void)

{
  return;
}



void interface_menu17_switchscreens(undefined8 param_1,undefined8 param_2)

{
  video_related_1F(60.00000000);
  video_related_21((f32)menu17_aspect);
  set_page_height(100.00000000,(f32)menu17_pageheight);
  set_video2_settings_offset_24(0);
  if (((3 < menu_timer + 1) && (spectrum_related_flag == FALSE)) && (is_emulating_spectrum == FALSE)
     ) {
    maybe_prev_menu = menu_update;
    menu_update = ~MENU_LEGAL_SCREEN;
  }
  menu_timer = menu_timer + 1;
  return;
}



undefined4 * constructor_menu17_switchscreens(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = insert_imageDL(param_1);
  return puVar1;
}



void init_menu01_nintendo(void)

{
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  f32 scale;
  float fStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  menu_timer = 0;
  fStack12 = FLOAT_8002aafc;
  uStack8 = DAT_8002ab00;
  uStack4 = DAT_8002ab04;
  load_object_fill_header
            ((object_header *)PitemZ_entries[276].header,(int *)PitemZ_entries[276].filename,
             (int)ptr_logo_and_walletbond_DL,0x3c000,0);
  set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[276].header);
  something_screen_constructor = get_obj_instance_controller_for_header(PitemZ_entries[276].header);
  set_obj_instance_controller_scale(something_screen_constructor,scale);
  setsuboffset(something_screen_constructor,&fStack12,extraout_a2_lo,extraout_a3_lo);
  musicTrack1Play(M_INTROSWOOSH);
  maybe_is_in_menu = TRUE;
  dword_80069CD4 = flt_800519F4;
  f32_80069618 = flt_800519F8;
  return;
}



void update_menu01_nintendo(void)

{
  set_obj_instance_scale_to_zero(something_screen_constructor);
  return;
}



void interface_menu01_nintendo(undefined8 param_1,undefined8 param_2)

{
  ulonglong uVar1;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu01_aspect);
  set_page_height(100.00000000,(f32)menu01_pageheight);
  set_video2_settings_offset_24(0);
  menu_timer += clock_timer;
  if (menu_timer < 0x1f5) {
    uVar1 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if (uVar1 != 0) {
      if (is_first_time_on_main_menu == FALSE) {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
      else {
        prev_keypresses = 1;
        set_menu_to_mode(MENU_RAREWARE_LOGO,1);
      }
    }
  }
  else {
    set_menu_to_mode(MENU_RAREWARE_LOGO,1);
  }
  return;
}



undefined4 * constructor_menu01_nintendo(undefined4 *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float **ppfVar3;
  float **ppfVar4;
  int iVar5;
  float **ppfVar6;
  float **ppfVar7;
  longlong lVar8;
  float extraout_f12;
  float extraout_f14;
  undefined4 auStack280 [16];
  float afStack216 [20];
  float afStack136 [18];
  float *pfStack64;
  undefined4 uStack60;
  undefined4 uStack56;
  undefined4 *puStack52;
  f32 *pfStack48;
  
  ppfVar6 = (float **)buffer_8002ab08;
  ppfVar3 = &pfStack64;
  do {
    ppfVar7 = ppfVar6 + 3;
    ppfVar4 = ppfVar3 + 3;
    *ppfVar3 = *ppfVar6;
    ppfVar3[1] = ppfVar6[1];
    ppfVar3[2] = ppfVar6[2];
    ppfVar6 = ppfVar7;
    ppfVar3 = ppfVar4;
  } while (ppfVar7 != (float **)0x8002ab44);
  *ppfVar4 = pfRam8002ab44;
  puVar1 = insert_imageDL(param_1);
  *puVar1 = 0xbc000002;
  puVar1[1] = 0x80000040;
  puVar1[2] = 0x3860010;
  puVar1[3] = 0x8002a990;
  puStack52 = puVar1 + 6;
  puVar1[4] = 0x3880010;
  puVar1[5] = 0x8002a988;
  pfStack48 = &dword_80069CD4;
  iVar2 = 0xff - (menu_timer * 0xff + -0x1708e) / 100;
  if (0xff < iVar2) {
    iVar2 = 0xff;
  }
  rgba_8002a988.R = (char)iVar2;
  if (iVar2 < 0) {
    rgba_8002a988.R = '\0';
  }
  dword_80069CD4 = (f32)((float)dword_80069CD4 + flt_80051A04);
  rgba_8002a988.G = rgba_8002a988.R;
  rgba_8002a988.B = rgba_8002a988.R;
  rgba_8002A98C.R = rgba_8002a988.R;
  rgba_8002A98C.G = rgba_8002a988.R;
  rgba_8002A98C.B = rgba_8002a988.R;
  proc_7F0585FC((float)dword_80069CD4,ZEXT48(&rgba_8002a988),afStack216);
  proc_7F058BB8((float)f32_80069618,extraout_a0,afStack216);
  f32_80069618 = (f32)((float)f32_80069618 * flt_80051A0C);
  if (flt_80051A08 < (float)f32_80069618) {
    f32_80069618 = (f32)flt_80051A08;
  }
  proc_7F059694(afStack136,extraout_f12,extraout_f14,0.00000000,0.00000000,4000.00000000,0.00000000,
                0.00000000,0.00000000,0.00000000);
  proc_7F058068(afStack136,afStack216);
  proc_7F058020(afStack216,afStack136);
  pfStack64 = afStack136;
  proc_7F0BD714((int)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) << 6);
  proc_7F058020(afStack136,pfStack48);
  *(f32 **)(something_screen_constructor + 0xc) = pfStack48;
  proc_7F06EFC4(something_screen_constructor);
  uStack56 = 3;
  uStack60 = 0;
  subdraw((int)&pfStack64,something_screen_constructor,extraout_a2_lo,extraout_a3_lo);
  puVar1 = puStack52;
  lVar8 = 0;
  iVar2 = 0;
  if (0 < *(short *)(*(int *)(something_screen_constructor + 8) + 0xe)) {
    iVar5 = *(int *)(something_screen_constructor + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar5 + iVar2),auStack280);
      proc_7F058C9C((int)auStack280,
                    (uint *)(*(int *)(something_screen_constructor + 0xc) + (int)lVar8 * 0x40));
      lVar8 = (longlong)((int)lVar8 + 1);
      iVar2 += 0x40;
      if ((longlong)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) <= lVar8) break;
      iVar5 = *(int *)(something_screen_constructor + 0xc);
    }
  }
  return puVar1;
}



int ** init_menu02_rareware(void)

{
  int **ppiVar1;
  
  proc_7F008B58((longlong)(int)ptr_logo_and_walletbond_DL,0x78000);
  ppiVar1 = play_sfx_a1(ptr_sfx_buf,0x102,NULL);
  return ppiVar1;
}



void update_menu02_rareware(void)

{
  return;
}



void interface_menu02_rareware(void)

{
  ulonglong uVar1;
  
  set_video2_settings_offset_24(0);
  uVar1 = proc_7F008DD0();
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if (uVar1 != 0) {
      if (is_first_time_on_main_menu == FALSE) {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
      else {
        prev_keypresses = 1;
        set_menu_to_mode(MENU_EYE_INTRO,1);
      }
    }
  }
  else {
    set_menu_to_mode(MENU_EYE_INTRO,1);
  }
  return;
}



undefined4 * constructor_menu02_rareware(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = retrieve_display_rareware_logo(param_1);
  return puVar1;
}



void init_menu03_eyeintro(void)

{
  proc_7F008E80((short *)ptr_logo_and_walletbond_DL,0x78000);
  musicTrack1Play(M_INTRO);
  maybe_is_in_menu = TRUE;
  return;
}



void update_menu_03_eyeintro(void)

{
  proc_7F00920C();
  return;
}



void interface_menu03_eyeintro(void)

{
  ulonglong uVar1;
  
  set_video2_settings_offset_24(0);
  uVar1 = proc_7F009744();
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if (uVar1 != 0) {
      if (is_first_time_on_main_menu == FALSE) {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
      else {
        prev_keypresses = 1;
        set_menu_to_mode(MENU_GOLDENEYE_LOGO,1);
      }
    }
  }
  else {
    set_menu_to_mode(MENU_GOLDENEYE_LOGO,1);
  }
  return;
}



void constructor_menu03_eyeintro(longlong param_1)

{
  proc_7F009254(param_1);
  return;
}



void init_menu04_goldeneyelogo(void)

{
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  f32 scale;
  float fStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  menu_timer = 0;
  fStack12 = DAT_8002ab48;
  uStack8 = DAT_8002ab4c;
  uStack4 = DAT_8002ab50;
  load_object_fill_header
            ((object_header *)PitemZ_entries[277].header,(int *)PitemZ_entries[277].filename,
             (int)ptr_logo_and_walletbond_DL,0x3c000,0);
  set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[277].header);
  something_screen_constructor = get_obj_instance_controller_for_header(PitemZ_entries[277].header);
  set_obj_instance_controller_scale(something_screen_constructor,scale);
  setsuboffset(something_screen_constructor,&fStack12,extraout_a2_lo,extraout_a3_lo);
  return;
}



void update_menu04_goldeneyelogo(void)

{
  is_first_time_on_main_menu = FALSE;
  set_obj_instance_scale_to_zero(something_screen_constructor);
  return;
}



// WARNING: Instruction at (ram,0x7f00b440) overlaps instruction at (ram,0x7f00b43c)
// 

void interface_menu04_goldeneyelogo(undefined8 param_1,undefined8 param_2)

{
  ulonglong uVar1;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu04_aspect);
  set_page_height(100.00000000,(f32)menu04_pageheight);
  set_video2_settings_offset_24(0);
  menu_timer += clock_timer;
  if (((is_first_time_on_main_menu == FALSE) || (0xb4 < menu_timer)) ||
     ((ge_logo_bool != FALSE && (0x5a < menu_timer)))) {
    if (menu_timer < 0xb5) {
      uVar1 = get_controller_buttons_pressed
                        ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                              DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                              A_BUTTON);
      if ((uVar1 != 0) || ((is_first_time_on_main_menu != FALSE && (ge_logo_bool != FALSE)))) {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
    }
    else {
      if (prev_keypresses == 0) {
        do_extended_cast_display(FALSE);
        set_menu_to_mode(MENU_DISPLAY_CAST,1);
      }
      else {
        set_menu_to_mode(MENU_FILE_SELECT,1);
      }
    }
  }
  else {
    uVar1 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if (uVar1 != 0) {
      ge_logo_bool = TRUE;
    }
  }
  return;
}



undefined4 * constructor_menu04_goldeneyelogo(undefined4 *param_1)

{
  undefined4 *puVar1;
  LookAt *l;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float **ppfVar2;
  float **ppfVar3;
  int iVar4;
  float **ppfVar5;
  float **ppfVar6;
  longlong lVar7;
  int iVar8;
  float xEye;
  float extraout_f12;
  float yEye;
  float extraout_f14;
  undefined4 auStack292 [21];
  byte abStack208 [72];
  float afStack136 [18];
  float *pfStack64;
  undefined4 uStack60;
  undefined4 uStack56;
  undefined4 *puStack52;
  LookAt *pLStack48;
  
  ppfVar5 = (float **)buffer_8002ab54;
  ppfVar2 = &pfStack64;
  do {
    ppfVar6 = ppfVar5 + 3;
    ppfVar3 = ppfVar2 + 3;
    *ppfVar2 = *ppfVar5;
    ppfVar2[1] = ppfVar5[1];
    ppfVar2[2] = ppfVar5[2];
    ppfVar5 = ppfVar6;
    ppfVar2 = ppfVar3;
  } while (ppfVar6 != (float **)0x8002ab90);
  *ppfVar3 = pfRam8002ab90;
  puVar1 = set_setfillcolor(param_1,0,0,0);
  pLStack48 = (LookAt *)insert_generic_fillrect(puVar1);
  l = pLStack48;
  proc_7F0BD6F8(2);
  guLookAtReflect((Mtx *)abStack208,l,xEye,yEye,0.00000000,0.00000000,4000.00000000,0.00000000,
                  0.00000000,0.00000000,0.00000000);
  *(undefined4 *)pLStack48->l = 0xbc000002;
  *(undefined4 *)(pLStack48->l + 4) = 0x80000040;
  *(undefined4 *)(pLStack48->l + 8) = 0x3860010;
  *(undefined4 *)(pLStack48->l + 0xc) = 0x8002a978;
  *(undefined4 *)(pLStack48->l + 0x10) = 0x3880010;
  *(undefined4 *)(pLStack48->l + 0x14) = 0x8002a970;
  *(undefined4 *)(pLStack48->l + 0x18) = 0x3840010;
  *(LookAt **)(pLStack48->l + 0x1c) = l;
  *(byte **)(pLStack48[1].l + 4) = l->l + 0x10;
  *(undefined4 *)pLStack48[1].l = 0x3820010;
  puStack52 = (undefined4 *)(pLStack48[1].l + 8);
  proc_7F059694(afStack136,extraout_f12,extraout_f14,0.00000000,0.00000000,3000.00000000,0.00000000,
                0.00000000,0.00000000,0.00000000);
  pfStack64 = afStack136;
  proc_7F0BD714((int)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) << 6);
  matrix_multiply_A1_by_F12(flt_80051A18,extraout_a0,afStack136);
  proc_7F058020(afStack136,(undefined4 *)pLStack48);
  *(LookAt **)(something_screen_constructor + 0xc) = pLStack48;
  proc_7F06EFC4(something_screen_constructor);
  uStack56 = 3;
  uStack60 = 0;
  subdraw((int)&pfStack64,something_screen_constructor,extraout_a2_lo,extraout_a3_lo);
  puVar1 = puStack52;
  lVar7 = 0;
  iVar8 = 0;
  if (0 < *(short *)(*(int *)(something_screen_constructor + 8) + 0xe)) {
    iVar4 = *(int *)(something_screen_constructor + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar4 + iVar8),auStack292);
      proc_7F058C9C((int)auStack292,
                    (uint *)(*(int *)(something_screen_constructor + 0xc) + (int)lVar7 * 0x40));
      lVar7 = (longlong)((int)lVar7 + 1);
      iVar8 += 0x40;
      if ((longlong)*(short *)(*(int *)(something_screen_constructor + 8) + 0xe) <= lVar7) break;
      iVar4 = *(int *)(something_screen_constructor + 0xc);
    }
  }
  return puVar1;
}



void disable_all_switches(int param_1)

{
  ushort *partdesc;
  undefined4 *puVar1;
  int iVar2;
  longlong lVar3;
  longlong lVar4;
  int iVar5;
  int iVar6;
  
  iVar2 = *(int *)(param_1 + 8);
  lVar4 = 0;
  lVar3 = (longlong)*(short *)(iVar2 + 0xc);
  iVar6 = 0;
  if (0 < lVar3) {
    do {
      partdesc = *(ushort **)(*(int *)(iVar2 + 8) + iVar6);
      iVar5 = (int)lVar4;
      if (partdesc == NULL) {
        lVar4 = (longlong)(iVar5 + 1);
      }
      else {
        if ((*partdesc & 0xff) == 0x12) {
          puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
          *puVar1 = 0;
          iVar2 = *(int *)(param_1 + 8);
          lVar3 = (longlong)*(short *)(iVar2 + 0xc);
          lVar4 = (longlong)(iVar5 + 1);
        }
        else {
          lVar4 = (longlong)(iVar5 + 1);
        }
      }
      iVar6 += 4;
    } while (lVar4 < lVar3);
  }
  return;
}



void set_item_visibility_in_objinstance(int objinstance,int item,undefined4 mode)

{
  ushort *partdesc;
  undefined4 *puVar1;
  
  partdesc = *(ushort **)(*(int *)(*(int *)(objinstance + 8) + 8) + item * 4);
  if (partdesc != NULL) {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(objinstance,partdesc);
    *puVar1 = mode;
  }
  return;
}



void select_load_bond_picture(int objinstance,u32 bondID)

{
  set_item_visibility_in_objinstance(objinstance,8,1);
  set_item_visibility_in_objinstance(objinstance,9,0);
  set_item_visibility_in_objinstance(objinstance,10,0);
  set_item_visibility_in_objinstance(objinstance,0xb,0);
  set_item_visibility_in_objinstance(objinstance,0xf,1);
  set_item_visibility_in_objinstance(objinstance,0x10,0);
  set_item_visibility_in_objinstance(objinstance,0x11,0);
  set_item_visibility_in_objinstance(objinstance,0x12,0);
  return;
}



void load_walletbond(void)

{
  int iVar1;
  uint *puVar2;
  undefined *instancecontroller;
  undefined **ppuVar3;
  f32 scale;
  
  if (ptr_folder_object_instance == NULL) {
    load_object_fill_header
              ((object_header *)PitemZ_entries[278].header,(int *)PitemZ_entries[278].filename,
               (int)ptr_logo_and_walletbond_DL,0xa000,0);
    set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[278].header);
    ppuVar3 = &ptr_folder_object_instance;
    do {
      instancecontroller =
           (undefined *)get_aircraft_obj_instance_controller((int *)PitemZ_entries[278].header);
      *ppuVar3 = instancecontroller;
      set_obj_instance_controller_scale((int)instancecontroller,scale);
      ppuVar3 = ppuVar3 + 1;
    } while (ppuVar3 != (undefined **)&dword_8002A96C);
    iVar1 = *(int *)(*(int *)&(PitemZ_entries[278].header)->anonymous_2 + 0x54);
    if (iVar1 != 0) {
      puVar2 = *(uint **)(iVar1 + 4);
      proc_7F0BA640((int *)(puVar2[7] + (*puVar2 & 0xffffff)),NULL,8);
    }
  }
  return;
}



void proc_7F00B990(void)

{
  int *objinstance;
  undefined **ppuVar1;
  
  ppuVar1 = &ptr_folder_object_instance;
  objinstance = (int *)ptr_folder_object_instance;
  while( true ) {
    if (objinstance != NULL) {
      set_aircraft_obj_inst_scale_to_zero(objinstance);
      *(int **)ppuVar1 = NULL;
    }
    ppuVar1 = (undefined **)((int **)ppuVar1 + 1);
    if (ppuVar1 == (undefined **)&dword_8002A96C) break;
    objinstance = (int *)*ppuVar1;
  }
  return;
}



void init_menu05_filesel(void)

{
  undefined *puVar1;
  ushort *local_8;
  int local_4;
  
  local_8 = (ushort *)(ptr_logo_and_walletbond_DL + 0xa000);
  prev_keypresses = 0;
  local_4 = 0x6e000;
  if ((int)selected_folder_num < 0) {
    selected_folder_num = 0;
  }
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  folder_selected_for_deletion = -1;
  folder_selected_for_deletion_choice = 1;
  proc_7F008DE4(&local_8,&local_4);
  load_walletbond();
  if (maybe_is_in_menu != FALSE) {
    musicTrack1Play(M_FOLDERS);
    maybe_is_in_menu = FALSE;
  }
  menu_timer = 0;
  CHEAT_AVAILABLE_EXTRA_CHARS[0] = 0;
  CHEAT_AVAILABLE_EXTRA_CHARS[1] = 0;
  puVar1 = CHEAT_AVAILABLE_EXTRA_CHARS + 2;
  do {
    puVar1 = puVar1 + 4;
    puVar1[1] = 0;
    puVar1[2] = 0;
    puVar1[3] = 0;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 != CHEAT_AVAILABLE_EXTRA_CHARS + 0x4a);
  append_cheat_sp = FALSE;
  append_cheat_mp = FALSE;
  return;
}



void update_menu05_filesel(void)

{
  if ((menu_update == MENU_LEGAL_SCREEN) || (maybe_prev_menu == MENU_LEGAL_SCREEN)) {
    proc_7F00B990();
  }
  return;
}



int get_chapter_briefing_entry(int briefing)

{
  mission_folder_setup *pmVar1;
  
  if (-1 < briefing) {
    pmVar1 = mission_folder_setup_entries + briefing;
    do {
      if (pmVar1->type != 0) {
        return briefing;
      }
      briefing += -1;
      pmVar1 = (mission_folder_setup *)&pmVar1[-1].folder_text_preset;
    } while (-1 < briefing);
  }
  return -1;
}



void toggle_deletion_menu_for_folder(int param_1)

{
  float local_8;
  float local_4;
  
  proc_7F077FF4((float *)(&DAT_80069620 + param_1 * 3),&local_8);
  cursor_h_pos = (f32)(local_8 + -1.00000000);
  cursor_v_pos = (f32)(local_4 + 20.00000000);
  return;
}



void interface_menu05_filesel(void)

{
  undefined *puVar1;
  ulonglong uVar2;
  undefined4 uVar5;
  u32 bondID;
  longlong lVar3;
  ulonglong uVar4;
  undefined8 extraout_a0;
  undefined **ppuVar6;
  undefined4 *puVar7;
  float *pfVar8;
  u32 folder;
  float extraout_f12;
  float fVar9;
  float extraout_f12_00;
  float extraout_f14;
  float fVar10;
  float extraout_f14_00;
  float *pfStack188;
  DIFFICULTY DStack180;
  STAGENUM SStack176;
  float fStack172;
  float fStack168;
  float fStack164;
  float fStack160;
  float fStack156;
  float fStack152;
  float fStack148;
  float afStack144 [2];
  float afStack136 [16];
  float afStack72 [18];
  
  uVar2 = get_controller_buttons_pressed
                    ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                          R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  if ((((uVar2 == 0) && (uVar2 = get_cur_controller_horz_stick_pos('\0'), -6 < (longlong)uVar2)) &&
      (uVar2 = get_cur_controller_horz_stick_pos('\0'), (longlong)uVar2 < 6)) &&
     ((uVar2 = get_cur_controller_vert_stick_pos('\0'), -6 < (longlong)uVar2 &&
      (uVar2 = get_cur_controller_vert_stick_pos('\0'), (longlong)uVar2 < 6)))) {
    menu_timer += clock_timer;
  }
  else {
    menu_timer = 0;
  }
  video_related_1F(60.00000000);
  video_related_21((f32)menu05_aspect);
  set_page_height(100.00000000,(f32)menu05_pageheight);
  set_video2_settings_offset_24(0);
  puVar7 = &DAT_80069620;
  ppuVar6 = &ptr_folder_object_instance;
  pfStack188 = &dword_8002AB94;
  folder = 0;
  fVar9 = extraout_f12;
  fVar10 = extraout_f14;
  do {
    uVar5 = (undefined4)uVar2;
    proc_7F059694(afStack72,fVar9,fVar10,0.00000000,0.00000000,4000.00000000,0.00000000,0.00000000,
                  0.00000000,0.00000000);
    init_something_copy_posdata_to_it((int *)pfStack188,(int *)afStack136);
    matrix_multiply_A1_by_F12(flt_80051A24,extraout_a0,afStack136);
    proc_7F058068(afStack72,afStack136);
    proc_7F0BD714((int)*(short *)(*(int *)(*ppuVar6 + 8) + 0xe) << 6);
    *(undefined4 *)(*ppuVar6 + 0xc) = uVar5;
    proc_7F058020(afStack136,*(undefined4 **)(*ppuVar6 + 0xc));
    puVar1 = *ppuVar6;
    *puVar7 = *(undefined4 *)(*(int *)(puVar1 + 0xc) + 0x30);
    puVar7[1] = *(undefined4 *)(*(int *)(puVar1 + 0xc) + 0x34);
    puVar7[2] = *(undefined4 *)(*(int *)(puVar1 + 0xc) + 0x38);
    disable_all_switches((int)puVar1);
    bondID = removed_would_have_returned_bond_for_folder_num(folder);
    uVar2 = SEXT48((int)bondID);
    select_load_bond_picture((int)*ppuVar6,bondID);
    set_item_visibility_in_objinstance((int)*ppuVar6,0xe,1);
    set_item_visibility_in_objinstance((int)*ppuVar6,0xd,1);
    folder += 1;
    pfStack188 = pfStack188 + 3;
    ppuVar6 = ppuVar6 + 1;
    puVar7 = puVar7 + 3;
    fVar9 = extraout_f12_00;
    fVar10 = extraout_f14_00;
  } while (folder != 4);
  if (-1 < (int)selected_folder_num) {
    if (selected_folder_num == 100) {
      selected_folder_num = selected_folder_num_copy;
    }
    if (((int)selected_folder_num < 0) || (3 < (int)selected_folder_num)) {
      selected_folder_num = 0;
    }
    toggle_deletion_menu_for_folder(selected_folder_num);
    selected_folder_num = 0xffffffff;
  }
  uVar2 = 0;
  if (folder_selected_for_deletion < 0) {
    pfVar8 = (float *)&DAT_80069620;
    ppuVar6 = &ptr_folder_object_instance;
    do {
      proc_7F03F90C((int)*ppuVar6,afStack144,&fStack148,&fStack152,&fStack156);
      proc_7F03F948(pfVar8,&fStack148,&fStack156,&fStack164,&fStack172);
      folder = (u32)uVar2;
      if (fStack164 <= (float)cursor_h_pos) {
        if ((float)cursor_h_pos <= fStack172) {
          if (fStack160 <= (float)cursor_v_pos) {
            if ((float)cursor_v_pos <= fStack168) {
              get_highest_stage_difficulty_completed_in_folder(folder,&SStack176,&DStack180);
              uVar4 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
              if (uVar4 != 0) {
                if (folder_selection_screen_option_icon == 0) {
                  selected_folder_num = folder;
                  play_sfx_a1(ptr_sfx_buf,0x4d,NULL);
                }
                else {
                  if (folder_selection_screen_option_icon == 1) {
                    proc_7F01EDA0(uVar2);
                    folder_selection_screen_option_icon = 0;
                    play_sfx_a1(ptr_sfx_buf,0x4f,NULL);
                  }
                  else {
                    if (folder_selection_screen_option_icon == 2) {
                      if ((-1 < (int)SStack176) && (-1 < DStack180)) {
                        folder_selected_for_deletion_choice = 1;
                        folder_selected_for_deletion = folder;
                      }
                      folder_selection_screen_option_icon = 0;
                      play_sfx_a1(ptr_sfx_buf,0x12,NULL);
                    }
                  }
                }
                break;
              }
              uVar2 = SEXT48((int)(folder + 1));
            }
            else {
              uVar2 = SEXT48((int)(folder + 1));
            }
          }
          else {
            uVar2 = SEXT48((int)(folder + 1));
          }
        }
        else {
          uVar2 = SEXT48((int)(folder + 1));
        }
      }
      else {
        uVar2 = SEXT48((int)(folder + 1));
      }
      ppuVar6 = ppuVar6 + 1;
      pfVar8 = pfVar8 + 3;
    } while (uVar2 != 4);
    uVar2 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
    if (uVar2 == 0) {
      uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
      if ((uVar2 != 0) && (folder_selection_screen_option_icon != 0)) {
        folder_selection_screen_option_icon = 0;
        play_sfx_a1(ptr_sfx_buf,0x76,NULL);
      }
    }
    else {
      if (((((float)cursor_h_pos < folder_option_COPY_left_bound) ||
           (folder_option_COPY_right_bound < (float)cursor_h_pos)) ||
          ((float)cursor_v_pos < folder_option_COPY_upper_bound)) ||
         (folder_option_COPY_lower_bound < (float)cursor_v_pos)) {
        if ((((float)cursor_h_pos < folder_option_ERASE_left_bound) ||
            (folder_option_ERASE_right_bound < (float)cursor_h_pos)) ||
           (((float)cursor_v_pos < folder_option_ERASE_upper_bound ||
            (folder_option_ERASE_lower_bound < (float)cursor_v_pos)))) {
          if (folder_selection_screen_option_icon != 0) {
            folder_selection_screen_option_icon = 0;
            play_sfx_a1(ptr_sfx_buf,0x76,NULL);
          }
        }
        else {
          folder_selection_screen_option_icon = 2;
          play_sfx_a1(ptr_sfx_buf,0xde,NULL);
        }
      }
      else {
        folder_selection_screen_option_icon = 1;
        play_sfx_a1(ptr_sfx_buf,0xde,NULL);
      }
    }
    menu_control_stick_tracking();
  }
  else {
    uVar2 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
    if ((uVar2 == 0) || (folder_selected_for_deletion_choice != 0)) {
      uVar2 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
      if ((uVar2 != 0) && (folder_selected_for_deletion_choice != 0)) {
        folder_selected_for_deletion_choice = 0;
        play_sfx_a1(ptr_sfx_buf,0x12,NULL);
      }
    }
    else {
      folder_selected_for_deletion_choice = 1;
      play_sfx_a1(ptr_sfx_buf,0x12,NULL);
    }
    lVar3 = get_cur_controller_horz_stick_pos('\0');
    if ((lVar3 < -0x2d) && (folder_selected_for_deletion_choice == 0)) {
      folder_selected_for_deletion_choice = 1;
      play_sfx_a1(ptr_sfx_buf,0x12,NULL);
    }
    else {
      lVar3 = get_cur_controller_horz_stick_pos('\0');
      if ((0x2d < lVar3) && (folder_selected_for_deletion_choice != 0)) {
        folder_selected_for_deletion_choice = 0;
        play_sfx_a1(ptr_sfx_buf,0x12,NULL);
      }
    }
    uVar2 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
    if (uVar2 == 0) {
      uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
      if (uVar2 != 0) {
        toggle_deletion_menu_for_folder(folder_selected_for_deletion);
        folder_selected_for_deletion = -1;
        play_sfx_a1(ptr_sfx_buf,0x76,NULL);
      }
    }
    else {
      if (folder_selected_for_deletion_choice == 0) {
        delete_eeprom_folder(folder_selected_for_deletion);
        play_sfx_a1(ptr_sfx_buf,0x76,NULL);
      }
      else {
        play_sfx_a1(ptr_sfx_buf,0x76,NULL);
      }
      toggle_deletion_menu_for_folder(folder_selected_for_deletion);
      folder_selected_for_deletion = -1;
    }
  }
  if ((int)selected_folder_num < 0) {
    if (0x708 < menu_timer) {
      set_menu_to_mode(MENU_LEGAL_SCREEN,1);
    }
  }
  else {
    set_menu_to_mode(MENU_MODE_SELECT,0);
    set_menu_cursor_pos_to_setting(0);
  }
  return;
}



int get_ptr_difficulty_name(DIFFICULTY difficulty)

{
  byte *return;
  
  return = NULL;
  if (difficulty == DIFFICULTY_AGENT) {
    return = get_textptr_for_textID(0x9c13);
  }
  else {
    if (difficulty == DIFFICULTY_SECRET) {
      return = get_textptr_for_textID(0x9c14);
    }
    else {
      if (difficulty == DIFFICULTY_00) {
        return = get_textptr_for_textID(0x9c15);
      }
      else {
        if (difficulty == DIFFICULTY_007) {
          return = get_textptr_for_textID(0x9c16);
        }
      }
    }
  }
  return (int)return;
}



uint * constructor_menu05_filesel(undefined4 *param_1)

{
  undefined4 *puVar1;
  short sVar4;
  byte *pbVar2;
  short sVar5;
  char *pcVar3;
  undefined8 extraout_a2;
  undefined8 extraout_a2_00;
  undefined8 extraout_a2_01;
  undefined8 uVar6;
  undefined8 extraout_a3;
  undefined8 extraout_a3_00;
  undefined8 extraout_a3_01;
  undefined8 uVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  int iVar10;
  mission_folder_setup *pmVar11;
  longlong lVar12;
  int briefing;
  undefined **ppuVar13;
  STAGENUM SVar14;
  undefined4 *puVar15;
  float fVar16;
  f32 wdivh;
  f32 wdivh_00;
  f32 wdivh_01;
  uint *puStackX0;
  float *pfStack324;
  float fStack308;
  float fStack304;
  int iStack300;
  float fStack296;
  float fStack292;
  float fStack288;
  float fStack284;
  float fStack280;
  float fStack276;
  float fStack272;
  float fStack268;
  float fStack264;
  byte abStack252 [20];
  byte abStack232 [20];
  float fStack212;
  float fStack208;
  DIFFICULTY DStack204;
  STAGENUM SStack200;
  int iStack196;
  int iStack192;
  int iStack188;
  int aiStack184 [2];
  undefined4 auStack176 [17];
  undefined4 uStack108;
  undefined4 uStack104;
  undefined4 uStack100;
  undefined4 *puStack96;
  u32 uStack28;
  u32 uStack24;
  u32 uStack20;
  u32 uStack16;
  u32 uStack12;
  u32 uStack8;
  int iStack4;
  
  uStack16 = unknown_folderselect_constructor;
  uStack12 = dword_8002AF30;
  uStack8 = dword_8002AF34;
  uStack28 = unknown_folderselect_constructor_0;
  uStack24 = dword_8002AF3C;
  uStack20 = dword_8002AF40;
  puStackX0 = param_1;
  puVar1 = insert_imageDL(param_1);
  *puVar1 = 0xfc167e2c;
  puVar1[1] = 0x33fdf6fb;
  puStackX0 = puVar1 + 4;
  puVar1[3] = 0xffffff14;
  puVar1[2] = 0xfb000000;
  sVar4 = get_video2_settings_txtClipW();
  fVar16 = truncf(((float)(int)sVar4 * -80.00000000) / 1280.00000000);
  puVar1 = proc_7F007CC8(puStackX0,(int)fVar16,(int *)&uStack16,(int *)&uStack28);
  puVar1[1] = 0x1000000;
  *puVar1 = 0x6000000;
  puStackX0 = puVar1 + 4;
  ppuVar13 = (undefined **)&dword_8002A968;
  puVar1[3] = 0x1000040;
  puVar1[2] = 0x6000000;
  uVar6 = extraout_a2;
  uVar7 = extraout_a3;
  do {
    puVar1 = unknown_folderselect;
    puVar8 = &uStack108;
    do {
      puVar15 = puVar1 + 3;
      puVar9 = puVar8 + 3;
      *puVar8 = *puVar1;
      puVar8[1] = puVar1[1];
      puVar8[2] = puVar1[2];
      puVar1 = puVar15;
      puVar8 = puVar9;
    } while (puVar15 != (undefined4 *)0x8002af80);
    lVar12 = 0;
    *puVar9 = uRam8002af80;
    uStack100 = 3;
    uStack104 = 0;
    puStack96 = puStackX0;
    subdraw((int)&uStack108,(uint)*ppuVar13,(int)uVar6,(int)uVar7);
    iVar10 = 0;
    puStackX0 = puStack96;
    uVar6 = extraout_a2_00;
    uVar7 = extraout_a3_00;
    if (0 < *(short *)(*(int *)(*ppuVar13 + 8) + 0xe)) {
      briefing = *(int *)(*ppuVar13 + 0xc);
      while( true ) {
        proc_7F058020((undefined4 *)(briefing + iVar10),auStack176);
        proc_7F058C9C((int)auStack176,(uint *)(*(int *)(*ppuVar13 + 0xc) + (int)lVar12 * 0x40));
        lVar12 = (longlong)((int)lVar12 + 1);
        iVar10 += 0x40;
        uVar6 = extraout_a2_01;
        uVar7 = extraout_a3_01;
        if ((longlong)*(short *)(*(int *)(*ppuVar13 + 8) + 0xe) <= lVar12) break;
        briefing = *(int *)(*ppuVar13 + 0xc);
      }
    }
    ppuVar13 = ppuVar13 + -1;
  } while (&ptr_folder_object_instance <= ppuVar13);
  puStackX0 = microcode_constructor(puStackX0);
  proc_7F0ACB78(0);
  pfStack324 = (float *)&DAT_80069620;
  iStack4 = 0;
  do {
    proc_7F077FF4(pfStack324,&fStack212);
    if (iStack4 == folder_selected_for_deletion) {
      fVar16 = truncf(fStack212);
      aiStack184[0] = (int)fVar16 + -0x31;
      fVar16 = truncf(fStack208);
      iStack188 = (int)fVar16 + 0x19;
      puStackX0 = microcode_constructor_related_to_menus
                            (puStackX0,(longlong)aiStack184[0],(longlong)iStack188,
                             (longlong)(aiStack184[0] + 99),(int)fVar16 + 0x43,0x32);
      pbVar2 = get_textptr_for_textID(0x9c17);
      fVar16 = truncf(fStack212);
      aiStack184[0] = (int)fVar16 + -0x2f;
      fVar16 = truncf(fStack208);
      iStack188 = (int)fVar16 + 0x1e;
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,(int)ptrSecondFontTable
                                      ,(int)ptrFirstFontTable,0xebd879ff,(int)sVar4,(int)sVar5,0,0);
      pbVar2 = get_textptr_for_textID(0x9c18);
      fVar16 = truncf(fStack212);
      aiStack184[0] = (int)fVar16 + -0x2f;
      fVar16 = truncf(fStack208);
      iStack188 = (int)fVar16 + 0x32;
      if (folder_selected_for_deletion_choice == 0) {
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,
                                        (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xebd879ff,
                                        (int)sVar4,(int)sVar5,0,0);
      }
      else {
        iStack196 = 0;
        iStack192 = 0;
        proc_7F0AE98C(&iStack192,&iStack196,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,
                      0);
        puStackX0 = microcode_constructor_related_to_menus
                              (puStackX0,(longlong)(aiStack184[0] + -1),(longlong)(iStack188 + -1),
                               (longlong)(aiStack184[0] + iStack196 + 3),iStack188 + iStack192,0x32)
        ;
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,
                                        (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xffffffff,
                                        (int)sVar4,(int)sVar5,0,0);
      }
      pbVar2 = get_textptr_for_textID(0x9c19);
      fVar16 = truncf(fStack212);
      iVar10 = -1;
      if (j_text_trigger != 0) {
        iVar10 = 0x17;
      }
      aiStack184[0] = iVar10 + (int)fVar16 + -1;
      fVar16 = truncf(fStack208);
      iStack188 = (int)fVar16 + 0x32;
      if (folder_selected_for_deletion_choice == 0) {
        iStack196 = 0;
        iStack192 = 0;
        proc_7F0AE98C(&iStack192,&iStack196,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,
                      0);
        puStackX0 = microcode_constructor_related_to_menus
                              (puStackX0,(longlong)(aiStack184[0] + -1),(longlong)(iStack188 + -1),
                               (longlong)(aiStack184[0] + iStack196 + 3),iStack188 + iStack192,0x32)
        ;
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,
                                        (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xffffffff,
                                        (int)sVar4,(int)sVar5,0,0);
      }
      else {
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,
                                        (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xebd879ff,
                                        (int)sVar4,(int)sVar5,0,0);
      }
    }
    else {
      get_highest_stage_difficulty_completed_in_folder(iStack4,&SStack200,&DStack204);
      if ((-1 < (int)SStack200) && (-1 < DStack204)) {
        pcVar3 = (char *)get_ptr_difficulty_name(DStack204);
        if (pcVar3 != NULL) {
          textpointer_load_parse_something((char *)abStack232,pcVar3);
          string_load_parse_something((char *)abStack232,asc_8004F488);
          iStack196 = 0;
          iStack192 = 0;
          proc_7F0AE98C(&iStack192,&iStack196,abStack232,(int)ptrSecondFontTable,
                        (int *)ptrFirstFontTable,0);
          fVar16 = truncf(fStack212);
          iVar10 = iStack196;
          if (iStack196 < 0) {
            iVar10 = iStack196 + 1;
          }
          aiStack184[0] = ((int)fVar16 - (iVar10 >> 1)) + -1;
          fVar16 = truncf(fStack208);
          iStack188 = (int)fVar16 + 0x15;
          sVar4 = get_video2_settings_txtClipW();
          sVar5 = get_video2_settings_txtClipH();
          puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,abStack232,
                                          (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xebd879ff,
                                          (int)sVar4,(int)sVar5,0,0);
        }
        iVar10 = -1;
        briefing = 0;
        if (DStack204 != DIFFICULTY_007) {
          pbVar2 = get_textptr_for_textID(0x9c1a);
          textpointer_load_parse_something((char *)abStack252,(char *)pbVar2);
          pmVar11 = mission_folder_setup_entries;
          SVar14 = mission_folder_setup_entries[0].mission_num;
          if (mission_folder_setup_entries[0].folder_text_preset != 0) {
            while (SStack200 != SVar14) {
              briefing += 1;
              if (pmVar11[1].folder_text_preset == 0) goto LAB_7f00cbdc;
              SVar14 = pmVar11[1].mission_num;
              pmVar11 = pmVar11 + 1;
            }
            iVar10 = get_chapter_briefing_entry(briefing);
          }
LAB_7f00cbdc:
          if (-1 < iVar10) {
            string_load_parse_something
                      ((char *)abStack252,(char *)mission_folder_setup_entries[iVar10].string_ptr);
            string_load_parse_something((char *)abStack252,a_);
          }
          string_load_parse_something
                    ((char *)abStack252,(char *)mission_folder_setup_entries[briefing].string_ptr);
          string_load_parse_something((char *)abStack252,asc_8004F490);
          iStack196 = 0;
          iStack192 = 0;
          proc_7F0AE98C(&iStack192,&iStack196,abStack252,(int)ptrSecondFontTable,
                        (int *)ptrFirstFontTable,0);
          fVar16 = truncf(fStack212);
          iVar10 = iStack196;
          if (iStack196 < 0) {
            iVar10 = iStack196 + 1;
          }
          aiStack184[0] = ((int)fVar16 - (iVar10 >> 1)) + -1;
          fVar16 = truncf(fStack208);
          iStack188 = (int)fVar16 + 0x2d;
          sVar4 = get_video2_settings_txtClipW();
          sVar5 = get_video2_settings_txtClipH();
          puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,abStack252,
                                          (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xebd879ff,
                                          (int)sVar4,(int)sVar5,0,0);
        }
      }
    }
    iStack4 += 1;
    pfStack324 = pfStack324 + 3;
    if (iStack4 == 4) {
      proc_7F0ACB78(0);
      pbVar2 = get_textptr_for_textID(0x9c1b);
      iStack196 = 0;
      iStack192 = 0;
      proc_7F0AE98C(&iStack192,&iStack196,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
      ;
      iVar10 = iStack192;
      if (iStack192 < 0) {
        iVar10 = iStack192 + 1;
      }
      iStack188 = 0x11d - (iVar10 >> 1);
      aiStack184[0] = 0xf7;
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,(int)ptrSecondFontTable
                                      ,(int)ptrFirstFontTable,0xffffffff,(int)sVar4,(int)sVar5,0,0);
      folder_option_COPY_right_bound = (float)(aiStack184[0] + iStack196);
      pbVar2 = get_textptr_for_textID(0x9c1c);
      iStack196 = 0;
      iStack192 = 0;
      proc_7F0AE98C(&iStack192,&iStack196,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
      ;
      aiStack184[0] = 0x165;
      iVar10 = iStack192;
      if (iStack192 < 0) {
        iVar10 = iStack192 + 1;
      }
      iStack188 = 0x11d - (iVar10 >> 1);
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      puStackX0 = en_text_write_stuff(puStackX0,aiStack184,&iStack188,pbVar2,(int)ptrSecondFontTable
                                      ,(int)ptrFirstFontTable,0xffffffff,(int)sVar4,(int)sVar5,0,0);
      folder_option_ERASE_right_bound = (float)(aiStack184[0] + iStack196);
      fStack268 = 225.00000000;
      fStack264 = flt_80051A28;
      fStack276 = (float)(uint)*(byte *)(DAT_8008d128 + 1);
      if (false) {
        fStack276 = fStack276 + 4294967296.00000000;
      }
      fStack276 = fStack276 * 0.50000000;
      fStack272 = (float)(uint)*(byte *)((int)DAT_8008d128 + 5);
      if (false) {
        fStack272 = fStack272 + 4294967296.00000000;
      }
      fStack272 = fStack272 * 0.50000000;
      likely_generate_DL_for_image_declaration((uint **)register0x000000ec,DAT_8008d128,4,0,0);
      display_image_at_on_screen_coord
                ((int *)register0x000000ec,(int *)&fStack268,wdivh,(int)&fStack276,
                 (uint)*(byte *)(DAT_8008d128 + 1),(uint)*(byte *)((int)DAT_8008d128 + 5),0,0,1,0xff
                 ,0xff,0xff,0xff,(uint)(*(char *)((int)DAT_8008d128 + 6) != '\0'));
      folder_option_COPY_left_bound = fStack268 - fStack276;
      folder_option_COPY_upper_bound = fStack264 - fStack272;
      folder_option_COPY_lower_bound = fStack272 + fStack264;
      fStack284 = flt_80051A2C;
      fStack280 = flt_80051A30;
      fStack292 = (float)(uint)*(byte *)(DAT_8008d128 + 4);
      if (false) {
        fStack292 = fStack292 + 4294967296.00000000;
      }
      fStack292 = fStack292 * 0.50000000;
      fStack288 = (float)(uint)*(byte *)((int)DAT_8008d128 + 0x11);
      if (false) {
        fStack288 = fStack288 + 4294967296.00000000;
      }
      fStack288 = fStack288 * 0.50000000;
      likely_generate_DL_for_image_declaration((uint **)register0x000000ec,DAT_8008d128 + 3,4,0,0);
      display_image_at_on_screen_coord
                ((int *)register0x000000ec,(int *)&fStack284,wdivh_00,(int)&fStack292,
                 (uint)*(byte *)(DAT_8008d128 + 4),(uint)*(byte *)((int)DAT_8008d128 + 0x11),0,0,1,
                 0xff,0xff,0xff,0xff,(uint)(*(char *)((int)DAT_8008d128 + 0x12) != '\0'));
      folder_option_ERASE_left_bound = fStack284 - fStack292;
      folder_option_ERASE_upper_bound = fStack280 - fStack288;
      folder_option_ERASE_lower_bound = fStack288 + fStack280;
      iStack300 = 0x42dc0000;
      fStack296 = flt_80051A34;
      fStack308 = (float)(uint)*(byte *)(DAT_8008d128 + 7);
      if (false) {
        fStack308 = fStack308 + 4294967296.00000000;
      }
      fStack308 = fStack308 * 0.50000000;
      fStack304 = (float)(uint)*(byte *)((int)DAT_8008d128 + 0x1d);
      if (false) {
        fStack304 = fStack304 + 4294967296.00000000;
      }
      fStack304 = fStack304 * 0.50000000;
      likely_generate_DL_for_image_declaration((uint **)register0x000000ec,DAT_8008d128 + 6,4,0,0);
      display_image_at_on_screen_coord
                ((int *)register0x000000ec,&iStack300,wdivh_01,(int)&fStack308,
                 (uint)*(byte *)(DAT_8008d128 + 7),(uint)*(byte *)((int)DAT_8008d128 + 0x1d),0,0,1,
                 0xff,0xff,0xff,0xff,(uint)(*(char *)((int)DAT_8008d128 + 0x1e) != '\0'));
      if (folder_selected_for_deletion < 0) {
        puStackX0 = (uint *)load_draw_selected_icon_folder_select(puStackX0);
      }
      return puStackX0;
    }
  } while( true );
}



void init_menu06_modesel(void)

{
  gamemode = GAMEMODE_INTRO;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  load_walletbond();
  copyCurrentEEPROMtoStack();
  return;
}



void update_menu06_modesel(void)

{
  return;
}



void interface_menu06_modesel(void)

{
  ulonglong uVar1;
  BOOL BVar3;
  longlong lVar2;
  undefined *puVar4;
  u32 cheat;
  
  is_cheat_menu_available = FALSE;
  puVar4 = &cheat_available;
  cheat = 1;
  do {
    uVar1 = check_if_cheat_available(cheat);
    if (uVar1 == 0) {
      *puVar4 = 0;
    }
    else {
      *puVar4 = 1;
      is_cheat_menu_available = TRUE;
    }
    cheat += 1;
    puVar4 = puVar4 + 1;
  } while (cheat != 0x4b);
  video_related_1F(60.00000000);
  video_related_21((f32)menu06_aspect);
  set_page_height(100.00000000,(f32)menu06_pageheight);
  set_video2_settings_offset_24(0);
  disable_all_switches((int)ptr_folder_object_instance);
  cheat = removed_would_have_returned_bond_for_folder_num(selected_folder_num);
  select_load_bond_picture((int)ptr_folder_object_instance,cheat);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,7,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,2,1);
  tab_3_highlight = FALSE;
  mission_difficulty_highlighted = DIFFICULTY_MULTI;
  BVar3 = isontab3();
  if (BVar3 == FALSE) {
    if ((is_cheat_menu_available == FALSE) || ((float)cursor_v_pos < flt_80051A40)) {
      if (((float)cursor_v_pos < 243.00000000) ||
         (lVar2 = get_attached_controller_count(), lVar2 < 2)) {
        mission_difficulty_highlighted = DIFFICULTY_AGENT;
        uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
        if (uVar1 != 0) {
          gamemode = GAMEMODE_SOLO;
          play_sfx_a1(ptr_sfx_buf,0xc5,NULL);
        }
      }
      else {
        mission_difficulty_highlighted = DIFFICULTY_SECRET;
        uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
        if (uVar1 != 0) {
          gamemode = GAMEMODE_MULTI;
          play_sfx_a1(ptr_sfx_buf,0xc5,NULL);
        }
      }
    }
    else {
      mission_difficulty_highlighted = DIFFICULTY_00;
      uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
      if (uVar1 != 0) {
        gamemode = GAMEMODE_CHEATS;
        play_sfx_a1(ptr_sfx_buf,0xc5,NULL);
      }
    }
  }
  else {
    tab_3_highlight = TRUE;
    uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
    if (uVar1 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  uVar1 = get_controller_buttons_pressed('\0',B_BUTTON);
  if (uVar1 != 0) {
    tab_3_selected = TRUE;
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  menu_control_stick_tracking();
  if (gamemode == GAMEMODE_SOLO) {
    set_menu_to_mode(MENU_MISSION_SELECT,0);
    set_cursor_to_stage_solo(0);
  }
  else {
    if (gamemode == GAMEMODE_MULTI) {
      set_menu_to_mode(MENU_MP_OPTIONS,0);
    }
    else {
      if (gamemode == GAMEMODE_CHEATS) {
        set_menu_to_mode(MENU_CHEAT,0);
      }
      else {
        if (tab_3_selected != FALSE) {
          set_menu_to_mode(MENU_FILE_SELECT,0);
        }
      }
    }
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 proc_7F00D5E8(undefined4 param_1)

{
  undefined4 uVar1;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  int iVar2;
  longlong lVar3;
  int iVar4;
  float **ppfVar5;
  float **ppfVar6;
  float **ppfVar7;
  float **ppfVar8;
  float fVar9;
  float fVar10;
  float in_f14;
  undefined4 auStack272 [16];
  float afStack208 [16];
  float afStack144 [17];
  float *pfStack76;
  undefined4 uStack72;
  undefined4 uStack68;
  undefined4 uStack64;
  float *pfStack60;
  
  pfStack60 = &dword_8002AB94 + selected_folder_num * 3;
  fVar9 = *pfStack60;
  fVar10 = (&FLOAT_8002ab98)[selected_folder_num * 3];
  ppfVar7 = (float **)dword_8002AF84;
  ppfVar5 = &pfStack76;
  do {
    ppfVar8 = ppfVar7 + 3;
    ppfVar6 = ppfVar5 + 3;
    *ppfVar5 = *ppfVar7;
    ppfVar5[1] = ppfVar7[1];
    ppfVar5[2] = ppfVar7[2];
    ppfVar7 = ppfVar8;
    ppfVar5 = ppfVar6;
  } while (ppfVar8 != (float **)&dword_8002AFC0);
  *ppfVar6 = _dword_8002AFC0;
  proc_7F059694(afStack144,0.00000000,in_f14,fVar9 + flt_8002AFC4,fVar10 + flt_8002AFC8,
                flt_8002AFCC + 4000.00000000,fVar9 + flt_8002AFC4,fVar10 + flt_8002AFC8,0.00000000,
                0.00000000);
  init_something_copy_posdata_to_it
            ((int *)(&dword_8002AB94 + selected_folder_num * 3),(int *)afStack208);
  matrix_multiply_A1_by_F12(0.25000000,extraout_a0,afStack208);
  proc_7F058068(afStack144,afStack208);
  pfStack76 = afStack208;
  proc_7F0BD714((int)*(short *)(*(int *)(ptr_folder_object_instance + 8) + 0xe) << 6);
  proc_7F058020(afStack208,pfStack60);
  *(float **)(ptr_folder_object_instance + 0xc) = pfStack60;
  uStack68 = 3;
  uStack72 = 0;
  uStack64 = param_1;
  subdraw((int)&pfStack76,(uint)ptr_folder_object_instance,extraout_a2_lo,extraout_a3_lo);
  uVar1 = uStack64;
  lVar3 = 0;
  iVar4 = 0;
  if (0 < *(short *)(*(int *)(ptr_folder_object_instance + 8) + 0xe)) {
    iVar2 = *(int *)(ptr_folder_object_instance + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar2 + iVar4),auStack272);
      proc_7F058C9C((int)auStack272,
                    (uint *)(*(int *)(ptr_folder_object_instance + 0xc) + (int)lVar3 * 0x40));
      lVar3 = (longlong)((int)lVar3 + 1);
      iVar4 += 0x40;
      if ((longlong)*(short *)(*(int *)(ptr_folder_object_instance + 8) + 0xe) <= lVar3) break;
      iVar2 = *(int *)(ptr_folder_object_instance + 0xc);
    }
  }
  return uVar1;
}



void set_menu_cursor_pos_to_setting(int setting)

{
  cursor_h_pos = 126.00000000;
  cursor_v_pos = (f32)(float)(setting * 0x20 + 0xe2);
  return;
}



undefined4 constructor_menu06_modesel(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  short sVar3;
  short sVar4;
  longlong lVar1;
  undefined4 uVar2;
  u16 id;
  uint uStack24;
  int iStack20;
  int iStack16;
  uint uStack12;
  uint uStack8;
  byte *pbStack4;
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL_00 = microcode_constructor(DL);
  uStack8 = 0x96;
  uStack12 = 0xdc;
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack8,&uStack12,(byte *)a1_,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  if (append_cheat_sp == FALSE) {
    id = 0x9c1d;
  }
  else {
    id = 0x9c75;
  }
  pbStack4 = get_textptr_for_textID(id);
  proc_7F0AE98C(&iStack20,&iStack16,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack8 = 0xaa;
  uStack12 = 0xdc;
  if (mission_difficulty_highlighted == DIFFICULTY_AGENT) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x94,0xda,(longlong)(iStack16 + 0xaf),0xea,0x32);
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  uStack8 = 0x96;
  uStack12 = 0xfc;
  lVar1 = get_attached_controller_count();
  if (lVar1 < 2) {
    uStack24 = 0x70;
  }
  else {
    uStack24 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack8,&uStack12,(byte *)a2_,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uStack24,(int)sVar3,(int)sVar4,0,0);
  id = 0x9c1e;
  if (append_cheat_mp != FALSE) {
    id = 0x9d14;
  }
  pbStack4 = get_textptr_for_textID(id);
  proc_7F0AE98C(&iStack20,&iStack16,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack8 = 0xaa;
  uStack12 = 0xfc;
  if (mission_difficulty_highlighted == DIFFICULTY_SECRET) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x94,0xfa,(longlong)(iStack16 + 0xaf),0x10a,0x32);
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uStack24,(int)sVar3,(int)sVar4,0,0);
  if (is_cheat_menu_available != FALSE) {
    uStack8 = 0x96;
    uStack12 = 0x11c;
    sVar3 = get_video2_settings_txtClipW();
    sVar4 = get_video2_settings_txtClipH();
    DL_00 = write_text_at_abs_coord
                      (DL_00,&uStack8,&uStack12,(byte *)a3_,(int)ptrSecondFontTable,
                       (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
    pbStack4 = get_textptr_for_textID(0x9c1f);
    proc_7F0AE98C(&iStack20,&iStack16,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
    uStack8 = 0xaa;
    uStack12 = 0x11c;
    if (mission_difficulty_highlighted == DIFFICULTY_00) {
      DL_00 = microcode_constructor_related_to_menus
                        (DL_00,0x94,0x11a,(longlong)(iStack16 + 0xaf),0x12a,0x32);
    }
    sVar3 = get_video2_settings_txtClipW();
    sVar4 = get_video2_settings_txtClipH();
    DL_00 = write_text_at_abs_coord
                      (DL_00,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                       (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  }
  DL_00 = add_tab3_previous(DL_00);
  uVar2 = load_draw_selected_icon_folder_select(DL_00);
  return uVar2;
}



int pull_and_display_text_for_folder_a0(undefined *folder)

{
  mission_folder_setup *pmVar1;
  int iVar2;
  undefined *puVar3;
  
  pmVar1 = mission_folder_setup_entries;
  iVar2 = 0;
  puVar3 = (undefined *)mission_folder_setup_entries[0].mission_num;
  if (mission_folder_setup_entries[0].folder_text_preset != 0) {
    while( true ) {
      if (folder == puVar3) {
        return iVar2;
      }
      iVar2 += 1;
      if (pmVar1[1].folder_text_preset == 0) break;
      puVar3 = (undefined *)pmVar1[1].mission_num;
      pmVar1 = pmVar1 + 1;
    }
  }
  return -1;
}



BOOL check_if_stage_completed_on_difficulty(int stage,DIFFICULTY difficulty)

{
  BOOL completed;
  
  if (mission_folder_setup_entries[stage].mission_num < 0) {
    completed = FALSE;
  }
  else {
    completed = doesFolderHaveStageUnlockedAtDifficulty
                          (selected_folder_num,mission_folder_setup_entries[stage].mission_num,
                           difficulty);
  }
  return completed;
}



longlong get_highest_unlocked_difficulty_for_level(longlong stage)

{
  int iVar1;
  BOOL BVar2;
  longlong lVar3;
  
  iVar1 = pull_and_display_text_for_folder_a0((undefined *)stage);
  lVar3 = 2;
  if (-1 < mission_folder_setup_entries[iVar1].stage_id) {
    BVar2 = is007ModeUnlockedinFolder(selected_folder_num);
    if (BVar2 == FALSE) {
      iVar1 = get_debug_007_unlock_flag();
      if (iVar1 != 0) {
        lVar3 = 3;
      }
    }
    else {
      lVar3 = 3;
    }
    if (true) {
      do {
        BVar2 = doesFolderHaveStageUnlockedAtDifficulty
                          (selected_folder_num,(STAGENUM)(undefined *)stage,(DIFFICULTY)lVar3);
        if (append_cheat_sp == FALSE) {
          if (BVar2 != FALSE) {
            return lVar3;
          }
        }
        else {
          if (BVar2 == 3) {
            return lVar3;
          }
        }
        lVar3 = (longlong)((DIFFICULTY)lVar3 + DIFFICULTY_MULTI);
      } while (-1 < lVar3);
    }
  }
  return -1;
}



void init_menu07_missionsel(void)

{
  selected_stage = LEVELID_NONE;
  briefingpage = 0xffffffff;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  if (maybe_is_in_menu != FALSE) {
    musicTrack1Play(M_FOLDERS);
    maybe_is_in_menu = FALSE;
  }
  load_walletbond();
  return;
}



void update_menu07_missionsel(void)

{
  return;
}



void interface_menu07_missionsel(undefined8 param_1,undefined8 param_2)

{
  ushort *partdesc;
  bool bVar1;
  int iVar2;
  BOOL BVar5;
  int **ppiVar6;
  int **ppiVar7;
  ulonglong uVar3;
  longlong lVar4;
  undefined4 *puVar8;
  undefined4 *puVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu07_aspect);
  set_page_height(100.00000000,(f32)menu07_pageheight);
  set_video2_settings_offset_24(0);
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x13,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x14,1);
  tab_3_highlight = FALSE;
  mission_difficulty_highlighted = DIFFICULTY_MULTI;
  BVar5 = isontab3();
  iVar13 = 0;
  if (BVar5 == FALSE) {
    bVar1 = true;
    while (((bVar1 && ((float)(cursor_xpos_table_mission_select[iVar13 + 1] +
                              cursor_xpos_table_mission_select[iVar13]) * 0.50000000 <=
                       (float)cursor_h_pos)) && (iVar13 += 1, iVar13 != 5))) {
      bVar1 = iVar13 < 4;
    }
    iVar11 = 0;
    bVar1 = true;
    while (((bVar1 && ((float)(cursor_ypos_table_mission_select[iVar11 + 1] +
                              cursor_ypos_table_mission_select[iVar11]) * 0.50000000 <=
                       (float)cursor_v_pos)) && (iVar11 += 1, iVar11 != 4))) {
      bVar1 = iVar11 < 3;
    }
    if (0 < iVar11) {
      iVar2 = iVar11 * 5;
      do {
        iVar12 = 0;
        iVar10 = iVar2;
        do {
          lVar4 = get_highest_unlocked_difficulty_for_level((longlong)iVar10);
          if (-1 < lVar4) break;
          iVar12 += 1;
          iVar10 += 1;
        } while (iVar12 != 5);
        if (iVar12 < 5) break;
        iVar11 += -1;
        iVar2 += -5;
      } while (0 < iVar11);
    }
    iVar11 *= 5;
    if (-1 < iVar13) {
      iVar2 = iVar11 + iVar13;
      do {
        lVar4 = get_highest_unlocked_difficulty_for_level((longlong)iVar2);
        if (-1 < lVar4) break;
        iVar13 += -1;
        iVar2 += -1;
      } while (-1 < iVar13);
    }
    if (iVar13 < 0) {
      iVar13 = 0;
      iVar2 = iVar11;
      do {
        lVar4 = get_highest_unlocked_difficulty_for_level((longlong)iVar2);
        if (-1 < lVar4) break;
        iVar13 += 1;
        iVar2 += 1;
      } while (iVar13 != 5);
    }
    mission_difficulty_highlighted = iVar11 + iVar13;
  }
  else {
    tab_3_highlight = TRUE;
  }
  partdesc = *(ushort **)(*(int *)(*(int *)(ptr_folder_object_instance + 8) + 8) + 0x54);
  if (partdesc != NULL) {
    iVar13 = *(int *)(partdesc + 2);
    ppiVar6 = (int **)extract_id_from_object_structure_microcode
                                ((int)ptr_folder_object_instance,partdesc);
    ppiVar7 = ppiVar6;
    proc_7F0BD6C4((int)*(short *)(iVar13 + 0xc));
    *(int ***)ppiVar6 = ppiVar7;
    lVar4 = 0;
    iVar11 = 0;
    if (0 < *(short *)(iVar13 + 0xc)) {
      iVar2 = *(int *)(iVar13 + 8);
      while( true ) {
        puVar9 = (undefined4 *)(iVar2 + iVar11);
        puVar8 = (undefined4 *)((int)*ppiVar6 + iVar11);
        *puVar8 = *puVar9;
        puVar8[1] = puVar9[1];
        puVar8[2] = puVar9[2];
        puVar8[3] = puVar9[3];
        iVar10 = (int)lVar4;
        iVar2 = iVar10;
        if (lVar4 < 0) {
          iVar2 = iVar10 + 3;
        }
        lVar4 = get_highest_unlocked_difficulty_for_level((longlong)(iVar2 >> 2));
        if (lVar4 < 0) {
          *(undefined *)((int)*ppiVar6 + iVar11 + 0xc) = 0xf;
          *(undefined *)((int)*ppiVar6 + iVar11 + 0xd) = 0xf;
          *(undefined *)((int)*ppiVar6 + iVar11 + 0xe) = 0xf;
          *(undefined *)((int)*ppiVar6 + iVar11 + 0xf) = 0xff;
        }
        else {
          if (iVar2 >> 2 == mission_difficulty_highlighted) {
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xc) = 0xff;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xd) = 0xff;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xe) = 0xff;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xf) = 0xf5;
          }
          else {
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xc) = 0x6e;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xd) = 0x6e;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xe) = 0x6e;
            *(undefined *)((int)*ppiVar6 + iVar11 + 0xf) = 0xff;
          }
        }
        lVar4 = (longlong)(iVar10 + 1);
        iVar11 += 0x10;
        if ((longlong)*(short *)(iVar13 + 0xc) <= lVar4) break;
        iVar2 = *(int *)(iVar13 + 8);
      }
    }
  }
  uVar3 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar3 == 0) {
    uVar3 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar3 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      if (-1 < mission_difficulty_highlighted) {
        briefingpage = pull_and_display_text_for_folder_a0
                                 ((undefined *)mission_difficulty_highlighted);
        selected_stage = mission_folder_setup_entries[briefingpage].stage_id;
        tab_2_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MODE_SELECT,0);
      set_menu_cursor_pos_to_setting(0);
    }
  }
  else {
    set_menu_to_mode(MENU_DIFFICULTY,0);
    lVar4 = get_highest_unlocked_difficulty_for_level
                      ((longlong)mission_folder_setup_entries[briefingpage].mission_num);
    set_cursor_pos_difficulty((int)lVar4);
  }
  return;
}



void set_cursor_to_stage_solo(longlong param_1)

{
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (param_1 == -0x80000000)) {
    trap(0x1800);
  }
  cursor_h_pos = (f32)(float)cursor_xpos_table_mission_select[(int)param_1 % 5];
  cursor_v_pos = (f32)(float)cursor_ypos_table_mission_select[(int)param_1 / 5];
  return;
}



undefined4 constructor_menu07_missionsel(undefined4 *param_1)

{
  byte bVar1;
  undefined4 *DL;
  uint *DL_00;
  int iVar3;
  longlong lVar2;
  byte *pbVar4;
  size_t sVar5;
  short sVar7;
  short sVar8;
  undefined4 uVar6;
  undefined *folder;
  uint uVar9;
  int iVar10;
  u32 *puVar11;
  int iStack88;
  undefined4 uStack84;
  byte abStack80 [52];
  int iStack28;
  int aiStack24 [4];
  undefined *puStack8;
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL[1] = 0xffffffff;
  *DL = 0xf8000000;
  DL = (undefined4 *)proc_7F00D5E8(DL + 2);
  DL_00 = microcode_constructor(DL);
  puStack8 = NULL;
  do {
    iVar10 = 0;
    folder = puStack8;
    do {
      iVar3 = pull_and_display_text_for_folder_a0(folder);
      lVar2 = get_highest_unlocked_difficulty_for_level((longlong)(int)folder);
      if (-1 < lVar2) {
        uVar9 = 0x96969600;
        puVar11 = cursor_xpos_table_mission_select + (int)puStack8;
        if ((longlong)(int)folder == (longlong)mission_difficulty_highlighted) {
          uVar9 = 0xffffff00;
        }
        if (mission_folder_setup_entries[iVar3].icon_text_preset == 0) {
          pbVar4 = get_textptr_for_textID(mission_folder_setup_entries[iVar3].folder_text_preset);
          textpointer_load_parse_something((char *)abStack80,(char *)pbVar4);
        }
        else {
          pbVar4 = get_textptr_for_textID(mission_folder_setup_entries[iVar3].icon_text_preset);
          textpointer_load_parse_something((char *)abStack80,(char *)pbVar4);
        }
        if (j_text_trigger == 0) {
          sVar5 = strlen((char *)abStack80);
          pbVar4 = abStack80 + (sVar5 - 1);
          if (-1 < (int)(sVar5 - 1)) {
            bVar1 = *pbVar4;
            while( true ) {
              if (0x60 < bVar1) {
                *pbVar4 = bVar1 - 0x20;
              }
              pbVar4 = pbVar4 + -1;
              if (pbVar4 < abStack80) break;
              bVar1 = *pbVar4;
            }
          }
        }
        string_load_parse_something((char *)abStack80,asc_8004F4A0);
        iStack28 = 0;
        aiStack24[0] = 0;
        proc_7F0AE98C(aiStack24,&iStack28,abStack80,D_80040EB0,D_80040EAC,0);
        iStack88 = (cursor_ypos_table_mission_select[iVar10] - aiStack24[0]) + 0x1d;
        uStack84 = *puVar11 - 0x1f;
        DL = microcode_constructor_related_to_menus
                       (DL_00,(longlong)uStack84,(longlong)iStack88,(longlong)(uStack84 + iStack28),
                        iStack88 + aiStack24[0],0);
        sVar7 = get_video2_settings_txtClipW();
        sVar8 = get_video2_settings_txtClipH();
        DL_00 = en_text_write_stuff(DL,&uStack84,&iStack88,abStack80,D_80040EB0,(int)D_80040EAC,
                                    uVar9 | 0xff,(int)sVar7,(int)sVar8,0,0);
        iStack88 = (cursor_ypos_table_mission_select[iVar10] - aiStack24[0]) + 0x1d;
        uStack84 = *puVar11 - 0x1f;
        sVar7 = get_video2_settings_txtClipW();
        sVar8 = get_video2_settings_txtClipH();
        DL_00 = en_text_write_stuff(DL_00,&uStack84,&iStack88,abStack80,D_80040EB0,(int)D_80040EAC,
                                    uVar9 | 100,(int)sVar7,(int)sVar8,0,0);
      }
      iVar10 += 1;
      folder = folder + 5;
    } while (iVar10 != 4);
    puStack8 = puStack8 + 1;
  } while (puStack8 != (undefined *)((int)&i + 1));
  DL_00 = add_tab3_previous(DL_00);
  uVar6 = load_draw_selected_icon_folder_select(DL_00);
  return uVar6;
}



void init_menu08_difficulty(void)

{
  selected_difficulty = DIFFICULTY_MULTI;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  load_walletbond();
  return;
}



void update_menu08_difficulty(void)

{
  return;
}



void interface_menu08_difficulty(void)

{
  longlong lVar1;
  int iVar3;
  BOOL BVar4;
  ulonglong uVar2;
  
  lVar1 = get_highest_unlocked_difficulty_for_level
                    ((longlong)mission_folder_setup_entries[briefingpage].mission_num);
  iVar3 = (int)lVar1;
  video_related_1F(60.00000000);
  video_related_21((f32)menu08_aspect);
  set_page_height(100.00000000,(f32)menu08_pageheight);
  set_video2_settings_offset_24(0);
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,4,1);
  tab_3_highlight = FALSE;
  mission_difficulty_highlighted = DIFFICULTY_MULTI;
  BVar4 = isontab3();
  if (BVar4 == FALSE) {
    if ((iVar3 < 3) || ((float)cursor_v_pos < flt_80051A54)) {
      if ((iVar3 < 2) || ((float)cursor_v_pos < 243.00000000)) {
        if (iVar3 < 1) {
          mission_difficulty_highlighted = DIFFICULTY_AGENT;
        }
        else {
          if (211.00000000 <= (float)cursor_v_pos) {
            mission_difficulty_highlighted = DIFFICULTY_SECRET;
          }
          else {
            mission_difficulty_highlighted = DIFFICULTY_AGENT;
          }
        }
      }
      else {
        mission_difficulty_highlighted = DIFFICULTY_00;
      }
    }
    else {
      mission_difficulty_highlighted = DIFFICULTY_007;
    }
  }
  else {
    tab_3_highlight = TRUE;
  }
  uVar2 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar2 == 0) {
    uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar2 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      if (-1 < mission_difficulty_highlighted) {
        selected_difficulty = mission_difficulty_highlighted;
        tab_2_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,0x4d,NULL);
      }
    }
    else {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MISSION_SELECT,0);
      set_cursor_to_stage_solo((longlong)mission_folder_setup_entries[briefingpage].mission_num);
    }
  }
  else {
    if (selected_difficulty == DIFFICULTY_007) {
      set_menu_to_mode(MENU_007_OPTIONS,0);
      set_cursor_pos_tab2();
    }
    else {
      set_menu_to_mode(MENU_BRIEFING,0);
      set_cursor_pos_tab2();
    }
  }
  return;
}



uint * print_current_solo_briefing_stage_name(uint *param_1,byte *param_2)

{
  char *pcVar1;
  byte *pbVar2;
  short sVar5;
  short sVar6;
  int iVar3;
  uint *puVar4;
  uint *local_res0;
  uint local_8;
  uint local_4;
  
  local_res0 = param_1;
  if (-1 < selected_difficulty) {
    pcVar1 = (char *)get_ptr_difficulty_name(selected_difficulty);
    textpointer_load_parse_something((char *)param_2,pcVar1);
    pbVar2 = get_textptr_for_textID(0x9c20);
    string_load_parse_something((char *)param_2,(char *)pbVar2);
    local_4 = 0x37;
    local_8 = 0x57;
    sVar5 = get_video2_settings_txtClipW();
    sVar6 = get_video2_settings_txtClipH();
    local_res0 = write_text_at_abs_coord
                           (param_1,&local_4,&local_8,param_2,(int)ptrSecondFontTable,
                            (int)ptrFirstFontTable,0xff,(int)sVar5,(int)sVar6,0,0);
  }
  iVar3 = get_chapter_briefing_entry(briefingpage);
  if (-1 < iVar3) {
    pbVar2 = get_textptr_for_textID(0x9c21);
    textpointer_load_parse_something((char *)param_2,(char *)pbVar2);
    string_load_parse_something
              ((char *)param_2,(char *)mission_folder_setup_entries[iVar3].string_ptr);
    string_load_parse_something((char *)param_2,asc_8004F4A4);
    pbVar2 = get_textptr_for_textID(mission_folder_setup_entries[iVar3].folder_text_preset);
    string_load_parse_something((char *)param_2,(char *)pbVar2);
    string_load_parse_something((char *)param_2,asc_8004F4A8);
    local_4 = 0x37;
    local_8 = 0x67;
    sVar5 = get_video2_settings_txtClipW();
    sVar6 = get_video2_settings_txtClipH();
    local_res0 = write_text_at_abs_coord
                           (local_res0,&local_4,&local_8,param_2,(int)ptrSecondFontTable,
                            (int)ptrFirstFontTable,0xff,(int)sVar5,(int)sVar6,0,0);
  }
  pbVar2 = get_textptr_for_textID(0x9c22);
  textpointer_load_parse_something((char *)param_2,(char *)pbVar2);
  string_load_parse_something
            ((char *)param_2,(char *)mission_folder_setup_entries[briefingpage].string_ptr);
  string_load_parse_something((char *)param_2,asc_8004F4AC);
  pbVar2 = get_textptr_for_textID(mission_folder_setup_entries[briefingpage].folder_text_preset);
  string_load_parse_something((char *)param_2,(char *)pbVar2);
  string_load_parse_something((char *)param_2,asc_8004F4B0);
  local_4 = 0x37;
  local_8 = 0x77;
  sVar5 = get_video2_settings_txtClipW();
  sVar6 = get_video2_settings_txtClipH();
  puVar4 = write_text_at_abs_coord
                     (local_res0,&local_4,&local_8,param_2,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar5,(int)sVar6,0,0);
  return puVar4;
}



void set_cursor_pos_difficulty(int difficulty)

{
  cursor_h_pos = 106.00000000;
  cursor_v_pos = (f32)(float)(difficulty * 0x1e + 0xba);
  return;
}



// WARNING: Instruction at (ram,0x7f00f1b4) overlaps instruction at (ram,0x7f00f1b0)
// 

undefined4 constructor_menu08_difficulty(undefined4 *param_1)

{
  longlong lVar1;
  byte *pbVar2;
  short sVar6;
  short sVar7;
  int iVar3;
  BOOL BVar4;
  undefined4 uVar5;
  int iVar8;
  DIFFICULTY difficulty;
  uint uVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  f32 wdivh;
  uint *puStackX0;
  float fStack3048;
  float fStack3044;
  int iStack3040;
  float fStack3036;
  int iStack3032;
  int iStack3028;
  undefined4 *puStack3024;
  undefined4 auStack3020 [750];
  uint uStack20;
  uint auStack16 [2];
  int iStack8;
  
  puStackX0 = param_1;
  lVar1 = get_highest_unlocked_difficulty_for_level
                    ((longlong)mission_folder_setup_entries[briefingpage].mission_num);
  iStack8 = (int)lVar1;
  puStackX0 = set_setfillcolor(puStackX0,0,0,0);
  puStackX0 = insert_generic_fillrect(puStackX0);
  puStackX0 = (uint *)proc_7F00D5E8(puStackX0);
  puVar11 = array_8004F4B4;
  puVar10 = auStack3020;
  do {
    puVar12 = puVar11 + 3;
    *puVar10 = *puVar11;
    puVar10[1] = puVar11[1];
    puVar10[2] = puVar11[2];
    puVar11 = puVar12;
    puVar10 = puVar10 + 3;
  } while (puVar12 != (undefined4 *)aD_);
  puStackX0 = microcode_constructor(puStackX0);
  puStackX0 = print_current_solo_briefing_stage_name(puStackX0,(byte *)auStack3020);
  pbVar2 = get_textptr_for_textID(0x9c23);
  auStack16[0] = 0x37;
  uStack20 = 0x8f;
  sVar6 = get_video2_settings_txtClipW();
  sVar7 = get_video2_settings_txtClipH();
  puStackX0 = write_text_at_abs_coord
                        (puStackX0,auStack16,&uStack20,pbVar2,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,0xff,(int)sVar6,(int)sVar7,0,0);
  if (-1 < mission_difficulty_highlighted) {
    if (j_text_trigger == 0) {
      iVar8 = 0;
    }
    else {
      iVar8 = 0x32;
    }
    puStackX0 = microcode_constructor_related_to_menus
                          (puStackX0,(longlong)(0x7e - iVar8),
                           (longlong)(mission_difficulty_highlighted * 0x1e + 0xb2),0xf0,
                           mission_difficulty_highlighted * 0x1e + 0xc3,0x32);
  }
  iVar8 = 0;
  do {
    if ((iVar8 == 0) || (iVar8 <= iStack8)) {
      uVar9 = iVar8 * 0x1e + 0xb4;
      if (j_text_trigger == 0) {
        puStack3024 = auStack3020;
        sprintf((char *)puStack3024,aD_,iVar8 + 1);
      }
      else {
        if (iVar8 == 0) {
          puStack3024 = (undefined4 *)get_textptr_for_textID(0x9d09);
        }
        else {
          if (iVar8 == 1) {
            puStack3024 = (undefined4 *)get_textptr_for_textID(0x9d0a);
          }
          else {
            if (iVar8 == 2) {
              puStack3024 = (undefined4 *)get_textptr_for_textID(0x9d0b);
            }
            else {
              if (iVar8 == 3) {
                puStack3024 = (undefined4 *)get_textptr_for_textID(0x9d0c);
              }
            }
          }
        }
      }
      proc_7F0AE98C(&iStack3032,&iStack3028,(byte *)puStack3024,(int)ptrSecondFontTable,
                    (int *)ptrFirstFontTable,0);
      iVar3 = 0;
      if (j_text_trigger != 0) {
        iVar3 = iStack3028 + -10;
      }
      auStack16[0] = 0x82 - iVar3;
      uStack20 = uVar9;
      sVar6 = get_video2_settings_txtClipW();
      sVar7 = get_video2_settings_txtClipH();
      puStackX0 = write_text_at_abs_coord
                            (puStackX0,auStack16,&uStack20,(byte *)puStack3024,
                             (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xff,(int)sVar6,
                             (int)sVar7,0,0);
      if (iVar8 == 0) {
        puStack3024 = (undefined4 *)get_textptr_for_textID(0x9c24);
      }
      else {
        if (iVar8 == 1) {
          puStack3024 = (undefined4 *)get_textptr_for_textID(0x9c25);
        }
        else {
          if (iVar8 == 2) {
            puStack3024 = (undefined4 *)get_textptr_for_textID(0x9c26);
          }
          else {
            if (iVar8 == 3) {
              puStack3024 = (undefined4 *)get_textptr_for_textID(0x9c27);
            }
          }
        }
      }
      auStack16[0] = 0x96;
      uStack20 = uVar9;
      sVar6 = get_video2_settings_txtClipW();
      sVar7 = get_video2_settings_txtClipH();
      puStackX0 = write_text_at_abs_coord
                            (puStackX0,auStack16,&uStack20,(byte *)puStack3024,
                             (int)ptrSecondFontTable,(int)ptrFirstFontTable,0xff,(int)sVar6,
                             (int)sVar7,0,0);
    }
    iVar8 += 1;
  } while (iVar8 < 4);
  puStackX0 = add_tab3_previous(puStackX0);
  difficulty = DIFFICULTY_AGENT;
  do {
    if (((difficulty == DIFFICULTY_AGENT) || (difficulty <= iStack8)) &&
       (BVar4 = check_if_stage_completed_on_difficulty(briefingpage,difficulty),
       iVar8 = DAT_8008d128, BVar4 == 3)) {
      fStack3036 = (float)(difficulty * 0x1e + 0xba);
      iStack3040 = 0x438c0000;
      fStack3048 = (float)(uint)*(byte *)(DAT_8008d128 + 0x34);
      if (false) {
        fStack3048 = fStack3048 + 4294967296.00000000;
      }
      fStack3048 = fStack3048 * 0.50000000;
      fStack3044 = (float)(uint)*(byte *)(DAT_8008d128 + 0x35);
      if (false) {
        fStack3044 = fStack3044 + 4294967296.00000000;
      }
      fStack3044 = fStack3044 * 0.50000000;
      likely_generate_DL_for_image_declaration
                ((uint **)register0x000000ec,(uint *)(DAT_8008d128 + 0x30),4,0,0);
      display_image_at_on_screen_coord
                ((int *)register0x000000ec,&iStack3040,wdivh,(int)&fStack3048,
                 (uint)*(byte *)(iVar8 + 0x34),(uint)*(byte *)(iVar8 + 0x35),0,0,1,0xb4,0,0,0xff,
                 (uint)(*(char *)(iVar8 + 0x36) != '\0'));
    }
    difficulty += DIFFICULTY_SECRET;
  } while (difficulty != DIFFICULTY_007);
  uVar5 = load_draw_selected_icon_folder_select(puStackX0);
  return uVar5;
}



void init_menu09_007options(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  highlight_enemy_reaction = FALSE;
  highlight_enemy_health = FALSE;
  highlight_enemy_accuracy = FALSE;
  highlight_enemy_damage = FALSE;
  load_walletbond();
  return;
}



void update_menu09_007options(void)

{
  return;
}



void interface_menu09_007options(undefined8 param_1,undefined8 param_2)

{
  f32 fVar1;
  ulonglong uVar2;
  BOOL BVar3;
  float fVar4;
  float fVar5;
  int iVar6;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu09_aspect);
  set_page_height(100.00000000,(f32)menu09_pageheight);
  set_video2_settings_offset_24(0);
  uVar2 = get_controller_buttons_held('\0',Z_TRIG|A_BUTTON);
  if (uVar2 == 0) {
    tab_3_highlight = FALSE;
    tab_2_highlight = FALSE;
    tab_1_highlight = FALSE;
    highlight_enemy_reaction = FALSE;
    highlight_enemy_health = FALSE;
    highlight_enemy_accuracy = FALSE;
    highlight_enemy_damage = FALSE;
    BVar3 = isontab3();
    if (BVar3 == FALSE) {
      BVar3 = isontab2();
      if (BVar3 == FALSE) {
        BVar3 = isontab1();
        if (BVar3 == FALSE) {
          iVar6 = (int)(float)cursor_v_pos;
          if (iVar6 < 0x107) {
            if (iVar6 < 0xe6) {
              if (iVar6 < 0xc5) {
                if (iVar6 < 0xa4) {
                  tab_2_highlight = TRUE;
                }
                else {
                  highlight_enemy_health = TRUE;
                }
              }
              else {
                highlight_enemy_accuracy = TRUE;
              }
            }
            else {
              highlight_enemy_damage = TRUE;
            }
          }
          else {
            highlight_enemy_reaction = TRUE;
          }
        }
        else {
          tab_1_highlight = TRUE;
        }
      }
      else {
        tab_2_highlight = TRUE;
      }
    }
    else {
      tab_3_highlight = TRUE;
    }
  }
  uVar2 = get_controller_buttons_pressed('\0',START_BUTTON);
  if (uVar2 == 0) {
    uVar2 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON);
    if (uVar2 == 0) {
      uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
      if (uVar2 != 0) {
        tab_3_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      if (tab_2_highlight == FALSE) {
        if (tab_3_highlight == FALSE) {
          if (tab_1_highlight != FALSE) {
            tab_1_selected = TRUE;
          }
        }
        else {
          tab_3_selected = TRUE;
        }
      }
      else {
        tab_2_selected = TRUE;
      }
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    tab_1_selected = TRUE;
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  uVar2 = get_controller_buttons_held('\0',Z_TRIG|A_BUTTON);
  fVar1 = slider_007_mode_reaction;
  if (uVar2 != 0) {
    fVar5 = 1.00000000;
    fVar4 = ((float)cursor_h_pos - 55.00000000) / 300.00000000;
    if (fVar4 <= 1.00000000) {
      fVar5 = fVar4;
    }
    if (fVar5 < 0.00000000) {
      fVar5 = 0.00000000;
    }
    fVar1 = (f32)fVar5;
    if (highlight_enemy_reaction == FALSE) {
      if (highlight_enemy_health == FALSE) {
        if (highlight_enemy_accuracy == FALSE) {
          fVar1 = slider_007_mode_reaction;
          if (highlight_enemy_damage != FALSE) {
            slider_007_mode_damage = (f32)(fVar5 * fVar5 * 10.00000000);
            fVar1 = slider_007_mode_reaction;
          }
        }
        else {
          slider_007_mode_accuracy = (f32)(fVar5 * fVar5 * 10.00000000);
          fVar1 = slider_007_mode_reaction;
        }
      }
      else {
        slider_007_mode_health = (f32)(fVar5 * fVar5 * 10.00000000);
        fVar1 = slider_007_mode_reaction;
      }
    }
  }
  slider_007_mode_reaction = fVar1;
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (tab_1_selected == FALSE) {
    if (tab_2_selected == FALSE) {
      if (tab_3_selected != FALSE) {
        set_menu_to_mode(MENU_DIFFICULTY,0);
        set_cursor_pos_difficulty(selected_difficulty);
      }
    }
    else {
      set_menu_to_mode(MENU_BRIEFING,0);
    }
  }
  else {
    set_menu_to_mode(MENU_RUN_STAGE,1);
  }
  return;
}



undefined4 constructor_menu09_007options(undefined4 *param_1)

{
  undefined4 *DL;
  undefined4 *DL_00;
  uint *DL_01;
  short sVar2;
  short sVar3;
  undefined4 uVar1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  float fVar6;
  int iStack3020;
  int iStack3016;
  undefined4 auStack3012 [750];
  uint uStack12;
  uint uStack8;
  byte *pbStack4;
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL_00 = (undefined4 *)proc_7F00D5E8(DL);
  DL = (undefined4 *)array_80050074;
  puVar4 = auStack3012;
  do {
    puVar5 = DL + 3;
    *puVar4 = *DL;
    puVar4[1] = DL[1];
    puVar4[2] = DL[2];
    DL = puVar5;
    puVar4 = puVar4 + 3;
  } while (puVar5 != (undefined4 *)aD);
  DL_01 = microcode_constructor(DL_00);
  DL_01 = print_current_solo_briefing_stage_name(DL_01,(byte *)auStack3012);
  pbStack4 = get_textptr_for_textID(0x9c28);
  uStack8 = 0x37;
  uStack12 = 0x8f;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  pbStack4 = get_textptr_for_textID(0x9c2a);
  uStack8 = 0x39;
  uStack12 = 0xa4;
  DL = microcode_constructor_related_to_menus(DL_01,0x37,0xb5,0x163,0xc0,0x32);
  fVar6 = sqrtf((float)slider_007_mode_health / 10.00000000);
  DL_01 = microcode_constructor_related_to_menus
                    (DL,0x37,(longlong)(int)(uStack12 + 0x11),
                     (longlong)((int)(fVar6 * 300.00000000) + 0x37),uStack12 + 0x1c,100);
  if (highlight_enemy_health != FALSE) {
    DL_01 = microcode_constructor_related_to_menus
                      (DL_01,0x37,(longlong)(int)(uStack12 - 1),199,uStack12 + 0xe,0x32);
  }
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  sprintf((char *)auStack3012,aD,(int)((float)slider_007_mode_health * 100.00000000));
  iStack3020 = 0;
  iStack3016 = 0;
  proc_7F0AE98C(&iStack3016,&iStack3020,(byte *)auStack3012,(int)ptrSecondFontTable,
                (int *)ptrFirstFontTable,0);
  uStack8 = 0x11d - iStack3020;
  uStack12 = 0xa4;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,(byte *)auStack3012,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  pbStack4 = get_textptr_for_textID(0x9c2b);
  uStack8 = 0x39;
  uStack12 = 0xc5;
  DL = microcode_constructor_related_to_menus(DL_01,0x37,0xd6,0x163,0xe1,0x32);
  fVar6 = sqrtf((float)slider_007_mode_accuracy / 10.00000000);
  DL_01 = microcode_constructor_related_to_menus
                    (DL,0x37,(longlong)(int)(uStack12 + 0x11),
                     (longlong)((int)(fVar6 * 300.00000000) + 0x37),uStack12 + 0x1c,100);
  if (highlight_enemy_accuracy != FALSE) {
    DL_01 = microcode_constructor_related_to_menus
                      (DL_01,0x37,(longlong)(int)(uStack12 - 1),199,uStack12 + 0xe,0x32);
  }
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  sprintf((char *)auStack3012,aD_0,(int)((float)slider_007_mode_accuracy * 100.00000000));
  iStack3020 = 0;
  iStack3016 = 0;
  proc_7F0AE98C(&iStack3016,&iStack3020,(byte *)auStack3012,(int)ptrSecondFontTable,
                (int *)ptrFirstFontTable,0);
  uStack8 = 0x11d - iStack3020;
  uStack12 = 0xc5;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,(byte *)auStack3012,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  pbStack4 = get_textptr_for_textID(0x9c2c);
  uStack8 = 0x39;
  uStack12 = 0xe6;
  DL = microcode_constructor_related_to_menus(DL_01,0x37,0xf7,0x163,0x102,0x32);
  fVar6 = sqrtf((float)slider_007_mode_damage / 10.00000000);
  DL_01 = microcode_constructor_related_to_menus
                    (DL,0x37,(longlong)(int)(uStack12 + 0x11),
                     (longlong)((int)(fVar6 * 300.00000000) + 0x37),uStack12 + 0x1c,100);
  if (highlight_enemy_damage != FALSE) {
    DL_01 = microcode_constructor_related_to_menus
                      (DL_01,0x37,(longlong)(int)(uStack12 - 1),199,uStack12 + 0xe,0x32);
  }
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  sprintf((char *)auStack3012,aD_1,(int)((float)slider_007_mode_damage * 10.00000000));
  iStack3020 = 0;
  iStack3016 = 0;
  proc_7F0AE98C(&iStack3016,&iStack3020,(byte *)auStack3012,(int)ptrSecondFontTable,
                (int *)ptrFirstFontTable,0);
  uStack8 = 0x11d - iStack3020;
  uStack12 = 0xe6;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,(byte *)auStack3012,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  pbStack4 = get_textptr_for_textID(0x9c29);
  uStack8 = 0x39;
  uStack12 = 0x107;
  DL = microcode_constructor_related_to_menus(DL_01,0x37,0x118,0x163,0x123,0x32);
  DL_01 = microcode_constructor_related_to_menus
                    (DL,0x37,(longlong)(int)(uStack12 + 0x11),
                     (longlong)
                     ((int)((float)slider_007_mode_reaction * 300.00000000 * 1.00000000) + 0x37),
                     uStack12 + 0x1c,100);
  if (highlight_enemy_reaction != FALSE) {
    DL_01 = microcode_constructor_related_to_menus
                      (DL_01,0x37,(longlong)(int)(uStack12 - 1),199,uStack12 + 0xe,0x32);
  }
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  sprintf((char *)auStack3012,aD_2,(int)((float)slider_007_mode_reaction * 100.00000000));
  iStack3020 = 0;
  iStack3016 = 0;
  proc_7F0AE98C(&iStack3016,&iStack3020,(byte *)auStack3012,(int)ptrSecondFontTable,
                (int *)ptrFirstFontTable,0);
  uStack8 = 0x11d - iStack3020;
  uStack12 = 0x107;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_01 = write_text_at_abs_coord
                    (DL_01,&uStack8,&uStack12,(byte *)auStack3012,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
  DL_01 = add_tab1_start(DL_01);
  DL_01 = add_tab3_previous(DL_01);
  DL_01 = add_tab2_next(DL_01);
  uVar1 = load_draw_selected_icon_folder_select(DL_01);
  return uVar1;
}



u32 get_player_control_style(int playernum)

{
  return controlstyle_player[playernum];
}



BOOL check_if_mp_stage_unlocked(int stage)

{
  int iVar1;
  BOOL BVar2;
  
  if (multi_stage_setups[stage].min_player == 0) {
    BVar2 = FALSE;
  }
  else {
    iVar1 = get_selected_num_players();
    if (multi_stage_setups[stage].max_player < iVar1) {
      BVar2 = FALSE;
    }
    else {
      if (multi_stage_setups[stage].unlock_after == ~SP_STAGE_DAM) {
        BVar2 = TRUE;
      }
      else {
        BVar2 = doesFolderHaveStageUnlockedAtDifficulty
                          (selected_folder_num,multi_stage_setups[stage].unlock_after,
                           DIFFICULTY_AGENT);
        if (BVar2 == FALSE) {
          BVar2 = FALSE;
        }
        else {
          BVar2 = TRUE;
        }
      }
    }
  }
  return BVar2;
}



void select_game_length(void)

{
  uint uVar1;
  
  if (scenario != SCENARIO_TLD) {
    game_length = (int)(game_length + 1) % 7;
    return;
  }
  uVar1 = game_length + 1 & 3;
  if (((int)(game_length + 1) < 0) && (uVar1 != 0)) {
    uVar1 -= 4;
  }
  game_length = uVar1;
  return;
}



void copy_aim_settings_to_playerdata(void)

{
  player1_playerdata.autoaim = mp_sight_adjust_table[aim_sight_adjustment].autoaim;
  player1_playerdata.sight = mp_sight_adjust_table[aim_sight_adjustment].sight;
  player2_player_data.autoaim = player1_playerdata.autoaim;
  player2_player_data.sight = player1_playerdata.sight;
  player3_player_data.autoaim = player1_playerdata.autoaim;
  player3_player_data.sight = player1_playerdata.sight;
  player4_player_data.autoaim = player1_playerdata.autoaim;
  player4_player_data.sight = player1_playerdata.sight;
  return;
}



void advance_aim_settings_selection(void)

{
  uint uVar1;
  
  uVar1 = aim_sight_adjustment + 1;
  aim_sight_adjustment = uVar1 & 3;
  if (((int)uVar1 < 0) && (aim_sight_adjustment != 0)) {
    aim_sight_adjustment -= 4;
  }
  copy_aim_settings_to_playerdata();
  return;
}



void unlock_mp_chars(void)

{
  num_chars_selectable_mp = 0x40;
  return;
}



u32 get_selected_num_players(void)

{
  if (gamemode == GAMEMODE_MULTI) {
    return selected_num_players;
  }
  return 1;
}



HEADS get_player_mp_char_head(int player)

{
  if ((int)(&player_1_char)[player] < 0) {
    return (HEADS)(uint)(ushort)mp_chr_setup[player].head;
  }
  return (HEADS)(uint)(ushort)mp_chr_setup[(&player_1_char)[player]].head;
}



ulonglong get_player_mp_char_gender(int player)

{
  if ((int)(&player_1_char)[player] < 0) {
    return (ulonglong)(byte)mp_chr_setup[player].gender;
  }
  return (ulonglong)(byte)mp_chr_setup[(&player_1_char)[player]].gender;
}



BODIES get_player_mp_char_body(int player)

{
  if ((int)(&player_1_char)[player] < 0) {
    return (BODIES)(uint)(ushort)mp_chr_setup[player].body;
  }
  return (BODIES)(uint)(ushort)mp_chr_setup[(&player_1_char)[player]].body;
}



f32 get_player_mp_handicap(int player)

{
  return (f32)MP_handicap_table[(&handicap_player1)[player]].damage_modifier;
}



f32 get_player_mp_char_height(int player)

{
  if ((int)(&player_1_char)[player] < 0) {
    return (f32)mp_chr_setup[player].pov;
  }
  return (f32)mp_chr_setup[(&player_1_char)[player]].pov;
}



int get_mp_timelimit(void)

{
  return multi_game_lengths[game_length].time;
}



int get_mp_pointlimit(void)

{
  return multi_game_lengths[game_length].points;
}



void reset_mp_options_for_scenario(MPSCENARIOS scenario)

{
  int iVar1;
  
  unlock_stage_select = 1;
  unlock_game_length = 1;
  unlock_chars = 1;
  unlock_weapon_select = 1;
  unlock_handicap = 1;
  unlock_control_style = 1;
  unlock_aim_sight = 1;
  scenario = scenario;
  switch(scenario) {
  case SCENARIO_NORMAL:
  case SCENARIO_2v2:
  case SCENARIO_3v1:
  case SCENARIO_2v1:
    if (6 < game_length) {
      game_length = 2;
    }
    scenario = scenario;
    iVar1 = get_mp_weapon_set();
    if (0xd < iVar1) {
      set_mp_weapon_set(0xd);
    }
    break;
  case SCENARIO_YOLT:
    game_length = 7;
    scenario = scenario;
    iVar1 = get_mp_weapon_set();
    if (0xd < iVar1) {
      set_mp_weapon_set(0xd);
    }
    unlock_game_length = 0;
    break;
  case SCENARIO_TLD:
    if (3 < game_length) {
      game_length = 2;
    }
    scenario = scenario;
    iVar1 = get_mp_weapon_set();
    if (0xd < iVar1) {
      set_mp_weapon_set(0xd);
    }
    break;
  case SCENARIO_MWTGG:
    if (6 < game_length) {
      game_length = 2;
    }
    scenario = scenario;
    set_mp_weapon_set(0xd);
    unlock_weapon_select = 0;
    break;
  case SCENARIO_LTK:
    if (6 < game_length) {
      game_length = 2;
    }
    scenario = scenario;
    set_mp_weapon_set(1);
    unlock_handicap = 0;
  }
  return;
}



void init_mp_options_for_scenario(longlong numplayers)

{
  longlong lVar1;
  int iVar2;
  int *piVar3;
  
  if (numplayers < 2) {
    numplayers = 2;
  }
  selected_num_players = (u32)numplayers;
  lVar1 = 0;
  if (0 < numplayers) {
    piVar3 = &player_1_char;
    iVar2 = 0;
    do {
      if (*piVar3 == -1) {
        *piVar3 = (int)lVar1;
        *(undefined4 *)((int)&handicap_player1 + iVar2) = 5;
      }
      lVar1 = (longlong)((int)lVar1 + 1);
      if ((2 < numplayers) && (3 < *(int *)((int)controlstyle_player + iVar2))) {
        *(int *)((int)controlstyle_player + iVar2) = 0;
      }
      iVar2 += 4;
      piVar3 = piVar3 + 1;
    } while (lVar1 < numplayers);
  }
  if (((longlong)(ulonglong)(byte)mp_stage_playercounts[scenario].max < numplayers) ||
     (numplayers < (longlong)(ulonglong)(byte)mp_stage_playercounts[scenario].min)) {
    reset_mp_options_for_scenario(0);
    numplayers = (longlong)(int)selected_num_players;
  }
  if ((longlong)multi_stage_setups[MP_stage_selected].max_player < numplayers) {
    MP_stage_selected = MP_STAGE_TEMPLE;
  }
  return;
}



void init_menu0E_mpoptions(void)

{
  longlong numplayers;
  BOOL BVar1;
  
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  if (maybe_is_in_menu != FALSE) {
    music_related_38(0x7fff);
    musicTrack1Vol(0x7fff);
    music1_playing = 0;
    musicTrack1Play(M_FOLDERS);
    maybe_is_in_menu = FALSE;
  }
  if (selected_num_players == 0) {
    numplayers = get_attached_controller_count();
    init_mp_options_for_scenario(numplayers);
  }
  BVar1 = check_if_mp_stage_unlocked(MP_stage_selected);
  if (BVar1 == FALSE) {
    MP_stage_selected = MP_STAGE_TEMPLE;
  }
  highlight_players = FALSE;
  highlight_scenario = FALSE;
  highlight_gameselect = FALSE;
  highlight_gamelength = FALSE;
  highlight_character = FALSE;
  highlight_weaponselect = FALSE;
  highlight_health = FALSE;
  highlight_controlstyle = FALSE;
  highlight_aimadjustment = FALSE;
  load_walletbond();
  return;
}



void update_menu0E_mpoptions(void)

{
  return;
}



void interface_menu0E_mpoptions(undefined8 param_1,undefined8 param_2)

{
  bool bVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  bool bVar7;
  bool bVar8;
  bool bVar9;
  LEVELID LVar10;
  longlong numplayers;
  int iVar12;
  ulonglong uVar11;
  BOOL BVar13;
  u32 uVar14;
  longlong numplayers_00;
  
  bVar1 = false;
  bVar2 = false;
  bVar3 = false;
  bVar4 = false;
  bVar5 = false;
  bVar6 = false;
  bVar7 = false;
  bVar8 = false;
  bVar9 = false;
  video_related_1F(60.00000000);
  video_related_21((f32)menu0E_aspect);
  set_page_height(100.00000000,(f32)menu0E_pageheight);
  set_video2_settings_offset_24(0);
  numplayers = get_attached_controller_count();
  if (numplayers < 2) {
    set_menu_to_mode(MENU_MODE_SELECT,0);
    set_menu_cursor_pos_to_setting(gamemode);
  }
  iVar12 = get_attached_controller_count();
  if (iVar12 < (int)selected_num_players) {
    numplayers = get_attached_controller_count();
    init_mp_options_for_scenario(numplayers);
  }
  uVar11 = get_controller_buttons_held('\0',Z_TRIG|A_BUTTON);
  if (uVar11 == 0) {
    tab_3_highlight = FALSE;
    tab_2_highlight = FALSE;
    tab_1_highlight = FALSE;
    highlight_players = FALSE;
    highlight_scenario = FALSE;
    highlight_gameselect = FALSE;
    highlight_gamelength = FALSE;
    highlight_character = FALSE;
    highlight_weaponselect = FALSE;
    highlight_health = FALSE;
    highlight_controlstyle = FALSE;
    highlight_aimadjustment = FALSE;
    BVar13 = isontab3();
    if (BVar13 == FALSE) {
      BVar13 = isontab1();
      if (BVar13 == FALSE) {
        iVar12 = (int)(float)cursor_v_pos;
        if ((iVar12 < 0x119) || (unlock_aim_sight == 0)) {
          if ((iVar12 < 0x105) || (unlock_control_style == 0)) {
            if ((iVar12 < 0xf1) || (unlock_handicap == 0)) {
              if ((iVar12 < 0xdd) || (unlock_chars == 0)) {
                if ((iVar12 < 0xc9) || (unlock_weapon_select == 0)) {
                  if ((iVar12 < 0xb5) || (unlock_game_length == 0)) {
                    if ((iVar12 < 0xa1) || (unlock_stage_select == 0)) {
                      if (iVar12 < 0x8d) {
                        highlight_players = TRUE;
                      }
                      else {
                        highlight_scenario = TRUE;
                      }
                    }
                    else {
                      highlight_gameselect = TRUE;
                    }
                  }
                  else {
                    highlight_gamelength = TRUE;
                  }
                }
                else {
                  highlight_weaponselect = TRUE;
                }
              }
              else {
                highlight_character = TRUE;
              }
            }
            else {
              highlight_health = TRUE;
            }
          }
          else {
            highlight_controlstyle = TRUE;
          }
        }
        else {
          highlight_aimadjustment = TRUE;
        }
      }
      else {
        tab_1_highlight = TRUE;
      }
    }
    else {
      tab_3_highlight = TRUE;
    }
  }
  uVar11 = get_controller_buttons_pressed('\0',START_BUTTON);
  if (uVar11 == 0) {
    uVar11 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON);
    if (uVar11 == 0) {
      uVar11 = get_controller_buttons_pressed('\0',B_BUTTON);
      if (uVar11 != 0) {
        tab_3_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      if (tab_3_highlight != FALSE) {
        tab_3_selected = TRUE;
      }
      if (tab_1_highlight == FALSE) {
        if (highlight_players == FALSE) {
          if (highlight_scenario == FALSE) {
            if (highlight_gameselect == FALSE) {
              if (highlight_gamelength == FALSE) {
                if (highlight_character == FALSE) {
                  if (highlight_weaponselect == FALSE) {
                    if (highlight_health == FALSE) {
                      if (highlight_controlstyle == FALSE) {
                        if (highlight_aimadjustment != FALSE) {
                          bVar9 = true;
                        }
                      }
                      else {
                        bVar8 = true;
                      }
                    }
                    else {
                      bVar7 = true;
                    }
                  }
                  else {
                    bVar6 = true;
                  }
                }
                else {
                  bVar5 = true;
                }
              }
              else {
                bVar4 = true;
              }
            }
            else {
              bVar3 = true;
            }
          }
          else {
            bVar2 = true;
          }
        }
        else {
          bVar1 = true;
        }
      }
      else {
        tab_1_selected = TRUE;
      }
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    tab_1_selected = TRUE;
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,5,1);
  menu_control_stick_tracking();
  if (tab_3_selected == FALSE) {
    if (tab_1_selected == FALSE) {
      if (bVar1) {
        numplayers = get_attached_controller_count();
        numplayers_00 = (longlong)(int)(selected_num_players + 1);
        if (numplayers < numplayers_00) {
          numplayers_00 = 2;
        }
        init_mp_options_for_scenario(numplayers_00);
      }
      else {
        if (bVar2) {
          set_menu_to_mode(MENU_MP_SCENARIO_SELECT,0);
        }
        else {
          if (bVar3) {
            set_menu_to_mode(MENU_MP_STAGE_SELECT,0);
          }
          else {
            if (bVar4) {
              select_game_length();
            }
            else {
              if (bVar5) {
                set_menu_to_mode(MENU_MP_CHAR_SELECT,0);
              }
              else {
                if (bVar6) {
                  advance_mp_weapon_set_by_one_save_value();
                }
                else {
                  if (bVar7) {
                    set_menu_to_mode(MENU_MP_HANDICAP,0);
                  }
                  else {
                    if (bVar8) {
                      set_menu_to_mode(MENU_MP_CONTROL_STYLE,0);
                    }
                    else {
                      if (bVar9) {
                        advance_aim_settings_selection();
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    else {
      LVar10 = multi_stage_setups[MP_stage_selected].stage_id;
      if (multi_stage_setups[MP_stage_selected].stage_id < 0) {
        do {
          uVar14 = get_random_value();
          selected_stage = multi_stage_setups[uVar14 % 0xb + 1].stage_id;
          BVar13 = check_if_mp_stage_unlocked(uVar14 % 0xb + 1);
          LVar10 = selected_stage;
        } while (BVar13 == FALSE);
      }
      selected_stage = LVar10;
      briefingpage = 0xffffffff;
      set_menu_to_mode(MENU_RUN_STAGE,1);
    }
  }
  else {
    set_menu_to_mode(MENU_MODE_SELECT,0);
    set_menu_cursor_pos_to_setting(gamemode);
  }
  return;
}



undefined4 constructor_menu0E_mpoptions(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  short sVar3;
  short sVar4;
  mp_weaponset_set *pmVar1;
  undefined4 uVar2;
  uint uVar5;
  int iStack28;
  int iStack24;
  uint uStack20;
  uint uStack16;
  byte abStack12 [8];
  byte *pbStack4;
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL_00 = microcode_constructor(DL);
  pbStack4 = get_textptr_for_textID(0x9c4c);
  uStack16 = 0x37;
  uStack20 = 0x5f;
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c4d);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0x79;
  if (highlight_players != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0x78,(longlong)(iStack28 + 0x3c),0x87,0x32);
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c4e);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0x8d;
  if (highlight_scenario != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0x8c,(longlong)(iStack28 + 0x3c),0x9b,0x32);
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c4f);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0xa1;
  if (highlight_gameselect != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0xa0,(longlong)(iStack28 + 0x3c),0xaf,0x32);
  }
  if (unlock_stage_select == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c50);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0xb5;
  if (highlight_gamelength != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0xb4,(longlong)(iStack28 + 0x3c),0xc3,0x32);
  }
  if (unlock_game_length == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c51);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0xc9;
  if (highlight_weaponselect != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,200,(longlong)(iStack28 + 0x3c),0xd7,0x32);
  }
  if (unlock_weapon_select == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c52);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0xdd;
  if (highlight_character != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0xdc,(longlong)(iStack28 + 0x3c),0xeb,0x32);
  }
  if (unlock_chars == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c53);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0xf1;
  if (highlight_health != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0xf0,(longlong)(iStack28 + 0x3c),0xff,0x32);
  }
  if (unlock_handicap == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9d1e);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0x105;
  if (highlight_controlstyle != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0x104,(longlong)(iStack28 + 0x3c),0x113,0x32);
  }
  if (unlock_control_style == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(0x9c54);
  proc_7F0AE98C(&iStack24,&iStack28,pbStack4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack16 = 0x39;
  uStack20 = 0x119;
  if (highlight_aimadjustment != FALSE) {
    DL_00 = microcode_constructor_related_to_menus
                      (DL_00,0x37,0x118,(longlong)(iStack28 + 0x3c),0x127,0x32);
  }
  if (unlock_aim_sight == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  sprintf((char *)abStack12,aD_7,selected_num_players);
  uStack16 = 0xa0;
  uStack20 = 0x79;
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,abStack12,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(mp_stage_playercounts[scenario].stage);
  uStack16 = 0xa0;
  uStack20 = 0x8d;
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,0xff,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(multi_stage_setups[MP_stage_selected].folder_text_preset);
  uStack16 = 0xa0;
  uStack20 = 0xa1;
  if (unlock_stage_select == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(multi_game_lengths[game_length].text_preset);
  uStack16 = 0xa0;
  uStack20 = 0xb5;
  if (unlock_game_length == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pmVar1 = get_mpweaponset();
  pbStack4 = get_textptr_for_textID(*(u16 *)&pmVar1->weaponsetarray[0].anonymous_0);
  uStack16 = 0xa0;
  uStack20 = 0xc9;
  if (unlock_weapon_select == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  pbStack4 = get_textptr_for_textID(*(u16 *)(mp_sight_adjust_table + aim_sight_adjustment));
  uStack16 = 0xa0;
  uStack20 = 0x119;
  if (unlock_aim_sight == 0) {
    uVar5 = 0x70;
  }
  else {
    uVar5 = 0xff;
  }
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,&uStack16,&uStack20,pbStack4,(int)ptrSecondFontTable,
                     (int)ptrFirstFontTable,uVar5,(int)sVar3,(int)sVar4,0,0);
  DL_00 = add_tab3_previous(DL_00);
  DL_00 = add_tab1_start(DL_00);
  uVar2 = load_draw_selected_icon_folder_select(DL_00);
  return uVar2;
}



BOOL hasPlayerSelectedMPChar(int playerchar)

{
  BOOL BVar1;
  int iVar2;
  BOOL BVar3;
  BOOL *pBVar4;
  
  BVar3 = FALSE;
  iVar2 = 0;
  if (0 < (int)selected_num_players) {
    pBVar4 = &has_selected_char_player1;
    do {
      BVar1 = *pBVar4;
      pBVar4 = pBVar4 + 1;
      if ((BVar1 != FALSE) && (playerchar == *(int *)((int)&player_1_char + iVar2))) {
        BVar3 = TRUE;
      }
      iVar2 += 4;
    } while (pBVar4 < &has_selected_char_player1 + selected_num_players);
  }
  return BVar3;
}



void init_menu0f_mpcharsel(void)

{
  byte bVar1;
  int iVar2;
  uint *puVar3;
  BOOL BVar4;
  MP_STAGE_SELECTED playerchar;
  MP_selectable_chars *pMVar5;
  MP_STAGE_SELECTED *pMVar6;
  
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  bVar1 = mp_chr_setup[0].select_photo;
  pMVar5 = mp_chr_setup;
  while( true ) {
    iVar2 = (uint)bVar1 * 0x30;
    puVar3 = (uint *)(DAT_8008d130 + iVar2);
    if (*puVar3 < 3000) {
      proc_7F0CBEE8(*puVar3,NULL);
      puVar3 = (uint *)(DAT_8008d130 + iVar2);
    }
    if (puVar3[3] < 3000) {
      proc_7F0CBEE8(puVar3[3],NULL);
      puVar3 = (uint *)(DAT_8008d130 + iVar2);
    }
    if (puVar3[6] < 3000) {
      proc_7F0CBEE8(puVar3[6],NULL);
      puVar3 = (uint *)(DAT_8008d130 + iVar2);
    }
    if (puVar3[9] < 3000) {
      proc_7F0CBEE8(puVar3[9],NULL);
    }
    if ((MP_selectable_chars *)0x8002b497 < pMVar5 + 1) break;
    bVar1 = pMVar5[1].select_photo;
    pMVar5 = pMVar5 + 1;
  }
  if (num_chars_selectable_mp != 0x40) {
    BVar4 = doesFolderHaveStageUnlockedAtDifficulty
                      (selected_folder_num,SP_STAGE_CRADLE,DIFFICULTY_AGENT);
    if (BVar4 == 3) {
      num_chars_selectable_mp = 0x21;
    }
    else {
      num_chars_selectable_mp = 8;
      pMVar6 = &player_1_char;
      do {
        if ((int)num_chars_selectable_mp <= (int)*pMVar6) {
          playerchar = MP_STAGE_RANDOM;
          if (0 < (int)num_chars_selectable_mp) {
            do {
              BVar4 = hasPlayerSelectedMPChar(playerchar);
              if (BVar4 == FALSE) {
                *pMVar6 = playerchar;
                goto LAB_7f011de0;
              }
              playerchar += MP_STAGE_TEMPLE;
            } while ((int)playerchar < (int)num_chars_selectable_mp);
          }
          *pMVar6 = playerchar;
        }
LAB_7f011de0:
        pMVar6 = pMVar6 + 1;
      } while (pMVar6 != &MP_stage_selected);
    }
  }
  mp_char_cur_select_player1 = player_1_char;
  mp_char_prev_select_player1 = player_1_char;
  mp_unknown1_player1 = 0;
  has_selected_char_player1 = FALSE;
  size_mp_select_image_player1 = 0;
  mp_char_cur_select_player2 = player_2_char;
  mp_char_prev_select_player2 = player_2_char;
  mp_unknown1_player2 = 0;
  has_selected_char_player2 = FALSE;
  size_mp_select_image_player2 = 0;
  mp_char_cur_select_player3 = player_3_char;
  mp_char_prev_select_player3 = player_3_char;
  mp_unknown1_player3 = 0;
  has_selected_char_player3 = FALSE;
  size_mp_select_image_player3 = 0;
  mp_char_cur_select_player4 = player_4_char;
  mp_char_prev_select_player4 = player_4_char;
  mp_unknown1_player4 = 0;
  has_selected_char_player4 = FALSE;
  size_mp_select_image_player4 = 0;
  load_walletbond();
  return;
}



void update_menu0F_mpcharsel(void)

{
  return;
}



void interface_menu0F_mpcharsel(void)

{
  int iVar1;
  int iVar2;
  int iVar4;
  ulonglong uVar3;
  BOOL BVar5;
  int iVar6;
  int iVar7;
  char controller;
  int *piVar8;
  int *piVar9;
  int iVar10;
  BOOL *pBVar11;
  int *piVar12;
  int iVar13;
  int iStack12;
  
  iVar4 = get_selected_num_players();
  iStack12 = 0;
  video_related_1F(60.00000000);
  video_related_21((f32)menu0F_aspect);
  set_page_height(100.00000000,(f32)menu0F_pageheight);
  set_video2_settings_offset_24(0);
  iVar13 = 0;
  iVar10 = 0;
  if (0 < iVar4) {
    piVar9 = &mp_unknown1_player1;
    piVar8 = &mp_char_cur_select_player1;
    piVar12 = &mp_char_prev_select_player1;
    pBVar11 = &has_selected_char_player1;
    do {
      controller = (char)iVar13;
      if (*pBVar11 != FALSE) {
        iVar6 = *(int *)((int)&size_mp_select_image_player1 + iVar10);
        if ((iVar6 < 0xb) && (*piVar12 == *piVar8)) {
          *(int *)((int)&size_mp_select_image_player1 + iVar10) = iVar6 + 1;
        }
        uVar3 = get_controller_buttons_pressed(controller,B_BUTTON);
        if (uVar3 != 0) {
          *pBVar11 = FALSE;
          play_sfx_a1(ptr_sfx_buf,199,NULL);
        }
      }
      if ((*pBVar11 == FALSE) &&
         (iVar6 = *(int *)((int)&size_mp_select_image_player1 + iVar10), 0 < iVar6)) {
        *(int *)((int)&size_mp_select_image_player1 + iVar10) = iVar6 + -1;
LAB_7f012164:
        iVar6 = *piVar12;
      }
      else {
        if (*pBVar11 != FALSE) goto LAB_7f012164;
        uVar3 = get_controller_buttons_pressed(controller,L_CBUTTONS|L_JPAD);
        if (uVar3 != 0) {
          if (0 < *piVar8) {
            *piVar8 = *piVar8 + -1;
          }
          goto LAB_7f012164;
        }
        uVar3 = get_controller_buttons_pressed(controller,R_CBUTTONS|R_JPAD);
        if (uVar3 != 0) {
          if (*piVar8 < (int)(num_chars_selectable_mp - 1)) {
            *piVar8 = *piVar8 + 1;
          }
          goto LAB_7f012164;
        }
        uVar3 = get_controller_buttons_pressed(controller,START_BUTTON|Z_TRIG|A_BUTTON);
        if (uVar3 == 0) {
          iVar6 = get_controller_3dstick_L_R(controller,-2,1);
          if (iVar6 < 1) {
            iVar6 = get_controller_3dstick_L_R(controller,-2,1);
            if (iVar6 < -1) {
              if (*piVar9 == 0) {
                if (0 < *piVar8) {
                  *piVar8 = *piVar8 + -1;
                }
                goto LAB_7f012164;
              }
              iVar6 = *piVar12;
            }
            else {
              iVar6 = *piVar12;
            }
          }
          else {
            if (*piVar9 == 0) {
              if (*piVar8 < (int)(num_chars_selectable_mp - 1)) {
                *piVar8 = *piVar8 + 1;
              }
              goto LAB_7f012164;
            }
            iVar6 = *piVar12;
          }
        }
        else {
          BVar5 = hasPlayerSelectedMPChar(*piVar8);
          if (BVar5 != FALSE) goto LAB_7f012164;
          *(int *)((int)&player_1_char + iVar10) = *piVar8;
          *(undefined4 *)((int)&size_mp_select_image_player1 + iVar10) = 1;
          *pBVar11 = TRUE;
          play_sfx_a1(ptr_sfx_buf,199,NULL);
          iVar6 = *piVar12;
        }
      }
      iVar1 = *piVar8;
      iVar2 = *piVar9;
      iVar13 += 1;
      piVar8 = piVar8 + 1;
      BVar5 = *pBVar11;
      iVar7 = iVar2 + iVar6 * 0x54;
      if (iVar1 * 0x54 < iVar7) {
        *piVar9 = iVar2 + -0xc;
        if (iVar2 + -0xc < 0) {
          *piVar9 = iVar2 + 0x48;
          *piVar12 = iVar6 + -1;
        }
      }
      else {
        if ((iVar7 < iVar1 * 0x54) && (*piVar9 = iVar2 + 0xc, 0x53 < iVar2 + 0xc)) {
          *piVar9 = iVar2 + -0x48;
          *piVar12 = iVar6 + 1;
        }
      }
      if ((BVar5 != FALSE) && (*(int *)((int)&size_mp_select_image_player1 + iVar10) == 0xb)) {
        iStack12 = iStack12 + 1;
      }
      iVar10 += 4;
      piVar12 = piVar12 + 1;
      piVar9 = piVar9 + 1;
      pBVar11 = pBVar11 + 1;
    } while (iVar13 != iVar4);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  menu_control_stick_tracking();
  if (iStack12 == iVar4) {
    set_menu_to_mode(MENU_MP_OPTIONS,0);
  }
  return;
}



int proc_7F0122A8(int param_1,int param_2,int param_3)

{
  if ((param_1 <= param_2) || (param_3 <= param_1)) {
    return 0;
  }
  if (param_1 < param_2 + 0x28) {
    return (param_2 - param_1) * -6 + 0xf;
  }
  if (param_3 + -0x28 < param_1) {
    return (param_1 - param_3) * -6 + 0xf;
  }
  return 0xff;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * proc_7F01231C(void)

{
  short sVar1;
  Mtx *m;
  Mtx *m_00;
  Mtx *pabVar2;
  BOOL BVar3;
  byte bVar5;
  int iVar4;
  undefined4 *in_a0_lo;
  int in_a1_lo;
  int in_a2_lo;
  undefined4 in_a3_lo;
  Mtx *pabVar6;
  uint uVar7;
  short sVar8;
  short sVar9;
  uint uVar10;
  float l;
  float a;
  float r;
  float x;
  undefined4 *puStackX0;
  int iStackX4;
  int iStackX8;
  undefined4 uStackX12;
  short in_stack_00000012;
  int playerchar;
  int in_stack_00000018;
  
  puStackX0 = in_a0_lo;
  iStackX4 = in_a1_lo;
  iStackX8 = in_a2_lo;
  uStackX12 = in_a3_lo;
  proc_7F0BD6E0();
  m_00 = m;
  proc_7F0BD6E0();
  pabVar2 = m_00;
  proc_7F0BD6C4(0x10);
  puStackX0 = microcode_constructor(puStackX0);
  guOrtho(m,l,r,0.00000000,440.00000000,0.00000000,330.00000000,1.00000000);
  guRotate(m_00,a,x,3.14159274,1.00000000);
  sVar1 = (short)in_stack_00000018;
  uVar10 = 0;
  pabVar6 = pabVar2;
  do {
    uVar7 = 0;
    do {
      sVar9 = (short)uVar7;
      if (1 < (int)uVar7) {
        sVar9 += -1;
      }
      sVar8 = (short)uVar10;
      if (1 < (int)uVar10) {
        sVar8 = (short)uVar10 + -1;
      }
      BVar3 = hasPlayerSelectedMPChar(playerchar);
      if (BVar3 == FALSE) {
        bVar5 = 0xff;
      }
      else {
        if (in_stack_00000018 == 0) {
          bVar5 = 0x6e;
        }
        else {
          bVar5 = 0xff;
        }
      }
      *(short *)*pabVar6 = (sVar9 + -1) * (sVar1 + 0x23) + (short)uStackX12;
      *(undefined2 *)(*pabVar6 + 4) = 0xfffb;
      *(undefined2 *)(*pabVar6 + 6) = 0;
      *(short *)(*pabVar6 + 2) = (0x14a - in_stack_00000012) + (sVar8 + -1) * (sVar1 + 0x2a) + sVar1
      ;
      if ((uVar7 & 1) == 0) {
        *(undefined2 *)(*pabVar6 + 8) = 0;
      }
      else {
        *(undefined2 *)(*pabVar6 + 8) = 0x1000;
      }
      if ((uVar10 & 1) == 0) {
        *(undefined2 *)(*pabVar6 + 10) = 0;
      }
      else {
        *(undefined2 *)(*pabVar6 + 10) = 0x1000;
      }
      (*pabVar6)[0xc] = bVar5;
      (*pabVar6)[0xd] = bVar5;
      (*pabVar6)[0xe] = bVar5;
      if (in_stack_00000018 == 0) {
        iVar4 = proc_7F0122A8((int)*(short *)*pabVar6,iStackX4,iStackX8);
        (*pabVar6)[0xf] = (byte)iVar4;
      }
      else {
        (*pabVar6)[0xf] = 0xff;
      }
      uVar7 += 1;
      pabVar6 = (Mtx *)(*pabVar6 + 0x10);
    } while (uVar7 != 4);
    uVar10 += 1;
  } while (uVar10 != 4);
  *puStackX0 = 0x1030040;
  *(Mtx **)(puStackX0 + 1) = m + -0x2000000;
  puStackX0[2] = 0x1020040;
  *(Mtx **)(puStackX0 + 3) = m_00 + -0x2000000;
  puStackX0[4] = 0x4f00100;
  *(Mtx **)(puStackX0 + 5) = pabVar2;
  puStackX0 = puStackX0 + 6;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,
             (uint *)((uint)(byte)mp_chr_setup[playerchar].select_photo * 0x30 + DAT_8008d130 + 0x18
                     ),2,0,2);
  puStackX0[1] = 0xa28;
  *puStackX0 = 0xbf000000;
  puStackX0[3] = 0x280a32;
  puStackX0[2] = 0xbf000000;
  puStackX0 = puStackX0 + 4;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,
             (uint *)((uint)(byte)mp_chr_setup[playerchar].select_photo * 0x30 + DAT_8008d130 + 0x24
                     ),2,0,2);
  puStackX0[1] = 0x141e3c;
  *puStackX0 = 0xbf000000;
  puStackX0[3] = 0x3c1e46;
  puStackX0[2] = 0xbf000000;
  puStackX0 = puStackX0 + 4;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,
             (uint *)((uint)(byte)mp_chr_setup[playerchar].select_photo * 0x30 + DAT_8008d130),2,0,2
            );
  puStackX0[1] = 0x505a78;
  *puStackX0 = 0xbf000000;
  puStackX0[3] = 0x785a82;
  puStackX0[2] = 0xbf000000;
  puStackX0 = puStackX0 + 4;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,
             (uint *)((uint)(byte)mp_chr_setup[playerchar].select_photo * 0x30 + DAT_8008d130 + 0xc)
             ,2,0,2);
  puStackX0[1] = 0x646e8c;
  *puStackX0 = 0xbf000000;
  puStackX0[3] = 0x8c6e96;
  puStackX0[2] = 0xbf000000;
  return puStackX0 + 4;
}



undefined4 * constructor_menu0F_mpcharsel(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  uint *DL_01;
  byte *pbVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int *imagesize;
  int *char_prev;
  int *char_cur;
  int *char_selected;
  uint uStack76;
  uint uStack72;
  int iStack68;
  int aiStack64 [2];
  uint uStack56;
  uint uStack52;
  int iStack48;
  int aiStack44 [9];
  uint uStack8;
  uint numplayers;
  
  numplayers = get_selected_num_players();
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL = microcode_constructor(DL);
  DL_00 = microcode_constructor_related_to_menus(DL,0x26,0xa9,0x184,0xab,0x90);
  if (2 < (int)numplayers) {
    DL_00 = microcode_constructor_related_to_menus(DL_00,0xd4,0x1e,0xd6,0x136,0x80);
  }
  if (0 < (int)numplayers) {
    imagesize = &size_mp_select_image_player1;
    char_cur = &mp_char_cur_select_player1;
    char_prev = &mp_char_prev_select_player1;
    uStack8 = 0;
    char_selected = (int *)&has_selected_char_player1;
    do {
      if (numplayers == 2) {
        iVar4 = 0x26;
        iVar5 = 0x15e;
        if ((int)uStack8 < 1) {
          iVar6 = 0x1e;
        }
        else {
          iVar6 = 0xaa;
        }
      }
      else {
        iVar5 = 0xaf;
        if ((int)uStack8 < 2) {
          iVar6 = 0;
        }
        else {
          iVar6 = 0x8c;
        }
        iVar6 += 0x1e;
        if ((uStack8 & 1) == 0) {
          iVar4 = 0;
        }
        else {
          iVar4 = 0xaf;
        }
        iVar4 += 0x26;
      }
      DL_01 = DL_00 + 2;
      *DL_00 = ((int)((float)(iVar4 + 6) * 4.00000000) & 0xfffU) << 0xc | 0xed000000 |
               (int)((float)(iVar6 + 5U) * 4.00000000) & 0xfffU;
      DL_00[1] = ((int)((float)(iVar4 + iVar5 + -6) * 4.00000000) & 0xfffU) << 0xc |
                 (int)((float)(iVar6 + 0x87) * 4.00000000) & 0xfffU;
      if ((*char_selected == 0) && (*imagesize == 0)) {
        pbVar1 = get_textptr_for_textID(0x9c55);
        proc_7F0AE98C(aiStack44,&iStack48,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
        ;
        uStack52 = ((iVar5 >> 1) + iVar4) - (iStack48 >> 1);
        uStack56 = iVar6 + 5U;
        DL_00 = microcode_constructor(DL_01);
        sVar2 = get_video2_settings_txtClipW();
        sVar3 = get_video2_settings_txtClipH();
        DL_01 = write_text_at_abs_coord
                          (DL_00,&uStack52,&uStack56,pbVar1,(int)ptrSecondFontTable,
                           (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
      }
      pbVar1 = get_textptr_for_textID(mp_chr_setup[*char_cur].text_preset);
      proc_7F0AE98C(aiStack64,&iStack68,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      uStack76 = iVar6 + 0x78;
      uStack72 = ((iVar5 >> 1) + iVar4) - (iStack68 >> 1);
      DL_00 = microcode_constructor(DL_01);
      sVar2 = get_video2_settings_txtClipW();
      sVar3 = get_video2_settings_txtClipH();
      write_text_at_abs_coord
                (DL_00,&uStack72,&uStack76,pbVar1,(int)ptrSecondFontTable,(int)ptrFirstFontTable,
                 0xff,(int)sVar2,(int)sVar3,0,0);
      DL_00 = (uint *)proc_7F01231C();
      if (*char_selected == 0) {
        if (*imagesize != 0) {
          iVar5 = *char_prev;
          goto LAB_7f012bd0;
        }
LAB_7f012be0:
        iVar5 = *char_prev;
        if (2 < iVar5) {
          DL_00 = (uint *)proc_7F01231C();
          iVar5 = *char_prev;
        }
        if (1 < iVar5) {
          DL_00 = (uint *)proc_7F01231C();
          iVar5 = *char_prev;
        }
        if (0 < iVar5) {
          DL_00 = (uint *)proc_7F01231C();
          iVar5 = *char_prev;
        }
        if (iVar5 < (int)(num_chars_selectable_mp - 1)) {
          DL_00 = (uint *)proc_7F01231C();
          iVar5 = *char_prev;
        }
        if (iVar5 < (int)(num_chars_selectable_mp - 2)) {
          DL_00 = (uint *)proc_7F01231C();
          iVar5 = *char_prev;
        }
        if (iVar5 < (int)(num_chars_selectable_mp - 3)) {
          DL_00 = (uint *)proc_7F01231C();
        }
      }
      else {
        iVar5 = *char_prev;
LAB_7f012bd0:
        if (iVar5 != *char_cur) goto LAB_7f012be0;
      }
      char_selected = char_selected + 1;
      uStack8 += 1;
      char_cur = char_cur + 1;
      char_prev = char_prev + 1;
      imagesize = imagesize + 1;
    } while (uStack8 != numplayers);
  }
  DL = combiner_bayer_lod_perspective(DL_00);
  return DL;
}



void init_menu10_mphandicap(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  has_selected_char_player1 = FALSE;
  dword_CODE_bss_80069760 = 0;
  has_selected_char_player2 = FALSE;
  dword_CODE_bss_80069764 = 0;
  has_selected_char_player3 = FALSE;
  dword_CODE_bss_80069768 = 0;
  has_selected_char_player4 = FALSE;
  dword_CODE_bss_8006976C = 0;
  load_walletbond();
  return;
}



void update_menu10_mphandicap(void)

{
  return;
}



// WARNING: Instruction at (ram,0x7f013048) overlaps instruction at (ram,0x7f013044)
// 

void interface_menu10_mphandicap(void)

{
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  BOOL BVar4;
  char controller;
  BOOL *pBVar5;
  int *piVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  
  iVar2 = get_selected_num_players();
  iVar9 = 0;
  video_related_1F(60.00000000);
  video_related_21(menu10_aspect);
  set_page_height(100.00000000,menu10_pageheight);
  set_video2_settings_offset_24(0);
  iVar7 = 0;
  iVar8 = 0;
  if (0 < iVar2) {
    pBVar5 = &has_selected_char_player1;
    do {
      controller = (char)iVar7;
      if ((*pBVar5 != FALSE) &&
         (uVar1 = get_controller_buttons_pressed(controller,B_BUTTON), uVar1 != 0)) {
        *pBVar5 = FALSE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
      BVar4 = *pBVar5;
      if (BVar4 == FALSE) {
        piVar6 = (int *)((int)&dword_CODE_bss_80069760 + iVar8);
        uVar1 = get_controller_buttons_pressed(controller,L_CBUTTONS|L_JPAD);
        if ((uVar1 == 0) &&
           ((iVar3 = get_controller_3dstick_L_R(controller,-2,1), -2 < iVar3 || (*piVar6 == 0)))) {
          uVar1 = get_controller_buttons_pressed(controller,R_CBUTTONS|R_JPAD);
          if ((uVar1 == 0) &&
             ((iVar3 = get_controller_3dstick_L_R(controller,-2,1), iVar3 < 1 || (*piVar6 == 0)))) {
            uVar1 = get_controller_buttons_pressed(controller,START_BUTTON|Z_TRIG|A_BUTTON);
            if (uVar1 != 0) {
              *pBVar5 = TRUE;
              play_sfx_a1(ptr_sfx_buf,199,NULL);
            }
          }
          else {
            iVar3 = *(int *)((int)&handicap_player1 + iVar8);
            if (iVar3 < 10) {
              *(int *)((int)&handicap_player1 + iVar8) = iVar3 + 1;
            }
          }
        }
        else {
          iVar3 = *(int *)((int)&handicap_player1 + iVar8);
          if (0 < iVar3) {
            *(int *)((int)&handicap_player1 + iVar8) = iVar3 + -1;
          }
        }
        iVar3 = get_controller_3dstick_L_R(controller,-2,1);
        if ((iVar3 == -1) || (iVar3 = get_controller_3dstick_L_R(controller,-2,1), iVar3 == 0)) {
          *piVar6 = 1;
          BVar4 = *pBVar5;
        }
        else {
          *piVar6 = 0;
          BVar4 = *pBVar5;
        }
      }
      if (BVar4 != FALSE) {
        iVar9 += 1;
      }
      iVar7 += 1;
      iVar8 += 4;
      pBVar5 = pBVar5 + 1;
    } while (iVar7 != iVar2);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  menu_control_stick_tracking();
  if (iVar9 == iVar2) {
    set_menu_to_mode(MENU_MP_OPTIONS,0);
  }
  return;
}



undefined4 * constructor_menu10_mphandicap(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  byte *pbVar1;
  short sVar2;
  short sVar3;
  uint *DL_01;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int *piStack96;
  BOOL *pBStack92;
  uint uStack76;
  uint uStack72;
  int iStack68;
  int aiStack64 [2];
  uint uStack56;
  uint uStack52;
  int iStack48;
  int aiStack44 [10];
  uint uStack4;
  
  uStack4 = get_selected_num_players();
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL = microcode_constructor(DL);
  DL_00 = microcode_constructor_related_to_menus(DL,0x26,0xa9,0x184,0xab,0x90);
  if (2 < (int)uStack4) {
    DL_00 = microcode_constructor_related_to_menus(DL_00,0xd4,0x1e,0xd6,0x136,0x80);
  }
  uVar7 = 0;
  if (0 < (int)uStack4) {
    pBStack92 = &has_selected_char_player1;
    piStack96 = &handicap_player1;
    do {
      iVar5 = 0x26;
      if (uStack4 == 2) {
        iVar6 = 0x15e;
        if ((int)uVar7 < 1) {
          iVar4 = 0x1e;
        }
        else {
          iVar4 = 0xaa;
        }
      }
      else {
        iVar6 = 0xaf;
        if ((int)uVar7 < 2) {
          iVar4 = 0;
        }
        else {
          iVar4 = 0x8c;
        }
        iVar4 += 0x1e;
        if ((uVar7 & 1) == 0) {
          iVar5 = 0;
        }
        else {
          iVar5 = 0xaf;
        }
        iVar5 += 0x26;
      }
      DL_01 = DL_00 + 2;
      *DL_00 = ((int)((float)(iVar5 + 6) * 4.00000000) & 0xfffU) << 0xc | 0xed000000 |
               (int)((float)(iVar4 + 5) * 4.00000000) & 0xfffU;
      DL_00[1] = ((int)((float)(iVar5 + iVar6 + -6) * 4.00000000) & 0xfffU) << 0xc |
                 (int)((float)(iVar4 + 0x87) * 4.00000000) & 0xfffU;
      if (*pBStack92 == FALSE) {
        pbVar1 = get_textptr_for_textID(0x9c56);
        proc_7F0AE98C(aiStack44,&iStack48,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
        ;
        uStack52 = ((iVar6 >> 1) + iVar5) - (iStack48 >> 1);
        uStack56 = (iVar4 - (aiStack44[0] >> 1)) + 0x37;
        DL_00 = microcode_constructor(DL_01);
        sVar2 = get_video2_settings_txtClipW();
        sVar3 = get_video2_settings_txtClipH();
        DL_01 = write_text_at_abs_coord
                          (DL_00,&uStack52,&uStack56,pbVar1,(int)ptrSecondFontTable,
                           (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
      }
      pbVar1 = get_textptr_for_textID(MP_handicap_table[*piStack96].text_preset);
      proc_7F0AE98C(aiStack64,&iStack68,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      uStack72 = ((iVar6 >> 1) + iVar5) - (iStack68 >> 1);
      uStack76 = (iVar4 - (aiStack64[0] >> 1)) + 0x55;
      DL_00 = microcode_constructor(DL_01);
      sVar2 = get_video2_settings_txtClipW();
      sVar3 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,&uStack72,&uStack76,pbVar1,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
      uVar7 += 1;
      pBStack92 = pBStack92 + 1;
      piStack96 = piStack96 + 1;
    } while (uVar7 != uStack4);
  }
  DL = combiner_bayer_lod_perspective(DL_00);
  return DL;
}



void init_menu11_mpcontrol(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  has_selected_char_player1 = FALSE;
  dword_CODE_bss_80069760 = 0;
  has_selected_char_player2 = FALSE;
  dword_CODE_bss_80069764 = 0;
  has_selected_char_player3 = FALSE;
  dword_CODE_bss_80069768 = 0;
  has_selected_char_player4 = FALSE;
  dword_CODE_bss_8006976C = 0;
  load_walletbond();
  return;
}



void update_menu11_mpcontrols(void)

{
  return;
}



// WARNING: Instruction at (ram,0x7f013734) overlaps instruction at (ram,0x7f013730)
// 

void interface_menu11_mpcontrols(void)

{
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  BOOL BVar4;
  int *piVar5;
  char controller;
  int iVar6;
  BOOL *pBVar7;
  int *piVar8;
  int iVar9;
  int iStack12;
  
  iVar2 = get_selected_num_players();
  iStack12 = 0;
  video_related_1F(60.00000000);
  video_related_21((f32)menu11_aspect);
  set_page_height(100.00000000,(f32)menu11_pageheight);
  set_video2_settings_offset_24(0);
  iVar6 = 0;
  if (0 < iVar2) {
    pBVar7 = &has_selected_char_player1;
    iVar9 = 0;
    do {
      controller = (char)iVar6;
      if ((*pBVar7 != FALSE) &&
         (uVar1 = get_controller_buttons_pressed(controller,B_BUTTON), uVar1 != 0)) {
        *pBVar7 = FALSE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
      BVar4 = *pBVar7;
      if (BVar4 == FALSE) {
        piVar8 = (int *)((int)&dword_CODE_bss_80069760 + iVar9);
        uVar1 = get_controller_buttons_pressed(controller,L_CBUTTONS|L_JPAD);
        if ((uVar1 == 0) &&
           ((iVar3 = get_controller_3dstick_L_R(controller,-2,1), -2 < iVar3 || (*piVar8 == 0)))) {
          uVar1 = get_controller_buttons_pressed(controller,R_CBUTTONS|R_JPAD);
          if ((uVar1 == 0) &&
             ((iVar3 = get_controller_3dstick_L_R(controller,-2,1), iVar3 < 1 || (*piVar8 == 0)))) {
            uVar1 = get_controller_buttons_pressed(controller,START_BUTTON|Z_TRIG|A_BUTTON);
            if (uVar1 != 0) {
              *pBVar7 = TRUE;
              play_sfx_a1(ptr_sfx_buf,199,NULL);
            }
          }
          else {
            piVar5 = (int *)((int)controlstyle_player + iVar9);
            if ((iVar2 == 2) && (iVar6 == 0)) {
              iVar3 = *piVar5;
            }
            else {
              iVar3 = *piVar5;
              if (iVar3 < 4) {
                if (iVar3 < 3) {
                  *piVar5 = iVar3 + 1;
                }
                goto LAB_7f013890;
              }
              iVar3 = *piVar5;
            }
            if (((iVar3 < 7) && (*piVar5 = iVar3 + 1, iVar6 == 0)) &&
               ((controlstyle_player[0] == 4 && ((int)controlstyle_player[1] < 4)))) {
              controlstyle_player[1] = 4;
            }
          }
        }
        else {
          piVar5 = (int *)((int)controlstyle_player + iVar9);
          iVar3 = *piVar5;
          if (0 < iVar3) {
            if (iVar2 == 2) {
              if (iVar6 == 1) {
                if (((int)controlstyle_player[0] < 4) || (4 < iVar3)) goto LAB_7f01376c;
              }
              else {
                *piVar5 = iVar3 + -1;
              }
            }
            else {
LAB_7f01376c:
              *piVar5 = iVar3 + -1;
            }
            if ((((iVar2 == 2) && (iVar6 == 0)) && ((int)controlstyle_player[0] < 4)) &&
               (3 < (int)controlstyle_player[1])) {
              controlstyle_player[1] = 0;
            }
          }
        }
LAB_7f013890:
        iVar3 = get_controller_3dstick_L_R(controller,-2,1);
        if ((iVar3 == -1) || (iVar3 = get_controller_3dstick_L_R(controller,-2,1), iVar3 == 0)) {
          *piVar8 = 1;
          BVar4 = *pBVar7;
        }
        else {
          *piVar8 = 0;
          BVar4 = *pBVar7;
        }
      }
      iVar6 += 1;
      if (BVar4 != FALSE) {
        iStack12 += 1;
      }
      iVar9 += 4;
      pBVar7 = pBVar7 + 1;
    } while (iVar6 != iVar2);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  menu_control_stick_tracking();
  if (iStack12 == iVar2) {
    set_menu_to_mode(MENU_MP_OPTIONS,0);
  }
  return;
}



undefined4 * constructor_menu11_mpcontrol(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  byte *pbVar1;
  short sVar2;
  short sVar3;
  uint *DL_01;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  u32 *puStack96;
  BOOL *pBStack92;
  uint uStack76;
  uint uStack72;
  int iStack68;
  int aiStack64 [2];
  uint uStack56;
  uint uStack52;
  int iStack48;
  int aiStack44 [10];
  uint uStack4;
  
  uStack4 = get_selected_num_players();
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL = microcode_constructor(DL);
  DL_00 = microcode_constructor_related_to_menus(DL,0x26,0xa9,0x184,0xab,0x90);
  if (2 < (int)uStack4) {
    DL_00 = microcode_constructor_related_to_menus(DL_00,0xd4,0x1e,0xd6,0x136,0x80);
  }
  uVar7 = 0;
  if (0 < (int)uStack4) {
    pBStack92 = &has_selected_char_player1;
    puStack96 = controlstyle_player;
    do {
      iVar5 = 0x26;
      if (uStack4 == 2) {
        iVar6 = 0x15e;
        if ((int)uVar7 < 1) {
          iVar4 = 0x1e;
        }
        else {
          iVar4 = 0xaa;
        }
      }
      else {
        iVar6 = 0xaf;
        if ((int)uVar7 < 2) {
          iVar4 = 0;
        }
        else {
          iVar4 = 0x8c;
        }
        iVar4 += 0x1e;
        if ((uVar7 & 1) == 0) {
          iVar5 = 0;
        }
        else {
          iVar5 = 0xaf;
        }
        iVar5 += 0x26;
      }
      DL_01 = DL_00 + 2;
      *DL_00 = ((int)((float)(iVar5 + 6) * 4.00000000) & 0xfffU) << 0xc | 0xed000000 |
               (int)((float)(iVar4 + 5) * 4.00000000) & 0xfffU;
      DL_00[1] = ((int)((float)(iVar5 + iVar6 + -6) * 4.00000000) & 0xfffU) << 0xc |
                 (int)((float)(iVar4 + 0x87) * 4.00000000) & 0xfffU;
      if (*pBStack92 == FALSE) {
        pbVar1 = get_textptr_for_textID(0x9d1d);
        proc_7F0AE98C(aiStack44,&iStack48,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
        ;
        uStack52 = ((iVar6 >> 1) + iVar5) - (iStack48 >> 1);
        uStack56 = (iVar4 - (aiStack44[0] >> 1)) + 0x37;
        DL_00 = microcode_constructor(DL_01);
        sVar2 = get_video2_settings_txtClipW();
        sVar3 = get_video2_settings_txtClipH();
        DL_01 = write_text_at_abs_coord
                          (DL_00,&uStack52,&uStack56,pbVar1,(int)ptrSecondFontTable,
                           (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
      }
      pbVar1 = get_textptr_for_textID(*(u16 *)(mp_controller_table + *puStack96));
      proc_7F0AE98C(aiStack64,&iStack68,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      uStack72 = ((iVar6 >> 1) + iVar5) - (iStack68 >> 1);
      uStack76 = (iVar4 - (aiStack64[0] >> 1)) + 0x55;
      DL_00 = microcode_constructor(DL_01);
      sVar2 = get_video2_settings_txtClipW();
      sVar3 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,&uStack72,&uStack76,pbVar1,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,0xff,(int)sVar2,(int)sVar3,0,0);
      uVar7 += 1;
      pBStack92 = pBStack92 + 1;
      puStack96 = puStack96 + 1;
    } while (uVar7 != uStack4);
  }
  DL = combiner_bayer_lod_perspective(DL_00);
  return DL;
}



void init_menu12_mpstage(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  current_mp_stage_highlighted = MP_STAGE_RANDOM;
  load_walletbond();
  return;
}



void update_menu12_mpstage(void)

{
  return;
}



void interface_menu12_mpstage(undefined8 param_1,undefined8 param_2)

{
  ulonglong uVar1;
  BOOL BVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu12_aspect);
  set_page_height(100.00000000,(f32)menu12_pageheight);
  set_video2_settings_offset_24(0);
  uVar1 = get_controller_buttons_held('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar1 == 0) {
    tab_3_highlight = FALSE;
    tab_2_highlight = FALSE;
    tab_1_highlight = FALSE;
    BVar2 = isontab3();
    if (BVar2 == FALSE) {
      if ((int)(float)cursor_v_pos < 0xf0) {
        iVar4 = 0;
        if (0xa9 < (int)(float)cursor_v_pos) {
          iVar4 = 1;
        }
      }
      else {
        iVar4 = 2;
      }
      iVar5 = (int)(float)cursor_h_pos;
      if (iVar5 < 0x124) {
        if (iVar5 < 0xcf) {
          iVar3 = 0;
          if (0x79 < iVar5) {
            iVar3 = 1;
          }
        }
        else {
          iVar3 = 2;
        }
      }
      else {
        iVar3 = 3;
      }
      current_mp_stage_highlighted = iVar4 * 4 + iVar3;
      BVar2 = check_if_mp_stage_unlocked(current_mp_stage_highlighted);
      while (BVar2 == FALSE) {
        current_mp_stage_highlighted += ~MP_STAGE_RANDOM;
        BVar2 = check_if_mp_stage_unlocked(current_mp_stage_highlighted);
      }
    }
    else {
      tab_3_highlight = TRUE;
    }
  }
  uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar1 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      if (-1 < (int)current_mp_stage_highlighted) {
        tab_2_selected = TRUE;
        MP_stage_selected = current_mp_stage_highlighted;
      }
    }
    else {
      tab_3_selected = TRUE;
    }
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MP_OPTIONS,0);
    }
  }
  else {
    set_menu_to_mode(MENU_MP_OPTIONS,0);
  }
  return;
}



undefined4 constructor_menu12_mpstage(undefined4 *param_1)

{
  undefined4 *puVar1;
  BOOL BVar2;
  byte *pbVar3;
  short sVar5;
  short sVar6;
  undefined4 uVar4;
  uint uVar7;
  uint *imgcall;
  longlong lVar8;
  int iVar9;
  MP_STAGE_SELECTED stage;
  int iVar10;
  int iVar11;
  f32 wdivh;
  f32 wdivh_00;
  f32 extraout_f12;
  f32 wdivh_01;
  f32 wdivh_02;
  uint *puStackX0;
  int iStack168;
  int iStack156;
  int iStack132;
  undefined4 uStack104;
  undefined4 uStack100;
  float fStack96;
  float fStack92;
  undefined4 uStack64;
  undefined4 uStack60;
  int iStack56;
  float fStack52;
  int iStack20;
  int iStack16;
  int iStack12;
  int aiStack8 [2];
  
  puStackX0 = param_1;
  puStackX0 = set_setfillcolor(param_1,0,0,0);
  puStackX0 = insert_generic_fillrect(puStackX0);
  puStackX0 = (uint *)proc_7F00D5E8(puStackX0);
  puStackX0 = microcode_constructor(puStackX0);
  lVar8 = 0x6c;
  uVar7 = 0xa0;
  do {
    puStackX0 = microcode_constructor_related_to_menus(puStackX0,0x25,lVar8,0x185,uVar7,0x101010ff);
    uVar7 += 0x46;
    lVar8 = (longlong)((int)lVar8 + 0x46);
  } while (uVar7 != 0x172);
  puVar1 = combiner_bayer_lod_perspective(puStackX0);
  puStackX0 = puVar1 + 2;
  *puVar1 = 0xba000c02;
  puVar1[1] = 0;
  iVar10 = DAT_8008d128;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,(uint *)(DAT_8008d128 + 0x3c),1,0,2);
  wdivh = 4.00000000;
  iStack56 = 0x43550000;
  fStack52 = 104.00000000;
  iVar9 = 0;
  uStack64 = 0x43300000;
  uStack60 = 0x40800000;
  do {
    display_image_at_on_screen_coord
              ((int *)register0x000000ec,&iStack56,wdivh,(int)&uStack64,0x2f0,0x12,0,0,1,0x6b,0x67,
               0x53,0xff,(uint)(*(char *)(iVar10 + 0x42) != '\0'));
    fStack52 = fStack52 + 60.00000000;
    display_image_at_on_screen_coord
              ((int *)register0x000000ec,&iStack56,wdivh_00,(int)&uStack64,0x2f0,0x12,0,0,1,0x6b,
               0x67,0x53,0xff,(uint)(*(char *)(iVar10 + 0x42) != '\0'));
    iVar9 += 1;
    fStack52 = (fStack52 - 60.00000000) + 70.00000000;
    wdivh = extraout_f12;
  } while (iVar9 != 3);
  stage = MP_STAGE_RANDOM;
  iStack132 = 0;
  fStack92 = 134.00000000;
  uStack104 = 0x42080000;
  uStack100 = 0x41b00000;
  do {
    iVar10 = 0;
    fStack96 = 86.00000000;
    do {
      if ((int)stage < 0xc) {
        imgcall = (uint *)(multi_stage_setups[stage].photo * 0xc + DAT_8008d134);
        likely_generate_DL_for_image_declaration((uint **)register0x000000ec,imgcall,1,0,2);
        if (stage == current_mp_stage_highlighted) {
          puStackX0[1] = 0x100000;
          *puStackX0 = 0xba001402;
          puStackX0[3] = 0xffffff0a;
          puStackX0[2] = 0xf8000000;
          puStackX0[5] = 0xc4112048;
          puStackX0[4] = 0xb900031d;
          puStackX0 = puStackX0 + 6;
          display_image_at_on_screen_coord
                    ((int *)register0x000000ec,(int *)&fStack96,wdivh_01,(int)&uStack104,0x44,0x2c,0
                     ,0,1,0xff,0xff,0xff,0xff,(uint)(*(char *)((int)imgcall + 6) != '\0'));
        }
        else {
          BVar2 = check_if_mp_stage_unlocked(stage);
          if (BVar2 == FALSE) {
            display_image_at_on_screen_coord
                      ((int *)register0x000000ec,(int *)&fStack96,wdivh_02,(int)&uStack104,0x44,0x2c
                       ,0,0,1,0xf,0xf,0xf,0xff,(uint)(*(char *)((int)imgcall + 6) != '\0'));
          }
          else {
            display_image_at_on_screen_coord
                      ((int *)register0x000000ec,(int *)&fStack96,wdivh_02,(int)&uStack104,0x44,0x2c
                       ,0,0,1,0x6e,0x6e,0x6e,0xff,(uint)(*(char *)((int)imgcall + 6) != '\0'));
          }
        }
      }
      iVar10 += 1;
      fStack96 = fStack96 + 85.00000000;
      stage += MP_STAGE_TEMPLE;
    } while (iVar10 != 4);
    fStack92 = fStack92 + 70.00000000;
    iStack132 += 1;
  } while (iStack132 != 3);
  puStackX0 = microcode_constructor(puStackX0);
  stage = MP_STAGE_RANDOM;
  iStack168 = 0x97;
  iStack156 = 0;
  do {
    iVar10 = 0x56;
    iVar9 = 0;
    do {
      if (((int)stage < 0xc) && (BVar2 = check_if_mp_stage_unlocked(stage), BVar2 != FALSE)) {
        uVar7 = 0x96969600;
        if (stage == current_mp_stage_highlighted) {
          uVar7 = 0xffffff00;
        }
        pbVar3 = get_textptr_for_textID(multi_stage_setups[stage].select_screen_text_preset);
        proc_7F0AE98C(&iStack16,&iStack20,pbVar3,D_80040EB0,D_80040EAC,0);
        iVar11 = iVar10 + -0x1f;
        iStack12 = iStack168 - iStack16;
        aiStack8[0] = iVar11;
        puStackX0 = microcode_constructor_related_to_menus
                              (puStackX0,(longlong)iVar11,(longlong)iStack12,
                               (longlong)(iVar11 + iStack20),iStack12 + iStack16,0);
        pbVar3 = get_textptr_for_textID(multi_stage_setups[stage].select_screen_text_preset);
        sVar5 = get_video2_settings_txtClipW();
        sVar6 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack8,&iStack12,pbVar3,D_80040EB0,
                                        (int)D_80040EAC,uVar7 | 0xff,(int)sVar5,(int)sVar6,0,0);
        iStack12 = iStack168 - iStack16;
        aiStack8[0] = iVar11;
        pbVar3 = get_textptr_for_textID(multi_stage_setups[stage].select_screen_text_preset);
        sVar5 = get_video2_settings_txtClipW();
        sVar6 = get_video2_settings_txtClipH();
        puStackX0 = en_text_write_stuff(puStackX0,aiStack8,&iStack12,pbVar3,D_80040EB0,
                                        (int)D_80040EAC,uVar7 | 100,(int)sVar5,(int)sVar6,0,0);
      }
      iVar9 += 1;
      iVar10 += 0x55;
      stage += MP_STAGE_TEMPLE;
    } while (iVar9 != 4);
    iStack156 += 1;
    iStack168 += 0x46;
  } while (iStack156 != 3);
  puStackX0 = microcode_constructor(puStackX0);
  puStackX0 = add_tab3_previous(puStackX0);
  uVar4 = load_draw_selected_icon_folder_select(puStackX0);
  return uVar4;
}



MPSCENARIOS get_scenario(void)

{
  return scenario;
}



void init_menu13_mpscenariosel(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  load_walletbond();
  return;
}



void update_menu13_mpscenario(void)

{
  return;
}



void interface_menu13_mpscenario(undefined8 param_1,undefined8 param_2)

{
  bool bVar1;
  ulonglong uVar2;
  BOOL BVar3;
  int iVar4;
  int scenario;
  int iVar5;
  int iVar6;
  
  bVar1 = false;
  video_related_1F(60.00000000);
  video_related_21((f32)menu13_aspect);
  set_page_height(100.00000000,(f32)menu13_pageheight);
  set_video2_settings_offset_24(0);
  uVar2 = get_controller_buttons_held('\0',Z_TRIG|A_BUTTON);
  scenario = DAT_80069780;
  if (uVar2 == 0) {
    tab_3_highlight = FALSE;
    tab_2_highlight = FALSE;
    tab_1_highlight = FALSE;
    BVar3 = isontab3();
    if (BVar3 == FALSE) {
      DAT_80069780 = 1;
      iVar5 = 7;
      iVar6 = 0x11d;
      do {
        if ((iVar6 <= (int)(float)cursor_v_pos) &&
           (scenario = get_selected_num_players(),
           (longlong)(ulonglong)(byte)mp_stage_playercounts[iVar5].min <= (longlong)scenario)) {
          iVar4 = get_selected_num_players();
          scenario = iVar5 + 1;
          if ((longlong)iVar4 <= (longlong)(ulonglong)(byte)mp_stage_playercounts[iVar5].max) break;
        }
        iVar5 += -1;
        iVar6 += -0x16;
        scenario = DAT_80069780;
      } while (iVar5 != 0);
    }
    else {
      tab_3_highlight = TRUE;
      DAT_80069780 = 0;
      scenario = DAT_80069780;
    }
  }
  DAT_80069780 = scenario;
  uVar2 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar2 == 0) {
    uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar2 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      scenario = DAT_80069780 + -1;
      if (((scenario == 5) || (scenario == 6)) || (scenario == 7)) {
        reset_mp_options_for_scenario(scenario);
        bVar1 = true;
      }
      else {
        reset_mp_options_for_scenario(scenario);
        tab_3_selected = TRUE;
      }
    }
    else {
      tab_3_selected = TRUE;
    }
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (bVar1) {
    set_menu_to_mode(MENU_MP_TEAMS,0);
  }
  else {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MP_OPTIONS,0);
    }
  }
  return;
}



undefined4 constructor_menu13_mpscenario(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  byte *pbVar1;
  short sVar4;
  short sVar5;
  int iVar2;
  undefined4 uVar3;
  mp_stage_playercount *pmVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  int iStack32;
  int aiStack28 [2];
  uint uStack20;
  uint auStack16 [4];
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL_00 = microcode_constructor(DL);
  pbVar1 = get_textptr_for_textID(0x9c57);
  auStack16[0] = 0x37;
  uStack20 = 0x66;
  sVar4 = get_video2_settings_txtClipW();
  sVar5 = get_video2_settings_txtClipH();
  DL_00 = write_text_at_abs_coord
                    (DL_00,auStack16,&uStack20,pbVar1,(int)ptrSecondFontTable,(int)ptrFirstFontTable
                     ,0xff,(int)sVar4,(int)sVar5,0,0);
  pmVar6 = mp_stage_playercounts;
  iVar7 = 0;
  uVar9 = 0x83;
  do {
    uVar8 = 0xff;
    iVar2 = get_selected_num_players();
    if ((longlong)(ulonglong)(byte)pmVar6->max < (longlong)iVar2) {
      uVar8 = 0x70;
    }
    else {
      iVar2 = get_selected_num_players();
      if ((longlong)iVar2 < (longlong)(ulonglong)(byte)pmVar6->min) {
        uVar8 = 0x70;
      }
    }
    pbVar1 = get_textptr_for_textID(pmVar6->stage);
    proc_7F0AE98C(aiStack28,&iStack32,pbVar1,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
    auStack16[0] = 0x39;
    uStack20 = uVar9;
    if (iVar7 + 1 == DAT_80069780) {
      uStack20 = uVar9;
      DL_00 = microcode_constructor_related_to_menus
                        (DL_00,0x37,(longlong)(int)(uVar9 - 1),(longlong)(iStack32 + 0x3c),
                         uVar9 + 0xe,0x32);
    }
    sVar4 = get_video2_settings_txtClipW();
    sVar5 = get_video2_settings_txtClipH();
    DL_00 = write_text_at_abs_coord
                      (DL_00,auStack16,&uStack20,pbVar1,(int)ptrSecondFontTable,
                       (int)ptrFirstFontTable,uVar8,(int)sVar4,(int)sVar5,0,0);
    iVar7 += 1;
    pmVar6 = pmVar6 + 1;
    uVar9 += 0x16;
  } while (iVar7 != 8);
  DL_00 = add_tab3_previous(DL_00);
  uVar3 = load_draw_selected_icon_folder_select(DL_00);
  return uVar3;
}



ulonglong get_players_team_or_scenario_item_flag(int player)

{
  return (ulonglong)(byte)(&player1_playerdata)[player].have_token_or_goldengun;
}



void set_players_team_or_scenario_item_flag(int player,char flag)

{
  (&player1_playerdata)[player].have_token_or_goldengun = flag;
  return;
}



void init_menu14_mpteamsel(void)

{
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  if (scenario == SCENARIO_2v1) {
    teamsize = 2;
  }
  else {
    teamsize = 3;
  }
  dword_8002B560 = 0;
  load_walletbond();
  return;
}



void update_menu14_mpteams(void)

{
  return;
}



// WARNING: Instruction at (ram,0x7f014fc4) overlaps instruction at (ram,0x7f014fc0)
// 

ulonglong interface_menu14_mpteams(undefined8 param_1,undefined8 param_2)

{
  ulonglong uVar1;
  int iVar2;
  int **ppiVar3;
  char flag;
  uint player;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu14_aspect);
  set_page_height(100.00000000,(f32)menu14_pageheight);
  set_video2_settings_offset_24(0);
  dword_8002B560 = (dword_8002B560 + 1) % 0x14;
  uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_JPAD);
  if ((uVar1 == 0) && (iVar2 = get_controller_3dstick_L_R('\0',-2,1), iVar2 < 1)) {
    uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
    if ((uVar1 == 0) && (iVar2 = get_controller_3dstick_U_D('\0',-2,1), iVar2 < 1)) {
      uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_JPAD);
      if ((uVar1 == 0) && (iVar2 = get_controller_3dstick_L_R('\0',-2,1), -2 < iVar2)) {
        uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
        if ((uVar1 != 0) || (iVar2 = get_controller_3dstick_U_D('\0',-2,1), iVar2 < -1)) {
          if (scenario == SCENARIO_2v1) {
            if ((teamsize & 2) == 0) {
              teamsize = 2;
              play_sfx_a1(ptr_sfx_buf,199,NULL);
            }
          }
          else {
            if ((teamsize & 2) == 0) {
              teamsize = teamsize + 2;
              play_sfx_a1(ptr_sfx_buf,199,NULL);
            }
          }
        }
      }
      else {
        if (scenario == SCENARIO_2v2) {
          if ((teamsize & 1) != 0) {
            teamsize = 2;
            play_sfx_a1(ptr_sfx_buf,199,NULL);
          }
        }
        else {
          if ((teamsize & 1) != 0) {
            teamsize = teamsize - 1;
            play_sfx_a1(ptr_sfx_buf,199,NULL);
          }
        }
      }
    }
    else {
      if (scenario == SCENARIO_2v2) {
        if ((teamsize & 2) != 0) {
          teamsize = 1;
          play_sfx_a1(ptr_sfx_buf,199,NULL);
        }
      }
      else {
        if ((teamsize & 2) != 0) {
          teamsize = teamsize - 2;
          play_sfx_a1(ptr_sfx_buf,199,NULL);
        }
      }
    }
  }
  else {
    if (scenario == SCENARIO_2v1) {
      if ((teamsize & 1) == 0) {
        teamsize = 1;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      if ((teamsize & 1) == 0) {
        teamsize = teamsize + 1;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  menu_control_stick_tracking();
  uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  player = 0;
  if (uVar1 != 0) {
    do {
      if (scenario == SCENARIO_2v2) {
        if ((player == 0) || (flag = '\x01', player == teamsize)) {
          flag = '\0';
        }
        set_players_team_or_scenario_item_flag(player,flag);
      }
      else {
        set_players_team_or_scenario_item_flag(player,player == teamsize);
      }
      player += 1;
    } while (player != 4);
    set_menu_to_mode(MENU_MP_OPTIONS,0);
    ppiVar3 = play_sfx_a1(ptr_sfx_buf,199,NULL);
    uVar1 = SEXT48((int)ppiVar3);
  }
  return uVar1;
}



undefined4 * constructor_menu14_mpteams(undefined4 *param_1)

{
  bool bVar1;
  undefined4 *DL;
  uint *DL_00;
  int iVar2;
  int iVar3;
  byte *pbVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  uint *puVar10;
  uint uStack76;
  uint uStack72;
  int iStack68;
  int aiStack64 [2];
  uint uStack56;
  uint uStack52;
  int iStack48;
  int aiStack44 [4];
  int iStack28;
  uint uStack4;
  
  uStack4 = get_selected_num_players();
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL = microcode_constructor(DL);
  DL_00 = microcode_constructor_related_to_menus(DL,0x26,0xa9,0x184,0xab,0x90);
  if (2 < (int)uStack4) {
    DL_00 = microcode_constructor_related_to_menus(DL_00,0xd4,0x1e,0xd6,0x136,0x80);
  }
  uVar9 = 0;
  if (0 < (int)uStack4) {
    bVar1 = true;
    while( true ) {
      if (bVar1) {
        iVar2 = 0;
      }
      else {
        iVar2 = 0x8c;
      }
      if ((uVar9 & 1) == 0) {
        iVar3 = 0;
      }
      else {
        iVar3 = 0xaf;
      }
      iVar7 = iVar3 + 0x7d;
      puVar10 = DL_00 + 2;
      *DL_00 = ((int)((float)(iVar3 + 0x2c) * 4.00000000) & 0xfffU) << 0xc | 0xed000000 |
               (int)((float)(iVar2 + 0x23U) * 4.00000000) & 0xfffU;
      DL_00[1] = ((int)((float)(iVar3 + 0xcf) * 4.00000000) & 0xfffU) << 0xc |
                 (int)((float)(iVar2 + 0xa5) * 4.00000000) & 0xfffU;
      DL_00 = puVar10;
      iStack28 = iVar7;
      if (uVar9 == 0) {
        iStack28 = iVar7;
        pbVar4 = get_textptr_for_textID(0x9c58);
        proc_7F0AE98C(aiStack44,&iStack48,pbVar4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0)
        ;
        uStack52 = iVar7 - (iStack48 >> 1);
        uStack56 = iVar2 + 0x23U;
        sVar5 = get_video2_settings_txtClipW();
        sVar6 = get_video2_settings_txtClipH();
        DL_00 = write_text_at_abs_coord
                          (puVar10,&uStack52,&uStack56,pbVar4,(int)ptrSecondFontTable,
                           (int)ptrFirstFontTable,0xff,(int)sVar5,(int)sVar6,0,0);
      }
      if (scenario == SCENARIO_2v2) {
        bVar1 = uVar9 == 0 || uVar9 == teamsize;
      }
      else {
        bVar1 = uVar9 != teamsize;
      }
      if (bVar1) {
        pbVar4 = get_textptr_for_textID(0x9c59);
      }
      else {
        pbVar4 = get_textptr_for_textID(0x9c5a);
      }
      if (bVar1) {
        uVar8 = 0xff0000ff;
      }
      else {
        uVar8 = 0xffff;
      }
      proc_7F0AE98C(aiStack64,&iStack68,pbVar4,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      uStack76 = (iVar2 - (aiStack64[0] >> 1)) + 100;
      uStack72 = iStack28 - (iStack68 >> 1);
      if ((uVar9 != teamsize) || ((uVar9 == teamsize && (dword_8002B560 < 10)))) {
        sVar5 = get_video2_settings_txtClipW();
        sVar6 = get_video2_settings_txtClipH();
        DL_00 = write_text_at_abs_coord
                          (DL_00,&uStack72,&uStack76,pbVar4,(int)ptrSecondFontTable,
                           (int)ptrFirstFontTable,uVar8,(int)sVar5,(int)sVar6,0,0);
      }
      uVar9 += 1;
      if (uVar9 == uStack4) break;
      bVar1 = (int)uVar9 < 2;
    }
  }
  DL = combiner_bayer_lod_perspective(DL_00);
  return DL;
}



void set_briefing_page(WATCH_BRIEFING_PAGE page)

{
  current_menu_briefing_page = page;
  return;
}



void load_briefing_text_for_stage(void)

{
  undefined8 lnameID;
  int iVar1;
  undefined *puVar2;
  
  puVar2 = ptr_logo_and_walletbond_DL;
  ptrbriefingdata =
       _load_resource_named_to_buffer
                 ((byte *)mission_folder_setup_entries[briefingpage].briefing_name_ptr,1,
                  ptr_logo_and_walletbond_DL + 0xa000,0x200);
  lnameID = get_textbank_number_for_stagenum(mission_folder_setup_entries[briefingpage].stage_id);
  load_briefing_text_bank((int)lnameID,puVar2 + 0xa200,0x6de00);
  iVar1 = 0;
  puVar2 = ptrbriefingdata;
  do {
    iVar1 += 4;
    if (*(short *)(puVar2 + 8) == 0) {
      return;
    }
    puVar2 = puVar2 + 4;
  } while (iVar1 != 0x28);
  return;
}



void init_menu0A_briefing(void)

{
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  final_menu_briefing_page = BRIEFING_OVERVIEW|BRIEFING_MONEYPENNY;
  set_briefing_page(BRIEFING_TITLE);
  load_walletbond();
  load_briefing_text_for_stage();
  return;
}



void update_menu0A_briefing(void)

{
  undefined8 uVar1;
  
  uVar1 = get_textbank_number_for_stagenum(mission_folder_setup_entries[briefingpage].stage_id);
  blank_text_bank((int)uVar1);
  if (-1 < (int)menu_update) {
    proc_7F00B990();
  }
  return;
}



void interface_menu0A_briefing(undefined8 param_1,undefined8 param_2)

{
  BOOL BVar2;
  ulonglong uVar1;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu0A_aspect);
  set_page_height(100.00000000,(f32)menu0A_pageheight);
  set_video2_settings_offset_24(0);
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  BVar2 = isontab3();
  if (BVar2 == FALSE) {
    BVar2 = isontab2();
    if ((BVar2 == FALSE) ||
       ((int)(final_menu_briefing_page + ~BRIEFING_TITLE) <= (int)current_menu_briefing_page)) {
      BVar2 = isontab1();
      if (BVar2 == FALSE) {
        if ((int)current_menu_briefing_page < (int)(final_menu_briefing_page + ~BRIEFING_TITLE)) {
          tab_2_highlight = TRUE;
        }
        else {
          tab_1_highlight = TRUE;
        }
      }
      else {
        tab_1_highlight = TRUE;
      }
    }
    else {
      tab_2_highlight = TRUE;
    }
  }
  else {
    tab_3_highlight = TRUE;
  }
  uVar1 = get_controller_buttons_pressed('\0',START_BUTTON);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON);
    if (uVar1 == 0) {
      uVar1 = get_controller_buttons_pressed('\0',B_BUTTON);
      if (uVar1 != 0) {
        if ((int)current_menu_briefing_page < 1) {
          tab_3_selected = TRUE;
        }
        else {
          set_briefing_page(current_menu_briefing_page + ~BRIEFING_TITLE);
        }
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      if (tab_2_highlight == FALSE) {
        if (tab_3_highlight == FALSE) {
          if (tab_1_highlight != FALSE) {
            tab_2_selected = TRUE;
          }
        }
        else {
          if ((int)current_menu_briefing_page < 1) {
            tab_3_selected = TRUE;
          }
          else {
            set_briefing_page(current_menu_briefing_page + ~BRIEFING_TITLE);
          }
        }
      }
      else {
        set_briefing_page(current_menu_briefing_page + BRIEFING_OVERVIEW);
      }
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    tab_2_selected = TRUE;
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance
            ((int)ptr_folder_object_instance,0xc,
             (uint)(current_menu_briefing_page == BRIEFING_TITLE));
  set_item_visibility_in_objinstance
            ((int)ptr_folder_object_instance,
             mission_folder_setup_entries[briefingpage].mission_num + 0x16,
             (uint)(current_menu_briefing_page == BRIEFING_TITLE));
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MISSION_SELECT,0);
      set_cursor_to_stage_solo((longlong)mission_folder_setup_entries[briefingpage].mission_num);
    }
  }
  else {
    set_menu_to_mode(MENU_RUN_STAGE,1);
  }
  return;
}



uint * print_objectives_and_status_to_menu(uint *param_1,int param_2,byte *param_3,int param_4)

{
  u16 id;
  byte *pbVar1;
  short sVar4;
  short sVar5;
  uint *puVar2;
  int iVar3;
  int iVar6;
  uint uVar7;
  int iVar8;
  uint uStack24;
  uint uStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  iStack8 = 0;
  iVar8 = 0;
  iStack4 = 0;
  iVar6 = 0;
  do {
    id = *(u16 *)(ptrbriefingdata + iVar6 + 8);
    if (id == 0) {
      iStack4 += 1;
    }
    else {
      if ((longlong)selected_difficulty <
          (longlong)(ulonglong)*(ushort *)(ptrbriefingdata + iVar6 + 10)) {
        iStack4 += 1;
      }
      else {
        pbVar1 = get_textptr_for_textID(id);
        textpointer_load_parse_something((char *)param_3,aA_);
        *param_3 = *param_3 + (char)iStack8;
        iStack12 = 0;
        iStack16 = 0;
        proc_7F0AE98C(&iStack12,&iStack16,param_3,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0
                     );
        uStack20 = 0x37;
        uStack24 = iStack12 * iVar8 + param_2;
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        puVar2 = write_text_at_abs_coord
                           (param_1,&uStack20,&uStack24,param_3,(int)ptrSecondFontTable,
                            (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
        uStack20 = 0x4b;
        uStack24 = iStack12 * iVar8 + param_2;
        if (param_4 == 0) {
          proc_7F0AEB64(0x140,pbVar1,param_3,(int)ptrSecondFontTable,(int *)ptrFirstFontTable);
        }
        else {
          proc_7F0ACB94(2);
          proc_7F0AEB64(0xdc,pbVar1,param_3,(int)ptrSecondFontTable,(int *)ptrFirstFontTable);
          proc_7F0ACB94(0);
        }
        sVar4 = get_video2_settings_txtClipW();
        sVar5 = get_video2_settings_txtClipH();
        param_1 = write_text_at_abs_coord
                            (puVar2,&uStack20,&uStack24,param_3,(int)ptrSecondFontTable,
                             (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
        if (param_4 != 0) {
          iVar3 = get_status_of_objective((longlong)iStack4);
          if ((iVar3 == 0) || (iVar3 != 1)) {
            uVar7 = 0x780000ff;
            pbVar1 = get_textptr_for_textID(0x9c5c);
          }
          else {
            uVar7 = 0xff;
            pbVar1 = get_textptr_for_textID(0x9c5b);
          }
          uStack20 = 0x136;
          uStack24 = iStack12 * iVar8 + param_2;
          sVar4 = get_video2_settings_txtClipW();
          sVar5 = get_video2_settings_txtClipH();
          param_1 = write_text_at_abs_coord
                              (param_1,&uStack20,&uStack24,pbVar1,(int)ptrSecondFontTable,
                               (int)ptrFirstFontTable,uVar7,(int)sVar4,(int)sVar5,0,0);
        }
        iVar3 = proc_7F0AC0E8((char *)param_3);
        iVar8 += iVar3;
        iStack8 += 1;
        iStack4 += 1;
      }
    }
    iVar6 += 4;
  } while (iStack4 != 10);
  return param_1;
}



undefined4 constructor_menu0A_briefing(undefined4 *param_1)

{
  undefined4 *puVar1;
  undefined4 *DL;
  uint *puVar2;
  short sVar4;
  short sVar5;
  undefined4 uVar3;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 auStack3012 [750];
  uint uStack12;
  uint uStack8;
  byte *pbStack4;
  
  puVar1 = set_setfillcolor(param_1,0,0,0);
  puVar1 = insert_generic_fillrect(puVar1);
  DL = (undefined4 *)proc_7F00D5E8(puVar1);
  puVar1 = (undefined4 *)array_80050C54;
  puVar6 = auStack3012;
  do {
    puVar7 = puVar1 + 3;
    *puVar6 = *puVar1;
    puVar6[1] = puVar1[1];
    puVar6[2] = puVar1[2];
    puVar1 = puVar7;
    puVar6 = puVar6 + 3;
  } while (puVar7 != (undefined4 *)a02d02d);
  puVar2 = microcode_constructor(DL);
  puVar2 = print_current_solo_briefing_stage_name(puVar2,(byte *)auStack3012);
  switch(current_menu_briefing_page) {
  case BRIEFING_TITLE:
    pbStack4 = get_textptr_for_textID(0x9c5d);
    break;
  case BRIEFING_OVERVIEW:
    pbStack4 = get_textptr_for_textID(0x9c5e);
    break;
  case BRIEFING_M:
    pbStack4 = get_textptr_for_textID(0x9c5f);
    break;
  case BRIEFING_Q:
    pbStack4 = get_textptr_for_textID(0x9c60);
    break;
  case BRIEFING_MONEYPENNY:
    pbStack4 = get_textptr_for_textID(0x9c61);
  }
  uStack8 = 0x37;
  uStack12 = 0x8f;
  sVar4 = get_video2_settings_txtClipW();
  sVar5 = get_video2_settings_txtClipH();
  puVar2 = write_text_at_abs_coord
                     (puVar2,&uStack8,&uStack12,pbStack4,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
  if (current_menu_briefing_page == BRIEFING_TITLE) {
    puVar2 = print_objectives_and_status_to_menu(puVar2,0xa7,(byte *)auStack3012,0);
  }
  else {
    if (current_menu_briefing_page == BRIEFING_OVERVIEW) {
      pbStack4 = get_textptr_for_textID(*(u16 *)ptrbriefingdata);
    }
    else {
      if (current_menu_briefing_page == BRIEFING_M) {
        pbStack4 = get_textptr_for_textID(*(u16 *)(ptrbriefingdata + 2));
      }
      else {
        if (current_menu_briefing_page == BRIEFING_Q) {
          pbStack4 = get_textptr_for_textID(*(u16 *)(ptrbriefingdata + 4));
        }
        else {
          if (current_menu_briefing_page == BRIEFING_MONEYPENNY) {
            pbStack4 = get_textptr_for_textID(*(u16 *)(ptrbriefingdata + 6));
          }
        }
      }
    }
    uStack8 = 0x37;
    uStack12 = 0xa7;
    proc_7F0AEB64(0x140,pbStack4,(byte *)auStack3012,(int)ptrSecondFontTable,
                  (int *)ptrFirstFontTable);
    proc_7F0ACBA0(8);
    sVar4 = get_video2_settings_txtClipW();
    sVar5 = get_video2_settings_txtClipH();
    puVar2 = write_text_at_abs_coord
                       (puVar2,&uStack8,&uStack12,(byte *)auStack3012,(int)ptrSecondFontTable,
                        (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
    proc_7F0ACBA0(0xffffffff);
  }
  puVar2 = add_tab1_start(puVar2);
  puVar2 = add_tab3_previous(puVar2);
  if ((int)current_menu_briefing_page < 4) {
    puVar2 = add_tab2_next(puVar2);
  }
  uVar3 = load_draw_selected_icon_folder_select(puVar2);
  return uVar3;
}



void init_menu0B_runstage(void)

{
  set_loaded_stage(selected_stage);
  set_difficulty(selected_difficulty);
  return;
}



void init_menu0C_missionfailed(void)

{
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  load_walletbond();
  load_briefing_text_for_stage();
  set_cursor_pos_tab2();
  if (maybe_is_in_menu != FALSE) {
    music_related_38(0x7fff);
    musicTrack1Vol(0x7fff);
    music1_playing = 0;
    musicTrack1Play(M_FOLDERS);
    maybe_is_in_menu = FALSE;
  }
  return;
}



void update_menu0C_missionfailed(void)

{
  return;
}



void interface_menu0C_missionfailed(undefined8 param_1,undefined8 param_2)

{
  BOOL BVar2;
  ulonglong uVar1;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu0C_aspect);
  set_page_height(100.00000000,(f32)menu0C_pageheight);
  set_video2_settings_offset_24(0);
  tab_2_highlight = FALSE;
  tab_3_highlight = FALSE;
  BVar2 = isontab3();
  if (BVar2 == FALSE) {
    BVar2 = isontab2();
    if (BVar2 == FALSE) {
      tab_2_highlight = TRUE;
    }
    else {
      tab_2_highlight = TRUE;
    }
  }
  else {
    tab_3_highlight = TRUE;
  }
  uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar1 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      if (tab_2_highlight != FALSE) {
        tab_2_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MISSION_SELECT,0);
      set_cursor_to_stage_solo((longlong)mission_folder_setup_entries[briefingpage].mission_num);
    }
  }
  else {
    set_menu_to_mode(MENU_MISSION_COMPLETE,0);
  }
  return;
}



undefined8 proc_7F01631C(void)

{
  DIFFICULTY DVar1;
  int iVar2;
  longlong objective;
  int iVar3;
  int iVar4;
  
  if (mission_failed_or_aborted == FALSE) {
    objective = 0;
    iVar4 = 0;
    if (mission_kia == FALSE) {
      do {
        iVar3 = (int)objective;
        if (*(short *)(ptrbriefingdata + iVar4 + 8) == 0) {
          objective = (longlong)(iVar3 + 1);
        }
        else {
          DVar1 = get_current_difficulty();
          if ((longlong)DVar1 < (longlong)(ulonglong)*(ushort *)(ptrbriefingdata + iVar4 + 10)) {
            objective = (longlong)(iVar3 + 1);
          }
          else {
            iVar2 = get_status_of_objective(objective);
            if (iVar2 != 1) {
              return 0;
            }
            objective = (longlong)(iVar3 + 1);
          }
        }
        iVar4 += 4;
      } while (objective != 10);
      return 1;
    }
  }
  return 0;
}



undefined4 constructor_menu0C_missionfailed(undefined4 *param_1)

{
  undefined4 *DL;
  uint *puVar2;
  byte *pbVar3;
  short sVar5;
  short sVar6;
  longlong lVar1;
  undefined4 uVar4;
  int iStack3024;
  int iStack3020;
  uint uStack3016;
  byte abStack3008 [3000];
  uint uStack8;
  uint uStack4;
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  puVar2 = microcode_constructor(DL);
  puVar2 = print_current_solo_briefing_stage_name(puVar2,abStack3008);
  pbVar3 = get_textptr_for_textID(0x9c62);
  uStack4 = 0x37;
  uStack8 = 0x8f;
  sVar5 = get_video2_settings_txtClipW();
  sVar6 = get_video2_settings_txtClipH();
  puVar2 = write_text_at_abs_coord
                     (puVar2,&uStack4,&uStack8,pbVar3,(int)ptrSecondFontTable,(int)ptrFirstFontTable
                      ,0xff,(int)sVar5,(int)sVar6,0,0);
  pbVar3 = get_textptr_for_textID(0x9c63);
  iStack3024 = 0;
  iStack3020 = 0;
  proc_7F0AE98C(&iStack3020,&iStack3024,pbVar3,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  uStack4 = 0x37;
  uStack8 = 0xa7;
  sVar5 = get_video2_settings_txtClipW();
  sVar6 = get_video2_settings_txtClipH();
  puVar2 = write_text_at_abs_coord
                     (puVar2,&uStack4,&uStack8,pbVar3,(int)ptrSecondFontTable,(int)ptrFirstFontTable
                      ,0xff,(int)sVar5,(int)sVar6,0,0);
  if (mission_kia == FALSE) {
    if (mission_failed_or_aborted == FALSE) {
      lVar1 = proc_7F01631C();
      if (lVar1 == 0) {
        pbVar3 = get_textptr_for_textID(0x9c67);
        uStack3016 = 0x780000ff;
      }
      else {
        pbVar3 = get_textptr_for_textID(0x9c66);
        uStack3016 = 0xff;
      }
    }
    else {
      pbVar3 = get_textptr_for_textID(0x9c65);
      uStack3016 = 0x780000ff;
    }
  }
  else {
    pbVar3 = get_textptr_for_textID(0x9c64);
    uStack3016 = 0x780000ff;
  }
  uStack8 = 0xa7;
  uStack4 = iStack3024 + 0x37;
  sVar5 = get_video2_settings_txtClipW();
  sVar6 = get_video2_settings_txtClipH();
  puVar2 = write_text_at_abs_coord
                     (puVar2,&uStack4,&uStack8,pbVar3,(int)ptrSecondFontTable,(int)ptrFirstFontTable
                      ,uStack3016,(int)sVar5,(int)sVar6,0,0);
  puVar2 = print_objectives_and_status_to_menu(puVar2,0xbf,abStack3008,1);
  puVar2 = add_tab2_next(puVar2);
  puVar2 = add_tab3_previous(puVar2);
  uVar4 = load_draw_selected_icon_folder_select(puVar2);
  return uVar4;
}



void init_menu0D_missioncomplete(void)

{
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  load_walletbond();
  load_briefing_text_for_stage();
  if (newcheatunlocked != 0) {
    play_sfx_a1(ptr_sfx_buf,0x102,NULL);
  }
  return;
}



void update_menu0D_missioncomplete(void)

{
  return;
}



void interface_menu0D_missioncomplete(undefined8 param_1,undefined8 param_2)

{
  BOOL BVar3;
  ulonglong uVar1;
  longlong lVar2;
  mission_folder_setup *pmVar4;
  mission_folder_setup *pmVar5;
  int entry;
  short sVar6;
  int iVar7;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu0D_aspect);
  set_page_height(100.00000000,(f32)menu0D_pageheight);
  set_video2_settings_offset_24(0);
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  BVar3 = isontab3();
  if (BVar3 == FALSE) {
    BVar3 = isontab2();
    if (BVar3 == FALSE) {
      tab_2_highlight = TRUE;
    }
    else {
      tab_2_highlight = TRUE;
    }
  }
  else {
    tab_3_highlight = TRUE;
  }
  uVar1 = get_controller_buttons_pressed('\0',START_BUTTON|Z_TRIG|A_BUTTON);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar1 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_2_highlight == FALSE) {
      if (tab_3_highlight != FALSE) {
        tab_3_selected = TRUE;
        play_sfx_a1(ptr_sfx_buf,199,NULL);
      }
    }
    else {
      tab_2_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,1,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,3,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (tab_2_selected == FALSE) {
    if (tab_3_selected != FALSE) {
      set_menu_to_mode(MENU_MISSION_SELECT,0);
      set_cursor_to_stage_solo((longlong)mission_folder_setup_entries[briefingpage].mission_num);
    }
  }
  else {
    lVar2 = proc_7F01631C();
    if ((lVar2 == 0) || (append_cheat_sp != FALSE)) {
      set_menu_to_mode(MENU_BRIEFING,0);
    }
    else {
      if (mission_folder_setup_entries[briefingpage].mission_num == 0x11) {
        set_menu_to_mode(MENU_RUN_STAGE,1);
        selected_stage = LEVELID_CUBA;
      }
      else {
        entry = briefingpage + 1;
        if (mission_folder_setup_entries[briefingpage].mission_num < 0x12) {
          sVar6 = mission_folder_setup_entries[entry].folder_text_preset;
          pmVar5 = mission_folder_setup_entries + entry;
          if (sVar6 != 0) {
            iVar7 = mission_folder_setup_entries[entry].stage_id;
            pmVar4 = mission_folder_setup_entries + entry;
            while (pmVar5 = pmVar4, iVar7 < 0) {
              sVar6 = pmVar4[1].folder_text_preset;
              entry += 1;
              pmVar5 = pmVar4 + 1;
              if (sVar6 == 0) break;
              iVar7 = pmVar4[1].stage_id;
              pmVar4 = pmVar5;
            }
          }
          if (sVar6 != 0) {
            selected_stage = pmVar5->stage_id;
            briefingpage = entry;
          }
          set_menu_to_mode(MENU_BRIEFING,0);
        }
        else {
          set_menu_to_mode(MENU_MISSION_SELECT,0);
          set_cursor_to_stage_solo((longlong)mission_folder_setup_entries[briefingpage].mission_num)
          ;
        }
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 constructor_menu0D_missioncomplete(void)

{
  int iVar1;
  undefined4 *DL;
  uint *puVar3;
  int iVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  short sVar16;
  short sVar17;
  save_file *eepromfile;
  ulonglong uVar2;
  byte *pbVar13;
  char *pcVar14;
  size_t sVar15;
  DIFFICULTY DVar18;
  undefined4 *DL_00;
  int iVar19;
  int iVar20;
  float fVar21;
  float fVar22;
  undefined4 in_f5;
  int iStack3020;
  int iStack3016;
  byte *pbStack3012;
  byte abStack3008 [3000];
  uint uStack8;
  uint uStack4;
  
  DL = set_setfillcolor(DL_00,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  puVar3 = microcode_constructor(DL);
  iVar4 = getMissiontime();
  uVar5 = get_curplay_killcount();
  iVar6 = get_curplayer_shot_register(0);
  iVar7 = get_curplayer_shot_register(1);
  iVar8 = get_curplayer_shot_register(2);
  iVar9 = get_curplayer_shot_register(3);
  iVar10 = get_curplayer_shot_register(4);
  iVar11 = get_curplayer_shot_register(5);
  iVar12 = get_curplayer_shot_register(6);
  iVar19 = iVar7 + iVar8 + iVar9 + iVar10 + iVar11;
  iVar12 = iVar19 + iVar12;
  if (iVar19 < 1) {
    iVar19 = 1;
  }
  puVar3 = print_current_solo_briefing_stage_name(puVar3,abStack3008);
  pbStack3012 = get_textptr_for_textID(0x9c68);
  uStack4 = 0x37;
  uStack8 = 0x8f;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  iStack3020 = 0;
  iStack3016 = 0;
  proc_7F0AE98C(&iStack3016,&iStack3020,pbStack3012,(int)ptrSecondFontTable,(int *)ptrFirstFontTable
                ,0);
  pbStack3012 = get_textptr_for_textID(0x9c69);
  uStack4 = 0x37;
  uStack8 = 0xa7;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  eepromfile = getEEPROMforFoldernum(selected_folder_num);
  uVar2 = get_eeprom_stage_complete_time_for_difficulty
                    (eepromfile,mission_folder_setup_entries[briefingpage].mission_num,
                     selected_difficulty);
  uVar2._4_4_ = (int)uVar2;
  if ((uVar2 == 0) || (0x3fe < (longlong)uVar2)) {
    uVar2._4_4_ = -1;
  }
  DVar18 = selected_difficulty;
  if (2 < selected_difficulty) {
    DVar18 = DIFFICULTY_00;
  }
  iVar1 = iVar4 / 0x3c;
  abStack3008[0] = 0;
  iVar20 = (int)(&solo_target_times_ARRAY_8002b564
                  [mission_folder_setup_entries[briefingpage].mission_num].agent_time)[DVar18];
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  sprintf((char *)abStack3008,a02d02d,iVar1 / 0x3c,iVar1 % 0x3c);
  uStack4 = 0x82;
  uStack8 = 0xa7;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  if (newcheatunlocked != 0) {
    abStack3008[0] = 0;
    pbVar13 = get_textptr_for_textID(0x9d13);
    sprintf((char *)abStack3008,aS,pbVar13);
    sVar16 = get_video2_settings_txtClipW();
    sVar17 = get_video2_settings_txtClipH();
    puVar3 = write_text_at_abs_coord
                       (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                        (int)ptrFirstFontTable,0xa00000ff,(int)sVar16,(int)sVar17,0,0);
  }
  if ((iVar20 < 1) || (selected_difficulty == DIFFICULTY_007)) {
    if ((-1 < uVar2._4_4_) && (uVar2._4_4_ < 0x3ff)) {
      pbStack3012 = get_textptr_for_textID(0x9d11);
      uStack8 = iStack3016 + 0xa9;
      uStack4 = 0x37;
      sVar16 = get_video2_settings_txtClipW();
      sVar17 = get_video2_settings_txtClipH();
      puVar3 = write_text_at_abs_coord
                         (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                          (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
      abStack3008[0] = 0;
      sprintf((char *)abStack3008,a02d02d_1,uVar2._4_4_ / 0x3c,uVar2._4_4_ % 0x3c);
      uStack4 = 0x82;
      uStack8 = iStack3016 + 0xa9;
      sVar16 = get_video2_settings_txtClipW();
      sVar17 = get_video2_settings_txtClipH();
      puVar3 = write_text_at_abs_coord
                         (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                          (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
    }
  }
  else {
    pbStack3012 = get_textptr_for_textID(0x9d12);
    uStack8 = iStack3016 + 0xa9;
    uStack4 = 0x37;
    sVar16 = get_video2_settings_txtClipW();
    sVar17 = get_video2_settings_txtClipH();
    puVar3 = write_text_at_abs_coord
                       (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                        (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
    abStack3008[0] = 0;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar20 == -0x80000000)) {
      trap(0x1800);
    }
    sprintf((char *)abStack3008,a02d02d_0,iVar20 / 0x3c,iVar20 % 0x3c);
    uStack4 = 0x82;
    uStack8 = iStack3016 + 0xa9;
    sVar16 = get_video2_settings_txtClipW();
    sVar17 = get_video2_settings_txtClipH();
    puVar3 = write_text_at_abs_coord
                       (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                        (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
    if ((-1 < uVar2._4_4_) && (uVar2._4_4_ < 0x3ff)) {
      abStack3008[0] = 0;
      if (uVar2._4_4_ < 0) {
        sprintf((char *)abStack3008,&DAT_80051848);
      }
      else {
        pbVar13 = get_textptr_for_textID(0x9d11);
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (uVar2._4_4_ == -0x80000000)) {
          trap(0x1800);
        }
        sprintf((char *)abStack3008,aS02d02d,pbVar13,uVar2._4_4_ / 0x3c,uVar2._4_4_ % 0x3c);
      }
      sVar16 = get_video2_settings_txtClipW();
      sVar17 = get_video2_settings_txtClipH();
      puVar3 = write_text_at_abs_coord
                         (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                          (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
    }
  }
  pbStack3012 = get_textptr_for_textID(0x9c6a);
  uStack4 = 0x37;
  uStack8 = 0xcc;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  if (iVar6 < 1) {
    fVar21 = 0.00000000;
  }
  else {
    fVar21 = ((float)iVar12 * 100.00000000) / (float)iVar6;
  }
  sprintf((char *)abStack3008,a_1f,in_f5,SUB84((double)fVar21,0));
  uStack4 = 0x82;
  uStack8 = 0xcc;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c6b);
  uStack4 = 0x37;
  uStack8 = 0xdc;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pcVar14 = (char *)getplayerfavoredweapon(0,0);
  textpointer_load_parse_something((char *)abStack3008,pcVar14);
  if ((0 < (int)fav_weapon_player1.right) && (fav_weapon_player1.left == fav_weapon_player1.right))
  {
    sVar15 = strlen((char *)abStack3008);
    sprintf((char *)((int)&pbStack3012 + sVar15 + 3),aX2);
  }
  uStack4 = 0xbe;
  uStack8 = 0xdc;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c6c);
  uStack4 = 0x37;
  uStack8 = 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  sprintf((char *)abStack3008,aD_8,iVar6);
  uStack4 = 0x82;
  uStack8 = 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c6d);
  uStack4 = 0xb4;
  uStack8 = 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  fVar21 = (float)iVar19;
  fVar22 = truncf(((float)iVar7 * 100.00000000) / fVar21 + 0.50000000);
  sprintf((char *)abStack3008,aDD_0,iVar7,(int)fVar22);
  uStack4 = 300;
  uStack8 = 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c6e);
  uStack8 = iStack3016 + 0xf4;
  uStack4 = 0xb4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  fVar22 = truncf(((float)iVar8 * 100.00000000) / fVar21 + 0.50000000);
  sprintf((char *)abStack3008,aDD_1,iVar8,(int)fVar22);
  uStack4 = 300;
  uStack8 = iStack3016 + 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c6f);
  uStack8 = iStack3016 * 2 + 0xf4;
  uStack4 = 0xb4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  fVar22 = truncf(((float)iVar9 * 100.00000000) / fVar21 + 0.50000000);
  sprintf((char *)abStack3008,aDD_2,iVar9,(int)fVar22);
  uStack4 = 300;
  uStack8 = iStack3016 * 2 + 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c70);
  uStack8 = iStack3016 * 3 + 0xf4;
  uStack4 = 0xb4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  fVar21 = truncf(((float)(iVar11 + iVar10) * 100.00000000) / fVar21 + 0.50000000);
  sprintf((char *)abStack3008,aDD_3,iVar11 + iVar10,(int)fVar21);
  uStack4 = 300;
  uStack8 = iStack3016 * 3 + 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  pbStack3012 = get_textptr_for_textID(0x9c71);
  uStack8 = iStack3016 + 0xf4;
  uStack4 = 0x37;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,pbStack3012,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  sprintf((char *)abStack3008,aD_10,uVar5);
  uStack4 = 0x82;
  uStack8 = iStack3016 + 0xf4;
  sVar16 = get_video2_settings_txtClipW();
  sVar17 = get_video2_settings_txtClipH();
  puVar3 = write_text_at_abs_coord
                     (puVar3,&uStack4,&uStack8,abStack3008,(int)ptrSecondFontTable,
                      (int)ptrFirstFontTable,0xff,(int)sVar16,(int)sVar17,0,0);
  puVar3 = add_tab2_next(puVar3);
  puVar3 = add_tab3_previous(puVar3);
  uVar5 = load_draw_selected_icon_folder_select(puVar3);
  return uVar5;
}



void init_menu15_cheat(void)

{
  int iVar1;
  char *pcVar2;
  
  tab_1_selected = FALSE;
  tab_2_selected = FALSE;
  tab_3_selected = FALSE;
  tab_3_highlight = FALSE;
  tab_2_highlight = FALSE;
  tab_1_highlight = FALSE;
  dword_8002B5DC = 0;
  pcVar2 = &cheat_available;
  iVar1 = 1;
  do {
    if (*pcVar2 != '\0') {
      (&DAT_800697f0)[dword_8002B5DC] = iVar1;
      dword_8002B5DC += 1;
    }
    iVar1 += 1;
    pcVar2 = pcVar2 + 1;
  } while (iVar1 != 0x4b);
  load_walletbond();
  return;
}



void update_menu15_cheat(void)

{
  longlong lVar1;
  int i;
  undefined1 *puVar2;
  BOOL appendsp;
  BOOL appendmp;
  
  appendsp = FALSE;
  appendmp = FALSE;
  puVar2 = CHEAT_AVAILABLE_EXTRA_CHARS;
  i = 1;
  do {
    if (*puVar2 != '\0') {
      appendsp = TRUE;
      lVar1 = proc_7F091A78(i);
      if (lVar1 != 0) {
        appendmp = TRUE;
      }
    }
    i += 1;
    puVar2 = puVar2 + 1;
  } while (i != 0x4b);
  append_cheat_sp = appendsp;
  append_cheat_mp = appendmp;
  return;
}



void interface_menu15_cheat(undefined8 param_1,undefined8 param_2)

{
  int iVar1;
  ulonglong uVar2;
  BOOL BVar3;
  int iVar4;
  int iVar5;
  
  video_related_1F(60.00000000);
  video_related_21((f32)menu15_aspect);
  set_page_height(100.00000000,(f32)menu15_pageheight);
  set_video2_settings_offset_24(0);
  MP_menu_selected_option = 0;
  uVar2 = get_controller_buttons_held('\0',Z_TRIG|A_BUTTON);
  iVar1 = dword_8002B5E0;
  if (uVar2 == 0) {
    tab_3_highlight = FALSE;
    tab_2_highlight = FALSE;
    tab_1_highlight = FALSE;
    dword_8002B5E0 = 0;
    BVar3 = isontab3();
    if (BVar3 == FALSE) {
      iVar1 = dword_8002B5E0;
      if (((0xc < dword_8002B5DC) &&
          (iVar5 = dword_8002B5DC + -0xd, iVar1 = dword_8002B5E0, 0xdb < (int)(float)cursor_h_pos))
         && (iVar1 = dword_8002B5E0, -1 < iVar5)) {
        iVar4 = iVar5 * 0x14 + 0x35;
        do {
          iVar1 = iVar5 + 0xc;
          if (iVar4 <= (int)(float)cursor_v_pos) break;
          iVar5 += -1;
          iVar4 += -0x14;
          iVar1 = dword_8002B5E0;
        } while (-1 < iVar5);
      }
      dword_8002B5E0 = iVar1;
      iVar1 = dword_8002B5E0;
      if (dword_8002B5E0 == 0) {
        iVar5 = dword_8002B5DC + -1;
        if (0xc < dword_8002B5DC) {
          iVar5 = 0xb;
        }
        iVar1 = dword_8002B5E0;
        if (-1 < iVar5) {
          iVar4 = iVar5 * 0x14 + 0x35;
          do {
            iVar1 = iVar5;
            if (iVar4 <= (int)(float)cursor_v_pos) break;
            iVar5 += -1;
            iVar4 += -0x14;
            iVar1 = dword_8002B5E0;
          } while (-1 < iVar5);
        }
      }
    }
    else {
      tab_3_highlight = TRUE;
      iVar1 = dword_8002B5E0;
    }
  }
  dword_8002B5E0 = iVar1;
  uVar2 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON);
  if (uVar2 == 0) {
    uVar2 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar2 != 0) {
      tab_3_selected = TRUE;
      play_sfx_a1(ptr_sfx_buf,199,NULL);
    }
  }
  else {
    if (tab_3_highlight == FALSE) {
      MP_menu_selected_option = 1;
    }
    else {
      tab_3_selected = TRUE;
    }
    play_sfx_a1(ptr_sfx_buf,199,NULL);
  }
  disable_all_switches((int)ptr_folder_object_instance);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,0x2a,1);
  set_item_visibility_in_objinstance((int)ptr_folder_object_instance,6,1);
  menu_control_stick_tracking();
  if (tab_3_selected == FALSE) {
    if (MP_menu_selected_option != 0) {
      (&DAT_800696a0)[(&DAT_800697f0)[dword_8002B5E0]] =
           '\x01' - (&DAT_800696a0)[(&DAT_800697f0)[dword_8002B5E0]];
    }
  }
  else {
    set_menu_to_mode(MENU_MODE_SELECT,0);
    set_menu_cursor_pos_to_setting(gamemode);
  }
  return;
}



undefined4 constructor_menu15_cheat(undefined4 *param_1)

{
  undefined4 *DL;
  uint *DL_00;
  BOOL BVar1;
  short sVar4;
  short sVar5;
  byte *pbVar2;
  undefined4 uVar3;
  u16 id;
  uint uVar6;
  int *piVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  int iStack28;
  int iStack24;
  uint uStack20;
  uint auStack16 [4];
  
  DL = set_setfillcolor(param_1,0,0,0);
  DL = insert_generic_fillrect(DL);
  DL = (undefined4 *)proc_7F00D5E8(DL);
  DL_00 = microcode_constructor(DL);
  iVar9 = 0;
  iVar10 = dword_8002B5DC;
  if (0xc < dword_8002B5DC) {
    iVar10 = 0xc;
  }
  if (0 < iVar10) {
    uVar8 = 0x35;
    piVar7 = &DAT_800697f0;
    do {
      pbVar2 = (byte *)proc_7F092774(*piVar7);
      proc_7F0AE98C(&iStack24,&iStack28,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      auStack16[0] = 0x37;
      uStack20 = uVar8;
      if ((iVar9 == dword_8002B5E0) && (uStack20 = uVar8, BVar1 = isontab3(), BVar1 == FALSE)) {
        DL_00 = microcode_constructor_related_to_menus
                          (DL_00,(longlong)(int)(auStack16[0] - 2),(longlong)(int)(uStack20 - 1),
                           (longlong)(int)(auStack16[0] + iStack28 + 5),uStack20 + 0xe,0x32);
      }
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,auStack16,&uStack20,pbVar2,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
      id = 0x9c74;
      if ((&DAT_800696a0)[*piVar7] != '\0') {
        id = 0x9c73;
      }
      pbVar2 = get_textptr_for_textID(id);
      proc_7F0AE98C(&iStack24,&iStack28,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      auStack16[0] = 0xb3;
      uVar6 = 0xff;
      if ((&DAT_800696a0)[*piVar7] != '\0') {
        uVar6 = 0xa00000ff;
      }
      uStack20 = uVar8;
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,auStack16,&uStack20,pbVar2,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,uVar6,(int)sVar4,(int)sVar5,0,0);
      iVar9 += 1;
      piVar7 = piVar7 + 1;
      uVar8 += 0x14;
      iVar10 = dword_8002B5DC;
      if (0xc < dword_8002B5DC) {
        iVar10 = 0xc;
      }
    } while (iVar9 < iVar10);
  }
  if ((0xc < dword_8002B5DC) && (iVar10 = 0, 0 < dword_8002B5DC + -0xc)) {
    DL = &DAT_800697f0;
    uVar8 = 0x35;
    do {
      pbVar2 = (byte *)proc_7F092774(DL[0xc]);
      proc_7F0AE98C(&iStack24,&iStack28,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      auStack16[0] = 0xdc;
      uStack20 = uVar8;
      if ((iVar10 + 0xc == dword_8002B5E0) && (uStack20 = uVar8, BVar1 = isontab3(), BVar1 == FALSE)
         ) {
        DL_00 = microcode_constructor_related_to_menus
                          (DL_00,(longlong)(int)(auStack16[0] - 2),(longlong)(int)(uStack20 - 1),
                           (longlong)(int)(auStack16[0] + iStack28 + 5),uStack20 + 0xe,0x32);
      }
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,auStack16,&uStack20,pbVar2,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,0xff,(int)sVar4,(int)sVar5,0,0);
      id = 0x9c74;
      if ((&DAT_800696a0)[DL[0xc]] != '\0') {
        id = 0x9c73;
      }
      pbVar2 = get_textptr_for_textID(id);
      proc_7F0AE98C(&iStack24,&iStack28,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
      auStack16[0] = 0x158;
      uVar6 = 0xff;
      if ((&DAT_800696a0)[DL[0xc]] != '\0') {
        uVar6 = 0xa00000ff;
      }
      uStack20 = uVar8;
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      DL_00 = write_text_at_abs_coord
                        (DL_00,auStack16,&uStack20,pbVar2,(int)ptrSecondFontTable,
                         (int)ptrFirstFontTable,uVar6,(int)sVar4,(int)sVar5,0,0);
      iVar10 += 1;
      DL = DL + 1;
      uVar8 += 0x14;
    } while (iVar10 < dword_8002B5DC + -0xc);
  }
  DL_00 = add_tab3_previous(DL_00);
  uVar3 = load_draw_selected_icon_folder_select(DL_00);
  return uVar3;
}



void init_menu16_nocontroller(void)

{
  return;
}



void update_menu16_nocontrollers(void)

{
  return;
}



void interface_menu16_nocontrollers(void)

{
  return;
}



// WARNING: Instruction at (ram,0x7f0184c8) overlaps instruction at (ram,0x7f0184c4)
// 

uint * constructor_menu16_nocontrollers(undefined4 *param_1)

{
  ulonglong uVar1;
  undefined4 *DL;
  short sVar2;
  short sVar3;
  uint *DL_00;
  bool bVar4;
  byte *pbStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  uVar1 = get_num_controllers_plugged_in();
  bVar4 = (uVar1 & 8) != 0;
  if ((uVar1 & 4) != 0) {
    bVar4 = (bool)(bVar4 + '\x01');
  }
  if ((uVar1 & 2) != 0) {
    bVar4 = (bool)(bVar4 + '\x01');
  }
  DL = insert_imageDL(param_1);
  DL = microcode_constructor(DL);
  if ((((bVar4 == false) || (bVar4 == true)) || (bVar4 == true)) || (bVar4 == true)) {
    pbStack20 = get_textptr_for_textID(0x9c76);
  }
  proc_7F0AE98C(&iStack4,&iStack8,pbStack20,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  iStack12 = 0xdc - (iStack8 >> 1);
  iStack16 = 0x99 - (iStack4 >> 1);
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_00 = en_text_write_stuff(DL,&iStack12,&iStack16,pbStack20,(int)ptrSecondFontTable,
                              (int)ptrFirstFontTable,0xffffffff,(int)sVar2,(int)sVar3,0,0);
  if (((bVar4 == false) || (bVar4 == true)) || ((bVar4 == true || (bVar4 == true)))) {
    pbStack20 = get_textptr_for_textID(0x9c77);
  }
  proc_7F0AE98C(&iStack4,&iStack8,pbStack20,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  iStack12 = 0xdc - (iStack8 >> 1);
  iStack16 = 0xb1 - (iStack4 >> 1);
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  DL_00 = en_text_write_stuff(DL_00,&iStack12,&iStack16,pbStack20,(int)ptrSecondFontTable,
                              (int)ptrFirstFontTable,0xffffffff,(int)sVar2,(int)sVar3,0,0);
  return DL_00;
}



void do_extended_cast_display(BOOL flag)

{
  if (flag != FALSE) {
    do_not_play_intro_movie = 0;
    full_actor_intro = flag;
    return;
  }
  do_not_play_intro_movie = 1;
  full_actor_intro = flag;
  return;
}



void init_menu18_displaycast(void)

{
  object_header *objheader;
  u32 uVar1;
  u32 uVar2;
  int iVar3;
  BOOL BVar4;
  int iVar5;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  uint uVar6;
  int *piVar7;
  int *piVar8;
  int *piVar9;
  int *piVar10;
  float fVar11;
  f32 scale;
  f32 scale_00;
  float extraout_f12;
  f32 extraout_f12_00;
  float extraout_f12_01;
  f32 extraout_f14;
  float extraout_f14_00;
  int local_8c [10];
  int rifles [6];
  object_header *headHeader;
  HEADS headID;
  BODIES bodyID;
  int aiStack40 [4];
  float local_18;
  undefined4 local_14;
  undefined4 local_10;
  undefined *local_8;
  undefined *local_4;
  
  local_4 = ptr_logo_and_walletbond_DL;
  local_18 = dword_8002BA2C;
  local_14 = DAT_8002ba30;
  local_10 = DAT_8002ba34;
  headHeader = NULL;
  uVar1 = get_random_value();
  if ((full_actor_intro != FALSE) && (do_not_play_intro_movie == 0)) {
    musicTrack1Vol(0x7fff);
    music1_playing = 0;
    musicTrack1Play(M_INTRO);
  }
  intro_animation_count = 0;
  if (-1 < intro_animation_table[0].animID) {
    intro_animation_count = 1;
    while (-1 < intro_animation_table[intro_animation_count].animID) {
      intro_animation_count += 1;
    }
  }
  uVar2 = get_random_value();
  randomly_selected_intro_animation = uVar2 % intro_animation_count;
  bodyID = intro_char_table[do_not_play_intro_movie].body;
  headID = intro_char_table[do_not_play_intro_movie].head;
  iVar5 = intro_animation_table[randomly_selected_intro_animation].camera_preset;
  if (intro_animation_count == 0) {
    trap(0x1c00);
  }
  if (bodyID == BODY_Special_Operations_Uniform) {
    uVar2 = get_random_value();
    if (true) {
      switch(uVar2 % 5) {
      case 1:
        headID = HEAD_Male_Pierce_Bond_2;
        bodyID = BODY_Formal_Wear;
        break;
      case 2:
        headID = HEAD_Male_Pierce_Bond_2;
        bodyID = BODY_Jungle_Fatigues;
        break;
      case 3:
        headID = HEAD_Male_Pierce_Bond_2;
        bodyID = BODY_Parka;
        break;
      case 4:
        headID = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
        bodyID = BODY_Tuxedo;
      }
    }
  }
  else {
    if (bodyID == BODY_Natalya_Skirt) {
      uVar2 = get_random_value();
      if ((uVar2 & 1) != 0) {
        bodyID = BODY_Natalya_Jungle_Fatigues;
      }
    }
    else {
      if ((bodyID == BODY_Trevelyan_006) && (uVar2 = get_random_value(), (uVar2 & 1) != 0)) {
        bodyID = BODY_Trevelyan_Janus;
      }
    }
  }
  if (headID == 0xffffff9f) {
    headID = get_random_head(bodyID);
  }
  local_8 = &DAT_00031160;
  proc_7F0D2448(((uint)(local_4 + 0x3119f) | 0x3f) ^ 0x3f,0x1b8,0x14a);
  proc_7F0CBAF4(aiStack40,(int)local_4,0x19000);
  objheader = c_item_entries[bodyID].header;
  local_4 = local_4 + 0x19000;
  local_8 = local_8 + -0x19000;
  load_object_fill_header
            (objheader,(int *)c_item_entries[bodyID].filename,(int)local_4,(int)local_8,
             (int)aiStack40);
  iVar3 = proc_7F0BD188((byte *)c_item_entries[bodyID].filename);
  uVar6 = (iVar3 + 0x3fU | 0x3f) ^ 0x3f;
  local_8 = local_8 + -uVar6;
  local_4 = local_4 + uVar6;
  if (-1 < (int)headID) {
    headHeader = c_item_entries[headID].header;
    load_object_fill_header
              (headHeader,(int *)c_item_entries[headID].filename,(int)local_4,(int)local_8,
               (int)aiStack40);
    iVar3 = proc_7F0BD188((byte *)c_item_entries[headID].filename);
    uVar6 = (iVar3 + 0x3fU | 0x3f) ^ 0x3f;
    local_8 = local_8 + -uVar6;
    local_4 = local_4 + uVar6;
  }
  objinstance = (undefined *)setup_chr_instance(bodyID,headID,objheader,headHeader,0);
  set_obj_instance_controller_scale((int)objinstance,scale);
  if (iVar5 == 0) {
    ptrobjinstance = NULL;
  }
  else {
    if (iVar5 == 2) {
      rifles[0] = random_rifles_in_intro[0];
      rifles[1] = random_rifles_in_intro[1];
      rifles[3] = random_rifles_in_intro[3];
      rifles[2] = random_rifles_in_intro[2];
      rifles[4] = random_rifles_in_intro[4];
      rifles[5] = random_rifles_in_intro[5];
      uVar2 = get_random_value();
      iVar5 = rifles[uVar2 % 6];
    }
    else {
      piVar7 = random_pistols_in_intro;
      piVar9 = local_8c;
      do {
        piVar8 = piVar7 + 3;
        piVar10 = piVar9 + 3;
        *piVar9 = *piVar7;
        piVar9[1] = piVar7[1];
        piVar9[2] = piVar7[2];
        piVar7 = piVar8;
        piVar9 = piVar10;
      } while (piVar8 != random_pistols_in_intro + 9);
      *piVar10 = random_pistols_in_intro[9];
      uVar2 = get_random_value();
      iVar5 = local_8c[uVar2 % 10];
    }
    if ((iVar5 == 0xbe) && (uVar2 = check_cradle_completed_any_folder(), uVar2 == 0)) {
      iVar5 = 0xbf;
    }
    if ((iVar5 == 0xbb) && (BVar4 = check_aztec_completed_any_folder_secret_00(), BVar4 == FALSE)) {
      iVar5 = 0xbf;
    }
    if ((iVar5 == 0xd0) && (BVar4 = check_egypt_completed_any_folder_00(), BVar4 == FALSE)) {
      iVar5 = 0xbf;
    }
    objheader = (object_header *)PitemZ_entries[iVar5].header;
    load_object_fill_header
              (objheader,(int *)PitemZ_entries[iVar5].filename,(int)local_4,(int)local_8,
               (int)aiStack40);
    proc_7F0BD188((byte *)PitemZ_entries[iVar5].filename);
    set_objuse_flag_compute_grp_nums_set_obj_loaded(objheader);
    ptrobjinstance = (undefined *)get_obj_instance_controller_for_header((PitemZ_header *)objheader)
    ;
    set_obj_instance_controller_scale((int)ptrobjinstance,scale_00);
    iVar5 = 3;
    *(undefined **)(ptrobjinstance + 0x18) = objinstance;
    if ((uVar1 & 1) != 0) {
      iVar5 = 5;
    }
    *(undefined4 *)(ptrobjinstance + 0x1c) =
         *(undefined4 *)(*(int *)(*(int *)(objinstance + 8) + 8) + iVar5 * 4);
  }
  proc_7F06CE84((int)objinstance,0x3dcccccd);
  setsuboffset((int)objinstance,&local_18,extraout_a2_lo,extraout_a3_lo);
  setsubroty((int)objinstance,extraout_f12,0.00000000,extraout_a2_lo_00);
  proc_7F06FF18((int)objinstance,extraout_f12_00,extraout_f14);
  proc_7F06FCA8((int)objinstance,
                *(undefined4 *)
                 (animation_table_ptrs1 +
                 intro_animation_table[randomly_selected_intro_animation].animID * 4),
                (char)(uVar1 & 1),extraout_f12_01,
                intro_animation_table[randomly_selected_intro_animation].startframeoffset,
                extraout_f14_00);
  menu_timer = 0;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695a4 = fVar11 * 0.00000000 * 80.00000000 + 70.00000000;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695a8 = fVar11 * 0.00000000 * 80.00000000 + 70.00000000;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695b0 = (fVar11 * 0.00000000 - 0.50000000) * flt_80051B00;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695b4 = (fVar11 * 0.00000000 - 0.50000000) * flt_80051B04;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695bc = fVar11 * 0.00000000 * 200.00000000 + -100.00000000;
  uVar1 = get_random_value();
  fVar11 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  DAT_800695a0 = DAT_800695a4;
  dword_80069C6C = DAT_800695b0;
  DAT_800695b8 = DAT_800695bc;
  DAT_800695c0 = fVar11 * 0.00000000 * 200.00000000 + -100.00000000;
  DAT_800695e4 = 1;
  DAT_800695e8 = 0;
  DAT_800695ec = 0;
  DAT_800695f0 = 0;
  return;
}



void update_menu18_displaycast(void)

{
  if (objinstance != NULL) {
    set_aircraft_obj_inst_scale_to_zero((int *)objinstance);
  }
  if (ptrobjinstance != NULL) {
    set_obj_instance_scale_to_zero((int *)ptrobjinstance);
  }
  return;
}



void interface_menu18_displaycast(undefined8 param_1,undefined8 param_2)

{
  BOOL BVar2;
  u32 uVar3;
  ulonglong uVar1;
  int iVar4;
  
  video_related_1F(46.00000000);
  set_page_height(10.00000000,2000.00000000);
  set_video2_settings_offset_24(1);
  video_related_21((f32)flt_80051B08);
  set_cur_player_screen_size(0x1b8,0x14a);
  set_video2_width_height(0x1b8,0x14a);
  set_cur_player_viewport_size(0,0);
  set_video2_ulx_uly(0,0);
  menu_timer += clock_timer;
  if (menu_timer < 0xb5) {
    uVar1 = get_controller_buttons_pressed
                      ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                            DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                            A_BUTTON);
    if ((uVar1 != 0) && (full_actor_intro == FALSE)) {
      set_menu_to_mode(MENU_FILE_SELECT,1);
    }
    return;
  }
  iVar4 = do_not_play_intro_movie + 1;
LAB_7f01902c:
  do_not_play_intro_movie = iVar4;
  if (intro_char_table[do_not_play_intro_movie].flag != 0) goto code_r0x7f01904c;
  iVar4 = intro_char_table[do_not_play_intro_movie].body;
  goto LAB_7f019068;
code_r0x7f01904c:
  iVar4 = do_not_play_intro_movie + 1;
  if (full_actor_intro != FALSE) {
    iVar4 = intro_char_table[do_not_play_intro_movie].body;
LAB_7f019068:
    if ((iVar4 == 0x27) && (BVar2 = check_aztec_completed_any_folder_secret_00(), BVar2 == FALSE)) {
      iVar4 = do_not_play_intro_movie + 1;
      goto LAB_7f01902c;
    }
    if ((intro_char_table[do_not_play_intro_movie].body == 0x28) &&
       (BVar2 = check_aztec_completed_any_folder_secret_00(), BVar2 == FALSE)) {
      iVar4 = do_not_play_intro_movie + 1;
      goto LAB_7f01902c;
    }
    if ((intro_char_table[do_not_play_intro_movie].body == 0xe) &&
       (BVar2 = check_aztec_completed_any_folder_secret_00(), BVar2 == FALSE)) {
      uVar3 = get_random_value();
      if (false) {
        trap(0x1c00);
      }
      if (uVar3 % 10000 != 0) {
        iVar4 = do_not_play_intro_movie + 1;
        goto LAB_7f01902c;
      }
    }
    if ((intro_char_table[do_not_play_intro_movie].body == 0xd) &&
       (BVar2 = check_aztec_completed_any_folder_secret_00(), BVar2 == FALSE)) {
      uVar3 = get_random_value();
      if (false) {
        trap(0x1c00);
      }
      if (uVar3 % 10000 != 0) {
        iVar4 = do_not_play_intro_movie + 1;
        goto LAB_7f01902c;
      }
    }
    if ((intro_char_table[do_not_play_intro_movie].body == 0xf) &&
       (BVar2 = check_egypt_completed_any_folder_00(), BVar2 == FALSE)) {
      uVar3 = get_random_value();
      if (false) {
        trap(0x1c00);
      }
      if (uVar3 % 10000 != 0) {
        iVar4 = do_not_play_intro_movie + 1;
        goto LAB_7f01902c;
      }
    }
    if ((intro_char_table[do_not_play_intro_movie].body != 0xc) ||
       (BVar2 = check_egypt_completed_any_folder_00(), BVar2 != FALSE)) {
LAB_7f019268:
      if (intro_char_table[do_not_play_intro_movie].body < 0) {
        do_not_play_intro_movie = 0;
      }
      if (do_not_play_intro_movie < 1) {
        if (full_actor_intro != FALSE) {
          set_menu_to_mode(MENU_MISSION_SELECT,1);
          set_cursor_to_stage_solo(0x11);
          full_actor_intro = FALSE;
          return;
        }
        select_ramrom_to_play();
        return;
      }
      set_menu_to_mode(MENU_DISPLAY_CAST,1);
      return;
    }
    uVar3 = get_random_value();
    if (false) {
      trap(0x1c00);
    }
    if (uVar3 % 10000 == 0) goto LAB_7f019268;
    iVar4 = do_not_play_intro_movie + 1;
  }
  goto LAB_7f01902c;
}



uint * constructor_menu18_displaycast(undefined4 *_DL)

{
  ushort *partdesc;
  undefined4 *DL;
  LookAt *l;
  f32 *pfVar1;
  uint *DL_00;
  byte *pbVar2;
  short sVar3;
  short sVar4;
  undefined8 extraout_a0;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a2_lo_03;
  undefined4 extraout_a2_lo_04;
  undefined4 extraout_a2_lo_05;
  undefined4 uVar5;
  undefined4 extraout_a2_lo_06;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  undefined4 extraout_a3_lo_03;
  undefined *extraout_a3_lo_04;
  undefined *puVar6;
  f32 **ppfVar7;
  f32 **ppfVar8;
  f32 **ppfVar9;
  f32 **ppfVar10;
  int iVar11;
  int iVar13;
  longlong lVar12;
  float fVar14;
  float fVar15;
  uint uVar16;
  float xEye;
  float yEye;
  byte abStack368 [72];
  float fStack296;
  float fStack292;
  float fStack288;
  float fStack284;
  float fStack280;
  float fStack276;
  float fStack268;
  float fStack264;
  int iStack256;
  int iStack252;
  int iStack248;
  int iStack244;
  float afStack240 [18];
  f32 *pfStack168;
  undefined4 uStack164;
  undefined4 uStack160;
  undefined4 *puStack156;
  LookAt *pLStack152;
  undefined4 uStack120;
  f32 afStack104 [17];
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack12 = flt_8002BA78.x;
  fStack8 = flt_8002BA78.y;
  fStack4 = flt_8002BA78.z;
  fStack24 = dword_8002BA84.x;
  fStack20 = dword_8002BA84.y;
  fStack16 = dword_8002BA84.z;
  fStack36 = dword_8002BA90.x;
  fStack32 = dword_8002BA90.y;
  fStack28 = dword_8002BA90.z;
  ppfVar9 = (f32 **)&dword_8002BA9C;
  ppfVar7 = &pfStack168;
  do {
    ppfVar10 = ppfVar9 + 3;
    ppfVar8 = ppfVar7 + 3;
    *ppfVar7 = *ppfVar9;
    ppfVar7[1] = ppfVar9[1];
    ppfVar7[2] = ppfVar9[2];
    ppfVar9 = ppfVar10;
    ppfVar7 = ppfVar8;
  } while (ppfVar10 != (f32 **)0x8002bad8);
  *ppfVar8 = pfRam8002bad8;
  fStack284 = DAT_8002badc;
  fStack280 = dword_8002BAE0;
  fStack264 = (float)menu_timer / 180.00000000;
  fStack276 = dword_8002BAE4;
  if ((menu_timer < 0) || (0xb3 < menu_timer)) {
    fStack268 = 0.00000000;
  }
  else {
    if (menu_timer < 0x1e) {
      fStack268 = (float)menu_timer / 30.00000000;
    }
    else {
      if (menu_timer < 0x97) {
        fStack268 = 1.00000000;
      }
      else {
        fStack268 = (float)(0xb4 - menu_timer) / 30.00000000;
      }
    }
  }
  DL = set_setfillcolor(_DL,0,0,0);
  pLStack152 = (LookAt *)insert_generic_fillrect(DL);
  DAT_800695a0 = (DAT_800695a8 - DAT_800695a4) * fStack264 + DAT_800695a4;
  dword_80069C6C = (DAT_800695b4 - DAT_800695b0) * fStack264 + DAT_800695b0;
  DAT_800695b8 = (DAT_800695c0 - DAT_800695bc) * fStack264 + DAT_800695bc;
  if (dword_80069C6C < 0.00000000) {
    dword_80069C6C = dword_80069C6C + flt_80051B0C;
  }
  l = pLStack152;
  fVar14 = sinf(dword_80069C6C);
  fVar15 = cosf(dword_80069C6C);
  fStack8 = DAT_800695b8;
  fStack12 = fVar15 * flt_80051B10 * DAT_800695a0 + DAT_800695a0 * fVar14;
  fVar14 = cosf(dword_80069C6C);
  fVar15 = sinf(dword_80069C6C);
  fStack4 = DAT_800695a0 * fVar14 - fVar15 * flt_80051B14 * DAT_800695a0;
  fVar14 = cosf(dword_80069C6C);
  fStack24 = fStack24 + fVar14 * flt_80051B18 * DAT_800695a0;
  fVar14 = sinf(dword_80069C6C);
  fStack16 = fStack16 + -fVar14 * flt_80051B1C * DAT_800695a0;
  proc_7F0BD6F8(2);
  guLookAtReflect((Mtx *)abStack368,l,xEye,yEye,0.00000000,0.00000000,4000.00000000,0.00000000,
                  0.00000000,0.00000000,0.00000000);
  *(undefined4 *)pLStack152->l = 0xbc000002;
  *(undefined4 *)(pLStack152->l + 4) = 0x80000040;
  *(undefined4 *)(pLStack152->l + 8) = 0x3860010;
  *(undefined4 *)(pLStack152->l + 0xc) = 0x8002a978;
  *(undefined4 *)(pLStack152->l + 0x10) = 0x3880010;
  *(undefined4 *)(pLStack152->l + 0x14) = 0x8002a970;
  *(undefined4 *)(pLStack152->l + 0x18) = 0x3840010;
  *(LookAt **)(pLStack152->l + 0x1c) = l;
  *(byte **)(pLStack152[1].l + 4) = l->l + 0x10;
  *(undefined4 *)pLStack152[1].l = 0x3820010;
  puStack156 = (undefined4 *)(pLStack152[1].l + 8);
  proc_7F070AEC((int)objinstance,clock_timer,1);
  set_80036084(1);
  proc_7F073FC8(0);
  subcalcpos((int)objinstance,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  if ((ptrobjinstance != NULL) && (**(ushort ***)(*(int *)(ptrobjinstance + 8) + 8) != NULL)) {
    pLStack152 = (LookAt *)
                 extract_id_from_object_structure_microcode
                           ((int)ptrobjinstance,**(ushort ***)(*(int *)(ptrobjinstance + 8) + 8));
    *(undefined2 *)pLStack152->l = 0;
  }
  if ((ptrobjinstance != NULL) &&
     (partdesc = *(ushort **)(*(int *)(*(int *)(ptrobjinstance + 8) + 8) + 8), partdesc != NULL)) {
    pLStack152 = (LookAt *)extract_id_from_object_structure_microcode((int)ptrobjinstance,partdesc);
    *(undefined4 *)pLStack152->l = 0;
  }
  proc_7F0BD714((int)*(short *)(*(int *)(objinstance + 8) + 0xe) << 6);
  proc_7F057FD0(afStack104);
  pfStack168 = afStack104;
  subcalcmatrices((float **)&pfStack168,(uint)objinstance,extraout_a2_lo_00,extraout_a3_lo_00);
  getsuboffset((int)objinstance,&fStack296,extraout_a2_lo_01,extraout_a3_lo_01);
  if (DAT_800695e4 != 0) {
    DAT_800695ec = fStack292;
  }
  fStack284 = (fStack296 - DAT_800695e8) / global_timer_delta;
  fStack280 = (fStack292 - DAT_800695ec) / global_timer_delta;
  fStack276 = (fStack288 - DAT_800695f0) / global_timer_delta;
  if (DAT_800695e4 != 0) {
    DAT_80069608 = fStack284 / flt_80051B20;
    DAT_8006960c = fStack280 / flt_80051B20;
    DAT_80069610 = fStack276 / flt_80051B20;
  }
  if (0 < clock_timer) {
    iVar13 = 1;
    DAT_80069608 = flt_80051B28 * DAT_80069608;
    if (1 < clock_timer) {
      do {
        iVar13 += 1;
        DAT_8006960c = fStack280 + flt_80051B28 * DAT_8006960c;
        DAT_80069610 = fStack276 + flt_80051B28 * DAT_80069610;
        DAT_80069608 = flt_80051B28 * (fStack284 + DAT_80069608);
      } while (iVar13 < clock_timer);
    }
    DAT_80069608 = fStack284 + DAT_80069608;
    DAT_8006960c = fStack280 + flt_80051B28 * DAT_8006960c;
    DAT_80069610 = fStack276 + flt_80051B28 * DAT_80069610;
  }
  DAT_800695f8 = DAT_80069608 * flt_80051B24;
  DAT_800695fc = DAT_8006960c * flt_80051B24;
  DAT_80069600 = DAT_80069610 * flt_80051B24;
  DAT_800695e8 = DAT_800695e8 + DAT_800695f8 * global_timer_delta;
  DAT_800695ec = DAT_800695ec + DAT_800695fc * global_timer_delta;
  DAT_800695f0 = DAT_800695f0 + DAT_80069600 * global_timer_delta;
  proc_7F058474(*(float **)(objinstance + 0xc),&fStack284);
  fStack284 = fStack284 - DAT_800695e8;
  fStack280 = fStack280 - DAT_800695ec;
  fStack276 = fStack276 - DAT_800695f0;
  if (DAT_800695e4 != 0) {
    DAT_800695d8 = fStack284 / flt_80051B34;
    DAT_800695e4 = 0;
    DAT_800695dc = fStack280 / flt_80051B34;
    dword_80069CA0 = fStack276 / flt_80051B34;
  }
  pfVar1 = (f32 *)&DAT_800695d8;
  if (0 < clock_timer) {
    iVar13 = 1;
    DAT_800695d8 = flt_80051B30 * DAT_800695d8;
    if (1 < clock_timer) {
      do {
        iVar13 += 1;
        DAT_800695dc = fStack280 + flt_80051B30 * DAT_800695dc;
        dword_80069CA0 = fStack276 + flt_80051B30 * dword_80069CA0;
        DAT_800695d8 = flt_80051B30 * (fStack284 + DAT_800695d8);
      } while (iVar13 < clock_timer);
    }
    DAT_800695d8 = fStack284 + DAT_800695d8;
    DAT_800695dc = fStack280 + flt_80051B30 * DAT_800695dc;
    dword_80069CA0 = fStack276 + flt_80051B30 * dword_80069CA0;
  }
  lVar12 = 0;
  DAT_800695c8 = DAT_800695d8 * flt_80051B34;
  DAT_800695cc = DAT_800695dc * flt_80051B34;
  dword_80069C90 = dword_80069CA0 * flt_80051B34;
  fStack284 = DAT_800695e8 + DAT_800695c8;
  fStack280 = (DAT_800695ec + DAT_800695cc) - 10.00000000;
  fStack276 = DAT_800695f0 + dword_80069C90;
  fStack24 = fStack24 + fStack284;
  fStack12 = fStack12 + DAT_800695e8;
  fStack16 = fStack16 + fStack276;
  fStack8 = fStack8 + DAT_800695ec + 52.50000000;
  fStack20 = fStack20 + fStack280;
  fStack4 = fStack4 + DAT_800695f0;
  proc_7F059694((float *)afStack104,fStack280,fStack276,fStack12,fStack8,fStack4,fStack24,fStack20,
                fStack16,fStack36);
  pfStack168 = afStack104;
  proc_7F0BD714((int)*(short *)(*(int *)(objinstance + 8) + 0xe) << 6);
  pLStack152 = (LookAt *)pfVar1;
  subcalcmatrices((float **)&pfStack168,(uint)objinstance,extraout_a2_lo_02,extraout_a3_lo_02);
  uVar5 = extraout_a2_lo_03;
  puVar6 = ptrobjinstance;
  if (ptrobjinstance != NULL) {
    pfVar1 = (f32 *)proc_7F06C660((int)objinstance,*(ushort **)(ptrobjinstance + 0x1c),0);
    if (*(int *)(ptrobjinstance + 0x1c) == *(int *)(*(int *)(*(int *)(objinstance + 8) + 8) + 0x14))
    {
      pfStack168 = pfVar1;
      proc_7F058688(flt_80051B38,extraout_a0,afStack240);
      proc_7F058068((float *)pfStack168,afStack240);
      iVar13 = *(int *)(ptrobjinstance + 8);
      pfStack168 = (f32 *)afStack240;
    }
    else {
      iVar13 = *(int *)(ptrobjinstance + 8);
      pfStack168 = pfVar1;
    }
    proc_7F0BD714((int)*(short *)(iVar13 + 0xe) << 6);
    pLStack152 = (LookAt *)pfVar1;
    instcalcmatrices((float **)&pfStack168,(uint)ptrobjinstance,extraout_a2_lo_04,extraout_a3_lo_03)
    ;
    uVar5 = extraout_a2_lo_05;
    puVar6 = extraout_a3_lo_04;
  }
  uStack120 = 7;
  uStack164 = 1;
  uStack160 = 3;
  subdraw((int)&pfStack168,(uint)objinstance,uVar5,puVar6);
  if (ptrobjinstance != NULL) {
    subdraw((int)&pfStack168,(uint)ptrobjinstance,extraout_a2_lo_06,ptrobjinstance);
  }
  DL = puStack156;
  set_80036084(0);
  iVar13 = 0;
  if (0 < *(short *)(*(int *)(objinstance + 8) + 0xe)) {
    iVar11 = *(int *)(objinstance + 0xc);
    while( true ) {
      proc_7F058020((undefined4 *)(iVar11 + iVar13),afStack240);
      proc_7F058C9C((int)afStack240,(uint *)(*(int *)(objinstance + 0xc) + (int)lVar12 * 0x40));
      lVar12 = (longlong)((int)lVar12 + 1);
      iVar13 += 0x40;
      if ((longlong)*(short *)(*(int *)(objinstance + 8) + 0xe) <= lVar12) break;
      iVar11 = *(int *)(objinstance + 0xc);
    }
  }
  if (ptrobjinstance != NULL) {
    lVar12 = 0;
    iVar13 = 0;
    if (0 < *(short *)(*(int *)(ptrobjinstance + 8) + 0xe)) {
      iVar11 = *(int *)(ptrobjinstance + 0xc);
      while( true ) {
        proc_7F058020((undefined4 *)(iVar11 + iVar13),afStack240);
        proc_7F058C9C((int)afStack240,(uint *)(*(int *)(ptrobjinstance + 0xc) + (int)lVar12 * 0x40))
        ;
        lVar12 = (longlong)((int)lVar12 + 1);
        iVar13 += 0x40;
        if ((longlong)*(short *)(*(int *)(ptrobjinstance + 8) + 0xe) <= lVar12) break;
        iVar11 = *(int *)(ptrobjinstance + 0xc);
      }
    }
  }
  *DL = 0xed000000;
  DL[1] = 0x6e0528;
  DL[2] = 0xe7000000;
  DL[3] = 0;
  DL[4] = 0xba001402;
  DL[5] = 0;
  DL[7] = 0xc0;
  DL[6] = 0xba000602;
  DL[8] = 0xba001301;
  DL[9] = 0;
  DL[10] = 0xb9000002;
  DL[0xb] = 0;
  DL[0xc] = 0xba001001;
  DL[0xd] = 0;
  DL[0xf] = 0x2000;
  DL[0xe] = 0xba000c02;
  DL[0x10] = 0xba000903;
  DL[0x11] = 0xc00;
  DL[0x12] = 0xba000e02;
  DL[0x13] = 0;
  DL[0x15] = 0x504340;
  DL[0x14] = 0xb900031d;
  DL[0x16] = 0xfcffffff;
  DL[0x17] = 0xfffdf6fb;
  DL[0x18] = 0xfa000000;
  fVar14 = fStack268 * 255.00000000;
  DL[0x19] = 0xffU - (int)fVar14 & 0xff;
  DL[0x1b] = 0;
  DL[0x1a] = 0xf66e0528;
  DL[0x1d] = 0;
  DL[0x1c] = 0xe7000000;
  DL[0x1f] = 0x40;
  DL[0x1e] = 0xba000602;
  DL[0x21] = 0x80000;
  DL[0x20] = 0xba001301;
  DL[0x23] = 0x10000;
  DL[0x22] = 0xba001001;
  DL_00 = microcode_constructor(DL + 0x24);
  if (full_actor_intro == FALSE) {
    pbVar2 = get_textptr_for_textID(intro_char_table[do_not_play_intro_movie].text1);
    proc_7F0AE98C(&iStack256,&iStack252,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
    iVar13 = iStack252;
    if (iStack252 < 0) {
      iVar13 = iStack252 + 1;
    }
    iStack244 = 0x13b - (iVar13 >> 1);
    iStack248 = 0x6c;
    DL = microcode_constructor_related_to_menus
                   (DL_00,(longlong)iStack244,0x6c,(longlong)(iStack244 + iStack252 + 1),
                    iStack256 + 0x6d,0);
    sVar3 = get_video2_settings_txtClipW();
    sVar4 = get_video2_settings_txtClipH();
    if (false) {
      fVar15 = ROUND(fVar14);
    }
    else {
      fVar15 = FLOOR(fVar14);
    }
    uVar16 = (uint)fVar15;
    if (true) {
      if ((int)uVar16 < 0) goto LAB_7f01a0d0;
    }
    else {
      if (false) {
        fVar15 = ROUND(fVar14 - 2147483648.00000000);
      }
      else {
        fVar15 = FLOOR(fVar14 - 2147483648.00000000);
      }
      if (false) {
LAB_7f01a0d0:
        uVar16 = 0xffffffff;
      }
      else {
        uVar16 = (int)fVar15 | 0x80000000;
      }
    }
    DL_00 = en_text_write_stuff(DL,&iStack244,&iStack248,pbVar2,(int)ptrSecondFontTable,
                                (int)ptrFirstFontTable,uVar16 | 0xffffff00,(int)sVar3,(int)sVar4,0,0
                               );
  }
  if (false) {
    fVar15 = ROUND(fVar14);
  }
  else {
    fVar15 = FLOOR(fVar14);
  }
  uVar16 = (uint)fVar15;
  if (true) {
    if (-1 < (int)uVar16) goto LAB_7f01a1b0;
  }
  else {
    if (false) {
      fVar14 = ROUND(fVar14 - 2147483648.00000000);
    }
    else {
      fVar14 = FLOOR(fVar14 - 2147483648.00000000);
    }
    if (true) {
      uVar16 = (int)fVar14 | 0x80000000;
      goto LAB_7f01a1b0;
    }
  }
  uVar16 = 0xffffffff;
LAB_7f01a1b0:
  pbVar2 = get_textptr_for_textID(intro_char_table[do_not_play_intro_movie].text2);
  proc_7F0AE98C(&iStack256,&iStack252,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  iVar13 = iStack252;
  if (iStack252 < 0) {
    iVar13 = iStack252 + 1;
  }
  iStack244 = 0x13b - (iVar13 >> 1);
  iStack248 = 0x98;
  DL = microcode_constructor_related_to_menus
                 (DL_00,(longlong)iStack244,0x98,(longlong)(iStack244 + iStack252 + 1),
                  iStack256 + 0x99,0);
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = en_text_write_stuff(DL,&iStack244,&iStack248,pbVar2,(int)ptrSecondFontTable,
                              (int)ptrFirstFontTable,uVar16 | 0xffffff00,(int)sVar3,(int)sVar4,0,0);
  pbVar2 = get_textptr_for_textID(intro_char_table[do_not_play_intro_movie].text3);
  proc_7F0AE98C(&iStack256,&iStack252,pbVar2,(int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
  iVar13 = iStack252;
  if (iStack252 < 0) {
    iVar13 = iStack252 + 1;
  }
  iStack244 = 0x13b - (iVar13 >> 1);
  iStack248 = 0xae;
  DL = microcode_constructor_related_to_menus
                 (DL_00,(longlong)iStack244,0xae,(longlong)(iStack244 + iStack252 + 1),
                  iStack256 + 0xaf,0);
  sVar3 = get_video2_settings_txtClipW();
  sVar4 = get_video2_settings_txtClipH();
  DL_00 = en_text_write_stuff(DL,&iStack244,&iStack248,pbVar2,(int)ptrSecondFontTable,
                              (int)ptrFirstFontTable,uVar16 | 0xffffff00,(int)sVar3,(int)sVar4,0,0);
  return DL_00;
}



void init_menu19_spectrum(void)

{
  ulonglong uVar1;
  byte bVar2;
  
  bVar2 = 0;
  uVar1 = get_controller_buttons_held('\x02',L_CBUTTONS);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_held('\x02',R_CBUTTONS);
    if (uVar1 == 0) {
      uVar1 = get_controller_buttons_held('\x02',U_CBUTTONS);
      if (uVar1 == 0) {
        uVar1 = get_controller_buttons_held('\x02',D_CBUTTONS);
        if (uVar1 == 0) {
          uVar1 = get_controller_buttons_held('\x02',L_JPAD);
          if (uVar1 == 0) {
            uVar1 = get_controller_buttons_held('\x02',R_JPAD);
            if (uVar1 == 0) {
              uVar1 = get_controller_buttons_held('\x02',U_JPAD);
              if (uVar1 == 0) {
                uVar1 = get_controller_buttons_held('\x02',D_JPAD);
                if (uVar1 != 0) {
                  bVar2 = 7;
                }
              }
              else {
                bVar2 = 6;
              }
            }
            else {
              bVar2 = 5;
            }
          }
          else {
            bVar2 = 4;
          }
        }
        else {
          bVar2 = 3;
        }
      }
      else {
        bVar2 = 2;
      }
    }
    else {
      bVar2 = 1;
    }
  }
  init_spectrum_game(bVar2);
  return;
}



void update_menu19_spectrum(void)

{
  return;
}



void interface_menu19_spectrum(undefined8 param_1,undefined8 param_2)

{
  video_related_1F(60.00000000);
  video_related_21((f32)menu19_aspect);
  set_page_height(100.00000000,(f32)menu19_pageheight);
  set_video2_settings_offset_24(0);
  run_spectrum_game();
  return;
}



undefined4 * constructor_menu19_spectrum(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = insert_imageDL(param_1);
  *puVar1 = 0xba001402;
  puVar1[5] = 0x204;
  puVar1[4] = 0xb6000000;
  puVar1[7] = 0xfffcf87c;
  puVar1[2] = 0xb900031d;
  puVar1[3] = 0x552048;
  puVar1[6] = 0xfcffffff;
  puVar1[8] = 0xba000c02;
  puVar1[1] = 0;
  puVar1[9] = 0;
  puVar1[10] = 0xfd500000;
  puVar1[0xb] = 0x8002baf0;
  puVar1[0xd] = 0x7000000;
  puVar1[0xc] = 0xf5000300;
  puVar1[0xe] = 0xe6000000;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0xf0000ff0;
  puVar1[0x11] = 0x701cff0;
  puVar1[0x12] = 0xe7000000;
  puVar1[0x13] = 0;
  puVar1[0x15] = 0x8000;
  puVar1[0x14] = 0xba000e02;
  puVar1 = spectrum_draw_screen(puVar1 + 0x16);
  return puVar1;
}



// WARNING: Instruction at (ram,0x7f01a5e8) overlaps instruction at (ram,0x7f01a5e4)
// 

void set_menu_to_mode(MENU menu,u32 mode)

{
  if ((menu == MENU_RUN_STAGE) || (menu == MENU_SPECTRUM_EMU)) {
    is_emulating_spectrum = TRUE;
  }
  if (mode == 0) {
    maybe_prev_menu = menu;
    return;
  }
  menu_update = menu;
  return;
}



MENU get_currentmenu(void)

{
  return current_menu;
}



void menu_init(undefined8 param_1,undefined8 param_2)

{
  MENU MVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  undefined8 extraout_a1_03;
  undefined8 extraout_a1_04;
  undefined8 extraout_a1_05;
  undefined8 extraout_a1_06;
  undefined8 extraout_a1_07;
  undefined8 extraout_a1_08;
  undefined8 extraout_a1_09;
  undefined8 extraout_a1_10;
  undefined8 extraout_a1_11;
  undefined8 extraout_a1_12;
  undefined8 extraout_a1_13;
  undefined8 extraout_a1_14;
  undefined8 extraout_a1_15;
  undefined8 extraout_a1_16;
  undefined8 extraout_a1_17;
  undefined8 extraout_a1_18;
  undefined8 extraout_a1_19;
  undefined8 extraout_a1_20;
  undefined8 extraout_a1_21;
  undefined8 extraout_a1_22;
  undefined8 extraout_a1_23;
  undefined8 extraout_a1_24;
  undefined8 extraout_a1_25;
  undefined8 extraout_a1_26;
  undefined8 extraout_a1_27;
  undefined8 extraout_a1_28;
  undefined8 extraout_a1_29;
  undefined8 extraout_a1_30;
  undefined8 extraout_a1_31;
  undefined8 extraout_a1_32;
  undefined8 extraout_a1_33;
  undefined8 extraout_a1_34;
  undefined8 extraout_a1_35;
  undefined8 extraout_a1_36;
  undefined8 extraout_a1_37;
  undefined8 extraout_a1_38;
  undefined8 extraout_a1_39;
  undefined8 extraout_a1_40;
  undefined8 extraout_a1_41;
  undefined8 extraout_a1_42;
  undefined8 extraout_a1_43;
  undefined8 extraout_a1_44;
  undefined8 extraout_a1_45;
  undefined8 extraout_a1_46;
  undefined8 extraout_a1_47;
  undefined8 extraout_a1_48;
  undefined8 extraout_a1_49;
  undefined8 extraout_a1_50;
  undefined8 uVar4;
  
  if (current_menu == MENU_SWITCH_SCREENS) {
    if (spectrum_related_flag == FALSE) {
      if ((is_emulating_spectrum != FALSE) &&
         (puVar2 = (undefined1 *)get_video_settings2_frameb(), puVar2 == cfb_16_a)) {
        screen_size = SCREEN_SIZE_320x240;
        is_emulating_spectrum = FALSE;
      }
    }
    else {
      puVar2 = (undefined1 *)get_video_settings2_frameb();
      if (puVar2 == cfb_16_b) {
        screen_size = SCREEN_SIZE_440x330;
        spectrum_related_flag = FALSE;
      }
    }
  }
  if (screen_size == SCREEN_SIZE_320x240) {
    video_related_21((f32)flt_80051B48);
    set_video2_text_clip_size(0x140,0xf0);
    set_video2_settings_offset_18_1A(0x140,0xf0);
    set_cur_player_screen_size(0x140,0xf0);
    set_video2_width_height(0x140,0xf0);
    set_cur_player_viewport_size(0,0);
    set_video2_ulx_uly(0,0);
    uVar4 = extraout_a1_00;
  }
  else {
    puVar2 = (undefined1 *)get_video_settings2_frameb();
    if (puVar2 == cfb_16_b) {
      set_video_settings2_frameb((int)ptr_menu_videobuffer);
    }
    video_related_21((f32)flt_80051B44);
    set_video2_text_clip_size(0x1b8,0x14a);
    set_video2_settings_offset_18_1A(0x1b8,0x14a);
    set_cur_player_screen_size(0x1b8,0x14a);
    set_video2_width_height(0x1b8,0x14a);
    set_cur_player_viewport_size(0,0);
    set_video2_ulx_uly(0,0);
    uVar4 = extraout_a1;
  }
  if (((-1 < (int)menu_update) || (-1 < (int)maybe_prev_menu)) &&
     (current_menu != MENU_SWITCH_SCREENS)) {
    if (true) {
      switch(current_menu) {
      case MENU_LEGAL_SCREEN:
        update_menu00_legalscreen();
        uVar4 = extraout_a1_01;
        break;
      case MENU_NINTENDO_LOGO:
        update_menu01_nintendo();
        uVar4 = extraout_a1_02;
        break;
      case MENU_RAREWARE_LOGO:
        update_menu02_rareware();
        uVar4 = extraout_a1_03;
        break;
      case MENU_EYE_INTRO:
        update_menu_03_eyeintro();
        uVar4 = extraout_a1_04;
        break;
      case MENU_GOLDENEYE_LOGO:
        update_menu04_goldeneyelogo();
        uVar4 = extraout_a1_05;
        break;
      case MENU_FILE_SELECT:
        update_menu05_filesel();
        uVar4 = extraout_a1_06;
        break;
      case MENU_MODE_SELECT:
        update_menu06_modesel();
        uVar4 = extraout_a1_07;
        break;
      case MENU_MISSION_SELECT:
        update_menu07_missionsel();
        uVar4 = extraout_a1_08;
        break;
      case MENU_DIFFICULTY:
        update_menu08_difficulty();
        uVar4 = extraout_a1_09;
        break;
      case MENU_007_OPTIONS:
        update_menu09_007options();
        uVar4 = extraout_a1_10;
        break;
      case MENU_BRIEFING:
        update_menu0A_briefing();
        uVar4 = extraout_a1_11;
        break;
      case MENU_MISSION_FAILED:
        update_menu0C_missionfailed();
        uVar4 = extraout_a1_12;
        break;
      case MENU_MISSION_COMPLETE:
        update_menu0D_missioncomplete();
        uVar4 = extraout_a1_13;
        break;
      case MENU_MP_OPTIONS:
        update_menu0E_mpoptions();
        uVar4 = extraout_a1_14;
        break;
      case MENU_MP_CHAR_SELECT:
        update_menu0F_mpcharsel();
        uVar4 = extraout_a1_16;
        break;
      case MENU_MP_HANDICAP:
        update_menu10_mphandicap();
        uVar4 = extraout_a1_18;
        break;
      case MENU_MP_CONTROL_STYLE:
        update_menu11_mpcontrols();
        uVar4 = extraout_a1_19;
        break;
      case MENU_MP_STAGE_SELECT:
        update_menu12_mpstage();
        uVar4 = extraout_a1_20;
        break;
      case MENU_MP_SCENARIO_SELECT:
        update_menu13_mpscenario();
        uVar4 = extraout_a1_15;
        break;
      case MENU_MP_TEAMS:
        update_menu14_mpteams();
        uVar4 = extraout_a1_17;
        break;
      case MENU_CHEAT:
        update_menu15_cheat();
        uVar4 = extraout_a1_21;
        break;
      case MENU_NO_CONTROLLERS:
        update_menu16_nocontrollers();
        uVar4 = extraout_a1_22;
        break;
      case MENU_DISPLAY_CAST:
        update_menu18_displaycast();
        uVar4 = extraout_a1_23;
        break;
      case MENU_SPECTRUM_EMU:
        update_menu19_spectrum();
        uVar4 = extraout_a1_24;
      }
    }
    if (-1 < (int)menu_update) {
      current_menu = MENU_SWITCH_SCREENS;
      reset_menutimer();
      uVar4 = extraout_a1_25;
    }
  }
  MVar1 = maybe_prev_menu;
  if (true) {
    current_menu = maybe_prev_menu;
    maybe_prev_menu = ~MENU_LEGAL_SCREEN;
    if (true) {
      switch(MVar1) {
      case MENU_LEGAL_SCREEN:
        init_menu00_legalscreen();
        uVar4 = extraout_a1_26;
        break;
      case MENU_NINTENDO_LOGO:
        init_menu01_nintendo();
        uVar4 = extraout_a1_27;
        break;
      case MENU_RAREWARE_LOGO:
        init_menu02_rareware();
        uVar4 = extraout_a1_28;
        break;
      case MENU_EYE_INTRO:
        init_menu03_eyeintro();
        uVar4 = extraout_a1_29;
        break;
      case MENU_GOLDENEYE_LOGO:
        init_menu04_goldeneyelogo();
        uVar4 = extraout_a1_30;
        break;
      case MENU_FILE_SELECT:
        init_menu05_filesel();
        uVar4 = extraout_a1_31;
        break;
      case MENU_MODE_SELECT:
        init_menu06_modesel();
        uVar4 = extraout_a1_32;
        break;
      case MENU_MISSION_SELECT:
        init_menu07_missionsel();
        uVar4 = extraout_a1_33;
        break;
      case MENU_DIFFICULTY:
        init_menu08_difficulty();
        uVar4 = extraout_a1_34;
        break;
      case MENU_007_OPTIONS:
        init_menu09_007options();
        uVar4 = extraout_a1_35;
        break;
      case MENU_BRIEFING:
        init_menu0A_briefing();
        uVar4 = extraout_a1_36;
        break;
      case MENU_RUN_STAGE:
        init_menu0B_runstage();
        uVar4 = extraout_a1_37;
        break;
      case MENU_MISSION_FAILED:
        init_menu0C_missionfailed();
        uVar4 = extraout_a1_38;
        break;
      case MENU_MISSION_COMPLETE:
        init_menu0D_missioncomplete();
        uVar4 = extraout_a1_39;
        break;
      case MENU_MP_OPTIONS:
        init_menu0E_mpoptions();
        uVar4 = extraout_a1_40;
        break;
      case MENU_MP_CHAR_SELECT:
        init_menu0f_mpcharsel();
        uVar4 = extraout_a1_42;
        break;
      case MENU_MP_HANDICAP:
        init_menu10_mphandicap();
        uVar4 = extraout_a1_44;
        break;
      case MENU_MP_CONTROL_STYLE:
        init_menu11_mpcontrol();
        uVar4 = extraout_a1_45;
        break;
      case MENU_MP_STAGE_SELECT:
        init_menu12_mpstage();
        uVar4 = extraout_a1_46;
        break;
      case MENU_MP_SCENARIO_SELECT:
        init_menu13_mpscenariosel();
        uVar4 = extraout_a1_41;
        break;
      case MENU_MP_TEAMS:
        init_menu14_mpteamsel();
        uVar4 = extraout_a1_43;
        break;
      case MENU_CHEAT:
        init_menu15_cheat();
        uVar4 = extraout_a1_47;
        break;
      case MENU_NO_CONTROLLERS:
        init_menu16_nocontroller();
        uVar4 = extraout_a1_48;
        break;
      case MENU_DISPLAY_CAST:
        init_menu18_displaycast();
        uVar4 = extraout_a1_49;
        break;
      case MENU_SPECTRUM_EMU:
        init_menu19_spectrum();
        uVar4 = extraout_a1_50;
      }
    }
  }
  switch(current_menu) {
  case MENU_LEGAL_SCREEN:
    interface_menu00_legalscreen(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_NINTENDO_LOGO:
    interface_menu01_nintendo(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_RAREWARE_LOGO:
    interface_menu02_rareware();
    break;
  case MENU_EYE_INTRO:
    interface_menu03_eyeintro();
    break;
  case MENU_GOLDENEYE_LOGO:
    interface_menu04_goldeneyelogo(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_FILE_SELECT:
    interface_menu05_filesel();
    break;
  case MENU_MODE_SELECT:
    interface_menu06_modesel();
    break;
  case MENU_MISSION_SELECT:
    interface_menu07_missionsel(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_DIFFICULTY:
    interface_menu08_difficulty();
    break;
  case MENU_007_OPTIONS:
    interface_menu09_007options(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_BRIEFING:
    interface_menu0A_briefing(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_RUN_STAGE:
    iVar3 = interface_menu0B_runstage();
    if (iVar3 == 0) {
      if (gamemode == GAMEMODE_MULTI) {
        set_menu_to_mode(MENU_MP_OPTIONS,1);
      }
      else {
        if (selected_stage == LEVELID_CUBA) {
          do_extended_cast_display(TRUE);
          set_menu_to_mode(MENU_DISPLAY_CAST,1);
        }
        else {
          set_menu_to_mode(MENU_MISSION_FAILED,1);
        }
      }
    }
    else {
      set_menu_to_mode(MENU_LEGAL_SCREEN,1);
    }
    break;
  case MENU_MISSION_FAILED:
    interface_menu0C_missionfailed(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_MISSION_COMPLETE:
    interface_menu0D_missioncomplete(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_MP_OPTIONS:
    interface_menu0E_mpoptions(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_MP_CHAR_SELECT:
    interface_menu0F_mpcharsel();
    break;
  case MENU_MP_HANDICAP:
    interface_menu10_mphandicap();
    break;
  case MENU_MP_CONTROL_STYLE:
    interface_menu11_mpcontrols();
    break;
  case MENU_MP_STAGE_SELECT:
    interface_menu12_mpstage(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_MP_SCENARIO_SELECT:
    interface_menu13_mpscenario(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_MP_TEAMS:
    interface_menu14_mpteams(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_CHEAT:
    interface_menu15_cheat(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_NO_CONTROLLERS:
    interface_menu16_nocontrollers();
    break;
  case MENU_SWITCH_SCREENS:
    interface_menu17_switchscreens(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_DISPLAY_CAST:
    interface_menu18_displaycast(ZEXT48(&current_menu),uVar4);
    break;
  case MENU_SPECTRUM_EMU:
    interface_menu19_spectrum(ZEXT48(&current_menu),uVar4);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

longlong menu_jump_constructor_handler(void)

{
  longlong in_v0;
  int iVar1;
  uint *puVar2;
  undefined4 *_DL;
  longlong in_a0;
  
  if (true) {
    _DL = (undefined4 *)in_a0;
    switch(current_menu) {
    case MENU_LEGAL_SCREEN:
      constructor_menu00_legalscreen(_DL);
      in_a0 = in_v0;
      break;
    case MENU_NINTENDO_LOGO:
      _DL = constructor_menu01_nintendo(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_RAREWARE_LOGO:
      _DL = constructor_menu02_rareware(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_EYE_INTRO:
      constructor_menu03_eyeintro(in_a0);
      in_a0 = in_v0;
      break;
    case MENU_GOLDENEYE_LOGO:
      _DL = constructor_menu04_goldeneyelogo(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_FILE_SELECT:
      puVar2 = constructor_menu05_filesel(_DL);
      in_a0 = (longlong)(int)puVar2;
      break;
    case MENU_MODE_SELECT:
      iVar1 = constructor_menu06_modesel(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MISSION_SELECT:
      iVar1 = constructor_menu07_missionsel(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_DIFFICULTY:
      iVar1 = constructor_menu08_difficulty(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_007_OPTIONS:
      iVar1 = constructor_menu09_007options(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_BRIEFING:
      iVar1 = constructor_menu0A_briefing(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MISSION_FAILED:
      iVar1 = constructor_menu0C_missionfailed(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MISSION_COMPLETE:
      in_a0 = constructor_menu0D_missioncomplete();
      break;
    case MENU_MP_OPTIONS:
      iVar1 = constructor_menu0E_mpoptions(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MP_CHAR_SELECT:
      _DL = constructor_menu0F_mpcharsel(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_MP_HANDICAP:
      _DL = constructor_menu10_mphandicap(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_MP_CONTROL_STYLE:
      _DL = constructor_menu11_mpcontrol(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_MP_STAGE_SELECT:
      iVar1 = constructor_menu12_mpstage(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MP_SCENARIO_SELECT:
      iVar1 = constructor_menu13_mpscenario(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_MP_TEAMS:
      _DL = constructor_menu14_mpteams(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_CHEAT:
      iVar1 = constructor_menu15_cheat(_DL);
      in_a0 = (longlong)iVar1;
      break;
    case MENU_NO_CONTROLLERS:
      puVar2 = constructor_menu16_nocontrollers(_DL);
      in_a0 = (longlong)(int)puVar2;
      break;
    case MENU_SWITCH_SCREENS:
      _DL = constructor_menu17_switchscreens(_DL);
      in_a0 = (longlong)(int)_DL;
      break;
    case MENU_DISPLAY_CAST:
      puVar2 = constructor_menu18_displaycast(_DL);
      in_a0 = (longlong)(int)puVar2;
      break;
    case MENU_SPECTRUM_EMU:
      _DL = constructor_menu19_spectrum(_DL);
      in_a0 = (longlong)(int)_DL;
    }
  }
  return in_a0;
}



void proc_7F01B0E0(ushort *param_1,byte *param_2)

{
  byte bVar1;
  byte bVar2;
  uint uVar3;
  int iVar4;
  ushort *puVar5;
  
  puVar5 = param_1 + 5;
  iVar4 = (uint)*param_1 * (uint)param_1[1];
  bVar1 = *(byte *)puVar5;
  while( true ) {
    bVar2 = *(byte *)((int)puVar5 + 1);
    puVar5 = puVar5 + 1;
    uVar3 = (uint)bVar1;
    iVar4 -= uVar3;
    do {
      uVar3 -= 1;
      *param_2 = bVar2;
      param_2 = param_2 + 1;
    } while (0 < (int)uVar3);
    if (iVar4 < 1) break;
    bVar1 = *(byte *)puVar5;
  }
  return;
}



void proc_7F01B134(ushort *param_1,ushort *param_2)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  uint uVar4;
  int iVar5;
  ushort *puVar6;
  
  iVar5 = (uint)*param_1 * (uint)param_1[1];
  bVar1 = *(byte *)(param_1 + 6);
  puVar6 = param_1 + 5;
  while( true ) {
    bVar2 = *(byte *)((int)puVar6 + 3);
    bVar3 = *(byte *)((int)puVar6 + 1);
    uVar4 = (uint)*(byte *)puVar6;
    iVar5 -= uVar4;
    do {
      uVar4 -= 1;
      *param_2 = (ushort)(((int)(uint)bVar2 >> 3) << 0xb) | (ushort)(((int)(uint)bVar1 >> 3) << 6) |
                 (ushort)(((int)(uint)bVar3 >> 3) << 1) | 1;
      param_2 = param_2 + 1;
    } while (0 < (int)uVar4);
    if (iVar5 < 1) break;
    bVar1 = *(byte *)(puVar6 + 3);
    puVar6 = puVar6 + 2;
  }
  return;
}



void proc_7F01B1C8(ushort *param_1,byte *param_2)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  uint uVar4;
  int iVar5;
  ushort *puVar6;
  
  puVar6 = param_1 + 5;
  iVar5 = (uint)*param_1 * (uint)param_1[1];
  bVar1 = *(byte *)puVar6;
  while( true ) {
    bVar2 = *(byte *)((int)puVar6 + 1);
    bVar3 = *(byte *)(puVar6 + 1);
    uVar4 = (uint)bVar1;
    iVar5 -= uVar4;
    bVar1 = *(byte *)((int)puVar6 + 3);
    puVar6 = puVar6 + 2;
    do {
      uVar4 -= 1;
      *param_2 = bVar1;
      param_2[1] = bVar3;
      param_2[2] = bVar2;
      param_2[3] = 0xff;
      param_2 = param_2 + 4;
    } while (0 < (int)uVar4);
    if (iVar5 < 1) break;
    bVar1 = *(byte *)puVar6;
  }
  return;
}



undefined4 *
proc_7F01B240(undefined4 *param_1,int param_2,longlong param_3,int *param_4,int *param_5)

{
  float fVar1;
  float fVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  
  fVar2 = flt_80051CF0;
  flt_8002BB00 = (float)*param_4;
  flt_8002BB04 = (float)param_4[1];
  flt_8002BB0C = (float)*param_5;
  flt_8002BB10 = (float)param_5[1];
  flt_8002BB14 = (float)param_5[2];
  flt_8002BB08 = (float)param_4[2];
  fVar12 = flt_8002BB10 - flt_8002BB04;
  fVar13 = flt_8002BB14 - flt_8002BB08;
  fVar11 = flt_8002BB0C - flt_8002BB00;
  iVar5 = 1;
  iVar3 = 0;
  do {
    iVar4 = iVar5;
    fVar10 = (float)iVar3;
    *param_1 = 0xfd900000;
    param_1[1] = param_2;
    param_1[3] = 0x7080200;
    param_1[2] = 0xf5900000;
    param_1[4] = 0xe6000000;
    param_1[5] = 0;
    param_1[7] = 0x70db026;
    param_1[6] = 0xf3000000;
    param_1[9] = 0;
    param_1[8] = 0xe7000000;
    param_1[0xb] = 0x80200;
    param_1[10] = 0xf5886e00;
    param_1[0xc] = 0xf2000000;
    param_1[0xd] = 0x6dc000;
    fVar6 = (fVar11 * fVar10) / fVar2 + flt_8002BB00;
    param_1[0xe] = 0xfa000000;
    if (false) {
      fVar1 = ROUND(fVar6);
    }
    else {
      fVar1 = FLOOR(fVar6);
    }
    uVar7 = (uint)fVar1;
    if (false) {
      if (false) {
        fVar6 = ROUND(fVar6 - 2147483648.00000000);
      }
      else {
        fVar6 = FLOOR(fVar6 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01b454;
      uVar7 = (int)fVar6 | 0x80000000;
    }
    else {
      if ((int)uVar7 < 0) {
LAB_7f01b454:
        uVar7 = 0xffffffff;
      }
    }
    fVar6 = flt_8002BB04 + (fVar12 * fVar10) / fVar2;
    if (false) {
      fVar1 = ROUND(fVar6);
    }
    else {
      fVar1 = FLOOR(fVar6);
    }
    uVar8 = (uint)fVar1;
    if (false) {
      if (false) {
        fVar6 = ROUND(fVar6 - 2147483648.00000000);
      }
      else {
        fVar6 = FLOOR(fVar6 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01b4ec;
      uVar8 = (int)fVar6 | 0x80000000;
    }
    else {
      if ((int)uVar8 < 0) {
LAB_7f01b4ec:
        uVar8 = 0xffffffff;
      }
    }
    fVar6 = flt_8002BB08 + (fVar13 * fVar10) / fVar2;
    if (false) {
      fVar10 = ROUND(fVar6);
    }
    else {
      fVar10 = FLOOR(fVar6);
    }
    uVar9 = (uint)fVar10;
    if (false) {
      if (false) {
        fVar6 = ROUND(fVar6 - 2147483648.00000000);
      }
      else {
        fVar6 = FLOOR(fVar6 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01b588;
      uVar9 = (int)fVar6 | 0x80000000;
    }
    else {
      if ((int)uVar9 < 0) {
LAB_7f01b588:
        uVar9 = 0xffffffff;
      }
    }
    param_1[0xf] = uVar7 << 0x18 | (uVar8 & 0xff) << 0x10 | (uVar9 & 0xff) << 8 | 0xff;
    if (param_3 < 0) {
      param_1[0x11] = (iVar3 + 0x10U & 0x3ff) << 2;
      param_1[0x10] = (iVar3 + 0x11) * 4 - 1U & 0xfff | 0xe46df000;
      param_1[0x13] = (uint)param_3 * -0x200000;
      param_1[0x12] = 0xb4000000;
      param_1[0x15] = 0x4000400;
      param_1[0x14] = 0xb3000000;
    }
    else {
      param_1[0x10] = (iVar3 + 0x11) * 4 - 1U & 0xfff | 0xe46df000;
      param_1[0x11] = ((uint)param_3 & 0x3ff) << 0xe | (iVar3 + 0x10) * 4 & 0xfffU;
      param_1[0x13] = 0;
      param_1[0x12] = 0xb4000000;
      param_1[0x15] = 0x4000400;
      param_1[0x14] = 0xb3000000;
    }
    param_1 = param_1 + 0x16;
    iVar5 = iVar4 + 1;
    param_2 += 0x1b8;
    iVar3 = iVar4;
    if (299 < iVar5) {
      return param_1;
    }
  } while( true );
}



undefined4 * proc_7F01B6E0(undefined4 *param_1,int param_2,int param_3)

{
  float fVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  
  dword_8002BB18 = (float)param_3;
  iVar4 = 1;
  iVar2 = 0;
  dword_8002BB24 = dword_8002BB18;
  dword_8002BB28 = dword_8002BB18;
  dword_8002BB2C = dword_8002BB18;
  do {
    iVar3 = iVar4;
    fVar5 = (float)iVar2;
    *param_1 = 0xfd100000;
    param_1[1] = param_2;
    param_1[3] = 0x7080200;
    param_1[2] = 0xf5100000;
    param_1[4] = 0xe6000000;
    param_1[5] = 0;
    param_1[7] = 0x713f01a;
    param_1[6] = 0xf3000000;
    param_1[9] = 0;
    param_1[8] = 0xe7000000;
    param_1[0xb] = 0x80200;
    param_1[10] = 0xf510a000;
    param_1[0xc] = 0xf2000000;
    param_1[0xd] = 0x4fc000;
    fVar6 = ((dword_8002BB18 - dword_8002BB18) * fVar5) / 217.00000000 + dword_8002BB18;
    param_1[0xe] = 0xfa000000;
    if (false) {
      fVar1 = ROUND(fVar6);
    }
    else {
      fVar1 = FLOOR(fVar6);
    }
    uVar7 = (uint)fVar1;
    param_2 += 0x280;
    if (false) {
      if (false) {
        fVar6 = ROUND(fVar6 - 2147483648.00000000);
      }
      else {
        fVar6 = FLOOR(fVar6 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01b8cc;
      uVar7 = (int)fVar6 | 0x80000000;
    }
    else {
      if ((int)uVar7 < 0) {
LAB_7f01b8cc:
        uVar7 = 0xffffffff;
      }
    }
    fVar6 = dword_8002BB18 + ((dword_8002BB18 - dword_8002BB18) * fVar5) / 217.00000000;
    if (false) {
      fVar1 = ROUND(fVar6);
    }
    else {
      fVar1 = FLOOR(fVar6);
    }
    uVar8 = (uint)fVar1;
    if (false) {
      if (false) {
        fVar6 = ROUND(fVar6 - 2147483648.00000000);
      }
      else {
        fVar6 = FLOOR(fVar6 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01b964;
      uVar8 = (int)fVar6 | 0x80000000;
    }
    else {
      if ((int)uVar8 < 0) {
LAB_7f01b964:
        uVar8 = 0xffffffff;
      }
    }
    fVar5 = dword_8002BB18 + ((dword_8002BB18 - dword_8002BB18) * fVar5) / 217.00000000;
    if (false) {
      fVar6 = ROUND(fVar5);
    }
    else {
      fVar6 = FLOOR(fVar5);
    }
    uVar9 = (uint)fVar6;
    if (false) {
      if (false) {
        fVar5 = ROUND(fVar5 - 2147483648.00000000);
      }
      else {
        fVar5 = FLOOR(fVar5 - 2147483648.00000000);
      }
      if (false) goto LAB_7f01ba00;
      uVar9 = (int)fVar5 | 0x80000000;
    }
    else {
      if ((int)uVar9 < 0) {
LAB_7f01ba00:
        uVar9 = 0xffffffff;
      }
    }
    param_1[0xf] = uVar7 << 0x18 | (uVar8 & 0xff) << 0x10 | (uVar9 & 0xff) << 8 | 0xff;
    param_1[0x11] = (iVar2 + 0xcU & 0x3ff) << 2;
    param_1[0x10] = (iVar2 + 0xd) * 4 - 1U & 0xfff | 0xe44ff000;
    iVar4 = iVar3 + 1;
    param_1[0x13] = 0;
    param_1[0x12] = 0xb4000000;
    param_1[0x15] = 0x4000400;
    param_1[0x14] = 0xb3000000;
    param_1 = param_1 + 0x16;
    iVar2 = iVar3;
    if (0xd9 < iVar4) {
      dword_8002BB1C = dword_8002BB18;
      dword_8002BB20 = dword_8002BB18;
      return param_1;
    }
  } while( true );
}



void proc_7F01BAE0(short *param_1,int param_2)

{
  float fVar1;
  short sVar2;
  short *psVar3;
  int iVar4;
  short sVar5;
  float fVar6;
  float fVar7;
  undefined uVar8;
  float __x;
  
  fVar1 = flt_80051D00;
  iVar4 = 0;
  if (-1 < param_2) {
    do {
      __x = ((float)iVar4 * fVar1) / (float)param_2;
      fVar6 = sinf(__x);
      fVar7 = cosf(__x);
      sVar5 = (short)(int)(fVar6 * 64.00000000);
      *param_1 = sVar5;
      param_1[2] = 0;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0;
      *(undefined *)(param_1 + 6) = 0xff;
      *(undefined *)((int)param_1 + 0xd) = 0xff;
      *(undefined *)(param_1 + 7) = 0xff;
      sVar2 = (short)(int)(fVar7 * -64.00000000);
      param_1[1] = sVar2;
      fVar6 = cosf(__x);
      fVar6 = 143.00000000 - fVar6 * -111.00000000;
      if (false) {
        fVar7 = ROUND(fVar6);
      }
      else {
        fVar7 = FLOOR(fVar6);
      }
      uVar8 = (undefined)(int)fVar7;
      if (false) {
        if (false) {
          fVar6 = ROUND(fVar6 - 2147483648.00000000);
        }
        else {
          fVar6 = FLOOR(fVar6 - 2147483648.00000000);
        }
        if (false) goto LAB_7f01bc50;
        uVar8 = (undefined)(int)fVar6;
      }
      else {
        if ((int)fVar7 < 0) {
LAB_7f01bc50:
          uVar8 = 0xff;
        }
      }
      *(undefined *)(param_1 + 6) = uVar8;
      fVar6 = cosf(__x);
      fVar6 = 143.00000000 - fVar6 * -111.00000000;
      if (false) {
        fVar7 = ROUND(fVar6);
      }
      else {
        fVar7 = FLOOR(fVar6);
      }
      uVar8 = (undefined)(int)fVar7;
      if (false) {
        if (false) {
          fVar6 = ROUND(fVar6 - 2147483648.00000000);
        }
        else {
          fVar6 = FLOOR(fVar6 - 2147483648.00000000);
        }
        if (false) goto LAB_7f01bce8;
        uVar8 = (undefined)(int)fVar6;
      }
      else {
        if ((int)fVar7 < 0) {
LAB_7f01bce8:
          uVar8 = 0xff;
        }
      }
      *(undefined *)((int)param_1 + 0xd) = uVar8;
      fVar6 = cosf(__x);
      fVar6 = 143.00000000 - fVar6 * -111.00000000;
      if (false) {
        fVar7 = ROUND(fVar6);
      }
      else {
        fVar7 = FLOOR(fVar6);
      }
      uVar8 = (undefined)(int)fVar7;
      if (false) {
        if (false) {
          fVar6 = ROUND(fVar6 - 2147483648.00000000);
        }
        else {
          fVar6 = FLOOR(fVar6 - 2147483648.00000000);
        }
        if (false) goto LAB_7f01bd80;
        uVar8 = (undefined)(int)fVar6;
      }
      else {
        if ((int)fVar7 < 0) {
LAB_7f01bd80:
          uVar8 = 0xff;
        }
      }
      *(undefined *)(param_1 + 7) = uVar8;
      *(undefined *)((int)param_1 + 0xf) = 0;
      psVar3 = param_1 + 8;
      if ((iVar4 != 0) && (iVar4 < param_2)) {
        *psVar3 = -sVar5;
        param_1[9] = sVar2;
        param_1[10] = 0;
        param_1[0xb] = 0;
        param_1[0xc] = 0;
        param_1[0xd] = 0;
        *(undefined *)(param_1 + 0xe) = 0xff;
        *(undefined *)((int)param_1 + 0x1d) = 0xff;
        *(undefined *)(param_1 + 0xf) = 0xff;
        fVar6 = cosf(__x);
        fVar6 = 143.00000000 - fVar6 * -111.00000000;
        if (false) {
          fVar7 = ROUND(fVar6);
        }
        else {
          fVar7 = FLOOR(fVar6);
        }
        uVar8 = (undefined)(int)fVar7;
        if (false) {
          if (false) {
            fVar6 = ROUND(fVar6 - 2147483648.00000000);
          }
          else {
            fVar6 = FLOOR(fVar6 - 2147483648.00000000);
          }
          if (false) goto LAB_7f01be54;
          uVar8 = (undefined)(int)fVar6;
        }
        else {
          if ((int)fVar7 < 0) {
LAB_7f01be54:
            uVar8 = 0xff;
          }
        }
        *(undefined *)(param_1 + 0xe) = uVar8;
        fVar6 = cosf(__x);
        fVar6 = 143.00000000 - fVar6 * -111.00000000;
        if (false) {
          fVar7 = ROUND(fVar6);
        }
        else {
          fVar7 = FLOOR(fVar6);
        }
        uVar8 = (undefined)(int)fVar7;
        if (false) {
          if (false) {
            fVar6 = ROUND(fVar6 - 2147483648.00000000);
          }
          else {
            fVar6 = FLOOR(fVar6 - 2147483648.00000000);
          }
          if (false) goto LAB_7f01beec;
          uVar8 = (undefined)(int)fVar6;
        }
        else {
          if ((int)fVar7 < 0) {
LAB_7f01beec:
            uVar8 = 0xff;
          }
        }
        *(undefined *)((int)param_1 + 0x1d) = uVar8;
        fVar6 = cosf(__x);
        fVar6 = 143.00000000 - fVar6 * -111.00000000;
        if (false) {
          fVar7 = ROUND(fVar6);
        }
        else {
          fVar7 = FLOOR(fVar6);
        }
        uVar8 = (undefined)(int)fVar7;
        if (false) {
          if (false) {
            fVar6 = ROUND(fVar6 - 2147483648.00000000);
          }
          else {
            fVar6 = FLOOR(fVar6 - 2147483648.00000000);
          }
          if (false) goto LAB_7f01bf84;
          uVar8 = (undefined)(int)fVar6;
        }
        else {
          if ((int)fVar7 < 0) {
LAB_7f01bf84:
            uVar8 = 0xff;
          }
        }
        *(undefined *)(param_1 + 0xf) = uVar8;
        *(undefined *)((int)param_1 + 0x1f) = 0;
        psVar3 = param_1 + 0x10;
      }
      iVar4 += 2;
      param_1 = psVar3;
    } while (iVar4 <= param_2);
  }
  return;
}



uint * proc_7F01BFF8(uint *param_1,uint param_2,int param_3)

{
  bool bVar1;
  int iVar2;
  uint *puVar3;
  uint uVar4;
  
  bVar1 = param_3 < 0x11;
  while( true ) {
    if (bVar1) {
      uVar4 = SEXT14((char)param_3);
    }
    else {
      uVar4 = 0x10;
    }
    param_1[1] = param_2;
    *param_1 = (uVar4 - 1 & 0xf) << 0x14 | 0x4000000 | (uVar4 & 0xfff) << 4;
    param_2 += 0xe0;
    iVar2 = (int)((uVar4 - 3) * 0x1000000) >> 0x18;
    param_1 = param_1 + 2;
    do {
      puVar3 = param_1;
      uVar4 = iVar2 * 10;
      *puVar3 = 0xbf000000;
      param_1 = puVar3 + 2;
      iVar2 = (iVar2 + -1) * 0x1000000 >> 0x18;
      puVar3[1] = (uVar4 & 0xff) << 0x10 | (uVar4 + 10 & 0xff) << 8 | uVar4 + 0x14 & 0xff;
    } while (-1 < iVar2);
    param_3 += -0xe;
    if (param_3 < 3) break;
    bVar1 = param_3 < 0x11;
  }
  *param_1 = 0xb8000000;
  puVar3[3] = 0;
  return puVar3 + 4;
}



undefined4 * insert_imageDL(undefined4 *param_1)

{
  short sVar2;
  void *virtualAddress;
  u32 uVar1;
  short sVar3;
  
  param_1[1] = 0x300000;
  *param_1 = 0xba001402;
  sVar2 = get_video2_settings_txtClipW();
  param_1[2] = (int)sVar2 - 1U & 0xfff | 0xff100000;
  virtualAddress = (void *)get_video_settings2_frameb();
  uVar1 = osVirtualToPhysical(virtualAddress);
  param_1[3] = uVar1;
  param_1[4] = 0xf7000000;
  param_1[5] = 0x10001;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  param_1[6] = ((int)sVar3 - 1U & 0x3ff) << 2 | 0xf6000000 | ((int)sVar2 - 1U & 0x3ff) << 0xe;
  param_1[7] = 0;
  return param_1 + 8;
}



undefined4 * proc_7F01C1A4(Gfx *glistp)

{
  u32 uVar1;
  
  *(undefined4 *)*glistp = 0x1030040;
  uVar1 = osVirtualToPhysical(matrix_buffer_gunbarrel_0);
  *(u32 *)(*glistp + 4) = uVar1;
  *(undefined4 *)(*glistp + 8) = 0x1020040;
  uVar1 = osVirtualToPhysical((void *)(DAT_8002a7d0 * 0x40 + matrix_buffer_rarelogo_2));
  *(u32 *)(*glistp + 0xc) = uVar1;
  *(undefined4 *)(glistp + 1 + 4) = 0;
  *(undefined4 *)(glistp + 1) = 0xe7000000;
  *(undefined4 *)(glistp + 1 + 8) = 0xba001402;
  *(undefined4 *)(glistp + 1 + 0xc) = 0;
  *(undefined4 *)(glistp + 2) = 0xb900031d;
  *(undefined4 *)(glistp + 2 + 4) = 0x552048;
  *(undefined4 *)(glistp + 2 + 0xc) = 0x204;
  *(undefined4 *)(glistp + 2 + 8) = 0xb7000000;
  return (undefined4 *)(glistp + 3);
}



ulonglong die_blood_image_routine(int param_1)

{
  byte *in_v0_lo;
  byte *pbVar1;
  char cStack1;
  
  if (param_1 == 0) {
    ptr_BONDdata->ptr_red_screen_animation_block = -0x7ffd44d0;
  }
  else {
    if (param_1 == 1) {
      in_v0_lo = (byte *)ptr_BONDdata->field_11AC;
      if (in_v0_lo < &dword_8002C50C) {
        *(byte **)&ptr_BONDdata->ptr_red_screen_animation_block = in_v0_lo;
      }
    }
  }
  ptr_BONDdata->field_11B8 = 1 - ptr_BONDdata->field_11B8;
  proc_7F0BD714(0x1e00);
  *(byte **)(&ptr_BONDdata->field_11B0 + ptr_BONDdata->field_11B8) = in_v0_lo;
  proc_7F0BD714(0x1e00);
  pbVar1 = decrypt_bleeding_animation_data
                     ((char *)ptr_BONDdata->ptr_red_screen_animation_block,0x50,0x60,in_v0_lo,
                      &cStack1);
  *(byte **)&ptr_BONDdata->field_11AC = pbVar1;
  proc_7F01D16C(in_v0_lo,0x50,0x60,
                (undefined *)(&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8]);
  proc_7F01D02C((&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8],0x50,
                (&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8]);
  proc_7F01CEEC((&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8],0x50,
                (&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8]);
  proc_7F01CC94((byte *)(&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8],0x1e00,
                (byte *)(&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8]);
  return (ulonglong)((undefined *)ptr_BONDdata->field_11AC < &dword_8002C50C) ^ 1;
}



undefined4 * proc_7F01C400(undefined4 *param_1)

{
  undefined4 *puVar1;
  short sVar2;
  short sVar3;
  
  *param_1 = 0xba000e02;
  param_1[1] = 0;
  param_1[3] = 0x2000;
  param_1[2] = 0xba000c02;
  puVar1 = proc_7F01C1A4((Gfx *)(param_1 + 4));
  *puVar1 = 0xbb000001;
  puVar1[1] = 0x80008000;
  puVar1[2] = 0xb900031d;
  puVar1[3] = 0x504340;
  puVar1[4] = 0xfc119623;
  puVar1[5] = 0xff2fffff;
  puVar1[6] = 0xba000602;
  puVar1[7] = 0;
  puVar1[8] = 0xfa000000;
  puVar1[9] = 0x960000b4;
  puVar1[10] = 0xba001301;
  puVar1[0xb] = 0;
  puVar1[0xc] = 0xfd900000;
  puVar1[0xd] = (&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8] + -0x80000000;
  puVar1[0xe] = 0xf5900000;
  puVar1[0x10] = 0xe6000000;
  puVar1[0x12] = 0xf3000000;
  puVar1[0x13] = 0x777f156;
  puVar1[0xf] = 0x7080200;
  puVar1[0x14] = 0xe7000000;
  puVar1[0x17] = 0x80200;
  puVar1[0x16] = 0xf5800c00;
  puVar1[0x18] = 0xf2000000;
  puVar1[0x19] = 0x17c13c;
  puVar1[0x15] = 0;
  puVar1[0x11] = 0;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  puVar1[0x1a] = (int)sVar3 * 4 - 1U & 0xfff | 0xe4000000 | ((int)sVar2 * 4 - 1U & 0xfff) << 0xc;
  puVar1[0x1b] = 0;
  puVar1[0x1c] = 0xb4000000;
  puVar1[0x1d] = 0;
  puVar1[0x1e] = 0xb3000000;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  if (sVar3 == 0) {
    trap(0x1c00);
  }
  if ((sVar3 == -1) && (false)) {
    trap(0x1800);
  }
  puVar1[0x1f] = 0x14000 / (int)sVar3 & 0xffffU | 0x18000 / (int)sVar2 << 0x10;
  if (sVar2 == 0) {
    trap(0x1c00);
  }
  if ((sVar2 == -1) && (false)) {
    trap(0x1800);
  }
  return puVar1 + 0x20;
}



undefined4 * proc_7F01C670(undefined4 *param_1)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  int iVar5;
  
  *param_1 = 0xba000e02;
  param_1[1] = 0;
  param_1[2] = 0xba000c02;
  param_1[3] = 0x2000;
  param_1[4] = 0xba001402;
  param_1[5] = 0;
  param_1[7] = 0x204;
  param_1[6] = 0xb7000000;
  param_1[8] = 0xbb000001;
  param_1[9] = 0x80008000;
  param_1[10] = 0xb900031d;
  param_1[0xb] = 0x504340;
  param_1[0xd] = 0xff2fffff;
  param_1[0xc] = 0xfc119623;
  param_1[0xe] = 0xba000602;
  param_1[0xf] = 0;
  param_1[0x10] = 0xfa000000;
  param_1[0x11] = 0x960000b4;
  param_1[0x12] = 0xba001301;
  param_1[0x13] = 0;
  param_1[0x14] = 0xfd900000;
  param_1[0x15] = (&ptr_BONDdata->field_11B0)[ptr_BONDdata->field_11B8] + -0x80000000;
  param_1[0x16] = 0xf5900000;
  param_1[0x17] = 0x7080200;
  param_1[0x18] = 0xe6000000;
  param_1[0x19] = 0;
  param_1[0x1a] = 0xf3000000;
  param_1[0x1b] = 0x777f156;
  param_1[0x1c] = 0xe7000000;
  param_1[0x1d] = 0;
  param_1[0x1f] = 0x80200;
  param_1[0x1e] = 0xf5800c00;
  param_1[0x20] = 0xf2000000;
  param_1[0x21] = 0x17c13c;
  sVar1 = get_video2_settings_width();
  sVar2 = get_video2_settings_ulx();
  sVar3 = get_video2_settings_uly();
  sVar4 = get_video2_settings_height();
  param_1[0x22] =
       ((int)sVar4 + (int)sVar3) * 4 - 1U & 0xfff | 0xe4000000 |
       (((int)sVar2 + (int)sVar1) * 4 - 1U & 0xfff) << 0xc;
  sVar1 = get_video2_settings_ulx();
  sVar2 = get_video2_settings_uly();
  param_1[0x23] = ((int)sVar2 & 0x3ffU) << 2 | ((int)sVar1 & 0x3ffU) << 0xe;
  param_1[0x24] = 0xb4000000;
  param_1[0x25] = 0;
  param_1[0x26] = 0xb3000000;
  sVar1 = get_video2_settings_width();
  iVar5 = (int)sVar1;
  sVar1 = get_video2_settings_height();
  if (sVar1 == 0) {
    trap(0x1c00);
  }
  if ((sVar1 == -1) && (false)) {
    trap(0x1800);
  }
  param_1[0x27] = 0x14000 / (int)sVar1 & 0xffffU | 0x18000 / iVar5 << 0x10;
  param_1[0x28] = 0xe7000000;
  param_1[0x29] = 0;
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && (false)) {
    trap(0x1800);
  }
  param_1[0x2b] = 0x40;
  param_1[0x2a] = 0xba000602;
  param_1[0x2d] = 0x80000;
  param_1[0x2c] = 0xba001301;
  return param_1 + 0x2e;
}



void proc_7F01CA18(Gfx *glistp)

{
  undefined4 *puVar1;
  short sVar2;
  short sVar3;
  
  puVar1 = proc_7F01C1A4(glistp);
  *puVar1 = 0xb900031d;
  puVar1[1] = 0x504340;
  puVar1[2] = 0xfcffffff;
  puVar1[3] = 0xfffdf6fb;
  puVar1[4] = 0xfa000000;
  puVar1[5] = 0x960000b4;
  puVar1[6] = 0xba000602;
  puVar1[7] = 0;
  sVar2 = get_video2_settings_txtClipW();
  sVar3 = get_video2_settings_txtClipH();
  puVar1[8] = ((int)sVar3 & 0x3ffU) << 2 | 0xf6000000 | ((int)sVar2 & 0x3ffU) << 0xe;
  puVar1[9] = 0;
  return;
}



byte * decrypt_bleeding_animation_data
                 (char *param_1,byte param_2,uint param_3,byte *param_4,char *param_5)

{
  char cVar1;
  char cVar2;
  char cVar3;
  byte bVar5;
  uint uVar4;
  byte *pbVar6;
  byte bVar7;
  char cVar8;
  byte bVar9;
  
  cVar1 = *param_1;
  param_3 &= 0xff;
  *param_5 = cVar1;
  bVar5 = param_1[1];
  pbVar6 = (byte *)(param_1 + 1);
  while( true ) {
    pbVar6 = pbVar6 + 1;
    bVar9 = 0xff;
    if (bVar5 == 0xff) {
      bVar5 = *pbVar6;
      bVar7 = 0;
      pbVar6 = pbVar6 + 2;
      while (bVar5 != 0xff) {
        bVar7 += bVar5;
        while (bVar5 != 0) {
          bVar5 -= 1;
          *param_4 = bVar9;
          param_4 = param_4 + 1;
        }
        bVar5 = *pbVar6;
        bVar9 ^= 0xff;
        pbVar6 = pbVar6 + 1;
      }
      while (bVar7 < param_2) {
        bVar7 += 1;
        *param_4 = bVar9;
        param_4 = param_4 + 1;
      }
      param_3 -= 1;
    }
    else {
      cVar8 = cVar1 + (bVar5 & 0x1f);
      uVar4 = ((int)(uint)bVar5 >> 5) + 1;
      param_3 -= uVar4;
      cVar2 = cVar8;
      do {
        while (cVar3 = param_2 - cVar8, cVar2 != '\0') {
          *param_4 = 0xff;
          param_4 = param_4 + 1;
          cVar2 = cVar2 + -1;
        }
        while (cVar3 != '\0') {
          *param_4 = 0;
          param_4 = param_4 + 1;
          cVar3 = cVar3 + -1;
        }
        uVar4 = uVar4 - 1 & 0xff;
        cVar2 = cVar8;
      } while (uVar4 != 0);
    }
    param_3 &= 0xff;
    if (param_3 == 0) break;
    bVar5 = *pbVar6;
    pbVar6 = pbVar6;
  }
  return pbVar6;
}



void proc_7F01CC94(byte *param_1,short param_2,byte *param_3)

{
  if (param_2 != 0) {
    do {
      param_2 += -1;
      *param_3 = (byte)((int)(uint)param_1[1] >> 4) | *param_1 & 0xf0;
      param_3 = param_3 + 1;
      param_1 = param_1 + 2;
    } while (param_2 != 0);
  }
  return;
}



void proc_7F01CCEC(int param_1,uint param_2,uint param_3,int param_4,byte param_5)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  uint uVar14;
  
  param_3 &= 0xff;
  param_2 &= 0xff;
  iVar1 = 0;
  if (param_3 != 0) {
    do {
      iVar13 = 0;
      if (param_2 != 0) {
        iVar4 = iVar1 - (uint)param_5;
        iVar6 = param_3 - 1;
        iVar7 = iVar1 + (uint)param_5;
        do {
          uVar2 = 0;
          iVar3 = 0;
          if (iVar4 < 0) {
            iVar12 = 0;
          }
          else {
            iVar12 = iVar4 * 0x10000 >> 0x10;
          }
          iVar8 = iVar7;
          if (iVar6 < iVar7) {
            iVar8 = iVar6;
          }
          if (iVar8 < iVar12) {
            uVar14 = 0;
          }
          else {
            iVar8 = iVar13 - (uint)param_5;
            iVar10 = param_2 - 1;
            iVar11 = iVar13 + (uint)param_5;
            do {
              if (iVar8 < 0) {
                iVar9 = 0;
              }
              else {
                iVar9 = iVar8 * 0x10000 >> 0x10;
              }
              iVar5 = iVar11;
              if (iVar10 < iVar11) {
                iVar5 = iVar10;
              }
              if (iVar9 <= iVar5) {
                do {
                  iVar5 = param_1 + iVar9;
                  iVar9 = (iVar9 + 1) * 0x10000 >> 0x10;
                  uVar2 += 1;
                  iVar3 += (uint)*(byte *)(iVar5 + iVar12 * param_2);
                  iVar5 = iVar11;
                  if (iVar10 < iVar11) {
                    iVar5 = iVar10;
                  }
                } while (iVar9 <= iVar5);
              }
              iVar12 = (int)(short)((short)iVar12 + 1);
              iVar9 = iVar7;
              if (iVar6 < iVar7) {
                iVar9 = iVar6;
              }
            } while (iVar12 <= iVar9);
            uVar14 = uVar2 >> 1;
          }
          iVar12 = param_4 + iVar13;
          iVar13 = (iVar13 + 1) * 0x10000 >> 0x10;
          if (uVar2 == 0) {
            trap(0x1c00);
          }
          *(undefined *)(iVar12 + iVar1 * param_2) = (char)((uVar14 + iVar3) / uVar2);
        } while (iVar13 < (int)param_2);
      }
      iVar1 = (iVar1 + 1) * 0x10000 >> 0x10;
    } while (iVar1 < (int)param_3);
  }
  return;
}



void proc_7F01CEEC(int param_1,int param_2,int param_3)

{
  byte *pbVar1;
  undefined *puVar2;
  int iVar3;
  byte *pbVar4;
  int iVar5;
  undefined *puVar6;
  
  pbVar4 = (byte *)(param_1 + 0x61);
  puVar6 = (undefined *)(param_3 + 0x61);
  iVar3 = 1;
  if (1 < param_2 + -1) {
    do {
      *puVar6 = (char)((int)((uint)pbVar4[-0x60] + (uint)pbVar4[-1] + (uint)*pbVar4 +
                             (uint)pbVar4[-0x61] + 2) >> 2);
      puVar6[1] = (char)((int)((uint)pbVar4[-0x5f] + (uint)*pbVar4 + (uint)pbVar4[1] +
                               (uint)pbVar4[-0x60] + 2) >> 2);
      iVar5 = 3;
      pbVar1 = pbVar4 + 2;
      puVar2 = puVar6 + 2;
      do {
        puVar6 = puVar2;
        pbVar4 = pbVar1;
        *puVar6 = (char)((int)((uint)pbVar4[-0x60] + (uint)pbVar4[-1] + (uint)*pbVar4 +
                               (uint)pbVar4[-0x61] + 2) >> 2);
        puVar6[1] = (char)((int)((uint)pbVar4[-0x5f] + (uint)*pbVar4 + (uint)pbVar4[1] +
                                 (uint)pbVar4[-0x60] + 2) >> 2);
        puVar6[2] = (char)((int)((uint)pbVar4[-0x5e] + (uint)pbVar4[1] + (uint)pbVar4[2] +
                                 (uint)pbVar4[-0x5f] + 2) >> 2);
        iVar5 += 4;
        puVar6[3] = (char)((int)((uint)pbVar4[-0x5d] + (uint)pbVar4[2] + (uint)pbVar4[3] +
                                 (uint)pbVar4[-0x5e] + 2) >> 2);
        pbVar1 = pbVar4 + 4;
        puVar2 = puVar6 + 4;
      } while (iVar5 != 0x5f);
      iVar3 += 1;
      puVar6 = puVar6 + 6;
      pbVar4 = pbVar4 + 6;
    } while (iVar3 != param_2 + -1);
  }
  return;
}



void proc_7F01D02C(int param_1,int param_2,int param_3)

{
  byte *pbVar1;
  undefined *puVar2;
  int iVar3;
  byte *pbVar4;
  int iVar5;
  undefined *puVar6;
  
  pbVar4 = (byte *)(param_1 + 0x61);
  puVar6 = (undefined *)(param_3 + 0x61);
  iVar3 = 1;
  if (1 < param_2 + -1) {
    do {
      *puVar6 = (char)((int)((uint)pbVar4[0x60] + (uint)pbVar4[1] + (uint)*pbVar4 +
                             (uint)pbVar4[0x61] + 2) >> 2);
      puVar6[1] = (char)((int)((uint)pbVar4[0x61] + (uint)pbVar4[2] + (uint)pbVar4[1] +
                               (uint)pbVar4[0x62] + 2) >> 2);
      iVar5 = 3;
      pbVar1 = pbVar4 + 2;
      puVar2 = puVar6 + 2;
      do {
        puVar6 = puVar2;
        pbVar4 = pbVar1;
        *puVar6 = (char)((int)((uint)pbVar4[0x60] + (uint)pbVar4[1] + (uint)*pbVar4 +
                               (uint)pbVar4[0x61] + 2) >> 2);
        puVar6[1] = (char)((int)((uint)pbVar4[0x61] + (uint)pbVar4[2] + (uint)pbVar4[1] +
                                 (uint)pbVar4[0x62] + 2) >> 2);
        puVar6[2] = (char)((int)((uint)pbVar4[0x62] + (uint)pbVar4[3] + (uint)pbVar4[2] +
                                 (uint)pbVar4[99] + 2) >> 2);
        iVar5 += 4;
        puVar6[3] = (char)((int)((uint)pbVar4[99] + (uint)pbVar4[4] + (uint)pbVar4[3] +
                                 (uint)pbVar4[100] + 2) >> 2);
        pbVar1 = pbVar4 + 4;
        puVar2 = puVar6 + 4;
      } while (iVar5 != 0x5f);
      iVar3 += 1;
      puVar6 = puVar6 + 6;
      pbVar4 = pbVar4 + 6;
    } while (iVar3 != param_2 + -1);
  }
  return;
}



void proc_7F01D16C(undefined *param_1,int param_2,int param_3,undefined *param_4)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  
  puVar3 = param_1 + param_2;
  puVar2 = param_1 + param_2 * param_3;
  puVar4 = puVar3;
  do {
    do {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      *param_4 = uVar1;
      puVar3 = puVar3 + 1;
      param_4 = param_4 + param_3;
    } while (param_1 < puVar4);
    param_4 = param_4 + (1 - param_2 * param_3);
    puVar4 = puVar3;
  } while (param_1 < puVar2);
  return;
}



byte * proc_7F01D1C0(byte *param_1,int param_2,int param_3,byte *param_4)

{
  byte bVar1;
  byte bVar2;
  byte *pbVar3;
  byte *pbVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  byte bVar9;
  int iVar8;
  
  bVar1 = *param_1;
  pbVar3 = param_1 + 1;
  do {
    bVar2 = *pbVar3;
    pbVar4 = pbVar3 + 1;
    bVar9 = 0xff;
    if (bVar2 == 0xff) {
      bVar2 = *pbVar4;
      iVar6 = 0;
      pbVar4 = pbVar3 + 2;
      while (bVar2 != 0xff) {
        uVar5 = (uint)bVar2;
        iVar6 += uVar5;
        if (bVar2 != 0) {
          do {
            uVar5 -= 1;
            *param_4 = bVar9;
            param_4 = param_4 + 1;
          } while (0 < (int)uVar5);
        }
        bVar2 = *pbVar4;
        bVar9 ^= 0xff;
        pbVar4 = pbVar4 + 1;
      }
      while (iVar6 < param_2) {
        iVar6 += 1;
        *param_4 = bVar9;
        param_4 = param_4 + 1;
      }
      param_3 += -1;
    }
    else {
      iVar7 = ((uint)bVar2 & 0x1f) + (uint)bVar1;
      iVar6 = (uint)(bVar2 >> 5) + 1;
      param_3 -= iVar6;
      do {
        iVar8 = iVar7;
        if (iVar7 != 0) {
          do {
            iVar8 += -1;
            *param_4 = 0xff;
            param_4 = param_4 + 1;
          } while (0 < iVar8);
        }
        iVar8 = param_2 - iVar7;
        while (0 < iVar8) {
          iVar8 += -1;
          *param_4 = 0;
          param_4 = param_4 + 1;
        }
        iVar6 += -1;
      } while (0 < iVar6);
    }
    pbVar3 = pbVar4;
  } while (0 < param_3);
  return pbVar4;
}



f32 get_007_reaction_speed(void)

{
  DIFFICULTY DVar1;
  f32 fVar2;
  
  DVar1 = get_current_difficulty();
  fVar2 = slider_007_mode_reaction;
  if (DVar1 != DIFFICULTY_007) {
    fVar2 = 0.00000000;
  }
  return fVar2;
}



f32 get_007_health_mod(void)

{
  DIFFICULTY DVar1;
  f32 fVar2;
  
  DVar1 = get_current_difficulty();
  fVar2 = slider_007_mode_health;
  if (DVar1 != DIFFICULTY_007) {
    fVar2 = 1.00000000;
  }
  return fVar2;
}



f32 get_007_damage_mod(void)

{
  DIFFICULTY DVar1;
  f32 fVar2;
  
  DVar1 = get_current_difficulty();
  fVar2 = slider_007_mode_accuracy;
  if (DVar1 != DIFFICULTY_007) {
    fVar2 = 1.00000000;
  }
  return fVar2;
}



f32 get_007_accuracy_mod(void)

{
  DIFFICULTY DVar1;
  f32 fVar2;
  
  DVar1 = get_current_difficulty();
  fVar2 = slider_007_mode_damage;
  if (DVar1 != DIFFICULTY_007) {
    fVar2 = 1.00000000;
  }
  return fVar2;
}



void end_of_mission_briefing(void)

{
  short sVar1;
  int iVar3;
  save_file *folder;
  ulonglong uVar2;
  
  if (((-1 < briefingpage) && (selected_difficulty != DIFFICULTY_007)) && (append_cheat_sp == FALSE)
     ) {
    sVar1 = (&solo_target_times_ARRAY_8002b564
              [mission_folder_setup_entries[briefingpage].mission_num].agent_time)
            [selected_difficulty];
    iVar3 = getMissiontime();
    unlock_stage_in_folder_on_difficulty
              (selected_folder_num,(longlong)mission_folder_setup_entries[briefingpage].mission_num,
               (longlong)selected_difficulty,iVar3 / 0x3c);
    iVar3 = getMissiontime();
    if ((longlong)(iVar3 / 0x3c) <= (longlong)sVar1) {
      folder = getEEPROMforFoldernum(selected_folder_num);
      uVar2 = check_if_cheat_unlocked
                        (folder,(longlong)mission_folder_setup_entries[briefingpage].mission_num);
      if (uVar2 == 0) {
        proc_7F01E760(selected_folder_num,
                      (longlong)mission_folder_setup_entries[briefingpage].mission_num);
        newcheatunlocked = 1;
        return;
      }
    }
    newcheatunlocked = 0;
  }
  return;
}



void proc_7F01D500(void)

{
  get_screen_ratio_settings_for_mpgame_from_folder(selected_folder_num);
  return;
}



void deleteCurrentSelectedFolder(void)

{
  delete_update_eeprom_file(selected_folder_num);
  return;
}



void copyCurrentEEPROMtoStack(void)

{
  copy_eeprom_to_stack_set_folder_num(selected_folder_num);
  return;
}



u8 getSelectedFolderBond(void)

{
  u32 uVar1;
  u8 bond;
  
  uVar1 = removed_would_have_returned_bond_for_folder_num(selected_folder_num);
  return (u8)uVar1;
}



void set_selected_folder_num(u32 foldernum)

{
  selected_folder_num = foldernum;
  return;
}



void set_selected_difficulty(DIFFICULTY difficulty)

{
  if (difficulty != DIFFICULTY_AGENT) {
    if (difficulty == DIFFICULTY_SECRET) {
      selected_difficulty = DIFFICULTY_SECRET;
      return;
    }
    if (difficulty == DIFFICULTY_00) {
      selected_difficulty = DIFFICULTY_00;
      return;
    }
    if (difficulty == DIFFICULTY_007) {
      selected_difficulty = DIFFICULTY_007;
      return;
    }
  }
  selected_difficulty = DIFFICULTY_AGENT;
  return;
}



void set_solo_and_ptr_briefing(LEVELID stage)

{
  gamemode = GAMEMODE_SOLO;
  selected_stage = stage;
  briefingpage = pull_and_display_text_for_folder_a0((undefined *)stage);
  return;
}



void proc_7F01D61C(save_file *savefile)

{
  copy_eeprom_from_to(selected_folder_num,(int)savefile);
  return;
}



void proc_7F01D644(save_file *eeprom)

{
  selected_folder_num_copy = selected_folder_num;
  selected_folder_num = 100;
  copy_eepromfile_a0_from_a1_to_buffer(100,eeprom);
  return;
}



void store_favorite_weapon_current_player(u32 right,u32 left)

{
  u32 uVar1;
  
  uVar1 = get_cur_playernum();
  (&fav_weapon_player1)[uVar1].right = right;
  (&fav_weapon_player1)[uVar1].left = left;
  return;
}



undefined4 proc_7F01D6C0(void)

{
  undefined4 uVar1;
  
  uVar1 = save_7000C6FC();
  return uVar1;
}



void proc_7F01D6E0(void)

{
  u32 *puVar1;
  u32 *puVar2;
  save_file *psVar3;
  save_file *psVar4;
  undefined auStackX0 [16];
  u32 auStack96 [24];
  
  psVar3 = &dword_8002C520;
  puVar1 = auStack96;
  do {
    psVar4 = (save_file *)&psVar3->controller_config;
    *puVar1 = psVar3->checksum1;
    puVar1[1] = psVar3->checksum2;
    puVar1[2] = *(u32 *)&psVar3->completion_bitflags;
    psVar3 = psVar4;
    puVar1 = puVar1 + 3;
  } while (psVar4 != &save_file_8002c580);
  puVar1 = auStack96;
  psVar3 = &save6;
  do {
    puVar2 = puVar1 + 3;
    psVar3->checksum1 = *puVar1;
    psVar3->checksum2 = puVar1[1];
    *(u32 *)&psVar3->completion_bitflags = puVar1[2];
    puVar1 = puVar2;
    psVar3 = (save_file *)&psVar3->controller_config;
  } while (puVar2 != (u32 *)register0x000000ec);
  return;
}



int proc_7F01D758(uint *param_1)

{
  int iVar1;
  
  iVar1 = proc_7F01D6C0();
  if (iVar1 != 0) {
    proc_7F09B600((byte *)(param_1 + 2),(byte *)(param_1 + 8),param_1);
    iVar1 = save_7000C808(0,(u8 *)param_1,0x20);
  }
  return iVar1;
}



void proc_7F01D7A0(save_file *param_1)

{
  int iVar1;
  
  if ((((save_file *)0x8006991f < param_1) &&
      (param_1 <= (save_file *)(save_file_80069aa0.field_0x5d + 2))) &&
     (iVar1 = proc_7F01D6C0(), iVar1 != 0)) {
    proc_7F09B600(&param_1->completion_bitflags,(byte *)(param_1 + 1),(uint *)param_1);
    save_7000C808((char)((uint)(((int)(param_1 + 0x15543bd) / 0x60) * 0x60) >> 3) + 4,(u8 *)param_1,
                  0x60);
  }
  return;
}



void proc_7F01D840(save_file *param_1)

{
  u32 *puVar1;
  u32 *puVar2;
  save_file *psVar3;
  save_file *psVar4;
  save_file *psVar5;
  undefined auStackX0 [16];
  u32 auStack96 [24];
  
  puVar2 = auStack96;
  psVar4 = &save_file_8002c580;
  puVar1 = puVar2;
  do {
    psVar5 = (save_file *)&psVar4->controller_config;
    *puVar1 = psVar4->checksum1;
    puVar1[1] = psVar4->checksum2;
    puVar1[2] = *(u32 *)&psVar4->completion_bitflags;
    psVar4 = psVar5;
    puVar1 = puVar1 + 3;
    psVar3 = param_1;
  } while (psVar5 != &save_file_8002c5e0);
  do {
    puVar1 = puVar2 + 3;
    psVar3->checksum1 = *puVar2;
    psVar3->checksum2 = puVar2[1];
    *(u32 *)&psVar3->completion_bitflags = puVar2[2];
    puVar2 = puVar1;
    psVar3 = (save_file *)&psVar3->controller_config;
  } while (puVar1 != (u32 *)register0x000000ec);
  proc_7F01D7A0(param_1);
  return;
}



u32 getEEPROMFoldernum(save_file *eeprom)

{
  return (u32)((uint)eeprom->completion_bitflags & 7);
}



void setEEPROMtoFoldernum(save_file *eeprom,byte folder)

{
  byte bVar1;
  
  bVar1 = eeprom->completion_bitflags & 0xf8;
  eeprom->completion_bitflags = bVar1;
  eeprom->completion_bitflags = bVar1 | folder & 7;
  return;
}



int set_eeprom_flag_0x18(save_file *folder)

{
  return (int)((uint)folder->completion_bitflags & 0x18) >> 3;
}



void reset_eeprom_flag_0x18(save_file *folder,int value)

{
  byte foldernum;
  
  foldernum = folder->completion_bitflags & 0xe7;
  folder->completion_bitflags = foldernum;
  folder->completion_bitflags = foldernum | (byte)(value << 3) & 0x18;
  return;
}



int get_selected_bond(save_file *folder)

{
  return (int)((uint)folder->completion_bitflags & 0x60) >> 5;
}



void set_selected_bond(save_file *folder,int bond)

{
  byte bVar1;
  
  bVar1 = folder->completion_bitflags & 0x9f;
  folder->completion_bitflags = bVar1;
  folder->completion_bitflags = bVar1 | (byte)(bond << 5) & 0x60;
  return;
}



ulonglong check_if_eeprom_flag_set_0x80(save_file *folder)

{
  return (ulonglong)((folder->completion_bitflags & 0x80) != 0);
}



void toggle_eeprom_flag_set_0x80(save_file *folder,longlong mode)

{
  if (mode == 0) {
    folder->completion_bitflags = folder->completion_bitflags & 0x7f;
    return;
  }
  folder->completion_bitflags = folder->completion_bitflags | 0x80;
  return;
}



ulonglong get_eeprom_stage_complete_time_for_difficulty
                    (save_file *eepromfile,STAGENUM stage,DIFFICULTY difficulty)

{
  u32 foldernum;
  BOOL BVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  
  if (-1 < (int)stage) {
    if (0x13 < (int)stage) {
      return 0;
    }
    if ((-1 < difficulty) && (difficulty < 4)) {
      if (difficulty == DIFFICULTY_007) {
        foldernum = getEEPROMFoldernum(eepromfile);
        BVar1 = is007ModeUnlockedinFolder(foldernum);
        if (BVar1 != FALSE) {
          return 0x3ff;
        }
        return 0;
      }
      uVar3 = (difficulty * 0x14 + stage) * 10;
      uVar4 = uVar3 & 7;
      iVar2 = (int)uVar3 >> 3;
      if (uVar4 == 6) {
        iVar2 = (int)&eepromfile->checksum1 + iVar2;
        return (ulonglong)*(byte *)(iVar2 + 0x13) |
               (longlong)(int)(((uint)*(byte *)(iVar2 + 0x12) & 3) << 8);
      }
      if (uVar4 != 4) {
        if (uVar4 == 2) {
          iVar2 = (int)&eepromfile->checksum1 + iVar2;
          return (longlong)
                 (int)((int)((uint)*(byte *)(iVar2 + 0x13) & 0xf0) >> 4 |
                      ((uint)*(byte *)(iVar2 + 0x12) & 0x3f) << 4);
        }
        if (uVar4 == 0) {
          iVar2 = (int)&eepromfile->checksum1 + iVar2;
          return (longlong)
                 (int)((int)((uint)*(byte *)(iVar2 + 0x13) & 0xc0) >> 6 |
                      (uint)*(byte *)(iVar2 + 0x12) << 2);
        }
        return 0;
      }
      iVar2 = (int)&eepromfile->checksum1 + iVar2;
      return (longlong)
             (int)((int)((uint)*(byte *)(iVar2 + 0x13) & 0xfc) >> 2 |
                  ((uint)*(byte *)(iVar2 + 0x12) & 0xf) << 6);
    }
  }
  return 0;
}



void proc_7F01DAE4(save_file *eepromfile,STAGENUM solostagenum,DIFFICULTY difficulty,longlong time)

{
  int iVar1;
  byte bVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  byte bVar6;
  
  iVar1 = (int)time;
  if ((((-1 < (int)solostagenum) && ((int)solostagenum < 0x14)) && (-1 < difficulty)) &&
     (difficulty < 3)) {
    if (time == 0) {
      iVar1 = 0x4f;
    }
    else {
      if (0x3ff < time) {
        iVar1 = 0x3ff;
      }
    }
    uVar3 = (difficulty * 0x14 + solostagenum) * 10;
    uVar4 = uVar3 & 7;
    iVar5 = (int)uVar3 >> 3;
    if (uVar4 == 6) {
      iVar5 = (int)&eepromfile->checksum1 + iVar5;
      bVar6 = *(byte *)(iVar5 + 0x12) & 0xfc;
      *(byte *)(iVar5 + 0x12) = bVar6;
      *(undefined *)(iVar5 + 0x13) = 0;
      *(byte *)(iVar5 + 0x12) = bVar6 | (byte)((uint)iVar1 >> 8) & 3;
      *(undefined *)(iVar5 + 0x13) = (char)iVar1;
    }
    else {
      if (uVar4 == 4) {
        iVar5 = (int)&eepromfile->checksum1 + iVar5;
        bVar6 = *(byte *)(iVar5 + 0x12) & 0xf0;
        bVar2 = *(byte *)(iVar5 + 0x13) & 3;
        *(byte *)(iVar5 + 0x12) = bVar6;
        *(byte *)(iVar5 + 0x13) = bVar2;
        *(byte *)(iVar5 + 0x12) = bVar6 | (byte)(iVar1 >> 6) & 0xf;
        *(byte *)(iVar5 + 0x13) = bVar2 | (byte)(iVar1 << 2);
        return;
      }
      if (uVar4 == 2) {
        iVar5 = (int)&eepromfile->checksum1 + iVar5;
        bVar6 = *(byte *)(iVar5 + 0x12) & 0xc0;
        bVar2 = *(byte *)(iVar5 + 0x13) & 0xf;
        *(byte *)(iVar5 + 0x12) = bVar6;
        *(byte *)(iVar5 + 0x13) = bVar2;
        *(byte *)(iVar5 + 0x12) = bVar6 | (byte)(iVar1 >> 4) & 0x3f;
        *(byte *)(iVar5 + 0x13) = bVar2 | (byte)(iVar1 << 4);
        return;
      }
      if (uVar4 == 0) {
        iVar5 = (int)&eepromfile->checksum1 + iVar5;
        bVar6 = *(byte *)(iVar5 + 0x13) & 0x3f;
        *(undefined *)(iVar5 + 0x12) = 0;
        *(byte *)(iVar5 + 0x13) = bVar6;
        *(undefined *)(iVar5 + 0x12) = (char)(iVar1 >> 2);
        *(byte *)(iVar5 + 0x13) = bVar6 | (byte)(iVar1 << 6);
        return;
      }
    }
  }
  return;
}



BOOL doesSaveHaveStageCompletedOnDifficulty(save_file *folder,STAGENUM stage,DIFFICULTY difficulty)

{
  ulonglong uVar1;
  
  if (-1 < (int)stage) {
    if (0x13 < (int)stage) {
      return FALSE;
    }
    if (-1 < difficulty) {
      if (3 < difficulty) {
        return FALSE;
      }
      uVar1 = get_eeprom_stage_complete_time_for_difficulty(folder,stage,difficulty);
      return (uint)(uVar1 != 0);
    }
  }
  return FALSE;
}



void proc_7F01DCB0(save_file *save_file,STAGENUM solostagenum,DIFFICULTY difficulty,int maxtime)

{
  ulonglong uVar1;
  
  if ((((-1 < (int)solostagenum) && ((int)solostagenum < 0x14)) && (-1 < difficulty)) &&
     (difficulty < 4)) {
    uVar1 = get_eeprom_stage_complete_time_for_difficulty(save_file,solostagenum,difficulty);
    if ((uVar1 == 0) || ((longlong)maxtime < (longlong)uVar1)) {
      proc_7F01DAE4(save_file,solostagenum,difficulty,(longlong)maxtime);
    }
  }
  return;
}



ulonglong check_if_cheat_unlocked(save_file *folder,longlong cheat)

{
  if ((-1 < cheat) && (cheat < 0x14)) {
    return (ulonglong)
           (((longlong)(1 << ((uint)cheat & 0x1f)) &
            ((ulonglong)folder->unlocked_cheats1 |
             (longlong)(int)((uint)folder->unlocked_cheats3 << 0x18) |
             (longlong)(int)((uint)folder->unlocked_cheats3 << 0x10) |
            (longlong)(int)((uint)folder->unlocked_cheats2 << 8))) != 0);
  }
  return 0;
}



void proc_7F01DD74(int param_1,longlong param_2)

{
  uint uVar1;
  int iVar2;
  
  if ((-1 < param_2) && (param_2 < 0x14)) {
    uVar1 = 1 << ((uint)param_2 & 0x1f);
    uVar1._3_1_ = (byte)uVar1;
    iVar2 = 0;
    while (0xff < uVar1) {
      uVar1._3_1_ = (byte)(uVar1 >> 8);
      iVar2 += 1;
      uVar1 = uVar1 >> 8;
    }
    *(byte *)(param_1 + iVar2 + 0xe) = *(byte *)(param_1 + iVar2 + 0xe) | (byte)uVar1;
  }
  return;
}



save_file * getEEPROMforFoldernum(u32 foldernum)

{
  ulonglong uVar1;
  u32 uVar2;
  save_file *folder;
  
  folder = &save1;
  while ((uVar1 = check_if_eeprom_flag_set_0x80(folder), uVar1 != 0 ||
         (uVar2 = getEEPROMFoldernum(folder), uVar2 != foldernum))) {
    folder = folder + 1;
    if (folder == &save6) {
      folder = NULL;
      if (foldernum == 100) {
        folder = &save6;
      }
      return folder;
    }
  }
  return folder;
}



int proc_7F01DE50(void)

{
  ulonglong uVar1;
  int iVar2;
  save_file *folder;
  
  folder = &save1;
  iVar2 = 0;
  do {
    uVar1 = check_if_eeprom_flag_set_0x80(folder);
    if (uVar1 != 0) {
      return iVar2;
    }
    iVar2 += 1;
    folder = folder + 1;
  } while (iVar2 != 5);
  return -1;
}



void proc_7F01DEB4(int foldernum)

{
  int iVar1;
  u32 *puVar2;
  u32 *puVar3;
  save_file *psVar4;
  save_file *eeprom;
  u32 auStack100 [24];
  u32 uStack4;
  
  iVar1 = proc_7F01DE50();
  if (-1 < iVar1) {
    psVar4 = &save_file_8002c5e0;
    puVar2 = auStack100;
    do {
      eeprom = (save_file *)&psVar4->controller_config;
      *puVar2 = psVar4->checksum1;
      puVar2[1] = psVar4->checksum2;
      puVar2[2] = *(u32 *)&psVar4->completion_bitflags;
      psVar4 = eeprom;
      puVar2 = puVar2 + 3;
    } while (eeprom != (save_file *)&DAT_8002c640);
    eeprom = &save1 + iVar1;
    puVar2 = auStack100;
    psVar4 = eeprom;
    do {
      puVar3 = puVar2 + 3;
      psVar4->checksum1 = *puVar2;
      psVar4->checksum2 = puVar2[1];
      *(u32 *)&psVar4->completion_bitflags = puVar2[2];
      puVar2 = puVar3;
      psVar4 = (save_file *)&psVar4->controller_config;
    } while (puVar3 != &uStack4);
    setEEPROMtoFoldernum(eeprom,(byte)foldernum);
    toggle_eeprom_flag_set_0x80(eeprom,0);
    set_selected_bond(eeprom,foldernum);
    proc_7F01D7A0(eeprom);
  }
  return;
}



// WARNING: Could not reconcile some variable overlaps

void proc_7F01DF90(void)

{
  bool bVar1;
  int iVar3;
  ulonglong uVar2;
  uint uVar4;
  uint uVar5;
  save_file *folder;
  u32 uVar6;
  uint uVar7;
  int iVar8;
  save_file *psVar9;
  byte *pbVar10;
  u32 foldernum;
  u32 uStack44;
  u32 uStack40;
  u32 uStack36;
  u32 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  byte abStack4 [4];
  
  iVar3 = proc_7F01D6C0();
  if (iVar3 != 0) {
    save_7000C7BC(0,(save_file *)&uStack36,0x20);
    bVar1 = uStack28._0_1_ == 'B';
    proc_7F09B600((byte *)&uStack28,abStack4,&uStack44);
    if ((uStack44 != uStack36) || (uStack40 != uStack32)) {
      bVar1 = false;
    }
    if (!bVar1) {
      uStack32 = DAT_8002c644;
      uStack36 = DAT_8002c640;
      uStack28 = flt_8002C648;
      uStack24 = dword_8002C64C;
      uStack20 = dword_8002C650;
      uStack8 = dword_8002C65C;
      uStack16 = dword_8002C654;
      uStack12 = dword_8002C658;
      proc_7F01D758((uint *)(save_file *)&uStack36);
    }
    save_7000C7BC(4,&save1,0x1e0);
    psVar9 = &save_file_80069980;
    pbVar10 = &save1.completion_bitflags;
    folder = &save1;
    do {
      bVar1 = true;
      proc_7F09B600(pbVar10,(byte *)psVar9,&uStack44);
      if (uStack44 == folder->checksum1) {
        if (uStack40 != folder->checksum2) {
          bVar1 = false;
        }
      }
      else {
        bVar1 = false;
      }
      if (!bVar1) {
        proc_7F01D840(folder);
      }
      psVar9 = psVar9 + 1;
      folder = folder + 1;
      pbVar10 = pbVar10 + 0x60;
    } while (psVar9 != (save_file *)&end_save_files);
    foldernum = 0;
    do {
      iVar3 = -1;
      uVar4 = 0xffffffff;
      folder = &save1;
      iVar8 = 0;
      do {
        uVar2 = check_if_eeprom_flag_set_0x80(folder);
        if ((uVar2 == 0) && (uVar6 = getEEPROMFoldernum(folder), uVar6 == foldernum)) {
          if (iVar3 < 0) {
            uVar4 = set_eeprom_flag_0x18(folder);
            iVar3 = iVar8;
          }
          else {
            uVar7 = uVar4 + 1 & 3;
            if (((int)(uVar4 + 1) < 0) && (uVar7 != 0)) {
              uVar7 -= 4;
            }
            uVar5 = set_eeprom_flag_0x18(folder);
            if (uVar5 == uVar7) {
              proc_7F01D840(&save1 + iVar3);
              iVar3 = iVar8;
              uVar4 = uVar5;
            }
            else {
              proc_7F01D840(folder);
            }
          }
        }
        iVar8 += 1;
        folder = folder + 1;
      } while (iVar8 != 5);
      if (iVar3 < 0) {
        proc_7F01DEB4(foldernum);
      }
      foldernum += 1;
    } while ((int)foldernum < 4);
    foldernum = 0;
    do {
      folder = getEEPROMforFoldernum(foldernum);
      if (folder != NULL) {
        uVar6 = get_selected_bond(folder);
        save1_selected_bond[foldernum] = uVar6;
      }
      foldernum += 1;
    } while (foldernum != 4);
  }
  return;
}



BOOL check_if_valid_folder_num(int folder)

{
  if ((-1 < folder) && (folder < 4)) {
    return TRUE;
  }
  if (folder != 100) {
    return FALSE;
  }
  return TRUE;
}



BOOL doesFolderHaveStageUnlockedAtDifficulty(int foldernum,STAGENUM stageid,DIFFICULTY difficulty)

{
  BOOL BVar1;
  save_file *eeprom;
  DIFFICULTY difficulty_00;
  STAGENUM stage;
  
  BVar1 = check_if_valid_folder_num(foldernum);
  if (BVar1 == FALSE) {
    return FALSE;
  }
  if (-1 < (int)stageid) {
    if (0x13 < (int)stageid) {
      return FALSE;
    }
    if (-1 < difficulty) {
      if (3 < difficulty) {
        return FALSE;
      }
      eeprom = getEEPROMforFoldernum(foldernum);
      if (eeprom != NULL) {
        BVar1 = doesSaveHaveStageCompletedOnDifficulty(eeprom,stageid,difficulty);
        if (BVar1 != FALSE) {
          return 3;
        }
        if (((stageid == SP_STAGE_AZTEK) && (difficulty < 1)) ||
           ((stageid == SP_STAGE_EGYPT && (difficulty < 2)))) {
          return FALSE;
        }
        difficulty_00 = difficulty;
        if (difficulty < 4) {
          do {
            stage = SP_STAGE_DAM;
            if (0 < (int)stageid) {
              do {
                BVar1 = doesSaveHaveStageCompletedOnDifficulty(eeprom,stage,difficulty_00);
                if (BVar1 == FALSE) break;
                stage += SP_STAGE_FACILITY;
              } while (stage != stageid);
            }
            difficulty_00 += DIFFICULTY_SECRET;
            if ((int)stageid <= (int)stage) {
              return TRUE;
            }
          } while (difficulty_00 != 4);
        }
        if (((difficulty < 3) && ((int)stageid < 0x12)) && (difficulty < 4)) {
          difficulty_00 = difficulty;
          do {
            BVar1 = doesSaveHaveStageCompletedOnDifficulty
                              (eeprom,stageid + ~SP_STAGE_DAM,difficulty_00);
            difficulty_00 += DIFFICULTY_SECRET;
            if (BVar1 != FALSE) {
              return TRUE;
            }
          } while (difficulty_00 != 4);
        }
        stage = SP_STAGE_DAM;
        if (difficulty < 3) {
          do {
            BVar1 = doesSaveHaveStageCompletedOnDifficulty(eeprom,stage,DIFFICULTY_AGENT);
            if (BVar1 == FALSE) break;
            stage += SP_STAGE_FACILITY;
          } while ((int)stage < 0x12);
          if (0x11 < (int)stage) {
            difficulty_00 = DIFFICULTY_AGENT;
            if (0 < difficulty) {
              do {
                BVar1 = doesSaveHaveStageCompletedOnDifficulty(eeprom,stageid,difficulty_00);
                if (BVar1 == FALSE) break;
                difficulty_00 += DIFFICULTY_SECRET;
              } while (difficulty_00 != difficulty);
            }
            if (difficulty <= difficulty_00) {
              return TRUE;
            }
          }
        }
      }
      if (stageid == SP_STAGE_DAM) {
        return TRUE;
      }
      BVar1 = get_debug_enable_agent_levels_flag();
      if ((BVar1 != FALSE) && (difficulty == DIFFICULTY_AGENT)) {
        return TRUE;
      }
      BVar1 = get_debug_enable_all_levels_flag();
      if (BVar1 == FALSE) {
        return FALSE;
      }
      return TRUE;
    }
  }
  return FALSE;
}



void proc_7F01E504(save_file *param_1,undefined4 *param_2)

{
  int iVar1;
  int iVar2;
  save_file *folder;
  u32 *puVar3;
  u32 *puVar4;
  uint uStack8;
  
  uStack8 = 0;
  iVar1 = proc_7F01DE50();
  if (-1 < iVar1) {
    puVar3 = param_2;
    folder = &save1 + iVar1;
    do {
      puVar4 = puVar3 + 3;
      folder->checksum1 = *puVar3;
      folder->checksum2 = puVar3[1];
      *(u32 *)&folder->completion_bitflags = puVar3[2];
      puVar3 = puVar4;
      folder = (save_file *)&folder->controller_config;
    } while (puVar4 != param_2 + 0x18);
    if (param_1 != NULL) {
      iVar2 = set_eeprom_flag_0x18(param_1);
      uStack8 = iVar2 + 1U & 3;
      if (((int)(iVar2 + 1U) < 0) && (uStack8 != 0)) {
        uStack8 -= 4;
      }
    }
    folder = &save1 + iVar1;
    toggle_eeprom_flag_set_0x80(folder,0);
    reset_eeprom_flag_0x18(folder,uStack8);
    proc_7F01D7A0(folder);
    if (param_1 != NULL) {
      proc_7F01D840(param_1);
    }
  }
  return;
}



void unlock_stage_in_folder_on_difficulty
               (int folder,longlong stagenum,longlong selecteddifficulty,int maxtime)

{
  save_file *psVar1;
  save_file *psVar2;
  save_file *psVar3;
  save_file *psVar4;
  longlong difficulty;
  save_file sStack96;
  
  if ((((-1 < folder) && (folder < 4)) && (-1 < stagenum)) &&
     (((stagenum < 0x14 && (-1 < selecteddifficulty)) && (selecteddifficulty < 4)))) {
    psVar1 = &dword_8002C660;
    psVar2 = &sStack96;
    do {
      psVar4 = (save_file *)&psVar1->controller_config;
      psVar2->checksum1 = psVar1->checksum1;
      psVar2->checksum2 = psVar1->checksum2;
      *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar1->completion_bitflags;
      psVar1 = psVar4;
      psVar2 = (save_file *)&psVar2->controller_config;
    } while (psVar4 != &dword_8002C6C0);
    psVar1 = getEEPROMforFoldernum(folder);
    if (psVar1 == NULL) {
      setEEPROMtoFoldernum(&sStack96,(byte)folder);
    }
    else {
      psVar2 = psVar1;
      psVar4 = &sStack96;
      do {
        psVar3 = (save_file *)&psVar2->controller_config;
        psVar4->checksum1 = psVar2->checksum1;
        psVar4->checksum2 = psVar2->checksum2;
        *(undefined4 *)&psVar4->completion_bitflags = *(undefined4 *)&psVar2->completion_bitflags;
        psVar2 = psVar3;
        psVar4 = (save_file *)&psVar4->controller_config;
      } while (psVar3 != psVar1 + 1);
    }
    difficulty = selecteddifficulty;
    if (-1 < selecteddifficulty) {
      do {
        difficulty._4_4_ = (DIFFICULTY)difficulty;
        if (difficulty == selecteddifficulty) {
          proc_7F01DCB0(&sStack96,(STAGENUM)stagenum,difficulty._4_4_,maxtime);
        }
        else {
          proc_7F01DCB0(&sStack96,(STAGENUM)stagenum,difficulty._4_4_,99999999);
        }
        difficulty = (longlong)(difficulty._4_4_ + DIFFICULTY_MULTI);
      } while (-1 < (longlong)(difficulty._4_4_ + DIFFICULTY_MULTI));
    }
    proc_7F01E504(psVar1,(undefined4 *)&sStack96);
  }
  return;
}



void proc_7F01E760(int folder,longlong param_2)

{
  ulonglong uVar1;
  save_file *psVar2;
  save_file *psVar3;
  save_file *psVar4;
  save_file sStack100;
  save_file *psStack4;
  
  if ((((-1 < folder) && (folder < 4)) && (-1 < param_2)) && (param_2 < 0x14)) {
    psStack4 = getEEPROMforFoldernum(folder);
    if ((psStack4 == NULL) ||
       (uVar1 = check_if_cheat_unlocked(psStack4,(longlong)(int)param_2), uVar1 == 0)) {
      psVar3 = &dword_8002C6C0;
      psVar2 = &sStack100;
      do {
        psVar4 = (save_file *)&psVar3->controller_config;
        psVar2->checksum1 = psVar3->checksum1;
        psVar2->checksum2 = psVar3->checksum2;
        *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
        psVar3 = psVar4;
        psVar2 = (save_file *)&psVar2->controller_config;
      } while (psVar4 != &save_file_8002c720);
      if (psStack4 == NULL) {
        setEEPROMtoFoldernum(&sStack100,(byte)folder);
      }
      else {
        psVar3 = psStack4;
        psVar2 = &sStack100;
        do {
          psVar4 = (save_file *)&psVar3->controller_config;
          psVar2->checksum1 = psVar3->checksum1;
          psVar2->checksum2 = psVar3->checksum2;
          *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
          psVar3 = psVar4;
          psVar2 = (save_file *)&psVar2->controller_config;
        } while (psVar4 != psStack4 + 1);
      }
      proc_7F01DD74((int)&sStack100,(longlong)(int)param_2);
      proc_7F01E504(psStack4,(undefined4 *)&sStack100);
    }
  }
  return;
}



void get_highest_stage_difficulty_completed_in_folder
               (int foldernum,STAGENUM *stagenum,DIFFICULTY *difficulty)

{
  save_file *folder;
  BOOL BVar1;
  STAGENUM stage;
  DIFFICULTY difficulty_00;
  
  folder = getEEPROMforFoldernum(foldernum);
  if (folder != NULL) {
    difficulty_00 = DIFFICULTY_007;
    do {
      stage = SP_STAGE_EGYPT;
      do {
        BVar1 = doesSaveHaveStageCompletedOnDifficulty(folder,stage,difficulty_00);
        if (BVar1 != FALSE) {
          *stagenum = stage;
          *difficulty = difficulty_00;
          return;
        }
        stage += ~SP_STAGE_DAM;
      } while (-1 < (int)stage);
      difficulty_00 += DIFFICULTY_MULTI;
    } while (-1 < difficulty_00);
  }
  *stagenum = ~SP_STAGE_DAM;
  *difficulty = DIFFICULTY_MULTI;
  return;
}



u32 check_egypt_completed_in_folder(int folder)

{
  save_file *savefile;
  BOOL BVar1;
  DIFFICULTY difficulty;
  longlong stagenum;
  STAGENUM stageid;
  
  savefile = getEEPROMforFoldernum(folder);
  stagenum = 0x13;
  if (savefile != NULL) {
    do {
      difficulty = DIFFICULTY_AGENT;
      stageid = (STAGENUM)stagenum;
      do {
        BVar1 = doesFolderHaveStageUnlockedAtDifficulty(folder,stageid,difficulty);
        difficulty += DIFFICULTY_SECRET;
        if (BVar1 != FALSE) {
          return stageid;
        }
      } while (difficulty != 4);
      stagenum = (longlong)(int)(stageid + ~SP_STAGE_DAM);
    } while (-1 < stagenum);
  }
  return 0;
}



u32 check_egypt_completed_any_folder(void)

{
  u32 isfound;
  int folder;
  u32 isunlocked;
  
  isunlocked = 0;
  folder = 0;
  do {
    isfound = check_egypt_completed_in_folder(folder);
    folder += 1;
    if ((int)isunlocked < (int)isfound) {
      isunlocked = isfound;
    }
  } while (folder != 4);
  return isunlocked;
}



u32 check_cradle_completed_in_folder(u32 folder)

{
  BOOL BVar1;
  uint uVar2;
  
  BVar1 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_CRADLE,DIFFICULTY_AGENT);
  uVar2 = (uint)(BVar1 == 3);
  if (BVar1 != 3) {
    BVar1 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_CRADLE,DIFFICULTY_SECRET);
    uVar2 = (uint)(BVar1 == 3);
    if (BVar1 != 3) {
      BVar1 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_CRADLE,DIFFICULTY_00);
      uVar2 = (uint)(BVar1 == 3);
    }
  }
  return (u32)uVar2;
}



u32 check_aztec_completed_in_folder_secret_00(u32 folder)

{
  bool bVar1;
  BOOL BVar2;
  
  BVar2 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_AZTEK,DIFFICULTY_SECRET);
  bVar1 = BVar2 == 3;
  if (!bVar1) {
    BVar2 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_AZTEK,DIFFICULTY_00);
    bVar1 = BVar2 == 3;
  }
  return (u32)(uint)bVar1;
}



u32 check_egypt_completed_in_folder_00(int folder)

{
  BOOL BVar1;
  
  BVar1 = doesFolderHaveStageUnlockedAtDifficulty(folder,SP_STAGE_EGYPT,DIFFICULTY_00);
  return (u32)(uint)(BVar1 == 3);
}



u32 check_cradle_completed_any_folder(void)

{
  u32 completed;
  int folder;
  
  folder = 0;
  do {
    completed = check_cradle_completed_in_folder(folder);
    folder += 1;
    if (completed != 0) {
      return 1;
    }
  } while (folder != 4);
  return 0;
}



BOOL check_aztec_completed_any_folder_secret_00(void)

{
  u32 uVar1;
  u32 folder;
  
  folder = 0;
  do {
    uVar1 = check_aztec_completed_in_folder_secret_00(folder);
    folder += 1;
    if (uVar1 != 0) {
      return TRUE;
    }
  } while (folder != 4);
  return FALSE;
}



BOOL check_egypt_completed_any_folder_00(void)

{
  u32 completed;
  int folder;
  
  folder = 0;
  do {
    completed = check_egypt_completed_in_folder_00(folder);
    folder += 1;
    if (completed != 0) {
      return TRUE;
    }
  } while (folder != 4);
  return FALSE;
}



u32 removed_would_have_returned_bond_for_folder_num(u32 folder)

{
  return 0;
}



void set_selected_bond_to_folder(u32 folder,u32 bond)

{
  if ((-1 < (int)folder) && ((int)folder < 4)) {
    save1_selected_bond[folder] = 0;
  }
  return;
}



void proc_7F01EBF4(undefined4 param_1)

{
  return;
}



void proc_7F01EBFC(undefined4 param_1)

{
  return;
}



void delete_eeprom_folder(int foldernum)

{
  save_file *eeprom;
  u32 *puVar1;
  u32 *puVar2;
  save_file *psVar3;
  save_file *psVar4;
  u32 auStack108 [24];
  DIFFICULTY difficulty;
  STAGENUM aSStack8 [2];
  
  if ((((-1 < foldernum) && (foldernum < 4)) &&
      (eeprom = getEEPROMforFoldernum(foldernum), eeprom != NULL)) &&
     ((get_highest_stage_difficulty_completed_in_folder(foldernum,aSStack8,&difficulty),
      -1 < (int)aSStack8[0] && (-1 < difficulty)))) {
    psVar3 = &save_file_8002c720;
    puVar1 = auStack108;
    do {
      psVar4 = (save_file *)&psVar3->controller_config;
      *puVar1 = psVar3->checksum1;
      puVar1[1] = psVar3->checksum2;
      puVar1[2] = *(u32 *)&psVar3->completion_bitflags;
      psVar3 = psVar4;
      puVar1 = puVar1 + 3;
    } while (psVar4 != &save_file_8002c780);
    puVar1 = auStack108;
    psVar3 = eeprom;
    do {
      puVar2 = puVar1 + 3;
      psVar3->checksum1 = *puVar1;
      psVar3->checksum2 = puVar1[1];
      *(u32 *)&psVar3->completion_bitflags = puVar1[2];
      puVar1 = puVar2;
      psVar3 = (save_file *)&psVar3->controller_config;
    } while (puVar2 != (u32 *)&difficulty);
    setEEPROMtoFoldernum(eeprom,(byte)foldernum);
    toggle_eeprom_flag_set_0x80(eeprom,0);
    set_selected_bond(eeprom,foldernum);
    set_selected_bond_to_folder(foldernum,foldernum);
    proc_7F01D7A0(eeprom);
  }
  return;
}



void proc_7F01ED10(int folder)

{
  save_file *save_file;
  DIFFICULTY difficulty;
  int stagenum;
  
  save_file = getEEPROMforFoldernum(folder);
  stagenum = SP_STAGE_DAM;
  do {
    difficulty = DIFFICULTY_AGENT;
    do {
      proc_7F01DCB0(save_file,stagenum,difficulty,99999999);
      difficulty += DIFFICULTY_SECRET;
    } while (difficulty != DIFFICULTY_007);
    stagenum += SP_STAGE_FACILITY;
  } while (stagenum != 0x14);
  return;
}



void proc_7F01EDA0(ulonglong param_1)

{
  save_file *psVar1;
  save_file *psVar2;
  u32 foldernum;
  save_file *psVar3;
  save_file *psVar4;
  u32 foldernum_00;
  save_file sStack112;
  DIFFICULTY difficulty;
  STAGENUM SStack8;
  save_file *psStack4;
  
  if ((-1 < (longlong)param_1) && ((longlong)param_1 < 4)) {
    foldernum = (u32)param_1;
    psStack4 = getEEPROMforFoldernum(foldernum);
    if (psStack4 != NULL) {
      get_highest_stage_difficulty_completed_in_folder(foldernum,&SStack8,&difficulty);
      if ((-1 < (int)SStack8) && (foldernum_00 = 0, -1 < difficulty)) {
        while (psVar1 = getEEPROMforFoldernum(foldernum_00), psVar1 != NULL) {
          get_highest_stage_difficulty_completed_in_folder(foldernum_00,&SStack8,&difficulty);
          if ((((int)SStack8 < 0) && (difficulty < 0)) || (foldernum_00 += 1, foldernum_00 == 4))
          break;
        }
        if ((int)foldernum_00 < 4) {
          psVar1 = &save_file_8002c780;
          psVar4 = &sStack112;
          do {
            psVar2 = (save_file *)&psVar1->controller_config;
            psVar4->checksum1 = psVar1->checksum1;
            psVar4->checksum2 = psVar1->checksum2;
            *(undefined4 *)&psVar4->completion_bitflags =
                 *(undefined4 *)&psVar1->completion_bitflags;
            psVar1 = psVar2;
            psVar4 = (save_file *)&psVar4->controller_config;
          } while (psVar2 != &save_file_8002c7e0);
          psVar2 = getEEPROMforFoldernum(foldernum_00);
          psVar1 = psStack4;
          psVar4 = &sStack112;
          do {
            psVar3 = (save_file *)&psVar1->controller_config;
            psVar4->checksum1 = psVar1->checksum1;
            psVar4->checksum2 = psVar1->checksum2;
            *(undefined4 *)&psVar4->completion_bitflags =
                 *(undefined4 *)&psVar1->completion_bitflags;
            psVar1 = psVar3;
            psVar4 = (save_file *)&psVar4->controller_config;
          } while (psVar3 != psStack4 + 1);
          setEEPROMtoFoldernum(&sStack112,(byte)foldernum_00);
          foldernum = removed_would_have_returned_bond_for_folder_num(foldernum);
          set_selected_bond_to_folder(foldernum_00,foldernum);
          proc_7F01E504(psVar2,(undefined4 *)&sStack112);
        }
      }
    }
  }
  return;
}



void update_eeprom_to_current_solo_watch_settings(save_file *eepromsave)

{
  s16 sVar3;
  int iVar1;
  int iVar2;
  ushort uVar4;
  ushort uVar5;
  
  sVar3 = proc_7F0A9358();
  iVar1 = (int)sVar3;
  eepromsave->music_vol = (u8)(sVar3 >> 7);
  proc_7F0A9180();
  eepromsave->sfx_vol = (u8)(iVar1 >> 7);
  iVar1 = get_cur_player_look_vertical_inverted();
  iVar2 = cur_player_get_autoaim();
  uVar5 = (ushort)(iVar1 != 0);
  if (iVar2 != 0) {
    uVar5 = (ushort)(iVar1 != 0) | 2;
  }
  iVar1 = cur_player_get_aim_control();
  if (iVar1 != 0) {
    uVar5 = uVar5 | 4;
  }
  iVar1 = cur_player_get_sight_onscreen_control();
  if (iVar1 != 0) {
    uVar5 = uVar5 | 8;
  }
  iVar1 = cur_player_get_lookahead();
  if (iVar1 != 0) {
    uVar5 = uVar5 | 0x10;
  }
  iVar1 = cur_player_get_ammo_onscreen_setting();
  if (iVar1 != 0) {
    uVar5 = uVar5 | 0x20;
  }
  iVar1 = cur_player_get_screen_setting();
  uVar4 = uVar5 | 0x40;
  if (iVar1 != 1) {
    iVar1 = cur_player_get_screen_setting();
    uVar4 = uVar5;
    if (iVar1 == 2) {
      uVar4 = uVar5 | 0x800;
    }
  }
  iVar1 = get_screen_ratio();
  if (iVar1 != 0) {
    uVar4 = uVar4 | 0x80;
  }
  iVar1 = cur_player_get_control_type();
  *(ushort *)&eepromsave->controller_config = uVar4 | (ushort)(iVar1 << 8) & 0x700;
  return;
}



void get_screen_ratio_settings_for_mpgame_from_folder(int folder)

{
  ushort uVar1;
  save_file *psVar3;
  ulonglong uVar2;
  
  psVar3 = getEEPROMforFoldernum(folder);
  if (psVar3 != NULL) {
    proc_7F0A9364((ushort)psVar3->music_vol << 7 | (ushort)((int)(uint)psVar3->music_vol >> 1));
    proc_7F0A91A0((longlong)(int)((uint)psVar3->sfx_vol << 7 | (int)(uint)psVar3->sfx_vol >> 1));
    uVar1 = *(ushort *)&psVar3->controller_config;
    uVar2 = get_num_players();
    if (uVar2 == 1) {
      cur_player_set_control_type((int)((uint)uVar1 & 0x700) >> 8);
    }
    else {
      cur_player_set_control_type(0);
    }
    set_cur_player_look_vertical_inverted((uint)((uVar1 & 1) != 0));
    cur_player_set_autoaim((uint)((uVar1 & 2) != 0));
    cur_player_set_aim_control((uint)((uVar1 & 4) != 0));
    cur_player_set_sight_onscreen_control((uint)((uVar1 & 8) != 0));
    cur_player_set_lookahead((uint)((uVar1 & 0x10) != 0));
    cur_player_set_ammo_onscreen_setting((uint)((uVar1 & 0x20) != 0));
    if ((uVar1 & 0x800) == 0) {
      if ((uVar1 & 0x40) == 0) {
        cur_player_set_screen_setting(0);
      }
      else {
        cur_player_set_screen_setting(1);
      }
    }
    else {
      cur_player_set_screen_setting(2);
    }
    set_screen_ratio((uint)((uVar1 & 0x80) != 0));
  }
  return;
}



void delete_update_eeprom_file(int folder)

{
  int iVar1;
  save_file *psVar2;
  save_file *psVar3;
  save_file *psVar4;
  save_file sStack196;
  save_file sStack100;
  save_file *psStack4;
  
  if ((-1 < folder) && (folder < 4)) {
    psStack4 = getEEPROMforFoldernum(folder);
    psVar3 = &save_file_8002c7e0;
    psVar2 = &sStack100;
    do {
      psVar4 = (save_file *)&psVar3->controller_config;
      psVar2->checksum1 = psVar3->checksum1;
      psVar2->checksum2 = psVar3->checksum2;
      *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
      psVar3 = psVar4;
      psVar2 = (save_file *)&psVar2->controller_config;
    } while (psVar4 != &save_file_8002c840);
    if (psStack4 == NULL) {
      setEEPROMtoFoldernum(&sStack100,(byte)folder);
    }
    else {
      psVar3 = psStack4;
      psVar2 = &sStack100;
      do {
        psVar4 = (save_file *)&psVar3->controller_config;
        psVar2->checksum1 = psVar3->checksum1;
        psVar2->checksum2 = psVar3->checksum2;
        *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
        psVar3 = psVar4;
        psVar2 = (save_file *)&psVar2->controller_config;
      } while (psVar4 != psStack4 + 1);
    }
    psVar3 = &sStack100;
    psVar2 = &sStack196;
    do {
      psVar4 = (save_file *)&psVar3->controller_config;
      psVar2->checksum1 = psVar3->checksum1;
      psVar2->checksum2 = psVar3->checksum2;
      *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
      psVar3 = psVar4;
      psVar2 = (save_file *)&psVar2->controller_config;
    } while (psVar4 != (save_file *)&psStack4);
    update_eeprom_to_current_solo_watch_settings(&sStack196);
    iVar1 = _bcmp(&sStack196,&sStack100,0x60);
    if (iVar1 != 0) {
      proc_7F01E504(psStack4,(undefined4 *)&sStack196);
    }
  }
  return;
}



void copy_eeprom_to_stack_set_folder_num(int foldernum)

{
  u32 uVar1;
  save_file *psVar2;
  save_file *psVar3;
  save_file *psVar4;
  save_file sStack100;
  save_file *psStack4;
  
  if ((-1 < foldernum) && (foldernum < 4)) {
    psStack4 = getEEPROMforFoldernum(foldernum);
    psVar3 = &save_file_8002c840;
    psVar2 = &sStack100;
    do {
      psVar4 = (save_file *)&psVar3->controller_config;
      psVar2->checksum1 = psVar3->checksum1;
      psVar2->checksum2 = psVar3->checksum2;
      *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
      psVar3 = psVar4;
      psVar2 = (save_file *)&psVar2->controller_config;
    } while (psVar4 != &blank_eeprom);
    if (psStack4 == NULL) {
      setEEPROMtoFoldernum(&sStack100,(byte)foldernum);
    }
    else {
      psVar3 = psStack4;
      psVar2 = &sStack100;
      do {
        psVar4 = (save_file *)&psVar3->controller_config;
        psVar2->checksum1 = psVar3->checksum1;
        psVar2->checksum2 = psVar3->checksum2;
        *(undefined4 *)&psVar2->completion_bitflags = *(undefined4 *)&psVar3->completion_bitflags;
        psVar3 = psVar4;
        psVar2 = (save_file *)&psVar2->controller_config;
      } while (psVar4 != psStack4 + 1);
    }
    uVar1 = get_selected_bond(&sStack100);
    if (uVar1 != save1_selected_bond[foldernum]) {
      set_selected_bond(&sStack100,save1_selected_bond[foldernum]);
      proc_7F01E504(psStack4,(undefined4 *)&sStack100);
    }
  }
  return;
}



void copy_eeprom_from_to(int from,int to)

{
  save_file *psVar1;
  u32 *puVar2;
  u32 *puVar3;
  save_file *psVar4;
  save_file *psVar5;
  u32 auStack100 [24];
  u32 uStack4;
  
  psVar1 = getEEPROMforFoldernum(from);
  if (psVar1 == NULL) {
    psVar1 = &blank_eeprom;
    puVar2 = auStack100;
    do {
      psVar4 = (save_file *)&psVar1->controller_config;
      *puVar2 = psVar1->checksum1;
      puVar2[1] = psVar1->checksum2;
      puVar2[2] = *(u32 *)&psVar1->completion_bitflags;
      psVar1 = psVar4;
      puVar2 = puVar2 + 3;
    } while (psVar4 != (save_file *)&animation_rate);
    puVar2 = auStack100;
    do {
      puVar3 = puVar2 + 3;
      *(u32 *)to = *puVar2;
      ((u32 *)to)[1] = puVar2[1];
      ((u32 *)to)[2] = puVar2[2];
      puVar2 = puVar3;
      to = (int)((u32 *)to + 3);
    } while (puVar3 != &uStack4);
  }
  else {
    psVar4 = psVar1;
    do {
      psVar5 = (save_file *)&psVar4->controller_config;
      *(u32 *)to = psVar4->checksum1;
      ((u32 *)to)[1] = psVar4->checksum2;
      ((u32 *)to)[2] = *(u32 *)&psVar4->completion_bitflags;
      psVar4 = psVar5;
      to = (int)((u32 *)to + 3);
    } while (psVar5 != psVar1 + 1);
  }
  return;
}



void copy_eepromfile_a0_from_a1_to_buffer(longlong param_1,save_file *param_2)

{
  save_file *psVar1;
  save_file *psVar2;
  save_file *psVar3;
  
  if (param_1 == 100) {
    psVar2 = param_2;
    psVar1 = &save6;
    do {
      psVar3 = (save_file *)&psVar2->controller_config;
      psVar1->checksum1 = psVar2->checksum1;
      psVar1->checksum2 = psVar2->checksum2;
      *(undefined4 *)&psVar1->completion_bitflags = *(undefined4 *)&psVar2->completion_bitflags;
      psVar2 = psVar3;
      psVar1 = (save_file *)&psVar1->controller_config;
    } while (psVar3 != param_2 + 1);
  }
  return;
}



BOOL is007ModeUnlockedinFolder(u32 foldernum)

{
  save_file *folder;
  BOOL BVar1;
  BOOL found;
  int stagenum;
  
  folder = getEEPROMforFoldernum(foldernum);
  if (folder == NULL) {
    BVar1 = FALSE;
  }
  else {
    stagenum = SP_STAGE_DAM;
    if ((folder->bitflags & 1) == 0) {
      do {
        found = doesSaveHaveStageCompletedOnDifficulty(folder,stagenum,DIFFICULTY_00);
        if (found == FALSE) break;
        stagenum += SP_STAGE_FACILITY;
      } while (stagenum != 0x14);
      if (stagenum == SP_STAGE_MAX) {
        BVar1 = TRUE;
      }
      else {
        BVar1 = FALSE;
      }
    }
    else {
      BVar1 = TRUE;
    }
  }
  return BVar1;
}



undefined4 get_numguards(void)

{
  return num_guards;
}



void get_ptr_allocated_block_for_weapon_vertices(int param_1)

{
  proc_7F0BD714(param_1 << 4);
  return;
}



void set_show_patrols_flag(BOOL flag)

{
  show_patrols_flag = flag;
  return;
}



undefined4 get_show_patrols_flag(void)

{
  return show_patrols_flag;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F01F574(void)

{
  longlong in_v0;
  int in_a0_lo;
  undefined4 uVar1;
  float in_f12;
  float in_f14;
  
  if (*(int *)(in_a0_lo + 0x14) == 0) {
    uVar1 = 0;
  }
  else {
    proc_7F0B20D0((int *)(in_a0_lo + 0x14),in_f12,in_f14,*(float *)(in_a0_lo + 8));
    if (in_v0 < 0) {
      uVar1 = proc_7F0B2970();
    }
    else {
      uVar1 = 0;
    }
  }
  return uVar1;
}



void set_or_unset_GUARDdata_flag(GUARDdata *guard,int param_2)

{
  if (param_2 == 0) {
    guard->special_bitflags = guard->special_bitflags | 0x100;
    return;
  }
  guard->special_bitflags = guard->special_bitflags & 0xfeff;
  return;
}



int proc_7F01F614(GUARDdata *guard,int param_2,float *param_3,float *param_4,int param_5)

{
  bool bVar1;
  longlong lVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fStack88;
  float fStack80;
  float afStack44 [2];
  float fStack36;
  float afStack32 [2];
  float fStack24;
  float fStack20;
  undefined4 uStack16;
  float fStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = 0;
  iStack8 = param_2;
  proc_7F023160(guard->POSdata_pointer,&fStack20,&fStack12,&uStack16);
  set_or_unset_GUARDdata_flag(guard,0);
  proc_7F0B1CC4();
  lVar2 = proc_7F0B0E24();
  if ((lVar2 == 0) || (lVar2 = proc_7F0B18B8(), -1 < lVar2)) {
    lVar2 = proc_7F0B28B0(afStack32,afStack44);
    if (lVar2 != 0) {
      fVar7 = *param_4 - *param_3;
      fVar6 = param_4[2] - param_3[2];
      if ((afStack32[0] == afStack44[0]) && (fStack24 == fStack36)) {
        bVar1 = false;
      }
      else {
        fVar5 = fStack36 - fStack24;
        fVar3 = afStack44[0] - afStack32[0];
        fVar4 = sqrtf(fVar5 * fVar5 + fVar3 * fVar3);
        fVar3 = fVar3 * (1.00000000 / fVar4);
        fVar5 = fVar5 * (1.00000000 / fVar4);
        fVar4 = fVar5 * fVar6 + fVar7 * fVar3;
        fStack88 = fVar3 * fVar4 + *param_3;
        fStack80 = fVar5 * fVar4 + param_3[2];
        bVar1 = true;
        iStack8 = param_2;
      }
      if (((bVar1) && (lVar2 = proc_7F0B0E24(), lVar2 != 0)) && (lVar2 = proc_7F0B18B8(), lVar2 < 0)
         ) {
        *param_4 = fStack88;
        param_4[2] = fStack80;
        guard->set_0_init_players = '\x02';
        iStack4 = iStack8;
      }
      else {
        if ((fStack24 - param_4[2]) * (fStack24 - param_4[2]) +
            (afStack32[0] - *param_4) * (afStack32[0] - *param_4) <= fStack20 * fStack20) {
          if (afStack32[0] == *param_3) {
            if (fStack24 == param_3[2]) goto LAB_7f01fbdc;
            fVar3 = param_3[2];
          }
          else {
            fVar3 = param_3[2];
          }
          fVar4 = -(fStack24 - fVar3);
          afStack32[0] = afStack32[0] - *param_3;
          fVar3 = sqrtf(afStack32[0] * afStack32[0] + fVar4 * fVar4);
          fVar4 = fVar4 * (1.00000000 / fVar3);
          afStack32[0] = afStack32[0] * (1.00000000 / fVar3);
          fVar3 = *param_3;
          fVar7 = afStack32[0] * fVar6 + fVar7 * fVar4;
          fVar6 = param_3[2];
          iStack8 = param_2;
          lVar2 = proc_7F0B0E24();
          if ((lVar2 != 0) && (lVar2 = proc_7F0B18B8(), lVar2 < 0)) {
            *param_4 = fVar4 * fVar7 + fVar3;
            param_4[2] = afStack32[0] * fVar7 + fVar6;
            guard->set_0_init_players = '\x02';
            iStack4 = iStack8;
          }
        }
        else {
          if ((fStack36 - param_4[2]) * (fStack36 - param_4[2]) +
              (afStack44[0] - *param_4) * (afStack44[0] - *param_4) <= fStack20 * fStack20) {
            if (afStack44[0] == *param_3) {
              if (fStack36 == param_3[2]) goto LAB_7f01fbdc;
              fVar3 = param_3[2];
            }
            else {
              fVar3 = param_3[2];
            }
            fVar4 = -(fStack36 - fVar3);
            afStack44[0] = afStack44[0] - *param_3;
            fVar3 = sqrtf(afStack44[0] * afStack44[0] + fVar4 * fVar4);
            fVar4 = fVar4 * (1.00000000 / fVar3);
            afStack44[0] = afStack44[0] * (1.00000000 / fVar3);
            fVar3 = *param_3;
            fVar6 = afStack44[0] * fVar6 + fVar7 * fVar4;
            fVar7 = param_3[2];
            iStack8 = param_2;
            lVar2 = proc_7F0B0E24();
            if ((lVar2 != 0) && (lVar2 = proc_7F0B18B8(), lVar2 < 0)) {
              *param_4 = fVar4 * fVar6 + fVar3;
              param_4[2] = afStack44[0] * fVar6 + fVar7;
              guard->set_0_init_players = '\x02';
              iStack4 = iStack8;
            }
          }
        }
      }
    }
  }
  else {
    if (param_5 != 0) {
      guard->set_0_init_players = '\0';
      guard->field_CC = global_timer;
    }
    iStack4 = iStack8;
  }
LAB_7f01fbdc:
  set_or_unset_GUARDdata_flag(guard,1);
  if (iStack4 == 0) {
    guard->set_0_init_players = '\x01';
  }
  return iStack4;
}



undefined8 proc_7F01FC10(GUARDdata *guard,float *param_2,float *param_3,float *param_4)

{
  bool bVar1;
  GUARDdata *guard_00;
  bool bVar2;
  float fVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  guard_00 = *(GUARDdata **)&guard->rounds_fired_left_gun;
  bVar1 = false;
  fVar6 = 0.00000000;
  if (*(int *)(guard_00->POSdata_pointer + 0x14) == 0) goto LAB_7f01ff80;
  if ((guard_00->current_action == dying) &&
     (fVar6 = *(float *)&guard_00->field_38, 0.00000000 < fVar6)) {
    fVar6 = (guard->field_A4 * global_timer_delta * (fVar6 - (float)guard_00->path_target_position))
            / fVar6;
    *param_3 = *param_3 + (float)guard_00->field_40 * fVar6;
    param_3[1] = param_3[1] + (float)guard_00->field_44 * fVar6;
    param_3[2] = param_3[2] + (float)guard_00->field_48 * fVar6;
    *(float *)&guard_00->path_target_position =
         (float)guard_00->path_target_position + global_timer_delta * guard->field_A4;
    if (*(float *)&guard_00->field_38 < (float)guard_00->path_target_position) {
      *(undefined4 *)&guard_00->field_38 = 0;
    }
  }
  *param_3 = *param_3 + guard_00->field_B0 * global_timer_delta;
  param_3[2] = param_3[2] + guard_00->field_B8 * global_timer_delta;
  iVar4 = proc_7F01F614(guard_00,*(int *)(guard_00->POSdata_pointer + 0x14),param_2,param_3,1);
  bVar1 = iVar4 != 0;
  if (bVar1) {
    *(int *)(guard_00->POSdata_pointer + 0x14) = iVar4;
  }
  if ((guard_00->guard_bitflags & 0x1000U) != 0) {
    fVar6 = guard_00->clipping_height;
    goto LAB_7f01ff80;
  }
  fVar6 = (float)proc_7F0B2970();
  guard_00->clipping_height = fVar6;
  if ((guard_00->guard_bitflags & 1U) == 0) {
    if (guard_00->field_B4 == 0.00000000) {
      fVar5 = guard_00->clipping_height;
      if (fVar5 < guard_00->field_A8) goto LAB_7f01fe44;
      bVar2 = guard_00->field_A8 <= fVar5;
    }
    else {
LAB_7f01fe44:
      proc_7F057D44(&guard_00->field_A8,&guard_00->field_B4,0.00000000);
      fVar5 = guard_00->clipping_height;
      if (guard_00->field_A8 <= fVar5) {
        guard_00->field_A8 = fVar5;
        fVar3 = flt_80051D14;
        guard_00->field_B4 = 0.00000000;
        guard_00->field_A4 = fVar5 / fVar3;
        bVar2 = guard_00->field_A8 <= fVar5;
      }
      else {
        bVar2 = guard_00->field_A8 <= fVar5;
      }
    }
    fVar3 = flt_80051D18;
    if (bVar2) {
      iVar4 = 0;
      if (0 < clock_timer) {
        fVar7 = guard_00->field_A4;
        while( true ) {
          iVar4 += 1;
          guard_00->field_B0 = guard_00->field_B0 * fVar3;
          guard_00->field_A4 = fVar7 * fVar3 + fVar5;
          guard_00->field_B8 = guard_00->field_B8 * fVar3;
          if (clock_timer <= iVar4) break;
          fVar7 = guard_00->field_A4;
        }
      }
      fVar5 = flt_80051D1C;
      bVar2 = flt_80051D1C <= guard_00->field_B0;
      guard_00->field_A8 = guard_00->field_A4 * flt_80051D20;
      if (bVar2) goto LAB_7f01ff60;
      if (flt_80051D24 < guard_00->field_B0) {
        if (guard_00->field_B8 < fVar5) {
          if (flt_80051D24 < guard_00->field_B8) {
            guard_00->field_B8 = 0.00000000;
            guard_00->field_B0 = 0.00000000;
            goto LAB_7f01ff60;
          }
          fVar5 = guard_00->field_A8;
        }
        else {
          fVar5 = guard_00->field_A8;
        }
      }
      else {
        fVar5 = guard_00->field_A8;
      }
    }
    else {
      fVar5 = guard_00->field_A8;
    }
  }
  else {
    iVar4 = extract_id_from_object_structure_microcode
                      ((int)guard,**(ushort ***)&guard->set_0_when_fading);
    guard_00->guard_bitflags = guard_00->guard_bitflags & 0xfffffffe;
    guard_00->field_A8 = guard_00->clipping_height;
    guard_00->field_A4 = guard_00->clipping_height / flt_80051D10;
    *(undefined4 *)(iVar4 + 0x38) = *(undefined4 *)(iVar4 + 0x28);
LAB_7f01ff60:
    fVar5 = guard_00->field_A8;
  }
  param_3[1] = param_3[1] + (fVar5 - fVar6);
LAB_7f01ff80:
  *param_4 = fVar6;
  if (!bVar1) {
    *param_3 = *param_2;
    param_3[2] = param_2[2];
  }
  return 1;
}



int get_next_available_guardID(void)

{
  int iVar1;
  int iVar2;
  GUARDdata *pGVar3;
  
  iVar2 = 0;
  iVar1 = 0;
  if (0 < num_guards) {
    pGVar3 = ptr_guard_data;
    do {
      iVar1 += 0x1dc;
      if (pGVar3->MODELdata_pointer == 0) {
        iVar2 += 1;
      }
      pGVar3 = pGVar3 + 1;
    } while (iVar1 < num_guards * 0x1dc);
  }
  return iVar2;
}



void proc_7F020018(GUARDdata *guard,u32 param_2)

{
  f32 fVar1;
  
  fVar1 = get_007_health_mod();
  *(float *)&guard->health = (float)fVar1 * (float)param_2;
  return;
}



f32 get_guard_health(GUARDdata *param_1)

{
  return param_1->health;
}



void guard_calc_final_damage_recieved(GUARDdata *guard,u32 param_2)

{
  f32 fVar1;
  
  fVar1 = get_007_health_mod();
  *(float *)&guard->damage_received = (float)guard->damage_received - (float)param_2 * (float)fVar1;
  return;
}



float proc_7F020090(GUARDdata *guard)

{
  if (0.00000000 <= (float)guard->damage_received) {
    return 0.00000000;
  }
  return -(float)guard->damage_received;
}



u32 init_GUARDdata_with_set_values(u32 param_1,u32 param_2,u32 param_3,u32 param_4)

{
  int *piVar1;
  int iVar2;
  GUARDdata *pGVar3;
  int iVar4;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  GUARDdata *guard;
  f32 fVar5;
  float fVar6;
  float extraout_f12;
  f32 extraout_f12_00;
  f32 extraout_f14;
  undefined4 in_stack_00000010;
  int in_stack_00000014;
  
  guard = NULL;
  iVar2 = 0;
  if (0 < num_guards) {
    iVar4 = 0;
    pGVar3 = ptr_guard_data;
    do {
      piVar1 = &pGVar3->MODELdata_pointer;
      iVar2 += 1;
      pGVar3 = pGVar3 + 1;
      if (*piVar1 == 0) {
        guard = (GUARDdata *)(&ptr_guard_data->guardID_1 + iVar4);
        break;
      }
      iVar4 += 0x1dc;
    } while (iVar2 < num_guards);
  }
  *(undefined *)param_1 = 3;
  *(GUARDdata **)(param_1 + 4) = guard;
  *(undefined4 *)(param_1 + 8) = *(undefined4 *)param_3;
  *(undefined4 *)(param_1 + 0xc) = *(undefined4 *)(param_3 + 4);
  *(undefined4 *)(param_1 + 0x10) = *(undefined4 *)(param_3 + 8);
  *(undefined4 *)(param_1 + 0x14) = in_stack_00000010;
  proc_7F06FF5C(param_2,proc_7F01FC10);
  *(undefined2 *)param_2 = 10;
  *(GUARDdata **)(param_2 + 4) = guard;
  setsuboffset(param_2,(float *)param_3,extraout_a2_lo,extraout_a3_lo);
  setsubroty(param_2,extraout_f12,(float)param_4,extraout_a2_lo_00);
  proc_7F06FF18(param_2,extraout_f12_00,extraout_f14);
  *(short *)guard = (short)player1_guardID;
  player1_guardID += 1;
  guard->head = '\0';
  guard->body = '\0';
  guard->POSdata_pointer = param_1;
  guard->MODELdata_pointer = param_2;
  guard->pertains_to_action61 = 0;
  guard->shots_hit = '\0';
  guard->field_C8 = 0;
  guard->set_0_init_players = '\0';
  iVar2 = global_timer;
  guard->last_bond_detection_time = 0;
  guard->field_D8 = 0.00000000;
  guard->field_DC = 0.00000000;
  guard->field_E0 = 0.00000000;
  guard->field_E4 = 0;
  guard->timer = 0;
  guard->field_F0 = 0;
  guard->shots_near = '\0';
  guard->field_13C = 0.00000000;
  guard->damage_received = 0;
  guard->reaction_time = 250.00000000;
  guard->field_CC = iVar2;
  guard->hearing_ability = 1.00000000;
  fVar5 = get_007_health_mod();
  *(float *)&guard->health = (float)fVar5 * 4.00000000;
  proc_7F04009C(param_1,(byte *)&guard->field_F8);
  guard->alpha = -1;
  guard->ptr_SEbuffer1 = 0;
  guard->ptr_SEbuffer2 = 0;
  guard->ptr_SEbuffer3 = 0;
  guard->ptr_SEbuffer4 = 0;
  guard->field_178 = 0;
  guard->field_17C = 0;
  guard->guard_bitflags = 1;
  guard->special_bitflags = 0;
  guard->field_A4 = 0.00000000;
  guard->field_A8 = 0.00000000;
  guard->clipping_height = 0.00000000;
  guard->field_B0 = 0.00000000;
  guard->field_B4 = 0.00000000;
  guard->field_B8 = 0.00000000;
  guard->field_F4 = guard->field_F8;
  guard->field_F5 = guard->field_F9;
  guard->field_F6 = guard->field_FA;
  guard->field_F7 = guard->field_FB;
  guard->xpos = *(float *)param_3;
  guard->ypos = *(float *)(param_3 + 4);
  fVar6 = *(float *)(param_3 + 8);
  guard->current_action = None;
  guard->set_0_when_fading = '\0';
  guard->zpos = fVar6;
  guard->action_block_offset = 0;
  guard->action_block_return = -1;
  guard->userbyte1 = '\0';
  guard->userbyte2 = '\0';
  guard->guardtype_bitflags_scientist = '\0';
  guard->randomvalue = '\0';
  guard->loopcounter = 0;
  guard->preset_of_2328_object_to_interact_with = -1;
  guard->FA_target = -1;
  guard->FB_target = -1;
  guard->FC_target = -1;
  guard->field_180 = -1;
  guard->field_1AC = -1;
  guard->rounds_fired_left_gun = '\0';
  guard->rounds_fired_right_gun = '\0';
  guard->beligerancy = '\0';
  guard->field_2 = '\0';
  guard->field_3 = '\0';
  guard->field_D = '\0';
  guard->field_11 = -1;
  guard->field_140 = 0.00000000;
  guard->field_144 = 0.00000000;
  guard->field_148 = 0.00000000;
  guard->field_14C = 0.00000000;
  guard->field_150 = 0;
  guard->field_154 = 0;
  guard->field_158 = 0;
  guard->field_15C = 0;
  guard->field_E = '\0';
  guard->handle_positiondata_right_gun = 0;
  guard->handle_positiondata_left_gun = 0;
  guard->handle_positiondata_hat = 0;
  guard->collision_radius = 20.00000000;
  guard->action_block_pointer = in_stack_00000014;
  guard->field_28 = 0x43390000;
  proc_7F01FC10((GUARDdata *)param_2,(float *)(param_1 + 8),(float *)(param_1 + 8),
                &guard->clipping_height);
  proc_7F020D94(guard);
  return param_1;
}



int replace_GUARDdata_with_actual_values
              (u32 param_1,u32 param_2,u32 param_3,undefined4 param_4,undefined4 param_5)

{
  object_standard *poVar1;
  
  poVar1 = remove_last_obj_pos_data_entry();
  if (poVar1 != NULL) {
    poVar1 = (object_standard *)init_GUARDdata_with_set_values((u32)poVar1,param_1,param_2,param_3);
  }
  return (int)poVar1;
}



void disable_sounds_attached_to_player_then_something(int param_1)

{
  undefined2 *puVar1;
  int *objinstance;
  int iVar2;
  int iVar3;
  ulonglong uVar4;
  int iVar5;
  
  puVar1 = *(undefined2 **)(param_1 + 4);
  objinstance = *(int **)(puVar1 + 0xe);
  if (*(int *)(puVar1 + 0xb4) == 0) {
    iVar5 = *(int *)(puVar1 + 0xb6);
  }
  else {
    uVar4 = music_related_26(*(int *)(puVar1 + 0xb4));
    if (uVar4 == 0) {
      iVar5 = *(int *)(puVar1 + 0xb6);
    }
    else {
      music_related_28(*(int *)(puVar1 + 0xb4));
      iVar5 = *(int *)(puVar1 + 0xb6);
    }
  }
  if (iVar5 == 0) {
    iVar5 = *(int *)(puVar1 + 0xb8);
  }
  else {
    uVar4 = music_related_26(iVar5);
    if (uVar4 == 0) {
      iVar5 = *(int *)(puVar1 + 0xb8);
    }
    else {
      music_related_28(*(int *)(puVar1 + 0xb6));
      iVar5 = *(int *)(puVar1 + 0xb8);
    }
  }
  if (iVar5 == 0) {
    iVar5 = *(int *)(puVar1 + 0xba);
  }
  else {
    uVar4 = music_related_26(iVar5);
    if (uVar4 == 0) {
      iVar5 = *(int *)(puVar1 + 0xba);
    }
    else {
      music_related_28(*(int *)(puVar1 + 0xb8));
      iVar5 = *(int *)(puVar1 + 0xba);
    }
  }
  if ((iVar5 != 0) && (uVar4 = music_related_26(iVar5), uVar4 != 0)) {
    music_related_28(*(int *)(puVar1 + 0xba));
  }
  proc_7F050DE8((int)objinstance);
  proc_7F03E18C(param_1);
  iVar5 = *(int *)(param_1 + 0x20);
  while (iVar5 != 0) {
    iVar2 = *(int *)(iVar5 + 4);
    iVar3 = *(int *)(iVar5 + 0x24);
    proc_7F04C044(iVar5);
    proc_7F041024(iVar2,1);
    iVar5 = iVar3;
  }
  set_aircraft_obj_inst_scale_to_zero(objinstance);
  *(undefined4 *)(puVar1 + 0xe) = 0;
  *puVar1 = 0xffff;
  if (*(int *)(puVar1 + 0x10) != 0) {
    proc_7F06B248(*(int *)(puVar1 + 0x10));
  }
  return;
}



void animation_speed_related(f32 rate)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  f32 extraout_f12;
  f32 in_f14;
  f32 extraout_f14;
  
  iVar4 = 0;
  animation_rate = rate;
  if (0 < num_guards) {
    iVar3 = 0;
    iVar2 = num_guards;
    animation_rate = rate;
    do {
      iVar1 = *(int *)((int)&ptr_guard_data->MODELdata_pointer + iVar3);
      if (iVar1 != 0) {
        proc_7F06FF18(iVar1,rate,in_f14);
        rate = extraout_f12;
        in_f14 = extraout_f14;
        iVar2 = num_guards;
      }
      iVar4 += 1;
      iVar3 += 0x1dc;
    } while (iVar4 < iVar2);
  }
  return;
}



f32 get_animation_rate(void)

{
  return animation_rate;
}



void proc_7F0205F0(int param_1)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  if (*(char *)(param_1 + 0xe) < '\x02') {
    *(undefined4 *)(param_1 + 0x140) = *(undefined4 *)(param_1 + 0x150);
    *(undefined4 *)(param_1 + 0x144) = *(undefined4 *)(param_1 + 0x154);
    *(undefined4 *)(param_1 + 0x148) = *(undefined4 *)(param_1 + 0x158);
    *(undefined4 *)(param_1 + 0x14c) = *(undefined4 *)(param_1 + 0x15c);
    return;
  }
  fVar2 = 1.00000000;
  fVar1 = global_timer_delta / (float)(int)*(char *)(param_1 + 0xe);
  if (1.00000000 < fVar1) {
    fVar3 = *(float *)(param_1 + 0x140);
  }
  else {
    fVar3 = *(float *)(param_1 + 0x140);
    fVar2 = fVar1;
  }
  *(float *)(param_1 + 0x140) = fVar3 + (*(float *)(param_1 + 0x150) - fVar3) * fVar2;
  *(float *)(param_1 + 0x144) =
       *(float *)(param_1 + 0x144) +
       (*(float *)(param_1 + 0x154) - *(float *)(param_1 + 0x144)) * fVar2;
  *(float *)(param_1 + 0x148) =
       *(float *)(param_1 + 0x148) +
       (*(float *)(param_1 + 0x158) - *(float *)(param_1 + 0x148)) * fVar2;
  *(float *)(param_1 + 0x14c) =
       *(float *)(param_1 + 0x14c) +
       (*(float *)(param_1 + 0x15c) - *(float *)(param_1 + 0x14c)) * fVar2;
  *(char *)(param_1 + 0xe) = *(char *)(param_1 + 0xe) - (char)clock_timer;
  return;
}



void proc_7F0206D4(GUARDdata *guard)

{
  u32 uVar1;
  
  if (guard->field_11 < '\0') {
    guard->field_11 = '\x01';
    guard->special_bitflags = guard->special_bitflags & 0xfff;
    uVar1 = get_random_value();
    if (uVar1 % 3 == 0) {
      guard->special_bitflags = guard->special_bitflags | 0x1000;
    }
    else {
      if (uVar1 % 3 == 1) {
        guard->special_bitflags = guard->special_bitflags | 0x2000;
      }
    }
    uVar1 = get_random_value();
    if (uVar1 % 3 == 0) {
      guard->special_bitflags = guard->special_bitflags | 0x4000;
    }
    else {
      if (uVar1 % 3 == 1) {
        guard->special_bitflags = guard->special_bitflags | 0x8000;
      }
    }
  }
  return;
}



float proc_7F020794(GUARDdata *param_1)

{
  float fVar1;
  
  fVar1 = (float)(int)param_1->field_11;
  if (fVar1 < 10.00000000) {
    fVar1 = sinf((fVar1 * flt_80051D28 * 0.25000000) / 10.00000000);
  }
  else {
    fVar1 = sinf(((fVar1 - 10.00000000) * flt_80051D2C * 0.25000000) / 20.00000000);
    fVar1 = 1.00000000 - fVar1;
  }
  return fVar1;
}



// WARNING: Instruction at (ram,0x7f020890) overlaps instruction at (ram,0x7f02088c)
// 

void proc_7F02083C(int savefilefolder,float *param_2)

{
  ushort uVar1;
  bool bVar2;
  uint uVar3;
  float *pfVar4;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 uVar5;
  float fVar6;
  float fVar7;
  float afStack104 [16];
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack4 = 1.00000000;
  uVar3 = proc_7F0927BC(0xc);
  if (uVar3 != 0) {
    if (savefilefolder == 0) {
      fStack4 = 4.00000000;
    }
    else {
      if ((savefilefolder == 2) || (savefilefolder == 3)) {
        fStack4 = 2.50000000;
      }
    }
  }
  if ((((savefilefolder != 2) && (savefilefolder != 3)) && (savefilefolder != 1)) &&
     (savefilefolder != 0)) {
    return;
  }
  fStack12 = 0.00000000;
  fStack16 = 0.00000000;
  if (savefilefolder == 3) {
    fStack8 = end_save_files->field_144;
  }
  else {
    if (savefilefolder == 2) {
      fStack8 = end_save_files->field_140;
    }
    else {
      if (savefilefolder == 1) {
        fStack8 = end_save_files->field_148;
        if ((end_save_files->special_bitflags & 0x400U) != 0) {
          if (flt_80051D30 < fStack8) {
            fStack8 = fStack8 - flt_80051D30;
          }
          else {
            if (fStack8 < flt_80051D34) {
              fStack8 = fStack8 + flt_80051D38;
            }
            else {
              fStack8 = 0.00000000;
            }
          }
        }
        fStack12 = end_save_files->field_14C;
      }
      else {
        fStack8 = 0.00000000;
        if (savefilefolder == 0) {
          if ((end_save_files->special_bitflags & 0x400U) == 0) {
            if (*(char *)(end_save_files->MODELdata_pointer + 0x24) == '\0') {
              fStack8 = end_save_files->field_144;
            }
            else {
              fStack8 = end_save_files->field_140;
            }
          }
          else {
            fVar7 = end_save_files->field_148;
            fStack8 = fVar7;
            if ((((end_save_files->special_bitflags & 0x400U) != 0) &&
                (fStack8 = flt_80051D3C, fVar7 <= flt_80051D3C)) &&
               (fStack8 = flt_80051D40, flt_80051D40 <= fVar7)) {
              fStack8 = fVar7;
            }
          }
        }
      }
    }
  }
  if (end_save_files->field_11 < '\0') {
    bVar2 = fStack8 == 0.00000000;
  }
  else {
    if ((savefilefolder == 3) || (savefilefolder == 2)) {
      fVar7 = proc_7F020794(end_save_files);
      fVar7 = (fVar7 * flt_80051D44 * 15.00000000) / 360.00000000;
      fStack8 = fStack8 - fVar7;
      if ((end_save_files->special_bitflags & 0x1000U) == 0) {
        if ((end_save_files->special_bitflags & 0x2000U) == 0) {
          bVar2 = fStack8 == 0.00000000;
          goto code_r0x7f020b5c;
        }
        fStack12 = fStack12 + fVar7;
      }
      else {
        fStack12 = fStack12 - fVar7;
      }
    }
    else {
      if (savefilefolder != 1) {
        bVar2 = fStack8 == 0.00000000;
        goto code_r0x7f020b5c;
      }
      fVar7 = proc_7F020794(end_save_files);
      fVar7 = fVar7 * flt_80051D48;
      uVar1 = end_save_files->special_bitflags;
      fVar6 = (fVar7 * 15.00000000) / 360.00000000;
      fStack8 = fStack8 + fVar6;
      if ((uVar1 & 0x1000) == 0) {
        if ((uVar1 & 0x2000) != 0) {
          fStack12 = fStack12 - fVar6;
        }
      }
      else {
        fStack12 = fStack12 + fVar6;
      }
      if ((uVar1 & 0x4000) == 0) {
        if ((uVar1 & 0x8000) != 0) {
          fStack16 = 0.00000000 - (fVar7 * 10.00000000) / 360.00000000;
        }
      }
      else {
        fStack16 = (fVar7 * 10.00000000) / 360.00000000 + 0.00000000;
      }
    }
    bVar2 = fStack8 == 0.00000000;
  }
code_r0x7f020b5c:
  if ((((!bVar2) || (fStack12 != 0.00000000)) || (fStack16 != 0.00000000)) ||
     (fStack4 != 1.00000000)) {
    fStack40 = (float)proc_7F02C190();
    if (fStack8 < 0.00000000) {
      fStack8 = -fStack8;
    }
    else {
      fStack8 = flt_80051D4C - fStack8;
    }
    if (fStack12 < 0.00000000) {
      fStack12 = fStack12 + flt_80051D50;
    }
    pfVar4 = (float *)proc_7F078444();
    proc_7F058098(pfVar4,param_2);
    fStack36 = param_2[0xc];
    fStack32 = param_2[0xd];
    fStack28 = param_2[0xe];
    param_2[0xc] = 0.00000000;
    param_2[0xd] = 0.00000000;
    param_2[0xe] = 0.00000000;
    if ((fStack8 == 0.00000000) && (fStack16 == 0.00000000)) {
      proc_7F0585FC(fStack12,extraout_a0,afStack104);
      proc_7F058098(afStack104,param_2);
      uVar5 = extraout_a0_04;
    }
    else {
      fVar7 = fStack12 - fStack40;
      if (fVar7 < 0.00000000) {
        fVar7 = fVar7 + flt_80051D54;
      }
      proc_7F0585FC(fVar7,extraout_a0,afStack104);
      proc_7F058098(afStack104,param_2);
      uVar5 = extraout_a0_00;
      if (fStack8 != 0.00000000) {
        proc_7F058570(fStack8,extraout_a0_00,afStack104);
        proc_7F058098(afStack104,param_2);
        uVar5 = extraout_a0_01;
      }
      if (fStack16 != 0.00000000) {
        proc_7F058688(fStack16,uVar5,afStack104);
        proc_7F058098(afStack104,param_2);
        uVar5 = extraout_a0_02;
      }
      proc_7F0585FC(fStack40,uVar5,afStack104);
      proc_7F058098(afStack104,param_2);
      uVar5 = extraout_a0_03;
    }
    if (fStack4 != 1.00000000) {
      matrix_multiply_A1_by_F12(fStack4,uVar5,param_2);
    }
    param_2[0xc] = fStack36;
    param_2[0xd] = fStack32;
    param_2[0xe] = fStack28;
    pfVar4 = (float *)proc_7F0783C4();
    proc_7F058098(pfVar4,param_2);
  }
  return;
}



void proc_7F020D94(GUARDdata *param_1)

{
  float extraout_f12;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  char *pcStack4;
  
  pcStack4 = (char *)param_1->POSdata_pointer;
  fStack16 = *(float *)(pcStack4 + 8) - 50.00000000;
  fStack12 = param_1->clipping_height - 1.00000000;
  fStack8 = *(float *)(pcStack4 + 0x10) - 50.00000000;
  fStack28 = *(float *)(pcStack4 + 8) + 50.00000000;
  fStack24 = *(float *)(pcStack4 + 0xc) + 100.00000000;
  fStack20 = *(float *)(pcStack4 + 0x10) + 50.00000000;
  proc_7F03E18C((int)pcStack4);
  proc_7F03E27C(pcStack4,&fStack16,&fStack28,extraout_f12);
  proc_7F03E210((int)pcStack4);
  return;
}



void proc_7F020E40(int param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  int objanim;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  
  iVar1 = *(int *)(param_1 + 0x18);
  objanim = *(int *)(param_1 + 0x1c);
  if ((*(ushort *)(param_1 + 0x12) & 0x800) == 0) {
    getsuboffset(objanim,(undefined4 *)(param_1 + 0xbc),param_3,param_4);
    proc_7F070AEC(objanim,param_2,1);
    subcalcpos(objanim,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    proc_7F04009C(iVar1,(byte *)(param_1 + 0xf8));
    getsuboffset(objanim,(undefined4 *)(iVar1 + 8),extraout_a2_lo_00,extraout_a3_lo_00);
    proc_7F020D94((GUARDdata *)param_1);
  }
  else {
    subcalcpos(objanim,param_2,param_3,param_4);
    getsuboffset(objanim,(undefined4 *)(iVar1 + 8),extraout_a2_lo_01,extraout_a3_lo_01);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f021344) overlaps instruction at (ram,0x7f021340)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

ulonglong proc_7F020EF0(char *param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  GUARDdata *pGVar1;
  ushort *partdesc;
  int iVar2;
  longlong lVar3;
  uint uVar6;
  int *piVar7;
  float *pfVar8;
  undefined8 uVar4;
  u32 uVar9;
  ulonglong uVar5;
  undefined4 *puVar10;
  int iVar11;
  guard_action_type gVar13;
  int iVar12;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  uint extraout_a1_lo;
  uint extraout_a1_lo_00;
  uint extraout_a1_lo_01;
  uint extraout_a1_lo_02;
  uint extraout_a1_lo_03;
  uint extraout_a1_lo_04;
  uint extraout_a1_lo_05;
  uint extraout_a1_lo_06;
  uint extraout_a1_lo_07;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  uint extraout_a1_lo_08;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a2_lo_03;
  undefined4 extraout_a2_lo_04;
  undefined4 extraout_a2_lo_05;
  undefined4 extraout_a2_lo_06;
  undefined4 extraout_a2_lo_07;
  undefined4 extraout_a2_lo_08;
  undefined4 extraout_a2_lo_09;
  undefined4 extraout_a2_lo_10;
  undefined4 extraout_a2_lo_11;
  undefined4 uVar14;
  undefined8 extraout_a2;
  undefined8 extraout_a2_00;
  undefined4 extraout_a2_lo_12;
  undefined4 extraout_a2_lo_13;
  undefined4 extraout_a2_lo_14;
  undefined8 extraout_a2_01;
  undefined8 extraout_a2_02;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  undefined4 extraout_a3_lo_03;
  undefined4 extraout_a3_lo_04;
  undefined4 extraout_a3_lo_05;
  undefined4 extraout_a3_lo_06;
  undefined4 extraout_a3_lo_07;
  undefined4 extraout_a3_lo_08;
  undefined4 extraout_a3_lo_09;
  undefined4 extraout_a3_lo_10;
  undefined4 extraout_a3_lo_11;
  undefined4 extraout_a3_lo_12;
  undefined4 uVar15;
  undefined8 extraout_a3;
  undefined8 extraout_a3_00;
  undefined4 extraout_a3_lo_13;
  undefined4 extraout_a3_lo_14;
  undefined4 extraout_a3_lo_15;
  undefined8 extraout_a3_01;
  undefined8 extraout_a3_02;
  ushort uVar16;
  float **ppfVar17;
  float **ppfVar18;
  float **ppfVar19;
  float **ppfVar20;
  float fVar21;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f14;
  undefined4 auStack244 [16];
  float afStack180 [16];
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  uint uStack92;
  int iStack88;
  uint uStack84;
  undefined4 uStack80;
  uint uStack76;
  uint uStack72;
  float *apfStack64 [4];
  float *pfStack48;
  
  ppfVar19 = (float **)&dword_8002CC6C;
  ppfVar17 = apfStack64;
  do {
    ppfVar20 = ppfVar19 + 3;
    ppfVar18 = ppfVar17 + 3;
    *ppfVar17 = *ppfVar19;
    ppfVar17[1] = ppfVar19[1];
    ppfVar17[2] = ppfVar19[2];
    ppfVar19 = ppfVar20;
    ppfVar17 = ppfVar18;
  } while (ppfVar20 != (float **)&dword_8002CCA8);
  *ppfVar18 = _dword_8002CCA8;
  pGVar1 = *(GUARDdata **)(param_1 + 4);
  uStack72 = pGVar1->MODELdata_pointer;
  uStack80 = 1;
  uStack84 = clock_timer;
  if (((pGVar1->guard_bitflags & 0x400U) == 0) || (pGVar1->guard_bitflags << 0xd < 0)) {
    if (dword_8002C904 == 0) {
      proc_7F0326BC((int)pGVar1);
      param_2 = extraout_a1_lo_00;
      param_4 = extraout_a3_lo_01;
      param_3 = extraout_a2_lo_00;
      if (pGVar1->MODELdata_pointer == 0) {
        return 1;
      }
    }
    else {
      if (*(int *)(animation_table_ptrs1 + dword_8002C908 * 4) != 1) {
        uVar6 = proc_7F06F5AC(uStack72);
        param_2 = *(uint *)(animation_table_ptrs1 + dword_8002C908 * 4);
        param_3 = 0;
        param_4 = extraout_a3_lo;
        if (uVar6 != param_2) {
          proc_7F06FCA8(uStack72,param_2,0,extraout_f12,0,extraout_f14);
          param_2 = extraout_a1_lo;
          param_4 = extraout_a3_lo_00;
          param_3 = extraout_a2_lo;
        }
      }
    }
    if (dword_8002C90C == 0) {
      uVar16 = pGVar1->special_bitflags;
    }
    else {
      uStack84 = 0;
      if (dword_8002C910 == 0) {
        uVar16 = pGVar1->special_bitflags;
      }
      else {
        uStack84 = 1;
        uVar16 = pGVar1->special_bitflags;
      }
    }
  }
  else {
    uVar16 = pGVar1->special_bitflags;
  }
  if ((uVar16 & 0x20) != 0) {
    disable_sounds_attached_to_player_then_something((int)param_1);
    return 1;
  }
  if (pGVar1->handle_positiondata_right_gun == 0) {
    iVar11 = pGVar1->handle_positiondata_left_gun;
  }
  else {
    iVar11 = *(int *)(pGVar1->handle_positiondata_right_gun + 4);
    if ((*(uint *)(iVar11 + 100) & 4) == 0) {
      iVar11 = pGVar1->handle_positiondata_left_gun;
    }
    else {
      proc_7F041024(iVar11,1);
      iVar11 = pGVar1->handle_positiondata_left_gun;
      param_2 = extraout_a1_lo_01;
      param_4 = extraout_a3_lo_02;
      param_3 = extraout_a2_lo_01;
    }
  }
  if (iVar11 == 0) {
    uVar6 = pGVar1->guard_bitflags;
  }
  else {
    if ((*(uint *)(*(int *)(iVar11 + 4) + 100) & 4) == 0) {
      uVar6 = pGVar1->guard_bitflags;
    }
    else {
      proc_7F041024(*(int *)(iVar11 + 4),1);
      uVar6 = pGVar1->guard_bitflags;
      param_2 = extraout_a1_lo_02;
      param_4 = extraout_a3_lo_03;
      param_3 = extraout_a2_lo_02;
    }
  }
  if ((uVar6 & 0x400) == 0) {
    if (*param_1 == '\x06') {
      lVar3 = proc_7F09B15C((int)param_1);
      param_4 = extraout_a3_lo_04;
      param_3 = extraout_a2_lo_03;
      if ((&ptr_BONDdata_p1)[(int)lVar3]->unknown != 1) {
        uVar6 = pGVar1->guard_bitflags;
        param_2 = extraout_a1_lo_03;
        param_4 = extraout_a3_lo_04;
        param_3 = extraout_a2_lo_03;
        goto LAB_7f021118;
      }
    }
    else {
LAB_7f021118:
      if (-1 < (int)(uVar6 << 8)) {
        gVar13 = pGVar1->current_action;
        if ((gVar13 == walk_path) || (gVar13 == moving)) {
          if (((gVar13 == walk_path) && (pGVar1->field_38 == '\x06')) ||
             ((gVar13 == moving && (*(char *)&pGVar1->field_5C == '\x06')))) {
            fVar21 = getinstsize(uStack72,param_2,0xe,param_4);
            uStack76 = proc_7F054D6C(param_1,(float *)(param_1 + 8),extraout_f12_00,(int)fVar21);
            if (uStack76 != 0) {
              getsuboffset(uStack72,&pGVar1->xpos,extraout_a2_lo_04,extraout_a3_lo_05);
              subcalcpos(uStack72,extraout_a1_lo_04,extraout_a2_lo_05,extraout_a3_lo_06);
              proc_7F04009C((int)param_1,(byte *)&pGVar1->field_F8);
              getsuboffset(uStack72,(undefined4 *)(param_1 + 8),extraout_a2_lo_06,extraout_a3_lo_07)
              ;
              proc_7F020D94(pGVar1);
            }
          }
          else {
            proc_7F020E40((int)pGVar1,uStack84,0xe,param_4);
            fVar21 = getinstsize(uStack72,extraout_a1_lo_05,extraout_a2_lo_07,extraout_a3_lo_08);
            uStack76 = proc_7F054D6C(param_1,(float *)(param_1 + 8),extraout_f12_01,(int)fVar21);
            if (uStack76 != 0) {
              if (pGVar1->current_action == walk_path) {
                pGVar1->field_78 = global_timer;
              }
              else {
                if (pGVar1->current_action == moving) {
                  pGVar1->field_9C = global_timer;
                }
              }
            }
          }
          gVar13 = pGVar1->current_action;
        }
        else {
          if ((gVar13 == swattingflies) && (pGVar1->bond_position == 0)) {
            fVar21 = getinstsize(uStack72,param_2,0xe,param_4);
            uStack76 = proc_7F054D6C(param_1,(float *)(param_1 + 8),extraout_f12_02,(int)fVar21);
            if ((uStack76 == 0) || (pGVar1->path_target_position != 0)) {
              proc_7F070AEC(uStack72,uStack84,0);
            }
            else {
              proc_7F020E40((int)pGVar1,uStack84,extraout_a2_lo_08,extraout_a3_lo_09);
            }
            gVar13 = pGVar1->current_action;
          }
          else {
            if (gVar13 == standing) {
              fVar21 = getinstsize(uStack72,param_2,0xe,param_4);
              uStack76 = proc_7F054D6C(param_1,(float *)(param_1 + 8),extraout_f12_03,(int)fVar21);
              if ((uStack76 == 0) && ((pGVar1->guard_bitflags & 1U) == 0)) {
                if (*(int *)(uStack72 + 0x54) != 0) {
                  proc_7F070AEC(uStack72,uStack84,0);
                }
              }
              else {
                proc_7F020E40((int)pGVar1,uStack84,extraout_a2_lo_09,extraout_a3_lo_10);
              }
              gVar13 = pGVar1->current_action;
            }
            else {
              if ((uVar6 & 0x4000) == 0) {
                proc_7F020E40((int)pGVar1,uStack84,0xe,param_4);
                uVar6 = extraout_a1_lo_07;
                uVar14 = extraout_a2_lo_11;
                uVar15 = extraout_a3_lo_12;
              }
              else {
                proc_7F070AEC(uStack72,uStack84,0);
                uVar6 = extraout_a1_lo_06;
                uVar14 = extraout_a2_lo_10;
                uVar15 = extraout_a3_lo_11;
              }
              fVar21 = getinstsize(uStack72,uVar6,uVar14,uVar15);
              uStack76 = proc_7F054D6C(param_1,(float *)(param_1 + 8),extraout_f12_04,(int)fVar21);
              gVar13 = pGVar1->current_action;
            }
          }
        }
        goto LAB_7f0213c8;
      }
    }
    uStack76 = 1;
    if (((pGVar1->current_action == swattingflies) && (pGVar1->bond_position == 0)) &&
       (param_3 = 0, pGVar1->path_target_position != 0)) {
      proc_7F070AEC(uStack72,uStack84,0);
    }
    else {
      proc_7F020E40((int)pGVar1,uStack84,param_3,param_4);
    }
    gVar13 = pGVar1->current_action;
  }
  else {
    uStack76 = 0;
    gVar13 = pGVar1->current_action;
  }
LAB_7f0213c8:
  if (gVar13 == standing) {
    if (*(int *)(uStack72 + 0x54) != 0) {
      uVar16 = pGVar1->special_bitflags;
      goto LAB_7f0213f8;
    }
    if (*param_1 == '\x06') goto LAB_7f0213f4;
  }
  else {
LAB_7f0213f4:
    uVar16 = pGVar1->special_bitflags;
LAB_7f0213f8:
    pGVar1->special_bitflags = uVar16 | 0x200;
  }
  proc_7F0205F0((int)pGVar1);
  uVar4 = extraout_a1;
  extraout_a2_02 = extraout_a2;
  extraout_a3_02 = extraout_a3;
  if (pGVar1->pertains_to_action61 != 0) {
    proc_7F06B248(pGVar1->pertains_to_action61);
    pGVar1->pertains_to_action61 = 0;
    uVar4 = extraout_a1_00;
    extraout_a2_02 = extraout_a2_00;
    extraout_a3_02 = extraout_a3_00;
  }
  if (uStack76 == 0) {
    iVar11 = pGVar1->handle_positiondata_right_gun;
    if (iVar11 == 0) {
      iVar11 = pGVar1->handle_positiondata_left_gun;
    }
    else {
      *(byte *)(iVar11 + 1) = *(byte *)(iVar11 + 1) & 0xfd;
      iVar11 = pGVar1->handle_positiondata_left_gun;
    }
    if (iVar11 == 0) {
      iVar11 = pGVar1->handle_positiondata_hat;
    }
    else {
      *(byte *)(iVar11 + 1) = *(byte *)(iVar11 + 1) & 0xfd;
      iVar11 = pGVar1->handle_positiondata_hat;
    }
    if (iVar11 != 0) {
      *(byte *)(iVar11 + 1) = *(byte *)(iVar11 + 1) & 0xfd;
    }
    param_1[1] = param_1[1] & 0xfd;
    pGVar1->field_F4 = pGVar1->field_F8;
    pGVar1->field_F5 = pGVar1->field_F9;
    pGVar1->field_F6 = pGVar1->field_FA;
    pGVar1->field_F7 = pGVar1->field_FB;
    goto LAB_7f021aac;
  }
  get_debug_chrnum_flag();
  param_1[1] = param_1[1] | 2;
  pGVar1->guard_bitflags = pGVar1->guard_bitflags | 8;
  uVar6 = proc_7F0927BC(0xc);
  if (uVar6 != 0) {
    set_flt_80036088(0.31250000);
  }
  dword_80036090 = proc_7F02083C;
  end_save_files = pGVar1;
  pfStack48 = (float *)proc_7F0783C4();
  apfStack64[0] = pfStack48;
  proc_7F0BD714((int)*(short *)(*(int *)(uStack72 + 8) + 0xe) << 6);
  if ((-1 < end_save_files->field_11) &&
     (end_save_files->field_11 = end_save_files->field_11 + (char)clock_timer,
     '\x1d' < end_save_files->field_11)) {
    end_save_files->field_11 = -1;
  }
  subcalcmatrices(apfStack64,uStack72,extraout_a2_lo_12,extraout_a3_lo_13);
  dword_80036090 = NULL;
  set_flt_80036088(1.00000000);
  proc_7F040310((byte *)&pGVar1->field_F4,(byte *)&pGVar1->field_F8);
  fVar21 = proc_7F06C768(uStack72,extraout_a1_lo_08,extraout_a2_lo_13,extraout_a3_lo_14);
  *(float *)(param_1 + 0x18) = fVar21;
  piVar7 = proc_7F06B120(NULL,uStack72);
  *(int **)&pGVar1->pertains_to_action61 = piVar7;
  proc_7F0523F8((int)param_1,0,(int **)&pGVar1->pertains_to_action61);
  proc_7F0523F8((int)param_1,1,(int **)&pGVar1->pertains_to_action61);
  iVar11 = pGVar1->handle_positiondata_hat;
  if (iVar11 != 0) {
    iStack88 = *(int *)(iVar11 + 4);
    uStack92 = *(uint *)(iStack88 + 0x14);
    *(byte *)(iVar11 + 1) = *(byte *)(iVar11 + 1) | 2;
    pfVar8 = (float *)proc_7F06C660(uStack72,*(ushort **)(uStack92 + 0x1c),0);
    apfStack64[0] = pfVar8;
    proc_7F0BD714((int)*(short *)(*(int *)(uStack92 + 8) + 0xe) << 6);
    pfStack48 = pfVar8;
    instcalcmatrices(apfStack64,uStack92,extraout_a2_lo_14,extraout_a3_lo_15);
    if ((pGVar1->head < '*') || ('E' < pGVar1->head)) {
LAB_7f021998:
      uVar16 = pGVar1->special_bitflags;
    }
    else {
      fStack104 = dword_8002CCAC;
      fStack100 = (float)dword_8002CCB0;
      fStack96 = (float)dword_8002CCB4;
      uVar4 = get_hat_model(pGVar1->handle_positiondata_hat);
      iVar11 = ((int)pGVar1->head + -0x2a) * 0x90 + (int)uVar4 * 0x18;
      pfVar8 = (float *)(&flt_8003E464 + iVar11);
      uVar9 = get_debug_render_raster();
      if (uVar9 == 0) {
        uVar5 = get_controller_buttons_held('\0',L_TRIG);
        if (uVar5 != 0) {
          uVar5 = get_controller_buttons_held('\0',A_BUTTON);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b94) = *(float *)(iVar11 + -0x7ffc1b94) - flt_80051D58;
          }
          uVar5 = get_controller_buttons_held('\0',B_BUTTON);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b94) = *(float *)(iVar11 + -0x7ffc1b94) + flt_80051D5C;
          }
          uVar5 = get_controller_buttons_held('\0',D_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b98) = *(float *)(iVar11 + -0x7ffc1b98) - flt_80051D60;
          }
          uVar5 = get_controller_buttons_held('\0',U_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b98) = *(float *)(iVar11 + -0x7ffc1b98) + flt_80051D64;
          }
          uVar5 = get_controller_buttons_held('\0',L_CBUTTONS);
          if (uVar5 != 0) {
            *pfVar8 = *pfVar8 - flt_80051D68;
          }
          uVar5 = get_controller_buttons_held('\0',R_CBUTTONS);
          if (uVar5 != 0) {
            *pfVar8 = *pfVar8 + flt_80051D6C;
          }
        }
        uVar5 = get_controller_buttons_held('\0',R_TRIG);
        if (uVar5 != 0) {
          uVar5 = get_controller_buttons_held('\0',A_BUTTON);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b88) = *(float *)(iVar11 + -0x7ffc1b88) * flt_80051D70;
          }
          uVar5 = get_controller_buttons_held('\0',B_BUTTON);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b88) = *(float *)(iVar11 + -0x7ffc1b88) * flt_80051D74;
          }
          uVar5 = get_controller_buttons_held('\0',D_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b8c) = *(float *)(iVar11 + -0x7ffc1b8c) * flt_80051D78;
          }
          uVar5 = get_controller_buttons_held('\0',U_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b8c) = *(float *)(iVar11 + -0x7ffc1b8c) * flt_80051D7C;
          }
          uVar5 = get_controller_buttons_held('\0',L_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b90) = *(float *)(iVar11 + -0x7ffc1b90) * flt_80051D80;
          }
          uVar5 = get_controller_buttons_held('\0',R_CBUTTONS);
          if (uVar5 != 0) {
            *(float *)(iVar11 + -0x7ffc1b90) = *(float *)(iVar11 + -0x7ffc1b90) * flt_80051D84;
          }
        }
      }
      fStack104 = *pfVar8 * flt_80051D88;
      fStack100 = *(float *)(iVar11 + -0x7ffc1b98) * flt_80051D88;
      fStack96 = *(float *)(iVar11 + -0x7ffc1b94) * flt_80051D88;
      fStack108 = *(float *)(iVar11 + -0x7ffc1b90);
      fStack112 = *(float *)(iVar11 + -0x7ffc1b8c);
      fStack116 = *(float *)(iVar11 + -0x7ffc1b88);
      init_something_copy_posdata_to_it((int *)&fStack104,(int *)afStack180);
      proc_7F0589B4(fStack108,extraout_a0,afStack180);
      proc_7F0589E4(fStack112,extraout_a0_00,(int)afStack180);
      proc_7F058A4C(fStack116,extraout_a0_01,(int)afStack180);
      proc_7F05818C(*(float **)(uStack92 + 0xc),afStack180,(int)auStack244);
      proc_7F058020(auStack244,*(undefined4 **)(uStack92 + 0xc));
      if ((int)uVar4 == 2) {
        uStack80 = 0;
        goto LAB_7f021998;
      }
      uVar16 = pGVar1->special_bitflags;
    }
    if (((uVar16 & 1) == 0) || ((*(uint *)(iStack88 + 100) & 0x80) == 0)) {
      piVar7 = proc_7F06B120((int *)pGVar1->pertains_to_action61,uStack92);
      *(int **)&pGVar1->pertains_to_action61 = piVar7;
    }
  }
  partdesc = *(ushort **)(*(int *)(*(int *)(uStack72 + 8) + 8) + 0x10);
  if (partdesc != NULL) {
    piVar7 = (int *)extract_id_from_object_structure_microcode(uStack72,partdesc);
    if ((*piVar7 != 0) && (partdesc = *(ushort **)(*(int *)(*piVar7 + 8) + 4), partdesc != NULL)) {
      puVar10 = (undefined4 *)extract_id_from_object_structure_microcode(uStack72,partdesc);
      *puVar10 = uStack80;
    }
  }
  proc_7F06B29C((int *)pGVar1->pertains_to_action61);
  iVar11 = proc_7F06BB28(pGVar1->pertains_to_action61);
  pGVar1->pertains_to_action61 = iVar11;
  uVar4 = extraout_a1_01;
  extraout_a2_02 = extraout_a2_01;
  extraout_a3_02 = extraout_a3_01;
LAB_7f021aac:
  if ((pGVar1->guard_bitflags & 0x400U) == 0) {
    uVar16 = pGVar1->special_bitflags;
    if ((uVar16 & 1) != 0) {
      iVar11 = *(int *)(param_1 + 0x20);
      if (iVar11 != 0) {
        iVar2 = *(int *)(iVar11 + 0x24);
        while (iVar12 = iVar2,
              proc_7F04C130(iVar11,(uint)uVar4,(int)extraout_a2_02,(int)extraout_a3_02), iVar12 != 0
              ) {
          uVar4 = extraout_a1_02;
          extraout_a2_02 = extraout_a2_02;
          extraout_a3_02 = extraout_a3_02;
          iVar2 = *(int *)(iVar12 + 0x24);
          iVar11 = iVar12;
        }
        uVar16 = pGVar1->special_bitflags;
      }
      pGVar1->special_bitflags = uVar16 & 0xfffe;
    }
    proc_7F02E26C((short *)pGVar1);
  }
  return 0;
}



void proc_7F021B20(GUARDdata *param_1)

{
  int iVar1;
  ushort uVar2;
  int iVar3;
  
  iVar3 = *(int *)(param_1->POSdata_pointer + 0x20);
  if (iVar3 == 0) {
    uVar2 = param_1->special_bitflags;
  }
  else {
    iVar1 = param_1->handle_positiondata_hat;
    while( true ) {
      if (iVar3 == iVar1) {
        iVar3 = *(int *)(iVar3 + 0x24);
      }
      else {
        if (iVar3 == param_1->handle_positiondata_left_gun) {
          iVar3 = *(int *)(iVar3 + 0x24);
        }
        else {
          if (iVar3 == param_1->handle_positiondata_right_gun) {
            iVar3 = *(int *)(iVar3 + 0x24);
          }
          else {
            if ((*(uint *)(*(int *)(iVar3 + 4) + 8) & 0x2000) == 0) {
              proc_7F04BFD0(iVar3,1);
              iVar3 = *(int *)(iVar3 + 0x24);
            }
            else {
              iVar3 = *(int *)(iVar3 + 0x24);
            }
          }
        }
      }
      if (iVar3 == 0) break;
      iVar1 = param_1->handle_positiondata_hat;
    }
    uVar2 = param_1->special_bitflags;
  }
  param_1->special_bitflags = uVar2 | 1;
  return;
}



void proc_7F021BB4(undefined *param_1)

{
  byte_8002CCB8 = *param_1;
  DAT_8002ccb9 = param_1[1];
  DAT_8002ccba = param_1[2];
  return;
}



void proc_7F021BD8(undefined *param_1)

{
  *param_1 = byte_8002CCB8;
  param_1[1] = DAT_8002ccb9;
  param_1[2] = DAT_8002ccba;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

longlong proc_7F021BFC(char *param_1,uint *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  longlong lVar5;
  undefined4 extraout_a2_lo;
  int iVar6;
  undefined4 extraout_a3_lo;
  int iVar7;
  int iVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f14;
  uint *puStackX4;
  int iStack140;
  uint uStack136;
  uint uStack132;
  uint uStack128;
  uint uStack124;
  float fStack120;
  float fStack116;
  undefined4 uStack104;
  undefined4 uStack100;
  undefined4 uStack96;
  uint *puStack92;
  undefined4 uStack56;
  uint uStack52;
  uint uStack48;
  uint uStack36;
  undefined4 uStack32;
  int iStack28;
  float afStack24 [3];
  float fStack12;
  
  iVar1 = *(int *)(param_1 + 4);
  uStack36 = (uint)*(byte *)(iVar1 + 0xc);
  if (-1 < *(int *)(iVar1 + 0x14) << 5) {
    fVar13 = getinstsize(*(int *)(iVar1 + 0x1c),(uint)param_2,param_3,*(int *)(iVar1 + 0x1c));
    proc_7F054B80((int)param_1);
    uStack36 = (uint)((float)uStack36 * fVar13);
  }
  if (((int)uStack36 < 0xff) || (*(int *)(iVar1 + 0x14) << 0xe < 0)) {
    if (param_3 == 0) {
      return (longlong)(int)param_2;
    }
    uStack32 = 3;
  }
  else {
    if (param_3 == 0) {
      uStack32 = 1;
    }
    else {
      uStack32 = 2;
    }
  }
  lVar5 = if_sky_present_convert_values((int)param_1,afStack24);
  iStack28 = (int)lVar5;
  puStackX4 = param_2;
  if (lVar5 != 0) {
    puVar11 = &dword_8002CCBC;
    puVar9 = &uStack104;
    puStackX4 = param_2;
    if (0 < (int)uStack36) {
      do {
        puVar12 = puVar11 + 3;
        puVar10 = puVar9 + 3;
        *puVar9 = *puVar11;
        puVar9[1] = puVar11[1];
        puVar9[2] = puVar11[2];
        puVar11 = puVar12;
        puVar9 = puVar10;
      } while (puVar12 != (undefined4 *)&dword_8002CCF8);
      iVar6 = 0;
      *puVar10 = _dword_8002CCF8;
      iStack140 = 0x50;
      iVar2 = *(int *)(iVar1 + 0x160);
      iVar3 = *(int *)(iVar1 + 0x164);
      iVar4 = *(int *)(iVar1 + 0x1d8);
      iVar7 = 0;
      iVar8 = 0;
      if (iVar2 != 0) {
        iVar6 = *(int *)(iVar2 + 4);
      }
      if (iVar3 != 0) {
        iVar7 = *(int *)(iVar3 + 4);
      }
      if (iVar4 != 0) {
        iVar8 = *(int *)(iVar4 + 4);
      }
      lVar5 = proc_7F054A64(param_1,&fStack120);
      if ((lVar5 < 1) || (*(int *)(iVar1 + 0x14) << 8 < 0)) {
        puStack92 = proc_7F0B4FB4(param_2);
      }
      else {
        puStack92 = proc_7F0B4FF4(param_2,extraout_f12,extraout_f14,fStack120,fStack116);
      }
      uStack100 = 1;
      uStack96 = uStack32;
      if ((*(uint *)(iVar1 + 0x14) & 0x2000) == 0) {
        if (iStack28 == 1) {
          iStack140 = (int)((1.00000000 - fStack12) * 80.00000000);
        }
      }
      else {
        iStack140 = 0;
      }
      proc_7F073FC8(iStack140);
      uStack136 = (uint)*(byte *)(iVar1 + 0xf4);
      uStack132 = (uint)*(byte *)(iVar1 + 0xf5);
      uStack128 = (uint)*(byte *)(iVar1 + 0xf6);
      uStack124 = (uint)*(byte *)(iVar1 + 0xf7);
      proc_7F040384((int *)&uStack136,(longlong)iStack28,afStack24);
      uStack52 = (uint)DAT_8002ccba << 8 | (uint)byte_8002CCB8 << 0x18 | (uint)DAT_8002ccb9 << 0x10;
      uStack48 = uStack124 | uStack136 << 0x18 | uStack132 << 0x10 | uStack128 << 8;
      if ((int)uStack36 < 0xff) {
        uStack56 = 8;
        uStack52 |= uStack36 & 0xff;
      }
      else {
        uStack56 = 7;
      }
      cur_player_stat_ptr->time_other_players_on_screen =
           cur_player_stat_ptr->time_other_players_on_screen + 1;
      drawjointlist((int)&uStack104,*(uint **)(iVar1 + 0x20),extraout_a2_lo,extraout_a3_lo);
      puStackX4 = puStack92;
      if ((iVar6 != 0) &&
         (((ulonglong)*(byte *)(iVar6 + 2) & (longlong)(1 << (param_3 & 0x1f)) & 0xffU) != 0)) {
        puStackX4 = proc_7F0A1A94(puStack92,iVar2,param_3);
      }
      if ((iVar7 != 0) &&
         (((ulonglong)*(byte *)(iVar7 + 2) & (longlong)(1 << (param_3 & 0x1f)) & 0xffU) != 0)) {
        puStackX4 = proc_7F0A1A94(puStackX4,iVar3,param_3);
      }
      if ((iVar8 != 0) &&
         (((ulonglong)*(byte *)(iVar8 + 2) & (longlong)(1 << (param_3 & 0x1f)) & 0xffU) != 0)) {
        puStackX4 = proc_7F0A1A94(puStackX4,iVar4,param_3);
      }
      if (param_3 != 0) {
        proc_7F08BD48(*(undefined4 **)(*(int *)(iVar1 + 0x1c) + 0xc),
                      (int)*(short *)(*(int *)(*(int *)(iVar1 + 0x1c) + 8) + 0xe));
        if ((iVar6 != 0) && ((*(uint *)(iVar6 + 100) & 0x800) == 0)) {
          proc_7F08BD48(*(undefined4 **)(*(int *)(iVar6 + 0x14) + 0xc),
                        (int)*(short *)(*(int *)(*(int *)(iVar6 + 0x14) + 8) + 0xe));
        }
        if ((iVar7 != 0) && ((*(uint *)(iVar7 + 100) & 0x800) == 0)) {
          proc_7F08BD48(*(undefined4 **)(*(int *)(iVar7 + 0x14) + 0xc),
                        (int)*(short *)(*(int *)(*(int *)(iVar7 + 0x14) + 8) + 0xe));
        }
        if (iVar8 != 0) {
          proc_7F08BD48(*(undefined4 **)(*(int *)(iVar8 + 0x14) + 0xc),
                        (int)*(short *)(*(int *)(*(int *)(iVar8 + 0x14) + 8) + 0xe));
        }
      }
    }
  }
  if (param_3 != 0) {
    proc_7F06B248(*(int *)(iVar1 + 0x20));
    *(undefined4 *)(iVar1 + 0x20) = 0;
  }
  return (longlong)(int)puStackX4;
}



void proc_7F022078(int param_1,longlong param_2,float *param_3,undefined4 *param_4)

{
  animation_something *paVar1;
  u32 uVar2;
  float *pfVar3;
  longlong lVar4;
  int iVar5;
  int iVar6;
  float fVar7;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float local_14;
  float local_10;
  float local_c;
  
  iVar5 = 0;
  iVar6 = 0;
  if (dword_8002C914.anonymous_0 != -1) {
    paVar1 = &dword_8002C914;
    lVar4 = (longlong)dword_8002C914.anonymous_0;
    do {
      iVar6 = iVar5;
      if (param_2 == lVar4) break;
      lVar4 = (longlong)paVar1[1].anonymous_0;
      iVar5 += 1;
      paVar1 = paVar1 + 1;
      iVar6 = 0;
    } while (lVar4 != -1);
  }
  if ((&dword_8002C914)[iVar6].field_10 == 0) {
    iVar5 = (&dword_8002C914)[iVar6].field_4;
  }
  else {
    uVar2 = get_random_value();
    in_f12 = extraout_f12;
    if ((uVar2 & 4) == 0) {
      fVar7 = sqrtf(param_3[2] * param_3[2] + *param_3 * *param_3 + param_3[1] * param_3[1]);
      local_c = 42.00000000 / fVar7 + 1.00000000;
      local_14 = *param_3 * local_c;
      local_10 = param_3[1] * local_c;
      local_c = param_3[2] * local_c;
      pfVar3 = (float *)proc_7F078444();
      proc_7F058474(pfVar3,&local_14);
      proc_7F0A3E1C(&local_14,(&dword_8002C914)[iVar6].field_10,extraout_f12_00,
                    (short)(&dword_8002C914)[iVar6].field_18);
      in_f12 = extraout_f12_01;
    }
    iVar5 = (&dword_8002C914)[iVar6].field_4;
  }
  if (iVar5 != 0) {
    proc_7F0A3E1C(param_4,iVar5,in_f12,(short)(&dword_8002C914)[iVar6].field_C);
  }
  return;
}



void proc_7F0221DC(int param_1,int param_2,ushort *param_3,float *param_4)

{
  char cVar1;
  int *piVar2;
  u32 uVar3;
  char cVar4;
  int iVar5;
  short *psVar6;
  undefined4 *puVar7;
  longlong lVar8;
  int iVar9;
  longlong lVar10;
  ushort *puVar11;
  undefined4 *puVar12;
  ushort uVar13;
  ushort *puVar14;
  int iVar15;
  int iVar16;
  int *piVar17;
  ushort *puVar18;
  ushort *partdesc;
  longlong lVar19;
  longlong lVar20;
  int iVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  int iStack80;
  
  fVar22 = *param_4;
  partdesc = NULL;
  lVar19 = 0;
  iVar9 = 0;
  iVar15 = 0x7fffffff;
  fVar23 = param_4[1];
  fVar24 = param_4[2];
  if (param_3 == NULL) {
LAB_7f0223c0:
    if (partdesc != NULL) {
      iVar15 = *(int *)(partdesc + 2);
      piVar2 = (int *)extract_id_from_object_structure_microcode(param_1,partdesc);
      iVar16 = 0;
      piVar17 = NULL;
      iStack80 = 0;
      uVar3 = get_random_value();
      cVar1 = (char)(uVar3 % 0x32);
      cVar4 = cVar1 + '\x14';
      if (param_2 == 8) {
        cVar4 = cVar1 + 'x';
      }
      if (param_2 == 0xf) {
        cVar4 += '2';
        iVar5 = *(int *)(iVar15 + 0x10);
      }
      else {
        iVar5 = *(int *)(iVar15 + 0x10);
      }
      iVar9 *= 0x10;
      partdesc = *(ushort **)(iVar5 + iVar9 + 8);
      if (partdesc != NULL) {
        iVar16 = *(int *)(partdesc + 2);
        piVar17 = (int *)extract_id_from_object_structure_microcode(param_1,partdesc);
        iStack80 = (int)*(short *)(*(int *)(iVar15 + 0x10) + iVar9 + 0xc);
      }
      if ((*(int *)(iVar15 + 8) == *piVar2) &&
         (puVar7 = (undefined4 *)proc_7F09BE4C((longlong)*(short *)(iVar15 + 0xc),0xcccc,0,0),
         puVar7 != NULL)) {
        *(undefined4 **)piVar2 = puVar7;
        lVar19 = 0;
        iVar5 = 0;
        if (0 < *(short *)(iVar15 + 0xc)) {
          iVar21 = *(int *)(iVar15 + 8);
          while( true ) {
            lVar19 = (longlong)((int)lVar19 + 1);
            puVar12 = (undefined4 *)(iVar21 + iVar5);
            iVar5 += 0x10;
            *puVar7 = *puVar12;
            puVar7[1] = puVar12[1];
            puVar7[2] = puVar12[2];
            puVar7[3] = puVar12[3];
            if ((longlong)*(short *)(iVar15 + 0xc) <= lVar19) break;
            iVar21 = *(int *)(iVar15 + 8);
            puVar7 = puVar7 + 4;
          }
        }
      }
      if (piVar17 == NULL) {
        iVar5 = *(int *)(iVar15 + 8);
      }
      else {
        if ((*(int *)(iVar16 + 8) == *piVar17) &&
           (puVar7 = (undefined4 *)proc_7F09BE4C((longlong)*(short *)(iVar16 + 0xc),0xcccc,0,0),
           puVar7 != NULL)) {
          *(undefined4 **)piVar17 = puVar7;
          lVar19 = 0;
          iVar5 = 0;
          if (0 < *(short *)(iVar16 + 0xc)) {
            iVar21 = *(int *)(iVar16 + 8);
            while( true ) {
              lVar19 = (longlong)((int)lVar19 + 1);
              puVar12 = (undefined4 *)(iVar21 + iVar5);
              iVar5 += 0x10;
              *puVar7 = *puVar12;
              puVar7[1] = puVar12[1];
              puVar7[2] = puVar12[2];
              puVar7[3] = puVar12[3];
              if ((longlong)*(short *)(iVar16 + 0xc) <= lVar19) break;
              iVar21 = *(int *)(iVar16 + 8);
              puVar7 = puVar7 + 4;
            }
          }
        }
        iVar5 = *(int *)(iVar15 + 8);
      }
      if ((iVar5 != *piVar2) &&
         (lVar19 = (longlong)*(short *)(*(int *)(iVar15 + 0x10) + iVar9 + 6), -1 < lVar19)) {
        iVar9 = *piVar2;
        while( true ) {
          *(char *)(iVar9 + (int)lVar19 * 0x10 + 0xf) = cVar4;
          lVar19 = (longlong)*(short *)(*(int *)(iVar15 + 0x14) + (int)lVar19 * 2);
          if (lVar19 < 0) break;
          iVar9 = *piVar2;
        }
      }
      if (((piVar17 != NULL) && (*(int *)(iVar16 + 8) != *piVar17)) &&
         (lVar19 = (longlong)*(short *)(*(int *)(iVar16 + 0x10) + iStack80 * 0x10 + 6), -1 < lVar19)
         ) {
        iVar9 = *piVar17;
        while( true ) {
          *(char *)(iVar9 + (int)lVar19 * 0x10 + 0xf) = cVar4;
          lVar19 = (longlong)*(short *)(*(int *)(iVar16 + 0x14) + (int)lVar19 * 2);
          if (lVar19 < 0) break;
          iVar9 = *piVar17;
        }
      }
    }
    return;
  }
  uVar13 = *param_3;
  puVar14 = param_3;
  do {
    uVar13 &= 0xff;
    if (uVar13 == 8) {
      proc_7F06E970(param_1,puVar14);
      puVar11 = *(ushort **)(puVar14 + 10);
    }
    else {
      if (uVar13 == 0x12) {
        process_12_handle_switch(param_1,puVar14);
        puVar11 = *(ushort **)(puVar14 + 10);
      }
      else {
        if (uVar13 == 0x17) {
          process_17_pointer_to_head(param_1,puVar14);
          puVar11 = *(ushort **)(puVar14 + 10);
        }
        else {
          puVar11 = *(ushort **)(puVar14 + 10);
          if (uVar13 == 0x18) {
            lVar8 = 0;
            lVar10 = (longlong)*(short *)(*(int *)(puVar14 + 2) + 0xe);
            if (0 < lVar10) {
              psVar6 = *(short **)(*(int *)(puVar14 + 2) + 0x10);
              lVar20 = lVar19;
              puVar18 = partdesc;
              do {
                iVar9 = ((int)fVar22 - (int)*psVar6) * ((int)fVar22 - (int)*psVar6) +
                        ((int)fVar23 - (int)psVar6[1]) * ((int)fVar23 - (int)psVar6[1]) +
                        ((int)fVar24 - (int)psVar6[2]) * ((int)fVar24 - (int)psVar6[2]);
                lVar19 = lVar8;
                partdesc = puVar14;
                if (iVar15 <= iVar9) {
                  lVar19 = lVar20;
                  iVar9 = iVar15;
                  partdesc = puVar18;
                }
                iVar15 = iVar9;
                lVar8 = (longlong)((int)lVar8 + 1);
                psVar6 = psVar6 + 8;
                lVar20 = lVar19;
                puVar18 = partdesc;
              } while (lVar8 < lVar10);
            }
          }
        }
      }
    }
    iVar9 = (int)lVar19;
    if ((puVar11 == NULL) || ((puVar14 != param_3 && ((uVar13 == 10 || (uVar13 == 0x11)))))) {
      while (puVar11 = puVar14, puVar14 != NULL) {
        if (puVar14 == param_3) {
          puVar11 = NULL;
          break;
        }
        puVar11 = *(ushort **)(puVar14 + 6);
        if (*(ushort **)(puVar14 + 6) != NULL) break;
        puVar14 = *(ushort **)(puVar14 + 4);
      }
    }
    puVar14 = puVar11;
    if (puVar14 == NULL) goto LAB_7f0223c0;
    uVar13 = *puVar14;
  } while( true );
}



// WARNING: Instruction at (ram,0x7f0227bc) overlaps instruction at (ram,0x7f0227b8)
// 

void proc_7F022648(int param_1,float *param_2,undefined4 param_3,undefined4 param_4)

{
  bool bVar1;
  longlong lVar2;
  int objinst;
  uint extraout_a1_lo;
  uint uVar3;
  undefined4 extraout_a2_lo;
  int iVar4;
  undefined4 extraout_a3_lo;
  undefined8 extraout_a3;
  undefined8 extraout_a3_00;
  undefined8 uVar5;
  float *pfVar6;
  ulonglong uVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float extraout_f12;
  float fStack124;
  float fStack120;
  float fStack116;
  int *apiStack112 [5];
  float fStack92;
  int iStack88;
  ushort *puStack84;
  int iStack80;
  float afStack76 [12];
  int iStack28;
  undefined4 *puStack24;
  int aiStack20 [2];
  float fStack12;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 4);
  if (*(char *)(iStack4 + 7) != '\x05') {
    objinst = *(int *)(iStack4 + 0x1c);
    fStack12 = getinstsize(objinst,(uint)param_2,param_3,param_4);
    if (((*(byte *)(param_1 + 1) & 2) != 0) &&
       (*(float *)(param_1 + 0x18) - fStack12 < param_2[0xd])) {
      aiStack20[0] = 0;
      puStack24 = NULL;
      iStack28 = 0;
      puStack84 = NULL;
      iStack88 = getsubmatrix(objinst,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
      fVar10 = 0.00000000;
      uVar3 = 0;
      uVar5 = extraout_a3;
      iVar4 = iStack4;
      do {
        if (*(int *)(iVar4 + 0x160) != 0) {
          fStack92 = fVar10;
          fVar10 = getinstsize(*(int *)(*(int *)(*(int *)(iVar4 + 0x160) + 4) + 0x14),uVar3,iVar4,
                               (int)uVar5);
          fVar10 = fVar10 * *(float *)(objinst + 0x14);
          uVar5 = extraout_a3_00;
          if (fVar10 <= fStack92) {
            uVar5 = extraout_a3_00;
            fVar10 = fStack92;
          }
        }
        uVar3 += 4;
        iVar4 += 4;
      } while (uVar3 != 8);
      pfVar6 = param_2 + 3;
      lVar2 = proc_7F041074(param_2,pfVar6,(float *)(iStack88 + 0x30),fVar10);
      bVar1 = lVar2 != 0;
      if (bVar1) {
        iStack28 = 1;
      }
      uVar7 = (ulonglong)bVar1;
      if (bVar1) {
        apiStack112[0] = *(int **)(iStack4 + 0x20);
        objinst = proc_7F06C010(apiStack112,param_2,pfVar6,aiStack20,(ushort **)&puStack24);
        while ((uVar7 = SEXT48(objinst), uVar7 == 100 || (uVar7 == 0x6e))) {
          objinst = proc_7F04D9B0(aiStack20[0],(ushort *)puStack24,param_2,pfVar6,afStack76,
                                  &iStack80,&puStack84);
          if (objinst != 0) break;
          objinst = probably_damage_detail_blood_effect_related
                              (apiStack112,param_2,pfVar6,aiStack20,(ushort **)&puStack24);
        }
      }
      if (0 < (longlong)uVar7) {
        fStack124 = param_2[3];
        fStack120 = param_2[4];
        fStack116 = param_2[5];
        pfVar6 = (float *)proc_7F078444();
        proc_7F0583D8(pfVar6,&fStack124);
        objinst = proc_7F06C660(aiStack20[0],(ushort *)puStack24,0);
        fVar8 = *(float *)(objinst + 0x30) - *param_2;
        fVar10 = *(float *)(objinst + 0x34) - param_2[1];
        fVar9 = *(float *)(objinst + 0x38) - param_2[2];
        fVar10 = sqrtf(fVar9 * fVar9 + fVar8 * fVar8 + fVar10 * fVar10);
        fVar10 = -(param_2[5] * fVar10 + param_2[2]);
        if (fVar10 < param_2[0xd]) {
          proc_7F03B9C0((int)param_2,param_1,extraout_f12,fVar10,(int)uVar7,puStack24,afStack76,
                        iStack80,puStack84,aiStack20[0],1);
        }
      }
      if ((iStack28 != 0) && (*(float *)(param_1 + 0x18) <= param_2[0xd])) {
        *(uint *)(iStack4 + 0x14) = *(uint *)(iStack4 + 0x14) | 4;
        *(char *)(iStack4 + 10) = *(char *)(iStack4 + 10) + '\x01';
      }
    }
  }
  return;
}



void proc_7F022980(float *param_1,float *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  hit_header *phVar4;
  longlong lVar5;
  u32 uVar6;
  undefined8 extraout_a2;
  undefined8 extraout_a2_00;
  undefined8 extraout_a2_01;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  int iVar7;
  int iVar8;
  float fVar9;
  float *extraout_f0;
  float *pfVar10;
  float *pfVar11;
  float extraout_f12;
  float fStack136;
  float fStack132;
  float fStack128;
  hit_header *phStack112;
  float fStack96;
  float fStack92;
  float fStack88;
  float fStack80;
  float fStack76;
  float fStack72;
  float afStack68 [17];
  
  iVar2 = *(int *)((int)param_2[1] + 4);
  fStack96 = *param_1 - (*param_2 * param_1[3]) / param_1[5];
  fStack92 = param_1[1] - (*param_2 * param_1[4]) / param_1[5];
  fStack88 = param_1[2] - *param_2;
  fVar9 = sqrtf(fStack88 * fStack88 + fStack96 * fStack96 + fStack92 * fStack92);
  fStack72 = 1.00000000 - 42.00000000 / fVar9;
  fStack80 = fStack96 * fStack72;
  fStack76 = fStack92 * fStack72;
  fStack72 = fStack88 * fStack72;
  pfVar10 = (float *)proc_7F078444();
  proc_7F058474(pfVar10,&fStack80);
  proc_7F067B4C(&fStack80);
  recall_joy2_hits_edit_detail_edit_flag();
  proc_7F022078((int)param_2[1],(longlong)(int)param_2[2],&fStack96,&fStack80);
  lVar5 = proc_7F02727C();
  if (lVar5 != 0) {
    if (param_2[2] == 0.00000000) {
      iVar7 = 0;
      pfVar10 = extraout_f0;
      iVar8 = iVar2;
      do {
        iVar3 = *(int *)(iVar8 + 0x160);
        if ((iVar3 != 0) && (param_2[0x12] == *(float *)(*(int *)(iVar3 + 4) + 0x14))) {
          cVar1 = *(char *)(*(int *)(iVar3 + 4) + 0x80);
          if (((cVar1 == '\x1a') || (((cVar1 == 'W' || (cVar1 == 'V')) || (cVar1 == '\x1b')))) ||
             (((cVar1 == '!' || (cVar1 == '\x1d')) || (cVar1 == '\x1c')))) {
            proc_7F04BFD0(iVar3,1);
            *(ushort *)(iVar2 + 0x12) = *(ushort *)(iVar2 + 0x12) | 1;
            proc_7F05DF84((int)param_1[6]);
            pfVar11 = pfVar10;
            get_cur_playernum();
            maybe_detonate_object
                      (*(int *)(iVar3 + 4),extraout_f12,pfVar10,(int)&fStack96,(int)param_1[6]);
            pfVar10 = pfVar11;
          }
          else {
            phStack112 = (hit_header *)hit_header_array[0];
            if (-1 < *(short *)((int)param_2 + 0x3a)) {
              phStack112 = (hit_header *)
                           hit_header_array
                           [(uint)(byte)image_entries[(int)*(short *)((int)param_2 + 0x3a)].flag1 &
                            0xf];
            }
            uVar6 = get_random_value();
            if (phStack112->count2 == 0) {
              trap(0x1c00);
            }
            proc_7F0A108C(param_2 + 4,param_2 + 7,
                          (ushort)phStack112->ptrarray2[uVar6 % (int)(short)phStack112->count2],1,
                          iVar3,SUB41(param_2[0x10],0),0);
          }
        }
        iVar7 += 4;
        iVar8 += 4;
      } while (iVar7 != 8);
    }
    else {
      if (param_2[2] == 0.00000000) {
        phVar4 = (hit_header *)hit_header_array[0];
        if (-1 < *(short *)((int)param_2 + 0x3a)) {
          phVar4 = (hit_header *)
                   hit_header_array
                   [(uint)(byte)image_entries[(int)*(short *)((int)param_2 + 0x3a)].flag1 & 0xf];
        }
        uVar6 = get_random_value();
        if (phVar4->count2 == 0) {
          trap(0x1c00);
        }
        proc_7F0A108C(param_2 + 4,param_2 + 7,
                      (ushort)phVar4->ptrarray2[uVar6 % (int)(short)phVar4->count2],1,
                      *(int *)(iVar2 + 0x1d8),SUB41(param_2[0x10],0),0);
      }
      else {
        pfVar10 = (float *)proc_7F06C660((int)param_2[0x12],(ushort *)param_2[3],0);
        fStack136 = fStack96 + (fStack96 - pfVar10[0xc]) * 0.50000000;
        fStack132 = fStack92 + (fStack92 - pfVar10[0xd]) * 0.50000000;
        fStack128 = fStack88 + (fStack88 - pfVar10[0xe]) * 0.50000000;
        fVar9 = getjointsize((int)param_2[0x12],(ushort *)param_2[3],extraout_a2,extraout_a3_lo);
        fStack136 = fStack136 - fVar9 * 0.50000000 * param_1[3];
        fVar9 = getjointsize((int)param_2[0x12],(ushort *)param_2[3],extraout_a2_00,
                             extraout_a3_lo_00);
        fStack132 = fStack132 - fVar9 * 0.50000000 * param_1[4];
        fVar9 = getjointsize((int)param_2[0x12],(ushort *)param_2[3],extraout_a2_01,
                             extraout_a3_lo_01);
        fStack128 = fStack128 - fVar9 * 0.50000000 * param_1[5];
        proc_7F059E64(pfVar10,afStack68);
        proc_7F058474(afStack68,&fStack136);
        proc_7F0221DC((int)param_2[0x12],(int)param_2[2],(ushort *)param_2[3],&fStack136);
      }
    }
  }
  return;
}



void removed_tooklevelscale(f32 param_1)

{
  return;
}



void proc_7F022E24(undefined4 param_1)

{
  dword_8002C904 = param_1;
  return;
}



void proc_7F022E30(void)

{
  int iVar1;
  
  dword_8002C908 += -1;
  if (dword_8002C908 < 0) {
    dword_8002C908 = 0;
    iVar1 = 1;
    if (animation_table_ptrs1._4_4_ != 0) {
      while (dword_8002C908 = iVar1, *(int *)(animation_table_ptrs1 + iVar1 * 4 + 4) != 0) {
        iVar1 += 1;
      }
    }
  }
  return;
}



void proc_7F022E90(void)

{
  dword_8002C908 += 1;
  if (*(int *)(animation_table_ptrs1 + dword_8002C908 * 4) == 0) {
    dword_8002C908 = 0;
  }
  return;
}



void proc_7F022EC8(void)

{
  dword_8002C90C = (uint)(dword_8002C90C == 0);
  return;
}



void proc_7F022EE0(undefined4 param_1)

{
  dword_8002C910 = param_1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F022EEC(void)

{
  int iVar1;
  int iVar2;
  float in_f0;
  float in_f12;
  
  iVar2 = 0;
  if (0 < num_guards) {
    iVar1 = 0;
    do {
      if ((*(int *)((int)&ptr_guard_data->MODELdata_pointer + iVar1) != 0) &&
         (proc_7F032DE4((int)(&ptr_guard_data->guardID_1 + iVar1)),
         in_f0 < *(float *)((int)&ptr_guard_data->hearing_ability + iVar1) * in_f12 * 100.00000000))
      {
        proc_7F029C00((int)(&ptr_guard_data->guardID_1 + iVar1));
      }
      iVar2 += 1;
      iVar1 += 0x1dc;
    } while (iVar2 < num_guards);
  }
  return;
}



GUARDdata * check_if_guardnum_loaded_get_ptr_GUARDdata(short guardnum)

{
  int iVar1;
  int iVar2;
  GUARDdata *pGVar3;
  
  iVar1 = 0;
  if (0 < num_guards) {
    iVar2 = 0;
    pGVar3 = ptr_guard_data;
    do {
      iVar1 += 1;
      if ((pGVar3->MODELdata_pointer != 0) && (guardnum == *(short *)pGVar3)) {
        return (GUARDdata *)(&ptr_guard_data->guardID_1 + iVar2);
      }
      iVar2 += 0x1dc;
      pGVar3 = pGVar3 + 1;
    } while (iVar1 < num_guards);
  }
  return NULL;
}



int something_with_weaponpos_of_guarddata_hand(GUARDdata *guard,int hand)

{
  return (&guard->handle_positiondata_right_gun)[hand];
}



int is_weapon_in_guarddata_hand(GUARDdata *guard,int hand)

{
  ulonglong uVar1;
  int iVar2;
  
  iVar2 = (&guard->handle_positiondata_right_gun)[hand];
  if ((iVar2 != 0) &&
     (uVar1 = check_special_attributes((int)*(char *)(*(int *)(iVar2 + 4) + 0x80),0x200), uVar1 == 0
     )) {
    iVar2 = 0;
  }
  return iVar2;
}



void proc_7F02308C(GUARDdata *param_1,int *param_2,undefined4 *param_3,float *param_4,float *param_5
                  )

{
  int iVar1;
  float fVar2;
  
  iVar1 = *(int *)&param_1->rounds_fired_left_gun;
  if (*(char *)(iVar1 + 7) == '\x04') {
    *param_3 = 0;
  }
  else {
    if (*(char *)(iVar1 + 7) == '\x05') {
      *param_3 = 0;
    }
    else {
      if ((*(uint *)(iVar1 + 0x14) & 0x10400) == 0) {
        if ((*(ushort *)(iVar1 + 0x12) & 0x100) == 0) {
          *param_3 = 4;
          *param_2 = iVar1 + 0x11c;
          fVar2 = *(float *)(iVar1 + 0x24);
          *(float *)(iVar1 + 0x11c) = *(float *)&param_1->set_0_when_fading + fVar2;
          *(undefined4 *)(iVar1 + 0x120) = *(undefined4 *)&param_1->beligerancy;
          *(undefined4 *)(iVar1 + 0x124) = *(undefined4 *)&param_1->set_0_when_fading;
          *(float *)(iVar1 + 0x128) = *(float *)&param_1->beligerancy + fVar2;
          *(float *)(iVar1 + 300) = *(float *)&param_1->set_0_when_fading - fVar2;
          *(undefined4 *)(iVar1 + 0x130) = *(undefined4 *)&param_1->beligerancy;
          *(undefined4 *)(iVar1 + 0x134) = *(undefined4 *)&param_1->set_0_when_fading;
          *(float *)(iVar1 + 0x138) = *(float *)&param_1->beligerancy - fVar2;
          *param_5 = *(float *)(iVar1 + 0xac);
          *param_4 = *param_5 + *(float *)(iVar1 + 0x28);
          return;
        }
        *param_3 = 0;
      }
      else {
        *param_3 = 0;
      }
    }
  }
  return;
}



void proc_7F023160(int param_1,undefined4 *param_2,float *param_3,undefined4 *param_4)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 4);
  *param_2 = *(undefined4 *)(iVar1 + 0x24);
  *param_3 = *(float *)(iVar1 + 0x28) - 20.00000000;
  *param_4 = 0x41a00000;
  return;
}



undefined4 proc_7F023188(int param_1)

{
  return *(undefined4 *)(param_1 + 4);
}



undefined8 proc_7F023194(int param_1,float *param_2,float *param_3,float *param_4)

{
  int iVar1;
  int iVar2;
  undefined8 uVar3;
  float fVar4;
  
  iVar1 = *(int *)(param_1 + 4);
  if ((*(byte *)(param_1 + 1) & 2) == 0) {
    uVar3 = 0;
  }
  else {
    if (*(char *)(iVar1 + 7) == '\x04') {
      uVar3 = 0;
    }
    else {
      if (*(char *)(iVar1 + 7) == '\x05') {
        uVar3 = 0;
      }
      else {
        if ((*(uint *)(iVar1 + 0x14) & 0x800) == 0) {
          iVar1 = *(int *)(iVar1 + 0x1c);
          iVar2 = *(int *)(iVar1 + 0xc);
          fVar4 = (*(float *)(iVar2 + 0x38) - *(float *)(iVar2 + 0x78)) * 0.25000000 +
                  *(float *)(iVar2 + 0x78);
          param_2[2] = fVar4;
          if (fVar4 < 0.00000000) {
            *param_2 = (*(float *)(iVar2 + 0x30) - *(float *)(iVar2 + 0x70)) * 0.25000000 +
                       *(float *)(iVar2 + 0x70);
            param_2[1] = (*(float *)(iVar2 + 0x34) - *(float *)(iVar2 + 0x74)) * 0.25000000 +
                         *(float *)(iVar2 + 0x74);
            param_4[1] = 0.00000000;
            *param_4 = 0.00000000;
            *param_3 = 0.00000000;
            param_3[1] = 0.00000000;
            proc_7F03F90C(iVar1,param_3 + 1,param_3,param_4 + 1,param_4);
            uVar3 = 1;
          }
          else {
            uVar3 = 0;
          }
        }
        else {
          uVar3 = 0;
        }
      }
    }
  }
  return uVar3;
}



ulonglong load_body_head_if_not_loaded(int model)

{
  bool bVar1;
  
  bVar1 = (c_item_entries[model].header)->offset_obj_table == 0;
  if (bVar1) {
    load_object_into_memory(c_item_entries[model].header,(int *)c_item_entries[model].filename);
  }
  return (ulonglong)bVar1;
}



uint maybe_load_models_for_guards
               (int body,int head,object_header *bodyheader,object_header *headheader,int sunglasses
               ,uint object_controller)

{
  undefined4 *puVar1;
  float fVar2;
  f32 extraout_f12;
  f32 extraout_f12_00;
  f32 scale;
  f32 extraout_f12_01;
  ushort *local_c;
  
  fVar2 = c_item_entries[body].anonymous_2;
  local_c = NULL;
  proc_7F0927BC(0xc);
  if (bodyheader->offset_obj_table == 0) {
    load_object_into_memory(bodyheader,(int *)c_item_entries[body].filename);
  }
  set_objuse_flag_compute_grp_nums_set_obj_loaded(bodyheader);
  scale = extraout_f12;
  if (((*(char *)((int)&c_item_entries[body].anonymous_3 + 1) == '\0') &&
      (scale = extraout_f12, -1 < head)) &&
     (local_c = *(ushort **)(bodyheader->offset_obj_offset_block + 0x10), scale = extraout_f12,
     local_c != NULL)) {
    if (headheader->offset_obj_table == 0) {
      load_object_into_memory(headheader,(int *)c_item_entries[head].filename);
    }
    set_objuse_flag_compute_grp_nums_set_obj_loaded(headheader);
    bodyheader->num_table_entries = bodyheader->num_table_entries + headheader->num_table_entries;
    scale = extraout_f12_00;
  }
  if (object_controller == 0) {
    object_controller = get_aircraft_obj_instance_controller((int *)bodyheader);
    scale = extraout_f12_01;
  }
  if (object_controller != 0) {
    set_obj_instance_controller_scale(object_controller,scale);
    proc_7F06CE84(object_controller,fVar2);
    if ((headheader != NULL) && (*(char *)((int)&c_item_entries[body].anonymous_3 + 1) == '\0')) {
      bodyheader->num_table_entries = bodyheader->num_table_entries - headheader->num_table_entries;
      proc_7F06C3B4(object_controller,local_c,(ushort **)headheader);
      if ((sunglasses == 0) &&
         ((0 < headheader->num_offset_entries &&
          (*(ushort **)headheader->offset_obj_offset_block != NULL)))) {
        puVar1 = (undefined4 *)
                 extract_id_from_object_structure_microcode
                           (object_controller,*(ushort **)headheader->offset_obj_offset_block);
        *puVar1 = 0;
      }
    }
  }
  return object_controller;
}



uint setup_chr_instance(int body,int head,object_header *body_header,object_header *head_header,
                       int sunglasses)

{
  uint uVar1;
  
  uVar1 = maybe_load_models_for_guards(body,head,body_header,head_header,sunglasses,0);
  return uVar1;
}



uint retrieve_header_for_body_and_head(int body,int head,ulonglong bitflags)

{
  object_header *body_header;
  u32 uVar1;
  uint sunglasses;
  object_header *local_8;
  
  body_header = c_item_entries[body].header;
  local_8 = NULL;
  sunglasses = 0;
  if ((bitflags & 1) == 0) {
    if ((bitflags & 2) != 0) {
      uVar1 = get_random_value();
      sunglasses = (uint)((uVar1 & 1) == 0);
    }
  }
  else {
    sunglasses = 1;
  }
  if ((-1 < head) && (*(char *)((int)&c_item_entries[body].anonymous_3 + 1) == '\0')) {
    local_8 = c_item_entries[head].header;
  }
  sunglasses = setup_chr_instance(body,head,body_header,local_8,sunglasses);
  return sunglasses;
}



undefined4 get_current_random_body(void)

{
  return list_of_bodies[current_random_body];
}



undefined4 select_psuedorandom_heads(int param_1)

{
  undefined4 uVar1;
  u32 uVar2;
  int iVar3;
  
  if (*(char *)&c_item_entries[param_1].anonymous_3 == '\0') {
    uVar1 = random_female_heads[current_random_female_head];
  }
  else {
    uVar2 = get_random_value();
    iVar3 = current_random_male_head + (uVar2 & 3);
    if (num_male_heads == 0) {
      trap(0x1c00);
    }
    if ((num_male_heads == -1) && (iVar3 == -0x80000000)) {
      trap(0x1800);
    }
    uVar1 = random_male_heads[iVar3 % num_male_heads];
  }
  return uVar1;
}



u32 get_random_head(int bodyID)

{
  uint random_male;
  uint random_female;
  u32 head;
  
  if (*(char *)&c_item_entries[bodyID].anonymous_3 == '\0') {
    random_female = get_random_value();
    head = random_female_heads[random_female % num_female_heads];
    if (num_female_heads == 0) {
      trap(0x1c00);
    }
  }
  else {
    random_male = get_random_value();
    if (num_male_heads == 0) {
      trap(0x1c00);
    }
    head = random_male_heads[random_male % num_male_heads];
  }
  return head;
}



void expand_09_characters(void)

{
  ushort uVar1;
  undefined2 *puVar2;
  longlong lVar3;
  uint uVar4;
  undefined *puVar5;
  object_standard *poVar6;
  int in_a1_lo;
  float fVar7;
  float in_f12;
  int iStack48;
  uint uStack44;
  undefined4 auStack24 [3];
  undefined4 uStack12;
  undefined4 *puStack4;
  
  puStack4 = (undefined4 *)
             (ptr_0xxxpresets +
             ((uint)*(ushort *)(in_a1_lo + 6) * 0xc - (uint)*(ushort *)(in_a1_lo + 6)) * 4);
  lVar3 = proc_7F056850(puStack4,(longlong)(int)puStack4[10],in_f12,(undefined4 *)0x41a00000,
                        auStack24);
  if (lVar3 != 0) {
    iStack48 = -1;
    if (*(ushort *)(in_a1_lo + 8) == 0xffff) {
      uStack44 = get_current_random_body();
    }
    else {
      uStack44 = (uint)*(ushort *)(in_a1_lo + 8);
    }
    if (*(char *)((int)&c_item_entries[uStack44].anonymous_3 + 1) == '\0') {
      if (*(short *)(in_a1_lo + 0x16) < 0) {
        iStack48 = select_psuedorandom_heads(uStack44);
      }
      else {
        iStack48 = (int)*(short *)(in_a1_lo + 0x16);
      }
    }
    uVar4 = retrieve_header_for_body_and_head
                      (uStack44,iStack48,(ulonglong)*(ushort *)(in_a1_lo + 0x14));
    if (uVar4 != 0) {
      fVar7 = convert_angle_using_inverse((f32)puStack4[6],(f32)puStack4[8]);
      puVar5 = proc_7F035398((undefined *)(uint)*(ushort *)(in_a1_lo + 10));
      poVar6 = (object_standard *)
               replace_GUARDdata_with_actual_values(uVar4,auStack24,fVar7,uStack12,puVar5);
      if (poVar6 != NULL) {
        set_current_objposdata_plus_0x28(poVar6);
        set_stateflag_0x04_for_posdata((int)poVar6);
        puVar2 = *(undefined2 **)&poVar6->objectID;
        *puVar2 = *(undefined2 *)(in_a1_lo + 4);
        fVar7 = (float)(uint)*(ushort *)(in_a1_lo + 0x10);
        if (false) {
          fVar7 = fVar7 + 4294967296.00000000;
        }
        *(float *)(puVar2 + 0x76) = fVar7 / 1000.00000000;
        fVar7 = (float)(uint)*(ushort *)(in_a1_lo + 0x12);
        if (false) {
          fVar7 = fVar7 + 4294967296.00000000;
        }
        *(float *)(puVar2 + 0x68) = fVar7;
        puVar2[0x8a] = *(undefined2 *)(in_a1_lo + 0xc);
        puVar2[0x8b] = *(undefined2 *)(in_a1_lo + 0xe);
        *(char *)(puVar2 + 3) = (char)iStack48;
        *(undefined *)((int)puVar2 + 0xf) = (char)uStack44;
        uVar1 = *(ushort *)(in_a1_lo + 0x14);
        if ((uVar1 & 4) != 0) {
          *(uint *)(puVar2 + 10) = *(uint *)(puVar2 + 10) | 2;
          uVar1 = *(ushort *)(in_a1_lo + 0x14);
        }
        if ((uVar1 & 8) == 0) {
          *(undefined2 **)(in_a1_lo + 0x18) = puVar2;
        }
        else {
          *(uint *)(puVar2 + 10) = *(uint *)(puVar2 + 10) | 0x10;
          *(undefined2 **)(in_a1_lo + 0x18) = puVar2;
        }
      }
    }
  }
  return;
}



ulonglong check_if_item_held_like_pistol(int param_1)

{
  ulonglong uVar1;
  
  if (param_1 == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = check_special_attributes((int)*(char *)(*(int *)(param_1 + 4) + 0x80),0x100);
  }
  return uVar1;
}



void proc_7F023948(GUARDdata *guard,float param_2)

{
  int iVar2;
  int iVar3;
  ulonglong uVar1;
  u32 uVar4;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  
  iVar2 = something_with_weaponpos_of_guarddata_hand(guard,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand(guard,0);
  if ((((iVar2 == 0) || (iVar3 == 0)) && ((iVar2 != 0 || (iVar3 != 0)))) &&
     ((uVar1 = check_if_item_held_like_pistol(iVar2), uVar1 == 0 &&
      (uVar1 = check_if_item_held_like_pistol(iVar3), uVar1 == 0)))) {
    if ((iVar3 != 0) || (iVar2 != 0)) {
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x1c,iVar2 != 0,extraout_f12,0,
                    extraout_f14);
      proc_7F06FDCC(guard->MODELdata_pointer,0,0x41800000);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_01);
    }
  }
  else {
    uVar4 = get_random_value();
    proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x8194,(byte)uVar4 & 1,
                  extraout_f12_00,0,extraout_f14_00);
    proc_7F06FDCC(guard->MODELdata_pointer,0,0x41800000);
  }
  return;
}



void proc_7F023A94(GUARDdata *guard,float param_2)

{
  u32 uVar1;
  float in_a1_lo;
  float fVar2;
  float fVar3;
  char cVar4;
  
  proc_7F02D184((int)guard);
  guard->current_action = standing;
  guard->bond_position = 0;
  guard->field_30 = 0;
  *(undefined4 *)&guard->field_34 = 0;
  *(undefined4 *)&guard->field_38 = 0;
  guard->path_target_position = 2;
  guard->field_40 = 0;
  uVar1 = get_random_value();
  guard->field_44 = uVar1 % 0x78 + 0xb4;
  fVar3 = *(float *)(guard->MODELdata_pointer + 0xa4);
  fVar2 = in_a1_lo;
  if (fVar3 != 1.00000000) {
    fVar2 = in_a1_lo / fVar3;
  }
  if (127.00000000 < fVar2) {
    cVar4 = '\x7f';
  }
  else {
    cVar4 = (char)(int)fVar2;
  }
  guard->set_0_when_fading = cVar4;
  proc_7F023948(guard,in_a1_lo);
  return;
}



f32 proc_7F023B5C(void)

{
  char cVar1;
  int in_a0_lo;
  float in_a1_lo;
  float in_a2_lo;
  f32 fVar2;
  
  cVar1 = *(char *)(in_a0_lo + 3);
  fVar2 = get_007_reaction_speed();
  return (f32)(((in_a2_lo - in_a1_lo) *
               ((float)fVar2 * (100.00000000 - (float)(int)cVar1) + (float)(int)cVar1)) /
               100.00000000 + in_a1_lo);
}



// WARNING: Unknown calling convention yet parameter storage is locked

int proc_7F023BC0(void)

{
  char cVar1;
  int iVar2;
  int in_a0_lo;
  int in_a1_lo;
  f32 reactionspeed;
  
  cVar1 = *(char *)(in_a0_lo + 3);
  reactionspeed = get_007_reaction_speed();
  iVar2 = (100 - ((int)((float)reactionspeed * (float)(100 - (int)cVar1)) + (int)cVar1)) * in_a1_lo;
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (iVar2 == -0x80000000)) {
    trap(0x1800);
  }
  return iVar2 / 100;
}



undefined4 proc_7F023C54(void)

{
  undefined4 in_v0_lo;
  
  get_007_reaction_speed();
  return in_v0_lo;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F023CB8(void)

{
  u32 uVar1;
  int iVar2;
  GUARDdata *guard;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  float extraout_f14_00;
  
  if (guard->current_action == freeze) {
    proc_7F02D184((int)guard);
    guard->current_action = standing;
    guard->bond_position = 1;
    guard->field_30 = 0;
    *(undefined4 *)&guard->field_34 = 0;
    *(undefined4 *)&guard->field_38 = 0;
    guard->path_target_position = 2;
    guard->field_40 = 0;
    uVar1 = get_random_value();
    guard->field_44 = uVar1 % 0x78 + 0xb4;
    guard->set_0_when_fading = '\0';
    iVar2 = proc_7F06F5AC(guard->MODELdata_pointer);
    if (iVar2 == ptr_animation_table + 0x6c18) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x6c18,
                    *(undefined *)(guard->MODELdata_pointer + 0x24),extraout_f12,0x42da0000,
                    extraout_f14);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
    }
    else {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0xb84,
                    *(undefined *)(guard->MODELdata_pointer + 0x24),extraout_f12_01,0x42f00000,
                    extraout_f14_00);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_02);
    }
  }
  else {
    proc_7F023A94(guard,in_f12);
  }
  return;
}



void proc_7F023E14(int param_1,float param_2)

{
  float in_a1_lo;
  
  proc_7F023A94((GUARDdata *)param_1,in_a1_lo);
  *(undefined4 *)(param_1 + 0x40) = 1;
  return;
}



void proc_7F023E48(int param_1)

{
  proc_7F023CB8();
  *(undefined4 *)(param_1 + 0x40) = 1;
  return;
}



// WARNING: Instruction at (ram,0x7f023f68) overlaps instruction at (ram,0x7f023f64)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

void actor_kneel(void)

{
  int iVar2;
  int iVar3;
  ulonglong uVar1;
  u32 uVar4;
  GUARDdata *guard;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  float extraout_f14_00;
  
  iVar2 = something_with_weaponpos_of_guarddata_hand(guard,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand(guard,0);
  proc_7F02D184((int)guard);
  if ((((iVar2 == 0) || (iVar3 == 0)) && ((iVar2 != 0 || (iVar3 != 0)))) &&
     ((uVar1 = check_if_item_held_like_pistol(iVar2), uVar1 == 0 &&
      (uVar1 = check_if_item_held_like_pistol(iVar3), uVar1 == 0)))) {
    if ((iVar3 != 0) || (iVar2 != 0)) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0xb84,iVar2 != 0,extraout_f12_01,
                    0,extraout_f14_00);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_02);
    }
  }
  else {
    uVar4 = get_random_value();
    proc_7F023B5C();
    proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x6c18,(byte)uVar4 & 1,extraout_f12
                  ,0,extraout_f14);
    proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
  }
  guard->current_action = freeze;
  guard->set_0_when_fading = '\0';
  return;
}



void perform_animation_for_actor
               (GUARDdata *guard,int param_2,int param_3,int param_4,byte param_5,int param_6)

{
  uint uVar1;
  bool bVar2;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  proc_7F02D184((int)guard);
  proc_7F06FCA8(guard->MODELdata_pointer,*(undefined4 *)(animation_table_ptrs1 + param_2 * 4),
                (param_5 & 1) != 0,extraout_f12,(float)param_3,extraout_f14);
  if (-1 < param_4) {
    proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
  }
  if ((param_5 & 0x20) == 0) {
    uVar1 = guard->guard_bitflags;
  }
  else {
    proc_7F06CE84(guard->MODELdata_pointer,*(float *)(guard->MODELdata_pointer + 0xb8) * 4.00000000)
    ;
    uVar1 = guard->guard_bitflags;
  }
  guard->guard_bitflags = uVar1 & 0xfdffffff;
  bVar2 = (param_5 & 0x10) != 0;
  guard->current_action = swattingflies;
  guard->bond_position = (uint)((param_5 & 2) != 0);
  guard->field_30 = (uint)((param_5 & 4) != 0);
  *(uint *)&guard->field_34 = (uint)((param_5 & 8) != 0);
  *(uint *)&guard->field_38 = (uint)bVar2;
  guard->path_target_position = (uint)((param_5 & 0x40) != 0);
  if (bVar2) {
    guard->set_0_when_fading = (char)param_6;
  }
  else {
    guard->set_0_when_fading = '\0';
  }
  return;
}



void proc_7F024150(int param_1)

{
  int iVar1;
  int iVar2;
  u32 uVar3;
  byte bVar4;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  iVar1 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar2 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  bVar4 = 0;
  if ((iVar1 == 0) || (iVar2 != 0)) {
    if (((iVar1 != 0) && (iVar2 != 0)) || ((iVar1 == 0 && (iVar2 == 0)))) {
      uVar3 = get_random_value();
      bVar4 = (byte)uVar3 & 1;
    }
  }
  else {
    bVar4 = 1;
  }
  proc_7F02D184(param_1);
  *(undefined *)(param_1 + 7) = 0x13;
  *(undefined *)(param_1 + 8) = 0;
  proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x5744,bVar4,extraout_f12,0x42200000,
                extraout_f14);
  proc_7F06FDE8(*(int *)(param_1 + 0x1c),extraout_f12_00);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void throw_weapon_in_guard_hand(void)

{
  int in_a0_lo;
  int iVar1;
  int in_a2_lo;
  int in_a3_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float fVar2;
  float extraout_f14;
  float extraout_f14_00;
  
  proc_7F02D184(in_a0_lo);
  *(undefined *)(in_a0_lo + 7) = 0x14;
  *(undefined *)(in_a0_lo + 8) = 0;
  if (in_a3_lo == 0) {
    proc_7F023B5C();
    proc_7F06FCA8(*(int *)(in_a0_lo + 0x1c),ptr_animation_table + 0x5964,in_a2_lo != 0,
                  extraout_f12_01,0x42a80000,extraout_f14_00);
    iVar1 = *(int *)(in_a0_lo + 0x1c);
    fVar2 = extraout_f12_02;
  }
  else {
    proc_7F023B5C();
    proc_7F06FCA8(*(int *)(in_a0_lo + 0x1c),ptr_animation_table + 0x5964,in_a2_lo != 0,extraout_f12,
                  0,extraout_f14);
    iVar1 = *(int *)(in_a0_lo + 0x1c);
    fVar2 = extraout_f12_00;
  }
  proc_7F06FDE8(iVar1,fVar2);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F024334(void)

{
  int iVar1;
  int iVar2;
  u32 uVar3;
  GUARDdata *guard;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  byte bStack9;
  
  iVar1 = something_with_weaponpos_of_guarddata_hand(guard,1);
  iVar2 = something_with_weaponpos_of_guarddata_hand(guard,0);
  bStack9 = 0;
  if ((iVar1 == 0) || (iVar2 != 0)) {
    if (((iVar1 != 0) && (iVar2 != 0)) || ((iVar1 == 0 && (iVar2 == 0)))) {
      uVar3 = get_random_value();
      bStack9 = (byte)uVar3 & 1;
    }
  }
  else {
    bStack9 = 1;
  }
  proc_7F023B5C();
  proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x5d10,bStack9,extraout_f12,
                0x41200000,extraout_f14);
  proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void actor_shuffle_feet(void)

{
  longlong lVar1;
  int in_a0_lo;
  float in_f0;
  
  proc_7F032C4C(in_a0_lo);
  if ((in_f0 < flt_80051DA0) || (flt_80051DA4 < in_f0)) {
    proc_7F024334();
    proc_7F02D184(in_a0_lo);
    *(undefined *)(in_a0_lo + 7) = 0x12;
    *(undefined *)(in_a0_lo + 8) = 0;
  }
  else {
    lVar1 = proc_7F029C5C();
    if (lVar1 == 0) {
      proc_7F023CB8();
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0244AC(void)

{
  u32 uVar1;
  int in_a0_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  proc_7F02D184(in_a0_lo);
  *(undefined *)(in_a0_lo + 7) = 0x12;
  *(undefined *)(in_a0_lo + 8) = 0;
  uVar1 = get_random_value();
  proc_7F023B5C();
  proc_7F06FCA8(*(int *)(in_a0_lo + 0x1c),ptr_animation_table + 0x4384,(byte)uVar1 & 1,extraout_f12,
                0,extraout_f14);
  proc_7F06FDE8(*(int *)(in_a0_lo + 0x1c),extraout_f12_00);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F024548(void)

{
  u32 uVar1;
  u32 uVar2;
  int in_a0_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  
  uVar1 = get_random_value();
  proc_7F02D184(in_a0_lo);
  *(undefined *)(in_a0_lo + 7) = 0x12;
  *(undefined *)(in_a0_lo + 8) = 0;
  uVar2 = get_random_value();
  proc_7F06FCA8(*(int *)(in_a0_lo + 0x1c),ptr_animation_table + 0x5ef0,(byte)uVar2 & 1,extraout_f12,
                0x41880000,extraout_f14);
  if (uVar1 % 3 == 0) {
    proc_7F023B5C();
    proc_7F06FDE8(*(int *)(in_a0_lo + 0x1c),extraout_f12_00);
  }
  else {
    if (uVar1 % 3 == 1) {
      proc_7F023B5C();
      proc_7F06FDE8(*(int *)(in_a0_lo + 0x1c),extraout_f12_01);
    }
    else {
      proc_7F023B5C();
      proc_7F06FDE8(*(int *)(in_a0_lo + 0x1c),extraout_f12_02);
    }
  }
  return;
}



void proc_7F024648(int param_1)

{
  int iVar1;
  int iVar2;
  u32 uVar3;
  ushort uVar4;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  
  if (*(char *)(param_1 + 7) != '\x10') {
    iVar1 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
    iVar2 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
    proc_7F02D184(param_1);
    *(undefined *)(param_1 + 7) = 0x10;
    if ((iVar2 == 0) && (iVar1 == 0)) {
      uVar3 = get_random_value();
      proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4384,(byte)uVar3 & 1,
                    extraout_f12_00,0,extraout_f14_00);
      proc_7F06FDCC(*(int *)(param_1 + 0x1c),0x41f00000,0x41800000);
      *(undefined *)(param_1 + 8) = 0x10;
    }
    else {
      uVar3 = get_random_value();
      proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4504,(byte)uVar3 & 1,
                    extraout_f12,0,extraout_f14);
      proc_7F06FDCC(*(int *)(param_1 + 0x1c),0x42200000,0x41800000);
      *(undefined *)(param_1 + 8) = 0x10;
      if (iVar1 != 0) {
        proc_7F04BFD0(iVar1,2);
      }
      if (iVar2 == 0) {
        uVar4 = *(ushort *)(param_1 + 0x12);
      }
      else {
        proc_7F04BFD0(iVar2,2);
        uVar4 = *(ushort *)(param_1 + 0x12);
      }
      *(ushort *)(param_1 + 0x12) = uVar4 | 1;
    }
    proc_7F021B20((GUARDdata *)param_1);
  }
  return;
}



void proc_7F0247B8(int param_1)

{
  if (*(char *)(param_1 + 7) != '\x05') {
    proc_7F02D184(param_1);
    *(undefined *)(param_1 + 7) = 5;
    *(undefined4 *)(param_1 + 0x2c) = 0xffffffff;
    *(undefined *)(param_1 + 8) = 0;
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F024800(void)

{
  int iVar2;
  int iVar3;
  u32 uVar4;
  ulonglong uVar1;
  uint uVar5;
  GUARDdata *guard;
  int in_a1_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  uint uStack12;
  
  iVar2 = something_with_weaponpos_of_guarddata_hand(guard,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand(guard,0);
  uStack12 = 0;
  if ((iVar2 == 0) || (iVar3 == 0)) {
    uVar1 = check_if_item_held_like_pistol(iVar2);
    uVar5 = 0;
    if (uVar1 == 0) {
      uVar1 = check_if_item_held_like_pistol(iVar3);
      uVar5 = 0;
      if ((uVar1 == 0) && ((iVar2 != 0 || (iVar3 != 0)))) {
        uStack12 = (uint)(iVar2 != 0);
        uVar4 = get_random_value();
        uVar5 = uVar4 & 1;
      }
    }
  }
  else {
    uVar4 = get_random_value();
    uStack12 = uVar4 & 1;
    uVar4 = get_random_value();
    uVar5 = uVar4 & 1;
  }
  proc_7F02D184((int)guard);
  guard->current_action = sidestep;
  guard->set_0_when_fading = '\0';
  if (uVar5 == 0) {
    if (in_a1_lo == 0) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x3d9c,1,extraout_f12_01,
                    0x40a00000,extraout_f14_00);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_02);
    }
    else {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x3d9c,0,extraout_f12,0x40a00000,
                    extraout_f14);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
    }
  }
  else {
    if (((in_a1_lo == 0) || (uStack12 != 0)) && ((in_a1_lo != 0 || (uStack12 == 0)))) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x54a0,(char)uStack12,
                    extraout_f12_05,0x40a00000,extraout_f14_02);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_06);
    }
    else {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x5554,(char)uStack12,
                    extraout_f12_03,0x40a00000,extraout_f14_01);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_04);
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F024A84(void)

{
  int iVar2;
  int iVar3;
  ulonglong uVar1;
  u32 uVar4;
  GUARDdata *guard;
  int in_a1_lo;
  undefined uVar5;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  uint uStack12;
  
  iVar2 = something_with_weaponpos_of_guarddata_hand(guard,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand(guard,0);
  uStack12 = 0;
  if ((iVar2 == 0) || (iVar3 != 0)) {
    if (((iVar2 == 0) || (iVar3 == 0)) && ((iVar2 != 0 || (iVar3 != 0)))) {
      uVar1 = check_if_item_held_like_pistol(iVar2);
      if ((uVar1 == 0) && (uVar1 = check_if_item_held_like_pistol(iVar3), uVar1 == 0))
      goto LAB_7f024b24;
    }
    uVar4 = get_random_value();
    uStack12 = uVar4 & 1;
  }
  else {
    uStack12 = 1;
  }
LAB_7f024b24:
  proc_7F02D184((int)guard);
  guard->current_action = sidehop;
  guard->set_0_when_fading = '\0';
  uVar5 = (undefined)uStack12;
  if (((in_a1_lo == 0) || (uStack12 != 0)) && ((in_a1_lo != 0 || (uStack12 == 0)))) {
    uVar4 = get_random_value();
    if ((uVar4 & 1) == 0) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x47bc,uVar5,extraout_f12_05,
                    0x42b60000,extraout_f14_02);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_06);
    }
    else {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x4a40,uVar5,extraout_f12_03,
                    0x41a00000,extraout_f14_01);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_04);
    }
  }
  else {
    uVar4 = get_random_value();
    if ((uVar4 & 1) == 0) {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x4a40,uVar5,extraout_f12_01,
                    0x43020000,extraout_f14_00);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_02);
    }
    else {
      proc_7F023B5C();
      proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x47bc,uVar5,extraout_f12,
                    0x40a00000,extraout_f14);
      proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_00);
    }
  }
  return;
}



void proc_7F024CF8(int param_1,float *param_2)

{
  bool bVar1;
  int iVar3;
  int iVar4;
  u32 uVar5;
  ulonglong uVar2;
  bool bVar6;
  float fVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f14;
  
  fVar7 = *(float *)(*(int *)(param_1 + 0x18) + 8) - *param_2;
  fVar8 = *(float *)(*(int *)(param_1 + 0x18) + 0x10) - param_2[2];
  fVar7 = sqrtf(fVar7 * fVar7 + fVar8 * fVar8);
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  bVar1 = true;
  if (((iVar3 == 0) || (iVar4 == 0)) && ((iVar3 != 0 || (iVar4 != 0)))) {
    uVar2 = check_if_item_held_like_pistol(iVar3);
    if ((uVar2 == 0) && (uVar2 = check_if_item_held_like_pistol(iVar4), uVar2 == 0)) {
      bVar6 = iVar3 != 0;
    }
    else {
      bVar1 = false;
      bVar6 = iVar3 != 0;
    }
  }
  else {
    bVar1 = false;
    uVar5 = get_random_value();
    bVar6 = (bool)((byte)uVar5 & 1);
  }
  proc_7F02D184(param_1);
  *(undefined *)(param_1 + 7) = 0xd;
  *(float *)(param_1 + 0x2c) = *param_2;
  *(float *)(param_1 + 0x30) = param_2[1];
  fVar8 = param_2[2];
  *(undefined *)(param_1 + 8) = 0;
  *(undefined4 *)(param_1 + 0x40) = 0;
  *(undefined4 *)(param_1 + 0x38) = 0x41f00000;
  *(float *)(param_1 + 0x34) = fVar8;
  if (bVar1) {
    *(int *)(param_1 + 0x3c) = (int)(fVar7 / (dword_80030988 * 0.50000000));
    proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x40d4,bVar6,extraout_f12,0,
                  extraout_f14);
  }
  else {
    *(int *)(param_1 + 0x3c) = (int)(fVar7 / (dword_80030994 * 0.50000000));
    proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x777c,bVar6,extraout_f12,0,
                  extraout_f14);
  }
  return;
}



void proc_7F024F00(int param_1)

{
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  proc_7F02D184(param_1);
  *(undefined *)(param_1 + 7) = 0x16;
  *(undefined *)(param_1 + 8) = 0;
  proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x2f94,0,extraout_f12,0x41200000,
                extraout_f14);
  proc_7F06FDCC(*(int *)(param_1 + 0x1c),0x41200000,0x41800000);
  proc_7F06FDE8(*(int *)(param_1 + 0x1c),extraout_f12_00);
  return;
}



void proc_7F024F8C(int param_1)

{
  int iVar1;
  int iVar2;
  float in_f12;
  
  iVar1 = *(int *)(param_1 + 0x1c);
  iVar2 = *(int *)(param_1 + 0x2c);
  if ((*(uint *)(param_1 + 0x4c) & 0x20) == 0) {
    if (*(char *)(param_1 + 0x36) == '\0') {
      if (0.00000000 <= *(float *)(iVar2 + 0x20)) {
        proc_7F06FDE8(iVar1,in_f12);
      }
      else {
        if (0.00000000 <= *(float *)(iVar2 + 0x14)) {
          proc_7F06FDE8(iVar1,in_f12);
        }
        else {
          proc_7F06FDE8(iVar1,in_f12);
        }
      }
    }
    else {
      if (0.00000000 <= *(float *)(iVar2 + 0x20)) {
        proc_7F06FDE8(iVar1,in_f12);
      }
      else {
        proc_7F06FDE8(iVar1,in_f12);
      }
    }
  }
  else {
    if ((*(float *)(iVar2 + 0x20) < 0.00000000) ||
       (*(float *)(iVar2 + 0x18) <= *(float *)(iVar2 + 0x20))) {
      proc_7F06FDE8(iVar1,in_f12);
    }
    else {
      proc_7F06FDE8(iVar1,in_f12);
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F0250BC(void)

{
  short *in_a0_lo;
  ulonglong in_a1;
  undefined4 in_a2_hi;
  int in_a2_lo;
  undefined4 in_a3_lo;
  float in_f0;
  float fVar1;
  undefined4 auStack8 [2];
  
  if ((in_a1 & 2) == 0) {
    if ((in_a1 & 0x10) == 0) {
      proc_7F032C78(in_a0_lo,in_a1,CONCAT44(in_a2_hi,in_a2_lo),auStack8);
      in_f0 = (float)proc_7F032BD8();
    }
    else {
      fVar1 = (float)in_a2_lo * flt_80051DAC;
      getsubroty(*(int *)(in_a0_lo + 0xe),(uint)in_a1,in_a2_lo,in_a3_lo);
      in_f0 = fVar1 / 65536.00000000 - in_f0;
      if (in_f0 < 0.00000000) {
        in_f0 = in_f0 + flt_80051DB0;
      }
    }
  }
  else {
    in_f0 = 0.00000000;
  }
  return in_f0;
}



void proc_7F02516C(int param_1,int param_2,int param_3,int *param_4,uint param_5,undefined4 param_6,
                  undefined4 param_7)

{
  uint uVar1;
  u32 uVar3;
  longlong lVar2;
  char cVar4;
  int iVar5;
  int hand;
  int iVar6;
  int *piVar7;
  undefined uVar8;
  undefined uVar9;
  int iVar10;
  float fVar11;
  float extraout_f12;
  float extraout_f14;
  int iStack56;
  int iStack52;
  undefined4 uStack48;
  undefined4 uStack44;
  int *piStack16;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x1c);
  uStack44 = dword_800309AC;
  uStack48 = dword_800309A8;
  iStack52 = dword_800309B4;
  iStack56 = dword_800309B0;
  *(undefined *)(param_1 + 7) = 8;
  uVar8 = 1;
  uVar9 = 0;
  fVar11 = (float)proc_7F0250BC();
  if (param_3 == 0) {
    fVar11 = (fVar11 * 32.00000000) / flt_80051DB8;
  }
  else {
    fVar11 = ((flt_80051DB4 - fVar11) * 32.00000000) / flt_80051DB4;
  }
  iVar10 = (int)(fVar11 + 0.50000000);
  if (0x1f < iVar10) {
    iVar10 = 0;
  }
  uVar3 = get_random_value();
  piVar7 = *(int **)(param_2 + iVar10 * 4);
  uVar1 = piVar7[1];
  iVar10 = *piVar7;
  if (uVar1 == 0) {
    trap(0x1c00);
  }
  hand = 0;
  iVar6 = 0;
  piStack16 = (int *)(iVar10 + (uVar3 % uVar1) * 0x48);
  piVar7 = param_4;
  if (((*(uint *)(param_1 + 0x14) & 0x20) != 0) &&
     (iVar5 = uVar3 % uVar1 + 1, piVar7 = param_4, ptr_animation_table + 0x318 == *piStack16)) {
    if (uVar1 == 0) {
      trap(0x1c00);
    }
    if ((uVar1 == 0xffffffff) && (iVar5 == -0x80000000)) {
      trap(0x1800);
    }
    piStack16 = (int *)((iVar5 % uVar1) * 0x48 + iVar10);
    piVar7 = param_4;
  }
  do {
    if (*piVar7 != 0) {
      iVar10 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,hand);
      iVar10 = *(int *)(iVar10 + 4);
      lVar2 = proc_7F05DFCC((int)*(char *)(iVar10 + 0x80));
      if (lVar2 < 0) {
        *(undefined4 *)((int)&iStack56 + iVar6 + 8) = 1;
        cVar4 = *(char *)(iVar10 + 0x80);
        if (cVar4 == '\x16') goto LAB_7f025398;
      }
      else {
        uVar9 = 1;
        cVar4 = *(char *)(iVar10 + 0x80);
LAB_7f025398:
        uVar8 = 0;
      }
      if ((cVar4 == '\x19') || (cVar4 == '\x18')) {
        *(undefined4 *)((int)&iStack56 + iVar6) = 1;
      }
    }
    hand += 1;
    iVar6 += 4;
    piVar7 = piVar7 + 1;
    if (hand == 2) {
      *(undefined *)(param_1 + 0x30) = 1;
      *(undefined *)(param_1 + 0x31) = 0;
      *(int **)(param_1 + 0x2c) = piStack16;
      uVar3 = get_random_value();
      *(byte *)(param_1 + 0x32) = (byte)uVar3 & 1;
      *(undefined *)(param_1 + 0x39) = (char)param_4[1];
      *(undefined *)(param_1 + 0x38) = (char)*param_4;
      *(undefined *)(param_1 + 0x3b) = (char)uStack44;
      *(undefined *)(param_1 + 0x3a) = (char)uStack48;
      *(undefined *)(param_1 + 0x3d) = (char)iStack52;
      *(undefined *)(param_1 + 0x36) = uVar8;
      *(undefined *)(param_1 + 0x37) = uVar9;
      *(undefined4 *)(param_1 + 0x40) = 0;
      *(undefined *)(param_1 + 0x33) = 0;
      *(undefined *)(param_1 + 0x3c) = (char)iStack56;
      if ((iStack52 == 0) && (iStack56 == 0)) {
        if ((param_5 & 0x80) == 0) {
          uVar3 = get_random_value();
          *(char *)(param_1 + 0x34) = ((byte)uVar3 & 3) + 2;
        }
        else {
          *(undefined *)(param_1 + 0x34) = 1;
        }
        if ((*param_4 != 0) && (param_4[1] != 0)) {
          uVar3 = get_random_value();
          *(char *)(param_1 + 0x34) = *(char *)(param_1 + 0x34) + ((byte)uVar3 & 3) + '\x02';
        }
      }
      else {
        if ((iStack52 == 0) || (iStack56 == 0)) {
          *(undefined *)(param_1 + 0x34) = 1;
        }
        else {
          *(undefined *)(param_1 + 0x34) = 2;
        }
      }
      *(uint *)(param_1 + 0x4c) = param_5;
      *(undefined4 *)(param_1 + 0x50) = param_6;
      *(undefined4 *)(param_1 + 0x58) = 0;
      *(undefined4 *)(param_1 + 0x44) = 0;
      *(undefined4 *)(param_1 + 0x48) = 0;
      *(undefined *)(param_1 + 8) = 0;
      *(undefined4 *)(param_1 + 0x54) = param_7;
      proc_7F023B5C();
      proc_7F06FCA8(iStack4,*piStack16,(char)param_3,extraout_f12,piStack16[4],extraout_f14);
      proc_7F024F8C(param_1);
      return;
    }
  } while( true );
}



void proc_7F025560(int param_1,uint param_2,undefined4 param_3)

{
  bool bVar1;
  int iVar3;
  int iVar4;
  u32 uVar5;
  ulonglong uVar2;
  undefined **ppuVar6;
  uint uVar7;
  uint uStack24;
  uint uStack20;
  uint uStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  uStack24 = dword_800309B8;
  uStack20 = dword_800309BC;
  if ((iStack4 == 0) || (iVar3 == 0)) {
    iStack8 = iVar3;
    uVar2 = check_if_item_held_like_pistol(iStack4);
    if ((uVar2 == 0) && (uVar2 = check_if_item_held_like_pistol(iStack8), uVar2 == 0)) {
      ppuVar6 = ptr_rifle_firing_animation_groups;
      bVar1 = iStack4 != 0;
      uVar7 = (uint)bVar1;
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
    }
    else {
      ppuVar6 = ptr_pistol_firing_animation_groups;
      bVar1 = iStack4 != 0;
      uVar7 = (uint)bVar1;
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
    }
  }
  else {
    iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1);
    iVar4 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    bVar1 = iVar4 == 0;
    ppuVar6 = ptr_pistol_firing_animation_groups;
    if ((iVar3 == 0) || (iVar4 == 0)) {
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
      uVar7 = (uint)bVar1;
    }
    else {
      uVar5 = get_random_value();
      uStack12 = uVar5 & 1;
      uVar5 = get_random_value();
      if (uVar5 % 3 == 0) {
        ppuVar6 = ptr_pistol_firing_animation_groups;
        uStack20 = uStack12;
        uStack24 = (uint)(uStack12 == 0);
        uVar7 = uStack12;
      }
      else {
        ppuVar6 = ptr_doubles_firing_animation_groups;
        uStack20 = 1;
        uStack24 = 1;
        uVar7 = uStack12;
      }
    }
  }
  proc_7F02516C(param_1,(int)ppuVar6,uVar7,(int *)&uStack24,param_2,param_3,1);
  return;
}



void proc_7F0256F0(int param_1,uint param_2,undefined4 param_3)

{
  bool bVar1;
  int iVar3;
  int iVar4;
  u32 uVar5;
  ulonglong uVar2;
  undefined **ppuVar6;
  uint uVar7;
  uint uStack24;
  uint uStack20;
  uint uStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  uStack24 = dword_800309C0;
  uStack20 = dword_800309C4;
  if ((iStack4 == 0) || (iVar3 == 0)) {
    iStack8 = iVar3;
    uVar2 = check_if_item_held_like_pistol(iStack4);
    if ((uVar2 == 0) && (uVar2 = check_if_item_held_like_pistol(iStack8), uVar2 == 0)) {
      ppuVar6 = ptr_crouched_rifle_firing_animation_groups;
      bVar1 = iStack4 != 0;
      uVar7 = (uint)bVar1;
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
    }
    else {
      ppuVar6 = ptr_crouched_pistol_firing_animation_groups;
      bVar1 = iStack4 != 0;
      uVar7 = (uint)bVar1;
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
    }
  }
  else {
    iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1);
    iVar4 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    bVar1 = iVar4 == 0;
    ppuVar6 = ptr_crouched_pistol_firing_animation_groups;
    if ((iVar3 == 0) || (iVar4 == 0)) {
      uStack20 = (uint)bVar1;
      uStack24 = (uint)!bVar1;
      uVar7 = (uint)bVar1;
    }
    else {
      uVar5 = get_random_value();
      uStack12 = uVar5 & 1;
      uVar5 = get_random_value();
      if (uVar5 % 3 == 0) {
        ppuVar6 = ptr_crouched_pistol_firing_animation_groups;
        uStack20 = uStack12;
        uStack24 = (uint)(uStack12 == 0);
        uVar7 = uStack12;
      }
      else {
        ppuVar6 = ptr_crouched_doubles_firing_animation_groups;
        uStack20 = 1;
        uStack24 = 1;
        uVar7 = uStack12;
      }
    }
  }
  proc_7F02516C(param_1,(int)ppuVar6,uVar7,(int *)&uStack24,param_2,param_3,0);
  return;
}



void proc_7F02587C(int param_1,longlong param_2)

{
  char cVar1;
  f32 fVar2;
  int hand;
  int iVar5;
  ulonglong uVar3;
  int iVar6;
  longlong lVar4;
  u32 uVar7;
  uint uVar8;
  int *piVar9;
  float extraout_f12;
  float extraout_f14;
  int iStack40;
  undefined4 uStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  uint uStack16;
  weapon_firing_animation_table *pwStack4;
  
  hand = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar5 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  uStack24 = dword_800309C8;
  uStack20 = dword_800309CC;
  uStack28 = dword_800309D4;
  uStack32 = dword_800309D0;
  uStack36 = dword_800309DC;
  iStack40 = dword_800309D8;
  if ((hand == 0) || (iVar5 == 0)) {
    uVar3 = check_if_item_held_like_pistol(hand);
    if ((uVar3 == 0) && (uVar3 = check_if_item_held_like_pistol(iVar5), uVar3 == 0)) {
      uStack16 = (uint)(hand != 0);
      if (param_2 == 0) {
        pwStack4 = &stru_80030660;
      }
      else {
        pwStack4 = &stru_800306A8;
      }
      if (hand != 0) {
        uStack20 = 1;
      }
      else {
        uStack24 = 1;
      }
    }
    else {
      uStack16 = (uint)(hand != 0);
      if (param_2 == 0) {
        pwStack4 = &stru_800306F0;
      }
      else {
        pwStack4 = &stru_80030738;
      }
      if (hand != 0) {
        uStack20 = 1;
      }
      else {
        uStack24 = 1;
      }
    }
  }
  else {
    hand = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1);
    iVar5 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    uVar8 = 0;
    if ((hand == 0) || (iVar5 == 0)) {
      uStack16 = (uint)(iVar5 == 0);
    }
    else {
      uVar7 = get_random_value();
      uStack16 = uVar7 & 1;
      uVar7 = get_random_value();
      uVar8 = uVar7 % 3;
    }
    if (uVar8 == 0) {
      if (param_2 == 0) {
        pwStack4 = &stru_800306F0;
      }
      else {
        pwStack4 = &stru_80030738;
      }
      if (uStack16 == 0) {
        uStack24 = 1;
      }
      else {
        uStack20 = 1;
      }
    }
    else {
      if (uVar8 == 1) {
        if (param_2 == 0) {
          pwStack4 = &stru_80030780;
        }
        else {
          pwStack4 = &stru_800307C8;
        }
        uStack20 = 1;
        uStack24 = 1;
      }
      else {
        if (param_2 == 0) {
          pwStack4 = &stru_80030810;
        }
        else {
          pwStack4 = &stru_80030858;
        }
        uStack20 = 1;
        uStack24 = 1;
      }
    }
  }
  hand = 0;
  iVar5 = 0;
  piVar9 = &iStack40 + 4;
  do {
    if (*piVar9 != 0) {
      iVar6 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,hand);
      iVar6 = *(int *)(iVar6 + 4);
      lVar4 = proc_7F05DFCC((int)*(char *)(iVar6 + 0x80));
      if (lVar4 < 0) {
        *(undefined4 *)((int)&iStack40 + iVar5 + 8) = 1;
      }
      cVar1 = *(char *)(iVar6 + 0x80);
      if ((cVar1 == '\x19') || (cVar1 == '\x18')) {
        *(undefined4 *)((int)&iStack40 + iVar5) = 1;
      }
    }
    hand += 1;
    iVar5 += 4;
    piVar9 = piVar9 + 1;
  } while (hand != 2);
  *(undefined *)(param_1 + 7) = 9;
  *(undefined4 *)(param_1 + 0x30) = 0;
  uVar7 = get_random_value();
  fVar2 = ai_reaction_speed;
  *(undefined4 *)(param_1 + 0x38) = 0;
  *(int *)(param_1 + 0x34) = uVar7 % (int)((float)fVar2 * 400.00000000) + 0x78;
  if ((int)((float)fVar2 * 400.00000000) == 0) {
    trap(0x1c00);
  }
  *(undefined4 *)(param_1 + 0x40) = 0;
  *(weapon_firing_animation_table **)(param_1 + 0x3c) = pwStack4;
  uVar7 = get_random_value();
  *(uint *)(param_1 + 0x44) = uVar7 & 1;
  *(undefined *)(param_1 + 0x49) = (char)uStack20;
  *(undefined *)(param_1 + 0x48) = (char)uStack24;
  *(undefined *)(param_1 + 0x4b) = (char)uStack28;
  *(undefined *)(param_1 + 0x4a) = (char)uStack32;
  *(undefined *)(param_1 + 0x4d) = (char)uStack36;
  *(undefined *)(param_1 + 8) = 0;
  *(undefined4 *)(param_1 + 0x54) = 0;
  *(undefined *)(param_1 + 0x4c) = (char)iStack40;
  proc_7F06FCA8(*(int *)(param_1 + 0x1c),pwStack4->anonymous_0,(char)uStack16,extraout_f12,
                pwStack4->anonymous_4,extraout_f14);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F025C40(void)

{
  bool bVar1;
  int iVar4;
  int hand;
  ulonglong uVar2;
  u32 uVar5;
  int iVar6;
  longlong lVar3;
  char cVar7;
  GUARDdata *guard;
  int in_a1_lo;
  uint *puVar8;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  int iStack68;
  int iStack64;
  undefined4 uStack60;
  undefined4 uStack56;
  undefined4 uStack52;
  uint uStack44;
  uint uStack40;
  int iStack32;
  int iStack24;
  uint uStack20;
  weapon_firing_animation_table *pwStack8;
  int iStack4;
  
  iStack4 = guard->MODELdata_pointer;
  iVar4 = something_with_weaponpos_of_guarddata_hand(guard,1);
  hand = something_with_weaponpos_of_guarddata_hand(guard,0);
  iStack24 = 0;
  uStack44 = dword_800309E0;
  uStack40 = dword_800309E4;
  uStack52 = 0;
  uStack60 = dword_800309E8;
  uStack56 = dword_800309EC;
  bVar1 = true;
  iStack64 = dword_800309F4;
  iStack68 = dword_800309F0;
  if ((iVar4 == 0) || (hand == 0)) {
    uVar2 = check_if_item_held_like_pistol(iVar4);
    if ((uVar2 == 0) && (uVar2 = check_if_item_held_like_pistol(hand), uVar2 == 0)) {
      uStack40 = (uint)(iVar4 != 0);
      uStack44 = (uint)(iVar4 == 0);
      uStack20 = uStack40;
    }
    else {
      uStack40 = (uint)(iVar4 != 0);
      iStack24 = 1;
      uStack44 = (uint)(iVar4 == 0);
      uStack20 = uStack40;
    }
  }
  else {
    iVar4 = is_weapon_in_guarddata_hand(guard,1);
    hand = is_weapon_in_guarddata_hand(guard,0);
    if ((iVar4 == 0) || (hand == 0)) {
      uStack40 = (uint)(hand == 0);
      iStack24 = 1;
      uStack44 = (uint)(hand != 0);
      uStack20 = uStack40;
    }
    else {
      uVar5 = get_random_value();
      uStack20 = uVar5 & 1;
      iStack24 = 1;
      uVar5 = get_random_value();
      if (uVar5 % 3 == 0) {
        uStack44 = (uint)(uStack20 == 0);
        uStack40 = uStack20;
      }
      else {
        uStack40 = 1;
        uStack44 = 1;
      }
    }
  }
  if (((in_a1_lo == 0) || (uStack20 != 0)) && ((in_a1_lo != 0 || (uStack20 == 0)))) {
    uVar5 = get_random_value();
    if ((uVar5 & 1) == 0) {
      pwStack8 = &stru_80030150;
    }
    else {
      pwStack8 = &stru_800300C0;
    }
  }
  else {
    uVar5 = get_random_value();
    if ((uVar5 & 1) == 0) {
      pwStack8 = &stru_80030108;
    }
    else {
      pwStack8 = &stru_80030078;
    }
  }
  hand = 0;
  iVar4 = 0;
  puVar8 = &uStack44;
  if (iStack24 != 0) {
    pwStack8 = pwStack8 + 4;
  }
  do {
    if (*puVar8 != 0) {
      iVar6 = something_with_weaponpos_of_guarddata_hand(guard,hand);
      iStack32 = *(int *)(iVar6 + 4);
      lVar3 = proc_7F05DFCC((int)*(char *)(iStack32 + 0x80));
      if (lVar3 < 0) {
        *(undefined4 *)((int)&iStack68 + iVar4 + 8) = 1;
        cVar7 = *(char *)(iStack32 + 0x80);
        if (cVar7 == '\x16') goto LAB_7f025eec;
      }
      else {
        uStack52 = 1;
        cVar7 = *(char *)(iStack32 + 0x80);
LAB_7f025eec:
        bVar1 = false;
      }
      if ((cVar7 == '\x19') || (cVar7 == '\x18')) {
        *(undefined4 *)((int)&iStack68 + iVar4) = 1;
      }
    }
    hand += 1;
    iVar4 += 4;
    puVar8 = puVar8 + 1;
    if (hand == 2) {
      guard->current_action = run_roll_fire;
      *(undefined *)((int)&guard->field_30 + 1) = 0;
      *(weapon_firing_animation_table **)&guard->bond_position = pwStack8;
      uVar5 = get_random_value();
      *(byte *)((int)&guard->field_30 + 2) = (byte)uVar5 & 1;
      guard->field_39 = (char)uStack40;
      guard->field_38 = (char)uStack44;
      guard->field_3B = (char)uStack56;
      guard->field_3A = (char)uStack60;
      *(undefined *)((int)&guard->path_target_position + 1) = (char)iStack64;
      *(bool *)&guard->field_36 = bVar1;
      *(char *)&guard->path_target_position = (char)iStack68;
      guard->field_37 = (char)uStack52;
      guard->field_40 = 0;
      *(undefined *)((int)&guard->field_30 + 3) = 0;
      *(undefined *)&guard->field_30 = 1;
      *(undefined *)((int)&guard->field_34 + 1) = (char)iStack24;
      if ((iStack64 == 0) && (iStack68 == 0)) {
        uVar5 = get_random_value();
        *(byte *)&guard->field_34 = ((byte)uVar5 & 3) + 2;
        if ((uStack44 != 0) && (uStack40 != 0)) {
          uVar5 = get_random_value();
          *(byte *)&guard->field_34 = *(char *)&guard->field_34 + ((byte)uVar5 & 3) + '\x02';
        }
      }
      else {
        if ((iStack64 == 0) || (iStack68 == 0)) {
          *(undefined *)&guard->field_34 = 1;
        }
        else {
          *(undefined *)&guard->field_34 = 2;
        }
      }
      guard->field_4C = 1;
      guard->field_50 = 0;
      guard->field_54 = 1;
      *(undefined4 *)&guard->type_of_motion = 0;
      guard->field_44 = 0;
      guard->field_48 = 0;
      guard->set_0_when_fading = '\0';
      proc_7F023B5C();
      proc_7F06FCA8(iStack4,pwStack8->anonymous_0,(char)uStack20,extraout_f12,pwStack8->anonymous_4,
                    extraout_f14);
      if (iStack24 == 0) {
        if (bVar1) {
          if (0.00000000 <= (float)pwStack8->anonymous_9) {
            proc_7F06FDE8(iStack4,extraout_f12_00);
          }
          else {
            proc_7F06FDE8(iStack4,extraout_f12_00);
          }
        }
        else {
          if (0.00000000 <= (float)pwStack8->anonymous_8) {
            proc_7F06FDE8(iStack4,extraout_f12_00);
          }
          else {
            if (0.00000000 <= (float)pwStack8->anonymous_5) {
              proc_7F06FDE8(iStack4,extraout_f12_00);
            }
          }
        }
      }
      return;
    }
  } while( true );
}



void proc_7F026130(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  
  fVar3 = *param_1;
  fVar2 = *param_4;
  fVar4 = param_2[2] - param_1[2];
  fVar1 = param_4[2] * (*param_2 - fVar3) - fVar4 * fVar2;
  if (fVar1 == 0.00000000) {
    if (fVar2 == 0.00000000) {
      if (param_4[2] == 0.00000000) {
        *param_5 = *param_3;
        param_5[1] = param_3[1];
        param_5[2] = param_3[2];
        return;
      }
      *param_5 = fVar3;
    }
    else {
      *param_5 = fVar3;
    }
    param_5[1] = param_1[1];
    param_5[2] = param_1[2];
  }
  else {
    fVar1 = (fVar4 * (*param_3 - fVar3) + (param_1[2] - param_3[2]) * (*param_2 - fVar3)) / fVar1;
    *param_5 = fVar2 * fVar1 + *param_3;
    param_5[1] = param_4[1] * fVar1 + param_3[1];
    param_5[2] = param_4[2] * fVar1 + param_3[2];
  }
  return;
}



void proc_7F02624C(float *param_1,float *param_2,float *param_3)

{
  float afStack24 [3];
  float afStack12 [3];
  
  proc_7F0B28B0(afStack12,afStack24);
  proc_7F026130(afStack12,afStack24,param_1,param_2,param_3);
  return;
}



void proc_7F026298(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  proc_7F0B28B0(&fStack12,&fStack24);
  fVar1 = (*param_2 * (fStack4 - param_1[2]) - param_2[2] * (fStack12 - *param_1)) /
          (param_2[2] * (fStack24 - fStack12) - (fStack16 - fStack4) * *param_2);
  *param_3 = (fStack24 - fStack12) * fVar1 + fStack12;
  param_3[1] = (fStack20 - fStack8) * fVar1 + fStack8;
  param_3[2] = (fStack16 - fStack4) * fVar1 + fStack4;
  return;
}



float proc_7F026364(int param_1,float param_2,float param_3,float param_4,float param_5,
                   undefined4 param_6)

{
  longlong lVar1;
  float afStack44 [2];
  float fStack36;
  float fStack32;
  GUARDdata *pGStack28;
  undefined4 uStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  uStack24 = *(undefined4 *)(param_1 + 0x14);
  pGStack28 = *(GUARDdata **)(param_1 + 4);
  fStack12 = sinf(param_4);
  uStack8 = 0;
  fStack4 = cosf(param_4);
  fStack16 = fStack12 * param_5 + *(float *)(param_1 + 8);
  fStack20 = fStack4 * param_5 + *(float *)(param_1 + 0x10);
  set_or_unset_GUARDdata_flag(pGStack28,0);
  proc_7F0B1CC4();
  lVar1 = proc_7F0B0E24();
  if (lVar1 == 0) {
    proc_7F02624C((float *)(param_1 + 8),&fStack12,afStack44);
    afStack44[0] = afStack44[0] - *(float *)(param_1 + 8);
    fStack36 = fStack36 - *(float *)(param_1 + 0x10);
    param_5 = sqrtf(afStack44[0] * afStack44[0] + fStack36 * fStack36);
  }
  fStack32 = param_5;
  set_or_unset_GUARDdata_flag(pGStack28,1);
  return fStack32;
}



undefined proc_7F0264B0(int param_1,float param_2,float param_3)

{
  undefined in_v0_lo;
  undefined4 in_a1_lo;
  undefined4 in_a2_lo;
  float extraout_f12;
  float extraout_f14;
  undefined4 uStack12;
  undefined4 uStack8;
  float fStack4;
  
  proc_7F023160(param_1,&uStack12,&fStack4,&uStack8);
  proc_7F026364(param_1,extraout_f12,extraout_f14,in_a1_lo,in_a2_lo,0x1f);
  return in_v0_lo;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F026508(void)

{
  char *pcVar1;
  bool bVar2;
  bool bVar3;
  ulonglong uVar4;
  animation_something *paVar5;
  int iVar6;
  u32 uVar7;
  int iVar8;
  GUARDdata *guard;
  int iVar9;
  float *in_a1_lo;
  uint extraout_a1_lo;
  float in_a2_lo;
  undefined4 extraout_a2_lo;
  int in_a3_lo;
  undefined4 extraout_a3_lo;
  struck_animation_table *psVar10;
  uint uVar11;
  int objinst;
  float in_f0;
  float fVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float extraout_f12_12;
  float extraout_f12_13;
  float extraout_f12_14;
  float extraout_f12_15;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  int in_stack_00000010;
  int iStack24;
  
  pcVar1 = (char *)guard->POSdata_pointer;
  objinst = guard->MODELdata_pointer;
  bVar3 = false;
  iStack24 = 0;
  if ((*pcVar1 == '\x06') && (uVar4 = get_num_players(), 1 < (longlong)uVar4)) {
    return;
  }
  iVar9 = 0;
  iVar6 = iStack24;
  if (dword_8002C914.anonymous_0 != -1) {
    paVar5 = &dword_8002C914;
    iVar8 = dword_8002C914.anonymous_0;
    do {
      iVar6 = iVar9;
      if (in_a3_lo == iVar8) break;
      iVar8 = paVar5[1].anonymous_0;
      iVar9 += 1;
      paVar5 = paVar5 + 1;
      iVar6 = iStack24;
    } while (iVar8 != -1);
  }
  iStack24 = iVar6;
  if ((float)guard->damage_received < (float)guard->health) {
    if (((in_a3_lo == 7) && (flt_80051DD4 < in_a2_lo)) &&
       ((in_a2_lo < flt_80051DD8 && (uVar7 = get_random_value(), uVar7 % 5 < 2)))) {
      uVar7 = get_random_value();
      uVar11 = uVar7 % 5;
      proc_7F02D184((int)guard);
      guard->current_action = gettingshot;
      guard->bond_position = 0;
      iVar6 = global_timer;
      guard->set_0_when_fading = '\0';
      guard->field_30 = iVar6;
      uVar7 = get_random_value();
      if ((uVar7 & 1) == 0) {
        iVar6 = ptr_animation_table + 0x4f14;
        uVar7 = get_random_value();
        proc_7F06FC4C(objinst,iVar6,(byte)uVar7 & 1,extraout_f12_09,0,extraout_f14_03,0x3f000000);
        if (uVar11 < 2) {
          proc_7F023C54();
          proc_7F06FDE8(objinst,extraout_f12_10);
        }
        else {
          if (uVar11 < 4) {
            proc_7F023C54();
            proc_7F06FDE8(objinst,extraout_f12_11);
          }
          else {
            proc_7F023C54();
            proc_7F06FDE8(objinst,extraout_f12_12);
          }
        }
      }
      else {
        iVar6 = ptr_animation_table + 0x4ce0;
        uVar7 = get_random_value();
        proc_7F06FC4C(objinst,iVar6,(byte)uVar7 & 1,extraout_f12_05,0x41200000,extraout_f14_02,
                      0x3f000000);
        if (uVar11 < 2) {
          proc_7F023C54();
          proc_7F06FDE8(objinst,extraout_f12_06);
        }
        else {
          if (uVar11 < 4) {
            proc_7F023C54();
            proc_7F06FDE8(objinst,extraout_f12_07);
          }
          else {
            proc_7F023C54();
            proc_7F06FDE8(objinst,extraout_f12_08);
          }
        }
      }
      bVar3 = true;
    }
    if (((!bVar3) &&
        (paVar5 = &dword_8002C914 + iStack24, (&dword_8002C914)[iStack24].field_24 != NULL)) &&
       (0 < (&dword_8002C914)[iStack24].field_28)) {
      bVar3 = true;
      iVar6 = something_with_weaponpos_of_guarddata_hand(guard,1);
      iVar9 = something_with_weaponpos_of_guarddata_hand(guard,0);
      if ((paVar5 == &animation_something_8002caa0) && (iVar6 != 0)) {
        paVar5 = &animation_something_8002cacc;
      }
      else {
        if ((paVar5 == &animation_something_8002cb24) && (iVar9 != 0)) {
          paVar5 = &animation_something_8002cb50;
        }
      }
      uVar7 = get_random_value();
      if (paVar5->field_28 == 0) {
        trap(0x1c00);
      }
      psVar10 = paVar5->field_24 + uVar7 % paVar5->field_28;
      proc_7F02D184((int)guard);
      guard->current_action = gettingshot;
      guard->bond_position = 0;
      iVar6 = global_timer;
      guard->set_0_when_fading = '\0';
      guard->field_30 = iVar6;
      proc_7F06FC4C(objinst,psVar10->anonymous_0,(char)psVar10->anonymous_1,extraout_f12_13,0,
                    extraout_f14_04,(int)psVar10->anonymous_3);
      if (0.00000000 <= psVar10->anonymous_2) {
        proc_7F023C54();
        proc_7F06FDE8(objinst,extraout_f12_14);
      }
      else {
        proc_7F023C54();
        proc_7F06FDE8(objinst,extraout_f12_15);
      }
    }
    bVar2 = false;
    goto LAB_7f026ea0;
  }
  if ((in_a2_lo < flt_80051DBC) || (flt_80051DC0 < in_a2_lo)) {
    uVar7 = get_random_value();
    if (uVar7 % 0x14 == 0) {
      getsubroty(objinst,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
      proc_7F0264B0((int)pcVar1,in_f0 + flt_80051DC8 + flt_80051DCC,
                    (in_f0 + flt_80051DC8) - flt_80051DD0);
      fVar12 = in_f0;
      proc_7F0264B0((int)pcVar1,extraout_f12,extraout_f14);
      if (in_f0 < 150.00000000) {
        if (fVar12 < 150.00000000) {
          if (in_f0 - fVar12 < 10.00000000) {
            if (-10.00000000 < in_f0 - fVar12) {
              uVar7 = get_random_value();
              uVar11 = uVar7 & 1;
              proc_7F02D184((int)guard);
              guard->current_action = dying;
              guard->bond_position = 0;
              *(float *)&guard->field_30 = (&stru_8002DEBC)[uVar11].anonymous_5;
              fVar12 = (&stru_8002DEBC)[uVar11].anonymous_6;
              guard->set_0_when_fading = '\0';
              *(undefined4 *)&guard->field_38 = 0;
              *(float *)&guard->field_34 = fVar12;
              proc_7F06FC4C(objinst,(&stru_8002DEBC)[uVar11].anonymous_0,
                            (char)(&stru_8002DEBC)[uVar11].anonymous_1,extraout_f12_00,0,
                            extraout_f14_00,(int)(&stru_8002DEBC)[uVar11].anonymous_3);
              if (0.00000000 <= (&stru_8002DEBC)[uVar11].anonymous_2) {
                proc_7F06FDE8(objinst,extraout_f12_01);
              }
              guard->collision_radius = 10.00000000;
              bVar3 = true;
              bVar2 = true;
            }
            else {
              bVar2 = false;
            }
          }
          else {
            bVar2 = false;
          }
        }
        else {
          bVar2 = false;
        }
      }
      else {
        bVar2 = false;
      }
    }
    else {
      bVar2 = false;
    }
  }
  else {
    bVar2 = false;
  }
  if (((!bVar2) && ((&dword_8002C914)[iStack24].field_1C != NULL)) &&
     (0 < (&dword_8002C914)[iStack24].field_20)) {
    bVar3 = true;
    uVar7 = get_random_value();
    if ((&dword_8002C914)[iStack24].field_20 == 0) {
      trap(0x1c00);
    }
    psVar10 = (&dword_8002C914)[iStack24].field_1C + uVar7 % (&dword_8002C914)[iStack24].field_20;
    proc_7F02D184((int)guard);
    guard->current_action = dying;
    guard->bond_position = 0;
    fVar12 = 0.00000000;
    *(float *)&guard->field_30 = psVar10->anonymous_5;
    fVar13 = psVar10->anonymous_6;
    guard->set_0_when_fading = '\0';
    *(undefined4 *)&guard->field_38 = 0;
    *(float *)&guard->field_34 = fVar13;
    proc_7F06FC4C(objinst,psVar10->anonymous_0,(char)psVar10->anonymous_1,extraout_f12_02,0,
                  extraout_f14_01,(int)psVar10->anonymous_3);
    if (ptr_animation_table + 0x2e64 == psVar10->anonymous_0) {
      uVar7 = get_random_value();
      if (uVar7 % 100 == 0) {
        fVar12 = psVar10->anonymous_2;
        fVar13 = extraout_f12_04;
        goto LAB_7f026940;
      }
      proc_7F06FDE8(objinst,extraout_f12_04);
    }
    else {
      fVar12 = psVar10->anonymous_2;
      fVar13 = extraout_f12_03;
LAB_7f026940:
      if (0.00000000 <= fVar12) {
        proc_7F06FDE8(objinst,fVar13);
      }
    }
    proc_7F05DFA8(in_stack_00000010);
    if (fVar12 <= 0.00000000) {
      if ((guard->guard_bitflags & 0x8000U) == 0) {
        objinst = psVar10->anonymous_4;
      }
      else {
        fVar12 = 6.00000000;
        objinst = psVar10->anonymous_4;
      }
    }
    else {
      objinst = psVar10->anonymous_4;
    }
    if ((objinst != 0) && (0.00000000 < fVar12)) {
      guard->path_target_position = 0;
      *(float *)&guard->field_38 = (fVar12 * 90.00000000) / 6.00000000;
      *(float *)&guard->field_40 = *in_a1_lo * fVar12;
      *(float *)&guard->field_44 = in_a1_lo[1] * fVar12;
      *(float *)&guard->field_48 = in_a1_lo[2] * fVar12;
    }
  }
  proc_7F021B20(guard);
  increment_num_kills_display_text_in_MP();
  if (guard->guard_bitflags << 0xb < 0) {
    inc_cur_civilian_casualties();
    bVar2 = true;
  }
  else {
    bVar2 = true;
  }
LAB_7f026ea0:
  if ((bVar2) && (bVar3)) {
    objinst = guard->handle_positiondata_right_gun;
    if (objinst == 0) {
      objinst = guard->handle_positiondata_left_gun;
    }
    else {
      if ((*(uint *)(*(int *)(objinst + 4) + 8) & 0x2000) == 0) {
        proc_7F04BFD0(objinst,1);
        guard->special_bitflags = guard->special_bitflags | 1;
        objinst = guard->handle_positiondata_left_gun;
      }
      else {
        objinst = guard->handle_positiondata_left_gun;
      }
    }
    if ((objinst != 0) && ((*(uint *)(*(int *)(objinst + 4) + 8) & 0x2000) == 0)) {
      proc_7F04BFD0(objinst,1);
      guard->special_bitflags = guard->special_bitflags | 1;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F026F30(void)

{
  weapon_firing_animation_table *pwVar1;
  int in_a0_lo;
  int iVar2;
  float *in_a1_lo;
  float in_f0;
  float fVar3;
  float fVar4;
  
  if (*(char *)(in_a0_lo + 7) == '\n') {
    if (*(char *)(in_a0_lo + 0x35) == '\0') {
      fVar4 = *(float *)(*(int *)(in_a0_lo + 0x2c) + 4) - 8.00000000;
      proc_7F06F5BC(*(int *)(in_a0_lo + 0x1c));
      if (fVar4 <= in_f0) {
        return 0;
      }
      *in_a1_lo = fVar4;
    }
    else {
      pwVar1 = *(weapon_firing_animation_table **)(in_a0_lo + 0x2c);
      if ((((pwVar1 != &stru_80030198) && (pwVar1 != &stru_800301E0)) && (pwVar1 != &stru_80030228))
         && (pwVar1 != &stru_80030270)) {
        return 0;
      }
      fVar3 = (float)pwVar1->anonymous_1;
      fVar4 = (float)pwVar1->anonymous_5;
      if (fVar4 < fVar3) {
        iVar2 = *(int *)(in_a0_lo + 0x1c);
      }
      else {
        iVar2 = *(int *)(in_a0_lo + 0x1c);
        fVar4 = fVar3 - 8.00000000;
      }
      proc_7F06F5BC(iVar2);
      if (fVar4 <= fVar3) {
        return 0;
      }
      *in_a1_lo = fVar4;
    }
  }
  else {
    if (*(char *)(in_a0_lo + 7) != '\a') {
      return 0;
    }
  }
  return 1;
}



void proc_7F027060(int param_1)

{
  ulonglong uVar1;
  longlong lVar2;
  int **ppiVar3;
  int iVar4;
  undefined **ppuVar5;
  undefined **ppuVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 uStack72;
  undefined2 uStack68;
  undefined4 auStack64 [14];
  int iStack8;
  
  iVar4 = 0;
  if (**(char **)(param_1 + 0x18) == '\x06') {
    iStack8 = 0;
    lVar2 = proc_7F09B15C((int)*(char **)(param_1 + 0x18));
    iVar4 = iStack8;
    if ((&ptr_BONDdata_p1)[(int)lVar2]->player_button_control != 0) {
      return;
    }
  }
  if (**(char **)(param_1 + 0x18) == '\x06') {
    iStack8 = iVar4;
    uVar1 = get_num_players();
    if (uVar1 == 1) {
      iVar4 = iStack8;
      if (*(char *)&c_item_entries[(int)*(char *)(param_1 + 0xf)].anonymous_3 != '\0') {
        iVar4 = 1;
      }
    }
    else {
      lVar2 = proc_7F09B15C(*(int *)(param_1 + 0x18));
      uVar1 = get_player_mp_char_gender((int)lVar2);
      iVar4 = iStack8;
      if (uVar1 != 0) {
        iVar4 = 1;
      }
    }
  }
  else {
    if (*(char *)&c_item_entries[(int)*(char *)(param_1 + 0xf)].anonymous_3 != '\0') {
      iVar4 = 1;
    }
  }
  if (iVar4 == 0) {
    uStack72 = female_guard_yelps[0];
    uStack68 = female_guard_yelps[1]._0_2_;
    ppiVar3 = play_sfx_a1(ptr_sfx_buf,*(short *)((int)&uStack72 + female_guard_yelp_counter * 2),
                          NULL);
    female_guard_yelp_counter += 1;
    if (2 < female_guard_yelp_counter) {
      female_guard_yelp_counter = 0;
    }
  }
  else {
    ppuVar5 = male_guard_yelps;
    puVar7 = auStack64;
    do {
      ppuVar6 = ppuVar5 + 3;
      puVar8 = puVar7 + 3;
      *(undefined **)puVar7 = *ppuVar5;
      *(undefined **)(puVar7 + 1) = ppuVar5[1];
      *(undefined **)(puVar7 + 2) = ppuVar5[2];
      ppuVar5 = ppuVar6;
      puVar7 = puVar8;
    } while (ppuVar6 != male_guard_yelps + 0xc);
    *(undefined2 *)puVar8 = male_guard_yelps[12]._0_2_;
    ppiVar3 = play_sfx_a1(ptr_sfx_buf,*(short *)((int)auStack64 + male_guard_yelp_counter * 2),NULL)
    ;
    male_guard_yelp_counter += 1;
    if (0x18 < male_guard_yelp_counter) {
      male_guard_yelp_counter = 0;
    }
  }
  proc_7F053A10((int)ppiVar3,(float *)(*(int *)(param_1 + 0x18) + 8));
  return;
}



// WARNING: Instruction at (ram,0x7f02755c) overlaps instruction at (ram,0x7f027558)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F02727C(void)

{
  guard_action_type gVar1;
  int **ppiVar4;
  ulonglong uVar2;
  u32 playernum;
  longlong lVar3;
  GUARDdata *guard;
  longlong in_a1;
  int *in_a2_lo;
  int weapon;
  uint uVar5;
  char *pcVar6;
  float in_f0;
  float fVar7;
  float extraout_f12;
  int iStackX4;
  int in_stack_00000010;
  undefined4 uStack20;
  word wStack16;
  int iStack8;
  
  iStackX4 = (int)in_a1;
  iStack8 = guard->POSdata_pointer;
  if ((in_a1 == 0x6e) && (guard->handle_positiondata_hat != 0)) {
    lVar3 = get_hat_model(guard->handle_positiondata_hat);
    if (lVar3 == 5) {
      iStackX4 = 8;
    }
    else {
      if (lVar3 == 3) {
        uStack20 = metal_ricochet_SFX._0_4_;
        wStack16 = metal_ricochet_SFX[2];
        playernum = get_random_value();
        ppiVar4 = play_sfx_a1(ptr_sfx_buf,*(short *)((int)&uStack20 + (playernum % 3) * 2),NULL);
        proc_7F053A10((int)ppiVar4,(float *)(guard->POSdata_pointer + 8));
      }
      else {
        proc_7F04BFD0(guard->handle_positiondata_hat,4);
        guard->special_bitflags = guard->special_bitflags | 1;
      }
    }
  }
  if (in_stack_00000010 == 0) {
    uVar5 = guard->guard_bitflags;
  }
  else {
    if (iStackX4 == 0) {
LAB_7f0273e8:
      uVar5 = guard->guard_bitflags;
    }
    else {
      if (iStackX4 == 7) {
LAB_7f0273d0:
        inc_curplayer_hitcount_with_weapon(weapon,2);
        uVar5 = guard->guard_bitflags;
      }
      else {
        if (iStackX4 == 8) {
          inc_curplayer_hitcount_with_weapon(weapon,1);
          uVar5 = guard->guard_bitflags;
        }
        else {
          if (iStackX4 == 0xf) goto LAB_7f0273d0;
          if (iStackX4 == 100) {
            inc_curplayer_hitcount_with_weapon(weapon,4);
            uVar5 = guard->guard_bitflags;
          }
          else {
            if (iStackX4 != 0x6e) {
              inc_curplayer_hitcount_with_weapon(weapon,3);
              goto LAB_7f0273e8;
            }
            inc_curplayer_hitcount_with_weapon(weapon,5);
            uVar5 = guard->guard_bitflags;
          }
        }
      }
    }
  }
  guard->shots_hit = guard->shots_hit + '\x01';
  guard->guard_bitflags = uVar5 | 0x200000;
  if ((uVar5 & 0x10) != 0) {
    proc_7F0206D4(guard);
    return 0;
  }
  if (guard->current_action == dying) {
    return 1;
  }
  if (guard->current_action == fade_away) {
    return 1;
  }
  proc_7F05DF84(weapon);
  if ((in_stack_00000010 != 0) && (uVar2 = get_num_players(), uVar2 == 1)) {
    in_f0 = in_f0 * (float)ai_health_modifier;
  }
  fVar7 = (float)proc_7F032BD8();
  if (iStackX4 == 200) {
    iStackX4 = 0xf;
    in_f0 = in_f0 * 0.50000000;
  }
  else {
    if (iStackX4 == 0xc9) {
      iStackX4 = 0xf;
      in_f0 = in_f0 * 0.25000000;
    }
  }
  if (((((weapon == 1) && (gVar1 = guard->current_action, gVar1 != standing)) &&
       (gVar1 != walk_path)) && ((gVar1 != surrendering && (gVar1 != swattingflies)))) &&
     ((gVar1 != moving || (guard->distance_counter_or_something != '\0')))) {
    if ((fVar7 < flt_80051DDC) || (FLOAT_80051de0 < fVar7)) {
      in_f0 = in_f0 * 0.12500000;
    }
    else {
      if ((fVar7 < flt_80051DE4) || (FLOAT_80051de8 < fVar7)) {
        in_f0 = in_f0 * 0.25000000;
      }
      else {
        in_f0 = in_f0 * 0.50000000;
      }
    }
  }
  if (iStackX4 == 8) {
    in_f0 = in_f0 * 4.00000000;
    pcVar6 = (char *)guard->POSdata_pointer;
    goto LAB_7f027664;
  }
  if (iStackX4 == 0xf) {
    in_f0 = in_f0 + in_f0;
  }
  else {
    if (iStackX4 == 100) {
      in_f0 = 0.00000000;
      pcVar6 = (char *)guard->POSdata_pointer;
      goto LAB_7f027664;
    }
    if (iStackX4 != 0x6e) {
      pcVar6 = (char *)guard->POSdata_pointer;
      goto LAB_7f027664;
    }
    in_f0 = 0.00000000;
  }
  pcVar6 = (char *)guard->POSdata_pointer;
LAB_7f027664:
  if (*pcVar6 == '\x06') {
    playernum = get_cur_playernum();
    lVar3 = proc_7F09B15C(guard->POSdata_pointer);
    set_cur_player((int)lVar3);
    record_damage_kills();
    set_cur_player(playernum);
  }
  else {
    guard->guard_bitflags = guard->guard_bitflags | 0x100;
    *(float *)&guard->damage_received = (float)guard->damage_received + in_f0;
    if (((float)guard->damage_received < 0.00000000) && (lVar3 = proc_7F026F30(), lVar3 == 0)) {
      proc_7F0206D4(guard);
      return 0;
    }
  }
  if (iStackX4 != 0x6e) {
    proc_7F027060((int)guard);
    lVar3 = proc_7F026F30();
    if (lVar3 == 0) {
      proc_7F026508();
    }
    else {
      if (false) {
        proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12);
      }
      guard->current_action = limping;
      guard->bond_position = *in_a2_lo;
      guard->field_30 = in_a2_lo[1];
      *(int *)&guard->field_34 = in_a2_lo[2];
      *(float *)&guard->field_38 = fVar7;
      guard->path_target_position = iStackX4;
      guard->set_0_when_fading = '\0';
      guard->field_40 = weapon;
    }
  }
  return 1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F027804(void)

{
  uint uVar1;
  undefined8 uVar2;
  u32 uVar3;
  GUARDdata *in_a0_lo;
  int objinst;
  float *in_a1_lo;
  float in_a2_lo;
  int in_a3_lo;
  float in_f0;
  float fVar4;
  float fVar5;
  float fVar6;
  int iVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f12_00;
  float fVar9;
  float extraout_f14;
  float fStack36;
  
  objinst = in_a0_lo->MODELdata_pointer;
  iVar7 = in_a0_lo->POSdata_pointer;
  if ((in_a0_lo->current_action == fade_away) || (in_a0_lo->current_action == dying)) {
    uVar2 = 0;
  }
  else {
    uVar1 = in_a0_lo->guard_bitflags;
    in_a0_lo->guard_bitflags = uVar1 | 0x200000;
    if ((uVar1 & 0x10) == 0) {
      in_a0_lo->shots_hit = in_a0_lo->shots_hit + '\x01';
      in_a0_lo->guard_bitflags = uVar1 | 0x200100;
      *(float *)&in_a0_lo->damage_received = (float)in_a0_lo->damage_received + in_a2_lo;
      if ((float)in_a0_lo->damage_received <= 0.00000000) {
        uVar2 = 0;
      }
      else {
        *(f32 *)&in_a0_lo->damage_received = in_a0_lo->health;
        getsubroty(objinst,(uint)in_a1_lo,objinst,in_a3_lo);
        fVar4 = convert_angle_using_inverse
                          ((f32)(*(float *)(iVar7 + 8) - *in_a1_lo),
                           (f32)(*(float *)(iVar7 + 0x10) - in_a1_lo[2]));
        fVar6 = *(float *)(iVar7 + 8) - *in_a1_lo;
        fVar8 = *(float *)(iVar7 + 0xc) - in_a1_lo[1];
        fStack36 = *(float *)(iVar7 + 0x10) - in_a1_lo[2];
        if (((fVar6 == 0.00000000) && (fVar8 == 0.00000000)) && (fStack36 == 0.00000000)) {
          fStack36 = 1.00000000;
        }
        fVar5 = sqrtf(fStack36 * fStack36 + fVar6 * fVar6 + fVar8 * fVar8);
        fVar5 = (in_a2_lo * 5.00000000) / fVar5;
        fVar9 = fVar4 - in_f0;
        in_a0_lo->field_B0 = fVar6 * fVar5;
        in_a0_lo->field_B4 = fVar8 * fVar5;
        in_a0_lo->field_B8 = fStack36 * fVar5;
        if (fVar4 < in_f0) {
          fVar9 = fVar9 + flt_80051DEC;
        }
        iVar7 = (int)((fVar9 * 8.00000000) / flt_80051DF0 + 0.50000000);
        if (7 < iVar7) {
          iVar7 = 0;
        }
        uVar3 = get_random_value();
        if (explosion_animation_table[iVar7].count == 0) {
          trap(0x1c00);
        }
        iVar7 = (int)*(char *)((int)explosion_animation_table[iVar7].direction +
                              uVar3 % explosion_animation_table[iVar7].count);
        proc_7F02D184((int)in_a0_lo);
        in_a0_lo->current_action = dying;
        in_a0_lo->bond_position = 0;
        *(float *)&in_a0_lo->field_30 = (&stru_8002E648)[iVar7].anonymous_5;
        in_a0_lo->set_0_when_fading = '\0';
        *(undefined4 *)&in_a0_lo->field_34 = 0xbf800000;
        *(undefined4 *)&in_a0_lo->field_38 = 0;
        proc_7F06FCA8(objinst,(&stru_8002E648)[iVar7].anonymous_0 + ptr_animation_table,
                      (char)(&stru_8002E648)[iVar7].anonymous_1,extraout_f12,
                      (&stru_8002E648)[iVar7].anonymous_3,extraout_f14);
        if (0.00000000 <= (&stru_8002E648)[iVar7].anonymous_6) {
          proc_7F06FDE8(objinst,extraout_f12_00);
        }
        if (in_a3_lo != 0) {
          proc_7F027060((int)in_a0_lo);
        }
        proc_7F021B20(in_a0_lo);
        increment_num_kills_display_text_in_MP();
        if (in_a0_lo->guard_bitflags << 0xb < 0) {
          inc_cur_civilian_casualties();
          objinst = in_a0_lo->handle_positiondata_right_gun;
        }
        else {
          objinst = in_a0_lo->handle_positiondata_right_gun;
        }
        if (objinst == 0) {
          objinst = in_a0_lo->handle_positiondata_left_gun;
        }
        else {
          if ((*(uint *)(*(int *)(objinst + 4) + 8) & 0x2000) == 0) {
            proc_7F04BFD0(objinst,1);
            in_a0_lo->special_bitflags = in_a0_lo->special_bitflags | 1;
            objinst = in_a0_lo->handle_positiondata_left_gun;
          }
          else {
            objinst = in_a0_lo->handle_positiondata_left_gun;
          }
        }
        if ((objinst != 0) && ((*(uint *)(*(int *)(objinst + 4) + 8) & 0x2000) == 0)) {
          proc_7F04BFD0(objinst,1);
          in_a0_lo->special_bitflags = in_a0_lo->special_bitflags | 1;
        }
        uVar2 = 1;
      }
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



int * proc_7F027BF4(int param_1)

{
  int *piVar1;
  int iVar2;
  
  if ((ptr_setup_path_tbl != NULL) && (-1 < *(int *)ptr_setup_path_tbl)) {
    iVar2 = *(int *)ptr_setup_path_tbl;
    piVar1 = (int *)ptr_setup_path_tbl;
    do {
      if (param_1 == *(int *)(ptr_0xxxpresets + iVar2 * 0x2c + 0x28)) {
        return piVar1;
      }
      iVar2 = piVar1[4];
      piVar1 = piVar1 + 4;
    } while (-1 < iVar2);
  }
  return NULL;
}



ulonglong proc_7F027C60(int param_1)

{
  int *piVar1;
  
  piVar1 = proc_7F027BF4(param_1);
  return (ulonglong)(piVar1 != NULL);
}



float proc_7F027C84(float *param_1,int *param_2)

{
  float fVar1;
  float fVar2;
  
  fVar1 = *(float *)(ptr_0xxxpresets + *param_2 * 0x2c) - *param_1;
  fVar2 = *(float *)(ptr_0xxxpresets + *param_2 * 0x2c + 2) - param_1[2];
  return fVar1 * fVar1 + fVar2 * fVar2;
}



int * proc_7F027CD4(float *param_1,undefined4 param_2)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  float fVar5;
  float fVar6;
  
  piVar2 = NULL;
  iVar1 = proc_7F0B2718(param_2,proc_7F027C60);
  if ((iVar1 != 0) && (piVar2 = proc_7F027BF4(iVar1), piVar2 != NULL)) {
    fVar5 = proc_7F027C84(param_1,piVar2);
    piVar3 = (int *)piVar2[1];
    iVar1 = *piVar3;
    while (-1 < iVar1) {
      piVar4 = (int *)(ptr_setup_path_tbl + iVar1 * 0x10);
      fVar6 = proc_7F027C84(param_1,piVar4);
      if (fVar6 < fVar5) {
        iVar1 = piVar3[1];
      }
      else {
        iVar1 = piVar3[1];
        piVar4 = piVar2;
      }
      piVar3 = piVar3 + 1;
      piVar2 = piVar4;
    }
  }
  return piVar2;
}



void proc_7F027DB0(int param_1,float *param_2,int param_3)

{
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  int *piVar4;
  float in_f12;
  float in_f14;
  int aiStackX8 [2];
  int aiStack80 [20];
  
  iVar2 = *(int *)(param_1 + 0x18);
  aiStackX8[0] = param_3;
  iVar2 = proc_7F0B0D0C(*(int *)(iVar2 + 0x14),in_f12,in_f14,*(int **)(iVar2 + 8),
                        *(float *)(iVar2 + 0x10),(float)aiStackX8,(uint *)*param_2,(int)param_2[2]);
  if (((0 < iVar2) && (iVar2 < 0x14)) && (iVar3 = 0, 0 < iVar2)) {
    piVar4 = aiStack80;
    do {
      uVar1 = proc_7F0B5E50(*piVar4);
      iVar3 += 1;
      if (uVar1 != 0) {
        return;
      }
      piVar4 = piVar4 + 1;
    } while (iVar3 != iVar2);
  }
  return;
}



void proc_7F027E70(int param_1,float *param_2)

{
  proc_7F027DB0(param_1,param_2,(int)param_2[10]);
  return;
}



void proc_7F027E90(int param_1,undefined *param_2,float *param_3)

{
  undefined4 extraout_a2_lo;
  float fVar1;
  float vector1;
  float extraout_f12;
  float vector2;
  
  vector1 = *param_3 - *(float *)(*(int *)(param_1 + 0x18) + 8);
  vector2 = param_3[2] - *(float *)(*(int *)(param_1 + 0x18) + 0x10);
  fVar1 = convert_angle_using_inverse((f32)vector1,(f32)vector2);
  *param_2 = 6;
  *(undefined4 *)(param_2 + 0x38) = 0;
  vector1 = sqrtf(vector1 * vector1 + vector2 * vector2);
  *(float *)(param_2 + 0x3c) = vector1;
  setsubroty(*(int *)(param_1 + 0x1c),extraout_f12,fVar1,extraout_a2_lo);
  return;
}



void proc_7F027F20(int param_1,undefined4 *param_2,undefined4 *param_3)

{
  int *piVar1;
  undefined4 *puVar2;
  
  piVar1 = *(int **)(param_1 + (uint)*(byte *)(param_1 + 0x58) * 4 + 0x40);
  if (piVar1 == NULL) {
    *param_2 = *(undefined4 *)(param_1 + 0x2c);
    param_2[1] = *(undefined4 *)(param_1 + 0x30);
    param_2[2] = *(undefined4 *)(param_1 + 0x34);
    *param_3 = *(undefined4 *)(param_1 + 0x38);
    return;
  }
  puVar2 = (undefined4 *)(ptr_0xxxpresets + *piVar1 * 0x2c);
  *param_2 = *puVar2;
  param_2[1] = puVar2[1];
  param_2[2] = puVar2[2];
  *param_3 = puVar2[10];
  return;
}



float proc_7F027FA8(int param_1)

{
  float fVar1;
  int iVar2;
  float fVar3;
  
  fVar1 = dword_80030984;
  iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c));
  fVar3 = dword_8003098C;
  if (((((iVar2 != ptr_animation_table + 0x4070) &&
        (iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_80030988,
        iVar2 != ptr_animation_table + 0x40d4)) &&
       (iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_80030998,
       iVar2 != ptr_animation_table + 0x77d4)) &&
      ((iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_80030994,
       iVar2 != ptr_animation_table + 0x777c &&
       (iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_80030990,
       iVar2 != ptr_animation_table + 0x8204)))) &&
     ((iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_800309A4,
      iVar2 != ptr_animation_table + 0x77d4 &&
      ((iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = dword_800309A0,
       iVar2 != ptr_animation_table + 0x8520 &&
       (iVar2 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), fVar3 = fVar1,
       iVar2 == ptr_animation_table + 0x84c4)))))) {
    fVar3 = dword_8003099C;
  }
  return *(float *)(*(int *)(param_1 + 0x1c) + 0x14) * fVar3 * flt_80051DF4;
}



int proc_7F028144(int param_1)

{
  float fVar1;
  float fVar2;
  undefined4 uStack28;
  float afStack24 [2];
  float fStack16;
  float fStack8;
  float fStack4;
  
  fVar1 = proc_7F06F618(*(int *)(param_1 + 0x1c));
  proc_7F027F20(param_1,afStack24,&uStack28);
  fStack4 = afStack24[0] - *(float *)(*(int *)(param_1 + 0x18) + 8);
  fStack8 = fStack16 - *(float *)(*(int *)(param_1 + 0x18) + 0x10);
  if (fStack4 < 0.00000000) {
    fStack4 = -fStack4;
  }
  if (fStack8 < 0.00000000) {
    fStack8 = -fStack8;
  }
  fVar2 = proc_7F027FA8(param_1);
  return (int)((fStack4 + fStack8) / (fVar2 * fVar1));
}



void proc_7F0281F4(int param_1)

{
  *(undefined2 *)(param_1 + 0x5a) = 0;
  return;
}



void proc_7F0281FC(int param_1)

{
  ushort uVar1;
  int iVar2;
  undefined2 uVar3;
  
  if (*(char *)(param_1 + 0x5c) != '\x06') {
    uVar1 = *(ushort *)(param_1 + 0x5a);
    if (uVar1 == 0) {
      iVar2 = proc_7F028144(param_1);
      iVar2 = iVar2 * 2 + 300;
      uVar3 = (undefined2)iVar2;
      if (0xffff < iVar2) {
        uVar3 = 0xffff;
      }
      *(undefined2 *)(param_1 + 0x5a) = uVar3;
    }
    else {
      if (clock_timer._2_2_ < uVar1) {
        *(short *)(param_1 + 0x5a) = uVar1 - clock_timer._2_2_;
      }
      else {
        proc_7F028DDC(param_1,(float *)(param_1 + 0x2c),*(undefined4 *)(param_1 + 0x38),
                      *(char *)(param_1 + 0x59));
      }
    }
  }
  return;
}



void proc_7F02828C(int param_1)

{
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  proc_7F027F20(param_1,&uStack12,&uStack16);
  *(undefined *)(param_1 + 0x5c) = 0;
  *(undefined *)(param_1 + 0x5d) = 0;
  *(undefined *)(param_1 + 0x5e) = 0;
  *(undefined4 *)(param_1 + 0x60) = uStack12;
  *(undefined4 *)(param_1 + 100) = uStack8;
  *(undefined4 *)(param_1 + 0x68) = uStack4;
  proc_7F0281F4(param_1);
  return;
}



void proc_7F0282E0(int param_1)

{
  byte bVar1;
  int iVar2;
  
  bVar1 = *(byte *)(param_1 + 0x58);
  if (bVar1 < 3) {
    *(char *)(param_1 + 0x58) = bVar1 + 1;
  }
  else {
    iVar2 = *(int *)(param_1 + (uint)bVar1 * 4 + 0x40);
    *(undefined *)(param_1 + 0x58) = 1;
    proc_7F08F4F0(iVar2,*(int *)(param_1 + 0x3c),(int *)(param_1 + 0x40),6);
  }
  proc_7F02828C(param_1);
  return;
}



int proc_7F028348(int param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  ulonglong uVar3;
  
  iVar2 = *(int *)(param_1 + 0x30);
  uVar3 = SEXT48(*param_2);
  if (param_3 < 0) {
    uVar3 = (ulonglong)(uVar3 == 0);
    param_3 = -param_3;
  }
  if (param_3 < 1) {
    *param_2 = (int)uVar3;
  }
  else {
    do {
      param_3 += -1;
      if (uVar3 == 0) {
        iVar1 = iVar2 + -1;
        if (iVar2 + -1 < 0) {
          if ((*(byte *)(*(int *)(param_1 + 0x2c) + 5) & 1) == 0) {
            uVar3 = 1;
            iVar1 = 1;
          }
          else {
            iVar1 = (uint)*(ushort *)(*(int *)(param_1 + 0x2c) + 6) - 1;
          }
        }
      }
      else {
        iVar1 = iVar2 + 1;
        if (*(int *)(**(int **)(param_1 + 0x2c) + (iVar2 + 1) * 4) < 0) {
          if ((*(byte *)((int)*(int **)(param_1 + 0x2c) + 5) & 1) == 0) {
            uVar3 = 0;
            iVar1 = iVar2 + -1;
          }
          else {
            iVar1 = 0;
          }
        }
      }
      iVar2 = iVar1;
    } while (0 < param_3);
    *param_2 = (int)uVar3;
  }
  return iVar2;
}



int proc_7F0283FC(int param_1,int param_2)

{
  int iVar1;
  int aiStack8 [2];
  
  aiStack8[0] = *(int *)(param_1 + 0x34);
  iVar1 = proc_7F028348(param_1,aiStack8,param_2);
  return (int)(ptr_0xxxpresets +
              *(int *)(ptr_setup_path_tbl + *(int *)(**(int **)(param_1 + 0x2c) + iVar1 * 4) * 0x10)
              * 0x2c);
}



int proc_7F028474(int param_1)

{
  int iVar1;
  
  iVar1 = proc_7F0283FC(param_1,0);
  return iVar1;
}



void proc_7F028494(int param_1)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)proc_7F028474(param_1);
  *(undefined *)(param_1 + 0x38) = 0;
  *(undefined *)(param_1 + 0x39) = 0;
  *(undefined *)(param_1 + 0x3a) = 0;
  *(undefined4 *)(param_1 + 0x3c) = *puVar1;
  *(undefined4 *)(param_1 + 0x40) = puVar1[1];
  *(undefined4 *)(param_1 + 0x44) = puVar1[2];
  return;
}



void proc_7F0284DC(int param_1)

{
  int iVar1;
  
  iVar1 = proc_7F028348(param_1,(int *)(param_1 + 0x34),1);
  *(int *)(param_1 + 0x30) = iVar1;
  proc_7F028494(param_1);
  return;
}



undefined8 proc_7F028510(float *param_1,int param_2)

{
  longlong lVar1;
  short *psVar2;
  uint uStack48;
  float *apfStack44 [3];
  uint uStack32;
  undefined4 uStack28;
  
  uStack28 = 0xffffffff;
  uStack32 = (uint)*(byte *)(param_2 + 3);
  proc_7F03E3FC((int *)&uStack32);
  lVar1 = (longlong)*ptr_list_object_lookup_indices;
  psVar2 = ptr_list_object_lookup_indices;
  do {
    if (lVar1 < 0) {
      return 1;
    }
    if (pos_data_entry[(int)lVar1 * 0x34] == '\x01') {
      proc_7F03CCB0(pos_data_entry + (int)lVar1 * 0x34,(int **)apfStack44,&uStack48);
      if ((int)uStack48 < 1) {
        lVar1 = (longlong)psVar2[1];
      }
      else {
        lVar1 = proc_7F03CCD8(param_1,apfStack44[0],uStack48);
        if (lVar1 != 0) {
          return 0;
        }
        lVar1 = (longlong)psVar2[1];
      }
    }
    else {
      lVar1 = (longlong)psVar2[1];
    }
    psVar2 = psVar2 + 1;
  } while( true );
}



void proc_7F028600(int param_1,undefined *param_2,float param_3,float *param_4,int param_5)

{
  byte bVar1;
  longlong lVar2;
  float *pfVar3;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float fVar4;
  float extraout_f12;
  int in_stack_00000010;
  undefined4 uStack44;
  float afStack40 [9];
  int iStack4;
  
  *(undefined *)(param_1 + 9) = 0;
  *(undefined4 *)(param_1 + 0xcc) = global_timer;
  fVar4 = proc_7F06F618(*(int *)(param_1 + 0x1c));
  *(float *)(param_2 + 0x38) =
       *(float *)(param_2 + 0x38) + (float)param_4 * fVar4 * global_timer_delta;
  if (*(float *)(param_2 + 0x3c) <= *(float *)(param_2 + 0x38)) {
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    lVar2 = proc_7F0B18B8();
    if ((lVar2 < 0) && (lVar2 = proc_7F028510((float *)param_5,in_stack_00000010), lVar2 != 0)) {
      iStack4 = *(int *)(param_1 + 0x18);
      *(int *)(iStack4 + 0x14) = in_stack_00000010;
      *(undefined4 *)(iStack4 + 8) = *(undefined4 *)param_5;
      *(undefined4 *)(iStack4 + 0xc) = *(undefined4 *)(param_5 + 4);
      *(undefined4 *)(iStack4 + 0x10) = *(undefined4 *)(param_5 + 8);
      *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) | 1;
      setsuboffset(*(int *)(param_1 + 0x1c),(float *)param_5,param_5,extraout_a3_lo);
      proc_7F01FC10(*(GUARDdata **)(param_1 + 0x1c),(float *)(iStack4 + 8),(float *)(iStack4 + 8),
                    (float *)(param_1 + 0xac));
      proc_7F020D94((GUARDdata *)param_1);
      if (*(char *)(param_1 + 7) == '\x0e') {
        proc_7F0284DC(param_1);
        pfVar3 = (float *)proc_7F028474(param_1);
        proc_7F027E90(param_1,param_2,pfVar3);
      }
      else {
        if (*(char *)(param_1 + 7) == '\x0f') {
          bVar1 = *(byte *)(param_1 + 0x58);
          if (*(int *)(param_1 + (uint)bVar1 * 4 + 0x40) == 0) {
            if (bVar1 != 0) {
              fVar4 = convert_angle_using_inverse
                                ((f32)(*(float *)(iStack4 + 8) -
                                      *(float *)(ptr_0xxxpresets +
                                                **(int **)(param_1 + (uint)bVar1 * 4 + 0x3c) * 0x2c)
                                      ),(f32)(*(float *)(iStack4 + 0x10) -
                                             *(float *)(ptr_0xxxpresets +
                                                        **(int **)(param_1 + (uint)bVar1 * 4 + 0x3c)
                                                        * 0x2c + 2)));
              setsubroty(*(int *)(param_1 + 0x1c),extraout_f12,fVar4,extraout_a2_lo);
            }
            proc_7F023E48(param_1);
          }
          else {
            proc_7F0282E0(param_1);
            proc_7F027F20(param_1,afStack40,&uStack44);
            proc_7F027E90(param_1,param_2,afStack40);
          }
        }
      }
    }
    else {
      *(undefined4 *)(param_2 + 0x38) = *(undefined4 *)(param_2 + 0x3c);
      if (*(char *)(param_1 + 7) == '\x0e') {
        *(undefined4 *)(param_1 + 0x78) = global_timer;
        proc_7F028494(param_1);
      }
      else {
        *(undefined4 *)(param_1 + 0x9c) = global_timer;
        proc_7F02828C(param_1);
      }
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  }
  return;
}



void proc_7F028894(int param_1,float *param_2)

{
  int iVar1;
  float *pfVar2;
  float fVar3;
  float fVar4;
  undefined4 uStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  
  if ((*(char *)(param_1 + 7) == '\x0e') && (*(char *)(param_1 + 0x38) == '\x06')) {
    pfVar2 = (float *)proc_7F028474(param_1);
    if (*(float *)(param_1 + 0x74) <= *(float *)(param_1 + 0x70)) {
      *param_2 = *pfVar2;
      param_2[1] = pfVar2[1];
      param_2[2] = pfVar2[2];
    }
    else {
      fVar3 = *(float *)(param_1 + 0x70) / *(float *)(param_1 + 0x74);
      fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 8);
      *param_2 = (*pfVar2 - fVar4) * fVar3 + fVar4;
      fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 0xc);
      param_2[1] = (pfVar2[1] - fVar4) * fVar3 + fVar4;
      fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 0x10);
      param_2[2] = (pfVar2[2] - fVar4) * fVar3 + fVar4;
    }
  }
  else {
    if (*(char *)(param_1 + 7) == '\x0f') {
      if (*(char *)(param_1 + 0x5c) == '\x06') {
        proc_7F027F20(param_1,&fStack20,&uStack24);
        if (*(float *)(param_1 + 0x94) < *(float *)(param_1 + 0x98)) {
          fVar3 = *(float *)(param_1 + 0x94) / *(float *)(param_1 + 0x98);
          fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 8);
          *param_2 = (fStack20 - fVar4) * fVar3 + fVar4;
          fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 0xc);
          param_2[1] = (fStack16 - fVar4) * fVar3 + fVar4;
          fVar4 = *(float *)(*(int *)(param_1 + 0x18) + 0x10);
          param_2[2] = (fStack12 - fVar4) * fVar3 + fVar4;
          return;
        }
        *param_2 = fStack20;
        param_2[1] = fStack16;
        param_2[2] = fStack12;
        return;
      }
      iVar1 = *(int *)(param_1 + 0x18);
    }
    else {
      iVar1 = *(int *)(param_1 + 0x18);
    }
    *param_2 = *(float *)(iVar1 + 8);
    param_2[1] = *(float *)(*(int *)(param_1 + 0x18) + 0xc);
    param_2[2] = *(float *)(*(int *)(param_1 + 0x18) + 0x10);
  }
  return;
}



void proc_7F028A5C(int param_1,int param_2,int param_3)

{
  bool bVar1;
  int iVar3;
  int iVar4;
  u32 uVar5;
  ulonglong uVar2;
  bool bVar6;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fVar7;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar8;
  
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  if (((iVar3 == 0) || (iVar4 == 0)) && ((iVar3 != 0 || (iVar4 != 0)))) {
    uVar2 = check_if_item_held_like_pistol(iVar3);
    fVar7 = extraout_f12_00;
    fVar8 = extraout_f14_00;
    if ((uVar2 == 0) &&
       (uVar2 = check_if_item_held_like_pistol(iVar4), fVar7 = extraout_f12_01,
       fVar8 = extraout_f14_01, uVar2 == 0)) {
      bVar1 = true;
      bVar6 = iVar3 != 0;
      fVar7 = extraout_f12_01;
      fVar8 = extraout_f14_01;
    }
    else {
      bVar1 = false;
      bVar6 = iVar3 != 0;
    }
  }
  else {
    uVar5 = get_random_value();
    bVar1 = false;
    bVar6 = (bool)((byte)uVar5 & 1);
    fVar7 = extraout_f12;
    fVar8 = extraout_f14;
  }
  if (bVar1) {
    if (param_2 == 2) {
      proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4070,bVar6,fVar7,0,fVar8);
    }
    else {
      if (param_2 == 1) {
        proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x40d4,bVar6,fVar7,0,fVar8);
      }
      else {
        proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4018,bVar6,fVar7,0,fVar8);
      }
    }
  }
  else {
    if (param_3 == 0) {
      if (param_2 == 2) {
        proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x77d4,bVar6,fVar7,0,fVar8);
      }
      else {
        if (param_2 == 1) {
          proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x8520,bVar6,fVar7,0,fVar8);
        }
        else {
          proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x84c4,bVar6,fVar7,0,fVar8);
        }
      }
    }
    else {
      if (param_2 == 2) {
        proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x77d4,bVar6,fVar7,0,fVar8);
      }
      else {
        if (param_2 == 1) {
          proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x777c,bVar6,fVar7,0,fVar8);
        }
        else {
          proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x8204,bVar6,fVar7,0,fVar8);
        }
      }
    }
  }
  return;
}



void proc_7F028DA0(int param_1)

{
  proc_7F028A5C(param_1,(uint)*(byte *)(param_1 + 0x59),
                (uint)*(byte *)&c_item_entries[(int)*(char *)(param_1 + 0xf)].anonymous_3);
  return;
}



undefined8 proc_7F028DDC(int param_1,float *param_2,undefined4 param_3,char param_4)

{
  bool bVar1;
  undefined8 uVar2;
  int iVar4;
  u32 uVar5;
  longlong lVar3;
  int iStack56;
  float afStack52 [4];
  int iStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  int *piStack12;
  int *piStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x18);
  bVar1 = *(char *)(param_1 + 7) == '\x0f';
  if (bVar1) {
    bVar1 = param_4 == *(char *)(param_1 + 0x59);
  }
  piStack8 = proc_7F027CD4((float *)(iStack4 + 8),*(undefined4 *)(iStack4 + 0x14));
  piStack12 = proc_7F027CD4(param_2,param_3);
  if (piStack8 == NULL) {
    uVar2 = 0;
  }
  else {
    if (piStack12 == NULL) {
      uVar2 = 0;
    }
    else {
      iVar4 = proc_7F08F4F0((int)piStack8,(int)piStack12,&iStack36,6);
      if (iVar4 < 2) {
        uVar2 = 0;
      }
      else {
        proc_7F02D184(param_1);
        *(undefined *)(param_1 + 7) = 0xf;
        *(float *)(param_1 + 0x2c) = *param_2;
        *(float *)(param_1 + 0x30) = param_2[1];
        *(float *)(param_1 + 0x34) = param_2[2];
        *(undefined4 *)(param_1 + 0x38) = param_3;
        *(undefined *)(param_1 + 0x58) = 0;
        *(int **)(param_1 + 0x3c) = piStack12;
        *(undefined4 *)(param_1 + 0xa0) = 0;
        *(char *)(param_1 + 0x59) = param_4;
        uVar5 = get_random_value();
        *(uint *)(param_1 + 0x84) = uVar5 % 100;
        *(undefined *)(param_1 + 0x5f) = 0;
        *(undefined4 *)(param_1 + 0x9c) = 0xffffffff;
        *(int *)(param_1 + 0x40) = iStack36;
        *(undefined4 *)(param_1 + 0x44) = uStack32;
        lVar3 = (longlong)(param_1 + 8);
        *(undefined4 *)(param_1 + 0x48) = uStack28;
        *(undefined4 *)(param_1 + 0x4c) = uStack24;
        *(undefined4 *)(param_1 + 0x50) = uStack20;
        *(undefined4 *)(param_1 + 0x54) = uStack16;
        proc_7F02828C(param_1);
        *(undefined *)(param_1 + 8) = 0;
        if (!bVar1) {
          proc_7F028DA0(param_1);
        }
        proc_7F027F20(param_1,afStack52,&iStack56);
        if (((*(byte *)(iStack4 + 1) & 2) == 0) &&
           (proc_7F027DB0(param_1,afStack52,iStack56), lVar3 != 0)) {
          proc_7F027E90(param_1,(undefined *)(param_1 + 0x5c),afStack52);
        }
        uVar2 = 1;
      }
    }
  }
  return uVar2;
}



void proc_7F028FAC(int param_1)

{
  bool bVar1;
  int iVar3;
  int iVar4;
  u32 uVar5;
  ulonglong uVar2;
  bool bVar6;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fVar7;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar8;
  
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
  iVar4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
  if (((iVar3 == 0) || (iVar4 == 0)) && ((iVar3 != 0 || (iVar4 != 0)))) {
    uVar2 = check_if_item_held_like_pistol(iVar3);
    fVar7 = extraout_f12_00;
    fVar8 = extraout_f14_00;
    if ((uVar2 == 0) &&
       (uVar2 = check_if_item_held_like_pistol(iVar4), fVar7 = extraout_f12_01,
       fVar8 = extraout_f14_01, uVar2 == 0)) {
      bVar1 = true;
      bVar6 = iVar3 != 0;
      fVar7 = extraout_f12_01;
      fVar8 = extraout_f14_01;
    }
    else {
      bVar1 = false;
      bVar6 = iVar3 != 0;
    }
  }
  else {
    uVar5 = get_random_value();
    bVar1 = false;
    bVar6 = (bool)((byte)uVar5 & 1);
    fVar7 = extraout_f12;
    fVar8 = extraout_f14;
  }
  if (bVar1) {
    proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4018,bVar6,fVar7,0,fVar8);
  }
  else {
    proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x8204,bVar6,fVar7,0,fVar8);
  }
  return;
}



void proc_7F0290F8(int param_1,int **param_2)

{
  int *piVar1;
  int iVar2;
  u32 uVar4;
  longlong lVar3;
  float *pfVar5;
  int iVar6;
  int iVar7;
  float fVar8;
  float fVar9;
  
  piVar1 = *param_2;
  iVar2 = *(int *)(param_1 + 0x18);
  iVar6 = 0;
  iVar7 = -1;
  if (-1 < *piVar1) {
    iVar7 = 0;
    while( true ) {
      pfVar5 = (float *)(ptr_0xxxpresets +
                        *(int *)(ptr_setup_path_tbl + *(int *)((int)piVar1 + iVar7) * 0x10) * 0x2c);
      if ((((pfVar5[10] != 0.00000000) && (*(float *)(iVar2 + 0x14) == pfVar5[10])) &&
          (fVar8 = *pfVar5 - *(float *)(iVar2 + 8), fVar9 = pfVar5[2] - *(float *)(iVar2 + 0x10),
          iVar7 = iVar6, fVar8 * fVar8 + fVar9 * fVar9 < flt_80051DF8)) ||
         (iVar6 += 1, iVar7 = -1, piVar1[iVar6] < 0)) break;
      iVar7 = iVar6 * 4;
    }
  }
  if (iVar7 < 0) {
    iVar7 = 0;
  }
  proc_7F02D184(param_1);
  *(undefined *)(param_1 + 7) = 0xe;
  *(undefined4 *)(param_1 + 0x34) = 1;
  *(int *)(param_1 + 0x30) = iVar7;
  *(int ***)(param_1 + 0x2c) = param_2;
  uVar4 = get_random_value();
  *(uint *)(param_1 + 0x60) = uVar4 % 100;
  *(undefined *)(param_1 + 0x3b) = 0;
  *(undefined4 *)(param_1 + 0x78) = 0xffffffff;
  *(undefined4 *)(param_1 + 0x7c) = 0;
  proc_7F028494(param_1);
  *(undefined *)(param_1 + 8) = 0;
  proc_7F028FAC(param_1);
  pfVar5 = (float *)proc_7F028474(param_1);
  lVar3 = (longlong)(int)pfVar5;
  if (((*(byte *)(*(int *)(param_1 + 0x18) + 1) & 2) == 0) &&
     (proc_7F027E70(param_1,pfVar5), lVar3 != 0)) {
    proc_7F027E90(param_1,(undefined *)(param_1 + 0x38),pfVar5);
  }
  return;
}



void proc_7F029298(int param_1)

{
  *(undefined4 *)(param_1 + 0xe8) = global_timer;
  return;
}



undefined4 proc_7F0292A8(short *param_1,undefined4 *param_2,int param_3)

{
  int iVar2;
  longlong lVar1;
  int iStack16;
  int iStack12;
  uint uStack8;
  undefined4 uStack4;
  
  uStack4 = 0;
  uStack8 = 1;
  if (*(char *)((int)param_1 + 7) == '\b') {
    uStack8 = *(uint *)(param_1 + 0x26);
  }
  if ((uStack8 & 2) == 0) {
    iStack12 = param_3;
    proc_7F032C78(param_1,(longlong)(int)uStack8,(longlong)*(int *)(param_1 + 0x28),&iStack16);
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    if ((uStack8 & 1) == 0) {
      if ((uStack8 & 4) == 0) {
        if ((((uStack8 & 8) != 0) && (lVar1 = proc_7F0B0E24(), lVar1 != 0)) &&
           (iStack12 == iStack16)) {
          uStack4 = 1;
        }
      }
      else {
        lVar1 = proc_7F0B0E24();
        if ((lVar1 != 0) && (iStack12 == iStack16)) {
          uStack4 = 1;
        }
      }
    }
    else {
      proc_7F08A03C(ptr_BONDdata->position_data_pointer,0);
      iVar2 = get_invisible_to_guards_flag();
      if (((iVar2 != 0) && (lVar1 = proc_7F0B0E24(), lVar1 != 0)) && (iStack12 == iStack16)) {
        proc_7F029298((int)param_1);
        uStack4 = 1;
      }
      proc_7F08A03C(ptr_BONDdata->position_data_pointer,1);
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  }
  else {
    uStack4 = 1;
  }
  return uStack4;
}



undefined4 proc_7F0294BC(int param_1)

{
  int iVar2;
  int iVar3;
  longlong lVar1;
  undefined4 uStack4;
  
  uStack4 = 0;
  iVar2 = get_invisible_to_guards_flag();
  if (iVar2 != 0) {
    iVar2 = *(int *)(param_1 + 0x18);
    iVar3 = get_curplayer_positiondata();
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    proc_7F08A03C(ptr_BONDdata->position_data_pointer,0);
    iVar2 = *(int *)(iVar2 + 0x14);
    lVar1 = proc_7F0B0E24();
    if ((lVar1 != 0) && (iVar2 == *(int *)(iVar3 + 0x14))) {
      proc_7F029298(param_1);
      uStack4 = 1;
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
    proc_7F08A03C(ptr_BONDdata->position_data_pointer,1);
  }
  return uStack4;
}



undefined4 proc_7F0295D0(int param_1,undefined4 *param_2,int param_3)

{
  int iVar1;
  longlong lVar2;
  undefined4 uStack16;
  
  iVar1 = *(int *)(param_1 + 0x18);
  uStack16 = 0;
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
  iVar1 = *(int *)(iVar1 + 0x14);
  lVar2 = proc_7F0B0E24();
  if ((lVar2 != 0) && (iVar1 == param_3)) {
    uStack16 = 1;
  }
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  return uStack16;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F02969C(void)

{
  undefined4 uVar1;
  int in_a0_lo;
  float *in_a1_lo;
  int in_a2_lo;
  undefined4 in_a3_lo;
  float in_f0;
  float fVar2;
  float fVar3;
  
  getsubroty(*(int *)(in_a0_lo + 0x1c),(uint)in_a1_lo,in_a2_lo,in_a3_lo);
  fVar2 = convert_angle_using_inverse
                    ((f32)(*in_a1_lo - *(float *)(*(int *)(in_a0_lo + 0x18) + 8)),
                     (f32)(in_a1_lo[2] - *(float *)(*(int *)(in_a0_lo + 0x18) + 0x10)));
  fVar3 = fVar2 - in_f0;
  if (fVar2 < in_f0) {
    fVar3 = fVar3 + flt_80051DFC;
  }
  if ((fVar3 < flt_80051E00) || (uVar1 = 0, flt_80051E04 < fVar3)) {
    uVar1 = proc_7F0295D0(in_a0_lo,in_a1_lo,in_a2_lo);
  }
  return uVar1;
}



undefined4 proc_7F029760(int param_1)

{
  int iVar1;
  int iVar3;
  longlong lVar2;
  undefined4 uStack16;
  
  iVar1 = *(int *)(param_1 + 0x18);
  iVar3 = get_curplayer_positiondata();
  uStack16 = 0;
  proc_7F08A03C(ptr_BONDdata->position_data_pointer,0);
  iVar3 = *(int *)(iVar3 + 0x14);
  lVar2 = proc_7F0B0E24();
  if ((lVar2 != 0) && (iVar3 == *(int *)(iVar1 + 0x14))) {
    uStack16 = 1;
  }
  proc_7F08A03C(ptr_BONDdata->position_data_pointer,1);
  return uStack16;
}



undefined4 proc_7F02982C(int param_1,float *param_2,float *param_3)

{
  longlong lVar1;
  float fVar2;
  float fVar3;
  undefined4 uStack48;
  undefined4 uStack44;
  float fStack40;
  undefined4 uStack36;
  undefined4 uStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  GUARDdata *pGStack4;
  
  pGStack4 = *(GUARDdata **)(param_1 + 4);
  uStack36 = 0;
  fVar2 = *param_3 * (float)pGStack4->collision_radius * flt_80051E08;
  fVar3 = param_3[2] * (float)pGStack4->collision_radius * flt_80051E08;
  proc_7F023160(param_1,&uStack48,&fStack40,&uStack44);
  set_or_unset_GUARDdata_flag(pGStack4,0);
  fStack8 = *(float *)(param_1 + 8) + fVar3;
  fStack12 = *(float *)(param_1 + 0x10) - fVar2;
  fStack16 = *param_2 + fVar3 + fVar2;
  fStack20 = (param_2[2] - fVar2) + fVar3;
  uStack24 = *(undefined4 *)(param_1 + 0x14);
  lVar1 = proc_7F0B0E24();
  if (lVar1 != 0) {
    lVar1 = proc_7F0B0E24();
    if (lVar1 != 0) {
      fStack8 = *(float *)(param_1 + 8) - fVar3;
      fStack16 = (*param_2 - fVar3) + fVar2;
      fStack12 = *(float *)(param_1 + 0x10) + fVar2;
      fStack20 = param_2[2] + fVar2 + fVar3;
      uStack24 = *(undefined4 *)(param_1 + 0x14);
      lVar1 = proc_7F0B0E24();
      if (lVar1 != 0) {
        lVar1 = proc_7F0B0E24();
        if (lVar1 != 0) {
          uStack36 = 1;
        }
      }
    }
  }
  set_or_unset_GUARDdata_flag(pGStack4,1);
  return uStack36;
}



undefined4 proc_7F029A94(int param_1,float *param_2,float param_3)

{
  undefined4 uVar1;
  float in_a2_lo;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  fStack12 = *param_2 * in_a2_lo + *(float *)(param_1 + 8);
  uStack8 = *(undefined4 *)(param_1 + 0xc);
  fStack4 = param_2[2] * in_a2_lo + *(float *)(param_1 + 0x10);
  uVar1 = proc_7F02982C(param_1,&fStack12,param_2);
  return uVar1;
}



undefined4 proc_7F029AF0(int param_1,float *param_2)

{
  undefined4 uVar1;
  float fVar2;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  fStack12 = *param_2 - *(float *)(param_1 + 8);
  uStack8 = 0;
  fStack4 = param_2[2] - *(float *)(param_1 + 0x10);
  if ((fStack12 == 0.00000000) && (fStack4 == 0.00000000)) {
    uVar1 = 1;
  }
  else {
    fVar2 = sqrtf(fStack4 * fStack4 + fStack12 * fStack12);
    fStack12 = fStack12 * (1.00000000 / fVar2);
    fStack4 = fStack4 * (1.00000000 / fVar2);
    uVar1 = proc_7F02982C(param_1,param_2,&fStack12);
  }
  return uVar1;
}



void proc_7F029BB0(int param_1)

{
  int iVar1;
  
  iVar1 = get_curplayer_positiondata();
  *(undefined4 *)(param_1 + 0xd4) = global_timer;
  *(undefined4 *)(param_1 + 0xd8) = *(undefined4 *)(iVar1 + 8);
  *(undefined4 *)(param_1 + 0xdc) = *(undefined4 *)(iVar1 + 0xc);
  *(undefined4 *)(param_1 + 0xe0) = *(undefined4 *)(iVar1 + 0x10);
  *(undefined4 *)(param_1 + 0xe4) = *(undefined4 *)(iVar1 + 0x14);
  return;
}



void proc_7F029C00(int param_1)

{
  int iVar1;
  
  iVar1 = get_curplayer_positiondata();
  *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 2;
  *(undefined4 *)(param_1 + 0xf0) = global_timer;
  *(undefined4 *)(param_1 + 0xd8) = *(undefined4 *)(iVar1 + 8);
  *(undefined4 *)(param_1 + 0xdc) = *(undefined4 *)(iVar1 + 0xc);
  *(undefined4 *)(param_1 + 0xe0) = *(undefined4 *)(iVar1 + 0x10);
  *(undefined4 *)(param_1 + 0xe4) = *(undefined4 *)(iVar1 + 0x14);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F029C5C(void)

{
  char cVar1;
  bool bVar2;
  int in_a0_lo;
  float in_f0;
  float fVar3;
  
  cVar1 = *(char *)(in_a0_lo + 7);
  if (((cVar1 == '\x01') && (*(int *)(in_a0_lo + 0x2c) == 0)) && (*(int *)(in_a0_lo + 0x38) == 0)) {
    return 1;
  }
  if (cVar1 != '\x03') {
    if (cVar1 == '\x0e') {
      return 1;
    }
    return 0;
  }
  if (*(int *)(in_a0_lo + 0x34) == 0) {
    proc_7F06F610(*(int *)(in_a0_lo + 0x1c));
    if (0.00000000 <= in_f0) {
      proc_7F06F5BC(*(int *)(in_a0_lo + 0x1c));
      fVar3 = proc_7F06F5C4(*(int *)(in_a0_lo + 0x1c));
      bVar2 = fVar3 <= in_f0;
      in_f0 = fVar3;
      if (bVar2) {
        return 1;
      }
    }
    proc_7F06F610(*(int *)(in_a0_lo + 0x1c));
    if (0.00000000 <= in_f0) {
      return 0;
    }
    proc_7F06F5BC(*(int *)(in_a0_lo + 0x1c));
    if (0.00000000 < in_f0) {
      return 0;
    }
  }
  return 1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ulonglong proc_7F029D70(void)

{
  int iVar2;
  longlong lVar1;
  u32 uVar3;
  int iVar4;
  ulonglong uVar5;
  int in_a0_lo;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float in_f0;
  float __x;
  float fVar6;
  float vector1;
  float fVar7;
  float vector2;
  
  iVar4 = *(int *)(in_a0_lo + 0x18);
  iVar2 = get_curplayer_positiondata();
  getsubroty(*(int *)(in_a0_lo + 0x1c),extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  vector1 = *(float *)(iVar2 + 8) - *(float *)(iVar4 + 8);
  fVar6 = *(float *)(iVar2 + 0xc) - *(float *)(iVar4 + 0xc);
  vector2 = *(float *)(iVar2 + 0x10) - *(float *)(iVar4 + 0x10);
  __x = convert_angle_using_inverse((f32)vector1,(f32)vector2);
  fVar7 = __x - in_f0;
  if (__x < in_f0) {
    fVar7 = fVar7 + flt_80051E0C;
  }
  lVar1 = proc_7F032B68(in_a0_lo);
  uVar5 = 0;
  if (lVar1 == 0) {
    __x = vector1 * vector1 + fVar6 * fVar6 + vector2 * vector2;
    if (((__x < *(float *)(in_a0_lo + 0xd0) * *(float *)(in_a0_lo + 0xd0) * 100.00000000 *
                100.00000000) && ((fVar7 < flt_80051E10 || (flt_80051E14 < fVar7)))) ||
       ((__x < flt_80051E18 && ((fVar7 < flt_80051E1C || (flt_80051E20 < fVar7)))))) {
      fVar7 = square_near_fog_value();
      uVar5 = 0;
      if (__x < fVar7) {
        sqrtf(__x);
        iVar4 = proc_7F023BC0();
        uVar3 = get_random_value();
        uVar5 = (ulonglong)(uVar3 % (iVar4 + 1U) == 0);
        if (iVar4 + 1U == 0) {
          trap(0x1c00);
        }
      }
    }
  }
  else {
    uVar5 = 1;
  }
  if (uVar5 != 0) {
    iVar4 = proc_7F0294BC(in_a0_lo);
    uVar5 = SEXT48(iVar4);
  }
  if (uVar5 != 0) {
    proc_7F029BB0(in_a0_lo);
    uVar5 = SEXT48((int)uVar5);
  }
  return uVar5;
}



void proc_7F02A044(int param_1,int param_2,float *param_3)

{
  int iVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  iVar1 = *(int *)(param_1 + 0x18);
  iVar2 = get_curplayer_positiondata();
  fVar4 = *(float *)(iVar2 + 8) - *(float *)(iVar1 + 8);
  fVar5 = *(float *)(iVar2 + 0x10) - *(float *)(iVar1 + 0x10);
  fVar3 = sqrtf(fVar4 * fVar4 + fVar5 * fVar5);
  if (param_2 == 0) {
    param_3[2] = fVar4 / fVar3;
    *param_3 = -(fVar5 / fVar3);
    param_3[1] = 0.00000000;
  }
  else {
    *param_3 = fVar5 / fVar3;
    param_3[2] = -(fVar4 / fVar3);
    param_3[1] = 0.00000000;
  }
  return;
}



undefined4 proc_7F02A0EC(int param_1,int param_2,float param_3)

{
  undefined4 uVar1;
  float in_a2_lo;
  float fStack28;
  undefined4 uStack24;
  float fStack20;
  float afStack16 [2];
  float fStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x18);
  proc_7F02A044(param_1,param_2,afStack16);
  fStack28 = afStack16[0] * in_a2_lo + *(float *)(iStack4 + 8);
  uStack24 = *(undefined4 *)(iStack4 + 0xc);
  fStack20 = fStack8 * in_a2_lo + *(float *)(iStack4 + 0x10);
  uVar1 = proc_7F02982C(iStack4,&fStack28,afStack16);
  return uVar1;
}



void proc_7F02A15C(int param_1,uint param_2,float *param_3,undefined4 param_4)

{
  float __x;
  float fVar1;
  
  getsubroty(*(int *)(param_1 + 0x1c),param_2,param_3,param_4);
  if (param_2 == 0) {
    fVar1 = cosf(__x);
    *param_3 = -fVar1;
    param_3[1] = 0.00000000;
    fVar1 = sinf(__x);
    param_3[2] = fVar1;
  }
  else {
    fVar1 = cosf(__x);
    *param_3 = fVar1;
    param_3[1] = 0.00000000;
    fVar1 = sinf(__x);
    param_3[2] = -fVar1;
  }
  return;
}



undefined4 proc_7F02A1E8(int param_1,uint param_2,float param_3)

{
  undefined4 uVar1;
  float in_a2_lo;
  float fStack28;
  undefined4 uStack24;
  float fStack20;
  float afStack16 [2];
  float fStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x18);
  proc_7F02A15C(param_1,param_2,afStack16,iStack4);
  fStack28 = afStack16[0] * in_a2_lo + *(float *)(iStack4 + 8);
  uStack24 = *(undefined4 *)(iStack4 + 0xc);
  fStack20 = fStack8 * in_a2_lo + *(float *)(iStack4 + 0x10);
  uVar1 = proc_7F02982C(iStack4,&fStack28,afStack16);
  return uVar1;
}



undefined8 proc_7F02A258(int param_1)

{
  char cVar1;
  
  cVar1 = *(char *)(param_1 + 7);
  if ((((cVar1 != '\x04') && (cVar1 != '\x05')) && (cVar1 != '\a')) &&
     ((cVar1 != '\x06' || ((*(uint *)(param_1 + 0x14) & 0x200) != 0)))) {
    return 1;
  }
  return 0;
}



ulonglong proc_7F02A2A4(int param_1)

{
  return (ulonglong)(*(char *)(param_1 + 7) == '\x04' || *(char *)(param_1 + 7) == '\x05');
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F02A2C8(void)

{
  bool bVar1;
  longlong lVar2;
  int iVar4;
  u32 uVar5;
  int iVar6;
  undefined8 uVar3;
  int in_a0_lo;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float in_f0;
  float fVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f12_00;
  
  lVar2 = proc_7F02A258(in_a0_lo);
  if (lVar2 == 0) {
    return 0;
  }
  iVar6 = *(int *)(in_a0_lo + 0x18);
  iVar4 = get_curplayer_positiondata();
  getsubroty(*(int *)(in_a0_lo + 0x1c),extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  fVar7 = convert_angle_using_inverse
                    ((f32)(*(float *)(iVar4 + 8) - *(float *)(iVar6 + 8)),
                     (f32)(*(float *)(iVar4 + 0x10) - *(float *)(iVar6 + 0x10)));
  fVar8 = fVar7 - in_f0;
  if (fVar7 < in_f0) {
    fVar8 = fVar8 + flt_80051E38;
  }
  if ((flt_80051E3C <= fVar8) && (fVar8 <= flt_80051E40)) {
    if (fVar8 <= flt_80051E44) {
      return 0;
    }
    if (flt_80051E48 <= fVar8) {
      return 0;
    }
  }
  uVar5 = get_random_value();
  bVar1 = (uVar5 & 1) == 0;
  iVar6 = proc_7F02A1E8(in_a0_lo,(uint)bVar1,extraout_f12);
  if (iVar6 == 0) {
    iVar6 = proc_7F02A1E8(in_a0_lo,(uint)!bVar1,extraout_f12_00);
    if (iVar6 == 0) {
      uVar3 = 0;
    }
    else {
      proc_7F024800();
      uVar3 = 1;
    }
  }
  else {
    proc_7F024800();
    uVar3 = 1;
  }
  return uVar3;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F02A428(void)

{
  bool bVar1;
  longlong lVar2;
  int iVar4;
  u32 uVar5;
  int iVar6;
  undefined8 uVar3;
  int in_a0_lo;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float in_f0;
  float fVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f12_00;
  
  lVar2 = proc_7F02A258(in_a0_lo);
  if (lVar2 == 0) {
    return 0;
  }
  iVar6 = *(int *)(in_a0_lo + 0x18);
  iVar4 = get_curplayer_positiondata();
  getsubroty(*(int *)(in_a0_lo + 0x1c),extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  fVar7 = convert_angle_using_inverse
                    ((f32)(*(float *)(iVar4 + 8) - *(float *)(iVar6 + 8)),
                     (f32)(*(float *)(iVar4 + 0x10) - *(float *)(iVar6 + 0x10)));
  fVar8 = fVar7 - in_f0;
  if (fVar7 < in_f0) {
    fVar8 = fVar8 + flt_80051E4C;
  }
  if ((flt_80051E50 <= fVar8) && (fVar8 <= flt_80051E54)) {
    if (fVar8 <= flt_80051E58) {
      return 0;
    }
    if (flt_80051E5C <= fVar8) {
      return 0;
    }
  }
  uVar5 = get_random_value();
  bVar1 = (uVar5 & 1) == 0;
  iVar6 = proc_7F02A1E8(in_a0_lo,(uint)bVar1,extraout_f12);
  if (iVar6 == 0) {
    iVar6 = proc_7F02A1E8(in_a0_lo,(uint)!bVar1,extraout_f12_00);
    if (iVar6 == 0) {
      uVar3 = 0;
    }
    else {
      proc_7F024A84();
      uVar3 = 1;
    }
  }
  else {
    proc_7F024A84();
    uVar3 = 1;
  }
  return uVar3;
}



undefined8 proc_7F02A588(int param_1)

{
  longlong lVar1;
  u32 uVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  float fStack32;
  undefined4 uStack28;
  float fStack24;
  float afStack20 [2];
  float fStack12;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    if (global_timer - *(int *)(param_1 + 200) < 0xb5) {
      return 0;
    }
    iVar4 = *(int *)(param_1 + 0x18);
    uVar2 = get_random_value();
    fVar5 = (float)uVar2;
    if ((int)uVar2 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fVar5 = fVar5 * 0.00000000 * 200.00000000 + 200.00000000;
    uVar2 = get_random_value();
    proc_7F02A044(param_1,(uint)((uVar2 & 1) == 0),afStack20);
    fStack32 = afStack20[0] * fVar5 + *(float *)(iVar4 + 8);
    uStack28 = *(undefined4 *)(iVar4 + 0xc);
    fStack24 = fStack12 * fVar5 + *(float *)(iVar4 + 0x10);
    iVar3 = proc_7F02982C(iVar4,&fStack32,afStack20);
    if (iVar3 != 0) {
      proc_7F024CF8(param_1,&fStack32);
      return 1;
    }
    afStack20[0] = -afStack20[0];
    fStack12 = -fStack12;
    fStack32 = afStack20[0] * fVar5 + *(float *)(iVar4 + 8);
    uStack28 = *(undefined4 *)(iVar4 + 0xc);
    fStack24 = fStack12 * fVar5 + *(float *)(iVar4 + 0x10);
    iVar4 = proc_7F02982C(iVar4,&fStack32,afStack20);
    if (iVar4 != 0) {
      proc_7F024CF8(param_1,&fStack32);
      return 1;
    }
  }
  return 0;
}



undefined8 proc_7F02A704(int param_1)

{
  int iVar1;
  longlong lVar2;
  undefined8 uVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  lVar2 = proc_7F02A258(param_1);
  if (lVar2 == 0) {
    uVar3 = 0;
  }
  else {
    iVar1 = *(int *)(param_1 + 0x18);
    iVar4 = get_curplayer_positiondata();
    iVar5 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    if ((iVar5 == 0) && (iVar5 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1), iVar5 == 0)) {
      return 0;
    }
    if (global_timer - *(int *)(param_1 + 200) < 0xb5) {
      uVar3 = 0;
    }
    else {
      fVar6 = *(float *)(iVar4 + 8) - *(float *)(iVar1 + 8);
      fVar7 = *(float *)(iVar4 + 0xc) - *(float *)(iVar1 + 0xc);
      fVar8 = *(float *)(iVar4 + 0x10) - *(float *)(iVar1 + 0x10);
      if (flt_80051E60 <= fVar6 * fVar6 + fVar7 * fVar7 + fVar8 * fVar8) {
        proc_7F02587C(param_1,0);
        uVar3 = 1;
      }
      else {
        uVar3 = 0;
      }
    }
  }
  return uVar3;
}



undefined8 proc_7F02A7F8(int param_1)

{
  int iVar1;
  longlong lVar2;
  undefined8 uVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  lVar2 = proc_7F02A258(param_1);
  if (lVar2 == 0) {
    uVar3 = 0;
  }
  else {
    iVar1 = *(int *)(param_1 + 0x18);
    iVar4 = get_curplayer_positiondata();
    iVar5 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    if ((iVar5 == 0) && (iVar5 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1), iVar5 == 0)) {
      return 0;
    }
    if (global_timer - *(int *)(param_1 + 200) < 0xb5) {
      uVar3 = 0;
    }
    else {
      fVar6 = *(float *)(iVar4 + 8) - *(float *)(iVar1 + 8);
      fVar7 = *(float *)(iVar4 + 0xc) - *(float *)(iVar1 + 0xc);
      fVar8 = *(float *)(iVar4 + 0x10) - *(float *)(iVar1 + 0x10);
      if (flt_80051E64 <= fVar6 * fVar6 + fVar7 * fVar7 + fVar8 * fVar8) {
        proc_7F02587C(param_1,1);
        uVar3 = 1;
      }
      else {
        uVar3 = 0;
      }
    }
  }
  return uVar3;
}



ulonglong proc_7F02A8EC(int param_1)

{
  bool bVar1;
  longlong lVar2;
  int iVar3;
  int iVar4;
  u32 uVar5;
  int iVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float extraout_f12;
  float extraout_f12_00;
  
  lVar2 = proc_7F02A258(param_1);
  if (lVar2 == 0) {
    return 0;
  }
  iVar6 = *(int *)(param_1 + 0x18);
  iVar3 = get_curplayer_positiondata();
  iVar4 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
  if ((iVar4 != 0) || (iVar4 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1), iVar4 != 0)) {
    fVar7 = *(float *)(iVar3 + 8) - *(float *)(iVar6 + 8);
    fVar8 = *(float *)(iVar3 + 0xc) - *(float *)(iVar6 + 0xc);
    fVar9 = *(float *)(iVar3 + 0x10) - *(float *)(iVar6 + 0x10);
    if (fVar7 * fVar7 + fVar8 * fVar8 + fVar9 * fVar9 < flt_80051E68) {
      return 0;
    }
    uVar5 = get_random_value();
    bVar1 = (uVar5 & 1) == 0;
    iVar6 = proc_7F02A0EC(param_1,(uint)bVar1,extraout_f12);
    if (iVar6 != 0) {
      proc_7F025C40();
      return 1;
    }
    iVar6 = proc_7F02A0EC(param_1,(uint)!bVar1,extraout_f12_00);
    if (iVar6 != 0) {
      proc_7F025C40();
      return 1;
    }
  }
  return 0;
}



undefined8 proc_7F02AA1C(int param_1,uint param_2,undefined4 param_3)

{
  longlong lVar1;
  int iVar3;
  undefined8 uVar2;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    if ((iVar3 == 0) && (iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1), iVar3 == 0)) {
      uVar2 = 0;
    }
    else {
      proc_7F025560(param_1,param_2,param_3);
      uVar2 = 1;
    }
  }
  return uVar2;
}



undefined8 proc_7F02AA88(int param_1,uint param_2,undefined4 param_3)

{
  longlong lVar1;
  int iVar3;
  undefined8 uVar2;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,0);
    if ((iVar3 == 0) && (iVar3 = is_weapon_in_guarddata_hand((GUARDdata *)param_1,1), iVar3 == 0)) {
      uVar2 = 0;
    }
    else {
      proc_7F0256F0(param_1,param_2,param_3);
      uVar2 = 1;
    }
  }
  return uVar2;
}



undefined8 proc_7F02AAF4(int param_1,undefined4 param_2,undefined4 param_3)

{
  undefined8 uVar1;
  
  uVar1 = 0;
  if ((*(char *)(param_1 + 7) == '\b') && ((*(uint *)(param_1 + 0x4c) & 0x60) != 0)) {
    *(undefined4 *)(param_1 + 0x4c) = param_2;
    *(undefined4 *)(param_1 + 0x50) = param_3;
    proc_7F024F8C(param_1);
    uVar1 = 1;
  }
  return uVar1;
}



undefined8 proc_7F02AB44(int param_1,undefined4 param_2,undefined4 param_3)

{
  longlong lVar1;
  undefined8 uVar2;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    if (*(char *)(param_1 + 7) != '\x01') {
      proc_7F023CB8();
    }
    uVar2 = 1;
    *(undefined4 *)(param_1 + 0x30) = param_2;
    *(undefined4 *)(param_1 + 0x38) = 0;
    *(undefined4 *)(param_1 + 0x40) = 0;
    *(undefined4 *)(param_1 + 0x34) = param_3;
  }
  return uVar2;
}



undefined8 proc_7F02ABB4(int param_1,longlong param_2,char param_3)

{
  longlong lVar1;
  short sVar2;
  float *pfVar3;
  float extraout_f12;
  float extraout_f14;
  float fStack20;
  float fStack16;
  float fStack12;
  float afStack8 [2];
  
  if ((-1 < param_2) && (lVar1 = proc_7F02A258(param_1), lVar1 != 0)) {
    if (9 < (int)setting_007_5) {
      return 0;
    }
    sVar2 = proc_7F032F94(param_1,(short)param_2);
    lVar1 = (longlong)sVar2;
    if (lVar1 < 10000) {
      pfVar3 = (float *)(ptr_0xxxpresets + (int)sVar2 * 0x2c);
    }
    else {
      pfVar3 = (float *)(ptr_2xxxpresets + (int)sVar2 * 0x44 + -680000);
    }
    afStack8[0] = pfVar3[10];
    if (afStack8[0] != 0.00000000) {
      if (0.50000000 <= pfVar3[4]) {
        lVar1 = proc_7F028DDC(param_1,pfVar3,afStack8[0],param_3);
        if (lVar1 == 0) {
          return 0;
        }
        return 1;
      }
      fStack20 = pfVar3[3] * *(float *)(param_1 + 0x24) * flt_80051E6C + *pfVar3;
      fStack16 = pfVar3[4] * *(float *)(param_1 + 0x24) * flt_80051E6C + pfVar3[1];
      fStack12 = pfVar3[5] * *(float *)(param_1 + 0x24) * flt_80051E6C + pfVar3[2];
      proc_7F0B0BE4((int *)afStack8,extraout_f12,extraout_f14,*pfVar3,pfVar3[2]);
      if (lVar1 != 0) {
        lVar1 = proc_7F028DDC(param_1,&fStack20,afStack8[0],param_3);
        if (lVar1 == 0) {
          return 0;
        }
        return 1;
      }
    }
  }
  return 0;
}



undefined8 proc_7F02AD54(int param_1,longlong param_2)

{
  longlong lVar1;
  
  if (param_2 != 0) {
    lVar1 = proc_7F02A258(param_1);
    if (lVar1 != 0) {
      proc_7F0290F8(param_1,(int **)param_2);
      return 1;
    }
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f02afbc) overlaps instruction at (ram,0x7f02afb8)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02AD98(void)

{
  longlong lVar1;
  ulonglong uVar2;
  u32 uVar3;
  float *pfVar4;
  float *pfVar5;
  int iVar6;
  int *piVar7;
  GUARDdata *guard;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  int *piVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  float in_f0;
  float fVar13;
  float fVar14;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  int aiStack108 [4];
  int iStack92;
  int iStack88;
  int iStack84;
  int iStack80;
  float fStack68;
  float fStack64;
  float afStack60 [8];
  float afStack28 [2];
  int iStack20;
  int iStack16;
  
  if ('\0' < guard->set_0_when_fading) {
    return;
  }
  if (guard->bond_position != 0) {
    proc_7F06F5BC(guard->MODELdata_pointer);
    fVar13 = proc_7F06F5C4(guard->MODELdata_pointer);
    if (fVar13 <= in_f0) {
      proc_7F023948(guard,extraout_f12);
      guard->bond_position = 0;
    }
    guard->set_0_when_fading = '\0';
    return;
  }
  if (guard->field_30 < 1) {
    uVar3 = get_random_value();
    guard->set_0_when_fading = (char)(uVar3 % 5) + '\x0e';
    if (guard->field_40 == 0) {
      return;
    }
    if ((guard->guard_bitflags & 0x80U) != 0) {
      guard->field_40 = 0;
      return;
    }
    iVar10 = guard->field_44 - (int)guard->set_0_when_fading;
    guard->field_44 = iVar10;
    if (-1 < iVar10) {
      return;
    }
    getsubroty(guard->MODELdata_pointer,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    fVar13 = flt_80051E78;
    fVar14 = extraout_f14_01;
    pfVar4 = afStack60;
    fStack64 = in_f0;
    do {
      fStack68 = in_f0 + flt_80051E7C;
      if (fVar13 <= fStack68) {
        fStack68 = fStack68 - fVar13;
        iVar10 = guard->POSdata_pointer;
      }
      else {
        iVar10 = guard->POSdata_pointer;
      }
      fVar14 = proc_7F026364(iVar10,fVar13,fVar14,fStack68,0x447a0000,0);
      fVar13 = flt_80051E80;
      pfVar5 = pfVar4 + 1;
      *pfVar4 = fVar14;
      in_f0 = fStack68;
      fVar14 = extraout_f14_02;
      pfVar4 = pfVar5;
    } while (pfVar5 < afStack28);
    iVar10 = 0;
    piVar8 = aiStack108;
    do {
      *piVar8 = iVar10;
      iVar10 += 1;
      piVar8 = piVar8 + 1;
    } while (iVar10 < 8);
    piVar8 = aiStack108;
    iVar10 = 0;
    do {
      iVar9 = iVar10 + 1;
      if (iVar9 < 8) {
        uVar11 = 8U - iVar9 & 3;
        iVar6 = iVar9;
        if (uVar11 != 0) {
          piVar7 = aiStack108 + iVar9;
          iVar6 = iVar9;
          do {
            iVar12 = iVar6;
            if (afStack60[aiStack108[iVar10]] <= afStack60[*piVar7]) {
              iVar12 = iVar10;
            }
            iVar10 = iVar12;
            iVar6 += 1;
            piVar7 = piVar7 + 1;
          } while (uVar11 + iVar9 != iVar6);
          if (iVar6 == 8) goto LAB_7f02b2e8;
        }
        piVar7 = aiStack108 + iVar6;
        do {
          fVar14 = afStack60[aiStack108[iVar10]];
          if (afStack60[*piVar7] < fVar14) {
            fVar14 = afStack60[aiStack108[iVar6]];
            iVar12 = piVar7[1];
            iVar10 = iVar6;
          }
          else {
            iVar12 = piVar7[1];
          }
          if (afStack60[iVar12] < fVar14) {
            iVar10 = iVar6 + 1;
            fVar14 = afStack60[aiStack108[iVar10]];
            iVar12 = piVar7[2];
          }
          else {
            iVar12 = piVar7[2];
          }
          if (afStack60[iVar12] < fVar14) {
            iVar10 = iVar6 + 2;
            fVar14 = afStack60[aiStack108[iVar10]];
            iVar12 = piVar7[3];
          }
          else {
            iVar12 = piVar7[3];
          }
          if (afStack60[iVar12] < fVar14) {
            iVar10 = iVar6 + 3;
          }
          iVar6 += 4;
          piVar7 = piVar7 + 4;
        } while (iVar6 != 8);
      }
LAB_7f02b2e8:
      piVar7 = aiStack108 + iVar10;
      iVar10 = *piVar8;
      *piVar8 = *piVar7;
      piVar8 = piVar8 + 1;
      *piVar7 = iVar10;
      iVar10 = iVar9;
      if (6 < iVar9) {
        iVar10 = -1;
        if (afStack60[0] < 490.00000000) {
          if (afStack60[iStack92] < 200.00000000) {
            iVar10 = 7;
          }
          else {
            if (((aiStack108[0] == 0) || (aiStack108[1] == 0)) || (aiStack108[2] == 0)) {
              if (((aiStack108[3] == 4) || (iStack92 == 4)) &&
                 (uVar3 = get_random_value(), uVar3 % 3 == 0)) {
                if (aiStack108[3] == 4) {
                  iVar10 = 3;
                  fVar13 = flt_80051E84;
                }
                else {
                  iVar10 = 4;
                  fVar13 = flt_80051E84;
                }
              }
              else {
                uVar3 = get_random_value();
                iVar10 = uVar3 % 3 + 5;
                fVar13 = flt_80051E88;
              }
            }
            else {
              if (((aiStack108[0] == 1) || (aiStack108[0] == 7)) &&
                 ((iStack88 != 0 && ((iStack84 != 0 && (iStack80 != 0)))))) {
                uVar3 = get_random_value();
                iVar10 = uVar3 % 3 + 5;
                fVar13 = flt_80051E8C;
              }
            }
          }
        }
        if (iVar10 < 0) {
          guard->field_40 = 0;
          return;
        }
        fStack64 = (float)aiStack108[iVar10] * fVar13 * 0.12500000 + fStack64;
        if (fVar13 <= fStack64) {
          fStack64 = fStack64 - fVar13;
        }
        proc_7F02AB44((int)guard,0x10,(int)((fStack64 * 65536.00000000) / fVar13));
        return;
      }
    } while( true );
  }
  if (*(int *)&guard->field_38 == 0) {
    fVar13 = (float)proc_7F0250BC();
    if (flt_80051E70 < fVar13) {
      if (fVar13 < flt_80051E74) {
        iStack16 = something_with_weaponpos_of_guarddata_hand(guard,1);
        iStack20 = something_with_weaponpos_of_guarddata_hand(guard,0);
        *(undefined4 *)&guard->field_38 = 1;
        guard->path_target_position = 1;
        if (((iStack16 == 0) || (iStack20 == 0)) &&
           (((iStack16 != 0 || (iStack20 != 0)) &&
            ((uVar2 = check_if_item_held_like_pistol(iStack16), uVar2 == 0 &&
             (uVar2 = check_if_item_held_like_pistol(iStack20), uVar2 == 0)))))) {
          if ((iStack20 != 0) || (iStack16 != 0)) {
            proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x4018,iStack16 != 0,
                          extraout_f12_01,0,extraout_f14);
            proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_04);
          }
        }
        else {
          uVar3 = get_random_value();
          proc_7F06FCA8(guard->MODELdata_pointer,ptr_animation_table + 0x8204,(byte)uVar3 & 1,
                        extraout_f12_02,0,extraout_f14_00);
          proc_7F06FDE8(guard->MODELdata_pointer,extraout_f12_03);
        }
        goto LAB_7f02b054;
      }
      uVar11 = guard->field_30;
    }
    else {
      uVar11 = guard->field_30;
    }
    if ((uVar11 & 0x10) != 0) {
      guard->field_30 = 0;
    }
  }
  else {
    proc_7F06F5AC(guard->MODELdata_pointer);
    lVar1 = proc_7F02C2B0();
    guard->path_target_position = (int)lVar1;
    if (lVar1 != 1) {
      proc_7F023948(guard,extraout_f12_00);
      *(undefined4 *)&guard->field_38 = 0;
      if ((guard->field_30 & 0x10U) != 0) {
        guard->field_30 = 0;
      }
    }
  }
LAB_7f02b054:
  guard->set_0_when_fading = '\0';
  return;
}



void proc_7F02B4E0(int param_1)

{
  *(undefined *)(param_1 + 8) = 0;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02B4E8(void)

{
  int iVar1;
  int **ppiVar2;
  u32 uVar3;
  int in_a0_lo;
  uint uVar4;
  char cVar5;
  float in_f0;
  float fVar6;
  
  fVar6 = in_f0;
  if (*(int *)(in_a0_lo + 0x30) == 0) {
    proc_7F06F5BC(*(int *)(in_a0_lo + 0x1c));
    fVar6 = proc_7F06F5C4(*(int *)(in_a0_lo + 0x1c));
    if (fVar6 <= in_f0) {
      fVar6 = (float)proc_7F023CB8();
    }
  }
  iVar1 = proc_7F06F5AC(*(int *)(in_a0_lo + 0x1c));
  if (iVar1 == ptr_animation_table + 0xb9a8) {
    proc_7F06F5BC(*(int *)(in_a0_lo + 0x1c));
    if (42.00000000 <= fVar6) {
      if (*(int *)(in_a0_lo + 0x14) << 6 < 0) {
        cVar5 = *(char *)(in_a0_lo + 8);
      }
      else {
        if ((dword_80048380 & 1) == 0) {
          proc_7F032DE4(in_a0_lo);
          if (fVar6 < 800.00000000) {
            ppiVar2 = play_sfx_a1(ptr_sfx_buf,0x101,NULL);
            proc_7F053A10((int)ppiVar2,(float *)(*(int *)(in_a0_lo + 0x18) + 8));
            uVar4 = *(uint *)(in_a0_lo + 0x14);
          }
          else {
            uVar4 = *(uint *)(in_a0_lo + 0x14);
          }
        }
        else {
          uVar4 = *(uint *)(in_a0_lo + 0x14);
        }
        *(uint *)(in_a0_lo + 0x14) = uVar4 | 0x2000000;
        cVar5 = *(char *)(in_a0_lo + 8);
      }
    }
    else {
      cVar5 = *(char *)(in_a0_lo + 8);
    }
  }
  else {
    cVar5 = *(char *)(in_a0_lo + 8);
  }
  if ((cVar5 < '\x01') && (*(int *)(in_a0_lo + 0x38) != 0)) {
    uVar3 = get_random_value();
    *(char *)(in_a0_lo + 8) = (char)(uVar3 % 5) + '\x0e';
  }
  return;
}



void proc_7F02B638(int param_1)

{
  int iVar1;
  u32 uVar2;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float __x;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  int iStack4;
  
  if (*(char *)(param_1 + 8) < '\x01') {
    iStack4 = *(int *)(param_1 + 0x1c);
    *(undefined *)(param_1 + 8) = 0x10;
    iVar1 = proc_7F06F5AC(iStack4);
    if ((iVar1 == ptr_animation_table + 0x4504) && (proc_7F06F5BC(iStack4), 80.00000000 <= __x)) {
      fStack16 = dword_80030A44;
      uStack12 = dword_80030A48;
      fStack8 = (float)dword_80030A4C;
      getsubroty(iStack4,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
      fStack16 = sinf(__x);
      fStack16 = -fStack16;
      fStack8 = cosf(__x);
      fStack8 = -fStack8;
      iVar1 = proc_7F029A94(*(int *)(param_1 + 0x18),&fStack16,extraout_f12);
      if (iVar1 == 0) {
        uVar2 = get_random_value();
        proc_7F06FCA8(*(int *)(param_1 + 0x1c),ptr_animation_table + 0x4384,(byte)uVar2 & 1,
                      extraout_f12_00,0x41f00000,extraout_f14);
        proc_7F06FDCC(*(int *)(param_1 + 0x1c),0x41f00000,0x41800000);
      }
    }
  }
  return;
}



void proc_7F02B774(int param_1)

{
  int iVar1;
  
  if (*(int *)(param_1 + 0x2c) < 0) {
    *(undefined4 *)(param_1 + 0x2c) = 0;
    return;
  }
  iVar1 = *(int *)(param_1 + 0x2c) + clock_timer;
  *(int *)(param_1 + 0x2c) = iVar1;
  if (0x59 < iVar1) {
    *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 0x20;
    return;
  }
  iVar1 = (0x5a - iVar1) * 0xff;
  *(undefined *)(param_1 + 0xc) = (char)(iVar1 / 0x5a);
  if (false) {
    trap(0x1c00);
  }
  if ((false) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  return;
}



void proc_7F02B800(undefined2 *param_1,longlong param_2)

{
  int iVar1;
  int iVar2;
  bool bVar3;
  float fVar4;
  int iVar6;
  longlong lVar5;
  char *pcVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  
  iVar10 = 0;
  iVar9 = 0;
  iVar6 = get_numguards();
  fVar4 = flt_80051E90;
  if (*(char *)((int)param_1 + 7) == '\x06') {
    iVar10 = *(int *)(param_1 + 0x16);
  }
  else {
    if (*(char *)((int)param_1 + 7) != '\x04') {
      bVar3 = 0 < iVar6;
      goto LAB_7f02b870;
    }
    iVar10 = *(int *)(param_1 + 0x16);
  }
  bVar3 = iVar10 < iVar6;
LAB_7f02b870:
  if (bVar3) {
    iVar8 = iVar10 * 0x1dc;
    do {
      pcVar7 = &ptr_guard_data->guardID_1 + iVar8;
      if (*(int *)(pcVar7 + 0x1c) != 0) {
        iVar1 = *(int *)(pcVar7 + 0x18);
        iVar2 = *(int *)(param_1 + 0xc);
        fVar11 = *(float *)(iVar1 + 8) - *(float *)(iVar2 + 8);
        fVar12 = *(float *)(iVar1 + 0xc) - *(float *)(iVar2 + 0xc);
        fVar13 = *(float *)(iVar1 + 0x10) - *(float *)(iVar2 + 0x10);
        if (fVar11 * fVar11 + fVar12 * fVar12 + fVar13 * fVar13 < fVar4) {
          iVar9 += 1;
          lVar5 = proc_7F02969C();
          if (lVar5 != 0) {
            if (param_2 == 0) {
              *(undefined2 *)(pcVar7 + 0x118) = *param_1;
            }
            else {
              *(undefined2 *)(pcVar7 + 0x11a) = *param_1;
            }
          }
        }
      }
      iVar10 += 1;
      iVar8 += 0x1dc;
    } while ((iVar10 < iVar6) && (iVar9 < 4));
  }
  if (*(char *)((int)param_1 + 7) == '\x06') {
    *(int *)(param_1 + 0x16) = iVar10;
  }
  else {
    if (*(char *)((int)param_1 + 7) == '\x04') {
      *(int *)(param_1 + 0x16) = iVar10;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02B9A4(void)

{
  int iVar1;
  int **ppiVar3;
  int iVar4;
  longlong lVar2;
  undefined2 *in_a0_lo;
  float in_f0;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float fVar5;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  s16 sStack12;
  
  iVar1 = *(int *)(in_a0_lo + 0xe);
  uStack32 = body_hit_SFX._0_4_;
  uStack24 = body_hit_SFX._8_4_;
  uStack28 = body_hit_SFX._4_4_;
  uStack16 = body_hit_SFX._16_4_;
  uStack20 = body_hit_SFX._12_4_;
  sStack12 = body_hit_SFX[10];
  if (0.00000000 <= *(float *)(in_a0_lo + 0x18)) {
    proc_7F06F5BC(iVar1);
    if (*(float *)(in_a0_lo + 0x18) <= in_f0) {
      ppiVar3 = play_sfx_a1(ptr_sfx_buf,*(short *)((int)&uStack32 + dword_80030A68 * 2),NULL);
      proc_7F053A10((int)ppiVar3,(float *)(*(int *)(in_a0_lo + 0xc) + 8));
      dword_80030A68 += 1;
      if (10 < dword_80030A68) {
        dword_80030A68 = 0;
      }
      *(undefined4 *)(in_a0_lo + 0x18) = 0xbf800000;
      fVar5 = *(float *)(in_a0_lo + 0x1a);
    }
    else {
      fVar5 = *(float *)(in_a0_lo + 0x1a);
    }
  }
  else {
    fVar5 = *(float *)(in_a0_lo + 0x1a);
  }
  if ((0.00000000 <= fVar5) && (proc_7F06F5BC(iVar1), *(float *)(in_a0_lo + 0x1a) <= in_f0)) {
    ppiVar3 = play_sfx_a1(ptr_sfx_buf,*(short *)((int)&uStack32 + dword_80030A68 * 2),NULL);
    proc_7F053A10((int)ppiVar3,(float *)(*(int *)(in_a0_lo + 0xc) + 8));
    dword_80030A68 += 1;
    if (10 < dword_80030A68) {
      dword_80030A68 = 0;
    }
    *(undefined4 *)(in_a0_lo + 0x1a) = 0xbf800000;
  }
  proc_7F06F5BC(iVar1);
  fVar5 = proc_7F06F5C4(iVar1);
  if (fVar5 <= in_f0) {
    iVar4 = proc_7F06F5AC(iVar1);
    if (iVar4 == ptr_animation_table + 0x540c) {
      lVar2 = proc_7F06F5B4(iVar1);
      proc_7F06FCA8(iVar1,ptr_animation_table + 0x5684,lVar2 == 0,extraout_f12,0x42480000,
                    extraout_f14);
      proc_7F06FE4C(iVar1,0x3f000000,extraout_f12_00);
      return;
    }
    proc_7F0247B8((int)in_a0_lo);
  }
  proc_7F02B800(in_a0_lo,1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BC80(void)

{
  int iVar1;
  undefined2 *in_a0_lo;
  float in_f0;
  float fVar2;
  float extraout_f12;
  
  iVar1 = *(int *)(in_a0_lo + 0xe);
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F029BB0((int)in_a0_lo);
    iVar1 = proc_7F06F5AC(iVar1);
    if (iVar1 == ptr_animation_table + 0x540c) {
      proc_7F023E14((int)in_a0_lo,extraout_f12);
    }
    else {
      proc_7F023E48((int)in_a0_lo);
    }
  }
  proc_7F02B800(in_a0_lo,0);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BD20(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F026508();
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BDA4(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  float extraout_f12;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F029BB0(in_a0_lo);
    proc_7F023E14(in_a0_lo,extraout_f12);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BE00(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F029BB0(in_a0_lo);
    proc_7F023E48(in_a0_lo);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BE58(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F023CB8();
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BEA8(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  if (60.00000000 <= in_f0) {
    start_alarm();
  }
  proc_7F06F5BC(iVar1);
  fVar2 = proc_7F06F5C4(iVar1);
  if (fVar2 <= in_f0) {
    proc_7F023E48(in_a0_lo);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02BF24(void)

{
  int iVar1;
  int iVar2;
  int in_a0_lo;
  float in_f0;
  float fVar3;
  float extraout_f12;
  float extraout_f12_00;
  
  iVar2 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar2);
  fVar3 = proc_7F06F5C4(iVar2);
  if (fVar3 <= in_f0) {
    iVar1 = proc_7F06F5AC(iVar2);
    if (iVar1 == ptr_animation_table + 0x4384) {
      proc_7F023E14(in_a0_lo,extraout_f12);
    }
    else {
      iVar2 = proc_7F06F5AC(iVar2);
      if (iVar2 == ptr_animation_table + 0x5d10) {
        proc_7F023E14(in_a0_lo,extraout_f12_00);
      }
      else {
        proc_7F023E48(in_a0_lo);
      }
    }
  }
  return;
}



void proc_7F02BFE4(int param_1,int param_2,int param_3)

{
  bool bVar1;
  int iVar5;
  ulonglong uVar2;
  ulonglong uVar3;
  ulonglong uVar4;
  int iVar6;
  sfxdata *data;
  
  iVar5 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,param_2);
  iVar5 = *(int *)(iVar5 + 4);
  uVar2 = proc_7F05DFF0((int)*(char *)(iVar5 + 0x80));
  uVar3 = proc_7F05E014((int)*(char *)(iVar5 + 0x80));
  bVar1 = false;
  if (param_3 != 0) {
    if ((byte)uVar2 == 0) {
      bVar1 = true;
    }
    else {
      if (((*(ushort *)(param_1 + 0x12) & 0x80) == 0) &&
         (*(int *)(param_1 + param_2 * 4 + 0x178) < global_timer)) {
        bVar1 = true;
      }
    }
  }
  if (bVar1) {
    iVar5 = param_1 + param_2 * 8;
    if (*(int *)(iVar5 + 0x168) == 0) {
      iVar6 = *(int *)(iVar5 + 0x16c);
    }
    else {
      uVar4 = music_related_26(*(int *)(iVar5 + 0x168));
      if (uVar4 != 0) {
        music_related_28(*(int *)(iVar5 + 0x168));
      }
      iVar6 = *(int *)(iVar5 + 0x16c);
    }
    if ((iVar6 != 0) && (uVar4 = music_related_26(iVar6), uVar4 != 0)) {
      music_related_28(*(int *)(iVar5 + 0x16c));
    }
    if ((short)uVar3 != 0) {
      data = NULL;
      if (*(int *)(iVar5 + 0x168) == 0) {
        data = (sfxdata *)(iVar5 + 0x168);
      }
      else {
        if (*(int *)(iVar5 + 0x16c) == 0) {
          data = (sfxdata *)(iVar5 + 0x16c);
        }
      }
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,(short)uVar3,data);
        proc_7F053A10(data->target_volume,(float *)(*(int *)(param_1 + 0x18) + 8));
        *(int *)(param_1 + param_2 * 4 + 0x178) = global_timer + (uint)(byte)uVar2;
        *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 0x80;
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F02C190(void)

{
  bool bVar1;
  char cVar2;
  uint in_a0_lo;
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  float in_f0;
  float fVar3;
  
  getsubroty(*(int *)(in_a0_lo + 0x1c),in_a0_lo,in_a2_lo,in_a3_lo);
  in_f0 = in_f0 + *(float *)(in_a0_lo + 0x14c);
  fVar3 = 0.00000000;
  if (flt_80051E98 <= in_f0) {
    in_f0 = in_f0 - flt_80051E98;
LAB_7f02c1f8:
    cVar2 = *(char *)(in_a0_lo + 7);
  }
  else {
    if (in_f0 < 0.00000000) {
      in_f0 = in_f0 + flt_80051E98;
      goto LAB_7f02c1f8;
    }
    cVar2 = *(char *)(in_a0_lo + 7);
  }
  if ((cVar2 == '\b') || (cVar2 == '\n')) {
    fVar3 = *(float *)(*(int *)(in_a0_lo + 0x2c) + 0xc);
  }
  else {
    if (cVar2 != '\x19') {
      bVar1 = true;
      goto code_r0x7f02c240;
    }
    if (*(int *)(in_a0_lo + 0x2c) == 0) {
      bVar1 = true;
      goto code_r0x7f02c240;
    }
    fVar3 = *(float *)(*(int *)(in_a0_lo + 0x2c) + 0xc);
  }
  bVar1 = fVar3 == 0.00000000;
code_r0x7f02c240:
  if (!bVar1) {
    if (*(char *)(*(int *)(in_a0_lo + 0x1c) + 0x24) != '\0') {
      fVar3 = flt_80051E98 - fVar3;
    }
    in_f0 = in_f0 + fVar3;
    if (flt_80051E98 <= in_f0) {
      in_f0 = in_f0 - flt_80051E98;
    }
  }
  return in_f0;
}



float proc_7F02C27C(int param_1)

{
  float fVar1;
  
  fVar1 = *(float *)(param_1 + 0x144) + *(float *)(param_1 + 0x148);
  if (fVar1 < 0.00000000) {
    fVar1 = fVar1 + flt_80051E9C;
  }
  return fVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F02C2B0(void)

{
  int objinst;
  int in_a0_lo;
  longlong in_a1;
  uint extraout_a1_lo;
  float in_a2_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 uVar1;
  float in_a3_lo;
  undefined4 extraout_a3_lo;
  float in_f0;
  float fVar2;
  float fVar3;
  float fVar4;
  undefined4 uStackX4;
  float in_stack_00000010;
  
  uStackX4 = (undefined4)in_a1;
  if (in_a1 != 2) {
    objinst = *(int *)(in_a0_lo + 0x1c);
    proc_7F06F5BC(objinst);
    fVar3 = in_f0;
    getsubroty(objinst,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    fVar4 = flt_80051EA0 * in_a3_lo * global_timer_delta * *(float *)(objinst + 0xa4);
    if (*(char *)(in_a0_lo + 7) == '\b') {
      fVar2 = (float)proc_7F0250BC();
      uVar1 = extraout_a2_lo_00;
    }
    else {
      if (*(char *)(in_a0_lo + 7) == '\x01') {
        fVar2 = (float)proc_7F0250BC();
        uVar1 = extraout_a2_lo_01;
      }
      else {
        get_curplayer_positiondata();
        fVar2 = (float)proc_7F032BD8();
        uVar1 = extraout_a2_lo_02;
      }
    }
    fVar2 = fVar2 - in_stack_00000010;
    if (fVar2 < 0.00000000) {
      fVar2 = fVar2 + flt_80051EA4;
    }
    if ((fVar2 < fVar4) || (flt_80051EA8 - fVar4 < fVar2)) {
      fVar3 = fVar3 + fVar2;
      if (flt_80051EA8 <= fVar3) {
        fVar3 = fVar3 - flt_80051EA8;
      }
      setsubroty(objinst,fVar3,fVar3,uVar1);
      uStackX4 = 3;
    }
    else {
      if (flt_80051EAC <= fVar2) {
        fVar3 = fVar3 - fVar4;
        if (fVar3 < 0.00000000) {
          fVar3 = fVar3 + flt_80051EA8;
        }
        setsubroty(objinst,fVar3,fVar3,uVar1);
      }
      else {
        fVar3 = fVar3 + fVar4;
        if (flt_80051EA8 <= fVar3) {
          fVar3 = fVar3 - flt_80051EA8;
        }
        setsubroty(objinst,fVar3,fVar3,uVar1);
      }
    }
    if (in_a2_lo <= in_f0) {
      uStackX4 = 2;
    }
  }
  return uStackX4;
}



undefined4 proc_7F02C4C0(short *param_1,int param_2,int param_3,int param_4,float param_5)

{
  ushort **ppuVar1;
  ushort *puVar2;
  bool bVar3;
  int iVar4;
  u32 uVar5;
  uint *puVar6;
  float *pfVar7;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 uVar8;
  uint uVar9;
  uint uVar10;
  float fVar11;
  float vector2;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float in_stack_00000010;
  float fStack292;
  undefined4 uStack288;
  float fStack284;
  float fStack280;
  undefined4 uStack276;
  float fStack272;
  float afStack268 [2];
  float fStack260;
  float afStack256 [12];
  float fStack208;
  float fStack204;
  float fStack200;
  float fStack188;
  float fStack184;
  float fStack180;
  float *pfStack176;
  float afStack172 [18];
  float fStack100;
  float fStack96;
  float fStack92;
  int iStack88;
  float fStack80;
  float fStack72;
  float fStack68;
  float fStack64;
  undefined4 uStack60;
  float fStack56;
  float *pfStack52;
  int iStack48;
  int iStack44;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  undefined4 uStack20;
  int iStack16;
  uint uStack12;
  float fStack8;
  float fStack4;
  
  uStack20 = 1;
  fStack4 = 0.00000000;
  uVar9 = 1;
  iVar4 = 0;
  if (*(char *)((int)param_1 + 7) == '\b') {
    uVar9 = *(uint *)(param_1 + 0x26);
    iVar4 = *(int *)(param_1 + 0x28);
  }
  else {
    if (*(char *)((int)param_1 + 7) != '\x01') {
      uVar10 = 0;
      goto LAB_7f02c51c;
    }
    uVar9 = *(uint *)(param_1 + 0x18);
    iVar4 = *(int *)(param_1 + 0x1a);
  }
  uVar10 = uVar9 & 2;
LAB_7f02c51c:
  fStack8 = 0.00000000;
  if (uVar10 == 0) {
    fStack8 = 0.00000000;
    iStack16 = iVar4;
    uStack12 = uVar9;
    iVar4 = get_curplayer_positiondata();
    pfStack52 = (float *)(iVar4 + 8);
    iStack44 = *(int *)(param_1 + 0xc);
    uVar9 = uStack12 & 1;
    fStack24 = *(float *)(iVar4 + 8) - *(float *)(iStack44 + 8);
    fStack28 = *(float *)(iVar4 + 0xc) - *(float *)(iStack44 + 0xc);
    fStack32 = *(float *)(iVar4 + 0x10) - *(float *)(iStack44 + 0x10);
    vector2 = fStack24 * fStack24 + fStack28 * fStack28 + fStack32 * fStack32;
    if (uVar9 == 0) {
      iStack48 = 1;
      uVar8 = extraout_a3_lo;
      fStack36 = vector2;
    }
    else {
      if ((uStack12 & 0x40) == 0) {
        fStack36 = vector2;
        iStack48 = proc_7F0294BC((int)param_1);
        uVar8 = extraout_a3_lo_00;
      }
      else {
        iStack48 = 1;
        uVar8 = extraout_a3_lo;
        fStack36 = vector2;
      }
    }
    if (uVar9 == 0) {
      getsuboffset(*(int *)(param_1 + 0xe),&fStack72,param_1,uVar8);
      pfStack52 = (float *)proc_7F032C78(param_1,(longlong)(int)uStack12,(longlong)iStack16,
                                         &uStack60);
      fStack24 = *pfStack52 - fStack72;
      fStack28 = pfStack52[1] - fStack68;
      fStack32 = pfStack52[2] - fStack64;
      param_5 = extraout_f12_08;
    }
    else {
      fStack56 = proc_7F089780(ptr_BONDdata);
      if ((*(uint *)(param_1 + 10) & 0x20) == 0) {
        if (flt_80051ED0 < vector2) {
          uVar5 = get_random_value();
          if (uVar5 % 3 == 0) {
            uVar5 = get_random_value();
            vector2 = (float)uVar5;
            if ((int)uVar5 < 0) {
              vector2 = vector2 + 4294967296.00000000;
            }
            fStack28 = fStack28 +
                       fStack56 *
                       (flt_80051ED8 + flt_80051ED4 * vector2 * 0.00000000 * in_stack_00000010);
            param_5 = extraout_f12_03;
          }
          else {
            uVar5 = get_random_value();
            vector2 = (float)uVar5;
            if ((int)uVar5 < 0) {
              vector2 = vector2 + 4294967296.00000000;
            }
            fStack28 = fStack28 -
                       fStack56 *
                       (flt_80051EE0 + flt_80051EDC * vector2 * 0.00000000 * in_stack_00000010);
            param_5 = extraout_f12_04;
          }
        }
        else {
          if (*(float *)(iStack44 + 0xc) < pfStack52[1] - fStack56) {
            uVar5 = get_random_value();
            vector2 = (float)uVar5;
            if ((int)uVar5 < 0) {
              vector2 = vector2 + 4294967296.00000000;
            }
            fStack28 = fStack28 -
                       fStack56 *
                       (flt_80051EE8 + flt_80051EE4 * vector2 * 0.00000000 * in_stack_00000010);
            param_5 = extraout_f12_05;
          }
          else {
            if (pfStack52[1] - fStack56 * 0.50000000 < *(float *)(iStack44 + 0xc)) {
              uVar5 = get_random_value();
              vector2 = (float)uVar5;
              if ((int)uVar5 < 0) {
                vector2 = vector2 + 4294967296.00000000;
              }
              fStack28 = fStack28 -
                         fStack56 *
                         (flt_80051EF0 + flt_80051EEC * vector2 * 0.00000000 * in_stack_00000010);
              param_5 = extraout_f12_06;
            }
            else {
              uVar5 = get_random_value();
              vector2 = (float)uVar5;
              if ((int)uVar5 < 0) {
                vector2 = vector2 + 4294967296.00000000;
              }
              fStack28 = (vector2 * 0.00000000 * flt_80051EF4 * in_stack_00000010 - flt_80051EF8) *
                         fStack56;
              param_5 = extraout_f12_07;
            }
          }
        }
      }
      else {
        if (vector2 < flt_80051EB0) {
          if (*(float *)(iStack44 + 0xc) < pfStack52[1] - (fStack56 + fStack56)) {
            uVar5 = get_random_value();
            vector2 = (float)uVar5;
            if ((int)uVar5 < 0) {
              vector2 = vector2 + 4294967296.00000000;
            }
            fStack28 = fStack28 -
                       fStack56 *
                       (flt_80051EB8 + flt_80051EB4 * vector2 * 0.00000000 * in_stack_00000010);
            param_5 = extraout_f12;
          }
          else {
            if (pfStack52[1] - fStack56 * 0.50000000 < *(float *)(iStack44 + 0xc)) {
              uVar5 = get_random_value();
              vector2 = (float)uVar5;
              if ((int)uVar5 < 0) {
                vector2 = vector2 + 4294967296.00000000;
              }
              fStack28 = fStack28 -
                         fStack56 *
                         (flt_80051EC0 + flt_80051EBC * vector2 * 0.00000000 * in_stack_00000010);
              param_5 = extraout_f12_00;
            }
            else {
              uVar5 = get_random_value();
              vector2 = (float)uVar5;
              if ((int)uVar5 < 0) {
                vector2 = vector2 + 4294967296.00000000;
              }
              fStack28 = (vector2 * 0.00000000 * flt_80051EC4 * in_stack_00000010 + 1.00000000) *
                         40.00000000;
              param_5 = extraout_f12_01;
            }
          }
        }
        else {
          uVar5 = get_random_value();
          vector2 = (float)uVar5;
          if ((int)uVar5 < 0) {
            vector2 = vector2 + 4294967296.00000000;
          }
          fStack28 = fStack28 +
                     fStack56 *
                     (flt_80051ECC - flt_80051EC8 * vector2 * 0.00000000 * in_stack_00000010);
          param_5 = extraout_f12_02;
        }
      }
    }
    if ((uStack12 & 0x100) == 0) {
      vector2 = sqrtf(fStack24 * fStack24 + fStack32 * fStack32);
      fStack4 = convert_angle_using_inverse((f32)fStack28,(f32)vector2);
      param_5 = extraout_f12_09;
      if (flt_80051EFC <= fStack4) {
        fStack4 = fStack4 - flt_80051F00;
        param_5 = extraout_f12_09;
      }
    }
    if (iStack48 != 0) {
      fStack80 = (float)proc_7F02C190();
      if (param_4 == 0) {
        iVar4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,1);
      }
      else {
        iVar4 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,0);
      }
      if (((iVar4 != 0) && ((*(byte *)(iVar4 + 1) & 2) != 0)) && (fStack36 < flt_80051F04)) {
        bVar3 = false;
        iVar4 = *(int *)(*(int *)(iVar4 + 4) + 0x14);
        ppuVar1 = *(ushort ***)(*(int *)(iVar4 + 8) + 8);
        puVar2 = *ppuVar1;
        if (puVar2 == NULL) {
          puVar2 = ppuVar1[1];
          if (puVar2 != NULL) {
            puVar6 = (uint *)proc_7F06C660(iVar4,puVar2,0);
            proc_7F058E78(puVar6,(int)afStack256);
            pfVar7 = (float *)proc_7F078454();
            proc_7F058098(pfVar7,afStack256);
            bVar3 = true;
            fStack100 = fStack208;
            fStack96 = fStack204;
            fStack92 = fStack200;
          }
        }
        else {
          iStack88 = iVar4;
          puVar6 = (uint *)proc_7F06C660(iVar4,puVar2,0);
          pfStack176 = *(float **)(**(int **)(*(int *)(iStack88 + 8) + 8) + 4);
          proc_7F058E78(puVar6,(int)afStack172);
          pfVar7 = (float *)proc_7F078454();
          proc_7F058098(pfVar7,afStack172);
          fStack188 = *pfStack176;
          fStack184 = pfStack176[1];
          fStack180 = pfStack176[2];
          proc_7F058474(afStack172,&fStack188);
          bVar3 = true;
          fStack100 = fStack188;
          fStack96 = fStack184;
          fStack92 = fStack180;
        }
        if (bVar3) {
          fStack280 = sinf(fStack80);
          uStack276 = 0;
          fStack272 = cosf(fStack80);
          fStack292 = *(float *)(iStack44 + 8) - fStack32;
          uStack288 = *(undefined4 *)(iStack44 + 0xc);
          fStack284 = *(float *)(iStack44 + 0x10) + fStack24;
          proc_7F026130((float *)(iStack44 + 8),&fStack292,&fStack100,&fStack280,afStack268);
          fStack24 = *pfStack52 - afStack268[0];
          fStack32 = pfStack52[2] - fStack260;
        }
      }
      vector2 = convert_angle_using_inverse((f32)fStack24,(f32)fStack32);
      fStack8 = vector2 - fStack80;
      if (vector2 < fStack80) {
        fStack8 = fStack8 + flt_80051F08;
      }
      iVar4 = extract_id_from_object_structure_microcode
                        (*(int *)(param_1 + 0xe),**(ushort ***)(*(int *)(param_1 + 0xe) + 8));
      if (0.00000000 < *(float *)(iVar4 + 0x5c)) {
        fStack8 = fStack8 - *(float *)(iVar4 + 0x5c) * *(float *)(iVar4 + 0x58);
        if (fStack8 < 0.00000000) {
          fStack8 = fStack8 + flt_80051F0C;
        }
        if (flt_80051F10 <= fStack8) {
          fStack8 = fStack8 - flt_80051F10;
        }
      }
      param_5 = extraout_f12_10;
      if ((uVar9 != 0) && (param_5 = extraout_f12_10, (uStack12 & 0x60) == 0)) {
        fVar11 = sinf(((float)(((int)((float)global_timer *
                                     *(float *)(*(int *)(param_1 + 0xe) + 0xa4)) + (int)*param_1) %
                              0x3c) * flt_80051F14) / 60.00000000);
        vector2 = fVar11;
        proc_7F02D244(fStack36);
        fStack8 = fStack8 + vector2 * 0.50000000 * fVar11;
        if (fStack8 < 0.00000000) {
          fStack8 = fStack8 + flt_80051F18;
        }
        param_5 = extraout_f12_11;
        if (flt_80051F1C <= fStack8) {
          fStack8 = fStack8 - flt_80051F20;
          param_5 = extraout_f12_11;
        }
      }
      if (flt_80051F28 <= fStack8) {
        fStack8 = fStack8 - flt_80051F24;
        iVar4 = *(int *)(param_1 + 0xe);
      }
      else {
        iVar4 = *(int *)(param_1 + 0xe);
      }
      vector2 = fStack8 + *(float *)(param_1 + 0xa6);
      if (*(char *)(iVar4 + 0x24) == '\0') {
        if (*(float *)(param_2 + 0x38) < vector2) {
          uStack20 = 0;
          fStack8 = *(float *)(param_2 + 0x38);
        }
        else {
          fStack8 = vector2;
          if (vector2 < *(float *)(param_2 + 0x3c)) {
            uStack20 = 0;
            fStack8 = *(float *)(param_2 + 0x3c);
          }
        }
      }
      else {
        fStack8 = -*(float *)(param_2 + 0x38);
        if (vector2 < fStack8) {
          uStack20 = 0;
        }
        else {
          fStack8 = vector2;
          if (-*(float *)(param_2 + 0x3c) < vector2) {
            uStack20 = 0;
            fStack8 = -*(float *)(param_2 + 0x3c);
          }
        }
      }
    }
  }
  proc_7F02D048((int)param_1,param_2,(longlong)param_3,(longlong)param_4,param_5);
  *(undefined *)(param_1 + 7) = 10;
  *(float *)(param_1 + 0xae) = fStack8;
  return uStack20;
}



void proc_7F02D048(int param_1,int param_2,longlong param_3,longlong param_4,float param_5)

{
  float fVar1;
  float fVar2;
  float in_stack_00000010;
  
  fVar1 = 0.00000000;
  fVar2 = 0.00000000;
  if (param_2 != 0) {
    fVar1 = *(float *)(param_2 + 0x30);
    if ((fVar1 < in_stack_00000010) ||
       (fVar1 = *(float *)(param_2 + 0x34), in_stack_00000010 < fVar1)) {
      fVar2 = in_stack_00000010 - fVar1;
      in_stack_00000010 = fVar1;
    }
    if (0.00000000 < in_stack_00000010) {
      fVar1 = *(float *)(param_2 + 0x40) * in_stack_00000010;
    }
    else {
      fVar1 = *(float *)(param_2 + 0x44) * in_stack_00000010;
    }
  }
  if (param_4 == 0) {
    *(float *)(param_1 + 0x154) = fVar1;
    *(float *)(param_1 + 0x150) = in_stack_00000010;
  }
  else {
    *(float *)(param_1 + 0x154) = in_stack_00000010;
    if (param_3 == 0) {
      *(float *)(param_1 + 0x150) = fVar1;
    }
    else {
      *(float *)(param_1 + 0x150) = in_stack_00000010;
    }
  }
  *(float *)(param_1 + 0x158) = fVar2;
  return;
}



void proc_7F02D0F8(int param_1)

{
  *(undefined *)(param_1 + 0xe) = 10;
  *(undefined4 *)(param_1 + 0x154) = 0;
  *(undefined4 *)(param_1 + 0x150) = 0;
  *(undefined4 *)(param_1 + 0x158) = 0;
  *(undefined4 *)(param_1 + 0x15c) = 0;
  return;
}



void proc_7F02D118(int param_1,int param_2,undefined4 param_3)

{
  int iVar1;
  
  iVar1 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,param_2);
  if (iVar1 != 0) {
    proc_7F052574(iVar1,param_3);
  }
  return;
}



longlong proc_7F02D148(int param_1,int param_2)

{
  int iVar2;
  longlong lVar1;
  
  iVar2 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,param_2);
  if (iVar2 == 0) {
    lVar1 = 0;
  }
  else {
    lVar1 = proc_7F052604(iVar2);
  }
  return lVar1;
}



void proc_7F02D184(int param_1)

{
  proc_7F02D118(param_1,0,0);
  proc_7F02D118(param_1,1,0);
  proc_7F02D0F8(param_1);
  return;
}



void proc_7F02D1C4(int param_1,longlong param_2,longlong param_3)

{
  if (param_3 == 0) {
    if (param_2 == 1) {
      *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xfffb;
    }
    else {
      *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xfff7;
    }
  }
  else {
    if (param_2 == 1) {
      *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 4;
    }
    else {
      *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 8;
    }
  }
  if (param_3 == 0) {
    proc_7F02D118(param_1,(int)param_2,0);
  }
  return;
}



undefined4 proc_7F02D244(float param_1)

{
  undefined4 in_v0_lo;
  
  if (flt_80051F2C < param_1) {
    return in_v0_lo;
  }
  if (flt_80051F34 < param_1) {
    return in_v0_lo;
  }
  if (flt_80051F3C < param_1) {
    return in_v0_lo;
  }
  if (param_1 <= flt_80051F44) {
    return in_v0_lo;
  }
  return in_v0_lo;
}



// WARNING: Instruction at (ram,0x7f02d5e4) overlaps instruction at (ram,0x7f02d5e0)
// 

void proc_7F02D2E4(int param_1,uint *param_2,undefined4 *param_3,int param_4)

{
  char cVar1;
  int iVar2;
  int iVar5;
  ulonglong uVar3;
  longlong lVar4;
  uint uVar6;
  undefined4 extraout_a0_lo;
  undefined8 extraout_a1;
  float fVar7;
  f32 fVar8;
  float extraout_f0;
  float fVar9;
  float __x;
  float vector1;
  float vector2;
  undefined4 in_stack_ffffffb0;
  
  iVar5 = get_curplayer_positiondata();
  iVar2 = *(int *)(param_1 + 0x18);
  vector1 = *(float *)(iVar5 + 8) - *(float *)(iVar2 + 8);
  __x = *(float *)(iVar5 + 0xc) - *(float *)(iVar2 + 0xc);
  vector2 = *(float *)(iVar5 + 0x10) - *(float *)(iVar2 + 0x10);
  fVar7 = convert_angle_using_inverse((f32)vector1,(f32)vector2);
  fVar9 = (float)proc_7F02C190();
  fVar7 = fVar7 - fVar9;
  __x = vector1 * vector1 + __x * __x + vector2 * vector2;
  proc_7F02D244(__x);
  if (fVar7 < 0.00000000) {
    fVar7 = fVar7 + flt_80051F50;
  }
  uVar6 = (uint)(fVar7 < fVar9);
  if (fVar7 >= fVar9) {
    uVar6 = 0;
    if (fVar7 <= flt_80051F54 - fVar9) {
      *param_2 = 0;
      goto LAB_7f02d3ec;
    }
    uVar6 = 1;
  }
  *param_2 = uVar6;
LAB_7f02d3ec:
  *param_3 = 0;
  uVar3 = check_if_bond_is_invincible();
  if ((uVar3 == 0) && (uVar6 != 0)) {
    fVar7 = sqrtf(__x);
    fVar9 = flt_80051F58 * global_timer_delta;
    if (300.00000000 < fVar7) {
      fVar9 = fVar9 * (300.00000000 / fVar7);
      cVar1 = *(char *)(param_1 + 2);
    }
    else {
      cVar1 = *(char *)(param_1 + 2);
    }
    if (cVar1 < '\x01') {
      if (cVar1 < '\0') {
        if (cVar1 < -99) {
          fVar9 = 0.00000000;
        }
        else {
          fVar9 = fVar9 * ((float)((int)cVar1 + 100) / 100.00000000);
        }
      }
    }
    else {
      fVar9 = fVar9 * ((float)(int)cVar1 / 10.00000000 + 1.00000000);
    }
    fVar8 = get_007_accuracy_mod();
    if ((float)fVar8 <= 1.00000000) {
      fVar7 = (float)get_007_accuracy_mod();
    }
    else {
      fVar8 = get_007_accuracy_mod();
      fVar7 = 9.00000000 / (flt_80051F5C - (float)fVar8);
    }
    fVar7 = fVar9 * fVar7 * (float)ai_accuracy_modifier;
    lVar4 = proc_7F05DFCC(param_4);
    if (lVar4 < 1) {
      fVar7 = fVar7 + fVar7;
    }
    if ((param_4 == 0xf) || (param_4 == 0x10)) {
      fVar7 = fVar7 + fVar7;
      fVar9 = *(float *)(param_1 + 0x13c);
    }
    else {
      fVar9 = *(float *)(param_1 + 0x13c);
    }
    *(float *)(param_1 + 0x13c) = fVar9 + fVar7;
    if (1.00000000 <= *(float *)(param_1 + 0x13c)) {
      fVar7 = extraout_f0;
      proc_7F05DF84(param_4);
      fVar8 = get_007_damage_mod();
      fVar7 = (float)fVar8 * fVar7 * 0.12500000 * (float)ai_damage_modifier;
      if ((param_4 == 0xf) || (param_4 == 0x10)) {
        fVar7 = fVar7 * 3.00000000;
      }
      proc_7F089E4C(extraout_a0_lo,fVar7,extraout_a1,0xffffffffffffffff,1,in_stack_ffffffb0);
      *(undefined4 *)(param_1 + 0x13c) = 0;
      uVar3 = check_if_bond_is_invincible();
      if (uVar3 != 0) {
        *param_3 = 1;
      }
    }
  }
  return;
}



undefined8 proc_7F02D630(int param_1,int param_2,float *param_3)

{
  ushort **ppuVar1;
  ushort *puVar2;
  int iVar3;
  float *pfVar4;
  undefined8 uVar5;
  undefined auStack156 [48];
  float fStack108;
  float fStack104;
  float fStack100;
  float *pfStack92;
  float afStack84 [16];
  float *pfStack20;
  int iStack12;
  
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,param_2);
  uVar5 = 0;
  if ((iVar3 != 0) &&
     (iStack12 = *(int *)(*(int *)(iVar3 + 4) + 0x14), (*(byte *)(iVar3 + 1) & 2) != 0)) {
    ppuVar1 = *(ushort ***)(*(int *)(iStack12 + 8) + 8);
    puVar2 = *ppuVar1;
    if (puVar2 == NULL) {
      puVar2 = ppuVar1[1];
      if (puVar2 != NULL) {
        pfStack92 = (float *)proc_7F06C660(iStack12,puVar2,0);
        pfVar4 = (float *)proc_7F078444();
        proc_7F05818C(pfVar4,pfStack92,(int)auStack156);
        uVar5 = 1;
        *param_3 = fStack108;
        param_3[1] = fStack104;
        param_3[2] = fStack100;
      }
    }
    else {
      pfStack20 = (float *)proc_7F06C660(iStack12,puVar2,0);
      pfVar4 = *(float **)(**(int **)(*(int *)(iStack12 + 8) + 8) + 4);
      *param_3 = *pfVar4;
      param_3[1] = pfVar4[1];
      param_3[2] = pfVar4[2];
      pfVar4 = (float *)proc_7F078444();
      proc_7F05818C(pfVar4,pfStack20,(int)afStack84);
      proc_7F058474(afStack84,param_3);
      uVar5 = 1;
    }
  }
  return uVar5;
}



// WARNING: Instruction at (ram,0x7f02e084) overlaps instruction at (ram,0x7f02e080)
// 

void proc_7F02D734(short *param_1,int param_2)

{
  char cVar1;
  int iVar3;
  longlong lVar2;
  int iVar4;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  uint uVar5;
  float fVar6;
  float *pfVar7;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float fVar8;
  float fVar9;
  float afStack556 [16];
  float afStack492 [16];
  float fStack428;
  float fStack424;
  float fStack420;
  f32 afStack416 [16];
  undefined4 *puStack352;
  float afStack348 [16];
  float afStack284 [16];
  float fStack220;
  float fStack216;
  float fStack212;
  float fStack204;
  float fStack200;
  float fStack196;
  f32 afStack192 [16];
  undefined4 *puStack128;
  float fStack124;
  int iStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  uint uStack92;
  int iStack88;
  uint uStack84;
  int iStack80;
  int iStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  int iStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  int iStack36;
  int iStack32;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0xc);
  iVar3 = something_with_weaponpos_of_guarddata_hand((GUARDdata *)param_1,param_2);
  if (iVar3 == 0) {
    return;
  }
  iStack12 = 0;
  iStack16 = 0;
  iStack20 = *(int *)(iVar3 + 4);
  iStack24 = get_curplayer_positiondata();
  if (*(char *)((int)param_1 + 7) == '\b') {
    uVar5 = *(uint *)(param_1 + 0x26) & 1;
  }
  else {
    uVar5 = 1;
  }
  if (((uVar5 != 0) && (*(int *)(param_1 + 0x74) < global_timer + -0x78)) &&
     (lVar2 = proc_7F05DFCC((int)*(char *)(iStack20 + 0x80)), -1 < lVar2)) goto LAB_7f02e24c;
  iStack32 = 0;
  iStack36 = 0;
  iVar3 = (int)param_1 + param_2;
  *(char *)(iVar3 + 4) = *(char *)(iVar3 + 4) + '\x01';
  lVar2 = proc_7F05DFCC((int)*(char *)(iStack20 + 0x80));
  if (lVar2 < 0) {
    iStack32 = 1;
    iStack36 = 1;
  }
  else {
    lVar2 = proc_7F05DFCC((int)*(char *)(iStack20 + 0x80));
    if (lVar2 == 0) {
      trap(0x1c00);
    }
    if ((lVar2 == -1) && ((ulonglong)*(byte *)(iVar3 + 4) == 0xffffffff80000000)) {
      trap(0x1800);
    }
    if ((int)(uint)*(byte *)(iVar3 + 4) % (int)lVar2 == 0) {
      iStack32 = 1;
      iVar4 = proc_7F05DFCC((int)*(char *)(iStack20 + 0x80));
      iVar4 <<= 1;
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && ((ulonglong)*(byte *)(iVar3 + 4) == 0xffffffff80000000)) {
        trap(0x1800);
      }
      if (((int)(uint)*(byte *)(iVar3 + 4) % iVar4 == 0) || (*(char *)(iStack20 + 0x80) == '\x16'))
      {
        iStack36 = 1;
      }
    }
    else {
      iStack16 = 1;
    }
  }
  if (iStack32 != 0) {
    iStack52 = 0;
    fStack56 = (float)proc_7F02C190();
    fStack60 = proc_7F02C27C((int)param_1);
    iStack76 = *(int *)(iStack4 + 0x14);
    iStack12 = 1;
    lVar2 = proc_7F02D630((int)param_1,param_2,&fStack72);
    if (lVar2 == 0) {
      fStack72 = *(float *)(iStack4 + 8);
      fStack68 = *(float *)(iStack4 + 0xc) + 30.00000000;
      fStack64 = *(float *)(iStack4 + 0x10);
      if (param_2 == 1) {
        fVar6 = cosf(fStack56);
        fStack72 = fStack72 + fVar6 * 10.00000000;
        fVar6 = sinf(fStack56);
        fStack64 = fStack64 + -fVar6 * 10.00000000;
      }
      else {
        fVar6 = cosf(fStack56);
        fStack72 = fStack72 + -fVar6 * 10.00000000;
        fVar6 = sinf(fStack56);
        fStack64 = fStack64 + fVar6 * 10.00000000;
      }
    }
    lVar2 = proc_7F0B0E24();
    if (lVar2 == 0) {
      *(char *)(iVar3 + 4) = *(char *)(iVar3 + 4) + -1;
      iStack12 = 0;
    }
    else {
      iStack80 = iStack76;
    }
    if (iStack12 != 0) {
      uStack84 = 0;
      iStack88 = 0;
      uStack92 = 1;
      iStack108 = proc_7F0292A8(param_1,&fStack72,iStack80);
      fVar6 = cosf(fStack60);
      fStack104 = sinf(fStack56);
      fStack104 = fStack104 * fVar6;
      fStack100 = sinf(fStack60);
      fVar6 = cosf(fStack60);
      fStack96 = cosf(fStack56);
      fStack96 = fStack96 * fVar6;
      fStack48 = fStack104 * 65536.00000000 + fStack72;
      fStack44 = fStack100 * 65536.00000000 + fStack68;
      fStack40 = fStack96 * 65536.00000000 + fStack64;
      set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
      proc_7F0B1CC4();
      iStack76 = iStack80;
      lVar2 = proc_7F0B0E24();
      if (lVar2 == 0) {
        proc_7F02624C(&fStack72,&fStack104,&fStack48);
        iStack52 = iStack76;
        fStack48 = fStack48 - fStack104 * 26.00000000;
        fStack44 = fStack44 - fStack100 * 26.00000000;
        fStack40 = fStack40 - fStack96 * 26.00000000;
      }
      set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
      fVar6 = fStack48 - fStack72;
      fVar8 = fStack44 - fStack68;
      fVar9 = fStack40 - fStack64;
      fStack124 = fVar6 * fVar6 + fVar8 * fVar8 + fVar9 * fVar9;
      cVar1 = *(char *)(iStack20 + 0x80);
      if (cVar1 == '\x19') {
        if (flt_80051F60 < fVar6 * fVar6 + fVar8 * fVar8 + fVar9 * fVar9) {
          puStack128 = create_new_item_instance_of_model(0xca,0x56);
          if (puStack128 != NULL) {
            proc_7F057FD0(afStack192);
            proc_7F058570(fStack60,extraout_a0,afStack284);
            proc_7F0585FC(fStack56,extraout_a0_00,afStack348);
            proc_7F058098(afStack348,afStack284);
            fStack220 = fStack104 * flt_80051F64;
            fStack216 = fStack100 * flt_80051F64;
            fStack212 = fStack96 * flt_80051F64;
            fStack204 = fStack220 * global_timer_delta;
            fStack200 = fStack216 * global_timer_delta;
            fStack196 = fStack212 * global_timer_delta;
            proc_7F05EB0C((int)puStack128,&fStack72,iStack80,afStack284,&fStack204,afStack192,
                          iStack4);
            if ((puStack128[0x19] & 0x80) != 0) {
              *(uint *)puStack128[0x1b] = *(uint *)puStack128[0x1b] | 0x80;
              *(undefined2 *)((int)puStack128 + 0x82) = 0xffff;
              *(uint *)puStack128[0x1b] = *(uint *)puStack128[0x1b] | 0x20;
              *(undefined4 *)(puStack128[0x1b] + 0xb0) = puStack128[0x17];
              *(undefined4 *)(puStack128[0x1b] + 0xb4) = *(undefined4 *)(puStack128[0x1b] + 8);
              *(float *)(puStack128[0x1b] + 0x10) = fStack220;
              *(float *)(puStack128[0x1b] + 0x14) = fStack216;
              *(float *)(puStack128[0x1b] + 0x18) = fStack212;
              iVar3 = puStack128[0x1b];
              if (*(int *)(iVar3 + 0x98) == 0) {
                play_sfx_a1(ptr_sfx_buf,1,(sfxdata *)(iVar3 + 0x98));
              }
              else {
                if (*(int *)(iVar3 + 0x9c) == 0) {
                  play_sfx_a1(ptr_sfx_buf,1,(sfxdata *)(iVar3 + 0x9c));
                }
              }
            }
          }
        }
        else {
          iStack12 = 0;
        }
      }
      else {
        if (cVar1 == '\x18') {
          if (flt_80051F68 < fVar6 * fVar6 + fVar8 * fVar8 + fVar9 * fVar9) {
            puStack352 = create_new_item_instance_of_model(0xcb,0x57);
            if (puStack352 != NULL) {
              proc_7F057FD0(afStack416);
              fStack428 = fStack104 * flt_80051F6C;
              fStack424 = fStack100 * flt_80051F6C;
              fStack420 = fStack96 * flt_80051F6C;
              proc_7F058570(fStack60,extraout_a0_01,afStack492);
              proc_7F0585FC(fStack56,extraout_a0_02,afStack556);
              proc_7F058098(afStack556,afStack492);
              *(undefined2 *)((int)puStack352 + 0x82) = 0xb4;
              proc_7F05EB0C((int)puStack352,&fStack72,iStack80,afStack492,&fStack428,afStack416,
                            iStack4);
              if ((puStack352[0x19] & 0x80) != 0) {
                *(float *)(puStack352[0x1b] + 0x8c) = flt_80051F70;
                *(float *)(puStack352[0x1b] + 0x94) = flt_80051F74;
                *(undefined4 *)(puStack352[0x1b] + 0xbc) = 0x3c;
              }
            }
          }
          else {
            iStack12 = 0;
          }
        }
        else {
          if ((uVar5 == 0) || (iStack108 == 0)) {
            if ((*(char *)((int)param_1 + 7) == '\b') ||
               (fVar6 = extraout_f12, *(char *)((int)param_1 + 7) == '\n')) {
              *(int *)(param_1 + 0x24) = global_timer;
              fVar6 = extraout_f12;
            }
          }
          else {
            fVar8 = (*(float *)(iStack24 + 8) - fStack72) - fStack104 * 15.00000000;
            fVar6 = (*(float *)(iStack24 + 0xc) - fStack68) - fStack100 * 15.00000000;
            fVar9 = (*(float *)(iStack24 + 0x10) - fStack64) - fStack96 * 15.00000000;
            if (fVar8 * fVar8 + fVar6 * fVar6 + fVar9 * fVar9 <= fStack124) {
              proc_7F02D2E4((int)param_1,&uStack84,&iStack88,(int)cVar1);
              uStack92 = (uint)(iStack88 == 0);
              fVar6 = extraout_f12_00;
              if ((uStack84 != 0) &&
                 ((*(char *)((int)param_1 + 7) == '\b' ||
                  (fVar6 = extraout_f12_00, *(char *)((int)param_1 + 7) == '\n')))) {
                *(int *)(param_1 + 0x24) = global_timer;
                fVar6 = extraout_f12_00;
              }
            }
          }
          if (iStack88 == 0) {
            if (((DAT_8007ba04 == NULL) || ((*DAT_8007ba04 != '\x03' && (*DAT_8007ba04 != '\x06'))))
               && (fStack124 < flt_80051F78)) {
              uStack92 = 0;
            }
          }
          else {
            fStack48 = *(float *)(iStack24 + 8);
            fStack44 = *(float *)(iStack24 + 0xc);
            fStack40 = *(float *)(iStack24 + 0x10);
            iStack52 = *(int *)(iStack24 + 0x14);
            recall_joy2_hits_edit_detail_edit_flag();
            fVar6 = extraout_f12_01;
          }
          if (uStack92 != 0) {
            if (iStack52 != 0) {
              proc_7F0A3E1C(&fStack48,1,fVar6,0);
            }
            if (DAT_8007ba04 == NULL) {
              recall_joy2_hits_edit_flag((int)*(char *)(iStack20 + 0x80),&fStack48,-1);
            }
            else {
              pfVar7 = (float *)recall_joy2_hits_edit_detail_edit_flag();
              cVar1 = *DAT_8007ba04;
              if (cVar1 == '\x03') {
                if ((*(uint *)(param_1 + 10) & 0x40) != 0) {
                  proc_7F02727C();
                }
              }
              else {
                if ((cVar1 == '\x01') || (cVar1 == '\x04')) {
                  proc_7F05DF84((int)*(char *)(iStack20 + 0x80));
                  get_cur_playernum();
                  proc_7F04E0CC(*(int *)(DAT_8007ba04 + 4),extraout_f12_02,pfVar7,(int)&fStack48,
                                (int)*(char *)(iStack20 + 0x80));
                }
              }
            }
          }
          if (iStack36 != 0) {
            if (true) {
              switch(*(undefined *)(iStack20 + 0x80)) {
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 0xb:
              case 0xc:
              case 0xd:
              case 0xe:
              case 0x12:
              case 0x13:
              case 0x14:
              case 0x15:
              case 0x16:
                iStack36 = 1;
                goto LAB_7f02e1e8;
              }
            }
            iStack36 = 0;
          }
LAB_7f02e1e8:
          if (iStack36 != 0) {
            proc_7F061948((undefined *)(param_1 + param_2 * 0x16 + 0xc0),
                          (int)*(char *)(iStack20 + 0x80),&fStack72,&fStack48);
          }
        }
      }
    }
  }
  proc_7F02BFE4((int)param_1,param_2,(uint)(iStack12 != 0 || iStack16 != 0));
LAB_7f02e24c:
  proc_7F02D118((int)param_1,param_2,iStack12);
  return;
}



void proc_7F02E26C(short *param_1)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = param_1[9];
  uVar2 = uVar1 & 0xff7f;
  param_1[9] = uVar2;
  if ((uVar1 & 8) != 0) {
    proc_7F02D734(param_1,0);
    uVar2 = param_1[9] & 0xfff7;
    param_1[9] = uVar2;
  }
  if ((uVar2 & 4) != 0) {
    proc_7F02D734(param_1,1);
    param_1[9] = param_1[9] & 0xfffb;
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F02E2E0(void)

{
  undefined uVar1;
  int iVar2;
  undefined8 uVar3;
  int in_a0_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  if ((*(weapon_firing_animation_table **)(in_a0_lo + 0x2c) == &stru_80030108) ||
     (*(weapon_firing_animation_table **)(in_a0_lo + 0x2c) == &stru_80030150)) {
    iVar2 = *(int *)(in_a0_lo + 0x1c);
    uVar1 = *(undefined *)(iVar2 + 0x24);
    *(undefined *)(in_a0_lo + 0x30) = 2;
    *(undefined4 *)(in_a0_lo + 0x2c) = 0x800300c0;
    *(undefined *)(in_a0_lo + 8) = 0;
    proc_7F023B5C();
    proc_7F06FCA8(iVar2,stru_800300C0.anonymous_0,uVar1,extraout_f12,stru_800300C0.anonymous_7,
                  extraout_f14);
    if (0.00000000 <= (float)stru_800300C0.anonymous_5) {
      proc_7F06FDE8(iVar2,extraout_f12_00);
    }
    uVar3 = 1;
  }
  else {
    uVar3 = 0;
  }
  return uVar3;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02E3B8(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int in_a0_lo;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float fVar4;
  float extraout_f14;
  float extraout_f14_00;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  if (0.00000000 < *(float *)(*(int *)(in_a0_lo + 0x2c) + 0x24)) {
    uVar3 = proc_7F06F5AC(iVar1);
    proc_7F023B5C();
    proc_7F06FCA8(iVar1,uVar3,*(undefined *)(iVar1 + 0x24),extraout_f12,
                  *(undefined4 *)(*(int *)(in_a0_lo + 0x2c) + 0x24),extraout_f14);
    iVar2 = *(int *)(in_a0_lo + 0x2c);
    fVar4 = extraout_f12_00;
  }
  else {
    uVar3 = proc_7F06F5AC(iVar1);
    proc_7F023B5C();
    proc_7F06FCA8(iVar1,uVar3,*(undefined *)(iVar1 + 0x24),extraout_f12_01,
                  *(undefined4 *)(*(int *)(in_a0_lo + 0x2c) + 0x1c),extraout_f14_00);
    iVar2 = *(int *)(in_a0_lo + 0x2c);
    fVar4 = extraout_f12_02;
  }
  if (0.00000000 <= *(float *)(iVar2 + 0x14)) {
    proc_7F06FDE8(iVar1,fVar4);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02E4C0(void)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined4 uVar5;
  undefined uVar6;
  short *in_a0_lo;
  char cVar7;
  int iVar9;
  longlong lVar8;
  short *psVar10;
  float in_f0;
  float extraout_f0;
  float fVar11;
  float extraout_f0_00;
  float fVar12;
  f32 fVar13;
  float fVar14;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f14;
  
  iVar2 = *(int *)(in_a0_lo + 0xe);
  proc_7F06F5BC(iVar2);
  if ((((*(int *)(in_a0_lo + 0x24) < *(int *)(in_a0_lo + 0x22) + -0x1e) &&
       (*(int *)(iVar2 + 0x54) == 0)) &&
      (iVar9 = *(int *)(in_a0_lo + 0x16), *(float *)(iVar9 + 0x18) + 10.00000000 < in_f0)) &&
     (in_f0 < *(float *)(iVar9 + 0x1c))) {
    if (0.00000000 <= *(float *)(iVar9 + 0x24)) {
      if (*(float *)(iVar9 + 0x24) <= in_f0) goto LAB_7f02e638;
      cVar7 = *(char *)(in_a0_lo + 0x1b);
    }
    else {
      cVar7 = *(char *)(in_a0_lo + 0x1b);
    }
    if (cVar7 == '\0') {
      lVar8 = proc_7F02E2E0();
      in_f0 = extraout_f0;
      if (lVar8 == 0) {
        uVar5 = proc_7F06F5AC(iVar2);
        proc_7F023B5C();
        proc_7F06FCA8(iVar2,uVar5,*(undefined *)(iVar2 + 0x24),extraout_f12,
                      *(undefined4 *)(*(int *)(in_a0_lo + 0x16) + 0x1c),extraout_f14);
        in_f0 = *(float *)(*(int *)(in_a0_lo + 0x16) + 0x14);
        if (0.00000000 <= in_f0) {
          proc_7F06FDE8(iVar2,extraout_f12_00);
        }
      }
      cVar7 = *(char *)(in_a0_lo + 0x1a);
    }
    else {
      in_f0 = (float)proc_7F02E3B8();
      cVar7 = *(char *)(in_a0_lo + 0x1a);
    }
    *(char *)((int)in_a0_lo + 0x33) = cVar7 + '\x01';
    proc_7F06F5BC(iVar2);
  }
LAB_7f02e638:
  fVar11 = proc_7F06F5C4(iVar2);
  if (in_f0 < fVar11) {
    uVar3 = *(uint *)(in_a0_lo + 0x26);
    fVar14 = extraout_f12_01;
    fVar11 = in_f0;
    goto LAB_7f02e82c;
  }
  if (*(char *)((int)in_a0_lo + 0x37) == '\0') {
    cVar7 = *(char *)((int)in_a0_lo + 0x33);
    if (*(char *)(in_a0_lo + 0x1a) < cVar7) goto LAB_7f02e678;
    if (*(char *)(in_a0_lo + 0x1a) == cVar7) {
      *(char *)((int)in_a0_lo + 0x33) = cVar7 + '\x01';
      fVar11 = (float)proc_7F02E3B8();
    }
    else {
      if (*(char *)((int)in_a0_lo + 0x31) != '\0') {
        fVar14 = 0.50000000;
        if (*(char *)(in_a0_lo + 0x1b) == '\0') {
          iVar9 = *(int *)(in_a0_lo + 0x16);
          fVar11 = *(float *)(iVar9 + 0x20);
          fVar12 = *(float *)(iVar9 + 0x18);
          if (fVar11 <= 0.00000000) {
            fVar11 = *(float *)(iVar9 + 0x1c);
          }
        }
        else {
          iVar9 = *(int *)(in_a0_lo + 0x16);
          fVar12 = *(float *)(iVar9 + 0x20);
          if (fVar12 <= 0.00000000) {
            fVar12 = *(float *)(iVar9 + 0x18);
          }
          fVar11 = *(float *)(iVar9 + 0x24);
          if (fVar11 <= 0.00000000) {
            fVar11 = *(float *)(iVar9 + 0x1c);
          }
        }
        fVar11 = fVar11 - fVar12;
        if (fVar11 < 12.00000000) {
          fVar14 = (fVar11 * 0.50000000) / 12.00000000;
LAB_7f02e7b8:
          cVar7 = *(char *)(in_a0_lo + 0x1d);
        }
        else {
          if (16.00000000 < fVar11) {
            fVar14 = fVar11 * 0.50000000 * 0.06250000;
            goto LAB_7f02e7b8;
          }
          cVar7 = *(char *)(in_a0_lo + 0x1d);
        }
        if (cVar7 == '\0') {
          *(undefined *)((int)in_a0_lo + 0x31) = 0;
        }
        else {
          if (*(char *)((int)in_a0_lo + 0x3b) == '\0') {
            *(undefined *)((int)in_a0_lo + 0x31) = 0;
          }
          else {
            fVar14 = fVar14 + fVar14;
            *(undefined *)((int)in_a0_lo + 0x31) = 0;
          }
        }
        uVar5 = proc_7F06F5AC(iVar2);
        proc_7F06FCA8(iVar2,uVar5,*(undefined *)(iVar2 + 0x24),fVar14,fVar12,fVar12);
        proc_7F06FDE8(iVar2,extraout_f12_02);
      }
    }
  }
  else {
LAB_7f02e678:
    lVar8 = proc_7F02E2E0();
    fVar11 = extraout_f0_00;
    if (lVar8 == 0) {
      if ((*(uint *)(in_a0_lo + 0x26) & 1) != 0) {
        proc_7F029BB0((int)in_a0_lo);
      }
      proc_7F023E48((int)in_a0_lo);
      return;
    }
  }
  proc_7F06F5BC(iVar2);
  uVar3 = *(uint *)(in_a0_lo + 0x26);
  fVar14 = extraout_f12_03;
LAB_7f02e82c:
  if ((uVar3 & 0x40) == 0) {
    fVar14 = *(float *)(*(int *)(in_a0_lo + 0x16) + 4);
    if (((uVar3 & 0x20) != 0) && (fVar12 = proc_7F06F5C4(iVar2), fVar12 < fVar14)) {
      proc_7F06F5C4(iVar2);
    }
    proc_7F023B5C();
    uVar6 = proc_7F02C2B0();
    *(undefined *)(in_a0_lo + 0x18) = uVar6;
    iVar9 = *(int *)(in_a0_lo + 0x16);
    fVar14 = extraout_f12_04;
  }
  else {
    iVar9 = *(int *)(in_a0_lo + 0x16);
  }
  if ((fVar11 <= *(float *)(iVar9 + 0x28)) || (*(float *)(iVar9 + 0x2c) <= fVar11)) {
    proc_7F02D0F8((int)in_a0_lo);
  }
  else {
    proc_7F02C4C0(in_a0_lo,iVar9,(int)*(char *)((int)in_a0_lo + 0x39),
                  (int)*(char *)(in_a0_lo + 0x1c),fVar14);
  }
  lVar8 = 0;
  psVar10 = in_a0_lo;
  do {
    iVar9 = (int)lVar8;
    if (*(char *)(psVar10 + 0x1c) == '\0') {
      proc_7F02D1C4((int)in_a0_lo,lVar8,0);
LAB_7f02ebc4:
      lVar8 = (longlong)(iVar9 + 1);
    }
    else {
      if (*(char *)(psVar10 + 0x1d) == '\0') {
        if ((fVar11 < *(float *)(*(int *)(in_a0_lo + 0x16) + 0x18)) ||
           (*(float *)(*(int *)(in_a0_lo + 0x16) + 0x1c) <= fVar11)) {
          proc_7F02D1C4((int)in_a0_lo,lVar8,0);
          if (*(char *)((int)in_a0_lo + 7) == '\n') {
            fVar13 = proc_7F023B5C();
            proc_7F06FE4C(iVar2,fVar13,extraout_f12_06);
            lVar8 = (longlong)(iVar9 + 1);
          }
          else {
            fVar13 = proc_7F023B5C();
            proc_7F06FE4C(iVar2,fVar13,extraout_f12_07);
            lVar8 = (longlong)(iVar9 + 1);
          }
        }
        else {
          proc_7F02D1C4((int)in_a0_lo,lVar8,1);
          *(undefined4 *)(in_a0_lo + 0x22) = global_timer;
          if (*(char *)((int)in_a0_lo + 7) == '\n') {
            fVar14 = *(float *)(*(int *)(in_a0_lo + 0x16) + 0x1c) -
                     *(float *)(*(int *)(in_a0_lo + 0x16) + 0x18);
            if (fVar14 < 30.00000000) {
              if (*(int *)(in_a0_lo + 0x20) < (int)fVar14 * -2 + 0x3c) {
                proc_7F06FE4C(iVar2,0x3dcccccd,extraout_f12_05);
                *(int *)(in_a0_lo + 0x20) = *(int *)(in_a0_lo + 0x20) + clock_timer;
                goto LAB_7f02ebc4;
              }
              proc_7F06FE4C(iVar2,0x3f000000,extraout_f12_05);
              lVar8 = (longlong)(iVar9 + 1);
            }
            else {
              proc_7F06FE4C(iVar2,0x3f000000,extraout_f12_05);
              lVar8 = (longlong)(iVar9 + 1);
            }
          }
          else {
            proc_7F06FE4C(iVar2,0x3f000000,extraout_f12_05);
            lVar8 = (longlong)(iVar9 + 1);
          }
        }
      }
      else {
        if (*(char *)((int)in_a0_lo + 0x31) == '\0') {
          cVar7 = *(char *)(in_a0_lo + 0x19);
          if ((lVar8 == (longlong)cVar7) || (*(char *)((int)in_a0_lo + (int)cVar7 + 0x3a) == '\0'))
          {
            iVar4 = *(int *)(in_a0_lo + 0x16);
            fVar14 = *(float *)(iVar4 + 0x20);
            if ((fVar14 < 0.00000000) || ((fVar11 < fVar14 || (*(float *)(iVar4 + 0x24) < fVar11))))
            {
              if ((0.00000000 <= fVar14) || (fVar11 < *(float *)(iVar4 + 0x18))) goto LAB_7f02ebac;
              cVar1 = *(char *)((int)in_a0_lo + 0x33);
            }
            else {
              cVar1 = *(char *)((int)in_a0_lo + 0x33);
            }
            *(undefined *)((int)in_a0_lo + 0x31) = 1;
            *(char *)(in_a0_lo + 0x19) = '\x01' - cVar7;
            *(char *)((int)in_a0_lo + 0x33) = cVar1 + '\x01';
            *(undefined4 *)(in_a0_lo + 0x22) = global_timer;
            proc_7F02D1C4((int)in_a0_lo,lVar8,1);
            lVar8 = (longlong)(iVar9 + 1);
            goto LAB_7f02ebc8;
          }
        }
LAB_7f02ebac:
        proc_7F02D1C4((int)in_a0_lo,lVar8,0);
        lVar8 = (longlong)(iVar9 + 1);
      }
    }
LAB_7f02ebc8:
    psVar10 = (short *)((int)psVar10 + 1);
    if (lVar8 == 2) {
      return;
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02EBFC(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  short *in_a0_lo;
  uint uVar4;
  char cVar5;
  float in_f0;
  float fVar6;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f14;
  float extraout_f14_00;
  
  iVar2 = *(int *)(in_a0_lo + 0xe);
  proc_7F06F5BC(iVar2);
  iVar1 = *(int *)(in_a0_lo + 0x2c);
  if (iVar1 == 0) {
    uVar4 = *(uint *)(in_a0_lo + 0x26);
  }
  else {
    if (iVar1 == 1) {
      fVar6 = *(float *)(*(int *)(in_a0_lo + 0x16) + 0x24);
      if (fVar6 < 0.00000000) {
        fVar6 = *(float *)(*(int *)(in_a0_lo + 0x16) + 0x1c);
      }
      uVar3 = proc_7F06F5AC(iVar2);
      proc_7F023B5C();
      proc_7F06FCA8(iVar2,uVar3,*(undefined *)(iVar2 + 0x24),extraout_f12_00,fVar6,extraout_f14);
      if (0.00000000 <= *(float *)(*(int *)(in_a0_lo + 0x16) + 0x14)) {
        proc_7F06FDE8(iVar2,extraout_f12_01);
      }
      *(undefined4 *)(in_a0_lo + 0x2c) = 2;
      proc_7F02D0F8((int)in_a0_lo);
      return;
    }
    if (iVar1 == 2) {
      fVar6 = proc_7F06F5C4(iVar2);
      if (in_f0 < fVar6) {
        return;
      }
      uVar4 = *(uint *)(in_a0_lo + 0x26);
      *(uint *)(in_a0_lo + 0x26) = uVar4 | 0x20;
      uVar4 = uVar4 & 0xffffffbf | 0x20;
      *(uint *)(in_a0_lo + 0x26) = uVar4;
      if (*(int *)(in_a0_lo + 0x2a) != 0) {
        proc_7F025560((int)in_a0_lo,uVar4,*(undefined4 *)(in_a0_lo + 0x28));
        return;
      }
      proc_7F0256F0((int)in_a0_lo,*(uint *)(in_a0_lo + 0x26),*(undefined4 *)(in_a0_lo + 0x28));
      return;
    }
    uVar4 = *(uint *)(in_a0_lo + 0x26);
  }
  if ((uVar4 & 0x20) == 0) {
    cVar5 = *(char *)(in_a0_lo + 0x1b);
  }
  else {
    if ((uVar4 & 0x40) != 0) {
      iVar2 = proc_7F02C4C0(in_a0_lo,*(int *)(in_a0_lo + 0x16),(int)*(char *)((int)in_a0_lo + 0x39),
                            (int)*(char *)(in_a0_lo + 0x1c),extraout_f12);
      if (iVar2 != 0) {
        return;
      }
      *(undefined4 *)(in_a0_lo + 0x2c) = 1;
      return;
    }
    fVar6 = proc_7F06F5C4(iVar2);
    if (fVar6 <= in_f0) {
      *(undefined *)(in_a0_lo + 0x18) = 2;
      *(uint *)(in_a0_lo + 0x26) = *(uint *)(in_a0_lo + 0x26) | 0x40;
      return;
    }
    cVar5 = *(char *)(in_a0_lo + 0x1b);
  }
  if ((((cVar5 == '\0') && (0.00000000 < *(float *)(*(int *)(in_a0_lo + 0x16) + 0x24))) &&
      (in_f0 <= *(float *)(*(int *)(in_a0_lo + 0x16) + 0x24))) &&
     (fVar6 = proc_7F06F5C4(iVar2), fVar6 <= in_f0)) {
    uVar3 = proc_7F06F5AC(iVar2);
    proc_7F023B5C();
    proc_7F06FCA8(iVar2,uVar3,*(undefined *)(iVar2 + 0x24),extraout_f12_02,
                  *(undefined4 *)(*(int *)(in_a0_lo + 0x16) + 0x24),extraout_f14_00);
    if (*(char *)((int)in_a0_lo + 0x37) == '\0') {
      proc_7F06FDE8(iVar2,extraout_f12_03);
    }
    else {
      if (0.00000000 <= *(float *)(*(int *)(in_a0_lo + 0x16) + 0x14)) {
        proc_7F06FDE8(iVar2,extraout_f12_03);
      }
    }
  }
  proc_7F02E4C0();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02EEE0(void)

{
  char cVar1;
  weapon_firing_animation_table *pwVar2;
  u32 uVar3;
  int objinst;
  undefined4 uVar4;
  weapon_firing_animation_table *pwVar5;
  int in_a0_lo;
  float in_f0;
  float fVar6;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  float extraout_f14_00;
  
  if (*(char *)(in_a0_lo + 0x35) != '\0') {
    objinst = *(int *)(in_a0_lo + 0x1c);
    proc_7F06F5BC(objinst);
    pwVar2 = *(weapon_firing_animation_table **)(in_a0_lo + 0x2c);
    if ((((pwVar2 == &stru_80030198) || (pwVar2 == &stru_800301E0)) || (pwVar2 == &stru_80030228))
       || (pwVar2 == &stru_80030270)) {
      if ((float)pwVar2->anonymous_5 <= in_f0) {
        cVar1 = *(char *)(objinst + 0x24);
        pwVar5 = pwVar2 + 4;
        if ((*(char *)(in_a0_lo + 0x39) != '\0') && (*(char *)(in_a0_lo + 0x38) != '\0')) {
          uVar3 = get_random_value();
          if ((uVar3 & 1) == 0) {
            pwVar5 = pwVar2 + 8;
          }
          else {
            pwVar5 = pwVar2 + 0xc;
          }
        }
        if (pwVar5 == &stru_800302B8) {
          fVar6 = 24.00000000;
        }
        else {
          if (pwVar5 == &stru_80030300) {
            fVar6 = 24.00000000;
          }
          else {
            if (pwVar5 == &stru_80030348) {
              fVar6 = 32.00000000;
            }
            else {
              if (pwVar5 == &stru_80030390) {
                fVar6 = 44.00000000;
              }
              else {
                if (pwVar5 == &stru_800303D8) {
                  fVar6 = 24.00000000;
                }
                else {
                  if (pwVar5 == &stru_80030420) {
                    fVar6 = 34.00000000;
                  }
                  else {
                    if (pwVar5 == &stru_80030468) {
                      fVar6 = 32.00000000;
                    }
                    else {
                      if (pwVar5 == &stru_800304B0) {
                        fVar6 = 44.00000000;
                      }
                      else {
                        if (pwVar5 == &stru_800304F8) {
                          fVar6 = 24.00000000;
                        }
                        else {
                          if (pwVar5 == &stru_80030540) {
                            fVar6 = 34.00000000;
                          }
                          else {
                            if (pwVar5 == &stru_80030588) {
                              fVar6 = 32.00000000;
                            }
                            else {
                              fVar6 = 16.00000000;
                              if (pwVar5 == &stru_800305D0) {
                                fVar6 = 44.00000000;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        *(undefined *)(in_a0_lo + 0x30) = 2;
        *(weapon_firing_animation_table **)(in_a0_lo + 0x2c) = pwVar5;
        *(undefined *)(in_a0_lo + 8) = 0;
        proc_7F023B5C();
        proc_7F06FCA8(objinst,pwVar5->anonymous_0,cVar1,extraout_f12,pwVar5->anonymous_4,
                      extraout_f14);
        if (*(char *)(in_a0_lo + 0x36) == '\0') {
          if (0.00000000 <= (float)pwVar5->anonymous_8) {
            proc_7F06FDE8(objinst,extraout_f12_00);
          }
          else {
            if (0.00000000 <= (float)pwVar5->anonymous_5) {
              proc_7F06FDE8(objinst,extraout_f12_00);
            }
          }
        }
        else {
          if (0.00000000 <= (float)pwVar5->anonymous_9) {
            proc_7F06FDE8(objinst,extraout_f12_00);
          }
          else {
            proc_7F06FDE8(objinst,extraout_f12_00);
          }
        }
        if (*(float *)(*(int *)(in_a0_lo + 0x2c) + 0xc) != 0.00000000) {
          objinst = extract_id_from_object_structure_microcode(objinst,**(ushort ***)(objinst + 8));
          *(float *)(objinst + 0x5c) = fVar6;
          *(float *)(objinst + 0x58) = -*(float *)(*(int *)(in_a0_lo + 0x2c) + 0xc) / fVar6;
          if (cVar1 != '\0') {
            *(float *)(objinst + 0x58) = -*(float *)(objinst + 0x58);
          }
        }
      }
    }
    else {
      if (((((pwVar2 == &stru_800302B8) || (pwVar2 == &stru_80030300)) ||
           ((pwVar2 == &stru_80030348 || ((pwVar2 == &stru_80030390 || (pwVar2 == &stru_800303D8))))
           )) || ((pwVar2 == &stru_80030420 ||
                  (((((pwVar2 == &stru_80030468 || (pwVar2 == &stru_800304B0)) ||
                     (pwVar2 == &stru_800304F8)) ||
                    ((pwVar2 == &stru_80030540 || (pwVar2 == &stru_80030588)))) ||
                   (pwVar2 == &stru_800305D0)))))) &&
         (((*(char *)(in_a0_lo + 0x36) == '\0' && (0.00000000 < (float)pwVar2->anonymous_9)) &&
          ((in_f0 <= (float)pwVar2->anonymous_9 && (fVar6 = proc_7F06F5C4(objinst), fVar6 <= in_f0))
          )))) {
        uVar4 = proc_7F06F5AC(objinst);
        proc_7F023B5C();
        proc_7F06FCA8(objinst,uVar4,*(undefined *)(objinst + 0x24),extraout_f12_01,
                      *(undefined4 *)(*(int *)(in_a0_lo + 0x2c) + 0x24),extraout_f14_00);
        if (*(char *)(in_a0_lo + 0x37) == '\0') {
          proc_7F06FDE8(objinst,extraout_f12_02);
        }
        else {
          if (0.00000000 <= *(float *)(*(int *)(in_a0_lo + 0x2c) + 0x14)) {
            proc_7F06FDE8(objinst,extraout_f12_02);
          }
        }
      }
    }
  }
  proc_7F02E4C0();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02F3F8(void)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  GUARDdata *guard;
  float in_f0;
  float fVar4;
  float fVar5;
  
  iVar2 = guard->MODELdata_pointer;
  proc_7F06F5BC(iVar2);
  bVar1 = *(char *)(iVar2 + 0x24) != '\0';
  fVar4 = in_f0;
  iVar3 = something_with_weaponpos_of_guarddata_hand(guard,(uint)bVar1);
  if ((20.00000000 <= in_f0) && (iVar3 != 0)) {
    *(uint *)(*(int *)(iVar3 + 4) + 100) = *(uint *)(*(int *)(iVar3 + 4) + 100) & 0xfffff7ff;
  }
  if ((61.00000000 <= in_f0) && (iVar3 != 0)) {
    *(undefined2 *)(*(int *)(iVar3 + 4) + 0x82) = 0xb4;
  }
  if ((119.00000000 <= in_f0) && (iVar3 != 0)) {
    proc_7F04BFD0((&guard->handle_positiondata_right_gun)[(uint)bVar1],3);
    guard->special_bitflags = guard->special_bitflags | 1;
  }
  proc_7F06F5BC(iVar2);
  fVar5 = proc_7F06F5C4(iVar2);
  if (fVar5 <= fVar4) {
    proc_7F023E48((int)guard);
  }
  else {
    if ((87.00000000 <= in_f0) && (in_f0 <= 110.00000000)) {
      proc_7F023B5C();
      proc_7F02C2B0();
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02F5A4(void)

{
  int iVar1;
  int in_a0_lo;
  float in_f0;
  float fVar2;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  proc_7F06F5BC(iVar1);
  if ((86.00000000 <= in_f0) || (fVar2 = proc_7F06F5C4(iVar1), in_f0 < fVar2)) {
    fVar2 = proc_7F06F5C4(iVar1);
    if (fVar2 <= in_f0) {
      proc_7F023CB8();
    }
  }
  else {
    proc_7F06F610(iVar1);
    proc_7F06FCA8(iVar1,ptr_animation_table + 0x6254,0,extraout_f12,0x42ac0000,extraout_f14);
    proc_7F06FDE8(iVar1,extraout_f12_00);
  }
  return;
}



void proc_7F02F688(void)

{
  return;
}



uint proc_7F02F690(int param_1,float *param_2,int param_3,float *param_4)

{
  bool bVar1;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  float extraout_f12;
  float *pfStack24;
  float *pfStack20;
  int iStack8;
  
  iStack8 = *(int *)(param_1 + 0x1c);
  pfStack24 = (float *)convert_angle_using_inverse
                                 ((f32)(*param_2 - *(float *)(*(int *)(param_1 + 0x18) + 8)),
                                  (f32)(param_2[2] - *(float *)(*(int *)(param_1 + 0x18) + 0x10)));
  pfStack20 = pfStack24;
  getsubroty(iStack8,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  fVar3 = (float)pfStack20 - (float)pfStack24;
  if ((float)pfStack20 < (float)pfStack24) {
    fVar3 = fVar3 + flt_80051FD0;
  }
  if (flt_80051FD4 < fVar3) {
    fVar3 = FLOAT_80051fd8 - fVar3;
  }
  fVar2 = flt_80051FE0;
  fVar4 = flt_80051FDC;
  if (param_3 != 2) {
    if (param_3 == 1) {
      fVar2 = flt_80051FF8;
      fVar4 = flt_80051FE8;
      if ((flt_80051FE4 <= fVar3) &&
         (fVar2 = flt_80051FF8, fVar4 = flt_80051FF0, flt_80051FEC <= fVar3)) {
        fVar2 = flt_80051FF8;
        fVar4 = flt_80051FF4;
      }
    }
    else {
      fVar2 = flt_80052010;
      fVar4 = flt_80052000;
      if ((flt_80051FFC <= fVar3) &&
         (fVar2 = flt_80052010, fVar4 = flt_80052008, flt_80052004 <= fVar3)) {
        fVar2 = flt_80052010;
        fVar4 = flt_8005200C;
      }
    }
  }
  proc_7F04310C((float *)&pfStack24,fVar4 * *(float *)(iStack8 + 0xa4),pfStack20,(float)pfStack20,
                (float)param_4,fVar2 * *(float *)(iStack8 + 0xa4));
  bVar1 = (float)pfStack24 == (float)pfStack20;
  if (bVar1) {
    *param_4 = 0.00000000;
  }
  setsubroty(iStack8,extraout_f12,(float)pfStack24,extraout_a2_lo_00);
  return (uint)bVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02F888(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  short *in_a0_lo;
  int iVar4;
  longlong lVar5;
  short *psVar6;
  int iVar7;
  float in_f0;
  float fVar8;
  float fVar9;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  
  iVar4 = *(int *)(in_a0_lo + 0xe);
  iVar2 = *(int *)(in_a0_lo + 0xc);
  iVar1 = get_curplayer_positiondata();
  iVar7 = *(int *)(in_a0_lo + 0x18) + clock_timer;
  *(int *)(in_a0_lo + 0x18) = iVar7;
  *(int *)(in_a0_lo + 100) = global_timer;
  if (((*(char *)((int)in_a0_lo + 9) == '\x01') ||
      (*(int *)(in_a0_lo + 0x66) < global_timer + -0x3c)) || (*(int *)(in_a0_lo + 0x1a) < iVar7)) {
    proc_7F06F5BC(iVar4);
    iVar2 = proc_7F06F5AC(iVar4);
    fVar8 = (float)(uint)*(ushort *)(iVar2 + 4);
    if (false) {
      fVar8 = fVar8 + 4294967296.00000000;
    }
    if (fVar8 * 0.50000000 < in_f0) {
      proc_7F06FE90(iVar4,extraout_f12,extraout_f14);
    }
    else {
      proc_7F06F5AC(iVar4);
      proc_7F06FE90(iVar4,extraout_f12_00,extraout_f14_00);
    }
    proc_7F029BB0((int)in_a0_lo);
    proc_7F023E48((int)in_a0_lo);
  }
  else {
    fVar8 = *(float *)(iVar1 + 8) - *(float *)(iVar2 + 8);
    fVar9 = *(float *)(iVar1 + 0x10) - *(float *)(iVar2 + 0x10);
    if (((300.00000000 <= fVar8) || (fVar8 <= -300.00000000)) ||
       ((300.00000000 <= fVar9 || (fVar9 <= -300.00000000)))) {
      uVar3 = proc_7F02F690((int)in_a0_lo,(float *)(iVar1 + 8),0,(float *)(in_a0_lo + 0x2a));
      if (uVar3 != 0) {
        *(undefined4 *)(in_a0_lo + 0x1c) = 1;
      }
      if (*(int *)(in_a0_lo + 0x18) < 0x15) {
        proc_7F02D0F8((int)in_a0_lo);
        iVar4 = *(int *)(in_a0_lo + 0x1c);
      }
      else {
        proc_7F02C4C0(in_a0_lo,*(int *)(in_a0_lo + 0x1e),(int)*(char *)((int)in_a0_lo + 0x49),
                      (int)*(char *)(in_a0_lo + 0x24),extraout_f12_01);
        iVar4 = *(int *)(in_a0_lo + 0x1c);
      }
      if ((iVar4 == 0) || (lVar5 = 0, psVar6 = in_a0_lo, *(int *)(in_a0_lo + 0x18) < 0x1f)) {
        proc_7F02D1C4((int)in_a0_lo,1,0);
        proc_7F02D1C4((int)in_a0_lo,0,0);
      }
      else {
        do {
          iVar4 = (int)lVar5;
          if (*(char *)(psVar6 + 0x24) == '\0') {
            proc_7F02D1C4((int)in_a0_lo,lVar5,0);
            lVar5 = (longlong)(iVar4 + 1);
          }
          else {
            if (*(char *)(psVar6 + 0x25) == '\0') {
              proc_7F02D1C4((int)in_a0_lo,lVar5,1);
              lVar5 = (longlong)(iVar4 + 1);
            }
            else {
              iVar2 = *(int *)(in_a0_lo + 0x18);
              if (*(int *)(in_a0_lo + 0x20) < iVar2) {
                if ((lVar5 == (longlong)*(int *)(in_a0_lo + 0x22)) ||
                   (*(char *)((int)in_a0_lo + *(int *)(in_a0_lo + 0x22) + 0x4a) == '\0')) {
                  *(int *)(in_a0_lo + 0x20) = iVar2;
                  if (*(char *)((int)in_a0_lo + (0x4b - iVar4)) == '\0') {
                    if (*(char *)(psVar6 + 0x26) == '\0') {
                      *(int *)(in_a0_lo + 0x20) = *(int *)(in_a0_lo + 0x20) + 0x28;
                    }
                    else {
                      *(int *)(in_a0_lo + 0x20) = *(int *)(in_a0_lo + 0x20) + 0xb4;
                    }
                  }
                  else {
                    if (*(char *)(psVar6 + 0x26) == '\0') {
                      *(int *)(in_a0_lo + 0x20) = *(int *)(in_a0_lo + 0x20) + 0x14;
                    }
                    else {
                      *(int *)(in_a0_lo + 0x20) = iVar2 + 0x5a;
                    }
                  }
                  *(int *)(in_a0_lo + 0x22) = 1 - *(int *)(in_a0_lo + 0x22);
                  proc_7F02D1C4((int)in_a0_lo,lVar5,1);
                  lVar5 = (longlong)(iVar4 + 1);
                  goto LAB_7f02fbf0;
                }
              }
              proc_7F02D1C4((int)in_a0_lo,lVar5,0);
              lVar5 = (longlong)(iVar4 + 1);
            }
          }
LAB_7f02fbf0:
          psVar6 = (short *)((int)psVar6 + 1);
        } while (lVar5 != 2);
      }
    }
    else {
      proc_7F029BB0((int)in_a0_lo);
      proc_7F023E48((int)in_a0_lo);
    }
  }
  return;
}



undefined8 proc_7F02FC34(float *param_1,float *param_2,float *param_3,float param_4)

{
  undefined8 uVar1;
  float in_a3_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar5 = *param_3 - *param_1;
  fVar4 = param_3[2] - param_1[2];
  fVar2 = *param_2;
  if (fVar2 == 0.00000000) {
    if (param_2[2] == 0.00000000) {
      if (in_a3_lo * in_a3_lo < fVar4 * fVar4 + fVar5 * fVar5) {
        return 0;
      }
      return 1;
    }
    fVar3 = param_2[2];
  }
  else {
    fVar3 = param_2[2];
  }
  uVar1 = 0;
  fVar6 = fVar4 * fVar3 + fVar2 * fVar5;
  if (0.00000000 < fVar6) {
    if (((fVar4 * fVar4 + fVar5 * fVar5) - in_a3_lo * in_a3_lo) * (fVar3 * fVar3 + fVar2 * fVar2) <=
        fVar6 * fVar6) {
      uVar1 = 1;
    }
    else {
      uVar1 = 0;
    }
  }
  return uVar1;
}



undefined8 proc_7F02FD50(float *param_1,float *param_2,float *param_3,float param_4)

{
  undefined8 uVar1;
  float in_a3_lo;
  float fVar2;
  float fVar3;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  fVar3 = *param_1;
  fVar2 = *param_3 - in_a3_lo;
  if ((fVar2 < fVar3) || (fVar2 < *param_2)) {
    fVar2 = *param_3 + in_a3_lo;
    if (fVar2 <= fVar3) {
      if (fVar2 <= *param_2) {
        return 0;
      }
      fVar2 = param_3[2];
    }
    else {
      fVar2 = param_3[2];
    }
    if ((fVar2 - in_a3_lo < param_1[2]) || (fVar2 - in_a3_lo < param_2[2])) {
      if (fVar2 + in_a3_lo <= param_1[2]) {
        if (fVar2 + in_a3_lo <= param_2[2]) {
          return 0;
        }
        fStack12 = *param_2;
      }
      else {
        fStack12 = *param_2;
      }
      fStack12 = fStack12 - fVar3;
      uStack8 = 0;
      fStack4 = param_2[2] - param_1[2];
      uVar1 = proc_7F02FC34(param_1,&fStack12,param_3,in_a3_lo);
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F02FE78(void)

{
  int iVar1;
  longlong lVar2;
  int iVar3;
  int in_a0_lo;
  float in_f0;
  float extraout_f0;
  float fVar4;
  float fVar5;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar6;
  float fStack20;
  
  iVar1 = *(int *)(in_a0_lo + 0x1c);
  *(int *)(in_a0_lo + 200) = global_timer;
  if (*(char *)(in_a0_lo + 9) != '\x01') {
    if (global_timer + -0x3c <= *(int *)(in_a0_lo + 0xcc)) {
      lVar2 = proc_7F02FD50((float *)(in_a0_lo + 0xbc),(float *)(*(int *)(in_a0_lo + 0x18) + 8),
                            (float *)(in_a0_lo + 0x2c),in_f12);
      in_f0 = extraout_f0;
      if (lVar2 == 0) {
        proc_7F02F690(in_a0_lo,(float *)(in_a0_lo + 0x2c),1,(float *)(in_a0_lo + 0x40));
        if (0 < *(int *)(in_a0_lo + 0x3c)) {
          *(int *)(in_a0_lo + 0x3c) = *(int *)(in_a0_lo + 0x3c) - clock_timer;
          return;
        }
        fStack20 = dword_80030988;
        iVar3 = proc_7F06F5AC(iVar1);
        if (iVar3 == ptr_animation_table + 0x777c) {
          fStack20 = dword_80030994;
        }
        fVar4 = proc_7F06F618(iVar1);
        *(float *)(in_a0_lo + 0x38) =
             *(float *)(in_a0_lo + 0x38) + fStack20 * global_timer_delta * fVar4;
        return;
      }
    }
  }
  proc_7F06F5AC(iVar1);
  proc_7F06F5BC(iVar1);
  fVar4 = in_f0 - 0.00000000;
  if (in_f0 < 0.00000000) {
    iVar3 = proc_7F06F5AC(iVar1);
    fVar5 = (float)(uint)*(ushort *)(iVar3 + 4);
    if (false) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fVar4 = fVar4 + fVar5;
  }
  iVar3 = proc_7F06F5AC(iVar1);
  fVar5 = (float)(uint)*(ushort *)(iVar3 + 4);
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  if (fVar5 * 0.50000000 < fVar4) {
    proc_7F06F5AC(iVar1);
    proc_7F06FE90(iVar1,extraout_f12,extraout_f14);
  }
  else {
    iVar3 = proc_7F06F5AC(iVar1);
    fVar4 = (float)(uint)*(ushort *)(iVar3 + 4);
    if (false) {
      fVar4 = fVar4 + 4294967296.00000000;
    }
    fVar5 = extraout_f12_00;
    fVar6 = extraout_f14_00;
    if (fVar4 * 0.50000000 - 0.00000000 < 0.00000000) {
      proc_7F06F5AC(iVar1);
      fVar5 = extraout_f12_01;
      fVar6 = extraout_f14_01;
    }
    proc_7F06FE90(iVar1,fVar5,fVar6);
  }
  proc_7F023E48(in_a0_lo);
  return;
}



undefined4
proc_7F030128(int param_1,undefined4 *param_2,int param_3,undefined4 *param_4,int param_5,
             undefined4 param_6)

{
  longlong lVar1;
  undefined4 uStack20;
  undefined4 uStack16;
  float fStack12;
  undefined4 uStack8;
  int iStack4;
  
  uStack8 = 0;
  iStack4 = param_3;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack20,&fStack12,&uStack16);
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
  lVar1 = proc_7F0B0E24();
  if (lVar1 != 0) {
    if (param_5 == 0) {
      uStack8 = 1;
    }
    else {
      if (iStack4 == param_5) {
        uStack8 = 1;
      }
    }
  }
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  return uStack8;
}



undefined4
proc_7F0301FC(int param_1,float *param_2,undefined4 param_3,float *param_4,float param_5,
             undefined4 param_6)

{
  longlong lVar1;
  float fVar2;
  undefined4 uStack44;
  undefined4 uStack40;
  float fStack36;
  undefined4 uStack32;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  undefined4 uStack4;
  
  uStack32 = 0;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack44,&fStack36,&uStack40);
  fStack16 = *param_4 - *param_2;
  uStack12 = 0;
  fStack8 = param_4[2] - param_2[2];
  if ((fStack16 == 0.00000000) && (fStack8 == 0.00000000)) {
    uStack32 = 1;
  }
  else {
    fVar2 = sqrtf(fStack8 * fStack8 + fStack16 * fStack16);
    fStack16 = fStack16 * (1.00000000 / fVar2);
    fStack8 = fStack8 * (1.00000000 / fVar2);
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    uStack4 = param_3;
    lVar1 = proc_7F0B0E24();
    if ((((lVar1 != 0) && (lVar1 = proc_7F0B0E24(), lVar1 != 0)) &&
        (uStack4 = param_3, lVar1 = proc_7F0B0E24(), lVar1 != 0)) &&
       (lVar1 = proc_7F0B0E24(), lVar1 != 0)) {
      uStack32 = 1;
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  }
  return uStack32;
}



undefined4
proc_7F0304AC(int param_1,undefined4 *param_2,int param_3,undefined4 *param_4,undefined4 *param_5,
             int param_6,undefined4 param_7)

{
  int iVar1;
  longlong lVar2;
  undefined4 uStack20;
  undefined4 uStack16;
  float fStack12;
  undefined4 uStack8;
  int iStack4;
  
  uStack8 = 0;
  iStack4 = param_3;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack20,&fStack12,&uStack16);
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
  lVar2 = proc_7F0B0E24();
  iVar1 = iStack4;
  if ((lVar2 != 0) && (lVar2 = proc_7F0B0E24(), lVar2 != 0)) {
    if (param_6 == 0) {
      uStack8 = 1;
    }
    else {
      if (iVar1 == param_6) {
        uStack8 = 1;
      }
    }
  }
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  return uStack8;
}



void proc_7F0305E0(int param_1,float *param_2,undefined4 param_3,float *param_4,float *param_5,
                  float param_6,undefined4 param_7)

{
  longlong lVar1;
  int iVar2;
  float extraout_f12;
  float extraout_f12_00;
  undefined4 uStack20;
  undefined4 uStack16;
  float fStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack8 = 0;
  uStack4 = param_3;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack20,&fStack12,&uStack16);
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
  lVar1 = proc_7F0B0E24();
  if (lVar1 != 0) {
    lVar1 = proc_7F0B0E24();
    if (lVar1 != 0) {
      iVar2 = proc_7F0301FC(param_1,param_2,param_3,param_4,extraout_f12,param_7);
      if (iVar2 != 0) {
        iVar2 = proc_7F0301FC(param_1,param_4,uStack4,param_5,extraout_f12_00,param_7);
        if (iVar2 != 0) {
          uStack8 = 1;
        }
      }
    }
  }
  set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  return;
}



void proc_7F03074C(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  if ((param_2[2] - param_1[2]) * *param_3 + -param_3[2] * (*param_2 - *param_1) <= 0.00000000) {
    fVar1 = *param_1;
    fVar2 = param_1[1];
    fVar3 = param_1[2];
    *param_1 = *param_2;
    param_1[1] = param_2[1];
    param_1[2] = param_2[2];
    *param_2 = fVar1;
    param_2[1] = fVar2;
    param_2[2] = fVar3;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f030b7c) overlaps instruction at (ram,0x7f030b78)
// 

undefined4
proc_7F03081C(int param_1,float *param_2,undefined4 param_3,float *param_4,float *param_5,
             float *param_6,float param_7,float param_8,undefined4 param_9)

{
  longlong lVar1;
  float fVar2;
  float in_stack_0000001c;
  undefined4 uStack108;
  undefined4 uStack104;
  float fStack100;
  undefined4 uStack96;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  int iStack44;
  int iStack40;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  undefined4 uStack4;
  
  iStack40 = 0;
  iStack44 = 0;
  uStack96 = 0;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack108,&fStack100,&uStack104);
  uStack12 = 0;
  fStack16 = *param_4 - *param_2;
  fStack8 = param_4[2] - param_2[2];
  if ((fStack16 == 0.00000000) && (fStack8 == 0.00000000)) {
    uStack96 = 1;
  }
  else {
    fVar2 = sqrtf(fStack8 * fStack8 + fStack16 * fStack16);
    fStack16 = fStack16 * (1.00000000 / fVar2);
    fStack8 = fStack8 * (1.00000000 / fVar2);
    fStack20 = fStack16 * in_stack_0000001c * flt_80052014;
    fStack24 = fStack8 * in_stack_0000001c * flt_80052018;
    fStack28 = fStack16 * in_stack_0000001c * flt_8005201C;
    fStack32 = fStack8 * in_stack_0000001c * flt_80052020;
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    proc_7F0B1CC4();
    uStack4 = param_3;
    lVar1 = proc_7F0B0E24();
    if ((lVar1 == 0) || (lVar1 = proc_7F0B0E24(), lVar1 == 0)) {
      iStack40 = 1;
      proc_7F0B28B0(&fStack56,&fStack68);
      proc_7F03074C(&fStack56,&fStack68,&fStack16);
    }
    uStack4 = param_3;
    lVar1 = proc_7F0B0E24();
    if ((lVar1 == 0) || (lVar1 = proc_7F0B0E24(), lVar1 == 0)) {
      iStack44 = 1;
      proc_7F0B28B0(&fStack80,&fStack92);
      proc_7F03074C(&fStack80,&fStack92,&fStack16);
    }
    if ((iStack40 == 0) || (iStack44 == 0)) {
      if (iStack40 == 0) {
        if (iStack44 == 0) {
          uStack4 = param_3;
          lVar1 = proc_7F0B0E24();
          if ((lVar1 == 0) || (lVar1 = proc_7F0B18B8(), -1 < lVar1)) {
            proc_7F0B28B0(param_5,param_6);
            proc_7F03074C(param_5,param_6,&fStack16);
          }
          else {
            uStack96 = 1;
          }
        }
        else {
          *param_5 = fStack80;
          param_5[1] = fStack76;
          param_5[2] = fStack72;
          *param_6 = fStack92;
          param_6[1] = fStack88;
          param_6[2] = fStack84;
        }
      }
      else {
        *param_5 = fStack56;
        param_5[1] = fStack52;
        param_5[2] = fStack48;
        *param_6 = fStack68;
        param_6[1] = fStack64;
        param_6[2] = fStack60;
      }
    }
    else {
      proc_7F03074C(&fStack56,&fStack80,&fStack16);
      proc_7F03074C(&fStack68,&fStack92,&fStack16);
      *param_5 = fStack56;
      param_5[1] = fStack52;
      param_5[2] = fStack48;
      *param_6 = fStack92;
      param_6[1] = fStack88;
      param_6[2] = fStack84;
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  }
  return uStack96;
}



// WARNING: Instruction at (ram,0x7f0310dc) overlaps instruction at (ram,0x7f0310d8)
// 

undefined4
proc_7F030D70(int param_1,float *param_2,undefined4 param_3,float *param_4,float *param_5,
             float *param_6,float param_7,float param_8,undefined4 param_9)

{
  longlong lVar1;
  float fVar2;
  float in_stack_0000001c;
  undefined4 uStack116;
  undefined4 uStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  undefined4 uStack96;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  int iStack44;
  int iStack40;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  undefined4 uStack4;
  
  iStack40 = 0;
  iStack44 = 0;
  uStack96 = 0;
  proc_7F023160(*(int *)(param_1 + 0x18),&uStack116,&fStack108,&uStack112);
  uStack12 = 0;
  fStack16 = *param_4 - *param_2;
  fStack8 = param_4[2] - param_2[2];
  if ((fStack16 == 0.00000000) && (fStack8 == 0.00000000)) {
    uStack96 = 1;
  }
  else {
    fVar2 = sqrtf(fStack8 * fStack8 + fStack16 * fStack16);
    fStack16 = fStack16 * (1.00000000 / fVar2);
    fStack8 = fStack8 * (1.00000000 / fVar2);
    fStack20 = fStack16 * in_stack_0000001c * flt_80052024;
    fStack24 = fStack8 * in_stack_0000001c * flt_80052028;
    fStack28 = fStack16 * in_stack_0000001c * flt_8005202C;
    fStack32 = fStack8 * in_stack_0000001c * flt_80052030;
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,0);
    proc_7F0B1CC4();
    uStack4 = param_3;
    lVar1 = proc_7F0B0E24();
    if ((lVar1 == 0) || (lVar1 = proc_7F0B0E24(), lVar1 == 0)) {
      iStack40 = 1;
      proc_7F0B28B0(&fStack56,&fStack68);
      proc_7F03074C(&fStack56,&fStack68,&fStack16);
      fStack100 = DAT_8007ba00;
    }
    uStack4 = param_3;
    lVar1 = proc_7F0B0E24();
    if ((lVar1 == 0) || (lVar1 = proc_7F0B0E24(), lVar1 == 0)) {
      iStack44 = 1;
      proc_7F0B28B0(&fStack80,&fStack92);
      proc_7F03074C(&fStack80,&fStack92,&fStack16);
      fStack104 = DAT_8007ba00;
    }
    if ((iStack40 == 0) || (iStack44 == 0)) {
      if (iStack40 == 0) {
        if (iStack44 == 0) {
          uStack4 = param_3;
          lVar1 = proc_7F0B0E24();
          if ((lVar1 == 0) || (lVar1 = proc_7F0B18B8(), -1 < lVar1)) {
            proc_7F0B28B0(param_5,param_6);
            proc_7F03074C(param_5,param_6,&fStack16);
          }
          else {
            uStack96 = 1;
          }
        }
        else {
          *param_5 = fStack80;
          param_5[1] = fStack76;
          param_5[2] = fStack72;
          *param_6 = fStack92;
          param_6[1] = fStack88;
          param_6[2] = fStack84;
        }
      }
      else {
        *param_5 = fStack56;
        param_5[1] = fStack52;
        param_5[2] = fStack48;
        *param_6 = fStack68;
        param_6[1] = fStack64;
        param_6[2] = fStack60;
      }
    }
    else {
      if (fStack100 < fStack104) {
        *param_5 = fStack56;
        param_5[1] = fStack52;
        param_5[2] = fStack48;
        *param_6 = fStack68;
        param_6[1] = fStack64;
        param_6[2] = fStack60;
      }
      else {
        *param_5 = fStack80;
        param_5[1] = fStack76;
        param_5[2] = fStack72;
        *param_6 = fStack92;
        param_6[1] = fStack88;
        param_6[2] = fStack84;
      }
    }
    set_or_unset_GUARDdata_flag((GUARDdata *)param_1,1);
  }
  return uStack96;
}



ulonglong proc_7F03130C(int param_1,float *param_2,longlong param_3,float *param_4,float param_5,
                       int param_6,undefined4 *param_7,int param_8,float param_9,int param_10,
                       int param_11)

{
  int iVar2;
  ulonglong uVar1;
  float *pfVar3;
  float fVar4;
  float __x;
  float fVar5;
  float fVar6;
  float extraout_f12;
  float extraout_f14;
  undefined4 in_stack_00000024;
  int in_stack_00000028;
  float *pfStack56;
  float *pfStack52;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x18);
  pfStack56 = param_2;
  pfStack52 = param_4;
  if (param_3 != 0) {
    pfStack56 = param_4;
    pfStack52 = param_2;
  }
  fStack16 = *param_2 - *(float *)(iStack4 + 8);
  uStack12 = 0;
  fStack8 = param_2[2] - *(float *)(iStack4 + 0x10);
  fVar4 = sqrtf(fStack8 * fStack8 + fStack16 * fStack16);
  fVar5 = (float)param_6 * (1.00000000 / fVar4);
  fStack16 = fStack16 * fVar5;
  fStack8 = fStack8 * fVar5;
  __x = flt_80052034;
  if (fVar5 <= 1.00000000) {
    __x = proc_7F05ACB0((float)param_6 * (1.00000000 / fVar4));
  }
  if (((int)param_3 == 0) && (__x != 0.00000000)) {
    __x = flt_80052038 - __x;
  }
  fVar4 = cosf(__x);
  fVar5 = sinf(__x);
  fVar6 = -fVar4 * fStack16;
  fVar5 = fStack8 * fVar5;
  fVar4 = sinf(__x);
  __x = cosf(__x);
  pfVar3 = (float *)(iStack4 + 8);
  fStack28 = fVar5 + fVar6 + *param_2;
  fStack24 = param_2[1];
  fStack20 = (-fVar4 * fStack16 - fStack8 * __x) + param_2[2];
  iVar2 = proc_7F03081C(param_1,pfVar3,*(undefined4 *)(iStack4 + 0x14),&fStack28,pfStack52,pfStack56
                        ,extraout_f12,extraout_f14,param_11);
  if (iVar2 == 0) {
    uVar1 = 0;
  }
  else {
    if ((param_7 == NULL) ||
       (iVar2 = proc_7F0304AC(param_1,pfVar3,*(int *)(iStack4 + 0x14),&fStack28,
                              (undefined4 *)param_8,0,in_stack_00000024), iVar2 != 0)) {
      if (in_stack_00000028 == 0) {
        *(undefined *)(param_10 + 2) = 1;
        *(float *)(param_10 + 4) = fStack28;
        *(float *)(param_10 + 8) = fStack24;
        *(float *)(param_10 + 0xc) = fStack20;
        uVar1 = 1;
      }
      else {
        *(undefined *)(param_10 + 3) = 1;
        *(float *)(param_10 + 0x2c) = fStack28;
        *(float *)(param_10 + 0x30) = fStack24;
        *(float *)(param_10 + 0x34) = fStack20;
        uVar1 = 1;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  return uVar1;
}



void proc_7F0315A4(int param_1,float *param_2,undefined8 param_3,char *param_4)

{
  int iVar2;
  ulonglong uVar1;
  char *pcVar3;
  int iVar4;
  char cVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float fVar11;
  float extraout_f12_09;
  float extraout_f12_10;
  float in_f14;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  float extraout_f14_07;
  float extraout_f14_08;
  float extraout_f14_09;
  float extraout_f14_10;
  float extraout_f14_11;
  float fVar12;
  int iStack32;
  float afStack28 [2];
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  
  fVar10 = flt_80052040;
  fVar9 = flt_8005203C;
  iVar4 = *(int *)(param_1 + 0x18);
  iStack32 = 0;
  do {
    cVar5 = *param_4;
    if (cVar5 == '\0') {
      fStack16 = *param_2;
LAB_7f03164c:
      fStack12 = param_2[1];
      fStack8 = param_2[2];
      iVar2 = proc_7F03081C(param_1,(float *)(iVar4 + 8),*(undefined4 *)(iVar4 + 0x14),&fStack16,
                            (float *)(param_4 + 0x10),(float *)(param_4 + 0x1c),in_f12,in_f14,
                            -*(float *)(param_1 + 0x24));
      if (iVar2 == 0) {
        if (*param_4 == '\0') {
          *param_4 = '\x01';
          param_4[1] = '\0';
          in_f12 = extraout_f12;
          in_f14 = extraout_f14;
        }
        else {
          in_f12 = extraout_f12;
          in_f14 = extraout_f14;
          if (*param_4 == '\x02') {
            *param_4 = '\x03';
            param_4[1] = '\0';
            in_f12 = extraout_f12;
            in_f14 = extraout_f14;
          }
        }
      }
      else {
        param_4[2] = '\x01';
        *(float *)(param_4 + 4) = fStack16;
        *(float *)(param_4 + 8) = fStack12;
        *param_4 = '\x04';
        *(float *)(param_4 + 0xc) = fStack8;
        in_f12 = extraout_f12;
        in_f14 = extraout_f14;
      }
    }
    else {
      if (cVar5 == '\x02') {
        fStack16 = *param_2;
        goto LAB_7f03164c;
      }
      if (cVar5 == '\x01') {
        fVar11 = *(float *)(param_1 + 0x24) * flt_80052044 * flt_80052048;
        uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x10),1,afStack28,in_f12,(int)fVar11,
                              (undefined4 *)((int)&rgba + 1),(int)param_2,in_f14,param_4,0);
        if (uVar1 == 0) {
          uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x1c),0,afStack28,extraout_f12_00,
                                (int)fVar11,(undefined4 *)((int)&rgba + 1),(int)param_2,
                                extraout_f14_00,param_4,0);
          if (uVar1 == 0) {
            param_4[1] = param_4[1] + '\x01';
            in_f12 = extraout_f12_01;
            in_f14 = extraout_f14_01;
            if ('\x05' < param_4[1]) {
              *param_4 = '\x02';
              in_f12 = extraout_f12_01;
              in_f14 = extraout_f14_01;
            }
          }
          else {
            *param_4 = '\x04';
            in_f12 = extraout_f12_01;
            in_f14 = extraout_f14_01;
          }
        }
        else {
          *param_4 = '\x04';
          in_f12 = extraout_f12_00;
          in_f14 = extraout_f14_00;
        }
      }
      else {
        if (cVar5 == '\x03') {
          fVar11 = *(float *)(param_1 + 0x24) * flt_8005204C * flt_80052050;
          uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x10),1,afStack28,in_f12,(int)fVar11,
                                NULL,0,in_f14,param_4,0);
          if (uVar1 == 0) {
            uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x1c),0,afStack28,extraout_f12_02,
                                  (int)fVar11,NULL,0,extraout_f14_02,param_4,0);
            if (uVar1 == 0) {
              param_4[1] = param_4[1] + '\x01';
              in_f12 = extraout_f12_03;
              in_f14 = extraout_f14_03;
              if ('\x05' < param_4[1]) {
                param_4[2] = '\0';
                param_4[3] = param_4[2];
                fVar11 = *param_2;
                *(float *)(param_4 + 4) = fVar11;
                *(float *)(param_4 + 0x2c) = fVar11;
                fVar11 = param_2[1];
                *(float *)(param_4 + 8) = fVar11;
                *(float *)(param_4 + 0x30) = fVar11;
                fVar11 = param_2[2];
                *param_4 = '\0';
                *(float *)(param_4 + 0xc) = fVar11;
                *(float *)(param_4 + 0x34) = fVar11;
                in_f12 = extraout_f12_03;
                in_f14 = extraout_f14_03;
              }
            }
            else {
              *param_4 = '\x04';
              in_f12 = extraout_f12_03;
              in_f14 = extraout_f14_03;
            }
          }
          else {
            *param_4 = '\x04';
            in_f12 = extraout_f12_02;
            in_f14 = extraout_f14_02;
          }
        }
        else {
          if (cVar5 == '\x04') {
            iVar2 = proc_7F030D70(param_1,(float *)(iVar4 + 8),*(undefined4 *)(iVar4 + 0x14),
                                  (float *)(param_4 + 4),(float *)(param_4 + 0x10),
                                  (float *)(param_4 + 0x1c),in_f12,in_f14,
                                  -*(float *)(param_1 + 0x24));
            if (iVar2 == 0) {
              *param_4 = '\x05';
              param_4[1] = '\0';
              in_f12 = extraout_f12_04;
              in_f14 = extraout_f14_04;
            }
            else {
              param_4[3] = '\x01';
              *param_4 = '\0';
              *(undefined4 *)(param_4 + 0x2c) = *(undefined4 *)(param_4 + 4);
              *(undefined4 *)(param_4 + 0x30) = *(undefined4 *)(param_4 + 8);
              *(undefined4 *)(param_4 + 0x34) = *(undefined4 *)(param_4 + 0xc);
              in_f12 = extraout_f12_04;
              in_f14 = extraout_f14_04;
            }
          }
          else {
            if (cVar5 == '\x05') {
              fVar12 = *(float *)(param_1 + 0x24) * flt_80052054 * flt_80052058;
              fVar11 = convert_angle_using_inverse
                                 ((f32)(*(float *)(param_4 + 4) - *(float *)(iVar4 + 8)),
                                  (f32)(*(float *)(param_4 + 0xc) - *(float *)(iVar4 + 0x10)));
              fVar6 = convert_angle_using_inverse
                                ((f32)(*(float *)(param_4 + 0x10) - *(float *)(iVar4 + 8)),
                                 (f32)(*(float *)(param_4 + 0x18) - *(float *)(iVar4 + 0x10)));
              fVar6 = fVar11 - fVar6;
              fVar7 = convert_angle_using_inverse
                                ((f32)(*(float *)(param_4 + 0x1c) - *(float *)(iVar4 + 8)),
                                 (f32)(*(float *)(param_4 + 0x24) - *(float *)(iVar4 + 0x10)));
              fVar7 = fVar11 - fVar7;
              if (fVar6 < 0.00000000) {
                fVar6 = fVar6 + fVar10;
              }
              if (fVar9 <= fVar6) {
                fVar6 = fVar6 - fVar10;
              }
              if (fVar6 < 0.00000000) {
                fVar6 = -fVar6;
              }
              fVar8 = fVar7;
              if (fVar7 < 0.00000000) {
                fVar8 = fVar7 + fVar10;
              }
              if (fVar9 <= fVar8) {
                fVar8 = fVar8 - fVar10;
              }
              if (fVar8 < 0.00000000) {
                fVar8 = -fVar8;
              }
              if (fVar6 < fVar8) {
                fVar6 = fVar12 * flt_8005205C;
                uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x10),1,afStack28,fVar7,
                                      (int)fVar12,NULL,0,extraout_f14_05,param_4,(int)fVar6);
                if (uVar1 != 0) {
                  *param_4 = '\0';
                  in_f12 = extraout_f12_05;
                  in_f14 = extraout_f14_06;
                  break;
                }
                fVar7 = convert_angle_using_inverse
                                  ((f32)(*(float *)(param_4 + 0x10) - *(float *)(iVar4 + 8)),
                                   (f32)(*(float *)(param_4 + 0x18) - *(float *)(iVar4 + 0x10)));
                fVar7 = fVar11 - fVar7;
                fVar8 = convert_angle_using_inverse
                                  ((f32)(afStack28[0] - *(float *)(iVar4 + 8)),
                                   (f32)(fStack20 - *(float *)(iVar4 + 0x10)));
                in_f12 = fVar11 - fVar8;
                if (fVar7 < 0.00000000) {
                  fVar7 = fVar7 + fVar10;
                }
                if (fVar9 <= fVar7) {
                  fVar7 = fVar7 - fVar10;
                }
                if (fVar7 < 0.00000000) {
                  fVar7 = -fVar7;
                }
                fVar11 = in_f12;
                if (in_f12 < 0.00000000) {
                  fVar11 = in_f12 + fVar10;
                }
                if (fVar9 <= fVar11) {
                  fVar11 = fVar11 - fVar10;
                }
                if (fVar11 < 0.00000000) {
                  fVar11 = -fVar11;
                }
                if (fVar11 < fVar7) {
                  uVar1 = proc_7F03130C(param_1,afStack28,0,afStack28,in_f12,(int)fVar12,NULL,0,
                                        extraout_f14_07,param_4,(int)fVar6);
                  if (uVar1 != 0) {
                    *param_4 = '\0';
                    in_f12 = extraout_f12_06;
                    in_f14 = extraout_f14_08;
                    break;
                  }
                  cVar5 = param_4[1];
                  in_f12 = extraout_f12_06;
                  in_f14 = extraout_f14_08;
                }
                else {
                  cVar5 = param_4[1];
                  in_f14 = extraout_f14_07;
                }
              }
              else {
                fVar6 = fVar12 * flt_80052060;
                uVar1 = proc_7F03130C(param_1,(float *)(param_4 + 0x1c),0,afStack28,fVar7,
                                      (int)fVar12,NULL,0,extraout_f14_05,param_4,(int)fVar6);
                if (uVar1 != 0) {
                  *param_4 = '\0';
                  in_f12 = extraout_f12_07;
                  in_f14 = extraout_f14_09;
                  break;
                }
                fVar7 = convert_angle_using_inverse
                                  ((f32)(*(float *)(param_4 + 0x1c) - *(float *)(iVar4 + 8)),
                                   (f32)(*(float *)(param_4 + 0x24) - *(float *)(iVar4 + 0x10)));
                fVar7 = fVar11 - fVar7;
                fVar8 = convert_angle_using_inverse
                                  ((f32)(afStack28[0] - *(float *)(iVar4 + 8)),
                                   (f32)(fStack20 - *(float *)(iVar4 + 0x10)));
                in_f12 = fVar11 - fVar8;
                if (fVar7 < 0.00000000) {
                  fVar7 = fVar7 + fVar10;
                }
                if (fVar9 <= fVar7) {
                  fVar7 = fVar7 - fVar10;
                }
                if (fVar7 < 0.00000000) {
                  fVar7 = -fVar7;
                }
                fVar11 = in_f12;
                if (in_f12 < 0.00000000) {
                  fVar11 = in_f12 + fVar10;
                }
                if (fVar9 <= fVar11) {
                  fVar11 = fVar11 - fVar10;
                }
                if (fVar11 < 0.00000000) {
                  fVar11 = -fVar11;
                }
                if (fVar11 < fVar7) {
                  uVar1 = proc_7F03130C(param_1,afStack28,1,afStack28,in_f12,(int)fVar12,NULL,0,
                                        extraout_f14_10,param_4,(int)fVar6);
                  if (uVar1 != 0) {
                    *param_4 = '\0';
                    in_f12 = extraout_f12_08;
                    in_f14 = extraout_f14_11;
                    break;
                  }
                  cVar5 = param_4[1];
                  in_f12 = extraout_f12_08;
                  in_f14 = extraout_f14_11;
                }
                else {
                  cVar5 = param_4[1];
                  in_f14 = extraout_f14_10;
                }
              }
              param_4[1] = cVar5 + '\x01';
              if ('\x05' < param_4[1]) {
                param_4[3] = '\0';
                *param_4 = '\0';
              }
            }
          }
        }
      }
    }
    iStack32 += 1;
  } while (iStack32 != 1);
  if (param_4[3] == '\0') {
    *(undefined4 *)(param_4 + 0x2c) = *(undefined4 *)(param_4 + 4);
    *(undefined4 *)(param_4 + 0x30) = *(undefined4 *)(param_4 + 8);
    *(undefined4 *)(param_4 + 0x34) = *(undefined4 *)(param_4 + 0xc);
    iVar2 = *(int *)(param_4 + 0x28);
  }
  else {
    iVar2 = *(int *)(param_4 + 0x28);
  }
  if (iVar2 % 10 == 0) {
    pcVar3 = proc_7F0B1410(*(int *)(iVar4 + 0x14),in_f12,in_f14,*(float *)(iVar4 + 8),
                           *(float *)(iVar4 + 0x10),*(uint *)(param_4 + 0x2c));
    if (pcVar3 != NULL) {
      if (*(int *)(*(int *)(pcVar3 + 4) + 0xc) << 2 < 0) {
        pcVar3 = NULL;
      }
      else {
        fVar9 = *(float *)(pcVar3 + 8) - *(float *)(iVar4 + 8);
        fVar10 = *(float *)(pcVar3 + 0xc) - *(float *)(iVar4 + 0xc);
        fVar11 = *(float *)(pcVar3 + 0x10) - *(float *)(iVar4 + 0x10);
        if (fVar9 * fVar9 + fVar10 * fVar10 + fVar11 * fVar11 < flt_80052064) {
          proc_7F0281F4(param_1);
          proc_7F055B78(iVar4,*(int *)(pcVar3 + 4));
          proc_7F054988(*(int *)(pcVar3 + 4),1);
          if ((((*(ushort *)(param_1 + 0x12) & 0x10) == 0) &&
              (iVar4 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)),
              iVar4 != ptr_animation_table + 0x8194)) &&
             (iVar4 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), iVar4 != ptr_animation_table + 0x1c))
          {
            proc_7F023948((GUARDdata *)param_1,extraout_f12_09);
            *(undefined4 *)(param_1 + 0xcc) = global_timer;
          }
        }
        else {
          pcVar3 = NULL;
        }
      }
    }
    if ((pcVar3 == NULL) || ((*(ushort *)(param_1 + 0x12) & 0x10) != 0)) {
      iVar4 = proc_7F06F5AC(*(int *)(param_1 + 0x1c));
      if ((iVar4 == ptr_animation_table + 0x8194) ||
         (iVar4 = proc_7F06F5AC(*(int *)(param_1 + 0x1c)), iVar4 == ptr_animation_table + 0x1c)) {
        if (*(char *)(param_1 + 7) == '\x0e') {
          proc_7F028FAC(param_1);
        }
        else {
          proc_7F028DA0(param_1);
        }
      }
      if (pcVar3 == NULL) {
        *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xffef;
        cVar5 = *(char *)(param_1 + 7);
      }
      else {
        cVar5 = *(char *)(param_1 + 7);
      }
    }
    else {
      cVar5 = *(char *)(param_1 + 7);
    }
  }
  else {
    cVar5 = *(char *)(param_1 + 7);
  }
  if (cVar5 == '\x0e') {
    proc_7F02F690(param_1,(float *)(param_4 + 0x2c),0,(float *)(param_1 + 0x7c));
  }
  else {
    proc_7F02F690(param_1,(float *)(param_4 + 0x2c),(uint)*(byte *)(param_1 + 0x59),
                  (float *)(param_1 + 0xa0));
    if (*(char *)(param_1 + 0x59) == '\x02') {
      if (*(float *)(param_1 + 0xa0) == 0.00000000) {
        if (*(int *)(param_1 + 0x14) << 0xc < 0) {
          proc_7F06FE4C(*(int *)(param_1 + 0x1c),0x3f266666,extraout_f12_10);
        }
        else {
          proc_7F06FE4C(*(int *)(param_1 + 0x1c),0x3f000000,extraout_f12_10);
        }
      }
      else {
        proc_7F06FE4C(*(int *)(param_1 + 0x1c),0x3e800000,extraout_f12_10);
      }
    }
    else {
      if (*(char *)(param_1 + 0x59) == '\x01') {
        if (*(float *)(param_1 + 0xa0) == 0.00000000) {
          proc_7F06FE4C(*(int *)(param_1 + 0x1c),0x3f000000,extraout_f12_10);
        }
        else {
          proc_7F06FE4C(*(int *)(param_1 + 0x1c),0x3ecccccd,extraout_f12_10);
        }
      }
    }
  }
  return;
}



void proc_7F032088(void)

{
  int *piVar1;
  bool bVar2;
  longlong in_v0;
  longlong lVar3;
  int iVar4;
  int in_a0_lo;
  uint uVar5;
  float *pfVar6;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fVar7;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float *pfStack92;
  int iStack52;
  float afStack48 [3];
  int iStack36;
  float afStack32 [3];
  int iStack20;
  int iStack16;
  float fStack12;
  float *pfStack8;
  
  iStack16 = *(int *)(in_a0_lo + 0x18);
  iStack20 = 0;
  *(int *)(in_a0_lo + 0x84) = *(int *)(in_a0_lo + 0x84) + 1;
  *(int *)(in_a0_lo + 200) = global_timer;
  if (*(int *)(in_a0_lo + 0xcc) < global_timer + -0x3c) {
    in_v0 = proc_7F028DDC(in_a0_lo,(float *)(in_a0_lo + 0x2c),*(undefined4 *)(in_a0_lo + 0x38),
                          *(char *)(in_a0_lo + 0x59));
  }
  proc_7F0281FC(in_a0_lo);
  fVar7 = extraout_f12;
  if ((*(char *)(in_a0_lo + 0x5c) != '\x06') &&
     (fVar7 = extraout_f12, *(int *)(in_a0_lo + 0x9c) + 0xb4 < global_timer)) {
    proc_7F027F20(in_a0_lo,afStack32,&iStack36);
    proc_7F027DB0(in_a0_lo,afStack32,iStack36);
    fVar7 = extraout_f12_00;
    if (in_v0 != 0) {
      iStack20 = 1;
      proc_7F027E90(in_a0_lo,(undefined *)(in_a0_lo + 0x5c),afStack32);
      fVar7 = extraout_f12_01;
    }
  }
  iVar4 = iStack16;
  if (9 < (int)setting_007_5) {
    proc_7F023E48(in_a0_lo);
    return;
  }
  if (*(char *)(in_a0_lo + 0x5c) == '\x06') {
    proc_7F027F20(in_a0_lo,afStack48,&iStack52);
    if ((iStack20 == 0) &&
       (((*(byte *)(iStack16 + 1) & 2) != 0 ||
        (proc_7F027DB0(in_a0_lo,afStack48,iStack52), in_v0 == 0)))) {
      proc_7F02828C(in_a0_lo);
      *(int *)(in_a0_lo + 0x9c) = global_timer;
      return;
    }
    pfVar6 = (float *)proc_7F027FA8(in_a0_lo);
    proc_7F028600(in_a0_lo,(undefined *)(in_a0_lo + 0x5c),extraout_f12_02,pfVar6,(int)afStack48);
    return;
  }
  piVar1 = *(int **)(in_a0_lo + (uint)*(byte *)(in_a0_lo + 0x58) * 4 + 0x40);
  if (piVar1 == NULL) {
    lVar3 = proc_7F02FD50((float *)(in_a0_lo + 0xbc),(float *)(iStack16 + 8),
                          (float *)(in_a0_lo + 0x2c),fVar7);
    bVar2 = false;
    if (lVar3 != 0) {
      proc_7F023E48(in_a0_lo);
      return;
    }
  }
  else {
    lVar3 = proc_7F02FD50((float *)(in_a0_lo + 0xbc),(float *)(iStack16 + 8),
                          (float *)(ptr_0xxxpresets + *piVar1 * 0x2c),fVar7);
    bVar2 = false;
    if (lVar3 != 0) {
      bVar2 = true;
    }
  }
  pfStack92 = (float *)(iVar4 + 8);
  if (bVar2) {
    proc_7F0282E0(in_a0_lo);
  }
  if (*(int *)(in_a0_lo + 0x84) % 10 == 5) {
    iVar4 = in_a0_lo + (uint)*(byte *)(in_a0_lo + 0x58) * 4;
    if (*(int *)(in_a0_lo + (uint)*(byte *)(in_a0_lo + 0x58) * 4 + 0x40) == 0) {
      iVar4 = *(int *)(in_a0_lo + 0x84);
    }
    else {
      if (*(int *)(iVar4 + 0x44) == 0) {
        iVar4 = *(int *)(in_a0_lo + 0x84);
      }
      else {
        piVar1 = *(int **)(iVar4 + 0x48);
        pfStack8 = (float *)(in_a0_lo + 0x2c);
        if (piVar1 == NULL) {
          fStack12 = *(float *)(in_a0_lo + 0x38);
        }
        else {
          pfStack8 = (float *)(ptr_0xxxpresets + *piVar1 * 0x2c);
          fStack12 = pfStack8[10];
        }
        iVar4 = proc_7F030128(in_a0_lo,pfStack92,*(int *)(iStack16 + 0x14),pfStack8,(int)fStack12,
                              0x10);
        if (iVar4 != 0) {
          iVar4 = proc_7F0301FC(in_a0_lo,pfStack92,*(undefined4 *)(iStack16 + 0x14),pfStack8,
                                extraout_f12_03,*(float *)(in_a0_lo + 0x24) * flt_80052068);
          if (iVar4 == 0) {
            iVar4 = *(int *)(in_a0_lo + 0x84);
            goto LAB_7f0323e0;
          }
          proc_7F0282E0(in_a0_lo);
          proc_7F0282E0(in_a0_lo);
        }
        iVar4 = *(int *)(in_a0_lo + 0x84);
      }
    }
  }
  else {
    iVar4 = *(int *)(in_a0_lo + 0x84);
  }
LAB_7f0323e0:
  if (iVar4 % 10 == 0) {
    if (*(int *)(in_a0_lo + (uint)*(byte *)(in_a0_lo + 0x58) * 4 + 0x40) != 0) {
      piVar1 = *(int **)(in_a0_lo + (uint)*(byte *)(in_a0_lo + 0x58) * 4 + 0x44);
      pfStack8 = (float *)(in_a0_lo + 0x2c);
      if (piVar1 == NULL) {
        fStack12 = *(float *)(in_a0_lo + 0x38);
      }
      else {
        pfStack8 = (float *)(ptr_0xxxpresets + *piVar1 * 0x2c);
        fStack12 = pfStack8[10];
      }
      iVar4 = proc_7F030128(in_a0_lo,pfStack92,*(int *)(iStack16 + 0x14),pfStack8,(int)fStack12,0x10
                           );
      if (iVar4 != 0) {
        iVar4 = proc_7F0301FC(in_a0_lo,pfStack92,*(undefined4 *)(iStack16 + 0x14),pfStack8,
                              extraout_f12_04,*(float *)(in_a0_lo + 0x24) * flt_8005206C);
        if (iVar4 == 0) {
          uVar5 = (uint)*(byte *)(in_a0_lo + 0x58);
          goto LAB_7f0324d4;
        }
        proc_7F0282E0(in_a0_lo);
      }
    }
    uVar5 = (uint)*(byte *)(in_a0_lo + 0x58);
  }
  else {
    uVar5 = (uint)*(byte *)(in_a0_lo + 0x58);
  }
LAB_7f0324d4:
  pfStack8 = (float *)(in_a0_lo + 0x2c);
  piVar1 = *(int **)(in_a0_lo + uVar5 * 4 + 0x40);
  if (piVar1 == NULL) {
    fVar7 = *(float *)(in_a0_lo + 0x38);
  }
  else {
    pfStack8 = (float *)(ptr_0xxxpresets + *piVar1 * 0x2c);
    fVar7 = pfStack8[10];
  }
  proc_7F0315A4(in_a0_lo,pfStack8,(longlong)(int)fVar7,(char *)(in_a0_lo + 0x5c));
  return;
}



// WARNING: Instruction at (ram,0x7f03261c) overlaps instruction at (ram,0x7f032618)
// 

void proc_7F032548(int param_1)

{
  int iVar1;
  bool bVar2;
  longlong lVar3;
  char cVar4;
  float *pfVar5;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float fVar6;
  
  iVar1 = *(int *)(param_1 + 0x18);
  pfVar5 = (float *)proc_7F028474(param_1);
  lVar3 = (longlong)(int)pfVar5;
  bVar2 = false;
  *(int *)(param_1 + 0x60) = *(int *)(param_1 + 0x60) + 1;
  *(int *)(param_1 + 200) = global_timer;
  fVar6 = extraout_f12;
  if (*(char *)(param_1 + 0x38) != '\x06') {
    if (global_timer <= *(int *)(param_1 + 0x78) + 0xb4) {
      cVar4 = *(char *)(param_1 + 0x38);
      fVar6 = extraout_f12;
      goto LAB_7f0325dc;
    }
    proc_7F027E70(param_1,pfVar5);
    fVar6 = extraout_f12_00;
    if (lVar3 != 0) {
      bVar2 = true;
      proc_7F027E90(param_1,(undefined *)(param_1 + 0x38),pfVar5);
      fVar6 = extraout_f12_01;
    }
  }
  cVar4 = *(char *)(param_1 + 0x38);
LAB_7f0325dc:
  if (cVar4 == '\x06') {
    if ((bVar2) ||
       (((*(byte *)(iVar1 + 1) & 2) == 0 &&
        (proc_7F027E70(param_1,pfVar5), fVar6 = extraout_f12_02, lVar3 != 0)))) {
      proc_7F028600(param_1,(undefined *)(param_1 + 0x38),fVar6,dword_80030984,(int)pfVar5);
    }
    else {
      *(int *)(param_1 + 0x78) = global_timer;
      proc_7F028494(param_1);
    }
  }
  else {
    lVar3 = proc_7F02FD50((float *)(param_1 + 0xbc),(float *)(iVar1 + 8),pfVar5,fVar6);
    if (lVar3 != 0) {
      proc_7F0284DC(param_1);
      pfVar5 = (float *)proc_7F028474(param_1);
    }
    proc_7F0315A4(param_1,pfVar5,(longlong)(int)pfVar5[10],(char *)(param_1 + 0x38));
  }
  return;
}



void proc_7F0326BC(int param_1)

{
  char cVar1;
  ushort uVar2;
  char cVar3;
  uint uVar4;
  float in_f12;
  
  if (clock_timer < 1) {
    return;
  }
  if (*(char *)(param_1 + 7) == '\0') {
    *(uint *)(param_1 + 0x14) = *(uint *)(param_1 + 0x14) | 1;
    proc_7F023A94((GUARDdata *)param_1,in_f12);
    *(undefined *)(param_1 + 8) = 0;
    uVar2 = *(ushort *)(param_1 + 0x12);
  }
  else {
    uVar2 = *(ushort *)(param_1 + 0x12);
  }
  cVar3 = (char)clock_timer;
  if ((uVar2 & 0x40) == 0) {
    cVar1 = *(char *)(param_1 + 8);
  }
  else {
    *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + clock_timer;
    cVar3 = (char)clock_timer;
    cVar1 = *(char *)(param_1 + 8);
  }
  *(char *)(param_1 + 8) = cVar1 - cVar3;
  if ((-1 < *(char *)(param_1 + 8)) && (-1 < *(int *)(param_1 + 0x14) << 0xd)) {
    return;
  }
  *(undefined *)(param_1 + 8) = 0;
  parse_handle_actionblocks();
  if (false) goto switchD_7f032780_caseD_11;
  switch(*(undefined *)(param_1 + 7)) {
  case 1:
    proc_7F02AD98();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 2:
    proc_7F02B4E0(param_1);
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 3:
    proc_7F02B4E8();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 4:
    proc_7F02B9A4();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 5:
    proc_7F02B774(param_1);
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 6:
    proc_7F02BC80();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 7:
    proc_7F02BD20();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 8:
    proc_7F02EBFC();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 9:
    proc_7F02F888();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 10:
    proc_7F02EEE0();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0xb:
    proc_7F02BDA4();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0xc:
    proc_7F02BE00();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0xd:
    proc_7F02FE78();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0xe:
    proc_7F032548(param_1);
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0xf:
    proc_7F032088();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x10:
    proc_7F02B638(param_1);
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x12:
    proc_7F02BF24();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x13:
    proc_7F02BEA8();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x14:
    proc_7F02F3F8();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x16:
    proc_7F02BE58();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x17:
    proc_7F02F5A4();
    uVar4 = *(uint *)(param_1 + 0x14);
    break;
  case 0x18:
    proc_7F02F688();
  default:
switchD_7f032780_caseD_11:
    uVar4 = *(uint *)(param_1 + 0x14);
  }
  *(uint *)(param_1 + 0x14) = uVar4 & 0xfffffffb;
  *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) & 0xfdfd;
  *(undefined2 *)(param_1 + 0x118) = 0xffff;
  *(undefined2 *)(param_1 + 0x11a) = 0xffff;
  return;
}



// WARNING: Instruction at (ram,0x7f032a0c) overlaps instruction at (ram,0x7f032a08)
// 

void proc_7F03291C(void)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  GUARDdata *pGVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar8;
  int iVar9;
  
  uVar1 = get_numguards();
  iVar2 = 0;
  iVar9 = 0;
  if (0 < objectiveregisters3) {
    do {
      proc_7F0326BC(iVar9 + objectiveregisters2);
      iVar2 += 1;
      iVar9 += 0x1dc;
    } while (iVar2 < objectiveregisters3);
  }
  uVar3 = 0;
  setting_007_5 = 0.00000000;
  if (0 < (int)uVar1) {
    pGVar4 = ptr_guard_data;
    if ((uVar1 & 3) == 0) {
      iVar2 = 0;
    }
    else {
      do {
        uVar3 += 1;
        if (((pGVar4->MODELdata_pointer != 0) && (0 < pGVar4->last_bond_detection_time)) &&
           (global_timer - pGVar4->last_bond_detection_time < 0x78)) {
          setting_007_5 = (f32)((int)setting_007_5 + 1);
        }
        pGVar4 = pGVar4 + 1;
      } while ((uVar1 & 3) != uVar3);
      iVar2 = uVar3 * 0x10;
      if (uVar3 == uVar1) {
        return;
      }
    }
    iVar2 = (iVar2 * 8 + uVar3 * -9) * 4;
    pcVar5 = &ptr_guard_data->guardID_1 + iVar2;
    pcVar8 = pcVar5 + 0x594;
    pcVar6 = pcVar5 + 0x1dc;
    pcVar7 = pcVar5 + 0x3b8;
    do {
      iVar2 += 0x770;
      if (*(int *)(pcVar5 + 0x1c) == 0) {
        iVar9 = *(int *)(pcVar6 + 0x1c);
      }
      else {
        if (*(int *)(pcVar5 + 0xd4) < 1) {
          iVar9 = *(int *)(pcVar6 + 0x1c);
        }
        else {
          if (global_timer - *(int *)(pcVar5 + 0xd4) < 0x78) {
            setting_007_5 = (f32)((int)setting_007_5 + 1);
            iVar9 = *(int *)(pcVar6 + 0x1c);
          }
          else {
            iVar9 = *(int *)(pcVar6 + 0x1c);
          }
        }
      }
      pcVar5 = pcVar5 + 0x770;
      if (iVar9 == 0) {
LAB_7f032ad0:
        iVar9 = *(int *)(pcVar7 + 0x1c);
      }
      else {
        if (*(int *)(pcVar6 + 0xd4) < 1) {
          iVar9 = *(int *)(pcVar7 + 0x1c);
        }
        else {
          if (global_timer - *(int *)(pcVar6 + 0xd4) < 0x78) {
            setting_007_5 = (f32)((int)setting_007_5 + 1);
            goto LAB_7f032ad0;
          }
          iVar9 = *(int *)(pcVar7 + 0x1c);
        }
      }
      if (iVar9 == 0) {
        iVar9 = *(int *)(pcVar8 + 0x1c);
      }
      else {
        if (*(int *)(pcVar7 + 0xd4) < 1) {
          iVar9 = *(int *)(pcVar8 + 0x1c);
        }
        else {
          if (global_timer - *(int *)(pcVar7 + 0xd4) < 0x78) {
            setting_007_5 = (f32)((int)setting_007_5 + 1);
            iVar9 = *(int *)(pcVar8 + 0x1c);
          }
          else {
            iVar9 = *(int *)(pcVar8 + 0x1c);
          }
        }
      }
      if (((iVar9 != 0) && (0 < *(int *)(pcVar8 + 0xd4))) &&
         (global_timer - *(int *)(pcVar8 + 0xd4) < 0x78)) {
        setting_007_5 = (f32)((int)setting_007_5 + 1);
      }
      pcVar8 = pcVar8 + 0x770;
      pcVar6 = pcVar6 + 0x770;
      pcVar7 = pcVar7 + 0x770;
    } while (iVar2 != uVar1 * 0x1dc);
  }
  return;
}



undefined8 proc_7F032B68(int param_1)

{
  if ((0 < *(int *)(param_1 + 0xd4)) && (global_timer - *(int *)(param_1 + 0xd4) < 600)) {
    return 1;
  }
  return 0;
}



undefined8 proc_7F032BA0(int param_1)

{
  if ((0 < *(int *)(param_1 + 0xf0)) && (global_timer - *(int *)(param_1 + 0xf0) < 600)) {
    return 1;
  }
  return 0;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F032BD8(void)

{
  int in_a0_lo;
  float *in_a1_lo;
  undefined4 in_a2_lo;
  undefined4 in_a3_lo;
  float in_f0;
  float fVar1;
  float fVar2;
  
  getsubroty(*(int *)(in_a0_lo + 0x1c),(uint)in_a1_lo,in_a2_lo,in_a3_lo);
  fVar1 = convert_angle_using_inverse
                    ((f32)(*in_a1_lo - *(float *)(*(int *)(in_a0_lo + 0x18) + 8)),
                     (f32)(in_a1_lo[2] - *(float *)(*(int *)(in_a0_lo + 0x18) + 0x10)));
  fVar2 = fVar1 - in_f0;
  if (fVar1 < in_f0) {
    fVar2 = fVar2 + flt_800520D0;
  }
  return fVar2;
}



void proc_7F032C4C(undefined4 param_1)

{
  get_curplayer_positiondata();
  proc_7F032BD8();
  return;
}



int proc_7F032C78(short *param_1,ulonglong param_2,longlong param_3,undefined4 *param_4)

{
  short *psVar1;
  short sVar3;
  int iVar2;
  undefined *puVar4;
  
  if ((param_2 & 4) == 0) {
    if ((param_2 & 8) == 0) {
      iVar2 = get_curplayer_positiondata();
      puVar4 = (undefined *)(iVar2 + 8);
      *param_4 = *(undefined4 *)(iVar2 + 0x14);
    }
    else {
      sVar3 = proc_7F032F94((int)param_1,(short)param_3);
      if (sVar3 < 10000) {
        puVar4 = ptr_0xxxpresets + ((int)sVar3 * 0xc - (int)sVar3) * 4;
      }
      else {
        puVar4 = ptr_2xxxpresets + (int)sVar3 * 0x44 + -680000;
      }
      *param_4 = *(undefined4 *)(puVar4 + 0x28);
    }
  }
  else {
    psVar1 = (short *)proc_7F033040(param_1,param_3);
    if ((psVar1 == NULL) || (*(int *)(psVar1 + 0xc) == 0)) {
      iVar2 = *(int *)(param_1 + 0xc);
    }
    else {
      iVar2 = *(int *)(param_1 + 0xc);
      param_1 = psVar1;
    }
    *param_4 = *(undefined4 *)(iVar2 + 0x14);
    puVar4 = (undefined *)(*(int *)(param_1 + 0xc) + 8);
  }
  return (int)puVar4;
}



float proc_7F032D70(int param_1)

{
  int iVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar3 = get_curplay_horizontal_rotation_in_degrees();
  iVar1 = *(int *)(param_1 + 0x18);
  iVar2 = get_curplayer_positiondata();
  fVar4 = convert_angle_using_inverse
                    ((f32)(*(float *)(iVar1 + 8) - *(float *)(iVar2 + 8)),
                     (f32)(*(float *)(iVar1 + 0x10) - *(float *)(iVar2 + 0x10)));
  fVar5 = fVar4 - fVar3;
  if (fVar4 < fVar3) {
    fVar5 = fVar5 + flt_800520D4;
  }
  return fVar5;
}



void proc_7F032DE4(int param_1)

{
  int iVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  iVar1 = *(int *)(param_1 + 0x18);
  iVar2 = get_curplayer_positiondata();
  fVar3 = *(float *)(iVar2 + 8) - *(float *)(iVar1 + 8);
  fVar4 = *(float *)(iVar2 + 0xc) - *(float *)(iVar1 + 0xc);
  fVar5 = *(float *)(iVar2 + 0x10) - *(float *)(iVar1 + 0x10);
  sqrtf(fVar3 * fVar3 + fVar4 * fVar4 + fVar5 * fVar5);
  return;
}



void proc_7F032E48(int param_1,short param_2)

{
  int iVar1;
  short sVar2;
  float *pfVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  iVar1 = *(int *)(param_1 + 0x18);
  sVar2 = proc_7F032F94(param_1,param_2);
  if (sVar2 < 10000) {
    pfVar3 = (float *)(ptr_0xxxpresets + ((int)sVar2 * 0xc - (int)sVar2) * 4);
  }
  else {
    pfVar3 = (float *)(ptr_2xxxpresets + (int)sVar2 * 0x44 + -680000);
  }
  fVar4 = *pfVar3 - *(float *)(iVar1 + 8);
  fVar5 = pfVar3[1] - *(float *)(iVar1 + 0xc);
  fVar6 = pfVar3[2] - *(float *)(iVar1 + 0x10);
  sqrtf(fVar4 * fVar4 + fVar5 * fVar5 + fVar6 * fVar6);
  return;
}



ulonglong proc_7F032EFC(int param_1,short param_2)

{
  short sVar2;
  ulonglong uVar1;
  undefined *puVar3;
  
  sVar2 = proc_7F032F94(param_1,param_2);
  if (sVar2 < 10000) {
    puVar3 = ptr_0xxxpresets + (int)sVar2 * 0x2c;
  }
  else {
    puVar3 = ptr_2xxxpresets + (int)sVar2 * 0x44 + -680000;
  }
  uVar1 = 0;
  if (*(int *)(puVar3 + 0x28) != 0) {
    uVar1 = proc_7F0B2FD8(*(int *)(puVar3 + 0x28));
    uVar1 = proc_7F0B5E50((int)uVar1);
  }
  return uVar1;
}



short proc_7F032F94(int param_1,short param_2)

{
  if (param_2 == 9000) {
    param_2 = *(short *)(param_1 + 0x114);
  }
  return param_2;
}



longlong proc_7F032FAC(short *param_1,longlong param_2)

{
  short *psVar1;
  
  if (param_2 == 0xfa) {
    return (longlong)param_1[0x8c];
  }
  if (param_2 == 0xfb) {
    return (longlong)param_1[0x8d];
  }
  if (param_2 == 0xfc) {
    return (longlong)param_1[0x8b];
  }
  if (param_2 != 0xfd) {
    if (param_2 != 0xf9) {
      if ((param_2 == 0xf8) &&
         (psVar1 = *(short **)(ptr_BONDdata->position_data_pointer + 4), psVar1 != NULL)) {
        param_2 = (longlong)*psVar1;
      }
      return param_2;
    }
    return (longlong)((int)*param_1 + 10000);
  }
  return (longlong)*param_1;
}



int proc_7F033040(short *param_1,longlong param_2)

{
  short sVar1;
  longlong lVar2;
  GUARDdata *pGVar3;
  int iVar4;
  short *psVar5;
  int iVar6;
  
  lVar2 = proc_7F032FAC(param_1,param_2);
  pGVar3 = check_if_guardnum_loaded_get_ptr_GUARDdata((short)lVar2);
  if ((pGVar3 == NULL) && (iVar4 = 0, 0 < objectiveregisters3)) {
    iVar6 = 0;
    psVar5 = objectiveregisters2;
    do {
      sVar1 = *psVar5;
      iVar4 += 1;
      psVar5 = psVar5 + 0xee;
      if ((longlong)(int)lVar2 == (longlong)sVar1) {
        return iVar6 + (int)objectiveregisters2;
      }
      iVar6 += 0x1dc;
    } while (iVar4 < objectiveregisters3);
  }
  return (int)pGVar3;
}



float proc_7F0330C4(short *param_1,longlong param_2)

{
  int iVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  iVar1 = *(int *)(param_1 + 0xc);
  iVar2 = proc_7F033040(param_1,param_2);
  fVar3 = 0.00000000;
  if (((iVar2 != 0) && (*(int *)(iVar2 + 0x1c) != 0)) && (*(int *)(iVar2 + 0x18) != 0)) {
    iVar2 = *(int *)(iVar2 + 0x18);
    fVar3 = *(float *)(iVar2 + 8) - *(float *)(iVar1 + 8);
    fVar4 = *(float *)(iVar2 + 0xc) - *(float *)(iVar1 + 0xc);
    fVar5 = *(float *)(iVar2 + 0x10) - *(float *)(iVar1 + 0x10);
    fVar3 = sqrtf(fVar3 * fVar3 + fVar4 * fVar4 + fVar5 * fVar5);
  }
  return fVar3;
}



void proc_7F033154(int param_1,short param_2)

{
  int iVar1;
  short sVar2;
  float *pfVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  iVar1 = get_curplayer_positiondata();
  sVar2 = proc_7F032F94(param_1,param_2);
  if (sVar2 < 10000) {
    pfVar3 = (float *)(ptr_0xxxpresets + ((int)sVar2 * 0xc - (int)sVar2) * 4);
  }
  else {
    pfVar3 = (float *)(ptr_2xxxpresets + (int)sVar2 * 0x44 + -680000);
  }
  fVar4 = *pfVar3 - *(float *)(iVar1 + 8);
  fVar5 = pfVar3[1] - *(float *)(iVar1 + 0xc);
  fVar6 = pfVar3[2] - *(float *)(iVar1 + 0x10);
  sqrtf(fVar4 * fVar4 + fVar5 * fVar5 + fVar6 * fVar6);
  return;
}



void proc_7F033218(int param_1,byte param_2)

{
  *(byte *)(param_1 + 0x10e) = *(byte *)(param_1 + 0x10e) | param_2;
  return;
}



void proc_7F03322C(int param_1,byte param_2)

{
  *(byte *)(param_1 + 0x10e) = *(byte *)(param_1 + 0x10e) & ~param_2;
  return;
}



ulonglong proc_7F033244(int param_1,byte param_2)

{
  return (ulonglong)((*(byte *)(param_1 + 0x10e) & param_2) != 0);
}



void proc_7F033260(short *param_1,longlong param_2,byte param_3)

{
  int iVar1;
  
  iVar1 = proc_7F033040(param_1,param_2);
  if (iVar1 != 0) {
    proc_7F033218(iVar1,param_3);
  }
  return;
}



void proc_7F033290(short *param_1,longlong param_2,byte param_3)

{
  int iVar1;
  
  iVar1 = proc_7F033040(param_1,param_2);
  if (iVar1 != 0) {
    proc_7F03322C(iVar1,param_3);
  }
  return;
}



ulonglong proc_7F0332C0(short *param_1,longlong param_2,byte param_3)

{
  int iVar2;
  ulonglong uVar1;
  
  iVar2 = proc_7F033040(param_1,param_2);
  if (iVar2 == 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = proc_7F033244(iVar2,param_3);
  }
  return uVar1;
}



void proc_7F0332FC(undefined8 param_1,uint param_2)

{
  objectiveregisters1 = objectiveregisters1 | param_2;
  return;
}



void proc_7F033318(undefined8 param_1,uint param_2)

{
  objectiveregisters1 = ~param_2 & objectiveregisters1;
  return;
}



ulonglong proc_7F033338(undefined8 param_1,uint param_2)

{
  return (ulonglong)((objectiveregisters1 & param_2) != 0);
}



ulonglong proc_7F033354(int param_1)

{
  return (ulonglong)((*(ushort *)(param_1 + 0x12) & 2) != 0);
}



ulonglong proc_7F033364(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    proc_7F024648(param_1);
  }
  return (ulonglong)(lVar1 != 0);
}



undefined8 proc_7F0333A0(int param_1)

{
  proc_7F0247B8(param_1);
  return 1;
}



void proc_7F0333C4(int param_1)

{
  *(undefined4 *)(param_1 + 0x110) = 0;
  *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 0x40;
  return;
}



float proc_7F0333D8(int param_1)

{
  return (float)*(int *)(param_1 + 0x110) / 60.00000000;
}



ulonglong proc_7F0333F8(int param_1)

{
  int iVar3;
  float *pfVar4;
  longlong lVar1;
  ulonglong uVar2;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  float extraout_f12;
  float afStack40 [3];
  float afStack28 [3];
  float afStack16 [3];
  int iStack4;
  
  iVar3 = proc_7F029760(param_1);
  if (iVar3 == 0) {
    uVar2 = 0;
  }
  else {
    iStack4 = *(int *)(param_1 + 0x1c);
    getinstsize(iStack4,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    proc_7F068190(afStack16,afStack28);
    getsuboffset(iStack4,afStack40,extraout_a2_lo_00,extraout_a3_lo_00);
    pfVar4 = (float *)proc_7F0783C4();
    proc_7F058474(pfVar4,afStack40);
    lVar1 = proc_7F041074(afStack16,afStack28,afStack40,extraout_f12);
    if (lVar1 == 0) {
      uVar2 = 0;
    }
    else {
      uVar2 = 1;
    }
  }
  return uVar2;
}



ulonglong proc_7F033490(int param_1)

{
  return (ulonglong)((*(uint *)(param_1 + 0x14) & 4) != 0);
}



undefined8 proc_7F0334A0(int param_1,char param_2)

{
  longlong lVar1;
  undefined8 uVar2;
  int iVar3;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    if ((int)setting_007_5 < 10) {
      iVar3 = get_curplayer_positiondata();
      lVar1 = proc_7F028DDC(param_1,(float *)(iVar3 + 8),*(undefined4 *)(iVar3 + 0x14),param_2);
      if (lVar1 == 0) {
        uVar2 = 0;
      }
      else {
        uVar2 = 1;
      }
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



undefined8 proc_7F03350C(short *param_1,int param_2,char param_3)

{
  longlong lVar1;
  undefined8 uVar2;
  int iVar3;
  
  lVar1 = proc_7F02A258((int)param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    if ((int)setting_007_5 < 10) {
      iVar3 = proc_7F033040(param_1,(longlong)param_2);
      if (iVar3 == 0) {
        uVar2 = 0;
      }
      else {
        if (*(int *)(iVar3 + 0x1c) == 0) {
          uVar2 = 0;
        }
        else {
          if (*(int *)(iVar3 + 0x18) == 0) {
            uVar2 = 0;
          }
          else {
            lVar1 = proc_7F028DDC((int)param_1,(float *)(*(int *)(iVar3 + 0x18) + 8),
                                  *(undefined4 *)(*(int *)(iVar3 + 0x18) + 0x14),param_3);
            if (lVar1 == 0) {
              uVar2 = 0;
            }
            else {
              uVar2 = 1;
            }
          }
        }
      }
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



undefined proc_7F0335A4(int param_1)

{
  return *(undefined *)(param_1 + 0xb);
}



undefined proc_7F0335AC(int param_1)

{
  return *(undefined *)(param_1 + 10);
}



ulonglong proc_7F0335B4(int param_1)

{
  return (ulonglong)(*(short *)(param_1 + 0x118) < 0) ^ 1;
}



ulonglong proc_7F0335C4(int param_1)

{
  return (ulonglong)(*(short *)(param_1 + 0x11a) < 0) ^ 1;
}



ulonglong proc_7F0335D4(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    proc_7F023E48(param_1);
  }
  return (ulonglong)(lVar1 != 0);
}



ulonglong proc_7F033610(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    actor_shuffle_feet();
  }
  return (ulonglong)(lVar1 != 0);
}



ulonglong proc_7F03364C(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    proc_7F0244AC();
  }
  return (ulonglong)(lVar1 != 0);
}



ulonglong proc_7F033688(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    proc_7F024548();
  }
  return (ulonglong)(lVar1 != 0);
}



ulonglong proc_7F0336C4(int param_1)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    actor_kneel();
  }
  return (ulonglong)(lVar1 != 0);
}



ulonglong proc_7F033700(int param_1,int param_2,int param_3,int param_4,byte param_5,int param_6)

{
  longlong lVar1;
  
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 != 0) {
    perform_animation_for_actor((GUARDdata *)param_1,param_2,param_3,param_4,param_5,param_6);
  }
  return (ulonglong)(lVar1 != 0);
}



void proc_7F033760(void)

{
  is_alarm_on();
  return;
}



undefined8 proc_7F033780(int *param_1,float *param_2,float param_3)

{
  undefined8 uVar1;
  float in_a2_lo;
  float fVar2;
  float fVar3;
  
  fVar2 = convert_angle_using_inverse
                    ((f32)(*(float *)(ptr_0xxxpresets + *param_1 * 0x2c) - *param_2),
                     (f32)(*(float *)(ptr_0xxxpresets + *param_1 * 0x2c + 2) - param_2[2]));
  fVar3 = in_a2_lo - fVar2;
  if (in_a2_lo < fVar2) {
    fVar3 = fVar3 + flt_800520DC;
  }
  if ((fVar3 < flt_800520E0) || (uVar1 = 0, flt_800520E4 < fVar3)) {
    uVar1 = 1;
  }
  return uVar1;
}



longlong proc_7F033834(float *param_1,undefined4 param_2,float param_3,char param_4)

{
  int *piVar2;
  longlong lVar1;
  int iVar3;
  int iVar4;
  float extraout_f12;
  float extraout_f12_00;
  float fVar5;
  float extraout_f12_01;
  
  piVar2 = proc_7F027CD4(param_1,param_2);
  if (piVar2 != NULL) {
    lVar1 = proc_7F033780(piVar2,param_1,extraout_f12);
    if (lVar1 != 0) {
      return (longlong)*piVar2;
    }
    iVar4 = *(int *)piVar2[1];
    iVar3 = 0;
    fVar5 = extraout_f12_00;
    if (iVar4 < 0) {
      return 0xffffffffffffffff;
    }
    do {
      lVar1 = proc_7F033780((int *)(ptr_setup_path_tbl + iVar4 * 0x10),param_1,fVar5);
      if (lVar1 != 0) {
        return (longlong)*(int *)(ptr_setup_path_tbl + iVar4 * 0x10);
      }
      iVar3 += 1;
      iVar4 = *(int *)(piVar2[1] + iVar3 * 4);
      fVar5 = extraout_f12_01;
    } while (-1 < iVar4);
  }
  return 0xffffffffffffffff;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F033998(void)

{
  int *piVar2;
  int *piVar3;
  int iVar4;
  undefined4 *puVar5;
  longlong lVar1;
  int in_a0_lo;
  uint in_a1_lo;
  undefined4 in_a3_lo;
  uint uVar6;
  char in_f0;
  float extraout_f12;
  int iStack28;
  undefined4 *puStack24;
  int iStack8;
  
  uVar6 = in_a1_lo & 0xff;
  if ((uVar6 != 0x10) && (uVar6 != 0x20)) {
    getsubroty(*(int *)(in_a0_lo + 0x1c),in_a1_lo,uVar6,in_a3_lo);
    lVar1 = proc_7F033834((float *)(*(int *)(in_a0_lo + 0x18) + 8),
                          *(undefined4 *)(*(int *)(in_a0_lo + 0x18) + 0x14),extraout_f12,in_f0);
    if (lVar1 < 0) {
      return 0;
    }
    *(undefined2 *)(in_a0_lo + 0x114) = (short)lVar1;
    return 1;
  }
  iVar4 = *(int *)(in_a0_lo + 0x18);
  iStack8 = get_curplayer_positiondata();
  piVar2 = proc_7F027CD4((float *)(iVar4 + 8),*(undefined4 *)(iVar4 + 0x14));
  piVar3 = proc_7F027CD4((float *)(iStack8 + 8),*(undefined4 *)(iStack8 + 0x14));
  if ((piVar2 != NULL) && (piVar3 != NULL)) {
    if (uVar6 != 0x10) {
      puVar5 = (undefined4 *)proc_7F08FB90((int)piVar2,(int)piVar3);
      if (puVar5 == NULL) {
        return 0;
      }
      *(undefined2 *)(in_a0_lo + 0x114) = (short)*puVar5;
      return 1;
    }
    iVar4 = proc_7F08F4F0((int)piVar2,(int)piVar3,&iStack28,3);
    if (2 < iVar4) {
      *(undefined2 *)(in_a0_lo + 0x114) = (short)*puStack24;
      return 1;
    }
  }
  return 0;
}



ulonglong proc_7F033AAC(int param_1,ulonglong param_2)

{
  ulonglong uVar1;
  int iVar3;
  longlong lVar2;
  float fVar4;
  float extraout_f12;
  
  if (((param_2 & 0xff) == 0x10) || ((param_2 & 0xff) == 0x20)) {
    uVar1 = proc_7F033998();
  }
  else {
    fVar4 = get_curplay_horizontal_rotation_in_degrees();
    iVar3 = get_curplayer_positiondata();
    lVar2 = proc_7F033834((float *)(iVar3 + 8),*(undefined4 *)(iVar3 + 0x14),extraout_f12,
                          SUB41(fVar4,0));
    if (-1 < lVar2) {
      *(undefined2 *)(param_1 + 0x114) = (short)lVar2;
    }
    uVar1 = (ulonglong)(-1 < lVar2);
  }
  return uVar1;
}



undefined8 proc_7F033B38(undefined2 *param_1,float param_2)

{
  int iVar1;
  int iVar4;
  ulonglong uVar2;
  longlong lVar3;
  float in_a1_lo;
  undefined2 uVar5;
  undefined2 *puVar6;
  int iVar7;
  int iVar8;
  ulonglong uVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  
  iVar4 = get_numguards();
  iVar8 = *(int *)(param_1 + 0xc);
  fVar10 = *(float *)(iVar8 + 8);
  fVar11 = *(float *)(iVar8 + 0xc);
  fVar12 = *(float *)(iVar8 + 0x10);
  iVar7 = 0;
  uVar9 = (ulonglong)*(byte *)(*(int *)(iVar8 + 0x14) + 3);
  if (0 < iVar4) {
    iVar8 = 0;
    do {
      puVar6 = (undefined2 *)(&ptr_guard_data->guardID_1 + iVar8);
      if (((puVar6 != param_1) && (*(int *)(puVar6 + 0xe) != 0)) &&
         (uVar2 = proc_7F02A2A4((int)puVar6), uVar2 == 0)) {
        iVar1 = *(int *)(puVar6 + 0xc);
        if ((((fVar10 - in_a1_lo <= *(float *)(iVar1 + 8)) &&
             (*(float *)(iVar1 + 8) <= fVar10 + in_a1_lo)) &&
            ((fVar11 - in_a1_lo <= *(float *)(iVar1 + 0xc) &&
             ((*(float *)(iVar1 + 0xc) <= fVar11 + in_a1_lo &&
              (fVar12 - in_a1_lo <= *(float *)(iVar1 + 0x10))))))) &&
           (*(float *)(iVar1 + 0x10) <= fVar12 + in_a1_lo)) {
          uVar2 = (ulonglong)*(byte *)(*(int *)(iVar1 + 0x14) + 3);
          if (uVar9 == uVar2) {
            uVar5 = *puVar6;
LAB_7f033c94:
            param_1[0x8b] = uVar5;
            return 1;
          }
          lVar3 = proc_7F0B8FD0(uVar9,uVar2);
          if (lVar3 != 0) {
            uVar5 = *puVar6;
            goto LAB_7f033c94;
          }
        }
      }
      iVar7 += 1;
      iVar8 += 0x1dc;
    } while (iVar7 < iVar4);
  }
  return 0;
}



void proc_7F033CF4(short *param_1,longlong param_2)

{
  longlong lVar1;
  
  lVar1 = proc_7F032FAC(param_1,param_2);
  param_1[0x8b] = (short)lVar1;
  return;
}



void proc_7F033D1C(short *param_1,longlong param_2,int param_3)

{
  int iVar2;
  longlong lVar1;
  
  iVar2 = proc_7F033040(param_1,param_2);
  if (iVar2 != 0) {
    lVar1 = proc_7F032FAC(param_1,(longlong)param_3);
    *(undefined2 *)(iVar2 + 0x116) = (short)lVar1;
  }
  return;
}



void proc_7F033D5C(int param_1,short param_2)

{
  short sVar1;
  
  sVar1 = proc_7F032F94(param_1,param_2);
  *(short *)(param_1 + 0x114) = sVar1;
  return;
}



void proc_7F033D84(short *param_1,longlong param_2,short param_3)

{
  int iVar1;
  short sVar2;
  
  iVar1 = proc_7F033040(param_1,param_2);
  if (iVar1 != 0) {
    sVar2 = proc_7F032F94((int)param_1,param_3);
    *(short *)(iVar1 + 0x114) = sVar2;
  }
  return;
}



undefined8 proc_7F033DC4(int param_1)

{
  longlong lVar1;
  undefined8 uVar2;
  int iVar3;
  int iVar4;
  float extraout_f12;
  float extraout_f14;
  float afStack36 [3];
  float afStack24 [3];
  int aiStack12 [3];
  
  lVar1._4_4_ = get_curplayer_positiondata();
  lVar1 = (longlong)lVar1._4_4_;
  iVar4 = *(int *)(param_1 + 0x18);
  aiStack12[0] = *(int *)(iVar4 + 0x14);
  proc_7F0B1CC4();
  proc_7F0B0BE4(aiStack12,extraout_f12,extraout_f14,*(float *)(iVar4 + 8),*(float *)(iVar4 + 0x10));
  if (lVar1 == 0) {
    proc_7F0B28B0(afStack24,afStack36);
    iVar3 = proc_7F0304AC(param_1,(undefined4 *)(iVar4 + 8),*(int *)(iVar4 + 0x14),afStack24,
                          (undefined4 *)(lVar1._4_4_ + 8),*(int *)(lVar1._4_4_ + 0x14),0);
    if ((iVar3 == 0) &&
       (iVar4 = proc_7F0304AC(param_1,(undefined4 *)(iVar4 + 8),*(int *)(iVar4 + 0x14),afStack36,
                              (undefined4 *)(lVar1._4_4_ + 8),*(int *)(lVar1._4_4_ + 0x14),0),
       iVar4 == 0)) {
      return 0;
    }
    uVar2 = 1;
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



longlong proc_7F033EAC(float *param_1,int param_2)

{
  ulonglong uVar1;
  longlong lVar2;
  float extraout_f12;
  float extraout_f12_00;
  int aiStack20 [4];
  uint uStack4;
  
  uStack4 = 1;
  uVar1 = proc_7F0B2FD8(param_2);
  uVar1 = proc_7F0B5E50((int)uVar1);
  if ((uVar1 != 0) && (lVar2 = proc_7F0BB2C8(param_1,extraout_f12), lVar2 != 0)) {
    uVar1 = proc_7F0B2FD8(param_2);
    lVar2 = proc_7F0B3C0C((int)uVar1,aiStack20);
    if (lVar2 == 0) {
      lVar2 = proc_7F078A58(param_1,extraout_f12_00);
      uStack4 = (uint)(lVar2 == 0);
    }
    else {
      lVar2 = proc_7F078BF4(param_1,extraout_f12_00,(float *)0x43480000);
      uStack4 = (uint)(lVar2 == 0);
    }
  }
  return (longlong)(int)uStack4;
}



undefined8 proc_7F033F48(float *param_1,int *param_2,float param_3,longlong param_4)

{
  int iVar1;
  float fVar2;
  float fVar3;
  longlong lVar4;
  undefined8 uVar5;
  longlong in_a3;
  int iVar6;
  float fVar7;
  ulonglong uVar8;
  float __x;
  float fStack12;
  float fStack8;
  float fStack4;
  
  uVar8 = param_4 & 0xffffffff;
  lVar4 = proc_7F0B18B8();
  if ((lVar4 < 0) && ((in_a3 != 0 || (lVar4 = proc_7F033EAC(param_1,*param_2), lVar4 != 0)))) {
    uVar5 = 1;
  }
  else {
    fVar3 = flt_800520FC;
    fVar2 = flt_800520F8;
    iVar6 = 0;
    do {
      __x = (float)uVar8;
      fVar7 = sinf(__x);
      fStack12 = fVar7 * 60.00000000 + *param_1;
      fStack8 = param_1[1];
      fVar7 = cosf(__x);
      fStack4 = fVar7 * 60.00000000 + param_1[2];
      iVar1 = *param_2;
      lVar4 = proc_7F0B0E24();
      if (((lVar4 != 0) && (lVar4 = proc_7F0B18B8(), lVar4 < 0)) &&
         ((in_a3 != 0 || (lVar4 = proc_7F033EAC(&fStack12,iVar1), lVar4 != 0)))) {
        *param_2 = iVar1;
        *param_1 = fStack12;
        param_1[2] = fStack4;
        return 1;
      }
      __x = __x + fVar2;
      iVar6 += 1;
      if (fVar3 <= __x) {
        __x = __x - fVar3;
      }
      uVar8 = (ulonglong)(uint)__x;
    } while (iVar6 != 8);
    uVar5 = 0;
  }
  return uVar5;
}



longlong proc_7F03415C(int param_1,uint param_2,float *param_3,int param_4,float param_5,int param_6
                      ,uint param_7)

{
  int iVar2;
  longlong lVar1;
  uint uVar3;
  float extraout_f12;
  float extraout_f12_00;
  float fVar4;
  uint uStackX4;
  int in_stack_00000018;
  int aiStack24 [2];
  float fStack16;
  float fStack12;
  float fStack8;
  int iStack4;
  
  iVar2 = get_next_available_guardID();
  if (2 < iVar2) {
    if ((int)param_2 < 0) {
      uStackX4 = select_psuedorandom_heads(param_1);
      fStack16 = *param_3;
      fVar4 = extraout_f12_00;
    }
    else {
      fStack16 = *param_3;
      fVar4 = extraout_f12;
      uStackX4 = param_2;
    }
    fStack12 = param_3[1];
    fStack8 = param_3[2];
    aiStack24[0] = param_4;
    lVar1 = proc_7F033F48(&fStack16,aiStack24,fVar4,(longlong)param_6);
    if (((lVar1 != 0) &&
        (uVar3 = retrieve_header_for_body_and_head(param_1,uStackX4,(longlong)in_stack_00000018),
        uVar3 != 0)) &&
       (iStack4 = replace_GUARDdata_with_actual_values(uVar3,&fStack16,param_6,aiStack24[0],param_7)
       , iStack4 != 0)) {
      proc_7F03A4F0(iStack4);
      set_stateflag_0x04_for_posdata(iStack4);
      iVar2 = *(int *)(iStack4 + 4);
      *(undefined *)(iVar2 + 6) = (char)uStackX4;
      *(undefined *)(iVar2 + 0xf) = (char)param_1;
      return (longlong)iStack4;
    }
  }
  return 0;
}



void proc_7F034258(int param_1,int param_2,uint param_3,short param_4,uint param_5,uint param_6)

{
  short sVar1;
  undefined *puVar2;
  float fVar3;
  float extraout_f12;
  
  sVar1 = proc_7F032F94(param_1,param_4);
  if (sVar1 < 10000) {
    puVar2 = ptr_0xxxpresets + (int)sVar1 * 0x2c;
  }
  else {
    puVar2 = ptr_2xxxpresets + (int)sVar1 * 0x44 + -680000;
  }
  fVar3 = convert_angle_using_inverse(*(f32 *)(puVar2 + 0x18),*(f32 *)(puVar2 + 0x20));
  proc_7F03415C(param_2,param_3,puVar2,*(int *)(puVar2 + 0x28),extraout_f12,fVar3,param_5);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F034308(void)

{
  int iVar2;
  undefined8 uVar1;
  short *in_a0_lo;
  int in_a1_lo;
  uint extraout_a1_lo;
  uint in_a2_lo;
  undefined4 extraout_a2_lo;
  longlong in_a3;
  undefined4 extraout_a3_lo;
  undefined4 in_f0;
  float extraout_f12;
  uint in_stack_00000010;
  
  iVar2 = proc_7F033040(in_a0_lo,in_a3);
  if ((*(uint *)(iVar2 + 0x14) & 8) == 0) {
    getsubroty(*(int *)(iVar2 + 0x1c),extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    uVar1 = proc_7F03415C(in_a1_lo,in_a2_lo,*(int *)(iVar2 + 0x18) + 8,
                          *(int *)(*(int *)(iVar2 + 0x18) + 0x14),extraout_f12,in_f0,
                          in_stack_00000010);
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F034388(short *param_1,longlong param_2,short param_3)

{
  int iVar2;
  short sVar3;
  undefined8 uVar1;
  undefined *puVar4;
  
  iVar2 = proc_7F033040(param_1,param_2);
  sVar3 = proc_7F032F94((int)param_1,param_3);
  if (sVar3 < 10000) {
    puVar4 = ptr_0xxxpresets + ((int)sVar3 * 0xc - (int)sVar3) * 4;
  }
  else {
    puVar4 = ptr_2xxxpresets + (int)sVar3 * 0x44 + -680000;
  }
  if (*(int *)(puVar4 + 0x28) == 0) {
    uVar1 = 0;
  }
  else {
    if (iVar2 == 0) {
      uVar1 = 0;
    }
    else {
      if (*(int *)(iVar2 + 0x18) == 0) {
        uVar1 = 0;
      }
      else {
        if (*(char *)(*(int *)(*(int *)(iVar2 + 0x18) + 0x14) + 3) ==
            *(char *)(*(int *)(puVar4 + 0x28) + 3)) {
          uVar1 = 1;
        }
        else {
          uVar1 = 0;
        }
      }
    }
  }
  return uVar1;
}



undefined8 proc_7F03444C(int param_1,short param_2)

{
  int iVar2;
  short sVar3;
  undefined8 uVar1;
  undefined *puVar4;
  
  iVar2 = get_curplayer_positiondata();
  sVar3 = proc_7F032F94(param_1,param_2);
  if (sVar3 < 10000) {
    puVar4 = ptr_0xxxpresets + ((int)sVar3 * 0xc - (int)sVar3) * 4;
  }
  else {
    puVar4 = ptr_2xxxpresets + (int)sVar3 * 0x44 + -680000;
  }
  if (*(int *)(puVar4 + 0x28) == 0) {
    uVar1 = 0;
  }
  else {
    if (*(char *)(*(int *)(iVar2 + 0x14) + 3) == *(char *)(*(int *)(puVar4 + 0x28) + 3)) {
      uVar1 = 1;
    }
    else {
      uVar1 = 0;
    }
  }
  return uVar1;
}



undefined8 proc_7F0344FC(void)

{
  return 0;
}



undefined8 proc_7F034508(void)

{
  return 0;
}



undefined8 proc_7F034514(int param_1,short param_2)

{
  short sVar5;
  longlong lVar1;
  undefined8 uVar2;
  int iVar4;
  ulonglong uVar3;
  
  sVar5 = proc_7F032F94(param_1,param_2);
  lVar1 = proc_7F02A258(param_1);
  if (lVar1 == 0) {
    uVar2 = 0;
  }
  else {
    iVar4 = scan_position_data_table_for_normal_object_at_preset(sVar5);
    if (iVar4 == 0) {
      uVar2 = 0;
    }
    else {
      uVar3 = check_if_object_has_not_been_destroyed(iVar4);
      if (uVar3 == 0) {
        uVar2 = 0;
      }
      else {
        proc_7F024150(param_1);
        uVar2 = 1;
      }
    }
  }
  return uVar2;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F03457C(void)

{
  u32 uVar2;
  longlong lVar1;
  int iVar3;
  int iVar4;
  undefined *puVar5;
  GUARDdata *guard;
  uint uVar6;
  float in_f0;
  
  uVar2 = get_random_value();
  if ((((ulonglong)(longlong)(int)(uVar2 % 0xff) < (ulonglong)(byte)guard->beligerancy) &&
      (proc_7F032DE4((int)guard), 10.00000000 <= in_f0)) &&
     (lVar1 = proc_7F02A258((int)guard), lVar1 != 0)) {
    iVar3 = something_with_weaponpos_of_guarddata_hand(guard,1);
    iVar4 = something_with_weaponpos_of_guarddata_hand(guard,0);
    if ((iVar4 != 0) && (*(char *)(*(int *)(iVar4 + 4) + 0x80) == '\x1a')) {
      throw_weapon_in_guard_hand();
      return 1;
    }
    if ((iVar3 != 0) && (*(char *)(*(int *)(iVar3 + 4) + 0x80) == '\x1a')) {
      throw_weapon_in_guard_hand();
      return 1;
    }
    if ((iVar3 != 0) && (iVar4 != 0)) {
      return 0;
    }
    uVar6 = 0;
    if (iVar4 != 0) {
      uVar6 = 0x10000000;
    }
    puVar5 = actor_draws_weapon_with_model((undefined2 *)guard,0xc4,0x1a,uVar6);
    if (puVar5 != NULL) {
      *(uint *)(*(int *)(puVar5 + 4) + 100) = *(uint *)(*(int *)(puVar5 + 4) + 100) | 0x800;
      throw_weapon_in_guard_hand();
      return 1;
    }
  }
  return 0;
}



undefined8 proc_7F0346FC(int param_1,int param_2,char param_3)

{
  undefined4 *puVar2;
  undefined8 uVar1;
  f32 scale;
  
  puVar2 = create_new_item_instance_of_model(param_2,(int)param_3 & 0xff);
  if (puVar2 == NULL) {
    uVar1 = 0;
  }
  else {
    if (puVar2[4] == 0) {
      uVar1 = 0;
    }
    else {
      set_obj_instance_controller_scale(puVar2[5],scale);
      proc_7F03A5A4(puVar2[4],*(int *)(param_1 + 0x18));
      *(undefined2 *)((int)puVar2 + 0x82) = 0xb4;
      proc_7F04BFD0(puVar2[4],1);
      uVar1 = 1;
      *(ushort *)(param_1 + 0x12) = *(ushort *)(param_1 + 0x12) | 1;
    }
  }
  return uVar1;
}



void proc_7F0347A0(int param_1)

{
  int iVar1;
  ulonglong uVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = (&sfx_related)[param_1].field_0x0;
  if (iVar3 == 0) {
    (&sfx_related)[param_1].field_0x4 = 0;
    return;
  }
  uVar2 = music_related_26(iVar3);
  uVar2._4_4_ = (undefined4)uVar2;
  if (uVar2 == 0) {
    (&sfx_related)[param_1].field_0x4 = 0;
    return;
  }
  if ((float *)(&sfx_related)[param_1].field_0x10 == NULL) {
    iVar3 = (&sfx_related)[param_1].field_0x14;
    if (iVar3 == 0) {
      iVar3 = (&sfx_related)[param_1].field_0x8;
      goto LAB_7f034824;
    }
    if (*(int *)(iVar3 + 0x10) == 0) {
      iVar3 = (&sfx_related)[param_1].field_0x8;
      goto LAB_7f034824;
    }
    proc_7F0539E4((float *)(iVar3 + 0x58));
    (&sfx_related)[param_1].field_0xc = iVar3;
  }
  else {
    proc_7F0539E4((float *)(&sfx_related)[param_1].field_0x10);
    (&sfx_related)[param_1].field_0xc = uVar2._4_4_;
  }
  iVar3 = (&sfx_related)[param_1].field_0x8;
LAB_7f034824:
  iVar4 = (&sfx_related)[param_1].field_0xc;
  if (-1 < iVar3) {
    if (clock_timer < iVar3) {
      iVar1 = (iVar4 - (&sfx_related)[param_1].field_0x4) * clock_timer;
      iVar4 = iVar1 / iVar3 + (&sfx_related)[param_1].field_0x4;
      if (iVar3 == 0) {
        trap(0x1c00);
      }
      if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
        trap(0x1800);
      }
    }
    (&sfx_related)[param_1].field_0x8 = iVar3 - clock_timer;
  }
  iVar3 = get_controls_locked_flag();
  if (iVar3 != 0) {
    iVar4 = 0;
  }
  if (iVar4 != (&sfx_related)[param_1].field_0x4) {
    music_related_36((longlong)(int)(&sfx_related)[param_1].field_0x0,8,iVar4);
    (&sfx_related)[param_1].field_0x4 = iVar4;
  }
  return;
}



void loop_set_sound_effect_all_slots(void)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    proc_7F0347A0(iVar1);
    iVar1 += 1;
  } while (iVar1 != 8);
  return;
}



int ** proc_7F034924(longlong param_1,short param_2)

{
  int iVar1;
  ulonglong uVar2;
  int **ppiVar3;
  int iVar4;
  sfx_register_struct *data;
  
  data = NULL;
  if ((-1 < param_1) && (iVar4 = (int)param_1, data = NULL, param_1 < 8)) {
    iVar1 = (&sfx_related)[iVar4].field_0x0;
    if (iVar1 != 0) {
      uVar2 = music_related_26(iVar1);
      data = NULL;
      if (uVar2 != 0) goto LAB_7f03499c;
    }
    (&sfx_related)[iVar4].field_0xc = 0x7fff;
    (&sfx_related)[iVar4].field_0x4 = 0x7fff;
    (&sfx_related)[iVar4].field_0x8 = 0xffffffff;
    (&sfx_related)[iVar4].field_0x10 = 0;
    (&sfx_related)[iVar4].field_0x14 = 0;
    data = &sfx_related + iVar4;
  }
LAB_7f03499c:
  ppiVar3 = play_sfx_a1(ptr_sfx_buf,param_2,(sfxdata *)data);
  return ppiVar3;
}



void proc_7F0349BC(longlong param_1)

{
  if ((-1 < param_1) && (param_1 < 8)) {
    music_related_28((&sfx_related)[(int)param_1].field_0x0);
  }
  return;
}



int get_length_of_action_block(int param_1,int param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  
  switch(*(undefined *)(param_1 + param_2)) {
  case 0:
    return 2;
  case 1:
    return 2;
  case 2:
    return 2;
  case 3:
    return 1;
  case 4:
    return 1;
  case 5:
    return 4;
  case 6:
    return 3;
  case 7:
    return 1;
  case 8:
    return 1;
  case 9:
    return 1;
  case 10:
    return 9;
  case 0xb:
    return 2;
  case 0xc:
    return 1;
  case 0xd:
    return 1;
  case 0xe:
    return 2;
  case 0xf:
    return 2;
  case 0x10:
    return 2;
  case 0x11:
    return 2;
  case 0x12:
    return 2;
  case 0x13:
    return 2;
  case 0x14:
    return 6;
  case 0x15:
    return 6;
  case 0x16:
    return 6;
  case 0x17:
    return 6;
  case 0x18:
    return 4;
  case 0x19:
    return 4;
  case 0x1a:
    return 2;
  case 0x1b:
    return 5;
  case 0x1c:
    return 3;
  case 0x1d:
    return 1;
  case 0x1e:
    return 3;
  case 0x1f:
    return 3;
  case 0x20:
    return 2;
  case 0x21:
    return 1;
  case 0x22:
    return 1;
  case 0x23:
    return 2;
  case 0x24:
    return 4;
  case 0x25:
    return 1;
  case 0x26:
    return 1;
  case 0x27:
    return 2;
  case 0x28:
    return 2;
  case 0x29:
    return 2;
  case 0x2a:
    return 2;
  case 0x2b:
    return 2;
  case 0x2c:
    return 3;
  case 0x2d:
    return 3;
  case 0x2e:
    return 3;
  case 0x2f:
    return 2;
  case 0x30:
    return 3;
  case 0x31:
    return 3;
  case 0x32:
    return 2;
  case 0x33:
    return 1;
  case 0x34:
    return 3;
  case 0x35:
    return 3;
  case 0x36:
    return 2;
  case 0x37:
    return 2;
  case 0x38:
    return 2;
  case 0x39:
    return 2;
  case 0x3a:
    return 2;
  case 0x3b:
    return 2;
  case 0x3c:
    return 2;
  case 0x3d:
    return 2;
  case 0x3e:
    return 2;
  case 0x3f:
    return 2;
  case 0x40:
    return 3;
  case 0x41:
    return 2;
  case 0x42:
    return 2;
  case 0x43:
    return 2;
  case 0x44:
    return 4;
  case 0x45:
    return 2;
  case 0x46:
    return 2;
  case 0x47:
    return 3;
  case 0x48:
    return 3;
  case 0x49:
    return 3;
  case 0x4a:
    return 3;
  case 0x4b:
    return 4;
  case 0x4c:
    return 4;
  case 0x4d:
    return 7;
  case 0x4e:
    return 7;
  case 0x4f:
    return 5;
  case 0x50:
    return 5;
  case 0x51:
    return 4;
  case 0x52:
    return 6;
  case 0x53:
    return 6;
  case 0x54:
    return 5;
  case 0x55:
    return 4;
  case 0x56:
    return 3;
  case 0x57:
    return 3;
  case 0x58:
    return 4;
  case 0x59:
    return 3;
  case 0x5a:
    return 3;
  case 0x5b:
    return 3;
  case 0x5c:
    return 3;
  case 0x5d:
    return 3;
  case 0x5e:
    return 2;
  case 0x5f:
    return 2;
  case 0x60:
    return 2;
  case 0x61:
    return 2;
  case 0x62:
    return 2;
  case 99:
    return 2;
  case 100:
    return 3;
  case 0x65:
    return 4;
  case 0x66:
    return 2;
  case 0x67:
    return 2;
  case 0x68:
    return 4;
  case 0x69:
    return 3;
  case 0x6a:
    return 3;
  case 0x6b:
    return 3;
  case 0x6c:
    return 4;
  case 0x6d:
    return 3;
  case 0x6e:
    return 3;
  case 0x6f:
    return 3;
  case 0x70:
    return 3;
  case 0x71:
    return 3;
  case 0x72:
    return 4;
  case 0x73:
    return 4;
  case 0x74:
    return 4;
  case 0x75:
    return 4;
  case 0x76:
    return 3;
  case 0x77:
    return 3;
  case 0x78:
    return 3;
  case 0x79:
    return 3;
  case 0x7a:
    return 3;
  case 0x7b:
    return 3;
  case 0x7c:
    return 4;
  case 0x7d:
    return 4;
  case 0x7e:
    return 3;
  case 0x7f:
    return 3;
  case 0x80:
    return 3;
  case 0x81:
    return 2;
  case 0x82:
    return 2;
  case 0x83:
    return 2;
  case 0x84:
    return 3;
  case 0x85:
    return 2;
  case 0x86:
    return 2;
  case 0x87:
    return 2;
  case 0x88:
    return 2;
  case 0x89:
    return 3;
  case 0x8a:
    return 2;
  case 0x8b:
    return 3;
  case 0x8c:
    return 2;
  case 0x8d:
    return 2;
  case 0x8e:
    return 2;
  case 0x8f:
    return 3;
  case 0x90:
    return 3;
  case 0x91:
    return 2;
  case 0x92:
    return 2;
  case 0x93:
    return 2;
  case 0x94:
    return 2;
  case 0x95:
    return 2;
  case 0x96:
    return 3;
  case 0x97:
    return 3;
  case 0x98:
    return 3;
  case 0x99:
    return 4;
  case 0x9a:
    return 5;
  case 0x9b:
    return 5;
  case 0x9c:
    return 6;
  case 0x9d:
    return 5;
  case 0x9e:
    return 5;
  case 0x9f:
    return 6;
  case 0xa0:
    return 6;
  case 0xa1:
    return 6;
  case 0xa2:
    return 7;
  case 0xa3:
    return 6;
  case 0xa4:
    return 6;
  case 0xa5:
    return 7;
  case 0xa6:
    return 6;
  case 0xa7:
    return 6;
  case 0xa8:
    return 7;
  case 0xa9:
    return 2;
  case 0xaa:
    return 3;
  case 0xab:
    return 3;
  case 0xac:
    return 4;
  case 0xad:
    break;
  case 0xae:
    return 1;
  case 0xaf:
    return 1;
  case 0xb0:
    return 1;
  case 0xb1:
    return 1;
  case 0xb2:
    return 2;
  case 0xb3:
    return 5;
  case 0xb4:
    return 5;
  case 0xb5:
    return 1;
  case 0xb6:
    return 1;
  case 0xb7:
    return 3;
  case 0xb8:
    return 1;
  case 0xb9:
    return 1;
  case 0xba:
    return 2;
  case 0xbb:
    return 4;
  case 0xbc:
    return 4;
  case 0xbd:
    return 0xc;
  case 0xbe:
    return 0xb;
  case 0xbf:
    return 9;
  case 0xc0:
    return 8;
  case 0xc1:
    return 5;
  case 0xc2:
    return 3;
  case 0xc3:
    return 3;
  case 0xc4:
    return 4;
  case 0xc5:
    return 5;
  case 0xc6:
    return 6;
  case 199:
    return 6;
  case 200:
    return 6;
  case 0xc9:
    return 2;
  case 0xca:
    return 5;
  case 0xcb:
    return 2;
  case 0xcc:
    return 5;
  case 0xcd:
    return 5;
  case 0xce:
    return 2;
  case 0xcf:
    return 2;
  case 0xd0:
    return 4;
  case 0xd1:
    return 2;
  case 0xd2:
    return 1;
  case 0xd3:
    return 1;
  case 0xd4:
    return 3;
  case 0xd5:
    return 6;
  case 0xd6:
    return 4;
  case 0xd7:
    return 2;
  case 0xd8:
    return 1;
  case 0xd9:
    return 5;
  case 0xda:
    return 1;
  case 0xdb:
    return 1;
  case 0xdc:
    return 2;
  case 0xdd:
    return 1;
  case 0xde:
    return 1;
  case 0xdf:
    return 2;
  case 0xe0:
    return 3;
  case 0xe1:
    return 3;
  case 0xe2:
    return 4;
  case 0xe3:
    return 2;
  case 0xe4:
    return 2;
  case 0xe5:
    return 3;
  case 0xe6:
    return 5;
  case 0xe7:
    return 2;
  case 0xe8:
    return 2;
  case 0xe9:
    return 1;
  case 0xea:
    return 1;
  case 0xeb:
    return 2;
  case 0xec:
    return 1;
  case 0xed:
    return 1;
  case 0xee:
    return 0xd;
  case 0xef:
    return 1;
  case 0xf0:
    return 2;
  case 0xf1:
    return 2;
  case 0xf2:
    return 3;
  case 0xf3:
    return 2;
  case 0xf4:
    return 4;
  case 0xf5:
    return 2;
  case 0xf6:
    return 1;
  case 0xf7:
    return 3;
  case 0xf8:
    return 3;
  case 0xf9:
    return 1;
  case 0xfa:
    return 1;
  case 0xfb:
    return 1;
  case 0xfc:
    return 2;
  default:
    return 1;
  }
  iVar3 = param_2 + 1;
  if (((undefined *)(param_1 + param_2))[1] == '\0') {
    iVar3 -= param_2;
  }
  else {
    cVar1 = *(char *)(param_1 + iVar3 + 1);
    iVar2 = param_1 + iVar3;
    while( true ) {
      iVar3 += 1;
      if (cVar1 == '\0') break;
      cVar1 = *(char *)(iVar2 + 2);
      iVar2 = iVar2 + 1;
    }
    iVar3 -= param_2;
  }
  return iVar3 + 1;
}



undefined * proc_7F035244(undefined *param_1,undefined4 *param_2)

{
  struct_13 *psVar1;
  undefined *puVar2;
  int iVar3;
  struct_13 *psVar4;
  undefined *puVar5;
  
  if ((ptr_setup_actions != NULL) && (iVar3 = 0, *(int *)ptr_setup_actions != 0)) {
    puVar2 = *(undefined **)ptr_setup_actions;
    puVar5 = ptr_setup_actions;
    do {
      if (param_1 == puVar2) {
        *param_2 = 0;
        return *(undefined **)(ptr_setup_actions + iVar3 + 4);
      }
      puVar2 = *(undefined **)(puVar5 + 8);
      iVar3 += 8;
      puVar5 = puVar5 + 8;
    } while (puVar2 != NULL);
  }
  psVar4 = &stru_8003744C;
  puVar2 = (undefined *)stru_8003744C.anonymous_0;
  if (stru_8003744C.anonymous_0 != NULL) {
    do {
      if (param_1 == puVar2) {
        *param_2 = 1;
        return (undefined *)psVar4->anonymous_1;
      }
      psVar1 = psVar4 + 1;
      psVar4 = psVar4 + 1;
      puVar2 = (undefined *)psVar1->anonymous_0;
    } while ((undefined *)psVar1->anonymous_0 != NULL);
  }
  return (undefined *)0xffffffff;
}



int proc_7F0352F0(undefined *param_1,int param_2,char param_3)

{
  char cVar1;
  int iVar2;
  undefined4 auStack12 [3];
  
  do {
    cVar1 = param_1[param_2];
    if (cVar1 == '\x02') {
      if (param_3 == (param_1 + param_2)[1]) {
        return param_2;
      }
    }
    else {
      if (cVar1 == '\x04') {
        proc_7F035244(param_1,auStack12);
        return 0;
      }
    }
    iVar2 = get_length_of_action_block((int)param_1,param_2);
    param_2 += iVar2;
  } while( true );
}



undefined * proc_7F035398(undefined *param_1)

{
  undefined4 *puVar1;
  struct_13 *psVar2;
  undefined *puVar3;
  
  if ((int)param_1 < 0x401) {
    psVar2 = &stru_8003744C;
    puVar3 = (undefined *)stru_8003744C.anonymous_1;
    if (stru_8003744C.anonymous_0 != NULL) {
      while( true ) {
        if (param_1 == puVar3) {
          return (undefined *)psVar2->anonymous_0;
        }
        if (psVar2[1].anonymous_0 == NULL) break;
        puVar3 = (undefined *)psVar2[1].anonymous_1;
        psVar2 = psVar2 + 1;
      }
    }
  }
  else {
    if ((ptr_setup_actions != NULL) && (*(int *)ptr_setup_actions != 0)) {
      puVar3 = *(undefined **)(ptr_setup_actions + 4);
      puVar1 = (undefined4 *)ptr_setup_actions;
      while( true ) {
        if (param_1 == puVar3) {
          return (undefined *)*puVar1;
        }
        if (puVar1[2] == 0) break;
        puVar3 = (undefined *)puVar1[3];
        puVar1 = puVar1 + 2;
      }
    }
  }
  return NULL;
}



int * get_ptr_path_for_pathnum(ulonglong pathnum)

{
  byte bVar1;
  undefined *puVar2;
  int iVar3;
  
  iVar3 = 0;
  if (*(int *)ptr_setup_path_sets != 0) {
    bVar1 = ptr_setup_path_sets[4];
    puVar2 = ptr_setup_path_sets;
    while( true ) {
      if (pathnum == (ulonglong)bVar1) {
        return (int *)(ptr_setup_path_sets + iVar3 * 8);
      }
      iVar3 += 1;
      if (*(int *)(puVar2 + 8) == 0) break;
      bVar1 = puVar2[0xc];
      puVar2 = puVar2 + 8;
    }
  }
  return NULL;
}


/*
Unable to decompile 'parse_handle_actionblocks'
Cause: Exception while decompiling 7f035484: process: timeout

*/


// WARNING: Instruction at (ram,0x7f03a330) overlaps instruction at (ram,0x7f03a32c)
// 

void proc_7F03A240(void)

{
  byte bVar1;
  undefined4 uVar2;
  bool bVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  
  iVar4 = get_ptr_obj_pos_list_current_entry();
  iVar8 = 0;
  if (iVar4 != 0) {
    bVar1 = *(byte *)(iVar4 + 1);
    while( true ) {
      if ((bVar1 & 6) == 6) {
        (&DAT_80071620)[iVar8] = iVar4;
        iVar8 += 1;
        iVar4 = *(int *)(iVar4 + 0x24);
      }
      else {
        iVar4 = *(int *)(iVar4 + 0x24);
      }
      if (iVar4 == 0) break;
      bVar1 = *(byte *)(iVar4 + 1);
    }
  }
  DAT_80071df4 = iVar8;
  (&DAT_80071620)[iVar8] = 0;
  DAT_80071df0 = &DAT_80071620 + iVar8;
  iVar4 = 0;
  if (iVar8 < 1) {
    return;
  }
  bVar3 = 0 < iVar8;
  do {
    iVar7 = -1;
    if (bVar3) {
      uVar9 = iVar8 - iVar4 & 3;
      if (uVar9 == 0) {
        iVar10 = iVar4 << 2;
        fVar12 = -4294967296.00000000;
        iVar5 = iVar4;
      }
      else {
        piVar6 = &DAT_80071620 + iVar4;
        fVar13 = -4294967296.00000000;
        iVar5 = iVar4;
        iVar10 = iVar7;
        do {
          fVar12 = *(float *)(*piVar6 + 0x18);
          iVar7 = iVar5;
          if (fVar12 <= fVar13) {
            fVar12 = fVar13;
            iVar7 = iVar10;
          }
          iVar5 += 1;
          piVar6 = piVar6 + 1;
          fVar13 = fVar12;
          iVar10 = iVar7;
        } while (uVar9 + iVar4 != iVar5);
        iVar10 = iVar5 * 4;
        if (iVar5 == iVar8) goto LAB_7f03a3c4;
      }
      piVar6 = (int *)((int)&DAT_80071620 + iVar10);
      do {
        fVar13 = *(float *)(*piVar6 + 0x18);
        if (fVar12 < fVar13) {
          iVar10 = piVar6[1];
          iVar7 = iVar5;
        }
        else {
          iVar10 = piVar6[1];
          fVar13 = fVar12;
        }
        fVar11 = *(float *)(iVar10 + 0x18);
        if (fVar13 < fVar11) {
          iVar7 = iVar5 + 1;
          iVar10 = piVar6[2];
        }
        else {
          iVar10 = piVar6[2];
          fVar11 = fVar13;
        }
        fVar12 = *(float *)(iVar10 + 0x18);
        if (fVar11 < fVar12) {
          iVar7 = iVar5 + 2;
          iVar10 = piVar6[3];
        }
        else {
          iVar10 = piVar6[3];
          fVar12 = fVar11;
        }
        if (fVar12 < *(float *)(iVar10 + 0x18)) {
          iVar7 = iVar5 + 3;
          fVar12 = *(float *)(iVar10 + 0x18);
        }
        iVar5 += 4;
        piVar6 = piVar6 + 4;
      } while (iVar5 != iVar8);
    }
LAB_7f03a3c4:
    if (-1 < iVar7) {
      uVar2 = (&DAT_80071620)[iVar4];
      (&DAT_80071620)[iVar4] = (&DAT_80071620)[iVar7];
      (&DAT_80071620)[iVar7] = uVar2;
    }
    iVar4 += 1;
    if (iVar4 == iVar8) {
      return;
    }
    bVar3 = iVar4 < iVar8;
  } while( true );
}



void set_stateflag_0x04_for_posdata(int param_1)

{
  *(byte *)(param_1 + 1) = *(byte *)(param_1 + 1) | 4;
  return;
}



void unset_stateflag_0x04_for_posdata(int param_1)

{
  *(byte *)(param_1 + 1) = *(byte *)(param_1 + 1) & 0xfb;
  return;
}



object_standard * get_ptr_obj_pos_list_current_entry(void)

{
  return ptr_obj_pos_list_current_entry;
}



object_standard * remove_last_obj_pos_data_entry(void)

{
  int *piVar1;
  object_standard *poVar2;
  
  poVar2 = ptr_obj_pos_list_final_entry;
  if (ptr_obj_pos_list_final_entry == NULL) {
    return NULL;
  }
  piVar1 = &ptr_obj_pos_list_final_entry->runtime_MATRIX3;
  ptr_obj_pos_list_final_entry = (object_standard *)ptr_obj_pos_list_final_entry->runtime_MATRIX3;
  *piVar1 = 0;
  poVar2->runtime_MATRIX4 = 0;
  poVar2->runtime_MATRIX1 = 0;
  poVar2->runtime_MATRIX2 = 0;
  *(undefined *)((int)&poVar2->scale + 1) = 0;
  poVar2->runtime_ptr_obj_instance_controller = 0;
  *(undefined2 *)&poVar2->runtime_state = 0;
  *(undefined *)&poVar2->runtime_MATRIX5 = 0xff;
  return poVar2;
}



void set_last_obj_pos_data(object_standard *param_1)

{
  param_1->runtime_MATRIX4 = 0;
  param_1->runtime_ptr_obj_instance_controller = 0;
  *(object_standard **)&param_1->runtime_MATRIX3 = ptr_obj_pos_list_final_entry;
  ptr_obj_pos_list_final_entry = param_1;
  return;
}



void set_current_objposdata_plus_0x28(object_standard *param_1)

{
  if (ptr_obj_pos_list_current_entry != NULL) {
    *(object_standard **)&ptr_obj_pos_list_current_entry->runtime_MATRIX4 = param_1;
    param_1->runtime_MATRIX4 = 0;
    *(object_standard **)&param_1->runtime_MATRIX3 = ptr_obj_pos_list_current_entry;
    ptr_obj_pos_list_current_entry = param_1;
    return;
  }
  param_1->runtime_MATRIX3 = 0;
  param_1->runtime_MATRIX4 = 0;
  ptr_obj_pos_list_current_entry = param_1;
  ptr_obj_pos_list_first_entry = param_1;
  return;
}



void proc_7F03A4F0(int param_1)

{
  if (ptr_obj_pos_list_first_entry == NULL) {
    *(undefined4 *)(param_1 + 0x24) = 0;
    *(undefined4 *)(param_1 + 0x28) = 0;
    ptr_obj_pos_list_current_entry = (object_standard *)param_1;
    ptr_obj_pos_list_first_entry = (object_standard *)param_1;
    return;
  }
  ptr_obj_pos_list_first_entry->runtime_MATRIX3 = param_1;
  *(undefined4 *)(param_1 + 0x24) = 0;
  *(object_standard **)(param_1 + 0x28) = ptr_obj_pos_list_first_entry;
  ptr_obj_pos_list_first_entry = (object_standard *)param_1;
  return;
}



void proc_7F03A538(int param_1)

{
  int iVar1;
  
  if ((object_standard *)param_1 == ptr_obj_pos_list_current_entry) {
    ptr_obj_pos_list_current_entry = *(object_standard **)(param_1 + 0x24);
  }
  if ((object_standard *)param_1 == ptr_obj_pos_list_first_entry) {
    ptr_obj_pos_list_first_entry = *(object_standard **)(param_1 + 0x28);
    iVar1 = *(int *)(param_1 + 0x24);
  }
  else {
    iVar1 = *(int *)(param_1 + 0x24);
  }
  if (iVar1 == 0) {
    iVar1 = *(int *)(param_1 + 0x28);
  }
  else {
    *(undefined4 *)(iVar1 + 0x28) = *(undefined4 *)(param_1 + 0x28);
    iVar1 = *(int *)(param_1 + 0x28);
  }
  if (iVar1 == 0) {
    *(undefined4 *)(param_1 + 0x24) = 0;
  }
  else {
    *(undefined4 *)(iVar1 + 0x24) = *(undefined4 *)(param_1 + 0x24);
    *(undefined4 *)(param_1 + 0x24) = 0;
  }
  *(undefined4 *)(param_1 + 0x28) = 0;
  return;
}



void proc_7F03A5A4(int param_1,int param_2)

{
  *(int *)(param_1 + 0x1c) = param_2;
  if (*(int *)(param_2 + 0x20) == 0) {
    *(undefined4 *)(param_1 + 0x24) = 0;
  }
  else {
    *(int *)(*(int *)(param_2 + 0x20) + 0x28) = param_1;
    *(undefined4 *)(param_1 + 0x24) = *(undefined4 *)(param_2 + 0x20);
  }
  *(undefined4 *)(param_1 + 0x28) = 0;
  *(undefined4 *)(param_1 + 0x14) = 0;
  *(int *)(param_2 + 0x20) = param_1;
  return;
}



void proc_7F03A5D0(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0x1c);
  if (iVar1 != 0) {
    if (param_1 == *(int *)(iVar1 + 0x20)) {
      *(undefined4 *)(iVar1 + 0x20) = *(undefined4 *)(param_1 + 0x24);
      iVar1 = *(int *)(param_1 + 0x24);
    }
    else {
      iVar1 = *(int *)(param_1 + 0x24);
    }
    if (iVar1 == 0) {
      iVar1 = *(int *)(param_1 + 0x28);
    }
    else {
      *(undefined4 *)(iVar1 + 0x28) = *(undefined4 *)(param_1 + 0x28);
      iVar1 = *(int *)(param_1 + 0x28);
    }
    if (iVar1 == 0) {
      *(undefined4 *)(param_1 + 0x1c) = 0;
    }
    else {
      *(undefined4 *)(iVar1 + 0x24) = *(undefined4 *)(param_1 + 0x24);
      *(undefined4 *)(param_1 + 0x1c) = 0;
    }
    *(undefined4 *)(param_1 + 0x24) = 0;
    *(undefined4 *)(param_1 + 0x28) = 0;
  }
  return;
}



undefined8 proc_7F03A62C(undefined8 param_1,char *param_2,longlong param_3)

{
  char cVar1;
  uint uVar2;
  
  uVar2 = (uint)param_3;
  cVar1 = *param_2;
  if (cVar1 == '\x03') {
    param_1 = proc_7F021BFC(param_2,(uint *)param_1,uVar2);
  }
  else {
    if (((cVar1 == '\x01') || (cVar1 == '\x04')) || (cVar1 == '\x02')) {
      param_1 = proc_7F04B150(param_2,(uint *)param_1,uVar2);
    }
    else {
      if (cVar1 == '\a') {
        param_1 = proc_7F09D5A0(param_2,param_1,param_3);
      }
      else {
        if (cVar1 == '\b') {
          param_1 = proc_7F09F03C(param_2,param_1,param_3);
        }
        else {
          if (cVar1 == '\x06') {
            param_1 = proc_7F08BCC0(param_2,param_1,uVar2);
          }
        }
      }
    }
  }
  return param_1;
}



longlong proc_7F03A6F4(longlong param_1,uint param_2,longlong param_3)

{
  char *pcVar1;
  uint uVar2;
  bool bVar3;
  LEVELID LVar5;
  ulonglong uVar4;
  uint *puVar6;
  char **ppcVar7;
  uint auStack40 [10];
  
  puVar6 = (uint *)param_1;
  LVar5 = get_stage_num();
  if (LVar5 == LEVELID_CUBA) {
    if (param_3 == 0) {
      return param_1;
    }
    if (param_3 == 2) {
      param_3 = 0;
    }
  }
  if ((param_3 == 0) || (param_3 == 2)) {
    ppcVar7 = DAT_80071df0 + -1;
    if ((char **)((int)&DAT_8007161c + 3) < ppcVar7) {
      pcVar1 = *ppcVar7;
      do {
        if (pcVar1 != NULL) {
          bVar3 = false;
          if ((param_3 == 0) && ((pcVar1[1] & 0x21U) == 0)) {
            bVar3 = true;
          }
          else {
            if ((param_3 == 2) && ((pcVar1[1] & 0x21U) == 1)) {
              bVar3 = true;
            }
          }
          if (bVar3) {
            bVar3 = false;
            proc_7F03CB8C(pcVar1,auStack40);
            puVar6 = auStack40;
            uVar2 = auStack40[0];
            while (-1 < (int)uVar2) {
              uVar4 = proc_7F0B5E50(uVar2);
              if (uVar4 != 0) {
                if (param_2 == *puVar6) {
                  bVar3 = true;
                }
                break;
              }
              uVar2 = puVar6[1];
              puVar6 = puVar6 + 1;
            }
            if (bVar3) {
              param_1 = proc_7F03A62C(param_1,pcVar1,0);
            }
          }
        }
        puVar6 = (uint *)param_1;
        ppcVar7 = ppcVar7 + -1;
        if (ppcVar7 < &DAT_80071620) break;
        pcVar1 = *ppcVar7;
      } while( true );
    }
  }
  else {
    ppcVar7 = (char **)&DAT_80071620;
    if (&DAT_80071620 < DAT_80071df0) {
      pcVar1 = DAT_80071620;
      do {
        bVar3 = false;
        if (pcVar1 != NULL) {
          proc_7F03CB8C(pcVar1,auStack40);
          puVar6 = auStack40;
          uVar2 = auStack40[0];
          while (-1 < (int)uVar2) {
            uVar4 = proc_7F0B5E50(uVar2);
            if (uVar4 != 0) {
              if (param_2 == *puVar6) {
                bVar3 = true;
              }
              break;
            }
            uVar2 = puVar6[1];
            puVar6 = puVar6 + 1;
          }
          if (bVar3) {
            if ((pcVar1[1] & 0x20U) != 0) {
              param_1 = proc_7F03A62C(param_1,pcVar1,0);
            }
            param_1 = proc_7F03A62C(param_1,pcVar1,1);
          }
        }
        puVar6 = (uint *)param_1;
        ppcVar7 = ppcVar7 + 1;
        if (DAT_80071df0 <= ppcVar7) break;
        pcVar1 = *ppcVar7;
      } while( true );
    }
  }
  puVar6 = proc_7F0B4FB4(puVar6);
  return (longlong)(int)puVar6;
}



undefined8 proc_7F03A97C(int param_1,float *param_2,float *param_3)

{
  int iVar1;
  BOOL BVar3;
  undefined8 uVar2;
  int local_18;
  int local_14;
  int local_10;
  int local_c;
  int local_8;
  int local_4;
  
  iVar1 = param_1 * 0x50;
  if ((&DAT_80041440)[param_1 * 0x14] == 0) {
    uVar2 = 0;
  }
  else {
    local_18 = (int)*(float *)(&DAT_8004144c + iVar1);
    local_14 = (int)*(float *)(&DAT_80041450 + iVar1);
    local_10 = (int)*(float *)(&DAT_80041454 + iVar1);
    local_c = (int)*(float *)(&DAT_80041458 + iVar1);
    local_8 = (int)*(float *)(&DAT_8004145c + iVar1);
    local_4 = (int)*(float *)(&DAT_80041460 + iVar1);
    BVar3 = proc_7F0B6CEC(param_2,param_3,&local_18,&local_c);
    if (BVar3 == FALSE) {
      uVar2 = 0;
    }
    else {
      uVar2 = 1;
    }
  }
  return uVar2;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F03AA44(void)

{
  char cVar1;
  int iVar3;
  longlong lVar2;
  float *in_a1_lo;
  float *in_a2_lo;
  int in_a3_lo;
  int iVar4;
  char *pcVar5;
  f32 fVar6;
  f32 fVar7;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fVar6 = proc_7F0B483C();
  fVar7 = proc_7F0B4878();
  iVar4 = 1;
  fStack24 = *in_a2_lo - *in_a1_lo;
  fStack20 = in_a2_lo[1] - in_a1_lo[1];
  fStack4 = (float)fVar7 * (float)fVar6;
  fStack16 = in_a2_lo[2] - in_a1_lo[2];
  fStack12 = *in_a1_lo * fStack4;
  fStack8 = in_a1_lo[1] * fStack4;
  fStack4 = in_a1_lo[2] * fStack4;
  iVar3 = proc_7F0B5E44();
  pcVar5 = (char *)(in_a3_lo + 1);
  if (1 < iVar3) {
    cVar1 = *pcVar5;
    while( true ) {
      if ((cVar1 == '\0') && (lVar2 = proc_7F03A97C(iVar4,&fStack12,&fStack24), lVar2 == 0)) {
        *pcVar5 = '\x01';
      }
      iVar4 += 1;
      pcVar5 = pcVar5 + 1;
      iVar3 = proc_7F0B5E44();
      if (iVar3 <= iVar4) break;
      cVar1 = *pcVar5;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

uint proc_7F03AB58(void)

{
  uint uVar1;
  int iVar3;
  longlong lVar2;
  float *in_a0_lo;
  float *in_a1_lo;
  float *in_a2_lo;
  float *in_a3_lo;
  float *pfVar4;
  float *pfVar5;
  float *pfVar6;
  uint *puVar7;
  uint *puVar8;
  f32 fVar9;
  float fVar10;
  float fVar11;
  int in_stack_00000010;
  float *in_stack_00000014;
  uint in_stack_00000018;
  float fStack460;
  float fStack456;
  float fStack452;
  float afStack412 [3];
  uint auStack400 [100];
  
  fVar9 = proc_7F0B4830();
  iVar3 = proc_7F0B8E98(auStack400,100);
  puVar7 = auStack400;
  if (iVar3 < 1) {
    return in_stack_00000018;
  }
  puVar8 = puVar7 + iVar3;
  do {
    if (*(char *)(auStack400[0] + in_stack_00000010) == '\0') {
      *(char *)(auStack400[0] + in_stack_00000010) = '\x01';
      lVar2 = proc_7F03A97C(*puVar7,in_a3_lo,in_a2_lo);
      if ((lVar2 != 0) && (iVar3 = proc_7F0B7A78(in_a0_lo,in_a1_lo,*puVar7,&fStack460), iVar3 != 0))
      {
        fStack460 = fStack460 * (float)fVar9;
        fStack456 = fStack456 * (float)fVar9;
        uVar1 = *puVar7;
        fStack452 = fStack452 * (float)fVar9;
        pfVar4 = &fStack460;
        pfVar6 = in_stack_00000014;
        if (0 < (int)in_stack_00000018) {
          fVar10 = *in_stack_00000014;
          fVar11 = *in_a0_lo;
          if (((fVar10 < fVar11) || (fStack460 < fVar11)) || (fVar10 <= fStack460)) {
            if (((fVar11 < fVar10) || (fVar11 < fStack460)) || (fStack460 <= fVar10))
            goto LAB_7f03adb4;
            fVar10 = in_stack_00000014[1];
          }
          else {
            fVar10 = in_stack_00000014[1];
          }
          fVar11 = in_a0_lo[1];
          if (((fVar10 < fVar11) || (fStack456 < fVar11)) || (fVar10 <= fStack456)) {
            if (((fVar11 < fVar10) || (fVar11 < fStack456)) || (fStack456 <= fVar10))
            goto LAB_7f03adb4;
            fVar10 = in_stack_00000014[2];
          }
          else {
            fVar10 = in_stack_00000014[2];
          }
          fVar11 = in_a0_lo[2];
          if ((((fVar10 < fVar11) || (fStack452 < fVar11)) ||
              (pfVar4 = &fStack460, pfVar6 = in_stack_00000014, fVar10 <= fStack452)) &&
             (((fVar11 < fVar10 || (fVar11 < fStack452)) ||
              (pfVar4 = &fStack460, pfVar6 = in_stack_00000014, fStack452 <= fVar10))))
          goto LAB_7f03adb4;
        }
        do {
          pfVar5 = pfVar4 + 3;
          *pfVar6 = *pfVar4;
          pfVar6[1] = pfVar4[1];
          pfVar6[2] = pfVar4[2];
          pfVar4 = pfVar5;
          pfVar6 = pfVar6 + 3;
          in_stack_00000018 = uVar1;
        } while (pfVar5 != afStack412);
      }
    }
LAB_7f03adb4:
    puVar7 = puVar7 + 1;
    if (puVar8 <= puVar7) {
      return in_stack_00000018;
    }
    auStack400[0] = *puVar7;
  } while( true );
}



ulonglong proc_7F03ADF4(byte param_1,float *param_2,float *param_3,float *param_4,float *param_5,
                       int param_6,float *param_7)

{
  byte bVar1;
  longlong lVar2;
  int iVar3;
  byte *pbVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  byte *pbVar9;
  int aiStack660 [101];
  byte abStack256 [256];
  
  iVar6 = 1;
  iVar8 = 0;
  pbVar9 = abStack256;
  abStack256[0] = param_1;
  do {
    bVar1 = *pbVar9;
    if (*(char *)(param_6 + (uint)bVar1) == '\0') {
      *(char *)(param_6 + (uint)bVar1) = '\x01';
      lVar2 = proc_7F03A97C((uint)bVar1,param_5,param_4);
      if ((lVar2 != 0) && (iVar3 = proc_7F0B7A78(param_2,param_3,(uint)bVar1,param_7), iVar3 != 0))
      {
        return (ulonglong)bVar1;
      }
    }
    iVar7 = 0;
    iVar3 = proc_7F0B8EFC((ulonglong)bVar1,aiStack660,100);
    if (0 < iVar3) {
      do {
        iVar5 = 0;
        if (0 < iVar6) {
          pbVar4 = abStack256;
          do {
            if ((ulonglong)*pbVar4 == (longlong)aiStack660[iVar7]) break;
            iVar5 += 1;
            pbVar4 = pbVar4 + 1;
          } while (iVar5 != iVar6);
        }
        if (iVar5 == iVar6) {
          pbVar4 = abStack256 + iVar6;
          iVar6 += 1;
          *pbVar4 = (byte)aiStack660[iVar7];
        }
        iVar7 += 1;
      } while (iVar7 < iVar3);
    }
    iVar8 += 1;
    pbVar9 = pbVar9 + 1;
    if (iVar6 <= iVar8) {
      return 0;
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

int proc_7F03AF5C(void)

{
  char cVar1;
  int iVar3;
  longlong lVar2;
  float *in_a1_lo;
  float *in_a2_lo;
  float *in_a3_lo;
  int iVar4;
  char *pcVar5;
  int iVar6;
  f32 fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float *in_stack_00000010;
  int in_stack_00000014;
  float *in_stack_00000018;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  undefined2 uStack16;
  short sStack14;
  
  fVar11 = 4294967296.00000000;
  iVar6 = 0;
  fVar7 = proc_7F0B4830();
  iVar4 = 1;
  iVar3 = proc_7F0B5E44();
  if (1 < iVar3) {
    pcVar5 = (char *)(in_stack_00000014 + 1);
    cVar1 = *pcVar5;
    while( true ) {
      if (cVar1 == '\0') {
        *pcVar5 = '\x01';
        lVar2 = proc_7F03A97C(iVar4,in_stack_00000010,in_a3_lo);
        if ((lVar2 != 0) && (iVar3 = proc_7F0B7A78(in_a1_lo,in_a2_lo,iVar4,&fStack56), iVar3 != 0))
        {
          fVar8 = fStack56 * (float)fVar7 - *in_a1_lo;
          fVar9 = fStack52 * (float)fVar7 - in_a1_lo[1];
          fVar10 = fStack48 * (float)fVar7 - in_a1_lo[2];
          fVar8 = fVar8 * fVar8 + fVar9 * fVar9 + fVar10 * fVar10;
          lVar2 = check_if_imageID_is_light((longlong)sStack14);
          if (lVar2 != 0) {
            fVar8 = fVar8 - 4.00000000;
          }
          if (fVar8 < fVar11) {
            *in_stack_00000018 = fStack56;
            in_stack_00000018[1] = fStack52;
            in_stack_00000018[2] = fStack48;
            in_stack_00000018[3] = fStack44;
            in_stack_00000018[4] = fStack40;
            in_stack_00000018[5] = fStack36;
            in_stack_00000018[6] = fStack32;
            in_stack_00000018[7] = fStack28;
            in_stack_00000018[8] = fStack24;
            *(short *)((int)in_stack_00000018 + 0x2a) = sStack14;
            in_stack_00000018[9] = fStack20;
            *(undefined2 *)(in_stack_00000018 + 10) = uStack16;
            fVar11 = fVar8;
            iVar6 = iVar4;
          }
        }
      }
      iVar4 += 1;
      pcVar5 = pcVar5 + 1;
      iVar3 = proc_7F0B5E44();
      if (iVar3 <= iVar4) break;
      cVar1 = *pcVar5;
    }
  }
  return iVar6;
}



// WARNING: Instruction at (ram,0x7f03b764) overlaps instruction at (ram,0x7f03b760)
// 
// WARNING: Could not reconcile some variable overlaps

void proc_7F03B15C(undefined8 param_1)

{
  char *pcVar1;
  hit_header **pphVar2;
  bool bVar3;
  int iVar6;
  xyzpoint *pxVar7;
  char cVar9;
  ulonglong uVar4;
  u32 uVar8;
  longlong lVar5;
  int *piVar10;
  undefined8 extraout_a2;
  int iVar12;
  undefined8 extraout_a2_00;
  undefined8 extraout_a2_01;
  undefined8 uVar11;
  undefined8 extraout_a2_02;
  undefined8 extraout_a2_03;
  undefined8 extraout_a2_04;
  undefined8 extraout_a3;
  undefined8 extraout_a3_00;
  undefined8 extraout_a3_01;
  undefined8 uVar13;
  undefined8 extraout_a3_02;
  undefined8 extraout_a3_03;
  undefined8 extraout_a3_04;
  float fVar14;
  byte bVar15;
  float *pfVar16;
  char **ppcVar17;
  f32 fVar18;
  f32 fVar19;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  char cStack1320;
  undefined uStack1319;
  float fStack1292;
  float fStack1288;
  float fStack1284;
  float fStack1280;
  float fStack1276;
  float fStack1272;
  float fStack1268;
  int aiStack1260 [64];
  int aiStack1004 [2];
  float fStack996;
  float fStack992;
  float fStack988;
  float fStack984;
  float fStack980;
  float fStack976;
  ITEM_IDS IStack972;
  float fStack968;
  float fStack964;
  float fStack960;
  float fStack956;
  float fStack952;
  float fStack948;
  float fStack944;
  char *pcStack936;
  undefined4 uStack932;
  undefined4 uStack928;
  undefined4 uStack856;
  undefined4 uStack852;
  undefined4 uStack848;
  float afStack836 [160];
  float afStack196 [14];
  float fStack140;
  float fStack136;
  float fStack132;
  int aiStack128 [2];
  float fStack120;
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  float afStack92 [6];
  int iStack68;
  short sStack64;
  short sStack62;
  int iStack56;
  undefined4 uStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  int iStack36;
  int iStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  int iStack12;
  
  iStack12 = 0;
  iStack28 = 0;
  iStack36 = 0;
  uStack52 = 0;
  iVar6 = get_curplayer_positiondata();
  aiStack128[0] = *(int *)(iVar6 + 0x14);
  aiStack1004[0] = 0;
  proc_7F0681CC();
  IStack972 = get_item_in_hand(param_1._4_4_);
  pcStack936 = NULL;
  uStack932 = 0;
  uStack928 = 0;
  uStack856 = 0;
  uStack852 = 0;
  uStack848 = 0;
  fStack944 = 4294967296.00000000;
  pfVar16 = afStack836;
  do {
    pfVar16 = pfVar16 + 0x50;
    pfVar16[0x23] = 0.00000000;
    pfVar16[0x24] = 0.00000000;
    pfVar16[0x25] = 0.00000000;
    pfVar16[0x37] = 0.00000000;
    pfVar16[0x38] = 0.00000000;
    pfVar16[0x39] = 0.00000000;
    pfVar16[0x4b] = 0.00000000;
    pfVar16[0x4c] = 0.00000000;
    pfVar16[0x4d] = 0.00000000;
    pfVar16[0xf] = 0.00000000;
    pfVar16[0x10] = 0.00000000;
    pfVar16[0x11] = 0.00000000;
    pfVar16 = pfVar16;
  } while (pfVar16 != afStack196);
  fStack968 = fStack996;
  fStack964 = fStack992;
  fStack960 = fStack988;
  pfVar16 = (float *)proc_7F078444();
  proc_7F058474(pfVar16,&fStack968);
  fStack956 = fStack984;
  fStack952 = fStack980;
  fStack948 = fStack976;
  pfVar16 = (float *)proc_7F078444();
  lVar5 = (longlong)(int)pfVar16;
  proc_7F0583D8(pfVar16,&fStack956);
  fStack140 = fStack956 * 65536.00000000 + fStack968;
  fStack136 = fStack952 * 65536.00000000 + fStack964;
  fStack132 = fStack948 * 65536.00000000 + fStack960;
  proc_7F0B0BE4(aiStack128,extraout_f12,extraout_f14,*(float *)(iVar6 + 8),*(float *)(iVar6 + 0x10))
  ;
  uVar11 = extraout_a2;
  uVar13 = extraout_a3;
  if (lVar5 != 0) {
    fVar18 = proc_7F0B483C();
    fVar19 = proc_7F0B4878();
    fStack1292 = (float)fVar19 * (float)fVar18;
    pxVar7 = get_BONDdata_position();
    lVar5 = (longlong)(int)pxVar7;
    proc_7F0B1CC4();
    proc_7F0B0BE4(aiStack128,extraout_f12_00,extraout_f14_00,fStack968,fStack960);
    if (lVar5 == 0) {
      proc_7F02624C(&fStack968,&fStack956,&fStack24);
      iStack12 = 1;
    }
    else {
      fStack24 = fStack140;
      fStack20 = fStack136;
      fStack16 = fStack132;
    }
    fStack1288 = fStack24 - pxVar7->x;
    fStack1284 = fStack20 - pxVar7->y;
    fStack1280 = fStack16 - pxVar7->z;
    fStack1276 = pxVar7->x * fStack1292;
    fStack1272 = pxVar7->y * fStack1292;
    iStack28 = aiStack128[0];
    fStack1268 = pxVar7->z * fStack1292;
    uVar4 = proc_7F0B2FD8(aiStack128[0]);
    piVar10 = aiStack1260;
    do {
      piVar10 = piVar10 + 1;
      *(undefined *)((int)piVar10 + 1) = 0;
      *(undefined *)((int)piVar10 + 2) = 0;
      *(undefined *)((int)piVar10 + 3) = 0;
      *(undefined *)piVar10 = 0;
      piVar10 = piVar10;
    } while (piVar10 != aiStack1004);
    iVar12 = (int)uVar4;
    iVar6 = proc_7F0B7A78((float *)pxVar7,&fStack24,iVar12,&fStack104);
    if (iVar6 != 0) {
      uStack52 = iVar12;
    }
    *(undefined *)((int)aiStack1260 + iVar12) = 1;
    if (uStack52 < 1) {
      if (ptr_bgdata_portals->offset_portal == NULL) {
        iVar6 = get_curplayer_positiondata();
        proc_7F0B2FD8(*(int *)(iVar6 + 0x14));
        uStack52 = proc_7F03AF5C();
      }
      else {
        iVar6 = get_curplayer_positiondata();
        uVar4 = proc_7F0B2FD8(*(int *)(iVar6 + 0x14));
        uVar4 = proc_7F03ADF4((byte)uVar4,(float *)pxVar7,&fStack24,&fStack1288,&fStack1276,
                              (int)aiStack1260,&fStack104);
        uStack52 = (int)uVar4;
      }
    }
    if (0 < uStack52) {
      fVar18 = proc_7F0B4830();
      fStack104 = fStack104 * (float)fVar18;
      fStack100 = fStack100 * (float)fVar18;
      fStack96 = fStack96 * (float)fVar18;
    }
    lVar5 = proc_7F03AB58();
    if (lVar5 < 1) {
      iStack56 = -1;
      fStack120 = fStack140;
      fStack116 = fStack136;
      fStack112 = fStack132;
      uStack52 = iVar12;
    }
    else {
      iStack36 = 1;
      iStack56 = (int)sStack62;
      fStack48 = fStack104;
      fStack120 = fStack104;
      fStack44 = fStack100;
      fStack116 = fStack100;
      fStack40 = fStack96;
      fStack112 = fStack96;
      uStack52 = (int)lVar5;
    }
    if ((iStack12 != 0) || (uVar11 = extraout_a2_00, uVar13 = extraout_a3_00, iStack36 != 0)) {
      pfVar16 = (float *)proc_7F0783C4();
      proc_7F058474(pfVar16,&fStack120);
      fStack944 = -fStack112;
      uVar11 = extraout_a2_01;
      uVar13 = extraout_a3_01;
      fStack108 = fStack944;
    }
  }
  if ((IStack972 == ITEM_WATCHLASER) && (300.00000000 < fStack944)) {
    fStack944 = 300.00000000;
  }
  ppcVar17 = (char **)(DAT_80071df0 + -4);
  if (ppcVar17 <= (char **)((int)&DAT_8007161c + 3)) {
LAB_7f03b6a8:
    pcVar1 = pcStack936;
    pfVar16 = &fStack996;
    while( true ) {
      if (pcVar1 != NULL) {
        cVar9 = *pcVar1;
        if ((cVar9 == '\x03') || (cVar9 == '\x06')) {
          proc_7F022980(&fStack996,pfVar16 + 0xe);
          fVar14 = pfVar16[0x21];
        }
        else {
          if (((cVar9 == '\x01') || (cVar9 == '\x04')) || (cVar9 == '\x02')) {
            proc_7F04EA68(&fStack996,pfVar16 + 0xe);
            fVar14 = pfVar16[0x21];
          }
          else {
            fVar14 = pfVar16[0x21];
          }
        }
        if ((fVar14 != 0.00000000) &&
           (aiStack1004[0] = aiStack1004[0] + 1, uVar4 = proc_7F05E038(IStack972),
           (longlong)uVar4 <= (longlong)aiStack1004[0])) {
          iStack36 = 0;
          iStack12 = 0;
        }
      }
      if (pfVar16 + 0x14 == afStack196) break;
      pcVar1 = (char *)pfVar16[0x23];
      pfVar16 = pfVar16 + 0x14;
    }
    if ((iStack36 != 0) || (iStack12 != 0)) {
      pfVar16 = NULL;
      bVar3 = true;
      if ((IStack972 == ITEM_WATCHLASER) && (300.00000000 < fStack108)) {
        bVar3 = false;
      }
      if (iStack36 == 0) {
        if (iStack12 != 0) {
          pfVar16 = &fStack24;
          fStack24 = fStack956 * 65536.00000000 + fStack968;
          fStack20 = fStack952 * 65536.00000000 + fStack964;
          fStack16 = fStack948 * 65536.00000000 + fStack960;
        }
      }
      else {
        pphVar2 = hit_header_array[0];
        if (-1 < sStack62) {
          pphVar2 = hit_header_array[(uint)(byte)image_entries[(int)sStack62].flag1 & 0xf];
        }
        if (bVar3) {
          if ((0 < *(short *)((int)pphVar2 + 10)) && (IStack972 != ITEM_WATCHLASER)) {
            uVar8 = get_random_value();
            if (*(short *)((int)pphVar2 + 10) == 0) {
              trap(0x1c00);
            }
            proc_7F0A108C(&fStack48,afStack92,
                          (ushort)*(byte *)((int)&pphVar2[1]->pImageIDArray +
                                           uVar8 % (int)*(short *)((int)pphVar2 + 10)),
                          uStack52._2_2_,0,-1,0);
          }
          lVar5 = check_if_imageID_is_light((longlong)sStack62);
          if (lVar5 != 0) {
            proc_7F0BBE0C((longlong)iStack68,(longlong)sStack64,(short)uStack52);
          }
        }
        pfVar16 = &fStack48;
      }
      if (pfVar16 != NULL) {
        if (bVar3) {
          recall_joy2_hits_edit_flag(IStack972,pfVar16,iStack56);
          bVar15 = image_entries[iStack56].flag1 & 0xf;
          if ((bVar15 != 5) && (bVar15 != 6)) {
            cStack1320 = (char)uStack52;
            uStack1319 = 0xff;
            uVar8 = get_cur_playernum();
            proc_7F09C250(0,pfVar16,iStack28,1,0,(char)uVar8,&cStack1320,0);
          }
        }
        *pfVar16 = *pfVar16 - fStack956 * 26.00000000;
        pfVar16[1] = pfVar16[1] - fStack952 * 26.00000000;
        pfVar16[2] = pfVar16[2] - fStack948 * 26.00000000;
        proc_7F067B4C(pfVar16);
        if (bVar3) {
          proc_7F0A3E1C(pfVar16,1,extraout_f12_01,0);
        }
      }
    }
    return;
  }
  pcVar1 = *ppcVar17;
  do {
    extraout_a3_02._4_4_ = (undefined4)uVar13;
    extraout_a2_02._4_4_ = (undefined4)uVar11;
    if (pcVar1 != NULL) {
      if (*pcVar1 == '\x03') {
code_r0x7f03b650:
        proc_7F022648((int)pcVar1,&fStack996,extraout_a2_02._4_4_,extraout_a3_02._4_4_);
        uVar11 = extraout_a2_03;
        uVar13 = extraout_a3_03;
      }
      else {
        if (*pcVar1 == '\x06') {
          if (*(int *)(pcVar1 + 4) == 0) {
            cVar9 = *pcVar1;
          }
          else {
            lVar5 = proc_7F09B15C((int)pcVar1);
            uVar8 = get_cur_playernum();
            extraout_a3_02._4_4_ = (undefined4)extraout_a3_02;
            extraout_a2_02._4_4_ = (undefined4)extraout_a2_02;
            if (uVar8 != (u32)lVar5) goto code_r0x7f03b650;
            cVar9 = *pcVar1;
            uVar11 = extraout_a2_02;
            uVar13 = extraout_a3_02;
          }
        }
        else {
          cVar9 = *pcVar1;
        }
        if (((cVar9 == '\x01') || (cVar9 == '\x04')) || (cVar9 == '\x02')) {
          proc_7F04E9BC((int)pcVar1,&fStack996);
          uVar11 = extraout_a2_04;
          uVar13 = extraout_a3_04;
        }
      }
    }
    ppcVar17 = ppcVar17 + -1;
    if (ppcVar17 < &DAT_80071620) goto LAB_7f03b6a8;
    pcVar1 = *ppcVar17;
  } while( true );
}



void proc_7F03B9C0(int param_1,undefined4 param_2,float param_3,float param_4,undefined4 param_5,
                  undefined4 *param_6,undefined4 *param_7,undefined4 param_8,undefined4 param_9,
                  int param_10,int param_11)

{
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  int in_stack_00000028;
  
  if (param_11 == 0) goto LAB_7f03bc24;
  iVar5 = 0;
  iVar3 = 0;
  fVar9 = 0.00000000;
  fVar11 = 0.00000000;
  iVar4 = 0;
  iVar2 = param_1;
  do {
    fVar10 = fVar9;
    fVar12 = fVar11;
    iVar6 = iVar4;
    if ((*(int *)(iVar2 + 0x3c) != 0) &&
       (fVar10 = fVar9, fVar12 = fVar11, iVar6 = iVar4, *(int *)(iVar2 + 0x84) != 0)) {
      iVar5 += 1;
      fVar10 = *(float *)(iVar2 + 0x38);
      fVar12 = fVar9;
      iVar6 = iVar3;
      if (*(float *)(iVar2 + 0x38) <= fVar9) {
        fVar10 = fVar9;
        fVar12 = fVar11;
        iVar6 = iVar4;
      }
    }
    iVar3 += 1;
    iVar2 += 0x50;
    fVar9 = fVar10;
    fVar11 = fVar12;
    iVar4 = iVar6;
  } while (iVar3 < 10);
  uVar1 = proc_7F05E038(*(int *)(param_1 + 0x18));
  if ((longlong)iVar5 < (longlong)uVar1) {
    uVar1 = proc_7F05E038(*(int *)(param_1 + 0x18));
    if (((longlong)(iVar5 + 1) == uVar1) && (param_4 < *(float *)(param_1 + 0x34))) {
      *(float *)(param_1 + 0x34) = param_4;
    }
    goto LAB_7f03bc24;
  }
  *(undefined4 *)(param_1 + iVar6 * 0x50 + 0x3c) = 0;
  *(float *)(param_1 + 0x34) = fVar12;
  if (fVar12 < param_4) {
    *(float *)(param_1 + 0x34) = param_4;
  }
  iVar4 = 0xa0;
  if (*(int *)(param_1 + 0x3c) == 0) {
LAB_7f03bad8:
    iVar2 = *(int *)(param_1 + 0x8c);
  }
  else {
    if (*(int *)(param_1 + 0x84) == 0) {
      if (fVar12 < *(float *)(param_1 + 0x38)) {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        goto LAB_7f03bad8;
      }
      iVar2 = *(int *)(param_1 + 0x8c);
    }
    else {
      iVar2 = *(int *)(param_1 + 0x8c);
    }
  }
  if (iVar2 == 0) {
    iVar2 = param_1 + 0xa0;
  }
  else {
    if (*(int *)(param_1 + 0xd4) == 0) {
      if (fVar12 < *(float *)(param_1 + 0x88)) {
        *(undefined4 *)(param_1 + 0x8c) = 0;
        iVar2 = param_1 + 0xa0;
      }
      else {
        iVar2 = param_1 + 0xa0;
      }
    }
    else {
      iVar2 = param_1 + 0xa0;
    }
  }
  do {
    iVar4 += 0x140;
    if (*(int *)(iVar2 + 0x3c) == 0) {
      iVar3 = *(int *)(iVar2 + 0x8c);
    }
    else {
      if (*(int *)(iVar2 + 0x84) == 0) {
        if (fVar12 < *(float *)(iVar2 + 0x38)) {
          *(undefined4 *)(iVar2 + 0x3c) = 0;
          iVar3 = *(int *)(iVar2 + 0x8c);
        }
        else {
          iVar3 = *(int *)(iVar2 + 0x8c);
        }
      }
      else {
        iVar3 = *(int *)(iVar2 + 0x8c);
      }
    }
    if (iVar3 == 0) {
      iVar3 = *(int *)(iVar2 + 0xdc);
    }
    else {
      if (*(int *)(iVar2 + 0xd4) == 0) {
        if (fVar12 < *(float *)(iVar2 + 0x88)) {
          *(undefined4 *)(iVar2 + 0x8c) = 0;
          iVar3 = *(int *)(iVar2 + 0xdc);
        }
        else {
          iVar3 = *(int *)(iVar2 + 0xdc);
        }
      }
      else {
        iVar3 = *(int *)(iVar2 + 0xdc);
      }
    }
    if (iVar3 == 0) {
      iVar3 = *(int *)(iVar2 + 300);
    }
    else {
      if (*(int *)(iVar2 + 0x124) == 0) {
        if (fVar12 < *(float *)(iVar2 + 0xd8)) {
          *(undefined4 *)(iVar2 + 0xdc) = 0;
          iVar3 = *(int *)(iVar2 + 300);
        }
        else {
          iVar3 = *(int *)(iVar2 + 300);
        }
      }
      else {
        iVar3 = *(int *)(iVar2 + 300);
      }
    }
    if (((iVar3 != 0) && (*(int *)(iVar2 + 0x174) == 0)) && (fVar12 < *(float *)(iVar2 + 0x128))) {
      *(undefined4 *)(iVar2 + 300) = 0;
    }
    iVar2 += 0x140;
  } while (iVar4 != 800);
LAB_7f03bc24:
  if (((in_stack_00000028 != 0) && (*(int *)(param_1 + 0x18) != 0x12)) &&
     (*(int *)(param_1 + 0x18) != 0x14)) {
    if (*(int *)(param_1 + 0x3c) == 0) {
      iVar4 = *(int *)(param_1 + 0x8c);
    }
    else {
      if (param_4 < *(float *)(param_1 + 0x38)) {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        iVar4 = *(int *)(param_1 + 0x8c);
      }
      else {
        iVar4 = *(int *)(param_1 + 0x8c);
      }
    }
    if ((iVar4 != 0) && (param_4 < *(float *)(param_1 + 0x88))) {
      *(undefined4 *)(param_1 + 0x8c) = 0;
    }
    iVar2 = 0xa0;
    iVar4 = param_1 + 0xa0;
    do {
      iVar2 += 0x140;
      if (*(int *)(iVar4 + 0x3c) == 0) {
        iVar3 = *(int *)(iVar4 + 0x8c);
      }
      else {
        if (param_4 < *(float *)(iVar4 + 0x38)) {
          *(undefined4 *)(iVar4 + 0x3c) = 0;
          iVar3 = *(int *)(iVar4 + 0x8c);
        }
        else {
          iVar3 = *(int *)(iVar4 + 0x8c);
        }
      }
      if (iVar3 == 0) {
        iVar3 = *(int *)(iVar4 + 0xdc);
      }
      else {
        if (param_4 < *(float *)(iVar4 + 0x88)) {
          *(undefined4 *)(iVar4 + 0x8c) = 0;
          iVar3 = *(int *)(iVar4 + 0xdc);
        }
        else {
          iVar3 = *(int *)(iVar4 + 0xdc);
        }
      }
      if (iVar3 == 0) {
        iVar3 = *(int *)(iVar4 + 300);
      }
      else {
        if (param_4 < *(float *)(iVar4 + 0xd8)) {
          *(undefined4 *)(iVar4 + 0xdc) = 0;
          iVar3 = *(int *)(iVar4 + 300);
        }
        else {
          iVar3 = *(int *)(iVar4 + 300);
        }
      }
      if ((iVar3 != 0) && (param_4 < *(float *)(iVar4 + 0x128))) {
        *(undefined4 *)(iVar4 + 300) = 0;
      }
      iVar4 += 0x140;
    } while (iVar2 != 800);
    *(float *)(param_1 + 0x34) = param_4;
  }
  iVar4 = 0;
  do {
    iVar4 += 0x50;
    if (*(int *)(param_1 + 0x3c) == 0) {
      *(float *)(param_1 + 0x38) = param_4;
      *(undefined4 *)(param_1 + 0x3c) = param_2;
      *(undefined4 *)(param_1 + 0x40) = param_5;
      *(undefined4 **)(param_1 + 0x44) = param_6;
      puVar7 = param_7;
      iVar4 = param_1;
      do {
        puVar8 = puVar7 + 3;
        *(undefined4 *)(iVar4 + 0x48) = *puVar7;
        *(undefined4 *)(iVar4 + 0x4c) = puVar7[1];
        *(undefined4 *)(iVar4 + 0x50) = puVar7[2];
        puVar7 = puVar8;
        iVar4 = iVar4 + 0xc;
      } while (puVar8 != param_7 + 0xc);
      *(undefined4 *)(param_1 + 0x78) = param_8;
      *(undefined4 *)(param_1 + 0x7c) = param_9;
      *(int *)(param_1 + 0x80) = param_10;
      *(int *)(param_1 + 0x84) = param_11;
      return;
    }
    param_1 += 0x50;
  } while (iVar4 != 800);
  return;
}



// WARNING: Instruction at (ram,0x7f03bec8) overlaps instruction at (ram,0x7f03bec4)
// 

void proc_7F03BDEC(undefined4 param_1,longlong param_2)

{
  char *pcVar1;
  int iVar3;
  longlong lVar2;
  u32 uVar4;
  int iVar5;
  int iVar6;
  float *pfVar7;
  char **ppcVar8;
  float fVar9;
  float afStack80 [6];
  int iStack56;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  float afStack28 [4];
  int iStack12;
  
  iStack12 = 0;
  iVar3 = get_curplayer_positiondata();
  proc_7F089780(ptr_BONDdata);
  ppcVar8 = (char **)(DAT_80071df0 + -4);
  if (ppcVar8 <= (char **)((int)&DAT_8007161c + 3)) {
LAB_7f03c094:
    if ((iStack12 == 0) && (param_2 == 1)) {
      play_sfx_a1(ptr_sfx_buf,0x69,NULL);
    }
    return;
  }
  pcVar1 = *ppcVar8;
  do {
    if ((pcVar1 != NULL) && (*(float *)(pcVar1 + 0x18) < 500.00000000)) {
      if (*pcVar1 == '\x03') {
code_r0x7f03becc:
        fVar9 = 50.00000000;
        iVar6 = *(int *)(pcVar1 + 4);
        iVar5 = proc_7F05D078();
        if (iVar5 == 0x11) {
          fVar9 = 100.00000000;
        }
        proc_7F03F748(*(int *)(iVar6 + 0x1c),afStack28,&fStack32,0);
        if (0.00000000 <= afStack28[0]) {
          if ((fStack32 <= 0.00000000) &&
             (proc_7F03F748(*(int *)(iVar6 + 0x1c),&fStack36,&fStack40,1), 0.00000000 <= fStack36))
          {
            if ((fStack40 <= 0.00000000) &&
               ((proc_7F03F748(*(int *)(iVar6 + 0x1c),&fStack44,&fStack48,2), fStack48 <= 0.00000000
                && (-fVar9 <= fStack44)))) {
              iStack56 = *(int *)(iVar3 + 0x14);
              lVar2 = proc_7F0B0E24();
              if ((lVar2 != 0) && (iStack56 == *(int *)(pcVar1 + 0x14))) {
                iVar6 = proc_7F0799F0();
                if (iVar6 != 1) {
                  proc_7F0799F0();
                }
                proc_7F0681CC();
                pfVar7 = (float *)proc_7F078444();
                proc_7F0583D8(pfVar7,afStack80);
                lVar2 = proc_7F02727C();
                if (lVar2 != 0) {
                  iStack12 = 1;
                  recall_joy2_hits_edit_detail_edit_flag();
                }
              }
            }
          }
        }
      }
      else {
        if ((*pcVar1 == '\x06') && (*(int *)(pcVar1 + 4) != 0)) {
          lVar2 = proc_7F09B15C((int)pcVar1);
          uVar4 = get_cur_playernum();
          if ((longlong)(int)uVar4 != lVar2) goto code_r0x7f03becc;
        }
      }
    }
    ppcVar8 = ppcVar8 + -1;
    if (ppcVar8 < &DAT_80071620) goto LAB_7f03c094;
    pcVar1 = *ppcVar8;
  } while( true );
}



void proc_7F03C0F0(undefined8 param_1)

{
  longlong lVar1;
  ITEM_IDS weapon;
  int hand;
  
  hand = (int)param_1;
  lVar1 = get_hands_firing_status(hand);
  if (lVar1 != 0) {
    weapon = get_item_in_hand(hand);
    lVar1 = (longlong)(int)weapon;
    if (lVar1 == 0x1e) {
      trigger_remote_mine_detonation();
    }
    else {
      if ((((((lVar1 != 0x18) && (lVar1 != 0x19)) && (lVar1 != 0x1a)) &&
           ((lVar1 != 3 && (lVar1 != 0x1d)))) &&
          (((lVar1 != 0x1c && ((lVar1 != 0x1b && (lVar1 != 0x23)))) && (lVar1 != 0x24)))) &&
         ((((lVar1 != 0x21 && (lVar1 != 0x2f)) && (lVar1 != 0x30)) &&
          (((lVar1 != 0x3d && (lVar1 != 0x58)) && (lVar1 != 0x22)))))) {
        if (lVar1 == 0x20) {
          proc_7F05FB64(hand);
        }
        else {
          if ((lVar1 == 1) || (lVar1 == 2)) {
            proc_7F03BDEC(hand,lVar1);
          }
          else {
            if ((lVar1 == 0xf) || (lVar1 == 0x10)) {
              inc_curplayer_hitcount_with_weapon(weapon,0);
              hand = 0;
              do {
                proc_7F03B15C(param_1);
                hand += 1;
              } while (hand != 5);
            }
            else {
              if (lVar1 == 0x28) {
                proc_7F057898();
              }
              else {
                if (lVar1 == 0x3c) {
                  ptr_BONDdata->field_1270 = 0;
                }
                else {
                  inc_curplayer_hitcount_with_weapon(weapon,0);
                  proc_7F03B15C(param_1);
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F03C294(void)

{
  proc_7F03C0F0(0);
  proc_7F03C0F0(1);
  return;
}



void proc_7F03C2BC(char *param_1,longlong param_2)

{
  uint uVar1;
  int iVar2;
  
  if (param_2 != 1) {
    if (param_2 == 2) {
      proc_7F03E18C((int)param_1);
      proc_7F03A538((int)param_1);
      unset_stateflag_0x04_for_posdata((int)param_1);
      return;
    }
    if (param_2 != 4) {
      return;
    }
    proc_7F03E18C((int)param_1);
    proc_7F03A538((int)param_1);
    unset_stateflag_0x04_for_posdata((int)param_1);
    proc_7F04C044((int)param_1);
    proc_7F040CF0((int)param_1);
    iVar2 = get_curplayer_positiondata();
    proc_7F03A5A4((int)param_1,iVar2);
    return;
  }
  if (*param_1 == '\x04') {
    iVar2 = *(int *)(param_1 + 4);
  }
  else {
    if (*param_1 != '\x01') goto LAB_7f03c34c;
    iVar2 = *(int *)(param_1 + 4);
  }
  if ((*(byte *)(iVar2 + 2) & 4) != 0) {
    *(undefined2 *)(param_1 + 2) = 0x4b0;
    uVar1 = *(uint *)(iVar2 + 100);
    *(uint *)(iVar2 + 100) = uVar1 | 0x800;
    *(uint *)(iVar2 + 100) = uVar1 & 0xfffffffb | 0x800;
    *(byte *)(iVar2 + 2) = *(byte *)(iVar2 + 2) & 0x7f;
    *(undefined4 *)(iVar2 + 0x70) = 0;
    proc_7F03E18C((int)param_1);
    unset_stateflag_0x04_for_posdata((int)param_1);
    return;
  }
LAB_7f03c34c:
  proc_7F03E18C((int)param_1);
  proc_7F03A538((int)param_1);
  unset_stateflag_0x04_for_posdata((int)param_1);
  set_last_obj_pos_data((object_standard *)param_1);
  return;
}



undefined4 proc_7F03C3FC(void)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  longlong lVar4;
  char **ppcVar5;
  
  DAT_80071df8 = 0;
  ppcVar5 = (char **)(DAT_80071df0 + -4);
  lVar4 = 1;
  if (ppcVar5 <= (char **)((int)&DAT_8007161c + 3)) {
    DAT_80071df8 = 0;
    return 0;
  }
  pcVar2 = *ppcVar5;
  do {
    if (pcVar2 != NULL) {
      cVar1 = *pcVar2;
      if (cVar1 != '\x03') {
        if ((cVar1 == '\x01') || (cVar1 == '\x04')) {
          lVar4 = proc_7F04EF58((int)pcVar2);
        }
        else {
          if (cVar1 == '\x02') {
            iVar3 = proc_7F055804(pcVar2);
            lVar4 = (longlong)iVar3;
          }
        }
      }
      if (lVar4 == 0) {
        return DAT_80071df8;
      }
    }
    ppcVar5 = ppcVar5 + -1;
    if (ppcVar5 < &DAT_80071620) {
      return DAT_80071df8;
    }
    pcVar2 = *ppcVar5;
  } while( true );
}



undefined8 proc_7F03C4F0(void)

{
  char *pcVar2;
  int iVar3;
  undefined8 uVar1;
  longlong lVar4;
  
  pcVar2 = (char *)proc_7F03C3FC();
  lVar4 = 0;
  if (pcVar2 == NULL) {
    uVar1 = 1;
  }
  else {
    if (true) {
      switch(*pcVar2) {
      case '\x01':
      case '\x04':
        iVar3 = proc_7F04F170(pcVar2);
        lVar4 = (longlong)iVar3;
        break;
      case '\x02':
        lVar4 = proc_7F055C40((int)pcVar2);
      }
    }
    proc_7F03C2BC(pcVar2,lVar4);
    uVar1 = 0;
  }
  return uVar1;
}



undefined4 proc_7F03C574(int param_1)

{
  int iVar1;
  ulonglong uVar2;
  longlong lVar3;
  BONDdata **ppBVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  uVar2 = get_num_players();
  lVar3 = 0;
  if (0 < (longlong)uVar2) {
    ppBVar4 = &ptr_BONDdata_p1;
    do {
      iVar1 = (*ppBVar4)->position_data_pointer;
      fVar5 = *(float *)(iVar1 + 8) - *(float *)(param_1 + 8);
      fVar6 = *(float *)(iVar1 + 0xc) - *(float *)(param_1 + 0xc);
      fVar7 = *(float *)(iVar1 + 0x10) - *(float *)(param_1 + 0x10);
      fVar5 = sqrtf(fVar5 * fVar5 + fVar6 * fVar6 + fVar7 * fVar7);
      lVar3 = (longlong)((int)lVar3 + 1);
      if (fVar5 < 400.00000000) {
        return 0;
      }
      ppBVar4 = ppBVar4 + 1;
    } while (lVar3 < (longlong)uVar2);
  }
  return 1;
}



void handle_mp_respawn_and_some_things(void)

{
  byte bVar1;
  short sVar2;
  int iVar3;
  bool bVar4;
  char *pcVar5;
  char *pcVar6;
  char *pcVar7;
  char *pcVar10;
  short sVar14;
  int iVar11;
  int iVar12;
  int **ppiVar13;
  longlong lVar8;
  ulonglong uVar9;
  longlong lVar15;
  char cVar16;
  f32 scale;
  
  proc_7F03291C();
  pcVar10 = (char *)get_ptr_obj_pos_list_current_entry();
  pcVar7 = pcVar10;
  do {
    pcVar6 = pcVar7;
    pcVar5 = pcVar10;
    if (pcVar5 == NULL) {
      return;
    }
    pcVar10 = *(char **)(pcVar5 + 0x24);
    lVar15 = 0;
    cVar16 = *pcVar5;
    if (cVar16 == '\x03') {
      iVar3 = *(int *)(pcVar5 + 4);
      proc_7F062B00((char *)(iVar3 + 0x180));
      proc_7F062B00((char *)(iVar3 + 0x1ac));
    }
    else {
      if (((cVar16 == '\x01') || (cVar16 == '\x04')) || (cVar16 == '\x02')) {
        sVar2 = *(short *)(pcVar5 + 2);
        iVar3 = *(int *)(pcVar5 + 4);
        bVar4 = false;
        if (sVar2 < 1) {
LAB_7f03c8e4:
          cVar16 = *(char *)(iVar3 + 3);
        }
        else {
          *(short *)(pcVar5 + 2) = sVar2 - (short)clock_timer;
          if (*(short *)(pcVar5 + 2) < 0x3c) {
            if ((0x3b < sVar2) && (iVar11 = proc_7F03C574((int)pcVar5), iVar11 == 0)) {
              *(short *)(pcVar5 + 2) = *(short *)(pcVar5 + 2) + 0x3c;
            }
            sVar14 = *(short *)(pcVar5 + 2);
          }
          else {
            sVar14 = *(short *)(pcVar5 + 2);
          }
          if (sVar14 < 1) {
            *(undefined2 *)(pcVar5 + 2) = 0;
            if ((*(byte *)(iVar3 + 2) & 0x10) == 0) {
              *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) & 0xffffefff;
            }
            else {
              *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 0x1000;
            }
            goto LAB_7f03c8e4;
          }
          if (sVar14 < 0x3c) {
            if (0x3b < sVar2) {
              if (*(float *)(iVar3 + 0x70) == 0.00000000) {
                if ((*(byte *)(iVar3 + 2) & 0x80) != 0) {
                  bVar1 = *(byte *)(iVar3 + 2);
                  goto LAB_7f03c868;
                }
                if ((*(uint *)(iVar3 + 8) & 0x8000) == 0) {
                  set_stateflag_0x04_for_posdata((int)pcVar5);
                  proc_7F03E134(pcVar5);
                  *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) & 0xfffff7ff;
                  goto LAB_7f03c8ac;
                }
                proc_7F03E18C((int)pcVar5);
                proc_7F03A538((int)pcVar5);
                *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) & 0xfffff7ff;
                iVar11 = proc_7F056BA8((int)pcVar5);
                sVar2 = *(short *)(iVar3 + 6);
                iVar12 = proc_7F0BDF04();
                iVar11 = proc_7F056EA0((longlong)iVar12,iVar11 + (int)sVar2);
                if (iVar11 == 0) {
                  cVar16 = *(char *)(iVar3 + 3);
                }
                else {
                  if (*(int *)(iVar11 + 0x10) != 0) {
                    set_obj_instance_controller_scale(*(int *)(iVar3 + 0x14),scale);
                    proc_7F03A5A4(*(int *)(iVar3 + 0x10),*(int *)(iVar11 + 0x10));
                    bVar4 = true;
                    goto LAB_7f03c8ac;
                  }
                  cVar16 = *(char *)(iVar3 + 3);
                }
              }
              else {
                bVar1 = *(byte *)(iVar3 + 2);
LAB_7f03c868:
                if ((bVar1 & 8) == 0) {
                  *(uint *)(iVar3 + 8) = *(uint *)(iVar3 + 8) & 0xfffffeff;
                }
                else {
                  *(uint *)(iVar3 + 8) = *(uint *)(iVar3 + 8) | 0x100;
                }
                *(undefined4 *)(iVar3 + 0x70) = 0;
                *(byte *)(iVar3 + 2) = *(byte *)(iVar3 + 2) & 0x7f;
                proc_7F050DE8(*(int *)(iVar3 + 0x14));
LAB_7f03c8ac:
                cVar16 = *(char *)(iVar3 + 3);
              }
              if (cVar16 == '\x15') {
                *(undefined4 *)(iVar3 + 0x84) = *(undefined4 *)(iVar3 + 0x80);
              }
              if (!bVar4) {
                ppiVar13 = play_sfx_a1(ptr_sfx_buf,0x52,NULL);
                proc_7F053A10((int)ppiVar13,(float *)(pcVar5 + 8));
              }
              goto LAB_7f03c8e4;
            }
            cVar16 = *(char *)(iVar3 + 3);
          }
          else {
            cVar16 = *(char *)(iVar3 + 3);
          }
        }
        if (cVar16 == '\r') {
          proc_7F062B00(*(char **)(*(int *)(pcVar5 + 4) + 0xcc));
        }
      }
      else {
        if (cVar16 == '\a') {
          lVar15 = proc_7F09CEE8(pcVar5);
        }
        else {
          if (cVar16 == '\b') {
            lVar15 = proc_7F09E8AC(pcVar5);
          }
          else {
            if (cVar16 == '\x06') {
              lVar8 = proc_7F09B15C((int)pcVar5);
              proc_7F062B00((char *)&(&ptr_BONDdata_p1)[(int)lVar8]->field_A54);
              lVar8 = proc_7F09B15C((int)pcVar5);
              proc_7F062B00((char *)&(&ptr_BONDdata_p1)[(int)lVar8]->field_DFC);
              if ((*(int *)(pcVar5 + 4) != 0) && (uVar9 = get_num_players(), 1 < (longlong)uVar9)) {
                iVar3 = *(int *)(pcVar5 + 4);
                proc_7F062B00((char *)(iVar3 + 0x180));
                proc_7F062B00((char *)(iVar3 + 0x1ac));
              }
            }
          }
        }
      }
    }
    pcVar7 = pcVar10;
    if (lVar15 != 5) {
      pcVar10 = *(char **)(pcVar6 + 0x24);
      if (lVar15 == 3) {
        proc_7F03A538((int)pcVar5);
        proc_7F03A4F0((int)pcVar5);
        pcVar7 = pcVar10;
        if (pcVar10 == NULL) {
          pcVar10 = pcVar5;
          pcVar7 = pcVar6;
        }
      }
      else {
        proc_7F03C2BC(pcVar5,lVar15);
        pcVar7 = pcVar10;
      }
    }
  } while( true );
}



void determing_type_of_object_and_detection(void)

{
  byte bVar1;
  longlong lVar2;
  int iVar4;
  ulonglong uVar3;
  int iVar5;
  u32 playercount;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a2_lo_03;
  undefined4 extraout_a2_lo_04;
  undefined4 uVar6;
  undefined4 extraout_a2_lo_05;
  undefined4 extraout_a2_lo_06;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  undefined4 extraout_a3_lo_03;
  undefined4 extraout_a3_lo_04;
  undefined4 uVar7;
  undefined4 extraout_a3_lo_05;
  undefined4 extraout_a3_lo_06;
  byte *pbVar8;
  longlong lVar9;
  
  iVar4 = get_ptr_obj_pos_list_current_entry();
  lVar9 = (longlong)iVar4;
  uVar6 = extraout_a2_lo;
  uVar7 = extraout_a3_lo;
  while (lVar2 = lVar9, lVar2 != 0) {
    pbVar8 = (byte *)lVar2;
    bVar1 = *pbVar8;
    uVar3 = (ulonglong)bVar1;
    iVar4 = *(int *)(pbVar8 + 0x24);
    if (bVar1 == 3) {
      uVar3 = proc_7F020EF0((char *)pbVar8,0,uVar6,uVar7);
      uVar6 = extraout_a2_lo_00;
      uVar7 = extraout_a3_lo_00;
    }
    else {
      if (((bVar1 == 1) || (bVar1 == 4)) || (bVar1 == 2)) {
        object_interaction(lVar2);
        uVar6 = extraout_a2_lo_01;
        uVar7 = extraout_a3_lo_01;
      }
      else {
        if (bVar1 == 7) {
          uVar3 = proc_7F09D4EC((int)pbVar8);
          uVar6 = extraout_a2_lo_02;
          uVar7 = extraout_a3_lo_02;
        }
        else {
          if (bVar1 == 8) {
            uVar3 = proc_7F09EF9C((int)pbVar8);
            uVar6 = extraout_a2_lo_03;
            uVar7 = extraout_a3_lo_03;
          }
          else {
            uVar3 = 0;
            if (bVar1 == 6) {
              iVar5 = proc_7F08B0F0((char *)pbVar8);
              uVar3 = SEXT48(iVar5);
              uVar6 = extraout_a2_lo_04;
              uVar7 = extraout_a3_lo_04;
            }
          }
        }
      }
    }
    lVar9 = (longlong)iVar4;
    if (uVar3 != 5) {
      lVar9 = (longlong)*(int *)(pbVar8 + 0x24);
      if (uVar3 == 3) {
        proc_7F03A538((int)pbVar8);
        proc_7F03A4F0((int)pbVar8);
        uVar6 = extraout_a2_lo_05;
        uVar7 = extraout_a3_lo_05;
        if (lVar9 == 0) {
          lVar9 = lVar2;
          uVar6 = extraout_a2_lo_05;
          uVar7 = extraout_a3_lo_05;
        }
      }
      else {
        proc_7F03C2BC((char *)pbVar8,uVar3);
        uVar6 = extraout_a2_lo_06;
        uVar7 = extraout_a3_lo_06;
      }
    }
  }
  playercount = get_cur_playernum();
  iVar4 = proc_7F09B4D8(playercount);
  if (iVar4 == 0) {
    proc_7F0565F0();
    loop_set_sound_effect_all_slots();
    proc_7F03E4F0();
  }
  return;
}



void proc_7F03CB8C(char *param_1,uint *param_2)

{
  char cVar1;
  byte bVar2;
  int iVar3;
  uint *puVar4;
  
  if (*(int *)(param_1 + 0x14) == 0) {
    *param_2 = 0xffffffff;
    return;
  }
  if (*param_1 == '\x06') {
    if (*(int *)(param_1 + 4) == 0) {
      bVar2 = *(byte *)(*(int *)(param_1 + 0x14) + 3);
      param_2[1] = 0xffffffff;
      *param_2 = (uint)bVar2;
      return;
    }
    cVar1 = param_1[0x2c];
  }
  else {
    cVar1 = param_1[0x2c];
  }
  iVar3 = 0;
  if (cVar1 != -1) {
    bVar2 = param_1[0x2c];
    puVar4 = param_2;
    do {
      *puVar4 = (uint)bVar2;
      bVar2 = param_1[0x2d];
      iVar3 += 1;
      puVar4 = puVar4 + 1;
      param_1 = param_1 + 1;
    } while (bVar2 != 0xff);
  }
  param_2[iVar3] = 0xffffffff;
  return;
}



void proc_7F03CC20(char *param_1,int **param_2,undefined4 *param_3,float *param_4,float *param_5)

{
  char cVar1;
  
  *param_2 = NULL;
  *param_3 = 0;
  cVar1 = *param_1;
  if (cVar1 == '\x03') {
    proc_7F02308C((GUARDdata *)param_1,(int *)param_2,param_3,param_4,param_5);
  }
  else {
    if (cVar1 == '\x06') {
      proc_7F08A0B0((int)param_1,param_2,param_3,param_4,param_5);
    }
    else {
      if ((cVar1 != '\x04') && ((cVar1 == '\x01' || (cVar1 == '\x02')))) {
        proc_7F04F244((int)param_1,(int *)param_2,param_3,param_4,param_5);
      }
    }
  }
  return;
}



void proc_7F03CCB0(char *param_1,int **param_2,undefined4 *param_3)

{
  float fStack8;
  float fStack4;
  
  proc_7F03CC20(param_1,param_2,param_3,&fStack4,&fStack8);
  return;
}



// WARNING: Instruction at (ram,0x7f03cd9c) overlaps instruction at (ram,0x7f03cd98)
// 

undefined8 proc_7F03CCD8(float *param_1,float *param_2,uint param_3)

{
  float *pfVar1;
  float *pfVar2;
  longlong lVar3;
  uint uVar4;
  uint uVar5;
  float *pfVar6;
  int iVar7;
  float fVar8;
  
  lVar3 = -1;
  if ((int)param_3 < 1) {
    return 0;
  }
  uVar4 = 0;
  if (0 < (int)param_3) {
    if ((param_3 & 1) == 0) {
      iVar7 = 0;
    }
    else {
      if (param_3 == 0) {
        trap(0x1c00);
      }
      if ((param_3 == 0xffffffff) && (false)) {
        trap(0x1800);
      }
      uVar4 = 1;
      fVar8 = ((param_2 + (1 % param_3) * 2)[1] - param_2[1]) * (*param_1 - *param_2) -
              (param_1[2] - param_2[1]) * (param_2[(1 % param_3) * 2] - *param_2);
      if ((fVar8 != 0.00000000) && (lVar3 = 0, 0.00000000 < fVar8)) {
        lVar3 = 1;
      }
      iVar7 = 8;
      if (param_3 == 1) {
        return 1;
      }
    }
    pfVar6 = (float *)((int)param_2 + iVar7);
    do {
      if (param_3 == 0) {
        trap(0x1c00);
      }
      if ((param_3 == 0xffffffff) && (uVar4 + 1 == -0x80000000)) {
        trap(0x1800);
      }
      uVar5 = uVar4 + 2;
      fVar8 = ((param_2 + ((int)(uVar4 + 1) % param_3) * 2)[1] - pfVar6[1]) * (*param_1 - *pfVar6) -
              (param_1[2] - pfVar6[1]) * (param_2[((int)(uVar4 + 1) % param_3) * 2] - *pfVar6);
      if (fVar8 != 0.00000000) {
        if ((uVar4 == 0) || (lVar3 < 0)) {
          lVar3 = 0;
          if (0.00000000 < fVar8) {
            lVar3 = 1;
          }
        }
        else {
          if ((lVar3 != 0) && (fVar8 < 0.00000000)) {
            return 0;
          }
          if ((lVar3 == 0) && (0.00000000 < fVar8)) {
            return 0;
          }
        }
      }
      pfVar1 = pfVar6 + 3;
      pfVar2 = pfVar6 + 2;
      if (param_3 == 0) {
        trap(0x1c00);
      }
      if ((param_3 == 0xffffffff) && (uVar5 == 0x80000000)) {
        trap(0x1800);
      }
      pfVar6 = pfVar6 + 4;
      fVar8 = ((param_2 + ((int)uVar5 % param_3) * 2)[1] - *pfVar1) * (*param_1 - *pfVar2) -
              (param_1[2] - *pfVar1) * (param_2[((int)uVar5 % param_3) * 2] - *pfVar2);
      if (fVar8 != 0.00000000) {
        if ((uVar4 == 0xffffffff) || (lVar3 < 0)) {
          lVar3 = 0;
          if (0.00000000 < fVar8) {
            lVar3 = 1;
          }
        }
        else {
          if ((lVar3 != 0) && (fVar8 < 0.00000000)) {
            return 0;
          }
          if ((lVar3 == 0) && (0.00000000 < fVar8)) {
            return 0;
          }
        }
      }
      uVar4 = uVar5;
    } while (uVar5 != param_3);
  }
  return 1;
}



void proc_7F03CF88(char *param_1,undefined4 *param_2,float *param_3,undefined4 *param_4)

{
  if (*param_1 == '\x03') {
    proc_7F023160((int)param_1,param_2,param_3,param_4);
  }
  else {
    if (*param_1 == '\x06') {
      proc_7F08A274((int)param_1,param_2,param_3,param_4);
    }
    else {
      *param_2 = 0;
    }
  }
  return;
}



ulonglong proc_7F03CFE8(byte *param_1)

{
  byte bVar1;
  ulonglong uVar2;
  int iVar3;
  
  bVar1 = *param_1;
  uVar2 = (ulonglong)bVar1;
  if (bVar1 == 3) {
    iVar3 = proc_7F023188((int)param_1);
    uVar2 = SEXT48(iVar3);
  }
  else {
    if (bVar1 == 6) {
      uVar2 = proc_7F09B15C((int)param_1);
      proc_7F089778((int)(&ptr_BONDdata_p1)[(int)uVar2]);
    }
  }
  return uVar2;
}



void proc_7F03D058(char *param_1,longlong param_2)

{
  char cVar1;
  
  cVar1 = *param_1;
  if (cVar1 == '\x03') {
    set_or_unset_GUARDdata_flag(*(GUARDdata **)(param_1 + 4),(int)param_2);
  }
  else {
    if (cVar1 == '\x06') {
      proc_7F08A03C((int)param_1,(int)param_2);
    }
    else {
      if (((cVar1 == '\x01') || (cVar1 == '\x02')) || (cVar1 == '\x04')) {
        proc_7F04F218((int)param_1,param_2);
      }
    }
  }
  return;
}



void proc_7F03D0D4(void)

{
  char *pcVar1;
  int iVar3;
  longlong lVar2;
  longlong lVar4;
  longlong lVar5;
  
  iVar3 = get_intank_flag();
  if ((iVar3 == 0) && (disable_player_pickups_flag == 0)) {
    iVar3 = get_ptr_obj_pos_list_current_entry();
    lVar2 = (longlong)iVar3;
    lVar5 = lVar2;
    while (lVar5 != 0) {
      pcVar1 = (char *)lVar5;
      lVar4 = 0;
      if (*(short *)(pcVar1 + 2) < 1) {
        if (true) {
          switch(*pcVar1) {
          case '\x01':
            lVar2 = object_collectability_routine();
            lVar4 = lVar2;
            break;
          case '\x04':
            redirect_object_collectability_routines();
            lVar4 = lVar2;
          }
        }
        iVar3 = *(int *)(pcVar1 + 0x24);
      }
      else {
        iVar3 = *(int *)(pcVar1 + 0x24);
      }
      lVar5 = (longlong)iVar3;
      proc_7F03C2BC(pcVar1,lVar4);
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F03D188(void)

{
  int iVar1;
  bool bVar2;
  longlong lVar3;
  ulonglong uVar4;
  int iVar5;
  int in_a0_lo;
  float *in_a1_lo;
  float *in_a2_lo;
  undefined4 *in_a3_lo;
  f32 fVar6;
  f32 fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float *in_stack_00000010;
  float fStack88;
  float fStack80;
  undefined4 uStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float afStack36 [2];
  float afStack28 [2];
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fVar6 = get_uly();
  fVar7 = get_screen_height();
  fVar9 = (float)fVar7 * flt_800529C0 + (float)fVar6;
  fVar6 = get_uly();
  fVar7 = get_screen_height();
  fVar8 = (float)fVar7 * flt_800529C4 + (float)fVar6;
  fVar6 = get_ulx();
  fVar7 = get_screen_width();
  fVar11 = (float)fVar7 * 0.25000000 + (float)fVar6;
  fVar6 = get_ulx();
  fVar7 = get_screen_width();
  fStack80 = -2.00000000;
  fVar10 = (float)fVar7 * 0.75000000 + (float)fVar6;
  proc_7F077FF4(in_a1_lo,&fStack8);
  fStack20 = *in_a2_lo;
  fStack16 = in_a1_lo[1];
  fStack12 = in_a1_lo[2];
  proc_7F077FF4(&fStack20,afStack28);
  fStack20 = in_a2_lo[1];
  fStack16 = in_a1_lo[1];
  fStack12 = in_a1_lo[2];
  proc_7F077FF4(&fStack20,afStack36);
  lVar3 = (longlong)(int)in_a1_lo;
  fStack20 = *in_a1_lo;
  fStack16 = (float)in_a3_lo[1];
  fStack12 = in_a1_lo[2];
  proc_7F077FF4(&fStack20,&fStack44);
  fStack20 = *in_a1_lo;
  fStack16 = (float)*in_a3_lo;
  fStack12 = in_a1_lo[2];
  proc_7F077FF4(&fStack20,&fStack52);
  if (fStack48 < fVar9) {
    return (float)0xc0000000;
  }
  if (fVar8 < fStack40) {
    return (float)0xc0000000;
  }
  proc_7F068008(&fStack56,&uStack60);
  afStack28[0] = truncf(afStack28[0]);
  afStack36[0] = proc_7F05C440(afStack36[0]);
  redirect_get_BONDdata_autoaim_x();
  if (lVar3 == 0) {
    bVar2 = afStack28[0] <= fStack56;
    if (bVar2) {
      if (fStack56 <= afStack36[0]) {
        bVar2 = true;
      }
      else {
        bVar2 = false;
      }
    }
  }
  else {
    if (afStack28[0] <= fVar10) {
      if (fVar11 <= afStack36[0]) {
        fStack88 = (afStack36[0] - afStack28[0]) * 1.50000000;
        uVar4 = get_num_players();
        if (uVar4 == 1) {
          fStack88 = fStack88 * difficulty;
        }
        fVar6 = get_screen_width();
        fVar7 = get_ulx();
        bVar2 = (afStack36[0] + afStack28[0]) * 0.50000000 - fStack88 <=
                (float)fVar7 + (float)fVar6 * 0.50000000;
        if (bVar2) {
          fVar6 = get_screen_width();
          fVar7 = get_ulx();
          bVar2 = (float)fVar7 + (float)fVar6 * 0.50000000 <=
                  (afStack36[0] + afStack28[0]) * 0.50000000 + fStack88;
          if (((bVar2) && (bVar2 = fVar11 <= fStack8, bVar2)) && (bVar2 = false, fStack8 <= fVar10))
          {
            bVar2 = true;
          }
        }
      }
      else {
        bVar2 = false;
      }
    }
    else {
      bVar2 = false;
    }
  }
  if (!bVar2) {
    return (float)0xc0000000;
  }
  iVar5 = get_curplayer_positiondata();
  iVar1 = *(int *)(iVar5 + 0x14);
  proc_7F089780(ptr_BONDdata);
  proc_7F08A03C(iVar5,0);
  lVar3 = proc_7F0B0E24();
  if ((lVar3 != 0) && (iVar1 == *(int *)(in_a0_lo + 0x14))) {
    if ((fVar9 <= fStack4) && (fVar9 = fVar8, fStack4 <= fVar8)) {
      fVar9 = fStack4;
    }
    in_stack_00000010[1] = fVar9;
    redirect_get_BONDdata_autoaim_x();
    if (lVar3 != 0) {
      if ((fStack8 < fVar11) || (fVar11 = fVar10, fVar10 < fStack8)) {
        *in_stack_00000010 = fVar11;
      }
      else {
        *in_stack_00000010 = fStack8;
      }
    }
    fVar6 = get_screen_width();
    fVar7 = get_ulx();
    if (afStack28[0] <= (float)fVar7 + (float)fVar6 * 0.50000000) {
      fVar6 = get_screen_width();
      fVar7 = get_ulx();
      if ((float)fVar7 + (float)fVar6 * 0.50000000 <= afStack36[0]) {
        fStack80 = 1.00000000;
        goto LAB_7f03d76c;
      }
    }
    fVar6 = get_screen_width();
    fVar7 = get_ulx();
    if (afStack28[0] <= (float)fVar7 + (float)fVar6 * 0.50000000) {
      fVar6 = get_screen_width();
      fVar7 = get_ulx();
      fStack80 = 1.00000000 - (((float)fVar7 + (float)fVar6 * 0.50000000) - afStack36[0]) / fStack88
      ;
    }
    else {
      fVar6 = get_ulx();
      fVar7 = get_screen_width();
      fStack80 = 1.00000000 - (afStack28[0] - ((float)fVar7 * 0.50000000 + (float)fVar6)) / fStack88
      ;
    }
  }
LAB_7f03d76c:
  proc_7F08A03C(iVar5,1);
  return fStack80;
}



// WARNING: Instruction at (ram,0x7f03d884) overlaps instruction at (ram,0x7f03d880)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F03D78C(void)

{
  byte bVar1;
  GUARDdata *guard;
  ulonglong in_v0;
  ulonglong uVar2;
  u32 uVar3;
  int iVar4;
  byte **ppbVar5;
  byte *pbVar6;
  byte *pbVar7;
  float extraout_f0;
  f32 fVar8;
  f32 fVar9;
  float fVar10;
  float fStack60;
  float fStack56;
  float afStack48 [2];
  float afStack40 [2];
  float afStack32 [5];
  float fStack12;
  float fStack8;
  
  pbVar6 = NULL;
  fStack12 = dword_80030AB0;
  fStack8 = dword_80030AB4;
  redirect_get_BONDdata_autoaim();
  pbVar7 = pbVar6;
  if (in_v0 != 0) {
    fVar10 = -1.00000000;
    ppbVar5 = (byte **)(DAT_80071df0 + -4);
    pbVar7 = pbVar6;
    if ((byte **)((int)&DAT_8007161c + 3) < ppbVar5) {
      pbVar7 = *ppbVar5;
      do {
        if (pbVar7 != NULL) {
          bVar1 = *pbVar7;
          in_v0 = (ulonglong)bVar1;
          if (bVar1 == 3) {
LAB_7f03d860:
            guard = *(GUARDdata **)(pbVar7 + 4);
            iVar4 = something_with_weaponpos_of_guarddata_hand(guard,0);
            if (iVar4 == 0) {
              iVar4 = something_with_weaponpos_of_guarddata_hand(guard,1);
              in_v0 = SEXT48(iVar4);
              if (in_v0 == 0) goto LAB_7f03d8e4;
            }
            in_v0 = proc_7F023194((int)pbVar7,afStack32,afStack40,afStack48);
            if ((in_v0 != 0) && (in_v0 = proc_7F03D188(), fVar10 < extraout_f0)) {
              fStack12 = fStack60;
              fStack8 = fStack56;
              fVar10 = extraout_f0;
              pbVar6 = pbVar7;
              if (1.00000000 <= extraout_f0) break;
            }
          }
          else {
            if ((bVar1 == 6) && (*(int *)(pbVar7 + 4) != 0)) {
              uVar2 = proc_7F09B15C((int)pbVar7);
              uVar3 = get_cur_playernum();
              in_v0 = SEXT48((int)uVar3);
              if (in_v0 != uVar2) goto LAB_7f03d860;
            }
          }
        }
LAB_7f03d8e4:
        ppbVar5 = ppbVar5 + -1;
        pbVar7 = pbVar6;
        if (ppbVar5 < &DAT_80071620) break;
        pbVar7 = *ppbVar5;
      } while( true );
    }
  }
  if (pbVar7 == NULL) {
    proc_7F07C5F0(0,0);
    proc_7F07C6C8(0,0);
  }
  else {
    fVar8 = get_uly();
    fVar9 = get_screen_height();
    proc_7F07C5F0((int)pbVar7,(fStack8 - (float)fVar8) / ((float)fVar9 * 0.50000000) - 1.00000000);
    redirect_get_BONDdata_autoaim_x();
    if (in_v0 != 0) {
      fVar8 = get_ulx();
      fVar9 = get_screen_width();
      proc_7F07C6C8((int)pbVar7,(fStack12 - (float)fVar8) / ((float)fVar9 * 0.50000000) - 1.00000000
                   );
    }
  }
  return;
}



ulonglong proc_7F03D9EC(int param_1)

{
  int iVar1;
  ulonglong uVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  if (*(float *)(iVar1 + 0xb4) <= 0.00000000) {
    uVar2 = 0x1000;
  }
  else {
    uVar2 = 0x4000;
    if (*(float *)(iVar1 + 0x84) <= *(float *)(iVar1 + 0xb4)) {
      uVar2 = 0x2000;
    }
  }
  if (*(int *)(iVar1 + 0xc) << 2 < 0) {
    uVar2 = uVar2 | 0x8000;
  }
  return uVar2;
}



undefined4 proc_7F03DA50(char *param_1,uint param_2)

{
  char cVar1;
  uint uVar2;
  ulonglong uVar3;
  undefined4 uVar4;
  uint uVar5;
  
  cVar1 = *param_1;
  uVar4 = 1;
  if (cVar1 == '\x02') {
    if (((param_2 & 0x100) != 0) && (*(int *)(*(int *)(param_1 + 4) + 8) << 5 < 0)) {
      uVar4 = 0;
    }
    if ((param_2 & 2) != 0) {
      return uVar4;
    }
    uVar3 = proc_7F03D9EC((int)param_1);
    if ((uVar3 & (longlong)(int)param_2) != 0) {
      return uVar4;
    }
  }
  else {
    uVar5 = param_2 & 4;
    if (cVar1 != '\x06') {
      if (cVar1 == '\x03') {
        uVar5 = param_2 & 8;
      }
      else {
        if (((param_2 & 0x100) != 0) && (*(int *)(*(int *)(param_1 + 4) + 8) << 5 < 0)) {
          uVar4 = 0;
        }
        uVar2 = *(uint *)(*(int *)(param_1 + 4) + 8);
        if (((param_2 & 0x200) != 0) && (-1 < (int)(uVar2 << 0xe))) {
          uVar4 = 0;
        }
        uVar5 = param_2 & 1;
        if ((uVar2 & 0x800) != 0) {
          uVar5 = param_2 & 0x10;
        }
      }
    }
    if (uVar5 != 0) {
      return uVar4;
    }
  }
  return 0;
}



undefined8 proc_7F03DB70(int *param_1,int *param_2)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  
  iVar3 = *param_1;
  if (-1 < iVar3) {
    iVar1 = *param_2;
    piVar2 = param_2;
    do {
      while (-1 < iVar1) {
        if (iVar3 == iVar1) {
          return 1;
        }
        iVar1 = piVar2[1];
        piVar2 = piVar2 + 1;
      }
      iVar3 = param_1[1];
      param_1 = param_1 + 1;
      iVar1 = *param_2;
      piVar2 = param_2;
    } while (-1 < iVar3);
  }
  return 0;
}



undefined8 proc_7F03DBCC(short param_1,int param_2)

{
  short *psVar1;
  int iVar2;
  short *psVar3;
  
  psVar1 = (short *)(DAT_8007161c + param_2 * 0x20);
  if (*psVar1 < 0) {
    *psVar1 = param_1;
    return 1;
  }
  if (psVar1[1] < 0) {
    psVar1[1] = param_1;
    return 1;
  }
  psVar3 = psVar1 + 3;
  if (psVar1[2] < 0) {
    psVar1[2] = param_1;
    return 1;
  }
  iVar2 = 6;
  while( true ) {
    iVar2 += 8;
    if (*psVar3 < 0) {
      *psVar3 = param_1;
      return 1;
    }
    if (psVar3[1] < 0) {
      psVar3[1] = param_1;
      return 1;
    }
    if (psVar3[2] < 0) {
      psVar3[2] = param_1;
      return 1;
    }
    if (psVar3[3] < 0) break;
    psVar3 = psVar3 + 4;
    if (iVar2 == 0x1e) {
      return 0;
    }
  }
  psVar3[3] = param_1;
  return 1;
}



int proc_7F03DCB8(int param_1,longlong param_2)

{
  int iVar1;
  short *psVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = 0;
  psVar2 = DAT_8007161c;
  while (*psVar2 != -2) {
    iVar3 += 1;
    psVar2 = psVar2 + 0x10;
    if (iVar3 == 0x100) {
      return -1;
    }
  }
  iVar4 = 0;
  do {
    *(undefined2 *)((int)DAT_8007161c + iVar4 + iVar3 * 0x20) = 0xffff;
    *(undefined2 *)((int)DAT_8007161c + iVar4 + iVar3 * 0x20 + 2) = 0xffff;
    *(undefined2 *)((int)DAT_8007161c + iVar4 + iVar3 * 0x20 + 4) = 0xffff;
    iVar1 = iVar4 + iVar3 * 0x20;
    iVar4 += 8;
    *(undefined2 *)((int)DAT_8007161c + iVar1 + 6) = 0xffff;
  } while (iVar4 != 0x20);
  if (-1 < param_2) {
    DAT_8007161c[(int)param_2 * 0x10 + 0xf] = (short)iVar3;
    return iVar3;
  }
  *(short *)(ptr_room_lookup_buffer_maybe + param_1 * 2) = (short)iVar3;
  return iVar3;
}



void proc_7F03DD9C(int param_1,short param_2)

{
  int iVar1;
  longlong lVar2;
  longlong lVar3;
  
  lVar2 = -1;
  if (-1 < param_2) {
    lVar3 = (longlong)*(short *)(ptr_room_lookup_buffer_maybe + (int)param_2 * 2);
    if (-1 < lVar3) {
      do {
        lVar2 = lVar3;
        lVar3 = proc_7F03DBCC((short)((param_1 + 0x7ff963c8) / 0x34),(int)lVar2);
        if (lVar3 != 0) {
          return;
        }
        lVar3 = (longlong)*(short *)(DAT_8007161c + (int)lVar2 * 0x20 + 0x1e);
      } while (-1 < lVar3);
    }
    iVar1 = proc_7F03DCB8((int)param_2,lVar2);
    if (-1 < iVar1) {
      proc_7F03DBCC((short)((param_1 + 0x7ff963c8) / 0x34),iVar1);
    }
  }
  return;
}



void proc_7F03DE94(int param_1,short param_2)

{
  short sVar1;
  bool bVar2;
  bool bVar3;
  longlong lVar4;
  int iVar5;
  longlong lVar6;
  longlong lVar7;
  int iVar8;
  longlong lVar9;
  short *psVar10;
  int iVar11;
  
  bVar3 = false;
  if (-1 < (int)param_2) {
    iVar8 = (int)param_2 * 2;
    sVar1 = *(short *)(ptr_room_lookup_buffer_maybe + iVar8);
    lVar4 = (longlong)sVar1;
    if (-1 < lVar4) {
      lVar6 = (longlong)(int)(short)((param_1 + 0x7ff963c8) / 0x34);
      lVar7 = -1;
      do {
        psVar10 = (short *)(DAT_8007161c + (int)sVar1 * 0x20);
        bVar2 = false;
        iVar5 = (int)lVar4;
        if (lVar6 == (longlong)*psVar10) {
          *psVar10 = -1;
          bVar3 = true;
          psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20);
LAB_7f03df4c:
          sVar1 = psVar10[1];
        }
        else {
          if (-1 < (longlong)*psVar10) {
            bVar2 = true;
            goto LAB_7f03df4c;
          }
          sVar1 = psVar10[1];
        }
        if (lVar6 == (longlong)sVar1) {
          psVar10[1] = -1;
          bVar3 = true;
          psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20);
LAB_7f03df80:
          lVar9 = (longlong)psVar10[2];
        }
        else {
          if (bVar2) {
            lVar9 = (longlong)psVar10[2];
          }
          else {
            if (-1 < (longlong)sVar1) {
              bVar2 = true;
              goto LAB_7f03df80;
            }
            lVar9 = (longlong)psVar10[2];
          }
        }
        if (lVar6 == lVar9) {
          psVar10[2] = -1;
          bVar3 = true;
        }
        else {
          if ((!bVar2) && (-1 < lVar9)) {
            bVar2 = true;
          }
        }
        iVar11 = 6;
        do {
          psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20 + iVar11);
          if (lVar6 == (longlong)*psVar10) {
            *psVar10 = -1;
            bVar3 = true;
            psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20 + iVar11);
LAB_7f03dffc:
            lVar9 = (longlong)psVar10[1];
          }
          else {
            if (bVar2) {
              lVar9 = (longlong)psVar10[1];
            }
            else {
              if (-1 < (longlong)*psVar10) {
                bVar2 = true;
                goto LAB_7f03dffc;
              }
              lVar9 = (longlong)psVar10[1];
            }
          }
          if (lVar6 == lVar9) {
            psVar10[1] = -1;
            bVar3 = true;
            psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20 + iVar11);
LAB_7f03e038:
            lVar9 = (longlong)psVar10[2];
          }
          else {
            if (bVar2) {
              lVar9 = (longlong)psVar10[2];
            }
            else {
              if (-1 < lVar9) {
                bVar2 = true;
                goto LAB_7f03e038;
              }
              lVar9 = (longlong)psVar10[2];
            }
          }
          if (lVar6 == lVar9) {
            psVar10[2] = -1;
            bVar3 = true;
            psVar10 = (short *)(DAT_8007161c + iVar5 * 0x20 + iVar11);
LAB_7f03e074:
            lVar9 = (longlong)psVar10[3];
          }
          else {
            if (bVar2) {
              lVar9 = (longlong)psVar10[3];
            }
            else {
              if (-1 < lVar9) {
                bVar2 = true;
                goto LAB_7f03e074;
              }
              lVar9 = (longlong)psVar10[3];
            }
          }
          iVar11 += 8;
          if (lVar6 == lVar9) {
            psVar10[3] = -1;
            bVar3 = true;
          }
          else {
            if ((!bVar2) && (-1 < lVar9)) {
              bVar2 = true;
            }
          }
        } while (iVar11 != 0x1e);
        lVar9 = lVar4;
        if (!bVar2) {
          iVar11 = iVar5 * 0x20;
          *(undefined2 *)(DAT_8007161c + iVar11) = 0xfffe;
          if (lVar7 < 0) {
            *(undefined2 *)(ptr_room_lookup_buffer_maybe + iVar8) =
                 *(undefined2 *)(DAT_8007161c + iVar11 + 0x1e);
            lVar9 = lVar7;
          }
          else {
            *(undefined2 *)(DAT_8007161c + (int)lVar7 * 0x20 + 0x1e) =
                 *(undefined2 *)(DAT_8007161c + iVar11 + 0x1e);
            lVar9 = lVar7;
          }
        }
        if (bVar3) {
          return;
        }
        sVar1 = *(short *)(DAT_8007161c + iVar5 * 0x20 + 0x1e);
        lVar4 = (longlong)sVar1;
        lVar7 = lVar9;
      } while (-1 < lVar4);
    }
  }
  return;
}



void proc_7F03E134(char *param_1)

{
  char cVar1;
  
  cVar1 = *param_1;
  if (cVar1 == '\x03') {
    proc_7F020D94(*(GUARDdata **)(param_1 + 4));
  }
  else {
    if ((cVar1 == '\x01') || (cVar1 == '\x04')) {
      proc_7F056CA0(*(int *)(param_1 + 4));
    }
  }
  return;
}



void proc_7F03E18C(int param_1)

{
  byte bVar1;
  int iVar2;
  
  bVar1 = *(byte *)(param_1 + 0x2c);
  iVar2 = param_1 + 0x2c;
  while (bVar1 != 0xff) {
    proc_7F03DE94(param_1,(ushort)bVar1);
    bVar1 = *(byte *)(iVar2 + 1);
    iVar2 += 1;
  }
  if ((*(byte *)(param_1 + 1) & 0x10) == 0) {
    *(undefined *)(param_1 + 0x2c) = 0xff;
  }
  return;
}



void proc_7F03E210(int param_1)

{
  byte bVar1;
  int iVar2;
  
  bVar1 = *(byte *)(param_1 + 0x2c);
  iVar2 = param_1 + 0x2c;
  while (bVar1 != 0xff) {
    proc_7F03DD9C(param_1,(ushort)bVar1);
    bVar1 = *(byte *)(iVar2 + 1);
    iVar2 += 1;
  }
  return;
}



void proc_7F03E27C(char *param_1,float *param_2,float *param_3,float param_4)

{
  char cVar1;
  byte bVar2;
  uint *puVar3;
  uint *puVar4;
  char *pcVar5;
  float in_a3_lo;
  int iVar6;
  float in_f14;
  int iStack40;
  int iStack36;
  uint auStack32 [8];
  
  iVar6 = 0;
  if ((param_1[1] & 8U) == 0) {
    iStack36 = *(int *)(param_1 + 0x14);
    iStack40 = 0;
    proc_7F0B21B0(&iStack36,in_a3_lo,in_f14,*(float *)(param_1 + 8),*(undefined4 *)(param_1 + 0x10),
                  (undefined4 *)in_a3_lo,auStack32);
  }
  else {
    cVar1 = *param_1;
    puVar4 = (uint *)(param_1 + 0x2c);
    if (((cVar1 == '\x01') || (cVar1 == '\x04')) || (cVar1 == '\x02')) {
      iVar6 = *(int *)(param_1 + 4);
    }
    if (((iVar6 != 0) && ((*(uint *)(iVar6 + 100) & 0x80) != 0)) &&
       ((**(uint **)(iVar6 + 0x6c) & 8) != 0)) {
      puVar4 = *(uint **)(iVar6 + 0x6c) + 0x33;
    }
    iStack40 = 0;
    puVar3 = auStack32;
    if (*(byte *)puVar4 != 0xff) {
      bVar2 = *(byte *)puVar4;
      do {
        *puVar3 = (uint)bVar2;
        bVar2 = *(byte *)((int)puVar4 + 1);
        iStack40 += 1;
        puVar3 = puVar3 + 1;
        puVar4 = (uint *)((int)puVar4 + 1);
      } while (bVar2 != 0xff);
    }
  }
  proc_7F0BA2D4(param_2,param_3,(int *)auStack32,&iStack40,7);
  iVar6 = 0;
  puVar4 = auStack32;
  pcVar5 = param_1;
  if (0 < iStack40) {
    while( true ) {
      iVar6 += 1;
      puVar4 = puVar4 + 1;
      pcVar5[0x2c] = (char)auStack32[0];
      if (iStack40 <= iVar6) break;
      auStack32[0] = *puVar4;
      pcVar5 = pcVar5 + 1;
    }
  }
  param_1[iVar6 + 0x2c] = -1;
  return;
}



void proc_7F03E3FC(int *param_1)

{
  short sVar1;
  short *psVar2;
  longlong lVar3;
  int iVar4;
  int iVar5;
  short *psVar6;
  short sVar7;
  
  iVar5 = *param_1;
  psVar2 = ptr_list_object_lookup_indices;
  iVar4 = DAT_8007161c;
  while (-1 < iVar5) {
    lVar3 = (longlong)*(short *)(ptr_room_lookup_buffer_maybe + iVar5 * 2);
    DAT_8007161c = iVar4;
    if (lVar3 < 0) {
      iVar5 = param_1[1];
      DAT_8007161c = iVar4;
    }
    else {
      do {
        iVar5 = 0;
        do {
          sVar1 = *(short *)(iVar4 + (int)lVar3 * 0x20 + iVar5);
          iVar5 += 2;
          if (-1 < sVar1) {
            psVar6 = ptr_list_object_lookup_indices;
            if (ptr_list_object_lookup_indices < psVar2) {
              sVar7 = *ptr_list_object_lookup_indices;
              psVar6 = ptr_list_object_lookup_indices;
              while ((sVar1 != sVar7 && (psVar6 = psVar6 + 1, psVar6 < psVar2))) {
                sVar7 = *psVar6;
              }
            }
            if (psVar6 == psVar2) {
              *psVar2 = sVar1;
              psVar2 = psVar2 + 1;
              iVar4 = DAT_8007161c;
            }
          }
        } while (iVar5 != 0x1e);
        lVar3 = (longlong)*(short *)(iVar4 + (int)lVar3 * 0x20 + 0x1e);
      } while (-1 < lVar3);
      iVar5 = param_1[1];
    }
    param_1 = param_1 + 1;
    iVar4 = DAT_8007161c;
  }
  DAT_8007161c = iVar4;
  *psVar2 = -1;
  num_obj_position_data_entries = (int)psVar2 + (2 - (int)ptr_list_object_lookup_indices) >> 1;
  return;
}



// WARNING: Instruction at (ram,0x7f03e63c) overlaps instruction at (ram,0x7f03e638)
// 

void proc_7F03E4F0(void)

{
  short sVar1;
  longlong lVar2;
  int iVar3;
  u32 uVar4;
  int iVar5;
  int iVar7;
  longlong lVar6;
  int iVar8;
  int iVar9;
  short *psVar10;
  short *psVar11;
  
  iVar3 = 0;
  if (0 < (int)max_num_rooms) {
    iVar5 = 0;
    uVar4 = max_num_rooms;
    do {
      iVar3 += 1;
      sVar1 = *(short *)(ptr_room_lookup_buffer_maybe + iVar5);
      if (-1 < (longlong)sVar1) {
        lVar2 = (longlong)sVar1;
        lVar6 = (longlong)*(short *)(DAT_8007161c + (int)sVar1 * 0x20 + 0x1e);
        while (-1 < lVar6) {
          iVar8 = 0;
          do {
            iVar7 = (int)lVar6;
            psVar11 = (short *)(DAT_8007161c + (int)lVar2 * 0x20 + iVar8);
            iVar8 += 2;
            iVar9 = 0;
            psVar10 = (short *)(DAT_8007161c + iVar7 * 0x20);
            if (*psVar11 < 0) {
              do {
                if (-1 < *psVar10) {
                  *psVar11 = *psVar10;
                  *(undefined2 *)(DAT_8007161c + iVar7 * 0x20 + iVar9) = 0xffff;
                  break;
                }
                iVar9 += 2;
                psVar10 = psVar10 + 1;
              } while (iVar9 != 0x1e);
              if (iVar9 < 0x1e) {
                psVar11 = (short *)(DAT_8007161c + iVar7 * 0x20 + iVar9);
                do {
                  if (-1 < *psVar11) break;
                  iVar9 += 2;
                  psVar11 = psVar11 + 1;
                } while (iVar9 < 0x1e);
              }
              if (iVar9 == 0x1e) {
                iVar9 = (int)lVar2 * 0x20;
                *(undefined2 *)(DAT_8007161c + iVar7 * 0x20) = 0xfffe;
                *(undefined2 *)(DAT_8007161c + iVar9 + 0x1e) =
                     *(undefined2 *)(DAT_8007161c + iVar7 * 0x20 + 0x1e);
                lVar6 = (longlong)*(short *)(DAT_8007161c + iVar9 + 0x1e);
                if (lVar6 < 0) break;
              }
            }
          } while (iVar8 < 0x1e);
          uVar4 = max_num_rooms;
          if (-1 < lVar6) {
            lVar2 = lVar6;
            lVar6 = (longlong)*(short *)(DAT_8007161c + (int)lVar6 * 0x20 + 0x1e);
            uVar4 = max_num_rooms;
          }
        }
      }
      iVar5 += 2;
    } while (iVar3 < (int)uVar4);
  }
  return;
}



void removed_debug_roomblocks_feature(void)

{
  return;
}



void proc_7F03E6A0(int param_1)

{
  int iVar1;
  int iVar2;
  
  if (((*(uint *)(*(int *)(param_1 + 4) + 100) & 1) != 0) && (dword_80030B00 != 0)) {
    iVar2 = *(int *)(dword_80030B00 + 4);
    iVar1 = dword_80030B00;
    while( true ) {
      if (param_1 == iVar2) {
        if (*(int *)(iVar1 + 8) == 0) {
          iVar1 = *(int *)(iVar1 + 0xc);
        }
        else {
          proc_7F05599C(*(int *)(iVar1 + 8));
          iVar1 = *(int *)(iVar1 + 0xc);
        }
      }
      else {
        iVar1 = *(int *)(iVar1 + 0xc);
      }
      if (iVar1 == 0) break;
      iVar2 = *(int *)(iVar1 + 4);
    }
  }
  return;
}



undefined8 proc_7F03E718(int param_1)

{
  ulonglong uVar1;
  int iVar2;
  int iVar3;
  
  if (((*(uint *)(param_1 + 100) & 0x2000) != 0) && (dword_80030B04 != 0)) {
    iVar3 = *(int *)(dword_80030B04 + 4);
    iVar2 = dword_80030B04;
    while( true ) {
      if (param_1 == iVar3) {
        iVar3 = *(int *)(iVar2 + 8);
        if (iVar3 == 0) {
          iVar2 = *(int *)(iVar2 + 0xc);
        }
        else {
          if (*(int *)(iVar3 + 0x10) == 0) {
            iVar2 = *(int *)(iVar2 + 0xc);
          }
          else {
            uVar1 = check_if_object_has_not_been_destroyed(iVar3);
            if (uVar1 != 0) {
              return 0;
            }
            iVar2 = *(int *)(iVar2 + 0xc);
          }
        }
      }
      else {
        iVar2 = *(int *)(iVar2 + 0xc);
      }
      if (iVar2 == 0) break;
      iVar3 = *(int *)(iVar2 + 4);
    }
  }
  return 1;
}



undefined8 proc_7F03E7AC(int param_1)

{
  int iVar1;
  int iVar2;
  
  if (((*(uint *)(param_1 + 0xc) & 0x400) != 0) && (dword_80030B08 != 0)) {
    iVar2 = *(int *)(dword_80030B08 + 4);
    iVar1 = dword_80030B08;
    while( true ) {
      if (param_1 == iVar2) {
        iVar2 = *(int *)(iVar1 + 0xc);
        if (iVar2 == 0) {
          iVar1 = *(int *)(iVar1 + 0x10);
        }
        else {
          if (*(int *)(iVar2 + 0x10) == 0) {
            iVar1 = *(int *)(iVar1 + 0x10);
          }
          else {
            if (*(float *)(iVar2 + 0xb4) <= 0.50000000) {
              return 0;
            }
            iVar1 = *(int *)(iVar1 + 0x10);
          }
        }
      }
      else {
        iVar1 = *(int *)(iVar1 + 0x10);
      }
      if (iVar1 == 0) break;
      iVar2 = *(int *)(iVar1 + 4);
    }
  }
  return 1;
}



void proc_7F03E830(int param_1)

{
  proc_7F0B2970();
  return;
}



undefined4 proc_7F03E85C(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



undefined4 proc_7F03E864(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



undefined4 proc_7F03E86C(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



undefined4 proc_7F03E874(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



float proc_7F03E87C(int param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  
  if (0.00000000 <= *param_2) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (0.00000000 <= param_2[4]) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *param_2 + 0.00000000 + fVar1 * param_2[4];
  fVar2 = param_2[8];
  if (fVar2 < 0.00000000) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



float proc_7F03E91C(int param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  
  if (*param_2 <= 0.00000000) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (param_2[4] <= 0.00000000) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *param_2 + 0.00000000 + fVar1 * param_2[4];
  fVar2 = param_2[8];
  if (0.00000000 < fVar2) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



float proc_7F03E9BC(int param_1,int param_2)

{
  float fVar1;
  float fVar2;
  
  if (0.00000000 <= *(float *)(param_2 + 4)) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (0.00000000 <= *(float *)(param_2 + 0x14)) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *(float *)(param_2 + 4) + 0.00000000 + fVar1 * *(float *)(param_2 + 0x14);
  fVar2 = *(float *)(param_2 + 0x24);
  if (fVar2 < 0.00000000) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



float proc_7F03EA5C(int param_1,int param_2)

{
  float fVar1;
  float fVar2;
  
  if (*(float *)(param_2 + 4) <= 0.00000000) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (*(float *)(param_2 + 0x14) <= 0.00000000) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *(float *)(param_2 + 4) + 0.00000000 + fVar1 * *(float *)(param_2 + 0x14);
  fVar2 = *(float *)(param_2 + 0x24);
  if (0.00000000 < fVar2) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



float proc_7F03EAFC(int param_1,int param_2)

{
  float fVar1;
  float fVar2;
  
  if (0.00000000 <= *(float *)(param_2 + 8)) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (0.00000000 <= *(float *)(param_2 + 0x18)) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *(float *)(param_2 + 8) + 0.00000000 + fVar1 * *(float *)(param_2 + 0x18);
  fVar2 = *(float *)(param_2 + 0x28);
  if (fVar2 < 0.00000000) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



float proc_7F03EB9C(int param_1,int param_2)

{
  float fVar1;
  float fVar2;
  
  if (*(float *)(param_2 + 8) <= 0.00000000) {
    fVar2 = *(float *)(param_1 + 4);
  }
  else {
    fVar2 = *(float *)(param_1 + 8);
  }
  if (*(float *)(param_2 + 0x18) <= 0.00000000) {
    fVar1 = *(float *)(param_1 + 0xc);
  }
  else {
    fVar1 = *(float *)(param_1 + 0x10);
  }
  fVar1 = fVar2 * *(float *)(param_2 + 8) + 0.00000000 + fVar1 * *(float *)(param_2 + 0x18);
  fVar2 = *(float *)(param_2 + 0x28);
  if (0.00000000 < fVar2) {
    return fVar1 + *(float *)(param_1 + 0x18) * fVar2;
  }
  return fVar1 + *(float *)(param_1 + 0x14) * fVar2;
}



void proc_7F03EC3C(int param_1,int param_2,undefined4 *param_3)

{
  if (*(float *)(param_2 + 8) <= 0.00000000) {
    *param_3 = *(undefined4 *)(param_1 + 4);
  }
  else {
    *param_3 = *(undefined4 *)(param_1 + 8);
  }
  if (*(float *)(param_2 + 0x18) <= 0.00000000) {
    param_3[1] = *(undefined4 *)(param_1 + 0xc);
  }
  else {
    param_3[1] = *(undefined4 *)(param_1 + 0x10);
  }
  if (0.00000000 < *(float *)(param_2 + 0x28)) {
    param_3[2] = *(undefined4 *)(param_1 + 0x18);
    return;
  }
  param_3[2] = *(undefined4 *)(param_1 + 0x14);
  return;
}



// WARNING: Instruction at (ram,0x7f03f418) overlaps instruction at (ram,0x7f03f414)
// 

void proc_7F03ECC0(float param_1,undefined8 param_2,undefined8 param_3,float param_4,
                  undefined8 param_5,float param_6,float param_7,float *param_8,float *param_9,
                  uint *param_10)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  double *pdVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  double *pdVar10;
  uint uVar11;
  double *pdVar12;
  double *pdVar13;
  float *pfVar14;
  float *pfVar15;
  double *pdVar16;
  int iVar17;
  double dVar18;
  double dVar19;
  float fVar20;
  float fVar21;
  uint *in_stack_00000020;
  int aiStack176 [4];
  int aiStack160 [8];
  double adStack128 [16];
  
  pdVar13 = adStack128;
  iVar7 = 0;
  pdVar12 = adStack128;
  iVar4 = 0;
  pdVar10 = adStack128;
  iVar8 = 0;
  pdVar16 = adStack128;
  iVar17 = 0;
  dVar19 = (double)*param_9 * (double)param_1 + (double)param_9[4] * (double)param_5._4_4_ +
           (double)param_9[8] * (double)param_7;
  pdVar5 = adStack128;
  iVar2 = 1;
  do {
    pdVar5 = pdVar5 + 2;
    if ((*pdVar5 < dVar19) || ((*pdVar5 == dVar19 && (pdVar5[1] < pdVar13[1])))) {
      pdVar13 = adStack128 + iVar2 * 2;
      dVar19 = *pdVar13;
      iVar17 = iVar2;
    }
    iVar2 += 1;
  } while (iVar2 < 8);
  iVar2 = 1;
  pdVar5 = adStack128;
  do {
    pdVar5 = pdVar5 + 2;
    if ((pdVar12[1] < pdVar5[1]) || ((pdVar5[1] == pdVar12[1] && (*pdVar5 < *pdVar12)))) {
      pdVar12 = adStack128 + iVar2 * 2;
      iVar7 = iVar2;
    }
    iVar2 += 1;
  } while (iVar2 < 8);
  iVar2 = 1;
  pdVar5 = adStack128;
  do {
    pdVar5 = pdVar5 + 2;
    if ((*pdVar10 < *pdVar5) || ((*pdVar5 == *pdVar10 && (pdVar10[1] < pdVar5[1])))) {
      pdVar10 = adStack128 + iVar2 * 2;
      iVar4 = iVar2;
    }
    iVar2 += 1;
  } while (iVar2 < 8);
  iVar2 = 1;
  pdVar5 = adStack128;
  do {
    pdVar5 = pdVar5 + 2;
    if ((pdVar5[1] < pdVar16[1]) || ((pdVar5[1] == pdVar16[1] && (*pdVar16 < *pdVar5)))) {
      pdVar16 = adStack128 + iVar2 * 2;
      iVar8 = iVar2;
    }
    iVar2 += 1;
  } while (iVar2 < 8);
  iVar6 = 0;
  iVar2 = 0;
  do {
    if ((((iVar2 != iVar17) && (iVar2 != iVar4)) && (iVar2 != iVar7)) && (iVar2 != iVar8)) {
      aiStack176[iVar6] = iVar2;
      iVar6 += 1;
    }
    iVar2 += 1;
  } while (iVar2 < 8);
  iVar8 = 1;
  piVar1 = aiStack176;
  *(float *)param_10 = (float)dVar19;
  *(float *)(param_10 + 1) = (float)pdVar13[1];
  dVar19 = *pdVar16;
  iVar17 = aiStack176[0];
  while (dVar18 = adStack128[iVar17 * 2],
        (adStack128[iVar17 * 2 + 1] - pdVar16[1]) * (*pdVar13 - dVar19) <=
        (dVar18 - dVar19) * (pdVar13[1] - pdVar16[1])) {
    piVar1 = piVar1 + 1;
    if (aiStack160 <= piVar1) goto LAB_7f03f19c;
    iVar17 = *piVar1;
  }
  iVar8 = 2;
  *(float *)(param_10 + 2) = (float)dVar18;
  *(float *)(param_10 + 3) = (float)adStack128[iVar17 * 2 + 1];
  dVar19 = *pdVar16;
LAB_7f03f19c:
  pfVar15 = (float *)(param_10 + iVar8 * 2);
  pfVar14 = pfVar15 + 2;
  *pfVar15 = (float)dVar19;
  iVar7 = iVar8 + 1;
  piVar1 = aiStack176;
  pfVar15[1] = (float)pdVar16[1];
  dVar19 = *pdVar10;
  iVar17 = aiStack176[0];
  while (dVar18 = adStack128[iVar17 * 2],
        (adStack128[iVar17 * 2 + 1] - pdVar10[1]) * (*pdVar16 - dVar19) <=
        (dVar18 - dVar19) * (pdVar16[1] - pdVar10[1])) {
    piVar1 = piVar1 + 1;
    if (aiStack160 <= piVar1) goto LAB_7f03f24c;
    iVar17 = *piVar1;
  }
  iVar7 = iVar8 + 2;
  pfVar14 = pfVar15 + 4;
  pfVar15[2] = (float)dVar18;
  pfVar15[3] = (float)adStack128[iVar17 * 2 + 1];
  dVar19 = *pdVar10;
LAB_7f03f24c:
  iVar8 = iVar7 + 1;
  pfVar15 = pfVar14 + 2;
  piVar1 = aiStack176;
  *pfVar14 = (float)dVar19;
  pfVar14[1] = (float)pdVar10[1];
  dVar19 = *pdVar12;
  iVar17 = aiStack176[0];
  while (dVar18 = adStack128[iVar17 * 2],
        (adStack128[iVar17 * 2 + 1] - pdVar12[1]) * (*pdVar10 - dVar19) <=
        (dVar18 - dVar19) * (pdVar10[1] - pdVar12[1])) {
    piVar1 = piVar1 + 1;
    if (aiStack160 <= piVar1) goto LAB_7f03f2f4;
    iVar17 = *piVar1;
  }
  iVar8 = iVar7 + 2;
  pfVar15 = pfVar14 + 4;
  pfVar14[2] = (float)dVar18;
  pfVar14[3] = (float)adStack128[iVar17 * 2 + 1];
  dVar19 = *pdVar12;
LAB_7f03f2f4:
  uVar9 = iVar8 + 1;
  piVar1 = aiStack176;
  *pfVar15 = (float)dVar19;
  pfVar15[1] = (float)pdVar12[1];
  while (dVar19 = adStack128[aiStack176[0] * 2],
        (adStack128[aiStack176[0] * 2 + 1] - pdVar13[1]) * (*pdVar12 - *pdVar13) <=
        (dVar19 - *pdVar13) * (pdVar12[1] - pdVar13[1])) {
    piVar1 = piVar1 + 1;
    if (aiStack160 <= piVar1) goto LAB_7f03f39c;
    aiStack176[0] = *piVar1;
  }
  uVar9 = iVar8 + 2;
  pfVar15[2] = (float)dVar19;
  pfVar15[3] = (float)adStack128[aiStack176[0] * 2 + 1];
LAB_7f03f39c:
  *in_stack_00000020 = uVar9;
  if (uVar9 != 0) {
    uVar11 = uVar9 & 3;
    if (uVar11 == 0) {
      iVar17 = 0;
    }
    else {
      uVar3 = 1;
      fVar21 = (float)*param_10;
      pfVar15 = (float *)param_10;
      pfVar14 = (float *)param_10;
      if (uVar11 != 1) {
        do {
          uVar3 += 1;
          fVar20 = fVar21 + param_9[0xc];
          fVar21 = pfVar14[2];
          pfVar15 = pfVar14 + 2;
          *pfVar14 = fVar20;
          pfVar14[1] = pfVar14[1] + param_9[0xe];
          pfVar14 = pfVar15;
        } while (uVar11 != uVar3);
      }
      *pfVar15 = fVar21 + param_9[0xc];
      pfVar15[1] = pfVar15[1] + param_9[0xe];
      iVar17 = uVar3 << 3;
      if (uVar3 == uVar9) {
        return;
      }
    }
    fVar21 = *(float *)((int)param_10 + iVar17);
    pfVar15 = (float *)((int)param_10 + iVar17);
    while (pfVar14 = pfVar15 + 8, pfVar14 != (float *)(param_10 + uVar9 * 2)) {
      *pfVar15 = fVar21 + param_9[0xc];
      fVar21 = *pfVar14;
      pfVar15[1] = pfVar15[1] + param_9[0xe];
      pfVar15[2] = pfVar15[2] + param_9[0xc];
      pfVar15[3] = pfVar15[3] + param_9[0xe];
      pfVar15[4] = pfVar15[4] + param_9[0xc];
      pfVar15[5] = pfVar15[5] + param_9[0xe];
      pfVar15[6] = pfVar15[6] + param_9[0xc];
      pfVar15[7] = pfVar15[7] + param_9[0xe];
      pfVar15 = pfVar14;
    }
    *pfVar15 = fVar21 + param_9[0xc];
    pfVar15[1] = pfVar15[1] + param_9[0xe];
    pfVar15[2] = pfVar15[2] + param_9[0xc];
    pfVar15[3] = pfVar15[3] + param_9[0xe];
    pfVar15[4] = pfVar15[4] + param_9[0xc];
    pfVar15[5] = pfVar15[5] + param_9[0xe];
    pfVar15[6] = pfVar15[6] + param_9[0xc];
    pfVar15[7] = pfVar15[7] + param_9[0xe];
  }
  return;
}



void proc_7F03F540(undefined8 param_1,undefined8 param_2,float *param_3,uint *param_4)

{
  int iVar1;
  
  iVar1 = (int)param_1;
  proc_7F03ECC0(*(float *)(iVar1 + 4),param_1,param_2,*(float *)(iVar1 + 8),
                (longlong)*(int *)(iVar1 + 0xc),*(float *)(iVar1 + 0x10),
                *(undefined4 *)(iVar1 + 0x14),*(float **)(iVar1 + 0x18),(float *)param_2,
                (uint *)param_3);
  return;
}



undefined8 proc_7F03F598(float *param_1,float param_2,float *param_3)

{
  undefined8 uVar1;
  float *in_a2_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar2 = *param_1 - *in_a2_lo;
  fVar3 = param_1[1] - in_a2_lo[1];
  fVar4 = param_1[2] - in_a2_lo[2];
  fVar5 = in_a2_lo[8] * fVar4 + fVar2 * in_a2_lo[6] + fVar3 * in_a2_lo[7];
  if ((in_a2_lo[0x10] + (float)param_3 < fVar5) || (fVar5 < in_a2_lo[0xf] - (float)param_3)) {
    uVar1 = 0;
  }
  else {
    fVar5 = in_a2_lo[5] * fVar4 + fVar2 * in_a2_lo[3] + fVar3 * in_a2_lo[4];
    if ((in_a2_lo[0xe] + (float)param_3 < fVar5) || (fVar5 < in_a2_lo[0xd] - (float)param_3)) {
      uVar1 = 0;
    }
    else {
      fVar2 = (in_a2_lo[3] * in_a2_lo[7] - in_a2_lo[6] * in_a2_lo[4]) * fVar4 +
              fVar2 * (in_a2_lo[4] * in_a2_lo[8] - in_a2_lo[7] * in_a2_lo[5]) +
              fVar3 * (in_a2_lo[5] * in_a2_lo[6] - in_a2_lo[8] * in_a2_lo[3]);
      if ((in_a2_lo[0xc] + (float)param_3 < fVar2) ||
         (uVar1 = 1, fVar2 < in_a2_lo[0xb] - (float)param_3)) {
        uVar1 = 0;
      }
    }
  }
  return uVar1;
}



void proc_7F03F748(int param_1,float *param_2,float *param_3,longlong param_4)

{
  ushort uVar1;
  int iVar2;
  bool bVar3;
  float *pfVar4;
  ushort *puVar5;
  ushort *puVar6;
  float fVar7;
  float fVar8;
  
  puVar5 = **(ushort ***)(param_1 + 8);
  bVar3 = true;
  if (puVar5 != NULL) {
    uVar1 = *puVar5;
    while( true ) {
      if ((uVar1 & 0xff) == 10) {
        iVar2 = *(int *)(puVar5 + 2);
        pfVar4 = (float *)proc_7F06C660(param_1,puVar5,0);
        if (param_4 == 0) {
          fVar7 = proc_7F03E91C(iVar2,pfVar4);
          fVar7 = pfVar4[0xc] + fVar7;
          fVar8 = proc_7F03E87C(iVar2,pfVar4);
          fVar8 = pfVar4[0xc] + fVar8;
        }
        else {
          if (param_4 == 1) {
            fVar7 = proc_7F03EA5C(iVar2,(int)pfVar4);
            fVar7 = pfVar4[0xd] + fVar7;
            fVar8 = proc_7F03E9BC(iVar2,(int)pfVar4);
            fVar8 = pfVar4[0xd] + fVar8;
          }
          else {
            fVar7 = proc_7F03EB9C(iVar2,(int)pfVar4);
            fVar7 = pfVar4[0xe] + fVar7;
            fVar8 = proc_7F03EAFC(iVar2,(int)pfVar4);
            fVar8 = pfVar4[0xe] + fVar8;
          }
        }
        if ((bVar3) || (*param_2 < fVar7)) {
          *param_2 = fVar7;
        }
        if ((bVar3) || (fVar8 < *param_3)) {
          *param_3 = fVar8;
        }
        puVar6 = *(ushort **)(puVar5 + 10);
        bVar3 = false;
      }
      else {
        puVar6 = *(ushort **)(puVar5 + 10);
      }
      if ((puVar6 == NULL) && (puVar6 = puVar5, puVar5 != NULL)) {
        puVar6 = *(ushort **)(puVar5 + 6);
        while ((puVar6 == NULL &&
               (puVar5 = *(ushort **)(puVar5 + 4), puVar6 = puVar5, puVar5 != NULL))) {
          puVar6 = *(ushort **)(puVar5 + 6);
        }
      }
      if (puVar6 == NULL) break;
      uVar1 = *puVar6;
      puVar5 = puVar6;
    }
  }
  return;
}



void proc_7F03F90C(int param_1,float *param_2,float *param_3,float *param_4,float *param_5)

{
  proc_7F03F748(param_1,param_2,param_3,0);
  proc_7F03F748(param_1,param_4,param_5,1);
  return;
}



void proc_7F03F948(float *param_1,float *param_2,undefined4 *param_3,float *param_4,float *param_5)

{
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack12 = *param_2;
  fStack8 = param_1[1];
  fStack4 = param_1[2];
  proc_7F077FF4(&fStack12,&fStack20);
  *param_4 = fStack20;
  fStack12 = param_2[1];
  fStack8 = param_1[1];
  fStack4 = param_1[2];
  proc_7F077FF4(&fStack12,&fStack20);
  *param_5 = fStack20;
  fStack12 = *param_1;
  fStack8 = (float)param_3[1];
  fStack4 = param_1[2];
  proc_7F077FF4(&fStack12,&fStack20);
  param_4[1] = fStack16;
  fStack12 = *param_1;
  fStack8 = (float)*param_3;
  fStack4 = param_1[2];
  proc_7F077FF4(&fStack12,&fStack20);
  param_5[1] = fStack16;
  return;
}



int scan_position_data_table_for_normal_object_at_preset(short param_1)

{
  char cVar1;
  char *pcVar2;
  
  pcVar2 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar2 != NULL) {
    cVar1 = *pcVar2;
    while( true ) {
      if (cVar1 == '\x01') {
        if ((longlong)(int)param_1 == (longlong)*(short *)(*(int *)(pcVar2 + 4) + 6)) {
          return *(int *)(pcVar2 + 4);
        }
        pcVar2 = *(char **)(pcVar2 + 0x24);
      }
      else {
        pcVar2 = *(char **)(pcVar2 + 0x24);
      }
      if (pcVar2 == NULL) break;
      cVar1 = *pcVar2;
    }
  }
  return 0;
}



undefined4 proc_7F03FAB0(float *param_1,ulonglong param_2)

{
  char cVar1;
  longlong lVar2;
  char *pcVar3;
  uint uStack12;
  float *apfStack8 [2];
  
  pcVar3 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar3 != NULL) {
    cVar1 = *pcVar3;
    while( true ) {
      if (cVar1 == '\x01') {
        if (param_2 == (ulonglong)*(byte *)(*(int *)(pcVar3 + 0x14) + 3)) {
          proc_7F03CCB0(pcVar3,(int **)apfStack8,&uStack12);
          lVar2 = proc_7F03CCD8(param_1,apfStack8[0],uStack12);
          if (lVar2 != 0) {
            return *(undefined4 *)(pcVar3 + 4);
          }
          pcVar3 = *(char **)(pcVar3 + 0x24);
        }
        else {
          pcVar3 = *(char **)(pcVar3 + 0x24);
        }
      }
      else {
        pcVar3 = *(char **)(pcVar3 + 0x24);
      }
      if (pcVar3 == NULL) break;
      cVar1 = *pcVar3;
    }
  }
  return 0;
}



void proc_7F03FB70(uint *param_1)

{
  ulonglong uVar1;
  uint uVar2;
  
  if ((*param_1 & 0x80) == 0) {
    uVar2 = *param_1;
  }
  else {
    if (param_1[0x26] == 0) {
      uVar2 = param_1[0x27];
    }
    else {
      uVar1 = music_related_26(param_1[0x26]);
      if (uVar1 == 0) {
        uVar2 = param_1[0x27];
      }
      else {
        music_related_28(param_1[0x26]);
        uVar2 = param_1[0x27];
      }
    }
    if (uVar2 == 0) {
      uVar2 = *param_1;
    }
    else {
      uVar1 = music_related_26(uVar2);
      if (uVar1 == 0) {
        uVar2 = *param_1;
      }
      else {
        music_related_28(param_1[0x27]);
        uVar2 = *param_1;
      }
    }
  }
  *param_1 = uVar2 | 0x80000000;
  return;
}



void proc_7F03FBFC(undefined4 *param_1)

{
  float fVar1;
  
  *param_1 = 0;
  param_1[0x22] = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  param_1[3] = 0;
  param_1[4] = 0;
  param_1[5] = 0;
  param_1[6] = 0;
  param_1[7] = 0;
  param_1[0x18] = 0x3f800000;
  fVar1 = flt_80052A48;
  param_1[0x24] = 0;
  param_1[0x28] = 0xffffffff;
  param_1[0x29] = 0;
  param_1[0x2a] = 0;
  param_1[0x2b] = 0xffffffff;
  param_1[0x2e] = 1;
  param_1[0x2f] = 0;
  param_1[0x38] = 0;
  param_1[0x39] = 0;
  param_1[0x3a] = 0;
  param_1[0x25] = 0;
  param_1[0x30] = 0x3f800000;
  param_1[0x31] = 0x3f800000;
  param_1[0x32] = 0x3f800000;
  *(float *)(param_1 + 0x23) = fVar1;
  return;
}



undefined4 * proc_7F03FC80(void)

{
  uint uVar1;
  uint *puVar2;
  undefined4 *puVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = -1;
  puVar2 = &DAT_80073dc0;
  iVar4 = 0;
  do {
    uVar1 = *puVar2;
    puVar2 = puVar2 + 0x3b;
    if ((uVar1 & 0x80000000) != 0) {
      proc_7F03FBFC((undefined4 *)((int)&DAT_80073dc0 + iVar4));
      return (undefined4 *)((int)&DAT_80073dc0 + iVar4);
    }
    iVar4 += 0xec;
  } while (puVar2 < &DAT_80075030);
  puVar3 = &DAT_80073dc0;
  iVar4 = 0;
  do {
    if ((puVar3[0x39] != 0) &&
       ((iVar5 < 0 || ((int)puVar3[0x3a] < (int)(&DAT_80073ea8)[iVar5 * 0x3b])))) {
      iVar5 = iVar4;
    }
    iVar4 += 1;
    puVar3 = puVar3 + 0x3b;
  } while (iVar4 != 0x14);
  puVar3 = NULL;
  if (-1 < iVar5) {
    proc_7F040CF0(*(int *)((&DAT_80073ea4)[iVar5 * 0x3b] + 0x10));
    puVar3 = &DAT_80073dc0 + iVar5 * 0x3b;
    *(uint *)((&DAT_80073ea4)[iVar5 * 0x3b] + 100) =
         *(uint *)((&DAT_80073ea4)[iVar5 * 0x3b] + 100) | 4;
    proc_7F03FBFC(puVar3);
  }
  return puVar3;
}



void proc_7F03FDA8(int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  
  iVar1 = *(int *)(param_1 + 4);
  if ((*(uint *)(iVar1 + 100) & 0x40) == 0) {
    if ((*(uint *)(iVar1 + 100) & 0x80) == 0) {
      puVar2 = proc_7F03FC80();
      *(undefined4 **)(iVar1 + 0x6c) = puVar2;
      if (puVar2 != NULL) {
        *(uint *)(iVar1 + 100) = *(uint *)(iVar1 + 100) | 0x80;
      }
    }
  }
  else {
    puVar2 = proc_7F03FC80();
    *(undefined4 **)(*(int *)(iVar1 + 0x6c) + 0x44) = puVar2;
  }
  return;
}



void proc_7F03FE14(int param_1)

{
  undefined uVar1;
  int iVar2;
  uint *puVar3;
  
  iVar2 = *(int *)(param_1 + 4);
  puVar3 = NULL;
  if ((*(uint *)(iVar2 + 100) & 0x40) == 0) {
    if ((*(uint *)(iVar2 + 100) & 0x80) != 0) {
      puVar3 = *(uint **)(iVar2 + 0x6c);
    }
  }
  else {
    puVar3 = *(uint **)(*(int *)(iVar2 + 0x6c) + 0x44);
  }
  if (puVar3 != NULL) {
    *puVar3 = *puVar3 | 4;
    if (*(int *)(param_1 + 0x14) != 0) {
      uVar1 = *(undefined *)(*(int *)(param_1 + 0x14) + 3);
      *(undefined *)((int)puVar3 + 0xcd) = 0xff;
      *(undefined *)(puVar3 + 0x33) = uVar1;
      return;
    }
    *(undefined *)(puVar3 + 0x33) = 0xff;
  }
  return;
}



void proc_7F03FE88(uint *param_1)

{
  *param_1 = *param_1 | 1;
  return;
}



int proc_7F03FE98(void)

{
  int iVar1;
  uint *puVar2;
  
  puVar2 = &DAT_80075030;
  iVar1 = 0;
  while( true ) {
    if ((*puVar2 & 1) != 0) {
      *puVar2 = 0;
      puVar2[0x11] = 0;
      return (int)&DAT_80075030 + iVar1;
    }
    if ((puVar2[0x12] & 1) != 0) {
      puVar2[0x12] = 0;
      puVar2[0x23] = 0;
      return (int)&DAT_80075078 + iVar1;
    }
    if ((puVar2[0x24] & 1) != 0) {
      puVar2[0x24] = 0;
      puVar2[0x35] = 0;
      return (int)&DAT_800750c0 + iVar1;
    }
    if ((puVar2[0x36] & 1) != 0) break;
    puVar2 = puVar2 + 0x48;
    iVar1 += 0x120;
    if (puVar2 == &objinst) {
      return 0;
    }
  }
  puVar2[0x36] = 0;
  puVar2[0x47] = 0;
  return (int)&DAT_80075108 + iVar1;
}



int proc_7F03FF60(int param_1)

{
  if ((*(byte *)(param_1 + 2) & 0x80) != 0) {
    return (int)(*(float *)(param_1 + 0x70) + 4.00000000);
  }
  return (int)((*(float *)(param_1 + 0x70) * 3.00000000) / *(float *)(param_1 + 0x74));
}



int do_something_if_object_destroyed(int param_1)

{
  if ((*(byte *)(param_1 + 2) & 0x80) != 0) {
    return ((int)*(float *)(param_1 + 0x70) >> 2) + 1;
  }
  return 0;
}



undefined4 proc_7F03FFF8(int *param_1)

{
  short sVar1;
  short *psVar2;
  short *psVar3;
  
  psVar3 = *(short **)(*param_1 + 0x14);
  if (psVar3 != NULL) {
    if (psVar3 != NULL) {
      sVar1 = *psVar3;
      psVar2 = psVar3;
      while( true ) {
        if (sVar1 == 10) {
          return *(undefined4 *)(psVar2 + 2);
        }
        psVar2 = *(short **)(psVar2 + 6);
        if (psVar2 == NULL) break;
        sVar1 = *psVar2;
      }
    }
    psVar3 = *(short **)(psVar3 + 10);
    if ((psVar3 != NULL) && (psVar3 != NULL)) {
      sVar1 = *psVar3;
      while( true ) {
        if (sVar1 == 10) {
          return *(undefined4 *)(psVar3 + 2);
        }
        psVar3 = *(short **)(psVar3 + 6);
        if (psVar3 == NULL) break;
        sVar1 = *psVar3;
      }
    }
  }
  return 0;
}



undefined4 proc_7F040078(int param_1)

{
  undefined4 uVar1;
  
  uVar1 = proc_7F03FFF8(*(int **)(*(int *)(param_1 + 0x14) + 8));
  return uVar1;
}



void proc_7F04009C(int param_1,byte *param_2)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  int iVar4;
  float fVar5;
  uint uVar6;
  int iVar7;
  ulonglong uVar8;
  byte *pbVar9;
  uint uVar10;
  float fVar11;
  byte bVar12;
  
  copy_tile_RGB_as_24bit
            (*(int **)(param_1 + 0x14),*(int *)(param_1 + 8),*(int *)(param_1 + 0x10),
             (tile_rgb *)param_2);
  bVar1 = param_2[2];
  bVar2 = *param_2;
  bVar3 = param_2[1];
  fVar11 = (float)(0xff - ((int)((uint)bVar1 * 0x14 + (uint)bVar1 +
                                 ((uint)bVar2 * 0x50 - (uint)bVar2) +
                                ((uint)bVar3 * 0x28 - (uint)bVar3) * 4) >> 8)) * 0.75000000;
  if (false) {
    fVar5 = ROUND(fVar11);
  }
  else {
    fVar5 = FLOOR(fVar11);
  }
  bVar12 = (byte)(int)fVar5;
  if (false) {
    if (false) {
      fVar11 = ROUND(fVar11 - 2147483648.00000000);
    }
    else {
      fVar11 = FLOOR(fVar11 - 2147483648.00000000);
    }
    if (true) {
      bVar12 = (byte)(int)fVar11;
      goto LAB_7f0401b8;
    }
  }
  else {
    if (-1 < (int)fVar5) goto LAB_7f0401b8;
  }
  bVar12 = 0xff;
LAB_7f0401b8:
  param_2[3] = bVar12;
  uVar10 = (uint)(bVar3 <= bVar2);
  uVar6 = (uint)(bVar3 > bVar2);
  pbVar9 = param_2 + uVar6;
  uVar8 = (ulonglong)*pbVar9;
  if (uVar8 < (ulonglong)bVar1) {
    pbVar9 = param_2 + 2;
    uVar8 = (ulonglong)*pbVar9;
  }
  else {
    if ((ulonglong)param_2[uVar10] < (ulonglong)bVar1) {
      uVar6 = 2;
    }
    else {
      uVar6 = uVar10;
      uVar10 = 2;
    }
  }
  if (uVar8 != 0) {
    bVar1 = param_2[uVar10];
    bVar2 = param_2[uVar6];
    param_2[uVar10] = 0;
    iVar7 = (int)uVar8 - (uint)bVar1;
    iVar4 = (uint)bVar2 * iVar7;
    param_2[uVar6] = (byte)(iVar4 / (int)uVar8);
    *pbVar9 = (byte)iVar7;
    if (uVar8 == 0) {
      trap(0x1c00);
    }
    if ((uVar8 == 0xffffffffffffffff) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    bVar3 = param_2[1];
    bVar2 = *param_2;
    bVar1 = param_2[2];
  }
  *param_2 = bVar2 >> 1;
  param_2[1] = bVar3 >> 1;
  param_2[2] = bVar1 >> 1;
  return;
}



void proc_7F0402B4(int param_1,byte *param_2)

{
  if ((*(uint *)(*(int *)(param_1 + 4) + 8) & 0x400) == 0) {
    proc_7F04009C(param_1,param_2);
    *param_2 = *param_2 >> 1;
    param_2[1] = param_2[1] >> 1;
    param_2[2] = param_2[2] >> 1;
  }
  return;
}



void proc_7F040310(byte *param_1,byte *param_2)

{
  *param_1 = *param_1 + (char)((int)(((uint)*param_2 - (uint)*param_1) + 7) >> 3);
  param_1[1] = param_1[1] + (char)((int)(((uint)param_2[1] - (uint)param_1[1]) + 7) >> 3);
  param_1[2] = param_1[2] + (char)((int)(((uint)param_2[2] - (uint)param_1[2]) + 7) >> 3);
  param_1[3] = param_1[3] + (char)((int)(((uint)param_2[3] - (uint)param_1[3]) + 7) >> 3);
  return;
}



void proc_7F040384(int *param_1,longlong param_2,float *param_3)

{
  if (param_2 == 1) {
    *param_3 = *param_3 * 255.00000000;
    param_3[1] = param_3[1] * 255.00000000;
    param_3[2] = param_3[2] * 255.00000000;
    *param_1 = (int)(param_3[3] * (*param_3 - (float)*param_1) + (float)*param_1);
    param_1[1] = (int)(param_3[3] * (param_3[1] - (float)param_1[1]) + (float)param_1[1]);
    param_1[2] = (int)(param_3[3] * (param_3[2] - (float)param_1[2]) + (float)param_1[2]);
    param_1[3] = (int)(param_3[3] * (255.00000000 - (float)param_1[3]) + (float)param_1[3]);
  }
  return;
}



void proc_7F040484(int param_1)

{
  float fVar1;
  undefined4 auStack68 [16];
  int iStack4;
  
  if (*(int *)(param_1 + 0x68) != 0) {
    iStack4 = proc_7F040078(param_1);
    proc_7F058020((undefined4 *)(param_1 + 0x18),auStack68);
    proc_7F058998((undefined4 *)(param_1 + 0x58),(int)auStack68);
    proc_7F03F540((longlong)iStack4,(longlong)(int)auStack68,
                  (float *)(*(uint **)(param_1 + 0x68) + 1),*(uint **)(param_1 + 0x68));
    fVar1 = proc_7F03E9BC(iStack4,(int)auStack68);
    *(float *)(*(int *)(param_1 + 0x68) + 0x48) = fVar1 + *(float *)(param_1 + 0x5c);
    fVar1 = proc_7F03EA5C(iStack4,(int)auStack68);
    *(float *)(*(int *)(param_1 + 0x68) + 0x44) = fVar1 + *(float *)(param_1 + 0x5c);
    if (*(char *)(param_1 + 3) == '(') {
      *(float *)(*(int *)(param_1 + 0x68) + 0x48) =
           *(float *)(*(int *)(param_1 + 0x68) + 0x48) - 200.00000000;
    }
  }
  return;
}



undefined * init_standard_object(int object,ushort **objheader,undefined *objpos,uint objcontroller)

{
  void *pvVar1;
  f32 scale;
  f32 extraout_f12;
  f32 extraout_f12_00;
  f32 extraout_f12_01;
  f32 extraout_f12_02;
  
  if (objpos == NULL) {
    objpos = (undefined *)remove_last_obj_pos_data_entry();
    scale = extraout_f12;
  }
  if (objcontroller == 0) {
    if (*(char *)(object + 3) == '(') {
      objcontroller = get_aircraft_obj_instance_controller((int *)objheader);
      scale = extraout_f12_00;
    }
    else {
      objcontroller = get_obj_instance_controller_for_header((PitemZ_header *)objheader);
      scale = extraout_f12_01;
    }
  }
  if (((object_standard *)objpos == NULL) || ((int *)objcontroller == NULL)) {
    if ((int *)objcontroller != NULL) {
      if (*(char *)(object + 3) == '(') {
        set_aircraft_obj_inst_scale_to_zero((int *)objcontroller);
      }
      else {
        set_obj_instance_scale_to_zero((int *)objcontroller);
      }
    }
    if ((object_standard *)objpos != NULL) {
      set_last_obj_pos_data((object_standard *)objpos);
      objpos = NULL;
    }
  }
  else {
    *(uint *)(object + 0x14) = objcontroller;
    *(undefined4 *)(object + 0x68) = 0;
    if ((*(uint *)(object + 8) & 0x100) == 0) {
      *(byte *)(object + 2) = *(byte *)(object + 2) & 0xf7;
    }
    else {
      pvVar1 = allocate_bytes_in_bank(0x50,4);
      *(void **)(object + 0x68) = pvVar1;
      *(byte *)(object + 2) = *(byte *)(object + 2) | 8;
      scale = extraout_f12_02;
    }
    *(undefined **)(object + 0x10) = objpos;
    *(undefined4 *)(object + 0x6c) = 0;
    *(undefined *)(object + 0x78) = 0;
    *(undefined *)(object + 0x79) = 0;
    *(undefined *)(object + 0x7a) = 0;
    *(undefined *)(object + 0x7b) = 0;
    *(undefined *)(object + 0x7c) = 0;
    *(undefined *)(object + 0x7d) = 0;
    *(undefined *)(object + 0x7e) = 0;
    *(undefined *)(object + 0x7f) = 0;
    *(undefined4 *)(object + 0x70) = 0;
    **(undefined2 **)(object + 0x14) = 0xffff;
    *(undefined4 *)(*(int *)(object + 0x14) + 4) = 0;
    set_obj_instance_controller_scale(*(int *)(object + 0x14),scale);
    *(undefined *)&((object_standard *)objpos)->scale = 1;
    *(int *)&((object_standard *)objpos)->objectID = object;
    *(undefined4 *)&((object_standard *)objpos)->FLAGS1 = 0;
    *(undefined4 *)(object + 0x58) = 0;
    *(undefined4 *)&((object_standard *)objpos)->FLAGS5 = 0;
    *(undefined4 *)(object + 0x5c) = 0;
    ((object_standard *)objpos)->runtime_ptr_obj_posdata = 0;
    *(undefined4 *)(object + 0x60) = 0;
    ((object_standard *)objpos)->runtime_ptr_obj_instance_controller = 0;
  }
  return objpos;
}



undefined * proc_7F0406F8(int param_1,ushort **param_2)

{
  undefined *puVar1;
  
  puVar1 = init_standard_object(param_1,param_2,NULL,0);
  return puVar1;
}



undefined * proc_7F04071C(int param_1)

{
  undefined *puVar1;
  
  puVar1 = proc_7F0406F8(param_1,(ushort **)PitemZ_entries[(int)*(short *)(param_1 + 4)].header);
  return puVar1;
}



void proc_7F040754(int param_1,undefined4 *param_2,undefined4 *param_3,undefined4 param_4)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = *(int *)(param_1 + 0x10);
  proc_7F058020(param_3,(undefined4 *)(param_1 + 0x18));
  uVar2 = *param_2;
  *(undefined4 *)(iVar1 + 8) = uVar2;
  *(undefined4 *)(param_1 + 0x58) = uVar2;
  uVar2 = param_2[1];
  *(undefined4 *)(iVar1 + 0xc) = uVar2;
  *(undefined4 *)(param_1 + 0x5c) = uVar2;
  uVar2 = param_2[2];
  *(undefined4 *)(iVar1 + 0x10) = uVar2;
  *(undefined4 *)(param_1 + 0x60) = uVar2;
  *(undefined4 *)(iVar1 + 0x14) = param_4;
  proc_7F0402B4(*(int *)(param_1 + 0x10),(byte *)(param_1 + 0x7c));
  *(undefined *)(param_1 + 0x78) = *(undefined *)(param_1 + 0x7c);
  *(undefined *)(param_1 + 0x79) = *(undefined *)(param_1 + 0x7d);
  *(undefined *)(param_1 + 0x7a) = *(undefined *)(param_1 + 0x7e);
  *(undefined *)(param_1 + 0x7b) = *(undefined *)(param_1 + 0x7f);
  return;
}



void proc_7F0407F4(int param_1,undefined4 *param_2,undefined4 *param_3,undefined4 param_4)

{
  int iVar1;
  float fVar2;
  
  iVar1 = proc_7F03FFF8(*(int **)(*(int *)(param_1 + 0x14) + 8));
  fVar2 = (float)proc_7F0B2970();
  *(float *)(param_2 + 1) = fVar2 + 4.00000000;
  fVar2 = proc_7F03E9BC(iVar1,(int)param_3);
  *(float *)(param_2 + 1) = (float)param_2[1] - fVar2;
  proc_7F040754(param_1,param_2,param_3,param_4);
  proc_7F040484(param_1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F04088C(void)

{
  int iVar2;
  longlong lVar1;
  int in_a0_lo;
  undefined8 extraout_a0;
  float *in_a1_lo;
  float *in_a2_lo;
  int in_a3_lo;
  float in_f0;
  float extraout_f12;
  float extraout_f12_00;
  float fVar3;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float fVar4;
  float *in_stack_00000010;
  float fStack120;
  float fStack116;
  undefined4 uStack112;
  int *piStack108;
  float fStack104;
  float afStack96 [4];
  float fStack80;
  float fStack76;
  float fStack72;
  int iStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  int iStack8;
  
  iStack8 = proc_7F03FFF8(*(int **)(*(int *)(in_a0_lo + 0x14) + 8));
  proc_7F03E864(iStack8);
  fStack12 = in_f0;
  proc_7F03E86C(iStack8);
  if ((*(uint *)(in_a0_lo + 8) & 4) == 0) {
    if ((*(uint *)(in_a0_lo + 8) & 8) == 0) {
      iStack32 = in_a3_lo;
      fStack16 = in_f0;
      fStack104 = (float)proc_7F0B2970();
      proc_7F058020(in_a2_lo,afStack96);
      fStack28 = *in_stack_00000010 - fStack80 * fStack12;
      fStack20 = in_stack_00000010[2] - fStack72 * fStack12;
      iVar2 = proc_7F03FAB0(in_a1_lo,(ulonglong)*(byte *)(in_a3_lo + 3));
      if (iVar2 == 0) {
        fStack24 = (fStack104 - fStack76 * fStack12) + 4.00000000;
        fVar3 = fStack104;
        fVar4 = extraout_f14_01;
      }
      else {
        proc_7F03CC20(*(char **)(iVar2 + 0x10),&piStack108,&uStack112,&fStack116,&fStack120);
        if ((fStack116 <= fStack104) ||
           (fStack76 * (fStack16 - fStack12) + fStack104 + 4.00000000 <= fStack120)) {
          fStack24 = (fStack104 - fStack76 * fStack12) + 4.00000000;
          fVar3 = fStack104;
          fVar4 = extraout_f14_02;
        }
        else {
          fStack24 = fStack116 - fStack76 * fStack12;
          *(uint *)(in_a0_lo + 100) = *(uint *)(in_a0_lo + 100) | 0x8000;
          fVar3 = fStack104;
          fVar4 = extraout_f14_02;
        }
      }
    }
    else {
      iStack32 = in_a3_lo;
      proc_7F058020(in_a2_lo,afStack96);
      fStack28 = *in_stack_00000010 - fStack80 * fStack12;
      fStack24 = in_stack_00000010[1] - fStack76 * fStack12;
      fStack20 = in_stack_00000010[2] - fStack72 * fStack12;
      fVar3 = extraout_f12_00;
      fVar4 = extraout_f14_00;
    }
  }
  else {
    iStack32 = in_a3_lo;
    fStack16 = in_f0;
    proc_7F058688(flt_80052A4C,extraout_a0,afStack96);
    proc_7F058068(in_a2_lo,afStack96);
    fStack28 = *in_stack_00000010 - fStack80 * fStack16;
    fStack24 = in_stack_00000010[1] - fStack76 * fStack16;
    fStack20 = in_stack_00000010[2] - fStack72 * fStack16;
    fVar3 = extraout_f12;
    fVar4 = extraout_f14;
  }
  lVar1 = (longlong)(int)in_a1_lo;
  if (((*(uint *)(in_a0_lo + 0xc) & 1) == 0) &&
     (proc_7F0B0BE4(&iStack32,fVar3,fVar4,*in_a1_lo,in_a1_lo[2]), lVar1 != 0)) {
    proc_7F040754(in_a0_lo,&fStack28,afStack96,iStack32);
  }
  else {
    proc_7F040754(in_a0_lo,in_a1_lo,afStack96,in_a3_lo);
    if ((*(uint *)(in_a0_lo + 0xc) & 1) == 0) {
      if ((*(uint *)(in_a0_lo + 8) & 0x1000) == 0) goto LAB_7f040b84;
      *(float *)(in_a0_lo + 0x58) = fStack28;
    }
    else {
      *(float *)(in_a0_lo + 0x58) = fStack28;
    }
    *(float *)(in_a0_lo + 0x5c) = fStack24;
    *(float *)(in_a0_lo + 0x60) = fStack20;
  }
LAB_7f040b84:
  proc_7F040484(in_a0_lo);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F040BA0(void)

{
  int iVar2;
  longlong lVar1;
  int in_a0_lo;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  float *in_a1_lo;
  float *in_a2_lo;
  int in_a3_lo;
  float in_f0;
  float extraout_f12;
  float extraout_f14;
  float *in_stack_00000010;
  float afStack156 [16];
  float afStack92 [8];
  float fStack60;
  float fStack56;
  float fStack52;
  int iStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  
  iVar2 = proc_7F03FFF8(*(int **)(*(int *)(in_a0_lo + 0x14) + 8));
  proc_7F03E874(iVar2);
  iStack28 = in_a3_lo;
  fStack12 = in_f0;
  proc_7F058570(flt_80052A50,extraout_a0,afStack92);
  proc_7F0585FC(flt_80052A54,extraout_a0_00,afStack156);
  proc_7F058068(afStack156,afStack92);
  proc_7F058068(in_a2_lo,afStack92);
  fStack24 = *in_stack_00000010 - fStack60 * fStack12;
  fStack20 = in_stack_00000010[1] - fStack56 * fStack12;
  lVar1 = (longlong)(int)in_a1_lo;
  fStack16 = in_stack_00000010[2] - fStack52 * fStack12;
  if (((*(uint *)(in_a0_lo + 0xc) & 1) == 0) &&
     (proc_7F0B0BE4(&iStack28,extraout_f12,extraout_f14,*in_a1_lo,in_a1_lo[2]), lVar1 != 0)) {
    proc_7F040754(in_a0_lo,&fStack24,afStack92,iStack28);
  }
  else {
    proc_7F040754(in_a0_lo,in_a1_lo,afStack92,in_a3_lo);
    *(float *)(in_a0_lo + 0x58) = fStack24;
    *(float *)(in_a0_lo + 0x5c) = fStack20;
    *(float *)(in_a0_lo + 0x60) = fStack16;
  }
  proc_7F040484(in_a0_lo);
  return;
}



void proc_7F040CF0(int param_1)

{
  int iVar1;
  uint uVar2;
  uint *puVar3;
  
  iVar1 = *(int *)(param_1 + 4);
  uVar2 = *(uint *)(iVar1 + 100);
  if ((uVar2 & 0x40) == 0) {
    if ((uVar2 & 0x80) != 0) {
      proc_7F03FB70(*(uint **)(iVar1 + 0x6c));
      *(undefined4 *)(iVar1 + 0x6c) = 0;
      *(uint *)(iVar1 + 100) = *(uint *)(iVar1 + 100) & 0xffffff7f;
    }
  }
  else {
    puVar3 = *(uint **)(iVar1 + 0x6c);
    if (puVar3 != NULL) {
      if ((uint *)puVar3[0x11] != NULL) {
        proc_7F03FB70((uint *)puVar3[0x11]);
        puVar3 = *(uint **)(iVar1 + 0x6c);
      }
      proc_7F03FE88(puVar3);
      uVar2 = *(uint *)(iVar1 + 100);
    }
    *(undefined4 *)(iVar1 + 0x6c) = 0;
    *(uint *)(iVar1 + 100) = uVar2 & 0xffffffbf;
  }
  return;
}



void proc_7F040D98(int param_1,int param_2,longlong param_3)

{
  char cVar1;
  int iVar2;
  ulonglong uVar3;
  int iVar4;
  
  cVar1 = *(char *)(param_1 + 3);
  if (cVar1 == '\r') {
    if (*(int *)(param_1 + 0xc4) == 0) {
      iVar4 = *(int *)(param_1 + 200);
    }
    else {
      uVar3 = music_related_26(*(int *)(param_1 + 0xc4));
      if (uVar3 == 0) {
        iVar4 = *(int *)(param_1 + 200);
      }
      else {
        music_related_28(*(int *)(param_1 + 0xc4));
        iVar4 = *(int *)(param_1 + 200);
      }
    }
    if (iVar4 == 0) {
      iVar4 = *(int *)(param_1 + 0x10);
    }
    else {
      uVar3 = music_related_26(iVar4);
      if (uVar3 == 0) {
        iVar4 = *(int *)(param_1 + 0x10);
      }
      else {
        music_related_28(*(int *)(param_1 + 200));
        iVar4 = *(int *)(param_1 + 0x10);
      }
    }
    goto LAB_7f040f28;
  }
  if (cVar1 == '\b') {
    if (*(int *)(param_1 + 0x84) == 0) {
      iVar4 = *(int *)(param_1 + 0x10);
      goto LAB_7f040f28;
    }
    *(undefined4 *)(*(int *)(param_1 + 0x84) + 0x84) = 0;
    *(undefined4 *)(param_1 + 0x84) = 0;
  }
  else {
    if (cVar1 == '\x01') {
      if (*(int *)(param_1 + 0xf4) == 0) {
        iVar4 = *(int *)(param_1 + 0xf8);
      }
      else {
        uVar3 = music_related_26(*(int *)(param_1 + 0xf4));
        if (uVar3 == 0) {
          iVar4 = *(int *)(param_1 + 0xf8);
        }
        else {
          music_related_28(*(int *)(param_1 + 0xf4));
          iVar4 = *(int *)(param_1 + 0xf8);
        }
      }
      if (iVar4 == 0) {
        iVar4 = *(int *)(param_1 + 0x10);
      }
      else {
        uVar3 = music_related_26(iVar4);
        if (uVar3 == 0) {
          iVar4 = *(int *)(param_1 + 0x10);
        }
        else {
          music_related_28(*(int *)(param_1 + 0xf8));
          iVar4 = *(int *)(param_1 + 0x10);
        }
      }
      goto LAB_7f040f28;
    }
    if (cVar1 == '/') {
      if (*(int *)(param_1 + 0x8c) < 0) {
        iVar4 = *(int *)(param_1 + 0x10);
      }
      else {
        proc_7F0B9DBC(*(int *)(param_1 + 0x8c),1);
        iVar4 = *(int *)(param_1 + 0x10);
      }
      goto LAB_7f040f28;
    }
    if (cVar1 == '(') {
      if (*(int *)(param_1 + 0xb0) == 0) {
        iVar4 = *(int *)(param_1 + 0x10);
      }
      else {
        uVar3 = music_related_26(*(int *)(param_1 + 0xb0));
        if (uVar3 == 0) {
          iVar4 = *(int *)(param_1 + 0x10);
        }
        else {
          music_related_28(*(int *)(param_1 + 0xb0));
          iVar4 = *(int *)(param_1 + 0x10);
        }
      }
      goto LAB_7f040f28;
    }
    if (cVar1 != '\'') {
      iVar4 = *(int *)(param_1 + 0x10);
      goto LAB_7f040f28;
    }
    if (*(int *)(param_1 + 0xac) == 0) {
      iVar4 = *(int *)(param_1 + 0x10);
      goto LAB_7f040f28;
    }
    uVar3 = music_related_26(*(int *)(param_1 + 0xac));
    if (uVar3 == 0) {
      iVar4 = *(int *)(param_1 + 0x10);
      goto LAB_7f040f28;
    }
    music_related_28(*(int *)(param_1 + 0xac));
  }
  iVar4 = *(int *)(param_1 + 0x10);
LAB_7f040f28:
  if (iVar4 != 0) {
    proc_7F0A0CCC(iVar4,'\0');
    proc_7F0A0CCC(*(int *)(param_1 + 0x10),'\x01');
    if (param_3 == 0) {
      proc_7F040CF0(*(int *)(param_1 + 0x10));
      iVar4 = *(int *)(param_1 + 0x10);
      if (*(int *)(iVar4 + 0x1c) != 0) {
        proc_7F04C044(iVar4);
        iVar4 = *(int *)(param_1 + 0x10);
      }
      proc_7F03E18C(iVar4);
      iVar4 = *(int *)(*(char **)(param_1 + 0x10) + 0x20);
      if (iVar4 == 0) {
        cVar1 = **(char **)(param_1 + 0x10);
      }
      else {
        do {
          iVar2 = *(int *)(iVar4 + 0x24);
          proc_7F041024(*(int *)(iVar4 + 4),1);
          iVar4 = iVar2;
        } while (iVar2 != 0);
        cVar1 = **(char **)(param_1 + 0x10);
      }
      if (cVar1 == '\x02') {
        cVar1 = *(char *)(param_1 + 3);
      }
      else {
        proc_7F050DE8(*(int *)(param_1 + 0x14));
        cVar1 = *(char *)(param_1 + 3);
      }
      if (cVar1 == '(') {
        set_aircraft_obj_inst_scale_to_zero(*(int **)(param_1 + 0x14));
      }
      else {
        set_obj_instance_scale_to_zero(*(int **)(param_1 + 0x14));
      }
      if (param_2 == 0) {
        *(undefined4 *)(param_1 + 0x10) = 0;
      }
      else {
        proc_7F03A538(*(int *)(param_1 + 0x10));
        unset_stateflag_0x04_for_posdata(*(int *)(param_1 + 0x10));
        set_last_obj_pos_data(*(object_standard **)(param_1 + 0x10));
        *(undefined4 *)(param_1 + 0x10) = 0;
      }
    }
  }
  return;
}



void proc_7F041024(int param_1,int param_2)

{
  proc_7F040D98(param_1,param_2,0);
  return;
}



undefined4 proc_7F041044(int param_1)

{
  undefined4 in_v0_lo;
  
  if (*(char *)(param_1 + 3) == '\x04') {
    return in_v0_lo;
  }
  return in_v0_lo;
}



undefined8 proc_7F041074(float *param_1,float *param_2,float *param_3,float param_4)

{
  undefined8 uVar1;
  float in_a3_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  uVar1 = 0;
  fVar4 = *param_3 - *param_1;
  fVar6 = param_3[1] - param_1[1];
  fVar5 = param_3[2] - param_1[2];
  fVar7 = *param_2;
  fVar8 = param_2[1];
  fVar3 = param_2[2];
  fVar2 = fVar5 * fVar3 + fVar7 * fVar4 + fVar8 * fVar6;
  if ((0.00000000 < fVar2) &&
     (((fVar5 * fVar5 + fVar4 * fVar4 + fVar6 * fVar6) - in_a3_lo * in_a3_lo) *
      (fVar3 * fVar3 + fVar7 * fVar7 + fVar8 * fVar8) <= fVar2 * fVar2)) {
    uVar1 = 1;
  }
  return uVar1;
}



undefined8
proc_7F041160(int param_1,float *param_2,float *param_3,float *param_4,float *param_5,int *param_6,
             ushort **param_7)

{
  int iVar1;
  longlong lVar2;
  int iVar4;
  undefined8 uVar3;
  float *pfVar5;
  float *pfVar6;
  ushort *puStack68;
  int iStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  ushort *apuStack12 [3];
  
  iVar1 = *(int *)(param_1 + 0x14);
  apuStack12[0] = NULL;
  puStack68 = NULL;
  if (*(char *)(param_1 + 3) == '\x01') {
    lVar2 = proc_7F0747D0(param_1 + 0xd0,*(float **)(iVar1 + 0xc),param_2,param_3);
    apuStack12[0] = **(ushort ***)(iVar1 + 8);
    if ((0 < lVar2) &&
       (iVar4 = proc_7F04D9B0(iVar1,apuStack12[0],param_2,param_3,&fStack60,&iStack64,&puStack68),
       iVar4 == 0)) {
      lVar2 = 0;
    }
  }
  else {
    do {
      iVar4 = proc_7F0752FC(iVar1,param_2,param_3,apuStack12);
      lVar2 = (longlong)iVar4;
      if ((0 < lVar2) &&
         (iVar4 = proc_7F04D9B0(iVar1,apuStack12[0],param_2,param_3,&fStack60,&iStack64,&puStack68),
         iVar4 != 0)) break;
    } while (0 < lVar2);
  }
  uVar3 = 0;
  if (0 < lVar2) {
    iVar4 = *(int *)(iVar1 + 0xc);
    *param_4 = fStack60;
    pfVar6 = (float *)(iVar4 + iStack64 * 0x40);
    param_4[1] = fStack56;
    param_4[2] = fStack52;
    proc_7F058474(pfVar6,param_4);
    pfVar5 = (float *)proc_7F078444();
    proc_7F058474(pfVar5,param_4);
    *param_5 = fStack48;
    param_5[1] = fStack44;
    param_5[2] = fStack40;
    proc_7F0583D8(pfVar6,param_5);
    if (0.00000000 < param_3[2] * param_5[2] + *param_5 * *param_3 + param_5[1] * param_3[1]) {
      *param_5 = -*param_5;
      param_5[1] = -param_5[1];
      param_5[2] = -param_5[2];
    }
    pfVar5 = (float *)proc_7F078444();
    proc_7F0583D8(pfVar5,param_5);
    if (((*param_5 == 0.00000000) && (param_5[1] == 0.00000000)) && (param_5[2] == 0.00000000)) {
      param_5[2] = 1.00000000;
    }
    else {
      guNormalize(param_5,param_5 + 1,param_5 + 2);
    }
    uVar3 = 1;
    *param_6 = iVar1;
    *param_7 = puStack68;
  }
  return uVar3;
}



undefined8
proc_7F041400(char *param_1,float *param_2,float *param_3,float *param_4,float *param_5,
             float *param_6,float *param_7)

{
  int iVar1;
  int iVar2;
  undefined8 uVar3;
  ulonglong uVar4;
  float *pfVar5;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  int iVar6;
  int iVar7;
  int iVar8;
  float fVar9;
  float fVar10;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack92;
  undefined4 uStack88;
  float fStack84;
  float fStack80;
  undefined4 uStack76;
  float fStack72;
  int iStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack16;
  float fStack12;
  int iStack8;
  int *piStack4;
  
  fVar10 = 1.00000000;
  iStack68 = -1;
  proc_7F03CC20(param_1,&piStack4,&iStack8,&fStack12,&fStack16);
  if (iStack8 < 1) {
    uVar3 = 0;
  }
  else {
    if ((param_2[1] <= fStack12) || (param_3[1] <= fStack12)) {
      if (param_2[1] < fStack16) {
        if (param_3[1] < fStack16) {
          return 0;
        }
        fStack56 = *param_2;
      }
      else {
        fStack56 = *param_2;
      }
      fStack52 = param_2[2];
      fStack64 = *param_3;
      fStack60 = param_3[2];
      if (0 < iStack8) {
        iVar7 = 0;
        uVar3 = extraout_a1;
        iVar6 = 0;
        do {
          iVar8 = iVar6 + 1;
          iVar1 = iVar8 % iStack8;
          pfVar5 = (float *)(piStack4 + iVar1 * 2);
          if (iStack8 == 0) {
            trap(0x1c00);
          }
          if ((iStack8 == -1) && (iVar8 == -0x80000000)) {
            trap(0x1800);
          }
          uVar4 = proc_7F0B0688(*param_2,param_2[2],(longlong)(int)pfVar5,uVar3,*param_3,param_3[2],
                                *(float *)((int)piStack4 + iVar7),
                                ((float *)((int)piStack4 + iVar7))[1],*pfVar5,pfVar5[1]);
          uVar3 = extraout_a1_00;
          fVar9 = fVar10;
          iVar2 = iStack68;
          if (uVar4 != 0) {
            fStack40 = *(float *)((int)piStack4 + iVar7);
            fStack36 = ((float *)((int)piStack4 + iVar7))[1];
            fStack48 = (float)piStack4[iVar1 * 2];
            fStack44 = (float)(piStack4 + iVar1 * 2)[1];
            fVar9 = proc_7F0B3200(&fStack56,&fStack64,&fStack40,&fStack48);
            uVar3 = extraout_a1_01;
            iVar2 = iVar6;
            if (fVar10 <= fVar9) {
              uVar3 = extraout_a1_01;
              fVar9 = fVar10;
              iVar2 = iStack68;
            }
          }
          iStack68 = iVar2;
          fVar10 = fVar9;
          iVar7 += 8;
          iVar6 = iVar8;
        } while (iVar8 < iStack8);
      }
      if (iStack68 < 1) {
        uVar3 = 0;
      }
      else {
        fStack80 = (float)piStack4[iStack68 * 2];
        uStack76 = 0;
        fStack72 = (float)(piStack4 + iStack68 * 2)[1];
        fStack92 = (float)piStack4[((iStack68 + 1) % iStack8) * 2];
        uStack88 = 0;
        fStack84 = (float)(piStack4 + ((iStack68 + 1) % iStack8) * 2)[1];
        if (iStack8 == 0) {
          trap(0x1c00);
        }
        if ((iStack8 == -1) && (iStack68 + 1 == -0x80000000)) {
          trap(0x1800);
        }
        proc_7F026130(&fStack80,&fStack92,param_2,param_4,&fStack108);
        fVar10 = param_4[2] * (fStack100 - param_2[2]) +
                 (fStack108 - *param_2) * *param_4 + (fStack104 - param_2[1]) * param_4[1];
        if (*param_7 <= fVar10) {
          uVar3 = 0;
        }
        else {
          *param_7 = fVar10;
          *param_5 = fStack108;
          param_5[1] = fStack104;
          param_5[2] = fStack100;
          fVar10 = *param_4;
          param_6[1] = 0.00000000;
          *param_6 = -fVar10;
          param_6[2] = -param_4[2];
          if ((*param_6 == 0.00000000) && (param_6[2] == 0.00000000)) {
            param_6[2] = 1.00000000;
          }
          else {
            guNormalize(param_6,param_6 + 1,param_6 + 2);
          }
          uVar3 = 1;
          bodypartshot = 0;
          objinst = 0;
          DAT_80075b74 = 0;
          dword_80030B0C = param_1;
        }
      }
    }
    else {
      uVar3 = 0;
    }
  }
  return uVar3;
}



ulonglong proc_7F0417DC(int param_1,float *param_2,float *param_3,float *param_4,float param_5,
                       float *param_6,float *param_7,float *param_8,float *param_9,float *param_10,
                       int *param_11,ushort **param_12)

{
  ushort *objinst;
  char *pcVar1;
  longlong lVar2;
  undefined4 extraout_a3_lo;
  float fVar3;
  float fVar4;
  float extraout_f12;
  ushort **in_stack_0000002c;
  
  objinst = *(ushort **)(param_1 + 0x14);
  fVar3 = getinstsize((int)objinst,(uint)param_2,param_3,param_4);
  pcVar1 = *(char **)(param_1 + 0x10);
  fVar4 = 0.00000000;
  if (*(int *)(pcVar1 + 0x1c) == 0) {
    fVar4 = param_4[2] * (*(float *)(param_1 + 0x60) - param_2[2]) +
            (*(float *)(param_1 + 0x58) - *param_2) * *param_4 +
            (*(float *)(param_1 + 0x5c) - param_2[1]) * param_4[1];
  }
  if ((-fVar3 <= fVar4) && (fVar4 <= (float)param_6 + fVar3)) {
    if ((pcVar1[1] & 2U) == 0) {
      getinstsize((int)objinst,(uint)param_7,param_8,extraout_a3_lo);
      lVar2 = proc_7F041074(param_2,param_4,(float *)(param_1 + 0x58),extraout_f12);
      if (lVar2 != 0) {
        *(float **)param_11 = param_6;
        lVar2 = proc_7F041400(pcVar1,param_2,param_3,param_4,param_9,param_10,(float *)param_11);
        if (lVar2 != 0) {
          *param_12 = objinst;
          *in_stack_0000002c = **(ushort ***)(objinst + 4);
          return 1;
        }
      }
    }
    else {
      lVar2 = proc_7F041160(param_1,param_7,param_8,param_9,param_10,(int *)param_12,
                            in_stack_0000002c);
      if (lVar2 != 0) {
        fVar3 = param_4[2] * (param_9[2] - param_2[2]) +
                (*param_9 - *param_2) * *param_4 + (param_9[1] - param_2[1]) * param_4[1];
        if (fVar3 < 0.00000000) {
          return 0;
        }
        if (fVar3 <= (float)param_6) {
          *(float *)param_11 = fVar3;
          return 1;
        }
        return 0;
      }
    }
  }
  return 0;
}



undefined8
proc_7F0419E4(int param_1,undefined8 param_2,undefined8 param_3,undefined8 param_4,float param_5,
             float *param_6,float *param_7,float *param_8,float *param_9,float *param_10)

{
  byte bVar1;
  ulonglong uVar2;
  longlong lVar3;
  int iVar4;
  undefined8 uVar5;
  float extraout_f12;
  float extraout_f12_00;
  float param_5_00;
  float *in_stack_00000024;
  undefined4 uStack36;
  ushort *puStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  iVar4 = *(int *)(param_1 + 0x10);
  uVar5 = 0;
  uVar2 = proc_7F0417DC(param_1,(float *)param_2,(float *)param_3,(float *)param_4,param_5,param_6,
                        param_7,param_8,&fStack12,&fStack24,(int *)&fStack28,&puStack32);
  if (uVar2 != 0) {
    if (*in_stack_00000024 <= fStack28) {
      bVar1 = *(byte *)(iVar4 + 1);
      goto LAB_7f041b0c;
    }
    *in_stack_00000024 = fStack28;
    *param_9 = fStack12;
    uVar5 = 1;
    param_9[1] = fStack8;
    param_9[2] = fStack4;
    *param_10 = fStack24;
    param_10[1] = fStack20;
    param_10[2] = fStack16;
    dword_80030B0C = *(undefined4 *)(param_1 + 0x10);
    bodypartshot = 0xffffffff;
    objinst = puStack32;
    DAT_80075b74 = uStack36;
  }
  bVar1 = *(byte *)(iVar4 + 1);
LAB_7f041b0c:
  if (((bVar1 & 2) == 0) || (iVar4 = *(int *)(iVar4 + 0x20), iVar4 == 0)) {
    return uVar5;
  }
  bVar1 = *(byte *)(iVar4 + 1);
  param_5_00 = extraout_f12;
  do {
    if ((bVar1 & 2) == 0) {
LAB_7f041b74:
      iVar4 = *(int *)(iVar4 + 0x24);
    }
    else {
      lVar3 = proc_7F0419E4(*(int *)(iVar4 + 4),param_2,param_3,param_4,param_5_00,param_6,param_7,
                            param_8,param_9,param_10);
      if (lVar3 != 0) {
        uVar5 = 1;
        param_5_00 = extraout_f12_00;
        goto LAB_7f041b74;
      }
      iVar4 = *(int *)(iVar4 + 0x24);
      param_5_00 = extraout_f12_00;
    }
    if (iVar4 == 0) {
      return uVar5;
    }
    bVar1 = *(byte *)(iVar4 + 1);
  } while( true );
}



undefined8
proc_7F041BB8(int param_1,float *param_2,float *param_3,float param_4,float *param_5,float *param_6,
             float *param_7,float *param_8,float *param_9)

{
  int iVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float *in_stack_00000020;
  int *piStack48;
  ushort *puStack44;
  int iStack40;
  int iStack36;
  
  iVar1 = *(int *)(param_1 + 0x18);
  fVar3 = getinstsize(*(int *)(param_1 + 0x1c),(uint)param_2,param_3,param_1);
  fVar4 = param_3[2] * (*(float *)(iVar1 + 0x10) - param_2[2]) +
          (*(float *)(iVar1 + 8) - *param_2) * *param_3 +
          (*(float *)(iVar1 + 0xc) - param_2[1]) * param_3[1];
  if ((-fVar3 <= fVar4) && (fVar4 <= (float)param_5 + fVar3)) {
    if ((*(byte *)(iVar1 + 1) & 2) != 0) {
      piStack48 = *(int **)(param_1 + 0x20);
      iStack36 = proc_7F06C010(&piStack48,param_6,param_7,&iStack40,&puStack44);
      if (0 < iStack36) {
        iVar2 = proc_7F06C660(iStack40,puStack44,0);
        fVar3 = param_7[2] * (*(float *)(iVar2 + 0x38) - param_6[2]) +
                (*(float *)(iVar2 + 0x30) - *param_6) * *param_7 +
                (*(float *)(iVar2 + 0x34) - param_6[1]) * param_7[1];
        if (*in_stack_00000020 <= fVar3) {
          return 0;
        }
        *in_stack_00000020 = fVar3;
        *param_8 = *param_3 * fVar3 + *param_2;
        param_8[1] = param_3[1] * fVar3 + param_2[1];
        param_8[2] = param_3[2] * fVar3 + param_2[2];
        fVar3 = *param_3;
        param_9[1] = 0.00000000;
        *param_9 = -fVar3;
        param_9[2] = -param_3[2];
        if ((*param_9 == 0.00000000) && (param_9[2] == 0.00000000)) {
          param_9[2] = 1.00000000;
        }
        else {
          guNormalize(param_9,param_9 + 1,param_9 + 2);
        }
        dword_80030B0C = iVar1;
        bodypartshot = iStack36;
        objinst = iStack40;
        DAT_80075b74 = puStack44;
        return 1;
      }
    }
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f0420ac) overlaps instruction at (ram,0x7f0420a8)
// 

longlong proc_7F041E0C(char *param_1,undefined8 param_2,float *param_3,ulonglong param_4,
                      float *param_5,float *param_6,int *param_7)

{
  char cVar1;
  char *pcVar4;
  float *pfVar5;
  longlong lVar2;
  ulonglong uVar3;
  float *pfVar6;
  int iVar7;
  char *pcVar8;
  short *psVar9;
  float *pfVar10;
  float fVar11;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack32;
  float fStack28;
  float fStack24;
  int iStack20;
  float *apfStack16 [3];
  int iStack4;
  
  iStack4 = 0;
  iStack20 = 0;
  pcVar4 = (char *)get_ptr_for_players_tank();
  pfVar6 = (float *)param_2;
  fStack32 = *param_3 - *pfVar6;
  fStack28 = param_3[1] - pfVar6[1];
  fStack24 = param_3[2] - pfVar6[2];
  pfVar10 = (float *)sqrtf(fStack24 * fStack24 + fStack32 * fStack32 + fStack28 * fStack28);
  if ((float)pfVar10 == 0.00000000) {
    lVar2 = 0;
  }
  else {
    fVar11 = 1.00000000 / (float)pfVar10;
    fStack32 = fStack32 * fVar11;
    fStack28 = fStack28 * fVar11;
    fStack24 = fStack24 * fVar11;
    fStack48 = *pfVar6;
    fStack44 = pfVar6[1];
    fStack40 = pfVar6[2];
    pfVar5 = (float *)proc_7F0783C4();
    proc_7F058474(pfVar5,&fStack48);
    fStack60 = fStack32;
    fStack56 = fStack28;
    fStack52 = fStack24;
    pfVar5 = (float *)proc_7F0783C4();
    proc_7F0583D8(pfVar5,&fStack60);
    if (param_4 != 0) {
      apfStack16[0] = pfVar10;
      proc_7F03E3FC(param_7);
      lVar2 = (longlong)*ptr_list_object_lookup_indices;
      iVar7 = (int)*ptr_list_object_lookup_indices;
      fVar11 = extraout_f12;
      psVar9 = ptr_list_object_lookup_indices;
      if (-1 < lVar2) {
        do {
          iVar7 = (iVar7 * 0x10 + (int)lVar2 * -4 + (int)lVar2) * 4;
          pcVar8 = pos_data_entry + iVar7;
          if (pcVar8 == param_1) {
            lVar2 = (longlong)psVar9[1];
          }
          else {
            cVar1 = *pcVar8;
            if (((cVar1 == '\x01') || (cVar1 == '\x04')) || (cVar1 == '\x02')) {
              iVar7 = *(int *)(pos_data_entry + iVar7 + 4);
              if ((*(uint *)(iVar7 + 100) & 8) == 0) {
                if (*(int *)(iVar7 + 0xc) << 6 < 0) {
                  lVar2 = (longlong)psVar9[1];
                }
                else {
                  if (cVar1 == '\x02') {
                    if (((param_4 & 2) != 0) ||
                       (uVar3 = proc_7F03D9EC((int)pcVar8), fVar11 = extraout_f12_00,
                       (uVar3 & param_4) != 0)) {
LAB_7f04203c:
                      if (((pcVar8 != pcVar4) || ((*(byte *)(iVar7 + 2) & 0x20) == 0)) &&
                         (lVar2 = proc_7F0419E4(iVar7,param_2,(longlong)(int)param_3,
                                                (longlong)(int)&fStack32,fVar11,pfVar10,&fStack48,
                                                &fStack60,param_5,param_6), fVar11 = extraout_f12_01
                         , lVar2 != 0)) {
                        iStack20 = 1;
                        fVar11 = extraout_f12_01;
                      }
                      goto LAB_7f0421b4;
                    }
                    lVar2 = (longlong)psVar9[1];
                    fVar11 = extraout_f12_00;
                  }
                  else {
                    if ((param_4 & 1) != 0) goto LAB_7f04203c;
                    lVar2 = (longlong)psVar9[1];
                  }
                }
              }
              else {
                lVar2 = (longlong)psVar9[1];
              }
            }
            else {
              if ((cVar1 == '\x03') ||
                 ((cVar1 == '\x06' && (*(int *)(pos_data_entry + iVar7 + 4) != 0)))) {
                iVar7 = *(int *)(pos_data_entry + iVar7 + 4);
                if (cVar1 == '\x06') {
                  lVar2 = proc_7F09B15C((int)pcVar8);
                  if ((&ptr_BONDdata_p1)[(int)lVar2]->field_AC == 0) {
                    lVar2 = (longlong)psVar9[1];
                    fVar11 = extraout_f12_02;
                  }
                  else {
                    fVar11 = extraout_f12_02;
                    if ((param_4 & 4) != 0) goto LAB_7f04211c;
                    lVar2 = (longlong)psVar9[1];
                    fVar11 = extraout_f12_02;
                  }
                }
                else {
                  if (cVar1 != '\x03') {
LAB_7f04211c:
                    lVar2 = proc_7F041BB8(iVar7,pfVar6,&fStack32,fVar11,pfVar10,&fStack48,&fStack60,
                                          param_5,param_6);
                    fVar11 = extraout_f12_03;
                    if (lVar2 != 0) {
                      iStack20 = 1;
                      fVar11 = extraout_f12_03;
                    }
                    goto LAB_7f0421b4;
                  }
                  if ((*(ushort *)(iVar7 + 0x12) & 0x100) == 0) {
                    if ((param_4 & 8) != 0) goto LAB_7f04211c;
                    lVar2 = (longlong)psVar9[1];
                  }
                  else {
                    lVar2 = (longlong)psVar9[1];
                  }
                }
              }
              else {
                if (cVar1 == '\x06') {
                  lVar2 = proc_7F09B15C((int)pcVar8);
                  if ((&ptr_BONDdata_p1)[(int)lVar2]->field_AC == 0) {
                    lVar2 = (longlong)psVar9[1];
                    fVar11 = extraout_f12_04;
                  }
                  else {
                    lVar2 = proc_7F041400(pcVar8,pfVar6,param_3,&fStack32,param_5,param_6,
                                          (float *)apfStack16);
                    fVar11 = extraout_f12_05;
                    if (lVar2 != 0) {
                      iStack20 = 1;
                      fVar11 = extraout_f12_05;
                    }
LAB_7f0421b4:
                    lVar2 = (longlong)psVar9[1];
                  }
                }
                else {
                  lVar2 = (longlong)psVar9[1];
                }
              }
            }
          }
          psVar9 = psVar9 + 1;
          if (lVar2 < 0) break;
          iVar7 = (int)lVar2;
        } while( true );
      }
    }
    if (iStack20 != 0) {
      iStack4 = 1;
      DAT_80075b78 = fStack32;
      DAT_80075b7c = fStack28;
      DAT_80075b80 = fStack24;
      DAT_80075b88 = fStack60;
      DAT_80075b8c = fStack56;
      DAT_80075b90 = fStack52;
    }
    lVar2 = (longlong)iStack4;
  }
  return lVar2;
}



int handles_projectile_motion
              (int param_1,float *param_2,float *param_3,float *param_4,int param_5,int param_6)

{
  byte bVar1;
  longlong lVar2;
  int *piVar3;
  byte *pbVar4;
  float *pfVar5;
  uint uVar6;
  int iVar7;
  uint *puVar8;
  f32 fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float fVar13;
  float fVar14;
  byte abStack572 [8];
  uint auStack564 [121];
  int iStack80;
  int iStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  int iStack12;
  int iStack8;
  char *pcStack4;
  
  pcStack4 = *(char **)(param_1 + 0x10);
  iStack8 = *(int *)(pcStack4 + 0x14);
  iStack12 = 1;
  dword_80030B0C = 0;
  fStack72 = *param_2;
  if (((fStack72 == *(float *)(param_1 + 0x58)) && (param_2[1] == *(float *)(param_1 + 0x5c))) &&
     (param_2[2] == *(float *)(param_1 + 0x60))) {
    dword_80030B0C = 0;
    return 1;
  }
  fStack68 = param_2[1];
  fStack64 = param_2[2];
  if ((*(uint *)(param_1 + 100) & 0x80) == 0) {
    dword_80030B0C = 0;
    return 1;
  }
  pfVar5 = (float *)(param_1 + 0x58);
  if ((**(uint **)(param_1 + 0x6c) & 4) == 0) {
    dword_80030B0C = 0;
    return 1;
  }
  iStack80 = 0;
  proc_7F0B4AB4(pfVar5,&fStack72,(byte *)(*(int *)(param_1 + 0x6c) + 0xcc),(int)abStack572,
                auStack564,&iStack80,0x14);
  if (iStack80 < 0x15) {
    iVar7 = iStack80 << 2;
  }
  else {
    iStack80 = 0x14;
    iVar7 = 0x50;
  }
  iVar7 = proc_7F0B8E98((uint *)((int)auStack564 + iVar7),100);
  puVar8 = auStack564;
  iStack80 += iVar7;
  auStack564[iStack80] = 0xffffffff;
  while (-1 < (int)auStack564[0]) {
    iVar7 = proc_7F0B7A78(pfVar5,&fStack72,auStack564[0],&fStack60);
    if (iVar7 == 0) {
      auStack564[0] = puVar8[1];
    }
    else {
      fVar9 = proc_7F0B4830();
      fStack60 = fStack60 * (float)fVar9;
      fStack56 = fStack56 * (float)fVar9;
      fStack52 = fStack52 * (float)fVar9;
      fVar11 = *(float *)(param_1 + 0x58);
      if (((fStack72 < fVar11) || (fStack72 < fStack60)) || (fStack60 < fVar11)) {
        if (fStack72 <= fVar11) {
          if (fStack72 <= fStack60) {
            if (fStack60 <= fVar11) {
              fVar10 = *(float *)(param_1 + 0x5c);
              goto LAB_7f042460;
            }
            auStack564[0] = puVar8[1];
          }
          else {
            auStack564[0] = puVar8[1];
          }
        }
        else {
          auStack564[0] = puVar8[1];
        }
      }
      else {
        fVar10 = *(float *)(param_1 + 0x5c);
LAB_7f042460:
        if (((fStack68 < fVar10) || (fStack68 < fStack56)) || (fStack56 < fVar10)) {
          if (fStack68 <= fVar10) {
            if (fStack68 <= fStack56) {
              if (fStack56 <= fVar10) {
                fVar12 = *(float *)(param_1 + 0x60);
                goto LAB_7f0424d0;
              }
              auStack564[0] = puVar8[1];
            }
            else {
              auStack564[0] = puVar8[1];
            }
          }
          else {
            auStack564[0] = puVar8[1];
          }
        }
        else {
          fVar12 = *(float *)(param_1 + 0x60);
LAB_7f0424d0:
          if (((fStack64 < fVar12) || (fStack64 < fStack52)) || (fStack52 < fVar12)) {
            if (fStack64 <= fVar12) {
              if (fStack64 <= fStack52) {
                if (fStack52 <= fVar12) goto LAB_7f042540;
                auStack564[0] = puVar8[1];
              }
              else {
                auStack564[0] = puVar8[1];
              }
            }
            else {
              auStack564[0] = puVar8[1];
            }
          }
          else {
LAB_7f042540:
            if (((fVar11 == fStack60) && (fVar10 == fStack56)) && (fVar12 == fStack52)) {
              auStack564[0] = puVar8[1];
            }
            else {
              iStack12 = 0;
              *param_3 = fStack60;
              param_3[1] = fStack56;
              param_3[2] = fStack52;
              *param_4 = fStack48;
              param_4[1] = fStack44;
              param_4[2] = fStack40;
              if (((*param_4 == 0.00000000) && (param_4[1] == 0.00000000)) &&
                 (param_4[2] == 0.00000000)) {
                param_4[2] = 1.00000000;
                auStack564[0] = puVar8[1];
              }
              else {
                guNormalize(param_4,param_4 + 1,param_4 + 2);
                auStack564[0] = puVar8[1];
              }
            }
          }
        }
      }
    }
    puVar8 = puVar8 + 1;
  }
  if (iStack12 == 0) {
    fVar13 = *param_2 - *(float *)(param_1 + 0x58);
    fVar12 = param_2[1] - *(float *)(param_1 + 0x5c);
    fVar14 = param_2[2] - *(float *)(param_1 + 0x60);
    fVar10 = sqrtf(fVar14 * fVar14 + fVar13 * fVar13 + fVar12 * fVar12);
    fVar11 = 0.50000000;
    if (flt_80052A58 < fVar10) {
      fVar11 = flt_80052A58 / fVar10;
    }
    *param_3 = *param_3 - fVar11 * fVar13;
    fStack72 = *param_3;
    param_3[1] = param_3[1] - fVar11 * fVar12;
    param_3[2] = param_3[2] - fVar11 * fVar14;
    fStack68 = param_3[1];
    fStack64 = param_3[2];
  }
  lVar2 = proc_7F041E0C(pcStack4,(longlong)(int)pfVar5,&fStack72,0x1f,param_3,param_4,
                        (int *)auStack564);
  if (lVar2 == 0) {
    if ((iStack12 == 0) && (param_5 != 0)) {
      iStack12 = 2;
      fVar11 = extraout_f12;
      fVar10 = extraout_f14;
      if (param_6 == 0) {
        proc_7F0B4AB4(pfVar5,param_3,(byte *)(*(int *)(param_1 + 0x6c) + 0xcc),(int)abStack572,
                      auStack564,&iStack80,0x14);
        fVar11 = extraout_f12_00;
        fVar10 = extraout_f14_00;
      }
    }
    else {
      if ((iStack12 == 1) || (fVar11 = extraout_f12, fVar10 = extraout_f14, param_6 == 0)) {
        fVar11 = extraout_f12;
        fVar10 = extraout_f14;
        if (iStack12 != 1) {
          proc_7F0B4AB4(pfVar5,&fStack72,(byte *)(*(int *)(param_1 + 0x6c) + 0xcc),(int)abStack572,
                        auStack564,&iStack80,0x14);
          fVar11 = extraout_f12_01;
          fVar10 = extraout_f14_01;
        }
        *(float *)(param_1 + 0x58) = fStack72;
        *(float *)(param_1 + 0x60) = fStack64;
        *(float *)(pcStack4 + 0xc) = fStack68;
        *(float *)(param_1 + 0x5c) = fStack68;
      }
    }
  }
  else {
    fVar11 = extraout_f12;
    fVar10 = extraout_f14;
    if (param_6 == 0) {
      fStack72 = *(float *)(param_1 + 0x58);
      fStack64 = *(float *)(param_1 + 0x60);
      proc_7F0B4AB4(pfVar5,&fStack72,(byte *)(*(int *)(param_1 + 0x6c) + 0xcc),(int)abStack572,
                    auStack564,&iStack80,0x14);
      *(float *)(pcStack4 + 0xc) = fStack68;
      *(float *)(param_1 + 0x5c) = fStack68;
      if (param_5 == 0) {
        iStack12 = 0;
        fVar11 = extraout_f12_02;
        fVar10 = extraout_f14_02;
      }
      else {
        iStack12 = 2;
        fVar11 = extraout_f12_02;
        fVar10 = extraout_f14_02;
      }
    }
  }
  if (iStack12 == 1) {
    puVar8 = *(uint **)(param_1 + 0x6c);
  }
  else {
    if (param_6 != 0) {
      return iStack12;
    }
    puVar8 = *(uint **)(param_1 + 0x6c);
  }
  iStack76 = 0;
  uVar6 = *puVar8 & 8;
  if (uVar6 == 0) {
    lVar2 = (longlong)(int)pcStack4;
    iStack8 = *(int *)(pcStack4 + 0x14);
    iStack76 = 0;
    proc_7F0B0BE4(&iStack8,fVar11,fVar10,*(float *)(pcStack4 + 8),*(float *)(pcStack4 + 0x10));
    if (lVar2 == 1) {
      if (iStack8 != 0) {
        *(int *)(pcStack4 + 0x14) = iStack8;
        *(undefined4 *)(pcStack4 + 8) = *(undefined4 *)(param_1 + 0x58);
        *(undefined4 *)(pcStack4 + 0x10) = *(undefined4 *)(param_1 + 0x60);
        uVar6 = **(uint **)(param_1 + 0x6c) & 8;
        goto LAB_7f042938;
      }
      puVar8 = *(uint **)(param_1 + 0x6c);
    }
    else {
      puVar8 = *(uint **)(param_1 + 0x6c);
    }
    *puVar8 = *puVar8 | 8;
    pcStack4[1] = pcStack4[1] | 8;
    uVar6 = **(uint **)(param_1 + 0x6c) & 8;
  }
LAB_7f042938:
  if ((uVar6 != 0) && (piVar3 = proc_7F0AF20C(pfVar5,abStack572,NULL), piVar3 != NULL)) {
    *(int **)(pcStack4 + 0x14) = piVar3;
    *(undefined4 *)(pcStack4 + 8) = *(undefined4 *)(param_1 + 0x58);
    *(undefined4 *)(pcStack4 + 0x10) = *(undefined4 *)(param_1 + 0x60);
    **(uint **)(param_1 + 0x6c) = **(uint **)(param_1 + 0x6c) & 0xfffffff7;
    pcStack4[1] = pcStack4[1] & 0xf7;
  }
  pbVar4 = abStack572 + iStack76;
  if (abStack572[0] == 0xff) {
LAB_7f0429d8:
    iVar7 = *(int *)(param_1 + 0x6c);
  }
  else {
    bVar1 = *pbVar4;
    iVar7 = *(int *)(param_1 + 0x6c);
    while( true ) {
      pbVar4 = pbVar4 + 1;
      *(byte *)(iVar7 + iStack76 + 0xcc) = bVar1;
      bVar1 = *pbVar4;
      iStack76 += 1;
      if (bVar1 == 0xff) break;
      if (iStack76 == 7) goto LAB_7f0429d8;
      iVar7 = *(int *)(param_1 + 0x6c);
    }
    iVar7 = *(int *)(param_1 + 0x6c);
  }
  *(undefined *)(iVar7 + iStack76 + 0xcc) = 0xff;
  return iStack12;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F042A0C(void)

{
  int iVar1;
  longlong lVar2;
  int in_a0_lo;
  float *in_a1_lo;
  float *in_a2_lo;
  float *x;
  float in_f0;
  float fVar3;
  float fStack124;
  float fStack120;
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  undefined4 uStack96;
  undefined4 uStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  float afStack76 [2];
  float fStack68;
  float afStack64 [2];
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  undefined4 uStack16;
  float fStack12;
  int iStack8;
  
  iVar1 = *(int *)(in_a0_lo + 0x10);
  iStack8 = *(int *)(iVar1 + 0x14);
  proc_7F041044(in_a0_lo);
  uStack16 = 1;
  dword_80030B0C = 0;
  fStack40 = *in_a1_lo;
  if (((fStack40 != *(float *)(iVar1 + 8)) || (in_a1_lo[1] != *(float *)(iVar1 + 0xc))) ||
     (in_a1_lo[2] != *(float *)(iVar1 + 0x10))) {
    fStack36 = in_a1_lo[1];
    fStack32 = in_a1_lo[2];
    if ((*(uint *)(in_a0_lo + 100) & 0x80) != 0) {
      fStack12 = in_f0;
      fVar3 = (float)proc_7F0B2970();
      if ((**(uint **)(in_a0_lo + 0x6c) & 0x40) == 0) {
        fStack48 = 0.00000000;
        fStack52 = 1.00000000;
      }
      else {
        fStack52 = *(float *)(iVar1 + 0xc);
        if (fStack36 < fStack52) {
          fStack48 = fStack52 - fVar3;
          fStack52 = fStack36 - fVar3;
        }
        else {
          fStack48 = fStack36 - fVar3;
          fStack52 = fStack52 - fVar3;
        }
      }
      proc_7F0B1CC4();
      lVar2 = proc_7F0B0E24();
      if (((lVar2 == 0) || (iStack8 == 0)) || (lVar2 = proc_7F0B18B8(), -1 < lVar2)) {
        proc_7F0B28B0(afStack64,afStack76);
        x[1] = 0.00000000;
        *x = fStack68 - fStack56;
        x[2] = afStack64[0] - afStack76[0];
        if ((*x == 0.00000000) && (x[2] == 0.00000000)) {
          x[2] = 1.00000000;
          fStack28 = *(float *)(iVar1 + 8);
        }
        else {
          guNormalize(x,x + 1,x + 2);
          fStack28 = *(float *)(iVar1 + 8);
        }
        if (((fStack40 == fStack28) && (fStack36 == *(float *)(iVar1 + 0xc))) &&
           (fStack32 == *(float *)(iVar1 + 0x10))) {
          *in_a2_lo = fStack40;
          in_a2_lo[1] = fStack36;
          in_a2_lo[2] = fStack32;
        }
        else {
          fStack28 = fStack40 - fStack28;
          fStack24 = fStack36 - *(float *)(iVar1 + 0xc);
          fStack20 = fStack32 - *(float *)(iVar1 + 0x10);
          proc_7F02624C((float *)(iVar1 + 8),&fStack28,in_a2_lo);
          fStack100 = fStack12;
          uStack96 = *(undefined4 *)(iVar1 + 8);
          uStack92 = *(undefined4 *)(iVar1 + 0x10);
          fStack108 = afStack64[0];
          fStack104 = fStack56;
          fStack116 = afStack76[0];
          fStack112 = fStack68;
          fStack124 = fStack40 - *(float *)(iVar1 + 8);
          fStack120 = fStack32 - *(float *)(iVar1 + 0x10);
          fVar3 = proc_7F0B33DC(&fStack100,&fStack108,&fStack116,&fStack124);
          iStack8 = *(int *)(iVar1 + 0x14);
          fStack84 = fStack36;
          fStack88 = *(float *)(iVar1 + 8) + fStack124 * fVar3 * flt_80052A5C;
          fStack80 = *(float *)(iVar1 + 0x10) + fStack120 * fVar3 * flt_80052A5C;
          lVar2 = proc_7F0B0E24();
          if (((lVar2 != 0) && (iStack8 != 0)) && (lVar2 = proc_7F0B18B8(), lVar2 < 0)) {
            *(float *)(in_a0_lo + 0x58) = fStack88;
            *(float *)(in_a0_lo + 0x60) = fStack80;
            *(int *)(iVar1 + 0x14) = iStack8;
            *(float *)(iVar1 + 8) = fStack88;
            *(float *)(iVar1 + 0x10) = fStack80;
          }
        }
        *(float *)(iVar1 + 0xc) = fStack84;
        *(float *)(in_a0_lo + 0x5c) = fStack84;
        uStack16 = 0;
      }
      else {
        *(float *)(in_a0_lo + 0x58) = fStack40;
        *(float *)(in_a0_lo + 0x60) = fStack32;
        *(int *)(iVar1 + 0x14) = iStack8;
        *(float *)(iVar1 + 8) = fStack40;
        *(float *)(iVar1 + 0x10) = fStack32;
        *(float *)(iVar1 + 0xc) = fStack36;
        *(float *)(in_a0_lo + 0x5c) = fStack36;
      }
    }
  }
  return uStack16;
}



int proc_7F042EB4(int param_1,float *param_2,float *param_3,float *param_4,int param_5,int param_6)

{
  int iVar1;
  
  if (((*(uint *)(param_1 + 100) & 0x80) == 0) || ((**(uint **)(param_1 + 0x6c) & 4) == 0)) {
    iVar1 = proc_7F042A0C();
  }
  else {
    iVar1 = handles_projectile_motion(param_1,param_2,param_3,param_4,param_5,param_6);
  }
  return iVar1;
}



void proc_7F042F18(float *param_1,float param_2,float *param_3,float param_4,float param_5,
                  float param_6)

{
  bool bVar1;
  float fVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float in_stack_00000010;
  float in_stack_00000014;
  
  fVar4 = *(float *)param_5;
  iVar3 = 0;
  if (clock_timer < 1) {
LAB_7f0430f0:
    *(float *)param_5 = fVar4;
    return;
  }
  fVar6 = *param_1;
  do {
    fVar5 = (float)param_3 - fVar6;
    if (0.00000000 < fVar5) {
      if ((fVar4 <= 0.00000000) || ((fVar4 * fVar4 * 0.50000000) / in_stack_00000010 < fVar5)) {
        if (fVar4 < in_stack_00000014) {
          fVar7 = in_stack_00000010;
          if (0.00000000 <= fVar4) {
            fVar7 = param_6;
          }
          fVar4 = fVar4 + fVar7;
          fVar7 = in_stack_00000014;
          if (in_stack_00000014 < fVar4) goto LAB_7f043004;
          bVar1 = fVar5 <= fVar4;
        }
        else {
          bVar1 = fVar5 <= fVar4;
        }
      }
      else {
        fVar4 = fVar4 - in_stack_00000010;
        fVar7 = in_stack_00000010;
        if (fVar4 < in_stack_00000010) {
LAB_7f043004:
          bVar1 = fVar5 <= fVar7;
          fVar4 = fVar7;
        }
        else {
          bVar1 = fVar5 <= fVar4;
        }
      }
      if (bVar1) {
        *(float **)param_1 = param_3;
        goto LAB_7f0430f0;
      }
      *param_1 = fVar6 + fVar4;
    }
    else {
      if ((0.00000000 <= fVar4) || ((fVar4 * fVar4 * 0.50000000) / in_stack_00000010 < -fVar5)) {
        fVar7 = -in_stack_00000014;
        if (fVar7 < fVar4) {
          fVar2 = in_stack_00000010;
          if (fVar4 <= 0.00000000) {
            fVar2 = param_6;
          }
          fVar4 = fVar4 - fVar2;
          if (fVar4 < fVar7) goto LAB_7f0430bc;
          bVar1 = fVar4 <= fVar5;
        }
        else {
          bVar1 = fVar4 <= fVar5;
        }
      }
      else {
        fVar4 = fVar4 + in_stack_00000010;
        fVar7 = -in_stack_00000010;
        if (fVar7 < fVar4) {
LAB_7f0430bc:
          bVar1 = fVar7 <= fVar5;
          fVar4 = fVar7;
        }
        else {
          bVar1 = fVar4 <= fVar5;
        }
      }
      if (bVar1) {
        *(float **)param_1 = param_3;
        goto LAB_7f0430f0;
      }
      *param_1 = fVar6 + fVar4;
    }
    iVar3 += 1;
    if (clock_timer <= iVar3) goto LAB_7f0430f0;
    fVar6 = *param_1;
  } while( true );
}



void proc_7F04310C(float *param_1,float param_2,float *param_3,float param_4,float param_5,
                  float param_6)

{
  float fVar1;
  float fVar2;
  
  if ((float)param_3 - *param_1 < flt_80052A60) {
    param_3 = (float *)((float)param_3 + flt_80052A64);
  }
  else {
    if (flt_80052A68 <= (float)param_3 - *param_1) {
      param_3 = (float *)((float)param_3 - flt_80052A6C);
    }
  }
  proc_7F042F18(param_1,(float)param_3,param_3,param_6,param_5,param_6);
  fVar1 = flt_80052A70;
  fVar2 = *param_1;
  if (fVar2 < 0.00000000) {
    *param_1 = fVar2 + flt_80052A70;
    fVar2 = *param_1;
  }
  if (fVar1 <= fVar2) {
    *param_1 = fVar2 - fVar1;
  }
  return;
}



void proc_7F0431E4(int param_1,float *param_2)

{
  uint uVar1;
  uint *puVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fStack204;
  float fStack200;
  float fStack196;
  float fStack188;
  float fStack184;
  float fStack180;
  float fStack172;
  float fStack168;
  float fStack164;
  float fStack140;
  float fStack136;
  float fStack132;
  undefined4 uStack128;
  undefined4 uStack124;
  undefined4 uStack120;
  undefined4 uStack116;
  undefined4 uStack112;
  float fStack108;
  undefined4 uStack104;
  float fStack100;
  undefined4 uStack96;
  undefined4 uStack92;
  undefined4 uStack88;
  undefined4 uStack84;
  undefined4 uStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float afStack12 [3];
  
  uVar1 = *(uint *)(param_1 + 100);
  *(uint *)(param_1 + 100) = uVar1 & 0xfffeffff;
  if ((uVar1 & 0x80) == 0) {
    return;
  }
  puVar2 = *(uint **)(param_1 + 0x6c);
  if (*(char *)(param_1 + 3) == '\x01') {
    proc_7F03FB70(puVar2);
    *(undefined4 *)(param_1 + 0x6c) = 0;
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xffffff7f;
    return;
  }
  uVar1 = *puVar2;
  puVar2[0x22] = 0;
  *puVar2 = uVar1 & 0xfffffffe;
  *puVar2 = uVar1 & 0xfffffffa;
  proc_7F058860((float *)(param_1 + 0x18),afStack12);
  proc_7F058714(afStack12,&fStack76);
  proc_7F05B3F4(afStack12,(float *)(puVar2 + 0x1a));
  proc_7F059D38(&fStack76,&fStack140);
  proc_7F0580C8(&fStack140,(float *)(param_1 + 0x18),(int)&fStack204);
  fVar3 = sqrtf(fStack196 * fStack196 + fStack204 * fStack204 + fStack200 * fStack200);
  *(float *)(puVar2 + 0x30) = fVar3;
  fVar3 = sqrtf(fStack180 * fStack180 + fStack188 * fStack188 + fStack184 * fStack184);
  *(float *)(puVar2 + 0x31) = fVar3;
  fVar3 = sqrtf(fStack164 * fStack164 + fStack172 * fStack172 + fStack168 * fStack168);
  *(float *)(puVar2 + 0x32) = fVar3;
  fStack140 = *(float *)(param_1 + 0x18);
  fVar3 = *(float *)(param_1 + 0x20);
  if ((fStack140 == 0.00000000) && (fStack132 = 1.00000000, fVar3 == 0.00000000)) {
    fStack140 = 0.00000000;
  }
  else {
    fVar4 = sqrtf(fStack140 * fStack140 + fVar3 * fVar3);
    fStack140 = fStack140 * (1.00000000 / fVar4);
    fStack132 = fVar3 * (1.00000000 / fVar4);
  }
  fStack136 = 0.00000000;
  uStack128 = 0;
  if (0.00000000 <= *(float *)(param_1 + 0x2c)) {
    fStack108 = -fStack132;
    uStack120 = 0x3f800000;
    fStack100 = fStack140;
  }
  else {
    fStack100 = -fStack140;
    uStack120 = 0xbf800000;
    fStack108 = fStack132;
  }
  uStack96 = 0;
  uStack104 = 0;
  uStack112 = 0;
  uStack116 = 0;
  uStack124 = 0;
  uStack92 = 0;
  uStack88 = 0;
  uStack84 = 0;
  uStack80 = 0x3f800000;
  proc_7F058860(&fStack140,afStack12);
  proc_7F05B3F4(afStack12,(float *)(puVar2 + 0x1e));
  proc_7F05BE10((float *)(puVar2 + 0x1a),(float *)(puVar2 + 0x1e));
  puVar2[0x18] = 0;
  fVar3 = proc_7F05ACB0(fStack68 * fStack132 + fStack140 * fStack76 + fStack136 * fStack72);
  if (((fVar3 <= 0.00000000) || (*(float *)(param_1 + 0x1c) <= 0.00000000)) ||
     (*(float *)(param_1 + 0x1c) <= param_2[1])) {
    fVar4 = *(float *)(param_1 + 0x1c);
    if (0.00000000 < fVar3) {
      if (fVar4 < 0.00000000) {
        if (fVar4 < param_2[1]) {
          *(float *)(puVar2 + 0x19) = flt_80052A80 / ((fVar3 * 4.00000000) / flt_80052A7C);
          goto LAB_7f0435e0;
        }
        fVar6 = *(float *)(param_1 + 0x20);
      }
      else {
        fVar6 = *(float *)(param_1 + 0x20);
      }
    }
    else {
      fVar6 = *(float *)(param_1 + 0x20);
    }
    fVar5 = *(float *)(*(int *)(param_1 + 0x14) + 0x14);
    fVar4 = proc_7F05ACB0((fVar6 * param_2[2] +
                          *param_2 * *(float *)(param_1 + 0x18) + param_2[1] * fVar4) /
                          (fVar5 * fVar5));
    if (fVar3 == 0.00000000) {
      puVar2[0x19] = 0x3f800000;
    }
    else {
      *(float *)(puVar2 + 0x19) = (fVar4 / global_timer_delta) / fVar3;
    }
  }
  else {
    *(float *)(puVar2 + 0x19) = flt_80052A78 / ((fVar3 * 4.00000000) / flt_80052A74);
  }
LAB_7f0435e0:
  fVar3 = (float)puVar2[0x19];
  if (fVar3 < 0.00000000) {
    *(float *)(puVar2 + 0x19) = -fVar3;
    fVar3 = (float)puVar2[0x19];
  }
  if (fVar3 < flt_80052A84) {
    *(float *)(puVar2 + 0x19) = flt_80052A84;
  }
  else {
    if (flt_80052A88 < fVar3) {
      *(float *)(puVar2 + 0x19) = flt_80052A88;
    }
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void proc_7F043650(int param_1)

{
  uint uVar1;
  uint *puVar2;
  u32 uVar4;
  int iVar5;
  ulonglong uVar3;
  int iVar6;
  int iVar7;
  undefined4 uStack8;
  u16 uStack4;
  
  uVar1 = *(uint *)(param_1 + 100);
  if ((uVar1 & 0x80) != 0) {
    puVar2 = *(uint **)(param_1 + 0x6c);
    if ((((*puVar2 & 1) == 0) || (0 < (int)puVar2[0x24])) || ((uVar1 & 0x20) == 0)) {
      *(uint *)(param_1 + 100) = uVar1 & 0xffffffdf;
      if (puVar2[0x26] == 0) {
        iVar6 = *(int *)(param_1 + 0x6c);
      }
      else {
        uVar3 = music_related_26(puVar2[0x26]);
        if (uVar3 == 0) {
          iVar6 = *(int *)(param_1 + 0x6c);
        }
        else {
          music_related_28(*(int *)(*(int *)(param_1 + 0x6c) + 0x98));
          iVar6 = *(int *)(param_1 + 0x6c);
        }
      }
      if ((*(int *)(iVar6 + 0x9c) != 0) &&
         (uVar3 = music_related_26(*(int *)(iVar6 + 0x9c)), uVar3 != 0)) {
        music_related_28(*(int *)(*(int *)(param_1 + 0x6c) + 0x9c));
      }
    }
    else {
      uStack8 = _Throwing_knife_SFX_1;
      uStack4 = Throwing_knife_SFX_3;
      iVar6 = *(int *)(*(int *)(param_1 + 0x6c) + 0xa4);
      uVar4 = get_random_value();
      if (((*(int *)(*(int *)(param_1 + 0x6c) + 0xa0) < global_timer + -6) &&
          (iVar7 = *(int *)(*(int *)(param_1 + 0x6c) + iVar6 * 4 + 0x98), iVar7 != 0)) &&
         (uVar3 = music_related_26(iVar7), uVar3 != 0)) {
        music_related_28(*(int *)(*(int *)(param_1 + 0x6c) + iVar6 * 4 + 0x98));
      }
      iVar7 = iVar6 * 4;
      if ((*(int *)(*(int *)(param_1 + 0x6c) + iVar7 + 0x98) == 0) &&
         (iVar5 = get_controls_locked_flag(), iVar5 == 0)) {
        play_sfx_a1(ptr_sfx_buf,*(short *)((int)&uStack8 + (uVar4 % 3) * 2),
                    (sfxdata *)(*(int *)(param_1 + 0x6c) + iVar7 + 0x98));
        proc_7F053A10(*(int *)(*(int *)(param_1 + 0x6c) + iVar7 + 0x98),
                      (float *)(*(int *)(param_1 + 0x10) + 8));
        *(int *)(*(int *)(param_1 + 0x6c) + 0xa0) = global_timer;
        *(int *)(*(int *)(param_1 + 0x6c) + 0xa4) = 1 - iVar6;
      }
    }
  }
  return;
}



void proc_7F043838(float *param_1,int param_2)

{
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  float fVar1;
  float fVar2;
  float fStack260;
  float fStack256;
  float fStack252;
  float afStack248 [16];
  float afStack184 [16];
  float afStack120 [16];
  float fStack56;
  float fStack52;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fVar1 = sqrtf(param_1[2] * param_1[2] + *param_1 * *param_1 + param_1[1] * param_1[1]);
  fVar2 = *param_1 / fVar1;
  fStack12 = param_1[1] / fVar1;
  fVar1 = param_1[2] / fVar1;
  if ((fVar2 == 0.00000000) && (fVar1 == 0.00000000)) {
    fStack4 = 0.00000000;
    fStack8 = 0.00000000;
    fStack20 = 0.00000000;
    fStack16 = 1.00000000;
  }
  else {
    fStack36 = fVar1;
    fStack32 = fStack12;
    fStack28 = fVar2;
    fVar1 = sqrtf(fVar2 * fVar2 + fVar1 * fVar1);
    fStack8 = -fVar1;
    fStack16 = fStack36 / fVar1;
    fStack4 = fStack32 * (fStack28 / fVar1);
    fStack20 = -(fStack28 / fVar1);
    fStack12 = fStack32 * fStack16;
  }
  fStack52 = convert_angle_using_inverse((f32)fStack16,(f32)fStack20);
  proc_7F0585FC(-fStack52,extraout_a0,afStack120);
  fStack260 = fStack4;
  fStack256 = fStack8;
  fStack252 = fStack12;
  proc_7F0583D8(afStack120,&fStack260);
  fStack56 = convert_angle_using_inverse((f32)fStack260,(f32)fStack256);
  proc_7F0585FC(flt_80052A8C + fStack52,extraout_a0_00,afStack184);
  proc_7F058570(flt_80052A90 - fStack56,extraout_a0_01,afStack248);
  proc_7F0580C8(afStack184,afStack248,param_2);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0439B8(void)

{
  int iVar1;
  int in_a0_lo;
  undefined8 extraout_a0;
  undefined4 *in_a1_lo;
  undefined4 in_a2_lo;
  float *in_a3_lo;
  float in_f0;
  float afStack64 [16];
  
  proc_7F043838(in_a3_lo,(int)afStack64);
  matrix_multiply_A1_by_F12(*(float *)(*(int *)(in_a0_lo + 0x14) + 0x14),extraout_a0,afStack64);
  proc_7F040754(in_a0_lo,in_a1_lo,afStack64,in_a2_lo);
  iVar1 = proc_7F03FFF8(*(int **)(*(int *)(in_a0_lo + 0x14) + 8));
  proc_7F03E864(iVar1);
  *(float *)(in_a0_lo + 0x58) = *(float *)(in_a0_lo + 0x58) - in_f0 * *(float *)(in_a0_lo + 0x28);
  *(float *)(in_a0_lo + 0x5c) = *(float *)(in_a0_lo + 0x5c) - in_f0 * *(float *)(in_a0_lo + 0x2c);
  *(float *)(in_a0_lo + 0x60) = *(float *)(in_a0_lo + 0x60) - in_f0 * *(float *)(in_a0_lo + 0x30);
  proc_7F040484(in_a0_lo);
  return;
}



undefined8 proc_7F043A6C(int param_1,int param_2,int param_3,ushort *param_4)

{
  int iVar1;
  undefined8 uVar2;
  int iVar3;
  float *pfVar4;
  float *pfVar5;
  float afStack196 [16];
  float afStack132 [16];
  float afStack68 [17];
  
  if ((*(byte *)(param_2 + 1) & 2) == 0) {
    uVar2 = 0;
  }
  else {
    iVar1 = *(int *)(param_1 + 4);
    iVar3 = proc_7F03FE98();
    *(int *)(iVar1 + 0x6c) = iVar3;
    if (iVar3 == 0) {
      uVar2 = 0;
    }
    else {
      pfVar4 = (float *)proc_7F06C660(param_3,param_4,0);
      *(uint *)(iVar1 + 100) = *(uint *)(iVar1 + 100) | 0x40;
      proc_7F03E18C(param_1);
      proc_7F03A538(param_1);
      unset_stateflag_0x04_for_posdata(param_1);
      *(int *)(*(int *)(iVar1 + 0x14) + 0x18) = param_3;
      *(ushort **)(*(int *)(iVar1 + 0x14) + 0x1c) = param_4;
      proc_7F03A5A4(param_1,param_2);
      proc_7F058020((undefined4 *)(iVar1 + 0x18),afStack68);
      proc_7F058998((undefined4 *)(iVar1 + 0x58),(int)afStack68);
      pfVar5 = (float *)proc_7F078444();
      proc_7F05818C(pfVar5,pfVar4,(int)afStack132);
      proc_7F059FB8(afStack132,afStack196);
      proc_7F05818C(afStack196,afStack68,*(int *)(iVar1 + 0x6c) + 4);
      uVar2 = 1;
    }
  }
  return uVar2;
}



void generate_explosion_at_position(int param_1,uint param_2,undefined8 param_3,undefined4 param_4)

{
  int iVar1;
  bool bVar2;
  longlong lVar3;
  int iVar4;
  float *pfVar5;
  int iVar6;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float extraout_f14;
  short sStackX6;
  float fStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  int iStack16;
  int iStack12;
  uint uStack8;
  int iStack4;
  
  iVar4 = *(int *)(param_1 + 4);
  uStack8 = (*(uint *)(iVar4 + 100) & 0x60000) >> 0x11;
  iVar1 = *(int *)(param_1 + 0x1c);
  sStackX6 = (short)param_2;
  if (iVar1 == 0) {
    bVar2 = (*(uint *)(iVar4 + 8) & 0xe) == 0;
    if (bVar2) {
      bVar2 = (*(byte *)(param_1 + 1) & 8) == 0;
    }
    proc_7F09C250(0,(float *)(iVar4 + 0x58),*(int *)(param_1 + 0x14),(int)sStackX6,(uint)bVar2,
                  (char)uStack8,(char *)(param_1 + 0x2c),(uint)((*(byte *)(param_1 + 1) & 8) != 0));
  }
  else {
    lVar3 = (longlong)*(int *)(iVar1 + 0x1c);
    if (lVar3 == 0) {
      iStack16 = *(int *)(iVar1 + 0x14);
      iVar6 = iVar1;
    }
    else {
      do {
        iVar6 = (int)lVar3;
        lVar3 = (longlong)*(int *)(iVar6 + 0x1c);
      } while (lVar3 != 0);
      iStack16 = *(int *)(iVar6 + 0x14);
    }
    if ((*(byte *)(param_1 + 1) & 2) == 0) {
      fStack28 = *(float *)(iVar6 + 8);
      uStack24 = *(undefined4 *)(iVar6 + 0xc);
      uStack20 = *(undefined4 *)(iVar6 + 0x10);
    }
    else {
      iStack12 = iVar6;
      iStack4 = iVar4;
      iVar4 = getsubmatrix(*(int *)(iVar4 + 0x14),param_2,iVar1,param_4);
      fStack28 = *(float *)(iVar4 + 0x30);
      uStack24 = *(undefined4 *)(iVar4 + 0x34);
      uStack20 = *(undefined4 *)(iVar4 + 0x38);
      pfVar5 = (float *)proc_7F078444();
      lVar3 = (longlong)(int)pfVar5;
      proc_7F058474(pfVar5,&fStack28);
      in_f12 = extraout_f12;
      in_f14 = extraout_f14;
      iVar4 = iStack4;
      iVar6 = iStack12;
    }
    if (((*(byte *)(iVar6 + 1) & 8) == 0) &&
       (iStack12 = iVar6, iStack4 = iVar4,
       proc_7F0B0BE4(&iStack16,in_f12,in_f14,*(float *)(iVar6 + 8),*(float *)(iVar6 + 0x10)),
       iVar6 = iStack12, lVar3 != 0)) {
      proc_7F09C250(0,&fStack28,iStack16,(int)sStackX6,(uint)((*(uint *)(iStack4 + 8) & 0xe) == 0),
                    (char)uStack8,(char *)(iStack12 + 0x2c),0);
    }
    else {
      proc_7F09C250(0,&fStack28,iStack16,(int)sStackX6,0,(char)uStack8,(char *)(iVar6 + 0x2c),1);
    }
  }
  return;
}



void handle_thrown_explosive_detonation(int param_1)

{
  char cVar1;
  short sVar2;
  int iVar3;
  undefined4 *objdata;
  u32 playercount;
  int iVar4;
  LEVELID LVar5;
  uint uVar6;
  undefined8 extraout_a2;
  longlong lVar7;
  short sVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  iVar3 = *(int *)(param_1 + 4);
  playercount = get_cur_playernum();
  iVar4 = proc_7F09B4D8(playercount);
  if (iVar4 != 0) {
    return;
  }
  if (*(char *)(iVar3 + 3) == '\a') {
    if (-1 < *(int *)(iVar3 + 8) << 3) {
      return;
    }
    generate_explosion_at_position(param_1,0xc,extraout_a2,iVar3);
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    return;
  }
  if (*(char *)(iVar3 + 3) != '\b') {
    return;
  }
  objdata = *(undefined4 **)(param_1 + 4);
  lVar7 = (longlong)(int)objdata;
  cVar1 = *(char *)(objdata + 0x20);
  sVar8 = (short)clock_timer;
  if (((cVar1 == '\x1a') || (cVar1 == 'W')) && (-1 < *(short *)((int)objdata + 0x82))) {
    *(short *)((int)objdata + 0x82) = *(short *)((int)objdata + 0x82) - sVar8;
    if (-1 < *(short *)((int)objdata + 0x82)) {
      return;
    }
    uVar6 = 0xd;
    if (*(int *)(iVar3 + 0xc) < 0) {
      uVar6 = 0x11;
    }
    generate_explosion_at_position(param_1,uVar6,lVar7,iVar3);
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    return;
  }
  if (cVar1 == 'V') {
    if (*(short *)((int)objdata + 0x82) != 0) {
      return;
    }
    uVar6 = 0xd;
    if (*(int *)(iVar3 + 0xc) < 0) {
      uVar6 = 0x11;
    }
    generate_explosion_at_position(param_1,uVar6,lVar7,iVar3);
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    return;
  }
  if (cVar1 == '\"') {
    if (*(short *)((int)objdata + 0x82) != 0) {
      return;
    }
    generate_explosion_at_position(param_1,0x11,lVar7,iVar3);
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    trigger_explosions_around_player(0x78);
    set_unset_clock_lock_bits(2,0);
    return;
  }
  if (((cVar1 == '\x1b') || (cVar1 == '!')) && (-1 < *(short *)((int)objdata + 0x82))) {
    *(short *)((int)objdata + 0x82) = *(short *)((int)objdata + 0x82) - sVar8;
    if (-1 < *(short *)((int)objdata + 0x82)) {
      return;
    }
    uVar6 = 0xd;
    if (*(int *)(iVar3 + 0xc) < 0) {
      uVar6 = 0x11;
    }
    generate_explosion_at_position(param_1,uVar6,lVar7,iVar3);
    *(undefined2 *)((int)objdata + 0x82) = 0xffff;
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    return;
  }
  if (cVar1 == '\x1d') {
    if (dword_80030AF4 == 0) {
      sVar8 = *(short *)((int)objdata + 0x82);
    }
    else {
      if ((dword_80030AF4 & 1 << ((*(uint *)(iVar3 + 100) & 0x60000) >> 0x11)) == 0) {
        sVar8 = *(short *)((int)objdata + 0x82);
      }
      else {
        *(undefined2 *)((int)objdata + 0x82) = 0;
        sVar8 = *(short *)((int)objdata + 0x82);
      }
    }
    if (1 < sVar8) {
      *(short *)((int)objdata + 0x82) = sVar8 - (short)clock_timer;
      if (1 < *(short *)((int)objdata + 0x82)) {
        return;
      }
      *(undefined2 *)((int)objdata + 0x82) = 1;
      return;
    }
    if (sVar8 != 0) {
      return;
    }
    if (*(int *)(iVar3 + 0xc) < 0) {
      generate_explosion_at_position(param_1,0x11,lVar7,iVar3);
    }
    else {
      LVar5 = get_stage_num();
      if (LVar5 == LEVELID_FACILITY) {
        generate_explosion_at_position(param_1,0x13,(longlong)(int)objdata,iVar3);
      }
      else {
        generate_explosion_at_position(param_1,0xd,(longlong)(int)objdata,iVar3);
      }
    }
    *(undefined2 *)((int)objdata + 0x82) = 0xffff;
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    return;
  }
  if (cVar1 != '\x1c') {
    return;
  }
  sVar2 = *(short *)((int)objdata + 0x82);
  if (sVar2 < 2) {
    if (sVar2 != 1) {
      sVar8 = *(short *)((int)objdata + 0x82);
      goto LAB_7f04419c;
    }
    iVar4 = get_curplayer_positiondata();
    fVar9 = *(float *)(iVar4 + 8) - *(float *)(param_1 + 8);
    fVar10 = *(float *)(iVar4 + 0xc) - *(float *)(param_1 + 0xc);
    fVar11 = *(float *)(iVar4 + 0x10) - *(float *)(param_1 + 0x10);
    if (flt_80052A94 <= fVar9 * fVar9 + fVar10 * fVar10 + fVar11 * fVar11) {
      sVar8 = *(short *)((int)objdata + 0x82);
      goto LAB_7f04419c;
    }
    *(undefined2 *)((int)objdata + 0x82) = 0;
  }
  else {
    *(short *)((int)objdata + 0x82) = sVar2 - sVar8;
    if (1 < *(short *)((int)objdata + 0x82)) {
      sVar8 = *(short *)((int)objdata + 0x82);
      goto LAB_7f04419c;
    }
    *(undefined2 *)((int)objdata + 0x82) = 1;
    add_obj_to_temp_proxmine_table(objdata);
  }
  sVar8 = *(short *)((int)objdata + 0x82);
LAB_7f04419c:
  if (sVar8 == 0) {
    uVar6 = 0xd;
    if (*(int *)(iVar3 + 0xc) < 0) {
      uVar6 = 0x11;
    }
    generate_explosion_at_position(param_1,uVar6,(longlong)(int)objdata,iVar3);
    *(undefined2 *)((int)objdata + 0x82) = 0xffff;
    *(uint *)(iVar3 + 100) = *(uint *)(iVar3 + 100) | 4;
    remove_obj_from_temp_proxmine_table(objdata);
  }
  return;
}



void proc_7F044200(int param_1)

{
  int iVar1;
  int param_1_00;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  
  param_1_00 = *(int *)(param_1 + 0x20);
  while (param_1_00 != 0) {
    iVar1 = *(int *)(param_1_00 + 0x24);
    proc_7F044200(param_1_00);
    proc_7F04C130(param_1_00,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
    param_1_00 = iVar1;
  }
  return;
}



void proc_7F04424C(int param_1)

{
  int param_1_00;
  int iVar1;
  
  param_1_00 = *(int *)(param_1 + 4);
  if ((*(uint *)(param_1_00 + 100) & 4) == 0) {
    *(byte *)(param_1 + 1) = *(byte *)(param_1 + 1) & 0xfd;
    handle_thrown_explosive_detonation(param_1);
    param_1_00 = *(int *)(param_1 + 0x20);
    while (param_1_00 != 0) {
      iVar1 = *(int *)(param_1_00 + 0x24);
      proc_7F04424C(param_1_00);
      param_1_00 = iVar1;
    }
  }
  else {
    proc_7F040D98(param_1_00,1,(ulonglong)*(byte *)(param_1_00 + 2) & 4);
  }
  return;
}



void proc_7F0442DC(int param_1)

{
  byte bVar1;
  int param_1_00;
  int iVar2;
  float *pfVar3;
  float *pfVar4;
  
  param_1_00 = *(int *)(param_1 + 4);
  iVar2 = *(int *)(param_1_00 + 0x14);
  if ((*(uint *)(param_1_00 + 100) & 4) == 0) {
    if (*(ushort **)(iVar2 + 0x1c) == NULL) {
      bVar1 = *(byte *)(param_1 + 1);
    }
    else {
      if ((*(uint *)(param_1_00 + 100) & 0x40) != 0) {
        pfVar3 = (float *)proc_7F06C660(*(int *)(iVar2 + 0x18),*(ushort **)(iVar2 + 0x1c),0);
        *(byte *)(param_1 + 1) = *(byte *)(param_1 + 1) | 2;
        pfVar4 = pfVar3;
        proc_7F0BD714((int)*(short *)(*(int *)(iVar2 + 8) + 0xe) << 6);
        *(float **)(iVar2 + 0xc) = pfVar4;
        proc_7F05818C(pfVar3,(float *)(*(int *)(param_1_00 + 0x6c) + 4),(int)pfVar4);
        proc_7F06EEA4((longlong)iVar2,**(int **)(iVar2 + 8));
        handle_thrown_explosive_detonation(param_1);
        param_1_00 = *(int *)(param_1 + 0x20);
        while (param_1_00 != 0) {
          iVar2 = *(int *)(param_1_00 + 0x24);
          proc_7F0442DC(param_1_00);
          param_1_00 = iVar2;
        }
        return;
      }
      bVar1 = *(byte *)(param_1 + 1);
    }
    *(byte *)(param_1 + 1) = bVar1 & 0xfd;
    handle_thrown_explosive_detonation(param_1);
    param_1_00 = *(int *)(param_1 + 0x20);
    while (param_1_00 != 0) {
      iVar2 = *(int *)(param_1_00 + 0x24);
      proc_7F04424C(param_1_00);
      param_1_00 = iVar2;
    }
  }
  else {
    proc_7F040D98(param_1_00,1,(ulonglong)*(byte *)(param_1_00 + 2) & 4);
  }
  return;
}



undefined8 proc_7F044414(float *param_1,int param_2,float *param_3,uint param_4)

{
  longlong lVar1;
  float *pfVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  float *pfVar6;
  int iVar7;
  double dVar8;
  double dVar9;
  double dVar10;
  double dVar11;
  ulonglong unaff_f22;
  float fStack68;
  undefined4 uStack64;
  float fStack60;
  double dStack48;
  
  if (0 < param_2) {
    iVar4 = 0;
    pfVar6 = param_1;
    do {
      iVar7 = iVar4 + 1;
      fStack68 = *pfVar6;
      dVar10 = (double)(param_1 + (iVar7 % param_2) * 2)[1] - (double)pfVar6[1];
      if (param_2 == 0) {
        trap(0x1c00);
      }
      if ((param_2 == -1) && (iVar7 == -0x80000000)) {
        trap(0x1800);
      }
      iVar5 = iVar7 % param_2 + 1;
      dVar11 = (double)fStack68 - (double)param_1[(iVar7 % param_2) * 2];
      if ((dVar10 == (double)(unaff_f22 & 0xffffffff00000000)) &&
         (dVar11 == (double)(unaff_f22 & 0xffffffff00000000))) {
        uStack64 = 0;
        fStack60 = pfVar6[1];
        lVar1 = proc_7F03CCD8(&fStack68,param_3,param_4);
        if (lVar1 != 0) {
          return 0;
        }
      }
      else {
        uVar3 = 0;
        dVar9 = (double)pfVar6[1] * dVar11 + (double)fStack68 * dVar10;
        if (param_2 == 0) {
          trap(0x1c00);
        }
        if ((param_2 == -1) && (iVar5 == -0x80000000)) {
          trap(0x1800);
        }
        while ((iVar5 %= param_2, iVar4 != iVar5 &&
               (dStack48 = (double)(param_1 + iVar5 * 2)[1] * dVar11 +
                           (double)param_1[iVar5 * 2] * dVar10, dStack48 == dVar9))) {
          iVar5 += 1;
          if (param_2 == 0) {
            trap(0x1c00);
          }
          if ((param_2 == -1) && (iVar5 == -0x80000000)) {
            trap(0x1800);
          }
        }
        pfVar2 = param_3;
        if (0 < (int)param_4) {
          do {
            dVar8 = (double)pfVar2[1] * dVar11 + (double)*pfVar2 * dVar10;
            if (dStack48 == dVar9) {
              dStack48 = (dVar9 - dVar8) + dVar9;
            }
            if (((dVar8 < dVar9) && (dStack48 < dVar9)) || ((dVar9 < dVar8 && (dVar9 < dStack48))))
            break;
            uVar3 += 1;
            pfVar2 = pfVar2 + 2;
          } while (uVar3 != param_4);
        }
        if (uVar3 == param_4) {
          return 1;
        }
      }
      pfVar6 = pfVar6 + 2;
      iVar4 = iVar7;
    } while (iVar7 != param_2);
  }
  return 0;
}



undefined8 proc_7F0446B8(float *param_1,uint param_2,float *param_3,uint param_4)

{
  longlong lVar1;
  undefined8 uVar2;
  
  lVar1 = proc_7F044414(param_1,param_2,param_3,param_4);
  if (lVar1 == 0) {
    lVar1 = proc_7F044414(param_3,param_4,param_1,param_2);
    if (lVar1 == 0) {
      uVar2 = 1;
    }
    else {
      uVar2 = 0;
    }
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



undefined8 proc_7F044718(undefined8 param_1,undefined8 param_2,float *param_3,int param_4)

{
  float fVar1;
  ulonglong uVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined4 extraout_a1_hi;
  undefined4 extraout_a1_hi_00;
  undefined4 extraout_a1_hi_01;
  undefined4 extraout_a1_hi_02;
  undefined4 uVar3;
  undefined4 extraout_a1_lo;
  undefined4 extraout_a1_lo_00;
  undefined4 extraout_a1_lo_01;
  undefined4 extraout_a1_lo_02;
  undefined4 uVar4;
  float *pfVar5;
  float *pfVar6;
  int iVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  
  fVar1 = (float)param_2;
  fVar11 = *(float *)param_1;
  fVar12 = ((float *)param_1)[2];
  iVar7 = 0;
  pfVar6 = param_3;
  if (0 < param_4) {
    do {
      iVar7 += 1;
      pfVar5 = param_3 + (iVar7 % param_4) * 2;
      if (param_4 == 0) {
        trap(0x1c00);
      }
      if ((param_4 == -1) && (iVar7 == -0x80000000)) {
        trap(0x1800);
      }
      fVar8 = proc_7F0B16C4(*pfVar6,pfVar6[1],param_1,param_2,*pfVar5,pfVar5[1],fVar11,fVar12);
      if (fVar8 < 0.00000000) {
        fVar10 = -fVar8;
        fVar9 = *pfVar6;
      }
      else {
        fVar9 = *pfVar6;
        fVar10 = fVar8;
      }
      proc_7F0B1794(fVar9,pfVar6[1],extraout_a0,CONCAT44(extraout_a1_hi,extraout_a1_lo),fVar11,
                    fVar12);
      fVar9 = fVar8;
      proc_7F0B1794(*pfVar5,pfVar5[1],extraout_a0_00,CONCAT44(extraout_a1_hi_00,extraout_a1_lo_00),
                    fVar11,fVar12);
      param_1 = extraout_a0_01;
      uVar3 = extraout_a1_hi_01;
      uVar4 = extraout_a1_lo_01;
      if ((fVar10 < fVar1) &&
         (((fVar8 < fVar1 || (fVar9 < fVar1)) ||
          (uVar2 = proc_7F0B17E4(*pfVar6,pfVar6[1],extraout_a0_01,
                                 CONCAT44(extraout_a1_hi_01,extraout_a1_lo_01),*pfVar5,pfVar5[1],
                                 fVar11,fVar12), param_1 = extraout_a0_02, uVar3 = extraout_a1_hi_02
          , uVar4 = extraout_a1_lo_02, uVar2 != 0)))) {
        return 1;
      }
      param_2 = CONCAT44(uVar3,uVar4);
      pfVar6 = pfVar6 + 2;
    } while (iVar7 != param_4);
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f044a9c) overlaps instruction at (ram,0x7f044a98)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F0448A8(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  longlong lVar4;
  byte *in_a0_lo;
  byte *pbVar5;
  short *psVar6;
  int iVar7;
  float in_f0;
  float fStack96;
  float fStack92;
  uint uStack88;
  float *apfStack84 [4];
  int iStack68;
  float fStack64;
  float afStack60 [2];
  uint auStack52 [8];
  float fStack20;
  float fStack16;
  uint uStack12;
  float *apfStack8 [2];
  
  proc_7F03CC20((char *)in_a0_lo,(int **)apfStack8,&uStack12,&fStack16,&fStack20);
  if (0 < (int)uStack12) {
    proc_7F03CB8C((char *)in_a0_lo,auStack52);
    proc_7F03E3FC((int *)auStack52);
    lVar4 = (longlong)*ptr_list_object_lookup_indices;
    iVar7 = (int)*ptr_list_object_lookup_indices;
    psVar6 = ptr_list_object_lookup_indices;
    if (-1 < lVar4) {
      do {
        iVar7 = (iVar7 * 0x10 + (int)lVar4 * -4 + (int)lVar4) * 4;
        pbVar5 = pos_data_entry + iVar7;
        if (pbVar5 == in_a0_lo) {
          lVar4 = (longlong)psVar6[1];
          goto LAB_7f044b04;
        }
        bVar2 = *pbVar5;
        if ((bVar2 == 6) || (bVar2 == 3)) {
          if ((*(int *)(pos_data_entry + iVar7 + 4) == 0) ||
             ((*(uint *)(*(int *)(pos_data_entry + iVar7 + 4) + 0x14) & 0x400) == 0)) {
            proc_7F03CF88((char *)pbVar5,&iStack68,afStack60,&fStack64);
            proc_7F03CFE8(pbVar5);
            fStack64 = fStack64 + in_f0;
            afStack60[0] = afStack60[0] + in_f0;
            if (fStack64 <= fStack16) {
              if (fStack20 <= afStack60[0]) {
                lVar4 = proc_7F03CCD8((float *)(pos_data_entry + iVar7 + 8),apfStack8[0],uStack12);
                bVar1 = lVar4 == 0;
                if ((bVar1) &&
                   (lVar4 = proc_7F044718((longlong)(int)(pos_data_entry + iVar7 + 8),
                                          (longlong)iStack68,apfStack8[0],uStack12), lVar4 != 0)) {
                  bVar1 = false;
                }
                if (!bVar1) {
                  if ((*pbVar5 == 3) && (*in_a0_lo == 2)) {
                    *(ushort *)(*(int *)(pos_data_entry + iVar7 + 4) + 0x12) =
                         *(ushort *)(*(int *)(pos_data_entry + iVar7 + 4) + 0x12) | 0x10;
                  }
                  return 0;
                }
                lVar4 = (longlong)psVar6[1];
                goto LAB_7f044b04;
              }
LAB_7f044b00:
              lVar4 = (longlong)psVar6[1];
            }
            else {
              lVar4 = (longlong)psVar6[1];
            }
          }
          else {
            lVar4 = (longlong)psVar6[1];
          }
        }
        else {
          if (bVar2 == 1) {
LAB_7f044a68:
            bVar3 = *in_a0_lo;
          }
          else {
            if (bVar2 != 4) {
              if (bVar2 != 2) {
                lVar4 = (longlong)psVar6[1];
                goto LAB_7f044b04;
              }
              goto LAB_7f044a68;
            }
            bVar3 = *in_a0_lo;
          }
          if (bVar3 == 2) {
            if (bVar2 == 2) {
              lVar4 = (longlong)psVar6[1];
              goto LAB_7f044b04;
            }
            if ((*(char *)(*(int *)(pos_data_entry + iVar7 + 4) + 3) == '+') ||
               (*(char *)(*(int *)(pos_data_entry + iVar7 + 4) + 3) == '(')) goto LAB_7f044b00;
          }
          proc_7F03CC20((char *)pbVar5,(int **)apfStack84,&uStack88,&fStack92,&fStack96);
          if ((int)uStack88 < 1) {
            lVar4 = (longlong)psVar6[1];
          }
          else {
            if (fStack96 <= fStack16) {
              if (fStack20 <= fStack92) {
                lVar4 = proc_7F0446B8(apfStack84[0],uStack88,apfStack8[0],uStack12);
                if (lVar4 != 0) {
                  return 0;
                }
                lVar4 = (longlong)psVar6[1];
              }
              else {
                lVar4 = (longlong)psVar6[1];
              }
            }
            else {
              lVar4 = (longlong)psVar6[1];
            }
          }
        }
LAB_7f044b04:
        psVar6 = psVar6 + 1;
        if (lVar4 < 0) {
          return 1;
        }
        iVar7 = (int)lVar4;
      } while( true );
    }
  }
  return 1;
}



int proc_7F044B38(undefined8 param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  longlong lVar4;
  undefined8 extraout_a0;
  float *pfVar5;
  f32 *pfVar6;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  float extraout_f0;
  float extraout_f0_00;
  float extraout_f0_01;
  float fVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float fVar9;
  float fVar10;
  float fVar11;
  float fStack228;
  float fStack224;
  float fStack220;
  float fStack200;
  float fStack196;
  float fStack192;
  float fStack188;
  float fStack184;
  float fStack180;
  float fStack176;
  float fStack172;
  float fStack168;
  float fStack164;
  float fStack160;
  float fStack156;
  int iStack152;
  int iStack148;
  float afStack144 [16];
  int iStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  float *pfStack28;
  float *pfStack24;
  float *pfStack20;
  float *pfStack16;
  int iStack4;
  
  iVar3 = (int)param_1;
  iStack4 = *(int *)(iVar3 + 0x14);
  iVar1 = *(int *)(iVar3 + 0x10);
  iVar2 = *(int *)(*(int *)(iStack4 + 8) + 8);
  lVar4 = (longlong)iVar2;
  pfStack16 = *(float **)(*(int *)(iVar2 + 4) + 4);
  pfStack20 = *(float **)(*(int *)(iVar2 + 8) + 4);
  pfStack24 = *(float **)(*(int *)(iVar2 + 0xc) + 4);
  pfStack28 = *(float **)(*(int *)(iVar2 + 0x10) + 4);
  iStack80 = 1;
  iStack152 = *(int *)(*(int *)(iVar2 + 0x18) + 4);
  proc_7F0585FC(*(float *)(iVar3 + 0xa0),param_1,afStack144);
  matrix_multiply_A1_by_F12(*(float *)(iStack4 + 0x14),extraout_a0,afStack144);
  proc_7F058998((undefined4 *)(iVar3 + 0x58),(int)afStack144);
  proc_7F058418(afStack144,pfStack16,&fStack40);
  proc_7F058418(afStack144,pfStack20,&fStack52);
  proc_7F058418(afStack144,pfStack24,&fStack64);
  proc_7F058418(afStack144,pfStack28,&fStack76);
  iStack148 = *(int *)(iVar1 + 0x14);
  proc_7F0B0BE4(&iStack148,extraout_f12,extraout_f14,*(float *)(iVar1 + 8),*(float *)(iVar1 + 0x10))
  ;
  if (lVar4 == 0) {
    iStack80 = 0;
    fVar9 = extraout_f12_00;
    fVar8 = extraout_f14_00;
  }
  else {
    lVar4 = proc_7F0B2970();
    fVar9 = extraout_f12_01;
    fVar8 = extraout_f14_01;
    fStack36 = extraout_f0;
  }
  iStack148 = *(int *)(iVar1 + 0x14);
  proc_7F0B0BE4(&iStack148,fVar9,fVar8,*(float *)(iVar1 + 8),*(float *)(iVar1 + 0x10));
  if (lVar4 == 0) {
    iStack80 = 0;
    fVar9 = extraout_f12_02;
    fVar8 = extraout_f14_02;
  }
  else {
    lVar4 = proc_7F0B2970();
    fVar9 = extraout_f12_03;
    fVar8 = extraout_f14_03;
    fStack48 = extraout_f0_00;
  }
  iStack148 = *(int *)(iVar1 + 0x14);
  proc_7F0B0BE4(&iStack148,fVar9,fVar8,*(float *)(iVar1 + 8),*(float *)(iVar1 + 0x10));
  if (lVar4 == 0) {
    iStack80 = 0;
    fVar9 = extraout_f12_04;
    fVar8 = extraout_f14_04;
  }
  else {
    lVar4 = proc_7F0B2970();
    fVar9 = extraout_f12_05;
    fVar8 = extraout_f14_05;
    fStack60 = extraout_f0_01;
  }
  iStack148 = *(int *)(iVar1 + 0x14);
  proc_7F0B0BE4(&iStack148,fVar9,fVar8,*(float *)(iVar1 + 8),*(float *)(iVar1 + 0x10));
  if (lVar4 == 0) {
    iStack80 = 0;
  }
  else {
    fStack72 = (float)proc_7F0B2970();
  }
  pfVar5 = (float *)(iVar3 + 0x18);
  if (iStack80 == 0) {
    proc_7F0585FC(*(float *)(iVar3 + 0xa0),(longlong)(int)pfVar5,pfVar5);
    matrix_multiply_A1_by_F12(*(float *)(iStack4 + 0x14),extraout_a0_01,pfVar5);
    fVar8 = (float)proc_7F0B2970();
    fVar9 = fVar8;
    proc_7F03E864(iStack152);
    fVar8 = fVar8 - (pfStack16[1] + fVar9) * *(float *)(iStack4 + 0x14);
    *(float *)(iVar1 + 0xc) = fVar8;
    *(float *)(iVar3 + 0x5c) = fVar8;
  }
  else {
    fStack164 = fStack52 - fStack40;
    fStack160 = fStack48 - fStack36;
    fStack156 = fStack44 - fStack32;
    guNormalize(&fStack164,&fStack160,&fStack156);
    fStack176 = fStack76 - fStack52;
    fStack172 = fStack72 - fStack48;
    fStack168 = fStack68 - fStack44;
    guNormalize(&fStack176,&fStack172,&fStack168);
    fStack188 = fStack64 - fStack76;
    fStack184 = fStack60 - fStack72;
    fStack180 = fStack56 - fStack68;
    guNormalize(&fStack188,&fStack184,&fStack180);
    fStack200 = fStack40 - fStack64;
    fStack196 = fStack36 - fStack60;
    fStack192 = fStack32 - fStack56;
    guNormalize(&fStack200,&fStack196,&fStack192);
    fStack224 = fStack156 * fStack176 - fStack168 * fStack164;
    fVar9 = fStack168 * fStack188 - fStack180 * fStack176;
    if (((fStack224 < fVar9) || (fStack224 < fStack180 * fStack200 - fStack192 * fStack188)) ||
       (fStack224 < fStack192 * fStack164 - fStack156 * fStack200)) {
      fStack224 = fStack180 * fStack200 - fStack192 * fStack188;
      fVar8 = fStack192 * fStack164 - fStack156 * fStack200;
      if ((fVar9 < fStack224) || (fVar9 < fVar8)) {
        if (fVar8 <= fStack224) {
          fStack228 = fStack184 * fStack192 - fStack196 * fStack180;
          fStack220 = fStack188 * fStack196 - fStack200 * fStack184;
        }
        else {
          fStack228 = fStack196 * fStack156 - fStack160 * fStack192;
          fStack220 = fStack200 * fStack160 - fStack164 * fStack196;
          fStack224 = fVar8;
        }
      }
      else {
        fStack228 = fStack172 * fStack180 - fStack184 * fStack168;
        fStack220 = fStack176 * fStack184 - fStack188 * fStack172;
        fStack224 = fVar9;
      }
    }
    else {
      fStack228 = fStack160 * fStack168 - fStack172 * fStack156;
      fStack220 = fStack164 * fStack172 - fStack176 * fStack160;
    }
    fVar9 = sinf(*(float *)(iVar3 + 0xa0));
    fVar8 = cosf(*(float *)(iVar3 + 0xa0));
    pfVar6 = (f32 *)(iVar3 + 0x18);
    proc_7F057FD0(pfVar6);
    *(float *)(iVar3 + 0x28) = fStack228;
    fVar11 = *(float *)(iVar3 + 0x28);
    *(float *)(iVar3 + 0x2c) = fStack224;
    fVar10 = *(float *)(iVar3 + 0x2c);
    *(float *)(iVar3 + 0x30) = fStack220;
    fVar7 = *(float *)(iVar3 + 0x30);
    *(float *)(iVar3 + 0x18) = fVar10 * fVar8 - fVar7 * 0.00000000;
    *(float *)(iVar3 + 0x1c) = fVar7 * fVar9 - fVar8 * fVar11;
    *(float *)(iVar3 + 0x20) = fVar11 * 0.00000000 - fVar9 * fVar10;
    *(float *)(iVar3 + 0x38) = *(float *)(iVar3 + 0x1c) * fVar7 - fVar10 * *(float *)(iVar3 + 0x20);
    *(float *)(iVar3 + 0x3c) = *(float *)(iVar3 + 0x20) * fVar11 - fVar7 * *(float *)(iVar3 + 0x18);
    *(float *)(iVar3 + 0x40) = *(float *)(iVar3 + 0x18) * fVar10 - fVar11 * *(float *)(iVar3 + 0x1c)
    ;
    matrix_multiply_A1_by_F12(*(float *)(iStack4 + 0x14),extraout_a0_00,(float *)pfVar6);
    proc_7F058418((float *)pfVar6,pfStack16,&fStack52);
    proc_7F03E864(iStack152);
    fStack48 = (fStack36 - fVar7 * *(float *)(iStack4 + 0x14)) - fStack48;
    *(float *)(iVar1 + 0xc) = fStack48;
    *(float *)(iVar3 + 0x5c) = fStack48;
  }
  return iStack80;
}



int proc_7F0451DC(float *param_1,float param_2,float param_3,float param_4)

{
  int iVar1;
  float in_a2_lo;
  float in_a3_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  
  iVar1 = get_curplayer_positiondata();
  fVar2 = *param_1 - *(float *)(iVar1 + 8);
  fVar3 = param_1[1] - *(float *)(iVar1 + 0xc);
  fVar4 = param_1[2] - *(float *)(iVar1 + 0x10);
  fVar2 = sqrtf(fVar2 * fVar2 + fVar3 * fVar3 + fVar4 * fVar4);
  if (in_a2_lo < fVar2) {
    iVar1 = 0xff;
  }
  else {
    if (fVar2 < param_4) {
      iVar1 = (int)(in_a3_lo * 255.00000000);
    }
    else {
      iVar1 = (int)((((fVar2 - param_4) * (1.00000000 - in_a3_lo)) / (in_a2_lo - param_4) + in_a3_lo
                    ) * 255.00000000);
    }
  }
  return iVar1;
}


/*
Unable to decompile 'object_interaction'
Cause: Exception while decompiling 7f0452d4: process: timeout

*/


undefined4 * proc_7F049B58(undefined4 *param_1)

{
  char cVar1;
  int iVar2;
  undefined4 *puVar4;
  longlong lVar3;
  u32 uVar5;
  char *pcVar6;
  
  pcVar6 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar6 == NULL) {
    return param_1;
  }
  cVar1 = *pcVar6;
  do {
    if (cVar1 == '\x03') {
      iVar2 = *(int *)(pcVar6 + 4);
      puVar4 = proc_7F061E18(param_1,(char *)(iVar2 + 0x180),1);
      param_1 = proc_7F061E18(puVar4,(char *)(iVar2 + 0x1ac),1);
LAB_7f049c54:
      pcVar6 = *(char **)(pcVar6 + 0x24);
    }
    else {
      if (cVar1 == '\x01') {
        if (*(char *)(*(int *)(pcVar6 + 4) + 3) == '\r') {
          param_1 = proc_7F061E18(param_1,*(char **)(*(int *)(pcVar6 + 4) + 0xcc),1);
          goto LAB_7f049c54;
        }
        pcVar6 = *(char **)(pcVar6 + 0x24);
      }
      else {
        if (cVar1 == '\x06') {
          if (*(int *)(pcVar6 + 4) != 0) {
            lVar3 = proc_7F09B15C((int)pcVar6);
            uVar5 = get_cur_playernum();
            if ((longlong)(int)uVar5 != lVar3) {
              iVar2 = *(int *)(pcVar6 + 4);
              puVar4 = proc_7F061E18(param_1,(char *)(iVar2 + 0x180),1);
              param_1 = proc_7F061E18(puVar4,(char *)(iVar2 + 0x1ac),1);
            }
            goto LAB_7f049c54;
          }
          pcVar6 = *(char **)(pcVar6 + 0x24);
        }
        else {
          pcVar6 = *(char **)(pcVar6 + 0x24);
        }
      }
    }
    if (pcVar6 == NULL) {
      return param_1;
    }
    cVar1 = *pcVar6;
  } while( true );
}



void set_ptr_monitor_img_to_obj_ani_slot(undefined4 *slot,undefined4 image)

{
  *slot = image;
  *(undefined2 *)(slot + 1) = 0;
  return;
}



void set_ptr_monitor_img_to_obj_ani_slot(undefined4 *param_1,undefined4 param_2)

{
  undefined4 *image;
  
  image = &monitor_animation_microcode;
  if (true) {
    switch(param_2) {
    case 1:
      image = &DAT_80030c00;
      break;
    case 2:
      image = &DAT_80030e24;
      break;
    case 3:
      image = &dword_80030F44;
      break;
    case 4:
      image = &dword_80031018;
      break;
    case 5:
      image = &dword_80031074;
      break;
    case 6:
      image = &dword_800310F0;
      break;
    case 7:
      image = &dword_8003118C;
      break;
    case 8:
      image = &dword_8003121C;
      break;
    case 9:
      image = &dword_80031248;
      break;
    case 10:
      image = &dword_80031274;
      break;
    case 0xb:
      image = &DAT_800312f4;
      break;
    case 0xc:
      image = &DAT_80031310;
      break;
    case 0xd:
      image = &dword_80031490;
      break;
    case 0xe:
      image = &dword_800314F8;
      break;
    case 0xf:
      image = &DAT_80030ec8;
      break;
    case 0x10:
      image = &DAT_80031360;
      break;
    case 0x11:
      image = &dword_8003156C;
      break;
    case 0x12:
      image = &DAT_800315cc;
      break;
    case 0x13:
      image = &DAT_80031848;
      break;
    case 0x14:
      image = &dword_80031898;
      break;
    case 0x15:
      image = &stru_800318B8;
      break;
    case 0x16:
      image = &stru_8003191C;
      break;
    case 0x17:
      image = &stru_80031950;
      break;
    case 0x18:
      image = &stru_800319D4;
      break;
    case 0x19:
      image = &stru_800319F0;
      break;
    case 0x1a:
      image = &stru_80031A0C;
      break;
    case 0x1b:
      image = &stru_80031A28;
      break;
    case 0x1c:
      image = &stru_80031A44;
      break;
    case 0x1d:
      image = &stru_80031A60;
      break;
    case 0x1e:
      image = &stru_80031A7C;
      break;
    case 0x1f:
      image = &stru_80031A98;
      break;
    case 0x20:
      image = &stru_80031AB4;
      break;
    case 0x21:
      image = &stru_80031AD0;
      break;
    case 0x22:
      image = &stru_80031AEC;
      break;
    case 0x23:
      image = (undefined4 *)&stru_80031B24;
      break;
    case 0x24:
      image = (undefined4 *)&stru_80031B38;
      break;
    case 0x25:
      image = (undefined4 *)&stru_80031B4C;
      break;
    case 0x26:
      image = (undefined4 *)&dword_80031B60;
      break;
    case 0x27:
      image = &stru_80031BB4;
      break;
    case 0x28:
      image = (undefined4 *)&stru_80031BD0;
      break;
    case 0x29:
      image = (undefined4 *)&stru_80031BEC;
      break;
    case 0x2a:
      image = &stru_80031C08;
      break;
    case 0x2b:
      image = (undefined4 *)&stru_80031C80;
      break;
    case 0x2c:
      image = (undefined4 *)&dword_80031D30;
      break;
    case 0x2d:
      image = (undefined4 *)&dword_80031D58;
      break;
    case 0x2e:
      image = (undefined4 *)&dword_80031DA8;
      break;
    case 0x2f:
      image = &dword_80031DF4;
      break;
    case 0x30:
      image = &dword_80031E40;
      break;
    case 0x31:
      image = &dword_80031E78;
      break;
    case 0x32:
      image = &DAT_80031eb0;
      break;
    case 0x33:
      image = &DAT_80031ee8;
    }
  }
  set_ptr_monitor_img_to_obj_ani_slot(param_1,image);
  return;
}



void save_img_index_to_obj_ani_slot(int slot,undefined4 index)

{
  *(undefined4 *)(slot + 8) = index;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

uint * process_monitor_animation_microcode(void)

{
  undefined uVar1;
  ushort uVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  bool bVar6;
  uint *puVar7;
  uint *puVar8;
  undefined4 *virtualAddress;
  undefined4 *puVar9;
  u32 uVar10;
  undefined4 *puVar11;
  int objinst;
  ushort *partdesc;
  int *slot;
  uint *in_a3_lo;
  short sVar12;
  uint *imgcall;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  uint *puStackX12;
  int in_stack_00000010;
  int in_stack_00000014;
  
  puStackX12 = in_a3_lo;
  if ((partdesc != NULL) && (puStackX12 = in_a3_lo, (*partdesc & 0xff) == 0x18)) {
    puStackX12 = in_a3_lo;
    proc_7F0BD6C4(4);
    puVar7 = puStackX12;
    puStackX12 = puStackX12 + 2;
    iVar3 = *(int *)(partdesc + 2);
    puVar9 = (undefined4 *)extract_id_from_object_structure_microcode(objinst,partdesc);
    fVar16 = flt_80052C68;
    bVar6 = false;
    uVar2 = *(ushort *)(slot + 1);
    while( true ) {
      puVar11 = (undefined4 *)(*slot + (uint)uVar2 * 4);
      switch(*puVar11) {
      case 0:
        slot[0x10] = 0;
        slot[0x15] = 0;
        *(ushort *)(slot + 1) = uVar2 + 1;
        break;
      case 1:
        slot[0xf] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[0x11] = slot[0xe];
        *(float *)(slot + 0x10) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 0x12) = (float)slot[0xe] + (float)iVar5 * 0.00097656;
        break;
      case 2:
        slot[0x14] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[0x16] = slot[0x13];
        *(float *)(slot + 0x15) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 0x17) = (float)slot[0x13] + (float)iVar5 * 0.00097656;
        break;
      case 3:
        slot[0xf] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[0x11] = slot[0xe];
        *(float *)(slot + 0x10) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 0x12) = (float)iVar5 * 0.00097656;
        break;
      case 4:
        slot[0x14] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[0x16] = slot[0x13];
        *(float *)(slot + 0x15) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 0x17) = (float)iVar5 * 0.00097656;
        break;
      case 5:
        slot[5] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[7] = slot[4];
        *(float *)(slot + 6) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 8) = (float)iVar5 * 0.00097656;
        break;
      case 6:
        slot[10] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        slot[0xc] = slot[9];
        *(float *)(slot + 0xb) = 1.00000000 / fVar19;
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(float *)(slot + 0xd) = (float)iVar5 * 0.00097656;
        break;
      case 7:
        save_img_index_to_obj_ani_slot((int)slot,puVar11[1]);
        *(short *)(slot + 1) = *(short *)(slot + 1) + 2;
        break;
      case 8:
        if (*(short *)((int)slot + 6) < 0) {
          bVar6 = true;
          *(undefined2 *)((int)slot + 6) = (short)puVar11[1];
        }
        else {
          *(short *)((int)slot + 6) = *(short *)((int)slot + 6) - (short)clock_timer;
          if (*(short *)((int)slot + 6) < 0) {
            *(short *)(slot + 1) = *(short *)(slot + 1) + 2;
          }
          else {
            bVar6 = true;
          }
        }
        break;
      case 9:
        set_ptr_monitor_img_to_obj_ani_slot(slot,puVar11[1]);
        break;
      case 10:
        uVar10 = get_random_value();
        if (uVar10 >> 0x10 < (uint)puVar11[2]) {
          set_ptr_monitor_img_to_obj_ani_slot(slot,puVar11[1]);
        }
        else {
          *(short *)(slot + 1) = *(short *)(slot + 1) + 3;
        }
        break;
      case 0xb:
        *(undefined2 *)(slot + 1) = 0;
        break;
      case 0xc:
        bVar6 = true;
        break;
      case 0xd:
        slot[0x1b] = 0;
        fVar19 = (float)puVar11[2];
        if ((int)puVar11[2] < 0) {
          fVar19 = fVar19 + 4294967296.00000000;
        }
        *(undefined *)((int)slot + 0x61) = *(undefined *)(slot + 0x18);
        *(float *)(slot + 0x1c) = 1.00000000 / fVar19;
        uVar4 = puVar11[1];
        *(undefined *)(slot + 0x19) = *(undefined *)((int)slot + 99);
        *(undefined *)((int)slot + 0x62) = (char)((uint)uVar4 >> 0x18);
        uVar4 = puVar11[1];
        *(undefined *)((int)slot + 0x67) = *(undefined *)((int)slot + 0x66);
        *(undefined *)((int)slot + 0x65) = (char)((uint)uVar4 >> 0x10);
        uVar4 = puVar11[1];
        *(undefined *)((int)slot + 0x6a) = *(undefined *)((int)slot + 0x69);
        *(char *)(slot + 0x1a) = (char)((uint)uVar4 >> 8);
        uVar4 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 3;
        *(undefined *)((int)slot + 0x6b) = (char)uVar4;
        break;
      case 0xe:
        iVar5 = puVar11[1];
        *(ushort *)(slot + 1) = uVar2 + 2;
        *(float *)(slot + 3) = ((float)iVar5 * fVar16) / 65536.00000000;
        break;
      case 0xf:
        *(float *)(slot + 3) =
             (float)slot[3] + (global_timer_delta * (float)puVar11[1] * fVar16) / 65536.00000000;
        fVar19 = (float)slot[3];
        if (fVar16 <= fVar19) {
          *(float *)(slot + 3) = fVar19 - fVar16;
          fVar19 = (float)slot[3];
        }
        if (fVar19 < 0.00000000) {
          *(float *)(slot + 3) = fVar19 + fVar16;
          sVar12 = *(short *)(slot + 1);
        }
        else {
          sVar12 = *(short *)(slot + 1);
        }
        *(short *)(slot + 1) = sVar12 + 2;
      }
      if (bVar6) break;
      uVar2 = *(ushort *)(slot + 1);
    }
    if (0.00000000 < (float)slot[6]) {
      *(float *)(slot + 5) = (float)slot[5] + (float)slot[6] * global_timer_delta;
      if ((float)slot[5] < 1.00000000) {
        *(float *)(slot + 4) = (float)slot[7] + ((float)slot[8] - (float)slot[7]) * (float)slot[5];
      }
      else {
        slot[5] = 0x3f800000;
        slot[6] = 0;
        slot[4] = slot[8];
      }
    }
    if (0.00000000 < (float)slot[0xb]) {
      *(float *)(slot + 10) = (float)slot[10] + (float)slot[0xb] * global_timer_delta;
      if ((float)slot[10] < 1.00000000) {
        *(float *)(slot + 9) =
             (float)slot[0xc] + ((float)slot[0xd] - (float)slot[0xc]) * (float)slot[10];
      }
      else {
        slot[10] = 0x3f800000;
        slot[0xb] = 0;
        slot[9] = slot[0xd];
      }
      fVar16 = (float)slot[0x10];
    }
    else {
      fVar16 = (float)slot[0x10];
    }
    if (0.00000000 < fVar16) {
      *(float *)(slot + 0xf) = (float)slot[0xf] + fVar16 * global_timer_delta;
      if ((float)slot[0xf] < 1.00000000) {
        *(float *)(slot + 0xe) =
             (float)slot[0x11] + ((float)slot[0x12] - (float)slot[0x11]) * (float)slot[0xf];
      }
      else {
        slot[0xf] = 0x3f800000;
        slot[0x10] = 0;
        slot[0xe] = slot[0x12];
      }
      fVar16 = (float)slot[0x15];
    }
    else {
      fVar16 = (float)slot[0x15];
    }
    if (0.00000000 < fVar16) {
      *(float *)(slot + 0x14) = (float)slot[0x14] + fVar16 * global_timer_delta;
      if ((float)slot[0x14] < 1.00000000) {
        *(float *)(slot + 0x13) =
             (float)slot[0x16] + ((float)slot[0x17] - (float)slot[0x16]) * (float)slot[0x14];
      }
      else {
        slot[0x14] = 0x3f800000;
        slot[0x15] = 0;
        slot[0x13] = slot[0x17];
      }
      fVar16 = (float)slot[0x1c];
    }
    else {
      fVar16 = (float)slot[0x1c];
    }
    if (0.00000000 < fVar16) {
      *(float *)(slot + 0x1b) = (float)slot[0x1b] + fVar16 * global_timer_delta;
      fVar16 = (float)slot[0x1b];
      if (fVar16 < 1.00000000) {
        *(byte *)(slot + 0x18) =
             *(byte *)((int)slot + 0x61) +
             (char)(int)((float)((uint)*(byte *)((int)slot + 0x62) -
                                (uint)*(byte *)((int)slot + 0x61)) * fVar16);
        *(char *)((int)slot + 99) =
             *(byte *)(slot + 0x19) +
             (char)(int)((float)((uint)*(byte *)((int)slot + 0x65) - (uint)*(byte *)(slot + 0x19)) *
                        fVar16);
        *(char *)((int)slot + 0x66) =
             *(byte *)((int)slot + 0x67) +
             (char)(int)((float)((uint)*(byte *)(slot + 0x1a) - (uint)*(byte *)((int)slot + 0x67)) *
                        fVar16);
        *(char *)((int)slot + 0x69) =
             *(byte *)((int)slot + 0x6a) +
             (char)(int)((float)((uint)*(byte *)((int)slot + 0x6b) -
                                (uint)*(byte *)((int)slot + 0x6a)) * fVar16);
      }
      else {
        slot[0x1b] = 0x3f800000;
        slot[0x1c] = 0;
        *(undefined *)(slot + 0x18) = *(undefined *)((int)slot + 0x62);
        *(undefined *)((int)slot + 99) = *(undefined *)((int)slot + 0x65);
        *(undefined *)((int)slot + 0x66) = *(undefined *)(slot + 0x1a);
        *(undefined *)((int)slot + 0x69) = *(undefined *)((int)slot + 0x6b);
      }
    }
    *(undefined4 **)puVar9 = virtualAddress;
    *(uint **)(puVar9 + 1) = puStackX12;
    puVar9 = *(undefined4 **)(iVar3 + 8);
    *virtualAddress = *puVar9;
    virtualAddress[1] = puVar9[1];
    virtualAddress[2] = puVar9[2];
    virtualAddress[3] = puVar9[3];
    iVar5 = *(int *)(iVar3 + 8);
    virtualAddress[4] = *(undefined4 *)(iVar5 + 0x10);
    virtualAddress[5] = *(undefined4 *)(iVar5 + 0x14);
    virtualAddress[6] = *(undefined4 *)(iVar5 + 0x18);
    virtualAddress[7] = *(undefined4 *)(iVar5 + 0x1c);
    iVar5 = *(int *)(iVar3 + 8);
    virtualAddress[8] = *(undefined4 *)(iVar5 + 0x20);
    virtualAddress[9] = *(undefined4 *)(iVar5 + 0x24);
    virtualAddress[10] = *(undefined4 *)(iVar5 + 0x28);
    virtualAddress[0xb] = *(undefined4 *)(iVar5 + 0x2c);
    iVar3 = *(int *)(iVar3 + 8);
    virtualAddress[0xc] = *(undefined4 *)(iVar3 + 0x30);
    virtualAddress[0xd] = *(undefined4 *)(iVar3 + 0x34);
    virtualAddress[0xe] = *(undefined4 *)(iVar3 + 0x38);
    virtualAddress[0xf] = *(undefined4 *)(iVar3 + 0x3c);
    imgcall = (uint *)slot[2];
    if (imgcall < &UNK_00000064) {
      imgcall = (uint *)((int)imgcall * 0xc + DAT_8008d120);
    }
    if (imgcall != NULL) {
      fVar17 = (float)slot[4] * 0.50000000;
      fVar18 = (float)slot[9] * 0.50000000;
      fVar16 = fVar17;
      fVar19 = fVar18;
      if ((float)slot[3] != 0.00000000) {
        fVar13 = cosf((float)slot[3]);
        fVar15 = flt_80052CB0;
        fVar13 = fVar13 * flt_80052CB0;
        fVar14 = sinf((float)slot[3]);
        fVar16 = fVar17 * fVar13;
        fVar19 = fVar18 * fVar14 * fVar15;
        fVar17 = fVar17 * fVar14 * fVar15;
        fVar18 = fVar18 * fVar13;
      }
      fVar15 = (float)(uint)*(byte *)(imgcall + 1);
      if (false) {
        fVar15 = fVar15 + 4294967296.00000000;
      }
      *(short *)(virtualAddress + 2) =
           (short)(int)(fVar15 * ((float)slot[0xe] + fVar16) * 32.00000000);
      fVar15 = (float)(uint)*(byte *)((int)imgcall + 5);
      if (false) {
        fVar15 = fVar15 + 4294967296.00000000;
      }
      *(undefined2 *)((int)virtualAddress + 10) =
           (short)(int)(fVar15 * ((float)slot[0x13] + fVar19) * 32.00000000);
      fVar15 = (float)(uint)*(byte *)(imgcall + 1);
      if (false) {
        fVar15 = fVar15 + 4294967296.00000000;
      }
      *(short *)(virtualAddress + 6) =
           (short)(int)(fVar15 * ((float)slot[0xe] - fVar17) * 32.00000000);
      fVar15 = (float)(uint)*(byte *)((int)imgcall + 5);
      if (false) {
        fVar15 = fVar15 + 4294967296.00000000;
      }
      *(undefined2 *)((int)virtualAddress + 0x1a) =
           (short)(int)(fVar15 * ((float)slot[0x13] + fVar18) * 32.00000000);
      fVar15 = (float)(uint)*(byte *)(imgcall + 1);
      if (false) {
        fVar15 = fVar15 + 4294967296.00000000;
      }
      *(short *)(virtualAddress + 10) =
           (short)(int)(fVar15 * ((float)slot[0xe] - fVar16) * 32.00000000);
      fVar16 = (float)(uint)*(byte *)((int)imgcall + 5);
      if (false) {
        fVar16 = fVar16 + 4294967296.00000000;
      }
      *(undefined2 *)((int)virtualAddress + 0x2a) =
           (short)(int)(fVar16 * ((float)slot[0x13] - fVar19) * 32.00000000);
      fVar16 = (float)(uint)*(byte *)(imgcall + 1);
      if (false) {
        fVar16 = fVar16 + 4294967296.00000000;
      }
      *(short *)(virtualAddress + 0xe) =
           (short)(int)(fVar16 * ((float)slot[0xe] + fVar17) * 32.00000000);
      fVar16 = (float)(uint)*(byte *)((int)imgcall + 5);
      if (false) {
        fVar16 = fVar16 + 4294967296.00000000;
      }
      *(undefined2 *)((int)virtualAddress + 0x3a) =
           (short)(int)(fVar16 * ((float)slot[0x13] - fVar18) * 32.00000000);
    }
    uVar1 = *(undefined *)(slot + 0x18);
    *(undefined *)(virtualAddress + 0xf) = uVar1;
    *(undefined *)(virtualAddress + 0xb) = uVar1;
    *(undefined *)(virtualAddress + 7) = uVar1;
    *(undefined *)(virtualAddress + 3) = uVar1;
    uVar1 = *(undefined *)((int)slot + 99);
    *(undefined *)((int)virtualAddress + 0x3d) = uVar1;
    *(undefined *)((int)virtualAddress + 0x2d) = uVar1;
    *(undefined *)((int)virtualAddress + 0x1d) = uVar1;
    *(undefined *)((int)virtualAddress + 0xd) = uVar1;
    uVar1 = *(undefined *)((int)slot + 0x66);
    *(undefined *)((int)virtualAddress + 0x3e) = uVar1;
    *(undefined *)((int)virtualAddress + 0x2e) = uVar1;
    *(undefined *)((int)virtualAddress + 0x1e) = uVar1;
    *(undefined *)((int)virtualAddress + 0xe) = uVar1;
    uVar1 = *(undefined *)((int)slot + 0x69);
    *(undefined *)((int)virtualAddress + 0x3f) = uVar1;
    *(undefined *)((int)virtualAddress + 0x2f) = uVar1;
    *(undefined *)((int)virtualAddress + 0x1f) = uVar1;
    *(undefined *)((int)virtualAddress + 0xf) = uVar1;
    if (*(char *)((int)slot + 0x69) != -1) {
      in_stack_00000014 = 2;
    }
    puStackX12[1] = 0x2000;
    *puStackX12 = 0xb7000000;
    puStackX12 = puStackX12 + 2;
    likely_generate_DL_for_image_declaration
              (&puStackX12,imgcall,in_stack_00000014,(longlong)in_stack_00000010,2);
    imgcall = puStackX12;
    *puStackX12 = 0x1020040;
    puStackX12 = puStackX12 + 2;
    uVar10 = osVirtualToPhysical(*(void **)(objinst + 0xc));
    puVar8 = puStackX12;
    imgcall[1] = uVar10;
    *puStackX12 = 0xbc001006;
    puStackX12 = puStackX12 + 2;
    uVar10 = osVirtualToPhysical(virtualAddress);
    puVar8[1] = uVar10;
    puStackX12[1] = 0x4000000;
    *puStackX12 = 0x4300040;
    puStackX12[3] = 0x2010;
    puStackX12[2] = 0xb1000032;
    puStackX12[5] = 0;
    puStackX12[4] = 0xb8000000;
    *puVar7 = 0x6010000;
    *(uint **)(puVar7 + 1) = puStackX12 + 6;
    puStackX12 = puStackX12 + 6;
  }
  return puStackX12;
}



void proc_7F04AC20(int param_1,int param_2,uint param_3)

{
  int param_1_00;
  uint uVar1;
  uint uVar2;
  bool bVar3;
  bool bVar4;
  int iVar5;
  ushort *puVar6;
  undefined4 uVar7;
  undefined4 *puVar8;
  char cVar9;
  uint uVar10;
  uint extraout_a2_lo;
  uint extraout_a2_lo_00;
  uint extraout_a2_lo_01;
  uint extraout_a2_lo_02;
  uint extraout_a2_lo_03;
  uint extraout_a2_lo_04;
  undefined4 *puVar11;
  
  if ((*(byte *)(param_1 + 1) & 2) != 0) {
    param_1_00 = *(int *)(param_1 + 4);
    uVar1 = *(uint *)(param_1_00 + 0x14);
    bVar3 = (*(uint *)(param_1_00 + 8) & 0x200) != 0;
    uVar10 = param_3;
    if (bVar3) {
      iVar5 = proc_7F078394();
      bVar3 = iVar5 != 0;
      uVar10 = extraout_a2_lo;
    }
    puVar11 = *(undefined4 **)(param_2 + 0xc);
    cVar9 = *(char *)(param_1_00 + 3);
    if (cVar9 == '\n') {
      if ((*(uint *)(param_2 + 8) & 1) != 0) {
        puVar11 = (undefined4 *)process_monitor_animation_microcode();
        cVar9 = *(char *)(param_1_00 + 3);
        uVar10 = extraout_a2_lo_00;
      }
    }
    else {
      if ((cVar9 == '\v') && ((*(uint *)(param_2 + 8) & 1) != 0)) {
        process_monitor_animation_microcode();
        process_monitor_animation_microcode();
        process_monitor_animation_microcode();
        puVar11 = (undefined4 *)process_monitor_animation_microcode();
        cVar9 = *(char *)(param_1_00 + 3);
        uVar10 = extraout_a2_lo_01;
      }
    }
    if (cVar9 == '\x01') {
      iVar5 = *(int *)(param_1 + 4);
      puVar11[1] = 0x3000;
      *puVar11 = 0xb6000000;
      puVar11 = puVar11 + 2;
      if ((*(ushort *)(iVar5 + 0x98) & 8) == 0) {
        *(undefined4 *)(param_2 + 0x3c) = 3;
      }
      else {
        *(undefined4 *)(param_2 + 0x3c) = 2;
      }
      if (*(int *)(param_2 + 0x30) == 9) {
        *(uint *)(param_2 + 0x34) = *(uint *)(param_2 + 0x34) & 0xffffff00;
      }
    }
    else {
      puVar6 = proc_7F04B478(param_1_00);
      bVar4 = false;
      if (((puVar6 != NULL) && (iVar5 = *(int *)(puVar6 + 2), bVar4 = false, iVar5 != 0)) &&
         (bVar4 = false,
         *(int *)(iVar5 + 8) !=
         *(int *)(*(int *)(*(int *)(param_1_00 + 0x14) + 0x10) + (uint)*(ushort *)(iVar5 + 0x1a) * 4
                 ))) {
        bVar4 = true;
      }
      iVar5 = do_something_if_object_destroyed(param_1_00);
      if ((iVar5 == 0) || (!bVar4)) {
        *(undefined4 *)(param_2 + 0x3c) = 3;
        uVar10 = extraout_a2_lo_02;
        if (*(int *)(param_2 + 0x30) == 9) {
          *(uint *)(param_2 + 0x34) = *(uint *)(param_2 + 0x34) & 0xffffff00;
          uVar10 = extraout_a2_lo_02;
        }
      }
      else {
        iVar5 = do_something_if_object_destroyed(param_1_00);
        *(undefined4 *)(param_2 + 0x3c) = 1;
        if (*(int *)(param_2 + 0x30) == 9) {
          uVar10 = iVar5 * 0x32 + 100;
          if ((int)uVar10 < 0x100) {
            uVar2 = *(uint *)(param_2 + 0x34);
          }
          else {
            uVar10 = 0xff;
            uVar2 = *(uint *)(param_2 + 0x34);
          }
          *(uint *)(param_2 + 0x34) = uVar2 & 0xffffff00;
          *(uint *)(param_2 + 0x34) = uVar2 & 0xffffff00 | uVar10;
          uVar10 = extraout_a2_lo_03;
        }
        else {
          uVar10 = extraout_a2_lo_03;
          if (0 < iVar5) {
            *(uint *)(param_2 + 0x34) = *(uint *)(param_2 + 0x34) | 0xff00;
            uVar10 = extraout_a2_lo_03;
          }
        }
      }
    }
    puVar8 = puVar11;
    if (bVar3) {
      puVar8 = puVar11 + 2;
      *puVar11 = 0x1030040;
      uVar7 = proc_7F078394();
      puVar11[1] = uVar7;
      uVar10 = extraout_a2_lo_04;
    }
    *(undefined4 **)(param_2 + 0xc) = puVar8;
    subdraw(param_2,uVar1,uVar10,puVar8);
    puVar11 = *(undefined4 **)(param_2 + 0xc);
    puVar8 = puVar11;
    if (*(char *)(param_1_00 + 3) == '\x01') {
      puVar8 = puVar11 + 2;
      *puVar11 = 0xb6000000;
      puVar11[1] = 0x3000;
    }
    if (((ulonglong)*(byte *)(param_1_00 + 2) & (longlong)(1 << (param_3 & 0x1f))) != 0) {
      puVar8 = proc_7F0A1A94(puVar8,param_1,param_3);
    }
    puVar11 = puVar8;
    if (bVar3) {
      puVar11 = puVar8 + 2;
      *puVar8 = 0x1030040;
      uVar7 = proc_7F078374();
      puVar8[1] = uVar7;
    }
    *(undefined4 **)(param_2 + 0xc) = puVar11;
    param_1_00 = *(int *)(param_1 + 0x20);
    while (param_1_00 != 0) {
      proc_7F04AC20(param_1_00,param_2,param_3);
      param_1_00 = *(int *)(param_1_00 + 0x24);
    }
    if (param_3 != 0) {
      if (bVar3) {
        proc_7F08BEEC(*(float **)(uVar1 + 0xc),(int)*(short *)(*(int *)(uVar1 + 8) + 0xe));
      }
      else {
        proc_7F08BD48(*(undefined4 **)(uVar1 + 0xc),(int)*(short *)(*(int *)(uVar1 + 8) + 0xe));
      }
    }
  }
  return;
}



longlong proc_7F04B150(char *param_1,uint *param_2,uint param_3)

{
  short sVar1;
  int iVar2;
  longlong lVar3;
  int iVar4;
  int iVar5;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  float fVar10;
  float extraout_f12;
  float extraout_f14;
  int iStack132;
  int iStack120;
  int iStack116;
  int iStack112;
  uint uStack108;
  float fStack104;
  float fStack100;
  undefined4 uStack88;
  uint uStack84;
  undefined4 uStack80;
  uint *puStack76;
  undefined4 uStack40;
  int iStack36;
  uint uStack32;
  int iStack20;
  float afStack16 [4];
  
  iVar2 = *(int *)(param_1 + 4);
  puVar8 = &DAT_80031fd0;
  puVar6 = &uStack88;
  do {
    puVar9 = puVar8 + 3;
    puVar7 = puVar6 + 3;
    *puVar6 = *puVar8;
    puVar6[1] = puVar8[1];
    puVar6[2] = puVar8[2];
    puVar8 = puVar9;
    puVar6 = puVar7;
  } while (puVar9 != (undefined4 *)0x8003200c);
  *puVar7 = uRam8003200c;
  iStack132 = 0xff;
  lVar3 = if_sky_present_convert_values((int)param_1,afStack16);
  iStack20 = (int)lVar3;
  if (lVar3 == 0) {
    lVar3 = (longlong)(int)param_2;
  }
  else {
    if (*(char *)(iVar2 + 3) != '/') {
      fVar10 = getinstsize(*(int *)(iVar2 + 0x14),extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
      proc_7F054B80((int)param_1);
      sVar1 = *(short *)(param_1 + 2);
      if ((0 < sVar1) && (sVar1 < 0x3c)) {
        fVar10 = fVar10 * ((60.00000000 - (float)(int)sVar1) / 60.00000000);
      }
      iStack132 = (int)(fVar10 * 255.00000000);
      if (iStack132 < 1) {
        return (longlong)(int)param_2;
      }
    }
    if ((iStack132 < 0xff) || (*(int *)(iVar2 + 0xc) << 0xf < 0)) {
      if (param_3 == 0) {
        return (longlong)(int)param_2;
      }
      uStack80 = 3;
    }
    else {
      uStack80 = 2;
      if (param_3 == 0) {
        uStack80 = 1;
      }
    }
    lVar3 = proc_7F054A64(param_1,&fStack104);
    if ((lVar3 < 1) || (*(int *)(iVar2 + 0xc) << 5 < 0)) {
      puStack76 = proc_7F0B4FB4(param_2);
    }
    else {
      puStack76 = proc_7F0B4FF4(param_2,extraout_f12,extraout_f14,fStack104,fStack100);
    }
    uStack84 = (uint)((*(uint *)(iVar2 + 0xc) & 0x10000) == 0);
    if (iStack132 < 0xff) {
      uStack40 = 5;
      iStack36 = iStack132;
    }
    else {
      uStack40 = 9;
      if (*(char *)(iVar2 + 3) == '/') {
        iStack36 = *(int *)(iVar2 + 0x88) << 8;
      }
      else {
        if (*(char *)(iVar2 + 3) == '\x01') {
          if ((*(ushort *)(iVar2 + 0x98) & 2) == 0) {
            iStack36 = 0;
          }
          else {
            iStack36 = (int)*(short *)(iVar2 + 0xbe) << 8;
          }
        }
        else {
          iStack36 = 0;
        }
      }
    }
    iVar4 = proc_7F03FF60(iVar2);
    iVar5 = iVar4 * -0x15 + 0xff;
    if (iVar5 < 0) {
      iVar5 = 0;
    }
    iStack120 = (int)((uint)*(byte *)(iVar2 + 0x78) * iVar5) >> 8;
    iStack116 = (int)((uint)*(byte *)(iVar2 + 0x79) * iVar5) >> 8;
    iStack112 = (int)((uint)*(byte *)(iVar2 + 0x7a) * iVar5) >> 8;
    uStack108 = (uint)*(byte *)(iVar2 + 0x7b) + iVar4 * 0xf;
    if (0xff < (int)uStack108) {
      uStack108 = 0xff;
    }
    proc_7F040384(&iStack120,(longlong)iStack20,afStack16);
    uStack32 = uStack108 | iStack120 << 0x18 | iStack116 << 0x10 | iStack112 << 8;
    proc_7F04AC20((int)param_1,(int)&uStack88,param_3);
    lVar3 = (longlong)(int)puStack76;
  }
  return lVar3;
}



ushort * proc_7F04B478(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  
  puVar2 = **(ushort ***)(*(int *)(param_1 + 0x14) + 8);
  if (puVar2 != NULL) {
    uVar1 = *puVar2;
    while( true ) {
      uVar1 &= 0xff;
      if (uVar1 == 8) {
        proc_7F06E970(*(int *)(param_1 + 0x14),puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
      }
      else {
        if (uVar1 == 0x12) {
          process_12_handle_switch(*(int *)(param_1 + 0x14),puVar2);
          puVar3 = *(ushort **)(puVar2 + 10);
        }
        else {
          if (uVar1 == 0x17) {
            process_17_pointer_to_head(*(int *)(param_1 + 0x14),puVar2);
            puVar3 = *(ushort **)(puVar2 + 10);
          }
          else {
            if (uVar1 == 0x18) {
              return puVar2;
            }
            puVar3 = *(ushort **)(puVar2 + 10);
          }
        }
      }
      if ((puVar3 == NULL) && (puVar3 = puVar2, puVar2 != NULL)) {
        puVar3 = *(ushort **)(puVar2 + 6);
        while ((puVar3 == NULL &&
               (puVar2 = *(ushort **)(puVar2 + 4), puVar3 = puVar2, puVar2 != NULL))) {
          puVar3 = *(ushort **)(puVar2 + 6);
        }
      }
      if (puVar3 == NULL) break;
      uVar1 = *puVar3;
      puVar2 = puVar3;
    }
  }
  return NULL;
}



undefined8 proc_7F04B590(int param_1,int param_2)

{
  int *piVar1;
  
  if ((*(item_related **)(param_1 + 4) == &prop_console_one_screen_related) &&
     (param_2 == **(int **)(param_1 + 8))) {
    return 0;
  }
  if ((*(item_related **)(param_1 + 4) == &prop_console_four_screen_related) &&
     ((((piVar1 = *(int **)(param_1 + 8), param_2 == *piVar1 || (param_2 == piVar1[1])) ||
       (param_2 == piVar1[2])) || (param_2 == piVar1[3])))) {
    return 0;
  }
  return 1;
}



void proc_7F04B610(int param_1,int param_2)

{
  bool bVar1;
  short sVar2;
  ushort uVar3;
  int iVar4;
  bool bVar5;
  ushort *puVar8;
  longlong lVar6;
  u32 uVar9;
  int iVar10;
  undefined4 *puVar11;
  longlong lVar7;
  int iVar12;
  short *psVar13;
  uint uVar14;
  undefined4 *puVar15;
  undefined4 *puVar16;
  uint uVar17;
  int iVar18;
  int iVar19;
  uint *puVar20;
  longlong lVar21;
  longlong lVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  int iStack88;
  float fStack48;
  u32 uStack32;
  
  iVar18 = *(int *)(param_1 + 0x14);
  lVar21 = 99999;
  iVar12 = -99999;
  puVar8 = proc_7F04B478(param_1);
  if (((puVar8 != NULL) && (iVar4 = *(int *)(puVar8 + 2), iVar4 != 0)) &&
     (lVar6 = proc_7F04B590(*(int *)(*(int *)(param_1 + 0x14) + 8),(int)puVar8), lVar6 != 0)) {
    puVar20 = (uint *)(*(int *)(iVar18 + 0x10) + (uint)*(ushort *)(iVar4 + 0x1a) * 4);
    uVar9 = get_random_value();
    if ((uVar9 & 1) == 0) {
      uVar3 = *(ushort *)
               ((int)object_explosion_details + (int)*(short *)(param_1 + 4) * 0xe + param_2 * 2 + 8
               );
    }
    else {
      uVar3 = *(ushort *)
               ((int)object_explosion_details + (int)*(short *)(param_1 + 4) * 0xe + param_2 * 2 + 2
               );
    }
    uStack32 = (u32)uVar3;
    iStack88 = param_2 * 2;
    iVar10 = get_debug_explosioninfo_flag();
    if ((iVar10 != 0) || (uVar3 == 0)) {
      get_debug_explosioninfo_flag();
      uStack32 = get_random_value();
      iVar10 = get_debug_explosioninfo_flag();
      if (iVar10 != 0) {
        uStack32 &= 0xffff;
      }
    }
    proc_7F0A0D90(*(int *)(param_1 + 0x10));
    bVar1 = *(short *)(param_1 + 4) == 0x4c;
    iVar10 = do_something_if_object_destroyed(param_1);
    puVar11 = (undefined4 *)
              proc_7F09BE4C((longlong)*(short *)(iVar4 + 0xc),0xb0b,*(int *)(iVar18 + 8),iVar10);
    if (puVar11 == NULL) {
      if (*(uint *)(iVar4 + 8) != *puVar20) {
        proc_7F09C044(*puVar20);
        *puVar20 = *(uint *)(iVar4 + 8);
        *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 4;
      }
      fVar23 = flt_80052CB4;
      fVar24 = *(float *)(param_1 + 0x2c) * flt_80052CB4;
      fVar25 = *(float *)(param_1 + 0x30) * flt_80052CB4;
      *(float *)(param_1 + 0x28) = *(float *)(param_1 + 0x28) * flt_80052CB4;
      *(float *)(param_1 + 0x2c) = fVar24;
      *(float *)(param_1 + 0x30) = fVar25;
      if (!bVar1) {
        fVar24 = *(float *)(*(int *)(param_1 + 0x14) + 0x14);
        iVar18 = proc_7F03FFF8(*(int **)(*(int *)(param_1 + 0x14) + 8));
        proc_7F03E864(iVar18);
        *(float *)(*(int *)(param_1 + 0x10) + 0xc) =
             *(float *)(*(int *)(param_1 + 0x10) + 0xc) + fVar24 * fVar23 * flt_80052CB8;
        proc_7F03E864(iVar18);
        *(float *)(param_1 + 0x5c) = *(float *)(param_1 + 0x5c) + fVar24 * fVar23 * flt_80052CBC;
      }
    }
    else {
      uVar17 = *puVar20;
      if (*(uint *)(iVar4 + 8) == uVar17) {
        lVar6 = 0;
        iVar18 = 0;
        if (0 < *(short *)(iVar4 + 0xc)) {
          iVar10 = *(int *)(iVar4 + 8);
          puVar15 = puVar11;
          while( true ) {
            lVar6 = (longlong)((int)lVar6 + 1);
            puVar16 = (undefined4 *)(iVar10 + iVar18);
            iVar18 += 0x10;
            *puVar15 = *puVar16;
            puVar15[1] = puVar16[1];
            puVar15[2] = puVar16[2];
            puVar15[3] = puVar16[3];
            if ((longlong)*(short *)(iVar4 + 0xc) <= lVar6) break;
            iVar10 = *(int *)(iVar4 + 8);
            puVar15 = puVar15 + 4;
          }
        }
      }
      else {
        lVar6 = 0;
        iVar18 = 0;
        if (0 < *(short *)(iVar4 + 0xc)) {
          uVar17 = *puVar20;
          puVar15 = puVar11;
          while( true ) {
            lVar6 = (longlong)((int)lVar6 + 1);
            puVar16 = (undefined4 *)(uVar17 + iVar18);
            iVar18 += 0x10;
            *puVar15 = *puVar16;
            puVar15[1] = puVar16[1];
            puVar15[2] = puVar16[2];
            puVar15[3] = puVar16[3];
            if ((longlong)*(short *)(iVar4 + 0xc) <= lVar6) break;
            uVar17 = *puVar20;
            puVar15 = puVar15 + 4;
          }
          uVar17 = *puVar20;
        }
        proc_7F09C044(uVar17);
      }
      *(undefined4 **)puVar20 = puVar11;
      sVar2 = *(short *)(param_1 + 4);
      iVar18 = 0;
      if (((sVar2 == 0x26) || (sVar2 == 0x27)) || (sVar2 == 0x55)) {
        bVar5 = false;
      }
      else {
        bVar5 = true;
      }
      sVar2 = *(short *)(iVar4 + 0xc);
      if (0 < sVar2) {
        uVar17 = *puVar20;
        lVar6 = -99999;
        lVar22 = lVar21;
        do {
          lVar7 = (longlong)*(short *)(uVar17 + 2);
          iVar18 += 0x10;
          lVar21 = lVar7;
          if (lVar22 <= lVar7) {
            lVar21 = lVar22;
          }
          if (lVar7 <= lVar6) {
            lVar7 = lVar6;
          }
          iVar12 = (int)lVar7;
          uVar17 += 0x10;
          lVar6 = lVar7;
          lVar22 = lVar21;
        } while (iVar18 < (int)sVar2 << 4);
      }
      lVar6 = 0;
      iVar10 = (int)lVar21;
      iVar18 = iVar10 + iVar12 >> 1;
      if ((iStack88 == 6) && (0x28 < iVar18 - iVar10)) {
        iVar18 = iVar10 + 0x28;
      }
      iVar12 -= iVar10;
      if (iVar12 < 0x3d) {
        fStack48 = 1.00000000;
      }
      else {
        if (iStack88 < 6) {
          fStack48 = flt_80052CC0;
        }
        else {
          fStack48 = (float)(iVar12 + -0x3c) / (float)iVar12;
        }
      }
      if (0 < sVar2) {
        iVar19 = 0;
        iVar12 = *(int *)(iVar4 + 8);
        do {
          psVar13 = (short *)(iVar12 + iVar19);
          proc_7F09B788((longlong)
                        (int)((int)psVar13[2] + (int)*psVar13 + (int)psVar13[1] + uStack32));
          uVar17 = 0;
          if (bVar5) {
            if (0.00000000 <= *(float *)(param_1 + 0x2c)) {
              if ((longlong)*(short *)(*puVar20 + iVar19 + 2) < (longlong)iVar18) {
                if (bVar1) {
                  uVar17 = 0x5a;
                }
                else {
                  uVar17 = 0x14;
                }
              }
              else {
                if (bVar1) {
                  uVar17 = 0x14;
                }
                else {
                  uVar17 = 0x5a;
                }
              }
            }
            else {
              if ((longlong)iVar18 < (longlong)*(short *)(*puVar20 + iVar19 + 2)) {
                if (bVar1) {
                  uVar17 = 0x5a;
                }
                else {
                  uVar17 = 0x14;
                }
              }
              else {
                if (bVar1) {
                  uVar17 = 0x14;
                }
                else {
                  uVar17 = 0x5a;
                }
              }
            }
          }
          uVar14 = proc_7F09B740();
          if (uVar14 % 100 < uVar17) {
            *(undefined *)(*puVar20 + iVar19 + 0xc) = 0;
            *(undefined *)(*puVar20 + iVar19 + 0xd) = 0;
            *(undefined *)(*puVar20 + iVar19 + 0xe) = 0;
            *(undefined *)(*puVar20 + iVar19 + 0xf) = 0xff;
LAB_7f04bbb0:
            uVar17 = *puVar20;
          }
          else {
            if (iStack88 == 2) {
              *(undefined *)(*puVar20 + iVar19 + 0xf) = 0;
              goto LAB_7f04bbb0;
            }
            uVar17 = *puVar20;
          }
          *(undefined2 *)(uVar17 + iVar19 + 2) =
               (short)(int)((float)((int)*(short *)(uVar17 + iVar19 + 2) - iVar10) * fStack48 +
                           (float)iVar10);
          uVar17 = proc_7F09B740();
          if (false) {
            trap(0x1c00);
          }
          *(short *)(*puVar20 + iVar19) =
               *(short *)(*puVar20 + iVar19) + (short)(uVar17 % 0x50) + -0x28;
          uVar17 = proc_7F09B740();
          if (false) {
            trap(0x1c00);
          }
          *(short *)(*puVar20 + iVar19 + 2) =
               *(short *)(*puVar20 + iVar19 + 2) + (short)(uVar17 % 0x50) + -0x28;
          uVar17 = proc_7F09B740();
          if (false) {
            trap(0x1c00);
          }
          *(short *)(*puVar20 + iVar19 + 4) =
               *(short *)(*puVar20 + iVar19 + 4) + (short)(uVar17 % 0x50) + -0x28;
          if ((longlong)*(short *)(*puVar20 + iVar19 + 2) < lVar21) {
            *(undefined2 *)(*puVar20 + iVar19 + 2) = (short)lVar21;
            sVar2 = *(short *)(iVar4 + 0xc);
          }
          else {
            sVar2 = *(short *)(iVar4 + 0xc);
          }
          lVar6 = (longlong)((int)lVar6 + 1);
          iVar19 += 0x10;
          if ((longlong)sVar2 <= lVar6) {
            return;
          }
          iVar12 = *(int *)(iVar4 + 8);
        } while( true );
      }
    }
  }
  return;
}



void proc_7F04BCDC(int param_1,float *param_2)

{
  u32 uVar1;
  float *pfVar2;
  uint uVar3;
  uint *puVar4;
  float fVar5;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack24 = DAT_80032010;
  fStack20 = (float)DAT_80032014;
  fStack16 = (float)DAT_80032018;
  puVar4 = NULL;
  proc_7F03FDA8(*(int *)(param_1 + 0x10));
  if ((*(uint *)(param_1 + 100) & 0x40) == 0) {
    if ((*(uint *)(param_1 + 100) & 0x80) != 0) {
      puVar4 = *(uint **)(param_1 + 0x6c);
    }
  }
  else {
    puVar4 = *(uint **)(*(int *)(param_1 + 0x6c) + 0x44);
  }
  if (puVar4 != NULL) {
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    *(float *)(puVar4 + 1) = fVar5 * 0.00000000 * flt_80052CC4 * 4.00000000 - flt_80052CC8;
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fVar5 = fVar5 * 0.00000000 * flt_80052CCC;
    *(float *)(puVar4 + 2) = fVar5 + fVar5 + flt_80052CD0;
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    *(float *)(puVar4 + 3) = fVar5 * 0.00000000 * flt_80052CD4 * 4.00000000 - flt_80052CD8;
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fStack24 = fVar5 * 0.00000000 * flt_80052CDC * 0.01562500 - flt_80052CE0;
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fStack20 = fVar5 * 0.00000000 * flt_80052CE4 * 0.01562500 - flt_80052CE8;
    uVar1 = get_random_value();
    fVar5 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    fStack16 = fVar5 * 0.00000000 * flt_80052CEC * 0.01562500 - flt_80052CF0;
    proc_7F058714(&fStack24,(float *)(puVar4 + 8));
    *puVar4 = *puVar4 | 1;
    fStack12 = *param_2;
    fStack8 = param_2[1];
    fStack4 = param_2[2];
    pfVar2 = (float *)proc_7F078444();
    proc_7F0583D8(pfVar2,&fStack12);
    fVar5 = flt_80052CF4;
    *(float *)(puVar4 + 1) = (float)puVar4[1] + flt_80052CF4 * fStack12;
    *(float *)(puVar4 + 3) = (float)puVar4[3] + fVar5 * fStack4;
    uVar3 = get_curplayer_positiondata();
    puVar4[0x22] = uVar3;
    puVar4[0x24] = 1;
  }
  return;
}



void proc_7F04BFD0(int param_1,undefined4 param_2)

{
  int iVar1;
  int iVar2;
  
  if (*(int *)(param_1 + 0x1c) != 0) {
    iVar1 = *(int *)(param_1 + 4);
    proc_7F03FDA8(param_1);
    if (((*(uint *)(iVar1 + 100) & 0x40) == 0) ||
       (iVar2 = *(int *)(*(int *)(iVar1 + 0x6c) + 0x44), iVar2 == 0)) {
      if ((*(uint *)(iVar1 + 100) & 0x80) != 0) {
        *(undefined4 *)(*(int *)(iVar1 + 0x6c) + 0xb8) = param_2;
      }
    }
    else {
      *(undefined4 *)(iVar2 + 0xb8) = param_2;
    }
  }
  return;
}



void proc_7F04C044(int param_1)

{
  char *pcVar1;
  int iVar2;
  int iVar3;
  
  pcVar1 = *(char **)(param_1 + 0x1c);
  if (pcVar1 != NULL) {
    iVar2 = *(int *)(param_1 + 4);
    iVar3 = *(int *)(iVar2 + 0x14);
    proc_7F03A5D0(param_1);
    *(undefined4 *)(iVar3 + 0x1c) = 0;
    *(uint *)(iVar2 + 100) = *(uint *)(iVar2 + 100) & 0xfff7ffff;
    if (((*pcVar1 == '\x03') || (*pcVar1 == '\x06')) && (iVar2 = *(int *)(pcVar1 + 4), iVar2 != 0))
    {
      if (param_1 == *(int *)(iVar2 + 0x1d8)) {
        *(undefined4 *)(iVar2 + 0x1d8) = 0;
      }
      else {
        if (param_1 == *(int *)(iVar2 + 0x160)) {
          proc_7F02D118(iVar2,0,0);
          *(undefined4 *)(iVar2 + 0x160) = 0;
        }
        else {
          if (param_1 == *(int *)(iVar2 + 0x164)) {
            proc_7F02D118(iVar2,1,0);
            *(undefined4 *)(iVar2 + 0x164) = 0;
          }
        }
      }
    }
  }
  return;
}



undefined8 proc_7F04C130(int param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  uint *puVar2;
  char *pcVar3;
  undefined8 uVar4;
  u32 uVar6;
  int iVar7;
  float *pfVar8;
  float *pfVar9;
  longlong lVar5;
  undefined8 extraout_a0;
  uint extraout_a1_lo;
  uint extraout_a1_lo_00;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  uint uVar10;
  char *pcVar11;
  float __x;
  float __x_00;
  float fVar12;
  float fVar13;
  float fStack152;
  float fStack148;
  float fStack144;
  float fStack140;
  float fStack136;
  float fStack132;
  float fStack128;
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack104;
  undefined4 uStack88;
  f32 afStack80 [12];
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  int iStack16;
  char *pcStack4;
  
  pcStack4 = *(char **)(param_1 + 0x1c);
  iVar1 = *(int *)(param_1 + 4);
  if ((*(uint *)(iVar1 + 100) & 0x40) != 0) {
    uVar10 = (*(uint **)(iVar1 + 0x6c))[0x11];
    if (uVar10 != 0) {
      proc_7F03FE88(*(uint **)(iVar1 + 0x6c));
      *(uint *)(iVar1 + 0x6c) = uVar10;
      uVar10 = *(uint *)(iVar1 + 100) & 0xffffffbf;
      *(uint *)(iVar1 + 100) = uVar10;
      *(uint *)(iVar1 + 100) = uVar10 | 0x80;
      param_2 = extraout_a1_lo;
      param_3 = extraout_a2_lo;
      param_4 = extraout_a3_lo;
    }
  }
  pcVar11 = pcStack4;
  uVar4 = 0;
  if ((pcStack4 != NULL) && ((*(uint *)(iVar1 + 100) & 0x80) != 0)) {
    iStack16 = *(int *)(iVar1 + 0x14);
    puVar2 = *(uint **)(iVar1 + 0x6c);
    uVar10 = puVar2[0x2e];
    *puVar2 = *puVar2 | 1;
    *(char **)(puVar2 + 0x22) = pcStack4;
    if ((uVar10 == 2) && (*pcStack4 == '\x03')) {
      fStack112 = DAT_8003201c;
      fStack108 = (float)DAT_80032020;
      fStack104 = (float)DAT_80032024;
      getsubroty(*(int *)(*(int *)(pcStack4 + 4) + 0x1c),param_2,param_3,param_4);
      fStack116 = __x;
      __x_00 = sinf(__x);
      *(float *)(puVar2 + 1) = __x_00 * flt_80052CF8;
      uVar6 = get_random_value();
      __x_00 = (float)uVar6;
      if ((int)uVar6 < 0) {
        __x_00 = __x_00 + 4294967296.00000000;
      }
      *(float *)(puVar2 + 2) = -(__x_00 * 0.00000000) * flt_80052CFC * 0.50000000;
      __x_00 = cosf(fStack116);
      *(float *)(puVar2 + 3) = __x_00 * flt_80052D00;
      uVar6 = get_random_value();
      __x_00 = (float)uVar6;
      if ((int)uVar6 < 0) {
        __x_00 = __x_00 + 4294967296.00000000;
      }
      fStack112 = __x_00 * 0.00000000 * flt_80052D04 * 0.00781250 - flt_80052D08;
      uVar6 = get_random_value();
      __x_00 = (float)uVar6;
      if ((int)uVar6 < 0) {
        __x_00 = __x_00 + 4294967296.00000000;
      }
      fStack108 = __x_00 * 0.00000000 * flt_80052D0C * 0.00781250 - flt_80052D10;
      uVar6 = get_random_value();
      __x_00 = (float)uVar6;
      if ((int)uVar6 < 0) {
        __x_00 = __x_00 + 4294967296.00000000;
      }
      fStack104 = __x_00 * 0.00000000 * flt_80052D14 * 0.00781250 - flt_80052D18;
      proc_7F058714(&fStack112,(float *)(puVar2 + 8));
    }
    else {
      if ((uVar10 == 3) && (*pcStack4 == '\x03')) {
        fStack136 = DAT_80032028;
        fStack132 = (float)DAT_8003202c;
        fStack128 = (float)DAT_80032030;
        getsubroty(*(int *)(*(int *)(pcStack4 + 4) + 0x1c),param_2,param_3,param_4);
        fStack140 = __x;
        __x_00 = sinf(__x);
        *(float *)(puVar2 + 1) = __x_00 * flt_80052D1C;
        *(float *)(puVar2 + 2) = flt_80052D20;
        __x_00 = cosf(fStack140);
        *(float *)(puVar2 + 3) = __x_00 * flt_80052D24;
        uVar6 = get_random_value();
        __x_00 = (float)uVar6;
        if ((int)uVar6 < 0) {
          __x_00 = __x_00 + 4294967296.00000000;
        }
        fStack136 = __x_00 * 0.00000000 * flt_80052D28 * 0.00781250 - flt_80052D2C;
        uVar6 = get_random_value();
        __x_00 = (float)uVar6;
        if ((int)uVar6 < 0) {
          __x_00 = __x_00 + 4294967296.00000000;
        }
        fStack132 = __x_00 * 0.00000000 * flt_80052D30 * 0.00781250 - flt_80052D34;
        uVar6 = get_random_value();
        __x_00 = (float)uVar6;
        if ((int)uVar6 < 0) {
          __x_00 = __x_00 + 4294967296.00000000;
        }
        fStack128 = __x_00 * 0.00000000 * flt_80052D38 * 0.00781250 - flt_80052D3C;
        proc_7F058714(&fStack136,(float *)(puVar2 + 8));
        *puVar2 = *puVar2 | 0x40;
      }
      else {
        if (uVar10 == 4) {
          fStack152 = DAT_80032034;
          fStack148 = (float)DAT_80032038;
          fStack144 = (float)DAT_8003203c;
          iVar7 = get_curplayer_positiondata();
          __x_00 = convert_angle_using_inverse
                             ((f32)(*(float *)(pcStack4 + 8) - *(float *)(iVar7 + 8)),
                              (f32)(*(float *)(pcStack4 + 0x10) - *(float *)(iVar7 + 0x10)));
          uVar6 = get_random_value();
          fVar12 = sinf(__x_00);
          fVar13 = (float)uVar6;
          if ((int)uVar6 < 0) {
            fVar13 = fVar13 + 4294967296.00000000;
          }
          fVar13 = fVar13 * 0.00000000 * flt_80052D40;
          *(float *)(puVar2 + 1) = fVar12 * (fVar13 + fVar13 + flt_80052D44);
          uVar6 = get_random_value();
          fVar12 = (float)uVar6;
          if ((int)uVar6 < 0) {
            fVar12 = fVar12 + 4294967296.00000000;
          }
          fVar12 = fVar12 * 0.00000000 * flt_80052D48;
          *(float *)(puVar2 + 2) = fVar12 + fVar12;
          uVar6 = get_random_value();
          __x_00 = cosf(__x_00);
          fVar12 = (float)uVar6;
          if ((int)uVar6 < 0) {
            fVar12 = fVar12 + 4294967296.00000000;
          }
          fVar12 = fVar12 * 0.00000000 * flt_80052D4C;
          *(float *)(puVar2 + 3) = __x_00 * (fVar12 + fVar12 + flt_80052D50);
          uVar6 = get_random_value();
          __x_00 = (float)uVar6;
          if ((int)uVar6 < 0) {
            __x_00 = __x_00 + 4294967296.00000000;
          }
          fStack152 = __x_00 * 0.00000000 * flt_80052D54 * 0.03125000 - flt_80052D58;
          uVar6 = get_random_value();
          __x_00 = (float)uVar6;
          if ((int)uVar6 < 0) {
            __x_00 = __x_00 + 4294967296.00000000;
          }
          fStack148 = __x_00 * 0.00000000 * flt_80052D5C * 0.03125000 - flt_80052D60;
          uVar6 = get_random_value();
          __x_00 = (float)uVar6;
          if ((int)uVar6 < 0) {
            __x_00 = __x_00 + 4294967296.00000000;
          }
          fStack144 = __x_00 * 0.00000000 * flt_80052D64 * 0.03125000 - flt_80052D68;
          proc_7F058714(&fStack152,(float *)(puVar2 + 8));
        }
        else {
          proc_7F057C14((float *)(puVar2 + 1),(float *)(puVar2 + 8));
        }
      }
    }
    if (*(int *)(pcStack4 + 0x1c) == 0) {
      uStack88 = *(undefined4 *)(pcVar11 + 0x14);
    }
    else {
      pcVar3 = *(char **)(pcVar11 + 0x1c);
      do {
        pcVar11 = pcVar3;
        pcVar3 = *(char **)(pcVar11 + 0x1c);
      } while (*(char **)(pcVar11 + 0x1c) != NULL);
      uStack88 = *(undefined4 *)(pcVar11 + 0x14);
    }
    if ((*(byte *)(param_1 + 1) & 2) == 0) {
      *(undefined4 *)(param_1 + 0x14) = *(undefined4 *)(pcVar11 + 0x14);
      proc_7F057FD0(afStack80);
      matrix_multiply_A1_by_F12(*(float *)(iStack16 + 0x14),extraout_a0,(float *)afStack80);
      proc_7F058998((undefined4 *)(pcVar11 + 8),(int)afStack80);
    }
    else {
      proc_7F041044(iVar1);
      pfVar8 = (float *)getsubmatrix(iStack16,extraout_a1_lo_00,extraout_a2_lo_00,extraout_a3_lo_00)
      ;
      pfVar9 = (float *)proc_7F078444();
      proc_7F05818C(pfVar9,pfVar8,(int)afStack80);
      proc_7F03D058(pcVar11,0);
      lVar5 = proc_7F0B0E24();
      if ((lVar5 == 0) || (lVar5 = proc_7F0B18B8(), -1 < lVar5)) {
        *(undefined4 *)(param_1 + 0x14) = *(undefined4 *)(pcVar11 + 0x14);
        uStack32 = *(undefined4 *)(pcVar11 + 8);
        uStack24 = *(undefined4 *)(pcVar11 + 0x10);
      }
      else {
        *(undefined4 *)(param_1 + 0x14) = uStack88;
      }
      proc_7F03D058(pcVar11,1);
      *(float *)(param_1 + 0x18) = -pfVar8[0xe];
    }
    proc_7F04C044(param_1);
    set_current_objposdata_plus_0x28((object_standard *)param_1);
    set_stateflag_0x04_for_posdata(param_1);
    *(undefined4 *)(param_1 + 8) = uStack32;
    *(undefined4 *)(iVar1 + 0x58) = uStack32;
    *(undefined4 *)(param_1 + 0xc) = uStack28;
    *(undefined4 *)(iVar1 + 0x5c) = uStack28;
    *(undefined4 *)(param_1 + 0x10) = uStack24;
    *(undefined4 *)(iVar1 + 0x60) = uStack24;
    uStack32 = 0;
    uStack28 = 0;
    uStack24 = 0;
    proc_7F058020(afStack80,(undefined4 *)(iVar1 + 0x18));
    proc_7F0402B4(*(int *)(iVar1 + 0x10),(byte *)(iVar1 + 0x7c));
    *(undefined *)(iVar1 + 0x78) = *(undefined *)(iVar1 + 0x7c);
    *(undefined *)(iVar1 + 0x79) = *(undefined *)(iVar1 + 0x7d);
    *(undefined *)(iVar1 + 0x7a) = *(undefined *)(iVar1 + 0x7e);
    *(undefined *)(iVar1 + 0x7b) = *(undefined *)(iVar1 + 0x7f);
    proc_7F056CA0(iVar1);
    uVar4 = 1;
  }
  return uVar4;
}



void proc_7F04CA44(int param_1,undefined8 param_2)

{
  uint uVar1;
  u32 uVar2;
  uint uVar3;
  uint *puVar4;
  float fVar5;
  float fStack12;
  float fStack8;
  float fStack4;
  
  uVar1 = *(uint *)(param_1 + 100);
  uVar3 = uVar1 & 0xfff9ffff;
  *(uint *)(param_1 + 100) = uVar3;
  *(uint *)(param_1 + 100) = uVar3 | (int)param_2 << 0x11;
  if ((((*(uint *)(param_1 + 0xc) & 0x100) == 0) && ((*(uint *)(param_1 + 8) & 1) != 0)) &&
     ((uVar1 & 0xc0) == 0)) {
    fStack12 = DAT_80032040;
    fStack8 = DAT_80032044;
    puVar4 = NULL;
    fStack4 = DAT_80032048;
    proc_7F03FDA8(*(int *)(param_1 + 0x10));
    if ((*(uint *)(param_1 + 100) & 0x80) != 0) {
      puVar4 = *(uint **)(param_1 + 0x6c);
    }
    if (puVar4 != NULL) {
      uVar2 = get_random_value();
      fVar5 = (float)uVar2;
      if ((int)uVar2 < 0) {
        fVar5 = fVar5 + 4294967296.00000000;
      }
      *(float *)(puVar4 + 1) = fVar5 * 0.00000000 * flt_80052D6C - flt_80052D70;
      uVar2 = get_random_value();
      fVar5 = (float)uVar2;
      if ((int)uVar2 < 0) {
        fVar5 = fVar5 + 4294967296.00000000;
      }
      fVar5 = fVar5 * 0.00000000 * flt_80052D74;
      *(float *)(puVar4 + 2) = fVar5 + fVar5 + flt_80052D74;
      uVar2 = get_random_value();
      fVar5 = (float)uVar2;
      if ((int)uVar2 < 0) {
        fVar5 = fVar5 + 4294967296.00000000;
      }
      *(float *)(puVar4 + 3) = fVar5 * 0.00000000 * flt_80052D78 - flt_80052D7C;
      if ((*(uint *)(param_1 + 0xc) & 0x200) == 0) {
        uVar2 = get_random_value();
        fVar5 = (float)uVar2;
        if ((int)uVar2 < 0) {
          fVar5 = fVar5 + 4294967296.00000000;
        }
        fStack12 = (fVar5 * 0.00000000 * flt_80052D80) / 320.00000000 - flt_80052D84;
        uVar2 = get_random_value();
        fVar5 = (float)uVar2;
        if ((int)uVar2 < 0) {
          fVar5 = fVar5 + 4294967296.00000000;
        }
        fStack8 = (fVar5 * 0.00000000 * flt_80052D88) / 320.00000000 - flt_80052D8C;
        uVar2 = get_random_value();
        fVar5 = (float)uVar2;
        if ((int)uVar2 < 0) {
          fVar5 = fVar5 + 4294967296.00000000;
        }
        fStack4 = (fVar5 * 0.00000000 * flt_80052D90) / 320.00000000 - flt_80052D94;
      }
      proc_7F058714(&fStack12,(float *)(puVar4 + 8));
      *puVar4 = *puVar4 | 1;
      *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & 0xfffffeff;
      *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) & 0xffff7fff;
    }
  }
  return;
}



void proc_7F04CD04(char *param_1,undefined8 param_2)

{
  char cVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  longlong lVar5;
  char *pcVar6;
  uint uStack20;
  float *apfStack16 [4];
  
  iVar3 = *(int *)(param_1 + 4);
  cVar1 = *(char *)(*(int *)(param_1 + 0x14) + 3);
  proc_7F03CCB0(param_1,(int **)apfStack16,&uStack20);
  if (((int)uStack20 < 1) || (pcVar6 = (char *)get_ptr_obj_pos_list_current_entry(), pcVar6 == NULL)
     ) {
    return;
  }
  cVar2 = *pcVar6;
  do {
    if (cVar2 == '\x01') {
      iVar4 = *(int *)(pcVar6 + 0x14);
LAB_7f04cd80:
      if (cVar1 == *(char *)(iVar4 + 3)) {
        iVar4 = *(int *)(pcVar6 + 4);
        if (*(float *)(iVar3 + 0x5c) < *(float *)(iVar4 + 0x5c)) {
          if ((*(uint *)(iVar4 + 100) & 0x8000) == 0) {
            pcVar6 = *(char **)(pcVar6 + 0x24);
          }
          else {
            lVar5 = proc_7F03CCD8((float *)(iVar4 + 0x58),apfStack16[0],uStack20);
            if (lVar5 != 0) {
              proc_7F04CA44(iVar4,param_2);
            }
            pcVar6 = *(char **)(pcVar6 + 0x24);
          }
        }
        else {
          pcVar6 = *(char **)(pcVar6 + 0x24);
        }
      }
      else {
        pcVar6 = *(char **)(pcVar6 + 0x24);
      }
    }
    else {
      if (cVar2 == '\x04') {
        iVar4 = *(int *)(pcVar6 + 0x14);
        goto LAB_7f04cd80;
      }
      pcVar6 = *(char **)(pcVar6 + 0x24);
    }
    if (pcVar6 == NULL) {
      return;
    }
    cVar2 = *pcVar6;
  } while( true );
}



void object_explosion_related(int param_1,float *param_2,int param_3)

{
  byte bVar1;
  short sVar2;
  char *pcVar3;
  int iVar5;
  longlong lVar4;
  u32 uVar6;
  uint uVar7;
  char *pcVar8;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  undefined uVar9;
  int iStack16;
  short sStack10;
  char *pcStack4;
  
  if (*(float *)(param_1 + 0x70) <= *(float *)(param_1 + 0x74)) {
    iVar5 = do_something_if_object_destroyed(param_1);
    if (iVar5 == 0) {
      return;
    }
    sVar2 = *(short *)(param_1 + 4);
  }
  else {
    sVar2 = *(short *)(param_1 + 4);
  }
  pcStack4 = *(char **)(param_1 + 0x10);
  sStack10 = *(short *)((int)object_explosion_details + (int)sVar2 * 0xe);
  if (*(int *)(pcStack4 + 0x1c) == 0) {
    iStack16 = *(int *)(pcStack4 + 0x14);
    pcVar8 = pcStack4;
  }
  else {
    pcVar3 = *(char **)(pcStack4 + 0x1c);
    do {
      pcVar8 = pcVar3;
      pcVar3 = *(char **)(pcVar8 + 0x1c);
    } while (*(char **)(pcVar8 + 0x1c) != NULL);
    iStack16 = *(int *)(pcVar8 + 0x14);
  }
  iVar5 = do_something_if_object_destroyed(param_1);
  uVar9 = (undefined)param_3;
  if (iVar5 != 0) {
    uVar7 = proc_7F03FF60(param_1);
    if (((uVar7 & 3) == 0) && (proc_7F04B610(param_1,((int)uVar7 >> 2) + 1), iStack16 != 0)) {
      lVar4 = (longlong)(int)param_2;
      if ((pcVar8[1] & 8U) == 0) {
        proc_7F0B0BE4(&iStack16,extraout_f12_00,extraout_f14_00,*(float *)(pcVar8 + 8),
                      *(float *)(pcVar8 + 0x10));
        if (lVar4 != 0) {
          proc_7F09C250((int)pcStack4,param_2,iStack16,0x10,
                        (uint)((*(uint *)(param_1 + 8) & 0xe) == 0),uVar9,pcVar8 + 0x2c,0);
          goto LAB_7f04d0dc;
        }
        iVar5 = *(int *)(pcVar8 + 0x14);
      }
      else {
        iVar5 = *(int *)(pcVar8 + 0x14);
      }
      proc_7F09C250((int)pcStack4,param_2,iVar5,0x10,0,uVar9,pcVar8 + 0x2c,1);
    }
LAB_7f04d0dc:
    iVar5 = do_something_if_object_destroyed(param_1);
    if ((0 < iVar5) && (bVar1 = *(byte *)(param_1 + 2), (bVar1 & 4) != 0)) {
      if ((*(uint *)(param_1 + 100) & 0x1000) == 0) {
        *(byte *)(param_1 + 2) = bVar1 & 0xef;
      }
      else {
        *(byte *)(param_1 + 2) = bVar1 | 0x10;
      }
      *(undefined2 *)(pcStack4 + 2) = 0x4b0;
    }
    if ((int)uVar7 < 0xc) {
      return;
    }
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 0x1000;
    *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & 0xfffffeff;
    return;
  }
  *(byte *)(param_1 + 2) = *(byte *)(param_1 + 2) | 0x80;
  *(undefined4 *)(param_1 + 0x70) = 0;
  if (iStack16 == 0) {
    uVar7 = *(uint *)(param_1 + 0xc);
  }
  else {
    lVar4 = (longlong)(int)param_2;
    if ((pcVar8[1] & 8U) == 0) {
      proc_7F0B0BE4(&iStack16,extraout_f12,extraout_f14,*(float *)(pcVar8 + 8),
                    *(float *)(pcVar8 + 0x10));
      if (lVar4 != 0) {
        proc_7F09C250((int)pcStack4,param_2,iStack16,(int)sStack10,
                      (uint)((*(uint *)(param_1 + 8) & 0xe) == 0),uVar9,pcVar8 + 0x2c,0);
        uVar7 = *(uint *)(param_1 + 0xc);
        goto LAB_7f04cf7c;
      }
      iVar5 = *(int *)(pcVar8 + 0x14);
    }
    else {
      iVar5 = *(int *)(pcVar8 + 0x14);
    }
    proc_7F09C250((int)pcStack4,param_2,iVar5,(int)sStack10,0,uVar9,pcVar8 + 0x2c,1);
    uVar7 = *(uint *)(param_1 + 0xc);
  }
LAB_7f04cf7c:
  if ((uVar7 & 0x2000) == 0) {
    proc_7F04B610(param_1,1);
    if (pcVar8 == pcStack4) {
      proc_7F04CD04(pcStack4,(longlong)param_3);
      uVar7 = *(uint *)(param_1 + 100);
      if ((uVar7 & 0x8000) != 0) {
        uVar6 = get_random_value();
        if (uVar6 % 3 != 0) {
          return;
        }
        uVar7 = *(uint *)(param_1 + 100);
      }
      *(uint *)(param_1 + 100) = uVar7 | 0x10000;
      proc_7F04CA44(param_1,(longlong)param_3);
    }
  }
  else {
    *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 4;
  }
  return;
}



undefined4
proc_7F04D16C(float *param_1,float *param_2,float *param_3,uint *param_4,uint *param_5,int param_6,
             float *param_7)

{
  char cVar1;
  short sVar2;
  longlong lVar3;
  BOOL BVar4;
  uint *puVar5;
  uint *puVar6;
  short *psVar7;
  int *piVar8;
  undefined2 uVar9;
  uint *puVar10;
  int iVar11;
  uint uVar12;
  float fVar13;
  float fVar14;
  float fStack224;
  undefined4 uStack220;
  undefined4 uStack216;
  int iStack200;
  int iStack196;
  int iStack192;
  int iStack188;
  int iStack184;
  int iStack180;
  uint uStack172;
  uint uStack168;
  uint uStack164;
  uint auStack160 [5];
  float fStack140;
  undefined4 uStack136;
  undefined4 uStack132;
  int iStack116;
  int iStack112;
  int iStack108;
  int iStack104;
  int iStack100;
  int iStack96;
  int iStack88;
  int iStack84;
  int iStack80;
  int aiStack76 [3];
  undefined4 uStack64;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  int iStack4;
  
  uStack64 = 0;
  fVar14 = 4294967296.00000000;
  puVar10 = param_4;
  do {
    while( true ) {
      while( true ) {
        while (puVar6 = param_5, cVar1 = *(char *)puVar10, cVar1 == -0x48) {
          if (param_5 == NULL) {
            return uStack64;
          }
          param_5 = NULL;
          param_4 = puVar6;
          puVar10 = puVar6;
        }
        if (cVar1 != '\x04') break;
        iStack4 = param_6 + (puVar10[1] & 0xffffff) +
                  ((uint)*(byte *)((int)puVar10 + 1) & 0xf) * -0x10;
        puVar10 = puVar10 + 2;
      }
      if (cVar1 == -0x41) break;
      if (cVar1 == -0x4f) {
        iVar11 = 0;
        do {
          iStack188 = dword_80032070;
          iStack184 = DAT_80032074;
          iStack180 = DAT_80032078;
          iStack200 = DAT_8003207c;
          iStack196 = DAT_80032080;
          iStack192 = DAT_80032084;
          if (iVar11 == 0) {
            uStack172 = puVar10[1] & 0xf;
            uStack168 = (uint)(*(byte *)((int)puVar10 + 7) >> 4);
            uStack164 = *puVar10 & 0xf;
          }
          else {
            if (iVar11 == 1) {
              uStack172 = (uint)*(byte *)((int)puVar10 + 6) & 0xf;
              uStack168 = (uint)(*(ushort *)((int)puVar10 + 6) >> 0xc);
              uStack164 = (uint)(*(byte *)((int)puVar10 + 3) >> 4);
            }
            else {
              if (iVar11 == 2) {
                uStack172 = (uint)*(ushort *)(puVar10 + 1) & 0xf;
                uStack168 = (uint)(*(byte *)((int)puVar10 + 5) >> 4);
                uStack164 = (uint)*(byte *)((int)puVar10 + 2) & 0xf;
              }
              else {
                uStack172 = (uint)*(byte *)(puVar10 + 1) & 0xf;
                uStack168 = puVar10[1] >> 0x1c;
                uStack164 = (uint)(*(ushort *)((int)puVar10 + 2) >> 0xc);
              }
            }
          }
          puVar6 = &uStack172;
          uVar12 = uStack172;
          while( true ) {
            puVar6 = puVar6 + 1;
            psVar7 = (short *)(iStack4 + uVar12 * 0x10);
            lVar3 = (longlong)*psVar7;
            if (lVar3 < (longlong)iStack188) {
              iStack188 = (int)*psVar7;
              lVar3 = (longlong)*psVar7;
            }
            if ((longlong)iStack200 < lVar3) {
              iStack200 = (int)lVar3;
              sVar2 = psVar7[1];
            }
            else {
              sVar2 = psVar7[1];
            }
            lVar3 = (longlong)sVar2;
            if (lVar3 < (longlong)iStack184) {
              iStack184 = (int)sVar2;
              lVar3 = (longlong)psVar7[1];
            }
            if ((longlong)iStack196 < lVar3) {
              iStack196 = (int)lVar3;
              sVar2 = psVar7[2];
            }
            else {
              sVar2 = psVar7[2];
            }
            lVar3 = (longlong)sVar2;
            if (lVar3 < (longlong)iStack180) {
              iStack180 = (int)sVar2;
              lVar3 = (longlong)psVar7[2];
            }
            if ((longlong)iStack192 < lVar3) {
              iStack192 = (int)lVar3;
            }
            if (puVar6 == auStack160) break;
            uVar12 = *puVar6;
          }
          BVar4 = proc_7F0B6CEC(param_1,param_3,&iStack188,&iStack200);
          if (BVar4 != FALSE) {
            fStack224 = DAT_80032088;
            uStack220 = DAT_8003208c;
            uStack216 = DAT_80032090;
            lVar3 = proc_7F092890((short *)(iStack4 + uStack172 * 0x10),
                                  (short *)(iStack4 + uStack168 * 0x10),
                                  (short *)(iStack4 + uStack164 * 0x10),&fStack224,param_1,param_2,
                                  param_3,&fStack52);
            if (lVar3 != 0) {
              puVar6 = puVar10;
              if ((*(char *)puVar10 != -3) && (puVar6 = puVar10, param_4 < puVar10)) {
                cVar1 = *(char *)(puVar10 + -2);
                puVar5 = puVar10;
                while( true ) {
                  puVar6 = puVar5 + -2;
                  if ((cVar1 == -3) || (puVar6 <= param_4)) break;
                  cVar1 = *(char *)(puVar5 + -4);
                  puVar5 = puVar6;
                }
              }
              if (puVar6 == param_4) {
                uVar9 = 0xffff;
              }
              else {
                uVar9 = *(undefined2 *)(puVar6[1] - 8 | 0x80000000);
              }
              fVar13 = (float)((int)fStack52 - (int)*param_1) *
                       (float)((int)fStack52 - (int)*param_1) +
                       (float)((int)fStack48 - (int)param_1[1]) *
                       (float)((int)fStack48 - (int)param_1[1]) +
                       (float)((int)fStack44 - (int)param_1[2]) *
                       (float)((int)fStack44 - (int)param_1[2]);
              if (fVar13 < fVar14) {
                *param_7 = fStack52;
                param_7[1] = fStack48;
                param_7[2] = fStack44;
                param_7[3] = fStack40;
                param_7[4] = fStack36;
                param_7[5] = fStack32;
                *(uint *)(param_7 + 6) = uStack172 * 0x10 + iStack4;
                *(uint *)(param_7 + 7) = uStack168 * 0x10 + iStack4;
                *(undefined2 *)((int)param_7 + 0x2a) = uVar9;
                *(uint **)(param_7 + 9) = puVar10;
                *(uint *)(param_7 + 8) = uStack164 * 0x10 + iStack4;
                *(short *)(param_7 + 10) = (short)iVar11 + 1;
                uStack64 = 1;
                fVar14 = fVar13;
              }
            }
          }
          iVar11 += 1;
        } while (iVar11 != 4);
      }
LAB_7f04d970:
      puVar10 = puVar10 + 2;
    }
    iStack104 = dword_8003204C;
    iStack100 = DAT_80032050;
    iStack96 = DAT_80032054;
    iStack116 = DAT_80032058;
    iStack112 = DAT_8003205c;
    iStack108 = DAT_80032060;
    piVar8 = &iStack88;
    iStack88 = (int)(uint)*(byte *)((int)puVar10 + 5) / 10;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && ((ulonglong)*(byte *)((int)puVar10 + 5) == 0xffffffff80000000)) {
      trap(0x1800);
    }
    iStack84 = (int)(uint)*(byte *)((int)puVar10 + 6) / 10;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && ((ulonglong)*(byte *)((int)puVar10 + 6) == 0xffffffff80000000)) {
      trap(0x1800);
    }
    iStack80 = (int)(uint)*(byte *)((int)puVar10 + 7) / 10;
    if (false) {
      trap(0x1c00);
    }
    iVar11 = iStack88;
    if ((false) && (iVar11 = iStack88, (ulonglong)*(byte *)((int)puVar10 + 7) == 0xffffffff80000000)
       ) {
      trap(0x1800);
      iVar11 = iStack88;
    }
    while( true ) {
      piVar8 = piVar8 + 1;
      psVar7 = (short *)(iStack4 + iVar11 * 0x10);
      lVar3 = (longlong)*psVar7;
      if (lVar3 < (longlong)iStack104) {
        iStack104 = (int)*psVar7;
        lVar3 = (longlong)*psVar7;
      }
      if ((longlong)iStack116 < lVar3) {
        iStack116 = (int)lVar3;
        sVar2 = psVar7[1];
      }
      else {
        sVar2 = psVar7[1];
      }
      lVar3 = (longlong)sVar2;
      if (lVar3 < (longlong)iStack100) {
        iStack100 = (int)sVar2;
        lVar3 = (longlong)psVar7[1];
      }
      if ((longlong)iStack112 < lVar3) {
        iStack112 = (int)lVar3;
        sVar2 = psVar7[2];
      }
      else {
        sVar2 = psVar7[2];
      }
      lVar3 = (longlong)sVar2;
      if (lVar3 < (longlong)iStack96) {
        iStack96 = (int)sVar2;
        lVar3 = (longlong)psVar7[2];
      }
      if ((longlong)iStack108 < lVar3) {
        iStack108 = (int)lVar3;
      }
      if (piVar8 == aiStack76) break;
      iVar11 = *piVar8;
    }
    BVar4 = proc_7F0B6CEC(param_1,param_3,&iStack104,&iStack116);
    if (BVar4 == FALSE) goto LAB_7f04d970;
    fStack140 = DAT_80032064;
    uStack136 = DAT_80032068;
    uStack132 = DAT_8003206c;
    lVar3 = proc_7F092890((short *)(iStack4 + iStack88 * 0x10),(short *)(iStack4 + iStack84 * 0x10),
                          (short *)(iStack4 + iStack80 * 0x10),&fStack140,param_1,param_2,param_3,
                          &fStack52);
    if (lVar3 == 0) goto LAB_7f04d970;
    puVar6 = puVar10;
    if ((*(char *)puVar10 != -3) && (puVar6 = puVar10, param_4 < puVar10)) {
      cVar1 = *(char *)(puVar10 + -2);
      puVar5 = puVar10;
      while( true ) {
        puVar6 = puVar5 + -2;
        if ((cVar1 == -3) || (puVar6 <= param_4)) break;
        cVar1 = *(char *)(puVar5 + -4);
        puVar5 = puVar6;
      }
    }
    if (puVar6 == param_4) {
      uVar9 = 0xffff;
    }
    else {
      uVar9 = *(undefined2 *)(puVar6[1] - 8 | 0x80000000);
    }
    fVar13 = (float)((int)fStack52 - (int)*param_1) * (float)((int)fStack52 - (int)*param_1) +
             (float)((int)fStack48 - (int)param_1[1]) * (float)((int)fStack48 - (int)param_1[1]) +
             (float)((int)fStack44 - (int)param_1[2]) * (float)((int)fStack44 - (int)param_1[2]);
    if (fVar14 <= fVar13) goto LAB_7f04d970;
    *param_7 = fStack52;
    param_7[1] = fStack48;
    param_7[2] = fStack44;
    param_7[3] = fStack40;
    param_7[4] = fStack36;
    param_7[5] = fStack32;
    *(int *)(param_7 + 6) = iStack88 * 0x10 + iStack4;
    *(int *)(param_7 + 7) = iStack84 * 0x10 + iStack4;
    *(undefined2 *)((int)param_7 + 0x2a) = uVar9;
    *(uint **)(param_7 + 9) = puVar10;
    *(int *)(param_7 + 8) = iStack80 * 0x10 + iStack4;
    *(undefined2 *)(param_7 + 10) = 0;
    uStack64 = 1;
    fVar14 = fVar13;
    puVar10 = puVar10 + 2;
  } while( true );
}



int proc_7F04D9B0(int param_1,ushort *param_2,float *param_3,float *param_4,float *param_5,
                 int *param_6,ushort **param_7)

{
  ushort uVar1;
  uint **ppuVar2;
  float fVar3;
  uint *puVar4;
  short sVar6;
  int iVar5;
  ushort *partdesc;
  ushort *puVar7;
  float *pfVar8;
  uint *puVar9;
  uint *puVar10;
  uint *puVar11;
  uint uVar12;
  float afStack148 [26];
  int iStack44;
  float *pfStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fVar3 = flt_80052D98;
  pfStack40 = NULL;
  iStack44 = 0;
  uVar12 = 0;
  if (param_2 == NULL) {
    return 0;
  }
  uVar1 = *param_2;
  partdesc = param_2;
  do {
    puVar10 = NULL;
    puVar11 = NULL;
    if (true) {
      switch((uint)uVar1 & 0xff) {
      case 4:
        puVar9 = *(uint **)(partdesc + 2);
        if (*puVar9 != 0) {
          uVar12 = puVar9[2];
          puVar10 = (uint *)(uVar12 + (*puVar9 & 0xffffff));
          if (puVar9[1] != 0) {
            puVar11 = (uint *)(uVar12 + (puVar9[1] & 0xffffff));
          }
        }
        break;
      case 8:
        proc_7F06E970(param_1,partdesc);
        break;
      case 0x12:
        process_12_handle_switch(param_1,partdesc);
        break;
      case 0x17:
        process_17_pointer_to_head(param_1,partdesc);
        break;
      case 0x18:
        ppuVar2 = *(uint ***)(partdesc + 2);
        puVar4 = (uint *)extract_id_from_object_structure_microcode(param_1,partdesc);
        puVar9 = (uint *)puVar4[1];
        if (puVar9 != NULL) {
          if (*ppuVar2 == puVar9) {
            puVar9 = (uint *)((int)ppuVar2[7] + ((uint)*ppuVar2 & 0xffffff));
          }
          if (ppuVar2[1] != NULL) {
            puVar11 = (uint *)((int)ppuVar2[7] + ((uint)ppuVar2[1] & 0xffffff));
          }
          uVar12 = *puVar4;
          puVar10 = puVar9;
        }
      }
    }
    if (puVar10 != NULL) {
      pfVar8 = NULL;
      sVar6 = proc_7F06C570(partdesc,0);
      if (-1 < sVar6) {
        pfVar8 = (float *)(*(int *)(param_1 + 0xc) + (int)sVar6 * 0x40);
      }
      if ((pfVar8 != NULL) && (pfVar8 != pfStack40)) {
        pfStack40 = pfVar8;
        proc_7F059FB8(pfVar8,afStack148);
        fStack12 = *param_3;
        fStack8 = param_3[1];
        fStack4 = param_3[2];
        proc_7F058474(afStack148,&fStack12);
        fStack36 = *param_4;
        fStack32 = param_4[1];
        fStack28 = param_4[2];
        proc_7F0583D8(afStack148,&fStack36);
        fStack24 = fStack36 * fVar3 + fStack12;
        fStack20 = fStack32 * fVar3 + fStack8;
        fStack16 = fStack28 * fVar3 + fStack4;
      }
      iVar5 = proc_7F04D16C(&fStack12,&fStack24,&fStack36,puVar10,puVar11,uVar12,param_5);
      if (iVar5 != 0) {
        *param_6 = (int)sVar6;
        *param_7 = partdesc;
        iStack44 = 1;
      }
    }
    puVar7 = *(ushort **)(partdesc + 10);
    if (puVar7 == NULL) {
      while (puVar7 = partdesc, partdesc != NULL) {
        if (partdesc == param_2) {
          puVar7 = NULL;
          break;
        }
        puVar7 = *(ushort **)(partdesc + 6);
        if (puVar7 != NULL) break;
        partdesc = *(ushort **)(partdesc + 4);
      }
    }
    if (puVar7 == NULL) {
      return iStack44;
    }
    if (iStack44 != 0) {
      return iStack44;
    }
    uVar1 = *puVar7;
    partdesc = puVar7;
  } while( true );
}



void proc_7F04DCB4(int param_1)

{
  int iVar1;
  int iVar2;
  float extraout_f12;
  float extraout_f14;
  
  iVar1 = *(int *)(param_1 + 0x10);
  iVar2 = proc_7F040078(param_1);
  proc_7F0A0CCC(iVar1,'\0');
  proc_7F0A0CCC(iVar1,'\x01');
  proc_7F0A1DA0((float *)(param_1 + 0x58),(float *)(param_1 + 0x18),(float *)(param_1 + 0x28),
                (float *)(param_1 + 0x38),extraout_f12,extraout_f14,*(float *)(iVar2 + 4),
                *(float *)(iVar2 + 8));
  *(uint *)(param_1 + 100) = *(uint *)(param_1 + 100) | 4;
  *(byte *)(param_1 + 2) = *(byte *)(param_1 + 2) | 0x80;
  *(undefined4 *)(param_1 + 0x70) = 0;
  return;
}



void proc_7F04DD68(int param_1)

{
  undefined4 *puVar1;
  float extraout_f12;
  float extraout_f14;
  float afStack80 [4];
  float afStack64 [4];
  float afStack48 [4];
  float afStack32 [5];
  int iStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x10);
  iStack8 = *(int *)(param_1 + 0x14);
  iStack12 = *(int *)(*(int *)(*(int *)(*(int *)(iStack8 + 8) + 8) + 8) + 4);
  proc_7F0526EC(param_1,afStack80);
  proc_7F0A1DA0(afStack32,afStack80,afStack64,afStack48,extraout_f12,extraout_f14,
                *(float *)(iStack12 + 4),*(float *)(iStack12 + 8));
  proc_7F0A0CCC(iStack4,'\x01');
  puVar1 = (undefined4 *)
           extract_id_from_object_structure_microcode
                     (iStack8,*(ushort **)(*(int *)(*(int *)(iStack8 + 8) + 8) + 4));
  *puVar1 = 0;
  return;
}



void proc_7F04DE18(int param_1)

{
  int objinst;
  int iVar1;
  float *pfVar2;
  undefined4 *puVar3;
  float extraout_f12;
  float extraout_f14;
  float afStack84 [4];
  float afStack68 [4];
  float afStack52 [4];
  float afStack36 [4];
  float *pfStack20;
  int iStack16;
  int iStack4;
  
  iStack4 = *(int *)(param_1 + 0x10);
  objinst = *(int *)(param_1 + 0x14);
  if ((*(byte *)(iStack4 + 1) & 2) != 0) {
    iVar1 = *(int *)(*(int *)(objinst + 8) + 8);
    iStack16 = *(int *)(*(int *)(iVar1 + 8) + 4);
    pfStack20 = (float *)proc_7F06C660(objinst,*(ushort **)(iVar1 + 4),0);
    pfVar2 = (float *)proc_7F078444();
    proc_7F05818C(pfVar2,pfStack20,(int)afStack84);
    proc_7F0A1DA0(afStack36,afStack84,afStack68,afStack52,extraout_f12,extraout_f14,
                  *(float *)(iStack16 + 4),*(float *)(iStack16 + 8));
  }
  proc_7F0A0CCC(iStack4,'\x01');
  puVar3 = (undefined4 *)
           extract_id_from_object_structure_microcode
                     (objinst,*(ushort **)(*(int *)(*(int *)(objinst + 8) + 8) + 0xc));
  *puVar3 = 0;
  return;
}



void proc_7F04DEFC(int param_1,float param_2,undefined8 param_3,undefined8 param_4,int param_5)

{
  int param_1_00;
  int iVar1;
  uint uVar2;
  uint uVar3;
  float extraout_f12;
  int in_stack_00000010;
  
  param_1_00 = *(int *)(param_1 + 4);
  uVar3 = *(uint *)(param_1_00 + 100) & 0xfff9ffff;
  uVar2 = uVar3 | in_stack_00000010 << 0x11;
  *(uint *)(param_1_00 + 100) = uVar3;
  *(uint *)(param_1_00 + 100) = uVar2;
  if (-1 < (int)(uVar2 << 0xc)) {
    param_1_00 = *(int *)(param_1 + 0x20);
    while (param_1_00 != 0) {
      iVar1 = *(int *)(param_1_00 + 0x24);
      proc_7F04DEFC(param_1_00,param_2,(longlong)(int)param_3._4_4_,param_4,param_5);
      param_1_00 = iVar1;
      param_2 = extraout_f12;
    }
    maybe_detonate_object(*(int *)(param_1 + 4),param_2,param_3._4_4_,(int)param_4,param_5);
  }
  return;
}



undefined8 check_if_destroyable_object_type(int param_1)

{
  if (true) {
    switch(*(undefined *)(param_1 + 3)) {
    case 1:
    case 3:
    case 5:
    case 6:
    case 10:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0x24:
    case 0x27:
    case 0x28:
    case 0x29:
    case 0x2a:
    case 0x2b:
    case 0x2d:
    case 0x2f:
      return 1;
    }
  }
  return 0;
}



undefined8 check_if_collectable_object(int objdata)

{
  if (true) {
    switch(*(undefined *)(objdata + 3)) {
    case 4:
    case 7:
    case 8:
    case 0x11:
    case 0x14:
    case 0x15:
      return 1;
    }
  }
  return 0;
}



undefined8 check_if_destroyable_not_invincible(int object)

{
  undefined8 uVar1;
  longlong lVar2;
  int iVar3;
  
  if (*(char *)(object + 3) == '\x01') {
    uVar1 = 0;
  }
  else {
    lVar2 = check_if_collectable_object(object);
    if (lVar2 == 0) {
      iVar3 = *(int *)(object + 8);
    }
    else {
      if (*(char *)(object + 3) != '\x15') {
        if (*(int *)(object + 8) << 0xf < 0) {
          return 1;
        }
        return 0;
      }
      iVar3 = *(int *)(object + 8);
    }
    if (iVar3 << 0xe < 0) {
      uVar1 = 0;
    }
    else {
      uVar1 = 1;
    }
  }
  return uVar1;
}



void proc_7F04E0CC(int param_1,float param_2,float *param_3,int param_4,int param_5)

{
  if ((*(uint *)(param_1 + 0xc) & 0x4000) == 0) {
    maybe_detonate_object(param_1,(float)param_3,param_3,param_4,param_5);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f04e280) overlaps instruction at (ram,0x7f04e27c)
// 

void maybe_detonate_object(int objdata,float param_2,float *param_3,int param_4,int param_5)

{
  ushort uVar1;
  dword *pdVar2;
  int iVar3;
  int iVar5;
  longlong lVar4;
  uint uVar6;
  u32 uVar7;
  dword *pdVar8;
  undefined *puVar9;
  char cVar11;
  int iVar10;
  uint uVar12;
  dword *pdVar13;
  dword *pdVar14;
  dword *pdVar15;
  float *pfVar16;
  f32 scale;
  float fVar17;
  int in_stack_00000010;
  dword adStack164 [30];
  dword adStack44 [3];
  dword *pdStack32;
  uint uStack28;
  uint uStack24;
  
  uVar6 = *(uint *)(objdata + 100) & 0xfff9ffff;
  *(uint *)(objdata + 100) = uVar6;
  *(uint *)(objdata + 100) = uVar6 | in_stack_00000010 << 0x11;
  if ((*(char *)(objdata + 3) == '$') &&
     (iVar5 = do_something_if_object_destroyed(objdata), iVar5 == 1)) {
    return;
  }
  if (param_5 == 0) {
    lVar4 = check_if_collectable_object(objdata);
    if (lVar4 == 0) {
      if (*(int *)(objdata + 8) << 7 < 0) {
        return;
      }
    }
    else {
      if (-1 < *(int *)(objdata + 8) << 8) {
        return;
      }
    }
  }
  else {
    if ((int)(*(uint *)(objdata + 8) << 0xe) < 0) {
      return;
    }
    if (*(char *)(objdata + 3) == '\b') {
      cVar11 = *(char *)(objdata + 0x80);
      if (((((cVar11 != '\x1a') && (cVar11 != '\x1b')) && (cVar11 != '\x1d')) &&
          ((cVar11 != '\x1c' && (cVar11 != 'V')))) &&
         ((cVar11 != 'W' && ((cVar11 != '!' && (cVar11 != '\"')))))) {
        return;
      }
      *(undefined2 *)(objdata + 0x82) = 0;
      return;
    }
    if (*(char *)(objdata + 3) == '\a') {
      iVar5 = *(int *)(objdata + 0x80);
      if (((((iVar5 != 5) && (iVar5 != 6)) && (iVar5 != 7)) &&
          (((iVar5 != 8 && (iVar5 != 9)) && ((iVar5 != 0xb && ((iVar5 != 0xf && (iVar5 != 0x10))))))
          )) && (iVar5 != 0x13)) {
        return;
      }
      *(uint *)(objdata + 8) = *(uint *)(objdata + 8) | 0x10000000;
      return;
    }
    lVar4 = check_if_destroyable_not_invincible(objdata);
    if (lVar4 == 0) {
      return;
    }
  }
  iVar5 = do_something_if_object_destroyed(objdata);
  if (iVar5 == 0) {
    *(float *)(objdata + 0x70) = *(float *)(objdata + 0x70) + (float)param_3 * 250.00000000;
  }
  else {
    uVar6 = proc_7F03FF60(objdata);
    uVar12 = uVar6 & 3;
    if (((int)uVar6 < 0) && (uVar12 != 0)) {
      uVar12 -= 4;
    }
    pfVar16 = (float *)(float)(4 - uVar12);
    if (((float)(float *)(float)(4 - uVar12) < (float)param_3) ||
       (pfVar16 = (float *)0x3f800000, (float)param_3 < 1.00000000)) {
      fVar17 = *(float *)(objdata + 0x70);
    }
    else {
      fVar17 = *(float *)(objdata + 0x70);
      pfVar16 = param_3;
    }
    *(float *)(objdata + 0x70) = fVar17 + (float)pfVar16;
  }
  cVar11 = *(char *)(objdata + 3);
  if ((cVar11 == '*') || (cVar11 == '/')) {
    if (*(float *)(objdata + 0x74) <= *(float *)(objdata + 0x70)) {
      proc_7F04DCB4(objdata);
      cVar11 = *(char *)(objdata + 3);
    }
  }
  else {
    proc_7F04BFD0(*(int *)(objdata + 0x10),1);
    object_explosion_related(objdata,(float *)param_4,in_stack_00000010);
    cVar11 = *(char *)(objdata + 3);
  }
  if (cVar11 == '\x14') {
    iVar5 = do_something_if_object_destroyed(objdata);
    if (iVar5 == 1) {
      uVar7 = get_random_value();
      uVar6 = uVar7 % 0xd;
      uVar12 = uVar6;
LAB_7f04e3e8:
      iVar5 = objdata + uVar6 * 4;
      if (*(short *)(iVar5 + 0x82) == 0) {
        iVar5 = uVar6 + 1;
      }
      else {
        if (*(short *)(iVar5 + 0x80) == -1) {
          iVar5 = uVar6 + 1;
        }
        else {
          uStack28 = uVar6;
          uStack24 = uVar12;
          pdVar8 = (dword *)proc_7F0518D0();
          if (pdVar8 != NULL) {
            uVar1 = *(ushort *)(iVar5 + 0x80);
            pdVar14 = blank_07_object;
            pdVar2 = adStack164;
            do {
              pdVar13 = pdVar2;
              pdVar15 = pdVar14;
              *pdVar13 = *pdVar15;
              pdVar13[1] = pdVar15[1];
              pdVar13[2] = pdVar15[2];
              pdVar14 = pdVar15 + 3;
              pdVar2 = pdVar13 + 3;
            } while (pdVar15 + 3 != &DWORD_8003210c);
            pdVar13[3] = DWORD_8003210c;
            pdVar13[4] = pdVar15[4];
            pdVar14 = adStack164;
            pdVar2 = pdVar8;
            do {
              pdVar15 = pdVar2;
              pdVar13 = pdVar14;
              pdVar14 = pdVar13 + 3;
              *pdVar15 = *pdVar13;
              pdVar15[1] = pdVar13[1];
              pdVar15[2] = pdVar13[2];
              pdVar2 = pdVar15 + 3;
            } while (pdVar14 != adStack44);
            pdVar15[3] = *pdVar14;
            pdVar15[4] = pdVar13[4];
            *(ushort *)(pdVar8 + 1) = uVar1;
            pdVar8[0x20] = uStack28 + 1;
            if (uStack28 + 1 == 2) {
              pdVar8[0x20] = 1;
            }
            pdStack32 = pdVar8;
            puVar9 = proc_7F0406F8((int)pdVar8,(ushort **)PitemZ_entries[(uint)uVar1].header);
            if (puVar9 != NULL) {
              set_obj_instance_controller_scale(pdStack32[5],scale);
              proc_7F03A5A4(pdStack32[4],*(int *)(objdata + 0x10));
              cVar11 = *(char *)(objdata + 3);
              goto LAB_7f04e544;
            }
LAB_7f04e540:
            cVar11 = *(char *)(objdata + 3);
            goto LAB_7f04e544;
          }
          iVar5 = uStack28 + 1;
          uVar12 = uStack24;
        }
      }
      uVar6 = iVar5 % 0xd;
      if (uVar6 == uVar12) goto LAB_7f04e540;
      goto LAB_7f04e3e8;
    }
    cVar11 = *(char *)(objdata + 3);
  }
  else {
    cVar11 = *(char *)(objdata + 3);
  }
LAB_7f04e544:
  if (cVar11 == '\r') {
    *(uint *)(objdata + 8) = *(uint *)(objdata + 8) | 0x40000000;
    iVar5 = do_something_if_object_destroyed(objdata);
    if (iVar5 == 1) {
      *(uint *)(objdata + 8) = *(uint *)(objdata + 8) | 0x10000000;
    }
  }
  else {
    if (cVar11 == '\x06') {
      iVar5 = do_something_if_object_destroyed(objdata);
      if (iVar5 == 1) {
        *(uint *)(objdata + 8) = *(uint *)(objdata + 8) | 0x10000000;
      }
    }
    else {
      if (cVar11 == '\n') {
        iVar5 = do_something_if_object_destroyed(objdata);
        if (iVar5 == 1) {
          set_ptr_monitor_img_to_obj_ani_slot((undefined4 *)(objdata + 0x80),&DAT_80031ee8);
        }
      }
      else {
        if (cVar11 == '\v') {
          iVar5 = do_something_if_object_destroyed(objdata);
          if (iVar5 == 1) {
            set_ptr_monitor_img_to_obj_ani_slot((undefined4 *)(objdata + 0x80),&DAT_80031ee8);
            set_ptr_monitor_img_to_obj_ani_slot((undefined4 *)(objdata + 0xf4),&DAT_80031ee8);
            set_ptr_monitor_img_to_obj_ani_slot((undefined4 *)(objdata + 0x168),&DAT_80031ee8);
            set_ptr_monitor_img_to_obj_ani_slot((undefined4 *)(objdata + 0x1dc),&DAT_80031ee8);
          }
        }
        else {
          if (cVar11 == '$') {
            iVar5 = do_something_if_object_destroyed(objdata);
            if (iVar5 == 1) {
              init_trigger_toxic_gas_effect((undefined4 *)(objdata + 0x58));
            }
          }
          else {
            if (cVar11 == '\x15') {
              iVar5 = do_something_if_object_destroyed(objdata);
              if (iVar5 == 0) {
                *(float *)(objdata + 0x84) =
                     (*(float *)(objdata + 0x80) *
                     (*(float *)(objdata + 0x74) - *(float *)(objdata + 0x70))) /
                     *(float *)(objdata + 0x74);
              }
              else {
                *(undefined4 *)(objdata + 0x84) = 0;
              }
            }
          }
        }
      }
    }
  }
  iVar5 = do_something_if_object_destroyed(objdata);
  if ((iVar5 == 1) && (iVar5 = *(int *)(*(int *)(objdata + 0x10) + 0x20), iVar5 != 0)) {
    iVar3 = *(int *)(iVar5 + 0x24);
    while (iVar10 = iVar3, proc_7F04BFD0(iVar5,1), iVar10 != 0) {
      iVar3 = *(int *)(iVar10 + 0x24);
      iVar5 = iVar10;
    }
  }
  return;
}



void proc_7F04E720(int param_1,float *param_2)

{
  int iVar1;
  longlong lVar2;
  int iVar3;
  int param_1_00;
  float extraout_f12;
  ushort *apuStack96 [2];
  float fStack88;
  undefined4 uStack84;
  float fStack80;
  int iStack76;
  float fStack72;
  undefined4 uStack68;
  float fStack64;
  undefined4 *apuStack24 [6];
  
  iVar1 = *(int *)(param_1 + 4);
  if (((*(uint *)(iVar1 + 100) & 0x1000) == 0) && ((*(byte *)(param_1 + 1) & 2) != 0)) {
    param_1_00 = *(int *)(param_1 + 0x20);
    if (*(int *)(param_1 + 0x20) == 0) {
      param_1_00 = *(int *)(iVar1 + 0x14);
    }
    else {
      do {
        iVar3 = *(int *)(param_1_00 + 0x24);
        proc_7F04E720(param_1_00,param_2);
        param_1_00 = iVar3;
      } while (iVar3 != 0);
      param_1_00 = *(int *)(iVar1 + 0x14);
    }
    apuStack24[0] = NULL;
    if ((*(char *)(iVar1 + 3) == '\x01') &&
       ((((*(ushort *)(iVar1 + 0x98) & 4) != 0 || (*(short *)(iVar1 + 0x9a) == 6)) ||
        (*(short *)(iVar1 + 0x9a) == 7)))) {
      lVar2 = proc_7F0747D0(iVar1 + 0xd0,*(float **)(param_1_00 + 0xc),param_2,param_2 + 3);
      apuStack24[0] = (undefined4 *)**(ushort ***)(param_1_00 + 8);
      if ((0 < lVar2) &&
         (iVar3 = proc_7F04D9B0(param_1_00,(ushort *)apuStack24[0],param_2,param_2 + 3,&fStack72,
                                &iStack76,apuStack96), iVar3 == 0)) {
        lVar2 = 0;
      }
    }
    else {
      do {
        iVar3 = proc_7F0752FC(param_1_00,param_2,param_2 + 3,(ushort **)apuStack24);
        lVar2 = (longlong)iVar3;
        if ((0 < lVar2) &&
           (iVar3 = proc_7F04D9B0(param_1_00,(ushort *)apuStack24[0],param_2,param_2 + 3,&fStack72,
                                  &iStack76,apuStack96), iVar3 != 0)) break;
      } while (0 < lVar2);
    }
    if (0 < lVar2) {
      fStack88 = fStack72;
      uStack84 = uStack68;
      fStack80 = fStack64;
      proc_7F058474((float *)(*(int *)(param_1_00 + 0xc) + iStack76 * 0x40),&fStack88);
      if (-fStack80 <= param_2[0xd]) {
        iVar3 = 1;
        if ((-1 < *(int *)(iVar1 + 8) << 0xe) &&
           (((*(char *)(iVar1 + 3) == '*' || (*(char *)(iVar1 + 3) == '/')) ||
            ((iVar1 = *(int *)(*(int *)(iVar1 + 0x14) + 8),
             *(item_related **)(iVar1 + 4) == &prop_door_related &&
             (apuStack96[0] == *(ushort **)(*(int *)(iVar1 + 8) + 0xc))))))) {
          iVar3 = 0;
        }
        proc_7F03B9C0((int)param_2,param_1,extraout_f12,-fStack80,(int)lVar2,apuStack24[0],&fStack72
                      ,iStack76,apuStack96[0],param_1_00,iVar3);
      }
    }
  }
  return;
}



void proc_7F04E9BC(int param_1,float *param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float fVar4;
  
  iVar1 = *(int *)(param_1 + 4);
  iVar2 = *(int *)(iVar1 + 0x14);
  iVar3 = proc_7F040078(iVar1);
  if (((((*(byte *)(param_1 + 1) & 2) != 0) && ((*(uint *)(iVar1 + 100) & 0x1000) == 0)) &&
      ((*(uint *)(iVar1 + 0xc) & 0x8000) == 0)) &&
     (fVar4 = proc_7F03EB9C(iVar3,*(int *)(iVar2 + 0xc)),
     -(fVar4 + *(float *)(*(int *)(iVar2 + 0xc) + 0x38)) <= param_2[0xd])) {
    proc_7F04E720(param_1,param_2);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f04ed2c) overlaps instruction at (ram,0x7f04ed28)
// 

void proc_7F04EA68(float *param_1,float *param_2)

{
  item_related *piVar1;
  int iVar2;
  bool bVar3;
  float *pfVar6;
  ulonglong uVar4;
  u32 uVar7;
  longlong lVar5;
  int object;
  hit_header **pphVar8;
  undefined uVar9;
  uint uVar10;
  hit_header *phVar11;
  float *pfVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fStack16;
  float fStack12;
  float fStack8;
  
  object = *(int *)((int)param_2[1] + 0x1c);
  if (object == 0) {
    fVar13 = *param_2;
  }
  else {
    do {
      object = *(int *)(object + 0x1c);
    } while (object != 0);
    fVar13 = *param_2;
  }
  object = *(int *)((int)param_2[1] + 4);
  pfVar12 = (float *)0x41d00000;
  fStack16 = (*param_1 - (fVar13 * param_1[3]) / param_1[5]) - param_1[3] * 26.00000000;
  fStack12 = (param_1[1] - (*param_2 * param_1[4]) / param_1[5]) - param_1[4] * 26.00000000;
  fStack8 = (param_1[2] - *param_2) - param_1[5] * 26.00000000;
  pfVar6 = (float *)proc_7F078444();
  proc_7F058474(pfVar6,&fStack16);
  fVar13 = extraout_f12;
  if (param_2[0x13] != 0.00000000) {
    proc_7F067B4C(&fStack16);
    fVar13 = extraout_f12_00;
  }
  proc_7F0A3E1C(&fStack16,1,fVar13,0);
  uVar4 = check_if_object_has_not_been_destroyed(object);
  if (uVar4 == 0) {
    fVar13 = param_2[0x13];
  }
  else {
    lVar5 = check_if_destroyable_not_invincible(object);
    if (lVar5 == 0) {
      fVar13 = param_2[0x13];
    }
    else {
      if (param_2[0x13] == 0.00000000) {
        fVar13 = param_2[0x13];
      }
      else {
        inc_curplayer_hitcount_with_weapon((int)param_1[6],6);
        fVar13 = param_2[0x13];
      }
    }
  }
  if (fVar13 == 0.00000000) {
    proc_7F064720((float *)((int)param_2[1] + 8));
  }
  else {
    pfVar12 = (float *)recall_joy2_hits_edit_detail_edit_flag();
  }
  fVar13 = param_1[6];
  if (fVar13 != 0.00000000) {
    if (param_2[0x13] == 0.00000000) {
      fVar13 = param_2[1];
      piVar1 = *(item_related **)(*(int *)(*(int *)(object + 0x14) + 8) + 4);
      uVar7 = get_random_value();
      proc_7F0A108C(param_2 + 4,param_2 + 7,(short)(uVar7 % 3) + 0x11,1,(int)fVar13,
                    SUB41(param_2[0x10],0),piVar1 == &prop_door_related);
      fVar13 = param_1[6];
    }
    else {
      pphVar8 = hit_header_array[0];
      if (-1 < *(short *)((int)param_2 + 0x3a)) {
        pphVar8 = hit_header_array
                  [(uint)(byte)image_entries[(int)*(short *)((int)param_2 + 0x3a)].flag1 & 0xf];
      }
      uVar7 = get_random_value();
      iVar2 = *(int *)(*(int *)(object + 0x14) + 8);
      uVar9 = 0;
      if (*(short *)((int)pphVar8 + 10) == 0) {
        trap(0x1c00);
      }
      if ((*(item_related **)(iVar2 + 4) == &prop_door_related) &&
         (param_2[0x11] == *(float *)(*(int *)(iVar2 + 8) + 0xc))) {
LAB_7f04ed50:
        uVar9 = 1;
        phVar11 = pphVar8[1];
      }
      else {
        if (*(item_related **)(iVar2 + 4) == &prop_cctv_related) {
          if (param_2[0x11] == *(float *)(*(int *)(iVar2 + 8) + 4)) goto LAB_7f04ed50;
          phVar11 = pphVar8[1];
        }
        else {
          phVar11 = pphVar8[1];
        }
      }
      proc_7F0A108C(param_2 + 4,param_2 + 7,
                    (ushort)*(byte *)((int)&phVar11->pImageIDArray +
                                     uVar7 % (int)*(short *)((int)pphVar8 + 10)),1,(int)param_2[1],
                    SUB41(param_2[0x10],0),uVar9);
      fVar13 = param_1[6];
    }
  }
  proc_7F05DF84((int)fVar13);
  if (*(char *)(object + 3) == '\r') {
    pfVar12 = (float *)((float)pfVar12 * flt_80030B24);
  }
  else {
    if (*(char *)(object + 3) == '\x06') {
      iVar2 = *(int *)(*(int *)(object + 0x14) + 8);
      if ((*(item_related **)(iVar2 + 4) == &prop_cctv_related) &&
         (param_2[0x11] == *(float *)(*(int *)(iVar2 + 8) + 4))) {
        pfVar12 = (float *)((float)pfVar12 * 100.00000000);
        proc_7F04DE18(object);
      }
      pfVar12 = (float *)((float)pfVar12 * flt_80030B18);
    }
  }
  get_cur_playernum();
  proc_7F04E0CC(object,extraout_f12_01,pfVar12,(int)&fStack16,(int)param_1[6]);
  if (((*(item_related **)(*(int *)(*(int *)(object + 0x14) + 8) + 4) == &prop_door_related) &&
      (param_2[0x13] == 0.00000000)) &&
     (*(char *)(object + 0xbd) = *(char *)(object + 0xbd) + '\x01',
     '\x02' < *(char *)(object + 0xbd))) {
    proc_7F04DD68(object);
  }
  proc_7F044200((int)param_2[1]);
  bVar3 = false;
  lVar5 = check_if_collectable_object(object);
  if (lVar5 == 0) {
    if (-1 < *(int *)(object + 8) << 10) {
      uVar10 = *(uint *)(object + 0xc);
      goto LAB_7f04eed8;
    }
  }
  else {
    if (*(int *)(object + 8) << 9 < 0) {
      uVar10 = *(uint *)(object + 0xc);
      goto LAB_7f04eed8;
    }
  }
  bVar3 = true;
  uVar10 = *(uint *)(object + 0xc);
LAB_7f04eed8:
  if ((uVar10 & 2) == 0) {
    uVar10 = *(uint *)(object + 0xc);
  }
  else {
    uVar4 = check_if_object_has_not_been_destroyed(object);
    if (uVar4 == 0) {
      bVar3 = true;
      uVar10 = *(uint *)(object + 0xc);
    }
    else {
      uVar10 = *(uint *)(object + 0xc);
    }
  }
  if ((uVar10 & 0x400) != 0) {
    bVar3 = false;
  }
  if (bVar3) {
    proc_7F04BCDC(object,param_1 + 3);
  }
  return;
}



ulonglong check_if_object_has_not_been_destroyed(int param_1)

{
  int iVar1;
  
  iVar1 = do_something_if_object_destroyed(param_1);
  return (ulonglong)(iVar1 == 0);
}



undefined8 proc_7F04EF58(int param_1)

{
  int iVar1;
  ulonglong uVar2;
  longlong lVar3;
  byte bVar4;
  float fVar5;
  float vector1;
  float vector2;
  float fVar6;
  float fVar7;
  int iStack44;
  float fStack40;
  int iStack12;
  int iStack8;
  
  iStack8 = *(int *)(param_1 + 4);
  if (*(char *)(iStack8 + 3) == '\x05') {
    bVar4 = *(byte *)(param_1 + 1);
  }
  else {
    if (*(int *)(iStack8 + 8) << 0xc < 0) {
      bVar4 = *(byte *)(param_1 + 1);
    }
    else {
      if ((*(uint *)(iStack8 + 100) & 0x13) == 0) {
        return 1;
      }
      bVar4 = *(byte *)(param_1 + 1);
    }
  }
  if ((bVar4 & 2) == 0) {
    return 1;
  }
  uVar2 = check_if_object_has_not_been_destroyed(iStack8);
  iVar1 = DAT_80071df8;
  if (uVar2 != 0) {
    if (*(int *)(iStack8 + 8) << 6 < 0) {
      return 1;
    }
    iStack12 = get_curplayer_positiondata();
    iStack44 = *(int *)(iStack12 + 0x14);
    vector1 = *(float *)(iStack8 + 0x58) - *(float *)(iStack12 + 8);
    fVar7 = *(float *)(iStack8 + 0x5c) - *(float *)(iStack12 + 0xc);
    vector2 = *(float *)(iStack8 + 0x60) - *(float *)(iStack12 + 0x10);
    if ((*(char *)(iStack8 + 3) == '(') && (*(int *)(iStack8 + 8) << 2 < 0)) {
      fVar5 = 400.00000000;
      fVar6 = flt_80052EF4;
      fStack40 = flt_80052EF8;
    }
    else {
      fVar5 = 200.00000000;
      fVar6 = flt_80052EFC;
      fStack40 = flt_80052F00;
    }
    if (fVar6 <= vector1 * vector1 + vector2 * vector2) {
      return 1;
    }
    if (fVar5 <= fVar7) {
      return 1;
    }
    if (fVar7 <= -fVar5) {
      return 1;
    }
    vector2 = convert_angle_using_inverse((f32)vector1,(f32)vector2);
    fVar7 = get_curplay_horizontal_rotation_in_degrees();
    fVar6 = vector2 - fVar7;
    vector1 = fVar6;
    if (vector2 < fVar7) {
      vector1 = fVar6 + flt_80052F04;
    }
    if (flt_80052F08 < vector1) {
      vector1 = flt_80052F0C - vector1;
    }
    if (fStack40 < vector1) {
      return 1;
    }
    lVar3 = (longlong)param_1;
    iVar1 = param_1;
    if (((*(uint *)(iStack8 + 0xc) & 0x800) != 0) &&
       (proc_7F0B0BE4(&iStack44,vector2,fVar6,*(float *)(iStack12 + 8),*(float *)(iStack12 + 0x10)),
       iVar1 = param_1, lVar3 == 0)) {
      return 1;
    }
  }
  DAT_80071df8 = iVar1;
  return 1;
}



undefined4 proc_7F04F170(char *param_1)

{
  int iVar1;
  s32 sVar3;
  undefined8 uVar2;
  uint uVar4;
  int iVar5;
  undefined4 uStack8;
  
  iVar1 = *(int *)(param_1 + 4);
  uStack8 = 0;
  if (*(char *)(iVar1 + 3) == '\x05') {
    play_sfx_a1(ptr_sfx_buf,0xba,NULL);
    sVar3 = is_alarm_on();
    if (sVar3 != 0) {
      stop_alarm();
      iVar5 = *(int *)(iVar1 + 8);
      goto LAB_7f04f1d4;
    }
    start_alarm();
  }
  iVar5 = *(int *)(iVar1 + 8);
LAB_7f04f1d4:
  if (iVar5 << 0xc < 0) {
    uVar2 = collect_or_interact_object(param_1,1);
    uStack8 = (undefined4)uVar2;
    uVar4 = *(uint *)(iVar1 + 100);
  }
  else {
    uVar4 = *(uint *)(iVar1 + 100);
  }
  *(uint *)(iVar1 + 100) = uVar4 | 0x4000;
  proc_7F03E6A0((int)param_1);
  return uStack8;
}



void proc_7F04F218(int param_1,longlong param_2)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 4);
  if (param_2 != 0) {
    *(byte *)(iVar1 + 2) = *(byte *)(iVar1 + 2) & 0xdf;
    return;
  }
  *(byte *)(iVar1 + 2) = *(byte *)(iVar1 + 2) | 0x20;
  return;
}



void proc_7F04F244(int param_1,int *param_2,undefined4 *param_3,undefined4 *param_4,
                  undefined4 *param_5)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 4);
  if (*(undefined4 **)(iVar1 + 0x68) == NULL) {
    *param_3 = 0;
  }
  else {
    if ((*(uint *)(iVar1 + 8) & 0x100) == 0) {
      *param_3 = 0;
    }
    else {
      if ((*(byte *)(iVar1 + 2) & 0x20) == 0) {
        *param_3 = **(undefined4 **)(iVar1 + 0x68);
        *param_2 = *(int *)(iVar1 + 0x68) + 4;
        *param_5 = *(undefined4 *)(*(int *)(iVar1 + 0x68) + 0x48);
        *param_4 = *(undefined4 *)(*(int *)(iVar1 + 0x68) + 0x44);
        return;
      }
      *param_3 = 0;
    }
  }
  return;
}



char * append_text_picked_up(char *param_1)

{
  byte *pbVar1;
  char *pcVar2;
  
  pbVar1 = get_textptr_for_textID(0xa400);
  pcVar2 = string_load_parse_something(param_1,(char *)pbVar1);
  return pcVar2;
}



void append_text_ammo_amount_word(char *buffer,undefined4 ammotype,longlong amount)

{
  byte *pbVar1;
  
  if (true) {
    switch(ammotype) {
    case 1:
    case 2:
    case 3:
    case 0x17:
      pbVar1 = get_textptr_for_textID(0xa401);
      string_load_parse_something(buffer,(char *)pbVar1);
      break;
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    case 10:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0xe:
    case 0x11:
    case 0x12:
    case 0x13:
    case 0x14:
    case 0x15:
      if (amount == 1) {
        pbVar1 = get_textptr_for_textID(0xa402);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
      else {
        pbVar1 = get_textptr_for_textID(0xa401);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
      break;
    case 0xf:
    case 0x10:
      if (amount == 1) {
        pbVar1 = get_textptr_for_textID(0xa403);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
      else {
        pbVar1 = get_textptr_for_textID(0xa401);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
      break;
    case 0x16:
    case 0x1d:
      if (amount == 1) {
        pbVar1 = get_textptr_for_textID(0xa404);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
      else {
        pbVar1 = get_textptr_for_textID(0xa401);
        string_load_parse_something(buffer,(char *)pbVar1);
      }
    }
  }
  return;
}



char * apped_text_ammotype(char *buffer,int ammotype,int amount)

{
  byte *pbVar1;
  char *pcVar2;
  
  pcVar2 = (char *)((int)&rgba + 1);
  if (((ammotype == 1) || (ammotype == 2)) || (ammotype == 3)) {
    pbVar1 = get_textptr_for_textID(0xa405);
    pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
  }
  else {
    if (ammotype == 10) {
      pbVar1 = get_textptr_for_textID(41999);
      string_load_parse_something(buffer,(char *)pbVar1);
      if (amount == 1) {
        pbVar1 = get_textptr_for_textID(42000);
        pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
      }
      else {
        pbVar1 = get_textptr_for_textID(0xa411);
        pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
      }
    }
    else {
      if (ammotype == 0x13) {
        if (amount == 1) {
          pbVar1 = get_textptr_for_textID(0xa419);
          string_load_parse_something(buffer,(char *)pbVar1);
        }
        else {
          pbVar1 = get_textptr_for_textID(0xa41a);
          string_load_parse_something(buffer,(char *)pbVar1);
        }
        pbVar1 = get_textptr_for_textID(0xa418);
        pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
      }
      else {
        if (true) {
          switch(ammotype) {
          case 4:
            pbVar1 = get_textptr_for_textID(0xa406);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 5:
            pbVar1 = get_textptr_for_textID(0xa409);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 6:
            pbVar1 = get_textptr_for_textID(0xa40b);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 7:
            pbVar1 = get_textptr_for_textID(0xa40c);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 8:
            pbVar1 = get_textptr_for_textID(0xa40d);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 9:
            pbVar1 = get_textptr_for_textID(0xa40e);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0xb:
            pbVar1 = get_textptr_for_textID(0xa40a);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0xc:
            pbVar1 = get_textptr_for_textID(0xa407);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0xd:
            pbVar1 = get_textptr_for_textID(0xa408);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0xe:
            pbVar1 = get_textptr_for_textID(0xa413);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0xf:
            pbVar1 = get_textptr_for_textID(0xa414);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x10:
            pbVar1 = get_textptr_for_textID(0xa415);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x11:
            pbVar1 = get_textptr_for_textID(0xa416);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x12:
            pbVar1 = get_textptr_for_textID(0xa417);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x14:
            pbVar1 = get_textptr_for_textID(0xa41b);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x15:
            pbVar1 = get_textptr_for_textID(0xa41c);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x16:
            pbVar1 = get_textptr_for_textID(0xa41d);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x17:
            pbVar1 = get_textptr_for_textID(0xa41f);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
            break;
          case 0x1d:
            pbVar1 = get_textptr_for_textID(0xa41e);
            pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
          }
        }
        if (1 < amount) {
          pbVar1 = get_textptr_for_textID(0xa412);
          pcVar2 = string_load_parse_something(buffer,(char *)pbVar1);
        }
      }
    }
  }
  return pcVar2;
}



void set_sound_effect_for_ammo_collection(undefined4 ammotype)

{
  if (true) {
    switch(ammotype) {
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0xe:
    case 0xf:
    case 0x11:
    case 0x12:
    case 0x13:
    case 0x16:
    case 0x1d:
      play_sfx_a1(ptr_sfx_buf,0xea,NULL);
      break;
    case 7:
    case 8:
    case 9:
    case 0x10:
    case 0x14:
    case 0x15:
    case 0x17:
      play_sfx_a1(ptr_sfx_buf,0xeb,NULL);
      break;
    case 10:
      play_sfx_a1(ptr_sfx_buf,0xe9,NULL);
    }
  }
  return;
}



int ** set_sound_effect_for_weapontype_collection(longlong weapontype)

{
  int **ppiVar1;
  
  if ((weapontype == 2) || (weapontype == 3)) {
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xe9,NULL);
  }
  else {
    if (((((weapontype == 0x1d) || (weapontype == 0x1c)) || (weapontype == 0x1b)) ||
        ((weapontype == 0x21 || (weapontype == 0x2f)))) ||
       ((weapontype == 0x30 || (weapontype == 0x22)))) {
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xeb,NULL);
    }
    else {
      if (((weapontype == 0x1a) || (weapontype == 0x57)) || (weapontype == 0x56)) {
        ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xea,NULL);
      }
      else {
        if (weapontype == 0x16) {
          ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xf2,NULL);
        }
        else {
          ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xe8,NULL);
        }
      }
    }
  }
  return ppiVar1;
}



char * display_ammo_type_collection_text(char *finaltext,int ammotype,longlong quantity)

{
  ulonglong uVar1;
  char *pcVar2;
  
  *finaltext = '\0';
  if (j_text_trigger == 0) {
    uVar1 = get_num_players();
    if ((longlong)uVar1 < 3) {
      append_text_picked_up(finaltext);
      append_text_ammo_amount_word(finaltext,ammotype,quantity);
    }
    apped_text_ammotype(finaltext,ammotype,(int)quantity);
    pcVar2 = string_load_parse_something(finaltext,asc_800529D4);
  }
  else {
    apped_text_ammotype(finaltext,ammotype,(int)quantity);
    uVar1 = get_num_players();
    if ((longlong)uVar1 < 3) {
      append_text_picked_up(finaltext);
    }
    pcVar2 = string_load_parse_something(finaltext,asc_800529D0);
  }
  return pcVar2;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void display_text_when_ammo_collected(int ammotype,longlong amount)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined4 stringbuf [25];
  
  puVar3 = &dword_800529D8;
  puVar1 = stringbuf;
  do {
    puVar4 = puVar3 + 3;
    puVar2 = puVar1 + 3;
    *puVar1 = *puVar3;
    puVar1[1] = puVar3[1];
    puVar1[2] = puVar3[2];
    puVar3 = puVar4;
    puVar1 = puVar2;
  } while (puVar4 != (undefined4 *)&dword_80052A38);
  *puVar2 = _dword_80052A38;
  display_ammo_type_collection_text((char *)stringbuf,ammotype,amount);
  display_string_in_lower_left_corner((char *)stringbuf);
  return;
}



void add_ammo_to_inventory(int ammotype,longlong amount,int doplaysound,int dodisplaytext)

{
  int iVar1;
  int iVar2;
  
  if (0 < amount) {
    iVar1 = check_cur_player_ammo_amount_in_inventory(ammotype);
    iVar2 = get_max_ammo_for_type((AMMOTYPES)ammotype);
    if (iVar1 < iVar2) {
      iVar1 = check_cur_player_ammo_amount_in_inventory(ammotype);
      give_cur_player_ammo((AMMOTYPES)ammotype,iVar1 + (int)amount);
      if (dodisplaytext != 0) {
        display_text_when_ammo_collected(ammotype,(longlong)(int)amount);
      }
      if (doplaysound != 0) {
        set_sound_effect_for_ammo_collection(ammotype);
      }
      if (ammotype == 5) {
        add_item_to_inventory(ITEM_GRENADE);
      }
      else {
        if (ammotype == 7) {
          add_item_to_inventory(ITEM_REMOTEMINE);
          add_item_to_inventory(ITEM_TRIGGER);
        }
        else {
          if (ammotype == 8) {
            add_item_to_inventory(ITEM_PROXIMITYMINE);
          }
          else {
            if (ammotype == 9) {
              add_item_to_inventory(ITEM_TIMEDMINE);
            }
            else {
              if (ammotype == 10) {
                add_item_to_inventory(ITEM_THROWKNIFE);
              }
              else {
                if (ammotype == 0x10) {
                  add_item_to_inventory(ITEM_BOMBCASE);
                }
                else {
                  if (ammotype == 0x14) {
                    add_item_to_inventory(ITEM_BUG);
                  }
                  else {
                    if (ammotype == 0x15) {
                      add_item_to_inventory(ITEM_MICROCAMERA);
                    }
                    else {
                      if (ammotype == 0x16) {
                        add_item_to_inventory(ITEM_GOLDENEYEKEY);
                      }
                      else {
                        if (ammotype == 0x1d) {
                          add_item_to_inventory(ITEM_TOKEN);
                        }
                        else {
                          if (ammotype == 0x17) {
                            add_item_to_inventory(ITEM_PLASTIQUE);
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



uint get_ammo_in_magazine(int objdata)

{
  ulonglong uVar1;
  uint uVar2;
  
  uVar2 = 1;
  if (true) {
    switch(*(undefined4 *)(objdata + 0x80)) {
    case 1:
      uVar2 = 10;
      break;
    case 2:
      uVar2 = 10;
      break;
    case 3:
      uVar2 = 10;
      break;
    case 4:
      uVar2 = 5;
      break;
    case 0xc:
      uVar2 = 5;
      break;
    case 0xd:
      uVar2 = 3;
      break;
    case 0xe:
      uVar2 = 4;
    }
  }
  if ((1 < uVar2) && (uVar1 = get_num_players(), uVar1 == 1)) {
    uVar2 = (uint)((float)uVar2 * solo_ammo_multiplier);
  }
  return uVar2;
}



uint ammo_collected_from_weapon(int objdata)

{
  undefined4 uVar2;
  ulonglong uVar1;
  uint uVar3;
  
  uVar2 = get_ammo_type_for_weapon((int)*(char *)(objdata + 0x80));
  uVar3 = 1;
  if (*(int *)(objdata + 8) << 1 < 0) {
    uVar3 = 0;
  }
  else {
    if (true) {
      switch(uVar2) {
      case 1:
        uVar3 = 10;
        break;
      case 2:
        uVar3 = 10;
        break;
      case 3:
        uVar3 = 10;
        break;
      case 4:
        uVar3 = 5;
        break;
      case 0xb:
        uVar3 = 3;
        break;
      case 0xc:
        uVar3 = 5;
        break;
      case 0xd:
        uVar3 = 3;
        break;
      case 0xe:
        uVar3 = 4;
      }
    }
    if ((1 < uVar3) && (uVar1 = get_num_players(), uVar1 == 1)) {
      uVar3 = (uint)((float)uVar3 * solo_ammo_multiplier);
    }
  }
  return uVar3;
}



char * generate_language_specific_text_for_weapon(char *finalstring,int itemtype)

{
  bool bVar1;
  ulonglong uVar2;
  int ammotype;
  byte *pbVar3;
  char *pcVar4;
  size_t sVar5;
  
  bVar1 = false;
  if (j_text_trigger == 0) {
    uVar2 = get_num_players();
    if ((longlong)uVar2 < 3) {
      pbVar3 = get_textptr_for_textID(0xa400);
      textpointer_load_parse_something(finalstring,(char *)pbVar3);
    }
  }
  else {
    textpointer_load_parse_something(finalstring,asc_80052A3C);
    uVar2 = get_num_players();
    if (2 < (longlong)uVar2) {
      bVar1 = true;
    }
  }
  if (false) {
switchD_7f04fe74_caseD_17:
    pbVar3 = get_textptr_for_textID(0xa43b);
    pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
  }
  else {
    switch(itemtype) {
    case 2:
      pbVar3 = get_textptr_for_textID(0xa420);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 3:
    case 0x1a:
    case 0x1b:
    case 0x1c:
    case 0x1d:
    case 0x21:
    case 0x22:
    case 0x2f:
    case 0x30:
    case 0x3d:
    case 0x56:
    case 0x57:
    case 0x58:
      ammotype = get_ammo_type_for_weapon(itemtype);
      pcVar4 = display_ammo_type_collection_text(finalstring,ammotype,1);
      return pcVar4;
    case 4:
      pbVar3 = get_textptr_for_textID(0xa421);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 5:
      pbVar3 = get_textptr_for_textID(0xa422);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 6:
      pbVar3 = get_textptr_for_textID(0xa423);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 7:
      pbVar3 = get_textptr_for_textID(0xa424);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 8:
      pbVar3 = get_textptr_for_textID(0xa425);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 9:
      pbVar3 = get_textptr_for_textID(0xa426);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 10:
      pbVar3 = get_textptr_for_textID(0xa427);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0xb:
      pbVar3 = get_textptr_for_textID(0xa428);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0xc:
      pbVar3 = get_textptr_for_textID(0xa429);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0xd:
      pbVar3 = get_textptr_for_textID(0xa42a);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0xe:
      pbVar3 = get_textptr_for_textID(0xa42b);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0xf:
      pbVar3 = get_textptr_for_textID(0xa42c);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x10:
      pbVar3 = get_textptr_for_textID(0xa42d);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x11:
      pbVar3 = get_textptr_for_textID(0xa42e);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x12:
      pbVar3 = get_textptr_for_textID(0xa431);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x13:
      pbVar3 = get_textptr_for_textID(0xa432);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x14:
      pbVar3 = get_textptr_for_textID(0xa436);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x15:
      pbVar3 = get_textptr_for_textID(0xa437);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x16:
      pbVar3 = get_textptr_for_textID(0xa433);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    default:
      goto switchD_7f04fe74_caseD_17;
    case 0x18:
      pbVar3 = get_textptr_for_textID(0xa42f);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x19:
      pbVar3 = get_textptr_for_textID(0xa430);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x23:
      pbVar3 = get_textptr_for_textID(0xa434);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x24:
      pbVar3 = get_textptr_for_textID(0xa435);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x51:
      pbVar3 = get_textptr_for_textID(0xa438);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x52:
      pbVar3 = get_textptr_for_textID(0xa439);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
      break;
    case 0x53:
      pbVar3 = get_textptr_for_textID(0xa43a);
      pcVar4 = string_load_parse_something(finalstring,(char *)pbVar3);
    }
  }
  if ((j_text_trigger != 0) && (!bVar1)) {
    sVar5 = strlen(finalstring);
    if (finalstring[sVar5 - 1] == '\n') {
      sVar5 = strlen(finalstring);
      finalstring[sVar5 - 1] = '\0';
    }
    pbVar3 = get_textptr_for_textID(0xa400);
    string_load_parse_something(finalstring,(char *)pbVar3);
    pcVar4 = string_load_parse_something(finalstring,asc_80052A40);
  }
  return pcVar4;
}



void display_text_for_weapon_in_lower_left_corner(int weaponid)

{
  char acStack100 [100];
  
  generate_language_specific_text_for_weapon(acStack100,weaponid);
  display_string_in_lower_left_corner(acStack100);
  return;
}



undefined8 collect_or_interact_object(char *param_1,int param_2)

{
  bool bVar1;
  char cVar2;
  int objdata;
  char *text;
  int type;
  int iVar5;
  ulonglong uVar3;
  byte *text_00;
  undefined8 uVar4;
  int ammotype;
  int iVar6;
  uint uVar7;
  
  objdata = *(int *)(param_1 + 4);
  if ((ptr_BONDdata->player_button_control != 0) || (clock_timer == 0)) {
    return 0;
  }
  if (false) {
switchD_7f0502bc_caseD_3:
    play_sfx_a1(ptr_sfx_buf,0xe5,NULL);
    if (param_2 == 0) {
      ammotype = 4;
    }
    else {
      text_00 = (byte *)proc_7F08D95C(objdata);
      if (text_00 == NULL) {
        text_00 = get_textptr_for_textID(0xa43f);
      }
      display_string_in_lower_left_corner((char *)text_00);
      ammotype = 4;
    }
  }
  else {
    switch(*(undefined *)(objdata + 3)) {
    default:
      goto switchD_7f0502bc_caseD_3;
    case 4:
      play_sfx_a1(ptr_sfx_buf,0xe5,NULL);
      if (param_2 != 0) {
        text_00 = (byte *)proc_7F08D95C(objdata);
        if (text_00 == NULL) {
          text_00 = get_textptr_for_textID(0xa43c);
        }
        display_string_in_lower_left_corner((char *)text_00);
      }
      ammotype = 4;
      break;
    case 7:
      uVar7 = get_ammo_in_magazine(objdata);
      add_ammo_to_inventory(*(int *)(objdata + 0x80),(longlong)(int)uVar7,1,param_2);
      ammotype = 1;
      break;
    case 8:
      bVar1 = false;
      set_sound_effect_for_weapontype_collection((longlong)*(char *)(objdata + 0x80));
      if (*(char *)(objdata + 0x80) == '\x1d') {
        add_item_to_inventory(ITEM_TRIGGER);
      }
      else {
        if (*(char *)(objdata + 0x80) == 'X') {
          draw_item_in_hand_has_more_ammo(0,ITEM_TOKEN);
        }
      }
      if ((*(uint *)(objdata + 100) & 0x400) == 0) {
        uVar3 = proc_7F08C764(param_1);
        bVar1 = uVar3 != 0;
        if (param_2 != 0) {
          text = (char *)proc_7F08D9A4((int)*(char *)(objdata + 0x80));
          if (text == NULL) {
            if (bVar1) {
              display_text_for_weapon_in_lower_left_corner((int)*(char *)(objdata + 0x80));
            }
          }
          else {
            bVar1 = true;
            display_string_in_lower_left_corner(text);
          }
        }
        ammotype = 1;
        cVar2 = *(char *)(objdata + 0x80);
      }
      else {
        if (*(char *)(objdata + 0x80) < '!') {
          proc_7F08C764(param_1);
        }
        if (param_2 != 0) {
          text = (char *)proc_7F08D95C(objdata);
          if (text == NULL) {
            display_text_for_weapon_in_lower_left_corner((int)*(char *)(objdata + 0x80));
          }
          else {
            display_string_in_lower_left_corner(text);
          }
          bVar1 = true;
        }
        ammotype = 4;
        cVar2 = *(char *)(objdata + 0x80);
      }
      type = get_ammo_type_for_weapon((int)cVar2);
      if ((type != 0) && (uVar7 = ammo_collected_from_weapon(objdata), 0 < (int)uVar7)) {
        iVar6 = check_cur_player_ammo_amount_in_inventory(type);
        iVar5 = get_max_ammo_for_type((AMMOTYPES)type);
        if (iVar6 < iVar5) {
          iVar6 = check_cur_player_ammo_amount_in_inventory(type);
          give_cur_player_ammo((AMMOTYPES)type,iVar6 + uVar7);
          if ((!bVar1) && (param_2 != 0)) {
            display_text_when_ammo_collected(type,(longlong)(int)uVar7);
          }
        }
      }
      break;
    case 0x14:
      ammotype = 1;
      type = 0;
      iVar6 = objdata;
      while( true ) {
        iVar5 = ammotype;
        ammotype = iVar5;
        if (type == 1) {
          ammotype = 1;
        }
        uVar7 = (uint)*(ushort *)(iVar6 + 0x82);
        uVar3 = get_num_players();
        if (uVar3 == 1) {
          uVar7 = (uint)((float)uVar7 * solo_ammo_multiplier);
        }
        add_ammo_to_inventory(ammotype,(longlong)(int)uVar7,0,param_2);
        iVar6 += 4;
        if (iVar5 == 0xd) break;
        ammotype = iVar5 + 1;
        type = iVar5;
      }
      play_sfx_a1(ptr_sfx_buf,0xea,NULL);
      ammotype = 1;
      break;
    case 0x15:
      add_BONDdata_watch_armor(*(f32 *)(objdata + 0x84));
      play_sfx_a1(ptr_sfx_buf,0x51,NULL);
      if (param_2 != 0) {
        text_00 = (byte *)proc_7F08D95C(objdata);
        if (text_00 == NULL) {
          uVar3 = get_num_players();
          if ((longlong)uVar3 < 3) {
            text_00 = get_textptr_for_textID(0xa43d);
          }
          else {
            text_00 = get_textptr_for_textID(0xa43e);
          }
        }
        display_string_in_lower_left_corner((char *)text_00);
      }
      ammotype = 1;
    }
  }
  if ((ammotype == 1) && ((*(uint *)(objdata + 100) & 0x10) == 0)) {
    proc_7F040D98(objdata,0,(ulonglong)*(byte *)(objdata + 2) & 4);
    uVar4 = 1;
  }
  else {
    uVar4 = 0;
    if (ammotype != 0) {
      proc_7F08C724((int)param_1);
      uVar4 = 4;
    }
  }
  return uVar4;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 object_collectability_routine(void)

{
  weaponid id;
  char cVar1;
  int objdata;
  bool bVar2;
  longlong lVar3;
  BOOL BVar6;
  int hand;
  int item;
  int type;
  ulonglong uVar4;
  undefined8 uVar5;
  char *in_a0_lo;
  int iVar7;
  f32 fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  objdata = *(int *)(in_a0_lo + 4);
  lVar3 = check_if_collectable_object(objdata);
  if ((lVar3 == 0) || (*(char *)(objdata + 3) == '\x11')) {
    item = *(int *)(objdata + 8);
    if (-1 < item << 0xd) {
      return 0;
    }
  }
  else {
    item = *(int *)(objdata + 8);
    if (item << 0xb < 0) {
      return 0;
    }
  }
  if (item << 0xc < 0) {
    return 0;
  }
  if ((((*(uint *)(objdata + 100) & 0x80) != 0) && (0 < *(int *)(*(int *)(objdata + 0x6c) + 0xbc)))
     && (*(int *)(*(int *)(objdata + 0x6c) + 0x90) == 0)) {
    return 0;
  }
  lVar3 = proc_7F03E7AC(objdata);
  if (lVar3 == 0) {
    return 0;
  }
  cVar1 = *(char *)(objdata + 3);
  if (cVar1 == '\b') {
    item = *(int *)(in_a0_lo + 4);
    id = *(weaponid *)(item + 0x80);
    if ((id == 0x1a) || (id == 0x57)) {
      if (-1 < *(short *)(item + 0x82)) {
        return 0;
      }
      if ((*(uint *)(objdata + 100) & 4) != 0) {
        return 0;
      }
    }
    if (((id == 0x1d) || (id == 0x1c)) ||
       ((id == 0x1b || ((((id == 0x21 || (id == 0x2f)) || (id == 0x30)) || (id == 0x22)))))) {
      if (-1 < *(short *)(item + 0x82)) {
        return 0;
      }
      if ((*(uint *)(objdata + 100) & 4) != 0) {
        return 0;
      }
    }
    if ((id == 0x56) && ((*(uint *)(objdata + 100) & 0x80) != 0)) {
      return 0;
    }
    BVar6 = is_weapon_in_inv(id);
    if ((BVar6 != FALSE) &&
       (hand = get_ammo_type_for_weapon((int)*(char *)(item + 0x80)), hand != 0)) {
      hand = get_ammo_count_for_weapon((int)*(char *)(item + 0x80));
      type = get_max_ammo_for_weapon((int)*(char *)(item + 0x80));
      if (type <= hand) {
        hand = *(int *)(item + 0x84);
        if ((hand == 0) && (*(char *)(item + 0x81) < '\0')) {
          return 0;
        }
        if (hand == 0) {
          cVar1 = *(char *)(item + 0x81);
        }
        else {
          cVar1 = *(char *)(hand + 0x80);
        }
        if (*(int *)(item + 8) << 3 < 0) {
          hand = (int)*(char *)(item + 0x80);
          item = (int)cVar1;
        }
        else {
          item = (int)*(char *)(item + 0x80);
          hand = (int)cVar1;
        }
        uVar4 = is_item_for_hand_in_inventory(item,hand);
        if (uVar4 != 0) {
          return 0;
        }
      }
    }
  }
  else {
    if (cVar1 == '\a') {
      item = *(int *)(in_a0_lo + 4);
      hand = check_cur_player_ammo_amount_in_inventory(*(int *)(item + 0x80));
      item = get_max_ammo_for_type((AMMOTYPES)*(undefined4 *)(item + 0x80));
      if (item <= hand) {
        return 0;
      }
    }
    else {
      if (cVar1 == '\x14') {
        item = *(int *)(in_a0_lo + 4);
        bVar2 = true;
        hand = do_something_if_object_destroyed(objdata);
        if (hand != 0) {
          return 0;
        }
        hand = 0;
        do {
          iVar7 = hand + 1;
          type = iVar7;
          if (hand == 1) {
            type = 1;
          }
          if (*(short *)(item + 0x82) != 0) {
            hand = check_cur_player_ammo_amount_in_inventory(type);
            type = get_max_ammo_for_type((AMMOTYPES)type);
            if (hand < type) {
              bVar2 = false;
              break;
            }
          }
          item += 4;
          hand = iVar7;
        } while (iVar7 != 0xd);
        if (bVar2) {
          return 0;
        }
      }
      else {
        if (cVar1 == '\x15') {
          item = *(int *)(in_a0_lo + 4);
          bVar2 = false;
          fVar8 = get_BONDdata_watch_armor();
          if (*(float *)(item + 0x84) <= (float)fVar8) {
            bVar2 = true;
          }
          else {
            uVar4 = get_num_players();
            if ((longlong)uVar4 < 2) {
              bVar2 = false;
            }
            else {
              item = get_scenario();
              uVar4 = SEXT48(item);
              if ((uVar4 == 2) && (uVar4 = proc_7F08CF80(), uVar4 != 0)) {
                bVar2 = true;
              }
              else {
                if (item == 3) {
                  proc_7F08CFC0();
                  if (uVar4 != 0) {
                    bVar2 = true;
                  }
                }
                else {
                  bVar2 = false;
                }
              }
            }
          }
          if (bVar2) {
            return 0;
          }
        }
      }
    }
  }
  fVar9 = get_curplay_vertical_rotation_in_degrees();
  if ((flt_800532E0 <= fVar9) || (-1 < ptr_BONDdata->field_1270)) {
    item = get_curplayer_positiondata();
    fVar9 = *(float *)(objdata + 0x58) - *(float *)(item + 8);
    fVar11 = *(float *)(objdata + 0x5c) - *(float *)(item + 0xc);
    fVar10 = *(float *)(objdata + 0x60) - *(float *)(item + 0x10);
    if (ptr_BONDdata->field_1270 < 0x3c) {
      bVar2 = fVar9 * fVar9 + fVar10 * fVar10 <= flt_800532E8;
      if (((bVar2) && (bVar2 = -200.00000000 <= fVar11, bVar2)) &&
         (bVar2 = false, fVar11 <= 200.00000000)) {
        bVar2 = true;
      }
    }
    else {
      bVar2 = fVar9 * fVar9 + fVar10 * fVar10 <= flt_800532E4;
      if (((bVar2) && (bVar2 = -500.00000000 <= fVar11, bVar2)) &&
         (bVar2 = false, fVar11 <= 500.00000000)) {
        bVar2 = true;
      }
    }
    if ((bVar2) && ((*(uint *)(objdata + 0xc) & 0x1000) == 0)) {
      objdata = *(int *)(item + 0x14);
      lVar3 = proc_7F0B0E24();
      if ((lVar3 == 0) || (objdata != *(int *)(in_a0_lo + 0x14))) {
        bVar2 = false;
      }
    }
    if (bVar2) {
      uVar5 = collect_or_interact_object(in_a0_lo,1);
      return uVar5;
    }
  }
  return 0;
}



undefined8 proc_7F050D30(int param_1,undefined4 *param_2,float *param_3,float *param_4)

{
  int iVar1;
  undefined8 uVar2;
  int iVar3;
  
  if ((*(byte *)(param_1 + 1) & 2) == 0) {
    uVar2 = 0;
  }
  else {
    iVar1 = *(int *)(param_1 + 4);
    iVar3 = getsubmatrix(*(int *)(iVar1 + 0x14),(uint)param_2,param_3,param_4);
    param_2[2] = *(undefined4 *)(iVar3 + 0x38);
    if ((float)param_2[2] < 0.00000000) {
      *param_2 = *(undefined4 *)(iVar3 + 0x30);
      param_2[1] = *(undefined4 *)(iVar3 + 0x34);
      *param_4 = 0.00000000;
      param_4[1] = 0.00000000;
      *param_3 = 0.00000000;
      param_3[1] = 0.00000000;
      proc_7F03F90C(*(int *)(iVar1 + 0x14),param_3 + 1,param_3,param_4 + 1,param_4);
      uVar2 = 1;
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



void proc_7F050DE8(int param_1)

{
  ushort **ppuVar1;
  int iVar2;
  uint *puVar4;
  longlong lVar3;
  ushort uVar5;
  ushort *partdesc;
  ushort *puVar6;
  
  ppuVar1 = *(ushort ***)(param_1 + 8);
  partdesc = *ppuVar1;
  if (partdesc != NULL) {
    uVar5 = *partdesc;
    while( true ) {
      uVar5 &= 0xff;
      if (uVar5 == 8) {
        proc_7F06E970(param_1,partdesc);
        puVar6 = *(ushort **)(partdesc + 10);
      }
      else {
        if (uVar5 == 0x12) {
          process_12_handle_switch(param_1,partdesc);
          puVar6 = *(ushort **)(partdesc + 10);
        }
        else {
          if (uVar5 == 0x17) {
            process_17_pointer_to_head(param_1,partdesc);
            puVar6 = *(ushort **)(partdesc + 10);
          }
          else {
            if (uVar5 == 0x18) {
              iVar2 = *(int *)(partdesc + 2);
              puVar4 = (uint *)extract_id_from_object_structure_microcode(param_1,partdesc);
              if ((*(uint *)(iVar2 + 8) != *puVar4) &&
                 (lVar3 = proc_7F04B590((int)ppuVar1,(int)partdesc), lVar3 != 0)) {
                proc_7F09C044(*puVar4);
                *puVar4 = *(uint *)(iVar2 + 8);
              }
              puVar6 = *(ushort **)(partdesc + 10);
            }
            else {
              puVar6 = *(ushort **)(partdesc + 10);
            }
          }
        }
      }
      if ((puVar6 == NULL) && (puVar6 = partdesc, partdesc != NULL)) {
        puVar6 = *(ushort **)(partdesc + 6);
        while ((puVar6 == NULL &&
               (partdesc = *(ushort **)(partdesc + 4), puVar6 = partdesc, partdesc != NULL))) {
          puVar6 = *(ushort **)(partdesc + 6);
        }
      }
      if (puVar6 == NULL) break;
      uVar5 = *puVar6;
      partdesc = puVar6;
    }
  }
  return;
}



undefined *
proc_7F050F50(ushort *param_1,int param_2,ushort **param_3,undefined *param_4,uint param_5)

{
  undefined *puVar1;
  f32 scale;
  
  puVar1 = init_standard_object((int)param_1,param_3,param_4,param_5);
  if ((puVar1 != NULL) && (*(int *)(param_1 + 10) != 0)) {
    set_obj_instance_controller_scale(*(int *)(param_1 + 10),scale);
    *(undefined4 *)(*(int *)(param_1 + 10) + 0x18) = *(undefined4 *)(param_2 + 0x1c);
    *(undefined4 *)(*(int *)(param_1 + 10) + 0x1c) =
         *(undefined4 *)(*(int *)(*(int *)(*(int *)(param_2 + 0x1c) + 8) + 8) + 0x18);
    proc_7F03A5A4((int)puVar1,*(int *)(param_2 + 0x18));
    *(undefined **)(param_2 + 0x1d8) = puVar1;
  }
  return puVar1;
}



undefined * proc_7F051028(ushort *param_1,int param_2)

{
  ushort uVar1;
  undefined *puVar2;
  
  uVar1 = param_1[2];
  load_model((int)(short)uVar1);
  puVar2 = proc_7F050F50(param_1,param_2,(ushort **)PitemZ_entries[(int)(short)uVar1].header,NULL,0)
  ;
  return puVar2;
}



undefined * proc_7F051084(ushort *param_1,int param_2)

{
  undefined *puVar1;
  
  *(float *)(param_1 + 0x3a) = (float)*(int *)(param_1 + 0x3a) / 65536.00000000;
  puVar1 = proc_7F051028(param_1,param_2);
  return puVar1;
}



undefined * proc_7F0510C0(undefined2 *param_1,int param_2,uint param_3)

{
  dword *pdVar1;
  object_standard *poVar2;
  dword *pdVar3;
  dword *pdVar4;
  dword *pdVar5;
  int *ptrobjinstance;
  dword *pdVar6;
  dword adStack144 [30];
  dword adStack24 [5];
  PitemZ_header *pPStack4;
  
  pPStack4 = PitemZ_entries[param_2].header;
  load_model(param_2);
  poVar2 = remove_last_obj_pos_data_entry();
  ptrobjinstance = (int *)get_obj_instance_controller_for_header(pPStack4);
  pdVar3 = (dword *)proc_7F0515B0((ulonglong)(poVar2 == NULL),(ulonglong)(ptrobjinstance == NULL),
                                  (int)pPStack4);
  if (poVar2 == NULL) {
    poVar2 = remove_last_obj_pos_data_entry();
  }
  if (ptrobjinstance == NULL) {
    ptrobjinstance = (int *)get_obj_instance_controller_for_header(pPStack4);
  }
  if (((pdVar3 == NULL) || (poVar2 == NULL)) || (ptrobjinstance == NULL)) {
    if (ptrobjinstance != NULL) {
      set_obj_instance_scale_to_zero(ptrobjinstance);
    }
    if (poVar2 != NULL) {
      set_last_obj_pos_data(poVar2);
      poVar2 = NULL;
    }
  }
  else {
    pdVar5 = blank_11_object;
    pdVar1 = adStack144;
    do {
      pdVar4 = pdVar1;
      pdVar6 = pdVar5;
      *pdVar4 = *pdVar6;
      pdVar4[1] = pdVar6[1];
      pdVar4[2] = pdVar6[2];
      pdVar5 = pdVar6 + 3;
      pdVar1 = pdVar4 + 3;
    } while (pdVar6 + 3 != &DWORD_8003218c);
    pdVar4[3] = DWORD_8003218c;
    pdVar4[4] = pdVar6[4];
    pdVar5 = adStack144;
    pdVar1 = pdVar3;
    do {
      pdVar6 = pdVar1;
      pdVar4 = pdVar5;
      pdVar5 = pdVar4 + 3;
      *pdVar6 = *pdVar4;
      pdVar6[1] = pdVar4[1];
      pdVar6[2] = pdVar4[2];
      pdVar1 = pdVar6 + 3;
    } while (pdVar5 != adStack24);
    pdVar6[3] = *pdVar5;
    pdVar6[4] = pdVar4[4];
    *(short *)(pdVar3 + 1) = (short)param_2;
    pdVar3[2] = param_3 | 0x4000;
    *(undefined2 *)((int)pdVar3 + 6) = *param_1;
    poVar2 = (object_standard *)
             proc_7F050F50((ushort *)pdVar3,(int)param_1,(ushort **)pPStack4,(undefined *)poVar2,
                           (uint)ptrobjinstance);
  }
  return (undefined *)poVar2;
}



int proc_7F05126C(int param_1,longlong param_2,int param_3)

{
  int iVar1;
  char cVar4;
  ulonglong uVar2;
  undefined *puVar3;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iStack20;
  undefined *puStack16;
  undefined *apuStack12 [2];
  int iStack4;
  
  apuStack12[0] = NULL;
  puStack16 = NULL;
  iStack20 = -1;
  iVar7 = -1;
  iVar9 = -1;
  iVar5 = dword_80030AF8;
  do {
    iVar1 = iVar5 * 0x88;
    iVar8 = (&DAT_80071e90)[iVar5 * 0x22];
    if (iVar8 == 0) {
      if (param_1 == 0) {
        iVar8 = iVar5;
        if (param_2 == 0) break;
        iVar5 += 1;
      }
      else {
        iVar5 += 1;
      }
    }
    else {
      if ((*(uint *)(&DAT_80071ee4 + iVar1) & 0x80) == 0) {
        if (((&DAT_80071e82)[iVar1] & 4) == 0) {
          if (*(short *)(&DAT_80071f02 + iVar1) < 1) {
            if (*(int *)(iVar8 + 0x1c) != 0) {
              cVar4 = (&DAT_80071f00)[iVar1];
              goto LAB_7f051324;
            }
LAB_7f05136c:
            iVar6 = iVar5;
            if (param_2 == 0) {
LAB_7f0513a8:
              if (((*(byte *)(iVar8 + 1) & 2) == 0) && (iVar7 < 0)) {
                iVar7 = iVar6;
              }
              iVar8 = iVar6;
              if (-1 < iVar9) {
                iVar5 = iVar6 + 1;
                goto LAB_7f0513d4;
              }
            }
            else {
              iStack4 = iVar5;
              uVar2 = proc_7F06C060(*(int *)(&DAT_80071e94 + iVar1),param_3);
              iVar6 = iStack4;
              iVar8 = iVar9;
              if (uVar2 != 0) {
                iVar8 = (&DAT_80071e90)[iVar5 * 0x22];
                iVar6 = iStack4;
                goto LAB_7f0513a8;
              }
            }
            iVar5 = iVar6 + 1;
            iVar9 = iVar8;
          }
          else {
            cVar4 = (&DAT_80071f00)[iVar1];
LAB_7f051324:
            if (((cVar4 == '\x1d') || (cVar4 == '\x1c')) || (cVar4 == '\x1b')) {
              if (((*(char **)(iVar8 + 0x1c) == NULL) ||
                  (cVar4 = **(char **)(iVar8 + 0x1c), cVar4 == '\x01')) ||
                 ((cVar4 == '\x02' || (cVar4 == '\x04')))) goto LAB_7f05136c;
              iVar5 += 1;
            }
            else {
              iVar5 += 1;
            }
          }
        }
        else {
          iVar5 += 1;
        }
      }
      else {
        iVar5 += 1;
      }
    }
LAB_7f0513d4:
    iVar5 %= 0x1e;
    iVar8 = iStack20;
  } while (iVar5 != dword_80030AF8);
  iStack20 = iVar8;
  if (iStack20 < 0) {
    puVar3 = (undefined *)
             proc_7F056F08(8,(int *)apuStack12,(int *)&puStack16,(longlong)param_1,(int)param_2,
                           param_3);
    if (puVar3 == NULL) {
      if (iVar7 < 0) {
        if (apuStack12[0] == NULL) {
          if (iVar9 < 0) {
            if (puStack16 == NULL) {
              puVar3 = NULL;
            }
            else {
              puVar3 = puStack16;
              if (*(int *)(puStack16 + 0x10) != 0) {
                proc_7F041024((int)puStack16,1);
                puVar3 = puStack16;
              }
            }
          }
          else {
            if ((&DAT_80071e90)[iVar9 * 0x22] != 0) {
              proc_7F041024((int)(&ProjectileData_start_address + iVar9 * 0x88),1);
            }
            dword_80030AF8 = (iVar9 + 1) % 0x1e;
            puVar3 = &ProjectileData_start_address + iVar9 * 0x88;
          }
        }
        else {
          puVar3 = apuStack12[0];
          if (*(int *)(apuStack12[0] + 0x10) != 0) {
            proc_7F041024((int)apuStack12[0],1);
            puVar3 = apuStack12[0];
          }
        }
      }
      else {
        if ((&DAT_80071e90)[iVar7 * 0x22] != 0) {
          proc_7F041024((int)(&ProjectileData_start_address + iVar7 * 0x88),1);
        }
        dword_80030AF8 = (iVar7 + 1) % 0x1e;
        puVar3 = &ProjectileData_start_address + iVar7 * 0x88;
      }
    }
  }
  else {
    dword_80030AF8 = (iStack20 + 1) % 0x1e;
    puVar3 = &ProjectileData_start_address + iStack20 * 0x88;
  }
  return (int)puVar3;
}



int proc_7F051588(void)

{
  int iVar1;
  
  iVar1 = proc_7F05126C(0,0,0);
  return iVar1;
}



int proc_7F0515B0(longlong param_1,longlong param_2,int param_3)

{
  byte bVar1;
  ulonglong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iStack20;
  int iStack16;
  int aiStack12 [2];
  int iStack4;
  
  aiStack12[0] = 0;
  iStack16 = 0;
  iStack20 = -1;
  iVar5 = -1;
  iVar7 = -1;
  iVar3 = dword_80030AFC;
  do {
    iVar4 = (&DAT_80072e80)[iVar3 * 0x20];
    if (iVar4 == 0) {
      if (param_1 == 0) {
        iVar4 = iVar3;
        if (param_2 == 0) break;
        iVar4 = iVar3 + 1;
      }
      else {
        iVar4 = iVar3 + 1;
      }
    }
    else {
      if ((*(uint *)(&DAT_80072ed4 + iVar3 * 0x80) & 0x80) == 0) {
        if (*(int *)(iVar4 + 0x1c) == 0) {
          if (param_2 == 0) {
            bVar1 = *(byte *)(iVar4 + 1);
            iVar4 = iVar3;
LAB_7f051688:
            if (((bVar1 & 2) == 0) && (iVar5 < 0)) {
              iVar5 = iVar4;
            }
            iVar6 = iVar4;
            if (-1 < iVar7) {
              iVar4 += 1;
              goto LAB_7f0516b0;
            }
          }
          else {
            iStack4 = iVar3;
            uVar2 = proc_7F06C060(*(int *)(&DAT_80072e84 + iVar3 * 0x80),param_3);
            param_1 = (longlong)(int)param_1;
            iVar4 = iStack4;
            iVar6 = iVar7;
            if (uVar2 != 0) {
              bVar1 = *(byte *)((&DAT_80072e80)[iVar3 * 0x20] + 1);
              iVar4 = iStack4;
              goto LAB_7f051688;
            }
          }
          iVar4 += 1;
          iVar7 = iVar6;
        }
        else {
          iVar4 = iVar3 + 1;
        }
      }
      else {
        iVar4 = iVar3 + 1;
      }
    }
LAB_7f0516b0:
    iVar3 = iVar4 % 10;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iVar4 == -0x80000000)) {
      trap(0x1800);
    }
    iVar4 = iStack20;
  } while (iVar3 != dword_80030AFC);
  iStack20 = iVar4;
  if (iStack20 < 0) {
    iVar3 = proc_7F056F08(0x11,aiStack12,&iStack16,param_1,(int)param_2,param_3);
    if (iVar3 == 0) {
      if (iVar5 < 0) {
        if (aiStack12[0] == 0) {
          if (iVar7 < 0) {
            if (iStack16 == 0) {
              iVar3 = 0;
            }
            else {
              iVar3 = iStack16;
              if (*(int *)(iStack16 + 0x10) != 0) {
                proc_7F041024(iStack16,1);
                iVar3 = iStack16;
              }
            }
          }
          else {
            if ((&DAT_80072e80)[iVar7 * 0x20] != 0) {
              proc_7F041024(iVar7 * 0x80 + -0x7ff8d190,1);
            }
            dword_80030AFC = (iVar7 + 1) % 10;
            if (false) {
              trap(0x1c00);
            }
            if ((false) && (iVar7 + 1 == -0x80000000)) {
              trap(0x1800);
            }
            iVar3 = iVar7 * 0x80 + -0x7ff8d190;
          }
        }
        else {
          iVar3 = aiStack12[0];
          if (*(int *)(aiStack12[0] + 0x10) != 0) {
            proc_7F041024(aiStack12[0],1);
            iVar3 = aiStack12[0];
          }
        }
      }
      else {
        if ((&DAT_80072e80)[iVar5 * 0x20] != 0) {
          proc_7F041024(iVar5 * 0x80 + -0x7ff8d190,1);
        }
        dword_80030AFC = (iVar5 + 1) % 10;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar5 + 1 == -0x80000000)) {
          trap(0x1800);
        }
        iVar3 = iVar5 * 0x80 + -0x7ff8d190;
      }
    }
  }
  else {
    dword_80030AFC = (iStack20 + 1) % 10;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (iStack20 + 1 == -0x80000000)) {
      trap(0x1800);
    }
    iVar3 = iStack20 * 0x80 + -0x7ff8d190;
  }
  return iVar3;
}



int proc_7F0518A8(void)

{
  int iVar1;
  
  iVar1 = proc_7F0515B0(0,0,0);
  return iVar1;
}



undefined * proc_7F0518D0(void)

{
  int *piVar1;
  int iVar2;
  undefined4 *puVar3;
  
  puVar3 = (undefined4 *)&DAT_80073370;
  iVar2 = 0;
  do {
    piVar1 = puVar3 + 4;
    puVar3 = puVar3 + 0x21;
    if (*piVar1 == 0) {
      return &DAT_80073370 + iVar2;
    }
    iVar2 += 0x84;
  } while (puVar3 < &DAT_80073dc0);
  puVar3 = (undefined4 *)&DAT_80073370;
  iVar2 = 0;
  while (((((puVar3[0x19] & 0x80) != 0 || ((*(byte *)((int)puVar3 + 2) & 4) != 0)) ||
          (*(int *)(puVar3[4] + 0x1c) != 0)) || ((*(byte *)(puVar3[4] + 1) & 2) != 0))) {
    puVar3 = puVar3 + 0x21;
    iVar2 += 0x84;
    if (&DAT_80073dc0 <= puVar3) {
      puVar3 = (undefined4 *)&DAT_80073370;
      iVar2 = 0;
      while ((((puVar3[0x19] & 0x80) != 0 || ((*(byte *)((int)puVar3 + 2) & 4) != 0)) ||
             (*(int *)(puVar3[4] + 0x1c) != 0))) {
        puVar3 = puVar3 + 0x21;
        iVar2 += 0x84;
        if (puVar3 == &DAT_80073dc0) {
          return NULL;
        }
      }
      proc_7F041024((int)puVar3,1);
      return &DAT_80073370 + iVar2;
    }
  }
  proc_7F041024((int)puVar3,1);
  return &DAT_80073370 + iVar2;
}



int ** trigger_remote_mine_detonation(void)

{
  u32 uVar1;
  int **ppiVar2;
  
  uVar1 = get_cur_playernum();
  dword_80030AF4 |= 1 << (uVar1 & 0x1f);
  ppiVar2 = play_sfx_a1(ptr_sfx_buf,0xf3,NULL);
  return ppiVar2;
}



int check_if_entry_is_collectable(char type,char *objposdata)

{
  char *objposdata_00;
  int iVar1;
  
  if (*objposdata == '\x04') {
    if (type == *(char *)(*(int *)(objposdata + 4) + 0x80)) {
      return *(int *)(objposdata + 4);
    }
    objposdata_00 = *(char **)(objposdata + 0x20);
  }
  else {
    objposdata_00 = *(char **)(objposdata + 0x20);
  }
  while( true ) {
    if (objposdata_00 == NULL) {
      return 0;
    }
    iVar1 = check_if_entry_is_collectable(type,objposdata_00);
    if (iVar1 != 0) break;
    objposdata_00 = *(char **)(objposdata_00 + 0x24);
  }
  return iVar1;
}



int check_if_item_deposited(char item)

{
  char *objposdata;
  int iVar1;
  
  objposdata = (char *)get_ptr_obj_pos_list_current_entry();
  while( true ) {
    while( true ) {
      if (objposdata == NULL) {
        return 0;
      }
      iVar1 = check_if_entry_is_collectable(item,objposdata);
      if (iVar1 != 0) break;
      objposdata = *(char **)(objposdata + 0x24);
    }
    if ((*(uint *)(iVar1 + 100) & 0x80) == 0) break;
    objposdata = *(char **)(objposdata + 0x24);
  }
  return iVar1;
}



void add_obj_to_temp_proxmine_table(undefined4 *objdata)

{
  float *pfVar1;
  float fVar2;
  
  pfVar1 = (float *)&DAT_80071e00;
  fVar2 = DAT_80071e00;
  while( true ) {
    if (fVar2 == 0.00000000) {
      *(undefined4 **)pfVar1 = objdata;
      return;
    }
    pfVar1 = pfVar1 + 1;
    if (pfVar1 == &gas_damage_flag) break;
    fVar2 = *pfVar1;
  }
  return;
}



void remove_obj_from_temp_proxmine_table(undefined4 *objdata)

{
  float *pfVar1;
  undefined4 *puVar2;
  
  pfVar1 = (float *)&DAT_80071e00;
  puVar2 = DAT_80071e00;
  while( true ) {
    if (objdata == puVar2) {
      *pfVar1 = 0.00000000;
      return;
    }
    pfVar1 = pfVar1 + 1;
    if (pfVar1 == &gas_damage_flag) break;
    puVar2 = (undefined4 *)*pfVar1;
  }
  return;
}



void detonate_proxmine_within_range(float (*xyzpos) [3])

{
  float fVar1;
  float fVar2;
  float *pfVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar1 = flt_800532EC;
  pfVar3 = (float *)&DAT_80071e00;
  fVar2 = DAT_80071e00;
  while( true ) {
    if (fVar2 == 0.00000000) {
      fVar2 = pfVar3[1];
    }
    else {
      if (*(short *)((int)fVar2 + 0x82) == 1) {
        fVar4 = (*xyzpos)[0] - *(float *)((int)fVar2 + 0x58);
        fVar5 = (*xyzpos)[1] - *(float *)((int)fVar2 + 0x5c);
        fVar6 = (*xyzpos)[2] - *(float *)((int)fVar2 + 0x60);
        if (fVar4 * fVar4 + fVar5 * fVar5 + fVar6 * fVar6 < fVar1) {
          *(undefined2 *)((int)fVar2 + 0x82) = 0;
          fVar2 = pfVar3[1];
        }
        else {
          fVar2 = pfVar3[1];
        }
      }
      else {
        fVar2 = pfVar3[1];
      }
    }
    pfVar3 = pfVar3 + 2;
    if (((fVar2 != 0.00000000) && (*(short *)((int)fVar2 + 0x82) == 1)) &&
       (fVar4 = (*xyzpos)[0] - *(float *)((int)fVar2 + 0x58),
       fVar5 = (*xyzpos)[1] - *(float *)((int)fVar2 + 0x5c),
       fVar6 = (*xyzpos)[2] - *(float *)((int)fVar2 + 0x60),
       fVar4 * fVar4 + fVar5 * fVar5 + fVar6 * fVar6 < fVar1)) {
      *(undefined2 *)((int)fVar2 + 0x82) = 0;
    }
    if (pfVar3 == &gas_damage_flag) break;
    fVar2 = *pfVar3;
  }
  return;
}



void proc_7F051CC8(void)

{
  int iVar1;
  char *pcVar2;
  int iVar3;
  float xyz [6];
  
  iVar1 = get_numguards();
  iVar3 = 0;
  if (0 < iVar1) {
    do {
      pcVar2 = &ptr_guard_data->guardID_1 + iVar3;
      if ((*(int *)(pcVar2 + 0x1c) != 0) && ((*(ushort *)(pcVar2 + 0x12) & 0x200) != 0)) {
        proc_7F028894((int)pcVar2,(float *)(float (*) [3])xyz);
        detonate_proxmine_within_range((float (*) [3])xyz);
      }
      iVar3 += 0x1dc;
    } while (iVar3 < iVar1 * 0x1dc);
  }
  return;
}



void link_objects(int *objdata1,int *objdata2)

{
  undefined uVar1;
  undefined uVar2;
  
  uVar1 = *(undefined *)(objdata2 + 0x20);
  uVar2 = *(undefined *)(objdata1 + 0x20);
  *(int **)(objdata1 + 0x21) = objdata2;
  *(undefined *)((int)objdata1 + 0x81) = uVar1;
  *(int **)(objdata2 + 0x21) = objdata1;
  *(undefined *)((int)objdata2 + 0x81) = uVar2;
  return;
}



undefined *
complete_object_data_block_return_position_entry
          (int *objdata,int *modelheader,int *targetposdata,int controller)

{
  undefined *puVar1;
  
  puVar1 = init_standard_object
                     ((int)objdata,(ushort **)modelheader,(undefined *)targetposdata,controller);
  if (puVar1 != NULL) {
    *puVar1 = 4;
    proc_7F052574((int)puVar1,0);
  }
  return puVar1;
}



undefined * proc_7F051DD8(int param_1,ushort **param_2)

{
  undefined *puVar1;
  
  puVar1 = proc_7F0406F8(param_1,param_2);
  if (puVar1 != NULL) {
    *puVar1 = 4;
    proc_7F052574((int)puVar1,0);
  }
  return puVar1;
}



undefined8 proc_7F051E1C(int param_1,int param_2)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  
  bVar1 = *(int *)(param_1 + 8) << 3 < 0;
  iVar2 = *(int *)(param_1 + 0x10);
  if (iVar2 != 0) {
    if (*(int *)(param_1 + 0x14) != 0) {
      if (-1 < *(int *)(param_1 + 8) << 2) {
        uVar3 = (uint)bVar1;
        iVar2 = param_2 + uVar3 * 4;
        if (*(int *)(iVar2 + 0x160) != 0) {
          return 0;
        }
        *(undefined4 *)(*(int *)(param_1 + 0x14) + 0x18) = *(undefined4 *)(param_2 + 0x1c);
        if (bVar1) {
          *(undefined4 *)(*(int *)(param_1 + 0x14) + 0x1c) =
               *(undefined4 *)(*(int *)(*(int *)(*(int *)(param_2 + 0x1c) + 8) + 8) + 0x14);
        }
        else {
          *(undefined4 *)(*(int *)(param_1 + 0x14) + 0x1c) =
               *(undefined4 *)(*(int *)(*(int *)(*(int *)(param_2 + 0x1c) + 8) + 8) + 0xc);
        }
        *(undefined4 *)(iVar2 + 0x160) = *(undefined4 *)(param_1 + 0x10);
        if ((*(int *)(param_1 + 8) < 0) &&
           (iVar2 = *(int *)(param_2 + uVar3 * -4 + 0x164), iVar2 != 0)) {
          link_objects((int *)param_1,*(int **)(iVar2 + 4));
        }
        iVar2 = *(int *)(param_1 + 0x10);
      }
      proc_7F03A5A4(iVar2,*(int *)(param_2 + 0x18));
    }
  }
  return 1;
}



undefined *
proc_7F051F30(ushort *param_1,int param_2,ushort **param_3,undefined *param_4,uint param_5)

{
  undefined *puVar1;
  f32 scale;
  
  puVar1 = complete_object_data_block_return_position_entry
                     ((int *)param_1,(int *)param_3,(int *)param_4,param_5);
  if ((puVar1 != NULL) && (*(int *)(param_1 + 10) != 0)) {
    set_obj_instance_controller_scale(*(int *)(param_1 + 10),scale);
    proc_7F051E1C((int)param_1,param_2);
  }
  return puVar1;
}



undefined * proc_7F051FD4(ushort *param_1,int param_2)

{
  ushort uVar1;
  undefined *puVar2;
  
  uVar1 = param_1[2];
  load_model((int)(short)uVar1);
  puVar2 = proc_7F051F30(param_1,param_2,(ushort **)PitemZ_entries[(int)(short)uVar1].header,NULL,0)
  ;
  return puVar2;
}



undefined * proc_7F052030(ushort *param_1,int param_2)

{
  undefined *puVar1;
  
  *(float *)(param_1 + 0x3a) = (float)*(int *)(param_1 + 0x3a) / 65536.00000000;
  puVar1 = proc_7F051FD4(param_1,param_2);
  return puVar1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 * create_new_item_instance_of_model(int model,int iteminstance)

{
  object_standard *targetposdata;
  int *ptrobjinstance;
  int *piVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  int *objdata;
  object_standard *poVar5;
  object_standard *poVar6;
  int aiStack152 [33];
  int aiStack20 [2];
  int *local_c;
  PitemZ_header *local_4;
  
  local_4 = PitemZ_entries[model].header;
  load_model(model);
  targetposdata = remove_last_obj_pos_data_entry();
  local_c = (int *)get_obj_instance_controller_for_header(local_4);
  objdata = (int *)proc_7F05126C((uint)(targetposdata == NULL),(ulonglong)(local_c == NULL),
                                 (int)local_4);
  if (targetposdata == NULL) {
    targetposdata = remove_last_obj_pos_data_entry();
  }
  ptrobjinstance = local_c;
  if (local_c == NULL) {
    ptrobjinstance = (int *)get_obj_instance_controller_for_header(local_4);
  }
  if (((objdata == NULL) || (targetposdata == NULL)) || (ptrobjinstance == NULL)) {
    objdata = NULL;
    if (ptrobjinstance != NULL) {
      set_obj_instance_scale_to_zero(ptrobjinstance);
    }
    if (targetposdata != NULL) {
      set_last_obj_pos_data(targetposdata);
    }
  }
  else {
    poVar5 = &blank_08_object_preset_1;
    piVar3 = aiStack152;
    do {
      poVar6 = (object_standard *)&poVar5->FLAGS5;
      piVar1 = piVar3 + 3;
      *piVar3 = *(int *)poVar5;
      piVar3[1] = *(int *)&poVar5->objectID;
      piVar3[2] = *(int *)&poVar5->FLAGS1;
      poVar5 = poVar6;
      piVar3 = piVar1;
    } while (poVar6 != (object_standard *)&dword_80032218);
    *piVar1 = _dword_80032218;
    piVar3 = objdata;
    piVar1 = aiStack152;
    do {
      piVar2 = piVar1 + 3;
      piVar4 = piVar3 + 3;
      *piVar3 = *piVar1;
      piVar3[1] = piVar1[1];
      piVar3[2] = piVar1[2];
      piVar3 = piVar4;
      piVar1 = piVar2;
    } while (piVar2 != aiStack20);
    *piVar4 = *piVar2;
    *(char *)(objdata + 0x20) = (char)iteminstance;
    *(short *)(objdata + 1) = (short)model;
    complete_object_data_block_return_position_entry
              (objdata,(int *)local_4,(int *)targetposdata,(int)ptrobjinstance);
  }
  return (undefined4 *)objdata;
}



void set_0x4_in_runtime_flags_for_item_in_guards_hand(int *GUARDdata,int hand)

{
  int iVar1;
  
  if (GUARDdata[hand + 0x58] != 0) {
    iVar1 = *(int *)(GUARDdata[hand + 0x58] + 4);
    *(uint *)(iVar1 + 100) = *(uint *)(iVar1 + 100) | 4;
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined *
create_held_weapon(undefined2 *param_1,int param_2,undefined param_3,uint param_4,
                  undefined4 *param_5,ushort **param_6)

{
  undefined *ret;
  object_standard *poVar1;
  object_standard *poVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  int *ptrobjinstance;
  undefined4 *puVar5;
  undefined4 *puVar6;
  undefined4 auStack144 [33];
  undefined4 auStack12 [3];
  
  if (param_6 == NULL) {
    param_6 = (ushort **)PitemZ_entries[param_2].header;
    load_model(param_2);
  }
  ret = (undefined *)remove_last_obj_pos_data_entry();
  ptrobjinstance = (int *)get_obj_instance_controller_for_header((PitemZ_header *)param_6);
  if (param_5 == NULL) {
    param_5 = (undefined4 *)
              proc_7F05126C((uint)((object_standard *)ret == NULL),
                            (ulonglong)(ptrobjinstance == NULL),(int)param_6);
  }
  if ((object_standard *)ret == NULL) {
    ret = (undefined *)remove_last_obj_pos_data_entry();
  }
  if (ptrobjinstance == NULL) {
    ptrobjinstance = (int *)get_obj_instance_controller_for_header((PitemZ_header *)param_6);
  }
  if (((param_5 == NULL) || ((object_standard *)ret == NULL)) || (ptrobjinstance == NULL)) {
    if (ptrobjinstance != NULL) {
      set_obj_instance_scale_to_zero(ptrobjinstance);
    }
    if ((object_standard *)ret != NULL) {
      set_last_obj_pos_data((object_standard *)ret);
      ret = NULL;
    }
  }
  else {
    poVar1 = &blank_08_object_preset_4001;
    puVar5 = auStack144;
    do {
      poVar2 = (object_standard *)&poVar1->FLAGS5;
      puVar3 = puVar5 + 3;
      *puVar5 = *(undefined4 *)poVar1;
      puVar5[1] = *(undefined4 *)&poVar1->objectID;
      puVar5[2] = *(undefined4 *)&poVar1->FLAGS1;
      poVar1 = poVar2;
      puVar5 = puVar3;
    } while (poVar2 != (object_standard *)&dword_800322A0);
    *puVar3 = _dword_800322A0;
    puVar5 = param_5;
    puVar3 = auStack144;
    do {
      puVar4 = puVar3 + 3;
      puVar6 = puVar5 + 3;
      *puVar5 = *puVar3;
      puVar5[1] = puVar3[1];
      puVar5[2] = puVar3[2];
      puVar5 = puVar6;
      puVar3 = puVar4;
    } while (puVar4 != auStack12);
    *puVar6 = *puVar4;
    *(undefined *)(param_5 + 0x20) = param_3;
    *(short *)(param_5 + 1) = (short)param_2;
    param_5[2] = param_4 | 0x4000;
    *(undefined2 *)((int)param_5 + 6) = *param_1;
    ret = proc_7F051F30((ushort *)param_5,(int)param_1,param_6,ret,(uint)ptrobjinstance);
  }
  return ret;
}



undefined *
actor_draws_weapon_with_model(undefined2 *param_1,int param_2,undefined param_3,uint param_4)

{
  undefined *puVar1;
  
  puVar1 = create_held_weapon(param_1,param_2,param_3,param_4,NULL,NULL);
  return puVar1;
}



void proc_7F0523F8(int param_1,int param_2,int **param_3)

{
  int iVar1;
  uint objinst;
  int iVar2;
  int iVar3;
  int *piVar4;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  float **ppfVar5;
  float **ppfVar6;
  byte bVar7;
  float **ppfVar8;
  float **ppfVar9;
  float afStack152 [18];
  float *apfStack80 [4];
  float *pfStack64;
  GUARDdata *pGStack4;
  
  pGStack4 = *(GUARDdata **)(param_1 + 4);
  iVar3 = something_with_weaponpos_of_guarddata_hand(pGStack4,param_2);
  if (iVar3 != 0) {
    iVar1 = *(int *)(iVar3 + 4);
    if ((*(uint *)(iVar1 + 100) & 0x800) == 0) {
      if (-1 < *(int *)(iVar1 + 0xc) << 0xc) {
        objinst = *(uint *)(iVar1 + 0x14);
        ppfVar8 = (float **)&dword_800322A4;
        ppfVar5 = apfStack80;
        do {
          ppfVar9 = ppfVar8 + 3;
          ppfVar6 = ppfVar5 + 3;
          *ppfVar5 = *ppfVar8;
          ppfVar5[1] = ppfVar8[1];
          ppfVar5[2] = ppfVar8[2];
          ppfVar8 = ppfVar9;
          ppfVar5 = ppfVar6;
        } while (ppfVar9 != (float **)0x800322e0);
        *ppfVar6 = pfRam800322e0;
        iVar2 = pGStack4->MODELdata_pointer;
        *(byte *)(iVar3 + 1) = *(byte *)(iVar3 + 1) | 2;
        pfStack64 = (float *)proc_7F06C660(iVar2,*(ushort **)(objinst + 0x1c),0);
        apfStack80[0] = pfStack64;
        if (param_2 == 1) {
          apfStack80[0] = pfStack64;
          proc_7F058688(flt_800532F0,extraout_a0,afStack152);
          proc_7F058068(apfStack80[0],afStack152);
          apfStack80[0] = afStack152;
        }
        proc_7F0BD714((int)*(short *)(*(int *)(objinst + 8) + 0xe) << 6);
        instcalcmatrices(apfStack80,objinst,extraout_a2_lo,extraout_a3_lo);
        if (param_3 == NULL) {
          return;
        }
        if ((*(uint *)(iVar1 + 100) & 0x80) != 0) {
          return;
        }
        piVar4 = proc_7F06B120(*param_3,objinst);
        *param_3 = piVar4;
        return;
      }
      bVar7 = *(byte *)(iVar3 + 1);
    }
    else {
      bVar7 = *(byte *)(iVar3 + 1);
    }
    *(byte *)(iVar3 + 1) = bVar7 & 0xfd;
  }
  return;
}



void redirect_object_collectability_routines(void)

{
  object_collectability_routine();
  return;
}



void proc_7F052574(int param_1,undefined4 param_2)

{
  int objinst;
  ushort **ppuVar1;
  undefined2 *puVar2;
  undefined4 *puVar3;
  ushort *partdesc;
  
  objinst = *(int *)(*(int *)(param_1 + 4) + 0x14);
  if ((objinst != 0) && (*(item_related **)(*(int *)(objinst + 8) + 4) == &prop_weapon_related)) {
    ppuVar1 = *(ushort ***)(*(int *)(objinst + 8) + 8);
    partdesc = *ppuVar1;
    if (partdesc == NULL) {
      partdesc = ppuVar1[2];
    }
    else {
      puVar2 = (undefined2 *)extract_id_from_object_structure_microcode(objinst,partdesc);
      *puVar2 = (short)param_2;
      partdesc = *(ushort **)(*(int *)(*(int *)(objinst + 8) + 8) + 8);
    }
    if (partdesc != NULL) {
      puVar3 = (undefined4 *)extract_id_from_object_structure_microcode(objinst,partdesc);
      *puVar3 = param_2;
    }
  }
  return;
}



longlong proc_7F052604(int param_1)

{
  int objinst;
  ushort **ppuVar1;
  ushort *partdesc;
  longlong lVar2;
  short *psVar3;
  int *piVar4;
  
  objinst = *(int *)(*(int *)(param_1 + 4) + 0x14);
  if (objinst == 0) {
    lVar2 = 0;
  }
  else {
    if (*(item_related **)(*(int *)(objinst + 8) + 4) == &prop_weapon_related) {
      ppuVar1 = *(ushort ***)(*(int *)(objinst + 8) + 8);
      partdesc = *ppuVar1;
      if (partdesc == NULL) {
        partdesc = ppuVar1[2];
        if (partdesc == NULL) {
          lVar2 = 0;
        }
        else {
          piVar4 = (int *)extract_id_from_object_structure_microcode(objinst,partdesc);
          lVar2 = (longlong)*piVar4;
        }
      }
      else {
        psVar3 = (short *)extract_id_from_object_structure_microcode(objinst,partdesc);
        lVar2 = (longlong)*psVar3;
      }
    }
    else {
      lVar2 = 0;
    }
  }
  return lVar2;
}



undefined8 get_hat_model(int param_1)

{
  switch(*(undefined2 *)(*(int *)(param_1 + 4) + 4)) {
  case 0xd4:
  case 0xd5:
  case 0xd6:
    return 4;
  case 0xd7:
  case 0xd8:
    return 1;
  case 0xd9:
  case 0xda:
    return 3;
  case 0xdb:
    return 5;
  case 0xdc:
  case 0xdd:
  case 0xde:
    return 0;
  case 0xdf:
    return 2;
  default:
    return 0xffffffffffffffff;
  }
}



void proc_7F0526EC(int param_1,float *param_2)

{
  short sVar1;
  float *pfVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 uVar3;
  ushort uVar4;
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float afStack64 [16];
  
  sVar1 = *(short *)(param_1 + 0x9a);
  if ((sVar1 == 5) || (sVar1 == 9)) {
    pfVar2 = (float *)(ptr_2xxxpresets + (int)*(short *)(param_1 + 6) * 0x44);
    fStack104 = pfVar2[4] * pfVar2[8] - pfVar2[7] * pfVar2[5];
    fStack100 = pfVar2[5] * pfVar2[6] - pfVar2[8] * pfVar2[3];
    fStack96 = pfVar2[3] * pfVar2[7] - pfVar2[6] * pfVar2[4];
    fStack76 = pfVar2[3] * pfVar2[0xd] + *pfVar2;
    fStack72 = pfVar2[4] * pfVar2[0xd] + pfVar2[1];
    fStack68 = pfVar2[5] * pfVar2[0xd] + pfVar2[2];
    if (*(short *)(param_1 + 0x9a) == 9) {
      fStack76 = fStack76 + fStack104 * pfVar2[0xc];
      fStack72 = fStack72 + fStack100 * pfVar2[0xc];
      fStack68 = fStack68 + fStack96 * pfVar2[0xc];
    }
    else {
      if (*(int *)(param_1 + 8) << 2 < 0) {
        fStack76 = fStack76 + fStack104 * pfVar2[0xc];
        fStack72 = fStack72 + fStack100 * pfVar2[0xc];
        fStack68 = fStack68 + fStack96 * pfVar2[0xc];
      }
      else {
        fStack76 = fStack76 + fStack104 * pfVar2[0xb];
        fStack72 = fStack72 + fStack100 * pfVar2[0xb];
        fStack68 = fStack68 + fStack96 * pfVar2[0xb];
      }
    }
    fStack88 = *(float *)(param_1 + 0x58) - fStack76;
    fStack84 = *(float *)(param_1 + 0x5c) - fStack72;
    fStack80 = *(float *)(param_1 + 0x60) - fStack68;
    proc_7F058020((undefined4 *)(param_1 + 0x18),param_2);
    init_something_copy_posdata_to_it((int *)&fStack88,(int *)afStack64);
    proc_7F058068(afStack64,param_2);
    if (*(short *)(param_1 + 0x9a) == 9) {
      if (*(int *)(param_1 + 8) << 2 < 0) {
        proc_7F058688(flt_80053324 - (*(float *)(param_1 + 0xb4) * flt_80053324) / 360.00000000,
                      extraout_a0,afStack64);
      }
      else {
        proc_7F058688((*(float *)(param_1 + 0xb4) * flt_80053328) / 360.00000000,extraout_a0,
                      afStack64);
      }
    }
    else {
      if (*(int *)(param_1 + 8) << 2 < 0) {
        proc_7F0585FC(flt_8005332C - (*(float *)(param_1 + 0xb4) * flt_8005332C) / 360.00000000,
                      extraout_a0,afStack64);
      }
      else {
        proc_7F0585FC((*(float *)(param_1 + 0xb4) * flt_80053330) / 360.00000000,extraout_a0,
                      afStack64);
      }
    }
    proc_7F058068(afStack64,param_2);
    init_something_copy_posdata_to_it((int *)&fStack76,(int *)afStack64);
    proc_7F058068(afStack64,param_2);
    uVar4 = *(ushort *)(param_1 + 0x98);
    uVar3 = extraout_a0_00;
  }
  else {
    if ((sVar1 == 6) || (sVar1 == 7)) {
      proc_7F058020((undefined4 *)(param_1 + 0x18),param_2);
      proc_7F058998((undefined4 *)(param_1 + 0x58),(int)param_2);
      uVar4 = *(ushort *)(param_1 + 0x98);
      uVar3 = extraout_a0_01;
    }
    else {
      fStack116 = *(float *)(param_1 + 0xa8) * *(float *)(param_1 + 0xb4) +
                  *(float *)(param_1 + 0x58);
      fStack112 = *(float *)(param_1 + 0xac) * *(float *)(param_1 + 0xb4) +
                  *(float *)(param_1 + 0x5c);
      fStack108 = *(float *)(param_1 + 0xb0) * *(float *)(param_1 + 0xb4) +
                  *(float *)(param_1 + 0x60);
      proc_7F058020((undefined4 *)(param_1 + 0x18),param_2);
      proc_7F058998(&fStack116,(int)param_2);
      uVar4 = *(ushort *)(param_1 + 0x98);
      uVar3 = extraout_a0_02;
    }
  }
  if ((uVar4 & 8) != 0) {
    proc_7F058A4C(-1.00000000,uVar3,(int)param_2);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f052cc8) overlaps instruction at (ram,0x7f052cc4)
// 

void proc_7F052B00(int param_1)

{
  short sVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  float fVar4;
  float afStack68 [13];
  float fStack16;
  
  puVar3 = (undefined4 *)(param_1 + 0xd0);
  puVar2 = *(undefined4 **)(*(int *)(**(int **)(*(int *)(param_1 + 0x14) + 8) + 0x14) + 4);
  *puVar3 = *puVar2;
  *(undefined4 *)(param_1 + 0xd4) = puVar2[1];
  *(undefined4 *)(param_1 + 0xd8) = puVar2[2];
  *(undefined4 *)(param_1 + 0xdc) = puVar2[3];
  *(undefined4 *)(param_1 + 0xe0) = puVar2[4];
  *(undefined4 *)(param_1 + 0xe4) = puVar2[5];
  *(undefined4 *)(param_1 + 0xe8) = puVar2[6];
  if ((*(ushort *)(param_1 + 0x98) & 4) == 0) {
    fVar4 = *(float *)(param_1 + 0xb4);
  }
  else {
    if (*(short *)(param_1 + 0x9a) == 4) {
      *(float *)(param_1 + 0xe0) =
           (float)puVar2[4] + ((float)puVar2[3] - (float)puVar2[4]) * *(float *)(param_1 + 0xb4);
    }
    else {
      *(float *)(param_1 + 0xd4) =
           (float)puVar2[1] + ((float)puVar2[2] - (float)puVar2[1]) * *(float *)(param_1 + 0xb4);
    }
    fVar4 = *(float *)(param_1 + 0xb4);
  }
  if (*(float *)(param_1 + 0x88) <= fVar4) {
    **(undefined4 **)(param_1 + 0x68) = 0;
    return;
  }
  proc_7F0526EC(param_1,afStack68);
  proc_7F03F540((longlong)(int)puVar3,(longlong)(int)afStack68,
                (float *)(*(uint **)(param_1 + 0x68) + 1),*(uint **)(param_1 + 0x68));
  if (*(short *)(param_1 + 0x9a) == 4) {
    fVar4 = proc_7F03E9BC((int)puVar3,(int)afStack68);
    *(float *)(*(int *)(param_1 + 0x68) + 0x48) = fVar4 + *(float *)(param_1 + 0x5c);
  }
  else {
    if (*(short *)(param_1 + 0x9a) == 8) {
      *(float *)(*(int *)(param_1 + 0x68) + 0x48) = *(float *)(param_1 + 0x5c) - flt_80053334;
    }
    else {
      fVar4 = proc_7F03E9BC((int)puVar3,(int)afStack68);
      *(float *)(*(int *)(param_1 + 0x68) + 0x48) = fVar4 + fStack16;
      if ((*(ushort *)(param_1 + 0x98) & 1) == 0) {
        sVar1 = *(short *)(param_1 + 0x9a);
        goto LAB_7f052ca0;
      }
      *(float *)(*(int *)(param_1 + 0x68) + 0x48) =
           *(float *)(*(int *)(param_1 + 0x68) + 0x48) - 1000.00000000;
    }
  }
  sVar1 = *(short *)(param_1 + 0x9a);
LAB_7f052ca0:
  if (((sVar1 == 6) && (flt_80053338 * *(float *)(param_1 + 0x84) < *(float *)(param_1 + 0xb4))) ||
     ((sVar1 == 7 && (flt_8005333C * *(float *)(param_1 + 0x84) < *(float *)(param_1 + 0xb4))))) {
    *(float *)(*(int *)(param_1 + 0x68) + 0x44) =
         *(float *)(*(int *)(param_1 + 0x68) + 0x48) + 50.00000000;
  }
  else {
    if (sVar1 == 8) {
      *(float *)(*(int *)(param_1 + 0x68) + 0x44) = *(float *)(param_1 + 0x5c) + 1000.00000000;
    }
    else {
      fVar4 = proc_7F03EA5C((int)puVar3,(int)afStack68);
      *(float *)(*(int *)(param_1 + 0x68) + 0x44) = fVar4 + fStack16;
      if ((*(ushort *)(param_1 + 0x98) & 1) != 0) {
        *(float *)(*(int *)(param_1 + 0x68) + 0x44) =
             *(float *)(*(int *)(param_1 + 0x68) + 0x44) + 1000.00000000;
      }
    }
  }
  return;
}



void proc_7F052D8C(int param_1)

{
  short sVar1;
  short sVar2;
  ushort *partdesc;
  int iVar3;
  int iVar4;
  int **ppiVar5;
  int **ppiVar6;
  uint uVar7;
  uint uVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  int iVar12;
  undefined4 *puVar13;
  undefined4 *puVar14;
  short sVar15;
  uint uVar16;
  short sVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  uint uVar20;
  uint uVar21;
  int iVar22;
  int iVar23;
  undefined4 *puVar24;
  
  if ((*(ushort *)(param_1 + 0x98) & 4) != 0) {
    partdesc = *(ushort **)(*(int *)(**(int **)(*(int *)(param_1 + 0x14) + 8) + 0x14) + 0x14);
    iVar3 = *(int *)(partdesc + 2);
    ppiVar5 = (int **)extract_id_from_object_structure_microcode(*(int *)(param_1 + 0x14),partdesc);
    if (*(short *)(param_1 + 0x9a) == 4) {
      sVar15 = (short)(int)(*(float *)(param_1 + 0xe0) + 0.50000000);
    }
    else {
      sVar15 = (short)(int)(*(float *)(param_1 + 0xd4) + 0.50000000);
    }
    ppiVar6 = ppiVar5;
    proc_7F0BD6C4((int)*(short *)(iVar3 + 0xc));
    *(int ***)ppiVar5 = ppiVar6;
    iVar23 = 0;
    iVar4 = (int)*(short *)(iVar3 + 0xc);
    if (*(short *)(iVar3 + 0xc) < 0) {
      iVar4 += 3;
    }
    if (0 < iVar4 >> 2) {
      do {
        uVar7 = 0;
        do {
          iVar4 = (int)(*ppiVar5 + iVar23 * 4);
          uVar20 = uVar7 + 1;
          puVar14 = (undefined4 *)(iVar4 + uVar7 * 0x10);
          uVar8 = uVar20 & 3;
          if (((int)uVar20 < 0) && (uVar8 != 0)) {
            uVar8 -= 4;
          }
          puVar24 = (undefined4 *)(iVar4 + uVar8 * 0x10);
          uVar16 = uVar7 + 2 & 3;
          if (((int)(uVar7 + 2) < 0) && (uVar16 != 0)) {
            uVar16 -= 4;
          }
          puVar18 = (undefined4 *)(iVar4 + uVar16 * 0x10);
          iVar12 = *(int *)(iVar3 + 8) + iVar23 * 0x10;
          uVar21 = uVar7 + 3 & 3;
          if (((int)(uVar7 + 3) < 0) && (uVar21 != 0)) {
            uVar21 -= 4;
          }
          puVar13 = (undefined4 *)(iVar12 + uVar16 * 0x10);
          puVar19 = (undefined4 *)(iVar4 + uVar21 * 0x10);
          puVar9 = (undefined4 *)(iVar12 + uVar7 * 0x10);
          puVar11 = (undefined4 *)(iVar12 + uVar8 * 0x10);
          puVar10 = (undefined4 *)(iVar12 + uVar21 * 0x10);
          if (uVar7 == 0) {
            *puVar14 = *puVar9;
            puVar14[1] = puVar9[1];
            puVar14[2] = puVar9[2];
            puVar14[3] = puVar9[3];
            *puVar24 = *puVar11;
            puVar24[1] = puVar11[1];
            puVar24[2] = puVar11[2];
            puVar24[3] = puVar11[3];
            *puVar18 = *puVar13;
            puVar18[1] = puVar13[1];
            puVar18[2] = puVar13[2];
            puVar18[3] = puVar13[3];
            *puVar19 = *puVar10;
            puVar19[1] = puVar10[1];
            puVar19[2] = puVar10[2];
            puVar19[3] = puVar10[3];
          }
          iVar4 = (int)sVar15;
          if (*(short *)(param_1 + 0x9a) == 4) {
            sVar1 = *(short *)((int)puVar9 + 2);
            if (sVar15 <= sVar1) {
              sVar2 = *(short *)puVar9;
              if (*(short *)puVar11 == sVar2) {
                if (*(short *)(puVar11 + 1) != *(short *)(puVar9 + 1)) {
                  sVar17 = *(short *)puVar13;
                  goto LAB_7f0530a4;
                }
                if (*(short *)((int)puVar11 + 2) == sVar1) {
                  sVar17 = *(short *)puVar13;
                  goto LAB_7f0530a4;
                }
                iVar4 = ((int)sVar1 - (int)sVar15) *
                        ((int)*(short *)(puVar11 + 2) - (int)*(short *)(puVar9 + 2));
                iVar12 = (int)sVar1 - (int)*(short *)((int)puVar11 + 2);
                *(short *)(puVar14 + 2) = (short)(iVar4 / iVar12) + *(short *)(puVar9 + 2);
                if (iVar12 == 0) {
                  trap(0x1c00);
                }
                if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                  trap(0x1800);
                }
                iVar4 = ((int)*(short *)((int)puVar9 + 2) - (int)sVar15) *
                        ((int)*(short *)((int)puVar11 + 10) - (int)*(short *)((int)puVar9 + 10));
                iVar12 = (int)*(short *)((int)puVar9 + 2) - (int)*(short *)((int)puVar11 + 2);
                if (iVar12 == 0) {
                  trap(0x1c00);
                }
                if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                  trap(0x1800);
                }
                *(short *)((int)puVar14 + 10) =
                     (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
              }
              else {
                sVar17 = *(short *)puVar13;
LAB_7f0530a4:
                iVar12 = (int)sVar1;
                if (sVar17 == sVar2) {
                  if (*(short *)(puVar13 + 1) == *(short *)(puVar9 + 1)) {
                    if (*(short *)((int)puVar13 + 2) != sVar1) {
                      iVar22 = (iVar12 - iVar4) *
                               ((int)*(short *)(puVar13 + 2) - (int)*(short *)(puVar9 + 2));
                      iVar12 -= (int)*(short *)((int)puVar13 + 2);
                      *(short *)(puVar14 + 2) = (short)(iVar22 / iVar12) + *(short *)(puVar9 + 2);
                      if (iVar12 == 0) {
                        trap(0x1c00);
                      }
                      if ((iVar12 == -1) && (iVar22 == -0x80000000)) {
                        trap(0x1800);
                      }
                      iVar4 = ((int)*(short *)((int)puVar9 + 2) - iVar4) *
                              ((int)*(short *)((int)puVar13 + 10) -
                              (int)*(short *)((int)puVar9 + 10));
                      iVar12 = (int)*(short *)((int)puVar9 + 2) - (int)*(short *)((int)puVar13 + 2);
                      if (iVar12 == 0) {
                        trap(0x1c00);
                      }
                      if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                        trap(0x1800);
                      }
                      *(short *)((int)puVar14 + 10) =
                           (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
                      goto LAB_7f053268;
                    }
                    sVar17 = *(short *)puVar10;
                  }
                  else {
                    sVar17 = *(short *)puVar10;
                  }
                }
                else {
                  sVar17 = *(short *)puVar10;
                }
                if (((sVar17 == sVar2) && (*(short *)(puVar10 + 1) == *(short *)(puVar9 + 1))) &&
                   (*(short *)((int)puVar10 + 2) != sVar1)) {
                  iVar22 = (iVar12 - iVar4) *
                           ((int)*(short *)(puVar10 + 2) - (int)*(short *)(puVar9 + 2));
                  iVar12 -= (int)*(short *)((int)puVar10 + 2);
                  *(short *)(puVar14 + 2) = (short)(iVar22 / iVar12) + *(short *)(puVar9 + 2);
                  if (iVar12 == 0) {
                    trap(0x1c00);
                  }
                  if ((iVar12 == -1) && (iVar22 == -0x80000000)) {
                    trap(0x1800);
                  }
                  iVar4 = ((int)*(short *)((int)puVar9 + 2) - iVar4) *
                          ((int)*(short *)((int)puVar10 + 10) - (int)*(short *)((int)puVar9 + 10));
                  iVar12 = (int)*(short *)((int)puVar9 + 2) - (int)*(short *)((int)puVar10 + 2);
                  *(short *)((int)puVar14 + 10) =
                       (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
                  if (iVar12 == 0) {
                    trap(0x1c00);
                  }
                  if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                    trap(0x1800);
                  }
                }
              }
LAB_7f053268:
              *(short *)((int)puVar14 + 2) = sVar15;
            }
          }
          else {
            sVar1 = *(short *)puVar9;
            if (sVar1 <= sVar15) {
              sVar2 = *(short *)((int)puVar9 + 2);
              iVar12 = (int)sVar15;
              if (*(short *)((int)puVar11 + 2) == sVar2) {
                if (*(short *)(puVar11 + 1) == *(short *)(puVar9 + 1)) {
                  if (*(short *)puVar11 != sVar1) {
                    iVar4 = (iVar12 - (int)sVar1) *
                            ((int)*(short *)(puVar11 + 2) - (int)*(short *)(puVar9 + 2));
                    iVar22 = (int)*(short *)puVar11 - (int)sVar1;
                    *(short *)(puVar14 + 2) = (short)(iVar4 / iVar22) + *(short *)(puVar9 + 2);
                    if (iVar22 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar22 == -1) && (iVar4 == -0x80000000)) {
                      trap(0x1800);
                    }
                    iVar4 = (iVar12 - (int)*(short *)puVar9) *
                            ((int)*(short *)((int)puVar11 + 10) - (int)*(short *)((int)puVar9 + 10))
                    ;
                    iVar12 = (int)*(short *)puVar11 - (int)*(short *)puVar9;
                    if (iVar12 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                      trap(0x1800);
                    }
                    *(short *)((int)puVar14 + 10) =
                         (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
                    *(short *)puVar14 = sVar15;
                    goto LAB_7f053538;
                  }
                  sVar17 = *(short *)((int)puVar13 + 2);
                }
                else {
                  sVar17 = *(short *)((int)puVar13 + 2);
                }
              }
              else {
                sVar17 = *(short *)((int)puVar13 + 2);
              }
              iVar22 = (int)sVar1;
              if (sVar17 == sVar2) {
                if (*(short *)(puVar13 + 1) == *(short *)(puVar9 + 1)) {
                  if (*(short *)puVar13 != sVar1) {
                    iVar4 = (iVar12 - iVar22) *
                            ((int)*(short *)(puVar13 + 2) - (int)*(short *)(puVar9 + 2));
                    iVar22 = (int)*(short *)puVar13 - iVar22;
                    *(short *)(puVar14 + 2) = (short)(iVar4 / iVar22) + *(short *)(puVar9 + 2);
                    if (iVar22 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar22 == -1) && (iVar4 == -0x80000000)) {
                      trap(0x1800);
                    }
                    iVar4 = (iVar12 - (int)*(short *)puVar9) *
                            ((int)*(short *)((int)puVar13 + 10) - (int)*(short *)((int)puVar9 + 10))
                    ;
                    iVar12 = (int)*(short *)puVar13 - (int)*(short *)puVar9;
                    if (iVar12 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                      trap(0x1800);
                    }
                    *(short *)((int)puVar14 + 10) =
                         (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
                    *(short *)puVar14 = sVar15;
                    goto LAB_7f053538;
                  }
                  sVar17 = *(short *)((int)puVar10 + 2);
                }
                else {
                  sVar17 = *(short *)((int)puVar10 + 2);
                }
              }
              else {
                sVar17 = *(short *)((int)puVar10 + 2);
              }
              if (sVar17 == sVar2) {
                if (*(short *)(puVar10 + 1) == *(short *)(puVar9 + 1)) {
                  if (*(short *)puVar10 == sVar1) {
                    *(short *)puVar14 = sVar15;
                  }
                  else {
                    iVar12 = (iVar4 - iVar22) *
                             ((int)*(short *)(puVar10 + 2) - (int)*(short *)(puVar9 + 2));
                    iVar22 = (int)*(short *)puVar10 - iVar22;
                    *(short *)(puVar14 + 2) = (short)(iVar12 / iVar22) + *(short *)(puVar9 + 2);
                    if (iVar22 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar22 == -1) && (iVar12 == -0x80000000)) {
                      trap(0x1800);
                    }
                    iVar4 = (iVar4 - (int)*(short *)puVar9) *
                            ((int)*(short *)((int)puVar10 + 10) - (int)*(short *)((int)puVar9 + 10))
                    ;
                    iVar12 = (int)*(short *)puVar10 - (int)*(short *)puVar9;
                    *(short *)((int)puVar14 + 10) =
                         (short)(iVar4 / iVar12) + *(short *)((int)puVar9 + 10);
                    if (iVar12 == 0) {
                      trap(0x1c00);
                    }
                    if ((iVar12 == -1) && (iVar4 == -0x80000000)) {
                      trap(0x1800);
                    }
                    *(short *)puVar14 = sVar15;
                  }
                }
                else {
                  *(short *)puVar14 = sVar15;
                }
              }
              else {
                *(short *)puVar14 = sVar15;
              }
            }
          }
LAB_7f053538:
          uVar7 = uVar20;
        } while (uVar20 != 4);
        iVar23 += 4;
        iVar4 = (int)*(short *)(iVar3 + 0xc);
        if (*(short *)(iVar3 + 0xc) < 0) {
          iVar4 += 3;
        }
      } while (iVar23 < (iVar4 >> 2) << 2);
    }
  }
  return;
}



void proc_7F053598(int param_1)

{
  if (-1 < *(int *)(param_1 + 0xf0)) {
    proc_7F0B9DBC(*(int *)(param_1 + 0xf0),1);
  }
  return;
}



void proc_7F0535C4(int param_1)

{
  if (-1 < *(int *)(param_1 + 0xf0)) {
    proc_7F0B9DBC(*(int *)(param_1 + 0xf0),0);
  }
  return;
}



undefined *
initialize_door(int *stdobject,int *xyzpos,int matrix,int *tile,int param_5,int *runtimexyzpos)

{
  undefined *puVar1;
  void *pvVar2;
  undefined8 extraout_a0;
  float fVar3;
  int iVar4;
  
  puVar1 = proc_7F04071C((int)stdobject);
  fVar3 = PitemZ_entries[(int)*(short *)(stdobject + 1)].scale;
  pvVar2 = allocate_bytes_in_bank(0x50,4);
  *(void **)(stdobject + 0x1a) = pvVar2;
  proc_7F058020((undefined4 *)matrix,stdobject + 6);
  matrix_multiply_A1_by_F12(fVar3,extraout_a0,(float *)(stdobject + 6));
  stdobject[0x2a] = *(int *)param_5;
  stdobject[0x2b] = *(int *)(param_5 + 4);
  stdobject[0x2c] = *(int *)(param_5 + 8);
  if (stdobject[2] < 0) {
    stdobject[0x2d] = stdobject[0x21];
  }
  else {
    stdobject[0x2d] = 0;
  }
  stdobject[0x2e] = 0;
  *(undefined *)(stdobject + 0x2f) = 0;
  *(undefined *)((int)stdobject + 0xbd) = 0;
  stdobject[0x32] = 0;
  if ((*(ushort *)(stdobject + 0x26) & 4) == 0) {
    stdobject[0x33] = 0;
  }
  else {
    pvVar2 = allocate_bytes_in_bank
                       ((int)*(short *)(*(int *)(*(int *)(*(int *)(**(int **)(stdobject[5] + 8) +
                                                                  0x14) + 0x14) + 4) + 0xc) << 4,4);
    *(void **)(stdobject + 0x33) = pvVar2;
  }
  stdobject[0x3c] = -1;
  stdobject[0x3d] = 0;
  stdobject[0x3e] = 0;
  *puVar1 = 2;
  *(int **)(puVar1 + 4) = stdobject;
  *(int *)(puVar1 + 8) = *xyzpos;
  *(int *)(puVar1 + 0xc) = xyzpos[1];
  *(int *)(puVar1 + 0x10) = xyzpos[2];
  *(int **)(puVar1 + 0x14) = tile;
  stdobject[0x16] = *runtimexyzpos;
  stdobject[0x17] = runtimexyzpos[1];
  iVar4 = runtimexyzpos[2];
  stdobject[2] = stdobject[2] | 0x100;
  stdobject[0x18] = iVar4;
  proc_7F052B00((int)stdobject);
  proc_7F052D8C((int)stdobject);
  proc_7F0402B4(stdobject[4],(byte *)(stdobject + 0x1f));
  *(undefined *)(stdobject + 0x1e) = *(undefined *)(stdobject + 0x1f);
  *(undefined *)((int)stdobject + 0x79) = *(undefined *)((int)stdobject + 0x7d);
  *(undefined *)((int)stdobject + 0x7a) = *(undefined *)((int)stdobject + 0x7e);
  *(undefined *)((int)stdobject + 0x7b) = *(undefined *)((int)stdobject + 0x7f);
  return puVar1;
}



int proc_7F0537B8(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5)

{
  int iVar1;
  float fVar2;
  float fVar3;
  
  if (param_1 <= 200.00000000) {
    iVar1 = 0x7fff;
  }
  else {
    if (param_5 <= param_1) {
      iVar1 = 0;
    }
    else {
      if (param_2 <= param_1) {
        iVar1 = (int)(((param_5 - param_1) * flt_80053340) / (param_5 - param_2));
      }
      else {
        fVar2 = sqrtf(param_1 - 200.00000000);
        fVar3 = sqrtf(param_2 - 200.00000000);
        iVar1 = 0x7fff - (int)((fVar2 * flt_80053344) / fVar3);
      }
    }
  }
  return iVar1;
}



int proc_7F053894(float *param_1,float param_2,float param_3)

{
  BONDdata *pBVar1;
  ulonglong uVar2;
  int iVar3;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 uVar4;
  undefined4 extraout_a1_hi;
  undefined4 extraout_a1_hi_00;
  undefined4 uVar5;
  float in_a1_lo;
  undefined4 extraout_a1_lo;
  undefined4 extraout_a1_lo_00;
  undefined4 uVar6;
  float in_a2_lo;
  BONDdata **ppBVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  uVar2 = get_num_players();
  uVar4 = extraout_a0;
  uVar5 = extraout_a1_hi;
  uVar6 = extraout_a1_lo;
  fVar11 = in_a2_lo;
  if (0 < (longlong)uVar2) {
    ppBVar7 = &ptr_BONDdata_p1;
    fVar11 = in_a2_lo;
    pBVar1 = ptr_BONDdata_p1;
    while( true ) {
      iVar3 = pBVar1->position_data_pointer;
      fVar8 = *(float *)(iVar3 + 8) - *param_1;
      fVar9 = *(float *)(iVar3 + 0xc) - param_1[1];
      fVar10 = *(float *)(iVar3 + 0x10) - param_1[2];
      fVar8 = sqrtf(fVar8 * fVar8 + fVar9 * fVar9 + fVar10 * fVar10);
      ppBVar7 = ppBVar7 + 1;
      if (fVar11 <= fVar8) {
        fVar8 = fVar11;
      }
      fVar11 = fVar8;
      uVar4 = extraout_a0_00;
      uVar5 = extraout_a1_hi_00;
      uVar6 = extraout_a1_lo_00;
      if (&ptr_BONDdata_p1 + (int)uVar2 <= ppBVar7) break;
      pBVar1 = *ppBVar7;
    }
  }
  iVar3 = proc_7F0537B8(fVar11,in_a1_lo,uVar4,CONCAT44(uVar5,uVar6),in_a2_lo);
  return iVar3;
}



void proc_7F05396C(int param_1,float *param_2,float param_3,float param_4)

{
  int iVar1;
  float in_a2_lo;
  float in_a3_lo;
  
  iVar1 = proc_7F053894(param_2,in_a2_lo,in_a3_lo);
  music_related_36((longlong)param_1,8,iVar1);
  return;
}



int proc_7F0539B8(float param_1,undefined8 param_2,undefined8 param_3)

{
  int iVar1;
  
  iVar1 = proc_7F0537B8(param_1,flt_80053348,param_2,param_3,6000.00000000);
  return iVar1;
}



void proc_7F0539E4(float *param_1)

{
  float in_f12;
  float in_f14;
  
  proc_7F053894(param_1,in_f12,in_f14);
  return;
}



void proc_7F053A10(int param_1,float *param_2)

{
  float in_f12;
  float in_f14;
  
  proc_7F05396C(param_1,param_2,in_f12,in_f14);
  return;
}



void proc_7F053A3C(void)

{
  bool bVar1;
  bool bVar2;
  undefined4 in_v0_lo;
  ulonglong uVar3;
  int iVar4;
  int in_a0_lo;
  undefined4 uStack12;
  
  bVar1 = *(int *)(in_a0_lo + 0xf4) != 0;
  if (bVar1) {
    uVar3 = music_related_26(*(int *)(in_a0_lo + 0xf4));
    in_v0_lo = (undefined4)uVar3;
    bVar1 = uVar3 != 0;
  }
  bVar2 = *(int *)(in_a0_lo + 0xf8) != 0;
  if (bVar2) {
    uVar3 = music_related_26(*(int *)(in_a0_lo + 0xf8));
    in_v0_lo = (undefined4)uVar3;
    bVar2 = uVar3 != 0;
  }
  if (bVar1) {
    iVar4 = *(int *)(in_a0_lo + 0x10);
  }
  else {
    if (!bVar2) {
      return;
    }
    iVar4 = *(int *)(in_a0_lo + 0x10);
  }
  proc_7F0539E4((float *)(iVar4 + 8));
  iVar4 = get_controls_locked_flag();
  uStack12 = in_v0_lo;
  if (iVar4 != 0) {
    uStack12 = 0;
  }
  if (bVar1) {
    music_related_36((longlong)*(int *)(in_a0_lo + 0xf4),8,uStack12);
  }
  if (bVar2) {
    music_related_36((longlong)*(int *)(in_a0_lo + 0xf8),8,uStack12);
  }
  return;
}



void proc_7F053B10(int param_1)

{
  ulonglong uVar1;
  
  if ((*(int *)(param_1 + 0xf4) != 0) &&
     (uVar1 = music_related_26(*(int *)(param_1 + 0xf4)), uVar1 != 0)) {
    music_related_28(*(int *)(param_1 + 0xf4));
  }
  if ((*(int *)(param_1 + 0xf8) != 0) &&
     (uVar1 = music_related_26(*(int *)(param_1 + 0xf8)), uVar1 != 0)) {
    music_related_28(*(int *)(param_1 + 0xf8));
  }
  return;
}



void play_door_opening_soundeffect_0(int param_1)

{
  int **ppiVar1;
  sfxdata *data;
  undefined4 uVar2;
  int **ppiStack4;
  
  ppiStack4 = NULL;
  proc_7F053B10(param_1);
  data = NULL;
  if (*(int *)(param_1 + 0xf4) == 0) {
    data = (sfxdata *)(param_1 + 0xf4);
  }
  else {
    if (*(int *)(param_1 + 0xf8) != 0) {
      uVar2 = *(undefined4 *)(param_1 + 0xa4);
      goto LAB_7f053bc8;
    }
    data = (sfxdata *)(param_1 + 0xf8);
  }
  uVar2 = *(undefined4 *)(param_1 + 0xa4);
LAB_7f053bc8:
  switch(uVar2) {
  case 1:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xd3,data);
    }
    break;
  case 2:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,7,data);
    }
    break;
  case 3:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xca,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xcc,data);
    }
    break;
  case 4:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd6,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xd8,data);
    }
    break;
  case 5:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xbc,NULL);
    break;
  case 6:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    break;
  case 7:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xc0,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xbf,data);
    }
    break;
  case 8:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xbc,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,7,data);
    }
    break;
  case 9:
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xc2,data);
      ppiStack4 = NULL;
    }
    break;
  case 10:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xc4,NULL);
    break;
  case 0xb:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    break;
  case 0xc:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,200,NULL);
    break;
  case 0xd:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,7,data);
    }
    break;
  case 0xe:
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xda,data);
      ppiStack4 = NULL;
    }
    break;
  case 0xf:
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xe1,data);
      ppiStack4 = NULL;
    }
    break;
  case 0x10:
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd6,NULL);
    break;
  case 0x11:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    if (ppiVar1 != NULL) {
      proc_7F053A10((int)ppiVar1,(float *)(*(int *)(param_1 + 0x10) + 8));
    }
    ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xca,NULL);
    if (data != NULL) {
      play_sfx_a1(ptr_sfx_buf,0xcc,data);
    }
  }
  if (ppiStack4 != NULL) {
    proc_7F053A10((int)ppiStack4,(float *)(*(int *)(param_1 + 0x10) + 8));
  }
  proc_7F053A3C();
  return;
}



void play_door_opening_soundeffect_(int param_1)

{
  int **ppiVar1;
  sfxdata *data;
  undefined4 uVar2;
  int **ppiStack4;
  
  ppiStack4 = NULL;
  proc_7F053B10(param_1);
  data = NULL;
  if (*(int *)(param_1 + 0xf4) == 0) {
    data = (sfxdata *)(param_1 + 0xf4);
  }
  else {
    if (*(int *)(param_1 + 0xf8) != 0) {
      uVar2 = *(undefined4 *)(param_1 + 0xa4);
      goto LAB_7f053fb4;
    }
    data = (sfxdata *)(param_1 + 0xf8);
  }
  uVar2 = *(undefined4 *)(param_1 + 0xa4);
LAB_7f053fb4:
  if (true) {
    switch(uVar2) {
    case 1:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xd3,data);
      }
      break;
    case 2:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,7,data);
      }
      break;
    case 3:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xca,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xcc,data);
      }
      break;
    case 4:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd6,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xd8,data);
      }
      break;
    case 7:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xc0,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xbf,data);
      }
      break;
    case 8:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xbc,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,7,data);
      }
      break;
    case 9:
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xc2,data);
        ppiStack4 = NULL;
      }
      break;
    case 0xd:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,7,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,7,data);
      }
      break;
    case 0xe:
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xda,data);
        ppiStack4 = NULL;
      }
      break;
    case 0xf:
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xe1,data);
        ppiStack4 = NULL;
      }
      break;
    case 0x10:
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xd6,NULL);
      break;
    case 0x11:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,7,NULL);
      if (ppiVar1 != NULL) {
        proc_7F053A10((int)ppiVar1,(float *)(*(int *)(param_1 + 0x10) + 8));
      }
      ppiStack4 = play_sfx_a1(ptr_sfx_buf,0xca,NULL);
      if (data != NULL) {
        play_sfx_a1(ptr_sfx_buf,0xcc,data);
      }
    }
  }
  if (ppiStack4 != NULL) {
    proc_7F053A10((int)ppiStack4,(float *)(*(int *)(param_1 + 0x10) + 8));
  }
  proc_7F053A3C();
  return;
}



void play_door_closing_soundeffect_0(int param_1)

{
  int **ppiVar1;
  
  proc_7F053B10(param_1);
  ppiVar1 = NULL;
  if (true) {
    switch(*(undefined4 *)(param_1 + 0xa4)) {
    case 1:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
      break;
    case 2:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
      break;
    case 3:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xcb,NULL);
      break;
    case 4:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd7,NULL);
      break;
    case 7:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
      break;
    case 8:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xbb,NULL);
      break;
    case 9:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xc3,NULL);
      break;
    case 0xd:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,7,NULL);
      break;
    case 0xe:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xdb,NULL);
      break;
    case 0xf:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xe2,NULL);
      break;
    case 0x10:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd7,NULL);
      break;
    case 0x11:
      ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xcb,NULL);
    }
  }
  if (ppiVar1 != NULL) {
    proc_7F053A10((int)ppiVar1,(float *)(*(int *)(param_1 + 0x10) + 8));
  }
  proc_7F053A3C();
  return;
}



void play_door_closing_soundeffect_1(int param_1)

{
  int **ppiVar1;
  
  proc_7F053B10(param_1);
  ppiVar1 = NULL;
  switch(*(undefined4 *)(param_1 + 0xa4)) {
  case 1:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
    break;
  case 2:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
    break;
  case 3:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xcb,NULL);
    break;
  case 4:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd7,NULL);
    break;
  case 5:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xbb,NULL);
    break;
  case 6:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    break;
  case 7:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd2,NULL);
    break;
  case 8:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xbb,NULL);
    break;
  case 9:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xc3,NULL);
    break;
  case 10:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xc5,NULL);
    break;
  case 0xb:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,199,NULL);
    break;
  case 0xc:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xc9,NULL);
    break;
  case 0xd:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,7,NULL);
    break;
  case 0xe:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xdb,NULL);
    break;
  case 0xf:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xe2,NULL);
    break;
  case 0x10:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xd7,NULL);
    break;
  case 0x11:
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xcb,NULL);
  }
  if (ppiVar1 != NULL) {
    proc_7F053A10((int)ppiVar1,(float *)(*(int *)(param_1 + 0x10) + 8));
  }
  proc_7F053A3C();
  return;
}



void set_door_state(int *objdata,DOORSTATE state)

{
  objdata[2] = objdata[2] & 0x7fffffff;
  objdata[0x19] = objdata[0x19] | 0x200;
  play_door_opening_soundeffect_0((int)objdata);
  proc_7F053598((int)objdata);
  if (*(short *)((int)objdata + 0x9a) == 8) {
    objdata[2] = objdata[2] | 0x2000000;
    objdata[0x22] = 0;
    if ((undefined4 *)objdata[0x1a] != NULL) {
      *(undefined4 *)objdata[0x1a] = 0;
    }
    objdata[2] = objdata[2] & 0xfffffeff;
  }
  return;
}



void proc_7F0547DC(int param_1)

{
  *(uint *)(param_1 + 8) = *(uint *)(param_1 + 8) & 0x7fffffff;
  play_door_opening_soundeffect_(param_1);
  return;
}



void proc_7F05480C(int param_1)

{
  play_door_closing_soundeffect_0(param_1);
  if ((*(short *)(param_1 + 0x9a) == 8) &&
     (proc_7F03FDA8(*(int *)(param_1 + 0x10)), (*(uint *)(param_1 + 100) & 0x80) != 0)) {
    **(uint **)(param_1 + 0x6c) = **(uint **)(param_1 + 0x6c) | 1;
    proc_7F057FD0((f32 *)(*(int *)(param_1 + 0x6c) + 0x20));
  }
  return;
}



void proc_7F05487C(int param_1)

{
  play_door_closing_soundeffect_1(param_1);
  proc_7F0535C4(param_1);
  return;
}



void proc_7F0548A4(int param_1,int param_2)

{
  char cVar1;
  undefined uVar2;
  
  uVar2 = (undefined)param_2;
  if (param_2 == 1) {
    if ((*(char *)(param_1 + 0xbc) == '\0') || (*(char *)(param_1 + 0xbc) == '\x03')) {
      set_door_state((int *)param_1,OPEN);
    }
    *(undefined *)(param_1 + 0xbc) = uVar2;
  }
  else {
    if (param_2 == 2) {
      cVar1 = *(char *)(param_1 + 0xbc);
      if ((cVar1 == '\0') && (0.00000000 < *(float *)(param_1 + 0xb4))) {
        proc_7F0547DC(param_1);
        cVar1 = *(char *)(param_1 + 0xbc);
      }
      if (((cVar1 != '\0') && (cVar1 != '\x03')) || (0.00000000 < *(float *)(param_1 + 0xb4))) {
        *(undefined *)(param_1 + 0xbc) = uVar2;
      }
      else {
        if (cVar1 == '\x03') {
          *(undefined *)(param_1 + 0xbc) = 0;
        }
      }
    }
    else {
      *(undefined *)(param_1 + 0xbc) = uVar2;
    }
  }
  return;
}



void proc_7F054988(int param_1,longlong param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = (int)param_2;
  iVar2 = iVar1;
  if (((*(int *)(param_1 + 0xc) << 1 < 0) && (iVar2 = iVar1, param_2 == 1)) &&
     (iVar2 = 2, *(char *)(param_1 + 0xbc) == '\0')) {
    iVar1 = 3;
  }
  proc_7F0548A4(param_1,iVar1);
  iVar1 = *(int *)(param_1 + 200);
  while ((iVar1 != 0 && (iVar1 != param_1))) {
    proc_7F0548A4(iVar1,iVar2);
    iVar1 = *(int *)(iVar1 + 200);
  }
  return;
}



ulonglong proc_7F054A20(int param_1)

{
  char cVar1;
  ulonglong uVar2;
  
  cVar1 = *(char *)(param_1 + 0xbc);
  if (((cVar1 == '\0') || (uVar2 = (ulonglong)(cVar1 == '\x03'), cVar1 == '\x03')) &&
     (uVar2 = 0, *(float *)(param_1 + 0xb4) <= 0.00000000)) {
    uVar2 = 1;
  }
  return uVar2;
}



longlong proc_7F054A64(char *param_1,float *param_2)

{
  bool bVar1;
  longlong lVar2;
  longlong lVar3;
  uint *puVar4;
  float fVar5;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  uint auStack32 [8];
  
  puVar4 = auStack32;
  lVar3 = 0;
  proc_7F03CB8C(param_1,puVar4);
  do {
    if ((int)auStack32[0] < 0) {
      return lVar3;
    }
    lVar2 = proc_7F0B3C0C(auStack32[0],(int *)&fStack60);
    bVar1 = lVar3 == 0;
    if (lVar2 == 0) {
LAB_7f054b50:
      auStack32[0] = puVar4[1];
    }
    else {
      lVar3 = 1;
      if (bVar1) {
        *param_2 = fStack60;
        param_2[1] = fStack56;
        param_2[2] = fStack52;
        param_2[3] = fStack48;
        goto LAB_7f054b50;
      }
      if (fStack60 < *param_2) {
        *param_2 = fStack60;
      }
      if (fStack56 < param_2[1]) {
        param_2[1] = fStack56;
        fVar5 = param_2[2];
      }
      else {
        fVar5 = param_2[2];
      }
      if (fVar5 < fStack52) {
        param_2[2] = fStack52;
        fVar5 = param_2[3];
      }
      else {
        fVar5 = param_2[3];
      }
      if (fVar5 < fStack48) {
        param_2[3] = fStack48;
        goto LAB_7f054b50;
      }
      auStack32[0] = puVar4[1];
    }
    puVar4 = puVar4 + 1;
  } while( true );
}



int proc_7F054B80(int param_1)

{
  int iVar1;
  
  iVar1 = return_nearfog_values();
  if ((iVar1 != 0) && (*(float *)(iVar1 + 8) < *(float *)(param_1 + 0x18))) {
    proc_7F078484();
  }
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F054C58(void)

{
  int iVar1;
  xyzpoint *pxVar2;
  float *pfVar3;
  float *in_a0_lo;
  float in_a1_lo;
  f32 fVar4;
  float fVar5;
  undefined4 uStack4;
  
  uStack4 = 1;
  iVar1 = return_nearfog_values();
  if (iVar1 != 0) {
    pxVar2 = get_BONDdata_position();
    pfVar3 = (float *)proc_7F0783C4();
    fVar5 = pfVar3[2] * (in_a0_lo[2] - pxVar2->z) +
            (*in_a0_lo - pxVar2->x) * *pfVar3 + (in_a0_lo[1] - pxVar2->y) * pfVar3[1];
    if ((*(float *)(iVar1 + 8) < fVar5) &&
       (fVar4 = proc_7F078484(),
       *(float *)(iVar1 + 4) <=
       (((fVar5 - *(float *)(iVar1 + 8)) * 100.00000000) / in_a1_lo + *(float *)(iVar1 + 8)) *
       (float)fVar4)) {
      uStack4 = 0;
    }
  }
  return uStack4;
}



// WARNING: Instruction at (ram,0x7f054ddc) overlaps instruction at (ram,0x7f054dd8)
// 

uint proc_7F054D6C(char *param_1,float *param_2,float param_3,int param_4)

{
  ulonglong uVar1;
  longlong lVar2;
  xyzpoint *pxVar3;
  int in_a3_lo;
  uint *puVar4;
  float fVar5;
  float fVar6;
  float extraout_f12;
  float extraout_f12_00;
  float fVar7;
  float afStack60 [4];
  uint uStack44;
  uint auStack32 [8];
  
  uStack44 = 0;
  proc_7F03CB8C(param_1,auStack32);
  puVar4 = auStack32;
  while( true ) {
    if ((int)auStack32[0] < 0) {
      return uStack44;
    }
    uVar1 = proc_7F0B5E50(auStack32[0]);
    if (uVar1 != 0) break;
    auStack32[0] = puVar4[1];
    puVar4 = puVar4 + 1;
  }
  lVar2 = proc_7F0BB2C8(param_2,extraout_f12);
  if (lVar2 == 0) {
    return uStack44;
  }
  if ((in_a3_lo != 0) && (lVar2 = proc_7F054C58(), lVar2 == 0)) {
    return uStack44;
  }
  lVar2 = proc_7F054A64(param_1,afStack60);
  if (lVar2 == 0) {
    lVar2 = proc_7F078A58(param_2,extraout_f12_00);
    uStack44 = (uint)lVar2;
  }
  else {
    lVar2 = proc_7F078BF4(param_2,extraout_f12_00,(float *)param_4);
    uStack44 = (uint)lVar2;
  }
  if (lVar2 == 0) {
    return uStack44;
  }
  pxVar3 = get_BONDdata_position();
  fVar5 = *param_2 - pxVar3->x;
  fVar6 = param_2[1] - pxVar3->y;
  fVar7 = param_2[2] - pxVar3->z;
  if (fVar5 * fVar5 + fVar6 * fVar6 + fVar7 * fVar7 <= flt_8005345C) {
    return uStack44;
  }
  return 0;
}



undefined8 proc_7F054EA8(int param_1)

{
  undefined8 uVar1;
  float in_f12;
  float in_f14;
  
  uVar1 = 0;
  if (*(char *)(param_1 + 0xbc) == '\x01') {
    proc_7F042F18((float *)(param_1 + 0xb4),in_f12,*(float **)(param_1 + 0x84),in_f14,
                  (float)(param_1 + 0xb8),*(float *)(param_1 + 0x8c));
    uVar1 = 1;
    if (*(float *)(param_1 + 0x84) <= *(float *)(param_1 + 0xb4)) {
      *(float *)(param_1 + 0xb4) = *(float *)(param_1 + 0x84);
    }
    else {
      if (*(float *)(param_1 + 0xb4) <= 0.00000000) {
        *(undefined4 *)(param_1 + 0xb4) = 0;
      }
      uVar1 = 1;
    }
  }
  else {
    if (*(char *)(param_1 + 0xbc) == '\x02') {
      proc_7F042F18((float *)(param_1 + 0xb4),0.00000000,NULL,in_f14,(float)(param_1 + 0xb8),
                    *(float *)(param_1 + 0x8c));
      uVar1 = 1;
      if (*(float *)(param_1 + 0x84) <= *(float *)(param_1 + 0xb4)) {
        *(float *)(param_1 + 0xb4) = *(float *)(param_1 + 0x84);
      }
      else {
        if (*(float *)(param_1 + 0xb4) <= 0.00000000) {
          *(undefined4 *)(param_1 + 0xb4) = 0;
        }
      }
    }
  }
  return uVar1;
}



void proc_7F054FB4(int param_1)

{
  ushort *partdesc;
  bool bVar1;
  longlong lVar2;
  int *piVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  int iVar7;
  undefined4 *puVar8;
  int iVar9;
  longlong lVar10;
  undefined4 uVar11;
  
  bVar1 = false;
  lVar10 = 1;
  if (param_1 != 0) {
    uVar11 = *(undefined4 *)(param_1 + 0xb4);
    iVar9 = param_1;
    while( true ) {
      *(undefined4 *)(iVar9 + 0xfc) = uVar11;
      lVar2 = proc_7F054EA8(iVar9);
      if (lVar2 == 0) {
        iVar9 = *(int *)(iVar9 + 200);
      }
      else {
        bVar1 = true;
        iVar9 = *(int *)(iVar9 + 200);
      }
      if ((iVar9 == param_1) || (iVar9 == 0)) break;
      uVar11 = *(undefined4 *)(iVar9 + 0xb4);
    }
  }
  if ((bVar1) && (iVar9 = param_1, param_1 != 0)) {
    while( true ) {
      proc_7F052B00(iVar9);
      lVar10 = proc_7F0448A8();
      if (lVar10 == 0) break;
      iVar9 = *(int *)(iVar9 + 200);
      if ((iVar9 == param_1) || (iVar9 == 0)) break;
    }
  }
  iVar9 = param_1;
  if (param_1 != 0) {
    do {
      if (bVar1) {
        if (lVar10 == 0) {
          *(undefined4 *)(iVar9 + 0xb8) = 0;
          *(undefined4 *)(iVar9 + 0xb4) = *(undefined4 *)(iVar9 + 0xfc);
          proc_7F052B00(iVar9);
        }
        else {
          if (*(char *)(iVar9 + 0xbc) == '\x01') {
            if (*(float *)(iVar9 + 0x84) <= *(float *)(iVar9 + 0xb4)) {
              *(undefined *)(iVar9 + 0xbc) = 0;
              *(undefined4 *)(iVar9 + 0xb8) = 0;
              *(undefined4 *)(iVar9 + 0xec) = global_timer;
              proc_7F05480C(iVar9);
              iVar5 = *(int *)(iVar9 + 0x10);
            }
            else {
              iVar5 = *(int *)(iVar9 + 0x10);
            }
          }
          else {
            if (*(char *)(iVar9 + 0xbc) == '\x02') {
              if (*(float *)(iVar9 + 0xb4) <= 0.00000000) {
                *(undefined *)(iVar9 + 0xbc) = 0;
                *(undefined4 *)(iVar9 + 0xb8) = 0;
                *(undefined4 *)(iVar9 + 0xec) = 0;
                proc_7F05487C(iVar9);
                iVar5 = *(int *)(iVar9 + 0x10);
              }
              else {
                iVar5 = *(int *)(iVar9 + 0x10);
              }
            }
            else {
              iVar5 = *(int *)(iVar9 + 0x10);
            }
          }
          proc_7F0402B4(iVar5,(byte *)(iVar9 + 0x7c));
        }
        proc_7F052D8C(iVar9);
      }
      else {
        if ((*(ushort *)(iVar9 + 0x98) & 4) != 0) {
          partdesc = *(ushort **)(*(int *)(**(int **)(*(int *)(iVar9 + 0x14) + 8) + 0x14) + 0x14);
          iVar5 = *(int *)(partdesc + 2);
          piVar3 = (int *)extract_id_from_object_structure_microcode
                                    (*(int *)(iVar9 + 0x14),partdesc);
          iVar7 = *(int *)(iVar9 + 0xcc);
          if (iVar7 == *piVar3) {
            *piVar3 = iVar7;
          }
          else {
            lVar2 = 0;
            if (*(short *)(iVar5 + 0xc) < 1) {
              *piVar3 = iVar7;
            }
            else {
              iVar4 = 0;
              iVar7 = *piVar3;
              while( true ) {
                lVar2 = (longlong)((int)lVar2 + 1);
                puVar8 = (undefined4 *)(iVar7 + iVar4);
                puVar6 = (undefined4 *)(*(int *)(iVar9 + 0xcc) + iVar4);
                iVar4 += 0x10;
                *puVar6 = *puVar8;
                puVar6[1] = puVar8[1];
                puVar6[2] = puVar8[2];
                puVar6[3] = puVar8[3];
                if ((longlong)*(short *)(iVar5 + 0xc) <= lVar2) break;
                iVar7 = *piVar3;
              }
              *piVar3 = *(int *)(iVar9 + 0xcc);
            }
          }
        }
      }
      *(undefined4 *)(iVar9 + 0xfc) = global_timer;
      iVar9 = *(int *)(iVar9 + 200);
    } while ((iVar9 != param_1) && (iVar9 != 0));
  }
  return;
}



void proc_7F05522C(int param_1,float *param_2,float *param_3,int param_4)

{
  short sVar1;
  int iVar2;
  float *pfVar3;
  float __x;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fStack44;
  float fStack36;
  float fStack28;
  
  pfVar3 = (float *)(ptr_2xxxpresets + (int)*(short *)(param_1 + 6) * 0x44);
  iVar2 = get_curplayer_positiondata();
  fVar6 = (float)ptr_BONDdata->field_498 * 30.00000000 * 1.00000000 * 0.75000000 +
          *(float *)(iVar2 + 8);
  fVar5 = (float)ptr_BONDdata->field_4A0 * 30.00000000 * 1.00000000 * 0.75000000 +
          *(float *)(iVar2 + 0x10);
  if (param_4 == 0) {
    fStack44 = pfVar3[0xe];
    fVar8 = pfVar3[0xd];
    fStack36 = pfVar3[3];
    fStack28 = pfVar3[5];
  }
  else {
    fStack44 = pfVar3[0xc];
    fVar8 = pfVar3[0xb];
    fStack36 = pfVar3[4] * pfVar3[8] - pfVar3[7] * pfVar3[5];
    fStack28 = pfVar3[3] * pfVar3[7] - pfVar3[6] * pfVar3[4];
  }
  __x = convert_angle_using_inverse
                  ((f32)((*pfVar3 + fStack36 * fVar8) - fVar6),
                   (f32)((pfVar3[2] + fStack28 * fVar8) - fVar5));
  fVar4 = get_curplay_horizontal_rotation_in_degrees();
  fVar7 = __x - fVar4;
  if (__x < fVar4) {
    fVar7 = fVar7 + flt_80053460;
  }
  if (flt_80053468 < fVar7) {
    fVar7 = fVar7 - flt_80053464;
    sVar1 = *(short *)(param_1 + 0x9a);
  }
  else {
    sVar1 = *(short *)(param_1 + 0x9a);
  }
  if (sVar1 == 5) {
    __x = (*(float *)(param_1 + 0xb4) * flt_80053464) / 360.00000000;
    if (*(int *)(param_1 + 8) << 2 < 0) {
      __x = flt_80053464 - __x;
    }
    fVar4 = cosf(__x);
    __x = sinf(__x);
    fVar5 = convert_angle_using_inverse
                      ((f32)((*pfVar3 + fStack36 * fVar8 +
                             (fStack44 - fVar8) * (fStack36 * fVar4 + fStack28 * __x)) - fVar6),
                       (f32)((pfVar3[2] + fStack28 * fVar8 +
                             (fStack44 - fVar8) * (-fStack36 * __x + fStack28 * fVar4)) - fVar5));
    fVar6 = get_curplay_horizontal_rotation_in_degrees();
    fVar8 = fVar5 - fVar6;
    if (fVar5 < fVar6) {
      fVar8 = fVar8 + flt_8005346C;
    }
    if (flt_80053470 < fVar8) {
      fVar8 = fVar8 - flt_80053474;
    }
  }
  else {
    fVar5 = convert_angle_using_inverse
                      ((f32)((*pfVar3 + fStack36 * fStack44) - fVar6),
                       (f32)((pfVar3[2] + fStack28 * fStack44) - fVar5));
    fVar6 = get_curplay_horizontal_rotation_in_degrees();
    fVar8 = fVar5 - fVar6;
    if (fVar5 < fVar6) {
      fVar8 = fVar8 + flt_80053478;
    }
    if (flt_8005347C < fVar8) {
      fVar8 = fVar8 - flt_80053480;
    }
  }
  if (fVar7 < fVar8) {
    *param_2 = fVar7;
    *param_3 = fVar8;
  }
  else {
    *param_2 = fVar8;
    *param_3 = fVar7;
  }
  return;
}



undefined4 proc_7F0555F8(int param_1,int param_2)

{
  int iVar1;
  float fStack28;
  float afStack24 [3];
  float fStack12;
  float fStack8;
  undefined4 uStack4;
  
  uStack4 = 1;
  if (DAT_80071df8 == 0) {
    proc_7F05522C(param_1,&fStack8,&fStack12,param_2);
    if (-flt_80053484 <= fStack8) {
      if (fStack8 <= flt_80053484) {
        if (-flt_80053484 <= fStack12) {
          if (fStack12 <= flt_80053484) {
            DAT_80071df8 = *(undefined4 *)(param_1 + 0x10);
            return 0;
          }
          iVar1 = *(int *)(param_1 + 200);
        }
        else {
          iVar1 = *(int *)(param_1 + 200);
        }
      }
      else {
        iVar1 = *(int *)(param_1 + 200);
      }
    }
    else {
      iVar1 = *(int *)(param_1 + 200);
    }
    if ((iVar1 != 0) && (iVar1 != param_1)) {
      while ((0.00000000 <= fStack8 || (fStack12 < 0.00000000))) {
        proc_7F05522C(iVar1,afStack24,&fStack28,param_2);
        if ((0.00000000 < fStack8) && (afStack24[0] < fStack8)) {
          fStack8 = afStack24[0];
        }
        if (fStack12 < 0.00000000) {
          if (fStack12 < fStack28) {
            fStack12 = fStack28;
            iVar1 = *(int *)(iVar1 + 200);
          }
          else {
            iVar1 = *(int *)(iVar1 + 200);
          }
        }
        else {
          iVar1 = *(int *)(iVar1 + 200);
        }
        if ((iVar1 == 0) || (iVar1 == param_1)) break;
      }
    }
    if ((fStack12 - fStack8 < flt_80053488) && ((fStack8 < 0.00000000 && (0.00000000 < fStack12))))
    {
      DAT_80071df8 = *(int *)(param_1 + 0x10);
      uStack4 = 0;
    }
  }
  return uStack4;
}



int proc_7F055804(char *param_1)

{
  int iVar1;
  longlong lVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float extraout_f12;
  uint auStack96 [8];
  uint auStack64 [12];
  char *pcStack16;
  int iStack12;
  int iStack4;
  
  iStack4 = 1;
  iVar1 = *(int *)(param_1 + 4);
  if (((-1 < *(int *)(iVar1 + 8) << 6) && (0.00000000 < *(float *)(iVar1 + 0x84))) &&
     ((param_1[1] & 2U) != 0)) {
    iStack12 = 0;
    pcStack16 = (char *)get_curplayer_positiondata();
    fVar3 = *(float *)(iVar1 + 0x58) - *(float *)(pcStack16 + 8);
    fVar4 = *(float *)(iVar1 + 0x60) - *(float *)(pcStack16 + 0x10);
    fVar5 = *(float *)(iVar1 + 0x5c) - *(float *)(pcStack16 + 0xc);
    if (((flt_8005348C <= fVar3 * fVar3 + fVar4 * fVar4) || (200.00000000 <= fVar5)) ||
       (fVar5 <= -200.00000000)) {
      proc_7F03CB8C(param_1,auStack64);
      proc_7F03CB8C(pcStack16,auStack96);
      lVar2 = proc_7F03DB70((int *)auStack64,(int *)auStack96);
      if ((lVar2 != 0) &&
         (lVar2 = proc_7F03F598((float *)(pcStack16 + 8),extraout_f12,(float *)0x43160000),
         lVar2 != 0)) {
        iStack12 = 1;
      }
    }
    else {
      iStack12 = 1;
    }
    if (((iStack12 != 0) && (iStack4 = proc_7F0555F8(iVar1,0), iStack4 != 0)) &&
       (*(int *)(iVar1 + 0xc) < 0)) {
      iStack4 = proc_7F0555F8(iVar1,1);
    }
  }
  return iStack4;
}



void proc_7F05599C(int param_1)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  
  iVar2 = *(int *)(param_1 + 4);
  cVar1 = *(char *)(iVar2 + 0xbc);
  if ((cVar1 == '\x01') || (cVar1 == '\x03')) {
    proc_7F054988(iVar2,2);
    uVar3 = *(uint *)(iVar2 + 100);
  }
  else {
    if (cVar1 == '\x02') {
      proc_7F054988(iVar2,1);
      uVar3 = *(uint *)(iVar2 + 100);
    }
    else {
      if (cVar1 == '\0') {
        if (0.50000000 < *(float *)(iVar2 + 0xb4)) {
          proc_7F054988(iVar2,2);
          uVar3 = *(uint *)(iVar2 + 100);
          goto LAB_7f055a3c;
        }
        proc_7F054988(iVar2,1);
      }
      uVar3 = *(uint *)(iVar2 + 100);
    }
  }
LAB_7f055a3c:
  *(uint *)(iVar2 + 100) = uVar3 | 0x4000;
  *(uint *)(iVar2 + 0xc) = *(uint *)(iVar2 + 0xc) & 0xfffffff7;
  proc_7F03E6A0(param_1);
  return;
}



undefined8 proc_7F055A70(int param_1,int param_2)

{
  float *pfVar2;
  undefined8 uVar1;
  float fVar3;
  
  pfVar2 = (float *)(ptr_2xxxpresets + (int)*(short *)(param_2 + 6) * 0x44);
  fVar3 = (pfVar2[3] * pfVar2[7] - pfVar2[6] * pfVar2[4]) * (*(float *)(param_1 + 0x10) - pfVar2[2])
          + (*(float *)(param_1 + 8) - *pfVar2) * (pfVar2[4] * pfVar2[8] - pfVar2[7] * pfVar2[5]) +
            (*(float *)(param_1 + 0xc) - pfVar2[1]) *
            (pfVar2[5] * pfVar2[6] - pfVar2[8] * pfVar2[3]);
  if ((*(ushort *)(param_2 + 0x98) & 8) != 0) {
    fVar3 = -fVar3;
  }
  if (fVar3 < 0.00000000) {
    uVar1 = 0;
  }
  else {
    uVar1 = 1;
    if (0.00000000 < fVar3) {
      uVar1 = 1;
    }
  }
  return uVar1;
}



void proc_7F055B78(int param_1,int param_2)

{
  longlong lVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  
  if (((*(int *)(param_2 + 8) << 4 < 0) && (*(char *)(param_2 + 0xbc) == '\0')) &&
     (*(float *)(param_2 + 0xb4) == 0.00000000)) {
    lVar1 = proc_7F055A70(param_1,param_2);
    uVar3 = 0;
    if ((*(ushort *)(param_2 + 0x98) & 8) == 0) {
      if (lVar1 == 0) {
        uVar3 = 0x20000000;
      }
      uVar4 = *(uint *)(param_2 + 8);
    }
    else {
      if (lVar1 == 0) {
        uVar4 = *(uint *)(param_2 + 8);
      }
      else {
        uVar3 = 0x20000000;
        uVar4 = *(uint *)(param_2 + 8);
      }
    }
    if ((int)((uVar4 ^ uVar3) << 2) < 0) {
      uVar3 = *(uint *)(param_2 + 8);
      iVar2 = param_2;
      while( true ) {
        *(uint *)(iVar2 + 8) = uVar3 ^ 0x20000000;
        iVar2 = *(int *)(iVar2 + 200);
        if ((iVar2 == 0) || (iVar2 == param_2)) break;
        uVar3 = *(uint *)(iVar2 + 8);
      }
    }
  }
  return;
}



undefined8 proc_7F055C40(int param_1)

{
  int iVar1;
  uint uVar2;
  bool bVar3;
  int iVar5;
  longlong lVar4;
  byte *text;
  uint uVar6;
  
  iVar1 = *(int *)(param_1 + 4);
  iVar5 = get_curplayer_positiondata();
  if (*(uint *)(iVar1 + 0x9c) == 0) {
    bVar3 = true;
  }
  else {
    lVar4 = proc_7F08CE70(*(uint *)(iVar1 + 0x9c));
    if (lVar4 == 0) {
      lVar4 = proc_7F055A70(iVar5,iVar1);
      bVar3 = false;
      if (lVar4 == 0) {
        if ((-1 < *(int *)(iVar1 + 0xc) << 3) && (*(int *)(iVar1 + 0xc) << 4 < 0)) {
          bVar3 = true;
        }
      }
      else {
        if ((*(int *)(iVar1 + 0xc) << 3 < 0) && (-1 < *(int *)(iVar1 + 0xc) << 4)) {
          bVar3 = true;
        }
      }
    }
    else {
      bVar3 = true;
    }
  }
  lVar4 = proc_7F03E718(iVar1);
  if (lVar4 == 0) {
    bVar3 = false;
  }
  if (bVar3) {
    proc_7F055B78(iVar5,iVar1);
    proc_7F05599C(param_1);
  }
  else {
    if ((*(char *)(iVar1 + 0xbc) == '\0') && (*(float *)(iVar1 + 0xb4) < 0.50000000)) {
      uVar6 = *(uint *)(iVar1 + 0xc);
      if ((uVar6 & 4) == 0) {
        iVar5 = proc_7F08D21C(iVar1);
        if ((iVar5 == 0) || (*(int *)(iVar5 + 0x1c) == 0)) {
          text = get_textptr_for_textID(0xa440);
          display_string_in_lower_left_corner((char *)text);
          uVar6 = *(uint *)(iVar1 + 0xc);
        }
        else {
          text = get_textptr_for_textID((u16)*(undefined4 *)(iVar5 + 0x1c));
          display_string_in_lower_left_corner((char *)text);
          uVar6 = *(uint *)(iVar1 + 0xc);
        }
        uVar2 = *(uint *)(iVar1 + 100);
      }
      else {
        uVar2 = *(uint *)(iVar1 + 100);
      }
      *(uint *)(iVar1 + 0xc) = uVar6 | 8;
      *(uint *)(iVar1 + 100) = uVar2 | 0x4000;
    }
  }
  return 0;
}



void start_alarm(void)

{
  if (alarm_timer < 1) {
    alarm_timer = 1;
  }
  return;
}



void deactivate_alarm_sound_effect(void)

{
  ulonglong uVar1;
  
  if ((ptr_alarm_sfx != 0) && (uVar1 = music_related_26(ptr_alarm_sfx), uVar1 != 0)) {
    music_related_28(ptr_alarm_sfx);
  }
  return;
}



void stop_alarm(void)

{
  alarm_timer = 0;
  deactivate_alarm_sound_effect();
  return;
}



s32 is_alarm_on(void)

{
  return (s32)(uint)(0 < alarm_timer);
}



void init_trigger_toxic_gas_effect(undefined4 *param_1)

{
  LEVELID LVar1;
  
  activate_gas_sound_timer = 1;
  dword_80030AE0 = 0;
  flt_80030AD0 = *param_1;
  flt_80030AD4 = param_1[1];
  flt_80030AD8 = param_1[2];
  LVar1 = get_stage_num();
  if (LVar1 != LEVELID_EGYPT) {
    gas_damage_flag = 3600.00000000;
  }
  else {
    gas_damage_flag = 120.00000000;
  }
  DAT_80071e7c = (uint)(LVar1 != LEVELID_EGYPT);
  return;
}



void proc_7F055EF8(void)

{
  ulonglong uVar1;
  
  if ((dword_80030AE4 != 0) && (uVar1 = music_related_26(dword_80030AE4), uVar1 != 0)) {
    music_related_28(dword_80030AE4);
  }
  return;
}



ulonglong check_if_toxic_gas_activated(void)

{
  return (ulonglong)(0.00000000 < toxic_gas_sound_timer);
}



void proc_7F055F64(void)

{
  int iVar2;
  ulonglong uVar1;
  
  if ((activate_gas_sound_timer != 0) &&
     (toxic_gas_sound_timer = toxic_gas_sound_timer + global_timer_delta,
     gas_damage_flag <= toxic_gas_sound_timer)) {
    toxic_gas_sound_timer = gas_damage_flag;
    activate_gas_sound_timer = 0;
  }
  if (((0.00000000 < toxic_gas_sound_timer) && (disable_player_pickups_flag == 0)) &&
     (switch_to_solosky2(toxic_gas_sound_timer / gas_damage_flag), DAT_80071e7c != 0)) {
    if (dword_80030ADC < global_timer + -0xe1) {
      dword_80030ADC = global_timer;
      if (600.00000000 <= toxic_gas_sound_timer) {
        play_sfx_a1(ptr_sfx_buf,0x62,NULL);
      }
      if (1800.00000000 <= toxic_gas_sound_timer) {
        record_damage_kills();
      }
    }
    if (dword_80030AE0 < gas_damage_flag) {
      dword_80030AE0 = dword_80030AE0 + global_timer_delta;
      if ((dword_80030AE4 == 0) && (iVar2 = get_controls_locked_flag(), iVar2 == 0)) {
        play_sfx_a1(ptr_sfx_buf,0x66,(sfxdata *)&dword_80030AE4);
      }
      if (dword_80030AE4 != 0) {
        proc_7F053A10(dword_80030AE4,(float *)&flt_80030AD0);
      }
    }
    else {
      if ((dword_80030AE4 != 0) && (uVar1 = music_related_26(dword_80030AE4), uVar1 != 0)) {
        music_related_28(dword_80030AE4);
      }
    }
  }
  return;
}



void set_unset_clock_lock_bits(int clocklockbits,int flag)

{
  if (flag != 0) {
    clock_drawn_flag = clock_drawn_flag & ~clocklockbits;
    return;
  }
  clock_drawn_flag = clock_drawn_flag | clocklockbits;
  return;
}



ulonglong is_clock_drawn_onscreen(void)

{
  return (ulonglong)(clock_drawn_flag == 0);
}



void set_clock_time(f32 time)

{
  clock_time = time;
  return;
}



f32 get_clock_time(void)

{
  return clock_time;
}



void set_clock_enable(int enable)

{
  clock_enable = enable;
  return;
}



undefined4 get_clock_enable(void)

{
  return clock_enable;
}



void proc_7F0561E0(void)

{
  if (clock_enable != 0) {
    clock_time = clock_time - global_timer_delta;
  }
  return;
}



undefined4 * proc_7F056210(undefined4 *param_1)

{
  undefined4 *puVar1;
  short sVar2;
  short sVar3;
  uint *DL;
  int iVar4;
  int iVar5;
  float fVar6;
  float fVar7;
  int iVar8;
  
  if (clock_drawn_flag == 0) {
    fVar7 = clock_time;
    if (clock_time < 0.00000000) {
      fVar7 = -clock_time;
    }
    fVar6 = truncf(fVar7 / 3600.00000000);
    iVar8 = (int)fVar6;
    fVar6 = truncf(fVar7 / 60.00000000);
    iVar5 = (int)fVar6 + iVar8 * -0x3c;
    fVar7 = truncf((fVar7 * 100.00000000) / 60.00000000);
    iVar4 = (int)fVar7 + iVar8 * -6000 + iVar5 * -100;
    puVar1 = microcode_constructor(param_1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (puVar1,(longlong)((iVar8 % 100) / 10),0x82,2,((int)sVar3 + (int)sVar2) - 0x12,2,
                    1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (DL,(longlong)(iVar8 % 10),0x8a,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = proc_7F069A50(DL,(byte *)asc_80052A44,0x93,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (DL,(longlong)((iVar5 % 0x3c) / 10),0x9c,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (DL,(longlong)(iVar5 % 10),0xa4,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = proc_7F069A50(DL,(byte *)asc_80052A44,0xad,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (DL,(longlong)((iVar4 % 100) / 10),0xb6,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    sVar2 = get_video2_settings_uly();
    sVar3 = get_video2_settings_height();
    DL = display_ammo_total_in_a1
                   (DL,(longlong)(iVar4 % 10),0xbe,2,((int)sVar3 + (int)sVar2) - 0x12,2,1);
    param_1 = combiner_bayer_lod_perspective(DL);
  }
  return param_1;
}



void proc_7F0565F0(void)

{
  s32 sVar1;
  int iVar2;
  
  sVar1 = is_alarm_on();
  if (sVar1 != 0) {
    if ((ptr_alarm_sfx == 0) && (iVar2 = get_controls_locked_flag(), iVar2 == 0)) {
      play_sfx_a1(ptr_sfx_buf,0xa3,(sfxdata *)&ptr_alarm_sfx);
    }
    alarm_timer += clock_timer;
    if (0x708 < alarm_timer) {
      stop_alarm();
    }
  }
  proc_7F055F64();
  proc_7F0561E0();
  proc_7F051CC8();
  dword_80030AF4 = 0;
  return;
}



void proc_7F056690(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  ushort *puVar6;
  longlong lVar5;
  char *pcVar7;
  
  pcVar7 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar7 == NULL) {
    return;
  }
  cVar1 = *pcVar7;
  do {
    if (cVar1 == '\x01') {
      if ((pcVar7[1] & 2U) == 0) {
        iVar2 = *(int *)(pcVar7 + 4);
        if ((*(byte *)(iVar2 + 2) & 0x80) == 0) {
          pcVar7 = *(char **)(pcVar7 + 0x24);
        }
        else {
          iVar3 = *(int *)(iVar2 + 0x14);
          puVar6 = proc_7F04B478(iVar2);
          if (puVar6 == NULL) {
            return;
          }
          iVar4 = *(int *)(puVar6 + 2);
          if (iVar4 == 0) {
            return;
          }
          lVar5 = proc_7F04B590(*(int *)(*(int *)(iVar2 + 0x14) + 8),(int)puVar6);
          if (lVar5 == 0) {
            pcVar7 = *(char **)(pcVar7 + 0x24);
          }
          else {
            if (*(int *)(iVar4 + 8) !=
                *(int *)(*(int *)(iVar3 + 0x10) + (uint)*(ushort *)(iVar4 + 0x1a) * 4)) {
              proc_7F041024(iVar2,1);
              return;
            }
            pcVar7 = *(char **)(pcVar7 + 0x24);
          }
        }
      }
      else {
        pcVar7 = *(char **)(pcVar7 + 0x24);
      }
    }
    else {
      pcVar7 = *(char **)(pcVar7 + 0x24);
    }
    if (pcVar7 == NULL) {
      return;
    }
    cVar1 = *pcVar7;
  } while( true );
}



void drop_inventory(void)

{
  int *GUARDdata;
  longlong lVar1;
  BOOL BVar2;
  undefined *puVar3;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  ulonglong uVar4;
  
  GUARDdata = *(int **)(ptr_BONDdata->position_data_pointer + 4);
  set_0x4_in_runtime_flags_for_item_in_guards_hand(GUARDdata,0);
  set_0x4_in_runtime_flags_for_item_in_guards_hand(GUARDdata,1);
  uVar4 = 1;
  do {
    lVar1 = proc_7F09B244(uVar4);
    if (-1 < lVar1) {
      BVar2 = is_weapon_in_inv((weaponid)uVar4);
      if (BVar2 != FALSE) {
        puVar3 = create_held_weapon((undefined2 *)GUARDdata,(int)lVar1,(weaponid)uVar4,0x20000000,
                                    NULL,NULL);
        if (puVar3 != NULL) {
          proc_7F04BFD0((int)puVar3,1);
          proc_7F04C130((int)puVar3,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
        }
      }
    }
    uVar4 = SEXT48((int)uVar4 + 1);
  } while (uVar4 != 0x59);
  return;
}



undefined8
proc_7F056850(undefined4 *param_1,longlong param_2,float param_3,undefined4 *param_4,
             undefined4 *param_5)

{
  undefined8 uVar1;
  longlong lVar2;
  undefined4 *in_stack_00000010;
  
  *param_5 = *param_1;
  param_5[1] = param_1[1];
  param_5[2] = param_1[2];
  *in_stack_00000010 = (int)param_2;
  if (param_2 == 0) {
    uVar1 = 0;
  }
  else {
    if (0.00000000 < (float)param_4) {
      lVar2 = proc_7F0B18B8();
      if (lVar2 < 0) {
        uVar1 = 1;
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 1;
    }
  }
  return uVar1;
}



undefined8 get_size_of_setup_object_type(int *object)

{
  if (true) {
    switch(*(undefined *)((int)object + 3)) {
    case 1:
      return 0x40;
    case 2:
      return 2;
    case 3:
      return 0x20;
    case 4:
      return 0x21;
    case 5:
      return 0x20;
    case 6:
      return 0x3b;
    case 7:
      return 0x21;
    case 8:
      return 0x22;
    case 9:
      return 7;
    case 10:
      return 0x40;
    case 0xb:
      return 0x95;
    case 0xc:
      return 0x20;
    case 0xd:
      return 0x36;
    case 0xe:
      return 3;
    case 0x11:
      return 0x20;
    case 0x12:
      return 3;
    case 0x13:
      return 4;
    case 0x14:
      return 0x2d;
    case 0x15:
      return 0x22;
    case 0x16:
      return 4;
    case 0x17:
      return 4;
    case 0x18:
      return 1;
    case 0x19:
      return 2;
    case 0x1a:
      return 2;
    case 0x1b:
      return 2;
    case 0x1c:
      return 2;
    case 0x1d:
      return 2;
    case 0x1e:
      return 4;
    case 0x1f:
      return 1;
    case 0x20:
      return 4;
    case 0x21:
      return 5;
    case 0x22:
      return 1;
    case 0x23:
      return 4;
    case 0x24:
      return 0x20;
    case 0x25:
      return 10;
    case 0x26:
      return 4;
    case 0x27:
      return 0x2c;
    case 0x28:
      return 0x2d;
    case 0x2a:
      return 0x20;
    case 0x2b:
      return 0x20;
    case 0x2c:
      return 5;
    case 0x2d:
      return 0x38;
    case 0x2e:
      return 7;
    case 0x2f:
      return 0x25;
    }
  }
  return 1;
}



int proc_7F056A88(int param_1)

{
  undefined8 uVar1;
  int iVar2;
  int *object;
  
  if (-1 < param_1) {
    if (ptr_setup_objects == NULL) {
      return 0;
    }
    iVar2 = 0;
    object = (int *)ptr_setup_objects;
    if (ptr_setup_objects[3] == '0') {
      return 0;
    }
    do {
      if (iVar2 == param_1) {
        return (int)object;
      }
      uVar1 = get_size_of_setup_object_type(object);
      object = object + (int)uVar1;
      iVar2 += 1;
    } while (*(char *)((int)object + 3) != '0');
  }
  return 0;
}



int proc_7F056B1C(int param_1)

{
  undefined8 uVar1;
  int *object;
  int iVar2;
  
  if (ptr_setup_objects != NULL) {
    iVar2 = 0;
    object = (int *)ptr_setup_objects;
    if (ptr_setup_objects[3] == '0') {
      return -1;
    }
    do {
      if (object == (int *)param_1) {
        return iVar2;
      }
      uVar1 = get_size_of_setup_object_type(object);
      object = object + (int)uVar1;
      iVar2 += 1;
    } while (*(char *)((int)object + 3) != '0');
  }
  return -1;
}



int proc_7F056BA8(int param_1)

{
  undefined8 uVar1;
  int iVar2;
  int *object;
  int iVar3;
  
  if (ptr_setup_objects == NULL) {
LAB_7f056c18:
    iVar3 = -1;
  }
  else {
    iVar3 = 0;
    if (ptr_setup_objects[3] == '0') {
      iVar3 = -1;
    }
    else {
      iVar2 = *(int *)(ptr_setup_objects + 0x10);
      object = (int *)ptr_setup_objects;
      while (param_1 != iVar2) {
        uVar1 = get_size_of_setup_object_type(object);
        object = object + (int)uVar1;
        iVar3 += 1;
        if (*(char *)((int)object + 3) == '0') goto LAB_7f056c18;
        iVar2 = object[4];
      }
    }
  }
  return iVar3;
}



ulonglong load_model(int modelid)

{
  object_header *header;
  bool bVar1;
  
  header = (object_header *)PitemZ_entries[modelid].header;
  bVar1 = header->offset_obj_table == 0;
  if (bVar1) {
    load_object_into_memory(header,(int *)PitemZ_entries[modelid].filename);
    set_objuse_flag_compute_grp_nums_set_obj_loaded((object_header *)PitemZ_entries[modelid].header)
    ;
  }
  return (ulonglong)bVar1;
}



void proc_7F056CA0(int param_1)

{
  char cVar1;
  char *pcVar2;
  int iVar3;
  float *pfVar4;
  float fVar5;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  
  pcVar2 = *(char **)(param_1 + 0x10);
  proc_7F03E18C((int)pcVar2);
  if (*(int *)(param_1 + 0xc) << 0xe < 0) {
    if (*(int *)(pcVar2 + 0x14) == 0) {
      pcVar2[0x2c] = -1;
    }
    else {
      cVar1 = *(char *)(*(int *)(pcVar2 + 0x14) + 3);
      pcVar2[0x2d] = -1;
      pcVar2[0x2c] = cVar1;
    }
  }
  else {
    iVar3 = proc_7F040078(param_1);
    if (iVar3 != 0) {
      pfVar4 = (float *)(param_1 + 0x18);
      fStack16 = proc_7F03E87C(iVar3,pfVar4);
      fStack16 = fStack16 - 30.00000000;
      fStack12 = proc_7F03E9BC(iVar3,(int)pfVar4);
      fStack8 = proc_7F03EAFC(iVar3,(int)pfVar4);
      fStack8 = fStack8 - 30.00000000;
      fStack28 = proc_7F03E91C(iVar3,pfVar4);
      fStack28 = fStack28 + 30.00000000;
      fStack24 = proc_7F03EA5C(iVar3,(int)pfVar4);
      fVar5 = proc_7F03EB9C(iVar3,(int)pfVar4);
      fStack16 = fStack16 + *(float *)(param_1 + 0x58);
      fStack12 = fStack12 + *(float *)(param_1 + 0x5c);
      fStack8 = fStack8 + *(float *)(param_1 + 0x60);
      fStack28 = fStack28 + *(float *)(param_1 + 0x58);
      fStack24 = fStack24 + *(float *)(param_1 + 0x5c);
      fStack20 = fVar5 + 30.00000000 + *(float *)(param_1 + 0x60);
      proc_7F03E27C(pcVar2,&fStack16,&fStack28,fVar5 + 30.00000000);
    }
  }
  proc_7F03E210((int)pcVar2);
  return;
}



int proc_7F056EA0(undefined8 param_1,int param_2)

{
  int iVar1;
  
  iVar1 = proc_7F056A88(param_2);
  if ((iVar1 != 0) && (true)) {
    switch(*(undefined *)(iVar1 + 3)) {
    case 1:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 10:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0x11:
    case 0x14:
    case 0x15:
    case 0x24:
    case 0x27:
    case 0x28:
    case 0x29:
    case 0x2a:
    case 0x2b:
    case 0x2d:
    case 0x2f:
      break;
    case 2:
    case 9:
    case 0xe:
    case 0x12:
    case 0x13:
    case 0x16:
    case 0x17:
    case 0x18:
    case 0x19:
    case 0x1a:
    case 0x1b:
    case 0x1c:
    case 0x1d:
    case 0x1e:
    case 0x1f:
    case 0x20:
    case 0x21:
    case 0x22:
    case 0x23:
    case 0x25:
    case 0x26:
    case 0x2c:
    case 0x2e:
      iVar1 = 0;
    }
  }
  return iVar1;
}



int proc_7F056F08(ulonglong param_1,int *param_2,int *param_3,longlong param_4,int param_5,
                 int param_6)

{
  byte bVar1;
  ulonglong uVar2;
  undefined8 uVar3;
  int *object;
  int *piVar4;
  int *piVar5;
  
  piVar4 = NULL;
  piVar5 = NULL;
  if (ptr_setup_objects != NULL) {
    bVar1 = ptr_setup_objects[3];
    object = (int *)ptr_setup_objects;
    while (bVar1 != 0x30) {
      if ((param_1 & 0xff) == (ulonglong)bVar1) {
        if (object[4] == 0) {
          if ((param_4 == 0) && (param_5 == 0)) {
            return (int)object;
          }
        }
        else {
          if (((((param_1 != 8) && ((object[0x19] & 0x80U) == 0)) &&
               ((*(byte *)((int)object + 2) & 4) == 0)) && (*(int *)(object[4] + 0x1c) == 0)) &&
             ((param_5 == 0 || (uVar2 = proc_7F06C060(object[5],param_6), uVar2 != 0)))) {
            if ((piVar4 == NULL) && ((*(byte *)(object[4] + 1) & 2) == 0)) {
              piVar4 = object;
            }
            if (piVar5 == NULL) {
              piVar5 = object;
            }
          }
        }
      }
      uVar3 = get_size_of_setup_object_type(object);
      object = object + (int)uVar3;
      bVar1 = *(byte *)((int)object + 3);
    }
  }
  *(int **)param_2 = piVar4;
  *(int **)param_3 = piVar5;
  return 0;
}



int proc_7F057080(short param_1)

{
  short sVar1;
  int iVar2;
  
  if (ptr_last_tag_entry_type16 != 0) {
    sVar1 = *(short *)(ptr_last_tag_entry_type16 + 4);
    iVar2 = ptr_last_tag_entry_type16;
    while( true ) {
      if (param_1 == sVar1) {
        return iVar2;
      }
      iVar2 = *(int *)(iVar2 + 8);
      if (iVar2 == 0) break;
      sVar1 = *(short *)(iVar2 + 4);
    }
  }
  return 0;
}



int get_handle_to_tagged_object(int object)

{
  int iVar1;
  int iVar2;
  
  iVar1 = proc_7F057080((short)object);
  iVar2 = 0;
  if (iVar1 != 0) {
    iVar2 = *(int *)(iVar1 + 0xc);
  }
  if ((iVar2 != 0) && ((*(uint *)(iVar2 + 100) & 0x10) == 0)) {
    iVar2 = 0;
  }
  return iVar2;
}



int get_ptr_text_for_watch_breifing_page(WATCH_BRIEFING_PAGE page)

{
  int iVar1;
  byte *pbVar2;
  WATCH_BRIEFING_PAGE WVar3;
  
  pbVar2 = NULL;
  if (ptr_last_briefing_setup_entry_type23 != 0) {
    WVar3 = *(WATCH_BRIEFING_PAGE *)(ptr_last_briefing_setup_entry_type23 + 4);
    iVar1 = ptr_last_briefing_setup_entry_type23;
    while (page != WVar3) {
      iVar1 = *(int *)(iVar1 + 0xc);
      if (iVar1 == 0) goto LAB_7f057150;
      WVar3 = *(WATCH_BRIEFING_PAGE *)(iVar1 + 4);
    }
    pbVar2 = get_textptr_for_textID(*(u16 *)(iVar1 + 10));
  }
LAB_7f057150:
  if (pbVar2 == NULL) {
    if (page == BRIEFING_TITLE) {
      pbVar2 = get_textptr_for_textID(0xb029);
    }
    else {
      if (page == BRIEFING_OVERVIEW) {
        pbVar2 = get_textptr_for_textID(0xb02a);
      }
      else {
        pbVar2 = get_textptr_for_textID(0xb02b);
      }
    }
  }
  return (int)pbVar2;
}



int add_objective(void)

{
  return num_objective_ptrs + 1;
}



int get_text_for_objective(int objective)

{
  byte *pbVar1;
  
  if ((objective < 10) && (objective_ptrs[objective] != 0)) {
    pbVar1 = get_textptr_for_textID(*(u16 *)(objective_ptrs[objective] + 10));
  }
  else {
    pbVar1 = NULL;
  }
  return (int)pbVar1;
}



DIFFICULTY get_difficulty_for_objective(int objective)

{
  if ((objective < 10) && (objective_ptrs[objective] != 0)) {
    return (DIFFICULTY)(int)*(char *)(objective_ptrs[objective] + 0xf);
  }
  return DIFFICULTY_AGENT;
}



int get_status_of_objective(longlong objective)

{
  char cVar1;
  longlong lVar2;
  ulonglong uVar3;
  int iVar5;
  undefined8 uVar4;
  BOOL BVar6;
  int iVar7;
  int *object;
  int iVar8;
  
  iVar8 = 1;
  if (objective < 10) {
    object = (int *)objective_ptrs[(int)objective];
    if (object == NULL) {
      iVar8 = (&DAT_80075d58)[(int)objective];
    }
    else {
      cVar1 = *(char *)((int)object + 3);
      while (cVar1 != '\x18') {
        iVar7 = 1;
        if (true) {
          switch(cVar1) {
          case '\x19':
            iVar5 = get_handle_to_tagged_object(object[1]);
            if (((iVar5 != 0) && (*(int *)(iVar5 + 0x10) != 0)) &&
               (uVar3 = check_if_object_has_not_been_destroyed(iVar5), uVar3 != 0)) {
              iVar7 = 0;
            }
            break;
          case '\x1a':
            uVar3 = proc_7F033338(0,object[1]);
            if (uVar3 == 0) {
              iVar7 = 0;
            }
            break;
          case '\x1b':
            uVar3 = proc_7F033338(0,object[1]);
            if (uVar3 != 0) {
              iVar7 = 2;
            }
            break;
          case '\x1c':
            iVar5 = get_handle_to_tagged_object(object[1]);
            if (((iVar5 == 0) || (*(int *)(iVar5 + 0x10) == 0)) ||
               (uVar3 = check_if_object_has_not_been_destroyed(iVar5), uVar3 == 0)) {
              iVar7 = 2;
            }
            else {
              lVar2 = proc_7F08CFE0(*(int *)(iVar5 + 0x10));
              if (lVar2 == 0) {
                iVar7 = 0;
              }
            }
            break;
          case '\x1d':
            iVar5 = get_handle_to_tagged_object(object[1]);
            if (((iVar5 != 0) && (*(int *)(iVar5 + 0x10) != 0)) &&
               (lVar2 = proc_7F08CFE0(*(int *)(iVar5 + 0x10)), lVar2 != 0)) {
              iVar7 = 0;
            }
            break;
          case '\x1e':
            iVar5 = get_handle_to_tagged_object(object[1]);
            if (object[2] == 0) {
              if (((iVar5 == 0) || (*(int *)(iVar5 + 0x10) == 0)) ||
                 (uVar3 = check_if_object_has_not_been_destroyed(iVar5), uVar3 == 0)) {
                iVar7 = 2;
              }
              else {
                iVar7 = 0;
              }
            }
            break;
          case ' ':
            if (object[2] == 0) {
              iVar7 = 0;
            }
            break;
          case '!':
            if (object[3] == 0) {
              iVar7 = 0;
            }
            break;
          case '\"':
            iVar5 = get_keyanalyzer_flag();
            if (iVar5 == 0) {
              iVar7 = 0;
            }
          }
        }
        if (iVar8 == 1) {
          if (iVar7 != 1) {
            iVar8 = iVar7;
          }
        }
        else {
          if ((iVar8 == 0) && (iVar7 == 2)) {
            iVar8 = iVar7;
          }
        }
        uVar4 = get_size_of_setup_object_type(object);
        object = object + (int)uVar4;
        cVar1 = *(char *)((int)object + 3);
      }
    }
  }
  BVar6 = get_debug_all_obj_complete_flag();
  if (BVar6 != FALSE) {
    iVar8 = 1;
  }
  return iVar8;
}



undefined8 check_objectives_complete(void)

{
  int iVar1;
  DIFFICULTY DVar2;
  DIFFICULTY DVar3;
  longlong objective;
  
  objective = 0;
  iVar1 = add_objective();
  if (0 < iVar1) {
    do {
      DVar2 = get_difficulty_for_objective((int)objective);
      DVar3 = get_current_difficulty();
      if ((DVar2 <= DVar3) && (iVar1 = get_status_of_objective(objective), iVar1 != 1)) {
        return 0;
      }
      objective = (longlong)((int)objective + 1);
      iVar1 = add_objective();
    } while (objective < (longlong)iVar1);
  }
  return 1;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void display_objective_status_text_on_status_change(void)

{
  int objstatus;
  DIFFICULTY DVar1;
  DIFFICULTY DVar2;
  byte *pbVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  longlong objective;
  int objective_00;
  int iVar8;
  int *piVar9;
  undefined4 auStack60 [15];
  
  iVar8 = 0;
  puVar6 = dword_80053610;
  puVar4 = auStack60;
  do {
    puVar7 = puVar6 + 3;
    puVar5 = puVar4 + 3;
    *puVar4 = *puVar6;
    puVar4[1] = puVar6[1];
    puVar4[2] = puVar6[2];
    puVar6 = puVar7;
    puVar4 = puVar5;
  } while (puVar7 != (undefined4 *)&dword_80053640);
  *(undefined2 *)puVar5 = _dword_80053640;
  piVar9 = &DAT_80075d58;
  objective = 0;
  if (-1 < num_objective_ptrs) {
    do {
      objstatus = get_status_of_objective(objective);
      objective_00 = (int)objective;
      if (objstatus != *piVar9) {
        *piVar9 = objstatus;
        DVar1 = get_difficulty_for_objective(objective_00);
        DVar2 = get_current_difficulty();
        if (DVar1 <= DVar2) {
          if (j_text_trigger == 0) {
            pbVar3 = get_textptr_for_textID(0xb02c);
            sprintf((char *)auStack60,aSC,pbVar3,iVar8 + 0x61);
          }
          else {
            pbVar3 = get_textptr_for_textID(0xb02c);
            sprintf((char *)auStack60,aSAC,pbVar3,iVar8 + 0x1a);
          }
          if (objstatus == 1) {
            pbVar3 = get_textptr_for_textID(0xb02d);
            string_load_parse_something((char *)auStack60,(char *)pbVar3);
          }
          else {
            if (objstatus == 0) {
              pbVar3 = get_textptr_for_textID(0xb02e);
              string_load_parse_something((char *)auStack60,(char *)pbVar3);
            }
            else {
              if (objstatus == 2) {
                pbVar3 = get_textptr_for_textID(0xb02f);
                string_load_parse_something((char *)auStack60,(char *)pbVar3);
              }
            }
          }
          display_string_in_lower_left_corner((char *)auStack60);
        }
      }
      DVar1 = get_difficulty_for_objective(objective_00);
      DVar2 = get_current_difficulty();
      if (DVar1 <= DVar2) {
        iVar8 += 1;
      }
      objective = (longlong)(objective_00 + 1);
      piVar9 = piVar9 + 1;
    } while (objective <= (longlong)num_objective_ptrs);
  }
  return;
}



void proc_7F057744(ulonglong param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  
  if (ptr_last_enter_room_subobject_entry_type20 != 0) {
    iVar3 = *(int *)(ptr_last_enter_room_subobject_entry_type20 + 8);
    iVar2 = ptr_last_enter_room_subobject_entry_type20;
    while( true ) {
      if (iVar3 == 0) {
        uVar1 = *(uint *)(iVar2 + 4);
        if (uVar1 < 10000) {
          iVar3 = *(int *)(ptr_0xxxpresets + uVar1 * 0x2c + 0x28);
        }
        else {
          iVar3 = *(int *)(ptr_2xxxpresets + uVar1 * 0x44 + -0xa6018);
        }
        if (iVar3 == 0) {
          iVar2 = *(int *)(iVar2 + 0xc);
        }
        else {
          if (param_1 == (ulonglong)*(byte *)(iVar3 + 3)) {
            *(undefined4 *)(iVar2 + 8) = 1;
            iVar2 = *(int *)(iVar2 + 0xc);
          }
          else {
            iVar2 = *(int *)(iVar2 + 0xc);
          }
        }
      }
      else {
        iVar2 = *(int *)(iVar2 + 0xc);
      }
      if (iVar2 == 0) break;
      iVar3 = *(int *)(iVar2 + 8);
    }
  }
  return;
}



void proc_7F0577E8(int param_1,ulonglong param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  
  if (ptr_last_deposit_in_room_subobject_entry_type21 != 0) {
    iVar3 = *(int *)(ptr_last_deposit_in_room_subobject_entry_type21 + 0xc);
    iVar2 = ptr_last_deposit_in_room_subobject_entry_type21;
    while( true ) {
      if (iVar3 == 0) {
        if (param_1 == *(int *)(iVar2 + 4)) {
          uVar1 = *(uint *)(iVar2 + 8);
          if (uVar1 < 10000) {
            iVar3 = *(int *)(ptr_0xxxpresets + uVar1 * 0x2c + 0x28);
          }
          else {
            iVar3 = *(int *)(ptr_2xxxpresets + uVar1 * 0x44 + -0xa6018);
          }
          if (iVar3 == 0) {
            iVar2 = *(int *)(iVar2 + 0x10);
          }
          else {
            if (param_2 == (ulonglong)*(byte *)(iVar3 + 3)) {
              *(undefined4 *)(iVar2 + 0xc) = 1;
              iVar2 = *(int *)(iVar2 + 0x10);
            }
            else {
              iVar2 = *(int *)(iVar2 + 0x10);
            }
          }
        }
        else {
          iVar2 = *(int *)(iVar2 + 0x10);
        }
      }
      else {
        iVar2 = *(int *)(iVar2 + 0x10);
      }
      if (iVar2 == 0) break;
      iVar3 = *(int *)(iVar2 + 0xc);
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F057898(void)

{
  int iVar1;
  int iVar4;
  ulonglong uVar2;
  longlong lVar3;
  int iVar5;
  f32 fVar6;
  f32 fVar7;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float afStack36 [2];
  float afStack28 [2];
  float afStack20 [5];
  
  if (ptr_last_photo_obj_in_room_subobject_entry_type1E == 0) {
    return;
  }
  iVar4 = *(int *)(ptr_last_photo_obj_in_room_subobject_entry_type1E + 8);
  iVar5 = ptr_last_photo_obj_in_room_subobject_entry_type1E;
  do {
    if (iVar4 == 0) {
      iVar4 = get_handle_to_tagged_object(*(int *)(iVar5 + 4));
      if (iVar4 == 0) {
LAB_7f057a84:
        iVar5 = *(int *)(iVar5 + 0xc);
      }
      else {
        iVar1 = *(int *)(iVar4 + 0x10);
        if (iVar1 == 0) {
          iVar5 = *(int *)(iVar5 + 0xc);
        }
        else {
          if ((*(byte *)(iVar1 + 1) & 2) == 0) {
            iVar5 = *(int *)(iVar5 + 0xc);
          }
          else {
            if (0.00000000 <= *(float *)(iVar1 + 0x18)) {
              uVar2 = check_if_object_has_not_been_destroyed(iVar4);
              if ((uVar2 == 0) ||
                 (lVar3 = proc_7F050D30(*(int *)(iVar4 + 0x10),afStack20,afStack28,afStack36),
                 lVar3 == 0)) goto LAB_7f057a84;
              proc_7F03F948(afStack20,afStack28,afStack36,&fStack44,&fStack52);
              fVar6 = get_ulx();
              if ((float)fVar6 < fStack44) {
                fVar6 = get_ulx();
                fVar7 = get_screen_width();
                if (fStack44 < (float)fVar7 + (float)fVar6) {
                  fVar6 = get_ulx();
                  if ((float)fVar6 < fStack52) {
                    fVar6 = get_ulx();
                    fVar7 = get_screen_width();
                    if (fStack52 < (float)fVar7 + (float)fVar6) {
                      fVar6 = get_uly();
                      if ((float)fVar6 < fStack40) {
                        fVar6 = get_uly();
                        fVar7 = get_screen_height();
                        if (fStack40 < (float)fVar7 + (float)fVar6) {
                          fVar6 = get_uly();
                          if ((float)fVar6 < fStack48) {
                            fVar6 = get_uly();
                            fVar7 = get_screen_height();
                            if (fStack48 < (float)fVar7 + (float)fVar6) {
                              *(undefined4 *)(iVar5 + 8) = 1;
                              goto LAB_7f057a84;
                            }
                            iVar5 = *(int *)(iVar5 + 0xc);
                          }
                          else {
                            iVar5 = *(int *)(iVar5 + 0xc);
                          }
                        }
                        else {
                          iVar5 = *(int *)(iVar5 + 0xc);
                        }
                      }
                      else {
                        iVar5 = *(int *)(iVar5 + 0xc);
                      }
                    }
                    else {
                      iVar5 = *(int *)(iVar5 + 0xc);
                    }
                  }
                  else {
                    iVar5 = *(int *)(iVar5 + 0xc);
                  }
                }
                else {
                  iVar5 = *(int *)(iVar5 + 0xc);
                }
              }
              else {
                iVar5 = *(int *)(iVar5 + 0xc);
              }
            }
            else {
              iVar5 = *(int *)(iVar5 + 0xc);
            }
          }
        }
      }
    }
    else {
      iVar5 = *(int *)(iVar5 + 0xc);
    }
    if (iVar5 == 0) {
      return;
    }
    iVar4 = *(int *)(iVar5 + 8);
  } while( true );
}



void proc_7F057AC0(float *param_1)

{
  u32 uVar1;
  float fVar2;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack12 = dword_80032300;
  fStack8 = (float)dword_80032304;
  fStack4 = (float)dword_80032308;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  fStack12 = fVar2 * 0.00000000 * flt_80053690 * 0.03125000 - flt_80053694;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  fStack8 = fVar2 * 0.00000000 * flt_80053698 * 0.03125000 - flt_8005369C;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  fStack4 = fVar2 * 0.00000000 * flt_800536A0 * 0.03125000 - flt_800536A4;
  proc_7F058714(&fStack12,param_1);
  return;
}



void proc_7F057C14(float *param_1,float *param_2)

{
  u32 uVar1;
  float fVar2;
  
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  *param_1 = fVar2 * 0.00000000 * flt_800536A8 * 4.00000000 - flt_800536AC;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  param_1[1] = fVar2 * 0.00000000 * flt_800536B0 * 4.00000000;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  param_1[2] = fVar2 * 0.00000000 * flt_800536B4 * 4.00000000 - flt_800536B8;
  proc_7F057AC0(param_2);
  return;
}



void proc_7F057D44(float *param_1,float *param_2,float param_3)

{
  float in_a2_lo;
  float fVar1;
  
  fVar1 = *param_2 - in_a2_lo * npc_gravity_modifier;
  *param_1 = *param_1 + in_a2_lo * (*param_2 + fVar1) * 0.50000000;
  *param_2 = fVar1;
  return;
}



void proc_7F057D88(float *param_1,float *param_2,float param_3)

{
  float in_a2_lo;
  
  proc_7F057D44(param_1 + 1,param_2 + 1,in_a2_lo);
  *param_1 = *param_1 + in_a2_lo * *param_2;
  param_1[2] = param_1[2] + in_a2_lo * param_2[2];
  return;
}



void proc_7F057DF8(float *param_1,float *param_2,int param_3)

{
  int iVar1;
  
  iVar1 = 0;
  if (0 < param_3) {
    do {
      proc_7F058098(param_2,param_1);
      iVar1 += 1;
    } while (iVar1 != param_3);
  }
  return;
}



void proc_7F057E58(float *param_1,float *param_2,float *param_3,float *param_4,int param_5)

{
  float in_f12;
  
  proc_7F057D88(param_1,param_2,in_f12);
  proc_7F057DF8(param_3,param_4,param_5);
  return;
}



float cosf(float __x)

{
  uint uVar1;
  float fVar2;
  float fVar3;
  
  __x = __x + flt_800536C0;
  uVar1 = (int)__x >> 0x16 & 0x1ff;
  if (uVar1 < 0xff) {
    if (0xe5 < uVar1) {
      fVar2 = __x * __x;
      __x = (flt_800536D0 + (flt_800536CC + (flt_800536C8 + flt_800536C4 * fVar2) * fVar2) * fVar2)
            * fVar2 * __x + __x;
    }
  }
  else {
    if (uVar1 < 0x136) {
      fVar2 = flt_800536D4 * __x;
      fVar3 = (float)(int)(longlong)ROUND(fVar2);
      __x = (__x - flt_800536D8 * fVar3) - flt_800536DC * fVar3;
      fVar3 = __x * __x;
      __x = (flt_800536EC + (flt_800536E8 + (flt_800536E4 + flt_800536E0 * fVar3) * fVar3) * fVar3)
            * fVar3 * __x + __x;
      if (((longlong)ROUND(fVar2) & 1U) != 0) {
        __x = -__x;
      }
    }
    else {
      __x = 0.00000000;
    }
  }
  return __x;
}



float sinf(float __x)

{
  uint uVar1;
  float fVar2;
  float fVar3;
  
  uVar1 = (int)__x >> 0x16 & 0x1ff;
  if (uVar1 < 0xff) {
    if (0xe5 < uVar1) {
      fVar2 = __x * __x;
      __x = (flt_800536D0 + (flt_800536CC + (flt_800536C8 + flt_800536C4 * fVar2) * fVar2) * fVar2)
            * fVar2 * __x + __x;
    }
  }
  else {
    if (uVar1 < 0x136) {
      fVar2 = flt_800536D4 * __x;
      fVar3 = (float)(int)(longlong)ROUND(fVar2);
      __x = (__x - flt_800536D8 * fVar3) - flt_800536DC * fVar3;
      fVar3 = __x * __x;
      __x = (flt_800536EC + (flt_800536E8 + (flt_800536E4 + flt_800536E0 * fVar3) * fVar3) * fVar3)
            * fVar3 * __x + __x;
      if (((longlong)ROUND(fVar2) & 1U) != 0) {
        __x = -__x;
      }
    }
    else {
      __x = 0.00000000;
    }
  }
  return __x;
}



void proc_7F057FD0(f32 *param_1)

{
  param_1[1] = 0.00000000;
  param_1[2] = 0.00000000;
  param_1[3] = 0.00000000;
  param_1[4] = 0.00000000;
  param_1[6] = 0.00000000;
  param_1[7] = 0.00000000;
  param_1[8] = 0.00000000;
  param_1[9] = 0.00000000;
  param_1[0xb] = 0.00000000;
  param_1[0xc] = 0.00000000;
  param_1[0xd] = 0.00000000;
  param_1[0xe] = 0.00000000;
  *param_1 = 1.00000000;
  param_1[5] = 1.00000000;
  param_1[10] = 1.00000000;
  param_1[0xf] = 1.00000000;
  return;
}



void proc_7F058020(undefined4 *param_1,undefined4 *param_2)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    iVar1 += 1;
    *param_2 = *param_1;
    param_2[1] = param_1[1];
    param_2[2] = param_1[2];
    param_2[3] = param_1[3];
    param_1 = param_1 + 4;
    param_2 = param_2 + 4;
  } while (iVar1 != 4);
  return;
}



void proc_7F058068(float *param_1,float *param_2)

{
  undefined4 auStack64 [16];
  
  proc_7F0580C8(param_1,param_2,(int)auStack64);
  proc_7F058020(auStack64,param_2);
  return;
}



void proc_7F058098(float *param_1,float *param_2)

{
  undefined4 auStack64 [16];
  
  proc_7F05818C(param_1,param_2,(int)auStack64);
  proc_7F058020(auStack64,param_2);
  return;
}



void proc_7F0580C8(float *param_1,float *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  float *pfVar3;
  float *pfVar4;
  
  iVar2 = 0;
  do {
    iVar1 = 0;
    pfVar4 = param_2;
    pfVar3 = (float *)(param_3 + iVar2);
    do {
      iVar1 += 2;
      *pfVar3 = pfVar4[3] * param_1[0xc] +
                *param_1 * *pfVar4 + param_1[4] * pfVar4[1] + param_1[8] * pfVar4[2];
      pfVar3[4] = pfVar4[7] * param_1[0xc] +
                  *param_1 * pfVar4[4] + param_1[4] * pfVar4[5] + param_1[8] * pfVar4[6];
      pfVar4 = pfVar4 + 8;
      pfVar3 = pfVar3 + 8;
    } while (iVar1 != 4);
    iVar2 += 4;
    param_1 = param_1 + 1;
  } while (iVar2 != 0x10);
  return;
}



void proc_7F05818C(float *param_1,float *param_2,int param_3)

{
  float *pfVar1;
  float *pfVar2;
  float *pfVar3;
  int iVar4;
  int iVar5;
  float *pfVar6;
  float *pfVar7;
  
  iVar5 = 0;
  do {
    iVar4 = 0;
    pfVar6 = (float *)(param_3 + iVar5);
    pfVar7 = param_2;
    do {
      *pfVar6 = pfVar7[2] * param_1[8] + *param_1 * *pfVar7 + param_1[4] * pfVar7[1];
      if (iVar4 == 3) {
        *pfVar6 = *pfVar6 + param_1[0xc];
      }
      pfVar1 = pfVar7 + 4;
      pfVar2 = pfVar7 + 5;
      pfVar3 = pfVar7 + 6;
      pfVar7 = pfVar7 + 8;
      pfVar6[4] = *pfVar3 * param_1[8] + *param_1 * *pfVar1 + param_1[4] * *pfVar2;
      if (iVar4 == 2) {
        pfVar6[4] = pfVar6[4] + param_1[0xc];
      }
      iVar4 += 2;
      pfVar6 = pfVar6 + 8;
    } while (iVar4 != 4);
    iVar5 += 4;
    param_1 = param_1 + 1;
  } while (iVar5 != 0xc);
  *(undefined4 *)(param_3 + 0xc) = 0;
  *(undefined4 *)(param_3 + 0x1c) = 0;
  *(undefined4 *)(param_3 + 0x2c) = 0;
  *(undefined4 *)(param_3 + 0x3c) = 0x3f800000;
  return;
}



void proc_7F058274(float *param_1,float *param_2,float *param_3)

{
  *param_3 = *param_2 * *param_1;
  param_3[4] = param_2[4] * *param_1;
  param_3[8] = param_2[8] * *param_1;
  param_3[0xc] = param_2[0xc] * *param_1;
  param_3[1] = param_2[1] * param_1[5];
  param_3[5] = param_2[5] * param_1[5];
  param_3[9] = param_2[9] * param_1[5];
  param_3[0xd] = param_2[0xd] * param_1[5];
  param_3[2] = param_2[2] * param_1[10];
  param_3[6] = param_2[6] * param_1[10];
  param_3[10] = param_2[10] * param_1[10];
  param_3[0xe] = param_1[0xe] + param_1[10] * param_2[0xe];
  param_3[3] = param_2[2] * param_1[0xb];
  param_3[7] = param_2[6] * param_1[0xb];
  param_3[0xb] = param_2[10] * param_1[0xb];
  param_3[0xf] = param_2[0xe] * param_1[0xb];
  return;
}



void proc_7F058380(float *param_1,float *param_2,float *param_3)

{
  float *pfVar1;
  float *pfVar2;
  int iVar3;
  float fVar4;
  
  iVar3 = 0;
  do {
    fVar4 = *param_1;
    pfVar1 = param_1 + 4;
    pfVar2 = param_1 + 8;
    iVar3 += 1;
    param_1 = param_1 + 1;
    *param_3 = param_2[2] * *pfVar2 + fVar4 * *param_2 + *pfVar1 * param_2[1];
    param_3 = param_3 + 1;
  } while (iVar3 != 3);
  return;
}



void proc_7F0583D8(float *param_1,float *param_2)

{
  float fStack12;
  float fStack8;
  float fStack4;
  
  proc_7F058380(param_1,param_2,&fStack12);
  *param_2 = fStack12;
  param_2[1] = fStack8;
  param_2[2] = fStack4;
  return;
}



void proc_7F058418(float *param_1,float *param_2,float *param_3)

{
  proc_7F058380(param_1,param_2,param_3);
  *param_3 = *param_3 + param_1[0xc];
  param_3[1] = param_3[1] + param_1[0xd];
  param_3[2] = param_3[2] + param_1[0xe];
  return;
}



void proc_7F058474(float *param_1,float *param_2)

{
  proc_7F0583D8(param_1,param_2);
  *param_2 = *param_2 + param_1[0xc];
  param_2[1] = param_2[1] + param_1[0xd];
  param_2[2] = param_2[2] + param_1[0xe];
  return;
}



void proc_7F0584D0(float *param_1,float param_2,float *param_3)

{
  float *in_a2_lo;
  float fVar1;
  float fVar2;
  
  fVar1 = cosf((float)param_3);
  fVar2 = sinf((float)param_3);
  in_a2_lo[8] = fVar2;
  in_a2_lo[2] = -fVar2;
  *in_a2_lo = fVar1;
  in_a2_lo[10] = fVar1;
  in_a2_lo[1] = 0.00000000;
  in_a2_lo[3] = 0.00000000;
  in_a2_lo[4] = 0.00000000;
  in_a2_lo[6] = 0.00000000;
  in_a2_lo[7] = 0.00000000;
  in_a2_lo[9] = 0.00000000;
  in_a2_lo[0xb] = 0.00000000;
  in_a2_lo[5] = 1.00000000;
  in_a2_lo[0xc] = *param_1;
  in_a2_lo[0xd] = param_1[1];
  fVar1 = param_1[2];
  in_a2_lo[0xf] = 1.00000000;
  in_a2_lo[0xe] = fVar1;
  return;
}



void proc_7F058570(float param_1,undefined8 param_2,undefined4 *param_3)

{
  float fVar1;
  float fVar2;
  
  fVar1 = cosf(param_1);
  fVar2 = sinf(param_1);
  *(float *)(param_3 + 6) = fVar2;
  *(float *)(param_3 + 9) = -fVar2;
  *(float *)(param_3 + 5) = fVar1;
  *(float *)(param_3 + 10) = fVar1;
  param_3[1] = 0;
  param_3[2] = 0;
  param_3[3] = 0;
  param_3[4] = 0;
  param_3[7] = 0;
  param_3[8] = 0;
  param_3[0xb] = 0;
  param_3[0xc] = 0;
  param_3[0xd] = 0;
  param_3[0xe] = 0;
  *param_3 = 0x3f800000;
  param_3[0xf] = 0x3f800000;
  return;
}



void proc_7F0585FC(float param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  
  fVar1 = cosf(param_1);
  fVar2 = sinf(param_1);
  param_3[8] = fVar2;
  param_3[2] = -fVar2;
  *param_3 = fVar1;
  param_3[10] = fVar1;
  param_3[1] = 0.00000000;
  param_3[3] = 0.00000000;
  param_3[4] = 0.00000000;
  param_3[6] = 0.00000000;
  param_3[7] = 0.00000000;
  param_3[9] = 0.00000000;
  param_3[0xb] = 0.00000000;
  param_3[0xc] = 0.00000000;
  param_3[0xd] = 0.00000000;
  param_3[0xe] = 0.00000000;
  param_3[5] = 1.00000000;
  param_3[0xf] = 1.00000000;
  return;
}



void proc_7F058688(float param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  
  fVar1 = cosf(param_1);
  fVar2 = sinf(param_1);
  param_3[1] = fVar2;
  param_3[4] = -fVar2;
  *param_3 = fVar1;
  param_3[5] = fVar1;
  param_3[2] = 0.00000000;
  param_3[3] = 0.00000000;
  param_3[6] = 0.00000000;
  param_3[7] = 0.00000000;
  param_3[8] = 0.00000000;
  param_3[9] = 0.00000000;
  param_3[0xb] = 0.00000000;
  param_3[0xc] = 0.00000000;
  param_3[0xd] = 0.00000000;
  param_3[0xe] = 0.00000000;
  param_3[10] = 1.00000000;
  param_3[0xf] = 1.00000000;
  return;
}



void proc_7F058714(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar1 = cosf(*param_1);
  fVar2 = sinf(*param_1);
  fVar3 = cosf(param_1[1]);
  fVar4 = sinf(param_1[1]);
  fVar5 = cosf(param_1[2]);
  fVar6 = sinf(param_1[2]);
  param_2[3] = 0.00000000;
  param_2[2] = -fVar4;
  *param_2 = fVar3 * fVar5;
  param_2[1] = fVar3 * fVar6;
  param_2[4] = fVar2 * fVar5 * fVar4 - fVar1 * fVar6;
  param_2[5] = fVar2 * fVar6 * fVar4 + fVar1 * fVar5;
  param_2[7] = 0.00000000;
  param_2[6] = fVar2 * fVar3;
  param_2[8] = fVar1 * fVar5 * fVar4 + fVar2 * fVar6;
  param_2[9] = fVar1 * fVar6 * fVar4 - fVar2 * fVar5;
  param_2[0xb] = 0.00000000;
  param_2[0xc] = 0.00000000;
  param_2[0xd] = 0.00000000;
  param_2[0xe] = 0.00000000;
  param_2[0xf] = 1.00000000;
  param_2[10] = fVar1 * fVar3;
  return;
}



void proc_7F058860(float *param_1,float *param_2)

{
  float vector2;
  float fVar1;
  
  vector2 = sqrtf(param_1[6] * param_1[6] + param_1[10] * param_1[10]);
  if (0.00000191 < vector2) {
    fVar1 = convert_angle_using_inverse((f32)param_1[6],(f32)param_1[10]);
    *param_2 = fVar1;
    vector2 = convert_angle_using_inverse((f32)-param_1[2],(f32)vector2);
    param_2[1] = vector2;
    vector2 = convert_angle_using_inverse((f32)param_1[1],(f32)*param_1);
    param_2[2] = vector2;
  }
  else {
    *param_2 = 0.00000000;
    vector2 = convert_angle_using_inverse((f32)-param_1[2],(f32)vector2);
    param_2[1] = vector2;
    vector2 = convert_angle_using_inverse((f32)-param_1[4],(f32)param_1[5]);
    param_2[2] = vector2;
  }
  return;
}



void proc_7F05892C(undefined4 *param_1,float *param_2,float *param_3)

{
  proc_7F058714(param_2,param_3);
  proc_7F058998(param_1,(int)param_3);
  return;
}



void init_something_copy_posdata_to_it(int *posdata,int *param_2)

{
  proc_7F057FD0((f32 *)param_2);
  proc_7F058998(posdata,(int)param_2);
  return;
}



void proc_7F058998(undefined4 *param_1,int param_2)

{
  *(undefined4 *)(param_2 + 0x30) = *param_1;
  *(undefined4 *)(param_2 + 0x34) = param_1[1];
  *(undefined4 *)(param_2 + 0x38) = param_1[2];
  return;
}



void proc_7F0589B4(float param_1,undefined8 param_2,float *param_3)

{
  *param_3 = *param_3 * param_1;
  param_3[1] = param_3[1] * param_1;
  param_3[2] = param_3[2] * param_1;
  return;
}



void proc_7F0589E4(float param_1,undefined8 param_2,int param_3)

{
  *(float *)(param_3 + 0x10) = *(float *)(param_3 + 0x10) * param_1;
  *(float *)(param_3 + 0x14) = *(float *)(param_3 + 0x14) * param_1;
  *(float *)(param_3 + 0x18) = *(float *)(param_3 + 0x18) * param_1;
  return;
}



void proc_7F058A14(float param_1,undefined8 param_2,int param_3)

{
  *(float *)(param_3 + 0x20) = *(float *)(param_3 + 0x20) * param_1;
  *(float *)(param_3 + 0x24) = *(float *)(param_3 + 0x24) * param_1;
  *(float *)(param_3 + 0x28) = *(float *)(param_3 + 0x28) * param_1;
  *(float *)(param_3 + 0x2c) = *(float *)(param_3 + 0x2c) * param_1;
  return;
}



void proc_7F058A4C(float param_1,undefined8 param_2,int param_3)

{
  *(float *)(param_3 + 0x20) = *(float *)(param_3 + 0x20) * param_1;
  *(float *)(param_3 + 0x24) = *(float *)(param_3 + 0x24) * param_1;
  *(float *)(param_3 + 0x28) = *(float *)(param_3 + 0x28) * param_1;
  return;
}



void matrix_multiply_A1_by_F12(float param_1,undefined8 param_2,float *param_3)

{
  *param_3 = *param_3 * param_1;
  param_3[1] = param_3[1] * param_1;
  param_3[2] = param_3[2] * param_1;
  param_3[3] = param_3[3] * param_1;
  param_3[4] = param_3[4] * param_1;
  param_3[5] = param_3[5] * param_1;
  param_3[6] = param_3[6] * param_1;
  param_3[7] = param_3[7] * param_1;
  param_3[8] = param_3[8] * param_1;
  param_3[9] = param_3[9] * param_1;
  param_3[10] = param_3[10] * param_1;
  param_3[0xb] = param_3[0xb] * param_1;
  return;
}



void proc_7F058B10(float param_1,undefined8 param_2,float *param_3)

{
  *param_3 = *param_3 * param_1;
  param_3[1] = param_3[1] * param_1;
  param_3[2] = param_3[2] * param_1;
  param_3[4] = param_3[4] * param_1;
  param_3[5] = param_3[5] * param_1;
  param_3[6] = param_3[6] * param_1;
  param_3[8] = param_3[8] * param_1;
  param_3[9] = param_3[9] * param_1;
  param_3[10] = param_3[10] * param_1;
  return;
}



void proc_7F058B80(float param_1,undefined8 param_2,int param_3)

{
  *(float *)(param_3 + 8) = *(float *)(param_3 + 8) * param_1;
  *(float *)(param_3 + 0x18) = *(float *)(param_3 + 0x18) * param_1;
  *(float *)(param_3 + 0x28) = *(float *)(param_3 + 0x28) * param_1;
  *(float *)(param_3 + 0x38) = *(float *)(param_3 + 0x38) * param_1;
  return;
}



void proc_7F058BB8(float param_1,undefined8 param_2,float *param_3)

{
  *param_3 = *param_3 * param_1;
  param_3[4] = param_3[4] * param_1;
  param_3[8] = param_3[8] * param_1;
  param_3[0xc] = param_3[0xc] * param_1;
  param_3[1] = param_3[1] * param_1;
  param_3[5] = param_3[5] * param_1;
  param_3[9] = param_3[9] * param_1;
  param_3[0xd] = param_3[0xd] * param_1;
  param_3[2] = param_3[2] * param_1;
  param_3[6] = param_3[6] * param_1;
  param_3[10] = param_3[10] * param_1;
  param_3[0xe] = param_3[0xe] * param_1;
  return;
}



void proc_7F058C4C(float param_1)

{
  flt_80032310 = param_1 * 65536.00000000;
  return;
}



void proc_7F058C64(void)

{
  DAT_80075da0 = flt_80032310;
  flt_80032310 = 0x47800000;
  return;
}



void proc_7F058C88(void)

{
  flt_80032310 = DAT_80075da0;
  return;
}



void proc_7F058C9C(int param_1,uint *param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  float *pfVar5;
  uint uVar6;
  uint uVar7;
  
  iVar1 = 0;
  do {
    pfVar5 = (float *)(param_1 + iVar1 * 8);
    uVar2 = iVar1 + 1;
    iVar3 = iVar1 + 2;
    uVar7 = (uint)(flt_80032310 * *pfVar5);
    uVar4 = iVar1 + 3;
    iVar1 += 4;
    uVar6 = (uint)(flt_80032310 * pfVar5[1]);
    *param_2 = uVar7 & 0xffff0000 | uVar6 >> 0x10;
    param_2[8] = uVar7 << 0x10 | uVar6 & 0xffff;
    pfVar5 = (float *)(param_1 + uVar2 * 8);
    uVar6 = (uint)(flt_80032310 * *pfVar5);
    uVar2 = (uint)((float)(&flt_80032310)[uVar2 & 1] * pfVar5[1]);
    param_2[1] = uVar6 & 0xffff0000 | uVar2 >> 0x10;
    param_2[9] = uVar6 << 0x10 | uVar2 & 0xffff;
    pfVar5 = (float *)(param_1 + iVar3 * 8);
    uVar6 = (uint)(flt_80032310 * *pfVar5);
    uVar2 = (uint)(flt_80032310 * pfVar5[1]);
    param_2[2] = uVar6 & 0xffff0000 | uVar2 >> 0x10;
    param_2[10] = uVar6 << 0x10 | uVar2 & 0xffff;
    pfVar5 = (float *)(param_1 + uVar4 * 8);
    uVar2 = (uint)(flt_80032310 * *pfVar5);
    uVar4 = (uint)((float)(&flt_80032310)[uVar4 & 1] * pfVar5[1]);
    param_2[3] = uVar2 & 0xffff0000 | uVar4 >> 0x10;
    param_2[0xb] = uVar2 << 0x10 | uVar4 & 0xffff;
    param_2 = param_2 + 4;
  } while (iVar1 != 8);
  return;
}



void proc_7F058E78(uint *param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  float *pfVar7;
  float *pfVar8;
  
  iVar3 = 0;
  do {
    uVar1 = *param_1;
    uVar2 = param_1[8];
    pfVar7 = (float *)(param_2 + iVar3 * 8);
    uVar4 = iVar3 + 1;
    pfVar8 = (float *)(param_2 + uVar4 * 8);
    iVar5 = iVar3 + 2;
    uVar6 = iVar3 + 3;
    iVar3 += 4;
    *pfVar7 = (float)(uVar1 & 0xffff0000 | uVar2 >> 0x10) / flt_80032310;
    pfVar7[1] = (float)(uVar1 << 0x10 | uVar2 & 0xffff) / flt_80032310;
    uVar1 = param_1[9];
    uVar2 = param_1[1];
    pfVar7 = (float *)(param_2 + iVar5 * 8);
    *pfVar8 = (float)(uVar2 & 0xffff0000 | uVar1 >> 0x10) / flt_80032310;
    pfVar8[1] = (float)(uVar2 << 0x10 | uVar1 & 0xffff) / (float)(&flt_80032310)[uVar4 & 1];
    uVar1 = param_1[10];
    uVar2 = param_1[2];
    pfVar8 = (float *)(param_2 + uVar6 * 8);
    *pfVar7 = (float)(uVar2 & 0xffff0000 | uVar1 >> 0x10) / flt_80032310;
    pfVar7[1] = (float)(uVar2 << 0x10 | uVar1 & 0xffff) / flt_80032310;
    uVar1 = param_1[0xb];
    uVar2 = param_1[3];
    *pfVar8 = (float)(uVar2 & 0xffff0000 | uVar1 >> 0x10) / flt_80032310;
    pfVar8[1] = (float)(uVar2 << 0x10 | uVar1 & 0xffff) / (float)(&flt_80032310)[uVar6 & 1];
    param_1 = param_1 + 4;
  } while (iVar3 != 8);
  return;
}



void proc_7F059044(float *param_1,int *param_2)

{
  int iVar1;
  int *piVar2;
  float *pfVar3;
  float fVar4;
  
  iVar1 = 1;
  fVar4 = *param_1 * 65536.00000000;
  piVar2 = param_2;
  pfVar3 = param_1;
  if (true) {
    do {
      iVar1 += 1;
      param_2 = piVar2 + 4;
      param_1 = pfVar3 + 4;
      *piVar2 = (int)fVar4;
      piVar2[1] = (int)(pfVar3[1] * 65536.00000000);
      piVar2[2] = (int)(pfVar3[2] * 65536.00000000);
      piVar2[3] = (int)(pfVar3[3] * 65536.00000000);
      fVar4 = *param_1 * 65536.00000000;
      piVar2 = param_2;
      pfVar3 = param_1;
    } while (iVar1 != 4);
  }
  *param_2 = (int)fVar4;
  param_2[1] = (int)(param_1[1] * 65536.00000000);
  param_2[2] = (int)(param_1[2] * 65536.00000000);
  param_2[3] = (int)(param_1[3] * 65536.00000000);
  return;
}



void proc_7F05914C(int *param_1,float *param_2)

{
  int iVar1;
  float *pfVar2;
  int *piVar3;
  int iVar4;
  
  iVar1 = 1;
  iVar4 = *param_1;
  pfVar2 = param_2;
  piVar3 = param_1;
  if (true) {
    do {
      iVar1 += 1;
      param_2 = pfVar2 + 4;
      param_1 = piVar3 + 4;
      *pfVar2 = (float)iVar4 / 65536.00000000;
      pfVar2[1] = (float)piVar3[1] / 65536.00000000;
      pfVar2[2] = (float)piVar3[2] / 65536.00000000;
      pfVar2[3] = (float)piVar3[3] / 65536.00000000;
      iVar4 = *param_1;
      pfVar2 = param_2;
      piVar3 = param_1;
    } while (iVar1 != 4);
  }
  *param_2 = (float)iVar4 / 65536.00000000;
  param_2[1] = (float)param_1[1] / 65536.00000000;
  param_2[2] = (float)param_1[2] / 65536.00000000;
  param_2[3] = (float)param_1[3] / 65536.00000000;
  return;
}



void proc_7F059244(int param_1,uint *param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  
  iVar3 = 0;
  do {
    puVar4 = (uint *)(param_1 + iVar3 * 8);
    uVar1 = *puVar4;
    uVar2 = puVar4[1];
    puVar4 = (uint *)(param_1 + (iVar3 + 1) * 8);
    *param_2 = uVar1 & 0xffff0000 | uVar2 >> 0x10;
    param_2[8] = uVar1 << 0x10 | uVar2 & 0xffff;
    uVar1 = puVar4[1];
    uVar2 = *puVar4;
    puVar4 = (uint *)(param_1 + (iVar3 + 2) * 8);
    param_2[9] = uVar2 << 0x10 | uVar1 & 0xffff;
    param_2[1] = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    uVar1 = puVar4[1];
    uVar2 = *puVar4;
    puVar4 = (uint *)(param_1 + (iVar3 + 3) * 8);
    param_2[10] = uVar2 << 0x10 | uVar1 & 0xffff;
    param_2[2] = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    uVar1 = puVar4[1];
    uVar2 = *puVar4;
    iVar3 += 4;
    param_2[0xb] = uVar2 << 0x10 | uVar1 & 0xffff;
    param_2[3] = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    param_2 = param_2 + 4;
  } while (iVar3 != 8);
  return;
}



void proc_7F059334(uint *param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint *puVar4;
  
  iVar3 = 0;
  do {
    uVar1 = *param_1;
    uVar2 = param_1[8];
    puVar4 = (uint *)(param_2 + iVar3 * 8);
    *puVar4 = uVar1 & 0xffff0000 | uVar2 >> 0x10;
    puVar4[1] = uVar1 << 0x10 | uVar2 & 0xffff;
    uVar1 = param_1[9];
    uVar2 = param_1[1];
    puVar4 = (uint *)(param_2 + (iVar3 + 1) * 8);
    puVar4[1] = uVar2 << 0x10 | uVar1 & 0xffff;
    *puVar4 = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    uVar1 = param_1[10];
    uVar2 = param_1[2];
    puVar4 = (uint *)(param_2 + (iVar3 + 2) * 8);
    puVar4[1] = uVar2 << 0x10 | uVar1 & 0xffff;
    *puVar4 = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    uVar1 = param_1[0xb];
    uVar2 = param_1[3];
    puVar4 = (uint *)(param_2 + (iVar3 + 3) * 8);
    iVar3 += 4;
    puVar4[1] = uVar2 << 0x10 | uVar1 & 0xffff;
    *puVar4 = uVar2 & 0xffff0000 | uVar1 >> 0x10;
    param_1 = param_1 + 4;
  } while (iVar3 != 8);
  return;
}



void proc_7F059424(float *param_1,float param_2,float param_3,float param_4,float param_5,
                  float param_6,float param_7,float param_8,float param_9,float param_10)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float in_stack_00000020;
  float in_stack_00000024;
  
  fVar1 = sqrtf(param_7 * param_7 + param_8 * param_8 + param_9 * param_9);
  fVar1 = -1.00000000 / fVar1;
  param_7 = param_7 * fVar1;
  param_8 = param_8 * fVar1;
  param_9 = param_9 * fVar1;
  fVar5 = in_stack_00000020 * param_9 - in_stack_00000024 * param_8;
  fVar6 = in_stack_00000024 * param_7 - param_10 * param_9;
  fVar7 = param_10 * param_8 - in_stack_00000020 * param_7;
  fVar1 = sqrtf(fVar5 * fVar5 + fVar6 * fVar6 + fVar7 * fVar7);
  fVar1 = 1.00000000 / fVar1;
  fVar5 = fVar5 * fVar1;
  fVar6 = fVar6 * fVar1;
  fVar7 = fVar7 * fVar1;
  fVar2 = param_8 * fVar7 - param_9 * fVar6;
  fVar3 = param_9 * fVar5 - param_7 * fVar7;
  fVar4 = param_7 * fVar6 - param_8 * fVar5;
  fVar1 = sqrtf(fVar2 * fVar2 + fVar3 * fVar3 + fVar4 * fVar4);
  fVar1 = 1.00000000 / fVar1;
  *param_1 = fVar5;
  param_1[4] = fVar6;
  param_1[8] = fVar7;
  param_1[1] = fVar2 * fVar1;
  param_1[5] = fVar3 * fVar1;
  param_1[0xc] = -(param_4 * fVar5 + param_5 * fVar6 + param_6 * fVar7);
  param_1[9] = fVar4 * fVar1;
  param_1[2] = param_7;
  param_1[6] = param_8;
  param_1[10] = param_9;
  param_1[0xd] = -(param_4 * fVar2 * fVar1 + param_5 * fVar3 * fVar1 + param_6 * fVar4 * fVar1);
  param_1[3] = 0.00000000;
  param_1[7] = 0.00000000;
  param_1[0xb] = 0.00000000;
  param_1[0xf] = 1.00000000;
  param_1[0xe] = -(param_4 * param_7 + param_5 * param_8 + param_6 * param_9);
  return;
}



void proc_7F059694(float *param_1,float param_2,float param_3,float param_4,float param_5,
                  float param_6,float param_7,float param_8,float param_9,float param_10)

{
  proc_7F059424(param_1,param_4,param_5,param_4,param_5,param_6,param_7 - param_4,param_8 - param_5,
                param_9 - param_6,param_10);
  return;
}



void proc_7F059708(float *param_1,float param_2,float param_3,float param_4,float param_5,
                  float param_6,float param_7,float param_8,float param_9,float param_10)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float in_stack_00000020;
  float in_stack_00000024;
  
  fVar1 = sqrtf(param_7 * param_7 + param_8 * param_8 + param_9 * param_9);
  fVar1 = -1.00000000 / fVar1;
  param_7 = param_7 * fVar1;
  param_8 = param_8 * fVar1;
  param_9 = param_9 * fVar1;
  fVar5 = in_stack_00000020 * param_9 - in_stack_00000024 * param_8;
  fVar6 = in_stack_00000024 * param_7 - param_10 * param_9;
  fVar7 = param_10 * param_8 - in_stack_00000020 * param_7;
  fVar1 = sqrtf(fVar5 * fVar5 + fVar6 * fVar6 + fVar7 * fVar7);
  fVar1 = 1.00000000 / fVar1;
  fVar5 = fVar5 * fVar1;
  fVar6 = fVar6 * fVar1;
  fVar7 = fVar7 * fVar1;
  fVar2 = param_8 * fVar7 - param_9 * fVar6;
  fVar3 = param_9 * fVar5 - param_7 * fVar7;
  fVar4 = param_7 * fVar6 - param_8 * fVar5;
  fVar1 = sqrtf(fVar2 * fVar2 + fVar3 * fVar3 + fVar4 * fVar4);
  fVar1 = 1.00000000 / fVar1;
  *param_1 = fVar5;
  param_1[4] = fVar2 * fVar1;
  param_1[8] = param_7;
  param_1[1] = fVar6;
  param_1[5] = fVar3 * fVar1;
  param_1[9] = param_8;
  param_1[0xc] = param_4;
  param_1[2] = fVar7;
  param_1[0xd] = param_5;
  param_1[10] = param_9;
  param_1[6] = fVar4 * fVar1;
  param_1[3] = 0.00000000;
  param_1[7] = 0.00000000;
  param_1[0xb] = 0.00000000;
  param_1[0xf] = 1.00000000;
  param_1[0xe] = param_6;
  return;
}



void proc_7F059908(float *param_1,float param_2,float param_3,float param_4,float param_5,
                  float param_6,float param_7,float param_8,float param_9,float param_10)

{
  proc_7F059708(param_1,param_4,param_5,param_4,param_5,param_6,param_7 - param_4,param_8 - param_5,
                param_9 - param_6,param_10);
  return;
}



uint proc_7F05997C(float param_1,float param_2)

{
  float fVar1;
  uint uVar2;
  float fVar3;
  uint uVar4;
  
  if (param_1 + param_2 <= 2.00000000) {
    return 0xffff;
  }
  fVar3 = 131072.00000000 / (param_1 + param_2);
  if (false) {
    fVar1 = ROUND(fVar3);
  }
  else {
    fVar1 = FLOOR(fVar3);
  }
  uVar4 = (uint)fVar1;
  if (false) {
    if (false) {
      fVar3 = ROUND(fVar3 - 2147483648.00000000);
    }
    else {
      fVar3 = FLOOR(fVar3 - 2147483648.00000000);
    }
    if (true) {
      uVar4 = (int)fVar3 | 0x80000000;
      goto LAB_7f059a2c;
    }
  }
  else {
    if (-1 < (int)uVar4) goto LAB_7f059a2c;
  }
  uVar4 = 0xffffffff;
LAB_7f059a2c:
  uVar2 = uVar4 & 0xffff;
  if ((uVar4 & 0xffff) == 0) {
    uVar2 = 1;
  }
  return uVar2;
}



void proc_7F059A48(float *param_1,undefined2 *param_2,float param_3,float param_4,float param_5,
                  float param_6,float param_7)

{
  uint uVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float in_stack_00000014;
  float in_stack_00000018;
  
  fVar2 = cosf(param_5 * 0.50000000);
  fVar3 = sinf(param_5 * 0.50000000);
  fVar4 = in_stack_00000018 * 65536.00000000;
  param_1[4] = 0.00000000;
  param_1[8] = 0.00000000;
  param_1[0xc] = 0.00000000;
  param_1[1] = 0.00000000;
  param_1[9] = 0.00000000;
  param_1[0xd] = 0.00000000;
  param_1[2] = 0.00000000;
  param_1[6] = 0.00000000;
  *param_1 = ((fVar2 / fVar3) / param_6) * fVar4;
  param_1[5] = (fVar2 / fVar3) * fVar4;
  param_1[10] = ((param_7 + in_stack_00000014) / (param_7 - in_stack_00000014)) * fVar4;
  param_1[3] = 0.00000000;
  param_1[7] = 0.00000000;
  param_1[0xf] = 0.00000000;
  param_1[0xb] = -fVar4;
  param_1[0xe] = (((param_7 + param_7) * in_stack_00000014) / (param_7 - in_stack_00000014)) * fVar4
  ;
  if (param_2 != NULL) {
    uVar1 = proc_7F05997C(param_7,in_stack_00000014);
    *param_2 = (short)uVar1;
  }
  return;
}



void proc_7F059B58(float *param_1,float param_2,float param_3,float param_4,float param_5)

{
  float in_a3_lo;
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fStackX8;
  float fStackX12;
  float in_stack_00000010;
  
  fStackX8 = param_5;
  fStackX12 = in_a3_lo;
  guNormalize(&fStackX8,&fStackX12,(float *)&stack0x00000010);
  fVar1 = sinf(param_4);
  fVar2 = cosf(param_4);
  fVar3 = sqrtf(fStackX8 * fStackX8 + in_stack_00000010 * in_stack_00000010);
  if (fVar3 == 0.00000000) {
    proc_7F057FD0((f32 *)param_1);
  }
  else {
    fVar4 = 1.00000000 / fVar3;
    *param_1 = (-(in_stack_00000010 * fVar2) - fStackX12 * fStackX8 * fVar1) * fVar4;
    param_1[4] = fVar1 * fVar3;
    param_1[0xc] = 0.00000000;
    param_1[8] = (fStackX8 * fVar2 - fStackX12 * in_stack_00000010 * fVar1) * fVar4;
    param_1[1] = (in_stack_00000010 * fVar1 - fStackX12 * fStackX8 * fVar2) * fVar4;
    param_1[5] = fVar2 * fVar3;
    param_1[0xd] = 0.00000000;
    param_1[9] = (-(fStackX8 * fVar1) - fStackX12 * in_stack_00000010 * fVar2) * fVar4;
    param_1[2] = -fStackX8;
    param_1[6] = -fStackX12;
    param_1[0xe] = 0.00000000;
    param_1[3] = 0.00000000;
    param_1[7] = 0.00000000;
    param_1[10] = -in_stack_00000010;
    param_1[0xb] = 0.00000000;
    param_1[0xf] = 1.00000000;
  }
  return;
}



// WARNING: Restarted to delay deadcode elimination for space: stack

void proc_7F059CE8(float *param_1,float param_2,float param_3,float param_4,float param_5)

{
  undefined4 in_a3_lo;
  undefined4 unaff_retaddr;
  undefined auStackX0 [12];
  undefined4 in_stack_00000010;
  undefined in_stack_00000014 [28];
  undefined8 in_stack_fffffff4;
  
  guAlignF((float  [4] [4])
           CONCAT1648(CONCAT124(CONCAT48(in_stack_00000010,in_stack_fffffff4),unaff_retaddr),
                      CONCAT2028(CONCAT164(CONCAT124(auStackX0,in_a3_lo),in_stack_00000010),
                                 in_stack_00000014)),param_4 * flt_800536F0,param_5,(float)param_1,
           param_4 * flt_800536F0);
  return;
}



void proc_7F059D30(void)

{
  return;
}



void proc_7F059D38(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  
  *param_2 = *param_1;
  param_2[1] = param_1[4];
  param_2[2] = param_1[8];
  param_2[4] = param_1[1];
  param_2[5] = param_1[5];
  param_2[6] = param_1[9];
  param_2[8] = param_1[2];
  param_2[9] = param_1[6];
  uVar1 = param_1[10];
  param_2[0xc] = 0;
  param_2[0xd] = 0;
  param_2[0xe] = 0;
  param_2[3] = 0;
  param_2[7] = 0;
  param_2[0xb] = 0;
  param_2[0xf] = 0x3f800000;
  param_2[10] = uVar1;
  return;
}



void proc_7F059DAC(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  
  fVar2 = *param_1;
  fVar1 = 1.00000000 / (param_1[8] * param_1[8] + fVar2 * fVar2 + param_1[4] * param_1[4]);
  *param_2 = fVar2 * fVar1;
  param_2[1] = param_1[4] * fVar1;
  param_2[2] = param_1[8] * fVar1;
  param_2[4] = param_1[1] * fVar1;
  param_2[5] = param_1[5] * fVar1;
  param_2[6] = param_1[9] * fVar1;
  param_2[8] = param_1[2] * fVar1;
  param_2[9] = param_1[6] * fVar1;
  fVar2 = param_1[10];
  param_2[0xf] = 1.00000000;
  param_2[0xc] = 0.00000000;
  param_2[0xd] = 0.00000000;
  param_2[0xe] = 0.00000000;
  param_2[3] = 0.00000000;
  param_2[7] = 0.00000000;
  param_2[0xb] = 0.00000000;
  param_2[10] = fVar2 * fVar1;
  return;
}



void proc_7F059E64(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar3 = *param_1;
  fVar1 = 1.00000000 / (param_1[8] * param_1[8] + fVar3 * fVar3 + param_1[4] * param_1[4]);
  *param_2 = fVar3 * fVar1;
  param_2[1] = param_1[4] * fVar1;
  param_2[2] = param_1[8] * fVar1;
  param_2[4] = param_1[1] * fVar1;
  param_2[5] = param_1[5] * fVar1;
  param_2[6] = param_1[9] * fVar1;
  param_2[8] = param_1[2] * fVar1;
  param_2[9] = param_1[6] * fVar1;
  param_2[10] = param_1[10] * fVar1;
  param_2[0xc] = -(param_1[0xe] * param_2[8] + *param_2 * param_1[0xc] + param_2[4] * param_1[0xd]);
  param_2[0xd] = -(param_1[0xe] * param_2[9] + param_2[1] * param_1[0xc] + param_2[5] * param_1[0xd]
                  );
  fVar2 = param_1[0xc];
  fVar3 = param_1[0xd];
  fVar1 = param_1[0xe];
  param_2[0xf] = 1.00000000;
  param_2[3] = 0.00000000;
  param_2[7] = 0.00000000;
  param_2[0xb] = 0.00000000;
  param_2[0xe] = -(fVar1 * param_2[10] + param_2[2] * fVar2 + param_2[6] * fVar3);
  return;
}



void proc_7F059FB8(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  fVar3 = param_1[5];
  fVar4 = param_1[10];
  fVar5 = param_1[6];
  fVar2 = param_1[9];
  fVar1 = 1.00000000 /
          ((((*param_1 * fVar3 * fVar4 + param_1[1] * fVar5 * param_1[8] +
             param_1[2] * param_1[4] * fVar2) - param_1[2] * fVar3 * param_1[8]) -
           param_1[1] * param_1[4] * fVar4) - *param_1 * fVar5 * fVar2);
  *param_2 = (fVar3 * fVar4 - fVar2 * fVar5) * fVar1;
  param_2[4] = (param_1[6] * param_1[8] - param_1[10] * param_1[4]) * fVar1;
  param_2[8] = (param_1[4] * param_1[9] - param_1[8] * param_1[5]) * fVar1;
  param_2[1] = (param_1[2] * param_1[9] - param_1[10] * param_1[1]) * fVar1;
  param_2[5] = (*param_1 * param_1[10] - param_1[8] * param_1[2]) * fVar1;
  param_2[9] = (param_1[1] * param_1[8] - param_1[9] * *param_1) * fVar1;
  param_2[2] = (param_1[1] * param_1[6] - param_1[5] * param_1[2]) * fVar1;
  param_2[6] = (param_1[2] * param_1[4] - param_1[6] * *param_1) * fVar1;
  param_2[10] = (*param_1 * param_1[5] - param_1[4] * param_1[1]) * fVar1;
  param_2[0xc] = -(param_2[8] * param_1[0xe] + param_1[0xc] * *param_2 + param_1[0xd] * param_2[4]);
  param_2[0xd] = -(param_2[9] * param_1[0xe] + param_1[0xc] * param_2[1] + param_1[0xd] * param_2[5]
                  );
  fVar3 = param_1[0xc];
  fVar2 = param_1[0xd];
  fVar1 = param_1[0xe];
  param_2[0xf] = 1.00000000;
  param_2[3] = 0.00000000;
  param_2[7] = 0.00000000;
  param_2[0xb] = 0.00000000;
  param_2[0xe] = -(param_2[10] * fVar1 + fVar3 * param_2[2] + fVar2 * param_2[6]);
  return;
}



void proc_7F05A250(undefined8 param_1,undefined8 param_2)

{
  float *pfVar1;
  int iVar2;
  undefined4 extraout_a1_hi;
  float *pfVar3;
  undefined4 extraout_a1_lo;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  pfVar3 = (float *)param_2;
  proc_7F05A310(param_1,param_2);
  fVar4 = proc_7F05A774((longlong)(int)param_1,CONCAT44(extraout_a1_hi,extraout_a1_lo));
  fVar4 = 1.00000000 / fVar4;
  iVar2 = 1;
  fVar9 = pfVar3[1];
  fVar10 = *pfVar3 * fVar4;
  fVar8 = pfVar3[2];
  fVar11 = pfVar3[3];
  pfVar1 = pfVar3;
  if (true) {
    do {
      fVar7 = fVar9 * fVar4;
      fVar9 = pfVar1[5];
      fVar6 = fVar8 * fVar4;
      fVar8 = pfVar1[6];
      iVar2 += 1;
      fVar5 = fVar11 * fVar4;
      fVar11 = pfVar1[7];
      *pfVar1 = fVar10;
      fVar10 = pfVar1[4] * fVar4;
      pfVar1[1] = fVar7;
      pfVar1[2] = fVar6;
      pfVar3 = pfVar1 + 4;
      pfVar1[3] = fVar5;
      pfVar1 = pfVar3;
    } while (iVar2 != 4);
  }
  *pfVar3 = fVar10;
  pfVar3[1] = fVar9 * fVar4;
  pfVar3[2] = fVar8 * fVar4;
  pfVar3[3] = fVar11 * fVar4;
  return;
}



void proc_7F05A310(undefined8 param_1,undefined8 param_2)

{
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 extraout_a0_05;
  undefined8 extraout_a0_06;
  undefined8 extraout_a0_07;
  undefined8 extraout_a0_08;
  undefined8 extraout_a0_09;
  undefined8 extraout_a0_10;
  undefined8 extraout_a0_11;
  undefined8 extraout_a0_12;
  undefined8 extraout_a0_13;
  undefined8 extraout_a1;
  float *pfVar1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  undefined8 extraout_a1_03;
  undefined8 extraout_a1_04;
  undefined8 extraout_a1_05;
  undefined8 extraout_a1_06;
  undefined8 extraout_a1_07;
  undefined8 extraout_a1_08;
  undefined8 extraout_a1_09;
  undefined8 extraout_a1_10;
  undefined8 extraout_a1_11;
  undefined8 extraout_a1_12;
  undefined8 extraout_a1_13;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  
  pfVar1 = (float *)param_1;
  fVar5 = pfVar1[2];
  fVar18 = pfVar1[1];
  fVar17 = *pfVar1;
  fVar6 = pfVar1[3];
  fVar7 = pfVar1[4];
  fVar8 = pfVar1[8];
  fVar9 = pfVar1[5];
  fVar4 = pfVar1[7];
  fVar2 = pfVar1[6];
  fVar14 = pfVar1[0xd];
  fVar10 = pfVar1[9];
  fVar12 = pfVar1[0xb];
  fVar11 = pfVar1[10];
  fVar16 = pfVar1[0xf];
  fVar15 = pfVar1[0xe];
  fVar13 = pfVar1[0xc];
  fVar3 = proc_7F05A928(fVar9,fVar10,param_1,param_2,fVar14,fVar2,fVar11,fVar15,fVar4,fVar12,fVar16)
  ;
  pfVar1 = (float *)param_2;
  *pfVar1 = fVar3;
  fVar3 = proc_7F05A928(fVar7,fVar8,extraout_a0,extraout_a1,fVar13,fVar2,fVar11,fVar15,fVar4,fVar12,
                        fVar16);
  pfVar1[4] = -fVar3;
  fVar3 = proc_7F05A928(fVar7,fVar8,extraout_a0_00,extraout_a1_00,fVar13,fVar9,fVar10,fVar14,fVar4,
                        fVar12,fVar16);
  pfVar1[8] = fVar3;
  fVar3 = proc_7F05A928(fVar7,fVar8,extraout_a0_01,extraout_a1_01,fVar13,fVar9,fVar10,fVar14,fVar2,
                        fVar11,fVar15);
  pfVar1[0xc] = -fVar3;
  fVar3 = proc_7F05A928(fVar18,fVar10,extraout_a0_02,extraout_a1_02,fVar14,fVar5,fVar11,fVar15,fVar6
                        ,fVar12,fVar16);
  pfVar1[1] = -fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar8,extraout_a0_03,extraout_a1_03,fVar13,fVar5,fVar11,fVar15,fVar6,
                        fVar12,fVar16);
  pfVar1[5] = fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar8,extraout_a0_04,extraout_a1_04,fVar13,fVar18,fVar10,fVar14,fVar6
                        ,fVar12,fVar16);
  pfVar1[9] = -fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar8,extraout_a0_05,extraout_a1_05,fVar13,fVar18,fVar10,fVar14,fVar5
                        ,fVar11,fVar15);
  pfVar1[0xd] = fVar3;
  fVar3 = proc_7F05A928(fVar18,fVar9,extraout_a0_06,extraout_a1_06,fVar14,fVar5,fVar2,fVar15,fVar6,
                        fVar4,fVar16);
  pfVar1[2] = fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar7,extraout_a0_07,extraout_a1_07,fVar13,fVar5,fVar2,fVar15,fVar6,
                        fVar4,fVar16);
  pfVar1[6] = -fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar7,extraout_a0_08,extraout_a1_08,fVar13,fVar18,fVar9,fVar14,fVar6,
                        fVar4,fVar16);
  pfVar1[10] = fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar7,extraout_a0_09,extraout_a1_09,fVar13,fVar18,fVar9,fVar14,fVar5,
                        fVar2,fVar15);
  pfVar1[0xe] = -fVar3;
  fVar3 = proc_7F05A928(fVar18,fVar9,extraout_a0_10,extraout_a1_10,fVar10,fVar5,fVar2,fVar11,fVar6,
                        fVar4,fVar12);
  pfVar1[3] = -fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar7,extraout_a0_11,extraout_a1_11,fVar8,fVar5,fVar2,fVar11,fVar6,
                        fVar4,fVar12);
  pfVar1[7] = fVar3;
  fVar3 = proc_7F05A928(fVar17,fVar7,extraout_a0_12,extraout_a1_12,fVar8,fVar18,fVar9,fVar10,fVar6,
                        fVar4,fVar12);
  pfVar1[0xb] = -fVar3;
  fVar2 = proc_7F05A928(fVar17,fVar7,extraout_a0_13,extraout_a1_13,fVar8,fVar18,fVar9,fVar10,fVar5,
                        fVar2,fVar11);
  pfVar1[0xf] = fVar2;
  return;
}



float proc_7F05A774(undefined8 param_1,undefined8 param_2)

{
  float *pfVar1;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  
  pfVar1 = (float *)param_1;
  fVar6 = *pfVar1;
  fVar9 = pfVar1[1];
  fVar12 = pfVar1[2];
  fVar14 = pfVar1[3];
  fVar7 = pfVar1[6];
  fVar2 = pfVar1[5];
  fVar16 = pfVar1[4];
  fVar10 = pfVar1[10];
  fVar5 = pfVar1[7];
  fVar18 = pfVar1[9];
  fVar17 = pfVar1[8];
  fVar13 = pfVar1[0xc];
  fVar19 = pfVar1[0xb];
  fVar15 = pfVar1[0xd];
  fVar8 = pfVar1[0xe];
  fVar11 = pfVar1[0xf];
  fVar3 = proc_7F05A928(fVar16,fVar17,param_1,param_2,fVar13,fVar2,fVar18,fVar15,fVar5,fVar19,fVar11
                       );
  fVar4 = proc_7F05A928(fVar16,fVar17,extraout_a0,extraout_a1,fVar13,fVar7,fVar10,fVar8,fVar5,fVar19
                        ,fVar11);
  fVar5 = proc_7F05A928(fVar2,fVar18,extraout_a0_00,extraout_a1_00,fVar15,fVar7,fVar10,fVar8,fVar5,
                        fVar19,fVar11);
  fVar2 = proc_7F05A928(fVar16,fVar17,extraout_a0_01,extraout_a1_01,fVar13,fVar2,fVar18,fVar15,fVar7
                        ,fVar10,fVar8);
  return ((fVar6 * fVar5 - fVar9 * fVar4) + fVar12 * fVar3) - fVar2 * fVar14;
}



float proc_7F05A928(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6,float param_7,float param_8,float param_9,float param_10,
                   float param_11)

{
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar1 = proc_7F05A9B8(param_2,param_5,param_3,param_4,param_10,param_11);
  fVar2 = proc_7F05A9B8(param_7,param_8,extraout_a0,extraout_a1,param_10,param_11);
  fVar3 = proc_7F05A9B8(param_2,param_5,extraout_a0_00,extraout_a1_00,param_7,param_8);
  return fVar3 * param_9 + (param_1 * fVar2 - param_6 * fVar1);
}



float proc_7F05A9B8(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6)

{
  return param_1 * param_6 - param_2 * param_5;
}



void proc_7F05A9E0(float param_1)

{
  float fVar1;
  float fVar2;
  
  fVar1 = sinf(param_1);
  fVar2 = cosf(param_1);
  sqrtf(fVar1 / fVar2 + 1.00000000);
  return;
}



float convert_angle_using_inverse(f32 vector1,f32 vector2)

{
  float fVar1;
  
  if ((float)vector1 == 0.00000000) {
    fVar1 = flt_80053700;
    if (0.00000000 <= (float)vector2) {
      fVar1 = 0.00000000;
    }
  }
  else {
    if ((float)vector2 == 0.00000000) {
      fVar1 = flt_80053704;
      if ((float)vector1 <= 0.00000000) {
        fVar1 = flt_80053708;
      }
    }
    else {
      fVar1 = sqrtf((float)vector1 * (float)vector1 + (float)vector2 * (float)vector2);
      if ((float)vector2 < (float)vector1) {
        fVar1 = proc_7F05ACB0((float)vector2 / fVar1);
        if ((float)vector1 < 0.00000000) {
          fVar1 = flt_8005370C - fVar1;
        }
      }
      else {
        fVar1 = proc_7F05ACB0((float)vector1 / fVar1);
        fVar1 = flt_80053710 - fVar1;
        if ((float)vector2 < 0.00000000) {
          fVar1 = flt_80053714 - fVar1;
        }
        if (fVar1 < 0.00000000) {
          fVar1 = fVar1 + flt_80053718;
        }
      }
    }
  }
  return fVar1;
}



int proc_7F05AB70(uint param_1)

{
  uint uVar1;
  int iVar2;
  undefined *puVar3;
  uint uVar4;
  
  uVar1 = 7;
  if ((int)param_1 < 0x7fe0) {
    uVar1 = 0x1ff;
    if ((int)param_1 < 0x7800) {
      iVar2 = 9;
      puVar3 = &table_1;
    }
    else {
      uVar1 = 0x1f;
      iVar2 = 5;
      puVar3 = &table_2;
      param_1 -= 0x7800;
    }
  }
  else {
    iVar2 = 3;
    puVar3 = &table_3;
    param_1 -= 0x7fe0;
  }
  uVar4 = (uint)*(ushort *)(puVar3 + ((int)param_1 >> iVar2) * 2);
  return (int)(uVar4 - ((int)((uVar4 - (uint)*(ushort *)(puVar3 + ((int)param_1 >> iVar2) * 2 + 1))
                             * (param_1 & uVar1)) >> iVar2));
}



uint proc_7F05ABF0(short param_1)

{
  uint uVar1;
  
  uVar1 = SEXT24(param_1);
  if ((int)uVar1 < 0) {
    uVar1 = -uVar1;
  }
  uVar1 = proc_7F05AB70(uVar1);
  if (param_1 < 0) {
    uVar1 = 0xffff - uVar1;
  }
  return uVar1 & 0xffff;
}



short proc_7F05AC44(short param_1)

{
  int iVar1;
  short sVar2;
  uint uVar3;
  
  uVar3 = SEXT24(param_1);
  if ((int)uVar3 < 0) {
    uVar3 = -uVar3;
  }
  iVar1 = proc_7F05AB70(uVar3);
  if (param_1 < 0) {
    sVar2 = (short)iVar1 + -0x8000;
  }
  else {
    sVar2 = 0x7fff - (short)iVar1;
  }
  return sVar2;
}



float proc_7F05ACB0(float param_1)

{
  uint uVar1;
  short sVar2;
  float fVar3;
  
  if (1.00000000 <= param_1) {
    sVar2 = 0x7fff;
  }
  else {
    if (param_1 <= -1.00000000) {
      sVar2 = -0x7fff;
    }
    else {
      sVar2 = (short)(int)(param_1 * flt_80053720);
    }
  }
  uVar1 = proc_7F05ABF0(sVar2);
  fVar3 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  return (fVar3 * flt_80053724) / flt_80053728;
}



float proc_7F05AD5C(float param_1)

{
  short sVar1;
  
  if (1.00000000 <= param_1) {
    sVar1 = 0x7fff;
  }
  else {
    if (param_1 <= -1.00000000) {
      sVar1 = -0x7fff;
    }
    else {
      sVar1 = (short)(int)(param_1 * flt_8005372C);
    }
  }
  sVar1 = proc_7F05AC44(sVar1);
  return ((float)(int)sVar1 * flt_80053730) / flt_80053734;
}



void proc_7F05AE00(float *param_1,float *param_2,float param_3,float *param_4)

{
  float *in_a3_lo;
  
  *in_a3_lo = (*param_2 - *param_1) * (float)param_4 + *param_1;
  in_a3_lo[1] = (param_2[1] - param_1[1]) * (float)param_4 + param_1[1];
  in_a3_lo[2] = (param_2[2] - param_1[2]) * (float)param_4 + param_1[2];
  return;
}



float proc_7F05AE50(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6,float param_7)

{
  float fVar1;
  float fVar2;
  
  fVar1 = param_7 * param_7;
  fVar2 = fVar1 * param_7;
  return param_1 * (fVar1 - (param_7 + fVar2) * 0.50000000) +
         param_2 * ((fVar2 * 1.50000000 - fVar1 * 2.50000000) + 1.00000000) +
         param_5 * (fVar2 * -1.50000000 + fVar1 + fVar1 + param_7 * 0.50000000) +
         param_6 * (fVar2 - fVar1) * 0.50000000;
}



void proc_7F05AEFC(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                  float *param_6)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float *in_stack_00000014;
  
  fVar1 = (float)param_6 * (float)param_6;
  fVar2 = fVar1 * (float)param_6;
  fVar3 = (fVar2 - fVar1) * 0.50000000;
  fVar4 = fVar1 - ((float)param_6 + fVar2) * 0.50000000;
  fVar5 = (fVar2 * 1.50000000 - fVar1 * 2.50000000) + 1.00000000;
  fVar1 = fVar2 * -1.50000000 + fVar1 + fVar1 + (float)param_6 * 0.50000000;
  *in_stack_00000014 = *param_4 * fVar3 + fVar4 * *param_1 + fVar5 * *param_2 + fVar1 * *param_3;
  in_stack_00000014[1] =
       param_4[1] * fVar3 + fVar4 * param_1[1] + fVar5 * param_2[1] + fVar1 * param_3[1];
  in_stack_00000014[2] =
       param_4[2] * fVar3 + fVar4 * param_1[2] + fVar5 * param_2[2] + fVar1 * param_3[2];
  return;
}



void proc_7F05B024(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                  float param_6,float *param_7)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float in_stack_00000014;
  float *in_stack_00000018;
  
  fVar1 = (float)param_7 * (float)param_7;
  fVar2 = fVar1 * (float)param_7;
  fVar3 = (fVar2 - fVar1) * in_stack_00000014;
  fVar4 = ((fVar1 + fVar1) - ((float)param_7 + fVar2)) * in_stack_00000014;
  fVar5 = (2.00000000 - in_stack_00000014) * fVar2 + fVar1 * (in_stack_00000014 - 3.00000000) +
          1.00000000;
  fVar1 = (in_stack_00000014 - 2.00000000) * fVar2 +
          fVar1 * (3.00000000 - (in_stack_00000014 + in_stack_00000014)) +
          (float)param_7 * in_stack_00000014;
  *in_stack_00000018 = *param_4 * fVar3 + fVar4 * *param_1 + fVar5 * *param_2 + fVar1 * *param_3;
  in_stack_00000018[1] =
       param_4[1] * fVar3 + fVar4 * param_1[1] + fVar5 * param_2[1] + fVar1 * param_3[1];
  in_stack_00000018[2] =
       param_4[2] * fVar3 + fVar4 * param_1[2] + fVar5 * param_2[2] + fVar1 * param_3[2];
  return;
}



float proc_7F05B154(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6,float param_7)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar1 = param_7 * param_7;
  fVar2 = fVar1 * param_7;
  fVar3 = ((fVar2 + fVar2) - fVar1 * 3.00000000) + 1.00000000;
  return param_1 * fVar3 + param_2 * (1.00000000 - fVar3) +
         param_5 * ((fVar2 - (fVar1 + fVar1)) + param_7) + param_6 * (fVar2 - fVar1);
}



void proc_7F05B1D4(ushort *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  fVar1 = flt_80053740;
  fVar2 = (float)(uint)*param_1;
  if (false) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  fVar2 = cosf(fVar2 * flt_80053740 * 0.50000000);
  fVar5 = (float)(uint)*param_1;
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  fVar5 = sinf(fVar5 * fVar1 * 0.50000000);
  fVar3 = (float)(uint)param_1[1];
  if (false) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  fVar3 = cosf(fVar3 * fVar1 * 0.50000000);
  fVar6 = (float)(uint)param_1[1];
  if (false) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  fVar6 = sinf(fVar6 * fVar1 * 0.50000000);
  fVar4 = (float)(uint)param_1[2];
  if (false) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  fVar4 = cosf(fVar4 * fVar1 * 0.50000000);
  fVar7 = (float)(uint)param_1[2];
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar1 = sinf(fVar7 * fVar1 * 0.50000000);
  *param_2 = fVar2 * fVar3 * fVar4 + fVar5 * fVar6 * fVar1;
  param_2[1] = fVar5 * fVar3 * fVar4 - fVar2 * fVar6 * fVar1;
  param_2[2] = fVar2 * fVar6 * fVar4 + fVar5 * fVar3 * fVar1;
  param_2[3] = fVar2 * fVar3 * fVar1 - fVar5 * fVar6 * fVar4;
  return;
}



void proc_7F05B3F4(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar1 = cosf(*param_1 * 0.50000000);
  fVar2 = sinf(*param_1 * 0.50000000);
  fVar3 = cosf(param_1[1] * 0.50000000);
  fVar4 = sinf(param_1[1] * 0.50000000);
  fVar5 = cosf(param_1[2] * 0.50000000);
  fVar6 = sinf(param_1[2] * 0.50000000);
  *param_2 = fVar1 * fVar3 * fVar5 + fVar2 * fVar4 * fVar6;
  param_2[1] = fVar2 * fVar3 * fVar5 - fVar1 * fVar4 * fVar6;
  param_2[2] = fVar1 * fVar4 * fVar5 + fVar2 * fVar3 * fVar6;
  param_2[3] = fVar1 * fVar3 * fVar6 - fVar2 * fVar4 * fVar5;
  return;
}



void proc_7F05B528(float param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  
  fVar1 = cosf(param_1 * 0.50000000);
  *param_3 = fVar1;
  fVar1 = sinf(param_1 * 0.50000000);
  param_3[1] = fVar1;
  param_3[2] = 0.00000000;
  param_3[3] = 0.00000000;
  return;
}



void proc_7F05B57C(float param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  
  fVar1 = cosf(param_1 * 0.50000000);
  *param_3 = fVar1;
  param_3[1] = 0.00000000;
  fVar1 = sinf(param_1 * 0.50000000);
  param_3[2] = fVar1;
  param_3[3] = 0.00000000;
  return;
}



void proc_7F05B5D4(float param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  
  fVar1 = cosf(param_1 * 0.50000000);
  *param_3 = fVar1;
  param_3[1] = 0.00000000;
  param_3[2] = 0.00000000;
  fVar1 = sinf(param_1 * 0.50000000);
  param_3[3] = fVar1;
  return;
}



void proc_7F05B628(float *param_1,float *param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  fVar8 = *param_1;
  fVar1 = param_1[1];
  fVar2 = param_1[2];
  fVar5 = param_1[3];
  fVar4 = 2.00000000 / (fVar5 * fVar5 + fVar8 * fVar8 + fVar1 * fVar1 + fVar2 * fVar2);
  fVar7 = fVar2 * fVar4;
  fVar6 = fVar5 * fVar4;
  fVar3 = fVar8 * fVar1 * fVar4;
  fVar4 = fVar1 * fVar1 * fVar4;
  *param_2 = 1.00000000 - (fVar2 * fVar7 + fVar5 * fVar6);
  param_2[1] = fVar1 * fVar7 + fVar8 * fVar6;
  param_2[2] = fVar1 * fVar6 - fVar8 * fVar7;
  param_2[4] = fVar1 * fVar7 - fVar8 * fVar6;
  param_2[6] = fVar2 * fVar6 + fVar3;
  param_2[5] = 1.00000000 - (fVar4 + fVar5 * fVar6);
  param_2[9] = fVar2 * fVar6 - fVar3;
  param_2[8] = fVar1 * fVar6 + fVar8 * fVar7;
  param_2[0xc] = 0.00000000;
  param_2[0xd] = 0.00000000;
  param_2[0xe] = 0.00000000;
  param_2[3] = 0.00000000;
  param_2[7] = 0.00000000;
  param_2[0xb] = 0.00000000;
  param_2[0xf] = 1.00000000;
  param_2[10] = 1.00000000 - (fVar4 + fVar2 * fVar7);
  return;
}



void proc_7F05B798(float *param_1,float *param_2)

{
  int iVar1;
  int iVar2;
  float *pfVar3;
  uint uVar4;
  float *pfVar5;
  int *piVar6;
  int iVar7;
  float fVar8;
  float __x;
  int aiStack32 [8];
  
  __x = param_1[10] + *param_1 + param_1[5] + 1.00000000;
  if (0.00000000 < __x) {
    __x = sqrtf(__x);
    fVar8 = 0.50000000 / __x;
    *param_2 = __x * 0.50000000;
    param_2[1] = (param_1[6] - param_1[9]) * fVar8;
    param_2[2] = (param_1[8] - param_1[2]) * fVar8;
    param_2[3] = (param_1[1] - param_1[4]) * fVar8;
  }
  else {
    aiStack32[0] = dword_80032430;
    aiStack32[1] = DAT_80032434;
    aiStack32[2] = DAT_80032438;
    if (*param_1 < param_1[5]) {
      iVar7 = 0x10;
    }
    else {
      iVar7 = 0;
    }
    pfVar3 = (float *)((int)param_1 + iVar7);
    uVar4 = (uint)(*param_1 < param_1[5]);
    iVar7 = uVar4 * 4;
    __x = pfVar3[uVar4];
    if (__x < param_1[10]) {
      pfVar3 = param_1 + 8;
      __x = param_1[10];
      iVar7 = 8;
      piVar6 = aiStack32 + 2;
    }
    else {
      piVar6 = aiStack32 + uVar4;
    }
    iVar1 = *piVar6;
    iVar2 = aiStack32[iVar1];
    pfVar5 = param_1 + iVar1 * 4;
    param_1 = param_1 + iVar2 * 4;
    __x = sqrtf(((__x - pfVar5[iVar1]) - param_1[iVar2]) + 1.00000000);
    fVar8 = 0.50000000 / __x;
    *(float *)((int)param_2 + iVar7 + 4) = __x * 0.50000000;
    *param_2 = (pfVar5[iVar2] - param_1[iVar1]) * fVar8;
    param_2[iVar1 + 1] = (*(float *)((int)pfVar5 + iVar7) + pfVar3[iVar1]) * fVar8;
    param_2[iVar2 + 1] = (*(float *)((int)param_1 + iVar7) + pfVar3[iVar2]) * fVar8;
  }
  return;
}



void proc_7F05B9B4(float *param_1,float *param_2,float *param_3)

{
  proc_7F05B628(param_2,param_3);
  param_3[0xc] = *param_1;
  param_3[0xd] = param_1[1];
  param_3[0xe] = param_1[2];
  return;
}



void proc_7F05BA08(float *param_1,float *param_2,float param_3,float *param_4)

{
  float *in_a3_lo;
  float __x;
  float fVar1;
  float fVar2;
  
  fVar2 = *param_2;
  __x = *param_1;
  fVar1 = param_2[3] * param_1[3] + __x * fVar2 + param_1[1] * param_2[1] + param_1[2] * param_2[2];
  if (fVar1 < flt_80053744) {
    fVar1 = 1.00000000 - (float)param_4;
    *in_a3_lo = fVar1 * __x - fVar2 * (float)param_4;
    in_a3_lo[1] = fVar1 * param_1[1] - param_2[1] * (float)param_4;
    in_a3_lo[2] = fVar1 * param_1[2] - param_2[2] * (float)param_4;
    in_a3_lo[3] = fVar1 * param_1[3] - param_2[3] * (float)param_4;
  }
  else {
    if (fVar1 <= flt_80053748) {
      __x = proc_7F05ACB0(fVar1);
      fVar1 = sinf(__x);
      fVar2 = sinf((1.00000000 - (float)param_4) * __x);
      fVar2 = fVar2 / fVar1;
      __x = sinf((float)param_4 * __x);
      __x = __x / fVar1;
      *in_a3_lo = *param_2 * __x + fVar2 * *param_1;
      in_a3_lo[1] = param_2[1] * __x + fVar2 * param_1[1];
      in_a3_lo[2] = param_2[2] * __x + fVar2 * param_1[2];
      in_a3_lo[3] = param_2[3] * __x + fVar2 * param_1[3];
    }
    else {
      fVar1 = 1.00000000 - (float)param_4;
      *in_a3_lo = fVar2 * (float)param_4 + fVar1 * __x;
      in_a3_lo[1] = param_2[1] * (float)param_4 + fVar1 * param_1[1];
      in_a3_lo[2] = param_2[2] * (float)param_4 + fVar1 * param_1[2];
      in_a3_lo[3] = param_2[3] * (float)param_4 + fVar1 * param_1[3];
    }
  }
  return;
}



void proc_7F05BC68(float *param_1,float param_2,float *param_3)

{
  float *in_a2_lo;
  float fVar1;
  float __x;
  float fVar2;
  float fVar3;
  
  fVar1 = *param_1;
  fVar3 = 1.00000000;
  __x = fVar1;
  if (fVar1 < 0.00000000) {
    fVar3 = -1.00000000;
    __x = -fVar1;
  }
  if (__x < flt_8005374C) {
    *in_a2_lo = fVar1 * (float)param_3 - (1.00000000 - (float)param_3) * fVar3;
    in_a2_lo[1] = param_1[1] * (float)param_3;
    in_a2_lo[2] = param_1[2] * (float)param_3;
    in_a2_lo[3] = param_1[3] * (float)param_3;
  }
  else {
    if (__x <= flt_80053750) {
      __x = proc_7F05ACB0(__x);
      fVar1 = sinf(__x);
      fVar2 = sinf((float)param_3 * __x);
      fVar2 = fVar2 / fVar1;
      __x = sinf((1.00000000 - (float)param_3) * __x);
      *in_a2_lo = *param_1 * fVar2 + (__x / fVar1) * fVar3;
      in_a2_lo[1] = param_1[1] * fVar2;
      in_a2_lo[2] = param_1[2] * fVar2;
      in_a2_lo[3] = param_1[3] * fVar2;
    }
    else {
      *in_a2_lo = fVar1 * (float)param_3 + (1.00000000 - (float)param_3) * fVar3;
      in_a2_lo[1] = param_1[1] * (float)param_3;
      in_a2_lo[2] = param_1[2] * (float)param_3;
      in_a2_lo[3] = param_1[3] * (float)param_3;
    }
  }
  return;
}



void proc_7F05BE10(float *param_1,float *param_2)

{
  if (param_2[3] * param_1[3] +
      *param_1 * *param_2 + param_1[1] * param_2[1] + param_1[2] * param_2[2] < 0.00000000) {
    *param_2 = -*param_2;
    param_2[1] = -param_2[1];
    param_2[2] = -param_2[2];
    param_2[3] = -param_2[3];
  }
  return;
}



void proc_7F05BE88(float *param_1,float *param_2,float *param_3)

{
  *param_3 = ((*param_1 * *param_2 - param_1[1] * param_2[1]) - param_1[2] * param_2[2]) -
             param_2[3] * param_1[3];
  param_3[1] = (*param_1 * param_2[1] + *param_2 * param_1[1] + param_1[2] * param_2[3]) -
               param_2[2] * param_1[3];
  param_3[2] = (*param_1 * param_2[2] + *param_2 * param_1[2] + param_1[3] * param_2[1]) -
               param_2[3] * param_1[1];
  param_3[3] = (*param_1 * param_2[3] + *param_2 * param_1[3] + param_1[1] * param_2[2]) -
               param_2[1] * param_1[2];
  return;
}



void proc_7F05BF8C(float *param_1,float *param_2)

{
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  proc_7F05BE88(param_1,param_2,&fStack16);
  *param_2 = fStack16;
  param_2[1] = fStack12;
  param_2[2] = fStack8;
  param_2[3] = fStack4;
  return;
}



void proc_7F05BFD4(float *param_1,undefined4 *param_2)

{
  float __x;
  float fVar1;
  
  __x = proc_7F05ACB0(*param_1);
  fVar1 = sinf(__x);
  if (fVar1 == 0.00000000) {
    *param_2 = 0;
    param_2[1] = 0;
    param_2[2] = 0;
    param_2[3] = 0;
  }
  else {
    *param_2 = 0;
    __x = __x / fVar1;
    *(float *)(param_2 + 1) = param_1[1] * __x;
    *(float *)(param_2 + 2) = param_1[2] * __x;
    *(float *)(param_2 + 3) = param_1[3] * __x;
  }
  return;
}



void proc_7F05C068(int param_1,float *param_2)

{
  float __x;
  float fVar1;
  
  __x = sqrtf(*(float *)(param_1 + 0xc) * *(float *)(param_1 + 0xc) +
              *(float *)(param_1 + 4) * *(float *)(param_1 + 4) +
              *(float *)(param_1 + 8) * *(float *)(param_1 + 8));
  if (__x == 0.00000000) {
    param_2[1] = 0.00000000;
    param_2[2] = 0.00000000;
    param_2[3] = 0.00000000;
    *param_2 = 1.00000000;
  }
  else {
    fVar1 = sinf(__x);
    fVar1 = fVar1 / __x;
    __x = cosf(__x);
    *param_2 = __x;
    param_2[1] = *(float *)(param_1 + 4) * fVar1;
    param_2[2] = *(float *)(param_1 + 8) * fVar1;
    param_2[3] = *(float *)(param_1 + 0xc) * fVar1;
  }
  return;
}



void proc_7F05C138(float *param_1,float *param_2,float *param_3,float *param_4)

{
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float afStack48 [4];
  float afStack32 [4];
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  fStack16 = *param_2;
  fStack12 = -param_2[1];
  fStack8 = -param_2[2];
  fStack4 = -param_2[3];
  proc_7F05BE88(&fStack16,param_1,afStack32);
  proc_7F05BE88(&fStack16,param_3,afStack48);
  proc_7F05BFD4(afStack32,&fStack64);
  proc_7F05BFD4(afStack48,&fStack80);
  fStack64 = -(fStack80 + fStack64) * 0.25000000;
  fStack60 = -(fStack76 + fStack60) * 0.25000000;
  fStack56 = -(fStack72 + fStack56) * 0.25000000;
  fStack52 = -(fStack68 + fStack52) * 0.25000000;
  proc_7F05C068((int)&fStack64,afStack32);
  proc_7F05BE88(param_2,afStack32,param_4);
  return;
}



void proc_7F05C250(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                  float *param_6)

{
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float afStack32 [4];
  float afStack16 [4];
  
  proc_7F05BE10(param_1,param_4);
  proc_7F05BA08(param_1,param_4,extraout_f12,param_6);
  proc_7F05BE10(param_2,param_3);
  proc_7F05BA08(param_2,param_3,extraout_f12_00,param_6);
  proc_7F05BE10(afStack16,afStack32);
  proc_7F05BA08(afStack16,afStack32,extraout_f12_01,
                (float *)(((float)param_6 + (float)param_6) * (1.00000000 - (float)param_6)));
  return;
}



void proc_7F05C2F0(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                  float *param_6)

{
  float extraout_f12;
  float afStack32 [4];
  float afStack16 [4];
  
  proc_7F05C138(param_1,param_2,param_3,afStack16);
  proc_7F05C138(param_2,param_3,param_4,afStack32);
  proc_7F05C250(param_2,afStack16,afStack32,param_3,extraout_f12,param_6);
  return;
}



float truncf(float __x)

{
  float fVar1;
  
  if (0.00000000 <= __x) {
    return (float)(int)__x;
  }
  fVar1 = (float)(int)__x;
  if (__x != fVar1) {
    return fVar1 - 1.00000000;
  }
  return fVar1;
}



int proc_7F05C3D8(float param_1)

{
  int iVar1;
  
  if (0.00000000 <= param_1) {
    return (int)param_1;
  }
  iVar1 = (int)param_1;
  if (param_1 != (float)iVar1) {
    return iVar1 + -1;
  }
  return iVar1;
}



float proc_7F05C440(float param_1)

{
  float fVar1;
  
  if (param_1 <= 0.00000000) {
    return (float)(int)param_1;
  }
  fVar1 = (float)(int)param_1;
  if (param_1 != fVar1) {
    return fVar1 + 1.00000000;
  }
  return fVar1;
}



int proc_7F05C4B8(float param_1)

{
  int iVar1;
  
  if (param_1 <= 0.00000000) {
    return (int)param_1;
  }
  iVar1 = (int)param_1;
  if (param_1 != (float)iVar1) {
    return iVar1 + 1;
  }
  return iVar1;
}



void proc_7F05C520(undefined4 param_1)

{
  DAT_80034c9c = param_1;
  return;
}



undefined4 proc_7F05C52C(void)

{
  return DAT_80034c9c;
}



void proc_7F05C538(void)

{
  return;
}



void proc_7F05C540(float *param_1)

{
  int iVar1;
  int iVar2;
  float fVar3;
  
  iVar2 = DAT_80034ca0;
  iVar1 = DAT_80034ca0 * 9;
  fVar3 = (float)DWORD_ARRAY_80035904[DAT_80034ca0 * 9 + 3];
  *(float *)(DWORD_ARRAY_80035904 + DAT_80034ca0 * 9 + 1) =
       (float)DWORD_ARRAY_80035904[DAT_80034ca0 * 9 + 1] + *param_1;
  *(float *)(DWORD_ARRAY_80035904 + iVar2 * 9 + 2) =
       (float)DWORD_ARRAY_80035904[iVar1 + 2] + param_1[1];
  *(float *)(DWORD_ARRAY_80035904 + iVar2 * 9 + 3) = fVar3 + param_1[2];
  return;
}



void proc_7F05C594(float *param_1)

{
  float afStack64 [16];
  
  proc_7F058714((float *)(DWORD_ARRAY_80035904 + DAT_80034ca0 * 9 + 4),afStack64);
  proc_7F058068(param_1,afStack64);
  proc_7F058860(afStack64,(float *)(DWORD_ARRAY_80035904 + DAT_80034ca0 * 9 + 4));
  return;
}



void proc_7F05C614(void)

{
  if (DAT_80034c9c != 0) {
    ptr_BONDdata->field_92C = 1;
    proc_7F058714((float *)(DWORD_ARRAY_80035904 + DAT_80034ca0 * 9 + 4),
                  (float *)&ptr_BONDdata->field_8EC);
    proc_7F058998(DWORD_ARRAY_80035904 + DAT_80034ca0 * 9 + 1,(int)&ptr_BONDdata->field_8EC);
    DAT_80034c9c = 0;
  }
  return;
}



void proc_7F05C6B8(void)

{
  DAT_80034ca0 += 1;
  if ((DWORD_ARRAY_80035904[DAT_80034ca0 * 9] & 1) != 0) {
    DAT_80034ca0 = 0;
  }
  return;
}



undefined8 proc_7F05C6FC(int param_1,float param_2,float *param_3,int param_4)

{
  uint uVar1;
  int iVar3;
  undefined8 uVar2;
  int in_a3_lo;
  int iVar4;
  float fVar5;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float afStack104 [4];
  float afStack88 [4];
  float afStack72 [4];
  float afStack56 [4];
  float fStack40;
  float fStack36;
  float afStack24 [3];
  undefined4 uStack12;
  float *pfStack8;
  
  iVar3 = 1;
  if (*(float *)(param_1 + 0x44) <= (float)param_3) {
    fVar5 = *(float *)(param_1 + 0x44);
    uVar1 = *(uint *)(param_1 + 0x90);
    iVar4 = param_1 + 0x24;
    while( true ) {
      param_3 = (float *)((float)param_3 - fVar5);
      iVar3 += 1;
      if (((uVar1 & 1) != 0) || (fVar5 = *(float *)(iVar4 + 0x44), (float)param_3 < fVar5)) break;
      uVar1 = *(uint *)(iVar4 + 0x90);
      iVar4 = iVar4 + 0x24;
    }
    iVar4 = iVar3 * 8;
  }
  else {
    iVar4 = 8;
  }
  param_1 += (iVar4 + iVar3) * 4;
  if ((*(uint *)(param_1 + 0x48) & 1) == 0) {
    pfStack8 = (float *)((float)param_3 / *(float *)(param_1 + 0x20));
    uStack12 = *(undefined4 *)(param_1 + 0x1c);
    proc_7F05B3F4((float *)(param_1 + -0x14),afStack56);
    proc_7F05B3F4((float *)(param_1 + 0x10),afStack72);
    proc_7F05B3F4((float *)(param_1 + 0x34),afStack88);
    proc_7F05B3F4((float *)(param_1 + 0x58),afStack104);
    proc_7F05BE10(afStack72,afStack88);
    proc_7F05BE10(afStack88,afStack104);
    proc_7F05BE10(afStack72,afStack56);
    proc_7F05C2F0(afStack56,afStack72,afStack88,afStack104,extraout_f12,pfStack8);
    proc_7F05B024((float *)(param_1 + -0x20),(float *)(param_1 + 4),(float *)(param_1 + 0x28),
                  (float *)(param_1 + 0x4c),extraout_f12_00,extraout_f14,pfStack8);
    if (in_a3_lo == 1) {
      afStack24[0] = -afStack24[0];
      fStack40 = -fStack40;
      fStack36 = -fStack36;
    }
    proc_7F05B628(&fStack40,(float *)param_4);
    proc_7F058998(afStack24,param_4);
    uVar2 = 1;
  }
  else {
    proc_7F058714((float *)(param_1 + 0x10),(float *)param_4);
    proc_7F058998((undefined4 *)(param_1 + 4),param_4);
    uVar2 = 0;
  }
  return uVar2;
}



undefined * get_ptr_item_statistics(int item)

{
  if ((&gitem_structs)[item].no_model == 0) {
    return (undefined *)(&gitem_structs)[item].item_weapon_stats;
  }
  return (undefined *)&stru_80032494;
}



void proc_7F05C8F0(undefined4 *param_1)

{
  ITEM_IDS item;
  undefined *puVar1;
  
  item = get_item_in_hand(0);
  puVar1 = get_ptr_item_statistics(item);
  *param_1 = *(undefined4 *)(puVar1 + 4);
  param_1[1] = *(undefined4 *)(puVar1 + 8);
  param_1[2] = *(undefined4 *)(puVar1 + 0xc);
  return;
}



void copy_item_in_hand_to_main_list(undefined4 *param_1)

{
  ITEM_IDS item;
  undefined *puVar1;
  
  item = get_item_in_hand(0);
  puVar1 = get_ptr_item_statistics(item);
  *(undefined4 *)(puVar1 + 4) = *param_1;
  *(undefined4 *)(puVar1 + 8) = param_1[1];
  *(undefined4 *)(puVar1 + 0xc) = param_1[2];
  return;
}



void unknown_takes_playerhand(int hand)

{
  ITEM_IDS item;
  undefined *puVar1;
  u32 uVar2;
  int *piVar3;
  uint uVar4;
  uint *puVar5;
  float fVar6;
  float fVar7;
  uint auStack16 [4];
  
  item = get_item_in_hand(hand);
  puVar1 = get_ptr_item_statistics(item);
  piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
  fVar7 = *(float *)(puVar1 + 0x40);
  puVar5 = auStack16 + hand + 2;
  uVar4 = piVar3[0x282] + 2U & 3;
  if (((int)(piVar3[0x282] + 2U) < 0) && (uVar4 != 0)) {
    uVar4 -= 4;
  }
  *puVar5 = uVar4;
  uVar4 = piVar3[0x282] + 1U & 3;
  if (((int)(piVar3[0x282] + 1U) < 0) && (uVar4 != 0)) {
    uVar4 -= 4;
  }
  auStack16[hand] = uVar4;
  piVar3[0x282] = uVar4;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_9A8 + hand * 0xea + *puVar5 * 3) =
       (fVar6 * 0.00000000 - 0.50000000) * flt_80053C14 * fVar7;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_9AC + hand * 0xea + *puVar5 * 3) =
       (fVar6 * 0.00000000 - 0.50000000) * flt_80053C18 * fVar7;
  (&ptr_BONDdata->field_9B0)[hand * 0xea + *puVar5 * 3] = -0x40800000;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_9D8 + hand * 0xea + *puVar5 * 3) =
       (fVar6 * 0.00000000 - 0.50000000) * flt_80053C1C * fVar7;
  (&ptr_BONDdata->field_9DC)[hand * 0xea + *puVar5 * 3] = 0x3f800000;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_9E0 + hand * 0xea + *puVar5 * 3) =
       (fVar6 * 0.00000000 - 0.50000000) * flt_80053C20 * fVar7;
  uVar2 = get_random_value();
  fVar7 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_978 + hand * 0xea + *puVar5 * 3) =
       fVar7 * 0.00000000 * 0.75000000 + 1.50000000;
  uVar2 = get_random_value();
  fVar7 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->unknown + hand * 0xea + *puVar5 * 3 + 0x25f) =
       (float)(&ptr_BONDdata->unknown + hand * 0xea)[0x285] * (fVar7 * 0.00000000 + 2.00000000);
  uVar2 = get_random_value();
  fVar7 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_980 + hand * 0xea + *puVar5 * 3) =
       (fVar7 * 0.00000000 - 0.50000000) * 2.50000000;
  piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
  if (piVar3[0x286] < 0) {
    *(float *)(&ptr_BONDdata->unknown + hand * 0xea + *puVar5 * 3 + 0x25e) =
         (float)(&ptr_BONDdata->unknown + hand * 0xea + *puVar5 * 3)[0x25e] * -1.00000000;
    piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
    if (piVar3[0x286] == -2) {
      piVar3[0x286] = 1;
    }
    else {
      piVar3[0x286] = -2;
    }
  }
  else {
    if (piVar3[0x286] == 2) {
      piVar3[0x286] = -1;
    }
    else {
      piVar3[0x286] = 2;
    }
  }
  *(float *)(&ptr_BONDdata->unknown + hand * 0xea + 0x285) =
       -(float)(&ptr_BONDdata->unknown + hand * 0xea)[0x285];
  return;
}



ulonglong proc_7F05CEBC(int param_1)

{
  int *piVar1;
  ulonglong uVar2;
  
  piVar1 = &ptr_BONDdata->unknown + param_1;
  uVar2 = (ulonglong)(0 < piVar1[0x1fe]);
  if ((0 >= piVar1[0x1fe]) && (uVar2 = (ulonglong)(piVar1[0x200] == 0), piVar1[0x200] == 0)) {
    uVar2 = (ulonglong)(piVar1[0xa91] < 0);
  }
  return uVar2;
}



int get_itemtype_in_hand(int hand)

{
  return (&ptr_BONDdata->item_right)[hand];
}



Gitemheader * get_ptr_itemheader_in_hand(int hand)

{
  return (Gitemheader *)(ptr_BONDdata->copy_of_body_obj_header + hand * 8);
}



void * proc_7F05CF30(int param_1)

{
  return (&ptr_BONDdata->ptr_right_weapon_buffer)[param_1];
}



u32 proc_7F05CF48(int param_1)

{
  return (&size_right_item_buffer)[param_1];
}



void remove_item_in_hand(int hand)

{
  (&ptr_BONDdata->right_invisible)[hand] = 0;
  (&ptr_BONDdata->item_right)[hand] = 0;
  (&ptr_BONDdata->field_2A44)[hand] = -1;
  (&ptr_BONDdata->lock_right_hand_model)[hand] = 1;
  return;
}



void place_item_in_hand_swap_and_make_visible(int hand,int item)

{
  int *piVar1;
  
  piVar1 = &ptr_BONDdata->unknown + hand;
  if (piVar1[0xa94] == 0) {
    if (piVar1[0x1fe] < 0) {
      if (item != piVar1[0x200]) {
        piVar1[0xa91] = item;
        return;
      }
      piVar1[0x1fe] = 1;
    }
    else {
      if (item != piVar1[0x200]) {
        piVar1[0x1fe] = -1;
        (&ptr_BONDdata->field_2A44)[hand] = item;
        return;
      }
    }
  }
  return;
}



char * get_ptr_item_text_call_line(int item)

{
  if (item == 1) {
    item = ptr_BONDdata->field_2A38;
  }
  return (&gitem_structs)[item].item_file_name;
}



Gitemheader * get_ptr_weapon_model_header_line(int weapon)

{
  if (weapon == 1) {
    weapon = ptr_BONDdata->field_2A38;
  }
  return (&gitem_structs)[weapon].item_header;
}



int proc_7F05D078(void)

{
  return ptr_BONDdata->field_2A38;
}



void used_to_load_1st_person_model_on_demand(int param_1)

{
  int item;
  u32 uVar1;
  int *recallstring;
  int *piVar2;
  int targetloc;
  int iVar3;
  int *piVar4;
  
  recallstring = &ptr_BONDdata->unknown + param_1;
  item = recallstring[0x1fe];
  if ((item < 0) && (recallstring[0xa94] == 0)) {
    if (item < -2) {
      item = recallstring[0xa91];
    }
    else {
      if (recallstring[0x200] != 0) {
        recallstring[0x1fe] = item + -1;
        return;
      }
      item = recallstring[0xa91];
    }
    recallstring = (int *)get_ptr_item_text_call_line(item);
    piVar2 = (int *)get_ptr_weapon_model_header_line(item);
    if ((recallstring != NULL) && (piVar2 != NULL)) {
      targetloc = proc_7F05CF30(param_1);
      iVar3 = proc_7F05CF48(param_1);
      piVar4 = &ptr_BONDdata->unknown + param_1 * 8;
      piVar4[0x204] = *piVar2;
      piVar4[0x205] = piVar2[1];
      piVar4[0x206] = piVar2[2];
      piVar4[0x207] = piVar2[3];
      piVar4[0x208] = piVar2[4];
      piVar4[0x209] = piVar2[5];
      piVar4[0x20a] = piVar2[6];
      piVar4[0x20b] = piVar2[7];
      if (item == 0x54) {
        proc_7F0CBAF4(&ptr_BONDdata->field_850 + param_1 * 4,targetloc + 0xbd70,iVar3 + -0xbd70);
        load_object_fill_header
                  ((object_header *)(ptr_BONDdata->copy_of_body_obj_header + param_1 * 8),
                   recallstring,targetloc,0xbd70,(int)(&ptr_BONDdata->field_850 + param_1 * 4));
      }
      else {
        if ((item == 0x1e) || (item == 0x17)) {
          proc_7F0CBAF4(&ptr_BONDdata->field_850 + param_1 * 4,targetloc + 0xafd0,iVar3 + -0xafd0);
          load_object_fill_header
                    ((object_header *)(ptr_BONDdata->copy_of_body_obj_header + param_1 * 8),
                     recallstring,targetloc,0xafd0,(int)(&ptr_BONDdata->field_850 + param_1 * 4));
        }
        else {
          uVar1 = (&dword_80032464)[param_1];
          proc_7F0CBAF4(&ptr_BONDdata->field_850 + param_1 * 4,uVar1 + targetloc,iVar3 - uVar1);
          load_object_fill_header
                    ((object_header *)(ptr_BONDdata->copy_of_body_obj_header + param_1 * 8),
                     recallstring,targetloc,(&dword_80032464)[param_1],
                     (int)(&ptr_BONDdata->field_850 + param_1 * 4));
        }
      }
    }
    (&ptr_BONDdata->right_invisible)[param_1] = 1;
    (&ptr_BONDdata->item_right)[param_1] = item;
    (&ptr_BONDdata->field_2A44)[param_1] = -1;
  }
  return;
}



longlong proc_7F05D334(longlong param_1,int param_2)

{
  ulonglong uVar1;
  ITEM_IDS weaponid;
  int iVar2;
  
  if (0 < param_2) {
    iVar2 = (int)param_1 + 1;
    while( true ) {
      while( true ) {
        weaponid = iVar2 % 0x21;
        param_1 = (longlong)(int)weaponid;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar2 == -0x80000000)) {
          trap(0x1800);
        }
        uVar1 = check_if_item_available(weaponid);
        if (uVar1 != 0) break;
        iVar2 = weaponid + ITEM_FIST;
      }
      param_2 += -1;
      if (param_2 < 1) break;
      iVar2 = weaponid + ITEM_FIST;
    }
  }
  if (param_2 < 0) {
    param_1 = (longlong)((int)param_1 + -1);
    while( true ) {
      while( true ) {
        if (param_1 < 0) {
          iVar2 = -1 - (int)param_1;
          param_1 = (longlong)(0x20 - iVar2 % 0x21);
          if (false) {
            trap(0x1c00);
          }
          if ((false) && (iVar2 == -0x80000000)) {
            trap(0x1800);
          }
        }
        weaponid = (ITEM_IDS)param_1;
        uVar1 = check_if_item_available(weaponid);
        if (uVar1 != 0) break;
        param_1 = (longlong)(int)(weaponid + ~ITEM_UNARMED);
      }
      param_2 += 1;
      if (-1 < param_2) break;
      param_1 = (longlong)(int)(weaponid + ~ITEM_UNARMED);
    }
  }
  return param_1;
}



ITEM_IDS get_next_weapon_in_cycle_for_hand(int hand,longlong direction)

{
  ITEM_IDS IVar1;
  int *piVar2;
  
  piVar2 = &ptr_BONDdata->unknown + hand * 0xea;
  if (piVar2[0x225] == 5) {
    if (((direction < 0) && (0 < piVar2[0x22e])) || ((0 < direction && (piVar2[0x22e] < 0)))) {
      IVar1 = get_item_in_hand(hand);
    }
    else {
      IVar1 = piVar2[0x22b];
    }
  }
  else {
    if (piVar2[0x225] == 6) {
      IVar1 = piVar2[0x22b];
    }
    else {
      IVar1 = get_item_in_hand(hand);
    }
  }
  return IVar1;
}



void likely_change_weapon_in_hand(int hand,int weapon,s32 direction)

{
  ulonglong uVar1;
  int iVar2;
  int *piVar3;
  
  piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
  if ((piVar3[0x225] == 5) || (piVar3[0x225] == 6)) {
    piVar3[0x22c] = piVar3[0x224];
    uVar1 = get_num_players();
    if (uVar1 == 1) {
      (&ptr_BONDdata->unknown + hand * 0xea)[0x22c] =
           (&ptr_BONDdata->unknown + hand * 0xea)[0x22c] + 0x11;
    }
    else {
      (&ptr_BONDdata->unknown + hand * 0xea)[0x22c] =
           (&ptr_BONDdata->unknown + hand * 0xea)[0x22c] + 0xd;
    }
  }
  iVar2 = get_next_weapon_in_cycle_for_hand(hand,0);
  if (iVar2 != weapon) {
    piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
    if ((piVar3[0x225] != 5) && (piVar3[0x225] != 6)) {
      piVar3[0x226] = 5;
      piVar3 = &ptr_BONDdata->unknown + hand * 0xea;
    }
    piVar3[0x22b] = weapon;
    (&ptr_BONDdata->right_weapon_animation_trigger)[hand * 0xea] = 1;
    (&ptr_BONDdata->field_8B8)[hand * 0xea] = direction;
  }
  return;
}



void proc_7F05D610(int param_1)

{
  int iVar2;
  longlong lVar1;
  
  iVar2 = get_next_weapon_in_cycle_for_hand(param_1,0);
  lVar1 = proc_7F05D334((longlong)iVar2,1);
  likely_change_weapon_in_hand(param_1,(int)lVar1,0);
  return;
}



void proc_7F05D650(int param_1)

{
  int iVar2;
  longlong lVar1;
  
  iVar2 = get_next_weapon_in_cycle_for_hand(param_1,0);
  lVar1 = proc_7F05D334((longlong)iVar2,-1);
  likely_change_weapon_in_hand(param_1,(int)lVar1,0);
  return;
}



void proc_7F05D690(void)

{
  draw_item_in_hand_has_more_ammo(0,ptr_BONDdata->previous_right_weapon);
  draw_item_in_hand_has_more_ammo(1,ptr_BONDdata->left_weapon_previous);
  return;
}



void advance_through_inventory(void)

{
  int iStack8;
  int iStack4;
  
  iStack4 = get_next_weapon_in_cycle_for_hand(0,1);
  iStack8 = get_next_weapon_in_cycle_for_hand(1,1);
  if ((iStack4 < 0x21) && (iStack8 < 0x21)) {
    proc_7F08C86C(&iStack4,&iStack8,0);
  }
  else {
    iStack4 = ptr_BONDdata->previous_right_weapon;
    iStack8 = ptr_BONDdata->left_weapon_previous;
  }
  likely_change_weapon_in_hand(0,iStack4,1);
  likely_change_weapon_in_hand(1,iStack8,1);
  return;
}



void backstep_through_inventory(void)

{
  int iStack8;
  int iStack4;
  
  iStack4 = get_next_weapon_in_cycle_for_hand(0,-1);
  iStack8 = get_next_weapon_in_cycle_for_hand(1,-1);
  if ((iStack4 < 0x21) && (iStack8 < 0x21)) {
    proc_7F08CB10(&iStack4,&iStack8,0);
  }
  else {
    iStack4 = ptr_BONDdata->previous_right_weapon;
    iStack8 = ptr_BONDdata->left_weapon_previous;
  }
  likely_change_weapon_in_hand(0,iStack4,-1);
  likely_change_weapon_in_hand(1,iStack8,-1);
  return;
}



void autoadvance_on_deplete_all_ammo(void)

{
  ulonglong uVar1;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  iStack12 = get_next_weapon_in_cycle_for_hand(0,1);
  iStack4 = iStack12;
  iStack16 = get_next_weapon_in_cycle_for_hand(1,1);
  if ((iStack12 < 0x21) && (iStack16 < 0x21)) {
    iStack8 = iStack16;
    if ((iStack12 == 0x1d) &&
       (iStack8 = iStack16, uVar1 = check_if_item_available(ITEM_TRIGGER), uVar1 != 0)) {
      iStack12 = 0x1e;
      iStack16 = 0;
    }
    else {
      proc_7F08C86C(&iStack12,&iStack16,1);
      if ((iStack12 < iStack4) || ((iStack12 == iStack4 && (iStack16 <= iStack8)))) {
        iStack12 = iStack4;
        iStack16 = iStack8;
        proc_7F08CB10(&iStack12,&iStack16,1);
      }
    }
  }
  else {
    iStack12 = ptr_BONDdata->previous_right_weapon;
    iStack16 = ptr_BONDdata->left_weapon_previous;
  }
  likely_change_weapon_in_hand(0,iStack12,1);
  likely_change_weapon_in_hand(1,iStack16,1);
  return;
}



void draw_item_in_hand_has_more_ammo(int hand,ITEM_IDS item)

{
  (&ptr_BONDdata->right_weapon_current_animation)[hand * 0xea] = 5;
  (&ptr_BONDdata->right_weapon_next_weapon)[hand * 0xea] = item;
  (&ptr_BONDdata->right_weapon_animation_trigger)[hand * 0xea] = 0;
  return;
}



void attempt_reload_item_in_hand(int hand)

{
  ITEM_IDS weapon;
  int iVar1;
  
  weapon = get_item_in_hand(hand);
  iVar1 = get_ammo_type_for_weapon(weapon);
  if ((iVar1 != 0) && ((&ptr_BONDdata->unknown + hand * 0xea)[0x226] == 0)) {
    (&ptr_BONDdata->unknown + hand * 0xea)[0x226] = 9;
  }
  return;
}



ITEM_IDS get_item_in_hand(int hand)

{
  return (ITEM_IDS)(&ptr_BONDdata->right_weapon)[hand * 0xea];
}



void draw_item_in_hand(int param_1,int param_2)

{
  (&ptr_BONDdata->right_weapon_current_animation)[param_1 * 0xea] = 0xe;
  (&ptr_BONDdata->right_weapon_next_weapon)[param_1 * 0xea] = param_2;
  return;
}



int return_ammo_in_hand(int hand)

{
  int iVar1;
  
  iVar1 = (&ptr_BONDdata->unknown + hand * 0xea)[0x21d];
  if (iVar1 < 0) {
    return (&ptr_BONDdata->unknown + hand * 0xea)[0x21c];
  }
  return iVar1;
}



void proc_7F05DA8C(int param_1,int param_2)

{
  place_item_in_hand_swap_and_make_visible(param_1,param_2);
  (&ptr_BONDdata->right_weapon_attack)[param_1 * 0xea] = param_2;
  return;
}



void proc_7F05DAE4(int param_1)

{
  if (-1 < (&ptr_BONDdata->unknown + param_1 * 0xea)[0x21d]) {
    place_item_in_hand_swap_and_make_visible
              (param_1,(&ptr_BONDdata->unknown + param_1 * 0xea)[0x21c]);
    (&ptr_BONDdata->right_weapon_attack)[param_1 * 0xea] = -1;
  }
  return;
}



void remove_hands_item(int param_1,int param_2)

{
  int weapon;
  int iVar2;
  ulonglong uVar1;
  int iVar3;
  
  weapon = (&ptr_BONDdata->right_weapon)[param_1 * 0xea];
  iVar2 = get_ammo_type_for_weapon(weapon);
  if ((&ptr_BONDdata->unknown + param_1 * 0xea)[0x21d] < 0) {
    place_item_in_hand_swap_and_make_visible(param_1,param_2);
    iVar3 = (&ptr_BONDdata->right_weapon_ammo_in_magazine)[param_1 * 0xea];
  }
  else {
    iVar3 = (&ptr_BONDdata->unknown + param_1 * 0xea)[0x227];
  }
  if (0 < iVar3) {
    (&ptr_BONDdata->unknown + iVar2)[0x44c] = (&ptr_BONDdata->unknown + iVar2)[0x44c] + iVar3;
  }
  if (weapon < 0x21) {
    (&ptr_BONDdata->previous_right_weapon)[param_1 * 0xea] = weapon;
  }
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    proc_7F09B368(param_1);
  }
  proc_7F05FB00(param_1);
  (&ptr_BONDdata->right_weapon)[param_1 * 0xea] = param_2;
  (&ptr_BONDdata->right_weapon_ammo_in_magazine)[param_1 * 0xea] = 0;
  (&ptr_BONDdata->field_A4C)[param_1 * 0xea] = 0;
  (&ptr_BONDdata->field_A50)[param_1 * 0xea] = 0;
  proc_7F08D8E0();
  return;
}



undefined get_hands_firing_status(int hand)

{
  return *(undefined *)(&ptr_BONDdata->right_weapon_firing_status + hand * 0xea);
}



undefined4 proc_7F05DCB8(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



float proc_7F05DCE8(longlong param_1)

{
  int item;
  undefined *puVar1;
  float fVar2;
  
  if (param_1 == 0) {
    item = return_ammo_in_hand(0);
    puVar1 = get_ptr_item_statistics(item);
    fVar2 = *(float *)(puVar1 + 4);
  }
  else {
    item = return_ammo_in_hand(1);
    puVar1 = get_ptr_item_statistics(item);
    fVar2 = -*(float *)(puVar1 + 4);
  }
  return fVar2;
}



char * proc_7F05DD38(void)

{
  int item;
  char *pcVar1;
  
  pcVar1 = (char *)return_ammo_in_hand(0);
  if ((pcVar1 != &UNK_00000011) &&
     (pcVar1 = (char *)return_ammo_in_hand(0), pcVar1 != "E           ")) {
    item = return_ammo_in_hand(0);
    pcVar1 = get_ptr_item_statistics(item);
  }
  return pcVar1;
}



void proc_7F05DDA4(float param_1)

{
  int iVar1;
  
  iVar1 = return_ammo_in_hand(0);
  if (iVar1 == 0x11) {
    ptr_BONDdata->sniper_zoom = ptr_BONDdata->sniper_zoom * (param_1 * flt_80053C24 + 1.00000000);
    if (60.00000000 < ptr_BONDdata->sniper_zoom) {
      ptr_BONDdata->sniper_zoom = 60.00000000;
    }
  }
  else {
    iVar1 = return_ammo_in_hand(0);
    if ((iVar1 == 0x28) &&
       (ptr_BONDdata->camera_zoom =
             ptr_BONDdata->camera_zoom * (param_1 * flt_80053C28 + 1.00000000),
       60.00000000 < ptr_BONDdata->camera_zoom)) {
      ptr_BONDdata->camera_zoom = 60.00000000;
    }
  }
  return;
}



void proc_7F05DE94(float param_1)

{
  int iVar1;
  
  iVar1 = return_ammo_in_hand(0);
  if (iVar1 == 0x11) {
    ptr_BONDdata->sniper_zoom = ptr_BONDdata->sniper_zoom / (param_1 * flt_80053C2C + 1.00000000);
    if (ptr_BONDdata->sniper_zoom < 7.00000000) {
      ptr_BONDdata->sniper_zoom = 7.00000000;
    }
  }
  else {
    iVar1 = return_ammo_in_hand(0);
    if ((iVar1 == 0x28) &&
       (ptr_BONDdata->camera_zoom =
             ptr_BONDdata->camera_zoom / (param_1 * flt_80053C30 + 1.00000000),
       ptr_BONDdata->camera_zoom < 7.00000000)) {
      ptr_BONDdata->camera_zoom = 7.00000000;
    }
  }
  return;
}



undefined * proc_7F05DF84(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return puVar1;
}



undefined * proc_7F05DFA8(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return puVar1;
}



undefined proc_7F05DFCC(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return puVar1[0x22];
}



ulonglong proc_7F05DFF0(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return (ulonglong)(byte)puVar1[0x25];
}



ulonglong proc_7F05E014(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return (ulonglong)*(ushort *)(puVar1 + 0x26);
}



ulonglong proc_7F05E038(int param_1)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(param_1);
  return (ulonglong)(byte)puVar1[0x24];
}



undefined8 check_if_have_ammo_for_item(int item)

{
  ulonglong uVar1;
  undefined8 uVar2;
  int iVar3;
  
  uVar1 = check_special_attributes(item,0x40000);
  if (uVar1 == 0) {
    uVar2 = 0;
  }
  else {
    iVar3 = get_ammo_type_for_weapon(item);
    if ((iVar3 == 0) || (iVar3 = get_ammo_count_for_weapon(item), 0 < iVar3)) {
      uVar2 = 1;
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



ulonglong check_special_attributes(int item,uint mask)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(item);
  return (ulonglong)((*(uint *)(puVar1 + 0x6c) & mask) != 0);
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F05E0E4(void)

{
  float fVar1;
  int iVar2;
  u32 uVar3;
  float *pfVar4;
  float in_a2_lo;
  float in_a3_lo;
  f32 fVar5;
  float fVar6;
  float fVar7;
  float in_f12;
  float in_f14;
  undefined auStackX0 [8];
  float fStackX8;
  float fStackX12;
  float fStack8;
  float fStack4;
  
  fVar7 = in_a2_lo;
  if (in_a2_lo < 0.00000000) {
    fVar7 = -in_a2_lo;
  }
  if (flt_80053C34 < in_f14) {
    ptr_BONDdata->field_FC0 = 1.00000000;
    fStackX8 = in_a2_lo;
    fStackX12 = in_a3_lo;
  }
  else {
    if (flt_80053C3C < in_f14) {
      fStackX8 = in_a2_lo;
      fStackX12 = in_a3_lo;
      fVar6 = cosf(((in_f14 - flt_80053C3C) * flt_80053C40) / flt_80053C44);
      ptr_BONDdata->field_FC0 = flt_80053C48 * (1.00000000 - fVar6) + flt_80053C4C;
    }
    else {
      ptr_BONDdata->field_FC0 = flt_80053C3C;
      fStackX8 = in_a2_lo;
      fStackX12 = in_a3_lo;
    }
  }
  fVar5 = get_BONDdata_field19C();
  fVar6 = ptr_BONDdata->field_FC0;
  if (fVar6 < (float)fVar5 * flt_80053C54) {
    fVar5 = get_BONDdata_field19C();
    ptr_BONDdata->field_FC0 = (float)fVar5 * flt_80053C58;
    fVar6 = ptr_BONDdata->field_FC0;
  }
  if (fVar6 < fVar7 * 0.50000000) {
    ptr_BONDdata->field_FC0 = fVar7 * 0.50000000;
  }
  fVar6 = flt_80053C5C;
  iVar2 = 0;
  if (0 < clock_timer) {
    do {
      iVar2 += 1;
      ptr_BONDdata->field_1080 = ptr_BONDdata->field_1080 * fVar6 + ptr_BONDdata->field_FC0;
    } while (iVar2 < clock_timer);
  }
  fVar1 = flt_80053C64;
  fVar6 = flt_80053C60;
  iVar2 = 0;
  ptr_BONDdata->field_FC0 = ptr_BONDdata->field_1080 * flt_80053C64;
  fVar7 = flt_80053C68 * fVar7;
  if (fVar7 <= in_f12) {
    fVar7 = in_f12;
  }
  if (0 < clock_timer) {
    do {
      iVar2 += 1;
      ptr_BONDdata->field_107C = ptr_BONDdata->field_107C * fVar6 + fVar7;
    } while (iVar2 < clock_timer);
  }
  fVar7 = ptr_BONDdata->field_107C * fVar1 * global_timer_delta;
  fStack8 = (float)ptr_BONDdata->field_A0C + fVar7;
  while (1.00000000 <= fStack8) {
    unknown_takes_playerhand(0);
    fStack8 = fStack8 - 1.00000000;
    ptr_BONDdata->field_1078 = ptr_BONDdata->field_1078 + 1;
  }
  ptr_BONDdata->field_1074 = ptr_BONDdata->field_1074 + global_timer_delta;
  if (60.00000000 < ptr_BONDdata->field_1074) {
    ptr_BONDdata->field_1074 = 0.00000000;
    uVar3 = get_random_value();
    fVar6 = (float)uVar3;
    if ((int)uVar3 < 0) {
      fVar6 = fVar6 + 4294967296.00000000;
    }
    ptr_BONDdata->field_1070 = ((fVar6 * 0.00000000 - 0.50000000) * flt_80053C6C) / 60.00000000;
    fVar6 = ptr_BONDdata->field_1070;
  }
  else {
    fVar6 = ptr_BONDdata->field_1070;
  }
  if (0.00000000 < fVar6 + fVar7) {
    ptr_BONDdata->field_106C = ptr_BONDdata->field_106C + fVar6;
    fStack4 = ptr_BONDdata->field_106C;
  }
  else {
    fStack4 = ptr_BONDdata->field_106C;
  }
  if (0.50000000 < fStack4) {
    ptr_BONDdata->field_106C = 0.50000000;
    fStack4 = ptr_BONDdata->field_106C;
  }
  else {
    if (fStack4 < -0.50000000) {
      ptr_BONDdata->field_106C = -0.50000000;
      fStack4 = ptr_BONDdata->field_106C;
    }
    else {
      if (flt_80053C70 <= fStack4) {
        iVar2 = ptr_BONDdata->field_1078;
        goto LAB_7f05e518;
      }
      if (fStack4 <= flt_80053C74) {
        iVar2 = ptr_BONDdata->field_1078;
        goto LAB_7f05e518;
      }
      if (0.00000000 < fStack4) {
        ptr_BONDdata->field_106C = flt_80053C74;
        fStack4 = ptr_BONDdata->field_106C;
      }
      else {
        ptr_BONDdata->field_106C = flt_80053C70;
        fStack4 = ptr_BONDdata->field_106C;
      }
    }
  }
  iVar2 = ptr_BONDdata->field_1078;
LAB_7f05e518:
  fStack4 = fStack8 + (float)iVar2 + fStack4;
  while (1.00000000 <= fStack4) {
    unknown_takes_playerhand(1);
    fStack4 = fStack4 - 1.00000000;
    ptr_BONDdata->field_1078 = ptr_BONDdata->field_1078 + -1;
  }
  pfVar4 = &fStack8;
  iVar2 = 0;
  do {
    fVar7 = *pfVar4;
    pfVar4 = pfVar4 + 1;
    *(float *)((int)&ptr_BONDdata->field_A0C + iVar2) = fVar7;
    *(float *)((int)&ptr_BONDdata->field_A1C + iVar2) = fStackX12 * -1.75000000;
    *(float *)((int)&ptr_BONDdata->field_A20 + iVar2) = fStackX8 * -2.00000000;
    iVar2 = iVar2 + 0x3a8;
  } while (pfVar4 != (float *)register0x000000ec);
  return;
}



void proc_7F05E5F0(float param_1)

{
  float fVar1;
  
  fVar1 = cosf(param_1);
  *(float *)&ptr_BONDdata->field_A30 = (1.00000000 - fVar1) * 5.00000000;
  fVar1 = cosf(param_1);
  *(float *)&ptr_BONDdata->field_DD8 = (1.00000000 - fVar1) * 5.00000000;
  return;
}



// WARNING: Instruction at (ram,0x7f05e690) overlaps instruction at (ram,0x7f05e68c)
// 

ITEM_IDS get_value_if_watch_is_on_hand_or_not(int hand)

{
  ITEM_IDS IVar1;
  
  IVar1 = get_item_in_hand(hand);
  if (IVar1 != ITEM_TRIGGER) {
    IVar1 = get_item_in_hand(hand);
  }
  return IVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int * proc_7F05E6B4(void)

{
  int *piVar1;
  int hand;
  longlong in_a1;
  float in_f0;
  float fVar2;
  
  if (in_a1 == 0) {
    piVar1 = &ptr_BONDdata->unknown + hand * 0xea;
    fVar2 = (float)piVar1[0x2a1];
    if (0.00000000 < fVar2) {
      *(float *)(piVar1 + 0x2a1) = fVar2 - flt_80053C84 * global_timer_delta;
      piVar1 = &ptr_BONDdata->unknown + hand * 0xea;
      fVar2 = (float)piVar1[0x2a1];
    }
    if (fVar2 < 0.00000000) {
      piVar1[0x2a1] = 0;
    }
  }
  else {
    get_value_if_watch_is_on_hand_or_not(hand);
    fVar2 = (float)(&ptr_BONDdata->unknown + hand * 0xea)[0x2a1];
    if (fVar2 < in_f0) {
      *(float *)(&ptr_BONDdata->unknown + hand * 0xea + 0x2a1) =
           fVar2 + flt_80053C80 * global_timer_delta;
    }
    piVar1 = (int *)get_value_if_watch_is_on_hand_or_not(hand);
    if (in_f0 < (float)(&ptr_BONDdata->field_A84)[hand * 0xea]) {
      piVar1 = (int *)get_value_if_watch_is_on_hand_or_not(hand);
      *(float *)(&ptr_BONDdata->field_A84 + hand * 0xea) = in_f0;
    }
  }
  return piVar1;
}



void proc_7F05E808(int param_1)

{
  (&ptr_BONDdata->field_A8C)[param_1 * 0xea] = 1;
  return;
}



void proc_7F05E83C(int param_1)

{
  int item;
  undefined *puVar1;
  int *piVar2;
  float fVar3;
  float fVar4;
  
  item = return_ammo_in_hand(param_1);
  puVar1 = get_ptr_item_statistics(item);
  piVar2 = &ptr_BONDdata->unknown + param_1 * 0xea;
  fVar4 = *(float *)(puVar1 + 0x50);
  if (piVar2[0x2a3] == 0) {
    if (0 < piVar2[0x227]) {
      fVar3 = (float)piVar2[0x2a2];
      if (0.00000000 < fVar3) {
        *(float *)(piVar2 + 0x2a2) = fVar3 - fVar4 * flt_80053C88 * global_timer_delta;
        piVar2 = &ptr_BONDdata->unknown + param_1 * 0xea;
        fVar3 = (float)piVar2[0x2a2];
      }
      if (fVar3 < 0.00000000) {
        piVar2[0x2a2] = 0;
      }
    }
  }
  else {
    fVar3 = (float)piVar2[0x2a2];
    if (fVar3 < fVar4) {
      *(float *)(piVar2 + 0x2a2) = fVar3 + fVar4 * 0.25000000 * global_timer_delta;
      piVar2 = &ptr_BONDdata->unknown + param_1 * 0xea;
      fVar3 = (float)piVar2[0x2a2];
    }
    if (fVar4 <= fVar3) {
      *(float *)(piVar2 + 0x2a2) = fVar4;
      (&ptr_BONDdata->field_A8C)[param_1 * 0xea] = 0;
    }
  }
  return;
}



void proc_7F05E978(int param_1,undefined4 param_2)

{
  undefined4 *puVar1;
  int iVar2;
  ushort *partdesc;
  int iVar3;
  short sVar4;
  
  iVar2 = *(int *)(param_1 + 8);
  iVar3 = *(int *)(iVar2 + 8);
  if (*(ushort **)(iVar3 + 0x20) == NULL) {
    partdesc = *(ushort **)(iVar3 + 0x24);
  }
  else {
    puVar1 = (undefined4 *)
             extract_id_from_object_structure_microcode(param_1,*(ushort **)(iVar3 + 0x20));
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    iVar3 = *(int *)(iVar2 + 8);
    partdesc = *(ushort **)(iVar3 + 0x24);
  }
  if (partdesc == NULL) {
    partdesc = *(ushort **)(iVar3 + 0x28);
  }
  else {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    iVar3 = *(int *)(iVar2 + 8);
    partdesc = *(ushort **)(iVar3 + 0x28);
  }
  if (partdesc == NULL) {
    partdesc = *(ushort **)(iVar3 + 0x2c);
  }
  else {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    iVar3 = *(int *)(iVar2 + 8);
    partdesc = *(ushort **)(iVar3 + 0x2c);
  }
  if (partdesc == NULL) {
    partdesc = *(ushort **)(iVar3 + 0x30);
  }
  else {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    iVar3 = *(int *)(iVar2 + 8);
    partdesc = *(ushort **)(iVar3 + 0x30);
  }
  if (partdesc == NULL) {
    partdesc = *(ushort **)(iVar3 + 0x34);
  }
  else {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    partdesc = *(ushort **)(*(int *)(iVar2 + 8) + 0x34);
  }
  if (partdesc == NULL) {
    sVar4 = *(short *)(iVar2 + 0xc);
  }
  else {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
    iVar2 = *(int *)(param_1 + 8);
    sVar4 = *(short *)(iVar2 + 0xc);
  }
  if ((0x23 < sVar4) && (partdesc = *(ushort **)(*(int *)(iVar2 + 8) + 0x8c), partdesc != NULL)) {
    puVar1 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
    *puVar1 = param_2;
  }
  return;
}



void proc_7F05EA94(int param_1,undefined4 param_2)

{
  int iVar1;
  undefined4 *puVar2;
  ushort *partdesc;
  
  if (0xf < *(short *)(*(int *)(param_1 + 8) + 0xc)) {
    iVar1 = *(int *)(*(int *)(param_1 + 8) + 8);
    partdesc = *(ushort **)(iVar1 + 0x38);
    if (partdesc == NULL) {
      partdesc = *(ushort **)(iVar1 + 0x3c);
    }
    else {
      puVar2 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
      *puVar2 = param_2;
      partdesc = *(ushort **)(*(int *)(*(int *)(param_1 + 8) + 8) + 0x3c);
    }
    if (partdesc != NULL) {
      puVar2 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
      *puVar2 = param_2;
    }
  }
  return;
}



void proc_7F05EB0C(int param_1,undefined4 *param_2,undefined4 param_3,float *param_4,
                  undefined4 *param_5,undefined4 *param_6,undefined4 param_7)

{
  object_standard *poVar1;
  undefined8 extraout_a0;
  
  poVar1 = *(object_standard **)(param_1 + 0x10);
  if (poVar1 != NULL) {
    set_current_objposdata_plus_0x28(poVar1);
    set_stateflag_0x04_for_posdata((int)poVar1);
    matrix_multiply_A1_by_F12(*(float *)(*(int *)(param_1 + 0x14) + 0x14),extraout_a0,param_4);
    proc_7F040754(param_1,param_2,param_4,param_3);
    proc_7F056CA0(param_1);
    proc_7F040484(param_1);
    proc_7F03FDA8((int)poVar1);
    if ((*(uint *)(param_1 + 100) & 0x80) != 0) {
      **(uint **)(param_1 + 0x6c) = **(uint **)(param_1 + 0x6c) | 0x41;
      *(undefined4 *)(*(int *)(param_1 + 0x6c) + 0x88) = param_7;
      proc_7F03FE14((int)poVar1);
      proc_7F058020(param_6,(undefined4 *)(*(int *)(param_1 + 0x6c) + 0x20));
      *(undefined4 *)(*(int *)(param_1 + 0x6c) + 4) = *param_5;
      *(undefined4 *)(*(int *)(param_1 + 0x6c) + 8) = param_5[1];
      *(undefined4 *)(*(int *)(param_1 + 0x6c) + 0xc) = param_5[2];
      *(int *)(*(int *)(param_1 + 0x6c) + 0xe4) = param_1;
      *(undefined4 *)(*(int *)(param_1 + 0x6c) + 0xe8) = dword_80048380;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F05EC1C(void)

{
  int iVar3;
  longlong lVar1;
  ulonglong uVar2;
  float *pfVar4;
  int in_a0_lo;
  float *in_a1_lo;
  float *in_a2_lo;
  undefined4 *in_a3_lo;
  f32 fVar5;
  float fVar6;
  undefined4 *in_stack_00000010;
  int iStack136;
  uint auStack132 [21];
  byte bStack48;
  undefined uStack47;
  int iStack40;
  float fStack36;
  float fStack32;
  undefined4 uStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  
  if (*(int *)(in_a0_lo + 0x10) != 0) {
    iVar3 = get_curplayer_positiondata();
    fVar5 = proc_7F089778((int)ptr_BONDdata);
    iStack40 = 0;
    fVar6 = *(float *)(iVar3 + 0xc);
    fStack36 = in_a1_lo[1];
    fStack32 = fVar6;
    if (fVar6 <= fStack36) {
      fStack32 = fStack36;
      fStack36 = fVar6;
    }
    fStack36 = fStack36 - (float)fVar5;
    fStack32 = fStack32 - (float)fVar5;
    uStack20 = *(undefined4 *)(iVar3 + 0x14);
    proc_7F08A03C(iVar3,0);
    lVar1 = proc_7F0B0E24();
    if (lVar1 == 0) {
      uStack20 = *(undefined4 *)(iVar3 + 0x14);
      fStack16 = *(float *)(iVar3 + 8);
      fStack12 = *(float *)(iVar3 + 0xc);
      fStack8 = *(float *)(iVar3 + 0x10);
      iStack40 = 1;
    }
    else {
      fStack16 = *in_a1_lo;
      fStack12 = in_a1_lo[1];
      fStack8 = in_a1_lo[2];
    }
    proc_7F08A03C(iVar3,1);
    proc_7F05EB0C(in_a0_lo,&fStack16,uStack20,in_a2_lo,in_a3_lo,in_stack_00000010,iVar3);
    if ((*(uint *)(in_a0_lo + 100) & 0x80) != 0) {
      if (iStack40 != 0) {
        **(uint **)(in_a0_lo + 0x6c) = **(uint **)(in_a0_lo + 0x6c) | 0x100;
        *(float *)(*(int *)(in_a0_lo + 0x6c) + 0xd4) = *in_a1_lo;
        *(float *)(*(int *)(in_a0_lo + 0x6c) + 0xd8) = in_a1_lo[1];
        *(float *)(*(int *)(in_a0_lo + 0x6c) + 0xdc) = in_a1_lo[2];
      }
      uVar2 = get_cur_players_room();
      bStack48 = (byte)uVar2;
      uStack47 = 0xff;
      pfVar4 = (float *)get_BONDdata_position3();
      proc_7F0B4AB4(pfVar4,&fStack16,&bStack48,*(int *)(in_a0_lo + 0x6c) + 0xcc,auStack132,
                    &iStack136,0x14);
    }
  }
  return;
}



void proc_7F05EE24(int param_1)

{
  uint uVar1;
  int iVar2;
  ITEM_IDS iteminstance;
  float *pfVar3;
  int *piVar4;
  undefined4 *puVar5;
  u32 uVar6;
  int **ppiVar7;
  float afStack256 [12];
  undefined4 uStack208;
  undefined4 uStack204;
  undefined4 uStack200;
  float *pfStack192;
  float fStack184;
  float fStack180;
  float fStack176;
  f32 afStack160 [16];
  int iStack96;
  int iStack92;
  int iStack88;
  float fStack80;
  float fStack76;
  float fStack72;
  float afStack68 [17];
  
  iVar2 = get_curplayer_positiondata();
  pfStack192 = (float *)proc_7F08A02C();
  iteminstance = get_item_in_hand(param_1);
  proc_7F057C14(&fStack80,afStack68);
  proc_7F0681CC();
  pfVar3 = (float *)proc_7F078444();
  proc_7F0583D8(pfVar3,&fStack184);
  fStack80 = fStack184 * flt_80053C8C;
  fStack72 = fStack176 * flt_80053C8C;
  fStack76 = fStack180 * flt_80053C8C + 5.00000000;
  if (0 < clock_timer) {
    fStack80 = fStack80 + (*(float *)(iVar2 + 8) - *pfStack192) / global_timer_delta;
    fStack76 = fStack76 + (*(float *)(iVar2 + 0xc) - pfStack192[1]) / global_timer_delta;
    fStack72 = fStack72 + (*(float *)(iVar2 + 0x10) - pfStack192[2]) / global_timer_delta;
  }
  piVar4 = &ptr_BONDdata->unknown + param_1 * 0xea;
  iStack96 = piVar4[0x2c2];
  iStack92 = piVar4[0x2c3];
  iStack88 = piVar4[0x2c4];
  proc_7F057FD0(afStack160);
  proc_7F058020(&ptr_BONDdata->field_AD8 + param_1 * 0xea,afStack256);
  uStack208 = 0;
  uStack204 = 0;
  uStack200 = 0;
  proc_7F058068(afStack256,(float *)afStack160);
  puVar5 = create_new_item_instance_of_model(0xc4,iteminstance);
  if (puVar5 != NULL) {
    *(short *)((int)puVar5 + 0x82) = 0xf0 - (short)ptr_BONDdata->field_105C;
    if (*(short *)((int)puVar5 + 0x82) < 0) {
      *(undefined2 *)((int)puVar5 + 0x82) = 0;
      uVar1 = puVar5[0x19];
    }
    else {
      uVar1 = puVar5[0x19];
    }
    puVar5[0x19] = uVar1 & 0xfff9ffff;
    uVar6 = get_cur_playernum();
    puVar5[0x19] = puVar5[0x19] | uVar6 << 0x11;
    proc_7F05EC1C();
    if ((puVar5[0x19] & 0x80) != 0) {
      *(uint *)puVar5[0x1b] = *(uint *)puVar5[0x1b] | 2;
      *(float *)(puVar5[0x1b] + 0x8c) = flt_80053C90;
      *(float *)(puVar5[0x1b] + 0x94) = flt_80053C94;
      *(undefined4 *)(puVar5[0x1b] + 0xbc) = 0x3c;
      ppiVar7 = play_sfx_a1(ptr_sfx_buf,4,NULL);
      if (ppiVar7 != NULL) {
        proc_7F053A10((int)ppiVar7,(float *)(puVar5 + 0x16));
      }
    }
  }
  return;
}



void proc_7F05F09C(int param_1)

{
  int iVar1;
  float *pfVar2;
  int *piVar3;
  u32 uVar4;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  int iVar5;
  undefined4 unaff_retaddr;
  float a;
  float x;
  float fVar6;
  undefined8 in_stack_fffffee4;
  undefined8 in_stack_fffffef0;
  undefined4 in_stack_fffffefc;
  float *pfVar7;
  undefined in_stack_ffffff08 [24];
  undefined4 uStack200;
  undefined4 uStack196;
  undefined4 uStack192;
  float fStack184;
  float fStack180;
  float fStack176;
  float afStack160 [6];
  undefined4 uStack136;
  int iStack96;
  int iStack92;
  int iStack88;
  float fStack80;
  float fStack76;
  float fStack72;
  float afStack68 [16];
  undefined4 *puStack4;
  
  iVar1 = get_curplayer_positiondata();
  pfVar7 = (float *)proc_7F08A02C();
  proc_7F057C14(&fStack80,afStack68);
  proc_7F0681CC();
  pfVar2 = (float *)proc_7F078444();
  proc_7F0583D8(pfVar2,&fStack184);
  fStack80 = fStack184 * 25.00000000;
  fStack72 = fStack176 * 25.00000000;
  fStack76 = fStack180 * 25.00000000 + 5.00000000;
  if (0 < clock_timer) {
    fStack80 = fStack80 + (*(float *)(iVar1 + 8) - *pfVar7) / global_timer_delta;
    fStack76 = fStack76 + (*(float *)(iVar1 + 0xc) - pfVar7[1]) / global_timer_delta;
    fStack72 = fStack72 + (*(float *)(iVar1 + 0x10) - pfVar7[2]) / global_timer_delta;
  }
  iVar5 = param_1 * 0x3a8;
  piVar3 = &ptr_BONDdata->unknown + param_1 * 0xea;
  iStack96 = piVar3[0x2c2];
  iStack92 = piVar3[0x2c3];
  iStack88 = piVar3[0x2c4];
  proc_7F058688(flt_80053C98,extraout_a0,afStack160);
  proc_7F058570(flt_80053C9C,extraout_a0_00,(undefined4 *)&stack0xffffff08);
  proc_7F058068((float *)&stack0xffffff08,afStack160);
  proc_7F058020((undefined4 *)((int)&ptr_BONDdata->field_AD8 + iVar5),(undefined4 *)&stack0xffffff08
               );
  uStack200 = 0;
  uStack196 = 0;
  uStack192 = 0;
  proc_7F058068((float *)&stack0xffffff08,afStack160);
  uVar4 = get_random_value();
  fVar6 = (float)uVar4;
  if ((int)uVar4 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  guRotateF((float  [4] [4])
            CONCAT4024(CONCAT364(CONCAT324(CONCAT284(CONCAT244(CONCAT168(CONCAT124(CONCAT48(
                                                  uStack136,in_stack_fffffee4),unaff_retaddr),
                                                  in_stack_fffffef0),iVar5),in_stack_fffffefc),
                                           pfVar7),iVar1),in_stack_ffffff08),a,x,(float)afStack68,
            360.00000000 / (fVar6 * 0.00000000 + flt_80053CA0));
  puStack4 = create_new_item_instance_of_model(0xba,3);
  if (puStack4 != NULL) {
    puStack4[0x19] = puStack4[0x19] & 0xfff9ffff;
    uVar4 = get_cur_playernum();
    puStack4[0x19] = puStack4[0x19] | uVar4 << 0x11;
    proc_7F05EC1C();
    if ((puStack4[0x19] & 0x80) != 0) {
      *(uint *)puStack4[0x1b] = *(uint *)puStack4[0x1b] | 2;
      *(float *)(puStack4[0x1b] + 0x8c) = flt_80053CA4;
      *(undefined4 *)(puStack4[0x1b] + 0xbc) = 0x3c;
      puStack4[0x19] = puStack4[0x19] | 0x20;
    }
    proc_7F043650((int)puStack4);
  }
  return;
}



void generate_player_thrown_object(int param_1)

{
  ITEM_IDS iteminstance;
  float *pfVar2;
  int *piVar3;
  undefined4 *puVar4;
  ulonglong uVar1;
  u32 uVar5;
  int **ppiVar6;
  int model;
  float afStack256 [12];
  undefined4 uStack208;
  undefined4 uStack204;
  undefined4 uStack200;
  float *pfStack192;
  int iStack188;
  float fStack184;
  float fStack180;
  float fStack176;
  f32 afStack160 [16];
  int iStack96;
  int iStack92;
  int iStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float afStack68 [17];
  
  puVar4 = NULL;
  fStack84 = flt_80053CA8;
  iStack188 = get_curplayer_positiondata();
  pfStack192 = (float *)proc_7F08A02C();
  iteminstance = get_item_in_hand(param_1);
  if (iteminstance == ITEM_GOLDENEYEKEY) {
    fStack84 = flt_80053CAC;
  }
  proc_7F057C14(&fStack80,afStack68);
  proc_7F0681CC();
  pfVar2 = (float *)proc_7F078444();
  proc_7F0583D8(pfVar2,&fStack184);
  fStack80 = fStack184 * fStack84;
  fStack72 = fStack176 * fStack84;
  fStack76 = fStack180 * fStack84 + 5.00000000;
  if (0 < clock_timer) {
    fStack80 = fStack80 + (*(float *)(iStack188 + 8) - *pfStack192) / global_timer_delta;
    fStack76 = fStack76 + (*(float *)(iStack188 + 0xc) - pfStack192[1]) / global_timer_delta;
    fStack72 = fStack72 + (*(float *)(iStack188 + 0x10) - pfStack192[2]) / global_timer_delta;
  }
  piVar3 = &ptr_BONDdata->unknown + param_1 * 0xea;
  iStack96 = piVar3[0x2c2];
  iStack92 = piVar3[0x2c3];
  iStack88 = piVar3[0x2c4];
  proc_7F057FD0(afStack160);
  proc_7F058020(&ptr_BONDdata->field_AD8 + param_1 * 0xea,afStack256);
  uStack208 = 0;
  uStack204 = 0;
  uStack200 = 0;
  proc_7F058068(afStack256,(float *)afStack160);
  if (iteminstance == ITEM_GOLDENEYEKEY) {
    puVar4 = (undefined4 *)proc_7F08C570('=');
    proc_7F08C61C(0x3d);
    if (puVar4 != NULL) {
      proc_7F04C044(puVar4[4]);
    }
    proc_7F05D690();
  }
  if (puVar4 == NULL) {
    model = 199;
    if (true) {
      switch(iteminstance) {
      case ITEM_TIMEDMINE:
        model = 0xc9;
        break;
      case ITEM_PROXIMITYMINE:
        model = 200;
        break;
      case ITEM_BOMBCASE:
        model = 0xe2;
        break;
      case ITEM_PLASTIQUE:
        model = 0x111;
        break;
      case ITEM_BUG:
        model = 0xf5;
        break;
      case ITEM_MICROCAMERA:
        model = 0xf6;
        break;
      case ITEM_GOLDENEYEKEY:
        model = 0xf8;
      }
    }
    puVar4 = create_new_item_instance_of_model(model,iteminstance);
  }
  if (puVar4 == NULL) {
    return;
  }
  if (false) {
switchD_7f05f5c8_caseD_1e:
    *(undefined2 *)((int)puVar4 + 0x82) = 0xf0;
  }
  else {
    switch(iteminstance) {
    case ITEM_TIMEDMINE:
      uVar1 = get_num_players();
      if (uVar1 == 1) {
        *(undefined2 *)((int)puVar4 + 0x82) = 300;
      }
      else {
        *(undefined2 *)((int)puVar4 + 0x82) = 0xb4;
      }
      break;
    case ITEM_PROXIMITYMINE:
      uVar1 = get_num_players();
      if (uVar1 == 1) {
        *(undefined2 *)((int)puVar4 + 0x82) = 300;
      }
      else {
        *(undefined2 *)((int)puVar4 + 0x82) = 0xb4;
      }
      break;
    case ITEM_REMOTEMINE:
      uVar1 = get_num_players();
      if (uVar1 == 1) {
        *(undefined2 *)((int)puVar4 + 0x82) = 300;
      }
      else {
        *(undefined2 *)((int)puVar4 + 0x82) = 0xb4;
      }
      break;
    default:
      goto switchD_7f05f5c8_caseD_1e;
    case ITEM_BOMBCASE:
      uVar1 = get_num_players();
      if (uVar1 == 1) {
        *(undefined2 *)((int)puVar4 + 0x82) = 300;
      }
      else {
        *(undefined2 *)((int)puVar4 + 0x82) = 0xb4;
      }
      break;
    case ITEM_PLASTIQUE:
    case ITEM_BUG:
    case ITEM_MICROCAMERA:
    case ITEM_GOLDENEYEKEY:
      *(undefined2 *)((int)puVar4 + 0x82) = 1;
    }
  }
  puVar4[0x19] = puVar4[0x19] & 0xfff9ffff;
  uVar5 = get_cur_playernum();
  puVar4[0x19] = puVar4[0x19] | uVar5 << 0x11;
  proc_7F05EC1C();
  if ((puVar4[0x19] & 0x80) != 0) {
    *(uint *)puVar4[0x1b] = *(uint *)puVar4[0x1b] | 2;
    *(float *)(puVar4[0x1b] + 0x8c) = flt_80053DC8;
    *(undefined4 *)(puVar4[0x1b] + 0xbc) = 0x3c;
    ppiVar6 = play_sfx_a1(ptr_sfx_buf,4,NULL);
    if (ppiVar6 != NULL) {
      proc_7F053A10((int)ppiVar6,(float *)(puVar4 + 0x16));
    }
  }
  return;
}



void proc_7F05F73C(int param_1)

{
  int iVar1;
  float *pfVar2;
  float *pfVar3;
  u32 uVar4;
  float local_b0;
  float local_ac;
  float local_a8;
  undefined4 auStack152 [12];
  undefined4 local_68;
  undefined4 local_64;
  undefined4 local_60;
  float local_54;
  float local_50;
  float local_4c;
  f32 afStack72 [16];
  int *local_8;
  undefined4 *local_4;
  
  local_8 = &ptr_BONDdata->right_weapon + param_1 * 0xea;
  iVar1 = get_curplayer_positiondata();
  pfVar2 = (float *)proc_7F08A02C();
  proc_7F057FD0(afStack72);
  proc_7F0681CC();
  pfVar3 = (float *)proc_7F078444();
  proc_7F0583D8(pfVar3,&local_b0);
  local_54 = local_b0 * flt_80053DCC;
  local_50 = local_ac * flt_80053DCC;
  local_4c = local_a8 * flt_80053DCC;
  if (0 < clock_timer) {
    local_54 = local_54 + (*(float *)(iVar1 + 8) - *pfVar2) / global_timer_delta;
    local_50 = local_50 + (*(float *)(iVar1 + 0xc) - pfVar2[1]) / global_timer_delta;
    local_4c = local_4c + (*(float *)(iVar1 + 0x10) - pfVar2[2]) / global_timer_delta;
  }
  proc_7F058020(&ptr_BONDdata->field_AD8 + param_1 * 0xea,auStack152);
  local_68 = 0;
  local_64 = 0;
  local_60 = 0;
  local_4 = create_new_item_instance_of_model(0xcb,0x57);
  if (local_4 != NULL) {
    *(undefined2 *)((int)local_4 + 0x82) = 0x4b0;
    local_4[0x19] = local_4[0x19] & 0xfff9ffff;
    uVar4 = get_cur_playernum();
    local_4[0x19] = local_4[0x19] | uVar4 << 0x11;
    proc_7F05EC1C();
    if ((local_4[0x19] & 0x80) != 0) {
      *(float *)(local_4[0x1b] + 0x8c) = flt_80053DD0;
      *(float *)(local_4[0x1b] + 0x94) = flt_80053DD4;
      *(undefined4 *)(local_4[0x1b] + 0xbc) = 0x3c;
    }
  }
  return;
}



void proc_7F05F928(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  float *pfVar6;
  undefined8 extraout_a0;
  float afStack76 [12];
  undefined4 local_1c;
  undefined4 local_18;
  undefined4 local_14;
  int *local_4;
  
  iVar1 = (&ptr_BONDdata->unknown + param_1 * 0xea)[0x2a4];
  local_4 = &ptr_BONDdata->unknown + param_1 * 0xea + 0x21c;
  if ((iVar1 != 0) && (iVar2 = *(int *)(iVar1 + 0x10), iVar2 != 0)) {
    iVar4 = get_curplayer_positiondata();
    iVar3 = *(int *)(iVar1 + 0x14);
    iVar5 = iVar4;
    proc_7F058020(local_4 + 0x9a,afStack76);
    local_1c = 0;
    local_18 = 0;
    local_14 = 0;
    matrix_multiply_A1_by_F12(*(float *)(*(int *)(iVar1 + 0x14) + 0x14),extraout_a0,afStack76);
    proc_7F040754(iVar1,local_4 + 0xba,afStack76,*(undefined4 *)(iVar4 + 0x14));
    proc_7F040484(iVar1);
    proc_7F0BD714((int)*(short *)(*(int *)(iVar3 + 8) + 0xe) << 6);
    *(int *)(iVar3 + 0xc) = iVar5;
    proc_7F058020((undefined4 *)(iVar1 + 0x18),afStack76);
    proc_7F058998((undefined4 *)(iVar1 + 0x58),(int)afStack76);
    pfVar6 = (float *)proc_7F0783C4();
    proc_7F05818C(pfVar6,afStack76,*(int *)(iVar3 + 0xc));
    proc_7F06EEA4((longlong)iVar3,**(int **)(iVar3 + 8));
    *(byte *)(iVar2 + 1) = *(byte *)(iVar2 + 1) | 2;
    *(float *)(iVar2 + 0x18) = -*(float *)(*(int *)(iVar3 + 0xc) + 0x38);
  }
  return;
}



void proc_7F05FA7C(int param_1)

{
  undefined4 *puVar1;
  int *piVar2;
  
  piVar2 = &ptr_BONDdata->unknown + param_1 * 0xea;
  if (((piVar2[0x2a4] == 0) && (0 < piVar2[0x227])) &&
     (puVar1 = create_new_item_instance_of_model(0xca,0x56), puVar1 != NULL)) {
    *(undefined4 **)(piVar2 + 0x2a4) = puVar1;
    piVar2[0x2a5] = 0;
    *(undefined2 *)((int)puVar1 + 0x82) = 1;
  }
  return;
}



void proc_7F05FB00(int param_1)

{
  int iVar1;
  int *piVar2;
  
  piVar2 = &ptr_BONDdata->unknown;
  iVar1 = (piVar2 + param_1 * 0xea)[0x2a4];
  if (iVar1 != 0) {
    proc_7F041024(iVar1,1);
    (piVar2 + param_1 * 0xea)[0x2a4] = 0;
  }
  return;
}



int ** proc_7F05FB64(int param_1)

{
  int iVar1;
  float *pfVar2;
  u32 uVar3;
  int **ppiVar4;
  float local_d4;
  int local_d0;
  int local_cc;
  ITEM_IDS local_c8;
  float *local_c4;
  int local_c0;
  float local_bc;
  float local_b8;
  float local_b4;
  undefined4 auStack176 [3];
  undefined4 auStack164 [12];
  undefined4 local_74;
  undefined4 local_70;
  undefined4 local_6c;
  float local_64;
  float local_60;
  float local_5c;
  float local_54;
  float local_50;
  float local_4c;
  f32 afStack72 [16];
  int *local_8;
  int **local_4;
  
  local_8 = &ptr_BONDdata->right_weapon + param_1 * 0xea;
  local_c0 = get_curplayer_positiondata();
  local_c4 = (float *)proc_7F08A02C();
  local_c8 = get_item_in_hand(param_1);
  proc_7F057FD0(afStack72);
  if (local_c8 != ITEM_TANKSHELLS) {
    proc_7F0681CC();
    pfVar2 = (float *)proc_7F078444();
    proc_7F0583D8(pfVar2,&local_bc);
    local_d4 = (float)local_8[0xba];
    local_d0 = local_8[0xbb];
    local_64 = local_bc * flt_80053DDC;
    local_cc = local_8[0xbc];
    local_60 = local_b8 * flt_80053DDC;
    local_5c = local_b4 * flt_80053DDC;
    local_54 = local_64 * global_timer_delta;
    local_50 = local_60 * global_timer_delta;
    local_4c = local_5c * global_timer_delta;
    if (0 < clock_timer) {
      local_54 = local_54 + (*(float *)(local_c0 + 8) - *local_c4) / global_timer_delta;
      local_50 = local_50 + (*(float *)(local_c0 + 0xc) - local_c4[1]) / global_timer_delta;
      local_4c = local_4c + (*(float *)(local_c0 + 0x10) - local_c4[2]) / global_timer_delta;
    }
    goto LAB_7f05fe34;
  }
  iVar1 = get_ptr_for_players_tank();
  if ((iVar1 == 0) || ((*(byte *)(iVar1 + 1) & 2) == 0)) {
    proc_7F068190(auStack176,&local_bc);
    pfVar2 = (float *)proc_7F078444();
    proc_7F0583D8(pfVar2,&local_bc);
  }
  else {
    proc_7F07CEB0(&local_bc);
  }
  local_54 = local_bc * flt_80053DD8;
  local_50 = local_b8 * flt_80053DD8;
  local_4c = local_b4 * flt_80053DD8;
  if (0 < clock_timer) {
    local_54 = local_54 + (*(float *)(local_c0 + 8) - *local_c4) / global_timer_delta;
    local_50 = local_50 + (*(float *)(local_c0 + 0xc) - local_c4[1]) / global_timer_delta;
    local_4c = local_4c + (*(float *)(local_c0 + 0x10) - local_c4[2]) / global_timer_delta;
  }
  if (iVar1 == 0) {
    local_d4 = *(float *)(local_c0 + 8);
LAB_7f05fd2c:
    local_d0 = *(int *)(local_c0 + 0xc);
    local_cc = *(int *)(local_c0 + 0x10);
  }
  else {
    if ((*(byte *)(iVar1 + 1) & 2) == 0) {
      local_d4 = *(float *)(local_c0 + 8);
      goto LAB_7f05fd2c;
    }
    iVar1 = *(int *)(iVar1 + 4);
    local_d4 = *(float *)(*(int *)(*(int *)(iVar1 + 0x14) + 0xc) + 0x130);
    local_d0 = *(int *)(*(int *)(*(int *)(iVar1 + 0x14) + 0xc) + 0x134);
    local_cc = *(int *)(*(int *)(*(int *)(iVar1 + 0x14) + 0xc) + 0x138);
    pfVar2 = (float *)proc_7F078444();
    proc_7F058474(pfVar2,&local_d4);
  }
  proc_7F09C7AC();
LAB_7f05fe34:
  proc_7F058020(&ptr_BONDdata->field_AD8 + param_1 * 0xea,auStack164);
  local_74 = 0;
  local_70 = 0;
  local_6c = 0;
  ppiVar4 = (int **)local_8[0x88];
  if (ppiVar4 == NULL) {
    ppiVar4 = (int **)create_new_item_instance_of_model(0xca,0x56);
  }
  else {
    local_8[0x89] = 1;
  }
  if (ppiVar4 != NULL) {
    *(undefined2 *)((int)ppiVar4 + 0x82) = 0xffff;
    ppiVar4[0x19] = (int *)((uint)ppiVar4[0x19] & 0xfff9ffff);
    local_4 = ppiVar4;
    uVar3 = get_cur_playernum();
    local_4[0x19] = (int *)((uint)local_4[0x19] | uVar3 << 0x11);
    ppiVar4 = (int **)proc_7F05EC1C();
    if (((uint)local_4[0x19] & 0x80) != 0) {
      ppiVar4 = (int **)local_4[0x1b];
      *ppiVar4 = (int *)((uint)*ppiVar4 | 0x80);
      if (local_c8 != ITEM_TANKSHELLS) {
        *local_4[0x1b] = *local_4[0x1b] | 0x20;
        *(int **)(local_4[0x1b] + 0x2c) = local_4[0x17];
        local_4[0x1b][0x2d] = local_4[0x1b][2];
        *(float *)(local_4[0x1b] + 4) = local_64;
        *(float *)(local_4[0x1b] + 5) = local_60;
        *(float *)(local_4[0x1b] + 6) = local_5c;
        local_4[0x1b][0x2f] = 0x3c;
        ppiVar4 = (int **)local_4[0x1b];
        if (ppiVar4[0x26] == NULL) {
          ppiVar4 = play_sfx_a1(ptr_sfx_buf,1,(sfxdata *)(ppiVar4 + 0x26));
        }
        else {
          if (ppiVar4[0x27] == NULL) {
            ppiVar4 = play_sfx_a1(ptr_sfx_buf,1,(sfxdata *)(ppiVar4 + 0x27));
          }
        }
      }
    }
  }
  return ppiVar4;
}



// WARNING: Instruction at (ram,0x7f060974) overlaps instruction at (ram,0x7f060970)
// 

void handles_firing_or_throwing_weapon_in_hand(int hand)

{
  ushort *partdesc;
  int item;
  ulonglong uVar1;
  u32 uVar3;
  float *pfVar4;
  longlong lVar2;
  short sVar6;
  uint *puVar5;
  f32 *pfVar7;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 extraout_a0_05;
  undefined8 extraout_a0_06;
  undefined8 extraout_a0_07;
  undefined8 extraout_a0_08;
  undefined4 unaff_s0_lo;
  int *piVar8;
  int *posdata;
  uint uVar9;
  char cVar10;
  undefined4 unaff_retaddr;
  float fVar11;
  f32 fVar12;
  f32 fVar13;
  f32 fVar14;
  int iVar15;
  int iVar16;
  float fVar17;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float extraout_f12_12;
  float extraout_f12_13;
  float a;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  float extraout_f14_07;
  float extraout_f14_08;
  float x;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  undefined8 in_stack_fffffd80;
  int *piVar22;
  int *piVar23;
  int *objinst;
  int *piVar24;
  float *pfVar25;
  float fStack548;
  float fStack544;
  float fStack540;
  int *piStack532;
  undefined4 *puStack524;
  float fStack520;
  float fStack516;
  float fStack512;
  float fStack508;
  float fStack504;
  float fStack500;
  float fStack496;
  float fStack492;
  float fStack488;
  float fStack480;
  float fStack476;
  float fStack472;
  float fStack468;
  float fStack464;
  float fStack460;
  float fStack456;
  float fStack452;
  float fStack448;
  float *pfStack432;
  int iStack428;
  int iStack424;
  int *piStack416;
  int *piStack412;
  float afStack404 [16];
  f32 afStack340 [12];
  undefined4 uStack292;
  undefined4 uStack288;
  undefined4 uStack284;
  float fStack276;
  float fStack272;
  float fStack268;
  object_header *poStack264;
  float afStack260 [14];
  float fStack204;
  float afStack196 [16];
  float fStack132;
  float fStack128;
  float fStack124;
  float fStack116;
  float fStack112;
  float fStack108;
  float fStack100;
  float fStack96;
  float fStack92;
  float fStack84;
  float fStack80;
  float fStack76;
  float afStack68 [16];
  undefined4 *puStack4;
  
  fStack276 = dword_80035C40;
  fStack272 = (float)dword_80035C44;
  fStack268 = (float)dword_80035C48;
  piVar8 = &ptr_BONDdata->unknown + hand * 0xea;
  piStack412 = NULL;
  piStack416 = NULL;
  posdata = piVar8 + 0x21c;
  iStack428 = return_ammo_in_hand(hand);
  pfStack432 = (float *)get_ptr_item_statistics(iStack428);
  if (hand == 0) {
    item = return_ammo_in_hand(1);
    uVar1 = check_special_attributes(item,0x800);
    fVar11 = global_timer_delta;
    if (uVar1 == 0) {
      *(float *)(piVar8 + 0x28d) =
           (float)piVar8[0x28d] - (global_timer_delta + global_timer_delta) / 240.00000000;
      fVar18 = extraout_f12;
      if ((float)piVar8[0x28d] < 0.00000000) {
        piVar8[0x28d] = 0;
        fVar18 = extraout_f12;
      }
    }
    else {
      *(float *)(piVar8 + 0x28d) =
           (float)piVar8[0x28d] + (global_timer_delta + global_timer_delta) / 240.00000000;
      fVar18 = extraout_f12;
      if (2.00000000 < (float)piVar8[0x28d]) {
        piVar8[0x28d] = 0x40000000;
        fVar18 = extraout_f12;
      }
    }
  }
  else {
    item = return_ammo_in_hand(0);
    uVar1 = check_special_attributes(item,0x800);
    fVar11 = global_timer_delta;
    if (uVar1 == 0) {
      *(float *)(piVar8 + 0x28d) =
           (float)piVar8[0x28d] + (global_timer_delta + global_timer_delta) / 240.00000000;
      fVar18 = extraout_f12_00;
      if (0.00000000 < (float)piVar8[0x28d]) {
        piVar8[0x28d] = 0;
        fVar18 = extraout_f12_00;
      }
    }
    else {
      *(float *)(piVar8 + 0x28d) =
           (float)piVar8[0x28d] - (global_timer_delta + global_timer_delta) / 240.00000000;
      fVar18 = extraout_f12_00;
      if ((float)piVar8[0x28d] < -2.00000000) {
        piVar8[0x28d] = -0x40000000;
        fVar18 = extraout_f12_00;
      }
    }
  }
  fStack456 = dword_80035C4C;
  fStack452 = dword_80035C50;
  fStack448 = dword_80035C54;
  fStack468 = dword_80035C58;
  fStack464 = dword_80035C5C;
  fStack460 = flt_80035C60;
  fStack480 = dword_80035C64;
  fStack476 = flt_80035C68;
  fStack472 = dword_80035C6C;
  item = piVar8[0x282];
  uVar9 = item + 3U & 3;
  if (((int)(item + 3U) < 0) && (uVar9 != 0)) {
    uVar9 -= 4;
  }
  piVar24 = posdata + uVar9 * 3;
  objinst = posdata + item * 3;
  uVar9 = item + 1U & 3;
  if (((int)(item + 1U) < 0) && (uVar9 != 0)) {
    uVar9 -= 4;
  }
  piVar23 = posdata + uVar9 * 3;
  uVar9 = item + 2U & 3;
  if (((int)(item + 2U) < 0) && (uVar9 != 0)) {
    uVar9 -= 4;
  }
  piVar22 = posdata + uVar9 * 3;
  proc_7F05AEFC((float *)(piVar24 + 0x42),(float *)(objinst + 0x42),(float *)(piVar23 + 0x42),
                (float *)(piVar22 + 0x42),fVar18,(float *)piVar8[0x283]);
  proc_7F05AEFC((float *)(piVar24 + 0x4e),(float *)(objinst + 0x4e),(float *)(piVar23 + 0x4e),
                (float *)(piVar22 + 0x4e),extraout_f12_01,(float *)piVar8[0x283]);
  proc_7F05AEFC((float *)(piVar24 + 0x5a),(float *)(objinst + 0x5a),(float *)(piVar23 + 0x5a),
                (float *)(piVar22 + 0x5a),extraout_f12_02,(float *)piVar8[0x283]);
  fStack448 = fStack448 * ptr_BONDdata->field_FC0;
  fStack456 = fStack456 * ptr_BONDdata->field_FC0 + (float)piVar8[0x287];
  fStack452 = fStack452 * ptr_BONDdata->field_FC0 + (float)piVar8[0x288];
  proc_7F05DCB8(hand);
  fVar18 = flt_80053DE0;
  fStack456 = fStack456 + fVar11;
  item = 0;
  if (0 < clock_timer) {
    fVar11 = (float)piVar8[0x255];
    while( true ) {
      item += 1;
      *(float *)(piVar8 + 0x255) = fStack456 + fVar18 * fVar11;
      *(float *)(piVar8 + 0x256) = fStack452 + fVar18 * (float)piVar8[0x256];
      *(float *)(piVar8 + 599) = fStack448 + fVar18 * (float)piVar8[599];
      *(float *)(piVar8 + 600) = fStack468 + fVar18 * (float)piVar8[600];
      *(float *)(piVar8 + 0x259) = fStack464 + fVar18 * (float)piVar8[0x259];
      *(float *)(piVar8 + 0x25a) = fStack460 + fVar18 * (float)piVar8[0x25a];
      *(float *)(piVar8 + 0x25b) = fStack480 + fVar18 * (float)piVar8[0x25b];
      *(float *)(piVar8 + 0x25c) = fStack476 + fVar18 * (float)piVar8[0x25c];
      *(float *)(piVar8 + 0x25d) = fStack472 + fVar18 * (float)piVar8[0x25d];
      if (clock_timer <= item) break;
      fVar11 = (float)piVar8[0x255];
    }
  }
  fVar11 = flt_80053DE4;
  fVar19 = (float)piVar8[0x256] * flt_80053DE4;
  fVar18 = (float)piVar8[599] * flt_80053DE4;
  *(float *)(piVar8 + 0x24c) = (float)piVar8[0x255] * flt_80053DE4;
  *(float *)(piVar8 + 0x24d) = fVar19;
  *(float *)(piVar8 + 0x24e) = fVar18;
  *(float *)(piVar8 + 0x24f) = (float)piVar8[600] * fVar11;
  *(float *)(piVar8 + 0x250) = (float)piVar8[0x259] * fVar11;
  *(float *)(piVar8 + 0x251) = (float)piVar8[0x25a] * fVar11;
  *(float *)(piVar8 + 0x252) = (float)piVar8[0x25b] * fVar11;
  *(float *)(piVar8 + 0x253) = (float)piVar8[0x25c] * fVar11;
  *(float *)(piVar8 + 0x254) = (float)piVar8[0x25d] * fVar11;
  if ((longlong)hand == 0) {
    fVar11 = proc_7F05DCE8(0);
    fStack276 = (float)piVar8[0x28a] + fVar11 + (float)piVar8[0x24c];
  }
  else {
    fVar11 = proc_7F05DCE8((longlong)hand);
    fStack276 = (fVar11 + (float)piVar8[0x24c]) - (float)piVar8[0x28a];
  }
  fStack272 = (float)piVar8[0x28b] + pfStack432[2] + (float)piVar8[0x24d];
  fStack268 = (float)piVar8[0x28c] + pfStack432[3] + (float)piVar8[0x24e];
  if (((iStack428 == 0x19) || (iStack428 == 0x1e)) || (iStack428 == 0x17)) {
    fStack272 = fStack272 + (float)ptr_BONDdata->ducking_height_offset / -100.00000000;
    fStack268 = fStack268 +
                ((float)ptr_BONDdata->ducking_height_offset * 3.00000000) / -100.00000000;
    if ((iStack428 == 0x19) &&
       (((item = cur_player_get_screen_setting(), item == 1 ||
         (item = cur_player_get_screen_setting(), item == 2)) ||
        (item = get_screen_ratio(), item == 1)))) {
      fStack272 = fStack272 - 3.00000000;
    }
  }
  else {
    if (iStack428 == 0x1f) {
      fStack272 = fStack272 +
                  ((float)ptr_BONDdata->ducking_height_offset * 2.50000000) / -100.00000000;
      fStack268 = fStack268 +
                  ((float)ptr_BONDdata->ducking_height_offset * 7.50000000) / -100.00000000;
    }
    else {
      fStack272 = fStack272 +
                  ((float)ptr_BONDdata->ducking_height_offset * 5.00000000) / -100.00000000;
      fStack268 = fStack268 +
                  ((float)ptr_BONDdata->ducking_height_offset * 15.00000000) / -100.00000000;
    }
  }
  if ((*(char *)(piVar8 + 0x21f) != '\0') &&
     (uVar1 = check_special_attributes(iStack428,0x20), uVar1 != 0)) {
    uVar1 = check_special_attributes(iStack428,0x40);
    if (uVar1 != 0) {
      uVar3 = get_random_value();
      fVar11 = (float)uVar3;
      if ((int)uVar3 < 0) {
        fVar11 = fVar11 + 4294967296.00000000;
      }
      fStack276 = fStack276 + (flt_80053DEC - fVar11 * 0.00000000 * flt_80053DE8);
    }
    uVar3 = get_random_value();
    fVar11 = (float)uVar3;
    if ((int)uVar3 < 0) {
      fVar11 = fVar11 + 4294967296.00000000;
    }
    fStack272 = fStack272 + (flt_80053DF4 - fVar11 * 0.00000000 * flt_80053DF0);
    uVar3 = get_random_value();
    fVar11 = (float)uVar3;
    if ((int)uVar3 < 0) {
      fVar11 = fVar11 + 4294967296.00000000;
    }
    fStack268 = fStack268 + (flt_80053DFC - fVar11 * 0.00000000 * flt_80053DF8);
  }
  fVar12 = get_screen_width();
  fVar13 = get_screen_width();
  fVar14 = get_ulx();
  fStack276 = fStack276 +
              (((ptr_BONDdata->field_FFC - (float)fVar14) - (float)fVar13 * 0.50000000) *
              pfStack432[6]) / ((float)fVar12 * 0.50000000);
  fVar12 = get_uly();
  fVar13 = get_screen_height();
  if ((float)fVar13 * 0.50000000 < ptr_BONDdata->field_1000 - (float)fVar12) {
    fVar13 = get_screen_height();
    fVar14 = get_screen_height();
    fVar12 = get_uly();
    fStack272 = fStack272 -
                (((ptr_BONDdata->field_1000 - (float)fVar12) - (float)fVar14 * 0.50000000) *
                pfStack432[5]) / ((float)fVar13 * 0.50000000);
  }
  else {
    fVar13 = get_screen_height();
    fVar14 = get_screen_height();
    fVar12 = get_uly();
    fStack272 = fStack272 -
                (((ptr_BONDdata->field_1000 - (float)fVar12) - (float)fVar14 * 0.50000000) *
                pfStack432[4]) / ((float)fVar13 * 0.50000000);
  }
  proc_7F05C614();
  proc_7F057FD0(afStack340);
  if ((iStack428 == 0x1e) || (iStack428 == 0x17)) {
    fStack496 = flt_80035C70;
    fStack492 = flt_80035C74;
    fStack488 = flt_80035C78;
    proc_7F058714(&fStack496,afStack260);
    proc_7F058098(afStack260,(float *)afStack340);
    item = piVar8[0x24b];
    fVar11 = extraout_f12_04;
    fVar18 = extraout_f14_00;
  }
  else {
    if (iStack428 == 0x1f) {
      fStack508 = flt_80035C7C;
      fStack504 = flt_80035C80;
      fStack500 = flt_80035C84;
      proc_7F058714(&fStack508,afStack260);
      proc_7F058098(afStack260,(float *)afStack340);
      item = piVar8[0x24b];
      fVar11 = extraout_f12_05;
      fVar18 = extraout_f14_01;
    }
    else {
      fVar11 = extraout_f12_03;
      fVar18 = extraout_f14;
      if (iStack428 == 1) {
        if (ptr_BONDdata->field_2A38 != 0x11) {
          item = piVar8[0x24b];
          fVar11 = extraout_f12_03;
          fVar18 = extraout_f14;
          goto LAB_7f060a94;
        }
        fStack520 = flt_80035C88;
        fStack516 = flt_80035C8C;
        fStack512 = flt_80035C90;
        proc_7F058714(&fStack520,afStack260);
        proc_7F058098(afStack260,(float *)afStack340);
        fStack276 = fStack276 + -2.50000000;
        fStack272 = fStack272 + flt_80053E00;
        fStack268 = fStack268 + 2.00000000;
        fVar11 = extraout_f12_06;
        fVar18 = extraout_f14_02;
      }
      item = piVar8[0x24b];
    }
  }
LAB_7f060a94:
  if (item == 0) {
    piVar8[0x23a] = 0;
    piVar8[0x237] = 0;
    piVar8[0x238] = 0;
    piVar8[0x239] = 0;
  }
  else {
    fStack276 = fStack276 + (float)piVar8[0x247];
    fStack272 = fStack272 + (float)piVar8[0x248];
    fStack268 = fStack268 + (float)piVar8[0x249];
    proc_7F058098((float *)(piVar8 + 0x23b),(float *)afStack340);
    uStack292 = 0;
    uStack288 = 0;
    uStack284 = 0;
    fVar11 = extraout_f12_07;
    fVar18 = extraout_f14_03;
  }
  fVar20 = (float)piVar8[0x250];
  fVar19 = (float)piVar8[0x251];
  fVar21 = (float)piVar8[0x252];
  iVar15 = piVar8[0x253];
  iVar16 = piVar8[0x254];
  proc_7F059908(afStack260,fVar11,fVar18,0.00000000,0.00000000,0.00000000,(float)piVar8[0x24f],
                fVar20,fVar19,fVar21);
  proc_7F058098(afStack260,(float *)afStack340);
  proc_7F059CE8(afStack260,extraout_f12_08,extraout_f14_04,0.00000000,
                fStack276 - (float)piVar8[0x28e]);
  proc_7F058098(afStack260,(float *)afStack340);
  proc_7F058020(afStack340,afStack68);
  proc_7F058998(&fStack276,(int)afStack68);
  pfVar25 = (float *)(piVar8 + 0x2a6);
  proc_7F058020(afStack68,pfVar25);
  piVar24 = piVar8 + 0x2b6;
  proc_7F058020(piVar24,piVar8 + 0x2c6);
  pfVar4 = (float *)proc_7F078444();
  proc_7F05818C(pfVar4,pfVar25,(int)piVar24);
  *(undefined *)((int)piVar8 + 0x87f) = 1;
  item = get_ptr_weapon_model_header_line(iStack428);
  if ((item == 0) || (uVar1 = check_special_attributes(iStack428,0x800), uVar1 == 0)) {
LAB_7f060c6c:
    *(undefined *)((int)piVar8 + 0x87f) = 0;
  }
  else {
    uVar1 = check_special_attributes(iStack428,0x2000);
    if (uVar1 == 0) {
      if (piVar8[0x225] == 6) goto LAB_7f060c6c;
      if (piVar8[0x225] == 7) {
        *(undefined *)((int)piVar8 + 0x87f) = 0;
      }
      else {
        uVar1 = proc_7F05CEBC(hand);
        if (uVar1 != 0) {
          item = get_itemtype_in_hand(hand);
          if (item != 0) {
            item = piVar8[0x227];
            goto LAB_7f060c74;
          }
          goto LAB_7f060c6c;
        }
        *(undefined *)((int)piVar8 + 0x87f) = 0;
      }
    }
    else {
      *(undefined *)((int)piVar8 + 0x87f) = 0;
    }
  }
  item = piVar8[0x227];
LAB_7f060c74:
  if (item < 1) {
    uVar1 = check_special_attributes(iStack428,2);
    if (uVar1 == 0) {
      cVar10 = *(char *)((int)piVar8 + 0x87f);
    }
    else {
      *(undefined *)((int)piVar8 + 0x87f) = 0;
      cVar10 = *(char *)((int)piVar8 + 0x87f);
    }
  }
  else {
    cVar10 = *(char *)((int)piVar8 + 0x87f);
  }
  if (cVar10 != '\0') {
    poStack264 = (object_header *)(&ptr_BONDdata->unknown + hand * 8 + 0x204);
    lVar2 = (longlong)(int)poStack264;
    iStack424 = 0;
    proc_7F0BD714((int)*(short *)((int)(&ptr_BONDdata->unknown + hand * 8) + 0x81e) << 6);
    puStack4 = (undefined4 *)lVar2;
    item = iStack424;
    if (0 < poStack264->num_object_grps) {
      do {
        iStack424 = item;
        pfVar7 = (f32 *)lVar2;
        proc_7F057FD0(pfVar7);
        lVar2 = (longlong)(int)(pfVar7 + 0x10);
        item = iStack424 + 1;
      } while ((longlong)(iStack424 + 1) < (longlong)poStack264->num_object_grps);
    }
    set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack264);
    objinst = piVar8 + 0x2da;
    proc_7F075F68((int)objinst,(ushort **)poStack264,piVar8 + 0x2e2);
    proc_7F05E978((int)objinst,1);
    proc_7F05EA94((int)objinst,(int)*(char *)((int)piVar8 + 0x87e));
    item = poStack264->offset_obj_offset_block;
    if (*(int *)(item + 4) == 0) {
      item = *(int *)(item + 0xc);
    }
    else {
      piStack412 = posdata + (uint)*(ushort *)(*(int *)(*(int *)(item + 4) + 4) + 4) + 0xc6;
      item = *(int *)(item + 0xc);
    }
    if (item != 0) {
      piStack416 = *(int **)(item + 4);
    }
    *(undefined4 **)(piVar8 + 0x2dd) = puStack4;
    uVar1 = check_special_attributes(iStack428,0x400);
    extraout_a0_04 = extraout_a0;
    if ((uVar1 != 0) && (extraout_a0_04 = extraout_a0, hand == 1)) {
      proc_7F0589B4(-1.00000000,extraout_a0,afStack68);
      extraout_a0_04 = extraout_a0_00;
    }
    matrix_multiply_A1_by_F12(flt_80053E04,extraout_a0_04,afStack68);
    proc_7F058020(afStack68,puStack4);
    if ((item_related *)poStack264->ptr_archetype == &weapon_gun_revolver) {
      item = *(int *)(poStack264->offset_obj_offset_block + 0x10);
      if (item == 0) {
        item = *(int *)(poStack264->offset_obj_offset_block + 0x14);
      }
      else {
        fVar11 = 0.00000000;
        puStack524 = *(undefined4 **)(item + 4);
        if (iStack428 == 0x12) {
          if (piVar8[0x225] == 1) {
            fVar11 = ((float)(piVar8[0x224] + piVar8[0x227] * -6 + 0x1e) * flt_80053E08) /
                     36.00000000;
          }
          else {
            fVar11 = ((float)(6 - piVar8[0x227]) * flt_80053E0C) / 6.00000000;
          }
        }
        else {
          if ((piVar8[0x225] == 1) && (piVar8[0x224] < 6)) {
            fVar11 = ((float)piVar8[0x224] * flt_80053E10) / 36.00000000;
          }
        }
        proc_7F058688(fVar11,(longlong)(int)puStack524,afStack260);
        proc_7F058998(puStack524,(int)afStack260);
        proc_7F0580C8(afStack68,afStack260,(int)(puStack4 + 0x30));
        item = *(int *)(poStack264->offset_obj_offset_block + 0x14);
      }
      if (item != 0) {
        posdata = *(int **)(item + 4);
        if (piVar8[0x225] == 1) {
          item = piVar8[0x224];
          if (item < 3) {
            fVar11 = -(float)item * flt_80053E14 + -(float)item * flt_80053E14;
          }
          else {
            fVar11 = -(float)(6 - item) * flt_80053E18;
            fVar11 = fVar11 + fVar11;
          }
          piStack532 = posdata;
          proc_7F058570(fVar11 / 6.00000000,(longlong)(int)posdata,afStack260);
          proc_7F058998(piStack532,(int)afStack260);
        }
        else {
          init_something_copy_posdata_to_it(posdata,(int *)afStack260);
        }
        proc_7F0580C8(afStack68,afStack260,(int)(puStack4 + 0x40));
      }
    }
    if (piStack412 != NULL) {
      *piStack412 = 0;
    }
    if (piStack416 == NULL) {
      piVar8[0x2d6] = piVar8[0x2c2];
      *(float *)(piVar8 + 0x2d9) = -(float)piVar8[0x2b4];
      piVar8[0x2d7] = piVar8[0x2c3];
      piVar8[0x2d8] = piVar8[0x2c4];
      item = poStack264->offset_obj_offset_block;
    }
    else {
      uVar3 = get_random_value();
      fVar11 = (float)uVar3;
      if ((int)uVar3 < 0) {
        fVar11 = fVar11 + 4294967296.00000000;
      }
      fVar11 = fVar11 * 0.00000000 * 0.25000000 + 1.00000000;
      fVar18 = *pfStack432;
      uVar1 = check_special_attributes(iStack428,1);
      if (uVar1 == 0) {
        init_something_copy_posdata_to_it(piStack416,(int *)&fStack132);
        extraout_a0_04 = extraout_a0_03;
      }
      else {
        uVar3 = get_random_value();
        fVar17 = (float)uVar3;
        if ((int)uVar3 < 0) {
          fVar17 = fVar17 + 4294967296.00000000;
        }
        proc_7F058688(fVar17 * 0.00000000 * flt_80053E1C,extraout_a0_01,&fStack132);
        proc_7F058998(piStack416,(int)&fStack132);
        extraout_a0_04 = extraout_a0_02;
      }
      matrix_multiply_A1_by_F12(fVar11,extraout_a0_04,&fStack132);
      proc_7F058A14(fVar18,extraout_a0_04,(int)&fStack132);
      proc_7F058068(afStack68,&fStack132);
      proc_7F058020(&fStack132,puStack4 + 0x10);
      *(float *)(piVar8 + 0x2d6) = fStack84;
      *(float *)(piVar8 + 0x2d7) = fStack80;
      *(float *)(piVar8 + 0x2d8) = fStack76;
      pfVar4 = (float *)proc_7F078444();
      proc_7F058474(pfVar4,(float *)(piVar8 + 0x2d6));
      *(float *)(piVar8 + 0x2d9) = -fStack76;
      if (*(char *)((int)piVar8 + 0x87d) != '\0') {
        if (piStack412 != NULL) {
          *piStack412 = 1;
        }
        item = *(int *)(poStack264->offset_obj_offset_block + 8);
        if (item != 0) {
          pfVar4 = *(float **)(item + 4);
          fStack548 = fStack84 + *pfVar4 * fStack132 + pfVar4[1] * fStack116 + pfVar4[2] * fStack100
          ;
          fStack544 = fStack80 + *pfVar4 * fStack128 + pfVar4[1] * fStack112 + pfVar4[2] * fStack96;
          fStack540 = fStack76 + *pfVar4 * fStack124 + pfVar4[1] * fStack108 + pfVar4[2] * fStack92;
          uVar3 = get_random_value();
          fVar17 = (float)uVar3;
          if ((int)uVar3 < 0) {
            fVar17 = fVar17 + 4294967296.00000000;
          }
          proc_7F059CE8(afStack196,extraout_f12_09,extraout_f14_05,
                        fVar17 * 0.00000000 * flt_80053E20,-fStack548);
          matrix_multiply_A1_by_F12(flt_80053E24 * fVar11,extraout_a0_05,afStack196);
          proc_7F059B58(afStack404,extraout_f12_10,extraout_f14_06,0.00000000,
                        fStack276 - (float)piVar8[0x28e]);
          proc_7F058068(afStack404,afStack196);
          proc_7F058B80(fVar18,extraout_a0_06,(int)afStack196);
          proc_7F058068((float *)afStack340,afStack196);
          proc_7F058998(&fStack548,(int)afStack196);
          proc_7F058020(afStack196,puStack4 + 0x20);
        }
        if (((item_related *)poStack264->ptr_archetype == &weapon_gun_kf7) &&
           (item = *(int *)(poStack264->offset_obj_offset_block + 0x10), item != 0)) {
          pfVar4 = *(float **)(item + 4);
          piVar24 = puStack4 + 0x30;
          fStack548 = fStack84 + *pfVar4 * fStack132 + pfVar4[1] * fStack116 + pfVar4[2] * fStack100
          ;
          fStack544 = fStack80 + *pfVar4 * fStack128 + pfVar4[1] * fStack112 + pfVar4[2] * fStack96;
          piVar22 = (int *)(flt_80053E28 * fVar11);
          fStack540 = fStack76 + *pfVar4 * fStack124 + pfVar4[1] * fStack108 + pfVar4[2] * fStack92;
          uVar3 = get_random_value();
          fVar11 = (float)uVar3;
          if ((int)uVar3 < 0) {
            fVar11 = fVar11 + 4294967296.00000000;
          }
          proc_7F059CE8(afStack196,extraout_f12_11,extraout_f14_07,
                        fVar11 * 0.00000000 * flt_80053E2C,-fStack548);
          matrix_multiply_A1_by_F12((float)piVar22,extraout_a0_07,afStack196);
          proc_7F059B58(afStack404,extraout_f12_12,extraout_f14_08,0.00000000,
                        fStack276 - (float)piVar8[0x28e]);
          proc_7F058068(afStack404,afStack196);
          proc_7F058B80(fVar18,extraout_a0_08,(int)afStack196);
          proc_7F058068((float *)afStack340,afStack196);
          proc_7F058998(&fStack548,(int)afStack196);
          proc_7F058020(afStack196,piVar24);
        }
      }
      item = poStack264->offset_obj_offset_block;
    }
    partdesc = *(ushort **)(item + 0x18);
    if (partdesc != NULL) {
      pfVar4 = *(float **)(partdesc + 2);
      sVar6 = proc_7F06C570(partdesc,0);
      fVar11 = (float)proc_7F05E6B4();
      if ((poStack264->num_offset_entries < 0x1d) ||
         (item = *(int *)(poStack264->offset_obj_offset_block + 0x70), item == 0)) {
        proc_7F0584D0(pfVar4,extraout_f12_13,(float *)piVar8[0x2a1]);
      }
      else {
        item = *(int *)(item + 4);
        get_value_if_watch_is_on_hand_or_not(hand);
        guRotateF((float  [4] [4])
                  CONCAT604(CONCAT564(CONCAT524(CONCAT484(CONCAT444(CONCAT404(CONCAT364(CONCAT324(
                                                  CONCAT248(CONCAT204(CONCAT164(CONCAT124(CONCAT84(
                                                  CONCAT44(*(float *)(item + 8) -
                                                           *(float *)(item + 0x14),fVar20),fVar19),
                                                  fVar21),iVar15),iVar16),in_stack_fffffd80),
                                                  unaff_s0_lo),unaff_retaddr),piVar22),piVar23),
                                                  piVar24),objinst),fVar13),fVar14),a,x,
                  (float)afStack260,
                  ((((float)piVar8[0x2a1] + flt_80053E30) - fVar11) * 360.00000000) / flt_80053E34);
        proc_7F058998(pfVar4,(int)afStack260);
      }
      proc_7F05818C(afStack68,afStack260,(int)(puStack4 + (int)sVar6 * 0x10));
    }
    if (0x1d < poStack264->num_offset_entries) {
      seems_to_load_cuff_microcode();
    }
    partdesc = *(ushort **)(poStack264->offset_obj_offset_block + 0x1c);
    if (partdesc != NULL) {
      posdata = *(int **)(partdesc + 2);
      sVar6 = proc_7F06C570(partdesc,0);
      proc_7F05E83C(hand);
      init_something_copy_posdata_to_it(posdata,(int *)afStack260);
      fStack204 = fStack204 - (float)piVar8[0x2a2];
      proc_7F0580C8(afStack68,afStack260,(int)(puStack4 + (int)sVar6 * 0x10));
    }
    item = 0;
    iVar15 = 0;
    if (0x12 < poStack264->num_offset_entries) {
      do {
        partdesc = *(ushort **)(poStack264->offset_obj_offset_block + iVar15 + 0x48);
        if ((partdesc != NULL) &&
           (puVar5 = (uint *)extract_id_from_object_structure_microcode((int)objinst,partdesc),
           puVar5 != NULL)) {
          *puVar5 = (uint)(piVar8[0x229] < 5 - item) ^ 1;
        }
        partdesc = *(ushort **)(poStack264->offset_obj_offset_block + iVar15 + 0x5c);
        if ((partdesc != NULL) &&
           (puVar5 = (uint *)extract_id_from_object_structure_microcode((int)objinst,partdesc),
           puVar5 != NULL)) {
          *puVar5 = (uint)(piVar8[0x229] < 5 - item) ^ 1;
        }
        item += 1;
        iVar15 += 4;
      } while (item != 5);
    }
    proc_7F06EFC4((int)objinst);
    if ((*(char *)(piVar8 + 0x21f) != '\0') && (true)) {
      switch(iStack428) {
      case 4:
      case 5:
      case 6:
      case 7:
      case 8:
      case 9:
      case 10:
      case 0xb:
      case 0xc:
      case 0xd:
      case 0xe:
      case 0x11:
      case 0x12:
      case 0x13:
      case 0x14:
      case 0x15:
        proc_7F061BF4(hand);
        piVar8[0x228] = piVar8[0x228] + 1;
        break;
      case 0x16:
      case 0x17:
        proc_7F061BF4(hand);
      }
    }
  }
  if (iStack428 == 0x19) {
    proc_7F05F928(hand);
    cVar10 = *(char *)(piVar8 + 0x21f);
  }
  else {
    cVar10 = *(char *)(piVar8 + 0x21f);
  }
  if (cVar10 != '\0') {
    fVar12 = proc_7F089778((int)ptr_BONDdata);
    proc_7F068508(hand,fVar12);
    if (iStack428 == 0x18) {
      proc_7F05F73C(hand);
    }
    else {
      if (iStack428 == 0x1a) {
        proc_7F05EE24(hand);
      }
      else {
        if (iStack428 == 0x19) {
          proc_7F05FB64(hand);
        }
        else {
          if (iStack428 == 3) {
            proc_7F05F09C(hand);
          }
          else {
            if (((((iStack428 == 0x1d) || (iStack428 == 0x1c)) || (iStack428 == 0x1b)) ||
                ((iStack428 == 0x21 || (iStack428 == 0x2f)))) ||
               ((iStack428 == 0x30 || ((iStack428 == 0x3d || (iStack428 == 0x22)))))) {
              generate_player_thrown_object(hand);
            }
            else {
              if (iStack428 == 0x23) {
                proc_7F05F73C(hand);
              }
              else {
                if (iStack428 == 0x24) {
                  proc_7F05F73C(hand);
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F061920(void)

{
  handles_firing_or_throwing_weapon_in_hand(0);
  handles_firing_or_throwing_weapon_in_hand(1);
  return;
}



void proc_7F061948(undefined *param_1,int param_2,float *param_3,float *param_4)

{
  bool bVar1;
  float fVar2;
  float fVar3;
  u32 uVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  *(float *)(param_1 + 4) = *param_3;
  *(float *)(param_1 + 8) = param_3[1];
  *(float *)(param_1 + 0xc) = param_3[2];
  *(float *)(param_1 + 0x10) = *param_4 - *param_3;
  *(float *)(param_1 + 0x14) = param_4[1] - param_3[1];
  *(float *)(param_1 + 0x18) = param_4[2] - param_3[2];
  fVar5 = sqrtf(*(float *)(param_1 + 0x18) * *(float *)(param_1 + 0x18) +
                *(float *)(param_1 + 0x10) * *(float *)(param_1 + 0x10) +
                *(float *)(param_1 + 0x14) * *(float *)(param_1 + 0x14));
  fVar7 = 1.00000000 / fVar5;
  *(float *)(param_1 + 0x10) = *(float *)(param_1 + 0x10) * fVar7;
  *(float *)(param_1 + 0x14) = *(float *)(param_1 + 0x14) * fVar7;
  *(float *)(param_1 + 0x18) = *(float *)(param_1 + 0x18) * fVar7;
  if (param_2 == 0x17) {
    fVar7 = 300.00000000;
    if (fVar5 <= 300.00000000) goto LAB_7f061a54;
  }
  else {
    fVar7 = flt_80053E88;
    if (fVar5 <= flt_80053E88) goto LAB_7f061a54;
  }
  fVar5 = fVar7;
LAB_7f061a54:
  fVar6 = 500.00000000;
  *param_1 = 0;
  param_1[1] = (char)param_2;
  *(float *)(param_1 + 0x1c) = fVar5;
  fVar3 = flt_80053EA0;
  fVar2 = flt_80053E9C;
  fVar7 = flt_80053E8C;
  if (500.00000000 <= fVar5) {
    fVar6 = fVar5;
  }
  if (param_2 == 0x16) {
    *(float *)(param_1 + 0x20) = fVar6 * 0.25000000;
    fVar5 = flt_80053E90 * fVar6;
    *(float *)(param_1 + 0x24) = fVar5;
    if (fVar7 < fVar5) {
      *(float *)(param_1 + 0x24) = fVar7;
    }
    uVar4 = get_random_value();
    fVar5 = (float)uVar4;
    if ((int)uVar4 < 0) {
      fVar5 = fVar5 + 4294967296.00000000;
    }
    *(float *)(param_1 + 0x28) = (flt_80053E98 - fVar5 * 0.00000000 * flt_80053E94) * fVar6;
  }
  else {
    if (param_2 == 0x17) {
      *(float *)(param_1 + 0x24) = fVar6;
      *(float *)(param_1 + 0x20) = fVar6 + fVar6;
      if (fVar2 < fVar6) {
        *(float *)(param_1 + 0x24) = fVar2;
      }
      *(undefined4 *)(param_1 + 0x28) = 0;
    }
    else {
      fVar6 = flt_80053EA4 * fVar6;
      bVar1 = flt_80053EA0 < fVar6;
      *(float *)(param_1 + 0x20) = fVar6;
      *(float *)(param_1 + 0x24) = fVar6;
      if (bVar1) {
        *(float *)(param_1 + 0x24) = fVar3;
      }
      uVar4 = get_random_value();
      fVar5 = (float)uVar4;
      if ((int)uVar4 < 0) {
        fVar5 = fVar5 + 4294967296.00000000;
      }
      *(float *)(param_1 + 0x28) =
           ((fVar5 * 0.00000000 + fVar5 * 0.00000000) - 1.00000000) * *(float *)(param_1 + 0x20);
    }
  }
  if (*(float *)(param_1 + 0x1c) <= *(float *)(param_1 + 0x28)) {
    *param_1 = 0xff;
  }
  return;
}



void proc_7F061BF4(int param_1)

{
  int iVar2;
  ITEM_IDS IVar3;
  ulonglong uVar1;
  int *piVar4;
  int *piVar5;
  float fVar6;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  int local_14;
  
  piVar5 = &ptr_BONDdata->unknown + param_1 * 0xea;
  iVar2 = proc_7F0783C4();
  if ((float)piVar5[0x2d9] <=
      -(*(float *)(iVar2 + 0x38) +
       (float)piVar5[0x303] * *(float *)(iVar2 + 8) +
       (float)piVar5[0x304] * *(float *)(iVar2 + 0x18) +
       (float)piVar5[0x305] * *(float *)(iVar2 + 0x28))) {
    IVar3 = get_item_in_hand(param_1);
    proc_7F061948((undefined *)(piVar5 + 0x295),IVar3,(float *)(piVar5 + 0x2d6),
                  (float *)(piVar5 + 0x303));
    if ((*(int *)(ptr_BONDdata->position_data_pointer + 4) != 0) &&
       (uVar1 = get_num_players(), 1 < (longlong)uVar1)) {
      piVar4 = &ptr_BONDdata->unknown + param_1 * 3;
      local_14 = *(int *)(ptr_BONDdata->position_data_pointer + 4);
      local_20 = (float)piVar5[0x303] - (float)piVar4[0xa86];
      local_1c = (float)piVar5[0x304] - (float)piVar4[0xa87];
      local_18 = (float)piVar5[0x305] - (float)piVar4[0xa88];
      guNormalize(&local_20,&local_1c,&local_18);
      local_2c = (float)piVar5[0x303] - (float)piVar5[0x2d6];
      local_28 = (float)piVar5[0x304] - (float)piVar5[0x2d7];
      local_24 = (float)piVar5[0x305] - (float)piVar5[0x2d8];
      guNormalize(&local_2c,&local_28,&local_24);
      fVar6 = proc_7F05ACB0(local_24 * local_18 + local_20 * local_2c + local_1c * local_28);
      if (fVar6 <= flt_80053EA8) {
        IVar3 = get_item_in_hand(param_1);
        proc_7F061948((undefined *)(local_14 + param_1 * 0x2c + 0x180),IVar3,
                      (float *)(&ptr_BONDdata->field_2A18 + param_1 * 3),(float *)(piVar5 + 0x303));
      }
    }
  }
  return;
}



// WARNING: Could not reconcile some variable overlaps

undefined4 * proc_7F061E18(undefined4 *param_1,char *param_2,int param_3)

{
  byte bVar1;
  undefined4 *puVar2;
  xyzpoint *virtualAddress;
  float *pfVar3;
  u32 uVar4;
  char cVar5;
  undefined8 extraout_a0;
  undefined4 *puVar6;
  float fVar7;
  float extraout_f12;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  undefined4 *puStackX0;
  int iStackX8;
  float fStack216;
  float fStack212;
  float fStack208;
  float fStack196;
  float fStack192;
  float fStack188;
  float *pfStack184;
  uint *puStack176;
  float fStack172;
  float fStack168;
  float fStack164;
  float fStack160;
  float fStack156;
  float fStack152;
  float fStack148;
  float fStack144;
  float fStack140;
  float fStack136;
  float fStack132;
  float fStack128;
  float fStack124;
  float fStack120;
  float fStack108;
  xyzpoint *pxStack104;
  float fStack100;
  float fStack96;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  undefined4 uStack76;
  float afStack72 [16];
  xyzpoint *pxStack8;
  
  if (*param_2 < '\0') {
    return param_1;
  }
  fStack88 = dword_80035C98;
  fStack84 = dword_80035C9C;
  uStack76 = dword_80035CA4;
  fStack80 = dword_80035CA0;
  puStackX0 = param_1;
  iStackX8 = param_3;
  pxStack104 = get_BONDdata_position();
  fStack120 = *(float *)(param_2 + 0x28);
  fVar12 = *(float *)(param_2 + 0x24);
  fStack156 = (float)DAT_80035ca8;
  fStack148 = (float)DAT_80035cb0;
  fStack152 = (float)DAT_80035cac;
  fStack168 = DAT_80035cb4;
  fStack164 = DAT_80035cb8;
  fStack160 = DAT_80035cbc;
  fStack172 = flt_80053EAC;
  puStack176 = DAT_8008d0d0;
  pfStack184 = (float *)proc_7F0783C4();
  if (param_2[1] == '\x16') {
    fStack108 = 50.00000000;
    puStack176 = DAT_8008d0d4;
  }
  else {
    if (param_2[1] == '\x17') {
      fStack108 = 10.00000000;
      puStack176 = DAT_8008d0d4;
      uVar4 = get_random_value();
      uStack76 = (float)((uint)uStack76 & 0xffffff00 | (uint)(byte)((char)(uVar4 % 0x32) + 0x96));
      uVar4 = get_random_value();
      if (uVar4 % 5 != 0) {
        fStack100 = *(float *)(param_2 + 4);
        goto LAB_7f061fac;
      }
      uVar4 = get_random_value();
      cVar5 = -1 - (char)(uVar4 % 100);
      uStack76 = (float)CONCAT13(cVar5,CONCAT12(cVar5,uStack76._2_2_));
    }
    else {
      fStack108 = 30.00000000;
    }
  }
  fStack100 = *(float *)(param_2 + 4);
LAB_7f061fac:
  fStack96 = *(float *)(param_2 + 8);
  fStack92 = *(float *)(param_2 + 0xc);
  if (0.00000000 < fStack120) {
    fStack100 = fStack100 + fStack120 * *(float *)(param_2 + 0x10);
    fStack96 = fStack96 + fStack120 * *(float *)(param_2 + 0x14);
    fStack92 = fStack92 + fStack120 * *(float *)(param_2 + 0x18);
    fVar7 = fStack120;
  }
  else {
    fVar12 = fVar12 + fStack120;
    fVar7 = 0.00000000;
  }
  if (*(float *)(param_2 + 0x1c) < fVar7 + fVar12) {
    fVar12 = *(float *)(param_2 + 0x1c) - fVar7;
    fVar7 = *(float *)(param_2 + 0x18);
  }
  else {
    fVar7 = *(float *)(param_2 + 0x18);
  }
  fStack144 = *(float *)(param_2 + 0x14) * (pxStack104->z - (fStack92 + fVar12 * fVar7)) -
              (pxStack104->y - (*(float *)(param_2 + 0x14) * fVar12 + fStack96)) * fVar7;
  fStack140 = *(float *)(param_2 + 0x18) *
              (pxStack104->x - (fStack100 + fVar12 * *(float *)(param_2 + 0x10))) -
              (pxStack104->z - (*(float *)(param_2 + 0x18) * fVar12 + fStack92)) *
              *(float *)(param_2 + 0x10);
  fStack136 = *(float *)(param_2 + 0x10) *
              (pxStack104->y - (fStack96 + fVar12 * *(float *)(param_2 + 0x14))) -
              (pxStack104->x - (*(float *)(param_2 + 0x10) * fVar12 + fStack100)) *
              *(float *)(param_2 + 0x14);
  if (((fStack144 == 0.00000000) && (fStack140 == 0.00000000)) && (fStack136 == 0.00000000)) {
    fStack144 = 0.00000000;
    fStack136 = 0.00000000;
    fStack140 = fStack108;
    virtualAddress = pxStack104;
  }
  else {
    virtualAddress = pxStack104;
    guNormalize(&fStack144,&fStack140,&fStack136);
    fStack144 = fStack144 * fStack108;
    fStack140 = fStack140 * fStack108;
    fStack136 = fStack136 * fStack108;
  }
  fStack132 = *(float *)(param_2 + 0x14) * fStack136 - fStack140 * *(float *)(param_2 + 0x18);
  fStack128 = *(float *)(param_2 + 0x18) * fStack144 - fStack136 * *(float *)(param_2 + 0x10);
  fStack124 = *(float *)(param_2 + 0x10) * fStack140 - fStack144 * *(float *)(param_2 + 0x14);
  guNormalize(&fStack132,&fStack128,&fStack124);
  fStack132 = fStack132 * fStack108;
  fStack128 = fStack128 * fStack108;
  fStack124 = fStack124 * fStack108;
  if (param_2[1] == '\x16') {
    proc_7F0BD6C4(8);
  }
  else {
    proc_7F0BD6C4(4);
  }
  pxStack8 = virtualAddress;
  proc_7F0BD6E0();
  init_something_copy_posdata_to_it((int *)&fStack100,(int *)afStack72);
  matrix_multiply_A1_by_F12(flt_80053EB0,extraout_a0,afStack72);
  proc_7F058098(pfStack184,afStack72);
  proc_7F058C9C((int)afStack72,(uint *)pxStack8);
  virtualAddress->x = fStack88;
  virtualAddress->y = fStack84;
  virtualAddress->z = fStack80;
  virtualAddress[1].x = uStack76;
  virtualAddress[1].y = fStack88;
  virtualAddress[1].z = fStack84;
  virtualAddress[2].x = fStack80;
  virtualAddress[2].y = uStack76;
  virtualAddress[2].z = fStack88;
  virtualAddress[3].x = fStack84;
  virtualAddress[3].y = fStack80;
  virtualAddress[3].z = uStack76;
  virtualAddress[4].x = fStack88;
  virtualAddress[4].y = fStack84;
  virtualAddress[4].z = fStack80;
  virtualAddress[5].x = uStack76;
  cVar5 = param_2[1];
  if (cVar5 == '\x16') {
    virtualAddress[5].y = fStack88;
    virtualAddress[5].z = fStack84;
    virtualAddress[6].x = fStack80;
    virtualAddress[6].y = uStack76;
    virtualAddress[6].z = fStack88;
    virtualAddress[7].x = fStack84;
    virtualAddress[7].y = fStack80;
    virtualAddress[7].z = uStack76;
    virtualAddress[8].x = fStack88;
    virtualAddress[8].y = fStack84;
    virtualAddress[8].z = fStack80;
    virtualAddress[9].x = uStack76;
    virtualAddress[9].y = fStack88;
    virtualAddress[9].z = fStack84;
    virtualAddress[10].x = fStack80;
    virtualAddress[10].y = uStack76;
    cVar5 = param_2[1];
  }
  if (cVar5 == '\x17') {
    fStack196 = *(float *)(param_2 + 0x10) * fVar12 + fStack100;
    fStack192 = *(float *)(param_2 + 0x14) * fVar12 + fStack96;
    fStack188 = *(float *)(param_2 + 0x18) * fVar12 + fStack92;
    proc_7F058474(pfStack184,&fStack196);
    fStack216 = fStack108 / 10.00000000;
    fStack212 = fStack216;
    proc_7F0780F0(&fStack216,extraout_f12,(float *)-fStack188);
    if (fStack208 < 2.00000000) {
      fStack208 = fStack208 * 0.50000000;
      fStack196 = fStack196 * fStack208;
      fStack192 = fStack192 * fStack208;
      fStack188 = fStack188 * fStack208;
    }
    pfVar3 = (float *)proc_7F078444();
    proc_7F058474(pfVar3,&fStack196);
    fStack196 = fStack196 - fStack100;
    fStack192 = fStack192 - fStack96;
    fStack156 = fStack196 * 10.00000000;
    fStack188 = fStack188 - fStack92;
    fStack152 = fStack192 * 10.00000000;
    fStack148 = fStack188 * 10.00000000;
  }
  else {
    fStack148 = fVar12 * 10.00000000;
    fStack156 = *(float *)(param_2 + 0x10) * fStack148;
    fStack152 = *(float *)(param_2 + 0x14) * fStack148;
    fStack148 = *(float *)(param_2 + 0x18) * fStack148;
  }
  puVar2 = puStackX0;
  *(short *)&virtualAddress->x = (short)(int)fStack144;
  *(undefined2 *)((int)&virtualAddress->x + 2) = (short)(int)fStack140;
  *(short *)&virtualAddress->y = (short)(int)fStack136;
  bVar1 = *(byte *)(puStack176 + 1);
  *(undefined2 *)((int)&virtualAddress->z + 2) = 0;
  *(ushort *)&virtualAddress->z = (ushort)bVar1 << 5;
  *(short *)&virtualAddress[1].y = (short)(int)-fStack144;
  *(undefined2 *)((int)&virtualAddress[1].y + 2) = (short)(int)-fStack140;
  *(undefined2 *)&virtualAddress[2].x = 0;
  *(undefined2 *)((int)&virtualAddress[2].x + 2) = 0;
  *(short *)&virtualAddress[1].z = (short)(int)-fStack136;
  *(short *)&virtualAddress[2].z = (short)(int)(fStack144 * flt_80053EB4 + fStack156);
  *(undefined2 *)((int)&virtualAddress[2].z + 2) =
       (short)(int)(fStack140 * flt_80053EB8 + fStack152);
  *(short *)&virtualAddress[3].x = (short)(int)(fStack136 * flt_80053EBC + fStack148);
  *(ushort *)&virtualAddress[3].y = (ushort)*(byte *)(puStack176 + 1) << 5;
  *(short *)((int)&virtualAddress[3].y + 2) = (ushort)*(byte *)((int)puStack176 + 5) << 5;
  *(short *)&virtualAddress[4].x = (short)(int)(fStack156 - fStack144 * flt_80053EC0);
  *(undefined2 *)((int)&virtualAddress[4].x + 2) =
       (short)(int)(fStack152 - fStack140 * flt_80053EC4);
  fVar7 = flt_80053EC8;
  *(undefined2 *)&virtualAddress[4].z = 0;
  *(short *)&virtualAddress[4].y = (short)(int)(fStack148 - fStack136 * fVar7);
  *(short *)((int)&virtualAddress[4].z + 2) = (ushort)*(byte *)((int)puStack176 + 5) << 5;
  if (param_2[1] == '\x16') {
    fVar7 = pxStack104->x - fStack100;
    fVar9 = pxStack104->y - fStack96;
    fVar11 = pxStack104->z - fStack92;
    fVar8 = pxStack104->x - (*(float *)(param_2 + 0x10) * fVar12 + fStack100);
    fVar10 = pxStack104->y - (*(float *)(param_2 + 0x14) * fVar12 + fStack96);
    fVar12 = pxStack104->z - (*(float *)(param_2 + 0x18) * fVar12 + fStack92);
    if (fVar8 * fVar8 + fVar10 * fVar10 + fVar12 * fVar12 <
        fVar7 * fVar7 + fVar9 * fVar9 + fVar11 * fVar11) {
      fStack168 = fStack156;
      fStack172 = flt_80053ECC * flt_80053ED0;
      fStack164 = fStack152;
      fStack160 = fStack148;
    }
    *(short *)&virtualAddress[5].y = (short)(int)(fStack132 * fStack172 + fStack168);
    *(undefined2 *)((int)&virtualAddress[5].y + 2) = (short)(int)(fStack128 * fStack172 + fStack164)
    ;
    *(short *)&virtualAddress[5].z = (short)(int)(fStack124 * fStack172 + fStack160);
    *(ushort *)&virtualAddress[6].x = (ushort)*(byte *)(DAT_8008d0d8 + 1) << 5;
    *(short *)((int)&virtualAddress[6].x + 2) = (ushort)*(byte *)((int)DAT_8008d0d8 + 5) << 5;
    *(short *)&virtualAddress[6].z = (short)(int)(fStack168 - fStack132 * fStack172);
    *(undefined2 *)((int)&virtualAddress[6].z + 2) = (short)(int)(fStack164 - fStack128 * fStack172)
    ;
    *(undefined2 *)&virtualAddress[7].y = 0;
    *(undefined2 *)((int)&virtualAddress[7].y + 2) = 0;
    *(short *)&virtualAddress[7].x = (short)(int)(fStack160 - fStack124 * fStack172);
    *(short *)&virtualAddress[8].x = (short)(int)(fStack144 * fStack172 + fStack168);
    *(undefined2 *)((int)&virtualAddress[8].x + 2) = (short)(int)(fStack140 * fStack172 + fStack164)
    ;
    *(undefined2 *)&virtualAddress[8].z = 0;
    *(short *)&virtualAddress[8].y = (short)(int)(fStack136 * fStack172 + fStack160);
    *(short *)((int)&virtualAddress[8].z + 2) = (ushort)*(byte *)((int)DAT_8008d0d8 + 5) << 5;
    *(short *)&virtualAddress[9].y = (short)(int)(fStack168 - fStack144 * fStack172);
    *(undefined2 *)((int)&virtualAddress[9].y + 2) = (short)(int)(fStack164 - fStack140 * fStack172)
    ;
    *(short *)&virtualAddress[9].z = (short)(int)(fStack160 - fStack136 * fStack172);
    bVar1 = *(byte *)(DAT_8008d0d8 + 1);
    *(undefined2 *)((int)&virtualAddress[10].x + 2) = 0;
    *(ushort *)&virtualAddress[10].x = (ushort)bVar1 << 5;
  }
  puVar6 = puStackX0 + 2;
  puStackX0[1] = 0x2000;
  *puStackX0 = 0xb6000000;
  puStackX0 = puStackX0 + 4;
  *puVar6 = 0x1020040;
  uVar4 = osVirtualToPhysical(pxStack8);
  puVar2[3] = uVar4;
  if (param_2[1] == '\x16') {
    likely_generate_DL_for_image_declaration
              ((uint **)register0x000000ec,DAT_8008d0d8,4,(longlong)iStackX8,2);
    puVar2 = puStackX0;
    *puStackX0 = 0x4700080;
    puStackX0 = puStackX0 + 2;
    uVar4 = osVirtualToPhysical(virtualAddress);
    puVar2[1] = uVar4;
    puStackX0[1] = 0x5454;
    *puStackX0 = 0xb1000076;
    puStackX0 = puStackX0 + 2;
    likely_generate_DL_for_image_declaration
              ((uint **)register0x000000ec,puStack176,4,(longlong)iStackX8,2);
    puStackX0[1] = 0x3020;
    *puStackX0 = 0xb1000013;
  }
  else {
    likely_generate_DL_for_image_declaration
              ((uint **)register0x000000ec,puStack176,4,(longlong)iStackX8,2);
    puVar2 = puStackX0;
    *puStackX0 = 0x4300040;
    puStackX0 = puStackX0 + 2;
    uVar4 = osVirtualToPhysical(virtualAddress);
    puVar2[1] = uVar4;
    puStackX0[1] = 0x3020;
    *puStackX0 = 0xb1000013;
  }
  puStackX0 = puStackX0 + 2;
  return puStackX0;
}



void proc_7F062B00(char *param_1)

{
  u32 uVar1;
  float fVar2;
  
  if (-1 < *param_1) {
    if (clock_timer < 3) {
      *(float *)(param_1 + 0x28) =
           *(float *)(param_1 + 0x28) + *(float *)(param_1 + 0x20) * global_timer_delta;
    }
    else {
      uVar1 = get_random_value();
      fVar2 = (float)uVar1;
      if ((int)uVar1 < 0) {
        fVar2 = fVar2 + 4294967296.00000000;
      }
      *(float *)(param_1 + 0x28) =
           *(float *)(param_1 + 0x28) +
           *(float *)(param_1 + 0x20) * (fVar2 * 0.00000000 * 0.50000000 + 2.00000000);
    }
    if (*(float *)(param_1 + 0x1c) <= *(float *)(param_1 + 0x28)) {
      *param_1 = -1;
    }
    else {
      *param_1 = *param_1 + '\x01';
    }
  }
  return;
}



void proc_7F062BE4(undefined4 *param_1)

{
  int item;
  undefined4 *puVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  ulonglong uVar1;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  int iVar10;
  int hand;
  int iVar11;
  undefined4 uStack68;
  undefined4 uStack64;
  undefined4 *puStack56;
  undefined4 uStack20;
  uint uStack16;
  undefined4 uStack8;
  
  puVar2 = (undefined4 *)*param_1;
  puVar9 = &DAT_80035cc0;
  puVar6 = &uStack68;
  do {
    puVar8 = puVar9 + 3;
    puVar7 = puVar6 + 3;
    *puVar6 = *puVar9;
    puVar6[1] = puVar9[1];
    puVar6[2] = puVar9[2];
    puVar9 = puVar8;
    puVar6 = puVar7;
  } while (puVar8 != (undefined4 *)0x80035cfc);
  hand = 0;
  iVar11 = 0;
  *puVar7 = uRam80035cfc;
  do {
    iVar10 = (int)&ptr_BONDdata->unknown + iVar11;
    item = return_ammo_in_hand(hand);
    if (*(char *)(iVar10 + 0x87f) != '\0') {
      if (item != 0x17) {
        puVar2 = proc_7F061E18(puVar2,(char *)(iVar10 + 0xa54),0);
      }
      if (((((item == 0x13) || (item == 0x12)) || (item == 2)) || ((item == 3 || (item == 0x14))))
         || (item == 0x15)) {
        *puVar2 = 0xbc000002;
        puVar2[1] = 0x80000040;
        puVar2[2] = 0x3860010;
        puVar2[3] = 0x80032448;
        puVar2[4] = 0x3880010;
        puVar2[5] = 0x80032440;
        puVar2[6] = 0x3840010;
        uVar3 = proc_7F078474();
        puVar2[7] = uVar3;
        puVar2[8] = 0x3820010;
        iVar4 = proc_7F078474();
        puVar2[9] = iVar4 + 0x10;
        puVar2 = puVar2 + 10;
      }
      *puVar2 = 0xbc00000e;
      puVar9 = puVar2 + 2;
      uVar5 = proc_7F05997C(0.00000000,300.00000000);
      puVar2[1] = uVar5;
      if (0x10 < *(short *)(*(int *)(iVar10 + 0xb70) + 0xc)) {
        iVar4 = *(int *)(*(int *)(iVar10 + 0xb70) + 8);
        if (*(int *)(iVar4 + 0x40) != 0) {
          puVar2 = (undefined4 *)
                   extract_id_from_object_structure_microcode
                             (iVar10 + 0xb68,*(ushort **)(iVar4 + 0x44));
          if (puVar2 != NULL) {
            *puVar2 = 1;
          }
          if (item == 0x19) {
            save_img_index_to_obj_ani_slot((int)&DAT_80075c10,imgcall);
            puVar9 = (undefined4 *)process_monitor_animation_microcode();
          }
          else {
            puVar9 = (undefined4 *)process_monitor_animation_microcode();
          }
        }
      }
      uStack20 = 4;
      uStack16 = (uint)(byte)ptr_BONDdata->field_FDF | (uint)(byte)ptr_BONDdata->field_FDC << 0x18 |
                 (uint)(byte)ptr_BONDdata->field_FDD << 0x10 |
                 (uint)(byte)ptr_BONDdata->field_FDE << 8;
      uStack64 = 0;
      puStack56 = puVar9;
      proc_7F058C64();
      if ((item == 0x19) && (*(int *)(iVar10 + 0xa90) != 0)) {
        uVar5 = *(uint *)(*(int *)(iVar10 + 0xa90) + 0x14);
        subdraw((int)&uStack68,uVar5,extraout_a2_lo,extraout_a3_lo);
        proc_7F08BD48(*(undefined4 **)(uVar5 + 0xc),(int)*(short *)(*(int *)(uVar5 + 8) + 0xe));
        if (*(int *)(iVar10 + 0xa94) != 0) {
          *(undefined4 *)(iVar10 + 0xa90) = 0;
        }
      }
      uVar1 = check_special_attributes(item,0x400);
      if (uVar1 != 0) {
        puStack56[1] = 0x3000;
        *puStack56 = 0xb6000000;
        if (hand == 0) {
          uStack8 = 3;
          puStack56 = puStack56 + 2;
        }
        else {
          uStack8 = 2;
          puStack56 = puStack56 + 2;
        }
      }
      subdraw((int)&uStack68,iVar10 + 0xb68,extraout_a2_lo_00,extraout_a3_lo_00);
      puVar9 = puStack56;
      uVar1 = check_special_attributes(item,0x400);
      if (uVar1 != 0) {
        puVar9[1] = 0x3000;
        *puVar9 = 0xb6000000;
        puVar9 = puVar9 + 2;
      }
      proc_7F08BD48(*(undefined4 **)(iVar10 + 0xb74),(int)*(short *)(*(int *)(iVar10 + 0xb70) + 0xe)
                   );
      proc_7F058C88();
      *puVar9 = 0xbc00000e;
      puVar2 = puVar9 + 2;
      uVar1 = get_80060824();
      puVar9[1] = (int)uVar1;
      if (item == 0x17) {
        puVar2 = proc_7F061E18(puVar2,(char *)(iVar10 + 0xa54),0);
      }
    }
    hand += 1;
    iVar11 += 0x3a8;
  } while (hand != 2);
  *(undefined4 **)param_1 = puVar2;
  return;
}



undefined4 *
set_enviro_fog_for_items_in_solo_watch_menu
          (undefined4 *DL,longlong param_2,float *buffer,int param_4,int rgba)

{
  ushort *partdesc;
  int *posdata;
  BONDdata *pBVar1;
  ulonglong uVar2;
  int iVar3;
  short sVar5;
  undefined4 uVar4;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 uVar6;
  int iVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  int weapon;
  longlong lVar12;
  object_header *objheader;
  undefined4 *puStackX0;
  float afStack292 [17];
  undefined auStack224 [128];
  undefined auStack96 [12];
  undefined4 *puStack84;
  undefined4 uStack64;
  undefined4 uStack60;
  undefined4 *puStack52;
  undefined4 uStack16;
  int iStack12;
  int iStack8;
  
  weapon = (int)param_2;
  puVar10 = &DAT_80035d00;
  puVar8 = &uStack64;
  do {
    puVar11 = puVar10 + 3;
    puVar9 = puVar8 + 3;
    *puVar8 = *puVar10;
    puVar8[1] = puVar10[1];
    puVar8[2] = puVar10[2];
    puVar10 = puVar11;
    puVar8 = puVar9;
  } while (puVar11 != (undefined4 *)0x80035d3c);
  *puVar9 = uRam80035d3c;
  if ((param_2 == 0x1e) || (param_2 == 0x17)) {
    weapon = 0x3c;
  }
  proc_7F05DA8C(0,weapon);
  uVar2 = proc_7F05CEBC(0);
  if ((uVar2 != 0) && (iVar3 = get_itemtype_in_hand(0), pBVar1 = ptr_BONDdata, iVar3 != 0)) {
    objheader = (object_header *)ptr_BONDdata->copy_of_body_obj_header;
    iVar3 = get_ptr_weapon_model_header_line(weapon);
    if (iVar3 != 0) {
      uVar2 = check_special_attributes(weapon,0x4000);
      puVar10 = (undefined4 *)uVar2;
      if (uVar2 == 0) {
        proc_7F0BD714((int)*(short *)((int)pBVar1->copy_of_body_obj_header + 0xe) << 6);
        lVar12 = 0;
        iVar3 = 0;
        if (0 < *(short *)((int)pBVar1->copy_of_body_obj_header + 0xe)) {
          while( true ) {
            proc_7F057FD0((f32 *)(iVar3 + (int)puVar10));
            iVar3 = (int)lVar12 + 1;
            lVar12 = (longlong)iVar3;
            if ((longlong)*(short *)((int)pBVar1->copy_of_body_obj_header + 0xe) <= lVar12) break;
            iVar3 *= 0x40;
          }
        }
        lVar12 = 0;
        puStack84 = puVar10;
        set_objuse_flag_compute_grp_nums_set_obj_loaded(objheader);
        proc_7F075F68((int)auStack96,(ushort **)objheader,auStack224);
        proc_7F05E978((int)auStack96,0);
        proc_7F05EA94((int)auStack96,1);
        partdesc = *(ushort **)(pBVar1->copy_of_body_obj_header[2] + 4);
        if ((partdesc != NULL) &&
           (puVar8 = (undefined4 *)
                     extract_id_from_object_structure_microcode((int)auStack96,partdesc),
           puVar8 != NULL)) {
          *puVar8 = 0;
        }
        proc_7F058020(buffer,puVar10);
        if ((item_related *)pBVar1->copy_of_body_obj_header[1] == &weapon_gun_revolver) {
          iVar3 = *(int *)(pBVar1->copy_of_body_obj_header[2] + 0x10);
          if (iVar3 == 0) {
            iVar3 = *(int *)(pBVar1->copy_of_body_obj_header[2] + 0x14);
          }
          else {
            init_something_copy_posdata_to_it(*(int **)(iVar3 + 4),(int *)afStack292);
            proc_7F0580C8(buffer,afStack292,(int)(puVar10 + 0x30));
            iVar3 = *(int *)(pBVar1->copy_of_body_obj_header[2] + 0x14);
          }
          if (iVar3 == 0) {
            iVar3 = pBVar1->copy_of_body_obj_header[2];
          }
          else {
            init_something_copy_posdata_to_it(*(int **)(iVar3 + 4),(int *)afStack292);
            proc_7F0580C8(buffer,afStack292,(int)(puVar10 + 0x40));
            iVar3 = pBVar1->copy_of_body_obj_header[2];
          }
        }
        else {
          iVar3 = pBVar1->copy_of_body_obj_header[2];
        }
        partdesc = *(ushort **)(iVar3 + 0x18);
        if (partdesc == NULL) {
          partdesc = *(ushort **)(iVar3 + 0x1c);
        }
        else {
          posdata = *(int **)(partdesc + 2);
          sVar5 = proc_7F06C570(partdesc,0);
          init_something_copy_posdata_to_it(posdata,(int *)afStack292);
          proc_7F0580C8(buffer,afStack292,(int)(puVar10 + (int)sVar5 * 0x10));
          partdesc = *(ushort **)(pBVar1->copy_of_body_obj_header[2] + 0x1c);
        }
        if (partdesc == NULL) {
          sVar5 = *(short *)(pBVar1->copy_of_body_obj_header + 3);
        }
        else {
          posdata = *(int **)(partdesc + 2);
          sVar5 = proc_7F06C570(partdesc,0);
          init_something_copy_posdata_to_it(posdata,(int *)afStack292);
          proc_7F0580C8(buffer,afStack292,(int)(puVar10 + (int)sVar5 * 0x10));
          sVar5 = *(short *)(pBVar1->copy_of_body_obj_header + 3);
        }
        iVar3 = 0;
        if (0x12 < sVar5) {
          iVar7 = pBVar1->copy_of_body_obj_header[2];
          while( true ) {
            partdesc = *(ushort **)(iVar7 + iVar3 + 0x48);
            if (partdesc == NULL) {
              iVar7 = pBVar1->copy_of_body_obj_header[2];
            }
            else {
              puVar10 = (undefined4 *)
                        extract_id_from_object_structure_microcode((int)auStack96,partdesc);
              if (puVar10 != NULL) {
                *puVar10 = 1;
              }
              iVar7 = pBVar1->copy_of_body_obj_header[2];
            }
            partdesc = *(ushort **)(iVar7 + iVar3 + 0x5c);
            if ((partdesc != NULL) &&
               (puVar10 = (undefined4 *)
                          extract_id_from_object_structure_microcode((int)auStack96,partdesc),
               puVar10 != NULL)) {
              *puVar10 = 1;
            }
            iVar3 += 4;
            if (iVar3 == 0x14) break;
            iVar7 = pBVar1->copy_of_body_obj_header[2];
          }
        }
        proc_7F06EFC4((int)auStack96);
        if (((((weapon == 0x13) || (weapon == 0x12)) || (weapon == 2)) ||
            ((weapon == 3 || (weapon == 0x14)))) || (weapon == 0x15)) {
          DL[1] = 0x80000040;
          *DL = 0xbc000002;
          DL[2] = 0x3860010;
          DL[3] = 0x80032448;
          DL[4] = 0x3880010;
          DL[5] = 0x80032440;
          DL[6] = 0x3840010;
          uVar4 = proc_7F078474();
          DL[7] = uVar4;
          puStackX0 = DL + 10;
          DL[8] = 0x3820010;
          weapon = proc_7F078474();
          DL[9] = weapon + 0x10;
          sVar5 = *(short *)(pBVar1->copy_of_body_obj_header + 3);
          uVar4 = extraout_a2_lo_00;
          uVar6 = extraout_a3_lo_00;
        }
        else {
          sVar5 = *(short *)(pBVar1->copy_of_body_obj_header + 3);
          uVar4 = extraout_a2_lo;
          uVar6 = extraout_a3_lo;
          puStackX0 = DL;
        }
        if (((0x10 < sVar5) && (*(int *)(pBVar1->copy_of_body_obj_header[2] + 0x40) != 0)) &&
           (puVar10 = (undefined4 *)
                      extract_id_from_object_structure_microcode
                                ((int)auStack96,
                                 *(ushort **)(pBVar1->copy_of_body_obj_header[2] + 0x44)),
           uVar4 = extraout_a2_lo_01, uVar6 = extraout_a3_lo_01, puVar10 != NULL)) {
          *puVar10 = 0;
          uVar4 = extraout_a2_lo_01;
          uVar6 = extraout_a3_lo_01;
        }
        puStack52 = puStackX0;
        if (param_4 < 0xff) {
          uStack16 = 5;
          iStack8 = rgba;
          iStack12 = param_4;
        }
        else {
          uStack16 = 4;
          iStack12 = rgba;
        }
        uStack60 = 0;
        subdraw((int)&uStack64,(uint)auStack96,uVar4,uVar6);
        DL = puStack52;
        proc_7F058C64();
        weapon = 0;
        if (0 < *(short *)((int)pBVar1->copy_of_body_obj_header + 0xe)) {
          do {
            proc_7F058020((undefined4 *)((int)puStack84 + weapon),afStack292);
            proc_7F058C9C((int)afStack292,puStack84 + (int)lVar12 * 0x10);
            lVar12 = (longlong)((int)lVar12 + 1);
            weapon += 0x40;
          } while (lVar12 < (longlong)*(short *)((int)pBVar1->copy_of_body_obj_header + 0xe));
        }
        proc_7F058C88();
      }
    }
  }
  return DL;
}



undefined4 * proc_7F0634D8(undefined4 *param_1,longlong param_2,float *param_3,int param_4)

{
  undefined4 *puVar1;
  
  puVar1 = set_enviro_fog_for_items_in_solo_watch_menu(param_1,param_2,param_3,param_4,-0x100);
  return puVar1;
}



undefined4 * proc_7F0634FC(undefined4 *param_1,longlong param_2,float *param_3)

{
  undefined4 *puVar1;
  
  puVar1 = proc_7F0634D8(param_1,param_2,param_3,0xff);
  return puVar1;
}



void proc_7F06351C(undefined4 *param_1,float *param_2,float *param_3,float *param_4,
                  undefined4 *param_5,float *param_6,float *param_7)

{
  float afStack64 [16];
  
  init_something_copy_posdata_to_it(param_1,(int *)param_7);
  proc_7F058068(param_2,param_7);
  proc_7F058068(param_3,param_7);
  proc_7F058068(param_4,param_7);
  init_something_copy_posdata_to_it(param_5,(int *)afStack64);
  proc_7F058068(afStack64,param_7);
  proc_7F058068(param_6,param_7);
  return;
}



undefined4
proc_7F06359C(undefined4 param_1,float *param_2,longlong param_3,longlong param_4,int param_5,
             char *param_6)

{
  int *posdata;
  ushort *partdesc;
  float fVar1;
  ulonglong uVar2;
  int iVar5;
  longlong lVar3;
  int iVar6;
  longlong lVar4;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 extraout_a0_05;
  undefined8 extraout_a0_06;
  undefined8 extraout_a0_07;
  undefined8 extraout_a0_08;
  undefined8 extraout_a0_09;
  undefined8 extraout_a0_10;
  undefined8 extraout_a0_11;
  undefined8 extraout_a0_12;
  undefined8 extraout_a0_13;
  undefined8 extraout_a0_14;
  undefined8 extraout_a0_15;
  undefined8 extraout_a0_16;
  undefined8 extraout_a0_17;
  undefined8 extraout_a0_18;
  undefined8 extraout_a0_19;
  undefined8 extraout_a0_20;
  undefined8 uVar7;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 *puVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float extraout_f12_12;
  float extraout_f12_13;
  float fVar12;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  float extraout_f14_07;
  float extraout_f14_08;
  float extraout_f14_09;
  float extraout_f14_10;
  float extraout_f14_11;
  float extraout_f14_12;
  float extraout_f14_13;
  float fVar13;
  int iStack1224;
  undefined4 uStack1216;
  undefined4 uStack1212;
  undefined4 uStack1208;
  undefined4 uStack1204;
  undefined4 uStack1200;
  undefined4 uStack1196;
  undefined4 uStack1192;
  float fStack1188;
  undefined4 uStack1184;
  undefined4 uStack1180;
  undefined4 uStack1176;
  undefined4 uStack1172;
  undefined4 uStack1168;
  undefined4 uStack1164;
  undefined4 uStack1160;
  f32 afStack1156 [16];
  undefined4 uStack1092;
  undefined4 uStack1088;
  undefined4 uStack1084;
  undefined4 uStack1080;
  undefined4 uStack1076;
  undefined4 uStack1072;
  undefined4 uStack1068;
  undefined4 uStack1064;
  undefined4 uStack1060;
  undefined4 uStack1056;
  float fStack1052;
  undefined4 uStack1048;
  undefined4 uStack1044;
  undefined4 uStack1040;
  undefined4 uStack1036;
  undefined4 uStack1032;
  float fStack1028;
  undefined4 uStack1024;
  undefined4 uStack1020;
  undefined4 uStack1016;
  undefined4 uStack1012;
  undefined4 uStack1008;
  float fStack1004;
  undefined4 uStack1000;
  undefined4 uStack996;
  undefined4 uStack992;
  undefined4 uStack988;
  undefined4 uStack984;
  float fStack980;
  undefined4 uStack976;
  undefined4 uStack972;
  undefined4 uStack968;
  undefined4 uStack964;
  undefined4 uStack960;
  float fStack956;
  undefined4 uStack952;
  undefined4 uStack948;
  undefined4 uStack944;
  undefined4 uStack940;
  undefined4 uStack936;
  float fStack932;
  undefined4 uStack928;
  undefined4 uStack924;
  undefined4 uStack920;
  undefined4 uStack916;
  undefined4 uStack912;
  undefined4 uStack908;
  undefined4 uStack904;
  undefined4 uStack900;
  undefined4 uStack896;
  undefined4 uStack892;
  int iStack888;
  undefined4 uStack884;
  undefined4 uStack880;
  f32 afStack876 [16];
  float afStack812 [16];
  f32 afStack748 [16];
  float afStack684 [16];
  undefined4 auStack620 [16];
  undefined4 auStack556 [16];
  float afStack492 [16];
  float afStack428 [19];
  object_header *poStack352;
  float afStack348 [16];
  float afStack284 [17];
  undefined auStack216 [120];
  undefined auStack96 [12];
  undefined4 *puStack84;
  undefined4 uStack64;
  undefined4 uStack60;
  undefined4 uStack52;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  
  puVar11 = &DAT_80035d40;
  puVar8 = &uStack64;
  do {
    puVar10 = puVar11 + 3;
    puVar9 = puVar8 + 3;
    *puVar8 = *puVar11;
    puVar8[1] = puVar11[1];
    puVar8[2] = puVar11[2];
    puVar11 = puVar10;
    puVar8 = puVar9;
  } while (puVar10 != (undefined4 *)0x80035d7c);
  *puVar9 = uRam80035d7c;
  proc_7F05DA8C(0,0x55);
  uVar2 = proc_7F05CEBC(0);
  if ((uVar2 != 0) && (iVar5 = get_itemtype_in_hand(0), iVar5 != 0)) {
    poStack352 = (object_header *)ptr_BONDdata->copy_of_body_obj_header;
    lVar3 = (longlong)(int)poStack352;
    proc_7F0BD714((int)*(short *)((int)ptr_BONDdata->copy_of_body_obj_header + 0xe) << 6);
    lVar4 = lVar3;
    set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack352);
    proc_7F075F68((int)auStack96,(ushort **)poStack352,auStack216);
    puVar11 = (undefined4 *)lVar3;
    puStack84 = puVar11;
    proc_7F058020(param_2,puVar11);
    iStack1224 = 4;
    iVar5 = 1;
    do {
      posdata = *(int **)(*(int *)(poStack352->offset_obj_offset_block + iStack1224) + 4);
      if (iVar5 == 2) {
        iVar6 = get_cur_controller_horz_stick_pos(*param_6);
        proc_7F058688((-(float)iVar6 * flt_80053ED4 * flt_80053ED8) / 360.00000000,extraout_a0,
                      afStack284);
        lVar4 = get_cur_controller_vert_stick_pos(*param_6);
        proc_7F058570((-(float)(int)lVar4 * flt_80053EDC * flt_80053EE0) / 360.00000000,
                      extraout_a0_00,afStack348);
        proc_7F058068(afStack348,afStack284);
        proc_7F058998(posdata,(int)afStack284);
      }
      else {
        init_something_copy_posdata_to_it(posdata,(int *)afStack284);
      }
      proc_7F0580C8(param_2,afStack284,(int)(puVar11 + iVar5 * 0x10));
      iVar5 += 1;
      iStack1224 += 4;
    } while (iVar5 < 0xd);
    proc_7F06EFC4((int)auStack96);
    if (param_3 < 0xff) {
      uStack16 = 5;
      uStack12 = (undefined4)param_3;
      uStack8 = 0xffffff00;
    }
    else {
      uStack16 = 1;
    }
    uStack60 = 1;
    uStack52 = param_1;
    subdraw((int)&uStack64,(uint)auStack96,extraout_a2_lo,extraout_a3_lo);
    param_1 = uStack52;
    proc_7F058C64();
    puVar11 = (undefined4 *)lVar4;
    lVar3 = 0;
    iVar5 = 0;
    if (0 < poStack352->num_object_grps) {
      do {
        proc_7F058020((undefined4 *)((int)puStack84 + iVar5),afStack284);
        proc_7F058C9C((int)afStack284,puStack84 + (int)lVar3 * 0x10);
        puVar11 = (undefined4 *)lVar4;
        lVar3 = (longlong)((int)lVar3 + 1);
        iVar5 += 0x40;
      } while (lVar3 < (longlong)poStack352->num_object_grps);
    }
    proc_7F058C88();
    if (param_4 != 0) {
      iVar5 = 0;
      partdesc = *(ushort **)(poStack352->offset_obj_offset_block + 0x34);
      if (partdesc != NULL) {
        puVar11 = (undefined4 *)extract_id_from_object_structure_microcode((int)auStack96,partdesc);
        *puVar11 = 0;
      }
      proc_7F0BD714((int)poStack352->num_object_grps << 6);
      fVar1 = flt_80053EE4;
      fVar12 = extraout_f12;
      fVar13 = extraout_f14;
      puStack84 = puVar11;
      do {
        proc_7F059694(afStack812,fVar12,fVar13,-5.00000000,2000.00000000,-168.00000000,-5.00000000,
                      0.00000000,-168.00000000,0.00000000);
        proc_7F059694(afStack428,extraout_f12_00,extraout_f14_00,-5.00000000,2000.00000000,
                      -168.00000000,-5.00000000,0.00000000,-168.00000000,0.00000000);
        proc_7F057FD0(afStack748);
        proc_7F057FD0(afStack876);
        proc_7F058020(afStack876,auStack620);
        if (iVar5 == 2) {
          iStack888 = *(int *)(param_5 + 0x58);
          uStack884 = *(undefined4 *)(param_5 + 0x5c);
          uStack880 = *(undefined4 *)(param_5 + 0x60);
          init_something_copy_posdata_to_it(&iStack888,(int *)afStack492);
          iVar6 = get_cur_controller_horz_stick_pos(*param_6);
          proc_7F058688((-(float)iVar6 * flt_80053EE8 * flt_80053EEC) / 360.00000000,extraout_a0_01,
                        afStack284);
          iVar6 = get_cur_controller_vert_stick_pos(*param_6);
          proc_7F058570((-(float)iVar6 * flt_80053EF0 * flt_80053EF4) / 360.00000000,extraout_a0_02,
                        afStack348);
          proc_7F058068(afStack348,afStack284);
          proc_7F058068(afStack492,afStack284);
          proc_7F0580C8(afStack812,afStack284,(int)auStack556);
          proc_7F058020(auStack556,puVar11 + 0x20);
          fVar12 = extraout_f12_01;
          fVar13 = extraout_f14_01;
        }
        else {
          if (iVar5 == 0xb) {
            uStack912 = DAT_80035d80;
            uStack908 = DAT_80035d84;
            uStack904 = DAT_80035d88;
            uStack900 = *(undefined4 *)(param_5 + 0xc4);
            uStack896 = *(undefined4 *)(param_5 + 200);
            uStack892 = *(undefined4 *)(param_5 + 0xcc);
            uVar2 = get_controller_buttons_held(*param_6,R_TRIG);
            uVar7 = extraout_a0_03;
            if (uVar2 != 0) {
              proc_7F0585FC(flt_80053EF8,extraout_a0_03,(float *)afStack748);
              uVar7 = extraout_a0_04;
            }
            proc_7F058570(flt_80053EFC,uVar7,afStack684);
            proc_7F06351C(&uStack912,(float *)afStack748,afStack684,(float *)afStack876,&uStack900,
                          afStack812,afStack428);
            proc_7F058020(afStack428,puVar11 + 0xb0);
            fVar12 = extraout_f12_02;
            fVar13 = extraout_f14_02;
          }
          else {
            if (iVar5 == 4) {
              uStack936 = DAT_80035d8c;
              fStack932 = DAT_80035d90;
              uStack928 = DAT_80035d94;
              uStack924 = *(undefined4 *)(param_5 + 0x70);
              uStack920 = *(undefined4 *)(param_5 + 0x74);
              uStack916 = *(undefined4 *)(param_5 + 0x78);
              uVar2 = get_controller_buttons_held(*param_6,U_CBUTTONS);
              if (uVar2 != 0) {
                fStack932 = fStack932 + -10.00000000;
              }
              proc_7F058570(fVar1,extraout_a0_05,afStack684);
              proc_7F06351C(&uStack936,(float *)afStack748,afStack684,(float *)afStack876,&uStack924
                            ,afStack812,afStack428);
              proc_7F058020(afStack428,puVar11 + 0x40);
              fVar12 = extraout_f12_03;
              fVar13 = extraout_f14_03;
            }
            else {
              if (iVar5 == 5) {
                uStack960 = DAT_80035d98;
                fStack956 = DAT_80035d9c;
                uStack952 = DAT_80035da0;
                uStack948 = *(undefined4 *)(param_5 + 0x7c);
                uStack944 = *(undefined4 *)(param_5 + 0x80);
                uStack940 = *(undefined4 *)(param_5 + 0x84);
                uVar2 = get_controller_buttons_held(*param_6,D_CBUTTONS);
                if (uVar2 != 0) {
                  fStack956 = fStack956 + -10.00000000;
                }
                proc_7F058570(fVar1,extraout_a0_06,afStack684);
                proc_7F06351C(&uStack960,(float *)afStack748,afStack684,(float *)afStack876,
                              &uStack948,afStack812,afStack428);
                proc_7F058020(afStack428,puVar11 + 0x50);
                fVar12 = extraout_f12_04;
                fVar13 = extraout_f14_04;
              }
              else {
                if (iVar5 == 6) {
                  uStack984 = DAT_80035da4;
                  fStack980 = DAT_80035da8;
                  uStack976 = DAT_80035dac;
                  uStack972 = *(undefined4 *)(param_5 + 0x88);
                  uStack968 = *(undefined4 *)(param_5 + 0x8c);
                  uStack964 = *(undefined4 *)(param_5 + 0x90);
                  uVar2 = get_controller_buttons_held(*param_6,L_CBUTTONS);
                  if (uVar2 != 0) {
                    fStack980 = fStack980 + -10.00000000;
                  }
                  proc_7F058570(fVar1,extraout_a0_07,afStack684);
                  proc_7F06351C(&uStack984,(float *)afStack748,afStack684,(float *)afStack876,
                                &uStack972,afStack812,afStack428);
                  proc_7F058020(afStack428,puVar11 + 0x60);
                  fVar12 = extraout_f12_05;
                  fVar13 = extraout_f14_05;
                }
                else {
                  if (iVar5 == 7) {
                    uStack1008 = DAT_80035db0;
                    fStack1004 = DAT_80035db4;
                    uStack1000 = DAT_80035db8;
                    uStack996 = *(undefined4 *)(param_5 + 0x94);
                    uStack992 = *(undefined4 *)(param_5 + 0x98);
                    uStack988 = *(undefined4 *)(param_5 + 0x9c);
                    uVar2 = get_controller_buttons_held(*param_6,R_CBUTTONS);
                    if (uVar2 != 0) {
                      fStack1004 = fStack1004 + -10.00000000;
                    }
                    proc_7F058570(fVar1,extraout_a0_08,afStack684);
                    proc_7F06351C(&uStack1008,(float *)afStack748,afStack684,(float *)afStack876,
                                  &uStack996,afStack812,afStack428);
                    proc_7F058020(afStack428,puVar11 + 0x70);
                    fVar12 = extraout_f12_06;
                    fVar13 = extraout_f14_06;
                  }
                  else {
                    if (iVar5 == 9) {
                      uStack1032 = DAT_80035dbc;
                      fStack1028 = DAT_80035dc0;
                      uStack1024 = DAT_80035dc4;
                      uStack1020 = *(undefined4 *)(param_5 + 0xac);
                      uStack1016 = *(undefined4 *)(param_5 + 0xb0);
                      uStack1012 = *(undefined4 *)(param_5 + 0xb4);
                      uVar2 = get_controller_buttons_held(*param_6,B_BUTTON);
                      if (uVar2 != 0) {
                        fStack1028 = fStack1028 + -10.00000000;
                      }
                      proc_7F058570(fVar1,extraout_a0_09,afStack684);
                      proc_7F06351C(&uStack1032,(float *)afStack748,afStack684,(float *)afStack876,
                                    &uStack1020,afStack812,afStack428);
                      proc_7F058020(afStack428,puVar11 + 0x90);
                      fVar12 = extraout_f12_07;
                      fVar13 = extraout_f14_07;
                    }
                    else {
                      if (iVar5 == 8) {
                        uStack1056 = DAT_80035dc8;
                        fStack1052 = DAT_80035dcc;
                        uStack1048 = DAT_80035dd0;
                        uStack1044 = *(undefined4 *)(param_5 + 0xa0);
                        uStack1040 = *(undefined4 *)(param_5 + 0xa4);
                        uStack1036 = *(undefined4 *)(param_5 + 0xa8);
                        uVar2 = get_controller_buttons_held(*param_6,A_BUTTON);
                        if (uVar2 != 0) {
                          fStack1052 = fStack1052 + -10.00000000;
                        }
                        proc_7F058570(fVar1,extraout_a0_10,afStack684);
                        proc_7F06351C(&uStack1056,(float *)afStack748,afStack684,(float *)afStack876
                                      ,&uStack1044,afStack812,afStack428);
                        proc_7F058020(afStack428,puVar11 + 0x80);
                        fVar12 = extraout_f12_08;
                        fVar13 = extraout_f14_08;
                      }
                      else {
                        if (iVar5 == 10) {
                          uStack1080 = DAT_80035dd4;
                          uStack1076 = DAT_80035dd8;
                          uStack1072 = DAT_80035ddc;
                          uStack1068 = *(undefined4 *)(param_5 + 0xb8);
                          uStack1064 = *(undefined4 *)(param_5 + 0xbc);
                          uStack1060 = *(undefined4 *)(param_5 + 0xc0);
                          uVar2 = get_controller_buttons_held(*param_6,L_TRIG);
                          uVar7 = extraout_a0_11;
                          if (uVar2 != 0) {
                            proc_7F0585FC(flt_80053F00,extraout_a0_11,(float *)afStack748);
                            uVar7 = extraout_a0_12;
                          }
                          proc_7F058570(flt_80053F04,uVar7,afStack684);
                          proc_7F06351C(&uStack1080,(float *)afStack748,afStack684,
                                        (float *)afStack876,&uStack1068,afStack812,afStack428);
                          proc_7F058020(afStack428,puVar11 + 0xa0);
                          fVar12 = extraout_f12_09;
                          fVar13 = extraout_f14_09;
                        }
                        else {
                          if (iVar5 == 3) {
                            uStack1168 = DAT_80035de0;
                            uStack1164 = DAT_80035de4;
                            uStack1160 = DAT_80035de8;
                            uStack1092 = *(undefined4 *)(param_5 + 100);
                            uStack1088 = *(undefined4 *)(param_5 + 0x68);
                            uStack1084 = *(undefined4 *)(param_5 + 0x6c);
                            proc_7F057FD0(afStack1156);
                            uVar2 = get_controller_buttons_held(*param_6,U_JPAD);
                            if (uVar2 == 0) {
                              uVar2 = get_controller_buttons_held(*param_6,D_JPAD);
                              if (uVar2 != 0) {
                                proc_7F058570(flt_80053F0C,extraout_a0_14,afStack748);
                              }
                              extraout_a0_15._7_1_ = *param_6;
                            }
                            else {
                              proc_7F058570(flt_80053F08,extraout_a0_13,afStack748);
                              extraout_a0_15._7_1_ = *param_6;
                            }
                            uVar2 = get_controller_buttons_held((char)extraout_a0_15,L_JPAD);
                            if (uVar2 == 0) {
                              uVar2 = get_controller_buttons_held(*param_6,R_JPAD);
                              if (uVar2 != 0) {
                                proc_7F058688(flt_80053F14,extraout_a0_16,(float *)afStack1156);
                              }
                            }
                            else {
                              proc_7F058688(flt_80053F10,extraout_a0_15,(float *)afStack1156);
                            }
                            proc_7F058068((float *)afStack1156,(float *)afStack748);
                            proc_7F058570(flt_80053F18,extraout_a0_17,afStack684);
                            proc_7F06351C(&uStack1168,(float *)afStack748,afStack684,
                                          (float *)afStack876,&uStack1092,afStack812,afStack428);
                            proc_7F058020(afStack428,puVar11 + 0x30);
                            fVar12 = extraout_f12_10;
                            fVar13 = extraout_f14_10;
                          }
                          else {
                            if (iVar5 == 1) {
                              uStack1192 = DAT_80035dec;
                              fStack1188 = DAT_80035df0;
                              uStack1184 = DAT_80035df4;
                              uStack1180 = *(undefined4 *)(param_5 + 0x4c);
                              uStack1176 = *(undefined4 *)(param_5 + 0x50);
                              uStack1172 = *(undefined4 *)(param_5 + 0x54);
                              uVar2 = get_controller_buttons_held(*param_6,START_BUTTON);
                              if (uVar2 != 0) {
                                fStack1188 = fStack1188 + -10.00000000;
                              }
                              proc_7F058570(fVar1,extraout_a0_18,afStack684);
                              proc_7F06351C(&uStack1192,(float *)afStack748,afStack684,
                                            (float *)afStack876,&uStack1180,afStack812,afStack428);
                              proc_7F058020(afStack428,puVar11 + 0x10);
                              fVar12 = extraout_f12_11;
                              fVar13 = extraout_f14_11;
                            }
                            else {
                              if (iVar5 == 0xc) {
                                uStack1216 = DAT_80035df8;
                                uStack1212 = DAT_80035dfc;
                                uStack1208 = DAT_80035e00;
                                uStack1204 = *(undefined4 *)(param_5 + 0xd0);
                                uStack1200 = *(undefined4 *)(param_5 + 0xd4);
                                uStack1196 = *(undefined4 *)(param_5 + 0xd8);
                                uVar2 = get_controller_buttons_held(*param_6,Z_TRIG);
                                uVar7 = extraout_a0_19;
                                if (uVar2 != 0) {
                                  proc_7F058570(flt_80053F1C,extraout_a0_19,afStack748);
                                  uVar7 = extraout_a0_20;
                                }
                                proc_7F058688(flt_80053F20,uVar7,afStack684);
                                proc_7F06351C(&uStack1216,(float *)afStack748,afStack684,
                                              (float *)afStack876,&uStack1204,afStack812,afStack428)
                                ;
                                proc_7F058020(afStack428,puVar11 + 0xc0);
                                fVar12 = extraout_f12_12;
                                fVar13 = extraout_f14_12;
                              }
                              else {
                                proc_7F058020(param_2,puVar11 + iVar5 * 0x10);
                                fVar12 = extraout_f12_13;
                                fVar13 = extraout_f14_13;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        iVar5 += 1;
      } while (iVar5 < 0xd);
      proc_7F06EFC4((int)auStack96);
      uStack52 = param_1;
      subdraw((int)&uStack64,(uint)auStack96,extraout_a2_lo_00,extraout_a3_lo_00);
      param_1 = uStack52;
      proc_7F058C64();
      lVar4 = 0;
      iVar5 = 0;
      if (0 < poStack352->num_object_grps) {
        do {
          proc_7F058020((undefined4 *)((int)puStack84 + iVar5),afStack284);
          proc_7F058C9C((int)afStack284,puStack84 + (int)lVar4 * 0x10);
          lVar4 = (longlong)((int)lVar4 + 1);
          iVar5 += 0x40;
        } while (lVar4 < (longlong)poStack352->num_object_grps);
      }
      proc_7F058C88();
    }
  }
  return param_1;
}



undefined4
proc_7F064364(undefined4 param_1,float *param_2,longlong param_3,int param_4,char *param_5)

{
  undefined4 uVar1;
  
  uVar1 = proc_7F06359C(param_1,param_2,0xff,param_3,param_4,param_5);
  return uVar1;
}



undefined4 * proc_7F0643A0(void)

{
  if (DAT_80075db8 == 0) {
    return &DAT_80075db8;
  }
  if (DAT_80075dbc == 0) {
    return &DAT_80075dbc;
  }
  if (DAT_80075dc0 == 0) {
    return &DAT_80075dc0;
  }
  if (DAT_80075dc4 == 0) {
    return &DAT_80075dc4;
  }
  return NULL;
}



void recall_joy2_hits_edit_detail_edit_flag(void)

{
  short sVar1;
  hit_header **pphVar2;
  undefined4 in_v0_lo;
  int iVar3;
  sfxdata *data;
  int in_a0_lo;
  char *in_a1_lo;
  int in_a2_lo;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined **ppuVar6;
  undefined **ppuVar7;
  undefined *puStack68;
  undefined *puStack64;
  undefined2 uStack60;
  undefined4 auStack56 [10];
  sfxdata *psStack16;
  u32 uStack12;
  u32 uStack8;
  undefined4 uStack4;
  
  proc_7F0539E4((float *)(in_a1_lo + 8));
  uStack4 = in_v0_lo;
  uStack8 = get_random_value();
  uStack12 = get_random_value();
  DAT_800483c4 = in_a2_lo;
  iVar3 = get_debug_joy2hitsedit_flag();
  if (iVar3 == 0) {
    get_debug_joy2detailedit_flag();
  }
  if (((((in_a0_lo != 0x1d) && (in_a0_lo != 0x1c)) && (in_a0_lo != 0x1b)) &&
      (((in_a0_lo != 0x21 && (in_a0_lo != 0x2f)) &&
       ((in_a0_lo != 0x30 && ((in_a0_lo != 0x22 && (in_a0_lo != 0x17)))))))) && (in_a0_lo != 0x3c))
  {
    data = (sfxdata *)proc_7F0643A0();
    if (data != NULL) {
      if ((*in_a1_lo == '\x03') || (*in_a1_lo == '\x06')) {
        if (in_a0_lo == 2) {
          psStack16 = data;
          play_sfx_a1(ptr_sfx_buf,0x4a,data);
        }
        else {
          if (in_a0_lo == 1) {
            puStack64 = PTR_DAT_80035e2c;
            uStack60 = PTR_DAT_80035e30._0_2_;
            psStack16 = data;
            play_sfx_a1(ptr_sfx_buf,*(short *)((int)&puStack68 + (uStack8 % 3) * 2 + 4),data);
          }
          else {
            puStack68 = PTR_DAT_80035e34;
            psStack16 = data;
            play_sfx_a1(ptr_sfx_buf,*(short *)((int)&puStack68 + (uStack8 & 1) * 2),data);
          }
        }
        if ((longlong)psStack16->target_volume != 0) {
          music_related_36((longlong)psStack16->target_volume,8,uStack4);
        }
      }
      else {
        if (in_a0_lo == 0x16) {
          psStack16 = data;
          play_sfx_a1(ptr_sfx_buf,0x5b,data);
        }
        else {
          ppuVar6 = &dword_80035E04;
          puVar4 = auStack56;
          do {
            ppuVar7 = ppuVar6 + 3;
            puVar5 = puVar4 + 3;
            *(undefined **)puVar4 = *ppuVar6;
            *(undefined **)(puVar4 + 1) = ppuVar6[1];
            *(undefined **)(puVar4 + 2) = ppuVar6[2];
            ppuVar6 = ppuVar7;
            puVar4 = puVar5;
          } while (ppuVar7 != (undefined **)0x80035e28);
          *puVar5 = uRam80035e28;
          psStack16 = data;
          play_sfx_a1(ptr_sfx_buf,*(short *)((int)auStack56 + (uStack8 % 0x14) * 2),data);
        }
        if ((longlong)psStack16->target_volume != 0) {
          music_related_36((longlong)psStack16->target_volume,8,uStack4);
        }
      }
    }
    psStack16 = (sfxdata *)proc_7F0643A0();
    if (((psStack16 != NULL) && (-1 < in_a2_lo)) &&
       (pphVar2 = hit_header_array[*(uint *)(image_entries + in_a2_lo) >> 0x1c], pphVar2 != NULL)) {
      sVar1 = *(short *)(pphVar2 + 2);
      if (0 < sVar1) {
        if (sVar1 == 0) {
          trap(0x1c00);
        }
        play_sfx_a1(ptr_sfx_buf,
                    *(short *)((int)&(*pphVar2)->pImageIDArray + (uStack12 % (int)sVar1) * 2),
                    psStack16);
      }
      if (psStack16->target_volume != 0) {
        proc_7F053A10(psStack16->target_volume,(float *)(in_a1_lo + 8));
      }
    }
  }
  return;
}



void proc_7F064720(float *param_1)

{
  sfxdata *data;
  
  data = (sfxdata *)proc_7F0643A0();
  if (data != NULL) {
    play_sfx_a1(ptr_sfx_buf,0x46,data);
    if (data->target_volume != 0) {
      proc_7F053A10(data->target_volume,param_1);
    }
  }
  return;
}



void recall_joy2_hits_edit_flag(int param_1,float *param_2,int param_3)

{
  short sVar1;
  hit_header **pphVar2;
  sfxdata *data;
  undefined **ppuVar3;
  undefined **ppuVar4;
  undefined4 *puVar5;
  undefined4 auStack88 [18];
  undefined *puStack16;
  u32 uStack12;
  u32 uStack8;
  sfxdata *psStack4;
  
  uStack8 = get_random_value();
  uStack12 = get_random_value();
  DAT_800483c4 = param_3;
  get_debug_joy2hitsedit_flag();
  data = (sfxdata *)proc_7F0643A0();
  if (data != NULL) {
    if (param_1 != 0x17) {
      if (param_1 == 0x16) {
        puStack16 = PTR_DAT_80035e38;
        psStack4 = data;
        play_sfx_a1(ptr_sfx_buf,*(short *)((int)&puStack16 + (uStack8 & 1) * 2),data);
        data = psStack4;
      }
      else {
        ppuVar3 = &PTR_DAT_80035e3c;
        puVar5 = auStack88;
        do {
          ppuVar4 = ppuVar3 + 3;
          *(undefined **)puVar5 = *ppuVar3;
          *(undefined **)(puVar5 + 1) = ppuVar3[1];
          *(undefined **)(puVar5 + 2) = ppuVar3[2];
          ppuVar3 = ppuVar4;
          puVar5 = puVar5 + 3;
        } while (ppuVar4 != &PTR_DAT_80035e84);
        psStack4 = data;
        play_sfx_a1(ptr_sfx_buf,*(short *)((int)auStack88 + (uStack8 % 0x24) * 2),data);
        data = psStack4;
      }
    }
    if (data->target_volume != 0) {
      proc_7F053A10(data->target_volume,param_2);
    }
  }
  data = (sfxdata *)proc_7F0643A0();
  if ((data != NULL) && (-1 < param_3)) {
    pphVar2 = hit_header_array[*(uint *)(image_entries + param_3) >> 0x1c];
    sVar1 = *(short *)(pphVar2 + 2);
    if (0 < sVar1) {
      if (pphVar2 != NULL) {
        if (sVar1 == 0) {
          trap(0x1c00);
        }
        psStack4 = data;
        play_sfx_a1(ptr_sfx_buf,
                    *(short *)((int)&(*pphVar2)->pImageIDArray + (uStack12 % (int)sVar1) * 2),data);
        data = psStack4;
      }
      if (data->target_volume != 0) {
        proc_7F053A10(data->target_volume,param_2);
      }
    }
  }
  return;
}



void proc_7F064934(longlong param_1)

{
  u32 uVar1;
  undefined *puStack12;
  undefined *puStack8;
  undefined2 uStack4;
  
  if ((param_1 != 0x16) && (param_1 != 0x17)) {
    puStack12 = PTR_DAT_80035e84;
    puStack8 = PTR_DAT_80035e88;
    uStack4 = PTR_DAT_80035e8c._0_2_;
    uVar1 = get_random_value();
    play_sfx_a1(ptr_sfx_buf,*(short *)((int)&puStack12 + (uVar1 % 5) * 2),NULL);
  }
  return;
}



undefined4 proc_7F0649AC(longlong param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



void proc_7F0649D8(int param_1)

{
  ITEM_IDS item;
  int iVar2;
  undefined *puVar3;
  ulonglong uVar1;
  int iVar4;
  int *piVar5;
  
  piVar5 = &ptr_BONDdata->unknown + param_1 * 0xea;
  item = get_item_in_hand(param_1);
  iVar4 = piVar5[0x227];
  iVar2 = get_ammo_in_hands_weapon(param_1);
  puVar3 = get_ptr_item_statistics(item);
  iVar2 += iVar4;
  if ((longlong)iVar2 < (longlong)*(short *)(puVar3 + 0x20)) {
    piVar5[0x227] = iVar2;
  }
  else {
    piVar5[0x227] = (int)*(short *)(puVar3 + 0x20);
  }
  uVar1 = check_special_attributes(item,0x200000);
  if (uVar1 == 0) {
    (&ptr_BONDdata->unknown + *(int *)(puVar3 + 0x1c))[0x44c] =
         ((&ptr_BONDdata->unknown + *(int *)(puVar3 + 0x1c))[0x44c] - piVar5[0x227]) + iVar4;
  }
  else {
    ptr_BONDdata->ammo_totals[*(int *)(puVar3 + 0x1c)] = 0;
  }
  if (item == ITEM_ROCKETLAUNCH) {
    proc_7F05FA7C(param_1);
  }
  else {
    if ((item == ITEM_SHOTGUN) || (item == ITEM_AUTOSHOT)) {
      iVar4 = get_ammo_in_hands_weapon(param_1);
      if (iVar4 < 5) {
        piVar5[0x229] = iVar4;
      }
      else {
        piVar5[0x229] = 5;
      }
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f066818) overlaps instruction at (ram,0x7f066814)
// 

void handle_weapon_id_values_possibly_1st_person_animation(uint param_1,int param_2)

{
  longlong weapon;
  int weapon_00;
  longlong lVar1;
  ITEM_IDS item;
  ulonglong uVar2;
  undefined *puVar3;
  u32 uVar4;
  int weapon_01;
  BONDdata *pBVar5;
  int *piVar6;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  longlong extraout_a0_04;
  longlong extraout_a0_05;
  longlong extraout_a0_06;
  longlong extraout_a0_07;
  longlong extraout_a0_08;
  longlong extraout_a0_09;
  longlong extraout_a0_10;
  longlong extraout_a0_11;
  longlong extraout_a0_12;
  longlong extraout_a0_13;
  longlong extraout_a0_14;
  longlong extraout_a0_15;
  longlong extraout_a0_16;
  longlong extraout_a0_17;
  longlong extraout_a0_18;
  longlong extraout_a0_19;
  undefined8 extraout_a0_20;
  undefined8 extraout_a0_21;
  longlong extraout_a0_22;
  longlong extraout_a0_23;
  longlong extraout_a0_24;
  undefined8 extraout_a0_25;
  undefined8 extraout_a0_26;
  longlong extraout_a0_27;
  longlong extraout_a0_28;
  longlong extraout_a0_29;
  undefined8 extraout_a0_30;
  undefined8 extraout_a0_31;
  undefined8 uVar7;
  longlong extraout_a0_32;
  undefined8 extraout_a0_33;
  undefined8 extraout_a0_34;
  dword *pdVar8;
  bool bVar12;
  longlong lVar9;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 uVar10;
  undefined8 extraout_a1_01;
  float *pfVar11;
  int iVar13;
  int iVar14;
  char cVar15;
  undefined unaff_s0_lo;
  int *piVar16;
  undefined unaff_s1_lo;
  undefined unaff_retaddr;
  float fVar17;
  float fVar18;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float extraout_f12_12;
  float extraout_f12_13;
  float extraout_f12_14;
  float extraout_f12_15;
  float extraout_f12_16;
  float extraout_f12_17;
  float extraout_f12_18;
  float extraout_f12_19;
  float extraout_f12_20;
  float extraout_f12_21;
  float extraout_f12_22;
  float extraout_f12_23;
  float extraout_f12_24;
  float extraout_f12_25;
  float extraout_f12_26;
  float extraout_f12_27;
  float extraout_f12_28;
  float extraout_f12_29;
  float extraout_f12_30;
  float extraout_f12_31;
  float extraout_f12_32;
  float extraout_f12_33;
  float extraout_f12_34;
  float extraout_f12_35;
  float extraout_f12_36;
  float extraout_f12_37;
  float extraout_f12_38;
  float extraout_f12_39;
  float extraout_f12_40;
  float extraout_f12_41;
  float extraout_f12_42;
  float extraout_f12_43;
  float extraout_f12_44;
  float extraout_f12_45;
  float extraout_f12_46;
  float extraout_f12_47;
  float extraout_f12_48;
  float extraout_f12_49;
  float extraout_f12_50;
  float extraout_f12_51;
  float extraout_f12_52;
  float extraout_f12_53;
  float extraout_f12_54;
  float extraout_f12_55;
  float extraout_f12_56;
  float extraout_f12_57;
  float extraout_f12_58;
  float extraout_f12_59;
  float extraout_f12_60;
  float extraout_f12_61;
  float extraout_f12_62;
  float extraout_f12_63;
  float extraout_f12_64;
  float extraout_f12_65;
  float extraout_f12_66;
  float extraout_f12_67;
  float extraout_f12_68;
  float extraout_f12_69;
  float extraout_f12_70;
  float extraout_f12_71;
  float extraout_f12_72;
  float extraout_f12_73;
  float extraout_f12_74;
  float extraout_f12_75;
  float extraout_f12_76;
  float extraout_f12_77;
  float extraout_f12_78;
  float extraout_f12_79;
  float extraout_f12_80;
  float extraout_f12_81;
  float extraout_f12_82;
  float extraout_f12_83;
  undefined in_stack_fffffe47;
  undefined in_stack_fffffe4b;
  undefined4 in_stack_fffffe58;
  dword *local_15c;
  undefined *local_154;
  undefined2 local_150;
  float *local_148;
  float local_144;
  float local_13c;
  float local_138;
  float afStack308 [18];
  float afStack236 [17];
  float local_a8;
  float afStack164 [18];
  float local_5c;
  int local_58;
  float local_4c;
  int local_48;
  float local_44;
  float local_40;
  float local_38;
  int local_30;
  int local_2c;
  undefined *local_28;
  undefined *local_20;
  int local_1c;
  int *local_14;
  int local_c;
  
  piVar16 = &ptr_BONDdata->unknown + param_1 * 0xea;
  weapon._4_4_ = return_ammo_in_hand(param_1);
  weapon = (longlong)weapon._4_4_;
  weapon_00 = get_ammo_type_for_weapon(weapon._4_4_);
  weapon_01 = piVar16[0x220];
  piVar16[0x220] = param_2;
  piVar16[0x221] = weapon_01;
  if (param_2 == 0) {
    piVar16[0x222] = 1;
  }
  *(undefined *)(piVar16 + 0x21f) = 0;
  *(undefined *)((int)piVar16 + 0x87d) = 0;
  if (clock_timer < 1) {
    weapon_01 = piVar16[0x225];
  }
  else {
    piVar16[0x224] = piVar16[0x224] + clock_timer;
    piVar16[0x223] = piVar16[0x223] + 1;
    weapon_01 = piVar16[0x225];
  }
  piVar16[0x24b] = 0;
  if (weapon_01 == 0) {
    if (piVar16[0x220] == 0) {
      weapon_01 = piVar16[0x226];
      fVar18 = extraout_f12;
LAB_7f064c2c:
      if (weapon_01 != 0) {
        piVar16[0x225] = weapon_01;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        goto LAB_7f064c40;
      }
      weapon_01 = piVar16[0x225];
    }
    else {
      fVar18 = extraout_f12;
      if ((weapon == 0) ||
         ((local_c = weapon_00, uVar2 = check_special_attributes(weapon._4_4_,0x10), uVar2 == 0 &&
          (fVar18 = extraout_f12_00, weapon_00 = local_c, piVar16[0x227] < 1)))) {
        weapon_01 = piVar16[0x226];
        goto LAB_7f064c2c;
      }
      piVar16[0x225] = 1;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      piVar16[0x222] = 0;
      fVar18 = extraout_f12_00;
      weapon_00 = local_c;
LAB_7f064c40:
      weapon_01 = piVar16[0x225];
    }
    piVar16[0x226] = 0;
    if (weapon_01 == 0) {
      if (piVar16[0x227] == 0) {
        if (weapon_00 == 0) {
          weapon_01 = piVar16[0x225];
        }
        else {
          local_c = weapon_00;
          weapon_01 = get_controls_locked_flag();
          fVar18 = extraout_f12_01;
          if (weapon_01 == 0) {
            if (ptr_BONDdata->in_mp_pause_menu == 0) {
              if (((dword_80032458 != 0) && (local_c == 1)) &&
                 ((&ptr_BONDdata->unknown + 1)[0x44c] < 1)) {
                (&ptr_BONDdata->unknown + 1)[0x44c] = 1;
              }
              weapon_01 = get_ammo_in_hands_weapon(param_1);
              if (0 < weapon_01) {
                piVar16[0x225] = 9;
                piVar16[0x224] = 0;
                piVar16[0x223] = 0;
                fVar18 = extraout_f12_02;
                goto LAB_7f064da0;
              }
              if (ptr_BONDdata->field_FC8 == 0) {
                weapon_01 = piVar16[0x225];
                fVar18 = extraout_f12_02;
              }
              else {
                weapon_01 = return_ammo_in_hand(1 - param_1);
                pBVar5 = (BONDdata *)((int)ptr_BONDdata + param_1 * -0x3a8);
                if (pBVar5->field_C3C == 0) {
                  if (pBVar5->left_weapon_animation == 0) {
                    piVar6 = &pBVar5->left_weapon;
                    if (weapon_01 != 0) {
                      if (pBVar5->left_weapon_ammo_in_magazine != 0) {
                        weapon_01 = piVar16[0x225];
                        fVar18 = extraout_f12_03;
                        goto LAB_7f064da4;
                      }
                      local_14 = &pBVar5->left_weapon;
                      weapon_01 = get_ammo_type_for_weapon(weapon_01);
                      fVar18 = extraout_f12_04;
                      if ((weapon_01 == 0) ||
                         (weapon_01 = get_ammo_in_hands_weapon(1 - param_1),
                         fVar18 = extraout_f12_05, piVar6 = local_14, 0 < weapon_01))
                      goto LAB_7f064da0;
                    }
                    local_14 = piVar6;
                    autoadvance_on_deplete_all_ammo();
                    weapon_01 = piVar16[0x226];
                    piVar16[0x223] = 0;
                    piVar16[0x224] = 0;
                    piVar16[0x226] = 0;
                    piVar16[0x225] = weapon_01;
                    weapon_01 = local_14[10];
                    local_14[7] = 0;
                    local_14[8] = 0;
                    local_14[10] = 0;
                    local_14[9] = weapon_01;
                    fVar18 = extraout_f12_06;
                    goto LAB_7f064da0;
                  }
                  weapon_01 = piVar16[0x225];
                  fVar18 = extraout_f12_03;
                }
                else {
                  weapon_01 = piVar16[0x225];
                  fVar18 = extraout_f12_03;
                }
              }
            }
            else {
              weapon_01 = piVar16[0x225];
              fVar18 = extraout_f12_01;
            }
          }
          else {
LAB_7f064da0:
            weapon_01 = piVar16[0x225];
          }
        }
      }
      else {
        weapon_01 = piVar16[0x225];
      }
    }
    else {
      weapon_01 = piVar16[0x225];
    }
  }
  else {
    weapon_01 = piVar16[0x225];
    fVar18 = extraout_f12;
  }
LAB_7f064da4:
  if (weapon_01 == 1) {
    if (false) {
switchD_7f064dc8_caseD_2b:
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      goto LAB_7f064f9c;
    }
    switch(weapon._4_4_) {
    case 1:
      uVar4 = get_random_value();
      if ((uVar4 & 1) == 0) {
        piVar16[0x225] = 0x1e;
      }
      else {
        piVar16[0x225] = 0x20;
      }
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      fVar18 = extraout_f12_10;
      break;
    case 2:
      uVar4 = get_random_value();
      if ((uVar4 & 1) == 0) {
        piVar16[0x225] = 0x11;
      }
      else {
        piVar16[0x225] = 0x14;
      }
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      fVar18 = extraout_f12_09;
      break;
    case 3:
      piVar16[0x225] = 0x17;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      break;
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    case 10:
    case 0xb:
    case 0xc:
    case 0xd:
    case 0xe:
    case 0xf:
    case 0x10:
    case 0x11:
    case 0x13:
    case 0x14:
    case 0x15:
    case 0x16:
    case 0x17:
    case 0x19:
    case 0x1e:
    case 0x20:
    case 0x23:
    case 0x24:
    case 0x3c:
      piVar16[0x225] = 2;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      break;
    case 0x12:
    case 0x18:
      if (5 < piVar16[0x224]) {
        piVar16[0x225] = 2;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        break;
      }
      piVar16[0x302] = 0;
      goto LAB_7f064fa0;
    case 0x1a:
      if (piVar16[0x222] == 0) {
        if (piVar16[0x224] < 0xf0) {
          piVar16[0x302] = 0;
          goto LAB_7f064fa0;
        }
        weapon_01 = piVar16[0x224];
      }
      else {
        weapon_01 = piVar16[0x224];
      }
      ptr_BONDdata->field_105C = weapon_01;
      piVar16[0x225] = 0x1a;
      piVar16[0x223] = 0;
      piVar16[0x224] = 0;
      break;
    case 0x1b:
    case 0x1c:
    case 0x1d:
    case 0x21:
    case 0x22:
    case 0x2f:
    case 0x30:
    case 0x3d:
      piVar16[0x225] = 0x1c;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      break;
    case 0x1f:
      lVar1 = proc_7F05C6FC((int)DWORD_ARRAY_80035a90,fVar18,(float *)(float)piVar16[0x224],
                            (int)(piVar16 + 0x23b));
      if (lVar1 == 0) {
        piVar16[0x225] = 2;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        fVar18 = extraout_f12_11;
      }
      else {
        piVar16[0x24b] = 1;
        fVar18 = extraout_f12_11;
      }
      break;
    case 0x25:
    case 0x26:
    case 0x27:
    case 0x29:
    case 0x2a:
    case 0x2c:
    case 0x2d:
    case 0x2e:
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
    case 0x3a:
    case 0x3b:
    case 0x49:
    case 0x51:
    case 0x52:
    case 0x53:
      piVar16[0x225] = 0x24;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      break;
    case 0x28:
      if (piVar16[0x223] == 0) {
        proc_7F0807B0(0,0,0,0x3f800000);
        piVar16[0x302] = 0;
        fVar18 = extraout_f12_07;
        goto LAB_7f064fa0;
      }
      if (0 < piVar16[0x224]) {
        proc_7F0807E0(0,0,0,0,0,in_stack_fffffe47,in_stack_fffffe4b,unaff_s0_lo,unaff_s1_lo,
                      unaff_retaddr,in_stack_fffffe58);
        piVar16[0x225] = 2;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        fVar18 = extraout_f12_08;
      }
      break;
    default:
      goto switchD_7f064dc8_caseD_2b;
    }
LAB_7f064f9c:
    piVar16[0x302] = 0;
LAB_7f064fa0:
    weapon_01 = piVar16[0x225];
  }
  if (weapon_01 == 2) {
    weapon_01 = get_ammo_type_for_weapon(weapon._4_4_);
    if ((weapon_01 == 0) || (0 < piVar16[0x227])) {
      fVar18 = extraout_f12_12;
      if (false) goto switchD_7f064fe0_caseD_3;
      fVar18 = extraout_f12_12;
      switch(weapon._4_4_) {
      case 2:
        if (piVar16[0x223] == 0) {
          *(undefined *)(piVar16 + 0x21f) = 0;
        }
        else {
          if (piVar16[0x220] == 0) {
            piVar16[0x225] = 3;
            piVar16[0x224] = 0;
            piVar16[0x223] = 0;
            fVar18 = extraout_f12_12;
            break;
          }
          *(undefined *)(piVar16 + 0x21f) = 0;
        }
        *(undefined *)((int)piVar16 + 0x87d) = *(undefined *)(piVar16 + 0x21f);
        fVar18 = extraout_f12_12;
        break;
      case 4:
      case 5:
      case 6:
      case 0xf:
      case 0x10:
      case 0x11:
      case 0x12:
      case 0x13:
      case 0x14:
      case 0x15:
      case 0x16:
      case 0x17:
      case 0x18:
      case 0x19:
      case 0x1e:
      case 0x20:
      case 0x23:
      case 0x24:
        if (piVar16[0x223] != 0) {
          piVar16[0x225] = 3;
          piVar16[0x224] = 0;
          piVar16[0x223] = 0;
          fVar18 = extraout_f12_12;
          break;
        }
        uVar2 = get_num_players();
        if ((uVar2 == 1) ||
           ((weapon_01 = get_ispaused(), weapon_01 == 0 && (ptr_BONDdata->in_mp_pause_menu == 0))))
        {
          *(undefined *)((int)piVar16 + 0x87d) = 1;
        }
        weapon_01 = get_controls_locked_flag();
        bVar12 = weapon_01 == 0;
        if (bVar12) {
          bVar12 = ptr_BONDdata->in_mp_pause_menu == 0;
        }
        *(bool *)(piVar16 + 0x21f) = bVar12;
        proc_7F05E808(param_1);
        cVar15 = *(char *)(piVar16 + 0x21f);
        fVar18 = extraout_f12_14;
        goto LAB_7f065290;
      case 7:
      case 8:
      case 9:
      case 10:
      case 0xb:
      case 0xc:
      case 0xd:
      case 0xe:
        if (((piVar16[0x223] == 0) || (piVar16[0x220] != 0)) ||
           ((uVar2 = check_special_attributes(weapon._4_4_,4), fVar18 = extraout_f12_15, uVar2 != 0
            && ((weapon_01 = get_BONDdata_is_aiming(), fVar18 = extraout_f12_16, weapon_01 == 0 &&
                (fVar18 = extraout_f12_16, piVar16[0x302] % 3 != 0)))))) {
          lVar1 = proc_7F05DFCC(weapon._4_4_);
          if (lVar1 == 0) {
            trap(0x1c00);
          }
          if ((lVar1 == -1) && (piVar16[0x223] == -0x80000000)) {
            trap(0x1800);
          }
          if (piVar16[0x223] % (int)lVar1 != 0) {
            cVar15 = *(char *)(piVar16 + 0x21f);
            fVar18 = extraout_f12_17;
            goto LAB_7f065290;
          }
          uVar2 = get_num_players();
          if ((uVar2 == 1) ||
             ((weapon_01 = get_ispaused(), weapon_01 == 0 && (ptr_BONDdata->in_mp_pause_menu == 0)))
             ) {
            *(undefined *)((int)piVar16 + 0x87d) = 1;
          }
          weapon_01 = get_controls_locked_flag();
          bVar12 = weapon_01 == 0;
          if (bVar12) {
            bVar12 = ptr_BONDdata->in_mp_pause_menu == 0;
          }
          *(bool *)(piVar16 + 0x21f) = bVar12;
          fVar18 = extraout_f12_18;
        }
        else {
          piVar16[0x225] = 3;
          piVar16[0x224] = 0;
          piVar16[0x223] = 0;
        }
        break;
      case 0x1f:
        if ((piVar16[0x223] == 0) || (piVar16[0x220] != 0)) {
          proc_7F05C6FC((int)DWORD_ARRAY_80035b68,extraout_f12_12,NULL,(int)(piVar16 + 0x23b));
          *(undefined *)(piVar16 + 0x21f) = 0;
          piVar16[0x24b] = 1;
          *(undefined *)((int)piVar16 + 0x87d) = *(undefined *)(piVar16 + 0x21f);
          fVar18 = extraout_f12_19;
          if (piVar16[0x223] == 0) {
            weapon_01 = get_controls_locked_flag();
            bVar12 = weapon_01 == 0;
            if (bVar12) {
              bVar12 = ptr_BONDdata->in_mp_pause_menu == 0;
            }
            *(bool *)(piVar16 + 0x21f) = bVar12;
            fVar18 = extraout_f12_20;
          }
        }
        else {
          piVar16[0x225] = 3;
          piVar16[0x224] = 0;
          piVar16[0x223] = 0;
          fVar18 = extraout_f12_12;
        }
        break;
      case 0x28:
      case 0x3c:
        if (piVar16[0x223] == 0) {
          weapon_01 = get_controls_locked_flag();
          bVar12 = weapon_01 == 0;
          if (bVar12) {
            bVar12 = ptr_BONDdata->in_mp_pause_menu == 0;
          }
          *(bool *)(piVar16 + 0x21f) = bVar12;
          fVar18 = extraout_f12_13;
        }
        else {
          piVar16[0x225] = 3;
          piVar16[0x224] = 0;
          piVar16[0x223] = 0;
          fVar18 = extraout_f12_12;
        }
      }
switchD_7f064fe0_caseD_3:
      cVar15 = *(char *)(piVar16 + 0x21f);
LAB_7f065290:
      if (cVar15 == '\0') {
        weapon_01 = piVar16[0x225];
      }
      else {
        if (weapon == 0x28) {
          weapon_01 = piVar16[0x227];
        }
        else {
          uVar4 = get_cur_playernum();
          controller_7000C854(uVar4,extraout_f12_21);
          weapon_01 = cur_player_get_control_type();
          if (weapon_01 < 4) {
            weapon_01 = piVar16[0x227];
            fVar18 = extraout_f12_22;
          }
          else {
            uVar4 = get_cur_playernum();
            uVar2 = get_num_players();
            controller_7000C854((int)uVar2 + uVar4,extraout_f12_23);
            weapon_01 = piVar16[0x227];
            fVar18 = extraout_f12_24;
          }
        }
        piVar16[0x227] = weapon_01 + -1;
        piVar16[0x302] = piVar16[0x302] + 1;
        weapon_01 = piVar16[0x225];
      }
      if (weapon_01 == 2) {
        local_1c = 0;
        uVar2 = proc_7F05DFF0(weapon._4_4_);
        if ((longlong)uVar2 < 1) {
          if (*(char *)(piVar16 + 0x21f) != '\0') {
            local_1c = 1;
          }
        }
        else {
          if ((global_timer != *(int *)((int)ptr_BONDdata + param_1 * -0x3a8 + 0xdf8)) &&
             (piVar16[0x293] < global_timer)) {
            uVar2 = proc_7F05DFF0(weapon._4_4_);
            piVar16[0x293] = (int)uVar2 + global_timer;
            local_1c = 1;
          }
        }
        uVar2 = get_num_players();
        fVar18 = extraout_f12_25;
        if (uVar2 != 1) {
          weapon_01 = get_ispaused();
          fVar18 = extraout_f12_26;
          if (weapon_01 != 0) goto LAB_7f065548;
          fVar18 = extraout_f12_26;
          if (ptr_BONDdata->in_mp_pause_menu != 0) {
            weapon_01 = piVar16[0x225];
            fVar18 = extraout_f12_26;
            goto LAB_7f06554c;
          }
        }
        if (local_1c != 0) {
          if (piVar16[0x291] == 0) {
            weapon_01 = piVar16[0x292];
          }
          else {
            uVar2 = music_related_26(piVar16[0x291]);
            if (uVar2 == 0) {
              weapon_01 = piVar16[0x292];
            }
            else {
              music_related_28(piVar16[0x291]);
              weapon_01 = piVar16[0x292];
            }
          }
          if ((weapon_01 != 0) && (uVar2 = music_related_26(weapon_01), uVar2 != 0)) {
            music_related_28(piVar16[0x292]);
          }
          uVar2 = proc_7F05E014(weapon._4_4_);
          fVar18 = extraout_f12_27;
          if (uVar2 != 0) {
            if (piVar16[0x291] == 0) {
              uVar2 = proc_7F05E014(weapon._4_4_);
              play_sfx_a1(ptr_sfx_buf,(short)uVar2,(sfxdata *)(piVar16 + 0x291));
              fVar18 = extraout_f12_28;
            }
            else {
              fVar18 = extraout_f12_27;
              if (piVar16[0x292] == 0) {
                uVar2 = proc_7F05E014(weapon._4_4_);
                play_sfx_a1(ptr_sfx_buf,(short)uVar2,(sfxdata *)(piVar16 + 0x292));
                fVar18 = extraout_f12_29;
              }
            }
            piVar16[0x294] = global_timer;
          }
        }
        if (weapon != 0x17) goto LAB_7f065548;
        local_20 = PTR_DAT_80035e90;
        uVar4 = get_random_value();
        play_sfx_a1(ptr_sfx_buf,*(short *)((int)&local_20 + (uVar4 & 1) * 2),NULL);
        weapon_01 = piVar16[0x225];
        fVar18 = extraout_f12_30;
      }
      else {
        weapon_01 = piVar16[0x225];
      }
    }
    else {
      if (piVar16[0x223] < 1) {
        piVar16[0x225] = 0xd;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        uVar2 = get_num_players();
        if ((uVar2 == 1) || (weapon_01 = get_ispaused(), fVar18 = extraout_f12_31, weapon_01 == 0))
        {
          play_sfx_a1(ptr_sfx_buf,0x59,NULL);
          fVar18 = extraout_f12_32;
        }
      }
      else {
        piVar16[0x225] = 3;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        fVar18 = extraout_f12_12;
      }
LAB_7f065548:
      weapon_01 = piVar16[0x225];
    }
  }
  else {
    weapon_01 = piVar16[0x225];
  }
LAB_7f06554c:
  if (weapon_01 == 3) {
    if (weapon == 0x1f) {
      lVar1 = proc_7F05C6FC((int)DWORD_ARRAY_80035b68,fVar18,(float *)(float)piVar16[0x224],
                            (int)(piVar16 + 0x23b));
      if (lVar1 == 0) {
        piVar16[0x225] = 0;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        fVar18 = extraout_f12_33;
      }
      else {
        piVar16[0x24b] = 1;
        fVar18 = extraout_f12_33;
      }
    }
    else {
      puVar3 = get_ptr_item_statistics(weapon._4_4_);
      weapon_01 = piVar16[0x222];
      cVar15 = puVar3[0x44];
      weapon_00 = (int)cVar15;
      iVar14 = (int)(char)puVar3[0x45];
      if ((weapon_01 == 0) || (piVar16[0x224] < weapon_00 + iVar14)) {
        lVar1 = (longlong)piVar16[0x224];
        iVar13 = weapon_00 + iVar14;
        if (((char)puVar3[0x23] < '\0') ||
           ((weapon_01 != 0 || (lVar1 < (longlong)(iVar13 + (int)(char)puVar3[0x23]))))) {
          if ((weapon_01 == 0) ||
             ((((piVar16[0x220] == 0 || (lVar1 < (longlong)(char)puVar3[0x46])) ||
               (lVar9 = (longlong)(piVar16[0x224] + (int)(char)puVar3[0x47]),
               (char)puVar3[0x47] < '\0')) ||
              (((longlong)iVar13 <= lVar9 || (lVar9 < (longlong)(char)puVar3[0x46])))))) {
            fVar18 = extraout_f12_34;
            if (lVar1 < (longlong)iVar13) {
              local_38 = *(float *)(puVar3 + 0x48);
              fVar18 = *(float *)(puVar3 + 0x4c);
              if (lVar1 == 0) {
                lVar1 = (longlong)piVar16[0x224];
                piVar16[0x232] = piVar16[0x23a];
                piVar16[0x22f] = piVar16[0x237];
                piVar16[0x230] = piVar16[0x238];
                piVar16[0x231] = piVar16[0x239];
              }
              if (lVar1 < (longlong)cVar15) {
                *(float *)(piVar16 + 0x236) = flt_80054170 - (fVar18 * flt_80054170) / 360.00000000;
                local_2c = weapon_00;
                local_28 = puVar3;
                fVar18 = proc_7F05DCE8((longlong)(int)param_1);
                piVar16[0x234] = 0;
                *(float *)(piVar16 + 0x233) =
                     ((fVar18 - (float)piVar16[0x28e]) * local_38) / 1000.00000000;
                *(float *)(piVar16 + 0x235) =
                     ((*(float *)(local_28 + 0xc) - (float)piVar16[0x290]) * local_38) /
                     1000.00000000;
                local_40 = sinf(((float)piVar16[0x224] * flt_80054174) / (float)local_2c);
                uVar7 = extraout_a0;
                uVar10 = extraout_a1;
              }
              else {
                *(float *)(piVar16 + 0x236) = flt_80054178 - (fVar18 * flt_80054178) / 360.00000000;
                local_30 = iVar14;
                local_2c = weapon_00;
                local_28 = puVar3;
                fVar18 = proc_7F05DCE8((longlong)(int)param_1);
                piVar16[0x234] = 0;
                *(float *)(piVar16 + 0x233) =
                     ((fVar18 - (float)piVar16[0x28e]) * local_38) / 1000.00000000;
                *(float *)(piVar16 + 0x235) =
                     ((*(float *)(local_28 + 0xc) - (float)piVar16[0x290]) * local_38) /
                     1000.00000000;
                fVar18 = cosf(((float)(piVar16[0x224] - local_2c) * flt_8005417C) / (float)local_30)
                ;
                local_40 = fVar18 * 0.50000000 + 0.50000000;
                uVar7 = extraout_a0_00;
                uVar10 = extraout_a1_00;
              }
              fVar18 = proc_7F06D0CC((float)piVar16[0x232],(float)piVar16[0x236],uVar7,uVar10,
                                     local_40);
              *(float *)(piVar16 + 0x23a) = fVar18;
              piVar16[0x24b] = 1;
              *(float *)(piVar16 + 0x237) =
                   ((float)piVar16[0x233] - (float)piVar16[0x22f]) * local_40 +
                   (float)piVar16[0x22f];
              *(float *)(piVar16 + 0x238) =
                   ((float)piVar16[0x234] - (float)piVar16[0x230]) * local_40 +
                   (float)piVar16[0x230];
              *(float *)(piVar16 + 0x239) =
                   ((float)piVar16[0x235] - (float)piVar16[0x231]) * local_40 +
                   (float)piVar16[0x231];
              proc_7F058570(fVar18,extraout_a0_01,piVar16 + 0x23b);
              proc_7F058998(piVar16 + 0x237,(int)(piVar16 + 0x23b));
              fVar18 = extraout_f12_35;
            }
          }
          else {
            piVar16[0x225] = 4;
            piVar16[0x224] = 0;
            piVar16[0x223] = 0;
            piVar16[0x22a] = (int)(char)puVar3[0x47];
            fVar18 = extraout_f12_34;
          }
          goto LAB_7f0658a8;
        }
        piVar16[0x225] = 0;
      }
      else {
        piVar16[0x225] = 0;
      }
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      fVar18 = extraout_f12_34;
    }
  }
LAB_7f0658a8:
  weapon_01 = piVar16[0x225];
  if (weapon_01 == 4) {
    weapon_01 = piVar16[0x224];
    if (weapon_01 == 0) {
      piVar16[0x232] = piVar16[0x23a];
      piVar16[0x22f] = piVar16[0x237];
      piVar16[0x230] = piVar16[0x238];
      piVar16[0x231] = piVar16[0x239];
      weapon_01 = piVar16[0x224];
      piVar16[0x236] = 0;
      piVar16[0x233] = 0;
      piVar16[0x234] = 0;
      piVar16[0x235] = 0;
      weapon_00 = piVar16[0x22a];
    }
    else {
      weapon_00 = piVar16[0x22a];
    }
    if (weapon_01 < weapon_00) {
      fVar18 = cosf(((float)(weapon_00 - weapon_01) * flt_80054180) / (float)weapon_00);
      local_44 = fVar18 * 0.50000000 + 0.50000000;
      fVar18 = proc_7F06D0CC((float)piVar16[0x232],(float)piVar16[0x236],extraout_a0_02,
                             extraout_a1_01,local_44);
      *(float *)(piVar16 + 0x23a) = fVar18;
      piVar16[0x24b] = 1;
      *(float *)(piVar16 + 0x237) =
           ((float)piVar16[0x233] - (float)piVar16[0x22f]) * local_44 + (float)piVar16[0x22f];
      *(float *)(piVar16 + 0x238) =
           ((float)piVar16[0x234] - (float)piVar16[0x230]) * local_44 + (float)piVar16[0x230];
      *(float *)(piVar16 + 0x239) =
           ((float)piVar16[0x235] - (float)piVar16[0x231]) * local_44 + (float)piVar16[0x231];
      proc_7F058570(fVar18,extraout_a0_03,piVar16 + 0x23b);
      proc_7F058998(piVar16 + 0x237,(int)(piVar16 + 0x23b));
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_36;
    }
    else {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
    }
  }
  if (weapon_01 == 0xd) {
    if (piVar16[0x223] == 0) {
      proc_7F05E808(param_1);
      weapon_01 = piVar16[0x222];
      fVar18 = extraout_f12_37;
    }
    else {
      weapon_01 = piVar16[0x222];
    }
    if (weapon_01 == 0) {
      if (true) {
        if (0x13 < piVar16[0x224]) {
          piVar16[0x225] = 0;
          goto LAB_7f065a44;
        }
        weapon_01 = piVar16[0x225];
      }
      else {
        weapon_01 = piVar16[0x225];
      }
    }
    else {
      piVar16[0x225] = 0;
LAB_7f065a44:
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = piVar16[0x225];
    }
  }
  else {
    weapon_01 = piVar16[0x225];
  }
  lVar1 = 0x10;
  if (weapon_01 == 5) {
    local_48 = 0x10;
    uVar2 = get_num_players();
    lVar1 = (longlong)local_48;
    if (1 < (longlong)uVar2) {
      lVar1 = 0xc;
    }
    if (piVar16[0x223] == 0) {
      local_48 = (int)lVar1;
      uVar2 = get_num_players();
      lVar1 = (longlong)local_48;
      if (uVar2 == 1) {
        piVar16[0x22c] = 0x11;
      }
      else {
        piVar16[0x22c] = 0xd;
      }
      weapon_01 = piVar16[0x224];
    }
    else {
      weapon_01 = piVar16[0x224];
    }
    fVar18 = flt_80054184;
    if ((longlong)weapon_01 < lVar1) {
      piVar16[0x24b] = 1;
      local_4c = ((float)weapon_01 * fVar18) / (float)(int)lVar1;
      proc_7F058570(local_4c,lVar1,piVar16 + 0x23b);
      piVar16[0x247] = 0;
      fVar18 = cosf(local_4c);
      *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
      fVar18 = sinf(local_4c);
      weapon_01 = piVar16[0x225];
      *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
      lVar1 = extraout_a0_05;
      fVar18 = extraout_f12_39;
    }
    else {
      weapon_01 = get_ammo_type_for_weapon(weapon._4_4_);
      (&ptr_BONDdata->unknown + weapon_01)[0x44c] =
           (&ptr_BONDdata->unknown + weapon_01)[0x44c] + piVar16[0x227];
      piVar16[0x227] = 0;
      uVar2 = get_num_players();
      if (1 < (longlong)uVar2) {
        proc_7F09B368(param_1);
      }
      proc_7F05FB00(param_1);
      piVar16[0x225] = 6;
      uVar2 = check_if_item_available(ITEM_SNIPERRIFLE);
      if (uVar2 == 0) {
        ptr_BONDdata->field_2A38 = 1;
      }
      else {
        ptr_BONDdata->field_2A38 = 0x11;
      }
      weapon_01 = piVar16[0x225];
      lVar1 = extraout_a0_04;
      fVar18 = extraout_f12_38;
    }
  }
  if ((weapon_01 == 6) || (weapon_01 == 7)) {
    if ((piVar16[0x22d] == 0) || (piVar16[0x22c] <= piVar16[0x224])) {
      if (weapon_01 == 6) {
        pBVar5 = (BONDdata *)((int)ptr_BONDdata + param_1 * -0x3a8);
        weapon_01 = pBVar5->field_C3C;
        if ((((weapon_01 != 6) && (weapon_01 != 5)) &&
            (weapon_00 = pBVar5->left_weapon_animation, weapon_00 != 5)) &&
           (((weapon_01 != 0xe && (weapon_01 != 0xf)) && ((weapon_01 != 0x10 && (weapon_00 != 0xe)))
            ))) {
          if (param_1 == 0) {
            item = get_item_in_hand(1);
            uVar2 = check_if_item_for_hand_available(piVar16[0x22b],item);
            if (uVar2 == 0) {
              draw_item_in_hand_has_more_ammo(1,ITEM_UNARMED);
            }
          }
          else {
            item = get_item_in_hand(0);
            uVar2 = check_if_item_for_hand_available(item,piVar16[0x22b]);
            if (uVar2 == 0) {
              piVar16[0x22b] = 0;
            }
          }
        }
        remove_hands_item(param_1,piVar16[0x22b]);
        weapon_01 = return_ammo_in_hand(param_1);
        weapon = (longlong)weapon_01;
        piVar16[0x225] = 7;
        lVar1 = extraout_a0_06;
        fVar18 = extraout_f12_40;
      }
      else {
        uVar2 = proc_7F05CEBC(param_1);
        lVar1 = extraout_a0_07;
        fVar18 = extraout_f12_41;
        if (uVar2 != 0) {
          piVar16[0x225] = 8;
          piVar16[0x224] = 0;
          piVar16[0x223] = 0;
          lVar1 = extraout_a0_07;
          fVar18 = extraout_f12_41;
        }
      }
      weapon_01 = piVar16[0x225];
    }
    else {
      weapon_01 = piVar16[0x225];
    }
    if ((weapon_01 == 6) || (weapon_01 == 7)) {
      piVar16[0x24b] = 1;
      proc_7F058570(flt_80054188,lVar1,piVar16 + 0x23b);
      piVar16[0x247] = 0;
      fVar18 = cosf(flt_8005418C);
      *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
      fVar18 = sinf(flt_80054190);
      weapon_01 = piVar16[0x225];
      *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
      lVar1 = extraout_a0_08;
      fVar18 = extraout_f12_42;
    }
  }
  weapon_00 = (int)weapon;
  if (weapon_01 == 8) {
    local_58 = 0x17;
    uVar2 = get_num_players();
    if (1 < (longlong)uVar2) {
      local_58 = 0xc;
    }
    if (piVar16[0x223] == 0) {
      uVar2 = get_num_players();
      if (1 < (longlong)uVar2) {
        proc_7F09B398(param_1);
      }
      proc_7F0649D8(param_1);
      ptr_BONDdata->field_FC8 = 0;
      if (clock_timer < 1) {
        weapon_01 = piVar16[0x224];
        lVar1 = extraout_a0_10;
        fVar18 = extraout_f12_44;
      }
      else {
        if (ptr_BONDdata->unknown == 1) {
          weapon_01 = piVar16[0x224];
          lVar1 = extraout_a0_10;
          fVar18 = extraout_f12_44;
        }
        else {
          uVar2 = proc_7F05CEBC(param_1);
          lVar1 = extraout_a0_11;
          fVar18 = extraout_f12_45;
          if (uVar2 == 0) {
switchD_7f065e4c_caseD_0:
            weapon_01 = piVar16[0x224];
          }
          else {
            if (disable_player_pickups_flag == 0) {
              if (weapon < 0x3e) {
                if (false) {
switchD_7f065e4c_caseD_4:
                  play_sfx_a1(ptr_sfx_buf,0xe8,NULL);
                  lVar1 = extraout_a0_15;
                  fVar18 = extraout_f12_49;
                  goto switchD_7f065e4c_caseD_0;
                }
                lVar1 = extraout_a0_11;
                fVar18 = extraout_f12_45;
                switch(weapon_00) {
                case 0:
                case 1:
                case 0x17:
                case 0x1a:
                case 0x1e:
                case 0x1f:
                case 0x20:
                case 0x21:
                case 0x22:
                case 0x28:
                case 0x2f:
                case 0x30:
                case 0x3c:
                case 0x3d:
                  goto switchD_7f065e4c_caseD_0;
                case 2:
                case 3:
                  play_sfx_a1(ptr_sfx_buf,0xe9,NULL);
                  weapon_01 = piVar16[0x224];
                  lVar1 = extraout_a0_13;
                  fVar18 = extraout_f12_47;
                  break;
                default:
                  goto switchD_7f065e4c_caseD_4;
                case 0x16:
                  play_sfx_a1(ptr_sfx_buf,0xf2,NULL);
                  weapon_01 = piVar16[0x224];
                  lVar1 = extraout_a0_12;
                  fVar18 = extraout_f12_46;
                  break;
                case 0x1b:
                case 0x1c:
                case 0x1d:
                  play_sfx_a1(ptr_sfx_buf,0xeb,NULL);
                  weapon_01 = piVar16[0x224];
                  lVar1 = extraout_a0_14;
                  fVar18 = extraout_f12_48;
                }
              }
              else {
                if (weapon != 0x58) goto switchD_7f065e4c_caseD_4;
                weapon_01 = piVar16[0x224];
                lVar1 = extraout_a0_11;
                fVar18 = extraout_f12_45;
              }
            }
            else {
              weapon_01 = piVar16[0x224];
              lVar1 = extraout_a0_11;
              fVar18 = extraout_f12_45;
            }
          }
        }
      }
    }
    else {
      weapon_01 = piVar16[0x224];
      lVar1 = extraout_a0_09;
      fVar18 = extraout_f12_43;
    }
    if (weapon_01 < local_58) {
      weapon_01 = get_ptr_weapon_model_header_line(weapon_00);
      lVar1 = weapon;
      fVar18 = extraout_f12_50;
      if (((weapon_01 != 0) &&
          (uVar2 = check_special_attributes(weapon_00,0x800), lVar1 = weapon,
          fVar18 = extraout_f12_51, uVar2 != 0)) &&
         (uVar2 = check_special_attributes(weapon_00,0x2000), fVar17 = flt_8005428C,
         lVar1 = extraout_a0_16, fVar18 = extraout_f12_52, uVar2 == 0)) {
        piVar16[0x24b] = 1;
        local_5c = ((float)(local_58 - piVar16[0x224]) * fVar17) / (float)local_58;
        proc_7F058570(local_5c,extraout_a0_16,piVar16 + 0x23b);
        piVar16[0x247] = 0;
        fVar18 = cosf(local_5c);
        *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
        fVar18 = sinf(local_5c);
        weapon_01 = piVar16[0x225];
        *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
        lVar1 = extraout_a0_17;
        fVar18 = extraout_f12_53;
        goto LAB_7f065f9c;
      }
      piVar16[0x225] = 0;
    }
    else {
      piVar16[0x225] = 0;
    }
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
    weapon_01 = 0;
  }
LAB_7f065f9c:
  if (weapon_01 == 9) {
    puVar3 = get_ptr_item_statistics(weapon_00);
    if (((longlong)piVar16[0x227] < (longlong)*(short *)(puVar3 + 0x20)) ||
       (uVar2 = check_special_attributes(weapon_00,0x200000), uVar2 != 0)) {
      weapon._4_4_ = get_ammo_in_hands_weapon(param_1);
      weapon_01 = 10;
      if (0 < weapon._4_4_) {
        piVar16[0x225] = 10;
        lVar1 = extraout_a0_19;
        fVar18 = extraout_f12_55;
        goto LAB_7f066004;
      }
      piVar16[0x225] = 0;
      lVar1 = extraout_a0_19;
      fVar18 = extraout_f12_55;
    }
    else {
      piVar16[0x225] = 0;
      lVar1 = extraout_a0_18;
      fVar18 = extraout_f12_54;
    }
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
    weapon_01 = 0;
  }
LAB_7f066004:
  if (weapon_01 == 10) {
    weapon_01 = 0xb;
    if (piVar16[0x224] < 0x10) {
      if (*(char *)((int)piVar16 + 0x87f) != '\0') {
        pfVar11 = (float *)(piVar16 + 0x23b);
        local_a8 = ((float)piVar16[0x224] * flt_80054290) / 16.00000000;
        piVar16[0x24b] = 1;
        if (param_1 == 0) {
          proc_7F058688(0.00000000,lVar1,pfVar11);
          uVar7 = extraout_a0_20;
        }
        else {
          proc_7F058688(-0.00000000,lVar1,pfVar11);
          uVar7 = extraout_a0_21;
        }
        proc_7F058570(local_a8,uVar7,afStack164);
        proc_7F058068(afStack164,pfVar11);
        fVar18 = sinf(0.00000000);
        piVar16[0x247] = 0;
        proc_7F0649AC(weapon);
        fVar17 = cosf(local_a8);
        *(float *)(piVar16 + 0x248) = (1.00000000 - fVar17) * fVar18;
        fVar18 = sinf(local_a8);
        weapon_01 = piVar16[0x225];
        *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
        lVar1 = extraout_a0_22;
        fVar18 = extraout_f12_56;
        goto LAB_7f066128;
      }
      piVar16[0x225] = 0xb;
    }
    else {
      piVar16[0x225] = 0xb;
    }
    piVar16[0x22c] = 0x11;
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
  }
LAB_7f066128:
  if (weapon_01 == 0xb) {
    if (piVar16[0x223] == 0) {
      if (ptr_BONDdata->unknown == 1) {
        weapon_01 = piVar16[0x224];
      }
      else {
        uVar2 = proc_7F05CEBC(param_1);
        lVar1 = extraout_a0_23;
        fVar18 = extraout_f12_57;
        if (uVar2 != 0) {
          if (disable_player_pickups_flag != 0) {
            weapon_01 = piVar16[0x224];
            lVar1 = extraout_a0_23;
            fVar18 = extraout_f12_57;
            goto LAB_7f0661c4;
          }
          if (weapon < 0x3e) {
            if (true) {
              lVar1 = extraout_a0_23;
              fVar18 = extraout_f12_57;
              switch(weapon_00) {
              case 0:
              case 1:
              case 2:
              case 3:
              case 0x16:
              case 0x17:
              case 0x1a:
              case 0x1b:
              case 0x1c:
              case 0x1d:
              case 0x1e:
              case 0x1f:
              case 0x20:
              case 0x21:
              case 0x22:
              case 0x28:
              case 0x2f:
              case 0x30:
              case 0x3c:
              case 0x3d:
                goto switchD_7f0661a4_caseD_0;
              }
            }
          }
          else {
            if (weapon == 0x58) {
              weapon_01 = piVar16[0x224];
              lVar1 = extraout_a0_23;
              fVar18 = extraout_f12_57;
              goto LAB_7f0661c4;
            }
          }
          play_sfx_a1(ptr_sfx_buf,0x32,NULL);
          lVar1 = extraout_a0_24;
          fVar18 = extraout_f12_58;
        }
switchD_7f0661a4_caseD_0:
        weapon_01 = piVar16[0x224];
      }
    }
    else {
      weapon_01 = piVar16[0x224];
    }
LAB_7f0661c4:
    if (weapon_01 < piVar16[0x22c]) {
      piVar16[0x24b] = 1;
    }
    else {
      weapon_01 = 0xc;
      if (1 < piVar16[0x223]) {
        piVar16[0x225] = 0xc;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        goto LAB_7f0662b8;
      }
      piVar16[0x24b] = 1;
    }
    pfVar11 = (float *)(piVar16 + 0x23b);
    if (param_1 == 0) {
      proc_7F058688(0.00000000,lVar1,pfVar11);
      uVar7 = extraout_a0_25;
    }
    else {
      proc_7F058688(-0.00000000,lVar1,pfVar11);
      uVar7 = extraout_a0_26;
    }
    proc_7F058570(flt_8005438C,uVar7,afStack236);
    proc_7F058068(afStack236,pfVar11);
    fVar18 = sinf(0.00000000);
    piVar16[0x247] = 0;
    proc_7F0649AC(weapon);
    fVar17 = cosf(flt_80054390);
    *(float *)(piVar16 + 0x248) = (1.00000000 - fVar17) * fVar18;
    fVar18 = sinf(flt_80054394);
    weapon_01 = piVar16[0x225];
    *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
    lVar1 = extraout_a0_27;
    fVar18 = extraout_f12_59;
  }
LAB_7f0662b8:
  if (weapon_01 == 0xc) {
    if (piVar16[0x223] == 0) {
      proc_7F0649D8(param_1);
      ptr_BONDdata->field_FC8 = 0;
      weapon_01 = piVar16[0x224];
      lVar1 = extraout_a0_28;
      fVar18 = extraout_f12_60;
    }
    else {
      weapon_01 = piVar16[0x224];
    }
    if (weapon_01 < 0x17) {
      weapon_01 = get_ptr_weapon_model_header_line(weapon_00);
      lVar1 = weapon;
      fVar18 = extraout_f12_61;
      if (((weapon_01 != 0) &&
          (uVar2 = check_special_attributes(weapon_00,0x800), lVar1 = weapon,
          fVar18 = extraout_f12_62, uVar2 != 0)) &&
         (uVar2 = check_special_attributes(weapon_00,0x2000), lVar1 = extraout_a0_29,
         fVar18 = extraout_f12_63, uVar2 == 0)) {
        pfVar11 = (float *)(piVar16 + 0x23b);
        local_138 = ((float)(0x17 - piVar16[0x224]) * flt_80054398) / 23.00000000;
        piVar16[0x24b] = 1;
        if (param_1 == 0) {
          proc_7F058688(0.00000000,extraout_a0_29,pfVar11);
          uVar7 = extraout_a0_30;
        }
        else {
          proc_7F058688(-0.00000000,extraout_a0_29,pfVar11);
          uVar7 = extraout_a0_31;
        }
        proc_7F058570(local_138,uVar7,afStack308);
        proc_7F058068(afStack308,pfVar11);
        fVar18 = sinf(0.00000000);
        piVar16[0x247] = 0;
        proc_7F0649AC(weapon);
        fVar17 = cosf(local_138);
        *(float *)(piVar16 + 0x248) = (1.00000000 - fVar17) * fVar18;
        fVar18 = sinf(local_138);
        weapon_01 = piVar16[0x225];
        *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
        lVar1 = extraout_a0_32;
        fVar18 = extraout_f12_64;
        goto LAB_7f066424;
      }
      piVar16[0x225] = 0;
    }
    else {
      piVar16[0x225] = 0;
    }
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
    weapon_01 = 0;
  }
LAB_7f066424:
  fVar17 = flt_8005439C;
  if (weapon_01 == 0xe) {
    weapon_01 = 0xf;
    if (piVar16[0x224] < 0x10) {
      if (*(char *)((int)piVar16 + 0x87f) != '\0') {
        piVar16[0x24b] = 1;
        local_13c = ((float)piVar16[0x224] * fVar17) / 16.00000000;
        proc_7F058570(local_13c,lVar1,piVar16 + 0x23b);
        piVar16[0x247] = 0;
        fVar18 = cosf(local_13c);
        *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
        fVar18 = sinf(local_13c);
        weapon_01 = piVar16[0x225];
        *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
        fVar18 = extraout_f12_65;
        goto LAB_7f0664e0;
      }
      piVar16[0x225] = 0xf;
    }
    else {
      piVar16[0x225] = 0xf;
    }
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
  }
LAB_7f0664e0:
  if (weapon_01 == 0xf) {
    if ((piVar16[0x223] == 0) || (uVar2 = proc_7F05CEBC(param_1), uVar2 == 0)) {
      proc_7F05DA8C(param_1,piVar16[0x22b]);
      weapon_01 = return_ammo_in_hand(param_1);
      weapon = (longlong)weapon_01;
    }
    uVar2 = proc_7F05CEBC(param_1);
    if (uVar2 == 0) {
      piVar16[0x24b] = 1;
      proc_7F058570(flt_800543A0,extraout_a0_33,piVar16 + 0x23b);
      piVar16[0x247] = 0;
      fVar18 = cosf(flt_800543A4);
      *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
      fVar18 = sinf(flt_800543A8);
      weapon_01 = piVar16[0x225];
      *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
      fVar18 = extraout_f12_67;
    }
    else {
      weapon_01 = 0x10;
      piVar16[0x225] = 0x10;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      fVar18 = extraout_f12_66;
    }
  }
  weapon_00 = (int)weapon;
  if (weapon_01 == 0x10) {
    if (piVar16[0x223] == 0) {
      if (weapon < 0x21) {
        uVar2 = get_num_players();
        if (1 < (longlong)uVar2) {
          proc_7F09B398(param_1);
        }
        proc_7F0649D8(param_1);
        ptr_BONDdata->field_FC8 = 0;
        weapon_01 = piVar16[0x224];
        fVar18 = extraout_f12_68;
      }
      else {
        weapon_01 = piVar16[0x224];
      }
    }
    else {
      weapon_01 = piVar16[0x224];
    }
    if (weapon_01 < 0x17) {
      weapon_01 = get_ptr_weapon_model_header_line(weapon_00);
      fVar18 = extraout_f12_69;
      if (((weapon_01 != 0) &&
          (uVar2 = check_special_attributes(weapon_00,0x800), fVar18 = extraout_f12_70, uVar2 != 0))
         && (uVar2 = check_special_attributes(weapon_00,0x2000), fVar17 = flt_800543AC,
            fVar18 = extraout_f12_71, uVar2 == 0)) {
        piVar16[0x24b] = 1;
        local_144 = ((float)(0x17 - piVar16[0x224]) * fVar17) / 23.00000000;
        proc_7F058570(local_144,extraout_a0_34,piVar16 + 0x23b);
        piVar16[0x247] = 0;
        fVar18 = cosf(local_144);
        *(float *)(piVar16 + 0x248) = (1.00000000 - fVar18) * -60.00000000;
        fVar18 = sinf(local_144);
        weapon_01 = piVar16[0x225];
        *(float *)(piVar16 + 0x249) = fVar18 * 15.00000000;
        fVar18 = extraout_f12_72;
        goto LAB_7f0666dc;
      }
      piVar16[0x225] = 0;
    }
    else {
      piVar16[0x225] = 0;
    }
    piVar16[0x224] = 0;
    piVar16[0x223] = 0;
    weapon_01 = 0;
  }
LAB_7f0666dc:
  if (((weapon_01 == 0x11) || (weapon_01 == 0x12)) ||
     (((weapon_01 == 0x13 || ((weapon_01 == 0x14 || (weapon_01 == 0x15)))) || (weapon_01 == 0x16))))
  {
    local_148 = (float *)(float)piVar16[0x224];
    if (((weapon_01 == 0x11) || (weapon_01 == 0x14)) && (0xf < piVar16[0x224])) {
      local_154 = PTR_DAT_80035e94;
      local_150 = PTR_DAT_80035e98._0_2_;
      uVar4 = get_random_value();
      play_sfx_a1(ptr_sfx_buf,*(short *)((int)&local_154 + (uVar4 % 3) * 2),NULL);
      weapon_01 = 0x15;
      if (piVar16[0x225] == 0x11) {
        weapon_01 = 0x12;
        piVar16[0x225] = 0x12;
        fVar18 = extraout_f12_73;
      }
      else {
        piVar16[0x225] = 0x15;
        fVar18 = extraout_f12_73;
      }
    }
    if (((weapon_01 != 0x13) && (weapon_01 != 0x16)) && (0x17 < piVar16[0x224])) {
      *(undefined *)(piVar16 + 0x21f) = 1;
      if ((weapon_01 == 0x11) || (weapon_01 == 0x12)) {
        piVar16[0x225] = 0x13;
        weapon_01 = 0x13;
      }
      else {
        weapon_01 = 0x16;
        piVar16[0x225] = 0x16;
      }
    }
    if (((weapon_01 == 0x11) || (weapon_01 == 0x12)) || (weapon_01 == 0x13)) {
      pdVar8 = DWORD_ARRAY_80034ca4;
    }
    else {
      pdVar8 = flt_80034E0C;
    }
    lVar1 = proc_7F05C6FC((int)pdVar8,fVar18,local_148,(int)(piVar16 + 0x23b));
    if (lVar1 == 0) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
      fVar18 = extraout_f12_74;
    }
    else {
      piVar16[0x24b] = 1;
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_74;
    }
  }
  if (((weapon_01 == 0x1e) || (weapon_01 == 0x1f)) || ((weapon_01 == 0x20 || (weapon_01 == 0x21))))
  {
    weapon._4_4_ = piVar16[0x224];
    if ((weapon_01 == 0x1e) || (weapon_01 == 0x1f)) {
      if (ptr_BONDdata->field_2A38 == 0x11) {
        local_15c = DWORD_ARRAY_80035778;
      }
      else {
        local_15c = DWORD_ARRAY_800354a8;
      }
      if ((weapon_01 != 0x1f) && (0x1d < weapon._4_4_)) {
        *(undefined *)(piVar16 + 0x21f) = 1;
        piVar16[0x225] = 0x1f;
      }
    }
    else {
      if ((weapon_01 == 0x20) || (weapon_01 == 0x21)) {
        if (ptr_BONDdata->field_2A38 == 0x11) {
          local_15c = DWORD_ARRAY_80035904;
        }
        else {
          local_15c = DWORD_ARRAY_80035610;
        }
        if ((weapon_01 != 0x21) && (0x1d < weapon._4_4_)) {
          *(undefined *)(piVar16 + 0x21f) = 1;
          piVar16[0x225] = 0x21;
        }
      }
    }
    lVar1 = proc_7F05C6FC((int)local_15c,fVar18,(float *)(float)weapon._4_4_,(int)(piVar16 + 0x23b))
    ;
    if (lVar1 == 0) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
      fVar18 = extraout_f12_75;
    }
    else {
      piVar16[0x24b] = 1;
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_75;
    }
  }
  if (weapon_01 == 0x1a) {
    weapon_01 = 0;
    if (piVar16[0x227] < 1) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
    }
    else {
      lVar1 = proc_7F05C6FC((int)dword_80035124,fVar18,(float *)(float)piVar16[0x224],
                            (int)(piVar16 + 0x23b));
      if (lVar1 == 0) {
        *(undefined *)((int)piVar16 + 0x87e) = 0;
        *(undefined *)(piVar16 + 0x21f) = 1;
        piVar16[0x227] = piVar16[0x227] + -1;
        piVar16[0x225] = 0x1b;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
      }
      else {
        piVar16[0x24b] = 1;
      }
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_76;
    }
  }
  if (weapon_01 == 0x1b) {
    lVar1 = proc_7F05C6FC((int)dword_800351FC,fVar18,(float *)(float)piVar16[0x224],
                          (int)(piVar16 + 0x23b));
    if (lVar1 == 0) {
      *(undefined *)((int)piVar16 + 0x87e) = 1;
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
      fVar18 = extraout_f12_77;
    }
    else {
      piVar16[0x24b] = 1;
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_77;
    }
  }
  if (weapon_01 == 0x17) {
    weapon_01 = 0;
    if (piVar16[0x227] < 1) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
    }
    else {
      if (piVar16[0x222] == 0) {
        lVar1 = proc_7F05C6FC((int)flt_80034F74,fVar18,(float *)(float)piVar16[0x224],
                              (int)(piVar16 + 0x23b));
        if (lVar1 == 0) {
          lVar1 = proc_7F05C6FC((int)dword_8003504C,extraout_f12_78,NULL,(int)(piVar16 + 0x23b));
          if (lVar1 == 0) {
            piVar16[0x225] = 0x18;
            fVar18 = extraout_f12_79;
          }
          else {
            piVar16[0x24b] = 1;
            fVar18 = extraout_f12_79;
          }
        }
        else {
          piVar16[0x24b] = 1;
          fVar18 = extraout_f12_78;
        }
      }
      else {
        piVar16[0x225] = 0x18;
      }
      weapon_01 = piVar16[0x225];
    }
  }
  if (weapon_01 == 0x18) {
    weapon_01 = 0;
    if (piVar16[0x227] < 1) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
    }
    else {
      lVar1 = proc_7F05C6FC((int)flt_80034F74,fVar18,(float *)(float)piVar16[0x224],
                            (int)(piVar16 + 0x23b));
      if (lVar1 == 0) {
        *(undefined *)((int)piVar16 + 0x87e) = 0;
        *(undefined *)(piVar16 + 0x21f) = 1;
        piVar16[0x227] = piVar16[0x227] + -1;
        piVar16[0x225] = 0x19;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
      }
      else {
        piVar16[0x24b] = 1;
      }
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_80;
    }
  }
  if (weapon_01 == 0x19) {
    lVar1 = proc_7F05C6FC((int)dword_8003504C,fVar18,(float *)(float)piVar16[0x224],
                          (int)(piVar16 + 0x23b));
    if (lVar1 == 0) {
      *(undefined *)((int)piVar16 + 0x87e) = 1;
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
      fVar18 = extraout_f12_81;
    }
    else {
      piVar16[0x24b] = 1;
      weapon_01 = piVar16[0x225];
      fVar18 = extraout_f12_81;
    }
  }
  if (weapon_01 == 0x1c) {
    if (piVar16[0x227] < 1) {
      uVar2 = check_special_attributes(weapon_00,0x10);
      if (uVar2 == 0) {
        piVar16[0x225] = 0;
        piVar16[0x224] = 0;
        piVar16[0x223] = 0;
        weapon_01 = 0;
        fVar18 = extraout_f12_82;
        goto LAB_7f066cb8;
      }
      weapon_01 = piVar16[0x224];
      fVar18 = extraout_f12_82;
    }
    else {
      weapon_01 = piVar16[0x224];
    }
    lVar1 = proc_7F05C6FC((int)DWORD_ARRAY_800352d4,fVar18,(float *)(float)weapon_01,
                          (int)(piVar16 + 0x23b));
    if (lVar1 == 0) {
      *(undefined *)((int)piVar16 + 0x87e) = 0;
      *(undefined *)(piVar16 + 0x21f) = 1;
      piVar16[0x227] = piVar16[0x227] + -1;
      piVar16[0x225] = 0x1d;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
    }
    else {
      piVar16[0x24b] = 1;
    }
    weapon_01 = piVar16[0x225];
    fVar18 = extraout_f12_83;
  }
LAB_7f066cb8:
  if (weapon_01 == 0x1d) {
    lVar1 = proc_7F05C6FC((int)DWORD_ARRAY_800353ac,fVar18,(float *)(float)piVar16[0x224],
                          (int)(piVar16 + 0x23b));
    if (lVar1 == 0) {
      *(undefined *)((int)piVar16 + 0x87e) = 1;
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
      weapon_01 = 0;
    }
    else {
      piVar16[0x24b] = 1;
      weapon_01 = piVar16[0x225];
    }
  }
  if (weapon_01 == 0x24) {
    if (weapon == 0x2e) {
      if (piVar16[0x223] == 0) {
        proc_7F066E64();
      }
      weapon_01 = piVar16[0x222];
    }
    else {
      if (weapon == 0x2c) {
        if (piVar16[0x223] == 0) {
          proc_7F066F08();
        }
        weapon_01 = piVar16[0x222];
      }
      else {
        if ((((weapon == 0x27) || (weapon == 0x37)) || (weapon == 0x26)) ||
           ((weapon == 0x32 || (weapon == 0x49)))) {
          if ((piVar16[0x223] == 0) && (weapon_01 = proc_7F03C3FC(), weapon_01 != 0)) {
            *(byte *)(*(int *)(weapon_01 + 4) + 2) = *(byte *)(*(int *)(weapon_01 + 4) + 2) | 0x40;
          }
          weapon_01 = piVar16[0x222];
        }
        else {
          weapon_01 = piVar16[0x222];
        }
      }
    }
    if (weapon_01 != 0) {
      piVar16[0x225] = 0;
      piVar16[0x224] = 0;
      piVar16[0x223] = 0;
    }
  }
  return;
}



void proc_7F066E64(void)

{
  longlong lVar1;
  byte *text;
  
  lVar1 = proc_7F08CF0C();
  if (lVar1 == 0) {
    text = get_textptr_for_textID(0x98d9);
    display_string_in_lower_left_corner((char *)text);
    proc_7F05D690();
  }
  else {
    text = get_textptr_for_textID(0x98d8);
    display_string_in_lower_left_corner((char *)text);
    ptr_BONDdata->GEkey_analyzed = 1;
    play_sfx_a1(ptr_sfx_buf,0xf5,NULL);
    draw_item_in_hand_has_more_ammo(0,ITEM_GOLDENEYEKEY);
    draw_item_in_hand_has_more_ammo(1,ITEM_UNARMED);
  }
  return;
}



int get_keyanalyzer_flag(void)

{
  return ptr_BONDdata->GEkey_analyzed;
}



void proc_7F066F08(void)

{
  int iVar1;
  
  add_ammo_to_inventory(10,2,0,1);
  add_ammo_to_inventory(5,2,0,1);
  add_item_to_inventory(ITEM_SNIPERRIFLE);
  set_sound_effect_for_weapontype_collection(0x11);
  display_text_for_weapon_in_lower_left_corner(0x11);
  iVar1 = check_cur_player_ammo_amount_in_inventory(GsniperrifleZ_stats.ammotype);
  give_cur_player_ammo
            ((AMMOTYPES)GsniperrifleZ_stats.ammotype,iVar1 + (int)GsniperrifleZ_stats.mag_size);
  proc_7F08C61C(0x2c);
  draw_item_in_hand_has_more_ammo(0,ITEM_SNIPERRIFLE);
  draw_item_in_hand_has_more_ammo(1,ITEM_UNARMED);
  return;
}



f32 get_vertical_position_solo_watch_menu_main_page_for_item(int item)

{
  return (f32)(&gitem_structs)[item].watch_pos_x;
}



f32 get_lateral_position_solo_watch_menu_main_page_for_item(int item)

{
  return (f32)(&gitem_structs)[item].watch_pos_y;
}



f32 get_depth_on_solo_watch_menu_page_for_item(int item)

{
  return (f32)(&gitem_structs)[item].watch_pos_z;
}



f32 get_zrotation_solo_watch_menu_for_item(int item)

{
  return (f32)(&gitem_structs)[item].x_rotation;
}



f32 get_xrotation_solo_watch_menu_for_item(int item)

{
  return (f32)(&gitem_structs)[item].y_rotation;
}



f32 get_45_degree_angle(void)

{
  return 45.00000000;
}



int get_ptr_first_title_line_item(int item)

{
  byte *pbVar1;
  
  pbVar1 = get_textptr_for_textID((&gitem_structs)[item].upper_watch_text);
  return (int)pbVar1;
}



int get_ptr_second_title_line_item(int item)

{
  byte *pbVar1;
  
  pbVar1 = get_textptr_for_textID((&gitem_structs)[item].lower_watch_text);
  return (int)pbVar1;
}



int get_ptr_short_watch_text_for_item(int item)

{
  byte *pbVar1;
  
  pbVar1 = get_textptr_for_textID((&gitem_structs)[item].watch_equipment_text);
  return (int)pbVar1;
}



int get_ptr_long_watch_text_for_item(int item)

{
  byte *pbVar1;
  
  pbVar1 = get_textptr_for_textID((&gitem_structs)[item].weapon_of_choice_text);
  return (int)pbVar1;
}



f32 get_45_degree_angle_0(void)

{
  return 45.00000000;
}



f32 get_horizontal_offset_on_solo_watch_menu_for_item(int item)

{
  return (f32)(&gitem_structs)[item].equip_watch_x;
}



f32 get_vertical_offset_on_solo_watch_menu_for_item(int item)

{
  return (f32)(&gitem_structs)[item].equip_watch_y;
}



f32 get_depth_offset_solo_watch_menu_inventory_page_for_item(int item)

{
  return (f32)(&gitem_structs)[item].equip_watch_z;
}



f32 proc_7F067174(int param_1)

{
  return (f32)(&ptr_BONDdata->noise)[param_1 * 0xea];
}



void proc_7F0671A4(void)

{
  ITEM_IDS item;
  ITEM_IDS item_00;
  undefined *puVar2;
  undefined *puVar3;
  longlong lVar1;
  float fVar4;
  float fVar5;
  
  item = get_item_in_hand(0);
  item_00 = get_item_in_hand(1);
  puVar2 = get_ptr_item_statistics(item);
  puVar3 = get_ptr_item_statistics(item_00);
  if ((item != ITEM_UNARMED) && (lVar1 = get_hands_firing_status(0), lVar1 != 0)) {
    *(float *)&ptr_BONDdata->noise = (float)ptr_BONDdata->noise + *(float *)(puVar2 + 0x5c);
    if (*(float *)(puVar2 + 0x58) < (float)ptr_BONDdata->noise) {
      *(float *)&ptr_BONDdata->noise = *(float *)(puVar2 + 0x58);
    }
  }
  if ((item_00 != ITEM_UNARMED) && (lVar1 = get_hands_firing_status(1), lVar1 != 0)) {
    *(float *)&ptr_BONDdata->field_E28 = (float)ptr_BONDdata->field_E28 + *(float *)(puVar3 + 0x5c);
    if (*(float *)(puVar3 + 0x58) < (float)ptr_BONDdata->field_E28) {
      *(float *)&ptr_BONDdata->field_E28 = *(float *)(puVar3 + 0x58);
    }
  }
  fVar5 = (*(float *)(puVar2 + 0x5c) * global_timer_delta) /
          (*(float *)(puVar2 + 0x60) * 60.00000000);
  fVar4 = (((float)ptr_BONDdata->noise - *(float *)(puVar2 + 0x54)) * global_timer_delta) /
          (*(float *)(puVar2 + 100) * 60.00000000);
  if (fVar4 <= fVar5) {
    fVar4 = fVar5;
  }
  *(float *)&ptr_BONDdata->noise = (float)ptr_BONDdata->noise - fVar4;
  if ((float)ptr_BONDdata->noise < *(float *)(puVar2 + 0x54)) {
    *(float *)&ptr_BONDdata->noise = *(float *)(puVar2 + 0x54);
  }
  fVar5 = (*(float *)(puVar3 + 0x5c) * global_timer_delta) /
          (*(float *)(puVar3 + 0x60) * 60.00000000);
  fVar4 = (((float)ptr_BONDdata->field_E28 - *(float *)(puVar3 + 0x54)) * global_timer_delta) /
          (*(float *)(puVar3 + 100) * 60.00000000);
  if (fVar4 <= fVar5) {
    fVar4 = fVar5;
  }
  *(float *)&ptr_BONDdata->field_E28 = (float)ptr_BONDdata->field_E28 - fVar4;
  if ((float)ptr_BONDdata->field_E28 < *(float *)(puVar3 + 0x54)) {
    *(float *)&ptr_BONDdata->field_E28 = *(float *)(puVar3 + 0x54);
  }
  return;
}



ulonglong proc_7F0673B4(int param_1)

{
  bool bVar1;
  ITEM_IDS weapon;
  int iVar2;
  
  weapon = get_item_in_hand(param_1);
  iVar2 = get_ammo_type_for_weapon(weapon);
  bVar1 = iVar2 == 0;
  if (!bVar1) {
    bVar1 = 0 < (&ptr_BONDdata->right_weapon_ammo_in_magazine)[param_1 * 0xea];
  }
  return (ulonglong)bVar1;
}



void proc_7F067420(int param_1)

{
  BONDdata *pBVar1;
  uint uVar2;
  int iVar4;
  ITEM_IDS IVar5;
  ITEM_IDS IVar6;
  ulonglong uVar3;
  byte abStack24 [4];
  uint uStack20;
  ITEM_IDS IStack16;
  ITEM_IDS IStack12;
  int aiStack8 [2];
  
  aiStack8[0] = DAT_80035e9c;
  aiStack8[1] = DAT_80035ea0;
  ptr_BONDdata->field_FD0 = ptr_BONDdata->field_FCC;
  ptr_BONDdata->field_FCC = param_1;
  iVar4 = ptr_BONDdata->field_FCC;
  if ((iVar4 == 0) && (ptr_BONDdata->field_FD0 != 0)) {
    ptr_BONDdata->field_FC8 = 1;
    iVar4 = ptr_BONDdata->field_FCC;
  }
  if (iVar4 == 0) {
    ptr_BONDdata->field_FD4 = 0;
  }
  else {
    IStack12 = get_item_in_hand(0);
    IStack16 = get_item_in_hand(1);
    ptr_BONDdata->field_FD4 = ptr_BONDdata->field_FD4 + clock_timer;
    if ((IStack12 == ITEM_UNARMED) || (IStack16 == ITEM_UNARMED)) {
      IVar5 = get_item_in_hand(ptr_BONDdata->field_FD8);
      if ((IVar5 == ITEM_UNARMED) &&
         (IVar5 = get_item_in_hand(1 - ptr_BONDdata->field_FD8), IVar5 != ITEM_UNARMED)) {
        ptr_BONDdata->field_FD8 = 1 - ptr_BONDdata->field_FD8;
      }
      pBVar1 = ptr_BONDdata;
      aiStack8[ptr_BONDdata->field_FD8] = 1;
      aiStack8[pBVar1->field_FD8 * 0x3fffffff + 1] = 0;
    }
    else {
      uVar3 = check_special_attributes(IStack12,0x80);
      if ((uVar3 == 0) ||
         (uVar3 = check_special_attributes(IStack16,0x80), pBVar1 = ptr_BONDdata, uVar3 == 0)) {
        uVar3 = check_special_attributes(IStack12,0x80);
        if ((uVar3 == 0) &&
           (uVar3 = check_special_attributes(IStack16,0x80), pBVar1 = ptr_BONDdata, uVar3 == 0)) {
          if (ptr_BONDdata->field_FD4 < 0x1f) {
            if ((ptr_BONDdata->field_FD0 == 0) &&
               ((uVar3 = proc_7F0673B4(1 - ptr_BONDdata->field_FD8), uVar3 != 0 ||
                (uVar3 = proc_7F0673B4(ptr_BONDdata->field_FD8), uVar3 == 0)))) {
              ptr_BONDdata->field_FD8 = 1 - ptr_BONDdata->field_FD8;
            }
            pBVar1 = ptr_BONDdata;
            aiStack8[ptr_BONDdata->field_FD8] = 1;
            aiStack8[pBVar1->field_FD8 * 0x3fffffff + 1] = 0;
          }
          else {
            aiStack8[ptr_BONDdata->field_FD8] = 1;
            uVar3 = proc_7F0673B4(1 - pBVar1->field_FD8);
            if ((uVar3 != 0) ||
               (*(int *)((int)ptr_BONDdata + ptr_BONDdata->field_FD8 * -0x3a8 + 0xc28) != 0)) {
              aiStack8[ptr_BONDdata->field_FD8 * 0x3fffffff + 1] = 1;
            }
          }
        }
        else {
          pBVar1 = ptr_BONDdata;
          if (ptr_BONDdata->field_FD4 < 0x1f) {
            uVar3 = check_special_attributes(IStack12,0x80);
            uStack20 = (uint)(uVar3 == 0);
            uVar3 = proc_7F0673B4((uint)(uVar3 == 0));
            uVar2 = uStack20;
            if ((uVar3 == 0) &&
               (iVar4 = 1 - uStack20, (&ptr_BONDdata->field_880)[uStack20 * 0xea] == 0)) {
              uVar3 = proc_7F0673B4(iVar4);
              if ((uVar3 == 0) && (*(int *)((int)ptr_BONDdata + uVar2 * -0x3a8 + 0xc28) == 0)) {
                ptr_BONDdata->field_FD8 = 1 - ptr_BONDdata->field_FD8;
              }
              else {
                ptr_BONDdata->field_FD8 = iVar4;
              }
            }
            else {
              ptr_BONDdata->field_FD8 = uStack20;
            }
            pBVar1 = ptr_BONDdata;
            aiStack8[ptr_BONDdata->field_FD8] = 1;
            aiStack8[pBVar1->field_FD8 * 0x3fffffff + 1] = 0;
          }
          else {
            aiStack8[ptr_BONDdata->field_FD8] = 1;
            uVar3 = proc_7F0673B4(1 - pBVar1->field_FD8);
            if ((uVar3 != 0) ||
               (*(int *)((int)ptr_BONDdata + ptr_BONDdata->field_FD8 * -0x3a8 + 0xc28) != 0)) {
              aiStack8[ptr_BONDdata->field_FD8 * 0x3fffffff + 1] = 1;
            }
          }
        }
      }
      else {
        if (ptr_BONDdata->field_FD4 < 0x15) {
          if ((ptr_BONDdata->field_FD0 == 0) &&
             ((uVar3 = proc_7F0673B4(1 - ptr_BONDdata->field_FD8), uVar3 != 0 ||
              (uVar3 = proc_7F0673B4(ptr_BONDdata->field_FD8), uVar3 == 0)))) {
            ptr_BONDdata->field_FD8 = 1 - ptr_BONDdata->field_FD8;
          }
          pBVar1 = ptr_BONDdata;
          aiStack8[ptr_BONDdata->field_FD8] = 1;
          aiStack8[pBVar1->field_FD8 * 0x3fffffff + 1] = 0;
        }
        else {
          aiStack8[ptr_BONDdata->field_FD8] = 1;
          uVar3 = proc_7F0673B4(1 - pBVar1->field_FD8);
          if ((uVar3 != 0) ||
             (*(int *)((int)ptr_BONDdata + ptr_BONDdata->field_FD8 * -0x3a8 + 0xc28) != 0)) {
            aiStack8[ptr_BONDdata->field_FD8 * 0x3fffffff + 1] = 1;
          }
        }
      }
    }
  }
  handle_weapon_id_values_possibly_1st_person_animation(0,aiStack8[0]);
  handle_weapon_id_values_possibly_1st_person_animation(1,aiStack8[1]);
  used_to_load_1st_person_model_on_demand(0);
  used_to_load_1st_person_model_on_demand(1);
  proc_7F0671A4();
  if (ptr_BONDdata->field_FE0 == 0) {
    iVar4 = get_curplayer_positiondata();
    proc_7F04009C(iVar4,abStack24);
    proc_7F040310((byte *)&ptr_BONDdata->field_FDC,abStack24);
  }
  else {
    iVar4 = get_curplayer_positiondata();
    proc_7F04009C(iVar4,(byte *)&ptr_BONDdata->field_FDC);
    ptr_BONDdata->field_FE0 = 0;
  }
  IVar5 = get_item_in_hand(0);
  IVar6 = get_item_in_hand(1);
  proc_7F08D9EC(IVar5,IVar6);
  pBVar1 = ptr_BONDdata;
  if (-1 < ptr_BONDdata->field_1270) {
    ptr_BONDdata->field_1270 = ptr_BONDdata->field_1270 + clock_timer;
    if (ptr_BONDdata->field_1270 < 300) {
      if (((pBVar1->field_A44 == 0) || (uVar3 = music_related_26(pBVar1->field_A44), uVar3 == 0)) &&
         (iVar4 = get_controls_locked_flag(), iVar4 == 0)) {
        play_sfx_a1(ptr_sfx_buf,0xf6,(sfxdata *)&pBVar1->field_A44);
      }
    }
    else {
      ptr_BONDdata->field_1270 = -1;
      if ((pBVar1->field_A44 != 0) && (uVar3 = music_related_26(pBVar1->field_A44), uVar3 != 0)) {
        music_related_28(pBVar1->field_A44);
      }
    }
  }
  return;
}



void proc_7F067AA4(int param_1)

{
  ptr_BONDdata->field_FE4 = param_1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F067AB4(void)

{
  float *in_a0_lo;
  float in_f0;
  
  proc_7F05DCB8(0);
  *(float *)&ptr_BONDdata->field_A38 = in_f0 + *in_a0_lo;
  *(float *)&ptr_BONDdata->field_A3C = in_a0_lo[1];
  *(float *)&ptr_BONDdata->field_A40 = in_a0_lo[2];
  proc_7F05DCB8(1);
  *(float *)&ptr_BONDdata->field_DE0 = in_f0 + *in_a0_lo;
  *(float *)&ptr_BONDdata->field_DE4 = in_a0_lo[1];
  *(float *)&ptr_BONDdata->field_DE8 = in_a0_lo[2];
  return;
}



void proc_7F067B4C(undefined4 *param_1)

{
  int iVar1;
  
  iVar1 = *param_1;
  ptr_BONDdata->left_item_related1 = iVar1;
  ptr_BONDdata->field_FB4 = iVar1;
  iVar1 = param_1[1];
  ptr_BONDdata->left_item_related2 = iVar1;
  ptr_BONDdata->field_FB8 = iVar1;
  iVar1 = param_1[2];
  ptr_BONDdata->left_item_related3 = iVar1;
  ptr_BONDdata->field_FBC = iVar1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void caclulate_gun_crosshair_position_rotation(void)

{
  int iVar1;
  float in_a2_lo;
  float in_a3_lo;
  f32 fVar2;
  float fVar3;
  float fVar4;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float afStack24 [3];
  f32 fStack12;
  f32 fStack8;
  int iStack4;
  
  fStack8 = get_screen_width();
  fStack12 = get_screen_height();
  if (in_a2_lo != (float)ptr_BONDdata->field_FF8) {
    ptr_BONDdata->field_FF0 =
         (ptr_BONDdata->field_FF0 * (1.00000000 - (float)ptr_BONDdata->field_FF8)) /
         (1.00000000 - in_a2_lo);
    ptr_BONDdata->field_FF4 =
         (ptr_BONDdata->field_FF4 * (1.00000000 - (float)ptr_BONDdata->field_FF8)) /
         (1.00000000 - in_a2_lo);
    *(float *)&ptr_BONDdata->field_FF8 = in_a2_lo;
  }
  if (in_a3_lo != (float)ptr_BONDdata->field_100C) {
    ptr_BONDdata->field_1004 =
         (ptr_BONDdata->field_1004 * (1.00000000 - (float)ptr_BONDdata->field_100C)) /
         (1.00000000 - in_a3_lo);
    ptr_BONDdata->field_1008 =
         (ptr_BONDdata->field_1008 * (1.00000000 - (float)ptr_BONDdata->field_100C)) /
         (1.00000000 - in_a3_lo);
    *(float *)&ptr_BONDdata->field_100C = in_a3_lo;
  }
  iVar1 = 0;
  if (0 < clock_timer) {
    do {
      iVar1 += 1;
      ptr_BONDdata->field_FF0 = ptr_BONDdata->field_FF0 * in_a2_lo + in_f12;
      ptr_BONDdata->field_FF4 = ptr_BONDdata->field_FF4 * in_a2_lo + in_f14;
    } while (iVar1 < clock_timer);
  }
  fVar4 = (float)fStack8 * 0.50000000;
  ptr_BONDdata->field_FE8 =
       ptr_BONDdata->field_FF0 * (1.00000000 - in_a2_lo) * (float)fStack8 * 0.50000000 + fVar4;
  ptr_BONDdata->field_FEC =
       ptr_BONDdata->field_FF4 * (1.00000000 - in_a2_lo) * (float)fStack12 * 0.50000000 +
       (float)fStack12 * 0.50000000;
  if (ptr_BONDdata->field_FE8 < 3.00000000) {
    ptr_BONDdata->field_FE8 = 3.00000000;
  }
  else {
    if (ptr_BONDdata->field_FE8 <= (float)fStack8 - 4.00000000) {
      fVar3 = ptr_BONDdata->field_FEC;
      goto LAB_7f067db8;
    }
    ptr_BONDdata->field_FE8 = (float)fStack8 - 4.00000000;
  }
  fVar3 = ptr_BONDdata->field_FEC;
LAB_7f067db8:
  if (fVar3 < 3.00000000) {
    ptr_BONDdata->field_FEC = 3.00000000;
  }
  else {
    if ((float)fStack12 - 4.00000000 < fVar3) {
      ptr_BONDdata->field_FEC = (float)fStack12 - 4.00000000;
    }
  }
  iStack4 = 0;
  fVar2 = get_ulx();
  ptr_BONDdata->field_FE8 = ptr_BONDdata->field_FE8 + (float)fVar2;
  fVar2 = get_uly();
  ptr_BONDdata->field_FEC = ptr_BONDdata->field_FEC + (float)fVar2;
  iVar1 = iStack4;
  if (0 < clock_timer) {
    do {
      iVar1 += 1;
      ptr_BONDdata->field_1004 = ptr_BONDdata->field_1004 * in_a3_lo + in_f12;
      ptr_BONDdata->field_1008 = ptr_BONDdata->field_1008 * in_a3_lo + in_f14;
    } while (iVar1 < clock_timer);
  }
  ptr_BONDdata->field_FFC =
       ptr_BONDdata->field_1004 * (1.00000000 - in_a3_lo) * (float)fStack8 * 0.50000000 + fVar4;
  ptr_BONDdata->field_1000 =
       ptr_BONDdata->field_1008 * (1.00000000 - in_a3_lo) * (float)fStack12 * 0.50000000 +
       (float)fStack12 * 0.50000000;
  fVar2 = get_ulx();
  ptr_BONDdata->field_FFC = ptr_BONDdata->field_FFC + (float)fVar2;
  fVar2 = get_uly();
  ptr_BONDdata->field_1000 = ptr_BONDdata->field_1000 + (float)fVar2;
  proc_7F077EEC(&ptr_BONDdata->field_FFC,afStack24,extraout_f12);
  proc_7F067AB4();
  return;
}



void proc_7F067F58(undefined4 param_1,undefined4 param_2)

{
  ITEM_IDS item;
  
  item = get_item_in_hand(0);
  get_ptr_item_statistics(item);
  caclulate_gun_crosshair_position_rotation();
  return;
}



void proc_7F067FBC(undefined4 param_1,undefined4 param_2)

{
  ITEM_IDS item;
  
  item = get_item_in_hand(0);
  get_ptr_item_statistics(item);
  caclulate_gun_crosshair_position_rotation();
  return;
}



void proc_7F068008(undefined4 *param_1,undefined4 *param_2)

{
  *(float *)param_1 = ptr_BONDdata->field_FE8;
  *(float *)param_2 = ptr_BONDdata->field_FEC;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F06802C(void)

{
  f32 fVar1;
  f32 fVar2;
  float fVar3;
  float extraout_f12;
  float afStack12 [3];
  
  fVar1 = get_ulx();
  fVar2 = get_screen_width();
  fVar3 = (float)fVar2 * 0.50000000 + (float)fVar1;
  ptr_BONDdata->field_FE8 = fVar3;
  ptr_BONDdata->field_FFC = fVar3;
  fVar1 = get_uly();
  fVar2 = get_screen_height();
  fVar3 = (float)fVar2 * 0.50000000 + (float)fVar1;
  ptr_BONDdata->field_FEC = fVar3;
  ptr_BONDdata->field_1000 = fVar3;
  proc_7F077EEC(&ptr_BONDdata->field_FFC,afStack12,extraout_f12);
  proc_7F067AB4();
  return;
}



void proc_7F0680D4(float *param_1)

{
  float fStack12;
  float fStack8;
  float fStack4;
  
  ptr_BONDdata->field_1010 = *param_1;
  *(float *)&ptr_BONDdata->holds_neg_pi = param_1[1];
  ptr_BONDdata->field_1018 = param_1[2];
  proc_7F058714(param_1,(float *)&ptr_BONDdata->field_101C);
  fStack12 = (float)ptr_BONDdata->field_103C * 1000.00000000;
  fStack8 = (float)ptr_BONDdata->field_1040 * 1000.00000000;
  fStack4 = (float)ptr_BONDdata->field_1044 * 1000.00000000;
  proc_7F077FF4(&fStack12,&ptr_BONDdata->field_FE8);
  ptr_BONDdata->field_FFC = ptr_BONDdata->field_FE8;
  ptr_BONDdata->field_1000 = ptr_BONDdata->field_FEC;
  proc_7F067AB4();
  return;
}



void proc_7F068190(undefined4 *param_1,float *param_2)

{
  float in_f12;
  
  *param_1 = 0;
  param_1[1] = 0;
  param_1[2] = 0;
  proc_7F077EEC(&ptr_BONDdata->field_FE8,param_2,in_f12);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0681CC(void)

{
  ITEM_IDS item;
  undefined *puVar2;
  int item_00;
  ulonglong uVar1;
  u32 uVar3;
  u32 uVar4;
  undefined4 *in_a0_lo;
  float *in_a1_lo;
  int hand;
  float in_f0;
  f32 fVar5;
  f32 fVar6;
  float fVar7;
  float extraout_f12;
  float fVar8;
  float fStack16;
  float fStack8;
  float fStack4;
  
  item = get_item_in_hand(hand);
  puVar2 = get_ptr_item_statistics(item);
  fStack16 = *(float *)(puVar2 + 0x30);
  item_00 = return_ammo_in_hand(hand);
  uVar1 = check_special_attributes(item_00,0x1000);
  if ((uVar1 != 0) && ((&ptr_BONDdata->field_C08)[hand * 0xea] == 1)) {
    fStack16 = fStack16 * 0.25000000;
  }
  video_related_23();
  in_f0 = (fStack16 * 120.00000000) / in_f0;
  uVar3 = get_random_value();
  uVar4 = get_random_value();
  fVar7 = (float)uVar3;
  if ((int)uVar3 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar8 = (float)uVar4;
  if ((int)uVar4 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  fVar5 = get_screen_width();
  fVar6 = proc_7F0784F4();
  fStack8 = (fVar8 * 0.00000000 * (fVar7 * 0.00000000 - 0.50000000) * in_f0 * (float)fVar5 *
            flt_800543B0) / ((float)fVar6 * 320.00000000) + ptr_BONDdata->field_FE8;
  uVar3 = get_random_value();
  uVar4 = get_random_value();
  fVar7 = (float)uVar3;
  if ((int)uVar3 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar8 = (float)uVar4;
  if ((int)uVar4 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  fVar5 = get_screen_height();
  fStack4 = ((float)fVar5 * fVar8 * 0.00000000 * (fVar7 * 0.00000000 - 0.50000000) * in_f0) /
            240.00000000 + ptr_BONDdata->field_FEC;
  *in_a0_lo = 0;
  in_a0_lo[1] = 0;
  in_a0_lo[2] = 0;
  proc_7F077EEC(&fStack8,in_a1_lo,extraout_f12);
  return;
}



undefined * proc_7F068420(undefined4 param_1,undefined4 *param_2)

{
  undefined *puVar1;
  undefined4 uVar2;
  
  puVar1 = &DAT_80075dc8;
  if (DAT_80075e64 != 0) {
    puVar1 = &DAT_80075e68;
    while ((puVar1 < &DAT_80076a48 && (*(int *)(puVar1 + 0x9c) != 0))) {
      puVar1 = puVar1 + 0xa0;
    }
  }
  if (puVar1 < &DAT_80076a48) {
    *(undefined4 *)(puVar1 + 0x9c) = param_1;
    *(undefined4 *)(puVar1 + 4) = param_2[0xc];
    *(undefined4 *)(puVar1 + 8) = param_2[0xd];
    *(undefined4 *)(puVar1 + 0xc) = param_2[0xe];
    *(undefined4 *)(puVar1 + 0x1c) = *param_2;
    *(undefined4 *)(puVar1 + 0x20) = param_2[1];
    uVar2 = param_2[2];
    *(undefined4 *)(puVar1 + 0x28) = 0;
    *(undefined4 *)(puVar1 + 0x24) = uVar2;
    *(undefined4 *)(puVar1 + 0x2c) = param_2[4];
    *(undefined4 *)(puVar1 + 0x30) = param_2[5];
    uVar2 = param_2[6];
    *(undefined4 *)(puVar1 + 0x38) = 0;
    *(undefined4 *)(puVar1 + 0x34) = uVar2;
    *(undefined4 *)(puVar1 + 0x3c) = param_2[8];
    *(undefined4 *)(puVar1 + 0x40) = param_2[9];
    uVar2 = param_2[10];
    *(undefined4 *)(puVar1 + 0x48) = 0;
    *(undefined4 *)(puVar1 + 0x4c) = 0;
    *(undefined4 *)(puVar1 + 0x50) = 0;
    *(undefined4 *)(puVar1 + 0x54) = 0;
    *(undefined4 *)(puVar1 + 0x58) = 0x3f800000;
    *(undefined4 *)(puVar1 + 0x44) = uVar2;
    return puVar1;
  }
  return NULL;
}



void proc_7F068508(int param_1,undefined4 param_2)

{
  float *pfVar1;
  undefined *puVar3;
  ulonglong uVar2;
  undefined4 *puVar4;
  u32 uVar5;
  u32 uVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack92;
  float fStack88;
  float fStack84;
  int iStack80;
  ITEM_IDS IStack72;
  float afStack68 [17];
  
  IStack72 = get_item_in_hand(param_1);
  puVar3 = get_ptr_item_statistics(IStack72);
  iStack80 = *(int *)(puVar3 + 0x28);
  if ((iStack80 != 0) && (uVar2 = get_num_players(), (longlong)uVar2 < 2)) {
    if (*(int *)ptr_BONDdata->copy_of_body_obj_header[param_1 * 8 + 2] == 0) {
      proc_7F058020(&ptr_BONDdata->field_AD8 + param_1 * 0xea,afStack68);
    }
    else {
      pfVar1 = *(float **)(*(int *)ptr_BONDdata->copy_of_body_obj_header[param_1 * 8 + 2] + 4);
      fStack92 = *pfVar1 * flt_800543B4;
      fStack88 = pfVar1[1] * flt_800543B4;
      fStack84 = pfVar1[2] * flt_800543B4;
      init_something_copy_posdata_to_it((int *)&fStack92,(int *)afStack68);
      proc_7F058068((float *)(&ptr_BONDdata->field_AD8 + param_1 * 0xea),afStack68);
    }
    puVar4 = (undefined4 *)proc_7F068420(iStack80,afStack68);
    if (puVar4 != NULL) {
      fStack108 = DAT_80035ea4;
      fStack100 = (float)DAT_80035eac;
      fStack104 = (float)DAT_80035ea8;
      *puVar4 = param_2;
      if ((((IStack72 == ITEM_WPPK) || (IStack72 == ITEM_WPPKSIL)) || (IStack72 == ITEM_TT33)) ||
         ((IStack72 == ITEM_SILVERWPPK || (IStack72 == ITEM_GOLDWPPK)))) {
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        *(float *)(puVar4 + 4) = -(fVar8 * 0.00000000 * flt_800543B8 * 0.06250000 + flt_800543B8);
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        puVar4[6] = 0;
        *(float *)(puVar4 + 5) = fVar8 * 0.00000000 * 2.50000000 * 0.06250000 + 2.50000000;
        proc_7F0583D8((float *)(&ptr_BONDdata->field_AD8 + param_1 * 0xea),(float *)(puVar4 + 4));
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack108 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543BC * 0.06250000 -
                    flt_800543C0;
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack104 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543C4 * 0.06250000 -
                    flt_800543C8;
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack100 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543CC * 0.06250000 -
                    flt_800543D0;
        proc_7F058714(&fStack108,(float *)(puVar4 + 0x17));
        uVar5 = get_random_value();
        uVar6 = get_random_value();
        fVar8 = (float)puVar4[5];
        if (&UNK_00158679 + ((int)((uVar5 >> 0x18) * 0x158679) >> 10) == NULL) {
          trap(0x1c00);
        }
        fVar9 = (float)(uVar6 % (uint)(&UNK_00158679 + ((int)((uVar5 >> 0x18) * 0x158679) >> 10)));
        if (false) {
          fVar9 = fVar9 + 4294967296.00000000;
        }
        fVar9 = fVar9 / flt_800543D4;
        fVar7 = fVar8 - fVar9 * expended_shell_initial_gravity_modifier_pistol;
        *(float *)(puVar4 + 5) = fVar7;
        *(float *)(puVar4 + 2) = (float)puVar4[2] + fVar9 * (fVar8 + fVar7) * 0.50000000;
        *(float *)(puVar4 + 1) = (float)puVar4[1] + fVar9 * (float)puVar4[4];
        *(float *)(puVar4 + 3) = (float)puVar4[3] + fVar9 * (float)puVar4[6];
        if (0 < clock_timer) {
          *(float *)(puVar4 + 4) =
               (float)puVar4[4] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c2] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d2]) / global_timer_delta;
          *(float *)(puVar4 + 5) =
               (float)puVar4[5] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c3] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d3]) / global_timer_delta;
          *(float *)(puVar4 + 6) =
               (float)puVar4[6] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c4] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d4]) / global_timer_delta;
        }
      }
      else {
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        *(float *)(puVar4 + 4) = -(fVar8 * 0.00000000 * flt_800543DC * 0.12500000 + flt_800543DC);
        uVar5 = get_random_value();
        fVar8 = flt_800543E0;
        fVar9 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar9 = fVar9 + 4294967296.00000000;
        }
        fVar9 = fVar9 * 0.00000000 * flt_800543E0;
        puVar4[6] = 0;
        *(float *)(puVar4 + 5) = fVar9 * 0.12500000 + fVar8;
        proc_7F0583D8((float *)(&ptr_BONDdata->field_AD8 + param_1 * 0xea),(float *)(puVar4 + 4));
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack108 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543E4 * 0.06250000 -
                    flt_800543E8;
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack104 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543EC * 0.06250000 -
                    flt_800543F0;
        uVar5 = get_random_value();
        fVar8 = (float)uVar5;
        if ((int)uVar5 < 0) {
          fVar8 = fVar8 + 4294967296.00000000;
        }
        fStack100 = (fVar8 * 0.00000000 + fVar8 * 0.00000000) * flt_800543F4 * 0.06250000 -
                    flt_800543F8;
        proc_7F058714(&fStack108,(float *)(puVar4 + 0x17));
        uVar5 = get_random_value();
        uVar6 = get_random_value();
        fVar8 = (float)puVar4[5];
        if (&UNK_00158679 + ((int)((uVar5 >> 0x18) * 0x158679) >> 10) == NULL) {
          trap(0x1c00);
        }
        fVar9 = (float)(uVar6 % (uint)(&UNK_00158679 + ((int)((uVar5 >> 0x18) * 0x158679) >> 10)));
        if (false) {
          fVar9 = fVar9 + 4294967296.00000000;
        }
        fVar9 = fVar9 / flt_800543FC;
        fVar7 = fVar8 - fVar9 * expended_shell_initial_gravity_modifier_non_pistol;
        *(float *)(puVar4 + 5) = fVar7;
        *(float *)(puVar4 + 2) = (float)puVar4[2] + fVar9 * (fVar8 + fVar7) * 0.50000000;
        *(float *)(puVar4 + 1) = (float)puVar4[1] + fVar9 * (float)puVar4[4];
        *(float *)(puVar4 + 3) = (float)puVar4[3] + fVar9 * (float)puVar4[6];
        if (0 < clock_timer) {
          *(float *)(puVar4 + 4) =
               (float)puVar4[4] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c2] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d2]) / global_timer_delta;
          *(float *)(puVar4 + 5) =
               (float)puVar4[5] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c3] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d3]) / global_timer_delta;
          *(float *)(puVar4 + 6) =
               (float)puVar4[6] +
               ((float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2c4] -
               (float)(&ptr_BONDdata->unknown + param_1 * 0xea)[0x2d4]) / global_timer_delta;
        }
      }
    }
  }
  return;
}



void proc_7F068D20(float *param_1)

{
  float fVar1;
  int iVar2;
  float fVar3;
  
  fVar1 = global_timer_delta;
  fVar3 = param_1[5] - global_timer_delta * expended_shell_initial_gravity_modifier_all;
  param_1[2] = param_1[2] + global_timer_delta * 0.50000000 * (param_1[5] + fVar3);
  if (param_1[2] < *param_1) {
    if (((DAT_80075db0 == 0) && (ptr_BONDdata->when_detonating_mines_is_0 != 2)) &&
       (ptr_BONDdata->field_C3C != 2)) {
      play_sfx_a1(ptr_sfx_buf,0x7a,(sfxdata *)&DAT_80075db0);
    }
    param_1[0x27] = 0.00000000;
  }
  else {
    param_1[5] = fVar3;
    iVar2 = 0;
    param_1[1] = param_1[1] + fVar1 * param_1[4];
    param_1[3] = param_1[3] + fVar1 * param_1[6];
    if (0 < clock_timer) {
      do {
        proc_7F058098(param_1 + 0x17,param_1 + 7);
        iVar2 += 1;
      } while (iVar2 < clock_timer);
    }
  }
  return;
}



void proc_7F068E6C(void)

{
  float fVar1;
  float *pfVar2;
  
  fVar1 = DAT_80075e64;
  pfVar2 = (float *)&DAT_80075dc8;
  while( true ) {
    if (fVar1 != 0.00000000) {
      proc_7F068D20(pfVar2);
    }
    if ((float *)0x80076a47 < pfVar2 + 0x28) break;
    fVar1 = pfVar2[0x4f];
    pfVar2 = pfVar2 + 0x28;
  }
  return;
}



void proc_7F068EC4(int param_1,undefined4 *param_2)

{
  bool bVar1;
  float *pfVar2;
  int iVar3;
  object_header *poVar4;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  undefined4 *puVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  float afStack172 [16];
  undefined4 uStack108;
  undefined4 uStack104;
  undefined4 uStack96;
  object_header *poStack92;
  undefined4 uStack60;
  uint uStack56;
  undefined auStack44 [12];
  object_header *poStack32;
  object_header *poStack12;
  object_header *poStack8;
  undefined4 uStack4;
  
  uStack4 = *param_2;
  poStack12 = *(object_header **)(param_1 + 0x9c);
  poStack8 = poStack12;
  proc_7F0BD714((int)poStack12->num_object_grps << 6);
  puVar7 = &DAT_80035eb0;
  puVar5 = &uStack108;
  do {
    puVar8 = puVar7 + 3;
    puVar6 = puVar5 + 3;
    *puVar5 = *puVar7;
    puVar5[1] = puVar7[1];
    puVar5[2] = puVar7[2];
    puVar7 = puVar8;
    puVar5 = puVar6;
  } while (puVar8 != (undefined4 *)0x80035eec);
  bVar1 = true;
  *puVar6 = uRam80035eec;
  set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack8);
  proc_7F075F68((int)auStack44,(ushort **)poStack8,0);
  poStack32 = poStack12;
  proc_7F058020((undefined4 *)(param_1 + 0x1c),afStack172);
  matrix_multiply_A1_by_F12(flt_80054408,extraout_a0,afStack172);
  proc_7F058998((undefined4 *)(param_1 + 4),(int)afStack172);
  pfVar2 = (float *)proc_7F0783C4();
  proc_7F05818C(pfVar2,afStack172,(int)poStack32);
  iVar3 = 0;
  poVar4 = poStack32;
  do {
    iVar3 += 4;
    if (flt_80054410 < poVar4[1].anonymous_4) {
      bVar1 = false;
    }
    else {
      if (poVar4[1].anonymous_4 < flt_8005440C) {
        bVar1 = false;
      }
    }
    poVar4 = (object_header *)&poVar4->ptr_archetype;
  } while (iVar3 != 0xc);
  if (bVar1) {
    uStack104 = 0;
    uStack60 = 4;
    uStack96 = uStack4;
    poStack92 = poStack12;
    uStack56 = (uint)(byte)ptr_BONDdata->field_FDF | (uint)(byte)ptr_BONDdata->field_FDC << 0x18 |
               (uint)(byte)ptr_BONDdata->field_FDD << 0x10 |
               (uint)(byte)ptr_BONDdata->field_FDE << 8;
    subdraw((int)&uStack108,(uint)auStack44,extraout_a2_lo,extraout_a3_lo);
    *param_2 = uStack96;
    proc_7F08BD48((undefined4 *)poStack12,(int)poStack8->num_object_grps);
  }
  return;
}



void proc_7F06908C(undefined4 *param_1)

{
  int iVar1;
  undefined *puVar2;
  
  iVar1 = DAT_80075e64;
  puVar2 = &DAT_80075dc8;
  while( true ) {
    if (iVar1 != 0) {
      proc_7F068EC4((int)puVar2,param_1);
    }
    if ((undefined *)0x80076a47 < puVar2 + 0xa0) break;
    iVar1 = *(int *)(puVar2 + 0x13c);
    puVar2 = puVar2 + 0xa0;
  }
  return;
}



void set_unset_ammo_on_screen_setting(int flags,int isset)

{
  if (isset != 0) {
    ptr_BONDdata->somekinda_flags = ptr_BONDdata->somekinda_flags & ~flags;
    return;
  }
  ptr_BONDdata->somekinda_flags = ptr_BONDdata->somekinda_flags | flags;
  return;
}



void give_cur_player_ammo(AMMOTYPES type,int amount)

{
  ITEM_IDS weapon;
  int iVar2;
  ulonglong uVar1;
  undefined *puVar3;
  int iVar4;
  
  weapon = get_item_in_hand(0);
  iVar2 = get_ammo_type_for_weapon(weapon);
  iVar4 = (int)(char)type;
  if (((longlong)iVar2 == (longlong)(char)type) &&
     (uVar1 = check_special_attributes(weapon,0x200000), uVar1 != 0)) {
    ptr_BONDdata->right_weapon_ammo_in_magazine =
         ptr_BONDdata->right_weapon_ammo_in_magazine + amount;
    puVar3 = get_ptr_item_statistics(weapon);
    if ((longlong)*(short *)(puVar3 + 0x20) < (longlong)ptr_BONDdata->right_weapon_ammo_in_magazine)
    {
      puVar3 = get_ptr_item_statistics(weapon);
      ptr_BONDdata->right_weapon_ammo_in_magazine = (int)*(short *)(puVar3 + 0x20);
    }
    ptr_BONDdata->ammo_totals[iVar4] = 0;
  }
  else {
    if ((int)(&DAT_80035ef0)[iVar4 * 3] < amount) {
      ptr_BONDdata->ammo_totals[iVar4] = (&DAT_80035ef0)[iVar4 * 3];
    }
    else {
      ptr_BONDdata->ammo_totals[iVar4] = amount;
    }
  }
  return;
}



int check_cur_player_ammo_amount_in_inventory(int type)

{
  return ptr_BONDdata->ammo_totals[type];
}



int check_cur_player_ammo_amount_total(int type)

{
  int iVar1;
  ITEM_IDS weapon;
  int iVar2;
  
  iVar1 = check_cur_player_ammo_amount_in_inventory(type);
  weapon = get_item_in_hand(0);
  iVar2 = get_ammo_type_for_weapon(weapon);
  if (iVar2 == type) {
    iVar2 = get_ammo_in_hands_magazine(0);
    iVar1 += iVar2;
  }
  weapon = get_item_in_hand(1);
  iVar2 = get_ammo_type_for_weapon(weapon);
  if (iVar2 == type) {
    iVar2 = get_ammo_in_hands_magazine(1);
    iVar1 += iVar2;
  }
  return iVar1;
}



undefined4 get_max_ammo_for_type(AMMOTYPES type)

{
  return (&DAT_80035ef0)[(int)(char)type * 3];
}



void set_max_ammo_for_cur_player(void)

{
  int iVar1;
  int *piVar2;
  
  piVar2 = &DAT_80035ef0;
  iVar1 = 0;
  do {
    give_cur_player_ammo((AMMOTYPES)iVar1,*piVar2);
    iVar1 += 1;
    piVar2 = piVar2 + 3;
  } while (iVar1 != 0x1e);
  return;
}



int get_ammo_in_hands_magazine(int hand)

{
  return (&ptr_BONDdata->right_weapon_ammo_in_magazine)[hand * 0xea];
}



int get_ammo_in_hands_weapon(int hand)

{
  ITEM_IDS weapon;
  int iVar1;
  
  weapon = get_item_in_hand(hand);
  iVar1 = get_ammo_count_for_weapon(weapon);
  if (((weapon == ITEM_SHOTGUN) || (weapon == ITEM_AUTOSHOT)) &&
     ((weapon = get_item_in_hand(1 - hand), weapon == ITEM_SHOTGUN || (weapon == ITEM_AUTOSHOT)))) {
    iVar1 -= *(int *)((int)ptr_BONDdata + hand * -0x3a8 + 0xc4c);
  }
  return iVar1;
}



undefined4 get_ammo_type_for_weapon(int weapon)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(weapon);
  return *(undefined4 *)(puVar1 + 0x1c);
}



int get_ammo_count_for_weapon(int weapon)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(weapon);
  return ptr_BONDdata->ammo_totals[*(int *)(puVar1 + 0x1c)];
}



void add_ammo_to_weapon(int weapon,int ammo)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(weapon);
  give_cur_player_ammo((AMMOTYPES)*(undefined4 *)(puVar1 + 0x1c),ammo);
  return;
}



undefined4 get_max_ammo_for_weapon(int weapon)

{
  undefined *puVar1;
  
  puVar1 = get_ptr_item_statistics(weapon);
  return (&DAT_80035ef0)[*(int *)(puVar1 + 0x1c) * 3];
}



undefined4 *
microcode_generation_ammo_related
          (int *buffer,int *imagedeclaration,f32 hpos,f32 param_4,f32 vpos,f32 param_6,f32 voffset,
          int param_8,int red,int green,int blue,int alpha)

{
  uint uVar1;
  int iVar2;
  float fVar3;
  f32 wdivh;
  int *piStackX0;
  int alpha_00;
  int format;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  buffer[1] = 0xc0;
  *buffer = -0x45fff9fe;
  buffer[3] = 0;
  buffer[2] = -0x45ffecff;
  buffer[5] = 0;
  buffer[4] = -0x46fffffe;
  buffer[7] = 0;
  buffer[6] = -0x45ffefff;
  buffer[9] = 0;
  buffer[8] = -0x45fff3fe;
  buffer[0xb] = 0xc00;
  buffer[10] = -0x45fff6fd;
  buffer[0xd] = 0;
  buffer[0xc] = -0x45fff1fe;
  uVar1 = (uint)*(byte *)(imagedeclaration + 1);
  fVar3 = (float)uVar1;
  if (false) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  if (false) {
    uVar1 = (uint)*(byte *)(imagedeclaration + 1) + 1;
  }
  fStack8 = fVar3 * 0.50000000 - (float)((int)uVar1 >> 1);
  if (param_8 != 0) {
    fStack8 = -fStack8;
  }
  fStack8 = fStack8 + (float)vpos;
  if (0.00000000 <= (float)param_6) {
    fVar3 = (float)(uint)*(byte *)((int)imagedeclaration + 5);
    if (false) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    fStack4 = (float)param_6 - fVar3 * 0.50000000;
  }
  else {
    uVar1 = (uint)*(byte *)((int)imagedeclaration + 5);
    fVar3 = (float)uVar1;
    if (false) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    if (false) {
      uVar1 = (uint)*(byte *)((int)imagedeclaration + 5) + 1;
    }
    fStack4 = ((float)voffset - (fVar3 * 0.50000000 - (float)((int)uVar1 >> 1))) + (float)red;
  }
  iVar2 = 1;
  fStack16 = (float)(uint)*(byte *)(imagedeclaration + 1);
  if (false) {
    fStack16 = fStack16 + 4294967296.00000000;
  }
  fStack16 = fStack16 * 0.50000000;
  fStack12 = (float)(uint)*(byte *)((int)imagedeclaration + 5);
  if (false) {
    fStack12 = fStack12 + 4294967296.00000000;
  }
  fStack12 = fStack12 * 0.50000000;
  buffer[0xf] = 0;
  buffer[0xe] = -0x19000000;
  buffer[0x11] = 0;
  buffer[0x10] = -0x45ffebfe;
  buffer[0x13] = 0x504240;
  buffer[0x12] = -0x46fffce3;
  buffer[0x15] = -0x20905;
  buffer[0x14] = -0x3000001;
  buffer[0x17] = 0;
  buffer[0x16] = -0x6000000;
  piStackX0 = buffer + 0x1a;
  buffer[0x18] = ((int)(fStack12 + fStack4) + 1U & 0x3ff) << 2 | 0xf6000000 |
                 ((int)(fStack8 + fStack16) + 1U & 0x3ff) << 0xe;
  buffer[0x19] = ((int)(fStack4 - fStack12) - 1U & 0x3ff) << 2 |
                 ((int)(fStack8 - fStack16) - 1U & 0x3ff) << 0xe;
  if (green != 0) {
    iVar2 = 2;
  }
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,(uint *)imagedeclaration,iVar2,0,0);
  display_image_at_on_screen_coord
            ((int *)register0x000000ec,(int *)&fStack8,wdivh,(int)&fStack16,
             (uint)*(byte *)(imagedeclaration + 1),(uint)*(byte *)((int)imagedeclaration + 5),0,0,1,
             blue,alpha,alpha_00,format,(uint)(*(char *)((int)imagedeclaration + 6) != '\0'));
  piStackX0[1] = 0;
  *piStackX0 = -0x19000000;
  piStackX0[3] = 0x40;
  piStackX0[2] = -0x45fff9fe;
  piStackX0[5] = 0x80000;
  piStackX0[4] = -0x45ffecff;
  piStackX0[7] = 0;
  piStackX0[6] = -0x46fffffe;
  piStackX0[9] = 0x10000;
  piStackX0[8] = -0x45ffefff;
  piStackX0[0xb] = 0x2000;
  piStackX0[10] = -0x45fff3fe;
  piStackX0[0xd] = 0xc00;
  piStackX0[0xc] = -0x45fff6fd;
  piStackX0[0xf] = 0;
  piStackX0[0xe] = -0x45fff1fe;
  return (undefined4 *)(piStackX0 + 0x10);
}



void set_rgba_redirect_generate_microcode
               (int *buffer,int *imagedeclaration,f32 param_3,f32 param_4,f32 hoffset,f32 param_6,
               f32 voffset,int param_8)

{
  int red;
  int green;
  
  microcode_generation_ammo_related
            (buffer,imagedeclaration,hoffset,param_6,hoffset,param_6,voffset,param_8,red,green,0xff,
             0xff);
  return;
}



uint * proc_7F069A50(undefined4 *param_1,byte *param_2,uint param_3,int param_4,uint param_5,
                    int param_6,int param_7)

{
  int iVar1;
  uint *DL;
  short sVar2;
  short sVar3;
  int iStack24;
  int iStack20;
  uint uStack16;
  uint uStack12;
  uint uStack8;
  uint uStack4;
  
  uStack4 = 0;
  uStack8 = 0;
  uStack12 = 0;
  uStack16 = 0;
  iStack24 = 0;
  iStack20 = 0;
  proc_7F0AE98C(&iStack20,&iStack24,param_2,D_80040EB0,D_80040EAC,0);
  if (param_4 == 1) {
    uStack12 = param_3 + iStack24;
    uStack4 = param_3;
  }
  else {
    if (param_4 == 0) {
      uStack4 = param_3 - iStack24;
      uStack12 = param_3;
    }
    else {
      if (param_4 == 2) {
        iVar1 = iStack24;
        if (iStack24 < 0) {
          iVar1 = iStack24 + 1;
        }
        uStack12 = (iVar1 >> 1) + param_3;
        uStack4 = uStack12 - iStack24;
      }
    }
  }
  if (param_6 == 1) {
    uStack8 = param_5;
    uStack16 = param_5 + iStack20;
  }
  else {
    if (param_6 == 0) {
      uStack16 = param_5;
      uStack8 = param_5 - iStack20;
    }
    else {
      if (param_6 == 2) {
        iVar1 = iStack20;
        if (iStack20 < 0) {
          iVar1 = iStack20 + 1;
        }
        uStack16 = (iVar1 >> 1) + param_5;
        uStack8 = uStack16 - iStack20;
      }
    }
  }
  DL = draw_blackbox_to_screen(param_1,&uStack4,&uStack8,&uStack12,&uStack16);
  if (param_7 == 0) {
    sVar2 = get_video2_settings_txtClipW();
    sVar3 = get_video2_settings_txtClipH();
    DL = en_text_write_stuff(DL,(int *)&uStack4,(int *)&uStack8,param_2,D_80040EB0,(int)D_80040EAC,
                             0xff00b0,(int)sVar2,(int)sVar3,0,0);
  }
  else {
    sVar2 = get_video2_settings_txtClipW();
    sVar3 = get_video2_settings_txtClipH();
    DL = jp_text_stuff(DL,&uStack4,&uStack8,param_2,D_80040EB0,(int)D_80040EAC,0xffffffff,0x646464ff
                       ,(int)sVar2,(int)sVar3,0,0);
  }
  return DL;
}



uint * display_ammo_total_in_a1
                 (undefined4 *param_1,undefined8 param_2,uint param_3,int param_4,uint param_5,
                 int param_6,int param_7)

{
  uint *puVar1;
  byte abStack12 [12];
  
  sprintf((char *)abStack12,aD_9,param_2);
  puVar1 = proc_7F069A50(param_1,abStack12,param_3,param_4,param_5,param_6,param_7);
  return puVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int * generate_ammo_total_microcode(void)

{
  uint uVar1;
  ITEM_IDS weapon;
  ITEM_IDS weapon_00;
  ulonglong uVar2;
  u32 uVar3;
  int *imagedeclaration;
  short sVar6;
  int iVar4;
  short sVar7;
  short sVar8;
  int *piVar5;
  short sVar9;
  int *buffer;
  f32 fVar10;
  f32 fVar11;
  f32 extraout_f12;
  f32 extraout_f12_00;
  f32 extraout_f14;
  uint *local_res0;
  uint local_2c;
  uint local_24;
  int local_1c;
  int local_18;
  int local_14;
  int local_10;
  
  local_res0 = (uint *)buffer;
  if ((ptr_BONDdata->somekinda_flags == 0) &&
     (local_res0 = (uint *)buffer, ptr_BONDdata->in_mp_pause_menu == 0)) {
    weapon = get_item_in_hand(1);
    weapon_00 = get_item_in_hand(0);
    uVar2 = get_num_players();
    if ((longlong)uVar2 < 3) {
      local_10 = 0x3b;
      local_14 = 0x3b;
    }
    else {
      uVar3 = get_cur_playernum();
      if ((uVar3 & 1) == 0) {
        local_10 = 0x3b;
        local_14 = 0x6d;
      }
      else {
        local_10 = 0x2b;
        local_14 = 0x7f;
      }
    }
    local_res0 = (uint *)buffer;
    if ((((weapon_00 != ITEM_UNARMED) &&
         (iVar4 = get_ammo_type_for_weapon(weapon_00), local_res0 = (uint *)buffer, iVar4 != 0)) &&
        (local_res0 = (uint *)buffer, ptr_BONDdata->when_detonating_mines_is_0 != 6)) &&
       ((local_res0 = (uint *)buffer, ptr_BONDdata->when_detonating_mines_is_0 != 7 &&
        (uVar2 = check_special_attributes(weapon_00,0x80000), local_res0 = (uint *)buffer,
        uVar2 == 0)))) {
      local_24 = 5;
      local_res0 = (uint *)buffer;
      if ((&DAT_80035ef4)[iVar4 * 3] != 0) {
        imagedeclaration = (int *)((&DAT_80035ef4)[iVar4 * 3] + dword_8008D770);
        fVar11 = get_ulx();
        fVar10 = get_screen_width();
        sVar7 = get_video2_settings_uly();
        sVar8 = get_video2_settings_height();
        local_res0 = (uint *)(int)sVar8;
        set_rgba_redirect_generate_microcode
                  (buffer,imagedeclaration,extraout_f12,extraout_f14,
                   (f32)(((float)fVar10 + (float)fVar11) - (float)local_14),-1.00000000,
                   (f32)(float)((int)sVar8 + (int)sVar7 + -0x14),0);
        local_24 = (uint)*(byte *)(imagedeclaration + 1);
      }
      local_res0 = microcode_constructor(local_res0);
      uVar2 = check_special_attributes(weapon_00,0x400000);
      if (uVar2 == 0) {
        local_1c = ptr_BONDdata->right_weapon_ammo_in_magazine;
        local_18 = ptr_BONDdata->ammo_totals[iVar4];
      }
      else {
        local_1c = 0;
        local_18 = ptr_BONDdata->right_weapon_ammo_in_magazine + ptr_BONDdata->ammo_totals[iVar4];
        if (weapon == weapon_00) {
          local_18 += ptr_BONDdata->left_weapon_ammo_in_magazine;
        }
      }
      uVar2 = check_special_attributes(weapon_00,0x400000);
      if (uVar2 == 0) {
        sVar7 = get_video2_settings_ulx();
        sVar8 = get_video2_settings_width();
        sVar9 = get_video2_settings_uly();
        sVar6 = get_video2_settings_height();
        uVar1 = local_24;
        if (false) {
          uVar1 = local_24 + 1;
        }
        local_res0 = display_ammo_total_in_a1
                               (local_res0,(longlong)local_1c,
                                ((((int)sVar8 + (int)sVar7) - local_14) - ((int)uVar1 >> 1)) - 4,0,
                                ((int)sVar6 + (int)sVar9) - 0x12,2,1);
      }
      if ((0 < local_18) || (uVar2 = check_special_attributes(weapon_00,0x400000), uVar2 != 0)) {
        sVar7 = get_video2_settings_ulx();
        sVar8 = get_video2_settings_width();
        sVar9 = get_video2_settings_uly();
        sVar6 = get_video2_settings_height();
        iVar4 = local_24 + 1;
        if (false) {
          iVar4 = local_24 + 2;
        }
        local_res0 = display_ammo_total_in_a1
                               (local_res0,(longlong)local_18,
                                (((int)sVar8 + (int)sVar7) - local_14) + (iVar4 >> 1) + 3,1,
                                ((int)sVar6 + (int)sVar9) - 0x12,2,1);
      }
      local_res0 = combiner_bayer_lod_perspective(local_res0);
    }
    if ((((weapon != ITEM_UNARMED) && (iVar4 = get_ammo_type_for_weapon(weapon), iVar4 != 0)) &&
        (ptr_BONDdata->field_C3C != 6)) &&
       ((ptr_BONDdata->field_C3C != 7 &&
        (uVar2 = check_special_attributes(weapon,0x80000), uVar2 == 0)))) {
      local_2c = 5;
      if ((&DAT_80035ef4)[iVar4 * 3] != 0) {
        imagedeclaration = (int *)((&DAT_80035ef4)[iVar4 * 3] + dword_8008D770);
        fVar11 = get_ulx();
        sVar7 = get_video2_settings_uly();
        sVar8 = get_video2_settings_height();
        piVar5 = (int *)(int)sVar8;
        set_rgba_redirect_generate_microcode
                  ((int *)local_res0,imagedeclaration,extraout_f12_00,
                   (f32)(&DAT_80035ef8)[iVar4 * 3],(f32)((float)fVar11 + (float)local_10),
                   -1.00000000,(f32)(float)((int)sVar8 + (int)sVar7 + -0x14),1);
        local_2c = (uint)*(byte *)(imagedeclaration + 1);
        local_res0 = (uint *)piVar5;
      }
      local_res0 = microcode_constructor(local_res0);
      uVar2 = check_special_attributes(weapon,0x400000);
      if (uVar2 == 0) {
        local_1c = ptr_BONDdata->left_weapon_ammo_in_magazine;
        local_18 = ptr_BONDdata->ammo_totals[iVar4];
      }
      else {
        local_1c = 0;
        local_18 = ptr_BONDdata->left_weapon_ammo_in_magazine + ptr_BONDdata->ammo_totals[iVar4];
        if (weapon == weapon_00) {
          local_18 += ptr_BONDdata->right_weapon_ammo_in_magazine;
        }
      }
      uVar2 = check_special_attributes(weapon,0x400000);
      if (uVar2 == 0) {
        sVar7 = get_video2_settings_ulx();
        sVar8 = get_video2_settings_uly();
        sVar9 = get_video2_settings_height();
        uVar1 = local_2c;
        if (false) {
          uVar1 = local_2c + 1;
        }
        local_res0 = display_ammo_total_in_a1
                               (local_res0,(longlong)local_1c,
                                (int)sVar7 + local_10 + ((int)uVar1 >> 1) + 3,1,
                                ((int)sVar9 + (int)sVar8) - 0x12,2,1);
      }
      if ((0 < local_18) || (uVar2 = check_special_attributes(weapon,0x400000), uVar2 != 0)) {
        sVar7 = get_video2_settings_ulx();
        sVar8 = get_video2_settings_uly();
        sVar9 = get_video2_settings_height();
        iVar4 = local_2c + 1;
        if (false) {
          iVar4 = local_2c + 2;
        }
        local_res0 = display_ammo_total_in_a1
                               (local_res0,(longlong)local_18,
                                (((int)sVar7 + local_10) - (iVar4 >> 1)) - 4,0,
                                ((int)sVar9 + (int)sVar8) - 0x12,2,1);
      }
      local_res0 = combiner_bayer_lod_perspective(local_res0);
    }
  }
  return (int *)local_res0;
}



undefined4 * proc_7F06A334(undefined4 *param_1)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  ITEM_IDS IVar5;
  ITEM_IDS weapon;
  int iVar6;
  ulonglong uVar4;
  short sVar7;
  short sVar8;
  uint *DL;
  int *imagedeclaration;
  f32 extraout_f12;
  f32 extraout_f14;
  uint uStack28;
  int iStack20;
  int iStack16;
  
  IVar5 = get_item_in_hand(1);
  weapon = get_item_in_hand(0);
  if ((((weapon != ITEM_UNARMED) && (iVar6 = get_ammo_type_for_weapon(weapon), iVar6 != 0)) &&
      (ptr_BONDdata->when_detonating_mines_is_0 != 6)) &&
     ((ptr_BONDdata->when_detonating_mines_is_0 != 7 &&
      (uVar4 = check_special_attributes(weapon,0x80000), uVar4 == 0)))) {
    iVar1 = (&DAT_80035ef4)[iVar6 * 3];
    uStack28 = 5;
    get_ptr_item_statistics(weapon);
    if (iVar1 != 0) {
      imagedeclaration = (int *)(iVar1 + dword_8008D770);
      sVar7 = get_video2_settings_uly();
      sVar8 = get_video2_settings_height();
      puVar2 = (undefined4 *)(int)sVar8;
      set_rgba_redirect_generate_microcode
                (param_1,imagedeclaration,extraout_f12,extraout_f14,200.00000000,180.00000000,
                 (f32)(float)((int)sVar8 + (int)sVar7 + -0x14),0);
      param_1 = puVar2;
      uStack28 = (uint)*(byte *)(imagedeclaration + 1);
    }
    DL = microcode_constructor(param_1);
    uVar4 = check_special_attributes(weapon,0x400000);
    if (uVar4 == 0) {
      iStack20 = ptr_BONDdata->right_weapon_ammo_in_magazine;
      iStack16 = ptr_BONDdata->ammo_totals[iVar6];
    }
    else {
      iStack20 = 0;
      iStack16 = ptr_BONDdata->right_weapon_ammo_in_magazine + ptr_BONDdata->ammo_totals[iVar6];
      if (IVar5 == weapon) {
        iStack16 += ptr_BONDdata->left_weapon_ammo_in_magazine;
      }
    }
    uVar4 = check_special_attributes(weapon,0x400000);
    if (uVar4 == 0) {
      uVar3 = uStack28;
      if (false) {
        uVar3 = uStack28 + 1;
      }
      DL = display_ammo_total_in_a1(DL,(longlong)iStack20,0xc4 - ((int)uVar3 >> 1),0,0xb1,2,0);
    }
    if ((0 < iStack16) || (uVar4 = check_special_attributes(weapon,0x400000), uVar4 != 0)) {
      iVar6 = uStack28 + 1;
      if (false) {
        iVar6 = uStack28 + 2;
      }
      DL = display_ammo_total_in_a1(DL,(longlong)iStack16,(iVar6 >> 1) + 0xcb,1,0xb1,2,0);
    }
    param_1 = combiner_bayer_lod_perspective(DL);
  }
  return param_1;
}



void set_unset_bitflags(int bitflags,int flag)

{
  if (flag != 0) {
    ptr_BONDdata->somekinda_bitflags = ptr_BONDdata->somekinda_bitflags & ~bitflags;
    return;
  }
  ptr_BONDdata->somekinda_bitflags = ptr_BONDdata->somekinda_bitflags | bitflags;
  return;
}



void proc_7F06A5E4(uint **param_1)

{
  int iVar1;
  f32 wdivh;
  float local_14;
  undefined4 local_10;
  float local_c;
  float local_8;
  uint *local_4;
  
  if ((ptr_BONDdata->somekinda_bitflags == 0) && (ptr_BONDdata->in_mp_pause_menu == 0)) {
    local_4 = *param_1;
    likely_generate_DL_for_image_declaration(&local_4,imgcall,4,0,0);
    local_c = ptr_BONDdata->field_FE8;
    local_8 = ptr_BONDdata->field_FEC;
    local_14 = 16.00000000;
    local_10 = 0x41800000;
    iVar1 = get_screen_ratio();
    if (iVar1 == 1) {
      local_14 = local_14 * 0.75000000;
    }
    display_image_at_on_screen_coord
              ((int *)&local_4,(int *)&local_c,wdivh,(int)&local_14,0x20,0x20,0,0,1,0xff,0xff,0xff,
               0x6e,(uint)(*(char *)((int)imgcall + 6) != '\0'));
    *param_1 = local_4;
  }
  return;
}



void inc_curplayer_hitcount_with_weapon(int weapon,int hitcount)

{
  ulonglong uVar1;
  
  uVar1 = check_special_attributes(weapon,0x10000);
  if (uVar1 != 0) {
    (&cur_player_stat_ptr->shots_fired)[hitcount] =
         (&cur_player_stat_ptr->shots_fired)[hitcount] + 1;
  }
  return;
}



int get_curplayer_shot_register(int statsregister)

{
  return (&cur_player_stat_ptr->shots_fired)[statsregister];
}



void inc_cur_civilian_casualties(void)

{
  cur_player_stat_ptr->killed_civilians = cur_player_stat_ptr->killed_civilians + 1;
  return;
}



int get_civilian_casualties(void)

{
  return cur_player_stat_ptr->killed_civilians;
}



void increment_num_kills_display_text_in_MP(void)

{
  ulonglong uVar1;
  int iVar2;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  char acStack256 [256];
  
  cur_player_stat_ptr->kill_count = cur_player_stat_ptr->kill_count + 1;
  ptr_BONDdata->field_29F8 = ptr_BONDdata->field_29F8 + 1;
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    iVar2 = getMissiontime();
    pbVar3 = get_textptr_for_textID(0x98da);
    sprintf(acStack256,aSD,pbVar3,cur_player_stat_ptr->kill_count);
    display_string_in_lower_left_corner(acStack256);
    if (1 < cur_player_stat_ptr->kill_count) {
      iVar4 = iVar2 - ptr_BONDdata->field_29E4;
      if (cur_player_stat_ptr->max_time_between_kills < iVar4) {
        cur_player_stat_ptr->max_time_between_kills = iVar4;
        iVar5 = cur_player_stat_ptr->min_time_between_kills;
      }
      else {
        iVar5 = cur_player_stat_ptr->min_time_between_kills;
      }
      if (iVar4 < iVar5) {
        cur_player_stat_ptr->min_time_between_kills = iVar4;
      }
    }
    iVar4 = 1;
    ptr_BONDdata->field_29F0 = ptr_BONDdata->field_29EC;
    ptr_BONDdata->field_29EC = ptr_BONDdata->field_29E8;
    ptr_BONDdata->field_29E8 = ptr_BONDdata->field_29E4;
    ptr_BONDdata->field_29E4 = iVar2;
    if ((ptr_BONDdata->field_29E8 != -1) &&
       (iVar2 = ptr_BONDdata->field_29E4, iVar2 - ptr_BONDdata->field_29E8 < 0x78)) {
      iVar4 = 2;
      if ((ptr_BONDdata->field_29EC != -1) && (iVar2 - ptr_BONDdata->field_29EC < 0x78)) {
        iVar4 = 3;
        if ((ptr_BONDdata->field_29F0 != -1) && (iVar2 - ptr_BONDdata->field_29F0 < 0x78)) {
          iVar4 = 4;
        }
      }
    }
    if (cur_player_stat_ptr->most_killed_one_time < iVar4) {
      cur_player_stat_ptr->most_killed_one_time = iVar4;
    }
  }
  return;
}



int get_curplay_killcount(void)

{
  return cur_player_stat_ptr->kill_count;
}



void increment_num_times_killed_MwtGC(void)

{
  cur_player_stat_ptr->killed_gg_owner_count = cur_player_stat_ptr->killed_gg_owner_count + 1;
  return;
}



int get_times_killed_mwtgx(void)

{
  return cur_player_stat_ptr->killed_gg_owner_count;
}



void increment_num_deaths(void)

{
  ulonglong uVar1;
  byte *__format;
  byte *pbVar2;
  char acStack256 [256];
  
  ptr_BONDdata->num_deaths = ptr_BONDdata->num_deaths + 1;
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    if (ptr_BONDdata->num_deaths == 1) {
      __format = get_textptr_for_textID(0x98db);
      sprintf(acStack256,(char *)__format);
    }
    else {
      __format = get_textptr_for_textID(0x98dc);
      pbVar2 = get_textptr_for_textID(0x98dd);
      sprintf(acStack256,aSDS,__format,ptr_BONDdata->num_deaths,pbVar2);
    }
    display_string_in_lower_left_corner(acStack256);
  }
  return;
}



int get_curplayer_numdeaths(void)

{
  return ptr_BONDdata->num_deaths;
}



void increment_num_suicides_display_MP(void)

{
  ulonglong uVar1;
  int iVar2;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  char acStack256 [256];
  
  ptr_BONDdata->num_suicides = ptr_BONDdata->num_suicides + 1;
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    iVar2 = getMissiontime();
    pbVar3 = get_textptr_for_textID(0x98de);
    sprintf(acStack256,aSD_0,pbVar3,ptr_BONDdata->num_suicides);
    display_string_in_lower_left_corner(acStack256);
    if (1 < cur_player_stat_ptr->kill_count) {
      iVar4 = iVar2 - ptr_BONDdata->field_29E4;
      if (cur_player_stat_ptr->max_time_between_kills < iVar4) {
        cur_player_stat_ptr->max_time_between_kills = iVar4;
        iVar5 = cur_player_stat_ptr->min_time_between_kills;
      }
      else {
        iVar5 = cur_player_stat_ptr->min_time_between_kills;
      }
      if (iVar4 < iVar5) {
        cur_player_stat_ptr->min_time_between_kills = iVar4;
      }
    }
    iVar4 = 1;
    ptr_BONDdata->field_29F0 = ptr_BONDdata->field_29EC;
    ptr_BONDdata->field_29EC = ptr_BONDdata->field_29E8;
    ptr_BONDdata->field_29E8 = ptr_BONDdata->field_29E4;
    ptr_BONDdata->field_29E4 = iVar2;
    if ((ptr_BONDdata->field_29E8 != -1) &&
       (iVar2 = ptr_BONDdata->field_29E4, iVar2 - ptr_BONDdata->field_29E8 < 0x78)) {
      iVar4 = 2;
      if ((ptr_BONDdata->field_29EC != -1) && (iVar2 - ptr_BONDdata->field_29EC < 0x78)) {
        iVar4 = 3;
        if ((ptr_BONDdata->field_29F0 != -1) && (iVar2 - ptr_BONDdata->field_29F0 < 0x78)) {
          iVar4 = 4;
        }
      }
    }
    if (cur_player_stat_ptr->most_killed_one_time < iVar4) {
      cur_player_stat_ptr->most_killed_one_time = iVar4;
    }
  }
  return;
}



int get_curplayer_numsuicides(void)

{
  return ptr_BONDdata->num_suicides;
}



void proc_7F06ABB0(uint **param_1,float *param_2,float *param_3,int param_4,int param_5,int param_6,
                  int param_7,int param_8)

{
  uint *puVar1;
  uint *puVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  float fVar8;
  float fVar9;
  uint uVar10;
  uint uVar11;
  float fVar12;
  uint uVar13;
  uint uVar14;
  
  if ((0.00000000 < *param_3) && (0.00000000 < param_3[1])) {
    puVar1 = *param_1;
    *puVar1 = 0xba001301;
    puVar1[1] = 0;
    fVar8 = *param_3;
    fVar9 = param_3[1];
    iVar4 = 0;
    uVar5 = 0;
    puVar2 = puVar1 + 2;
    uVar14 = (uint)((*param_2 - fVar8) * 4.00000000);
    uVar11 = (uint)((param_2[1] - fVar9) * 4.00000000);
    uVar10 = (uint)((fVar8 + *param_2) * 4.00000000);
    uVar13 = (uint)((fVar9 + param_2[1]) * 4.00000000);
    if ((-1 < (int)uVar10) && (-1 < (int)uVar13)) {
      if ((int)uVar14 < 0) {
        if (param_6 == 0) {
          iVar7 = uVar10 - uVar14;
          iVar6 = -uVar14 * param_4 * 0x20;
          iVar4 = iVar6 / iVar7;
          if (iVar7 == 0) {
            trap(0x1c00);
          }
          if ((iVar7 == -1) && (iVar6 == -0x80000000)) {
            trap(0x1800);
          }
          uVar14 = 0;
        }
        else {
          iVar7 = uVar10 - uVar14;
          iVar6 = -uVar14 * param_5 * 0x20;
          uVar5 = iVar6 / iVar7;
          if (iVar7 == 0) {
            trap(0x1c00);
          }
          if ((iVar7 == -1) && (iVar6 == -0x80000000)) {
            trap(0x1800);
          }
          uVar14 = 0;
        }
      }
      if ((int)uVar11 < 0) {
        if (param_6 == 0) {
          iVar6 = uVar13 - uVar11;
          iVar7 = -uVar11 * param_5 * 0x20;
          uVar5 += iVar7 / iVar6;
          if (iVar6 == 0) {
            trap(0x1c00);
          }
          if ((iVar6 == -1) && (iVar7 == -0x80000000)) {
            trap(0x1800);
          }
          uVar11 = 0;
        }
        else {
          iVar6 = uVar13 - uVar11;
          iVar7 = -uVar11 * param_4 * 0x20;
          iVar4 += iVar7 / iVar6;
          if (iVar6 == 0) {
            trap(0x1c00);
          }
          if ((iVar6 == -1) && (iVar7 == -0x80000000)) {
            trap(0x1800);
          }
          uVar11 = 0;
        }
      }
      if (param_6 == 0) {
        fVar12 = (float)param_4 / (fVar8 + fVar8);
        fVar8 = (float)param_5 / (fVar9 + fVar9);
      }
      else {
        fVar12 = (float)param_4 / (fVar9 + fVar9);
        fVar8 = (float)param_5 / (fVar8 + fVar8);
      }
      uVar3 = (uint)(fVar8 * 1024.00000000);
      iVar6 = (int)(fVar12 * 1024.00000000);
      if (param_7 != 0) {
        iVar6 = 0x10000 - iVar6;
        iVar4 = (param_4 + -1) * 0x20 - iVar4;
      }
      if (param_8 != 0) {
        uVar3 = 0x10000 - uVar3;
        uVar5 = (param_5 + -1) * 0x20 - uVar5;
      }
      if (param_6 == 0) {
        *puVar2 = (uVar10 & 0xfff) << 0xc | 0xe4000000 | uVar13 & 0xfff;
        puVar1[3] = (uVar14 & 0xfff) << 0xc | uVar11 & 0xfff;
        puVar1[4] = 0xb4000000;
        puVar1[5] = iVar4 << 0x10 | uVar5 & 0xffff;
        puVar1[6] = 0xb3000000;
        puVar1[7] = iVar6 << 0x10 | uVar3 & 0xffff;
      }
      else {
        *puVar2 = (uVar10 & 0xfff) << 0xc | 0xe5000000 | uVar13 & 0xfff;
        puVar1[3] = (uVar14 & 0xfff) << 0xc | uVar11 & 0xfff;
        puVar1[4] = 0xb4000000;
        puVar1[5] = iVar4 << 0x10 | uVar5 & 0xffff;
        puVar1[6] = 0xb3000000;
        puVar1[7] = iVar6 << 0x10 | uVar3 & 0xffff;
      }
      puVar2 = puVar1 + 8;
    }
    puVar2[1] = 0x80000;
    *puVar2 = 0xba001301;
    *param_1 = puVar2 + 2;
  }
  return;
}



void display_image_at_on_screen_coord
               (int *DL,int *xypos,f32 wdivh,int width,int height,int rotateleft90,int fliph,
               int flipv,int red,int green,int blue,int alpha,int format,int param_14)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int in_stack_00000034;
  
  if ((0.00000000 < *(float *)width) && (0.00000000 < *(float *)(width + 4))) {
    puVar1 = (undefined4 *)*DL;
    *puVar1 = 0xfb000000;
    puVar1[1] = green << 0x18 | (blue & 0xffU) << 0x10 | (alpha & 0xffU) << 8 | format & 0xffU;
    puVar2 = puVar1 + 2;
    if (param_14 == 0) {
      if (in_stack_00000034 == 0) {
        *puVar2 = 0xfc129a25;
        puVar1[3] = 0xff37ffff;
      }
      else {
        puVar1[3] = 0xfffffe38;
        *puVar2 = 0xfc129bff;
      }
    }
    else {
      *puVar2 = 0xfc26a005;
      puVar1[3] = 0x1f1493ff;
    }
    *(undefined4 **)DL = puVar1 + 4;
    proc_7F06ABB0((uint **)DL,(float *)xypos,(float *)width,height,rotateleft90,fliph,flipv,red);
  }
  return;
}



int * proc_7F06B120(int *param_1,int param_2)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  int *piVar4;
  int *piVar5;
  int *piVar6;
  
  puVar2 = **(ushort ***)(param_2 + 8);
  piVar4 = dword_80036060;
  if ((puVar2 != NULL) && (piVar4 = dword_80036060, dword_80036060 != NULL)) {
    uVar1 = *puVar2;
    piVar4 = dword_80036060;
    do {
      if (false) {
switchD_7f06b16c_caseD_4:
        puVar3 = *(ushort **)(puVar2 + 10);
      }
      else {
        switch((uint)uVar1 & 0xff) {
        case 1:
        case 2:
        case 3:
        case 0xb:
        case 0xc:
        case 0xd:
        case 0xe:
        case 0xf:
        case 0x10:
        case 0x15:
          *piVar4 = param_2;
          *(ushort **)(piVar4 + 1) = puVar2;
          piVar4 = (int *)piVar4[3];
          puVar3 = *(ushort **)(puVar2 + 10);
          break;
        default:
          goto switchD_7f06b16c_caseD_4;
        }
      }
      if ((puVar3 == NULL) && (puVar3 = puVar2, puVar2 != NULL)) {
        puVar3 = *(ushort **)(puVar2 + 6);
        while ((puVar3 == NULL &&
               (puVar2 = *(ushort **)(puVar2 + 4), puVar3 = puVar2, puVar2 != NULL))) {
          puVar3 = *(ushort **)(puVar2 + 6);
        }
      }
      if ((puVar3 == NULL) || (piVar4 == NULL)) break;
      uVar1 = *puVar3;
      puVar2 = puVar3;
    } while( true );
  }
  piVar6 = param_1;
  if (piVar4 != dword_80036060) {
    piVar6 = dword_80036060;
    if (param_1 != NULL) {
      if (param_1[3] == 0) {
        *(int **)(param_1 + 3) = dword_80036060;
        piVar5 = param_1;
      }
      else {
        piVar6 = (int *)param_1[3];
        do {
          piVar5 = piVar6;
          piVar6 = (int *)piVar5[3];
        } while ((int *)piVar5[3] != NULL);
        *(int **)(piVar5 + 3) = dword_80036060;
      }
      *(int **)(dword_80036060 + 4) = piVar5;
      piVar6 = param_1;
    }
    dword_80036060 = piVar4;
    if ((piVar4 != NULL) && (dword_80036060 = piVar4, piVar4[4] != 0)) {
      *(undefined4 *)(piVar4[4] + 0xc) = 0;
      piVar4[4] = 0;
      dword_80036060 = piVar4;
    }
  }
  return piVar6;
}



void proc_7F06B248(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = dword_80036060;
  if ((param_1 != 0) && (iVar1 = param_1, dword_80036060 != 0)) {
    if (*(int *)(param_1 + 0xc) == 0) {
      *(int *)(param_1 + 0xc) = dword_80036060;
      iVar2 = param_1;
    }
    else {
      iVar1 = *(int *)(param_1 + 0xc);
      do {
        iVar2 = iVar1;
        iVar1 = *(int *)(iVar2 + 0xc);
      } while (*(int *)(iVar2 + 0xc) != 0);
      *(int *)(iVar2 + 0xc) = dword_80036060;
    }
    *(int *)(dword_80036060 + 0x10) = iVar2;
    iVar1 = param_1;
  }
  dword_80036060 = iVar1;
  return;
}



void proc_7F06B29C(int *param_1)

{
  ushort *puVar1;
  ushort *puVar2;
  float *pfVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  float *pfVar8;
  int iVar9;
  int *piVar10;
  int *piVar11;
  int *piVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  int *piStack8;
  
  piStack8 = NULL;
  if (param_1 != NULL) {
    puVar1 = (ushort *)param_1[1];
    piVar12 = param_1;
    while( true ) {
      if (true) {
        switch((uint)*puVar1 & 0xff) {
        case 1:
          puVar2 = *(ushort **)(*(int *)(puVar1 + 2) + 4);
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          if (puVar2 == NULL) {
            *(float *)(piVar12 + 2) = -*(float *)(iVar6 + 0x38);
          }
          else {
            iVar7 = proc_7F06C660(*piVar12,puVar2,0);
            *(float *)(piVar12 + 2) =
                 -(*(float *)(iVar7 + 0x38) + *(float *)(iVar6 + 0x38)) * 0.50000000;
          }
          break;
        case 2:
          puVar2 = *(ushort **)(*(int *)(puVar1 + 2) + 0x14);
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          if (puVar2 == NULL) {
            *(float *)(piVar12 + 2) = -*(float *)(iVar6 + 0x38);
          }
          else {
            iVar7 = proc_7F06C660(*piVar12,puVar2,0);
            *(float *)(piVar12 + 2) =
                 -(*(float *)(iVar7 + 0x38) + *(float *)(iVar6 + 0x38)) * 0.50000000;
          }
          break;
        case 3:
          puVar2 = *(ushort **)(*(int *)(puVar1 + 2) + 0x14);
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          if (puVar2 == NULL) {
            *(float *)(piVar12 + 2) = -*(float *)(iVar6 + 0x38);
          }
          else {
            iVar7 = proc_7F06C660(*piVar12,puVar2,0);
            *(float *)(piVar12 + 2) =
                 -(*(float *)(iVar7 + 0x38) + *(float *)(iVar6 + 0x38)) * 0.50000000;
          }
          break;
        case 0xb:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          *(float *)(piVar12 + 2) =
               -(*(float *)(iVar6 + 0x38) +
                *pfVar3 * *(float *)(iVar6 + 8) + pfVar3[1] * *(float *)(iVar6 + 0x18) +
                pfVar3[2] * *(float *)(iVar6 + 0x28));
          break;
        case 0xc:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          *(float *)(piVar12 + 2) =
               -(*(float *)(iVar6 + 0x38) +
                *pfVar3 * *(float *)(iVar6 + 8) + pfVar3[1] * *(float *)(iVar6 + 0x18) +
                pfVar3[2] * *(float *)(iVar6 + 0x28));
          break;
        case 0xd:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          iVar7 = extract_id_from_object_structure_microcode(*piVar12,(ushort *)pfVar3[5]);
          *(float *)(piVar12 + 2) =
               -(*(float *)(iVar6 + 0x38) +
                *pfVar3 * *(float *)(iVar6 + 8) +
                (*(float *)(iVar7 + 4) - *(float *)(iVar7 + 0xc)) * *(float *)(iVar6 + 0x18) +
                pfVar3[1] * *(float *)(iVar6 + 0x28));
          break;
        case 0xe:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          *(float *)(piVar12 + 2) =
               -(*(float *)(iVar6 + 0x38) +
                *pfVar3 * *(float *)(iVar6 + 8) + pfVar3[1] * *(float *)(iVar6 + 0x18) +
                pfVar3[2] * *(float *)(iVar6 + 0x28));
          break;
        case 0xf:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          fVar19 = -(*(float *)(iVar6 + 0x38) +
                    *pfVar3 * *(float *)(iVar6 + 8) + pfVar3[1] * *(float *)(iVar6 + 0x18) +
                    pfVar3[2] * *(float *)(iVar6 + 0x28));
          fVar13 = -(*(float *)(iVar6 + 0x38) +
                    pfVar3[3] * *(float *)(iVar6 + 8) + pfVar3[4] * *(float *)(iVar6 + 0x18) +
                    pfVar3[5] * *(float *)(iVar6 + 0x28));
          if (fVar19 < fVar13) {
            *(float *)(piVar12 + 2) = fVar19;
          }
          else {
            *(float *)(piVar12 + 2) = fVar13;
          }
          break;
        case 0x10:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          pfVar3 = *(float **)(puVar1 + 2);
          *(float *)(piVar12 + 2) =
               -(*(float *)(iVar6 + 0x38) +
                *pfVar3 * *(float *)(iVar6 + 8) + pfVar3[1] * *(float *)(iVar6 + 0x18) +
                pfVar3[2] * *(float *)(iVar6 + 0x28));
          piStack8 = piVar12;
          break;
        case 0x15:
          iVar6 = proc_7F06C660(*piVar12,puVar1,0);
          *(float *)(piVar12 + 2) = -*(float *)(iVar6 + 0x38);
        }
      }
      piVar12 = (int *)piVar12[3];
      if (piVar12 == NULL) break;
      puVar1 = (ushort *)piVar12[1];
    }
  }
  if (piStack8 != NULL) {
    iVar6 = *(int *)(*piStack8 + 0x18);
    if (iVar6 != 0) {
      fVar19 = (float)piStack8[2];
      pfVar3 = *(float **)((ushort *)piStack8[1] + 2);
      iVar6 = *(int *)(*(int *)(iVar6 + 8) + 8);
      iVar7 = *(int *)(iVar6 + (int)*(short *)((int)pfVar3 + 0xe) * 4);
      iVar4 = *(int *)(iVar6 + (int)*(short *)(pfVar3 + 3) * 4);
      iVar6 = *(int *)(iVar6 + (int)*(short *)(pfVar3 + 4) * 4);
      pfVar8 = (float *)proc_7F06C660(*piStack8,(ushort *)piStack8[1],0);
      piVar12 = NULL;
      piVar10 = NULL;
      piVar11 = NULL;
      if (param_1 != NULL) {
        iVar9 = param_1[1];
        while( true ) {
          if (iVar7 == iVar9) {
            piVar10 = param_1;
          }
          if (iVar4 == iVar9) {
            piVar12 = param_1;
          }
          if (iVar6 == iVar9) {
            piVar5 = (int *)param_1[3];
            piVar11 = param_1;
          }
          else {
            piVar5 = (int *)param_1[3];
          }
          if (piVar5 == NULL) break;
          iVar9 = piVar5[1];
          param_1 = piVar5;
        }
      }
      fVar14 = pfVar8[0xc] + *pfVar3 * *pfVar8 + pfVar3[1] * pfVar8[4] + pfVar3[2] * pfVar8[8];
      fVar15 = pfVar8[0xd] + *pfVar3 * pfVar8[1] + pfVar3[1] * pfVar8[5] + pfVar3[2] * pfVar8[9];
      fVar16 = pfVar8[0xe] + *pfVar3 * pfVar8[2] + pfVar3[1] * pfVar8[6] + pfVar3[2] * pfVar8[10];
      fVar18 = (float)piVar10[2];
      fVar17 = (float)piVar12[2];
      fVar20 = (float)piVar11[2];
      fVar13 = fVar16 * pfVar8[10] + pfVar8[8] * fVar14 + pfVar8[9] * fVar15;
      fVar14 = fVar16 * pfVar8[6] + pfVar8[4] * fVar14 + pfVar8[5] * fVar15;
      if (fVar13 < 0.00000000) {
        if (fVar20 < fVar18) {
          if (fVar20 < fVar19) {
            *(float *)(piStack8 + 2) = fVar20 - 0.00003052;
          }
        }
        else {
          if (fVar18 < fVar19) {
            *(float *)(piStack8 + 2) = fVar18 - 0.00003052;
          }
        }
      }
      else {
        if (0.00000000 <= fVar13) {
          if (fVar19 < fVar18) {
            *(float *)(piVar10 + 2) = fVar19 - 0.00006104;
          }
          if (fVar19 < fVar20) {
            if (fVar20 < fVar18) {
              *(float *)(piVar11 + 2) = fVar19 - 0.00009155;
            }
            else {
              *(float *)(piVar11 + 2) = fVar19 - 0.00003052;
            }
          }
        }
      }
      if (fVar14 < 0.00000000) {
        fVar19 = (float)piStack8[2];
        if (fVar17 < fVar19) {
          if ((float)piVar10[2] < fVar19) {
            if (fVar17 < (float)piVar10[2]) {
              *(float *)(piVar10 + 2) = fVar17 - 0.00006104;
              fVar19 = (float)piStack8[2];
              fVar13 = (float)piVar11[2];
            }
            else {
              fVar13 = (float)piVar11[2];
            }
          }
          else {
            fVar13 = (float)piVar11[2];
          }
          if ((fVar13 < fVar19) && (fVar17 < fVar13)) {
            if (fVar20 < fVar18) {
              *(float *)(piVar11 + 2) = fVar17 - 0.00009155;
            }
            else {
              *(float *)(piVar11 + 2) = fVar17 - 0.00003052;
            }
          }
          *(float *)(piStack8 + 2) = fVar17 - 0.00001526;
        }
      }
      else {
        if ((0.00000000 <= fVar14) && ((float)piStack8[2] < fVar17)) {
          *(float *)(piVar12 + 2) = (float)piStack8[2] - 0.00001526;
          if ((fVar17 < fVar18) && ((float)piVar10[2] < (float)piVar12[2])) {
            *(float *)(piVar12 + 2) = (float)piVar10[2] - 0.00001526;
          }
          if ((fVar17 < fVar20) && ((float)piVar11[2] < (float)piVar12[2])) {
            *(float *)(piVar12 + 2) = (float)piVar11[2] - 0.00001526;
          }
        }
      }
    }
  }
  return;
}



int proc_7F06BB28(int param_1)

{
  undefined *puVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  undefined *puVar5;
  undefined *puVar6;
  undefined *puVar7;
  float fVar8;
  float fVar9;
  undefined auStack40 [20];
  undefined auStack20 [20];
  
  if (param_1 != 0) {
    iVar4 = param_1;
    if (*(int *)(param_1 + 0xc) != 0) {
      iVar3 = *(int *)(param_1 + 0xc);
      do {
        iVar4 = iVar3;
        iVar3 = *(int *)(iVar4 + 0xc);
      } while (*(int *)(iVar4 + 0xc) != 0);
    }
    puVar6 = auStack20;
    *(undefined **)(param_1 + 0x10) = puVar6;
    *(undefined **)(iVar4 + 0xc) = auStack40;
    do {
      puVar1 = *(undefined **)(puVar6 + 0xc);
      puVar5 = NULL;
      if (puVar1 != auStack40) {
        fVar8 = -4294967296.00000000;
        fVar9 = *(float *)(puVar1 + 8);
        puVar7 = puVar1;
        while( true ) {
          if (fVar8 < fVar9) {
            puVar2 = *(undefined **)(puVar7 + 0xc);
            puVar5 = puVar7;
          }
          else {
            puVar2 = *(undefined **)(puVar7 + 0xc);
            fVar9 = fVar8;
          }
          if (puVar2 == auStack40) break;
          fVar8 = fVar9;
          fVar9 = *(float *)(puVar2 + 8);
          puVar7 = puVar2;
        }
      }
      if (puVar5 != NULL) {
        *(undefined4 *)(*(int *)(puVar5 + 0xc) + 0x10) = *(undefined4 *)(puVar5 + 0x10);
        *(undefined4 *)(*(int *)(puVar5 + 0x10) + 0xc) = *(undefined4 *)(puVar5 + 0xc);
        *(undefined **)(puVar5 + 0x10) = puVar6;
        *(undefined4 *)(puVar5 + 0xc) = *(undefined4 *)(puVar6 + 0xc);
        *(undefined **)(*(int *)(puVar6 + 0xc) + 0x10) = puVar5;
        *(undefined **)(puVar6 + 0xc) = puVar5;
        puVar1 = puVar5;
      }
      puVar6 = puVar1;
    } while (puVar6 != auStack40);
    *(undefined4 *)(param_1 + 0x10) = 0;
    *(undefined4 *)(iVar4 + 0xc) = 0;
  }
  return param_1;
}



void drawjointlist(int param_1,uint *param_2,undefined4 param_3,int param_4)

{
  ushort uVar1;
  uint uVar2;
  ushort *puVar3;
  undefined4 *puVar4;
  bool bVar5;
  u32 uVar6;
  uint object;
  longlong lVar7;
  longlong extraout_a2;
  longlong extraout_a2_00;
  longlong extraout_a3;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 uVar8;
  longlong extraout_a3_00;
  longlong extraout_a3_01;
  longlong extraout_a3_02;
  longlong extraout_a3_03;
  ushort *puVar9;
  ushort *puVar10;
  int object_initialized;
  int iVar11;
  float fVar12;
  
  lVar7 = (longlong)param_4;
  if (*(int *)(param_1 + 0xc) == 0) {
    osSyncPrintf(aDrawjointlistNoGfxlist,param_2,param_3);
    return_null();
    lVar7 = extraout_a3;
  }
  if (param_2 == NULL) {
    return;
  }
  uVar2 = *param_2;
LAB_7f06bc58:
  uVar8 = (undefined4)lVar7;
  lVar7 = (longlong)(int)uVar2;
  puVar3 = (ushort *)param_2[1];
  if (*(int *)(uVar2 + 8) == 0) {
    osSyncPrintf(aDrawjointlistNoObject0xX,lVar7);
    return_null();
    object_initialized = *(int *)(*(int *)(*param_2 + 8) + 0x1c);
    lVar7 = extraout_a2;
    uVar8 = extraout_a3_lo;
  }
  else {
    object_initialized = *(int *)(*(int *)(uVar2 + 8) + 0x1c);
  }
  if (object_initialized == 0) {
    osSyncPrintf(aDrawjointlistObjectNotInitialised0);
    return_null();
    iVar11 = *(int *)(param_1 + 0x18);
    lVar7 = extraout_a2_00;
    uVar8 = extraout_a3_lo_00;
  }
  else {
    iVar11 = *(int *)(param_1 + 0x18);
  }
  if (iVar11 == 0) {
    puVar4 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    *puVar4 = 0xbc000c06;
    uVar6 = osVirtualToPhysical(*(void **)(*param_2 + 0xc));
    puVar4[1] = uVar6;
    lVar7 = extraout_a3_01;
    puVar9 = puVar3;
  }
  else {
    fVar12 = getjointsize(*param_2,puVar3,lVar7,uVar8);
    lVar7 = extraout_a3_00;
    puVar9 = puVar3;
    if ((float)param_2[2] < fVar12) {
      lVar7 = extraout_a3_00;
      puVar9 = NULL;
    }
  }
  if (puVar9 != NULL) {
    uVar1 = *puVar9;
    do {
      bVar5 = true;
      if (false) {
switchD_7f06bd3c_caseD_4:
        proc_7F074534(param_1,*param_2,puVar9);
        lVar7 = extraout_a3_03;
      }
      else {
        switch((uint)uVar1 & 0xff) {
        case 1:
        case 2:
        case 3:
        case 0xb:
        case 0xc:
        case 0xd:
        case 0xe:
        case 0xf:
        case 0x10:
        case 0x15:
          if (puVar9 == puVar3) {
            proc_7F074534(param_1,*param_2,puVar9);
            lVar7 = extraout_a3_02;
          }
          else {
            bVar5 = false;
          }
          break;
        default:
          goto switchD_7f06bd3c_caseD_4;
        }
      }
      if ((!bVar5) || (puVar10 = *(ushort **)(puVar9 + 10), puVar10 == NULL)) {
        while (puVar10 = puVar9, puVar9 != NULL) {
          if (puVar9 == puVar3) {
            puVar10 = NULL;
            break;
          }
          puVar10 = *(ushort **)(puVar9 + 6);
          if (puVar10 != NULL) break;
          puVar9 = *(ushort **)(puVar9 + 4);
        }
      }
      if (puVar10 == NULL) goto code_r0x7f06bdd4;
      uVar1 = *puVar10;
      puVar9 = puVar10;
    } while( true );
  }
  param_2 = (uint *)param_2[3];
  goto LAB_7f06bdd8;
code_r0x7f06bdd4:
  param_2 = (uint *)param_2[3];
LAB_7f06bdd8:
  if (param_2 == NULL) {
    return;
  }
  uVar2 = *param_2;
  goto LAB_7f06bc58;
}



undefined4
probably_damage_detail_blood_effect_related
          (int **param_1,float *param_2,float *param_3,int *param_4,ushort **param_5)

{
  ushort *puVar1;
  bool bVar2;
  ulonglong uVar3;
  longlong lVar4;
  ushort *puVar5;
  ushort *puVar6;
  int *piVar7;
  
  piVar7 = *param_1;
  if (piVar7 == NULL) {
LAB_7f06bfdc:
    *param_1 = NULL;
    return 0;
  }
  puVar6 = *param_5;
  do {
    puVar1 = (ushort *)piVar7[1];
    bVar2 = true;
    puVar5 = puVar1;
    if (puVar6 != NULL) {
      *param_5 = NULL;
      puVar5 = puVar6;
    }
    if (puVar5 == NULL) {
      piVar7 = (int *)piVar7[4];
    }
    else {
      do {
        if ((!bVar2) || (puVar6 = *(ushort **)(puVar5 + 10), puVar6 == NULL)) {
          while (puVar6 = puVar5, puVar5 != NULL) {
            if (puVar5 == puVar1) {
              puVar6 = NULL;
              break;
            }
            puVar6 = *(ushort **)(puVar5 + 6);
            if (puVar6 != NULL) break;
            puVar5 = *(ushort **)(puVar5 + 4);
          }
          if (puVar6 == NULL) {
            piVar7 = (int *)piVar7[4];
            goto LAB_7f06bfd4;
          }
        }
        uVar3 = (ulonglong)*puVar6;
        bVar2 = true;
        if (true) {
          switch((uint)*puVar6 & 0xff) {
          case 1:
          case 2:
          case 3:
          case 0x15:
            bVar2 = false;
            break;
          case 8:
            proc_7F06E970(*piVar7,puVar6);
            break;
          case 10:
            proc_7F074C68(*piVar7,puVar6,param_2,param_3);
            if (uVar3 != 0) {
              *param_4 = *piVar7;
              *param_5 = puVar6;
              *param_1 = piVar7;
              return **(undefined4 **)(puVar6 + 2);
            }
            bVar2 = false;
            break;
          case 0xb:
          case 0xc:
          case 0xd:
          case 0xe:
          case 0xf:
          case 0x10:
            bVar2 = false;
            break;
          case 0x11:
            lVar4 = proc_7F074CAC(*piVar7,puVar6,param_2,param_3);
            if (lVar4 != 0) {
              *param_4 = *piVar7;
              *param_5 = puVar6;
              *param_1 = piVar7;
              return **(undefined4 **)(puVar6 + 2);
            }
            bVar2 = false;
            break;
          case 0x12:
            process_12_handle_switch(*piVar7,puVar6);
            break;
          case 0x17:
            process_17_pointer_to_head(*piVar7,puVar6);
          }
        }
        puVar5 = puVar6;
      } while (puVar6 != NULL);
      piVar7 = (int *)piVar7[4];
    }
LAB_7f06bfd4:
    if (piVar7 == NULL) goto LAB_7f06bfdc;
    puVar6 = *param_5;
  } while( true );
}



undefined4 proc_7F06C010(int **param_1,float *param_2,float *param_3,int *param_4,ushort **param_5)

{
  int *piVar1;
  int *piVar2;
  undefined4 uVar3;
  
  piVar1 = *param_1;
  piVar2 = (int *)(*param_1)[3];
  while (piVar2 != NULL) {
    piVar1 = piVar2;
    piVar2 = (int *)piVar2[3];
  }
  *param_1 = piVar1;
  *param_4 = 0;
  *param_5 = NULL;
  uVar3 = probably_damage_detail_blood_effect_related(param_1,param_2,param_3,param_4,param_5);
  return uVar3;
}



ulonglong proc_7F06C060(int param_1,int param_2)

{
  short sVar1;
  bool bVar2;
  ulonglong uVar3;
  
  sVar1 = *(short *)(param_2 + 0x14);
  uVar3 = (ulonglong)(sVar1 < 1);
  if ((sVar1 >= 1) && (bVar2 = *(int *)(param_1 + 0x10) != 0, uVar3 = (ulonglong)bVar2, bVar2)) {
    uVar3 = (ulonglong)(*(short *)(param_1 + 2) < sVar1) ^ 1;
  }
  return uVar3;
}



uint get_obj_instance_controller_for_header(PitemZ_header *objheader)

{
  short sVar1;
  int iVar3;
  void *pvVar4;
  ulonglong uVar2;
  int iVar5;
  undefined2 uStack10;
  void *pvStack8;
  
  pvVar4 = NULL;
  pvStack8 = NULL;
  uStack10 = 0xffff;
  if (dword_80036078 == 0) {
    iVar5 = 0;
    iVar3 = 0;
    if (0 < dword_80036074) {
      do {
        if ((*(int *)(ptr_allocation_1 + iVar3 + 8) == 0) &&
           (uVar2 = proc_7F06C060(iVar5 * 0x20 + ptr_allocation_1,(int)objheader), uVar2 != 0)) {
          pvStack8 = *(void **)(ptr_allocation_1 + iVar3 + 0x10);
          pvVar4 = (void *)(iVar5 * 0x20 + ptr_allocation_1);
          uStack10 = *(undefined2 *)(ptr_allocation_1 + iVar3 + 2);
          break;
        }
        iVar5 += 1;
        iVar3 += 0x20;
      } while (iVar5 < dword_80036074);
    }
  }
  else {
    iVar3 = 0;
    iVar5 = ptr_allocation_1;
    if (0 < dword_80036074 + -0x1e) {
      do {
        if (*(int *)(iVar5 + 8) == 0) {
          pvVar4 = (void *)(iVar3 * 0x20 + ptr_allocation_1);
          break;
        }
        iVar3 += 1;
        iVar5 = iVar5 + 0x20;
      } while (iVar3 < dword_80036074 + -0x1e);
    }
    if (pvVar4 == NULL) {
      pvVar4 = allocate_bytes_in_bank(0x20,4);
      sVar1 = *(short *)&objheader->anonymous_5;
    }
    else {
      sVar1 = *(short *)&objheader->anonymous_5;
    }
    if (0 < sVar1) {
      pvStack8 = allocate_bytes_in_bank(((int)sVar1 * 4 + 0xfU | 0xf) ^ 0xf,4);
      uStack10 = *(undefined2 *)&objheader->anonymous_5;
    }
  }
  if (pvVar4 != NULL) {
    proc_7F075F68((int)pvVar4,(ushort **)objheader,pvStack8);
    *(undefined2 *)((int)pvVar4 + 2) = uStack10;
  }
  return (uint)pvVar4;
}



void set_obj_instance_scale_to_zero(int *ptrobjinstance)

{
  ptrobjinstance[2] = 0;
  return;
}



uint get_aircraft_obj_instance_controller(int *objheader)

{
  int *piVar1;
  int iVar2;
  void *pvVar3;
  int iVar4;
  int iVar5;
  undefined2 uVar6;
  void *local_8;
  
  pvVar3 = NULL;
  local_8 = NULL;
  uVar6 = 0xffff;
  if (dword_80036078 == 0) {
    iVar2 = 0;
    if (0 < dword_80036070) {
      iVar5 = 0;
      iVar4 = ptr_allocation_0;
      do {
        iVar2 += 1;
        if (*(int *)(iVar4 + 8) == 0) {
          if (*(short *)(objheader + 5) < 1) {
            local_8 = *(void **)(iVar4 + 0x10);
          }
          else {
            if ((*(int *)(iVar4 + 0x10) == 0) || (*(short *)(iVar4 + 2) < *(short *)(objheader + 5))
               ) goto LAB_7f06c374;
            local_8 = *(void **)(iVar4 + 0x10);
          }
          pvVar3 = (void *)(iVar5 + ptr_allocation_0);
          uVar6 = *(undefined2 *)(iVar4 + 2);
          break;
        }
LAB_7f06c374:
        iVar5 += 0xbc;
        iVar4 += 0xbc;
      } while (iVar2 < dword_80036070);
    }
  }
  else {
    iVar2 = 0;
    if (0 < dword_80036070 + -10) {
      iVar5 = 0;
      iVar4 = ptr_allocation_0;
      do {
        piVar1 = (int *)(iVar4 + 8);
        iVar2 += 1;
        iVar4 += 0xbc;
        if (*piVar1 == 0) {
          pvVar3 = (void *)(iVar5 + ptr_allocation_0);
          break;
        }
        iVar5 += 0xbc;
      } while (iVar2 < dword_80036070 + -10);
    }
    if (pvVar3 == NULL) {
      pvVar3 = allocate_bytes_in_bank(0xc0,4);
    }
    uVar6 = 0xffff;
    if (0 < *(short *)(objheader + 5)) {
      local_8 = allocate_bytes_in_bank(((int)*(short *)(objheader + 5) * 4 + 0xfU | 0xf) ^ 0xf,4);
      uVar6 = *(undefined2 *)(objheader + 5);
    }
  }
  if (pvVar3 != NULL) {
    proc_7F075FAC((int)pvVar3,(player_gait_header *)objheader,local_8);
    *(undefined2 *)((int)pvVar3 + 2) = uVar6;
  }
  return (uint)pvVar3;
}



void proc_7F06C3B4(int param_1,ushort *param_2,ushort **param_3)

{
  proc_7F076030(param_1,*(int *)(param_1 + 8),param_2,param_3);
  unknown_object_microcode_handler(param_1,*param_3);
  return;
}



void set_aircraft_obj_inst_scale_to_zero(int *objinstance)

{
  objinstance[2] = 0;
  return;
}



void set_80036084(s32 param_1)

{
  dword_80036084 = param_1;
  return;
}



void set_flt_80036088(f32 param_1)

{
  flt_80036088 = param_1;
  return;
}



void proc_7F06C418(undefined4 *param_1,undefined4 *param_2)

{
  int iVar1;
  
  iVar1 = 0;
  do {
    iVar1 += 1;
    *param_2 = *param_1;
    param_2[1] = param_1[1];
    param_2[2] = param_1[2];
    param_2[3] = param_1[3];
    param_1 = param_1 + 4;
    param_2 = param_2 + 4;
  } while (iVar1 != 4);
  return;
}



void set_8003608C(undefined4 param_1)

{
  vtxallocator = param_1;
  return;
}



void return_null(void)

{
  return;
}



void proc_7F06C474(int param_1,float *param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  iVar1 = getsubmatrix(param_1,(uint)param_2,param_3,param_4);
  fVar3 = -*(float *)(iVar1 + 0x30);
  fVar4 = -*(float *)(iVar1 + 0x34);
  fVar5 = -*(float *)(iVar1 + 0x38);
  fVar2 = sqrtf(fVar3 * fVar3 + fVar4 * fVar4 + fVar5 * fVar5);
  if (0.00000000 < fVar2) {
    fVar2 = 1.00000000 / (*(float *)(param_1 + 0x14) * fVar2);
    *param_2 = fVar3 * fVar2;
    param_2[1] = fVar4 * fVar2;
    param_2[2] = fVar5 * fVar2;
  }
  else {
    *param_2 = 0.00000000;
    param_2[1] = 0.00000000;
    param_2[2] = 1.00000000 / *(float *)(param_1 + 0x14);
  }
  return;
}



void proc_7F06C550(int param_1,float *param_2,undefined4 param_3,undefined4 param_4)

{
  proc_7F06C474(param_1,param_2,param_3,param_4);
  return;
}



undefined2 proc_7F06C570(ushort *param_1,longlong param_2)

{
  uint uVar1;
  ushort uVar2;
  
  if (param_1 != NULL) {
    uVar2 = *param_1;
    while( true ) {
      uVar2 &= 0xff;
      if (uVar2 == 1) {
        return *(undefined2 *)(*(int *)(param_1 + 2) + 2);
      }
      if (uVar2 == 2) {
        if (param_2 == 0x200) {
          uVar1 = 2;
        }
        else {
          uVar1 = (uint)(param_2 == 0x100);
        }
        return *(undefined2 *)(*(int *)(param_1 + 2) + uVar1 * 2 + 0xe);
      }
      if (uVar2 == 3) {
        if (param_2 == 0x200) {
          uVar1 = 2;
        }
        else {
          uVar1 = (uint)(param_2 == 0x100);
        }
        return *(undefined2 *)(*(int *)(param_1 + 2) + uVar1 * 2 + 0xe);
      }
      if (uVar2 == 0x15) {
        return *(undefined2 *)(*(int *)(param_1 + 2) + 0xc);
      }
      param_1 = *(ushort **)(param_1 + 4);
      if (param_1 == NULL) break;
      uVar2 = *param_1;
    }
  }
  return 0xffff;
}



int proc_7F06C660(int param_1,ushort *param_2,longlong param_3)

{
  short sVar2;
  int iVar1;
  
  sVar2 = proc_7F06C570(param_2,param_3);
  if (sVar2 < 0) {
    iVar1 = 0;
  }
  else {
    iVar1 = *(int *)(param_1 + 0xc) + (int)sVar2 * 0x40;
  }
  return iVar1;
}



int getsubmatrix(int objinst,uint param_2,undefined4 param_3,undefined4 param_4)

{
  ushort **object;
  int iVar1;
  
  if (objinst == 0) {
    osSyncPrintf(aGetsubmatrixNoObjinst,param_2,param_3,param_4);
    return_null();
  }
  object = *(ushort ***)(objinst + 8);
  if (object == NULL) {
    osSyncPrintf(aGetsubmatrixObjinstHasNoObject);
    return_null();
    object = *(ushort ***)(objinst + 8);
  }
  iVar1 = proc_7F06C660(objinst,*object,0);
  return iVar1;
}



void proc_7F06C710(int param_1,undefined4 *param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  
  iVar1 = getsubmatrix(param_1,(uint)param_2,param_3,param_4);
  if (iVar1 == 0) {
    *param_2 = 0;
    param_2[1] = 0;
    param_2[2] = 0;
  }
  else {
    *param_2 = *(undefined4 *)(iVar1 + 0x30);
    param_2[1] = *(undefined4 *)(iVar1 + 0x34);
    param_2[2] = *(undefined4 *)(iVar1 + 0x38);
  }
  return;
}



float proc_7F06C768(int param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  float fVar2;
  
  iVar1 = getsubmatrix(param_1,param_2,param_3,param_4);
  if (iVar1 == 0) {
    fVar2 = 0.00000000;
  }
  else {
    fVar2 = -*(float *)(iVar1 + 0x38);
  }
  return fVar2;
}



int extract_id_from_object_structure_microcode(int objinst,ushort *partdesc)

{
  ushort uVar1;
  ushort *partdesc_00;
  int iVar2;
  uint uVar3;
  
  uVar3 = 0;
  iVar2 = *(int *)(objinst + 0x10);
  if (true) {
    switch((uint)*partdesc & 0xff) {
    case 1:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0xc);
      break;
    case 7:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0x1aa);
      break;
    case 8:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0xc);
      break;
    case 9:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0x22);
      break;
    case 0xb:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0x44);
      break;
    case 0xc:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0x20);
      break;
    case 0x12:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 4);
      break;
    case 0x17:
      uVar3 = (uint)**(ushort **)(partdesc + 2);
      break;
    case 0x18:
      uVar3 = (uint)*(ushort *)(*(int *)(partdesc + 2) + 0x1a);
    }
  }
  partdesc_00 = *(ushort **)(partdesc + 4);
  if (partdesc_00 != NULL) {
    uVar1 = *partdesc_00;
    while ((uVar1 & 0xff) != 0x17) {
      partdesc_00 = *(ushort **)(partdesc_00 + 4);
      if (partdesc_00 == NULL) goto LAB_7f06c888;
      uVar1 = *partdesc_00;
    }
    iVar2 = extract_id_from_object_structure_microcode(objinst,partdesc_00);
    iVar2 = *(int *)(iVar2 + 4);
  }
LAB_7f06c888:
  return (int)(uVar3 * 4 + iVar2);
}



void getpartoffset(longlong objinst,ushort *partdesc,undefined4 *param_3,undefined4 param_4)

{
  undefined4 *puVar1;
  int iVar2;
  ushort uVar3;
  
  if (objinst == 0) {
    osSyncPrintf(aGetpartoffsetNoObjinst,partdesc,param_3,param_4);
    return_null();
  }
  if (partdesc == NULL) {
    osSyncPrintf(aGetpartoffsetNoPartdesc);
    return_null();
  }
  uVar3 = *partdesc & 0xff;
  if (uVar3 == 1) {
    iVar2 = extract_id_from_object_structure_microcode((int)objinst,partdesc);
    *param_3 = *(undefined4 *)(iVar2 + 8);
    param_3[1] = *(undefined4 *)(iVar2 + 0xc);
    param_3[2] = *(undefined4 *)(iVar2 + 0x10);
  }
  else {
    if (uVar3 == 2) {
      puVar1 = *(undefined4 **)(partdesc + 2);
      *param_3 = *puVar1;
      param_3[1] = puVar1[1];
      param_3[2] = puVar1[2];
    }
    else {
      if (uVar3 == 3) {
        puVar1 = *(undefined4 **)(partdesc + 2);
        *param_3 = *puVar1;
        param_3[1] = puVar1[1];
        param_3[2] = puVar1[2];
      }
      else {
        if (uVar3 == 0x15) {
          puVar1 = *(undefined4 **)(partdesc + 2);
          *param_3 = *puVar1;
          param_3[1] = puVar1[1];
          param_3[2] = puVar1[2];
        }
        else {
          *param_3 = 0;
          param_3[1] = 0;
          param_3[2] = 0;
        }
      }
    }
  }
  return;
}



void setpartoffset(longlong objinst,ushort *partdesc,float *param_3,undefined4 param_4)

{
  float *pfVar1;
  int iVar2;
  ushort uVar3;
  float fVar4;
  float fVar5;
  
  if (objinst == 0) {
    osSyncPrintf(aSetpartoffsetNoObjinst,partdesc,param_3,param_4);
    return_null();
  }
  if (partdesc == NULL) {
    osSyncPrintf(aSetpartoffsetNoPartdesc);
    return_null();
  }
  uVar3 = *partdesc & 0xff;
  if (uVar3 == 1) {
    iVar2 = extract_id_from_object_structure_microcode((int)objinst,partdesc);
    fVar4 = *param_3 - *(float *)(iVar2 + 8);
    fVar5 = param_3[2] - *(float *)(iVar2 + 0x10);
    *(float *)(iVar2 + 8) = *param_3;
    *(float *)(iVar2 + 0xc) = param_3[1];
    *(float *)(iVar2 + 0x10) = param_3[2];
    *(float *)(iVar2 + 0x24) = *(float *)(iVar2 + 0x24) + fVar4;
    *(float *)(iVar2 + 0x2c) = *(float *)(iVar2 + 0x2c) + fVar5;
    *(float *)(iVar2 + 0x34) = *(float *)(iVar2 + 0x34) + fVar4;
    *(float *)(iVar2 + 0x3c) = *(float *)(iVar2 + 0x3c) + fVar5;
    *(float *)(iVar2 + 0x40) = *(float *)(iVar2 + 0x40) + fVar4;
    *(float *)(iVar2 + 0x48) = *(float *)(iVar2 + 0x48) + fVar5;
    *(float *)(iVar2 + 0x4c) = *(float *)(iVar2 + 0x4c) + fVar4;
    *(float *)(iVar2 + 0x54) = *(float *)(iVar2 + 0x54) + fVar5;
  }
  else {
    if (uVar3 == 2) {
      pfVar1 = *(float **)(partdesc + 2);
      *pfVar1 = *param_3;
      pfVar1[1] = param_3[1];
      pfVar1[2] = param_3[2];
    }
    else {
      if (uVar3 == 3) {
        pfVar1 = *(float **)(partdesc + 2);
        *pfVar1 = *param_3;
        pfVar1[1] = param_3[1];
        pfVar1[2] = param_3[2];
      }
      else {
        if (uVar3 == 0x15) {
          pfVar1 = *(float **)(partdesc + 2);
          *pfVar1 = *param_3;
          pfVar1[1] = param_3[1];
          pfVar1[2] = param_3[2];
        }
      }
    }
  }
  return;
}



void getsuboffset(int objinst,undefined4 *param_2,undefined4 param_3,undefined4 param_4)

{
  ushort **object;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  
  if (objinst == 0) {
    osSyncPrintf(aGetsuboffsetNoObjinst,param_2,param_3);
    return_null();
    param_4 = extraout_a3_lo;
  }
  object = *(ushort ***)(objinst + 8);
  if (object == NULL) {
    osSyncPrintf(aGetsuboffsetObjinstHasNoObject);
    return_null();
    object = *(ushort ***)(objinst + 8);
    param_4 = extraout_a3_lo_00;
  }
  getpartoffset((longlong)objinst,*object,param_2,param_4);
  return;
}



void setsuboffset(int objinst,float *param_2,undefined4 param_3,undefined4 param_4)

{
  ushort **object;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  
  if (objinst == 0) {
    osSyncPrintf(aSetsuboffsetNoObjinst,param_2,param_3);
    return_null();
    param_4 = extraout_a3_lo;
  }
  object = *(ushort ***)(objinst + 8);
  if (object == NULL) {
    osSyncPrintf(aSetsuboffsetObjinstHasNoObject);
    return_null();
    object = *(ushort ***)(objinst + 8);
    param_4 = extraout_a3_lo_00;
  }
  setpartoffset((longlong)objinst,*object,param_2,param_4);
  return;
}



ushort ** getsubroty(int objinst,uint param_2,undefined4 param_3,undefined4 param_4)

{
  ushort uVar1;
  ushort *partdesc;
  ushort **object;
  
  if (objinst == 0) {
    osSyncPrintf(aGetsubrotyNoObjinst,param_2,param_3,param_4);
    return_null();
  }
  object = *(ushort ***)(objinst + 8);
  if (object == NULL) {
    osSyncPrintf(aGetsubrotyObjinstHasNoObject);
    return_null();
    object = *(ushort ***)(objinst + 8);
    partdesc = *object;
  }
  else {
    partdesc = *object;
  }
  if (partdesc == NULL) {
    osSyncPrintf(aGetsubrotyObjinstHasNoRootPart);
    return_null();
    partdesc = **(ushort ***)(objinst + 8);
    uVar1 = *partdesc;
  }
  else {
    uVar1 = *partdesc;
  }
  if ((uVar1 & 0xff) == 1) {
    object = (ushort **)extract_id_from_object_structure_microcode(objinst,partdesc);
  }
  return object;
}



void setsubroty(int objinst,float param_2,float param_3,undefined4 param_4)

{
  ushort uVar1;
  float fVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  ushort *rootpart;
  
  if (objinst == 0) {
    osSyncPrintf(aSetsubrotyNoObjinst,param_3,param_4);
    return_null();
  }
  if (*(ushort ***)(objinst + 8) == NULL) {
    osSyncPrintf(aSetsubrotyObjinstHasNoObject);
    return_null();
    rootpart = **(ushort ***)(objinst + 8);
  }
  else {
    rootpart = **(ushort ***)(objinst + 8);
  }
  if (rootpart == NULL) {
    osSyncPrintf(aSetsubrotyObjinstHasNoRootPart);
    return_null();
    rootpart = **(ushort ***)(objinst + 8);
    uVar1 = *rootpart;
  }
  else {
    uVar1 = *rootpart;
  }
  if ((uVar1 & 0xff) == 1) {
    iVar3 = extract_id_from_object_structure_microcode(objinst,rootpart);
    fVar2 = flt_80054B5C;
    fVar4 = param_3 - *(float *)(iVar3 + 0x14);
    if (fVar4 < 0.00000000) {
      fVar4 = fVar4 + flt_80054B58;
      fVar5 = *(float *)(iVar3 + 0x30);
    }
    else {
      fVar5 = *(float *)(iVar3 + 0x30);
    }
    *(float *)(iVar3 + 0x30) = fVar5 + fVar4;
    if (fVar2 <= *(float *)(iVar3 + 0x30)) {
      *(float *)(iVar3 + 0x30) = *(float *)(iVar3 + 0x30) - fVar2;
      fVar5 = *(float *)(iVar3 + 0x20);
    }
    else {
      fVar5 = *(float *)(iVar3 + 0x20);
    }
    *(float *)(iVar3 + 0x20) = fVar5 + fVar4;
    if (fVar2 <= *(float *)(iVar3 + 0x20)) {
      *(float *)(iVar3 + 0x20) = *(float *)(iVar3 + 0x20) - fVar2;
    }
    *(float *)(iVar3 + 0x14) = param_3;
  }
  return;
}



void set_obj_instance_controller_scale(int instancecontroller,f32 scale)

{
  undefined4 in_a1_lo;
  
  *(undefined4 *)(instancecontroller + 0x14) = in_a1_lo;
  return;
}



void proc_7F06CE84(int param_1,undefined4 param_2)

{
  *(undefined4 *)(param_1 + 0xb8) = param_2;
  return;
}



float getjointsize(int objinst,ushort *param_2,undefined8 param_3,undefined4 param_4)

{
  ushort uVar1;
  
  if (objinst == 0) {
    osSyncPrintf(aGetjointsizeNoObjinst,param_2,0,param_4);
    return_null();
  }
  if (param_2 != NULL) {
    uVar1 = *param_2;
    while( true ) {
      if (true) {
        switch((uint)uVar1 & 0xff) {
        case 1:
          return *(float *)(*(int *)(param_2 + 2) + 8) * *(float *)(objinst + 0x14);
        case 2:
          return *(float *)(*(int *)(param_2 + 2) + 0x18) * *(float *)(objinst + 0x14);
        case 3:
          return *(float *)(*(int *)(param_2 + 2) + 0x18) * *(float *)(objinst + 0x14);
        case 0xb:
          return *(float *)(*(int *)(param_2 + 2) + 0x40) * *(float *)(objinst + 0x14);
        case 0xc:
          return *(float *)(*(int *)(param_2 + 2) + 0x1c) * *(float *)(objinst + 0x14);
        case 0xd:
          return *(float *)(*(int *)(param_2 + 2) + 0x18) * *(float *)(objinst + 0x14);
        case 0xe:
          return *(float *)(*(int *)(param_2 + 2) + 0xc) * *(float *)(objinst + 0x14);
        case 0xf:
          return *(float *)(*(int *)(param_2 + 2) + 0x18) * *(float *)(objinst + 0x14);
        case 0x10:
          return *(float *)(*(int *)(param_2 + 2) + 0x14) * *(float *)(objinst + 0x14);
        case 0x15:
          return *(float *)(*(int *)(param_2 + 2) + 0x10) * *(float *)(objinst + 0x14);
        }
      }
      param_2 = *(ushort **)(param_2 + 4);
      if (param_2 == NULL) break;
      uVar1 = *param_2;
    }
  }
  return 0.00000000;
}



float getinstsize(int objinst,uint param_2,undefined4 param_3,undefined4 param_4)

{
  int objdesc;
  
  if (objinst == 0) {
    osSyncPrintf(aGetinstsizeNoObjinst,param_2,param_3,param_4);
    return_null();
  }
  objdesc = *(int *)(objinst + 8);
  if (objdesc == 0) {
    osSyncPrintf(aGetinstsizeNoObjdesc);
    return_null();
    objdesc = *(int *)(objinst + 8);
  }
  return *(float *)(objdesc + 0x10) * *(float *)(objinst + 0x14);
}



void proc_7F06D07C(float *param_1,float *param_2,float param_3)

{
  float in_a2_lo;
  
  *param_1 = *param_1 + (*param_2 - *param_1) * in_a2_lo;
  param_1[1] = param_1[1] + (param_2[1] - param_1[1]) * in_a2_lo;
  param_1[2] = param_1[2] + (param_2[2] - param_1[2]) * in_a2_lo;
  return;
}



float proc_7F06D0CC(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5)

{
  float fVar1;
  
  fVar1 = param_2 - param_1;
  if (param_2 < param_1) {
    fVar1 = fVar1 + flt_80054BB4;
  }
  if (fVar1 < flt_80054BBC) {
    param_1 = param_1 + fVar1 * param_5;
    if (flt_80054BB8 <= param_1) {
      return param_1 - flt_80054BB8;
    }
  }
  else {
    param_1 = param_1 - (flt_80054BB8 - fVar1) * param_5;
    if (param_1 < 0.00000000) {
      param_1 = param_1 + flt_80054BB8;
    }
  }
  return param_1;
}



void proc_7F06D160(undefined8 param_1,undefined8 param_2,float param_3)

{
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined4 extraout_a1_hi;
  undefined4 extraout_a1_hi_00;
  float *pfVar1;
  undefined4 extraout_a1_lo;
  undefined4 extraout_a1_lo_00;
  float in_a2_lo;
  float fVar2;
  
  pfVar1 = (float *)param_2;
  extraout_a0._4_4_ = (float *)param_1;
  fVar2 = proc_7F06D0CC(*extraout_a0._4_4_,*pfVar1,param_1,param_2,in_a2_lo);
  *extraout_a0._4_4_ = fVar2;
  fVar2 = proc_7F06D0CC(extraout_a0._4_4_[1],pfVar1[1],extraout_a0,
                        CONCAT44(extraout_a1_hi,extraout_a1_lo),in_a2_lo);
  extraout_a0._4_4_[1] = fVar2;
  fVar2 = proc_7F06D0CC(extraout_a0._4_4_[2],pfVar1[2],extraout_a0_00,
                        CONCAT44(extraout_a1_hi_00,extraout_a1_lo_00),in_a2_lo);
  extraout_a0._4_4_[2] = fVar2;
  return;
}



uint proc_7F06D1CC(int param_1,int param_2,int param_3)

{
  byte bVar1;
  ushort uVar2;
  ushort *puVar3;
  ulonglong uVar4;
  byte *pbVar5;
  ulonglong uVar6;
  ulonglong uVar7;
  uint uVar8;
  
  puVar3 = (ushort *)(*(int *)(param_1 + 8) + param_2 * 6);
  bVar1 = *(byte *)(puVar3 + 1);
  uVar4 = (ulonglong)bVar1;
  uVar8 = 0;
  if (bVar1 == 0) {
    uVar2 = puVar3[2];
  }
  else {
    uVar7 = SEXT48((int)(8 - ((uint)*puVar3 + param_3 & 7)));
    uVar6 = uVar7 & 0xff;
    uVar6._4_4_ = (int)uVar6;
    pbVar5 = (byte *)(*(int *)(param_1 + 0x10) + ((uint)*puVar3 + param_3 >> 3));
    if ((uVar7 & 0xff) <= uVar4) {
      do {
        uVar4 = (longlong)(int)((int)uVar4 - (uint)uVar6) & 0xff;
        uVar8 |= ((uint)*pbVar5 & (1 << ((uint)uVar6 & 0x1f)) - 1U) << ((uint)uVar4 & 0x1f) & 0xffff
        ;
        pbVar5 = pbVar5 + 1;
        uVar6 = 8;
        uVar6._4_4_ = 8;
      } while (7 < uVar4);
    }
    if (uVar4 != 0) {
      uVar8 |= (int)(uint)*pbVar5 >> (uVar6._4_4_ - (uint)uVar4 & 0x1f) &
               (1 << ((uint)uVar4 & 0x1f)) - 1U & 0xffff;
    }
    if ((bVar1 < 0x10) && ((uVar8 & 1 << ((uint)bVar1 + 0x1f & 0x1f)) != 0)) {
      uVar8 |= (1 << (0x10 - (uint)bVar1 & 0x1f)) + -1 << ((uint)bVar1 & 0x1f) & 0xffffU;
    }
    uVar2 = puVar3[2];
  }
  return uVar8 + (uint)uVar2 & 0xffff;
}



uint proc_7F06D2E4(int param_1,longlong param_2,model_data *pmodelData,int param_4,int param_5,
                  short *param_6)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  
  param_5 = (uint)*(ushort *)(param_4 + 0xc) * param_5;
  if (param_2 == 0) {
    uVar1 = pmodelData->anonymous_1[param_1].y;
  }
  else {
    uVar1 = pmodelData->anonymous_1[param_1].z;
  }
  uVar2 = proc_7F06D1CC(param_4,(uint)uVar1,param_5);
  *param_6 = (short)uVar2;
  uVar2 = proc_7F06D1CC(param_4,(uint)uVar1 + 1,param_5);
  param_6[1] = (short)uVar2;
  uVar2 = proc_7F06D1CC(param_4,(uint)uVar1 + 2,param_5);
  param_6[2] = (short)uVar2;
  uVar2 = proc_7F06D1CC(param_4,(uint)uVar1 + 3,param_5);
  uVar3 = uVar2 & 0xffff;
  if (((int)param_2 != 0) && (*param_6 = -*param_6, uVar2 != 0)) {
    uVar3 = 0x10000 - uVar2 & 0xffff;
  }
  return uVar3;
}



float proc_7F06D3F4(int param_1,longlong param_2,int param_3,int param_4,int param_5,float *param_6)

{
  uint uVar1;
  float fVar2;
  short sStack8;
  short sStack6;
  short sStack4;
  
  uVar1 = proc_7F06D2E4(param_1,param_2,(model_data *)param_3,param_4,param_5,&sStack8);
  *param_6 = (float)(int)sStack8;
  fVar2 = (float)uVar1;
  param_6[1] = (float)(int)sStack6;
  param_6[2] = (float)(int)sStack4;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  return (fVar2 * flt_80054BC0) / 65536.00000000;
}



void proc_7F06D490(int param_1,ushort *param_2)

{
  char *pcVar2;
  longlong lVar1;
  undefined8 extraout_a0;
  undefined8 extraout_a1;
  int iVar3;
  float fVar4;
  float extraout_f12;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  
  pcVar2 = (char *)extract_id_from_object_structure_microcode(param_1,param_2);
  if (*pcVar2 == '\0') {
    fStack16 = *(float *)(pcVar2 + 0x34);
    fStack12 = *(float *)(pcVar2 + 0x38);
    fStack8 = *(float *)(pcVar2 + 0x3c);
    *(undefined4 *)(pcVar2 + 0x14) = *(undefined4 *)(pcVar2 + 0x30);
    if (*(float *)(param_1 + 0x2c) == 0.00000000) {
      iVar3 = *(int *)(param_1 + 0x54);
    }
    else {
      if (pcVar2[1] == '\0') {
        iVar3 = *(int *)(param_1 + 0x54);
      }
      else {
        proc_7F06D07C(&fStack16,(float *)(pcVar2 + 0x24),extraout_f12);
        fVar4 = proc_7F06D0CC(*(float *)(pcVar2 + 0x30),*(float *)(pcVar2 + 0x20),extraout_a0,
                              extraout_a1,*(float *)(param_1 + 0x2c));
        *(float *)(pcVar2 + 0x14) = fVar4;
        iVar3 = *(int *)(param_1 + 0x54);
      }
    }
    if (((iVar3 != 0) || (*(float *)(param_1 + 0x84) != 0.00000000)) && (pcVar2[2] != '\0')) {
      fVar4 = *(float *)(pcVar2 + 0x50);
      if (*(float *)(param_1 + 0x5c) != 0.00000000) {
        fVar4 = fVar4 + (*(float *)(pcVar2 + 0x44) - fVar4) * *(float *)(param_1 + 0x5c);
      }
      fStack12 = fStack12 + (fVar4 - fStack12) * *(float *)(param_1 + 0x84);
    }
    fStack28 = fStack16;
    fStack24 = fStack12;
    fStack20 = fStack8;
    if ((*(code **)(param_1 + 0xa0) == NULL) ||
       (lVar1 = (**(code **)(param_1 + 0xa0))(param_1,pcVar2 + 8,&fStack28,pcVar2 + 4), lVar1 != 0))
    {
      fStack16 = fStack28 - fStack16;
      fStack8 = fStack20 - fStack8;
      *(float *)(pcVar2 + 8) = fStack28;
      *(float *)(pcVar2 + 0xc) = fStack24 + *(float *)(pcVar2 + 4);
      *(float *)(pcVar2 + 0x10) = fStack20;
      *(float *)(pcVar2 + 0x34) = *(float *)(pcVar2 + 0x34) + fStack16;
      *(float *)(pcVar2 + 0x3c) = *(float *)(pcVar2 + 0x3c) + fStack8;
      if (pcVar2[1] != '\0') {
        *(float *)(pcVar2 + 0x24) = *(float *)(pcVar2 + 0x24) + fStack16;
        *(float *)(pcVar2 + 0x2c) = *(float *)(pcVar2 + 0x2c) + fStack8;
      }
      if (pcVar2[2] != '\0') {
        *(float *)(pcVar2 + 0x4c) = *(float *)(pcVar2 + 0x4c) + fStack16;
        *(float *)(pcVar2 + 0x54) = *(float *)(pcVar2 + 0x54) + fStack8;
        *(float *)(pcVar2 + 0x40) = *(float *)(pcVar2 + 0x40) + fStack16;
        *(float *)(pcVar2 + 0x48) = *(float *)(pcVar2 + 0x48) + fStack8;
      }
    }
  }
  return;
}



void subcalcpos(int objanim,uint param_2,undefined4 param_3,undefined4 param_4)

{
  ushort *puVar1;
  
  if (objanim == 0) {
    osSyncPrintf(aSubcalcposNoObjanim,param_2,param_3,param_4);
    return_null();
  }
  if (*(ushort ***)(objanim + 8) == NULL) {
    osSyncPrintf(aSubcalcposNoObjdesc);
    return_null();
    puVar1 = **(ushort ***)(objanim + 8);
  }
  else {
    puVar1 = **(ushort ***)(objanim + 8);
  }
  if ((puVar1 != NULL) && ((*puVar1 & 0xff) == 1)) {
    proc_7F06D490(objanim,puVar1);
  }
  return;
}



void process_01_group_heading(float **param_1,int param_2,ushort *param_3)

{
  int iVar1;
  longlong extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  longlong lVar2;
  longlong extraout_a1;
  longlong lVar3;
  float *pfVar4;
  float fVar5;
  float afStack96 [16];
  float *pfStack32;
  float *pfStack24;
  float fStack20;
  float *pfStack16;
  float fStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_3 + 2);
  iVar1 = extract_id_from_object_structure_microcode(param_2,param_3);
  lVar3 = (longlong)param_2;
  pfStack16 = (float *)(iVar1 + 8);
  fStack12 = *(float *)(param_2 + 0x14);
  fVar5 = *(float *)(iVar1 + 0x14);
  pfStack32 = (float *)(*(int *)(param_2 + 0xc) + (int)*(short *)(iStack4 + 2) * 0x40);
  lVar2 = (longlong)(int)*(ushort **)(param_3 + 4);
  if (lVar2 == 0) {
    pfVar4 = *param_1;
  }
  else {
    fStack20 = fVar5;
    iStack8 = iVar1;
    pfVar4 = (float *)proc_7F06C660(param_2,*(ushort **)(param_3 + 4),0);
    lVar3 = extraout_a0;
    lVar2 = extraout_a1;
    fVar5 = fStack20;
    iVar1 = iStack8;
  }
  if (*(float *)(iVar1 + 0x18) != 0.00000000) {
    pfStack24 = pfVar4;
    fVar5 = proc_7F06D0CC(fVar5,*(float *)(iVar1 + 0x1c),lVar3,lVar2,*(float *)(iVar1 + 0x18));
    pfVar4 = pfStack24;
  }
  if (pfVar4 == NULL) {
    proc_7F0584D0(pfStack16,fVar5,(float *)fVar5);
    if (fStack12 != 1.00000000) {
      proc_7F058B10(fStack12,extraout_a0_01,pfStack32);
    }
  }
  else {
    pfStack24 = pfVar4;
    proc_7F0584D0(pfStack16,fVar5,(float *)fVar5);
    if (fStack12 != 1.00000000) {
      proc_7F058B10(fStack12,extraout_a0_00,afStack96);
    }
    proc_7F05818C(pfStack24,afStack96,(int)pfStack32);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F06D8B0(void)

{
  float **in_a0_lo;
  longlong lVar1;
  longlong extraout_a0;
  longlong extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 uVar2;
  int in_a1_lo;
  ushort *in_a2_lo;
  int iVar3;
  float *in_a3_lo;
  float in_f0;
  float extraout_f12;
  float fVar4;
  float fVar5;
  float *pfStack144;
  float afStack140 [4];
  float afStack124 [7];
  int iStack96;
  int iStack92;
  int iStack88;
  int iStack84;
  float afStack80 [17];
  float *pfStack12;
  float *pfStack8;
  uint uStack4;
  
  uStack4 = (uint)*in_a2_lo;
  pfStack8 = *(float **)(in_a2_lo + 2);
  iStack84 = (int)*(short *)((int)pfStack8 + 0xe);
  iStack88 = (int)*(short *)(pfStack8 + 4);
  iStack92 = (int)*(short *)((int)pfStack8 + 0x12);
  iStack96 = *(int *)(in_a1_lo + 0xc);
  if (*(ushort **)(in_a2_lo + 4) == NULL) {
    pfStack12 = *in_a0_lo;
  }
  else {
    pfStack12 = (float *)proc_7F06C660(in_a1_lo,*(ushort **)(in_a2_lo + 4),0);
  }
  if (pfStack12 == NULL) {
    proc_7F05892C(pfStack8,in_a3_lo,(float *)(iStack84 * 0x40 + iStack96));
  }
  else {
    proc_7F05892C(pfStack8,in_a3_lo,afStack80);
    iVar3 = iStack84 * 0x40 + iStack96;
    proc_7F05818C(pfStack12,afStack80,iVar3);
    if (dword_80036090 != NULL) {
      in_f0 = (float)(*dword_80036090)(iStack84,iVar3);
    }
  }
  lVar1 = (longlong)(int)in_a3_lo;
  if ((uStack4 & 0x100) != 0) {
    proc_7F05B3F4(in_a3_lo,afStack124);
    proc_7F05BC68(afStack124,extraout_f12,(float *)0x3f000000);
    if (pfStack12 == NULL) {
      proc_7F05B9B4(pfStack8,afStack140,(float *)(iStack88 * 0x40 + iStack96));
      lVar1 = extraout_a0_00;
    }
    else {
      proc_7F05B9B4(pfStack8,afStack140,afStack80);
      proc_7F05818C(pfStack12,afStack80,iStack88 * 0x40 + iStack96);
      lVar1 = extraout_a0;
    }
  }
  if ((uStack4 & 0x200) != 0) {
    if (pfStack12 == NULL) {
      pfStack144 = (float *)(iStack92 * 0x40 + iStack96);
    }
    else {
      pfStack144 = afStack80;
    }
    fVar4 = in_a3_lo[1];
    if (fVar4 < flt_80054BC4) {
      fVar4 = fVar4 * 0.50000000;
    }
    else {
      fVar4 = flt_80054BCC - (flt_80054BC8 - fVar4) * 0.50000000;
    }
    proc_7F0585FC(fVar4,lVar1,pfStack144);
    if (flt_80054BD0 <= fVar4) {
      fVar4 = flt_80054BD4 - fVar4;
    }
    fVar5 = 1.50000000;
    uVar2 = extraout_a0_01;
    if (fVar4 < flt_80054BD8) {
      proc_7F05A9E0(fVar4);
      uVar2 = extraout_a0_02;
      fVar5 = in_f0;
    }
    proc_7F058A4C(fVar5,uVar2,(int)pfStack144);
    proc_7F058998(pfStack8,(int)pfStack144);
    if (pfStack12 != NULL) {
      proc_7F05818C(pfStack12,pfStack144,iStack92 * 0x40 + iStack96);
    }
  }
  return;
}



void proc_7F06DB5C(float **param_1,int param_2,ushort *param_3,float *param_4)

{
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 uVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fVar5;
  float *pfStack128;
  float afStack124 [7];
  int iStack96;
  int iStack92;
  int iStack88;
  int iStack84;
  float afStack80 [17];
  float *pfStack12;
  float *pfStack8;
  uint uStack4;
  
  uStack4 = (uint)*param_3;
  pfStack8 = *(float **)(param_3 + 2);
  iStack84 = (int)*(short *)((int)pfStack8 + 0xe);
  iStack88 = (int)*(short *)(pfStack8 + 4);
  iStack92 = (int)*(short *)((int)pfStack8 + 0x12);
  iStack96 = *(int *)(param_2 + 0xc);
  if (*(ushort **)(param_3 + 4) == NULL) {
    pfStack12 = *param_1;
  }
  else {
    pfStack12 = (float *)proc_7F06C660(param_2,*(ushort **)(param_3 + 4),0);
  }
  if (pfStack12 == NULL) {
    proc_7F05B9B4(pfStack8,param_4,(float *)(iStack84 * 0x40 + iStack96));
    fVar3 = extraout_f12_01;
  }
  else {
    proc_7F05B9B4(pfStack8,param_4,afStack80);
    iVar2 = iStack84 * 0x40 + iStack96;
    proc_7F05818C(pfStack12,afStack80,iVar2);
    fVar3 = extraout_f12;
    if (dword_80036090 != NULL) {
      (*dword_80036090)(iStack84,iVar2);
      fVar3 = extraout_f12_00;
    }
  }
  if ((uStack4 & 0x100) != 0) {
    proc_7F05BC68(param_4,fVar3,(float *)0x3f000000);
    if (pfStack12 == NULL) {
      proc_7F05B9B4(pfStack8,afStack124,(float *)(iStack88 * 0x40 + iStack96));
    }
    else {
      proc_7F05B9B4(pfStack8,afStack124,afStack80);
      proc_7F05818C(pfStack12,afStack80,iStack88 * 0x40 + iStack96);
    }
  }
  if ((uStack4 & 0x200) != 0) {
    if (pfStack12 == NULL) {
      pfStack128 = (float *)(iStack92 * 0x40 + iStack96);
    }
    else {
      pfStack128 = afStack80;
    }
    fVar3 = proc_7F05ACB0(*param_4);
    fVar4 = fVar3 + fVar3;
    if (fVar4 < flt_80054BDC) {
      fVar4 = fVar4 * 0.50000000;
    }
    else {
      fVar4 = flt_80054BE4 - (flt_80054BE0 - fVar4) * 0.50000000;
    }
    proc_7F0585FC(fVar4,extraout_a0,pfStack128);
    if (flt_80054BE8 <= fVar4) {
      fVar4 = flt_80054BEC - fVar4;
    }
    fVar5 = 1.50000000;
    uVar1 = extraout_a0_00;
    if (fVar4 < flt_80054BF0) {
      proc_7F05A9E0(fVar4);
      uVar1 = extraout_a0_01;
      fVar5 = fVar3;
    }
    proc_7F058A4C(fVar5,uVar1,(int)pfStack128);
    proc_7F058998(pfStack8,(int)pfStack128);
    if (pfStack12 != NULL) {
      proc_7F05818C(pfStack12,pfStack128,iStack92 * 0x40 + iStack96);
    }
  }
  return;
}



uint proc_7F06DE04(int param_1,uint param_2,uint param_3)

{
  uint uVar1;
  byte *pbVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  uVar4 = 8 - (param_3 & 7);
  uVar5 = 0;
  uVar1 = param_2 & 0xff;
  pbVar2 = (byte *)(param_1 + (param_3 >> 3));
  uVar3 = uVar4 & 0xff;
  if ((uVar4 & 0xff) <= (param_2 & 0xff)) {
    do {
      uVar4 = uVar1 - uVar3;
      uVar1 = uVar4 & 0xff;
      uVar5 |= ((uint)*pbVar2 & (1 << (uVar3 & 0x1f)) - 1U) << (uVar4 & 0x1f) & 0xffff;
      pbVar2 = pbVar2 + 1;
      uVar3 = 8;
    } while (7 < uVar1);
  }
  if (uVar1 != 0) {
    uVar5 |= (int)(uint)*pbVar2 >> (uVar3 - uVar1 & 0x1f) & (1 << (uVar1 & 0x1f)) - 1U & 0xffff;
  }
  return uVar5 << (0x10 - (param_2 & 0xff) & 0x1f) & 0xffff;
}



void proc_7F06DEC0(int param_1,longlong param_2,int param_3,int param_4,int param_5,float *param_6)

{
  byte bVar1;
  float fVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  float fVar6;
  
  bVar1 = *(byte *)(param_4 + 6);
  if (param_2 == 0) {
    uVar5 = (uint)*(ushort *)(*(int *)(param_3 + 4) + param_1 * 6 + 2) * (uint)bVar1;
  }
  else {
    uVar5 = (uint)*(ushort *)(*(int *)(param_3 + 4) + param_1 * 6 + 4) * (uint)bVar1;
  }
  uVar3 = proc_7F06DE04(param_5,(uint)bVar1,uVar5);
  uVar5 += (uint)bVar1;
  uVar4 = proc_7F06DE04(param_5,(uint)bVar1,uVar5);
  uVar5 = proc_7F06DE04(param_5,(uint)bVar1,uVar5 + (uint)bVar1);
  fVar2 = flt_80054BF4;
  fVar6 = (float)(uVar3 & 0xffff);
  if (false) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *param_6 = (fVar6 * flt_80054BF4) / 65536.00000000;
  if ((int)param_2 == 0) {
    fVar6 = (float)(uVar4 & 0xffff);
    if (false) {
      fVar6 = fVar6 + 4294967296.00000000;
    }
    param_6[1] = (fVar6 * fVar2) / 65536.00000000;
    fVar6 = (float)(uVar5 & 0xffff);
    if (false) {
      fVar6 = fVar6 + 4294967296.00000000;
    }
    param_6[2] = (fVar6 * fVar2) / 65536.00000000;
  }
  else {
    if ((short)uVar4 == 0) {
      param_6[1] = 0.00000000;
    }
    else {
      param_6[1] = ((float)(0x10000 - (uVar4 & 0xffff)) * fVar2) / 65536.00000000;
    }
    if ((short)uVar5 == 0) {
      param_6[2] = 0.00000000;
    }
    else {
      param_6[2] = ((float)(0x10000 - (uVar5 & 0xffff)) * fVar2) / 65536.00000000;
    }
  }
  return;
}



void process_02_position(float **param_1,int param_2,ushort *param_3)

{
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fStack108;
  undefined4 uStack104;
  undefined4 uStack100;
  float afStack96 [4];
  float afStack80 [4];
  float afStack64 [4];
  float fStack48;
  undefined4 uStack44;
  undefined4 uStack40;
  float fStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  float fStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  int iStack12;
  uint uStack8;
  
  iStack12 = *(int *)(*(int *)(param_2 + 8) + 4);
  fStack24 = dword_80036094;
  uStack20 = dword_80036098;
  uStack16 = dword_8003609C;
  uStack8 = (uint)*(ushort *)(*(int *)(param_3 + 2) + 0xc);
  proc_7F06DEC0(uStack8,(longlong)*(char *)(param_2 + 0x24),iStack12,*(int *)(param_2 + 0x20),
                *(int *)(param_2 + 0x34),&fStack24);
  if (*(float *)(param_2 + 0x2c) != 0.00000000) {
    fStack36 = dword_800360A0;
    uStack32 = dword_800360A4;
    uStack28 = dword_800360A8;
    proc_7F06DEC0(uStack8,(longlong)*(char *)(param_2 + 0x24),iStack12,*(int *)(param_2 + 0x20),
                  *(int *)(param_2 + 0x38),&fStack36);
    proc_7F06D160((longlong)(int)&fStack24,(longlong)(int)&fStack36,extraout_f12);
  }
  if (*(float *)(param_2 + 0x84) == 0.00000000) {
    proc_7F06D8B0();
  }
  else {
    fStack48 = dword_800360AC;
    uStack44 = dword_800360B0;
    uStack40 = dword_800360B4;
    proc_7F06DEC0(uStack8,(longlong)*(char *)(param_2 + 0x25),iStack12,*(int *)(param_2 + 0x54),
                  *(int *)(param_2 + 100),&fStack48);
    if (*(float *)(param_2 + 0x5c) != 0.00000000) {
      fStack108 = dword_800360B8;
      uStack104 = dword_800360BC;
      uStack100 = dword_800360C0;
      proc_7F06DEC0(uStack8,(longlong)*(char *)(param_2 + 0x25),iStack12,*(int *)(param_2 + 0x54),
                    *(int *)(param_2 + 0x68),&fStack108);
      proc_7F06D160((longlong)(int)&fStack48,(longlong)(int)&fStack108,extraout_f12_00);
    }
    proc_7F05B3F4(&fStack24,afStack64);
    proc_7F05B3F4(&fStack48,afStack80);
    proc_7F05BE10(afStack64,afStack80);
    proc_7F05BA08(afStack64,afStack80,extraout_f12_01,*(float **)(param_2 + 0x84));
    proc_7F06DB5C(param_1,param_2,param_3,afStack96);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F06E2B8(void)

{
  short sVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  uint uVar5;
  float **in_a0_lo;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 uVar6;
  int in_a1_lo;
  ushort *in_a2_lo;
  float *in_a3_lo;
  float in_f0;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fVar7;
  float *pfStack112;
  float afStack80 [17];
  float *pfStack12;
  float *pfStack8;
  uint uStack4;
  
  uStack4 = (uint)*in_a2_lo;
  pfStack8 = *(float **)(in_a2_lo + 2);
  sVar1 = *(short *)(pfStack8 + 4);
  sVar2 = *(short *)((int)pfStack8 + 0xe);
  sVar3 = *(short *)((int)pfStack8 + 0x12);
  iVar4 = *(int *)(in_a1_lo + 0xc);
  if (*(ushort **)(in_a2_lo + 4) == NULL) {
    pfStack12 = *in_a0_lo;
  }
  else {
    pfStack12 = (float *)proc_7F06C660(in_a1_lo,*(ushort **)(in_a2_lo + 4),0);
    in_f12 = extraout_f12;
  }
  if (pfStack12 == NULL) {
    proc_7F0584D0(pfStack8,in_f12,in_a3_lo);
    uVar6 = extraout_a0_00;
    fVar7 = extraout_f12_01;
  }
  else {
    proc_7F0584D0(pfStack8,in_f12,in_a3_lo);
    proc_7F05818C(pfStack12,afStack80,(int)sVar2 * 0x40 + iVar4);
    uVar6 = extraout_a0;
    fVar7 = extraout_f12_00;
  }
  if (((uStack4 & 0x100) != 0) || ((uStack4 & 0x200) != 0)) {
    if ((float)in_a3_lo < flt_80054BF8) {
      in_a3_lo = (float *)((float)in_a3_lo * 0.50000000);
    }
    else {
      in_a3_lo = (float *)(flt_80054C00 - (flt_80054BFC - (float)in_a3_lo) * 0.50000000);
    }
  }
  uVar5 = uStack4 & 0x200;
  if ((uStack4 & 0x100) != 0) {
    if (pfStack12 == NULL) {
      proc_7F0584D0(pfStack8,fVar7,in_a3_lo);
      uVar6 = extraout_a0_02;
    }
    else {
      proc_7F0584D0(pfStack8,fVar7,in_a3_lo);
      proc_7F05818C(pfStack12,afStack80,(int)sVar1 * 0x40 + iVar4);
      uVar6 = extraout_a0_01;
    }
  }
  if (uVar5 != 0) {
    if (pfStack12 == NULL) {
      pfStack112 = (float *)((int)sVar3 * 0x40 + iVar4);
    }
    else {
      pfStack112 = afStack80;
    }
    proc_7F0585FC((float)in_a3_lo,uVar6,pfStack112);
    if (flt_80054C04 <= (float)in_a3_lo) {
      in_a3_lo = (float *)(flt_80054C08 - (float)in_a3_lo);
    }
    fVar7 = 1.50000000;
    uVar6 = extraout_a0_03;
    if ((float)in_a3_lo < flt_80054C0C) {
      proc_7F05A9E0((float)in_a3_lo);
      uVar6 = extraout_a0_04;
      fVar7 = in_f0;
    }
    proc_7F058A4C(fVar7,uVar6,(int)pfStack112);
    proc_7F058998(pfStack8,(int)pfStack112);
    if (pfStack12 != NULL) {
      proc_7F05818C(pfStack12,pfStack112,(int)sVar3 * 0x40 + iVar4);
    }
  }
  return;
}



float proc_7F06E540(int param_1,longlong param_2,int param_3,int param_4,int param_5)

{
  byte bVar1;
  uint uVar2;
  float fVar3;
  
  bVar1 = *(byte *)(param_4 + 6);
  if (param_2 == 0) {
    uVar2 = (uint)*(ushort *)(*(int *)(param_3 + 4) + param_1 * 6 + 2) * (uint)bVar1;
  }
  else {
    uVar2 = (uint)*(ushort *)(*(int *)(param_3 + 4) + param_1 * 6 + 4) * (uint)bVar1;
  }
  uVar2 = proc_7F06DE04(param_5,(uint)bVar1,uVar2);
  fVar3 = 0.00000000;
  if ((int)param_2 == 0) {
    fVar3 = (float)uVar2;
    if ((int)uVar2 < 0) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    fVar3 = (fVar3 * flt_80054C14) / 65536.00000000;
  }
  else {
    if (uVar2 != 0) {
      fVar3 = ((float)(0x10000 - uVar2) * flt_80054C10) / 65536.00000000;
    }
  }
  return fVar3;
}



void process_03_unknown(undefined4 param_1,int param_2,int param_3)

{
  ushort uVar1;
  int iVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  ulonglong extraout_a0_01;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  undefined8 uVar3;
  ulonglong uVar4;
  float fVar5;
  float fVar6;
  float fStack24;
  
  uVar1 = *(ushort *)(*(int *)(param_3 + 4) + 0xc);
  uVar4 = (ulonglong)uVar1;
  iVar2 = *(int *)(*(int *)(param_2 + 8) + 4);
  fVar5 = proc_7F06E540((uint)uVar1,(longlong)*(char *)(param_2 + 0x24),iVar2,
                        *(int *)(param_2 + 0x20),*(int *)(param_2 + 0x34));
  if (*(float *)(param_2 + 0x2c) != 0.00000000) {
    fVar6 = proc_7F06E540((uint)uVar1,(longlong)*(char *)(param_2 + 0x24),iVar2,
                          *(int *)(param_2 + 0x20),*(int *)(param_2 + 0x38));
    fVar5 = proc_7F06D0CC(fVar5,fVar6,extraout_a0,extraout_a1,*(float *)(param_2 + 0x2c));
  }
  if (*(float *)(param_2 + 0x84) != 0.00000000) {
    fStack24 = proc_7F06E540((uint)uVar1,(longlong)*(char *)(param_2 + 0x25),iVar2,
                             *(int *)(param_2 + 0x54),*(int *)(param_2 + 100));
    uVar3 = extraout_a1_00;
    if (*(float *)(param_2 + 0x5c) != 0.00000000) {
      fVar6 = proc_7F06E540((uint)uVar1,(longlong)*(char *)(param_2 + 0x25),iVar2,
                            *(int *)(param_2 + 0x54),*(int *)(param_2 + 0x68));
      fStack24 = proc_7F06D0CC(fStack24,fVar6,extraout_a0_00,extraout_a1_01,
                               *(float *)(param_2 + 0x5c));
      uVar4 = extraout_a0_01;
      uVar3 = extraout_a1_02;
    }
    proc_7F06D0CC(fVar5,fStack24,uVar4,uVar3,*(float *)(param_2 + 0x84));
  }
  proc_7F06E2B8();
  return;
}



void process_15_subposition(float **param_1,int param_2,int param_3)

{
  short sVar1;
  int iVar2;
  float afStack72 [16];
  float *pfStack8;
  int *piStack4;
  
  piStack4 = *(int **)(param_3 + 4);
  iVar2 = *(int *)(param_2 + 0xc);
  sVar1 = *(short *)(piStack4 + 3);
  if (*(ushort **)(param_3 + 8) == NULL) {
    pfStack8 = *param_1;
  }
  else {
    pfStack8 = (float *)proc_7F06C660(param_2,*(ushort **)(param_3 + 8),0);
  }
  if (pfStack8 == NULL) {
    init_something_copy_posdata_to_it(piStack4,(int *)((int)sVar1 * 0x40 + iVar2));
  }
  else {
    init_something_copy_posdata_to_it(piStack4,(int *)afStack72);
    proc_7F05818C(pfStack8,afStack72,(int)sVar1 * 0x40 + iVar2);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void process_08_distance_triggers(void)

{
  float *pfVar1;
  undefined4 *puVar2;
  int iVar3;
  int objinst;
  ushort *partdesc;
  f32 fVar4;
  float fVar5;
  float fVar6;
  
  pfVar1 = *(float **)(partdesc + 2);
  puVar2 = (undefined4 *)extract_id_from_object_structure_microcode(objinst,partdesc);
  iVar3 = proc_7F06C660(objinst,partdesc,0);
  if (dword_80036084 == 0) {
    fVar4 = proc_7F078484();
    fVar5 = (float)fVar4 * -*(float *)(iVar3 + 0x38);
    if (flt_80036088 != 1.00000000) {
      fVar5 = fVar5 * flt_80036088;
    }
  }
  else {
    fVar5 = 0.00000000;
  }
  if (fVar5 <= *pfVar1 * *(float *)(objinst + 0x14)) {
    if (*pfVar1 != 0.00000000) goto LAB_7f06e954;
    fVar6 = pfVar1[1];
  }
  else {
    fVar6 = pfVar1[1];
  }
  if (fVar5 <= fVar6 * *(float *)(objinst + 0x14)) {
    *puVar2 = 1;
    *(float *)(partdesc + 10) = pfVar1[2];
    return;
  }
LAB_7f06e954:
  *puVar2 = 0;
  *(undefined4 *)(partdesc + 10) = 0;
  return;
}



void proc_7F06E970(int param_1,ushort *param_2)

{
  int iVar1;
  int *piVar2;
  
  iVar1 = *(int *)(param_2 + 2);
  piVar2 = (int *)extract_id_from_object_structure_microcode(param_1,param_2);
  if (*piVar2 == 0) {
    *(undefined4 *)(param_2 + 10) = 0;
  }
  else {
    *(undefined4 *)(param_2 + 10) = *(undefined4 *)(iVar1 + 8);
  }
  return;
}



void process_12_handle_switch(int param_1,ushort *param_2)

{
  undefined4 *puVar1;
  int *piVar2;
  
  puVar1 = *(undefined4 **)(param_2 + 2);
  piVar2 = (int *)extract_id_from_object_structure_microcode(param_1,param_2);
  if (*piVar2 == 0) {
    *(undefined4 *)(param_2 + 10) = 0;
  }
  else {
    *(undefined4 *)(param_2 + 10) = *puVar1;
  }
  return;
}



void process_17_pointer_to_head(int param_1,ushort *param_2)

{
  int **ppiVar1;
  int iVar2;
  
  ppiVar1 = (int **)extract_id_from_object_structure_microcode(param_1,param_2);
  if (*ppiVar1 != NULL) {
    iVar2 = **ppiVar1;
    *(int *)(param_2 + 10) = iVar2;
    if (iVar2 != 0) {
      *(ushort **)(iVar2 + 8) = param_2;
      while (iVar2 = *(int *)(iVar2 + 0xc), iVar2 != 0) {
        *(ushort **)(iVar2 + 8) = param_2;
      }
    }
  }
  return;
}



void proc_7F06EA54(int param_1,longlong param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = *(int *)(param_1 + 4);
  if (param_2 == 0) {
    iVar1 = *(int *)(iVar4 + 0x1c);
    iVar4 = *(int *)(iVar4 + 0x18);
  }
  else {
    iVar1 = *(int *)(iVar4 + 0x18);
    iVar4 = *(int *)(iVar4 + 0x1c);
  }
  if (iVar1 == 0) {
    *(int *)(param_1 + 0x14) = iVar4;
    if (iVar4 != 0) {
      *(undefined4 *)(iVar4 + 0x10) = 0;
    }
  }
  else {
    *(int *)(param_1 + 0x14) = iVar1;
    *(undefined4 *)(iVar1 + 0x10) = 0;
    iVar3 = iVar1;
    if ((*(int *)(iVar1 + 0xc) != 0) && (iVar3 = iVar1, iVar4 != *(int *)(iVar1 + 0xc))) {
      iVar2 = *(int *)(iVar1 + 0xc);
      do {
        iVar3 = iVar2;
        iVar2 = *(int *)(iVar3 + 0xc);
        if (iVar2 == 0) break;
      } while (iVar4 != iVar2);
    }
    *(int *)(iVar3 + 0xc) = iVar4;
    if (iVar4 != 0) {
      *(int *)(iVar4 + 0x10) = iVar3;
      if ((*(int *)(iVar4 + 0xc) != 0) && (iVar1 != *(int *)(iVar4 + 0xc))) {
        iVar3 = *(int *)(iVar4 + 0xc);
        do {
          iVar4 = iVar3;
          iVar3 = *(int *)(iVar4 + 0xc);
          if (iVar3 == 0) break;
        } while (iVar1 != iVar3);
      }
      *(undefined4 *)(iVar4 + 0xc) = 0;
      return;
    }
  }
  return;
}



void proc_7F06EB10(int param_1,ushort *param_2)

{
  int *piVar1;
  
  piVar1 = (int *)extract_id_from_object_structure_microcode(param_1,param_2);
  proc_7F06EA54((int)param_2,(longlong)*piVar1);
  return;
}



void process_09_head_hat_placement_interlink(int param_1,ushort *param_2)

{
  short sVar1;
  float *pfVar2;
  float *pfVar3;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float *pfStack12;
  undefined4 *puStack8;
  
  pfVar2 = *(float **)(param_2 + 2);
  puStack8 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,param_2);
  pfVar3 = (float *)proc_7F06C660(param_1,param_2,0);
  sVar1 = *(short *)(pfVar2 + 8);
  if (sVar1 == 0) {
    fStack24 = pfVar2[3];
    fStack20 = pfVar2[4];
    fStack16 = pfVar2[5];
    pfStack12 = pfVar3;
    proc_7F0583D8(pfVar3,&fStack24);
    pfVar3 = pfStack12;
  }
  else {
    if (sVar1 == 2) {
      fStack24 = pfVar2[4] * pfVar3[4];
      fStack20 = pfVar2[4] * pfVar3[5];
      fStack16 = pfVar2[4] * pfVar3[6];
    }
    else {
      if (sVar1 == 3) {
        fStack24 = pfVar2[5] * pfVar3[8];
        fStack20 = pfVar2[5] * pfVar3[9];
        fStack16 = pfVar2[5] * pfVar3[10];
      }
      else {
        if (sVar1 != 1) {
          fStack36 = *pfVar2;
          goto LAB_7f06ec68;
        }
        fStack24 = pfVar2[3] * *pfVar3;
        fStack20 = pfVar2[3] * pfVar3[1];
        fStack16 = pfVar2[3] * pfVar3[2];
      }
    }
  }
  fStack36 = *pfVar2;
LAB_7f06ec68:
  fStack32 = pfVar2[1];
  fStack28 = pfVar2[2];
  proc_7F058474(pfVar3,&fStack36);
  if (fStack28 * fStack16 + fStack24 * fStack36 + fStack20 * fStack32 < 0.00000000) {
    *puStack8 = 1;
  }
  else {
    *puStack8 = 0;
  }
  proc_7F06EB10(param_1,param_2);
  return;
}



void process_07_unknown(int param_1,ushort *param_2)

{
  float *pfVar1;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a3_lo;
  int iVar2;
  float __x;
  float fVar3;
  float fStack32;
  float fStack28;
  float fStack24;
  uint *puStack8;
  int iStack4;
  
  iStack4 = *(int *)(param_2 + 2);
  puStack8 = (uint *)extract_id_from_object_structure_microcode(param_1,param_2);
  pfVar1 = (float *)proc_7F06C660(param_1,param_2,0);
  proc_7F06C550(param_1,&fStack32,extraout_a2_lo,extraout_a3_lo);
  __x = proc_7F05ACB0(pfVar1[6] * fStack24 + fStack32 * pfVar1[4] + fStack28 * pfVar1[5]);
  fVar3 = sinf(__x);
  fVar3 = proc_7F05ACB0((fStack32 * pfVar1[8] + fStack28 * pfVar1[9] + fStack24 * pfVar1[10]) /
                        fVar3);
  if ((pfVar1[2] * fStack24 + fStack32 * *pfVar1 + fStack28 * pfVar1[1] < 0.00000000) &&
     (0.00000000 < fVar3)) {
    fVar3 = flt_80054C18 - fVar3;
  }
  iVar2 = (int)((__x * 64.00000000) / flt_80054C1C) * 0xc;
  *puStack8 = (uint)*(byte *)(iStack4 + *(int *)(&dword_800360C4 + iVar2) +
                                        ((int)((fVar3 * 65536.00000000) / flt_80054C1C) +
                                         *(int *)(&DAT_800360c8 + iVar2) >>
                                        (*(uint *)(&DAT_800360cc + iVar2) & 0x1f)) + 0x18);
  return;
}



void proc_7F06EEA4(undefined8 param_1,int param_2)

{
  ushort uVar1;
  bool bVar2;
  ushort *puVar3;
  ushort *puVar4;
  
  puVar3 = *(ushort **)(param_2 + 0x14);
  if (puVar3 == NULL) {
    return;
  }
  uVar1 = *puVar3;
  do {
    bVar2 = true;
    if (true) {
      switch((uint)uVar1 & 0xff) {
      case 1:
      case 2:
      case 3:
      case 0xb:
      case 0xc:
      case 0xd:
      case 0xe:
      case 0xf:
      case 0x10:
      case 0x15:
        bVar2 = false;
        break;
      case 7:
        process_07_unknown(param_1._4_4_,puVar3);
        break;
      case 8:
        process_08_distance_triggers();
        break;
      case 9:
        process_09_head_hat_placement_interlink(param_1._4_4_,puVar3);
        break;
      case 0x17:
        process_17_pointer_to_head(param_1._4_4_,puVar3);
      }
    }
    if (((!bVar2) || (puVar4 = *(ushort **)(puVar3 + 10), puVar4 == NULL)) &&
       (puVar4 = puVar3, puVar3 != NULL)) {
      while (puVar3 != *(ushort **)(param_2 + 8)) {
        puVar4 = *(ushort **)(puVar3 + 6);
        if ((puVar4 != NULL) || (puVar4 = *(ushort **)(puVar3 + 4), puVar3 = puVar4, puVar4 == NULL)
           ) goto LAB_7f06efa4;
      }
      puVar4 = NULL;
    }
LAB_7f06efa4:
    if (puVar4 == NULL) {
      return;
    }
    uVar1 = *puVar4;
    puVar3 = puVar4;
  } while( true );
}



void proc_7F06EFC4(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  
  puVar2 = **(ushort ***)(param_1 + 8);
  if (puVar2 == NULL) {
    return;
  }
  uVar1 = *puVar2;
  do {
    if (false) {
switchD_7f06f00c_caseD_1:
      puVar3 = *(ushort **)(puVar2 + 10);
    }
    else {
      switch((uint)uVar1 & 0xff) {
      default:
        goto switchD_7f06f00c_caseD_1;
      case 7:
        process_07_unknown(param_1,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 8:
        process_08_distance_triggers();
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 9:
        process_09_head_hat_placement_interlink(param_1,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 0x12:
        process_12_handle_switch(param_1,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 0x17:
        process_17_pointer_to_head(param_1,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
      }
    }
    if ((puVar3 == NULL) && (puVar3 = puVar2, puVar2 != NULL)) {
      puVar3 = *(ushort **)(puVar2 + 6);
      while ((puVar3 == NULL && (puVar2 = *(ushort **)(puVar2 + 4), puVar3 = puVar2, puVar2 != NULL)
             )) {
        puVar3 = *(ushort **)(puVar2 + 6);
      }
    }
    if (puVar3 == NULL) {
      return;
    }
    uVar1 = *puVar3;
    puVar2 = puVar3;
  } while( true );
}



void proc_7F06F0D0(float **param_1,int param_2)

{
  ushort uVar1;
  ushort *puVar2;
  ushort *puVar3;
  
  puVar2 = **(ushort ***)(param_2 + 8);
  if (puVar2 == NULL) {
    return;
  }
  uVar1 = *puVar2;
  do {
    if (false) {
switchD_7f06f120_caseD_4:
      puVar3 = *(ushort **)(puVar2 + 10);
    }
    else {
      switch((uint)uVar1 & 0xff) {
      case 1:
        process_01_group_heading(param_1,param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 2:
        process_02_position(param_1,param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 3:
        process_03_unknown(param_1,param_2,(int)puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      default:
        goto switchD_7f06f120_caseD_4;
      case 7:
        process_07_unknown(param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 8:
        process_08_distance_triggers();
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 9:
        process_09_head_hat_placement_interlink(param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 0x12:
        process_12_handle_switch(param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 0x15:
        process_15_subposition(param_1,param_2,(int)puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
        break;
      case 0x17:
        process_17_pointer_to_head(param_2,puVar2);
        puVar3 = *(ushort **)(puVar2 + 10);
      }
    }
    if ((puVar3 == NULL) && (puVar3 = puVar2, puVar2 != NULL)) {
      puVar3 = *(ushort **)(puVar2 + 6);
      while ((puVar3 == NULL && (puVar2 = *(ushort **)(puVar2 + 4), puVar3 = puVar2, puVar2 != NULL)
             )) {
        puVar3 = *(ushort **)(puVar2 + 6);
      }
    }
    if (puVar3 == NULL) {
      return;
    }
    uVar1 = *puVar3;
    puVar2 = puVar3;
  } while( true );
}



void instcalcmatrices(float **basemtx,uint objinst,undefined4 param_3,undefined4 param_4)

{
  float *mtxlist;
  
  if (objinst == 0) {
    osSyncPrintf(aInstcalcmatricesNoObjinst,0,param_3,param_4);
    return_null();
  }
  if (*basemtx == NULL) {
    osSyncPrintf(aInstcalcmatricesNoBasemtx);
    return_null();
    mtxlist = basemtx[4];
  }
  else {
    mtxlist = basemtx[4];
  }
  if (mtxlist == NULL) {
    osSyncPrintf(aInstcalcmatricesNoMtxlist);
    return_null();
    mtxlist = basemtx[4];
  }
  *(float **)(objinst + 0xc) = mtxlist;
  basemtx[4] = basemtx[4] + (int)*(short *)(*(int *)(objinst + 8) + 0xe) * 0x10;
  proc_7F06F0D0(basemtx,objinst);
  return;
}



void subcalcmatrices(float **basemtx,uint objanim,undefined4 param_3,undefined4 param_4)

{
  short sVar1;
  uint uVar2;
  int *piVar3;
  longlong lVar4;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  int iVar5;
  
  if (objanim == 0) {
    osSyncPrintf(aSubcalcmatricesNoObjanim);
    return_null();
    param_3 = extraout_a2_lo;
    param_4 = extraout_a3_lo;
  }
  if (*basemtx == NULL) {
    osSyncPrintf(aSubcalcmatricesNoBasemtx);
    return_null();
    param_3 = extraout_a2_lo_00;
    param_4 = extraout_a3_lo_00;
  }
  if (basemtx[4] == NULL) {
    osSyncPrintf(aSubcalcmatricesNoMtxlist);
    return_null();
    iVar5 = *(int *)(objanim + 0x20);
    param_3 = extraout_a2_lo_01;
    param_4 = extraout_a3_lo_01;
  }
  else {
    iVar5 = *(int *)(objanim + 0x20);
  }
  if (iVar5 == 0) goto LAB_7f06f590;
  if (*(int *)(objanim + 0x18) == 0) {
    lVar4 = (longlong)*(short *)(objanim + 0x30);
  }
  else {
    if (*(int *)(objanim + 0x1c) == 0) {
      osSyncPrintf(aSubcalcmatricesNoAttachForObjinst);
      return_null();
      lVar4 = (longlong)*(short *)(objanim + 0x30);
    }
    else {
      lVar4 = (longlong)*(short *)(objanim + 0x30);
    }
  }
  if ((lVar4 < 0) || ((longlong)(ulonglong)*(ushort *)(*(int *)(objanim + 0x20) + 4) <= lVar4)) {
    osSyncPrintf(aSubcalcmatricesFrameaOutOfRange);
    return_null();
    sVar1 = *(short *)(objanim + 0x32);
  }
  else {
    sVar1 = *(short *)(objanim + 0x32);
  }
  if (((longlong)sVar1 < 0) ||
     ((longlong)(ulonglong)*(ushort *)(*(int *)(objanim + 0x20) + 4) <= (longlong)sVar1)) {
    osSyncPrintf(aSubcalcmatricesFramebOutOfRange);
    return_null();
  }
  if ((*(float *)(objanim + 0x84) == 0.00000000) ||
     ((*(float *)(objanim + 0x84) != 0.00000000 && (*(int *)(objanim + 0x54) != 0)))) {
    iVar5 = *(int *)(objanim + 0x54);
  }
  else {
    osSyncPrintf(aSubcalcmatricesNoAnim2);
    return_null();
    iVar5 = *(int *)(objanim + 0x54);
  }
  if ((iVar5 != 0) &&
     (((iVar5 == 0 || ((longlong)*(short *)(objanim + 0x60) < 0)) ||
      ((longlong)(ulonglong)*(ushort *)(iVar5 + 4) <= (longlong)*(short *)(objanim + 0x60))))) {
    osSyncPrintf(aSubcalcmatricesFrame2aOutOfRange);
    return_null();
    iVar5 = *(int *)(objanim + 0x54);
  }
  if (iVar5 == 0) {
    piVar3 = *(int **)(objanim + 0x20);
LAB_7f06f4d0:
    sVar1 = *(short *)(objanim + 0x30);
  }
  else {
    if (((iVar5 != 0) && (-1 < (longlong)*(short *)(objanim + 0x62))) &&
       ((longlong)*(short *)(objanim + 0x62) < (longlong)(ulonglong)*(ushort *)(iVar5 + 4))) {
      piVar3 = *(int **)(objanim + 0x20);
      goto LAB_7f06f4d0;
    }
    osSyncPrintf(aSubcalcmatricesFrame2bOutOfRange);
    return_null();
    piVar3 = *(int **)(objanim + 0x20);
    sVar1 = *(short *)(objanim + 0x30);
  }
  uVar2 = proc_7F0754BC(piVar3,(int)sVar1);
  *(uint *)(objanim + 0x34) = uVar2;
  if (*(float *)(objanim + 0x2c) == 0.00000000) {
    piVar3 = *(int **)(objanim + 0x54);
  }
  else {
    uVar2 = proc_7F0754BC(*(int **)(objanim + 0x20),(int)*(short *)(objanim + 0x32));
    *(uint *)(objanim + 0x38) = uVar2;
    piVar3 = *(int **)(objanim + 0x54);
  }
  if (piVar3 != NULL) {
    uVar2 = proc_7F0754BC(piVar3,(int)*(short *)(objanim + 0x60));
    *(uint *)(objanim + 100) = uVar2;
    if (*(float *)(objanim + 0x5c) != 0.00000000) {
      uVar2 = proc_7F0754BC(*(int **)(objanim + 0x54),(int)*(short *)(objanim + 0x62));
      *(uint *)(objanim + 0x68) = uVar2;
    }
  }
  proc_7F0755B0();
  param_3 = extraout_a2_lo_02;
  param_4 = extraout_a3_lo_02;
LAB_7f06f590:
  instcalcmatrices(basemtx,objanim,param_3,param_4);
  return;
}



undefined4 proc_7F06F5AC(int param_1)

{
  return *(undefined4 *)(param_1 + 0x20);
}



undefined proc_7F06F5B4(int param_1)

{
  return *(undefined *)(param_1 + 0x24);
}



undefined4 proc_7F06F5BC(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



float proc_7F06F5C4(int param_1)

{
  if (0.00000000 <= *(float *)(param_1 + 0x3c)) {
    return *(float *)(param_1 + 0x3c);
  }
  if (*(int *)(param_1 + 0x20) == 0) {
    return 0.00000000;
  }
  return (float)((uint)*(ushort *)(*(int *)(param_1 + 0x20) + 4) - 1);
}



undefined4 proc_7F06F610(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



float proc_7F06F618(int param_1)

{
  float fVar1;
  
  fVar1 = *(float *)(param_1 + 0x40);
  if (fVar1 < 0.00000000) {
    fVar1 = -fVar1;
  }
  return fVar1;
}



undefined4 proc_7F06F640(int param_1)

{
  undefined4 uVar1;
  
  uVar1 = proc_7F06F610(param_1);
  return uVar1;
}



longlong proc_7F06F66C(longlong param_1,int param_2,float param_3)

{
  ushort uVar1;
  int iVar2;
  longlong lVar3;
  float in_a2_lo;
  
  if (param_1 < 0) {
    if ((*(byte *)(param_2 + 7) & 1) == 0) {
      lVar3 = 0;
    }
    else {
      uVar1 = *(ushort *)(param_2 + 4);
      iVar2 = -(int)param_1;
      lVar3 = (longlong)(int)((uint)uVar1 - iVar2 % (uint)uVar1);
      if (uVar1 == 0) {
        trap(0x1c00);
      }
      if (((ulonglong)uVar1 == 0xffffffffffffffff) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
    }
  }
  else {
    if (0.00000000 <= in_a2_lo) {
      if ((longlong)(int)in_a2_lo < param_1) {
        iVar2 = proc_7F05C4B8(in_a2_lo);
        return (longlong)iVar2;
      }
      uVar1 = *(ushort *)(param_2 + 4);
    }
    else {
      uVar1 = *(ushort *)(param_2 + 4);
    }
    lVar3 = param_1;
    if ((longlong)(ulonglong)uVar1 <= param_1) {
      if ((*(byte *)(param_2 + 7) & 1) == 0) {
        lVar3 = (longlong)(int)((uint)uVar1 - 1);
      }
      else {
        lVar3 = (longlong)((int)param_1 % (uint)uVar1);
        if (uVar1 == 0) {
          trap(0x1c00);
        }
        if (((ulonglong)uVar1 == 0xffffffffffffffff) && (param_1 == -0x80000000)) {
          trap(0x1800);
        }
      }
    }
  }
  return lVar3;
}



void proc_7F06F780(int param_1,float param_2)

{
  ushort uVar1;
  ushort *partdesc;
  int iVar2;
  float in_a1_lo;
  
  if (0.00000000 < in_a1_lo) {
    if (*(int *)(param_1 + 0x20) == 0) {
      *(undefined4 *)(param_1 + 0x54) = 0;
    }
    else {
      partdesc = **(ushort ***)(param_1 + 8);
      uVar1 = *partdesc;
      *(undefined4 *)(param_1 + 0x58) = *(undefined4 *)(param_1 + 0x28);
      *(undefined4 *)(param_1 + 0x5c) = *(undefined4 *)(param_1 + 0x2c);
      *(int *)(param_1 + 0x54) = *(int *)(param_1 + 0x20);
      *(undefined *)(param_1 + 0x25) = *(undefined *)(param_1 + 0x24);
      *(undefined2 *)(param_1 + 0x60) = *(undefined2 *)(param_1 + 0x30);
      *(undefined2 *)(param_1 + 0x62) = *(undefined2 *)(param_1 + 0x32);
      *(undefined4 *)(param_1 + 0x70) = *(undefined4 *)(param_1 + 0x40);
      *(undefined4 *)(param_1 + 0x74) = *(undefined4 *)(param_1 + 0x44);
      *(undefined4 *)(param_1 + 0x78) = *(undefined4 *)(param_1 + 0x48);
      *(undefined4 *)(param_1 + 0x7c) = *(undefined4 *)(param_1 + 0x4c);
      *(undefined4 *)(param_1 + 0x80) = *(undefined4 *)(param_1 + 0x50);
      *(undefined4 *)(param_1 + 0x6c) = *(undefined4 *)(param_1 + 0x3c);
      if ((uVar1 & 0xff) == 1) {
        iVar2 = extract_id_from_object_structure_microcode(param_1,partdesc);
        *(undefined *)(iVar2 + 2) = 1;
        *(undefined4 *)(iVar2 + 0x4c) = *(undefined4 *)(iVar2 + 0x34);
        *(undefined4 *)(iVar2 + 0x50) = *(undefined4 *)(iVar2 + 0x38);
        *(undefined4 *)(iVar2 + 0x54) = *(undefined4 *)(iVar2 + 0x3c);
        *(undefined4 *)(iVar2 + 0x40) = *(undefined4 *)(iVar2 + 0x24);
        *(undefined4 *)(iVar2 + 0x44) = *(undefined4 *)(iVar2 + 0x28);
        *(undefined4 *)(iVar2 + 0x48) = *(undefined4 *)(iVar2 + 0x2c);
      }
    }
  }
  else {
    *(undefined4 *)(param_1 + 0x54) = 0;
  }
  return;
}



void proc_7F06F878(int param_1,undefined4 param_2,undefined param_3,float param_4,float param_5,
                  undefined4 param_6)

{
  int iVar1;
  ushort *partdesc;
  bool bVar2;
  int iVar3;
  undefined8 extraout_a0;
  undefined8 extraout_a1;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  undefined4 in_stack_00000014;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack36;
  float fStack32;
  ushort *puStack16;
  
  iVar1 = *(int *)(param_1 + 0x20);
  if (*(int *)(param_1 + 0x54) == 0) {
    *(undefined4 *)(param_1 + 0x88) = 0;
    *(undefined4 *)(param_1 + 0x84) = 0;
  }
  else {
    *(undefined4 *)(param_1 + 0x88) = in_stack_00000014;
    *(undefined4 *)(param_1 + 0x8c) = 0;
    *(undefined4 *)(param_1 + 0x84) = 0x3f800000;
  }
  *(undefined4 *)(param_1 + 0x20) = param_2;
  *(undefined *)(param_1 + 0x24) = param_3;
  *(undefined4 *)(param_1 + 0x3c) = 0xbf800000;
  *(undefined4 *)(param_1 + 0x40) = param_6;
  *(undefined4 *)(param_1 + 0x4c) = 0;
  proc_7F06FF64(param_1,param_5);
  *(undefined *)(param_1 + 0x26) = 0;
  partdesc = **(ushort ***)(param_1 + 8);
  if ((*partdesc & 0xff) == 1) {
    puStack16 = *(ushort **)(partdesc + 2);
    iVar3 = extract_id_from_object_structure_microcode(param_1,partdesc);
    fStack52 = dword_80036244;
    fStack32 = *(float *)(param_1 + 0x14) * *(float *)(param_1 + 0xb8);
    fStack48 = dword_80036248;
    fStack44 = dword_8003624C;
    fVar4 = proc_7F06D3F4((uint)*puStack16,(longlong)*(char *)(param_1 + 0x24),
                          *(int *)(*(int *)(param_1 + 8) + 4),*(int *)(param_1 + 0x20),
                          (int)*(short *)(param_1 + 0x32),&fStack52);
    if (fStack32 != 1.00000000) {
      fStack52 = fStack52 * fStack32;
      fStack48 = fStack48 * fStack32;
      fStack44 = fStack44 * fStack32;
    }
    fStack36 = cosf(*(float *)(iVar3 + 0x14));
    fVar5 = sinf(*(float *)(iVar3 + 0x14));
    if (*(float *)(param_1 + 0x2c) == 0.00000000) {
      *(float *)(iVar3 + 0x34) = *(float *)(iVar3 + 8);
      *(undefined4 *)(iVar3 + 0x3c) = *(undefined4 *)(iVar3 + 0x10);
      *(float *)(iVar3 + 0x38) = *(float *)(iVar3 + 0xc) - *(float *)(iVar3 + 4);
      *(undefined4 *)(iVar3 + 0x30) = *(undefined4 *)(iVar3 + 0x14);
      *(float *)(iVar3 + 0x24) = fStack44 * fVar5 + *(float *)(iVar3 + 8) + fStack52 * fStack36;
      *(float *)(iVar3 + 0x28) = fStack48;
      *(float *)(iVar3 + 0x2c) = fStack44 * fStack36 + (*(float *)(iVar3 + 0x3c) - fStack52 * fVar5)
      ;
      fVar5 = flt_80054D40;
      if ((*(float *)(iVar3 + 0x18) == 0.00000000) &&
         (fVar4 = *(float *)(iVar3 + 0x30) + fVar4, bVar2 = flt_80054D40 <= fVar4,
         *(float *)(iVar3 + 0x20) = fVar4, bVar2)) {
        *(float *)(iVar3 + 0x20) = *(float *)(iVar3 + 0x20) - fVar5;
      }
      *(undefined *)(iVar3 + 1) = 1;
    }
    else {
      fVar7 = fStack44 * fVar5 + fStack52 * fStack36;
      fVar6 = fStack44 * fStack36 + -fStack52 * fVar5;
      fVar5 = *(float *)(param_1 + 0x2c);
      *(float *)(iVar3 + 0x24) =
           *(float *)(iVar3 + 8) + fVar7 * (1.00000000 - *(float *)(param_1 + 0x2c));
      *(float *)(iVar3 + 0x28) = fStack48;
      *(float *)(iVar3 + 0x2c) = *(float *)(iVar3 + 0x10) + fVar6 * (1.00000000 - fVar5);
      *(float *)(iVar3 + 0x34) = *(float *)(iVar3 + 0x24) - fVar7;
      fVar5 = *(float *)(iVar3 + 0xc) - *(float *)(iVar3 + 4);
      *(float *)(iVar3 + 0x38) =
           fVar5 - ((fStack48 - fVar5) * *(float *)(param_1 + 0x2c)) /
                   (1.00000000 - *(float *)(param_1 + 0x2c));
      *(float *)(iVar3 + 0x3c) = *(float *)(iVar3 + 0x2c) - fVar6;
      fVar5 = *(float *)(iVar3 + 0x14) - fVar4;
      if (fVar5 < 0.00000000) {
        fVar5 = fVar5 + flt_80054D44;
      }
      fVar6 = proc_7F06D0CC(*(float *)(iVar3 + 0x14),fVar5,extraout_a0,extraout_a1,
                            *(float *)(param_1 + 0x2c));
      fVar5 = flt_80054D48;
      *(float *)(iVar3 + 0x30) = fVar6;
      if (*(float *)(iVar3 + 0x18) == 0.00000000) {
        fVar4 = *(float *)(iVar3 + 0x30) + fVar4;
        *(float *)(iVar3 + 0x20) = fVar4;
        if (fVar5 <= fVar4) {
          *(float *)(iVar3 + 0x20) = *(float *)(iVar3 + 0x20) - fVar5;
          *(undefined *)(iVar3 + 1) = 1;
        }
        else {
          *(undefined *)(iVar3 + 1) = 1;
        }
      }
      else {
        *(undefined *)(iVar3 + 1) = 1;
      }
    }
    if (iVar1 == 0) {
      *(undefined4 *)(iVar3 + 0x38) = *(undefined4 *)(iVar3 + 0x28);
    }
  }
  return;
}



void proc_7F06FC4C(int param_1,undefined4 param_2,undefined param_3,float param_4,undefined4 param_5
                  ,float param_6,int param_7)

{
  float extraout_f12;
  int in_stack_00000018;
  
  if (in_stack_00000018 != 0) {
    proc_7F06F780(param_1,param_4);
    param_4 = extraout_f12;
  }
  proc_7F06F878(param_1,param_2,param_3,param_4,param_5,param_7);
  return;
}



void proc_7F06FCA8(int param_1,undefined4 param_2,undefined param_3,float param_4,undefined4 param_5
                  ,float param_6)

{
  float extraout_f12;
  undefined4 in_stack_00000010;
  
  proc_7F06F780(param_1,param_4);
  proc_7F06F878(param_1,param_2,param_3,extraout_f12,param_5,in_stack_00000010);
  return;
}



void proc_7F06FCFC(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  
  uVar1 = *param_2;
  uVar2 = param_2[1];
  uVar3 = param_2[2];
  uVar4 = param_2[3];
  uVar5 = param_2[4];
  uVar6 = param_2[5];
  uVar7 = param_2[6];
  uVar8 = param_2[7];
  puVar11 = param_1;
  puVar9 = param_2;
  do {
    puVar12 = puVar9;
    puVar10 = puVar11;
    puVar11 = puVar10 + 3;
    *puVar12 = *puVar10;
    puVar12[1] = puVar10[1];
    puVar12[2] = puVar10[2];
    puVar9 = puVar12 + 3;
  } while (puVar11 != param_1 + 0x2d);
  puVar12[3] = *puVar11;
  puVar12[4] = puVar10[4];
  *param_2 = uVar1;
  param_2[1] = uVar2;
  param_2[2] = uVar3;
  param_2[3] = uVar4;
  param_2[4] = uVar5;
  param_2[5] = uVar6;
  param_2[6] = uVar7;
  param_2[7] = uVar8;
  return;
}



void proc_7F06FDCC(int param_1,undefined4 param_2,undefined4 param_3)

{
  *(undefined *)(param_1 + 0x26) = 1;
  *(undefined4 *)(param_1 + 0x90) = param_2;
  *(undefined4 *)(param_1 + 0x94) = param_3;
  return;
}



void proc_7F06FDE8(int param_1,float param_2)

{
  float in_a1_lo;
  
  if ((*(int *)(param_1 + 0x20) != 0) &&
     (in_a1_lo < (float)((uint)*(ushort *)(*(int *)(param_1 + 0x20) + 4) - 1))) {
    *(float *)(param_1 + 0x3c) = in_a1_lo;
    return;
  }
  *(undefined4 *)(param_1 + 0x3c) = 0xbf800000;
  return;
}



void proc_7F06FE3C(int param_1,undefined4 param_2)

{
  *(undefined4 *)(param_1 + 0x98) = param_2;
  return;
}



void proc_7F06FE44(int param_1,undefined4 param_2)

{
  *(undefined4 *)(param_1 + 0x9c) = param_2;
  return;
}



void proc_7F06FE4C(int param_1,undefined4 param_2,float param_3)

{
  float in_a2_lo;
  
  if (in_a2_lo <= 0.00000000) {
    *(undefined4 *)(param_1 + 0x40) = param_2;
    *(undefined4 *)(param_1 + 0x4c) = 0;
    return;
  }
  *(float *)(param_1 + 0x4c) = in_a2_lo;
  *(undefined4 *)(param_1 + 0x44) = param_2;
  *(undefined4 *)(param_1 + 0x50) = 0;
  *(undefined4 *)(param_1 + 0x48) = *(undefined4 *)(param_1 + 0x40);
  return;
}



void proc_7F06FE90(int param_1,float param_2,float param_3)

{
  float in_a1_lo;
  float in_a2_lo;
  float fVar1;
  float fVar2;
  
  fVar1 = *(float *)(param_1 + 0x28);
  if (fVar1 <= in_a1_lo) {
    fVar1 = in_a1_lo - fVar1;
  }
  else {
    fVar2 = (float)(uint)*(ushort *)(*(int *)(param_1 + 0x20) + 4);
    if (false) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    fVar1 = (fVar2 - fVar1) + in_a1_lo;
  }
  proc_7F06FE4C(param_1,*(float *)(param_1 + 0x40) + (fVar1 + fVar1) / in_a2_lo,in_a1_lo);
  return;
}



void proc_7F06FF18(int param_1,f32 param_2,f32 param_3)

{
  undefined4 in_a1_lo;
  float in_a2_lo;
  
  if (in_a2_lo <= 0.00000000) {
    *(undefined4 *)(param_1 + 0xa4) = in_a1_lo;
    *(undefined4 *)(param_1 + 0xb0) = 0;
    return;
  }
  *(float *)(param_1 + 0xb0) = in_a2_lo;
  *(undefined4 *)(param_1 + 0xa8) = in_a1_lo;
  *(undefined4 *)(param_1 + 0xb4) = 0;
  *(undefined4 *)(param_1 + 0xac) = *(undefined4 *)(param_1 + 0xa4);
  return;
}



void proc_7F06FF5C(int param_1,undefined4 param_2)

{
  *(undefined4 *)(param_1 + 0xa0) = param_2;
  return;
}



void proc_7F06FF64(int param_1,float param_2)

{
  short sVar1;
  bool bVar2;
  int iVar4;
  longlong lVar3;
  float in_a1_lo;
  int iVar5;
  float fVar6;
  float extraout_f12;
  float extraout_f12_00;
  
  iVar4 = proc_7F05C3D8(in_a1_lo);
  bVar2 = 0.00000000 <= *(float *)(param_1 + 0x40);
  iVar5 = iVar4 + -1;
  if (bVar2) {
    iVar5 = iVar4 + 1;
  }
  lVar3 = proc_7F06F66C((longlong)iVar4,*(int *)(param_1 + 0x20),extraout_f12);
  *(undefined2 *)(param_1 + 0x30) = (short)lVar3;
  lVar3 = proc_7F06F66C((longlong)iVar5,*(int *)(param_1 + 0x20),extraout_f12_00);
  *(undefined2 *)(param_1 + 0x32) = (short)lVar3;
  sVar1 = *(short *)(param_1 + 0x30);
  if (*(short *)(param_1 + 0x32) == sVar1) {
    *(undefined4 *)(param_1 + 0x2c) = 0;
    *(float *)(param_1 + 0x28) = (float)(int)sVar1;
  }
  else {
    if (bVar2) {
      *(float *)(param_1 + 0x2c) = in_a1_lo - (float)iVar4;
      *(float *)(param_1 + 0x28) = (float)(int)sVar1 + (in_a1_lo - (float)iVar4);
    }
    else {
      fVar6 = 1.00000000 - (in_a1_lo - (float)iVar5);
      *(float *)(param_1 + 0x2c) = fVar6;
      *(float *)(param_1 + 0x28) = (float)(int)*(short *)(param_1 + 0x32) + (1.00000000 - fVar6);
    }
  }
  return;
}



void proc_7F070090(int param_1,float param_2,float param_3)

{
  short sVar1;
  bool bVar2;
  int iVar4;
  longlong lVar3;
  float in_a1_lo;
  float in_a2_lo;
  int iVar5;
  float fVar6;
  float extraout_f12;
  float extraout_f12_00;
  
  proc_7F06FF64(param_1,in_a1_lo);
  if (*(int *)(param_1 + 0x54) != 0) {
    iVar4 = proc_7F05C3D8(in_a2_lo);
    bVar2 = 0.00000000 <= *(float *)(param_1 + 0x70);
    iVar5 = iVar4 + -1;
    if (bVar2) {
      iVar5 = iVar4 + 1;
    }
    lVar3 = proc_7F06F66C((longlong)iVar4,*(int *)(param_1 + 0x54),extraout_f12);
    *(undefined2 *)(param_1 + 0x60) = (short)lVar3;
    lVar3 = proc_7F06F66C((longlong)iVar5,*(int *)(param_1 + 0x54),extraout_f12_00);
    *(undefined2 *)(param_1 + 0x62) = (short)lVar3;
    sVar1 = *(short *)(param_1 + 0x60);
    if (*(short *)(param_1 + 0x62) == sVar1) {
      *(undefined4 *)(param_1 + 0x5c) = 0;
      *(float *)(param_1 + 0x58) = (float)(int)sVar1;
    }
    else {
      if (bVar2) {
        *(float *)(param_1 + 0x5c) = in_a2_lo - (float)iVar4;
        *(float *)(param_1 + 0x58) = (float)(int)sVar1 + (in_a2_lo - (float)iVar4);
      }
      else {
        fVar6 = 1.00000000 - (in_a2_lo - (float)iVar5);
        *(float *)(param_1 + 0x5c) = fVar6;
        *(float *)(param_1 + 0x58) = (float)(int)*(short *)(param_1 + 0x62) + (1.00000000 - fVar6);
      }
    }
  }
  return;
}



void proc_7F0701D4(undefined4 param_1)

{
  dword_80036250 = param_1;
  return;
}



undefined4 proc_7F0701E0(void)

{
  return dword_80036250;
}



void proc_7F0701EC(int param_1,float param_2,float param_3,float param_4,float param_5)

{
  short sVar1;
  ushort *partdesc;
  ushort *puVar2;
  bool bVar3;
  float fVar4;
  char *pcVar6;
  int iVar7;
  longlong lVar5;
  int iVar8;
  float in_a3_lo;
  char cVar9;
  longlong lVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f14;
  float fVar15;
  float fVar16;
  float in_stack_00000010;
  float fStack96;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack76;
  float fStack72;
  float fStack68;
  int iStack64;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack28;
  int iStack24;
  uint uStack20;
  
  partdesc = **(ushort ***)(param_1 + 8);
  if ((*partdesc & 0xff) != 1) {
    proc_7F070090(param_1,param_2,param_3);
    return;
  }
  puVar2 = *(ushort **)(partdesc + 2);
  pcVar6 = (char *)extract_id_from_object_structure_microcode(param_1,partdesc);
  if (*pcVar6 != '\0') {
    proc_7F070090(param_1,extraout_f12,extraout_f14);
    return;
  }
  uStack20 = (uint)*puVar2;
  iStack24 = *(int *)(*(int *)(param_1 + 8) + 4);
  fStack28 = *(float *)(param_1 + 0x14) * *(float *)(param_1 + 0xb8);
  fStack48 = DAT_80036254;
  fStack44 = DAT_80036258;
  fStack40 = DAT_8003625c;
  fStack76 = *(float *)(pcVar6 + 0x34);
  fStack72 = *(float *)(pcVar6 + 0x38);
  fStack68 = *(float *)(pcVar6 + 0x3c);
  fStack92 = *(float *)(pcVar6 + 0x24);
  fVar15 = *(float *)(pcVar6 + 0x30);
  fStack88 = *(float *)(pcVar6 + 0x28);
  fStack84 = *(float *)(pcVar6 + 0x2c);
  fStack96 = *(float *)(pcVar6 + 0x20);
  cVar9 = pcVar6[1];
  fVar16 = *(float *)(param_1 + 0x40);
  if (fVar16 < 0.00000000) {
    fVar16 = -fVar16;
    fVar11 = *(float *)(param_1 + 0x70);
  }
  else {
    fVar11 = *(float *)(param_1 + 0x70);
  }
  if (fVar11 < 0.00000000) {
    fVar11 = -fVar11;
  }
  bVar3 = param_4 <= param_5;
  if (bVar3) {
    iVar7 = proc_7F05C3D8(param_4);
    iVar7 += 1;
    iStack64 = proc_7F05C3D8(param_5);
    fVar13 = extraout_f12_00;
  }
  else {
    iVar7 = proc_7F05C4B8(param_4);
    iVar7 += -1;
    iStack64 = proc_7F05C4B8(param_5);
    fVar13 = extraout_f12_01;
  }
  fVar4 = flt_80054D4C;
  lVar10 = (longlong)iVar7;
LAB_7f070388:
  if (bVar3) {
    if ((longlong)iStack64 < lVar10) goto LAB_7f070860;
    iVar7 = *(int *)(param_1 + 0x20);
  }
  else {
    if (lVar10 < (longlong)iStack64) goto LAB_7f070860;
    iVar7 = *(int *)(param_1 + 0x20);
  }
  lVar5 = proc_7F06F66C(lVar10,iVar7,fVar13);
  *(undefined2 *)(param_1 + 0x30) = (short)lVar5;
  if (cVar9 == '\0') {
    fVar13 = proc_7F06D3F4(uStack20,(longlong)*(char *)(param_1 + 0x24),iStack24,
                           *(int *)(param_1 + 0x20),(int)lVar5,&fStack48);
    if (fStack28 != 1.00000000) {
      fStack48 = fStack48 * fStack28;
      fStack44 = fStack44 * fStack28;
      fStack40 = fStack40 * fStack28;
    }
    if (!bVar3) {
      fStack48 = -fStack48;
      fStack40 = -fStack40;
      if (0.00000000 < fVar13) {
        fVar13 = fVar4 - fVar13;
      }
    }
    fVar12 = cosf(*(float *)(pcVar6 + 0x14));
    fVar14 = sinf(*(float *)(pcVar6 + 0x14));
    fStack76 = fStack76 + fStack48 * fVar12 + fStack40 * fVar14;
    fStack72 = fStack44;
    fStack68 = fStack68 + -fStack48 * fVar14 + fStack40 * fVar12;
    fVar12 = extraout_f12_03;
    fVar14 = fVar15;
    if ((*(float *)(pcVar6 + 0x18) == 0.00000000) &&
       (fVar14 = fVar15 + fVar13, fVar12 = extraout_f12_03, fVar4 <= fVar14)) {
      fVar12 = extraout_f12_03;
      fVar14 = fVar14 - fVar4;
    }
  }
  else {
    fStack76 = fStack92;
    fStack72 = fStack88;
    fStack68 = fStack84;
    fVar12 = extraout_f12_02;
    fVar14 = fStack96;
    if (*(float *)(pcVar6 + 0x18) != 0.00000000) {
      fVar12 = extraout_f12_02;
      fVar14 = fVar15;
    }
  }
  fVar15 = fVar14;
  if (bVar3) {
    iVar7 = (int)lVar10 + 1;
  }
  else {
    iVar7 = (int)lVar10 + -1;
  }
  lVar10 = (longlong)iVar7;
  lVar5 = proc_7F06F66C(lVar10,*(int *)(param_1 + 0x20),fVar12);
  *(undefined2 *)(param_1 + 0x32) = (short)lVar5;
  fVar13 = extraout_f12_04;
  if (*(short *)(param_1 + 0x30) != *(short *)(param_1 + 0x32)) {
    cVar9 = 1;
    fVar12 = proc_7F06D3F4(uStack20,(longlong)*(char *)(param_1 + 0x24),iStack24,
                           *(int *)(param_1 + 0x20),(int)lVar5,&fStack48);
    if (fStack28 != 1.00000000) {
      fStack48 = fStack48 * fStack28;
      fStack44 = fStack44 * fStack28;
      fStack40 = fStack40 * fStack28;
    }
    if (!bVar3) {
      fStack48 = -fStack48;
      fStack40 = -fStack40;
      if (0.00000000 < fVar12) {
        fVar12 = fVar4 - fVar12;
      }
    }
    fVar13 = cosf(*(float *)(pcVar6 + 0x30));
    fVar14 = sinf(*(float *)(pcVar6 + 0x30));
    if ((dword_80036250 == 0) || (*(int *)(param_1 + 0x54) == 0)) {
      fStack92 = fStack40 * fVar14 + fStack76 + fStack48 * fVar13;
      fStack84 = fStack40 * fVar13 + (fStack68 - fStack48 * fVar14);
    }
    else {
      fStack92 = fStack40 * fVar14 + fStack48 * fVar13;
      fStack84 = fStack40 * fVar13 + -fStack48 * fVar14;
      if (0.00000000 < fVar16) {
        fVar14 = *(float *)(param_1 + 0x84);
        fVar13 = fVar14 - *(float *)(param_1 + 0xa4) / (fVar16 * *(float *)(param_1 + 0x88));
        if (fVar13 < 0.00000000) {
          fVar14 = fVar14 + 0.00000000;
        }
        else {
          fVar14 = fVar14 + fVar13;
        }
        fVar13 = (((*(float *)(pcVar6 + 0x40) - *(float *)(pcVar6 + 0x4c)) * fVar11) / fVar16 -
                 fStack92) * fVar14 * 0.50000000;
        fVar14 = (((*(float *)(pcVar6 + 0x48) - *(float *)(pcVar6 + 0x54)) * fVar11) / fVar16 -
                 fStack84) * fVar14 * 0.50000000;
      }
      else {
        fVar13 = (*(float *)(pcVar6 + 0x40) - *(float *)(pcVar6 + 0x4c)) *
                 *(float *)(param_1 + 0x84);
        fVar14 = (*(float *)(pcVar6 + 0x48) - *(float *)(pcVar6 + 0x54)) *
                 *(float *)(param_1 + 0x84);
      }
      fStack84 = fStack84 + fVar14;
      fStack92 = fStack92 + fVar13;
      fStack92 = fStack92 + fStack76;
      fStack84 = fStack84 + fStack68;
    }
    fStack88 = fStack44;
    fVar13 = *(float *)(pcVar6 + 0x5c);
    if (0.00000000 < fVar13) {
      if (0.00000000 < fVar16) {
        fVar14 = 1.00000000 / fVar16;
        if (fVar13 < fVar14) {
          *(undefined4 *)(pcVar6 + 0x5c) = 0;
        }
        else {
          *(float *)(pcVar6 + 0x5c) = fVar13 - fVar14;
          fVar13 = fVar14;
        }
        fVar12 = fVar12 + *(float *)(pcVar6 + 0x58) * fVar13;
        if (fVar12 < 0.00000000) {
          fVar12 = fVar12 + fVar4;
        }
        else {
          if (fVar12 < fVar4) {
            fVar14 = *(float *)(pcVar6 + 0x18);
            goto LAB_7f070828;
          }
          fVar12 = fVar12 - fVar4;
        }
        fVar14 = *(float *)(pcVar6 + 0x18);
      }
      else {
        fVar14 = *(float *)(pcVar6 + 0x18);
        fVar13 = fStack40;
      }
    }
    else {
      fVar14 = *(float *)(pcVar6 + 0x18);
      fVar13 = fStack40;
    }
LAB_7f070828:
    if ((fVar14 == 0.00000000) && (fStack96 = fVar15 + fVar12, fVar4 <= fStack96)) {
      fStack96 = fStack96 - fVar4;
    }
  }
  goto LAB_7f070388;
LAB_7f070860:
  *(float *)(pcVar6 + 0x34) = fStack76;
  *(float *)(pcVar6 + 0x38) = fStack72;
  *(float *)(pcVar6 + 0x30) = fVar15;
  *(float *)(pcVar6 + 0x3c) = fStack68;
  *(float *)(pcVar6 + 0x24) = fStack92;
  *(float *)(pcVar6 + 0x28) = fStack88;
  *(float *)(pcVar6 + 0x2c) = fStack84;
  *(float *)(pcVar6 + 0x20) = fStack96;
  sVar1 = *(short *)(param_1 + 0x30);
  if (*(short *)(param_1 + 0x32) == sVar1) {
    *(undefined4 *)(param_1 + 0x2c) = 0;
    *(float *)(param_1 + 0x28) = (float)(int)sVar1;
  }
  else {
    if (bVar3) {
      *(float *)(param_1 + 0x2c) = param_5 - (float)iStack64;
      *(float *)(param_1 + 0x28) = (float)(int)sVar1 + (param_5 - (float)iStack64);
    }
    else {
      *(float *)(param_1 + 0x2c) = (float)iStack64 - param_5;
      *(float *)(param_1 + 0x28) =
           (float)(int)*(short *)(param_1 + 0x32) + (1.00000000 - ((float)iStack64 - param_5));
    }
  }
  if (*(int *)(param_1 + 0x54) == 0) {
    pcVar6[2] = '\0';
    return;
  }
  iVar7 = proc_7F05C3D8(in_a3_lo);
  iVar8 = proc_7F05C3D8(in_stack_00000010);
  if ((bVar3) && (iVar7 < iVar8)) {
    cVar9 = pcVar6[2];
  }
  else {
    if ((bVar3) || (iVar7 <= iVar8)) goto LAB_7f070a0c;
    cVar9 = pcVar6[2];
  }
  if (cVar9 == '\0') {
    *(undefined4 *)(pcVar6 + 0x50) = *(undefined4 *)(pcVar6 + 0x38);
  }
  else {
    *(undefined4 *)(pcVar6 + 0x50) = *(undefined4 *)(pcVar6 + 0x44);
  }
  lVar10 = proc_7F06F66C((longlong)iVar8,*(int *)(param_1 + 0x54),extraout_f12_05);
  *(undefined2 *)(param_1 + 0x60) = (short)lVar10;
  lVar10 = proc_7F06F66C((longlong)(iVar8 + 1),*(int *)(param_1 + 0x54),extraout_f12_06);
  *(undefined2 *)(param_1 + 0x62) = (short)lVar10;
  proc_7F06D3F4(uStack20,(longlong)*(char *)(param_1 + 0x25),iStack24,*(int *)(param_1 + 0x54),
                (int)lVar10,&fStack48);
  if (fStack28 != 1.00000000) {
    fStack44 = fStack44 * fStack28;
  }
  pcVar6[2] = '\x01';
  *(float *)(pcVar6 + 0x44) = fStack44;
LAB_7f070a0c:
  if (bVar3) {
    *(float *)(param_1 + 0x5c) = in_stack_00000010 - (float)iVar8;
    *(float *)(param_1 + 0x58) =
         (float)(int)*(short *)(param_1 + 0x60) + (in_stack_00000010 - (float)iVar8);
  }
  else {
    fVar15 = 1.00000000 - (in_stack_00000010 - (float)iVar8);
    *(float *)(param_1 + 0x5c) = fVar15;
    *(float *)(param_1 + 0x58) = (float)(int)*(short *)(param_1 + 0x62) + (1.00000000 - fVar15);
  }
  return;
}



void proc_7F070AEC(int param_1,int param_2,int param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float in_f14;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  
  fVar8 = *(float *)(param_1 + 0x28);
  if (0 < param_2) {
    if (0 < param_2) {
      fVar3 = *(float *)(param_1 + 0xb0);
      do {
        if (0.00000000 < fVar3) {
          *(float *)(param_1 + 0xb4) = *(float *)(param_1 + 0xb4) + 1.00000000;
          if (*(float *)(param_1 + 0xb4) < fVar3) {
            *(float *)(param_1 + 0xa4) =
                 *(float *)(param_1 + 0xac) +
                 ((*(float *)(param_1 + 0xa8) - *(float *)(param_1 + 0xac)) *
                 *(float *)(param_1 + 0xb4)) / fVar3;
          }
          else {
            *(undefined4 *)(param_1 + 0xb0) = 0;
            *(undefined4 *)(param_1 + 0xa4) = *(undefined4 *)(param_1 + 0xa8);
          }
          fVar3 = *(float *)(param_1 + 0x88);
        }
        else {
          fVar3 = *(float *)(param_1 + 0x88);
        }
        fVar4 = *(float *)(param_1 + 0xa4);
        if (0.00000000 < fVar3) {
          *(float *)(param_1 + 0x8c) = *(float *)(param_1 + 0x8c) + fVar4;
          fVar3 = *(float *)(param_1 + 0x8c);
          if (fVar3 == 0.00000000) {
            fVar4 = *(float *)(param_1 + 0xa4);
            *(undefined4 *)(param_1 + 0x84) = 0x3f800000;
          }
          else {
            fVar1 = *(float *)(param_1 + 0x88);
            if (fVar3 < fVar1) {
              fVar4 = *(float *)(param_1 + 0xa4);
              *(float *)(param_1 + 0x84) = (fVar1 - fVar3) / fVar1;
            }
            else {
              *(undefined4 *)(param_1 + 0x88) = 0;
              *(undefined4 *)(param_1 + 0x84) = 0;
              *(undefined4 *)(param_1 + 0x54) = 0;
              fVar4 = *(float *)(param_1 + 0xa4);
            }
          }
          in_f12 = *(float *)(param_1 + 0x4c);
        }
        else {
          in_f12 = *(float *)(param_1 + 0x4c);
        }
        if (0.00000000 < in_f12) {
          *(float *)(param_1 + 0x50) = *(float *)(param_1 + 0x50) + fVar4;
          in_f14 = *(float *)(param_1 + 0x50);
          if (in_f14 < in_f12) {
            fVar4 = *(float *)(param_1 + 0xa4);
            *(float *)(param_1 + 0x40) =
                 *(float *)(param_1 + 0x48) +
                 ((*(float *)(param_1 + 0x44) - *(float *)(param_1 + 0x48)) * in_f14) / in_f12;
          }
          else {
            *(undefined4 *)(param_1 + 0x4c) = 0;
            fVar4 = *(float *)(param_1 + 0xa4);
            *(undefined4 *)(param_1 + 0x40) = *(undefined4 *)(param_1 + 0x44);
          }
          fVar3 = *(float *)(param_1 + 0x40);
        }
        else {
          fVar3 = *(float *)(param_1 + 0x40);
        }
        fVar8 = fVar8 + fVar4 * fVar3;
        if ((*(int *)(param_1 + 0x54) != 0) &&
           (in_f12 = *(float *)(param_1 + 0x7c), 0.00000000 < in_f12)) {
          *(float *)(param_1 + 0x80) = *(float *)(param_1 + 0x80) + fVar4;
          in_f14 = *(float *)(param_1 + 0x80);
          if (in_f14 < in_f12) {
            *(float *)(param_1 + 0x70) =
                 *(float *)(param_1 + 0x78) +
                 ((*(float *)(param_1 + 0x74) - *(float *)(param_1 + 0x78)) * in_f14) / in_f12;
          }
          else {
            *(undefined4 *)(param_1 + 0x7c) = 0;
            *(undefined4 *)(param_1 + 0x70) = *(undefined4 *)(param_1 + 0x74);
          }
        }
        if (*(char *)(param_1 + 0x26) != '\0') {
          fVar10 = *(float *)(param_1 + 0x3c);
          fVar5 = *(float *)(param_1 + 0x90);
          fVar2 = (float)((uint)*(ushort *)(*(int *)(param_1 + 0x20) + 4) - 1);
          fVar4 = fVar10;
          fVar1 = fVar5;
          fVar11 = fVar5;
          fVar9 = fVar2;
          if (fVar3 < 0.00000000) {
            fVar4 = fVar5;
            fVar1 = fVar10;
            fVar11 = fVar2;
            fVar9 = fVar5;
          }
          if ((0.00000000 <= fVar10) && (fVar10 < fVar2)) {
            fVar9 = fVar4;
            fVar11 = fVar1;
          }
          if ((fVar3 < 0.00000000) || (fVar8 < fVar9)) {
            if ((0.00000000 <= fVar3) || (fVar9 < fVar8)) goto LAB_7f070ec0;
            uVar6 = *(undefined4 *)(param_1 + 0x4c);
          }
          else {
            uVar6 = *(undefined4 *)(param_1 + 0x4c);
          }
          uVar12 = *(undefined4 *)(param_1 + 0x44);
          uVar13 = *(undefined4 *)(param_1 + 0x48);
          uVar7 = *(undefined4 *)(param_1 + 0x50);
          if (param_3 == 0) {
            proc_7F070090(param_1,in_f12,in_f14);
            fVar3 = extraout_f12_00;
            fVar4 = extraout_f14_00;
          }
          else {
            proc_7F0701EC(param_1,in_f12,in_f14,*(float *)(param_1 + 0x28),fVar9);
            fVar3 = extraout_f12;
            fVar4 = extraout_f14;
          }
          proc_7F06FCA8(param_1,*(undefined4 *)(param_1 + 0x20),*(undefined *)(param_1 + 0x24),fVar3
                        ,fVar11,fVar4);
          *(undefined *)(param_1 + 0x26) = 1;
          *(float *)(param_1 + 0x3c) = fVar10;
          *(undefined4 *)(param_1 + 0x44) = uVar12;
          *(undefined4 *)(param_1 + 0x48) = uVar13;
          *(undefined4 *)(param_1 + 0x4c) = uVar6;
          *(undefined4 *)(param_1 + 0x50) = uVar7;
          fVar8 = (fVar11 + fVar8) - fVar9;
          in_f12 = extraout_f12_01;
          in_f14 = extraout_f14_01;
          if (*(code **)(param_1 + 0x98) != NULL) {
            (**(code **)(param_1 + 0x98))();
            in_f12 = extraout_f12_02;
            in_f14 = extraout_f14_02;
          }
        }
LAB_7f070ec0:
        param_2 += -1;
        if (param_2 < 1) break;
        fVar3 = *(float *)(param_1 + 0xb0);
      } while( true );
    }
    if (param_3 == 0) {
      if (*(int *)(param_1 + 0x54) == 0) {
        proc_7F070090(param_1,in_f12,in_f14);
      }
      else {
        proc_7F070090(param_1,in_f12,in_f14);
      }
    }
    else {
      if (*(int *)(param_1 + 0x54) == 0) {
        proc_7F0701EC(param_1,in_f12,in_f14,*(float *)(param_1 + 0x28),fVar8);
      }
      else {
        proc_7F0701EC(param_1,in_f12,in_f14,*(float *)(param_1 + 0x28),fVar8);
      }
    }
  }
  return;
}



void proc_7F070F80(int param_1)

{
  undefined4 *puVar1;
  
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0;
  *puVar1 = 0xe7000000;
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0;
  *puVar1 = 0xba001402;
  if (*(int *)(param_1 + 4) == 0) {
    puVar1 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
    puVar1[1] = 0x552048;
    *puVar1 = 0xb900031d;
  }
  else {
    puVar1 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
    *puVar1 = 0xb900031d;
    puVar1[1] = 0x552078;
  }
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0xff33ffff;
  *puVar1 = 0xfc121824;
  return;
}



void proc_7F071030(int param_1,longlong param_2)

{
  int iVar1;
  uint uVar2;
  undefined4 *puVar3;
  
  iVar1 = *(int *)(param_1 + 0x30);
  if (iVar1 == 7) {
    if (param_2 != 0) {
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      uVar2 = *(uint *)(param_1 + 0x38);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xf8000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      uVar2 = *(uint *)(param_1 + 0x34);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xfb000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  0xff;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x5ffedbf8;
      *puVar3 = 0xfc159804;
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc4112078;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc4112048;
      *puVar3 = 0xb900031d;
      return;
    }
    if (*(int *)(param_1 + 4) != 0) {
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xb900031d;
      puVar3[1] = 0xc41049d8;
      return;
    }
    puVar3 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
    puVar3[1] = 0xc41041c8;
    *puVar3 = 0xb900031d;
    return;
  }
  if (iVar1 == 8) {
    if (param_2 != 0) {
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      uVar2 = *(uint *)(param_1 + 0x38);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xf8000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      uVar2 = *(uint *)(param_1 + 0x34);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xfb000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x5ffefff8;
      *puVar3 = 0xfc159a04;
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc41049d8;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc41041c8;
      *puVar3 = 0xb900031d;
      return;
    }
  }
  else {
    if (iVar1 == 9) {
      if ((*(uint *)(param_1 + 0x34) & 0xff) != 0) {
        if (param_2 == 0) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          *puVar3 = 0xfa000000;
          puVar3[1] = *(uint *)(param_1 + 0x34) >> 8 & 0xff;
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          puVar3[1] = 0x1fccdff8;
          *puVar3 = 0xfc26c204;
          if (*(int *)(param_1 + 4) != 0) {
            puVar3 = *(undefined4 **)(param_1 + 0xc);
            *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
            *puVar3 = 0xb900031d;
            puVar3[1] = 0xc4113078;
            return;
          }
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          puVar3[1] = 0xc4113048;
          *puVar3 = 0xb900031d;
          return;
        }
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        uVar2 = *(uint *)(param_1 + 0x38);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0;
        *puVar3 = 0xe7000000;
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0x100000;
        *puVar3 = 0xba001402;
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xf8000000;
        puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                    uVar2 & 0xff;
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xfb000000;
        puVar3[1] = *(uint *)(param_1 + 0x34) & 0xff;
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0x1ffcfbf8;
        *puVar3 = 0xfc26e804;
        if (*(int *)(param_1 + 4) != 0) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          *puVar3 = 0xb900031d;
          puVar3[1] = 0xc4113078;
          return;
        }
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0xc4113048;
        *puVar3 = 0xb900031d;
        return;
      }
      if (param_2 == 0) {
        if (*(int *)(param_1 + 4) != 0) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          *puVar3 = 0xb900031d;
          puVar3[1] = 0xc41049d8;
          return;
        }
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0xc41041c8;
        *puVar3 = 0xb900031d;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      uVar2 = *(uint *)(param_1 + 0x38);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xf8000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xffffffff;
      *puVar3 = 0xfb000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xfa000000;
      puVar3[1] = *(uint *)(param_1 + 0x34) >> 8 & 0xff;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x1f1093fb;
      *puVar3 = 0xfc26a004;
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc4112078;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc4112048;
      *puVar3 = 0xb900031d;
      return;
    }
    if (iVar1 == 4) {
      if (param_2 == 0) {
        if (*(int *)(param_1 + 4) != 0) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          *puVar3 = 0xb900031d;
          puVar3[1] = 0xc41049d8;
          return;
        }
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0xc41041c8;
        *puVar3 = 0xb900031d;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      uVar2 = *(uint *)(param_1 + 0x34);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xf8000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x1f1093ff;
      *puVar3 = 0xfc26a004;
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc4112078;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc4112048;
      *puVar3 = 0xb900031d;
      return;
    }
    if (iVar1 == 5) {
      if (param_2 == 0) {
        if ((*(uint *)(param_1 + 0x34) & 0xff) < 0xff) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          puVar3[1] = 0x1f10ffff;
          *puVar3 = 0xfc269a04;
          return;
        }
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xfc26a004;
        puVar3[1] = 0x1f1093ff;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      uVar2 = *(uint *)(param_1 + 0x38);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xf8000000;
      puVar3[1] = uVar2 & 0xff000000 | (uVar2 >> 0x10 & 0xff) << 0x10 | (uVar2 >> 8 & 0xff) << 8 |
                  uVar2 & 0xff;
      uVar2 = *(uint *)(param_1 + 0x34);
      if ((uVar2 & 0xff) < 0xff) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xfb000000;
        puVar3[1] = uVar2 & 0xff | 0xffffff00;
        if ((*(uint *)(param_1 + 0x34) & 0xff00) == 0) {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          *puVar3 = 0xfc26ea04;
          puVar3[1] = 0x1f10ffff;
        }
        else {
          puVar3 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
          puVar3[1] = 0x1f10cfff;
          *puVar3 = 0xfc26ea04;
        }
      }
      else {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        puVar3[1] = 0x1f1093ff;
        *puVar3 = 0xfc26a004;
      }
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc41049d8;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc41041c8;
      *puVar3 = 0xb900031d;
      return;
    }
    if (param_2 != 0) {
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0;
      *puVar3 = 0xe7000000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x100000;
      *puVar3 = 0xba001402;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x1f1093ff;
      *puVar3 = 0xfc26a004;
      if (*(int *)(param_1 + 4) != 0) {
        puVar3 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
        *puVar3 = 0xb900031d;
        puVar3[1] = 0xc192078;
        return;
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0xc192048;
      *puVar3 = 0xb900031d;
      return;
    }
    if (*(int *)(param_1 + 4) != 0) {
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xb900031d;
      puVar3[1] = 0xc1849d8;
      return;
    }
    puVar3 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
    puVar3[1] = 0xc1841c8;
    *puVar3 = 0xb900031d;
  }
  return;
}



void proc_7F071B44(int param_1,longlong param_2)

{
  int iVar1;
  undefined4 *puVar2;
  uint uVar3;
  
  iVar1 = *(int *)(param_1 + 0x30);
  if (iVar1 == 7) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0;
    *puVar2 = 0xe7000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x100000;
    *puVar2 = 0xba001402;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x38);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xf8000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    uVar3 = *(uint *)(param_1 + 0x34);
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xfb000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                0xff;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x5ffedbf8;
    *puVar2 = 0xfc159804;
    if (param_2 == 0) {
      if (*(int *)(param_1 + 4) != 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xb900031d;
        puVar2[1] = 0xc41049d8;
        return;
      }
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0xc41041c8;
      *puVar2 = 0xb900031d;
      return;
    }
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc4112078;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc4112048;
    *puVar2 = 0xb900031d;
    return;
  }
  if (iVar1 == 8) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0;
    *puVar2 = 0xe7000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x100000;
    *puVar2 = 0xba001402;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x38);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xf8000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x34);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xfb000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x5ffefff8;
    *puVar2 = 0xfc159a04;
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc41049d8;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc41041c8;
    *puVar2 = 0xb900031d;
    return;
  }
  if (iVar1 == 9) {
    if ((*(uint *)(param_1 + 0x34) & 0xff) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      uVar3 = *(uint *)(param_1 + 0x38);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0;
      *puVar2 = 0xe7000000;
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0x100000;
      *puVar2 = 0xba001402;
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xf8000000;
      puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                  uVar3 & 0xff;
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xfb000000;
      puVar2[1] = *(uint *)(param_1 + 0x34) & 0xff;
      if (param_2 == 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xfa000000;
        puVar2[1] = *(uint *)(param_1 + 0x34) >> 8 & 0xff;
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        puVar2[1] = 0x1fccdff8;
        *puVar2 = 0xfc26c204;
        if (*(int *)(param_1 + 4) != 0) {
          puVar2 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
          *puVar2 = 0xb900031d;
          puVar2[1] = 0xc4113078;
          return;
        }
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        puVar2[1] = 0xc4113048;
        *puVar2 = 0xb900031d;
        return;
      }
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0x1ffcfbf8;
      *puVar2 = 0xfc26e804;
      if (*(int *)(param_1 + 4) != 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xb900031d;
        puVar2[1] = 0xc4113078;
        return;
      }
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0xc4113048;
      *puVar2 = 0xb900031d;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x38);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0;
    *puVar2 = 0xe7000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x100000;
    *puVar2 = 0xba001402;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xf8000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xffffffff;
    *puVar2 = 0xfb000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xfa000000;
    puVar2[1] = *(uint *)(param_1 + 0x34) >> 8 & 0xff;
    if (param_2 == 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0x1f1093fb;
      *puVar2 = 0xfc26a004;
      if (*(int *)(param_1 + 4) != 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xb900031d;
        puVar2[1] = 0xc41049d8;
        return;
      }
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0xc41041c8;
      *puVar2 = 0xb900031d;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xfc26a004;
    puVar2[1] = 0x1f1093fb;
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc4112078;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc4112048;
    *puVar2 = 0xb900031d;
    return;
  }
  if (iVar1 == 4) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x34);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0;
    *puVar2 = 0xe7000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x100000;
    *puVar2 = 0xba001402;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xf8000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x1f1093ff;
    *puVar2 = 0xfc26a004;
    if (param_2 == 0) {
      if (*(int *)(param_1 + 4) != 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xb900031d;
        puVar2[1] = 0xc41049d8;
        return;
      }
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0xc41041c8;
      *puVar2 = 0xb900031d;
      return;
    }
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc4112078;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc4112048;
    *puVar2 = 0xb900031d;
    return;
  }
  if (iVar1 == 5) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0;
    *puVar2 = 0xe7000000;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x100000;
    *puVar2 = 0xba001402;
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    uVar3 = *(uint *)(param_1 + 0x38);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xf8000000;
    puVar2[1] = uVar3 & 0xff000000 | (uVar3 >> 0x10 & 0xff) << 0x10 | (uVar3 >> 8 & 0xff) << 8 |
                uVar3 & 0xff;
    uVar3 = *(uint *)(param_1 + 0x34);
    if ((uVar3 & 0xff) < 0xff) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xfb000000;
      puVar2[1] = uVar3 & 0xff | 0xffffff00;
      if (param_2 == 0) {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xfc269a04;
        puVar2[1] = 0x1f10ffff;
      }
      else {
        if ((*(uint *)(param_1 + 0x34) & 0xff00) == 0) {
          puVar2 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
          puVar2[1] = 0x1f10ffff;
          *puVar2 = 0xfc26ea04;
        }
        else {
          puVar2 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
          *puVar2 = 0xfc26ea04;
          puVar2[1] = 0x1f10cfff;
        }
      }
    }
    else {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0x1f1093ff;
      *puVar2 = 0xfc26a004;
    }
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc41049d8;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc41041c8;
    *puVar2 = 0xb900031d;
    return;
  }
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  puVar2[1] = 0;
  *puVar2 = 0xe7000000;
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  puVar2[1] = 0x100000;
  *puVar2 = 0xba001402;
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  puVar2[1] = 0xffffff00;
  *puVar2 = 0xf8000000;
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  *puVar2 = 0xfc26a004;
  puVar2[1] = 0x1f1093ff;
  if (param_2 == 0) {
    if (*(int *)(param_1 + 4) != 0) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xb900031d;
      puVar2[1] = 0xc41049d8;
      return;
    }
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0xc41041c8;
    *puVar2 = 0xb900031d;
    return;
  }
  if (*(int *)(param_1 + 4) != 0) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    *puVar2 = 0xb900031d;
    puVar2[1] = 0xc4112078;
    return;
  }
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  puVar2[1] = 0xc4112048;
  *puVar2 = 0xb900031d;
  return;
}



void proc_7F072644(int param_1)

{
  undefined4 *puVar1;
  
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0;
  *puVar1 = 0xe7000000;
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0x100000;
  *puVar1 = 0xba001402;
  if (*(int *)(param_1 + 4) == 0) {
    puVar1 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
    *puVar1 = 0xb900031d;
    puVar1[1] = 0xc192048;
  }
  else {
    puVar1 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
    *puVar1 = 0xb900031d;
    puVar1[1] = 0xc192078;
  }
  puVar1 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  puVar1[1] = 0x1f1093ff;
  *puVar1 = 0xfc26a004;
  return;
}



void proc_7F0726F8(int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  
  iVar1 = *(int *)(param_1 + 0x3c);
  if (iVar1 == 1) {
    puVar2 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
    puVar2[1] = 0x3000;
    *puVar2 = 0xb6000000;
    return;
  }
  if (iVar1 != 2) {
    if (iVar1 == 3) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      puVar2[1] = 0x2000;
      *puVar2 = 0xb7000000;
    }
    return;
  }
  puVar2 = *(undefined4 **)(param_1 + 0xc);
  *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
  puVar2[1] = 0x1000;
  *puVar2 = 0xb7000000;
  return;
}



void proc_7F072784(int param_1,int param_2)

{
  int *piVar1;
  char cVar4;
  undefined4 *puVar2;
  u32 uVar3;
  uint uVar5;
  
  piVar1 = *(int **)(param_2 + 4);
  if (*(int *)(param_1 + 0x18) == 0) {
    if ((*(uint *)(param_1 + 8) & 1) == 0) {
      uVar5 = *(uint *)(param_1 + 8);
    }
    else {
      if (*piVar1 == 0) {
        uVar5 = *(uint *)(param_1 + 8);
      }
      else {
        puVar2 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0xbc001406;
        uVar3 = osVirtualToPhysical((void *)piVar1[2]);
        puVar2[1] = uVar3;
        if (*(int *)(param_1 + 0x3c) == 0) {
          cVar4 = *(char *)((int)piVar1 + 0x12);
        }
        else {
          proc_7F0726F8(param_1);
          cVar4 = *(char *)((int)piVar1 + 0x12);
        }
        if (cVar4 == '\x01') {
          proc_7F070F80(param_1);
          puVar2 = *(undefined4 **)(param_1 + 0xc);
        }
        else {
          if (cVar4 == '\x03') {
            proc_7F071030(param_1,1);
            puVar2 = *(undefined4 **)(param_1 + 0xc);
          }
          else {
            if (cVar4 == '\x04') {
              proc_7F071B44(param_1,1);
              puVar2 = *(undefined4 **)(param_1 + 0xc);
            }
            else {
              if (cVar4 == '\x02') {
                proc_7F072644(param_1);
                puVar2 = *(undefined4 **)(param_1 + 0xc);
              }
              else {
                puVar2 = *(undefined4 **)(param_1 + 0xc);
              }
            }
          }
        }
        *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
        *puVar2 = 0x6000000;
        puVar2[1] = *piVar1;
        if (*(char *)((int)piVar1 + 0x12) == '\x03') {
          if (piVar1[1] == 0) {
            uVar5 = *(uint *)(param_1 + 8);
          }
          else {
            proc_7F071030(param_1,0);
            puVar2 = *(undefined4 **)(param_1 + 0xc);
            *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
            *puVar2 = 0x6000000;
            puVar2[1] = piVar1[1];
            uVar5 = *(uint *)(param_1 + 8);
          }
        }
        else {
          uVar5 = *(uint *)(param_1 + 8);
        }
      }
    }
    if (((((uVar5 & 2) != 0) && (*piVar1 != 0)) && (*(char *)((int)piVar1 + 0x12) == '\x04')) &&
       (piVar1[1] != 0)) {
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0xbc001406;
      uVar3 = osVirtualToPhysical((void *)piVar1[2]);
      puVar2[1] = uVar3;
      if (*(int *)(param_1 + 0x3c) != 0) {
        proc_7F0726F8(param_1);
      }
      proc_7F071B44(param_1,0);
      puVar2 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar2 + 2;
      *puVar2 = 0x6000000;
      puVar2[1] = piVar1[1];
    }
  }
  return;
}



void proc_7F072984(int param_1,int param_2,ushort *param_3)

{
  int iVar1;
  void **ppvVar2;
  short sVar4;
  u32 uVar3;
  undefined4 *puVar5;
  uint uVar6;
  
  iVar1 = *(int *)(param_3 + 2);
  if (*(int *)(param_1 + 0x18) == 0) {
    if ((*(uint *)(param_1 + 8) & 1) == 0) {
      uVar6 = *(uint *)(param_1 + 8);
    }
    else {
      ppvVar2 = (void **)extract_id_from_object_structure_microcode(param_2,param_3);
      if (ppvVar2[1] == NULL) {
        uVar6 = *(uint *)(param_1 + 8);
      }
      else {
        puVar5 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
        *puVar5 = 0xbc001406;
        uVar3 = osVirtualToPhysical(*(void **)(iVar1 + 0x1c));
        puVar5[1] = uVar3;
        if (*(int *)(param_1 + 0x3c) == 0) {
          sVar4 = *(short *)(iVar1 + 0x18);
        }
        else {
          proc_7F0726F8(param_1);
          sVar4 = *(short *)(iVar1 + 0x18);
        }
        if (sVar4 == 1) {
          proc_7F070F80(param_1);
          puVar5 = *(undefined4 **)(param_1 + 0xc);
        }
        else {
          if (sVar4 == 3) {
            proc_7F071030(param_1,1);
            puVar5 = *(undefined4 **)(param_1 + 0xc);
          }
          else {
            if (sVar4 == 4) {
              proc_7F071B44(param_1,1);
              puVar5 = *(undefined4 **)(param_1 + 0xc);
            }
            else {
              if (sVar4 == 2) {
                proc_7F072644(param_1);
                puVar5 = *(undefined4 **)(param_1 + 0xc);
              }
              else {
                puVar5 = *(undefined4 **)(param_1 + 0xc);
              }
            }
          }
        }
        *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
        *puVar5 = 0xbc001006;
        uVar3 = osVirtualToPhysical(*ppvVar2);
        puVar5[1] = uVar3;
        puVar5 = *(undefined4 **)(param_1 + 0xc);
        *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
        *puVar5 = 0x6000000;
        *(void **)(puVar5 + 1) = ppvVar2[1];
        if (*(short *)(iVar1 + 0x18) == 3) {
          if (*(int *)(iVar1 + 4) == 0) {
            uVar6 = *(uint *)(param_1 + 8);
          }
          else {
            proc_7F071030(param_1,0);
            puVar5 = *(undefined4 **)(param_1 + 0xc);
            *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
            *puVar5 = 0x6000000;
            puVar5[1] = *(undefined4 *)(iVar1 + 4);
            uVar6 = *(uint *)(param_1 + 8);
          }
        }
        else {
          uVar6 = *(uint *)(param_1 + 8);
        }
      }
    }
    if (((((uVar6 & 2) != 0) &&
         (ppvVar2 = (void **)extract_id_from_object_structure_microcode(param_2,param_3),
         ppvVar2[1] != NULL)) && (*(short *)(iVar1 + 0x18) == 4)) && (*(int *)(iVar1 + 4) != 0)) {
      puVar5 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
      *puVar5 = 0xbc001406;
      uVar3 = osVirtualToPhysical(*(void **)(iVar1 + 0x1c));
      puVar5[1] = uVar3;
      if (*(int *)(param_1 + 0x3c) == 0) {
        puVar5 = *(undefined4 **)(param_1 + 0xc);
      }
      else {
        proc_7F0726F8(param_1);
        puVar5 = *(undefined4 **)(param_1 + 0xc);
      }
      *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
      *puVar5 = 0xbc001006;
      uVar3 = osVirtualToPhysical(*ppvVar2);
      puVar5[1] = uVar3;
      proc_7F071B44(param_1,0);
      puVar5 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar5 + 2;
      *puVar5 = 0x6000000;
      puVar5[1] = *(undefined4 *)(iVar1 + 4);
    }
  }
  return;
}



void proc_7F072C10(void)

{
  return;
}



void dorottex(int param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  short sVar1;
  int *piVar2;
  undefined4 uVar3;
  ushort x;
  u32 uVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  undefined4 *puVar8;
  short sVar9;
  short sVar10;
  int iVar11;
  undefined4 *virtualAddress;
  uint uVar12;
  undefined4 *puVar13;
  int iVar14;
  uint uVar15;
  
  if (((*(int *)(param_1 + 0x18) == 0) && ((*(uint *)(param_1 + 8) & 2) != 0)) &&
     (piVar2 = *(int **)(param_2 + 4), piVar2[2] != 0)) {
    puVar13 = (undefined4 *)piVar2[1];
    if (vtxallocator == NULL) {
      osSyncPrintf(aDorottexNoVtxAllocator,param_2,param_3,param_4);
      return_null();
    }
    virtualAddress = (undefined4 *)(*vtxallocator)(*piVar2 << 2);
    puVar8 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar8 + 2;
    *puVar8 = 0xbc001006;
    uVar4 = osVirtualToPhysical(virtualAddress);
    puVar8[1] = uVar4;
    puVar8 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar8 + 2;
    *puVar8 = 0xbc001406;
    uVar4 = osVirtualToPhysical((void *)piVar2[3]);
    puVar8[1] = uVar4;
    puVar8 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar8 + 2;
    puVar8[1] = 0;
    *puVar8 = 0xf8000000;
    puVar8 = *(undefined4 **)(param_1 + 0xc);
    iVar14 = 0;
    *(undefined4 **)(param_1 + 0xc) = puVar8 + 2;
    *puVar8 = 0x6000000;
    puVar8[1] = piVar2[2];
    if (0 < *piVar2) {
      do {
        uVar4 = get_random_value();
        x = (ushort)(uVar4 << 10);
        sVar5 = coss(x);
        sVar6 = sins(x);
        uVar4 = get_random_value();
        uVar12 = uVar4 >> 0x1f;
        uVar4 = get_random_value();
        iVar7 = 0x10000 - (uVar4 & 0x3fff);
        *virtualAddress = *puVar13;
        sVar5 = (short)((int)sVar5 * 0x16a0 >> 0x12);
        sVar10 = 0x200 - sVar5;
        sVar6 = (short)((int)sVar6 * 0x16a0 >> 0x12);
        sVar9 = 0x200 - sVar6;
        virtualAddress[1] = puVar13[1];
        sVar6 += 0x200;
        virtualAddress[2] = puVar13[2];
        iVar14 += 1;
        virtualAddress[3] = puVar13[3];
        virtualAddress[4] = puVar13[4];
        virtualAddress[5] = puVar13[5];
        virtualAddress[6] = puVar13[6];
        virtualAddress[7] = puVar13[7];
        virtualAddress[8] = puVar13[8];
        virtualAddress[9] = puVar13[9];
        virtualAddress[10] = puVar13[10];
        virtualAddress[0xb] = puVar13[0xb];
        virtualAddress[0xc] = puVar13[0xc];
        virtualAddress[0xd] = puVar13[0xd];
        virtualAddress[0xe] = puVar13[0xe];
        uVar3 = puVar13[0xf];
        *(short *)(virtualAddress + 2) = sVar10;
        *(short *)((int)virtualAddress + 10) = sVar9;
        virtualAddress[0xf] = uVar3;
        uVar15 = uVar12;
        if ((false) && (uVar15 = uVar12, uVar12 != 0)) {
          uVar15 = uVar12 - 4;
        }
        puVar8 = puVar13 + uVar15 * 4;
        iVar11 = uVar12 + 1;
        *(short *)virtualAddress = (short)((uint)((int)*(short *)puVar8 * iVar7) >> 0x10);
        sVar5 += 0x200;
        *(undefined2 *)((int)virtualAddress + 2) =
             (short)((uint)((int)*(short *)((int)puVar8 + 2) * iVar7) >> 0x10);
        sVar1 = *(short *)(puVar8 + 1);
        *(short *)(virtualAddress + 6) = sVar6;
        *(short *)((int)virtualAddress + 0x1a) = sVar10;
        *(short *)(virtualAddress + 1) = (short)((uint)((int)sVar1 * iVar7) >> 0x10);
        if ((false) && (iVar11 != 0)) {
          iVar11 = uVar12 - 3;
        }
        puVar8 = puVar13 + iVar11 * 4;
        *(short *)(virtualAddress + 4) = (short)((uint)((int)*(short *)puVar8 * iVar7) >> 0x10);
        *(undefined2 *)((int)virtualAddress + 0x12) =
             (short)((uint)((int)*(short *)((int)puVar8 + 2) * iVar7) >> 0x10);
        sVar10 = *(short *)(puVar8 + 1);
        *(short *)(virtualAddress + 10) = sVar5;
        *(short *)((int)virtualAddress + 0x2a) = sVar6;
        *(short *)(virtualAddress + 5) = (short)((uint)((int)sVar10 * iVar7) >> 0x10);
        uVar15 = uVar12 + 2 & 3;
        if ((false) && (uVar15 != 0)) {
          uVar15 -= 4;
        }
        puVar8 = puVar13 + uVar15 * 4;
        *(short *)(virtualAddress + 8) = (short)((uint)((int)*(short *)puVar8 * iVar7) >> 0x10);
        *(undefined2 *)((int)virtualAddress + 0x22) =
             (short)((uint)((int)*(short *)((int)puVar8 + 2) * iVar7) >> 0x10);
        sVar6 = *(short *)(puVar8 + 1);
        *(short *)(virtualAddress + 0xe) = sVar9;
        *(short *)((int)virtualAddress + 0x3a) = sVar5;
        *(short *)(virtualAddress + 9) = (short)((uint)((int)sVar6 * iVar7) >> 0x10);
        uVar15 = uVar12 + 3 & 3;
        if ((false) && (uVar15 != 0)) {
          uVar15 -= 4;
        }
        puVar8 = puVar13 + uVar15 * 4;
        puVar13 = puVar13 + 0x10;
        *(short *)(virtualAddress + 0xc) = (short)((uint)((int)*(short *)puVar8 * iVar7) >> 0x10);
        *(undefined2 *)((int)virtualAddress + 0x32) =
             (short)((uint)((int)*(short *)((int)puVar8 + 2) * iVar7) >> 0x10);
        *(short *)(virtualAddress + 0xd) =
             (short)((uint)((int)*(short *)(puVar8 + 1) * iVar7) >> 0x10);
        virtualAddress = virtualAddress + 0x10;
      } while (iVar14 < *piVar2);
    }
  }
  return;
}



void proc_7F073038(int param_1,uint *param_2,int param_3)

{
  likely_generate_DL_for_image_declaration
            ((uint **)(param_1 + 0xc),param_2,param_3,(longlong)*(int *)(param_1 + 4),2);
  return;
}



void proc_7F07306C(void)

{
  return;
}



void dotube(int param_1,int param_2,ushort *param_3)

{
  byte bVar1;
  char cVar2;
  ushort **ppuVar3;
  int iVar4;
  int iVar5;
  ushort *puVar6;
  uint *puVar7;
  bool bVar8;
  int iVar9;
  int *piVar10;
  int *piVar11;
  short sVar13;
  short sVar14;
  u32 uVar12;
  byte *pbVar15;
  undefined2 *puVar16;
  ushort *partdesc;
  char *pcVar17;
  ulonglong uVar18;
  int iVar19;
  undefined4 *puVar20;
  int iVar21;
  undefined4 *puVar22;
  undefined4 *virtualAddress;
  int iVar23;
  char *pcVar24;
  ulonglong uVar25;
  int iVar26;
  
  ppuVar3 = *(ushort ***)(param_3 + 2);
  piVar10 = (int *)extract_id_from_object_structure_microcode(param_2,param_3);
  partdesc = *ppuVar3;
  if (partdesc == NULL) {
    partdesc = ppuVar3[1];
  }
  iVar4 = *(int *)(partdesc + 2);
  piVar11 = (int *)extract_id_from_object_structure_microcode(param_2,partdesc);
  bVar8 = true;
  if ((*(uint *)(param_1 + 8) & 1) != 0) {
    sVar13 = proc_7F06C570(param_3,0);
    iVar5 = *(int *)(param_2 + 0xc);
    iVar23 = *piVar10;
    partdesc = ppuVar3[3];
    iVar26 = *piVar11;
    iVar9 = iVar23 * 4;
    if (*ppuVar3 == NULL) {
      sVar14 = proc_7F06C570(ppuVar3[1],0x200);
      iVar21 = *(int *)(param_2 + 0xc);
      iVar19 = iVar26;
    }
    else {
      sVar14 = proc_7F06C570(param_3,0x200);
      iVar21 = *(int *)(param_2 + 0xc);
      iVar19 = iVar23;
      iVar23 = iVar26;
    }
    puVar6 = ppuVar3[2];
    iVar19 = (iVar19 - iVar23) + (int)puVar6;
    iVar26 = iVar19 % (int)puVar6;
    if (puVar6 == NULL) {
      trap(0x1c00);
    }
    if ((puVar6 == (ushort *)0xffffffff) && (iVar19 == -0x80000000)) {
      trap(0x1800);
    }
    if ((iVar26 < 2) || (6 < iVar26)) {
      if ((iVar26 < 10) || (0xe < iVar26)) {
        if ((6 < iVar26) && (iVar26 < 10)) {
          bVar8 = false;
        }
        virtualAddress = *(undefined4 **)(param_1 + 0xc);
      }
      else {
        if (iVar26 < 0xd) {
          iVar19 = iVar26 + -8;
          if (iVar19 < 0) {
            iVar19 = iVar26 + -7;
          }
          iVar26 = (iVar19 >> 1) + iVar23 + (int)puVar6;
          iVar23 = iVar26 % (int)puVar6;
          bVar8 = false;
          if (puVar6 == NULL) {
            trap(0x1c00);
          }
          if ((puVar6 == (ushort *)0xffffffff) && (iVar26 == -0x80000000)) {
            trap(0x1800);
          }
          virtualAddress = *(undefined4 **)(param_1 + 0xc);
        }
        else {
          iVar19 = -iVar26 + 0x10;
          if (iVar19 < 0) {
            iVar19 = -iVar26 + 0x11;
          }
          iVar26 = (iVar23 - (iVar19 >> 1)) + (int)puVar6;
          iVar23 = iVar26 % (int)puVar6;
          if (puVar6 == NULL) {
            trap(0x1c00);
          }
          if ((puVar6 == (ushort *)0xffffffff) && (iVar26 == -0x80000000)) {
            trap(0x1800);
          }
          virtualAddress = *(undefined4 **)(param_1 + 0xc);
        }
      }
    }
    else {
      if (iVar26 < 4) {
        if (iVar26 < 0) {
          iVar26 += 1;
        }
        iVar26 = (iVar26 >> 1) + iVar23 + (int)puVar6;
        iVar23 = iVar26 % (int)puVar6;
        if (puVar6 == NULL) {
          trap(0x1c00);
        }
        if ((puVar6 == (ushort *)0xffffffff) && (iVar26 == -0x80000000)) {
          trap(0x1800);
        }
        virtualAddress = *(undefined4 **)(param_1 + 0xc);
      }
      else {
        iVar19 = -iVar26 + 8;
        if (iVar19 < 0) {
          iVar19 = -iVar26 + 9;
        }
        iVar26 = (iVar23 - (iVar19 >> 1)) + (int)puVar6;
        iVar23 = iVar26 % (int)puVar6;
        bVar8 = false;
        if (puVar6 == NULL) {
          trap(0x1c00);
        }
        if ((puVar6 == (ushort *)0xffffffff) && (iVar26 == -0x80000000)) {
          trap(0x1800);
        }
        virtualAddress = *(undefined4 **)(param_1 + 0xc);
      }
    }
    pcVar24 = *(char **)(partdesc + iVar9 + 2);
    *(undefined4 **)(param_1 + 0xc) = virtualAddress + 2;
    *virtualAddress = 0xbc001406;
    uVar12 = osVirtualToPhysical(ppuVar3[0x6b]);
    virtualAddress[1] = uVar12;
    bVar1 = *(byte *)(partdesc + iVar9);
    uVar25 = (ulonglong)bVar1;
    if (bVar1 != 0) {
      cVar2 = *pcVar24;
      do {
        if (cVar2 == '\x01') {
          if (vtxallocator == NULL) {
            osSyncPrintf(aDotubeNoVtxAllocator);
            return_null();
          }
          virtualAddress = (undefined4 *)(*vtxallocator)(2);
          puVar22 = virtualAddress + 4;
          puVar20 = (undefined4 *)(ppuVar3[4] + (uint)*(ushort *)(pcVar24 + 2) * 8);
          *virtualAddress = *puVar20;
          virtualAddress[1] = puVar20[1];
          virtualAddress[2] = puVar20[2];
          virtualAddress[3] = puVar20[3];
          partdesc = ppuVar3[4] + (uint)*(ushort *)(pcVar24 + 2) * 8;
          *puVar22 = *(undefined4 *)(partdesc + 8);
          virtualAddress[5] = *(undefined4 *)(partdesc + 10);
          virtualAddress[6] = *(undefined4 *)(partdesc + 0xc);
          virtualAddress[7] = *(undefined4 *)(partdesc + 0xe);
          if (ppuVar3[1] == NULL) {
            pbVar15 = (byte *)(*(int *)(iVar4 + 0xc) + iVar23 * 8);
            bVar1 = *pbVar15;
            uVar18 = (ulonglong)bVar1;
            pcVar17 = *(char **)(pbVar15 + 4);
            if (bVar1 == 0) {
              puVar22 = *(undefined4 **)(param_1 + 0xc);
            }
            else {
              cVar2 = *pcVar17;
              while (uVar18 = SEXT48((int)uVar18 + -1), cVar2 != '\x01') {
                if (cVar2 == '\x01') {
                  pcVar17 = pcVar17 + 4;
                }
                else {
                  if (cVar2 == '\x02') {
                    pcVar17 = pcVar17 + 2;
                  }
                  else {
                    if (cVar2 == '\x03') {
                      pcVar17 = pcVar17 + 4;
                    }
                  }
                }
                if ((longlong)uVar18 < 1) goto LAB_7f073618;
                cVar2 = *pcVar17;
              }
              puVar16 = (undefined2 *)
                        (*(int *)(iVar4 + 0x10) + (uint)*(ushort *)(pcVar17 + 2) * 0x10);
              if (bVar8) {
                *(undefined2 *)virtualAddress = puVar16[8];
                *(undefined2 *)((int)virtualAddress + 2) = puVar16[9];
                *(undefined2 *)(virtualAddress + 1) = puVar16[10];
                *(undefined2 *)puVar22 = *puVar16;
                *(undefined2 *)((int)virtualAddress + 0x12) = puVar16[1];
                *(undefined2 *)(virtualAddress + 5) = puVar16[2];
              }
              else {
                *(undefined2 *)virtualAddress = *puVar16;
                *(undefined2 *)((int)virtualAddress + 2) = puVar16[1];
                *(undefined2 *)(virtualAddress + 1) = puVar16[2];
                *(undefined2 *)puVar22 = puVar16[8];
                *(undefined2 *)((int)virtualAddress + 0x12) = puVar16[9];
                *(undefined2 *)(virtualAddress + 5) = puVar16[10];
              }
LAB_7f073618:
              puVar22 = *(undefined4 **)(param_1 + 0xc);
            }
          }
          else {
            bVar1 = *(byte *)(ppuVar3[3] + iVar23 * 4);
            uVar18 = (ulonglong)bVar1;
            pcVar17 = *(char **)(ppuVar3[3] + iVar23 * 4 + 2);
            if (bVar1 != 0) {
              cVar2 = *pcVar17;
              while (uVar18 = SEXT48((int)uVar18 + -1), cVar2 != '\x01') {
                if (cVar2 == '\x01') {
                  pcVar17 = pcVar17 + 4;
                }
                else {
                  if (cVar2 == '\x02') {
                    pcVar17 = pcVar17 + 2;
                  }
                  else {
                    if (cVar2 == '\x03') {
                      pcVar17 = pcVar17 + 4;
                    }
                  }
                }
                if ((longlong)uVar18 < 1) {
                  puVar22 = *(undefined4 **)(param_1 + 0xc);
                  goto LAB_7f07361c;
                }
                cVar2 = *pcVar17;
              }
              partdesc = ppuVar3[4] + (uint)*(ushort *)(pcVar17 + 2) * 8;
              *(ushort *)virtualAddress = *partdesc;
              *(ushort *)((int)virtualAddress + 2) = partdesc[1];
              *(ushort *)(virtualAddress + 1) = partdesc[2];
              *(ushort *)puVar22 = partdesc[8];
              *(ushort *)((int)virtualAddress + 0x12) = partdesc[9];
              *(ushort *)(virtualAddress + 5) = partdesc[10];
              goto LAB_7f073618;
            }
            puVar22 = *(undefined4 **)(param_1 + 0xc);
          }
LAB_7f07361c:
          *(undefined4 **)(param_1 + 0xc) = puVar22 + 2;
          *puVar22 = 0x1020040;
          uVar12 = osVirtualToPhysical((void *)(iVar21 + (int)sVar14 * 0x40));
          puVar22[1] = uVar12;
          puVar22 = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = puVar22 + 2;
          *puVar22 = 0x4100020;
          uVar12 = osVirtualToPhysical(virtualAddress);
          puVar22[1] = uVar12;
          virtualAddress = *(undefined4 **)(param_1 + 0xc);
          *(undefined4 **)(param_1 + 0xc) = virtualAddress + 2;
          *virtualAddress = 0x1020040;
          uVar12 = osVirtualToPhysical((void *)(iVar5 + (int)sVar13 * 0x40));
          virtualAddress[1] = uVar12;
          puVar7 = *(uint **)(param_1 + 0xc);
          *(uint **)(param_1 + 0xc) = puVar7 + 2;
          *puVar7 = (((uint)(byte)pcVar24[1] - 3) * 0x10 & 0xff | 2) << 0x10 | 0x4000000 |
                    ((uint)(byte)pcVar24[1] - 2) * 0x10 & 0xffff;
          uVar12 = osVirtualToPhysical(ppuVar3[4] + (uint)*(ushort *)(pcVar24 + 2) * 8 + 0x10);
          pcVar24 = pcVar24 + 4;
          puVar7[1] = uVar12;
        }
        else {
          if (cVar2 == '\x02') {
            if (pcVar24[1] == 0xff) {
              proc_7F073038(param_1,NULL,1);
              pcVar24 = pcVar24 + 2;
            }
            else {
              proc_7F073038(param_1,(uint *)(ppuVar3[5] + (uint)(byte)pcVar24[1] * 6),1);
              pcVar24 = pcVar24 + 2;
            }
          }
          else {
            if (cVar2 == '\x03') {
              virtualAddress = *(undefined4 **)(param_1 + 0xc);
              *(undefined4 **)(param_1 + 0xc) = virtualAddress + 2;
              *virtualAddress = 0xbf000000;
              virtualAddress[1] =
                   ((uint)(byte)pcVar24[1] * 10 & 0xff) << 0x10 |
                   ((uint)(byte)pcVar24[2] * 10 & 0xff) << 8 | (uint)(byte)pcVar24[3] * 10 & 0xff;
              pcVar24 = pcVar24 + 4;
            }
          }
        }
        uVar25 = SEXT48((int)uVar25 + -1);
        if ((longlong)uVar25 < 1) {
          return;
        }
        cVar2 = *pcVar24;
      } while( true );
    }
  }
  return;
}



void proc_7F0737EC(u32 param_1,u32 param_2,u32 param_3)

{
  return;
}



void proc_7F0737FC(u32 param_1,u32 param_2,u32 param_3)

{
  return;
}



void dogfnegx(int param_1,int param_2,ushort *param_3)

{
  byte bVar1;
  byte bVar2;
  float *pfVar3;
  undefined4 *puVar4;
  uint *puVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  short *psVar10;
  short sVar12;
  u32 uVar11;
  undefined4 *virtualAddress;
  short sVar13;
  short sVar14;
  short sVar15;
  float *virtualAddress_00;
  ushort x;
  float __x;
  float __x_00;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fStack48;
  float fStack44;
  float fStack40;
  
  pfVar3 = *(float **)(param_3 + 2);
  psVar10 = (short *)extract_id_from_object_structure_microcode(param_2,param_3);
  uVar9 = dword_800363EC;
  uVar8 = DAT_800363e8;
  uVar7 = DAT_800363e4;
  uVar6 = DAT_800363e0;
  if (((*(uint *)(param_1 + 8) & 2) != 0) && (*psVar10 != 0)) {
    sVar12 = proc_7F06C570(param_3,0);
    virtualAddress_00 = (float *)(*(int *)(param_2 + 0xc) + (int)sVar12 * 0x40);
    fStack48 = -(virtualAddress_00[0xc] +
                *pfVar3 * *virtualAddress_00 + pfVar3[1] * virtualAddress_00[4] +
                pfVar3[2] * virtualAddress_00[8]);
    fStack44 = -(virtualAddress_00[0xd] +
                *pfVar3 * virtualAddress_00[1] + pfVar3[1] * virtualAddress_00[5] +
                pfVar3[2] * virtualAddress_00[9]);
    fStack40 = -(virtualAddress_00[0xe] +
                *pfVar3 * virtualAddress_00[2] + pfVar3[1] * virtualAddress_00[6] +
                pfVar3[2] * virtualAddress_00[10]);
    __x = sqrtf(fStack40 * fStack40 + fStack48 * fStack48 + fStack44 * fStack44);
    if (0.00000000 < __x) {
      __x = 1.00000000 / (*(float *)(param_2 + 0x14) * __x);
      fStack48 = fStack48 * __x;
      fStack44 = fStack44 * __x;
      fStack40 = fStack40 * __x;
    }
    else {
      fStack48 = 0.00000000;
      fStack44 = 0.00000000;
      fStack40 = 1.00000000 / *(float *)(param_2 + 0x14);
    }
    __x = proc_7F05ACB0(virtualAddress_00[6] * fStack40 +
                        fStack48 * virtualAddress_00[4] + fStack44 * virtualAddress_00[5]);
    __x_00 = sinf(__x);
    __x_00 = proc_7F05ACB0(-(fStack48 * virtualAddress_00[8] + fStack44 * virtualAddress_00[9] +
                            fStack40 * virtualAddress_00[10]) / __x_00);
    if (-(virtualAddress_00[2] * fStack40 +
         fStack48 * *virtualAddress_00 + fStack44 * virtualAddress_00[1]) < 0.00000000) {
      __x_00 = flt_80054D50 - __x_00;
    }
    fVar16 = cosf(__x_00);
    __x_00 = sinf(__x_00);
    fVar17 = cosf(__x);
    __x = sinf(__x);
    uVar11 = get_random_value();
    fVar20 = (float)(uVar11 & 0x7f);
    if (false) {
      fVar20 = fVar20 + 4294967296.00000000;
    }
    fVar20 = fVar20 * 0.00390625 + 0.75000000;
    fVar19 = pfVar3[3] * fVar20;
    fVar21 = pfVar3[5];
    fVar24 = pfVar3[4] * fVar20 * __x * 0.50000000;
    __x = *pfVar3 - fVar19 * 0.50000000;
    fVar23 = pfVar3[1];
    fVar22 = pfVar3[2];
    if (vtxallocator == NULL) {
      osSyncPrintf(aDogfnegxNoVtxAllocator);
      return_null();
    }
    virtualAddress = (undefined4 *)(*vtxallocator)(4);
    *virtualAddress = uVar6;
    virtualAddress[1] = uVar7;
    virtualAddress[2] = uVar8;
    virtualAddress[3] = uVar9;
    virtualAddress[4] = uVar6;
    virtualAddress[5] = uVar7;
    virtualAddress[6] = uVar8;
    virtualAddress[7] = uVar9;
    virtualAddress[8] = uVar6;
    virtualAddress[9] = uVar7;
    virtualAddress[10] = uVar8;
    virtualAddress[0xb] = uVar9;
    virtualAddress[0xc] = uVar6;
    virtualAddress[0xd] = uVar7;
    virtualAddress[0xe] = uVar8;
    virtualAddress[0xf] = uVar9;
    fVar18 = -(fVar19 * fVar16 * 0.50000000);
    fVar19 = -(fVar19 * fVar17 * __x_00 * 0.50000000);
    *(short *)virtualAddress = (short)(int)(__x + fVar18 + fVar19);
    *(undefined2 *)((int)virtualAddress + 2) = (short)(int)(fVar23 - fVar24);
    __x_00 = -(fVar21 * fVar20 * __x_00 * 0.50000000);
    fVar16 = -(fVar21 * fVar20 * fVar17 * fVar16 * 0.50000000);
    *(short *)(virtualAddress + 1) = (short)(int)((fVar22 - __x_00) + fVar16);
    *(short *)(virtualAddress + 4) = (short)(int)((__x + fVar18) - fVar19);
    *(undefined2 *)((int)virtualAddress + 0x12) = (short)(int)(fVar23 + fVar24);
    *(short *)(virtualAddress + 5) = (short)(int)((fVar22 - __x_00) - fVar16);
    *(short *)(virtualAddress + 8) = (short)(int)((__x - fVar18) - fVar19);
    *(undefined2 *)((int)virtualAddress + 0x22) = (short)(int)(fVar23 + fVar24);
    *(short *)(virtualAddress + 9) = (short)(int)((fVar22 + __x_00) - fVar16);
    *(short *)(virtualAddress + 0xc) = (short)(int)((__x - fVar18) + fVar19);
    *(undefined2 *)((int)virtualAddress + 0x32) = (short)(int)(fVar23 - fVar24);
    *(short *)(virtualAddress + 0xd) = (short)(int)(fVar22 + __x_00 + fVar16);
    puVar4 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    *puVar4 = 0xbc001406;
    uVar11 = osVirtualToPhysical((void *)pfVar3[9]);
    puVar4[1] = uVar11;
    puVar5 = (uint *)pfVar3[6];
    if (puVar5 == NULL) {
      proc_7F073038(param_1,NULL,1);
      puVar4 = *(undefined4 **)(param_1 + 0xc);
    }
    else {
      uVar11 = get_random_value();
      x = (ushort)(uVar11 << 10);
      sVar13 = coss(x);
      bVar1 = *(byte *)(puVar5 + 1);
      sVar14 = sins(x);
      bVar2 = *(byte *)(puVar5 + 1);
      sVar12 = (ushort)bVar2 * 0x10;
      sVar13 = (short)((int)((int)sVar13 * (uint)bVar1 * 0xb5) >> 0x12);
      sVar15 = sVar12 - sVar13;
      *(short *)(virtualAddress + 2) = sVar15;
      *(short *)((int)virtualAddress + 0x1a) = sVar15;
      sVar13 = sVar12 + sVar13;
      *(short *)(virtualAddress + 10) = sVar13;
      *(short *)((int)virtualAddress + 0x3a) = sVar13;
      sVar13 = (short)((int)((int)sVar14 * (uint)bVar2 * 0xb5) >> 0x12);
      sVar14 = sVar12 - sVar13;
      sVar12 += sVar13;
      *(short *)((int)virtualAddress + 10) = sVar14;
      *(short *)(virtualAddress + 6) = sVar12;
      *(short *)((int)virtualAddress + 0x2a) = sVar12;
      *(short *)(virtualAddress + 0xe) = sVar14;
      proc_7F073038(param_1,puVar5,4);
      puVar4 = *(undefined4 **)(param_1 + 0xc);
    }
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    puVar4[1] = 0x2000;
    *puVar4 = 0xb7000000;
    puVar4 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    *puVar4 = 0x1020040;
    uVar11 = osVirtualToPhysical(virtualAddress_00);
    puVar4[1] = uVar11;
    puVar4 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    *puVar4 = 0x4300040;
    uVar11 = osVirtualToPhysical(virtualAddress);
    puVar4[1] = uVar11;
    puVar4 = *(undefined4 **)(param_1 + 0xc);
    *(undefined4 **)(param_1 + 0xc) = puVar4 + 2;
    puVar4[1] = 0x3210;
    *puVar4 = 0xb1000002;
  }
  return;
}



void proc_7F073FC8(undefined4 param_1)

{
  dword_800363F0 = param_1;
  return;
}



void doshadow(int param_1,int param_2,ushort *param_3)

{
  byte bVar1;
  float *pfVar2;
  undefined4 *puVar3;
  uint *puVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  uint uVar8;
  int iVar9;
  short sVar11;
  undefined4 *virtualAddress;
  u32 uVar10;
  undefined2 uVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  uint local_14;
  
  uVar8 = dword_80036404;
  uVar7 = dword_80036400;
  uVar6 = dword_800363FC;
  uVar5 = dword_800363F8;
  if (0 < (int)dword_800363F0) {
    pfVar2 = *(float **)(param_3 + 2);
    iVar9 = extract_id_from_object_structure_microcode(param_2,(ushort *)pfVar2[5]);
    fVar14 = pfVar2[2];
    fVar15 = pfVar2[3];
    fVar13 = *(float *)(iVar9 + 0xc) - *(float *)(iVar9 + 4);
    if ((*(uint *)(param_1 + 8) & 2) != 0) {
      if ((*(int *)(param_1 + 0x30) == 3) || (*(int *)(param_1 + 0x30) == 8)) {
        local_14 = uVar8 & 0xffffff00 |
                   ((*(uint *)(param_1 + 0x34) & 0xff) * dword_800363F0) / 0xff & 0xff;
      }
      else {
        local_14 = uVar8 & 0xffffff00 | dword_800363F0 & 0xff;
      }
      sVar11 = proc_7F06C570(param_3,0);
      iVar9 = *(int *)(param_2 + 0xc);
      if (*(int *)(param_1 + 4) == 0) {
        uVar12 = (undefined2)(int)(-fVar13 / *(float *)(param_2 + 0x14));
      }
      else {
        uVar12 = (undefined2)(int)((2.00000000 - fVar13) / *(float *)(param_2 + 0x14));
      }
      if (fVar13 < 50.00000000) {
        fVar14 = fVar14 * 1.25000000;
        fVar15 = fVar15 * 1.25000000;
      }
      else {
        if (300.00000000 < fVar13) {
          fVar15 = 0.00000000;
          fVar14 = 0.00000000;
        }
        else {
          fVar13 = (300.00000000 - fVar13) / 200.00000000;
          fVar14 = fVar14 * fVar13;
          fVar15 = fVar15 * fVar13;
        }
      }
      if (vtxallocator == NULL) {
        osSyncPrintf(aDoshadowNoVtxAllocator);
        return_null();
      }
      virtualAddress = (undefined4 *)(*vtxallocator)(4);
      *virtualAddress = uVar5;
      virtualAddress[1] = uVar6;
      virtualAddress[2] = uVar7;
      virtualAddress[3] = local_14;
      virtualAddress[4] = uVar5;
      virtualAddress[5] = uVar6;
      virtualAddress[6] = uVar7;
      virtualAddress[7] = local_14;
      virtualAddress[8] = uVar5;
      virtualAddress[9] = uVar6;
      virtualAddress[10] = uVar7;
      virtualAddress[0xb] = local_14;
      virtualAddress[0xc] = uVar5;
      virtualAddress[0xd] = uVar6;
      virtualAddress[0xe] = uVar7;
      virtualAddress[0xf] = local_14;
      fVar13 = *pfVar2;
      *(undefined2 *)((int)virtualAddress + 2) = uVar12;
      *(short *)virtualAddress = (short)(int)(fVar13 - fVar14);
      *(short *)(virtualAddress + 1) = (short)(int)(pfVar2[1] - fVar15);
      fVar13 = *pfVar2;
      *(undefined2 *)((int)virtualAddress + 0x12) = uVar12;
      *(short *)(virtualAddress + 4) = (short)(int)(fVar13 - fVar14);
      *(short *)(virtualAddress + 5) = (short)(int)(pfVar2[1] + fVar15);
      fVar13 = *pfVar2;
      *(undefined2 *)((int)virtualAddress + 0x22) = uVar12;
      *(short *)(virtualAddress + 8) = (short)(int)(fVar13 + fVar14);
      *(short *)(virtualAddress + 9) = (short)(int)(pfVar2[1] + fVar15);
      fVar13 = *pfVar2;
      *(undefined2 *)((int)virtualAddress + 0x32) = uVar12;
      *(short *)(virtualAddress + 0xc) = (short)(int)(fVar13 + fVar14);
      *(short *)(virtualAddress + 0xd) = (short)(int)(pfVar2[1] - fVar15);
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xbc001406;
      uVar10 = osVirtualToPhysical((void *)pfVar2[7]);
      puVar3[1] = uVar10;
      puVar4 = (uint *)pfVar2[4];
      if (puVar4 == NULL) {
        proc_7F073038(param_1,NULL,1);
      }
      else {
        *(undefined2 *)(virtualAddress + 2) = 0;
        *(undefined2 *)((int)virtualAddress + 10) = 0;
        bVar1 = *(byte *)(puVar4 + 1);
        *(undefined2 *)((int)virtualAddress + 0x1a) = 0;
        *(ushort *)(virtualAddress + 6) = (ushort)bVar1 * 0x20 + -1;
        *(ushort *)(virtualAddress + 10) = (ushort)*(byte *)(puVar4 + 1) * 0x20 + -1;
        bVar1 = *(byte *)((int)puVar4 + 5);
        *(undefined2 *)(virtualAddress + 0xe) = 0;
        *(short *)((int)virtualAddress + 0x2a) = (ushort)bVar1 * 0x20 + -1;
        *(short *)((int)virtualAddress + 0x3a) = (ushort)*(byte *)((int)puVar4 + 5) * 0x20 + -1;
        proc_7F073038(param_1,puVar4,4);
      }
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0xb7000000;
      puVar3[1] = 0x2000;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0x1020040;
      uVar10 = osVirtualToPhysical((void *)(iVar9 + (int)sVar11 * 0x40));
      puVar3[1] = uVar10;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      *puVar3 = 0x4300040;
      uVar10 = osVirtualToPhysical(virtualAddress);
      puVar3[1] = uVar10;
      puVar3 = *(undefined4 **)(param_1 + 0xc);
      *(undefined4 **)(param_1 + 0xc) = puVar3 + 2;
      puVar3[1] = 0x3210;
      *puVar3 = 0xb1000002;
    }
  }
  return;
}



void proc_7F074514(int param_1,int param_2,int param_3)

{
  return;
}



void proc_7F074524(int param_1,int param_2,int param_3)

{
  return;
}



void proc_7F074534(int param_1,int param_2,ushort *param_3)

{
  if (true) {
    switch((uint)*param_3 & 0xff) {
    case 4:
      proc_7F072784(param_1,(int)param_3);
      break;
    case 5:
      proc_7F07306C();
      break;
    case 6:
      proc_7F0737EC(param_1,param_2,(u32)param_3);
      break;
    case 7:
      dotube(param_1,param_2,param_3);
      break;
    case 8:
      proc_7F06E970(param_2,param_3);
      break;
    case 9:
      proc_7F06EB10(param_2,param_3);
      break;
    case 10:
      proc_7F074514(param_1,param_2,(int)param_3);
      break;
    case 0xb:
      proc_7F0737FC(param_1,param_2,(u32)param_3);
      break;
    case 0xc:
      dogfnegx(param_1,param_2,param_3);
      break;
    case 0xd:
      doshadow(param_1,param_2,param_3);
      break;
    case 0x11:
      proc_7F074524(param_1,param_2,(int)param_3);
      break;
    case 0x12:
      process_12_handle_switch(param_2,param_3);
      break;
    case 0x14:
      proc_7F072C10();
      break;
    case 0x16:
      dorottex(param_1,(uint)param_3,param_3,param_2);
      break;
    case 0x17:
      process_17_pointer_to_head(param_2,param_3);
      break;
    case 0x18:
      proc_7F072984(param_1,param_2,param_3);
    }
  }
  return;
}



void subdraw(int param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 *puVar1;
  ushort *puVar2;
  u32 uVar3;
  ushort *puVar4;
  
  puVar1 = *(undefined4 **)(param_2 + 8);
  puVar2 = (ushort *)*puVar1;
  if (*(int *)(param_1 + 0xc) == 0) {
    osSyncPrintf(aSubdrawNoGfxlist,param_2,param_3,param_4);
    return_null();
    puVar1 = *(undefined4 **)(param_2 + 8);
  }
  if (puVar1[7] == 0) {
    osSyncPrintf(aSubdrawObjectNotInitialised0xX,puVar1);
    return_null();
    puVar1 = *(undefined4 **)(param_1 + 0xc);
  }
  else {
    puVar1 = *(undefined4 **)(param_1 + 0xc);
  }
  *(undefined4 **)(param_1 + 0xc) = puVar1 + 2;
  *puVar1 = 0xbc000c06;
  uVar3 = osVirtualToPhysical(*(void **)(param_2 + 0xc));
  puVar1[1] = uVar3;
  while (puVar4 = puVar2, puVar4 != NULL) {
    proc_7F074534(param_1,param_2,puVar4);
    puVar2 = (ushort *)*(int *)(puVar4 + 10);
    if ((*(int *)(puVar4 + 10) == 0) && (puVar2 = puVar4, puVar4 != NULL)) {
      puVar2 = *(ushort **)(puVar4 + 6);
      while ((puVar2 == NULL && (puVar4 = *(ushort **)(puVar4 + 4), puVar2 = puVar4, puVar4 != NULL)
             )) {
        puVar2 = *(ushort **)(puVar4 + 6);
      }
    }
  }
  return;
}



void proc_7F074790(float **param_1,uint param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  
  subcalcpos(param_2,param_2,param_3,param_4);
  subcalcmatrices(param_1,param_2,extraout_a2_lo,extraout_a3_lo);
  subdraw((int)param_1,param_2,extraout_a2_lo_00,extraout_a3_lo_00);
  return;
}



undefined8 proc_7F0747D0(int param_1,float *param_2,float *param_3,float *param_4)

{
  undefined8 uVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float local_68;
  float local_64;
  float local_60;
  float local_5c;
  float local_24;
  float local_1c;
  
  fVar2 = *param_2;
  fVar3 = param_2[1];
  fVar10 = param_2[2];
  fVar11 = -(fVar2 * fVar2 + fVar3 * fVar3 + fVar10 * fVar10);
  fVar7 = param_4[2];
  fVar8 = *param_4;
  fVar9 = param_4[1];
  local_1c = fVar7 * fVar10 + fVar2 * fVar8 + fVar3 * fVar9;
  fVar4 = param_3[2] - param_2[0xe];
  fVar5 = *param_3 - param_2[0xc];
  fVar6 = param_3[1] - param_2[0xd];
  fVar3 = fVar4 * fVar10 + fVar2 * fVar5 + fVar3 * fVar6;
  fVar2 = -(fVar3 + fVar11 * *(float *)(param_1 + 8));
  local_24 = -(fVar3 + fVar11 * *(float *)(param_1 + 4));
  if (local_1c < 0.00000000) {
    local_1c = -local_1c;
    local_24 = -local_24;
    fVar2 = -fVar2;
  }
  if ((0.00000000 <= local_24) || (0.00000000 <= fVar2)) {
    if (fVar2 < local_24) {
      fVar10 = param_2[4];
      fVar3 = fVar2;
    }
    else {
      fVar10 = param_2[4];
      fVar3 = local_24;
      local_24 = fVar2;
    }
    fVar2 = param_2[5];
    fVar11 = param_2[6];
    fVar12 = -(fVar10 * fVar10 + fVar2 * fVar2 + fVar11 * fVar11);
    local_68 = fVar7 * fVar11 + fVar10 * fVar8 + fVar2 * fVar9;
    fVar2 = fVar4 * fVar11 + fVar10 * fVar5 + fVar2 * fVar6;
    local_5c = -(fVar2 + fVar12 * *(float *)(param_1 + 0x10));
    fVar2 = -(fVar2 + fVar12 * *(float *)(param_1 + 0xc));
    if (local_68 < 0.00000000) {
      local_68 = -local_68;
      fVar2 = -fVar2;
      local_5c = -local_5c;
    }
    if ((0.00000000 <= fVar2) || (0.00000000 <= local_5c)) {
      local_64 = fVar2;
      if (fVar2 <= local_5c) {
        local_64 = local_5c;
        local_5c = fVar2;
      }
      if (local_5c * local_1c < fVar3 * local_68) {
        if (local_64 * local_1c < fVar3 * local_68) {
          return 0;
        }
        local_60 = local_1c;
        local_5c = fVar3;
      }
      else {
        local_60 = local_68;
        if (local_24 * local_68 < local_5c * local_1c) {
          return 0;
        }
      }
      if (local_24 * local_68 < local_64 * local_1c) {
        local_64 = local_24;
        local_68 = local_1c;
      }
      fVar2 = param_2[8];
      fVar3 = param_2[9];
      fVar10 = param_2[10];
      fVar11 = -(fVar2 * fVar2 + fVar3 * fVar3 + fVar10 * fVar10);
      fVar7 = fVar7 * fVar10 + fVar2 * fVar8 + fVar3 * fVar9;
      fVar3 = fVar4 * fVar10 + fVar2 * fVar5 + fVar3 * fVar6;
      fVar2 = -(fVar3 + fVar11 * *(float *)(param_1 + 0x18));
      fVar3 = -(fVar3 + fVar11 * *(float *)(param_1 + 0x14));
      if (fVar7 < 0.00000000) {
        fVar7 = -fVar7;
        fVar3 = -fVar3;
        fVar2 = -fVar2;
      }
      if ((0.00000000 <= fVar3) || (0.00000000 <= fVar2)) {
        fVar4 = fVar3;
        if (fVar3 <= fVar2) {
          fVar4 = fVar2;
          fVar2 = fVar3;
        }
        if (local_5c * fVar7 < fVar2 * local_60) {
          if (local_64 * fVar7 < fVar2 * local_68) {
            uVar1 = 0;
          }
          else {
            uVar1 = 1;
          }
        }
        else {
          if (fVar4 * local_60 < local_5c * fVar7) {
            uVar1 = 0;
          }
          else {
            uVar1 = 1;
          }
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



void proc_7F074C68(int param_1,ushort *param_2,float *param_3,float *param_4)

{
  int iVar1;
  float *pfVar2;
  
  iVar1 = *(int *)(param_2 + 2);
  pfVar2 = (float *)proc_7F06C660(param_1,param_2,0);
  proc_7F0747D0(iVar1,pfVar2,param_3,param_4);
  return;
}



undefined8 proc_7F074CAC(int param_1,ushort *param_2,float *param_3,float *param_4)

{
  ushort uVar1;
  int iVar2;
  float *pfVar4;
  int iVar5;
  undefined8 uVar3;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack16;
  float fStack12;
  
  iVar2 = *(int *)(param_2 + 2);
  pfVar4 = (float *)proc_7F06C660(param_1,param_2,0);
  fVar8 = *(float *)(iVar2 + 4);
  fVar6 = *param_4;
  fStack16 = param_4[1];
  fStack12 = param_4[2];
  if ((*param_2 & 0x100) == 0) {
    if ((*param_2 & 0x200) == 0) {
      fStack32 = pfVar4[0xc] - *param_3;
      fStack28 = pfVar4[0xd] - param_3[1];
      fStack24 = pfVar4[0xe] - param_3[2];
    }
    else {
      if (*(ushort **)(iVar2 + 0x14) == NULL) {
        fStack32 = pfVar4[0xc] - *param_3;
        fStack28 = pfVar4[0xd] - param_3[1];
        fStack24 = pfVar4[0xe] - param_3[2];
      }
      else {
        iVar5 = proc_7F06C660(param_1,*(ushort **)(iVar2 + 0x14),0);
        fStack32 = (pfVar4[0xc] + *(float *)(iVar5 + 0x30)) * 0.50000000 - *param_3;
        fStack28 = (pfVar4[0xd] + *(float *)(iVar5 + 0x34)) * 0.50000000 - param_3[1];
        fStack24 = (pfVar4[0xe] + *(float *)(iVar5 + 0x38)) * 0.50000000 - param_3[2];
      }
    }
  }
  else {
    fVar9 = *(float *)(iVar2 + 8);
    fVar7 = *(float *)(iVar2 + 0xc);
    fVar10 = *(float *)(iVar2 + 0x10);
    fStack32 = (pfVar4[0xc] - *param_3) + fVar9 * *pfVar4 + fVar7 * pfVar4[4] + fVar10 * pfVar4[8];
    fStack28 = (pfVar4[0xd] - param_3[1]) +
               fVar9 * pfVar4[1] + fVar7 * pfVar4[5] + fVar10 * pfVar4[9];
    fStack24 = (pfVar4[0xe] - param_3[2]) +
               fVar9 * pfVar4[2] + fVar7 * pfVar4[6] + fVar10 * pfVar4[10];
  }
  uVar1 = *param_2;
  if ((uVar1 & 0x400) == 0) {
    if ((((uVar1 & 0x800) != 0) || ((uVar1 & 0x1000) != 0)) || ((uVar1 & 0x2000) != 0)) {
      if ((uVar1 & 0x800) == 0) {
        if ((uVar1 & 0x1000) == 0) {
          if ((uVar1 & 0x2000) != 0) {
            fStack92 = pfVar4[8];
            fStack88 = pfVar4[9];
            fStack84 = pfVar4[10];
          }
        }
        else {
          fStack92 = pfVar4[4];
          fStack88 = pfVar4[5];
          fStack84 = pfVar4[6];
        }
      }
      else {
        fStack92 = *pfVar4;
        fStack88 = pfVar4[1];
        fStack84 = pfVar4[2];
      }
      fVar7 = (fStack84 * fStack12 + fVar6 * fStack92 + fStack16 * fStack88) *
              *(float *)(iVar2 + 0x18);
      fVar6 = fStack92 * fVar7 + fVar6;
      fStack16 = fStack88 * fVar7 + fStack16;
      fStack12 = fStack84 * fVar7 + fStack12;
      fVar7 = (fStack84 * fStack24 + fStack32 * fStack92 + fStack28 * fStack88) *
              *(float *)(iVar2 + 0x18);
      fStack32 = fStack92 * fVar7 + fStack32;
      fStack28 = fStack88 * fVar7 + fStack28;
      fStack24 = fStack84 * fVar7 + fStack24;
    }
  }
  else {
    fVar7 = (pfVar4[2] * fStack12 + fVar6 * *pfVar4 + fStack16 * pfVar4[1]) *
            *(float *)(iVar2 + 0x18);
    fVar6 = *pfVar4 * fVar7 + fVar6;
    fStack16 = pfVar4[1] * fVar7 + fStack16;
    fStack12 = pfVar4[2] * fVar7 + fStack12;
    fVar7 = (pfVar4[2] * fStack24 + fStack32 * *pfVar4 + fStack28 * pfVar4[1]) *
            *(float *)(iVar2 + 0x18);
    fStack32 = *pfVar4 * fVar7 + fStack32;
    fStack28 = pfVar4[1] * fVar7 + fStack28;
    fStack24 = pfVar4[2] * fVar7 + fStack24;
    fVar7 = (pfVar4[6] * fStack12 + fVar6 * pfVar4[4] + fStack16 * pfVar4[5]) *
            *(float *)(iVar2 + 0x1c);
    fVar6 = pfVar4[4] * fVar7 + fVar6;
    fStack16 = pfVar4[5] * fVar7 + fStack16;
    fStack12 = pfVar4[6] * fVar7 + fStack12;
    fVar7 = (pfVar4[6] * fStack24 + fStack32 * pfVar4[4] + fStack28 * pfVar4[5]) *
            *(float *)(iVar2 + 0x1c);
    fStack32 = pfVar4[4] * fVar7 + fStack32;
    fStack28 = pfVar4[5] * fVar7 + fStack28;
    fStack24 = pfVar4[6] * fVar7 + fStack24;
  }
  uVar3 = 0;
  fVar7 = fStack24 * fStack12 + fVar6 * fStack32 + fStack16 * fStack28;
  if (0.00000000 < fVar7) {
    if (((fStack24 * fStack24 + fStack32 * fStack32 + fStack28 * fStack28) - fVar8) *
        (fStack12 * fStack12 + fVar6 * fVar6 + fStack16 * fStack16) <= fVar7 * fVar7) {
      uVar3 = 1;
    }
    else {
      uVar3 = 0;
    }
  }
  return uVar3;
}



undefined4 proc_7F0752FC(int param_1,float *param_2,float *param_3,ushort **param_4)

{
  bool bVar1;
  ulonglong uVar2;
  longlong lVar3;
  ushort *puVar4;
  ushort *puVar5;
  
  puVar4 = *param_4;
  bVar1 = true;
  if (puVar4 == NULL) {
    puVar4 = **(ushort ***)(param_1 + 8);
  }
  else {
    *param_4 = NULL;
  }
  do {
    if (puVar4 == NULL) {
      return 0;
    }
    if ((!bVar1) || (puVar5 = *(ushort **)(puVar4 + 10), puVar5 == NULL)) {
      puVar5 = puVar4;
      if (puVar4 != NULL) {
        puVar5 = *(ushort **)(puVar4 + 6);
        while ((puVar5 == NULL &&
               (puVar4 = *(ushort **)(puVar4 + 4), puVar5 = puVar4, puVar4 != NULL))) {
          puVar5 = *(ushort **)(puVar4 + 6);
        }
      }
      if (puVar5 == NULL) {
        return 0;
      }
    }
    uVar2 = (ulonglong)*puVar5;
    bVar1 = true;
    puVar4 = puVar5;
    if (true) {
      puVar4 = puVar5;
      switch((uint)*puVar5 & 0xff) {
      case 8:
        proc_7F06E970(param_1,puVar5);
        puVar4 = puVar5;
        break;
      case 10:
        proc_7F074C68(param_1,puVar5,param_2,param_3);
        if (uVar2 != 0) {
          *param_4 = puVar5;
          return **(undefined4 **)(puVar5 + 2);
        }
        bVar1 = false;
        puVar4 = puVar5;
        break;
      case 0x11:
        lVar3 = proc_7F074CAC(param_1,puVar5,param_2,param_3);
        if (lVar3 != 0) {
          *param_4 = puVar5;
          return **(undefined4 **)(puVar5 + 2);
        }
        bVar1 = false;
        puVar4 = puVar5;
        break;
      case 0x12:
        process_12_handle_switch(param_1,puVar5);
        puVar4 = puVar5;
        break;
      case 0x17:
        process_17_pointer_to_head(param_1,puVar5);
        puVar4 = puVar5;
      }
    }
  } while( true );
}



undefined4 proc_7F07549C(int param_1,float *param_2,float *param_3,ushort **param_4)

{
  undefined4 uVar1;
  
  *param_4 = NULL;
  uVar1 = proc_7F0752FC(param_1,param_2,param_3,param_4);
  return uVar1;
}



uint proc_7F0754BC(int *param_1,int param_2)

{
  int iVar1;
  void *hw_address;
  uint uVar2;
  void *pvVar3;
  void *rdramtarget;
  int iVar4;
  
  iVar1 = *param_1;
  pvVar3 = NULL;
  iVar4 = (int)(uint)*(ushort *)((int)param_1 + 0xe) >> 3;
  if (iVar1 < 0) {
    pvVar3 = (void *)(iVar1 + param_2 * iVar4);
  }
  else {
    if (dword_80036414 != NULL) {
      rdramtarget = (void *)(dword_80036414[2] + 0xfU & 0xfffffff0);
      hw_address = (void *)(iVar1 + param_2 * iVar4);
      if (((uint)hw_address & 1) == 0) {
        uVar2 = iVar4 + 0xf;
        pvVar3 = rdramtarget;
      }
      else {
        hw_address = (void *)((int)hw_address - 1);
        pvVar3 = (void *)((int)rdramtarget + 1);
        uVar2 = iVar4 + 0x10;
      }
      romCopy(rdramtarget,hw_address,uVar2 & 0xfffffff0);
      *dword_80036414 = *dword_80036414 + 1;
      dword_80036414[2] = (int)rdramtarget + (uVar2 & 0xfffffff0);
    }
  }
  return (uint)pvVar3;
}



void proc_7F0755B0(void)

{
  if (dword_80036414 != NULL) {
    dword_80036414[2] = dword_80036414[1];
    *dword_80036414 = 0;
  }
  return;
}



void convert_obj_microcode_offset_to_rdram_addr(ushort *param_1,int param_2,int param_3)

{
  ushort uVar1;
  int *piVar2;
  longlong lVar3;
  int iVar4;
  longlong lVar5;
  int iVar6;
  ushort *puVar7;
  int iVar8;
  int iVar9;
  ushort *puVar10;
  
  if (param_1 == NULL) {
    return;
  }
  uVar1 = *param_1;
  do {
    if (*(int *)(param_1 + 2) != 0) {
      *(int *)(param_1 + 2) = *(int *)(param_1 + 2) + (param_3 - param_2);
    }
    if (*(int *)(param_1 + 4) != 0) {
      *(int *)(param_1 + 4) = *(int *)(param_1 + 4) + (param_3 - param_2);
    }
    if (*(int *)(param_1 + 6) != 0) {
      *(int *)(param_1 + 6) = *(int *)(param_1 + 6) + (param_3 - param_2);
    }
    if (*(int *)(param_1 + 8) != 0) {
      *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + (param_3 - param_2);
    }
    if (*(int *)(param_1 + 10) != 0) {
      *(int *)(param_1 + 10) = *(int *)(param_1 + 10) + (param_3 - param_2);
    }
    if (false) {
switchD_7f075670_caseD_a:
      puVar7 = *(ushort **)(param_1 + 10);
    }
    else {
      switch((uint)uVar1 & 0xff) {
      case 1:
        iVar4 = *(int *)(*(int *)(param_1 + 2) + 4);
        if (iVar4 != 0) {
          *(int *)(*(int *)(param_1 + 2) + 4) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 2:
        iVar4 = *(int *)(*(int *)(param_1 + 2) + 0x14);
        if (iVar4 != 0) {
          *(int *)(*(int *)(param_1 + 2) + 0x14) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 3:
        iVar4 = *(int *)(*(int *)(param_1 + 2) + 0x14);
        if (iVar4 != 0) {
          *(int *)(*(int *)(param_1 + 2) + 0x14) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 4:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 0xc) != 0) {
          *(int *)(iVar4 + 0xc) = *(int *)(iVar4 + 0xc) + (param_3 - param_2);
        }
        *(int *)(iVar4 + 8) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 5:
        piVar2 = *(int **)(param_1 + 2);
        iVar4 = 0;
        if (piVar2[1] != 0) {
          piVar2[1] = piVar2[1] + (param_3 - param_2);
        }
        iVar8 = 0;
        if (piVar2[2] != 0) {
          piVar2[2] = piVar2[2] + (param_3 - param_2);
        }
        if (piVar2[3] != 0) {
          piVar2[3] = piVar2[3] + (param_3 - param_2);
        }
        iVar6 = *piVar2;
        if (iVar6 < 1) {
          piVar2[0x69] = param_3;
        }
        else {
          do {
            iVar4 += 1;
            iVar9 = *(int *)(piVar2[1] + iVar8 + 4);
            if (iVar9 != 0) {
              *(int *)(piVar2[1] + iVar8 + 4) = iVar9 + (param_3 - param_2);
              iVar6 = *piVar2;
            }
            iVar8 += 8;
          } while (iVar4 < iVar6);
          piVar2[0x69] = param_3;
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 6:
        *(int *)(*(int *)(param_1 + 2) + 0x14) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 7:
        piVar2 = *(int **)(param_1 + 2);
        iVar4 = 0;
        if (*piVar2 != 0) {
          *piVar2 = *piVar2 + (param_3 - param_2);
        }
        if (piVar2[1] != 0) {
          piVar2[1] = piVar2[1] + (param_3 - param_2);
        }
        iVar8 = 0;
        if (piVar2[3] != 0) {
          piVar2[3] = piVar2[3] + (param_3 - param_2);
        }
        if (piVar2[4] != 0) {
          piVar2[4] = piVar2[4] + (param_3 - param_2);
        }
        if (piVar2[5] != 0) {
          piVar2[5] = piVar2[5] + (param_3 - param_2);
        }
        iVar6 = piVar2[2];
        if (iVar6 < 1) {
          piVar2[0x6b] = param_3;
        }
        else {
          do {
            iVar4 += 1;
            iVar9 = *(int *)(piVar2[3] + iVar8 + 4);
            if (iVar9 != 0) {
              *(int *)(piVar2[3] + iVar8 + 4) = iVar9 + (param_3 - param_2);
              iVar6 = piVar2[2];
            }
            iVar8 += 8;
          } while (iVar4 < iVar6);
          piVar2[0x6b] = param_3;
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 8:
        puVar7 = *(ushort **)(*(int *)(param_1 + 2) + 8);
        puVar10 = (ushort *)((int)puVar7 + (param_3 - param_2));
        if (puVar7 != NULL) {
          *(ushort **)(*(int *)(param_1 + 2) + 8) = puVar10;
          puVar7 = puVar10;
        }
        *(ushort **)(param_1 + 10) = puVar7;
        break;
      case 9:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 0x18) != 0) {
          *(int *)(iVar4 + 0x18) = *(int *)(iVar4 + 0x18) + (param_3 - param_2);
        }
        if (*(int *)(iVar4 + 0x1c) != 0) {
          *(int *)(iVar4 + 0x1c) = *(int *)(iVar4 + 0x1c) + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      default:
        goto switchD_7f075670_caseD_a;
      case 0xb:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 0x3c) != 0) {
          *(int *)(iVar4 + 0x3c) = *(int *)(iVar4 + 0x3c) + (param_3 - param_2);
        }
        *(int *)(iVar4 + 0x48) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0xc:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 0x18) != 0) {
          *(int *)(iVar4 + 0x18) = *(int *)(iVar4 + 0x18) + (param_3 - param_2);
        }
        *(int *)(iVar4 + 0x24) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0xd:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 0x10) != 0) {
          *(int *)(iVar4 + 0x10) = *(int *)(iVar4 + 0x10) + (param_3 - param_2);
        }
        if (*(int *)(iVar4 + 0x14) != 0) {
          *(int *)(iVar4 + 0x14) = *(int *)(iVar4 + 0x14) + (param_3 - param_2);
        }
        *(int *)(iVar4 + 0x1c) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0x11:
        iVar4 = *(int *)(*(int *)(param_1 + 2) + 0x14);
        if (iVar4 != 0) {
          *(int *)(*(int *)(param_1 + 2) + 0x14) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0x12:
        iVar4 = **(int **)(param_1 + 2);
        if (iVar4 != 0) {
          **(int **)(param_1 + 2) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0x14:
        iVar4 = *(int *)(*(int *)(param_1 + 2) + 4);
        if (iVar4 != 0) {
          *(int *)(*(int *)(param_1 + 2) + 4) = iVar4 + (param_3 - param_2);
        }
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0x16:
        iVar4 = *(int *)(param_1 + 2);
        if (*(int *)(iVar4 + 4) != 0) {
          *(int *)(iVar4 + 4) = *(int *)(iVar4 + 4) + (param_3 - param_2);
        }
        *(int *)(iVar4 + 0xc) = param_3;
        puVar7 = *(ushort **)(param_1 + 10);
        break;
      case 0x18:
        iVar4 = *(int *)(param_1 + 2);
        lVar3 = 0;
        if (*(int *)(iVar4 + 8) != 0) {
          *(int *)(iVar4 + 8) = *(int *)(iVar4 + 8) + (param_3 - param_2);
        }
        iVar8 = 0;
        if (*(int *)(iVar4 + 0x10) != 0) {
          *(int *)(iVar4 + 0x10) = *(int *)(iVar4 + 0x10) + (param_3 - param_2);
        }
        if (*(int *)(iVar4 + 0x14) != 0) {
          *(int *)(iVar4 + 0x14) = *(int *)(iVar4 + 0x14) + (param_3 - param_2);
        }
        lVar5 = (longlong)*(short *)(iVar4 + 0xe);
        if (lVar5 < 1) {
          *(int *)(iVar4 + 0x1c) = param_3;
        }
        else {
          do {
            lVar3 = (longlong)((int)lVar3 + 1);
            iVar9 = *(int *)(iVar4 + 0x10) + iVar8;
            iVar6 = *(int *)(iVar9 + 8);
            if (iVar6 != 0) {
              *(int *)(iVar9 + 8) = iVar6 + (param_3 - param_2);
              lVar5 = (longlong)*(short *)(iVar4 + 0xe);
            }
            iVar8 += 0x10;
          } while (lVar3 < lVar5);
          *(int *)(iVar4 + 0x1c) = param_3;
        }
        puVar7 = *(ushort **)(param_1 + 10);
      }
    }
    if ((puVar7 == NULL) && (puVar7 = param_1, param_1 != NULL)) {
      puVar7 = *(ushort **)(param_1 + 6);
      while ((puVar7 == NULL &&
             (param_1 = *(ushort **)(param_1 + 4), puVar7 = param_1, param_1 != NULL))) {
        puVar7 = *(ushort **)(param_1 + 6);
      }
    }
    if (puVar7 == NULL) {
      return;
    }
    uVar1 = *puVar7;
    param_1 = puVar7;
  } while( true );
}



void proc_7F075A90(object_header *param_1,int param_2,int param_3)

{
  int iVar1;
  longlong lVar2;
  int iVar3;
  int *piVar4;
  longlong lVar5;
  
  lVar5 = (longlong)param_1->num_offset_entries;
  lVar2 = 0;
  if (0 < lVar5) {
    iVar3 = 0;
    do {
      lVar2 = (longlong)((int)lVar2 + 1);
      piVar4 = (int *)(param_1->offset_obj_offset_block + iVar3);
      iVar1 = *piVar4;
      if (iVar1 != 0) {
        *piVar4 = iVar1 + (param_3 - param_2);
        lVar5 = (longlong)param_1->num_offset_entries;
      }
      iVar3 += 4;
    } while (lVar2 < lVar5);
  }
  convert_obj_microcode_offset_to_rdram_addr((ushort *)param_1->offset_obj_table,param_2,param_3);
  return;
}



void proc_7F075B08(void)

{
  return;
}



uint set_microcode_entry_numbers(ushort *param_1)

{
  ushort uVar1;
  int iVar2;
  ushort **ppuVar3;
  ushort *puVar4;
  ushort *puVar5;
  undefined2 uVar6;
  uint uVar7;
  
  uVar7 = 0;
  if (param_1 == NULL) {
    return 0;
  }
  uVar1 = *param_1;
  puVar4 = param_1;
  do {
    if (false) {
switchD_7f075b60_caseD_2:
      puVar5 = *(ushort **)(puVar4 + 10);
    }
    else {
      uVar6 = (undefined2)uVar7;
      switch((uint)uVar1 & 0xff) {
      case 1:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0xc) = uVar6;
        uVar7 = uVar7 + 0x18 & 0xffff;
        puVar5 = *(ushort **)(puVar4 + 10);
        break;
      default:
        goto switchD_7f075b60_caseD_2;
      case 7:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0x1aa) = uVar6;
        uVar7 = uVar7 + 1 & 0xffff;
        puVar5 = *(ushort **)(puVar4 + 10);
        break;
      case 8:
        iVar2 = *(int *)(puVar4 + 2);
        *(undefined2 *)(iVar2 + 0xc) = uVar6;
        puVar5 = *(ushort **)(iVar2 + 8);
        uVar7 = uVar7 + 1 & 0xffff;
        *(ushort **)(puVar4 + 10) = puVar5;
        break;
      case 9:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0x22) = uVar6;
        uVar7 = uVar7 + 1 & 0xffff;
        proc_7F06EA54((int)puVar4,0);
        puVar5 = *(ushort **)(puVar4 + 10);
        break;
      case 0xb:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0x44) = uVar6;
        uVar7 = uVar7 + 1 & 0xffff;
        puVar5 = *(ushort **)(puVar4 + 10);
        break;
      case 0xc:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0x20) = uVar6;
        uVar7 = uVar7 + 1 & 0xffff;
        puVar5 = *(ushort **)(puVar4 + 10);
        break;
      case 0x12:
        ppuVar3 = *(ushort ***)(puVar4 + 2);
        *(undefined2 *)(ppuVar3 + 1) = uVar6;
        puVar5 = *ppuVar3;
        uVar7 = uVar7 + 1 & 0xffff;
        *(ushort **)(puVar4 + 10) = puVar5;
        break;
      case 0x17:
        puVar5 = NULL;
        **(undefined2 **)(puVar4 + 2) = uVar6;
        uVar7 = uVar7 + 2 & 0xffff;
        *(undefined4 *)(puVar4 + 10) = 0;
        break;
      case 0x18:
        *(undefined2 *)(*(int *)(puVar4 + 2) + 0x1a) = uVar6;
        uVar7 = uVar7 + 2 & 0xffff;
        puVar5 = *(ushort **)(puVar4 + 10);
      }
    }
    if ((puVar5 == NULL) && (puVar5 = puVar4, puVar4 != NULL)) {
      while (puVar4 != *(ushort **)(param_1 + 4)) {
        puVar5 = *(ushort **)(puVar4 + 6);
        if ((puVar5 != NULL) || (puVar5 = *(ushort **)(puVar4 + 4), puVar4 = puVar5, puVar5 == NULL)
           ) goto LAB_7f075cd4;
      }
      puVar5 = NULL;
    }
LAB_7f075cd4:
    if (puVar5 == NULL) {
      return uVar7;
    }
    uVar1 = *puVar5;
    puVar4 = puVar5;
  } while( true );
}



void set_objuse_flag_compute_grp_nums_set_obj_loaded(object_header *objheader)

{
  uint uVar1;
  
  objheader->is_loaded_in_mem = 1;
  uVar1 = set_microcode_entry_numbers((ushort *)objheader->offset_obj_table);
  objheader->num_table_entries = (short)uVar1;
  return;
}



void unknown_object_microcode_handler(int param_1,ushort *param_2)

{
  ushort uVar1;
  int iVar2;
  ushort **ppuVar3;
  undefined *puVar4;
  undefined4 *puVar5;
  undefined2 *puVar6;
  undefined4 *puVar7;
  ushort *partdesc;
  ushort *puVar8;
  
  if (param_2 == NULL) {
    return;
  }
  uVar1 = *param_2;
  partdesc = param_2;
  do {
    if (false) {
switchD_7f075d80_caseD_2:
      puVar8 = *(ushort **)(partdesc + 10);
    }
    else {
      switch((uint)uVar1 & 0xff) {
      case 1:
        puVar4 = (undefined *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar4 = 0;
        *(undefined4 *)(puVar4 + 4) = 0;
        *(undefined4 *)(puVar4 + 8) = 0;
        *(undefined4 *)(puVar4 + 0xc) = 0;
        *(undefined4 *)(puVar4 + 0x10) = 0;
        *(undefined4 *)(puVar4 + 0x14) = 0;
        *(undefined4 *)(puVar4 + 0x18) = 0;
        *(undefined4 *)(puVar4 + 0x1c) = 0;
        puVar4[1] = 0;
        *(undefined4 *)(puVar4 + 0x34) = 0;
        *(undefined4 *)(puVar4 + 0x38) = 0;
        *(undefined4 *)(puVar4 + 0x3c) = 0;
        *(undefined4 *)(puVar4 + 0x30) = 0;
        *(undefined4 *)(puVar4 + 0x24) = 0;
        *(undefined4 *)(puVar4 + 0x28) = 0;
        *(undefined4 *)(puVar4 + 0x2c) = 0;
        *(undefined4 *)(puVar4 + 0x20) = 0;
        puVar4[2] = 0;
        *(undefined4 *)(puVar4 + 0x4c) = 0;
        *(undefined4 *)(puVar4 + 0x50) = 0;
        *(undefined4 *)(puVar4 + 0x54) = 0;
        *(undefined4 *)(puVar4 + 0x40) = 0;
        *(undefined4 *)(puVar4 + 0x44) = 0;
        *(undefined4 *)(puVar4 + 0x48) = 0;
        *(undefined4 *)(puVar4 + 0x5c) = 0;
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      default:
        goto switchD_7f075d80_caseD_2;
      case 7:
        puVar5 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar5 = 0;
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      case 8:
        iVar2 = *(int *)(partdesc + 2);
        puVar5 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar5 = 0;
        puVar8 = *(ushort **)(iVar2 + 8);
        *(ushort **)(partdesc + 10) = puVar8;
        break;
      case 9:
        puVar5 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar5 = 0;
        proc_7F06EB10(param_1,partdesc);
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      case 0xb:
        puVar6 = (undefined2 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar6 = 0;
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      case 0xc:
        puVar6 = (undefined2 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar6 = 0;
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      case 0x12:
        ppuVar3 = *(ushort ***)(partdesc + 2);
        puVar5 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar5 = 1;
        puVar8 = *ppuVar3;
        *(ushort **)(partdesc + 10) = puVar8;
        break;
      case 0x17:
        puVar5 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar5 = 0;
        puVar5[1] = 0;
        puVar8 = *(ushort **)(partdesc + 10);
        break;
      case 0x18:
        puVar5 = *(undefined4 **)(partdesc + 2);
        puVar7 = (undefined4 *)extract_id_from_object_structure_microcode(param_1,partdesc);
        *puVar7 = puVar5[2];
        puVar7[1] = *puVar5;
        puVar8 = *(ushort **)(partdesc + 10);
      }
    }
    if ((puVar8 == NULL) && (puVar8 = partdesc, partdesc != NULL)) {
      while (partdesc != *(ushort **)(param_2 + 4)) {
        puVar8 = *(ushort **)(partdesc + 6);
        if ((puVar8 != NULL) ||
           (puVar8 = *(ushort **)(partdesc + 4), partdesc = puVar8, puVar8 == NULL))
        goto LAB_7f075f44;
      }
      puVar8 = NULL;
    }
LAB_7f075f44:
    if (puVar8 == NULL) {
      return;
    }
    uVar1 = *puVar8;
    partdesc = puVar8;
  } while( true );
}



void proc_7F075F68(int param_1,ushort **param_2,undefined4 param_3)

{
  *(ushort ***)(param_1 + 8) = param_2;
  *(undefined4 *)(param_1 + 0x10) = param_3;
  *(undefined2 *)(param_1 + 2) = 0xffff;
  *(undefined4 *)(param_1 + 0x18) = 0;
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined4 *)(param_1 + 0x14) = 0x3f800000;
  unknown_object_microcode_handler(param_1,*param_2);
  return;
}



void proc_7F075FAC(int param_1,player_gait_header *param_2,undefined4 param_3)

{
  proc_7F075F68(param_1,(ushort **)param_2,param_3);
  *(undefined4 *)(param_1 + 0x20) = 0;
  *(undefined4 *)(param_1 + 0x54) = 0;
  *(undefined *)(param_1 + 0x26) = 0;
  *(undefined4 *)(param_1 + 0x98) = 0;
  *(undefined4 *)(param_1 + 0x9c) = 0;
  *(undefined4 *)(param_1 + 0xa0) = 0;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined4 *)(param_1 + 0x4c) = 0;
  *(undefined4 *)(param_1 + 0x5c) = 0;
  *(undefined4 *)(param_1 + 0x7c) = 0;
  *(undefined4 *)(param_1 + 0x84) = 0;
  *(undefined4 *)(param_1 + 0x88) = 0;
  *(undefined4 *)(param_1 + 0xb0) = 0;
  *(undefined4 *)(param_1 + 0x40) = 0x3f800000;
  *(undefined4 *)(param_1 + 0x70) = 0x3f800000;
  *(undefined4 *)(param_1 + 0xa4) = 0x3f800000;
  *(undefined4 *)(param_1 + 0xb8) = 0x3f800000;
  *(undefined4 *)(param_1 + 0x3c) = 0xbf800000;
  *(undefined4 *)(param_1 + 0x6c) = 0xbf800000;
  return;
}



void proc_7F076030(int param_1,int param_2,ushort *param_3,ushort **param_4)

{
  ushort **ppuVar1;
  uint uVar2;
  ushort *puVar3;
  
  ppuVar1 = (ushort **)extract_id_from_object_structure_microcode(param_1,param_3);
  *(ushort ***)ppuVar1 = param_4;
  ppuVar1[1] = (ushort *)(*(int *)(param_1 + 0x10) + (int)*(short *)(param_2 + 0x14) * 4);
  puVar3 = *param_4;
  *(ushort **)(param_3 + 10) = puVar3;
  if (puVar3 != NULL) {
    *(ushort **)(puVar3 + 4) = param_3;
    while (puVar3 = *(ushort **)(puVar3 + 6), puVar3 != NULL) {
      *(ushort **)(puVar3 + 4) = param_3;
    }
    puVar3 = *(ushort **)(param_3 + 10);
  }
  uVar2 = set_microcode_entry_numbers(puVar3);
  *(short *)(param_2 + 0x14) = *(short *)(param_2 + 0x14) + (short)uVar2;
  return;
}



void proc_7F0760C4(ushort **param_1,ushort **param_2,int *param_3)

{
  ushort uVar1;
  int iVar2;
  ushort *puVar3;
  ushort *puVar4;
  int iVar5;
  
  puVar3 = *param_2;
  iVar5 = 0;
  if (puVar3 == NULL) {
    puVar3 = *param_1;
  }
  if (puVar3 == NULL) {
    *param_3 = 0;
    puVar4 = puVar3;
  }
  else {
    uVar1 = *puVar3;
    while( true ) {
      if (true) {
        switch((uint)uVar1 & 0xff) {
        case 4:
          if (puVar3 == *param_2) {
            iVar2 = (*(int **)(puVar3 + 2))[1];
            if (iVar2 != *param_3) {
              iVar5 = iVar2;
            }
          }
          else {
            iVar5 = **(int **)(puVar3 + 2);
          }
          break;
        case 8:
          *(undefined4 *)(puVar3 + 10) = *(undefined4 *)(*(int *)(puVar3 + 2) + 8);
          break;
        case 9:
          proc_7F06EA54((int)puVar3,1);
          break;
        case 0x12:
          *(undefined4 *)(puVar3 + 10) = **(undefined4 **)(puVar3 + 2);
          break;
        case 0x16:
          if (puVar3 != *param_2) {
            iVar5 = *(int *)(*(int *)(puVar3 + 2) + 8);
          }
          break;
        case 0x18:
          if (puVar3 == *param_2) {
            iVar2 = (*(int **)(puVar3 + 2))[1];
            if (iVar2 != *param_3) {
              iVar5 = iVar2;
            }
          }
          else {
            iVar5 = **(int **)(puVar3 + 2);
          }
        }
      }
      if (iVar5 != 0) {
        *param_3 = iVar5;
        puVar4 = puVar3;
        goto LAB_7f07621c;
      }
      puVar4 = *(ushort **)(puVar3 + 10);
      if ((puVar4 == NULL) && (puVar4 = puVar3, puVar3 != NULL)) {
        puVar4 = *(ushort **)(puVar3 + 6);
        while ((puVar4 == NULL &&
               (puVar3 = *(ushort **)(puVar3 + 4), puVar4 = puVar3, puVar3 != NULL))) {
          puVar4 = *(ushort **)(puVar3 + 6);
        }
      }
      if (puVar4 == NULL) break;
      uVar1 = *puVar4;
      puVar3 = puVar4;
    }
    *param_3 = 0;
  }
LAB_7f07621c:
  *param_2 = puVar4;
  return;
}



void proc_7F07623C(undefined8 param_1,ushort *param_2,int param_3,int param_4)

{
  int *piVar1;
  ushort uVar2;
  
  uVar2 = *param_2 & 0xff;
  if (uVar2 == 4) {
    piVar1 = *(int **)(param_2 + 2);
    if (param_3 == *piVar1) {
      *piVar1 = param_4;
      return;
    }
    if (param_3 == piVar1[1]) {
      piVar1[1] = param_4;
      return;
    }
  }
  else {
    if (uVar2 == 0x16) {
      if (param_3 == *(int *)(*(int *)(param_2 + 2) + 8)) {
        *(int *)(*(int *)(param_2 + 2) + 8) = param_4;
      }
    }
    else {
      if (uVar2 != 0x18) {
        return;
      }
      piVar1 = *(int **)(param_2 + 2);
      if (param_3 == *piVar1) {
        *piVar1 = param_4;
        return;
      }
      if (param_3 == piVar1[1]) {
        piVar1[1] = param_4;
        return;
      }
    }
  }
  return;
}



void proc_7F0762E0(object_header *objectheader,byte *namestring,int param_3,uint *param_4)

{
  int iVar1;
  uint uVar2;
  ushort *puVar3;
  int index;
  int buffer;
  int buffer_remain;
  uint *puVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint auStack12 [2];
  ushort *puStack4;
  
  iVar1 = objectheader->offset_obj_offset_block;
  index = get_index_num_of_named_resource((char *)namestring);
  buffer = get_remaining_buffer_for_index(index);
  buffer_remain = get_temp_remaining_buffer_for_index(index);
  puStack4 = NULL;
  proc_7F0760C4((ushort **)objectheader,&puStack4,(int *)auStack12);
  uVar8 = auStack12[0];
  if (auStack12[0] != 0) {
    iVar5 = objectheader->offset_obj_offset_block + (auStack12[0] & 0xffffff);
    iVar7 = (buffer_remain - iVar5) + iVar1;
    iVar6 = (buffer + iVar1) - iVar7;
    proc_7F0CE794(iVar5,iVar6,iVar7);
    proc_7F0CBE50(objectheader,param_4);
    if (puStack4 == NULL) {
      iVar5 = objectheader->offset_obj_offset_block;
    }
    else {
      do {
        puVar3 = puStack4;
        uVar2 = auStack12[0];
        proc_7F0760C4((ushort **)objectheader,&puStack4,(int *)auStack12);
        if (auStack12[0] == 0) {
          iVar7 = ((iVar1 + buffer_remain) - objectheader->offset_obj_offset_block) -
                  (uVar2 & 0xffffff);
        }
        else {
          iVar7 = auStack12[0] - uVar2;
        }
        proc_7F07623C((longlong)(int)objectheader,puVar3,uVar2,uVar8);
        puVar4 = process_microcode_sort_display_modes_expand_image_calls
                           ((uint *)(objectheader->offset_obj_offset_block + (uVar2 & 0xffffff) +
                                    (iVar6 - iVar5)),iVar7,
                            (uint *)(objectheader->offset_obj_offset_block + (uVar8 & 0xffffff)),
                            param_4);
        uVar8 += (int)puVar4;
      } while (puStack4 != NULL);
      iVar5 = objectheader->offset_obj_offset_block;
    }
    proc_7F0BD138(index,iVar1,((iVar5 + (uVar8 & 0xffffff)) - iVar1) + 0xf & 0xfffffff0,
                  (ulonglong)(param_3 == 0));
  }
  return;
}



void load_object_fill_header
               (object_header *objheader,int *recallstring,int targetloc,int sizeleft,int param_5)

{
  undefined *in_v0_lo;
  
  if (targetloc == 0) {
    _load_resource_named_to_membank((byte *)recallstring,0,0x100,4);
  }
  else {
    in_v0_lo = _load_resource_named_to_buffer
                         ((byte *)recallstring,0,(undefined *)targetloc,sizeleft);
  }
  *(undefined **)&objheader->offset_obj_offset_block = in_v0_lo;
  *(undefined **)&objheader->offset_img_declaration =
       in_v0_lo + (int)objheader->num_offset_entries * 4;
  *(undefined **)&objheader->offset_obj_table =
       in_v0_lo + (int)objheader->num_offset_entries * 4 + (int)objheader->num_image_entries * 0xc;
  proc_7F075A90(objheader,0x5000000,(int)in_v0_lo);
  proc_7F0762E0(objheader,(byte *)recallstring,targetloc,(uint *)param_5);
  return;
}



void load_object_into_memory(object_header *header,int *recallstring)

{
  load_object_fill_header(header,recallstring,0,0,0);
  return;
}



void load_object_into_memory_unused_maybe
               (object_header *header,int *recallstring,int targetloc,int sizeleft)

{
  load_object_fill_header(header,recallstring,targetloc,sizeleft,0);
  return;
}



undefined8 is_less_than_certain_power_of_2(int number)

{
  if (number < 2) {
    return 0;
  }
  if (number < 3) {
    return 1;
  }
  if (number < 5) {
    return 2;
  }
  if (number < 9) {
    return 3;
  }
  if (number < 0x11) {
    return 4;
  }
  if (number < 0x21) {
    return 5;
  }
  if (number < 0x41) {
    return 6;
  }
  if (number < 0x81) {
    return 7;
  }
  return 8;
}



int ceil8000(int width)

{
  int iVar1;
  float fVar2;
  
  iVar1 = width + 0xf;
  if (iVar1 < 0) {
    iVar1 = width + 0x1e;
  }
  fVar2 = 32768.00000000 / (float)((iVar1 >> 4) << 4);
  iVar1 = (int)fVar2;
  return iVar1 + (int)((fVar2 - (float)iVar1) + flt_80054F90);
}



int ceil4000(int width)

{
  int iVar1;
  float fVar2;
  
  iVar1 = width + 7;
  if (iVar1 < 0) {
    iVar1 = width + 0xe;
  }
  fVar2 = 16384.00000000 / (float)((iVar1 >> 3) << 3);
  iVar1 = (int)fVar2;
  return iVar1 + (int)((fVar2 - (float)iVar1) + flt_80054F94);
}



int ceil2000(int width)

{
  int iVar1;
  float fVar2;
  
  iVar1 = width + 3;
  if (iVar1 < 0) {
    iVar1 = width + 6;
  }
  fVar2 = 8192.00000000 / (float)((iVar1 >> 2) << 2);
  iVar1 = (int)fVar2;
  return iVar1 + (int)((fVar2 - (float)iVar1) + flt_80054F98);
}



int ceil1000(int width)

{
  int iVar1;
  float fVar2;
  
  iVar1 = width + 3;
  if (iVar1 < 0) {
    iVar1 = width + 6;
  }
  fVar2 = 4096.00000000 / (float)((iVar1 >> 2) << 2);
  iVar1 = (int)fVar2;
  return iVar1 + (int)((fVar2 - (float)iVar1) + flt_80054F9C);
}



int proc_7F0767D8(int width,int height,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  if (param_3 < 1) {
    param_3 = 1;
  }
  iVar2 = width + 0xf;
  if (0 < param_3) {
    while( true ) {
      if (iVar2 < 0) {
        iVar2 += 0xf;
      }
      param_3 += -1;
      iVar1 += (iVar2 >> 4) * 4 * height;
      iVar2 = width >> 1;
      if (width < 2) {
        iVar2 = width;
      }
      width = iVar2;
      if (1 < height) {
        height = height >> 1;
      }
      if (param_3 < 1) break;
      iVar2 = width + 0xf;
    }
  }
  return iVar1;
}



int proc_7F076848(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  if (param_3 < 1) {
    param_3 = 1;
  }
  iVar2 = param_1 + 7;
  if (0 < param_3) {
    while( true ) {
      if (iVar2 < 0) {
        iVar2 += 7;
      }
      param_3 += -1;
      iVar1 += (iVar2 >> 3) * 4 * param_2;
      iVar2 = param_1 >> 1;
      if (param_1 < 2) {
        iVar2 = param_1;
      }
      param_1 = iVar2;
      if (1 < param_2) {
        param_2 = param_2 >> 1;
      }
      if (param_3 < 1) break;
      iVar2 = param_1 + 7;
    }
  }
  return iVar1;
}



int proc_7F0768B8(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  if (param_3 < 1) {
    param_3 = 1;
  }
  iVar2 = param_1 + 3;
  if (0 < param_3) {
    while( true ) {
      if (iVar2 < 0) {
        iVar2 += 3;
      }
      param_3 += -1;
      iVar1 += (iVar2 >> 2) * 4 * param_2;
      iVar2 = param_1 >> 1;
      if (param_1 < 2) {
        iVar2 = param_1;
      }
      param_1 = iVar2;
      if (1 < param_2) {
        param_2 = param_2 >> 1;
      }
      if (param_3 < 1) break;
      iVar2 = param_1 + 3;
    }
  }
  return iVar1;
}



int proc_7F076928(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  if (param_3 < 1) {
    param_3 = 1;
  }
  iVar2 = param_1 + 3;
  if (0 < param_3) {
    while( true ) {
      if (iVar2 < 0) {
        iVar2 += 3;
      }
      param_3 += -1;
      iVar1 += (iVar2 >> 2) * 4 * param_2;
      iVar2 = param_1 >> 1;
      if (param_1 < 2) {
        iVar2 = param_1;
      }
      param_1 = iVar2;
      if (1 < param_2) {
        param_2 = param_2 >> 1;
      }
      if (param_3 < 1) break;
      iVar2 = param_1 + 3;
    }
  }
  return iVar1;
}



void generate_microcode_for_othermode_setting
               (undefined4 *DL,int param_2,longlong param_3,longlong bowtie)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  
  puVar1 = (undefined4 *)*DL;
  if (param_3 != 1) {
    *puVar1 = 0xe7000000;
    puVar1[1] = 0;
    puVar1[3] = 0x100000;
    puVar1[2] = 0xba001402;
    puVar2 = puVar1 + 4;
    if (param_2 != 1) {
      if (param_2 == 2) {
        if (bowtie == 0) {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0xc1841c8;
        }
        else {
          if (bowtie < 2) {
            *puVar2 = 0xb900031d;
            puVar1[5] = 0xc1849d8;
          }
          else {
            *puVar2 = 0xb900031d;
            puVar1[5] = 0xc184dd8;
          }
        }
        goto LAB_7f076d60;
      }
      if (param_2 == 3) {
        if (bowtie == 0) {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0xc193048;
        }
        else {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0xc193078;
        }
        goto LAB_7f076d60;
      }
      if (param_2 == 4) {
        if (bowtie == 0) {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0xc184340;
        }
        else {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0xc184b50;
        }
        goto LAB_7f076d60;
      }
    }
    if (bowtie == 0) {
      *puVar2 = 0xb900031d;
      puVar1[5] = 0xc192048;
    }
    else {
      if (bowtie < 2) {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0xc192078;
      }
      else {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0xc192d58;
      }
    }
    goto LAB_7f076d60;
  }
  *puVar1 = 0xe7000000;
  puVar1[1] = 0;
  puVar1[2] = 0xba001402;
  puVar1[3] = 0;
  puVar2 = puVar1 + 4;
  if (param_2 != 1) {
    if (param_2 == 2) {
      if (bowtie == 0) {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0x5041c8;
      }
      else {
        if (bowtie < 2) {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0x5049d8;
        }
        else {
          *puVar2 = 0xb900031d;
          puVar1[5] = 0x504dd8;
        }
      }
      goto LAB_7f076d60;
    }
    if (param_2 == 3) {
      if (bowtie == 0) {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0x553048;
      }
      else {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0x553078;
      }
      goto LAB_7f076d60;
    }
    if (param_2 == 4) {
      if (bowtie == 0) {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0x504340;
      }
      else {
        *puVar2 = 0xb900031d;
        puVar1[5] = 0x504b50;
      }
      goto LAB_7f076d60;
    }
  }
  if (bowtie == 0) {
    *puVar2 = 0xb900031d;
    puVar1[5] = 0x552048;
  }
  else {
    if (bowtie < 2) {
      *puVar2 = 0xb900031d;
      puVar1[5] = 0x552078;
    }
    else {
      *puVar2 = 0xb900031d;
      puVar1[5] = 0x552d58;
    }
  }
LAB_7f076d60:
  *(undefined4 **)DL = puVar1 + 6;
  return;
}



void likely_generate_DL_for_image_declaration
               (uint **DLtarget,uint *imgcall,int param_3,longlong param_4,uint param_5)

{
  byte bVar1;
  byte bVar2;
  uint *puVar5;
  uint *puVar6;
  int number;
  uint uVar7;
  undefined8 uVar3;
  undefined8 uVar4;
  uint uVar8;
  uint uVar9;
  uint *puVar10;
  uint uVar11;
  int iVar12;
  ulonglong uVar13;
  ulonglong uVar14;
  int number_00;
  ulonglong uVar15;
  uint uStack268;
  uint uStack180;
  uint uStack176;
  uint uStack172;
  byte bStack166;
  uint uStack164;
  uint uStack160;
  uint uStack60;
  uint uStack56;
  uint uStack52;
  uint uStack48;
  uint uStack44;
  uint *puStack4;
  
  puStack4 = *DLtarget;
  uVar7 = (uint)param_4;
  if (imgcall == NULL) {
    generate_microcode_for_othermode_setting(&puStack4,param_3,1,param_4);
    puVar5 = puStack4;
    if (param_4 < 2) {
      puStack4[1] = 0xffffffff;
      *puStack4 = 0xbb000001;
    }
    else {
      puStack4[1] = 0xffffffff;
      *puStack4 = (uVar7 & 0xff) << 0x10 | 0xbb000001;
    }
    puStack4 = puStack4 + 2;
    *puStack4 = 0xfcffffff;
    puVar5[3] = 0xfffe793c;
    puStack4 = puVar5 + 4;
    goto LAB_7f077b80;
  }
  uVar11 = *imgcall;
  bVar1 = *(byte *)(imgcall + 1);
  uVar14 = (ulonglong)bVar1;
  bVar2 = *(byte *)((int)imgcall + 5);
  uVar13 = (ulonglong)bVar2;
  if (uVar11 < 0xbb9) {
    load_image_to_buffer(imgcall,NULL);
    uVar11 = *imgcall;
  }
  puVar5 = proc_7F0CBB0C((uint)*(ushort *)((uVar11 | 0x80000000) - 8),NULL);
  if (*(byte *)((int)imgcall + 6) == 0) {
    if (puVar5 == NULL) {
      uVar13 = (ulonglong)*(byte *)((int)imgcall + 7);
      uVar14 = (ulonglong)*(byte *)(imgcall + 2);
    }
    else {
      uVar13 = SEXT48((int)((puVar5[2] << 0x1b) >> 0x1d));
      uStack44 = (puVar5[3] >> 0x1e) << 0xe;
      uVar14 = (longlong)(int)puVar5[2] & 3;
    }
    uVar11 = (uint)bVar1;
    if (uVar14 == 0) {
      uStack48 = 2;
      number = proc_7F0767D8((uint)bVar1,(uint)bVar2,1);
      uStack52 = number - 1;
      uStack56 = ceil8000((uint)bVar1);
      uStack60 = (int)(uVar11 + 0xf) >> 4;
    }
    else {
      if (uVar14 == 1) {
        uStack48 = 2;
        number = proc_7F076848((uint)bVar1,(uint)bVar2,1);
        uStack52 = number - 1;
        uStack56 = ceil4000((uint)bVar1);
        uStack60 = (int)(uVar11 + 7) >> 3;
      }
      else {
        if (uVar14 == 2) {
          uStack48 = 2;
          number = proc_7F0768B8((uint)bVar1,(uint)bVar2,1);
          uStack52 = number - 1;
          uStack56 = ceil2000((uint)bVar1);
          uStack60 = (int)(uVar11 + 3) >> 2;
        }
        else {
          if (uVar14 == 3) {
            uStack48 = 3;
            number = proc_7F076928((uint)bVar1,(uint)bVar2,1);
            uStack52 = number - 1;
            uStack56 = ceil1000((uint)bVar1);
            uStack60 = (int)(uVar11 + 3) >> 2;
          }
        }
      }
    }
    generate_microcode_for_othermode_setting(&puStack4,param_3,1,param_4);
    puVar10 = puStack4;
    if (param_4 < 2) {
      puStack4[1] = 0xffffffff;
      *puStack4 = 0xbb000001;
    }
    else {
      puStack4[1] = 0xffffffff;
      *puStack4 = (uVar7 & 0xff) << 0x10 | 0xbb000001;
    }
    puStack4 = puStack4 + 2;
    puVar6 = puVar10 + 4;
    puVar10[3] = 0;
    *puStack4 = 0xba001001;
    if (uVar13 == 0) {
      *puVar6 = 0xfc121824;
      puVar10[5] = 0xff33ffff;
LAB_7f077150:
      puStack4 = puVar10 + 6;
      puVar6 = puStack4;
    }
    else {
      if (uVar13 == 2) {
        if (uStack44 == 0x8000) {
          puVar10[5] = 0xff33ffff;
          *puVar6 = 0xfc121824;
        }
        else {
          if (uStack44 != 0xc000) goto LAB_7f077154;
          *puVar6 = 0xfc121824;
          puVar10[5] = 0xff33ffff;
        }
        goto LAB_7f077150;
      }
      if (uVar13 == 3) {
        puVar10[5] = 0xff33ffff;
        *puVar6 = 0xfc121824;
        goto LAB_7f077150;
      }
      if (uVar13 == 4) {
        puVar10[5] = 0xfffff9fc;
        *puVar6 = 0xfc127e24;
        goto LAB_7f077150;
      }
    }
LAB_7f077154:
    uVar9 = ((uint)uVar13 & 7) << 0x15;
    uVar7 = (uStack48 & 3) << 0x13;
    *puVar6 = uVar9 | 0xfd000000 | uVar7;
    uVar9 |= 0xf5000000;
    puVar6[1] = *imgcall;
    puVar6[2] = uVar9 | uVar7;
    puVar6[3] = ((uint)*(byte *)((int)imgcall + 10) & 3) << 0x12 | 0x7000000 |
                ((uint)*(byte *)((int)imgcall + 9) & 3) << 8;
    puVar6[5] = 0;
    puVar6[4] = 0xe6000000;
    puVar6[6] = 0xf3000000;
    uVar7 = 0x7ff;
    if ((int)uStack52 < 0x7ff) {
      uVar7 = uStack52;
    }
    puVar6[7] = (uVar7 & 0xfff) << 0xc | 0x7000000 | uStack56 & 0xfff;
    puVar6[9] = 0;
    puVar6[8] = 0xe7000000;
    if (uVar13 == 2) {
      uVar7 = 0x3ff - (uint)*(byte *)((int)puVar5 + 10);
      if (uStack52 + 1 <= uVar7) {
        uVar7 = 0;
      }
      puVar6[10] = 0xf5000100;
      puVar6[0xb] = 0x7000000;
      uVar8 = (uStack52 + 1) - uVar7;
      puVar6[0xd] = 0;
      puVar6[0xc] = 0xe6000000;
      uVar7 = (uVar7 & 0x3ff) << 2;
      puVar6[0xe] = (uVar8 & 0x3ff) << 0xe | 0xf0000000 | uVar7;
      puVar6[0xf] = ((uint)*(byte *)((int)puVar5 + 10) + uVar8 & 0x3ff) << 0xe | 0x7000000 | uVar7;
      puVar6[0x11] = 0;
      puVar6[0x10] = 0xe7000000;
      puStack4 = puVar6 + 0x14;
      puVar6[0x12] = 0xba000e02;
      puVar6[0x13] = uStack44;
    }
    else {
      puStack4 = puVar6 + 0xc;
      puVar6[0xb] = 0;
      puVar6[10] = 0xba000e02;
    }
    puVar5 = puStack4;
    *puStack4 = uVar9 | ((uint)uVar14 & 3) << 0x13 | (uStack60 & 0x1ff) << 9;
    puStack4 = puStack4 + 2;
    uVar3 = is_less_than_certain_power_of_2((uint)bVar2);
    uVar4 = is_less_than_certain_power_of_2((uint)bVar1);
    puVar5[1] = ((uint)uVar4 & 0xf) << 4 | ((uint)*(byte *)((int)imgcall + 10) & 3) << 0x12 |
                ((uint)uVar3 & 0xf) << 0xe | ((uint)*(byte *)((int)imgcall + 9) & 3) << 8;
    *puStack4 = (param_5 & 0xfff) << 0xc | 0xf2000000 | param_5 & 0xfff;
    puStack4[1] = ((uVar11 - 1) * 4 + param_5 & 0xfff) << 0xc |
                  ((uint)bVar2 - 1) * 4 + param_5 & 0xfff;
    puStack4 = puStack4 + 2;
    goto LAB_7f077b80;
  }
  uStack160 = 0;
  uStack164 = (uint)*(byte *)((int)imgcall + 6);
  if (puVar5 == NULL) {
    bStack166 = *(byte *)(imgcall + 2);
    uVar15 = (ulonglong)*(byte *)((int)imgcall + 7);
LAB_7f07748c:
    if (bStack166 == 0) {
      uStack176 = 2;
      number = proc_7F0767D8((uint)bVar1,(uint)bVar2,uStack164);
      uStack180 = number - 1;
    }
    else {
      if (bStack166 == 1) {
        uStack176 = 2;
        number = proc_7F076848((uint)bVar1,(uint)bVar2,uStack164);
        uStack180 = number - 1;
      }
      else {
        if (bStack166 == 2) {
          uStack176 = 2;
          number = proc_7F0768B8((uint)bVar1,(uint)bVar2,uStack164);
          uStack180 = number - 1;
        }
        else {
          if (bStack166 == 3) {
            uStack176 = 3;
            number = proc_7F076928((uint)bVar1,(uint)bVar2,uStack164);
            uStack180 = number - 1;
          }
        }
      }
    }
  }
  else {
    bStack166 = (byte)puVar5[2] & 3;
    uVar15 = SEXT48((int)((puVar5[2] << 0x1b) >> 0x1d));
    uStack172 = (puVar5[3] >> 0x1e) << 0xe;
    if (-1 < (int)(puVar5[3] << 2)) goto LAB_7f07748c;
    proc_7F0CC9D4(puVar5,&uStack176,(int *)&uStack180);
  }
  generate_microcode_for_othermode_setting(&puStack4,param_3,2,param_4);
  puVar10 = puStack4;
  bVar1 = bStack166;
  if (param_4 < 2) {
    puStack4[1] = 0xffffffff;
    *puStack4 = (uStack164 - 1 & 7) << 0xb | 0xbb000001;
  }
  else {
    puStack4[1] = 0xffffffff;
    *puStack4 = (uVar7 & 0xff) << 0x10 | 0xbb000000 | (uStack164 - 1 & 7) << 0xb | 1;
  }
  puStack4 = puStack4 + 2;
  puVar6 = puVar10 + 4;
  puVar10[3] = 0x10000;
  *puStack4 = 0xba001001;
  if (uVar15 == 0) {
    *puVar6 = 0xfc26a004;
    puVar10[5] = 0x1f1093ff;
LAB_7f0776ec:
    puStack4 = puVar10 + 6;
    puVar6 = puStack4;
  }
  else {
    if (uVar15 == 2) {
      if (uStack172 == 0x8000) {
        puVar10[5] = 0xff33ffff;
        *puVar6 = 0xfc121824;
      }
      else {
        if (uStack172 != 0xc000) goto LAB_7f0776f0;
        *puVar6 = 0xfc121824;
        puVar10[5] = 0xff33ffff;
      }
      goto LAB_7f0776ec;
    }
    if (uVar15 == 3) {
      puVar10[5] = 0x1f1093ff;
      *puVar6 = 0xfc26a004;
      goto LAB_7f0776ec;
    }
    if (uVar15 == 4) {
      puVar10[5] = 0x1ffc93fc;
      *puVar6 = 0xfc26a004;
      goto LAB_7f0776ec;
    }
  }
LAB_7f0776f0:
  uVar11 = ((uint)uVar15 & 7) << 0x15;
  *puVar6 = uVar11 | 0xfd000000 | (uStack176 & 3) << 0x13;
  uVar11 |= 0xf5000000;
  puVar6[1] = *imgcall;
  puVar6[2] = uVar11 | (uStack176 & 3) << 0x13;
  puVar6[3] = 0x7000000;
  puVar6[5] = 0;
  puVar6[4] = 0xe6000000;
  puVar6[6] = 0xf3000000;
  uVar7 = 0x7ff;
  if ((int)uStack180 < 0x7ff) {
    uVar7 = uStack180;
  }
  puVar6[7] = (uVar7 & 0xfff) << 0xc | 0x7000000;
  puVar6[9] = 0;
  puVar6[8] = 0xe7000000;
  if (uVar15 == 2) {
    uVar7 = 0x3ff - (uint)*(byte *)((int)puVar5 + 10);
    if (uStack180 + 1 <= uVar7) {
      uVar7 = 0;
    }
    puVar6[10] = 0xf5000100;
    puVar6[0xb] = 0x7000000;
    uVar9 = (uStack180 + 1) - uVar7;
    puVar6[0xd] = 0;
    puVar6[0xc] = 0xe6000000;
    uVar7 = (uVar7 & 0x3ff) << 2;
    puVar6[0xe] = (uVar9 & 0x3ff) << 0xe | 0xf0000000 | uVar7;
    puVar6[0xf] = ((uint)*(byte *)((int)puVar5 + 10) + uVar9 & 0x3ff) << 0xe | 0x7000000 | uVar7;
    puVar6[0x11] = 0;
    puVar6[0x10] = 0xe7000000;
    puStack4 = puVar6 + 0x14;
    puVar6[0x13] = uStack172;
    puVar6[0x12] = 0xba000e02;
  }
  else {
    puStack4 = puVar6 + 0xc;
    puVar6[0xb] = 0;
    puVar6[10] = 0xba000e02;
  }
  uVar15 = 0;
  if (0 < (int)uStack164) {
    uVar11 |= ((uint)bStack166 & 3) << 0x13;
    do {
      if (0 < (longlong)uVar15) {
        if ((puVar5 == NULL) || (-1 < (int)(puVar5[3] << 2))) {
          if (1 < (longlong)uVar14) {
            uVar14 = (longlong)((int)uVar14 >> 1);
          }
          if (1 < (longlong)uVar13) {
            uVar13 = (longlong)((int)uVar13 >> 1);
          }
        }
        else {
          uVar14 = proc_7F0CC714(puVar5,uVar15);
          uVar13 = proc_7F0CC7FC(puVar5,uVar15);
        }
      }
      puVar10 = puStack4;
      number_00 = (int)uVar14;
      number = (int)uVar13;
      if (bVar1 == 0) {
        iVar12 = number_00 + 0xf;
        if (iVar12 < 0) {
          iVar12 = number_00 + 0x1e;
        }
        uStack268 = iVar12 >> 4;
        iVar12 = uStack268 * number;
        uVar7 = uVar11 | (uStack268 & 0x1ff) << 9;
      }
      else {
        if (bVar1 == 1) {
          iVar12 = number_00 + 7;
          if (iVar12 < 0) {
            iVar12 = number_00 + 0xe;
          }
          uStack268 = iVar12 >> 3;
          iVar12 = uStack268 * number;
          uVar7 = uVar11 | (uStack268 & 0x1ff) << 9;
        }
        else {
          if (bVar1 == 2) {
            iVar12 = number_00 + 3;
            if (iVar12 < 0) {
              iVar12 = number_00 + 6;
            }
            uStack268 = iVar12 >> 2;
            iVar12 = uStack268 * number;
            uVar7 = uVar11 | (uStack268 & 0x1ff) << 9;
          }
          else {
            if (bVar1 == 3) {
              iVar12 = number_00 + 3;
              if (iVar12 < 0) {
                iVar12 = number_00 + 6;
              }
              uStack268 = iVar12 >> 2;
              iVar12 = uStack268 * number;
              uVar7 = uVar11 | (uStack268 & 0x1ff) << 9;
            }
            else {
              iVar12 = uStack268 * number;
              uVar7 = uVar11 | (uStack268 & 0x1ff) << 9;
            }
          }
        }
      }
      *puStack4 = uVar7 | uStack160 & 0x1ff;
      puStack4 = puStack4 + 2;
      uVar3 = is_less_than_certain_power_of_2(number);
      uVar4 = is_less_than_certain_power_of_2(number_00);
      uVar7 = (uint)uVar15;
      uVar9 = (uVar7 & 7) << 0x18;
      puVar10[1] = ((uint)uVar4 & 0xf) << 4 | uVar9 |
                   ((uint)*(byte *)((int)imgcall + 10) & 3) << 0x12 | ((uint)uVar3 & 0xf) << 0xe |
                   (uVar7 & 0xf) << 10 | ((uint)*(byte *)((int)imgcall + 9) & 3) << 8 | uVar7 & 0xf;
      uVar15 = SEXT48((int)(uVar7 + 1));
      puVar10 = puStack4 + 2;
      *puStack4 = (param_5 & 0xfff) << 0xc | 0xf2000000 | param_5 & 0xfff;
      puStack4[1] = uVar9 | ((number_00 + -1) * 4 + param_5 & 0xfff) << 0xc |
                    (number + -1) * 4 + param_5 & 0xfff;
      uStack160 += iVar12;
      puStack4 = puVar10;
    } while (uVar15 != (longlong)(int)uStack164);
  }
LAB_7f077b80:
  *DLtarget = puStack4;
  return;
}



void proc_7F077BB8(u32 param_1,u32 param_2,u32 param_3,u32 param_4)

{
  return;
}



void proc_7F077BD0(void)

{
  return;
}



void set_BONDdata_screensize(float width,float height)

{
  ptr_BONDdata->maybe_screen_width = width;
  ptr_BONDdata->maybe_screen_height = height;
  ptr_BONDdata->maybe_half_screen_width = width * 0.50000000;
  ptr_BONDdata->maybe_half_screen_height = height * 0.50000000;
  return;
}



void set_ulx_uly(f32 ulx,f32 uly)

{
  *(f32 *)&ptr_BONDdata->ulx = ulx;
  *(f32 *)&ptr_BONDdata->uly = uly;
  return;
}



void proc_7F077C30(f32 param_1,f32 param_2,f32 param_3,f32 param_4,f32 param_5)

{
  *(f32 *)&ptr_BONDdata->field_10A0 = param_1;
  *(f32 *)&ptr_BONDdata->field_10A4 = param_2;
  *(f32 *)&ptr_BONDdata->field_10A8 = param_5;
  return;
}



void proc_7F077C5C(void)

{
  float fVar1;
  float fVar2;
  uint uVar3;
  
  fVar2 = flt_80054FA0;
  fVar1 = sinf((ptr_BONDdata->field_10A4 * flt_80054FA0) / 360.00000000);
  fVar2 = cosf((ptr_BONDdata->field_10A4 * fVar2) / 360.00000000);
  *(float *)&ptr_BONDdata->field_10B8 = fVar1 / (fVar2 * ptr_BONDdata->maybe_half_screen_height);
  *(float *)&ptr_BONDdata->field_10B4 =
       ((float)ptr_BONDdata->field_10B8 * ptr_BONDdata->field_10A8 *
       ptr_BONDdata->maybe_half_screen_height) / ptr_BONDdata->maybe_half_screen_width;
  *(float *)&ptr_BONDdata->field_10BC = 1.00000000 / (float)ptr_BONDdata->field_10B4;
  *(float *)&ptr_BONDdata->field_10C0 = 1.00000000 / (float)ptr_BONDdata->field_10B8;
  ptr_BONDdata->field_10F4 = ptr_BONDdata->field_10B8;
  fVar2 = sinf(flt_80054FA4);
  fVar1 = cosf(flt_80054FA8);
  *(float *)&ptr_BONDdata->field_10F0 = fVar2 / (fVar1 * 120.00000000);
  *(float *)&ptr_BONDdata->field_10F8 =
       (float)ptr_BONDdata->field_10F4 / (float)ptr_BONDdata->field_10F0;
  fVar2 = (float)ptr_BONDdata->field_10F8 * 65536.00000000;
  if (4294967296.00000000 < fVar2) {
    ptr_BONDdata->field_10FC = -1;
    goto LAB_7f077e34;
  }
  if (false) {
    fVar1 = ROUND(fVar2);
  }
  else {
    fVar1 = FLOOR(fVar2);
  }
  uVar3 = (uint)fVar1;
  if (false) {
    if (false) {
      fVar2 = ROUND(fVar2 - 2147483648.00000000);
    }
    else {
      fVar2 = FLOOR(fVar2 - 2147483648.00000000);
    }
    if (false) goto LAB_7f077e10;
    uVar3 = (int)fVar2 | 0x80000000;
  }
  else {
    if ((int)uVar3 < 0) {
LAB_7f077e10:
      uVar3 = 0xffffffff;
    }
  }
  ptr_BONDdata->field_10FC = uVar3;
LAB_7f077e34:
  fVar1 = ptr_BONDdata->maybe_half_screen_height * (float)ptr_BONDdata->field_10B8;
  fVar2 = sqrtf(fVar1 * fVar1 + 1.00000000);
  ptr_BONDdata->x = 0;
  *(float *)&ptr_BONDdata->y = 1.00000000 / fVar2;
  *(float *)&ptr_BONDdata->z = fVar1 * (1.00000000 / fVar2);
  fVar1 = -ptr_BONDdata->maybe_half_screen_width * (float)ptr_BONDdata->field_10B4;
  fVar2 = sqrtf(fVar1 * fVar1 + 1.00000000);
  *(float *)&ptr_BONDdata->field_110C = -(1.00000000 / fVar2);
  ptr_BONDdata->field_1110 = 0;
  *(float *)&ptr_BONDdata->field_1114 = -fVar1 * (1.00000000 / fVar2);
  return;
}



void proc_7F077EEC(float *param_1,float *param_2,float param_3)

{
  float in_a2_lo;
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar2 = (ptr_BONDdata->maybe_half_screen_height - (param_1[1] - ptr_BONDdata->uly)) *
          (float)ptr_BONDdata->field_10B8;
  fVar3 = ((*param_1 - ptr_BONDdata->ulx) - ptr_BONDdata->maybe_half_screen_width) *
          (float)ptr_BONDdata->field_10B4;
  fVar1 = sqrtf(fVar3 * fVar3 + fVar2 * fVar2 + 1.00000000);
  fVar1 = in_a2_lo / fVar1;
  *param_2 = fVar3 * fVar1;
  param_2[1] = fVar2 * fVar1;
  param_2[2] = fVar1 * -1.00000000;
  return;
}



void proc_7F077FB4(float *param_1,float param_2,float *param_3)

{
  float *in_a2_lo;
  
  in_a2_lo[1] = param_1[1] * (float)param_3 * (float)ptr_BONDdata->field_10B8;
  *in_a2_lo = *param_1 * (float)param_3 * (float)ptr_BONDdata->field_10B4;
  return;
}



void proc_7F077FF4(float *param_1,float *param_2)

{
  float fVar1;
  
  fVar1 = param_1[2];
  param_2[1] = param_1[1] * (1.00000000 / fVar1) * (float)ptr_BONDdata->field_10C0 +
               ptr_BONDdata->uly + ptr_BONDdata->maybe_half_screen_height;
  *param_2 = (ptr_BONDdata->ulx + ptr_BONDdata->maybe_half_screen_width) -
             *param_1 * (1.00000000 / fVar1) * (float)ptr_BONDdata->field_10BC;
  return;
}



void proc_7F078060(float *param_1,float *param_2)

{
  float fVar1;
  
  fVar1 = flt_80054FAC;
  if (param_1[2] != 0.00000000) {
    fVar1 = 1.00000000 / param_1[2];
  }
  param_2[1] = param_1[1] * fVar1 * (float)ptr_BONDdata->field_10C0 +
               ptr_BONDdata->uly + ptr_BONDdata->maybe_half_screen_height;
  *param_2 = (ptr_BONDdata->ulx + ptr_BONDdata->maybe_half_screen_width) -
             *param_1 * fVar1 * (float)ptr_BONDdata->field_10BC;
  return;
}



void proc_7F0780F0(float *param_1,float param_2,float *param_3)

{
  float *in_a2_lo;
  
  in_a2_lo[1] = param_1[1] * (1.00000000 / (float)param_3) * (float)ptr_BONDdata->field_10C0;
  *in_a2_lo = *param_1 * (1.00000000 / (float)param_3) * (float)ptr_BONDdata->field_10BC;
  return;
}



void proc_7F078140(float *param_1,float *param_2,float param_3,float param_4,float param_5)

{
  float in_a3_lo;
  float fVar1;
  float fVar2;
  float __x;
  float in_stack_00000010;
  
  __x = (in_a3_lo * flt_80054FB0) / 360.00000000;
  fVar1 = sinf(__x);
  __x = cosf(__x);
  fVar2 = ptr_BONDdata->maybe_half_screen_height;
  fVar1 = fVar1 / (__x * fVar2);
  __x = (fVar2 - (param_1[1] - ptr_BONDdata->uly)) * fVar1;
  fVar2 = ((*param_1 - ptr_BONDdata->ulx) - ptr_BONDdata->maybe_half_screen_width) *
          ((fVar1 * in_stack_00000010 * fVar2) / ptr_BONDdata->maybe_half_screen_width);
  fVar1 = sqrtf(fVar2 * fVar2 + __x * __x + 1.00000000);
  param_5 = param_5 / fVar1;
  *param_2 = fVar2 * param_5;
  param_2[1] = __x * param_5;
  param_2[2] = param_5 * -1.00000000;
  return;
}



void proc_7F078258(float *param_1,float *param_2,float param_3,float param_4)

{
  float in_a2_lo;
  float in_a3_lo;
  float fVar1;
  float fVar2;
  float fVar3;
  float __x;
  
  __x = (in_a2_lo * flt_80054FB4) / 360.00000000;
  fVar1 = cosf(__x);
  __x = sinf(__x);
  fVar2 = ptr_BONDdata->maybe_half_screen_height;
  fVar3 = ptr_BONDdata->maybe_half_screen_width;
  fVar1 = (fVar1 * fVar2) / (param_1[2] * __x);
  param_2[1] = param_1[1] * fVar1 + ptr_BONDdata->uly + fVar2;
  *param_2 = (ptr_BONDdata->ulx + ptr_BONDdata->maybe_half_screen_width) -
             *param_1 * ((fVar3 * fVar1) / (in_a3_lo * fVar2));
  return;
}



void proc_7F078324(int param_1)

{
  ptr_BONDdata->field_10C4 = param_1;
  return;
}



int proc_7F078334(void)

{
  return ptr_BONDdata->field_10C4;
}



void proc_7F078344(int param_1)

{
  ptr_BONDdata->field_10C8 = param_1;
  return;
}



int proc_7F078354(void)

{
  return ptr_BONDdata->field_10C8;
}



void proc_7F078364(int param_1)

{
  ptr_BONDdata->field_10D8 = param_1;
  return;
}



int proc_7F078374(void)

{
  return ptr_BONDdata->field_10D8;
}



void proc_7F078384(int param_1)

{
  ptr_BONDdata->field_10E0 = param_1;
  return;
}



int proc_7F078394(void)

{
  return ptr_BONDdata->field_10E0;
}



void proc_7F0783A4(int param_1)

{
  ptr_BONDdata->field_10E8 = ptr_BONDdata->field_10CC;
  ptr_BONDdata->field_10CC = param_1;
  return;
}



int proc_7F0783C4(void)

{
  return ptr_BONDdata->field_10CC;
}



void proc_7F0783D4(int param_1)

{
  ptr_BONDdata->field_10DC = param_1;
  return;
}



int proc_7F0783E4(void)

{
  return ptr_BONDdata->field_10DC;
}



int proc_7F0783F4(void)

{
  return ptr_BONDdata->field_10E8;
}



void proc_7F078404(int param_1)

{
  ptr_BONDdata->field_10D0 = param_1;
  return;
}



int proc_7F078414(void)

{
  return ptr_BONDdata->field_10D0;
}



void proc_7F078424(int param_1)

{
  ptr_BONDdata->field_10EC = ptr_BONDdata->field_10D4;
  ptr_BONDdata->field_10D4 = param_1;
  return;
}



int proc_7F078444(void)

{
  return ptr_BONDdata->field_10D4;
}



int proc_7F078454(void)

{
  return ptr_BONDdata->field_10EC;
}



void proc_7F078464(int param_1)

{
  ptr_BONDdata->field_10E4 = param_1;
  return;
}



int proc_7F078474(void)

{
  return ptr_BONDdata->field_10E4;
}



f32 proc_7F078484(void)

{
  return ptr_BONDdata->field_10F8;
}



int proc_7F078494(void)

{
  return ptr_BONDdata->field_10FC;
}



f32 get_screen_width(void)

{
  return (f32)ptr_BONDdata->maybe_screen_width;
}



f32 get_screen_height(void)

{
  return (f32)ptr_BONDdata->maybe_screen_height;
}



f32 get_ulx(void)

{
  return (f32)ptr_BONDdata->ulx;
}



f32 get_uly(void)

{
  return (f32)ptr_BONDdata->uly;
}



f32 proc_7F0784E4(void)

{
  return (f32)ptr_BONDdata->field_10A4;
}



f32 proc_7F0784F4(void)

{
  return (f32)ptr_BONDdata->field_10A8;
}



void proc_7F078504(xyzpoint *param_1)

{
  *(int *)&param_1->x = ptr_BONDdata->x;
  *(int *)&param_1->y = ptr_BONDdata->y;
  *(int *)&param_1->z = ptr_BONDdata->z;
  return;
}



void proc_7F078534(xyzpoint *param_1)

{
  *(int *)&param_1->x = ptr_BONDdata->x;
  param_1->y = -(float)ptr_BONDdata->y;
  *(int *)&param_1->z = ptr_BONDdata->z;
  return;
}



void proc_7F078568(undefined4 *param_1)

{
  *param_1 = ptr_BONDdata->field_110C;
  param_1[1] = ptr_BONDdata->field_1110;
  param_1[2] = ptr_BONDdata->field_1114;
  return;
}



void proc_7F078598(float *param_1)

{
  *param_1 = -(float)ptr_BONDdata->field_110C;
  *(int *)(param_1 + 1) = ptr_BONDdata->field_1110;
  *(int *)(param_1 + 2) = ptr_BONDdata->field_1114;
  return;
}



f32 proc_7F0785CC(void)

{
  return (f32)ptr_BONDdata->field_10A0;
}



void proc_7F0785DC(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  fVar5 = ptr_BONDdata->maybe_half_screen_height * (float)ptr_BONDdata->field_10B8;
  fVar4 = sqrtf(fVar5 * fVar5 + 1.00000000);
  fVar5 = fVar5 * (1.00000000 / fVar4);
  fVar4 = -(1.00000000 / fVar4);
  fVar6 = -fVar4;
  DAT_80079940 = *(float *)(ptr_BONDdata->field_10D4 + 0x20) * fVar5 +
                 fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x10);
  DAT_80079944 = *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar5 +
                 fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x14);
  DAT_80079948 = *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar5 +
                 fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x18);
  iVar1 = ptr_BONDdata->field_10D4;
  DAT_8007994c = *(float *)(iVar1 + 0x38) * DAT_80079948 +
                 DAT_80079940 * *(float *)(iVar1 + 0x30) + DAT_80079944 * *(float *)(iVar1 + 0x34);
  DAT_80079950 = *(float *)(ptr_BONDdata->field_10D4 + 0x20) * fVar5 +
                 fVar4 * *(float *)(ptr_BONDdata->field_10D4 + 0x10);
  DAT_80079954 = *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar5 +
                 fVar4 * *(float *)(ptr_BONDdata->field_10D4 + 0x14);
  DAT_80079958 = *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar5 +
                 fVar4 * *(float *)(ptr_BONDdata->field_10D4 + 0x18);
  iVar1 = ptr_BONDdata->field_10D4;
  DAT_8007995c = *(float *)(iVar1 + 0x38) * DAT_80079958 +
                 DAT_80079950 * *(float *)(iVar1 + 0x30) + DAT_80079954 * *(float *)(iVar1 + 0x34);
  fVar5 = -ptr_BONDdata->maybe_half_screen_width * (float)ptr_BONDdata->field_10B4;
  fVar4 = sqrtf(fVar5 * fVar5 + 1.00000000);
  fVar5 = fVar5 * (1.00000000 / fVar4);
  fVar4 = -(1.00000000 / fVar4);
  fVar6 = -fVar4;
  DAT_80079960 = fVar4 * *(float *)ptr_BONDdata->field_10D4 -
                 ((float *)ptr_BONDdata->field_10D4)[8] * fVar5;
  DAT_80079964 = fVar4 * *(float *)(ptr_BONDdata->field_10D4 + 4) -
                 *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar5;
  DAT_80079968 = fVar4 * *(float *)(ptr_BONDdata->field_10D4 + 8) -
                 *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar5;
  iVar1 = ptr_BONDdata->field_10D4;
  DAT_80079970 = fVar6 * *(float *)ptr_BONDdata->field_10D4 -
                 ((float *)ptr_BONDdata->field_10D4)[8] * fVar5;
  flt_8007A034 = fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 4) -
                 *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar5;
  DAT_80079978 = fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 8) -
                 *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar5;
  iVar2 = ptr_BONDdata->field_10D4;
  iVar3 = ptr_BONDdata->field_10D4;
  flt_8007A02C = *(float *)(iVar1 + 0x38) * DAT_80079968 +
                 DAT_80079960 * *(float *)(iVar1 + 0x30) + DAT_80079964 * *(float *)(iVar1 + 0x34);
  DAT_8007997c = *(float *)(iVar2 + 0x38) * DAT_80079978 +
                 DAT_80079970 * *(float *)(iVar2 + 0x30) + flt_8007A034 * *(float *)(iVar2 + 0x34);
  DAT_80079980 = *(float *)(iVar3 + 0x38) * *(float *)(iVar3 + 0x28) +
                 *(float *)(iVar3 + 0x20) * *(float *)(iVar3 + 0x30) +
                 *(float *)(iVar3 + 0x24) * *(float *)(iVar3 + 0x34);
  return;
}



void proc_7F078950(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = DAT_80079940;
  param_1[1] = DAT_80079944;
  param_1[2] = DAT_80079948;
  *param_2 = DAT_8007994c;
  return;
}



void proc_7F078980(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = DAT_80079950;
  param_1[1] = DAT_80079954;
  param_1[2] = DAT_80079958;
  *param_2 = DAT_8007995c;
  return;
}



void proc_7F0789B0(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = DAT_80079960;
  param_1[1] = DAT_80079964;
  param_1[2] = DAT_80079968;
  *param_2 = flt_8007A02C;
  return;
}



void proc_7F0789E0(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = DAT_80079970;
  param_1[1] = flt_8007A034;
  param_1[2] = DAT_80079978;
  *param_2 = DAT_8007997c;
  return;
}



void proc_7F078A10(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = *(undefined4 *)(ptr_BONDdata->field_10D4 + 0x20);
  param_1[1] = *(undefined4 *)(ptr_BONDdata->field_10D4 + 0x24);
  param_1[2] = *(undefined4 *)(ptr_BONDdata->field_10D4 + 0x28);
  *param_2 = DAT_80079980;
  return;
}



undefined8 proc_7F078A58(float *param_1,float param_2)

{
  int iVar1;
  float in_a1_lo;
  float fVar2;
  float fVar3;
  float fVar4;
  
  fVar3 = *param_1;
  fVar4 = param_1[1];
  iVar1 = ptr_BONDdata->field_10D4;
  fVar2 = param_1[2];
  if (DAT_80079980 + in_a1_lo <
      fVar2 * *(float *)(iVar1 + 0x28) +
      *(float *)(iVar1 + 0x20) * fVar3 + *(float *)(iVar1 + 0x24) * fVar4) {
    return 0;
  }
  if (flt_8007A02C + in_a1_lo < fVar2 * DAT_80079968 + DAT_80079960 * fVar3 + DAT_80079964 * fVar4)
  {
    return 0;
  }
  if (DAT_8007997c + in_a1_lo < fVar2 * DAT_80079978 + DAT_80079970 * fVar3 + flt_8007A034 * fVar4)
  {
    return 0;
  }
  if (fVar2 * DAT_80079948 + DAT_80079940 * fVar3 + DAT_80079944 * fVar4 <= DAT_8007994c + in_a1_lo)
  {
    if (fVar2 * DAT_80079958 + DAT_80079950 * fVar3 + DAT_80079954 * fVar4 <=
        DAT_8007995c + in_a1_lo) {
      return 1;
    }
    return 0;
  }
  return 0;
}



undefined8 proc_7F078BF4(float *param_1,float param_2,float *param_3)

{
  int iVar1;
  undefined8 uVar2;
  float *in_a2_lo;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  iVar1 = ptr_BONDdata->field_10D4;
  if (DAT_80079980 + (float)param_3 <
      param_1[2] * *(float *)(iVar1 + 0x28) +
      *(float *)(iVar1 + 0x20) * *param_1 + *(float *)(iVar1 + 0x24) * param_1[1]) {
    uVar2 = 0;
  }
  else {
    fVar4 = ((*in_a2_lo - ptr_BONDdata->ulx) - ptr_BONDdata->maybe_half_screen_width) *
            (float)ptr_BONDdata->field_10B4;
    fVar3 = sqrtf(fVar4 * fVar4 + 1.00000000);
    fVar4 = fVar4 * (1.00000000 / fVar3);
    fVar6 = -(1.00000000 / fVar3);
    fVar5 = fVar6 * *(float *)ptr_BONDdata->field_10D4 -
            ((float *)ptr_BONDdata->field_10D4)[8] * fVar4;
    fVar3 = fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 4) -
            *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar4;
    fVar4 = fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 8) -
            *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar4;
    iVar1 = ptr_BONDdata->field_10D4;
    if (*(float *)(iVar1 + 0x38) * fVar4 +
        fVar5 * *(float *)(iVar1 + 0x30) + fVar3 * *(float *)(iVar1 + 0x34) + (float)param_3 <
        param_1[2] * fVar4 + fVar5 * *param_1 + fVar3 * param_1[1]) {
      uVar2 = 0;
    }
    else {
      fVar4 = -((in_a2_lo[2] - ptr_BONDdata->ulx) - ptr_BONDdata->maybe_half_screen_width) *
              (float)ptr_BONDdata->field_10B4;
      fVar3 = sqrtf(fVar4 * fVar4 + 1.00000000);
      fVar4 = fVar4 * (1.00000000 / fVar3);
      fVar3 = --(1.00000000 / fVar3);
      fVar5 = fVar3 * *(float *)ptr_BONDdata->field_10D4 -
              ((float *)ptr_BONDdata->field_10D4)[8] * fVar4;
      fVar6 = fVar3 * *(float *)(ptr_BONDdata->field_10D4 + 4) -
              *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar4;
      fVar3 = fVar3 * *(float *)(ptr_BONDdata->field_10D4 + 8) -
              *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar4;
      iVar1 = ptr_BONDdata->field_10D4;
      if (*(float *)(iVar1 + 0x38) * fVar3 +
          fVar5 * *(float *)(iVar1 + 0x30) + fVar6 * *(float *)(iVar1 + 0x34) + (float)param_3 <
          param_1[2] * fVar3 + fVar5 * *param_1 + fVar6 * param_1[1]) {
        uVar2 = 0;
      }
      else {
        fVar4 = (ptr_BONDdata->maybe_half_screen_height - (in_a2_lo[1] - ptr_BONDdata->uly)) *
                (float)ptr_BONDdata->field_10B8;
        fVar3 = sqrtf(fVar4 * fVar4 + 1.00000000);
        fVar4 = fVar4 * (1.00000000 / fVar3);
        fVar3 = --(1.00000000 / fVar3);
        fVar5 = *(float *)(ptr_BONDdata->field_10D4 + 0x20) * fVar4 +
                fVar3 * *(float *)(ptr_BONDdata->field_10D4 + 0x10);
        fVar6 = *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar4 +
                fVar3 * *(float *)(ptr_BONDdata->field_10D4 + 0x14);
        fVar3 = *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar4 +
                fVar3 * *(float *)(ptr_BONDdata->field_10D4 + 0x18);
        iVar1 = ptr_BONDdata->field_10D4;
        if (*(float *)(iVar1 + 0x38) * fVar3 +
            fVar5 * *(float *)(iVar1 + 0x30) + fVar6 * *(float *)(iVar1 + 0x34) + (float)param_3 <
            param_1[2] * fVar3 + fVar5 * *param_1 + fVar6 * param_1[1]) {
          uVar2 = 0;
        }
        else {
          fVar4 = -(ptr_BONDdata->maybe_half_screen_height - (in_a2_lo[3] - ptr_BONDdata->uly)) *
                  (float)ptr_BONDdata->field_10B8;
          fVar3 = sqrtf(fVar4 * fVar4 + 1.00000000);
          fVar4 = fVar4 * (1.00000000 / fVar3);
          fVar6 = -(1.00000000 / fVar3);
          fVar3 = *(float *)(ptr_BONDdata->field_10D4 + 0x20) * fVar4 +
                  fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x10);
          fVar5 = *(float *)(ptr_BONDdata->field_10D4 + 0x24) * fVar4 +
                  fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x14);
          fVar4 = *(float *)(ptr_BONDdata->field_10D4 + 0x28) * fVar4 +
                  fVar6 * *(float *)(ptr_BONDdata->field_10D4 + 0x18);
          iVar1 = ptr_BONDdata->field_10D4;
          uVar2 = 1;
          if (*(float *)(iVar1 + 0x38) * fVar4 +
              fVar3 * *(float *)(iVar1 + 0x30) + fVar5 * *(float *)(iVar1 + 0x34) + (float)param_3 <
              param_1[2] * fVar4 + fVar3 * *param_1 + fVar5 * param_1[1]) {
            uVar2 = 0;
          }
        }
      }
    }
  }
  return uVar2;
}



uint proc_7F0790F0(void)

{
  int iVar1;
  bool bVar2;
  u32 uVar4;
  ulonglong uVar3;
  ulonglong uVar5;
  int iVar6;
  int iVar7;
  float fVar8;
  float fVar9;
  uint uStack20;
  
  uVar4 = get_cur_playernum();
  uVar3 = get_num_players();
  bVar2 = true;
  iVar7 = 0;
  if (0 < (int)DAT_80079c68) {
    do {
      iVar7 += 1;
      bVar2 = false;
      uVar5 = 0;
      ptr_BONDdata->field_29E0 = ptr_BONDdata->field_29E0 + 1;
      uStack20 = ptr_BONDdata->field_29E0 % DAT_80079c68;
      if (DAT_80079c68 == 0) {
        trap(0x1c00);
      }
      if ((DAT_80079c68 == 0xffffffff) && (ptr_BONDdata->field_29E0 == -0x80000000)) {
        trap(0x1800);
      }
      if (0 < (longlong)uVar3) {
        do {
          iVar6 = (int)uVar5;
          if (uVar5 == (longlong)(int)uVar4) {
            uVar5 = SEXT48(iVar6 + 1);
          }
          else {
            iVar1 = (&ptr_BONDdata_p1)[iVar6]->position_data_pointer;
            if (iVar1 == 0) {
              uVar5 = SEXT48(iVar6 + 1);
            }
            else {
              fVar8 = *(float *)(iVar1 + 8) - *(float *)(&DAT_80079c28)[uStack20];
              fVar9 = *(float *)(iVar1 + 0x10) - ((float *)(&DAT_80079c28)[uStack20])[2];
              fVar8 = sqrtf(fVar8 * fVar8 + fVar9 * fVar9);
              if (fVar8 < 1000.00000000) {
                bVar2 = true;
                uVar5 = SEXT48(iVar6 + 1);
              }
              else {
                uVar5 = SEXT48(iVar6 + 1);
              }
            }
          }
        } while (uVar5 != uVar3);
      }
    } while ((bVar2) && (iVar7 < (int)DAT_80079c68));
  }
  if ((bVar2) && (iVar7 < (int)DAT_80079c68)) {
    do {
      iVar7 += 1;
      bVar2 = false;
      uVar5 = 0;
      ptr_BONDdata->field_29E0 = ptr_BONDdata->field_29E0 + 1;
      uStack20 = ptr_BONDdata->field_29E0 % DAT_80079c68;
      if (DAT_80079c68 == 0) {
        trap(0x1c00);
      }
      if ((DAT_80079c68 == 0xffffffff) && (ptr_BONDdata->field_29E0 == -0x80000000)) {
        trap(0x1800);
      }
      if (0 < (longlong)uVar3) {
        do {
          iVar6 = (int)uVar5;
          if (uVar5 == (longlong)(int)uVar4) {
            uVar5 = SEXT48(iVar6 + 1);
          }
          else {
            iVar1 = (&ptr_BONDdata_p1)[iVar6]->position_data_pointer;
            if (iVar1 == 0) {
              uVar5 = SEXT48(iVar6 + 1);
            }
            else {
              fVar8 = *(float *)(iVar1 + 8) - *(float *)(&DAT_80079c28)[uStack20];
              fVar9 = *(float *)(iVar1 + 0x10) - ((float *)(&DAT_80079c28)[uStack20])[2];
              fVar8 = sqrtf(fVar8 * fVar8 + fVar9 * fVar9);
              if (fVar8 < 100.00000000) {
                bVar2 = true;
                uVar5 = SEXT48(iVar6 + 1);
              }
              else {
                uVar5 = SEXT48(iVar6 + 1);
              }
            }
          }
        } while (uVar5 != uVar3);
      }
    } while ((bVar2) && (iVar7 < (int)DAT_80079c68));
  }
  if (bVar2) {
    uVar4 = get_random_value();
    uStack20 = uVar4 % DAT_80079c68;
    if (DAT_80079c68 == 0) {
      trap(0x1c00);
    }
  }
  return uStack20;
}



void init_player_BONDdata(void)

{
  ulonglong uVar1;
  u32 playernum;
  int iVar2;
  
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    playernum = get_cur_playernum();
    iVar2 = get_player_control_style(playernum);
    ptr_BONDdata->controlstyle = iVar2;
    playernum = get_cur_playernum();
    iVar2 = get_player_control_style(playernum);
    cur_player_set_control_type(iVar2);
  }
  ptr_BONDdata->current_model_xpos = 0.00000000;
  ptr_BONDdata->current_model_ypos = 0.00000000;
  ptr_BONDdata->current_model_zpos = 0.00000000;
  ptr_BONDdata->previous_model_xpos = 0.00000000;
  ptr_BONDdata->previous_model_ypos = 0.00000000;
  ptr_BONDdata->previous_model_zpos = 0.00000000;
  ptr_BONDdata->current_room_xpos = 0.00000000;
  ptr_BONDdata->current_room_ypos = 0.00000000;
  ptr_BONDdata->current_room_zpos = 0.00000000;
  ptr_BONDdata->unknown = 0;
  ptr_BONDdata->xpos = 0.00000000;
  ptr_BONDdata->ypos = 0.00000000;
  ptr_BONDdata->zpos = 0.00000000;
  ptr_BONDdata->xpos2 = 0.00000000;
  ptr_BONDdata->ypos2 = 0.00000000;
  ptr_BONDdata->zpos2 = 1.00000000;
  ptr_BONDdata->xoffset = 0.00000000;
  ptr_BONDdata->yoffset = 1.00000000;
  ptr_BONDdata->zoffset = 0.00000000;
  ptr_BONDdata->xpos3 = 0.00000000;
  ptr_BONDdata->ypos3 = 0.00000000;
  ptr_BONDdata->zpos3 = 0.00000000;
  ptr_BONDdata->room_pointer = 0;
  ptr_BONDdata->field_3C4 = 0.00000000;
  ptr_BONDdata->field_3C8 = 0.00000000;
  ptr_BONDdata->field_3CC = 1.00000000;
  ptr_BONDdata->field_84 = 0.00000000;
  ptr_BONDdata->field_88 = 0.00000000;
  ptr_BONDdata->field_8C = 0;
  ptr_BONDdata->field_90 = 0.00000000;
  ptr_BONDdata->field_94 = 0;
  ptr_BONDdata->field_98 = 0.00000000;
  ptr_BONDdata->field_1274 = 0.00000000;
  ptr_BONDdata->field_1278 = 0.00000000;
  ptr_BONDdata->field_127C = 0.00000000;
  ptr_BONDdata->crouchposition = 2;
  ptr_BONDdata->field_29FC = 2;
  ptr_BONDdata->ducking_height_offset = 0.00000000;
  ptr_BONDdata->field_A4 = 0.00000000;
  ptr_BONDdata->field_AC = 1;
  ptr_BONDdata->field_D0 = 0;
  ptr_BONDdata->player_button_control = 0;
  ptr_BONDdata->current_health = 1.00000000;
  ptr_BONDdata->current_armor = 0.00000000;
  ptr_BONDdata->previous_health = 1.00000000;
  ptr_BONDdata->previous_armor = 0.00000000;
  ptr_BONDdata->mp_watch_health_total = 1.00000000;
  ptr_BONDdata->mp_watch_armor_total = 0.00000000;
  ptr_BONDdata->invincibility_timer = -1;
  ptr_BONDdata->health_bar_timer = -1;
  ptr_BONDdata->field_1C0 = 0;
  ptr_BONDdata->field_1C4 = 0;
  ptr_BONDdata->pause_animation_state = 0;
  ptr_BONDdata->paused_flag = 1;
  ptr_BONDdata->open_close_solo_watch_menu = 0;
  ptr_BONDdata->field_1A0 = 0;
  ptr_BONDdata->field_19C = 0.00000000;
  ptr_BONDdata->azimuth_turning_direction = 0.00000000;
  ptr_BONDdata->azimuth_cosine = 1.00000000;
  ptr_BONDdata->azimuth_sine = 0.00000000;
  ptr_BONDdata->inclination_angle1 = -4.00000000;
  *(float *)&ptr_BONDdata->inclination_angle2 = ptr_BONDdata->inclination_angle1;
  if ((float)ptr_BONDdata->inclination_angle2 < 0.00000000) {
    *(float *)&ptr_BONDdata->inclination_angle2 =
         (float)ptr_BONDdata->inclination_angle2 + 360.00000000;
    ptr_BONDdata->inclination_turning_direction = 0.00000000;
  }
  else {
    ptr_BONDdata->inclination_turning_direction = 0.00000000;
  }
  ptr_BONDdata->inclination_cosine = 1.00000000;
  ptr_BONDdata->inclination_sine = 0.00000000;
  ptr_BONDdata->strafe_speed_multiplier = 0.00000000;
  ptr_BONDdata->strafe_movement_direction = 0.00000000;
  ptr_BONDdata->forward_speed_multiplier = 0.00000000;
  ptr_BONDdata->field_2A4C = 0.00000000;
  ptr_BONDdata->forward_speed_multiplier_2 = 1.00000000;
  ptr_BONDdata->forward_speed_frame_counter = 0;
  ptr_BONDdata->boost_factor_x = 0.00000000;
  ptr_BONDdata->boost_factor_y = 0.00000000;
  ptr_BONDdata->boost_factor_z = 0.00000000;
  ptr_BONDdata->field_104 = 0;
  ptr_BONDdata->field_108 = 0;
  ptr_BONDdata->field_10C = 0;
  ptr_BONDdata->field_110 = 0;
  ptr_BONDdata->field_114 = 1;
  ptr_BONDdata->look_ahead_setting = 1;
  ptr_BONDdata->field_11C = 0;
  ptr_BONDdata->field_120 = 1;
  ptr_BONDdata->is_aiming_flag = 0;
  ptr_BONDdata->auto_aim_flag = 1;
  ptr_BONDdata->y_aim_related_float = 0.00000000;
  ptr_BONDdata->field_130 = 0;
  ptr_BONDdata->field_134 = -1;
  ptr_BONDdata->solo_auto_aim_x_setting = 1;
  ptr_BONDdata->x_aim_related_float = 0.00000000;
  ptr_BONDdata->field_140 = 0;
  ptr_BONDdata->field_144 = -1;
  *(undefined4 *)&ptr_BONDdata->field_3D0 = 0xff;
  *(undefined4 *)&ptr_BONDdata->field_3D4 = 0xff;
  *(undefined4 *)&ptr_BONDdata->field_3D8 = 0xff;
  ptr_BONDdata->tint_alpha = 0.00000000;
  ptr_BONDdata->field_3E0 = -1.00000000;
  ptr_BONDdata->timer_for_fade = -1.00000000;
  ptr_BONDdata->field_3E8 = 0xff;
  ptr_BONDdata->field_3EC = 0xff;
  ptr_BONDdata->field_3F0 = 0xff;
  ptr_BONDdata->field_3F4 = 0xff;
  ptr_BONDdata->field_3F8 = 0xff;
  ptr_BONDdata->field_3FC = 0xff;
  ptr_BONDdata->field_400 = 0.00000000;
  ptr_BONDdata->field_404 = 0.00000000;
  ptr_BONDdata->viewport_alpha = -1.00000000;
  ptr_BONDdata->rate_of_change = -1.00000000;
  ptr_BONDdata->time_for_change = 0.00000000;
  ptr_BONDdata->final_alpha_level = 0.00000000;
  ptr_BONDdata->field_42C = 2;
  ptr_BONDdata->controlstyle = 0;
  ptr_BONDdata->pause_starting_angle = 0.00000000;
  ptr_BONDdata->field_208 = 0.00000000;
  ptr_BONDdata->pause_target_angle = 0.00000000;
  ptr_BONDdata->field_210 = 0.00000000;
  ptr_BONDdata->field_214 = 0.00000000;
  ptr_BONDdata->field_218 = 0;
  ptr_BONDdata->step_in_view_watch_animation = 0;
  ptr_BONDdata->pause_animation_counter = 0.00000000;
  ptr_BONDdata->pausing_flag = 0;
  ptr_BONDdata->field_3B4 = 0;
  ptr_BONDdata->field_3B6 = 0;
  ptr_BONDdata->field_29C0 = 15.00000000;
  *(undefined2 *)&ptr_BONDdata->field_2A04 = 0xffff;
  ptr_BONDdata->field_2A08 = 0.00000000;
  ptr_BONDdata->field_2A0C = 0.00000000;
  ptr_BONDdata->field_2A6C = 0;
  ptr_BONDdata->field_2A70 = 0;
  return;
}



void proc_7F0798B8(void)

{
  int iVar2;
  ulonglong uVar1;
  
  *(float *)&ptr_BONDdata->field_29BC =
       cur_player_stat_ptr->player_perspective_height * 185.00000000 * 1.00000000 - 10.00000000;
  ptr_BONDdata->field_29F8 = 0;
  iVar2 = getMissiontime();
  ptr_BONDdata->field_29F4 = iVar2;
  ptr_BONDdata->how_long_to_show_health = 0;
  add_item_to_inventory(ITEM_FIST);
  uVar1 = get_num_players();
  if (1 < (longlong)uVar1) {
    draw_item_in_hand_has_more_ammo(1,(ITEM_IDS)flt_8007A0A4);
    draw_item_in_hand_has_more_ammo(0,(ITEM_IDS)PTR_800799e0);
    if (ptr_BONDdata->ptr_char_objectinstance == 0) {
      solo_char_load();
    }
  }
  return;
}



void proc_7F079988(int param_1)

{
  *(float *)&ptr_BONDdata->field_1274 = (float)param_1 * 75.00000000;
  return;
}



void change_crouch_position(int position)

{
  ptr_BONDdata->crouchposition = ptr_BONDdata->crouchposition + position;
  if (ptr_BONDdata->crouchposition < 0) {
    ptr_BONDdata->crouchposition = 0;
    return;
  }
  if (2 < ptr_BONDdata->crouchposition) {
    ptr_BONDdata->crouchposition = 2;
  }
  return;
}



int proc_7F0799F0(void)

{
  if (ptr_BONDdata->crouchposition < ptr_BONDdata->field_29FC) {
    return ptr_BONDdata->crouchposition;
  }
  return ptr_BONDdata->field_29FC;
}



int proc_7F079A1C(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = (&ptr_BONDdata_p1)[param_1]->crouchposition;
  iVar2 = (&ptr_BONDdata_p1)[param_1]->field_29FC;
  if (iVar1 < iVar2) {
    return iVar1;
  }
  return iVar2;
}



void proc_7F079A50(int param_1)

{
  ptr_BONDdata->unknown = param_1;
  return;
}



void proc_7F079A60(float *xyz_1,float *xyz_2,float *xyz_3,int param_4,float *param_5)

{
  longlong lVar1;
  f32 fVar2;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float extraout_f14;
  int iStack8;
  int iStack4;
  
  if ((((((*xyz_1 != (float)ptr_BONDdata->xpos) || (xyz_1[1] != (float)ptr_BONDdata->ypos)) ||
        (xyz_1[2] != (float)ptr_BONDdata->zpos)) ||
       ((*xyz_2 != (float)ptr_BONDdata->xpos2 || (xyz_2[1] != (float)ptr_BONDdata->ypos2)))) ||
      ((xyz_2[2] != (float)ptr_BONDdata->zpos2 ||
       ((*xyz_3 != (float)ptr_BONDdata->xoffset || (xyz_3[1] != (float)ptr_BONDdata->yoffset))))))
     || ((xyz_3[2] != (float)ptr_BONDdata->zoffset || (ptr_BONDdata->room_pointer == 0)))) {
    lVar1 = (longlong)(int)param_5;
    iStack4 = param_4;
    proc_7F0B0BE4(&iStack4,in_f12,in_f14,*param_5,param_5[2]);
    if (lVar1 == 0) {
      lVar1 = (longlong)(int)ptr_BONDdata;
      if (ptr_BONDdata->room_pointer == 0) {
        ptr_BONDdata->room_pointer = iStack4;
      }
      else {
        iStack8 = ptr_BONDdata->room_pointer;
        proc_7F0B0BE4(&iStack8,extraout_f12,extraout_f14,(float)ptr_BONDdata->xpos,
                      (float)ptr_BONDdata->zpos);
        if (lVar1 == 0) {
          ptr_BONDdata->room_pointer = iStack4;
        }
        else {
          ptr_BONDdata->room_pointer = iStack8;
        }
      }
    }
    else {
      proc_7F0B0518(iStack4,extraout_f12,extraout_f14);
      ptr_BONDdata->room_pointer = iStack4;
    }
    *(float *)&ptr_BONDdata->xpos = *xyz_1;
    *(float *)&ptr_BONDdata->ypos = xyz_1[1];
    *(float *)&ptr_BONDdata->zpos = xyz_1[2];
    *(float *)&ptr_BONDdata->xpos2 = *xyz_2;
    *(float *)&ptr_BONDdata->ypos2 = xyz_2[1];
    *(float *)&ptr_BONDdata->zpos2 = xyz_2[2];
    *(float *)&ptr_BONDdata->xoffset = *xyz_3;
    *(float *)&ptr_BONDdata->yoffset = xyz_3[1];
    *(float *)&ptr_BONDdata->zoffset = xyz_3[2];
    ptr_BONDdata->xpos3 = ptr_BONDdata->xpos;
    ptr_BONDdata->zpos3 = ptr_BONDdata->zpos;
    fVar2 = (f32)proc_7F0B2970();
    ptr_BONDdata->ypos3 = fVar2;
  }
  return;
}



void solo_char_load(void)

{
  GUARDdata *guard;
  PitemZ_header *pPVar1;
  ulonglong uVar2;
  u8 selectedbond;
  u32 player;
  int iVar4;
  uint uVar5;
  longlong lVar3;
  int iVar6;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  object_header *header;
  undefined4 extraout_a3_lo;
  dword *pdVar7;
  dword *pdVar8;
  dword *pdVar9;
  dword *pdVar10;
  float extraout_f12;
  f32 scale;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float fVar11;
  float extraout_f12_03;
  uint uStack224;
  HEADS head;
  BODIES body;
  undefined *puStack208;
  dword adStack196 [34];
  undefined4 *puStack60;
  int iStack56;
  int iStack52;
  uint uStack48;
  int iStack44;
  int iStack40;
  object_header *poStack36;
  object_header *poStack32;
  object_header *poStack28;
  int aiStack24 [4];
  GUARDdata *pGStack8;
  float fStack4;
  
  fStack4 = get_curplay_horizontal_rotation_in_degrees();
  guard = *(GUARDdata **)(ptr_BONDdata->position_data_pointer + 4);
  if (guard == NULL) {
    iStack40 = proc_7F05CF30(0);
    iStack44 = proc_7F05CF30(1);
    uStack48 = 0;
    iStack52 = proc_7F05CF48(0);
    iStack56 = proc_7F05CF48(1);
    pdVar9 = dummy_08_pp7_obj;
    pdVar7 = adStack196;
    do {
      pdVar10 = pdVar9 + 3;
      pdVar8 = pdVar7 + 3;
      *pdVar7 = *pdVar9;
      pdVar7[1] = pdVar9[1];
      pdVar7[2] = pdVar9[2];
      pdVar9 = pdVar10;
      pdVar7 = pdVar8;
    } while (pdVar10 != &dword_80036630);
    *pdVar8 = dword_80036630;
    puStack208 = (undefined *)return_ammo_in_hand(0);
    body = BODY_Formal_Wear;
    head = HEAD_Male_Pierce_Bond_2;
    uStack224 = 0;
    proc_7F07DE64(ptr_BONDdata);
    uVar2 = get_num_players();
    if (uVar2 == 1) {
      selectedbond = getSelectedFolderBond();
      if (true) {
        switch(ptr_BONDdata->cuff_value) {
        case 1:
          body = BODY_Tuxedo;
          break;
        case 2:
          body = BODY_Jungle_Fatigues;
          break;
        case 3:
          body = BODY_Special_Operations_Uniform;
          break;
        case 4:
          body = BODY_Parka;
          break;
        case 5:
          body = BODY_Tuxedo;
          break;
        case 6:
          body = BODY_Tuxedo;
          break;
        case 7:
          body = BODY_Tuxedo;
          break;
        case 8:
          if (selectedbond == '\0') {
            body = BODY_Tuxedo;
          }
          else {
            if (selectedbond == '\x01') {
              body = BODY_Tuxedo;
            }
            else {
              if (selectedbond == '\x02') {
                body = BODY_Tuxedo;
              }
              else {
                if (selectedbond == '\x03') {
                  body = BODY_Tuxedo;
                }
              }
            }
          }
        }
      }
      if (selectedbond == '\0') {
        if (true) {
          switch(ptr_BONDdata->cuff_value) {
          case 1:
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
            break;
          case 2:
            head = HEAD_Male_Pierce_Bond_3;
            break;
          case 3:
            head = HEAD_Male_Pierce_Bond_1;
            break;
          case 5:
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
            break;
          case 6:
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
            break;
          case 7:
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
            break;
          case 8:
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
          }
        }
      }
      else {
        if (selectedbond == '\x01') {
          head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
        }
        else {
          if (selectedbond == '\x02') {
            head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
          }
          else {
            if (selectedbond == '\x03') {
              head = HEAD_Male_Pierce_Bond_Tuxedo_DEFAULT;
            }
          }
        }
      }
    }
    else {
      player = get_cur_playernum();
      head = get_player_mp_char_head(player);
      player = get_cur_playernum();
      body = get_player_mp_char_body(player);
    }
    if (cameramode == SWIRL_CAM) {
      puStack208 = PTR_800799e0;
    }
    uVar2 = get_num_players();
    if (uVar2 == 1) {
      remove_item_in_hand(1);
      remove_item_in_hand(0);
      proc_7F0CBAF4(aiStack24,iStack44,iStack56);
      poStack28 = (object_header *)get_ptr_itemheader_in_hand(0);
      header = c_item_entries[body].header;
      poStack28->offset_obj_table = header->offset_obj_table;
      poStack28->ptr_archetype = header->ptr_archetype;
      poStack28->offset_obj_offset_block = header->offset_obj_offset_block;
      *(undefined4 *)&poStack28->num_offset_entries = *(undefined4 *)&header->num_offset_entries;
      poStack28->anonymous_4 = header->anonymous_4;
      *(undefined4 *)&poStack28->num_table_entries = *(undefined4 *)&header->num_table_entries;
      poStack28->offset_img_declaration = header->offset_img_declaration;
      poStack28->is_loaded_in_mem = header->is_loaded_in_mem;
      load_object_fill_header
                (poStack28,(int *)c_item_entries[body].filename,iStack40,iStack52,(int)aiStack24);
      iVar4 = proc_7F0BD188((byte *)c_item_entries[body].filename);
      header = c_item_entries[head].header;
      uVar5 = (iVar4 + 0x3fU | 0x3f) ^ 0x3f;
      poStack32 = (object_header *)(iStack40 + uVar5);
      uStack48 = (uVar5 + 0x5f | 0x3f) ^ 0x3f;
      poStack32->offset_obj_table = header->offset_obj_table;
      poStack32->ptr_archetype = header->ptr_archetype;
      poStack32->offset_obj_offset_block = header->offset_obj_offset_block;
      *(undefined4 *)&poStack32->num_offset_entries = *(undefined4 *)&header->num_offset_entries;
      poStack32->anonymous_4 = header->anonymous_4;
      *(undefined4 *)&poStack32->num_table_entries = *(undefined4 *)&header->num_table_entries;
      poStack32->offset_img_declaration = header->offset_img_declaration;
      poStack32->is_loaded_in_mem = header->is_loaded_in_mem;
      load_object_fill_header
                (poStack32,(int *)c_item_entries[head].filename,iStack40 + uStack48,
                 iStack52 - uStack48,(int)aiStack24);
      iVar4 = proc_7F0BD188((byte *)c_item_entries[head].filename);
      uStack224 = (iVar4 + uStack48 + 0x3f | 0x3f) ^ 0x3f;
      uStack48 = (uStack224 + 0xfb | 0x3f) ^ 0x3f;
      uStack224 = iStack40 + uStack224;
      set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack28);
      set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack32);
      iVar4 = (int)poStack28->num_table_entries + (int)poStack32->num_table_entries + 10;
      iVar6 = iStack40 + uStack48;
      uStack48 = (iVar4 * 4 + uStack48 + 0x3f | 0x3f) ^ 0x3f;
      proc_7F075FAC(uStack224,(player_gait_header *)poStack28,iVar6);
      *(undefined2 *)(uStack224 + 2) = (short)iVar4;
      header = poStack32;
    }
    else {
      poStack28 = c_item_entries[body].header;
      if (poStack28->offset_obj_table == 0) {
        load_object_into_memory(poStack28,(int *)c_item_entries[body].filename);
      }
      header = c_item_entries[head].header;
      if (header->offset_obj_table == 0) {
        poStack32 = header;
        load_object_into_memory(header,(int *)c_item_entries[head].filename);
        header = poStack32;
      }
      else {
        uStack224 = 0;
      }
    }
    uVar5 = maybe_load_models_for_guards(body,head,poStack28,header,0,uStack224);
    ptr_BONDdata->ptr_char_objectinstance = uVar5;
    set_obj_instance_controller_scale(ptr_BONDdata->ptr_char_objectinstance,scale);
    init_GUARDdata_with_set_values
              (ptr_BONDdata->position_data_pointer,ptr_BONDdata->ptr_char_objectinstance,
               ptr_BONDdata->position_data_pointer + 8,(u32)fStack4);
    *(undefined *)ptr_BONDdata->position_data_pointer = 6;
    pGStack8 = *(GUARDdata **)(ptr_BONDdata->position_data_pointer + 4);
    pGStack8->guard_bitflags = pGStack8->guard_bitflags | 1;
    setsuboffset(ptr_BONDdata->ptr_char_objectinstance,
                 (float *)(ptr_BONDdata->position_data_pointer + 8),pGStack8,&ptr_BONDdata);
    setsubroty(ptr_BONDdata->ptr_char_objectinstance,extraout_f12_00,fStack4,extraout_a2_lo);
    lVar3 = proc_7F09B244((longlong)(int)puStack208);
    iVar4 = (int)lVar3;
    fVar11 = extraout_f12_01;
    if (-1 < lVar3) {
      uVar2 = get_num_players();
      if (uVar2 == 1) {
        puStack60 = (undefined4 *)(iStack40 + uStack48);
        uStack48 = (uStack48 + 199 | 0x3f) ^ 0x3f;
        poStack36 = (object_header *)get_ptr_itemheader_in_hand(1);
        pPVar1 = PitemZ_entries[iVar4].header;
        poStack36->offset_obj_table = pPVar1->microcode_entry_num;
        *(item_related **)&poStack36->ptr_archetype = pPVar1->anonymous_1;
        poStack36->offset_obj_offset_block = *(int *)&pPVar1->anonymous_2;
        *(float *)&poStack36->num_offset_entries = pPVar1->drawdistance;
        poStack36->anonymous_4 = pPVar1->anonymous_4;
        *(int *)&poStack36->num_table_entries = pPVar1->anonymous_5;
        poStack36->offset_img_declaration = pPVar1->anonymous_6;
        poStack36->is_loaded_in_mem = pPVar1->anonymous_7;
        load_object_fill_header
                  (poStack36,(int *)PitemZ_entries[iVar4].filename,iStack40 + uStack48,
                   iStack52 - uStack48,(int)aiStack24);
        proc_7F0BD188((byte *)PitemZ_entries[iVar4].filename);
        set_objuse_flag_compute_grp_nums_set_obj_loaded(poStack36);
      }
      else {
        puStack60 = NULL;
        poStack36 = NULL;
      }
      create_held_weapon((undefined2 *)pGStack8,iVar4,(char)puStack208,0,puStack60,
                         (ushort **)poStack36);
      fVar11 = extraout_f12_02;
    }
    proc_7F023A94(pGStack8,fVar11);
  }
  else {
    if (*(int *)(guard->MODELdata_pointer + 0x20) == 0) {
      guard->guard_bitflags = guard->guard_bitflags | 1;
      proc_7F023A94(guard,extraout_f12);
      setsuboffset(ptr_BONDdata->ptr_char_objectinstance,
                   (float *)(ptr_BONDdata->position_data_pointer + 8),extraout_a2_lo_00,
                   extraout_a3_lo);
      setsubroty(ptr_BONDdata->ptr_char_objectinstance,extraout_f12_03,fStack4,extraout_a2_lo_01);
    }
  }
  return;
}



void maybe_solo_intro_camera_handler(void)

{
  ulonglong uVar1;
  
  if ((*(int *)(ptr_BONDdata->position_data_pointer + 4) != 0) &&
     (uVar1 = get_num_players(), uVar1 == 1)) {
    disable_sounds_attached_to_player_then_something(ptr_BONDdata->position_data_pointer);
    *(undefined4 *)(ptr_BONDdata->position_data_pointer + 4) = 0;
    ptr_BONDdata->ptr_char_objectinstance = 0;
    camera_80036424 = 1;
    proc_7F07DE9C(ptr_BONDdata);
  }
  return;
}



CAMERAMODE get_camera_mode(void)

{
  return cameramode;
}



longlong proc_7F07A534(undefined4 param_1,float *param_2,char *param_3,float *param_4,
                      undefined4 param_5,float param_6)

{
  u32 uVar2;
  longlong lVar1;
  longlong lVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float in_stack_00000014;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  undefined4 uStack32;
  float fStack28;
  undefined4 uStack24;
  float fStack20;
  float fStack16;
  int iStack8;
  
  lVar3 = 0;
  iStack8 = 0;
  fVar8 = flt_80055030;
  cur_player_stat_ptr = param_1;
  do {
    fVar9 = (float)ptr_BONDdata->collision_radius;
    iVar4 = 0;
    fStack16 = flt_80055034 + fVar9;
    uVar2 = get_random_value();
    fVar6 = (float)uVar2;
    if ((int)uVar2 < 0) {
      fVar6 = fVar6 + 4294967296.00000000;
    }
    fVar8 = fVar6 * 0.00000000 * fVar8;
    do {
      if (lVar3 != 0) break;
      fStack20 = fVar8 + flt_8005503C;
      if (flt_80055038 <= fStack20) {
        fStack20 = fStack20 - flt_80055038;
      }
      fStack36 = sinf(fStack20);
      uStack32 = 0;
      fStack28 = cosf(fStack20);
      fStack48 = fStack36 * fStack16 + *param_2;
      fStack44 = param_2[1];
      fStack40 = fStack28 * fStack16 + param_2[2];
      proc_7F0B1CC4();
      uStack24 = param_5;
      proc_7F03D058(param_3,0);
      lVar1 = proc_7F0B0E24();
      proc_7F03D058(param_3,1);
      if (lVar1 == 0) {
        proc_7F026298(param_4,&fStack36,&fStack48);
        fStack16 = sqrtf((fStack48 - *param_4) * (fStack48 - *param_4) +
                         (fStack40 - param_4[2]) * (fStack40 - param_4[2]));
      }
      fStack16 = fStack16 - fVar9;
      if (((in_stack_00000014 <= fStack16) && (fVar8 = 1.00000000, true)) && (true)) {
        fVar6 = fStack16 - in_stack_00000014;
        do {
          uVar2 = get_random_value();
          fVar5 = (float)uVar2;
          if ((int)uVar2 < 0) {
            fVar5 = fVar5 + 4294967296.00000000;
          }
          fVar5 = fVar5 * 0.00000000 * fVar6 * fVar8 + in_stack_00000014;
          PTR_800799e8 = (undefined *)(fStack36 * fVar5 + *param_2);
          DAT_800799ec = param_2[1];
          uStack24 = param_5;
          ptr_BONDdata = fStack28 * fVar5 + param_2[2];
          proc_7F03D058(param_3,0);
          lVar1 = proc_7F0B0E24();
          proc_7F03D058(param_3,1);
          if ((lVar1 != 0) && (lVar1 = proc_7F0B18B8(), lVar1 < 0)) {
            fVar5 = (float)proc_7F0B2970();
            uVar2 = get_random_value();
            fVar7 = (float)uVar2;
            if ((int)uVar2 < 0) {
              fVar7 = fVar7 + 4294967296.00000000;
            }
            DAT_800799ec = fVar7 * 0.00000000 * (185.00000000 - fVar9) + fVar5 + fVar9;
            if ((-1000.00000000 < DAT_800799ec - param_2[1]) &&
               (DAT_800799ec - param_2[1] < 1000.00000000)) {
              lVar3 = 1;
            }
          }
          fVar8 = fVar8 - 0.25000000;
        } while ((0.00000000 < fVar8) && (lVar3 == 0));
      }
      iVar4 += 1;
      fVar8 = fStack20;
    } while (iVar4 < 0x10);
    iStack8 += 1;
    if ((0x80 < iStack8) || (fVar8 = flt_80055040, lVar3 != 0)) {
      return lVar3;
    }
  } while( true );
}



void set_camera_mode(int param_1)

{
  u32 uVar3;
  int iVar4;
  LEVELID stagenum;
  undefined4 uVar5;
  undefined uVar6;
  longlong lVar1;
  ulonglong uVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a1;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  char *pcVar7;
  undefined4 extraout_a3_lo;
  BONDdata *pBVar8;
  BONDdata *pBVar9;
  BONDdata *pBVar10;
  BONDdata *pBVar11;
  float fVar12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f14;
  float extraout_f14_00;
  f32 fStack64;
  int iStack60;
  int iStack56;
  f32 fStack48;
  f32 fStack44;
  f32 fStack40;
  char *pcStack36;
  float fStack16;
  
  enable_move_after_cinema = 0;
  if (param_1 == 1) {
    cameramode = param_1;
    if (((ptr_random06cam_entry == NULL) ||
        (cameramode = param_1, uVar3 = get_recording_ramrom_flag(), uVar3 != 0)) ||
       (iVar4 = get_is_ramrom_flag(), iVar4 != 0)) {
      set_camera_mode(3);
    }
    else {
      dword_800364A4 = 0;
      proc_7F0807B0(0,0,0,0x3f800000);
      fade_to_over_seconds(60.00000000,0.00000000);
      stagenum = get_stage_num();
      load_enviroment(stagenum,1);
      ptr_BONDdata->room_pointer = 0;
    }
  }
  else {
    if (param_1 == 2) {
      cameramode = param_1;
      proc_7F0807B0(0,0,0,0);
      fade_to_over_seconds(60.00000000,1.00000000);
    }
    else {
      if (param_1 == 9) {
        DAT_80079e04 = 0;
        DAT_80079e08 = 0xc2b40000;
        DAT_80079e0c = 0;
        DAT_80079e10 = 0x42a00000;
        cameramode = param_1;
        stagenum = get_stage_num();
        load_enviroment(stagenum,0);
      }
      else {
        if (param_1 == 3) {
          dword_8003649C = 0;
          cameramode = param_1;
          proc_7F0807B0(0,0,0,0x3f800000);
          fade_to_over_seconds(60.00000000,0.00000000);
          stagenum = get_stage_num();
          load_enviroment(stagenum,0);
          if (((ptr_firstcommand_rotatingcam == NULL) ||
              (uVar3 = get_recording_ramrom_flag(), uVar3 != 0)) ||
             (iVar4 = get_is_ramrom_flag(), iVar4 != 0)) {
            set_camera_mode(4);
          }
          else {
            dword_800364A4 = 0;
            dword_800364A8 = 1;
            set_curplayer_fade(0.00000000,1.00000000);
            solo_char_load();
            fStack16 = stage_intro_anim_table[selected_stage_intro_anim].anonymous_2;
            proc_7F06FCA8(ptr_BONDdata->ptr_char_objectinstance,
                          stage_intro_anim_table[selected_stage_intro_anim].anonymous_0 +
                          ptr_animation_table,0,fStack16,
                          stage_intro_anim_table[selected_stage_intro_anim].anonymous_1,extraout_f14
                         );
            if (0.00000000 < fStack16) {
              proc_7F06FDE8(ptr_BONDdata->ptr_char_objectinstance,fStack16);
            }
            iVar4 = *(int *)(ptr_BONDdata->position_data_pointer + 4);
            *(undefined *)(iVar4 + 7) = 0x17;
            *(undefined *)(iVar4 + 8) = 0;
            ptr_BONDdata->room_pointer = 0;
          }
        }
        else {
          if (param_1 == 4) {
            cameramode = param_1;
            stagenum = get_stage_num();
            if (stagenum == LEVELID_CUBA) {
              proc_7F0807B0(0,0,0,0x3f800000);
              fade_to_over_seconds(0.00000000,1.00000000);
            }
            else {
              if (dword_8003649C != 0) {
                proc_7F0807B0(0,0,0,0x3f800000);
                fade_to_over_seconds(60.00000000,0.00000000);
              }
            }
            uVar2 = get_num_players();
            if (1 < (longlong)uVar2) {
              stagenum = get_stage_num();
              load_enviroment(stagenum,0);
            }
            if (ptr_BONDdata->pause_animation_state == 0) {
              draw_item_in_hand_has_more_ammo(1,(ITEM_IDS)flt_8007A0A4);
              draw_item_in_hand_has_more_ammo(0,(ITEM_IDS)PTR_800799e0);
            }
            stop_time_flag = 0;
          }
          else {
            if (param_1 == 5) {
              dword_800364A4 = 0;
              dword_800364A8 = 1;
              cameramode = param_1;
              proc_7F0807B0(0,0,0,0x3f800000);
              fade_to_over_seconds(60.00000000,0.00000000);
              if ((dword_8003648C == 0) || (fVar12 = extraout_f12, ptr_playerstank == NULL)) {
                in_tank_flag = FALSE;
                pBVar8 = (BONDdata *)&ptr_BONDdata->current_room_ypos;
                pBVar11 = ptr_BONDdata;
                pBVar9 = ptr_BONDdata;
                do {
                  pBVar10 = (BONDdata *)&pBVar9->zpos;
                  pBVar11->ptr_tile_printmanpos = pBVar9->field_434;
                  *(int *)&pBVar11->positionx = pBVar9->field_438;
                  pBVar11->positiony = pBVar9->field_43C;
                  pBVar11 = (BONDdata *)&pBVar11->zpos;
                  pBVar9 = pBVar10;
                } while (pBVar10 != pBVar8);
                *(int *)&ptr_BONDdata->azimuth_angle = ptr_BONDdata->field_414;
                *(int *)&ptr_BONDdata->inclination_angle1 = ptr_BONDdata->field_418;
                *(f32 *)(ptr_BONDdata->position_data_pointer + 8) = ptr_BONDdata->positionx;
                *(int *)(ptr_BONDdata->position_data_pointer + 0xc) = ptr_BONDdata->positiony;
                *(int *)(ptr_BONDdata->position_data_pointer + 0x10) = ptr_BONDdata->positionz;
                *(int *)(ptr_BONDdata->position_data_pointer + 0x14) =
                     ptr_BONDdata->ptr_tile_printmanpos;
                proc_7F081790();
                proc_7F080B34(0.00000000,0.00000000,extraout_a0,extraout_a1,0.00000000);
                proc_7F081478();
                set_curplayer_fade(0.00000000,1.00000000);
                solo_char_load();
                uVar5 = proc_7F06F5AC((int)&ptr_BONDdata->field_598);
                uVar6 = proc_7F06F5B4((int)&ptr_BONDdata->field_598);
                proc_7F06FCA8(ptr_BONDdata->ptr_char_objectinstance,uVar5,uVar6,extraout_f12_00,0,
                              extraout_f14_00);
                iVar4 = *(int *)(ptr_BONDdata->position_data_pointer + 4);
                *(undefined *)(iVar4 + 7) = 0x18;
                *(undefined *)(iVar4 + 8) = 0;
                *(uint *)(iVar4 + 0x14) = *(uint *)(iVar4 + 0x14) | 1;
                setsuboffset(ptr_BONDdata->ptr_char_objectinstance,
                             (float *)(ptr_BONDdata->position_data_pointer + 8),extraout_a2_lo,
                             extraout_a3_lo);
                fVar12 = get_curplay_horizontal_rotation_in_degrees();
                setsubroty(ptr_BONDdata->ptr_char_objectinstance,extraout_f12_01,fVar12,
                           extraout_a2_lo_00);
                fVar12 = extraout_f12_02;
              }
              if ((dword_8003648C == 0) || (ptr_playerstank == NULL)) {
                pcStack36 = (char *)ptr_BONDdata->position_data_pointer;
                fStack48 = ptr_BONDdata->field_3C4;
                fStack44 = ptr_BONDdata->field_3C8;
                fStack40 = ptr_BONDdata->field_3CC;
                fStack64 = ptr_BONDdata->positionx;
                iStack60 = ptr_BONDdata->positiony;
                iStack56 = ptr_BONDdata->positionz;
                iVar4 = ptr_BONDdata->ptr_tile_printmanpos;
                pcVar7 = (char *)ptr_BONDdata->position_data_pointer;
              }
              else {
                pcStack36 = ptr_playerstank;
                fStack48 = *(f32 *)(ptr_playerstank + 8);
                fStack44 = *(f32 *)(ptr_playerstank + 0xc);
                fStack40 = *(f32 *)(ptr_playerstank + 0x10);
                fStack64 = *(f32 *)(ptr_playerstank + 8);
                iStack60 = *(int *)(ptr_playerstank + 0xc);
                iStack56 = *(int *)(ptr_playerstank + 0x10);
                iVar4 = *(int *)(ptr_playerstank + 0x14);
                pcVar7 = ptr_playerstank;
              }
              lVar1 = proc_7F07A534(pcStack36,(float *)&fStack48,pcVar7,(float *)&fStack64,iVar4,
                                    fVar12);
              if (lVar1 == 0) {
                run_title_stage();
              }
              else {
                if (dword_80036510 == 0) {
                  musicTrack1Play(M_INTROSWOOSH);
                  music_related_39(0.50000000);
                }
                if ((dword_8003648C != 0) && (ptr_playerstank != NULL)) {
                  uVar3 = get_cur_playernum();
                  proc_7F09C250((int)ptr_playerstank,(float *)(ptr_playerstank + 8),
                                *(int *)(ptr_playerstank + 0x14),0xd,0,(char)uVar3,
                                ptr_playerstank + 0x2c,0);
                }
              }
            }
            else {
              if (param_1 == 6) {
                cameramode = param_1;
                proc_7F0807B0(0,0,0,0);
                fade_to_over_seconds(60.00000000,1.00000000);
              }
              else {
                if (param_1 == 7) {
                  cameramode = param_1;
                  solo_char_load();
                  ptr_BONDdata->room_pointer = 0;
                }
                else {
                  if (param_1 == 8) {
                    cameramode = param_1;
                    maybe_solo_intro_camera_handler();
                    cameramode = FP_CAM;
                  }
                  else {
                    cameramode = param_1;
                    if (param_1 == 10) {
                      lVar1 = 0;
                      cameramode = param_1;
                      uVar2 = get_num_players();
                      if (0 < (longlong)uVar2) {
                        do {
                          set_cur_player((int)lVar1);
                          proc_7F0807B0(0,0,0,0);
                          fade_to_over_seconds(60.00000000,1.00000000);
                          lVar1 = (longlong)((int)lVar1 + 1);
                          uVar2 = get_num_players();
                        } while (lVar1 < (longlong)uVar2);
                      }
                      set_cur_player(0);
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F07B1A4(void)

{
  CAMERAMODE CVar1;
  
  CVar1 = cameramode;
  cameramode = 0;
  enable_move_after_cinema = 0;
  if (CVar1 == INTRO_CAM) {
    set_camera_mode(2);
  }
  else {
    if (CVar1 == FADESWIRL_CAM) {
      reset_intro_camera_message_dialogs_for_BONDdata();
      set_camera_mode(3);
    }
    else {
      if (CVar1 != MP_CAM) {
        if (CVar1 == SWIRL_CAM) {
          maybe_solo_intro_camera_handler();
          set_curplayer_fade(0.00000000,1.00000000);
          set_camera_mode(4);
        }
        else {
          if (CVar1 != FP_CAM) {
            if (CVar1 == UNK5_CAM) {
              set_camera_mode(6);
            }
            else {
              if ((CVar1 == UNK6_CAM) && (dword_80036510 += 1, dword_80036510 < 3)) {
                set_camera_mode(5);
              }
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F07B2A0(int param_1,float param_2,float *param_3,float *param_4)

{
  BONDdata *pBVar1;
  undefined *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  undefined *puVar5;
  int iVar6;
  f32 *in_a3_lo;
  undefined *puVar7;
  undefined *puVar8;
  uint uVar9;
  float in_f14;
  undefined auStack60 [4];
  float *local_38;
  float local_30 [3];
  float afStack36 [3];
  float afStack24 [3];
  float afStack12 [3];
  
  puVar8 = ptr_firstcommand_rotatingcam;
  local_38 = NULL;
  puVar5 = auStack60;
  iVar6 = -1;
  puVar7 = ptr_firstcommand_rotatingcam + param_1 * 0x20;
  if (0.00000000 < *(float *)(ptr_firstcommand_rotatingcam + param_1 * 0x20 + 0x18)) {
    local_38 = (float *)((float)param_3 /
                        *(float *)(ptr_firstcommand_rotatingcam + param_1 * 0x20 + 0x18));
  }
  do {
    pBVar1 = ptr_BONDdata;
    puVar4 = puVar7 + iVar6 * 0x20;
    if (iVar6 < 0) {
      puVar2 = puVar4;
      if (puVar4 < puVar8) {
        puVar2 = puVar8;
      }
LAB_7f07b354:
      uVar9 = *(uint *)(puVar2 + 4);
      puVar3 = puVar2;
    }
    else {
      if (puVar7 < puVar4) {
        uVar9 = *(uint *)(puVar7 + 0x24);
        puVar3 = puVar7;
        while ((uVar9 & 1) == 0) {
          puVar2 = puVar3 + 0x20;
          if (puVar4 <= puVar2) goto LAB_7f07b354;
          uVar9 = *(uint *)(puVar3 + 0x44);
          puVar3 = puVar2;
        }
        uVar9 = *(uint *)(puVar3 + 4);
      }
      else {
        uVar9 = *(uint *)(puVar7 + 4);
        puVar3 = puVar7;
      }
    }
    iVar6 += 1;
    if ((uVar9 & 2) == 0) {
      *(undefined4 *)(puVar5 + 0xc) = *(undefined4 *)(puVar3 + 8);
      *(undefined4 *)(puVar5 + 0x10) = *(undefined4 *)(puVar3 + 0xc);
      *(undefined4 *)(puVar5 + 0x14) = *(undefined4 *)(puVar3 + 0x10);
    }
    else {
      *(float *)(puVar5 + 0xc) =
           (float)ptr_BONDdata->field_4A0 * *(float *)(puVar3 + 8) +
           *(float *)(puVar3 + 0x10) * (float)ptr_BONDdata->field_498;
      *(undefined4 *)(puVar5 + 0x10) = *(undefined4 *)(puVar3 + 0xc);
      *(float *)(puVar5 + 0x14) =
           *(float *)(puVar3 + 0x10) * (float)pBVar1->field_4A0 -
           (float)pBVar1->field_498 * *(float *)(puVar3 + 8);
    }
    puVar5 = puVar5 + 0xc;
    if (iVar6 == 3) {
      proc_7F05B024(local_30,afStack36,afStack24,afStack12,(float)param_3,in_f14,local_38);
      *param_4 = *param_4 + (float)ptr_BONDdata->field_3C4;
      param_4[1] = param_4[1] + (float)ptr_BONDdata->field_3C8;
      param_4[2] = param_4[2] + (float)ptr_BONDdata->field_3CC;
      *in_a3_lo = ptr_BONDdata->field_3C4;
      in_a3_lo[1] = ptr_BONDdata->field_3C8;
      in_a3_lo[2] = ptr_BONDdata->field_3CC;
      puVar8 = ptr_firstcommand_rotatingcam + param_1 * 0x20;
      if ((*(uint *)(puVar8 + 4) & 4) == 0) {
        if ((*(uint *)(puVar8 + 0x24) & 4) == 0) {
          local_38 = (float *)0x3f800000;
        }
        else {
          local_38 = (float *)(1.00000000 - (float)local_38);
        }
      }
      else {
        if ((*(uint *)(puVar8 + 0x24) & 4) != 0) {
          local_38 = NULL;
        }
      }
      *(float *)in_a3_lo =
           (float)*in_a3_lo + (float)ptr_BONDdata->field_4C0 * 40.00000000 * (float)local_38;
      *(float *)(in_a3_lo + 1) =
           (float)in_a3_lo[1] + (float)ptr_BONDdata->field_4C4 * 40.00000000 * (float)local_38;
      *(float *)(in_a3_lo + 2) =
           (float)in_a3_lo[2] + (float)ptr_BONDdata->field_4C8 * 40.00000000 * (float)local_38;
      return;
    }
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F07B56C(void)

{
  int iVar2;
  u32 playercount;
  undefined *puVar3;
  ulonglong uVar1;
  f32 *pfVar4;
  undefined4 in_a0_lo;
  undefined4 in_a1_lo;
  float *in_a2_lo;
  f32 *in_a3_lo;
  uint uVar5;
  float in_f0;
  float fVar6;
  float __x;
  float *pfVar7;
  float *pfVar8;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  ushort uStackX2;
  ushort uStackX6;
  f32 *in_stack_00000014;
  f32 *in_stack_00000018;
  
  uStackX6 = (ushort)in_a1_lo;
  uStackX2 = (ushort)in_a0_lo;
  if ((cameramode == INTRO_CAM) || (cameramode == FADESWIRL_CAM)) {
    if (cameramode == INTRO_CAM) {
      if (((float)dword_800364A4 < 120.00000000) &&
         (120.00000000 <= (float)dword_800364A4 + global_timer_delta)) {
        proc_7F08A3B4(ptrSecondFontTable,ptrFirstFontTable);
        display_string_in_lower_left_corner(*(char **)(ptr_random06cam_entry + 0x1c));
      }
      pfVar8 = (float *)((float)dword_800364A4 + global_timer_delta);
      if (*(char **)(ptr_random06cam_entry + 0x20) == NULL) {
        if (300.00000000 < (float)dword_800364A4) {
          enable_move_after_cinema = 1;
        }
      }
      else {
        if (((float)dword_800364A4 < 300.00000000) && (300.00000000 <= (float)pfVar8)) {
          display_string_in_lower_left_corner(*(char **)(ptr_random06cam_entry + 0x20));
          pfVar8 = (float *)((float)dword_800364A4 + global_timer_delta);
        }
        if (480.00000000 < (float)dword_800364A4) {
          enable_move_after_cinema = 1;
        }
      }
      dword_800364A4 = pfVar8;
      iVar2 = get_controls_locked_flag();
      if ((iVar2 == 0) && ((uStackX2 & ~uStackX6 & 0xf030) != 0)) {
        enable_move_after_cinema = 1;
      }
    }
    else {
      if (ptr_BONDdata->timer_for_fade < 0.00000000) {
        enable_move_after_cinema = 1;
      }
    }
    *in_a2_lo = *(float *)(ptr_random06cam_entry + 4);
    in_a2_lo[1] = *(float *)(ptr_random06cam_entry + 8);
    in_a2_lo[2] = *(float *)(ptr_random06cam_entry + 0xc);
    fVar6 = cosf(*(float *)(ptr_random06cam_entry + 0x14));
    __x = sinf(*(float *)(ptr_random06cam_entry + 0x10));
    *(float *)in_a3_lo = __x * fVar6 + *in_a2_lo;
    fVar6 = sinf(*(float *)(ptr_random06cam_entry + 0x14));
    *(float *)(in_a3_lo + 1) = fVar6 + in_a2_lo[1];
    fVar6 = cosf(*(float *)(ptr_random06cam_entry + 0x14));
    __x = cosf(*(float *)(ptr_random06cam_entry + 0x10));
    *(float *)(in_a3_lo + 2) = in_a2_lo[2] - __x * fVar6;
    pfVar4 = (f32 *)(ptr_0xxxpresets + *(int *)(ptr_random06cam_entry + 0x18) * 0x2c);
    *in_stack_00000014 = pfVar4[10];
    *in_stack_00000018 = *pfVar4;
    in_stack_00000018[1] = pfVar4[1];
    in_stack_00000018[2] = pfVar4[2];
  }
  else {
    if (cameramode == MP_CAM) {
      playercount = get_cur_playernum();
      iVar2 = proc_7F09B4D8(playercount);
      if ((iVar2 == 0) && (iVar2 = 0, 0 < clock_timer)) {
        do {
          iVar2 += 1;
          if (DAT_80079e08 < flt_80055044) {
            if (DAT_80079e08 < -20.00000000) {
              DAT_80079e04 = DAT_80079e04 + flt_80055048;
            }
            if (110.00000000 < DAT_80079e08) {
              DAT_80079e04 = DAT_80079e04 - flt_80055048;
            }
            DAT_80079e08 = DAT_80079e08 + DAT_80079e04;
          }
          else {
            DAT_80079e08 = 180.00000000;
          }
          if (80.00000000 < DAT_80079e08) {
            if (60.00000000 < DAT_80079e10) {
              DAT_80079e0c = DAT_80079e0c - flt_80055048;
            }
            else {
              DAT_80079e0c = DAT_80079e0c + flt_8005504C;
            }
            DAT_80079e10 = DAT_80079e10 + DAT_80079e0c;
            if (DAT_80079e10 < 1.00000000) {
              DAT_80079e10 = 1.00000000;
            }
          }
        } while (iVar2 < clock_timer);
      }
      __x = ((DAT_80079e08 - ptr_BONDdata->azimuth_angle) * flt_80055050) / 180.00000000;
      fVar6 = sinf(__x);
      *in_a2_lo = fVar6 * DAT_80079e10 + (float)ptr_BONDdata->field_4B4;
      in_a2_lo[1] = (float)ptr_BONDdata->field_4B8 + DAT_80079e10 * flt_80055054;
      fVar6 = cosf(__x);
      in_a2_lo[2] = fVar6 * DAT_80079e10 + (float)ptr_BONDdata->field_4BC;
      *(int *)in_a3_lo = ptr_BONDdata->field_4B4;
      *(int *)(in_a3_lo + 1) = ptr_BONDdata->field_4B8;
      *(int *)(in_a3_lo + 2) = ptr_BONDdata->field_4BC;
      *in_stack_00000014 = *(f32 *)(ptr_BONDdata->position_data_pointer + 0x14);
      *(int *)in_stack_00000018 = ptr_BONDdata->field_4B4;
      *(float *)(in_stack_00000018 + 1) =
           (float)ptr_BONDdata->field_4B8 + DAT_80079e10 * flt_80055058;
      *(int *)(in_stack_00000018 + 2) = ptr_BONDdata->field_4BC;
      if (DAT_80079e10 < 5.00000000) {
        enable_move_after_cinema = 1;
      }
    }
    else {
      if (cameramode == SWIRL_CAM) {
        dword_800364A4 = (float *)((float)dword_800364A4 + global_timer_delta);
        puVar3 = ptr_firstcommand_rotatingcam + dword_800364A8 * 0x20;
        pfVar7 = *(float **)(puVar3 + 0x18);
        pfVar8 = pfVar7;
        if ((float)pfVar7 <= (float)dword_800364A4) {
          uVar5 = *(uint *)(puVar3 + 100);
          while ((uVar5 & 1) == 0) {
            dword_800364A4 = (float *)((float)dword_800364A4 - (float)pfVar7);
            dword_800364A8 += 1;
            puVar3 = ptr_firstcommand_rotatingcam + dword_800364A8 * 0x20;
            pfVar7 = *(float **)(puVar3 + 0x18);
            pfVar8 = pfVar7;
            if ((float)dword_800364A4 < (float)pfVar7) goto LAB_7f07bbe4;
            uVar5 = *(uint *)(puVar3 + 100);
          }
          enable_move_after_cinema = 1;
          pfVar8 = *(float **)(puVar3 + 0x18);
          dword_800364A4 = pfVar7;
        }
LAB_7f07bbe4:
        puVar3 = ptr_firstcommand_rotatingcam + (dword_800364A8 + 1) * 0x20;
        uVar5 = *(uint *)(puVar3 + 0x44);
        fVar6 = ((float)pfVar8 - (float)dword_800364A4) + 0.00000000;
        while ((uVar5 & 1) == 0) {
          uVar5 = *(uint *)(puVar3 + 100);
          pfVar8 = (float *)(puVar3 + 0x18);
          puVar3 = puVar3 + 0x20;
          fVar6 = fVar6 + *pfVar8;
        }
        __x = 30.00000000;
        if ((fVar6 < 30.00000000) && (__x = 30.00000000, 30.00000000 <= fVar6 + global_timer_delta))
        {
          set_curplayer_fade(30.00000000,0.00000000);
          __x = extraout_f12;
        }
        if ((dword_8003649C != 0) &&
           (uVar1 = check_if_fade_to_black_complete(), __x = extraout_f12_00, uVar1 != 0)) {
          enable_move_after_cinema = 1;
          __x = extraout_f12_00;
        }
        if ((((60.00000000 < fVar6) && (dword_8003649C == 0)) &&
            (iVar2 = get_controls_locked_flag(), __x = extraout_f12_01, iVar2 == 0)) &&
           (__x = extraout_f12_01, (uStackX2 & ~uStackX6 & 0xf030) != 0)) {
          dword_8003649C = 1;
          proc_7F0807B0(0,0,0,ptr_BONDdata->tint_alpha);
          uVar1 = check_if_fade_to_black_complete();
          if (uVar1 == 0) {
            fade_to_over_seconds(ptr_BONDdata->field_3E0,1.00000000);
            __x = extraout_f12_03;
          }
          else {
            fade_to_over_seconds(60.00000000,1.00000000);
            __x = extraout_f12_02;
          }
        }
        proc_7F07B2A0(dword_800364A8,__x,dword_800364A4,in_a2_lo);
        if (*(int *)(ptr_firstcommand_rotatingcam + dword_800364A8 * 0x20 + 0x1c) < 0) {
          *(int *)in_stack_00000014 = ptr_BONDdata->ptr_tile_printmanpos;
          *in_stack_00000018 = ptr_BONDdata->positionx;
          *(int *)(in_stack_00000018 + 1) = ptr_BONDdata->positiony;
          *(int *)(in_stack_00000018 + 2) = ptr_BONDdata->positionz;
        }
        else {
          pfVar4 = (f32 *)(ptr_0xxxpresets +
                          *(int *)(ptr_firstcommand_rotatingcam + dword_800364A8 * 0x20 + 0x1c) *
                          0x2c);
          *in_stack_00000014 = pfVar4[10];
          *in_stack_00000018 = *pfVar4;
          in_stack_00000018[1] = pfVar4[1];
          in_stack_00000018[2] = pfVar4[2];
        }
      }
      else {
        if ((cameramode == UNK5_CAM) || (cameramode == UNK6_CAM)) {
          if (cameramode == UNK5_CAM) {
            dword_800364A4 = (float *)((float)dword_800364A4 + global_timer_delta);
            if (ptr_BONDdata->ptr_char_objectinstance == 0) {
              if (180.00000000 <= (float)dword_800364A4) {
                enable_move_after_cinema = 1;
              }
            }
            else {
              proc_7F06F5BC(ptr_BONDdata->ptr_char_objectinstance);
              fVar6 = proc_7F06F5C4(ptr_BONDdata->ptr_char_objectinstance);
              if (fVar6 <= in_f0) {
                enable_move_after_cinema = 1;
              }
            }
            if ((((uStackX2 & ~uStackX6 & 0xf000) != 0) &&
                (ptr_BONDdata->player_button_control != 0)) &&
               ((ptr_BONDdata->field_424 != 0 && (ptr_BONDdata->field_428 != 0)))) {
              enable_move_after_cinema = 1;
              dword_80036510 = 2;
            }
          }
          else {
            if (cameramode == UNK6_CAM) {
              dword_800364A4 = (float *)((float)dword_800364A4 + global_timer_delta);
              if (ptr_BONDdata->timer_for_fade < 0.00000000) {
                enable_move_after_cinema = 1;
              }
              if (((((uStackX2 & ~uStackX6 & 0xf000) != 0) &&
                   (ptr_BONDdata->player_button_control != 0)) && (ptr_BONDdata->field_424 != 0)) &&
                 (ptr_BONDdata->field_428 != 0)) {
                dword_80036510 = 2;
              }
            }
          }
          *(undefined **)in_a2_lo = PTR_800799e8;
          in_a2_lo[1] = DAT_800799ec;
          in_a2_lo[2] = ptr_BONDdata;
          if (cur_player_stat_ptr == ptr_BONDdata->position_data_pointer) {
            *in_a3_lo = ptr_BONDdata->field_3C4;
            in_a3_lo[1] = ptr_BONDdata->field_3C8;
            in_a3_lo[2] = ptr_BONDdata->field_3CC;
          }
          else {
            *in_a3_lo = *(f32 *)(cur_player_stat_ptr + 8);
            in_a3_lo[1] = *(f32 *)(cur_player_stat_ptr + 0xc);
            in_a3_lo[2] = *(f32 *)(cur_player_stat_ptr + 0x10);
          }
          *(int *)in_stack_00000014 = ptr_BONDdata->ptr_tile_printmanpos;
          *in_stack_00000018 = ptr_BONDdata->positionx;
          *(int *)(in_stack_00000018 + 1) = ptr_BONDdata->positiony;
          *(int *)(in_stack_00000018 + 2) = ptr_BONDdata->positionz;
        }
        else {
          if (cameramode == POSEND_CAM) {
            if (player_num == NULL) {
              if (random_byte == 0) {
                if (dword_8007A0D4 < 10000) {
                  pfVar4 = (f32 *)(ptr_0xxxpresets + dword_8007A0D4 * 0x2c);
                }
                else {
                  pfVar4 = (f32 *)(ptr_2xxxpresets + dword_8007A0D4 * 0x44 + -680000);
                }
                *in_stack_00000014 = pfVar4[10];
                *in_stack_00000018 = *pfVar4;
                in_stack_00000018[1] = pfVar4[1];
                in_stack_00000018[2] = pfVar4[2];
                cosf(dword_8007A0C0);
                *in_a3_lo = *pfVar4;
                *(float *)(in_a3_lo + 1) = (float)pfVar4[1] + dword_8007A0D0;
                sinf(dword_8007A0C0);
                in_a3_lo[2] = pfVar4[2];
                fVar6 = sinf(dword_8007A0C0);
                cosf(dword_8007A0C0);
                *in_a2_lo = (float)*pfVar4 + fVar6 * dword_8007A0C8;
                in_a2_lo[1] = (float)pfVar4[1] + dword_8007A0D0 + dword_8007A0CC;
                __x = cosf(dword_8007A0C0);
                sinf(dword_8007A0C0);
                fVar6 = flt_8005505C;
                in_a2_lo[2] = (float)pfVar4[2] + __x * dword_8007A0C8;
                dword_8007A0C0 = dword_8007A0C0 + dword_8007A0C4 * global_timer_delta;
                while (fVar6 <= dword_8007A0C0) {
                  dword_8007A0C0 = dword_8007A0C0 - fVar6;
                }
                while (dword_8007A0C0 < 0.00000000) {
                  dword_8007A0C0 = dword_8007A0C0 + fVar6;
                }
              }
              else {
                iVar2 = *(int *)(random_byte + 0x18);
                if (iVar2 < 10000) {
                  pfVar4 = (f32 *)(ptr_0xxxpresets + iVar2 * 0x2c);
                }
                else {
                  pfVar4 = (f32 *)(ptr_2xxxpresets + iVar2 * 0x44 + -680000);
                }
                *in_a2_lo = *(float *)(random_byte + 4);
                in_a2_lo[1] = *(float *)(random_byte + 8);
                in_a2_lo[2] = *(float *)(random_byte + 0xc);
                *in_stack_00000014 = pfVar4[10];
                *in_stack_00000018 = *pfVar4;
                in_stack_00000018[1] = pfVar4[1];
                in_stack_00000018[2] = pfVar4[2];
                if (dword_8007A0D8 == 1) {
                  *in_a3_lo = ptr_BONDdata->field_3C4;
                  in_a3_lo[1] = ptr_BONDdata->field_3C8;
                  in_a3_lo[2] = ptr_BONDdata->field_3CC;
                }
                else {
                  fVar6 = cosf(*(float *)(random_byte + 0x14));
                  __x = sinf(*(float *)(random_byte + 0x10));
                  *(float *)in_a3_lo = __x * fVar6 + *in_a2_lo;
                  fVar6 = sinf(*(float *)(random_byte + 0x14));
                  *(float *)(in_a3_lo + 1) = fVar6 + in_a2_lo[1];
                  fVar6 = cosf(*(float *)(random_byte + 0x14));
                  __x = cosf(*(float *)(random_byte + 0x10));
                  *(float *)(in_a3_lo + 2) = in_a2_lo[2] - __x * fVar6;
                }
              }
            }
            else {
              *(f32 *)in_a2_lo = *player_num;
              *(f32 *)(in_a2_lo + 1) = player_num[1];
              *(f32 *)(in_a2_lo + 2) = player_num[2];
              *in_a3_lo = ptr_BONDdata->field_3C4;
              in_a3_lo[1] = ptr_BONDdata->field_3C8;
              in_a3_lo[2] = ptr_BONDdata->field_3CC;
              *in_stack_00000014 = player_num[10];
              *in_stack_00000018 = *player_num;
              in_stack_00000018[1] = player_num[1];
              in_stack_00000018[2] = player_num[2];
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F07C540(int param_1)

{
  ptr_BONDdata->field_42C = param_1;
  return;
}



void set_BONDdata_lookahead_setting(int param_1)

{
  ptr_BONDdata->look_ahead_setting = param_1;
  return;
}



int get_BONDdata_lookahead_setting(void)

{
  return ptr_BONDdata->look_ahead_setting;
}



void set_BONDdata_autoaim_y(int param_1)

{
  ptr_BONDdata->auto_aim_flag = param_1;
  return;
}



ulonglong get_BONDdata_autoaim_y(void)

{
  ulonglong uVar1;
  
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    uVar1 = SEXT48(ptr_BONDdata->auto_aim_flag);
  }
  else {
    uVar1 = (ulonglong)(byte)cur_player_stat_ptr->autoaim;
  }
  return uVar1;
}



void redirect_get_BONDdata_autoaim(void)

{
  get_BONDdata_autoaim_y();
  return;
}



int get_BONDdata_is_aiming(void)

{
  return ptr_BONDdata->is_aiming_flag;
}



void proc_7F07C5F0(int param_1,float param_2)

{
  int iVar1;
  
  if (ptr_BONDdata->field_134 < 0) {
    iVar1 = ptr_BONDdata->field_130;
  }
  else {
    ptr_BONDdata->field_134 = ptr_BONDdata->field_134 - clock_timer;
    iVar1 = ptr_BONDdata->field_130;
  }
  if (param_1 == iVar1) {
    ptr_BONDdata->y_aim_related_float = param_2;
  }
  else {
    if (ptr_BONDdata->field_134 < 0) {
      ptr_BONDdata->field_134 = 0x1e;
      ptr_BONDdata->field_130 = param_1;
      ptr_BONDdata->y_aim_related_float = param_2;
    }
  }
  return;
}



void set_BONDdata_autoaim_x(int param_1)

{
  ptr_BONDdata->solo_auto_aim_x_setting = param_1;
  return;
}



ulonglong get_BONDdata_autoaim_x(void)

{
  ulonglong uVar1;
  
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    uVar1 = SEXT48(ptr_BONDdata->solo_auto_aim_x_setting);
  }
  else {
    uVar1 = (ulonglong)(byte)cur_player_stat_ptr->autoaim;
  }
  return uVar1;
}



void redirect_get_BONDdata_autoaim_x(void)

{
  get_BONDdata_autoaim_x();
  return;
}



void proc_7F07C6C8(int param_1,float param_2)

{
  int iVar1;
  
  if (ptr_BONDdata->field_144 < 0) {
    iVar1 = ptr_BONDdata->field_140;
  }
  else {
    ptr_BONDdata->field_144 = ptr_BONDdata->field_144 - clock_timer;
    iVar1 = ptr_BONDdata->field_140;
  }
  if (param_1 == iVar1) {
    ptr_BONDdata->x_aim_related_float = param_2;
  }
  else {
    if (ptr_BONDdata->field_144 < 0) {
      ptr_BONDdata->field_144 = 0x1e;
      ptr_BONDdata->field_140 = param_1;
      ptr_BONDdata->x_aim_related_float = param_2;
    }
  }
  return;
}



void change_player_pos_to_target(int *target_posblock,int *src_pos,int *tile)

{
  target_posblock[1] = *src_pos;
  target_posblock[2] = src_pos[1];
  target_posblock[3] = src_pos[2];
  *(int **)target_posblock = tile;
  *(int **)(target_posblock + 0x14) = tile;
  target_posblock[0xf] = 0;
  target_posblock[0x10] = 0;
  target_posblock[0x11] = 0;
  target_posblock[0x13] = 0;
  target_posblock[4] = 0;
  target_posblock[5] = 0;
  target_posblock[0xb] = target_posblock[1];
  target_posblock[7] = target_posblock[1];
  target_posblock[0xe] = 0x3f800000;
  target_posblock[0x12] = 0x3f800000;
  target_posblock[6] = 0x3f800000;
  target_posblock[0xc] = target_posblock[2];
  target_posblock[8] = target_posblock[2];
  target_posblock[0xd] = target_posblock[3];
  target_posblock[9] = target_posblock[3];
  target_posblock[10] = 0x41f00000;
  return;
}



void proc_7F07C7B4(void)

{
  int iVar1;
  float afStack76 [16];
  float *local_c;
  float *local_8;
  
  if ((longlong)ptr_playerstank != 0) {
    iVar1 = *(int *)(*(int *)(*(int *)(*(int *)(ptr_playerstank + 4) + 0x14) + 8) + 8);
    local_8 = *(float **)(*(int *)(iVar1 + 8) + 4);
    local_c = *(float **)(*(int *)(iVar1 + 4) + 4);
    proc_7F0585FC(flt_80055060 - dword_80036474,(longlong)ptr_playerstank,afStack76);
    DAT_800799a8 = *local_8;
    DAT_800799ac = local_8[1];
    dword_8007A070 = local_8[2];
    proc_7F0583D8(afStack76,(float *)&DAT_800799a8);
    DAT_800799a8 = DAT_800799a8 + *local_c;
    DAT_800799ac = DAT_800799ac + local_c[1];
    dword_8007A070 = dword_8007A070 + local_c[2];
  }
  return;
}



void proc_7F07C888(float *param_1,float *param_2,float param_3)

{
  int iVar1;
  int iVar2;
  float __x;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  
  iVar1 = *(int *)(ptr_playerstank + 4);
  iVar2 = proc_7F040078(iVar1);
  fVar7 = *(float *)(iVar2 + 4) - DAT_800799a8;
  fVar9 = *(float *)(iVar2 + 8) - DAT_800799a8;
  fVar8 = *(float *)(iVar2 + 0x14) - dword_8007A070;
  fVar10 = *(float *)(iVar2 + 0x18) - dword_8007A070;
  fVar3 = cosf(__x);
  fVar3 = fVar3 * *(float *)(*(int *)(iVar1 + 0x14) + 0x14);
  fVar4 = sinf(__x);
  fVar4 = fVar4 * *(float *)(*(int *)(iVar1 + 0x14) + 0x14);
  fVar5 = -fVar8 * fVar4;
  fVar11 = fVar7 * fVar3;
  *param_1 = *param_2 + fVar5 + fVar11;
  fVar8 = fVar8 * fVar3;
  fVar7 = fVar7 * fVar4;
  param_1[1] = param_2[2] + fVar8 + fVar7;
  fVar6 = fVar9 * fVar3;
  param_1[2] = *param_2 + fVar5 + fVar6;
  fVar9 = fVar9 * fVar4;
  param_1[3] = param_2[2] + fVar8 + fVar9;
  fVar4 = -fVar10 * fVar4;
  param_1[4] = *param_2 + fVar4 + fVar6;
  fVar10 = fVar10 * fVar3;
  param_1[5] = param_2[2] + fVar10 + fVar9;
  param_1[6] = *param_2 + fVar4 + fVar11;
  param_1[7] = param_2[2] + fVar10 + fVar7;
  return;
}



longlong proc_7F07CA2C(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 *param_7,undefined4 *param_8)

{
  longlong lVar1;
  
  lVar1 = proc_7F0B0E24();
  if ((lVar1 == 0) && (param_7 != NULL)) {
    *param_7 = param_2;
    param_7[1] = 0;
    param_7[2] = param_3;
    param_8[1] = 0;
    *param_8 = param_4;
    param_8[2] = param_5;
  }
  return lVar1;
}



undefined4
proc_7F07CAC8(f32 *posx,undefined4 param_2,float param_3,undefined4 *param_4,undefined4 *param_5)

{
  int iVar1;
  float *pfVar2;
  float *pfVar3;
  float *pfVar4;
  longlong lVar5;
  float fVar6;
  undefined4 *in_stack_00000010;
  float afStack140 [16];
  float fStack76;
  undefined4 uStack72;
  float fStack68;
  int iStack52;
  undefined4 uStack44;
  float fStack40;
  undefined4 uStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack4;
  
  uStack44 = 0;
  uStack4 = param_2;
  proc_7F07C888(&fStack40,(float *)posx,param_3);
  if (ptr_playerstank != NULL) {
    proc_7F03D058(ptr_playerstank,0);
  }
  lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,*posx,posx[2],fStack40,uStack36,0x213,param_5,
                        in_stack_00000010);
  if (lVar5 != 0) {
    lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,fStack40,uStack36,uStack32,uStack28,0x213,param_5,
                          in_stack_00000010);
    if (lVar5 != 0) {
      lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,uStack32,uStack28,uStack24,uStack20,0x213,
                            param_5,in_stack_00000010);
      if (lVar5 != 0) {
        lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,uStack24,uStack20,uStack16,uStack12,0x213,
                              param_5,in_stack_00000010);
        if ((lVar5 != 0) &&
           (lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,uStack16,uStack12,fStack40,uStack36,0x213,
                                  param_5,in_stack_00000010), lVar5 != 0)) {
          uStack44 = 1;
          if ((longlong)(int)ptr_playerstank != 0) {
            iStack52 = *(int *)(*(int *)(ptr_playerstank + 4) + 0x14);
            iVar1 = *(int *)(*(int *)(iStack52 + 8) + 8);
            pfVar2 = *(float **)(*(int *)(iVar1 + 0xc) + 4);
            pfVar3 = *(float **)(*(int *)(iVar1 + 0x10) + 4);
            pfVar4 = *(float **)(*(int *)(iVar1 + 8) + 4);
            uStack72 = 0;
            fStack76 = (*pfVar3 + *pfVar2) - *pfVar4;
            fVar6 = (float)param_4 + dword_80036474;
            fStack68 = (pfVar3[2] + pfVar2[2]) - pfVar4[2];
            if (flt_80055064 <= fVar6) {
              fVar6 = fVar6 - flt_80055064;
            }
            if (fVar6 < 0.00000000) {
              fVar6 = fVar6 + flt_80055064;
            }
            proc_7F0585FC(flt_80055064 - fVar6,(longlong)(int)ptr_playerstank,afStack140);
            proc_7F0583D8(afStack140,&fStack76);
            fStack76 = fStack76 * *(float *)(iStack52 + 0x14) + (float)*posx;
            fStack68 = fStack68 * *(float *)(iStack52 + 0x14) + (float)posx[2];
            uStack4 = param_2;
            lVar5 = proc_7F07CA2C((longlong)(int)&uStack4,*posx,posx[2],fStack76,fStack68,0x213,
                                  param_5,in_stack_00000010);
            if (lVar5 == 0) {
              uStack44 = 0;
            }
          }
        }
      }
    }
  }
  if (ptr_playerstank != NULL) {
    proc_7F03D058(ptr_playerstank,1);
  }
  return uStack44;
}



void proc_7F07CDA8(float *param_1,undefined4 param_2,float param_3)

{
  float in_a2_lo;
  
  proc_7F07CAC8((f32 *)param_1,param_2,in_a2_lo,(undefined4 *)in_a2_lo,NULL);
  return;
}



undefined8 related_printmanpos(float *param_1,float param_2,undefined4 *param_3)

{
  int iVar1;
  longlong lVar2;
  int *in_a2_lo;
  float extraout_f12;
  
  iVar1 = ptr_BONDdata->ptr_tile_printmanpos;
  lVar2 = proc_7F0B0E24();
  if ((lVar2 != 0) && (proc_7F07CDA8(param_1,iVar1,extraout_f12), lVar2 != 0)) {
    *in_a2_lo = iVar1;
    return 1;
  }
  return 0;
}



BOOL get_intank_flag(void)

{
  return in_tank_flag;
}



undefined4 get_ptr_for_players_tank(void)

{
  if (in_tank_flag == TRUE) {
    return ptr_playerstank;
  }
  return 0;
}



void proc_7F07CEB0(float *param_1)

{
  float fVar1;
  float fVar2;
  float __x;
  
  __x = dword_80036464 + dword_80036474;
  if (flt_80055068 <= __x) {
    __x = __x - flt_80055068;
  }
  if (__x < 0.00000000) {
    __x = __x + flt_80055068;
  }
  fVar1 = sinf(__x);
  fVar2 = cosf(dword_8003646C);
  *param_1 = fVar2 * -fVar1;
  fVar1 = sinf(dword_8003646C);
  param_1[1] = fVar1;
  __x = cosf(__x);
  fVar1 = cosf(dword_8003646C);
  param_1[2] = fVar1 * __x;
  return;
}



f32 proc_7F07CF80(void)

{
  return dword_8003646C;
}



undefined4 proc_7F07CF8C(void)

{
  undefined8 uVar1;
  int iVar3;
  longlong lVar2;
  float *in_a0_lo;
  char *pcVar4;
  int *in_a1_lo;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  undefined4 auStack92 [16];
  uint local_1c;
  undefined4 local_18;
  undefined4 local_14;
  float local_10;
  undefined4 local_c;
  int local_8;
  undefined4 local_4;
  
  local_4 = 0;
  if ((in_tank_flag == TRUE) && (DAT_800799b8 != 0)) {
    uVar1 = related_printmanpos(in_a0_lo,in_f12,dword_80036464);
    return (int)uVar1;
  }
  local_8 = ptr_BONDdata->ptr_tile_printmanpos;
  if (obj_collision_flag == FALSE) {
    local_c = 0;
  }
  else {
    local_c = 0x1f;
  }
  proc_7F08A274(ptr_BONDdata->position_data_pointer,&local_18,&local_10,&local_14);
  if (dword_8003644C != NULL) {
    proc_7F03D058(dword_8003644C,0);
  }
  proc_7F03D058((char *)ptr_BONDdata->position_data_pointer,0);
  local_1c = proc_7F0B2314(&local_8,extraout_f12,extraout_f14,*in_a0_lo,(undefined4 *)in_a0_lo[2]);
  iVar3 = proc_7F0B239C(auStack92);
  if (iVar3 != 0) {
    ptr_BONDdata->field_29FC = 0;
  }
  lVar2 = proc_7F0B0E24();
  if (((lVar2 == 0) || (lVar2 = proc_7F0B18B8(), -1 < lVar2)) ||
     (((float)ptr_BONDdata->ducking_height_offset != -100.00000000 && (-1 < (int)local_1c)))) {
LAB_7f07d1b4:
    if (ptr_playerstank != 0) {
      pcVar4 = (char *)ptr_BONDdata->position_data_pointer;
      goto LAB_7f07d200;
    }
    if (DAT_8007ba04 == NULL) {
      pcVar4 = (char *)ptr_BONDdata->position_data_pointer;
      goto LAB_7f07d200;
    }
    if (*DAT_8007ba04 != '\x01') {
      pcVar4 = (char *)ptr_BONDdata->position_data_pointer;
      goto LAB_7f07d200;
    }
    if (*(char *)(*(int *)(DAT_8007ba04 + 4) + 3) == '-') {
      dword_8003644C = DAT_8007ba04;
    }
  }
  else {
    iVar3 = proc_7F0B23A4((int)auStack92);
    lVar2 = (longlong)iVar3;
    if ((lVar2 == 0) &&
       (proc_7F0B26B8(&local_8,extraout_f12_00,extraout_f14_00,*in_a0_lo,in_a0_lo[2]), -1 < lVar2))
    goto LAB_7f07d1b4;
    *in_a1_lo = local_8;
    local_4 = 1;
  }
  pcVar4 = (char *)ptr_BONDdata->position_data_pointer;
LAB_7f07d200:
  proc_7F03D058(pcVar4,1);
  if (dword_8003644C != NULL) {
    proc_7F03D058(dword_8003644C,1);
  }
  return local_4;
}



ulonglong proc_7F07D234(undefined4 *param_1,float *param_2,float *param_3)

{
  longlong lVar1;
  int iStack4;
  
  proc_7F0B1CC4();
  lVar1 = proc_7F07CF8C();
  if (lVar1 == 0) {
    proc_7F0B28B0(param_2,param_3);
  }
  else {
    ptr_BONDdata->ptr_tile_printmanpos = iStack4;
    ptr_BONDdata->positionx = *param_1;
    ptr_BONDdata->positionz = param_1[2];
  }
  return (ulonglong)(lVar1 != 0);
}



undefined8 proc_7F07D2B4(float *param_1,float *param_2,float *param_3,float *param_4,float *param_5)

{
  longlong lVar1;
  undefined8 uVar2;
  float fVar3;
  float afStack80 [2];
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  f32 fStack44;
  int iStack40;
  float fStack36;
  float fStack28;
  float fStack24;
  float fStack16;
  undefined4 uStack12;
  float fStack8;
  int iStack4;
  
  proc_7F08A274(ptr_BONDdata->position_data_pointer,afStack80,&fStack8,&uStack12);
  fStack72 = *param_1 - (float)ptr_BONDdata->positionx;
  fStack48 = afStack80[0];
  fStack68 = param_1[2] - (float)ptr_BONDdata->positionz;
  fStack44 = ptr_BONDdata->positionx;
  iStack40 = ptr_BONDdata->positionz;
  fStack56 = *param_2;
  fStack52 = param_2[2];
  fStack64 = *param_3;
  fStack60 = param_3[2];
  fStack36 = fStack72;
  fStack28 = fStack68;
  fVar3 = proc_7F0B33DC(&fStack48,&fStack56,&fStack64,&fStack72);
  fStack24 = fStack36 * fVar3 * 0.25000000 + (float)ptr_BONDdata->positionx;
  fStack16 = fStack28 * fVar3 * 0.25000000 + (float)ptr_BONDdata->positionz;
  lVar1 = proc_7F07CF8C();
  if (lVar1 == 0) {
    proc_7F0B28B0(param_4,param_5);
    if ((((*param_4 != *param_2) || (param_4[1] != param_2[1])) || (param_4[2] != param_2[2])) ||
       (((*param_5 != *param_3 || (param_5[1] != param_3[1])) ||
        (uVar2 = 0xffffffffffffffff, param_5[2] != param_3[2])))) {
      uVar2 = 0;
    }
  }
  else {
    uVar2 = 1;
    ptr_BONDdata->ptr_tile_printmanpos = iStack4;
    *(float *)&ptr_BONDdata->positionx = fStack24;
    *(float *)&ptr_BONDdata->positionz = fStack16;
  }
  return uVar2;
}



undefined8 proc_7F07D4C0(float *param_1,float *param_2,float *param_3)

{
  longlong lVar1;
  undefined8 uVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  int local_2c;
  
  fVar4 = *param_1;
  fVar7 = (float)ptr_BONDdata->positionx;
  fVar6 = param_1[2];
  fVar8 = (float)ptr_BONDdata->positionz;
  if ((*param_2 != *param_3) || (uVar2 = 0xffffffffffffffff, param_2[2] != param_3[2])) {
    fVar5 = *param_3 - *param_2;
    fVar9 = param_3[2] - param_2[2];
    fVar3 = sqrtf(fVar9 * fVar9 + fVar5 * fVar5);
    fVar5 = fVar5 * (1.00000000 / fVar3);
    fVar9 = fVar9 * (1.00000000 / fVar3);
    fVar3 = (float)ptr_BONDdata->positionx;
    fVar7 = fVar9 * (fVar6 - fVar8) + (fVar4 - fVar7) * fVar5;
    fVar4 = (float)ptr_BONDdata->positionz;
    lVar1 = proc_7F07CF8C();
    if (lVar1 == 0) {
      uVar2 = 0;
    }
    else {
      uVar2 = 1;
      ptr_BONDdata->ptr_tile_printmanpos = local_2c;
      *(float *)&ptr_BONDdata->positionx = fVar5 * fVar7 + fVar3;
      *(float *)&ptr_BONDdata->positionz = fVar9 * fVar7 + fVar4;
    }
  }
  return uVar2;
}



undefined8 proc_7F07D61C(float *param_1,float *param_2,float *param_3)

{
  longlong lVar1;
  float fVar2;
  float fStack56;
  int iStack52;
  undefined4 uStack44;
  float fStack40;
  float fStack36;
  float fStack28;
  float fStack24;
  float fStack16;
  float fStack12;
  float fStack4;
  
  proc_7F08A274(ptr_BONDdata->position_data_pointer,&fStack56,&fStack40,&uStack44);
  fStack12 = *param_1 - (float)ptr_BONDdata->positionx;
  fStack4 = param_1[2] - (float)ptr_BONDdata->positionz;
  if ((param_2[2] - param_1[2]) * (param_2[2] - param_1[2]) +
      (*param_2 - *param_1) * (*param_2 - *param_1) <= fStack56 * fStack56) {
    if (*param_2 == (float)ptr_BONDdata->positionx) {
      if (param_2[2] == (float)ptr_BONDdata->positionz) {
        return 0;
      }
      fVar2 = param_2[2];
    }
    else {
      fVar2 = param_2[2];
    }
    fStack24 = -(fVar2 - (float)ptr_BONDdata->positionz);
    fStack16 = *param_2 - (float)ptr_BONDdata->positionx;
    fVar2 = sqrtf(fStack16 * fStack16 + fStack24 * fStack24);
    fStack24 = fStack24 * (1.00000000 / fVar2);
    fStack16 = fStack16 * (1.00000000 / fVar2);
    fVar2 = fStack16 * fStack4 + fStack12 * fStack24;
    fStack24 = fStack24 * fVar2;
    fStack16 = fStack16 * fVar2;
    fStack36 = fStack24 + (float)ptr_BONDdata->positionx;
    fStack28 = fStack16 + (float)ptr_BONDdata->positionz;
    lVar1 = proc_7F07CF8C();
    if (lVar1 != 0) {
      ptr_BONDdata->ptr_tile_printmanpos = iStack52;
      *(float *)&ptr_BONDdata->positionx = fStack36;
      *(float *)&ptr_BONDdata->positionz = fStack28;
      return 1;
    }
  }
  else {
    if ((param_3[2] - param_1[2]) * (param_3[2] - param_1[2]) +
        (*param_3 - *param_1) * (*param_3 - *param_1) <= fStack56 * fStack56) {
      if (*param_3 == (float)ptr_BONDdata->positionx) {
        if (param_3[2] == (float)ptr_BONDdata->positionz) {
          return 0;
        }
        fVar2 = param_3[2];
      }
      else {
        fVar2 = param_3[2];
      }
      fStack24 = -(fVar2 - (float)ptr_BONDdata->positionz);
      fStack16 = *param_3 - (float)ptr_BONDdata->positionx;
      fVar2 = sqrtf(fStack16 * fStack16 + fStack24 * fStack24);
      fStack24 = fStack24 * (1.00000000 / fVar2);
      fStack16 = fStack16 * (1.00000000 / fVar2);
      fVar2 = fStack16 * fStack4 + fStack12 * fStack24;
      fStack24 = fStack24 * fVar2;
      fStack16 = fStack16 * fVar2;
      fStack36 = fStack24 + (float)ptr_BONDdata->positionx;
      fStack28 = fStack16 + (float)ptr_BONDdata->positionz;
      lVar1 = proc_7F07CF8C();
      if (lVar1 != 0) {
        ptr_BONDdata->ptr_tile_printmanpos = iStack52;
        *(float *)&ptr_BONDdata->positionx = fStack36;
        *(float *)&ptr_BONDdata->positionz = fStack28;
        return 1;
      }
    }
  }
  return 0;
}



f32 proc_7F07D954(u32 param_1)

{
  return (f32)param_1;
}



void proc_7F07D960(float *param_1,int param_2)

{
  short sVar1;
  longlong lVar2;
  ulonglong uVar3;
  int iVar4;
  u32 uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  float extraout_f14_07;
  float extraout_f14_08;
  float afStack116 [3];
  float afStack104 [4];
  float afStack88 [3];
  float afStack76 [3];
  float local_40;
  int local_3c;
  uint local_2c;
  float *local_28;
  float afStack36 [3];
  float afStack24 [3];
  float local_c [2];
  float local_4;
  
  *(f32 *)&ptr_BONDdata->field_408 = ptr_BONDdata->positionx;
  ptr_BONDdata->field_40C = ptr_BONDdata->positiony;
  ptr_BONDdata->field_410 = ptr_BONDdata->positionz;
  local_c[0] = *param_1 + (float)ptr_BONDdata->positionx;
  dword_80036480 = 0;
  local_4 = param_1[2] + (float)ptr_BONDdata->positionz;
  ptr_BONDdata->field_29FC = 2;
  if (dword_8003644C == NULL) goto LAB_7f07dbf0;
  proc_7F03CCB0(dword_8003644C,(int **)&local_28,&local_2c);
  if (((in_tank_flag != TRUE) &&
      (lVar2 = proc_7F03CCD8((float *)&ptr_BONDdata->positionx,local_28,local_2c), lVar2 == 0)) &&
     (lVar2 = proc_7F044718((longlong)(int)&ptr_BONDdata->positionx,
                            (longlong)ptr_BONDdata->collision_radius,local_28,local_2c), lVar2 == 0)
     ) {
    if (ptr_playerstank != NULL) {
      dword_8003644C = NULL;
      ptr_playerstank = NULL;
      dword_80036454 = 0.00000000;
    }
    goto LAB_7f07dbf0;
  }
  iVar10 = *(int *)(dword_8003644C + 4);
  iVar9 = *(int *)(*(int *)(*(int *)(iVar10 + 0x14) + 8) + 8);
  iVar4 = *(int *)(*(int *)(iVar9 + 0x14) + 4);
  iVar9 = *(int *)(*(int *)(iVar9 + 0x18) + 4);
  ptr_playerstank = dword_8003644C;
  fVar12 = *(float *)(*(int *)(iVar10 + 0x14) + 0x14);
  fVar13 = (*(float *)(iVar4 + 0x10) - *(float *)(iVar4 + 0xc)) * fVar12;
  if (in_tank_flag == TRUE) {
    fVar14 = *(float *)(iVar9 + 0x10);
LAB_7f07dad8:
    dword_80036480 = 1;
    fVar13 = fVar13 + (fVar14 - *(float *)(iVar9 + 0xc)) * fVar12;
  }
  else {
    local_40 = fVar13;
    local_3c = iVar9;
    lVar2 = proc_7F03CCD8((float *)&ptr_BONDdata->positionx,(float *)(iVar10 + 0x84),
                          *(uint *)(iVar10 + 0x80));
    fVar13 = local_40;
    if (lVar2 != 0) {
      fVar12 = *(float *)(*(int *)(iVar10 + 0x14) + 0x14);
      fVar14 = *(float *)(local_3c + 0x10);
      fVar13 = local_40;
      iVar9 = local_3c;
      goto LAB_7f07dad8;
    }
  }
  if (((in_tank_flag == FALSE) && (dword_80036454 < fVar13)) &&
     (dword_80036454 = dword_80036454 + global_timer_delta * 20.00000000, dword_80036454 <= fVar13))
  {
    return;
  }
  dword_80036454 = fVar13;
  if (in_tank_flag == TRUE) {
    if (DAT_800799b8 == 0) {
      dword_80036454 = fVar13 + (1.00000000 - (float)f32_800799c0) * -37.00000000;
    }
    else {
      dword_80036454 = fVar13 + -37.00000000;
    }
  }
LAB_7f07dbf0:
  uVar3 = proc_7F07D234(local_c,afStack24,afStack36);
  fVar13 = extraout_f12;
  fVar12 = extraout_f14;
  if (uVar3 == 0) {
    lVar2 = proc_7F07D2B4(local_c,afStack24,afStack36,afStack76,afStack88);
    if ((lVar2 < 1) && (-1 < lVar2)) {
      fVar13 = extraout_f12_00;
      fVar12 = extraout_f14_00;
      if (lVar2 == 0) {
        proc_7F07D2B4(local_c,afStack76,afStack88,afStack104,afStack116);
        fVar13 = extraout_f12_03;
        fVar12 = extraout_f14_03;
        if ((((param_2 != 0) &&
             (lVar2 = proc_7F07D4C0(local_c,afStack76,afStack88), fVar13 = extraout_f12_04,
             fVar12 = extraout_f14_04, lVar2 < 1)) &&
            (lVar2 = proc_7F07D4C0(local_c,afStack24,afStack36), fVar13 = extraout_f12_05,
            fVar12 = extraout_f14_05, lVar2 < 1)) &&
           (lVar2 = proc_7F07D61C(local_c,afStack76,afStack88), fVar13 = extraout_f12_06,
           fVar12 = extraout_f14_06, lVar2 == 0)) {
          proc_7F07D61C(local_c,afStack24,afStack36);
          fVar13 = extraout_f12_07;
          fVar12 = extraout_f14_07;
        }
      }
    }
    else {
      fVar13 = extraout_f12_00;
      fVar12 = extraout_f14_00;
      if ((param_2 != 0) &&
         (lVar2 = proc_7F07D4C0(local_c,afStack24,afStack36), fVar13 = extraout_f12_01,
         fVar12 = extraout_f14_01, lVar2 < 1)) {
        proc_7F07D61C(local_c,afStack24,afStack36);
        fVar13 = extraout_f12_02;
        fVar12 = extraout_f14_02;
      }
    }
  }
  lVar2 = proc_7F0B0518(ptr_BONDdata->ptr_tile_printmanpos,fVar13,fVar12);
  if (lVar2 != 0) {
LAB_7f07de28:
    proc_7F07DE9C(ptr_BONDdata);
    if (ptr_BONDdata->ptr_tile_printmanpos != 0) {
      proc_7F057744((ulonglong)*(byte *)(ptr_BONDdata->ptr_tile_printmanpos + 3));
    }
    return;
  }
  iVar9 = 0;
  iVar10 = ptr_BONDdata->ptr_tile_printmanpos;
  sVar1 = *(short *)(iVar10 + 6);
  do {
    uVar7 = 0;
    uVar11 = (int)sVar1 >> 0xc & 0xf;
    if (uVar11 != 0) {
      iVar6 = 0;
      iVar4 = iVar10;
      do {
        iVar6 += 8;
        if ((int)(uint)*(ushort *)(iVar4 + 0xe) >> 4 != 0) {
          uVar7 += 1;
        }
        iVar4 += 8;
      } while (iVar6 < (int)(uVar11 << 3));
    }
    uVar5 = get_random_value();
    iVar4 = 0;
    uVar11 = (int)*(short *)(iVar10 + 6) >> 0xc & 0xf;
    if (uVar7 == 0) {
      trap(0x1c00);
    }
    uVar8 = 0;
    iVar6 = iVar10;
    if (uVar11 != 0) {
      do {
        iVar4 += 1;
        if ((int)(uint)*(ushort *)(iVar6 + 0xe) >> 4 != 0) {
          if (uVar8 == uVar5 % uVar7) {
            iVar10 = (uint)*(ushort *)(iVar6 + 0xe) * 8 + base_ptr_connection_vals;
            break;
          }
          uVar8 += 1;
        }
        iVar6 = iVar6 + 8;
      } while (iVar4 < (int)uVar11);
    }
    lVar2 = proc_7F0B0518(iVar10,extraout_f12_08,extraout_f14_08);
    if (lVar2 != 0) {
      ptr_BONDdata->ptr_tile_printmanpos = iVar10;
      goto LAB_7f07de28;
    }
    iVar9 += 1;
    if (iVar9 == 5) goto LAB_7f07de28;
    sVar1 = *(short *)(iVar10 + 6);
  } while( true );
}



void proc_7F07DE64(BONDdata *param_1)

{
  proc_7F03DE94(param_1->position_data_pointer,*(short *)&param_1->field_2A04);
  *(undefined2 *)&param_1->field_2A04 = 0xffff;
  return;
}



void proc_7F07DE9C(BONDdata *param_1)

{
  GUARDdata *pGVar1;
  
  proc_7F07DE64(param_1);
  pGVar1 = *(GUARDdata **)(param_1->position_data_pointer + 4);
  if (pGVar1 == NULL) {
    if (param_1->ptr_tile_printmanpos != 0) {
      *(ushort *)&param_1->field_2A04 = (ushort)*(byte *)(param_1->ptr_tile_printmanpos + 3);
      proc_7F03DD9C(param_1->position_data_pointer,*(short *)&param_1->field_2A04);
    }
  }
  else {
    proc_7F020D94(pGVar1);
  }
  return;
}



void proc_7F07DEFC(void)

{
  *(float *)&ptr_BONDdata->pause_starting_angle = ptr_BONDdata->inclination_angle1;
  ptr_BONDdata->field_210 = 0.00000000;
  ptr_BONDdata->field_218 = 0;
  return;
}



float proc_7F07DF28(longlong param_1)

{
  float fVar1;
  
  if (param_1 == 0) {
    ptr_BONDdata->field_208 = ptr_BONDdata->pause_starting_angle;
    *(float *)&ptr_BONDdata->pause_target_angle = ptr_BONDdata->inclination_angle1;
  }
  else {
    *(float *)&ptr_BONDdata->field_208 = ptr_BONDdata->inclination_angle1;
    ptr_BONDdata->pause_target_angle = -40.00000000;
  }
  fVar1 = (float)ptr_BONDdata->field_208 - (float)ptr_BONDdata->pause_target_angle;
  if (fVar1 < 0.00000000) {
    fVar1 = -fVar1;
  }
  if (60.00000000 <= fVar1) {
    return ((fVar1 - 60.00000000) * 60.00000000 * 0.50000000) / 60.00000000 + 60.00000000;
  }
  if (fVar1 <= 0.00000000) {
    return 0.00000000;
  }
  return (fVar1 * 60.00000000) / 60.00000000;
}



void proc_7F07E010(undefined4 param_1)

{
  f32 in_f12;
  
  ptr_BONDdata->field_210 = 0.00000000;
  ptr_BONDdata->field_214 = in_f12;
  ptr_BONDdata->field_218 = 1;
  return;
}



void proc_7F07E03C(undefined4 param_1)

{
  f32 in_f12;
  
  ptr_BONDdata->field_210 = 0.00000000;
  ptr_BONDdata->field_214 = in_f12;
  ptr_BONDdata->field_218 = 2;
  return;
}



ulonglong proc_7F07E068(void)

{
  return (ulonglong)(ptr_BONDdata->field_218 != 0 && ptr_BONDdata->field_218 != 3);
}



void proc_7F07E090(void)

{
  float fVar1;
  float fVar2;
  
  fVar2 = ptr_BONDdata->inclination_angle1;
  if (ptr_BONDdata->field_218 == 1) {
    *(float *)&ptr_BONDdata->field_210 =
         (float)ptr_BONDdata->field_210 + global_timer_delta * watch_transition_time;
    if ((float)ptr_BONDdata->field_210 < (float)ptr_BONDdata->field_214) {
      fVar1 = cosf(((float)ptr_BONDdata->field_210 / (float)ptr_BONDdata->field_214) * flt_8005506C
                   * 0.50000000);
      ptr_BONDdata->inclination_angle1 =
           (float)ptr_BONDdata->field_208 +
           ((float)ptr_BONDdata->pause_target_angle - (float)ptr_BONDdata->field_208) *
           (1.00000000 - fVar1) * 0.50000000;
    }
    else {
      *(f32 *)&ptr_BONDdata->inclination_angle1 = ptr_BONDdata->pause_target_angle;
      ptr_BONDdata->field_218 = 3;
    }
    fVar1 = ptr_BONDdata->inclination_angle1;
  }
  else {
    fVar1 = fVar2;
    if (ptr_BONDdata->field_218 == 2) {
      *(float *)&ptr_BONDdata->field_210 =
           (float)ptr_BONDdata->field_210 + global_timer_delta * watch_transition_time;
      if ((float)ptr_BONDdata->field_210 < (float)ptr_BONDdata->field_214) {
        fVar1 = cosf(((float)ptr_BONDdata->field_210 / (float)ptr_BONDdata->field_214) *
                     flt_80055070 * 0.50000000);
        ptr_BONDdata->inclination_angle1 =
             (float)ptr_BONDdata->pause_target_angle +
             ((float)ptr_BONDdata->field_208 - (float)ptr_BONDdata->pause_target_angle) *
             (1.00000000 - fVar1) * 0.50000000;
        fVar1 = ptr_BONDdata->inclination_angle1;
      }
      else {
        *(f32 *)&ptr_BONDdata->inclination_angle1 = ptr_BONDdata->field_208;
        ptr_BONDdata->field_218 = 0;
        fVar1 = ptr_BONDdata->inclination_angle1;
      }
    }
  }
  if (fVar1 < -180.00000000) {
    ptr_BONDdata->inclination_angle1 = fVar1 + 360.00000000;
  }
  else {
    if (180.00000000 <= fVar1) {
      ptr_BONDdata->inclination_angle1 = fVar1 - 360.00000000;
    }
  }
  if (0 < clock_timer) {
    ptr_BONDdata->inclination_turning_direction = ptr_BONDdata->inclination_angle1 - fVar2;
    fVar2 = ptr_BONDdata->inclination_turning_direction;
    if (fVar2 < 0.00000000) {
      ptr_BONDdata->inclination_turning_direction = fVar2 + 360.00000000;
      fVar2 = ptr_BONDdata->inclination_turning_direction;
    }
    if (180.00000000 < fVar2) {
      ptr_BONDdata->inclination_turning_direction = fVar2 - 360.00000000;
      fVar2 = ptr_BONDdata->inclination_turning_direction;
    }
    fVar1 = flt_80055074;
    ptr_BONDdata->inclination_turning_direction = fVar2 / (global_timer_delta + global_timer_delta);
    if (ptr_BONDdata->inclination_turning_direction < fVar1) {
      ptr_BONDdata->inclination_turning_direction = fVar1;
    }
    else {
      if (flt_80055078 < ptr_BONDdata->inclination_turning_direction) {
        ptr_BONDdata->inclination_turning_direction = flt_80055078;
      }
    }
  }
  return;
}



float proc_7F07E388(void)

{
  int iVar1;
  
  iVar1 = ptr_BONDdata->field_218;
  if (iVar1 == 1) {
    return (float)ptr_BONDdata->field_210 / (float)ptr_BONDdata->field_214;
  }
  if (iVar1 != 2) {
    if (iVar1 == 3) {
      return 1.00000000;
    }
    return 0.00000000;
  }
  return 1.00000000 - (float)ptr_BONDdata->field_210 / (float)ptr_BONDdata->field_214;
}



void trigger_watch_zoom(f32 final,f32 time)

{
  ptr_BONDdata->watch_menu_screen_swap_current_timer = 0.00000000;
  ptr_BONDdata->watch_endtime = time;
  ptr_BONDdata->watch_menu_initial_size = ptr_BONDdata->watch_menu_current_size;
  ptr_BONDdata->watch_menu_final_size = final;
  return;
}



BONDdata * proc_7F07E438(void)

{
  if ((float)ptr_BONDdata->watch_endtime <= ptr_BONDdata->watch_menu_screen_swap_current_timer) {
    return ptr_BONDdata;
  }
  return ptr_BONDdata;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F07E46C(void)

{
  float in_f0;
  float fVar1;
  float final;
  
  proc_7F07E438();
  if (in_f0 != final) {
    fVar1 = ptr_BONDdata->watch_menu_current_size;
    if (final < fVar1) {
      trigger_watch_zoom((f32)final,(f32)(((fVar1 - final) * 15.00000000) / 30.00000000));
    }
    else {
      trigger_watch_zoom((f32)final,(f32)(((final - fVar1) * 15.00000000) / 30.00000000));
    }
  }
  return;
}



void proc_7F07E504(void)

{
  proc_7F07E46C();
  return;
}



void zoom_to_watch_on_open(void)

{
  f32 time;
  
  time = (f32)(((final - ptr_BONDdata->watch_menu_current_size) * 45.00000000) / flt_80055080);
  if ((float)time < 0.00000000) {
    time = (f32)-(float)time;
  }
  trigger_watch_zoom((f32)final,time);
  return;
}



void zoom_from_watch_on_exit(void)

{
  f32 time;
  
  time = (f32)(((60.00000000 - ptr_BONDdata->watch_menu_current_size) * 45.00000000) / flt_80055084)
  ;
  if ((float)time < 0.00000000) {
    time = (f32)-(float)time;
  }
  trigger_watch_zoom(60.00000000,time);
  return;
}



ulonglong check_watch_page_transistion_running(void)

{
  return (ulonglong)
         (ptr_BONDdata->watch_menu_screen_swap_current_timer < (float)ptr_BONDdata->watch_endtime);
}



void proc_7F07E62C(void)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar2 = ptr_BONDdata->watch_menu_screen_swap_current_timer;
  if (fVar2 < (float)ptr_BONDdata->watch_endtime) {
    if ((ptr_BONDdata->pause_animation_state == 5) || (ptr_BONDdata->pause_animation_state == 0xc))
    {
      ptr_BONDdata->watch_menu_screen_swap_current_timer = fVar2 + (float)dword_80048498;
    }
    else {
      ptr_BONDdata->watch_menu_screen_swap_current_timer =
           fVar2 + (float)dword_80048498 * watch_transition_time;
    }
    fVar2 = (float)ptr_BONDdata->watch_endtime;
    fVar3 = ptr_BONDdata->watch_menu_screen_swap_current_timer;
    if (fVar2 < fVar3) {
      ptr_BONDdata->watch_menu_screen_swap_current_timer = fVar2;
      fVar3 = ptr_BONDdata->watch_menu_screen_swap_current_timer;
      fVar2 = (float)ptr_BONDdata->watch_endtime;
      fVar1 = ptr_BONDdata->watch_menu_initial_size;
    }
    else {
      fVar1 = ptr_BONDdata->watch_menu_initial_size;
    }
    ptr_BONDdata->watch_menu_current_size =
         fVar1 + (fVar3 * ((float)ptr_BONDdata->watch_menu_final_size - fVar1)) / fVar2;
  }
  else {
    *(f32 *)&ptr_BONDdata->watch_menu_screen_swap_current_timer = ptr_BONDdata->watch_endtime;
    *(f32 *)&ptr_BONDdata->watch_menu_current_size = ptr_BONDdata->watch_menu_final_size;
  }
  set_watch_menu_current_size_unused_maybe((f32)ptr_BONDdata->watch_menu_current_size);
  video_related_1F((f32)ptr_BONDdata->watch_menu_current_size);
  return;
}



// WARNING: Instruction at (ram,0x7f07e7ac) overlaps instruction at (ram,0x7f07e7a8)
// 

float proc_7F07E740(void)

{
  int iVar1;
  
  iVar1 = ptr_BONDdata->pause_animation_state;
  if (iVar1 == 4) {
    return ((45.00000000 - (float)ptr_BONDdata->watch_endtime) +
           ptr_BONDdata->watch_menu_screen_swap_current_timer) / 45.00000000;
  }
  if (iVar1 == 6) {
    return ((float)ptr_BONDdata->watch_endtime - ptr_BONDdata->watch_menu_screen_swap_current_timer)
           / 45.00000000;
  }
  if ((iVar1 != 5) && (iVar1 != 0xc)) {
    return 0.00000000;
  }
  return 1.00000000;
}



void proc_7F07E7CC(void)

{
  object_header *objheader;
  f32 scale;
  float extraout_f12;
  float extraout_f14;
  
  objheader = (object_header *)get_ptr_itemheader_in_hand(1);
  set_objuse_flag_compute_grp_nums_set_obj_loaded(objheader);
  if (0x32 < objheader->num_table_entries) {
    return_null();
  }
  proc_7F075FAC((int)&ptr_BONDdata->something_with_watch_object_instance,
                (player_gait_header *)objheader,&ptr_BONDdata->field_2EC);
  set_obj_instance_controller_scale((int)&ptr_BONDdata->something_with_watch_object_instance,scale);
  proc_7F06FCA8((int)&ptr_BONDdata->something_with_watch_object_instance,
                ptr_animation_table + 0x42c8,0,extraout_f12,0,extraout_f14);
  ptr_BONDdata->step_in_view_watch_animation = 0;
  return;
}



void proc_7F07E8B0(float param_1)

{
  if (ptr_BONDdata->step_in_view_watch_animation == 0) {
    *(float *)&ptr_BONDdata->field_22C = 20.00000000 / param_1;
  }
  else {
    *(float *)&ptr_BONDdata->field_22C = (20.00000000 - (float)ptr_BONDdata->field_258) / param_1;
  }
  ptr_BONDdata->step_in_view_watch_animation = 1;
  *(float *)&ptr_BONDdata->field_228 = param_1;
  return;
}



void proc_7F07E910(float param_1)

{
  if (ptr_BONDdata->step_in_view_watch_animation == 3) {
    *(float *)&ptr_BONDdata->field_22C = 20.00000000 / param_1;
  }
  else {
    *(float *)&ptr_BONDdata->field_22C = (float)ptr_BONDdata->field_258 / param_1;
  }
  ptr_BONDdata->step_in_view_watch_animation = 2;
  *(float *)&ptr_BONDdata->field_228 = param_1;
  return;
}



void proc_7F07E964(void)

{
  int iVar1;
  float in_f12;
  float in_f14;
  
  iVar1 = ptr_BONDdata->step_in_view_watch_animation;
  if ((iVar1 != 0) && (iVar1 != 3)) {
    if (iVar1 == 1) {
      *(float *)&ptr_BONDdata->pause_animation_counter =
           (float)ptr_BONDdata->pause_animation_counter +
           global_timer_delta * watch_transition_time * (float)ptr_BONDdata->field_22C;
      if (20.00000000 < (float)ptr_BONDdata->pause_animation_counter) {
        ptr_BONDdata->pause_animation_counter = 20.00000000;
        ptr_BONDdata->step_in_view_watch_animation = 3;
      }
    }
    else {
      if ((iVar1 == 2) &&
         (*(float *)&ptr_BONDdata->pause_animation_counter =
               (float)ptr_BONDdata->pause_animation_counter -
               global_timer_delta * watch_transition_time * (float)ptr_BONDdata->field_22C,
         (float)ptr_BONDdata->pause_animation_counter < 0.00000000)) {
        ptr_BONDdata->pause_animation_counter = 0.00000000;
        ptr_BONDdata->step_in_view_watch_animation = 0;
      }
    }
    proc_7F070090((int)&ptr_BONDdata->something_with_watch_object_instance,in_f12,in_f14);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f07ea94) overlaps instruction at (ram,0x7f07ea90)
// 

float proc_7F07EA78(void)

{
  int iVar1;
  
  iVar1 = ptr_BONDdata->step_in_view_watch_animation;
  if ((iVar1 != 1) && (iVar1 != 2)) {
    if (iVar1 != 3) {
      return 0.00000000;
    }
    return 1.00000000;
  }
  return (float)ptr_BONDdata->pause_animation_counter / 20.00000000;
}



void set_BONDdata_paused_flag(int ispaused)

{
  ptr_BONDdata->paused_flag = ispaused;
  return;
}



int get_BONDdata_paused_flag(void)

{
  return ptr_BONDdata->paused_flag;
}



void proc_7F07EAF0(void)

{
  char cVar1;
  int iVar2;
  ulonglong uVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  char *pcVar7;
  
  deactivate_alarm_sound_effect();
  proc_7F055EF8();
  iVar6 = 0;
  do {
    iVar4 = (int)&ptr_BONDdata->unknown + iVar6;
    iVar2 = *(int *)(iVar4 + 0xa44);
    if ((iVar2 != 0) && (uVar3 = music_related_26(iVar2), uVar3 != 0)) {
      music_related_28(*(int *)(iVar4 + 0xa44));
    }
    iVar6 += 0x3a8;
  } while (iVar6 < 0x750);
  piVar5 = &dword_80036458;
  iVar6 = dword_80036458;
  while( true ) {
    if ((iVar6 != 0) && (uVar3 = music_related_26(iVar6), uVar3 != 0)) {
      music_related_28(*piVar5);
    }
    piVar5 = piVar5 + 1;
    if (piVar5 == &dword_80036460) break;
    iVar6 = *piVar5;
  }
  pcVar7 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar7 == NULL) {
    return;
  }
  cVar1 = *pcVar7;
  do {
    if (cVar1 == '\x02') {
LAB_7f07ec34:
      pcVar7 = *(char **)(pcVar7 + 0x24);
    }
    else {
      if (cVar1 == '\x01') {
        iVar6 = *(int *)(pcVar7 + 4);
        if (*(char *)(iVar6 + 3) == '\'') {
          if (*(int *)(iVar6 + 0xac) == 0) {
            pcVar7 = *(char **)(pcVar7 + 0x24);
          }
          else {
            uVar3 = music_related_26(*(int *)(iVar6 + 0xac));
            if (uVar3 == 0) {
              pcVar7 = *(char **)(pcVar7 + 0x24);
            }
            else {
              music_related_28(*(int *)(iVar6 + 0xac));
              pcVar7 = *(char **)(pcVar7 + 0x24);
            }
          }
        }
        else {
          if (*(char *)(iVar6 + 3) == '(') {
            if (*(int *)(iVar6 + 0xb0) == 0) {
              pcVar7 = *(char **)(pcVar7 + 0x24);
            }
            else {
              uVar3 = music_related_26(*(int *)(iVar6 + 0xb0));
              if (uVar3 != 0) {
                music_related_28(*(int *)(iVar6 + 0xb0));
                goto LAB_7f07ec34;
              }
              pcVar7 = *(char **)(pcVar7 + 0x24);
            }
          }
          else {
            pcVar7 = *(char **)(pcVar7 + 0x24);
          }
        }
      }
      else {
        pcVar7 = *(char **)(pcVar7 + 0x24);
      }
    }
    if (pcVar7 == NULL) {
      return;
    }
    cVar1 = *pcVar7;
  } while( true );
}



// WARNING: Instruction at (ram,0x7f07f738) overlaps instruction at (ram,0x7f07f734)
// 

void probably_look_at_watch(void)

{
  bool bVar1;
  ITEM_IDS IVar3;
  int iVar4;
  ITEM_IDS IVar5;
  ulonglong uVar2;
  int iVar6;
  undefined4 extraout_a0_lo;
  undefined4 extraout_a0_lo_00;
  undefined4 extraout_a0_lo_01;
  undefined4 extraout_a0_lo_02;
  float fVar7;
  float fVar8;
  float local_14;
  
  iVar6 = ptr_BONDdata->pause_animation_state;
  if (iVar6 == 0) goto LAB_7f07f80c;
  IVar3 = get_item_in_hand(0);
  bVar1 = IVar3 == ITEM_TRIGGER;
  if (!bVar1) {
    IVar3 = get_item_in_hand(0);
    bVar1 = IVar3 == ITEM_WATCHLASER;
  }
  iVar6 = 0x11;
  if (bVar1) {
    iVar6 = 0x23;
  }
  ptr_BONDdata->field_1C4 = ptr_BONDdata->field_1C4 + clock_timer;
  ptr_BONDdata->field_1C0 = ptr_BONDdata->field_1C0 + 1;
  ptr_BONDdata->pausing_flag = 0;
  if (ptr_BONDdata->pause_animation_state == 1) {
    ptr_BONDdata->pausing_flag = 0;
    if (ptr_BONDdata->field_1C0 == 1) {
      draw_item_in_hand(1,0x54);
    }
    else {
      if (ptr_BONDdata->field_1C0 == 2) {
        if (bVar1) {
          draw_item_in_hand(0,0);
        }
      }
      else {
        iVar4 = return_ammo_in_hand(1);
        if ((((iVar4 == 0x54) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) &&
            ((!bVar1 ||
             ((iVar4 = return_ammo_in_hand(0), iVar4 == 0 && (uVar2 = proc_7F05CEBC(0), uVar2 != 0))
             )))) && (iVar6 <= ptr_BONDdata->field_1C4)) {
          ptr_BONDdata->pause_animation_state = 2;
          ptr_BONDdata->field_1C0 = 1;
          ptr_BONDdata->field_1C4 = 0;
        }
      }
    }
  }
  if (ptr_BONDdata->pause_animation_state == 2) {
    ptr_BONDdata->pausing_flag = 0;
    if (ptr_BONDdata->field_1C0 == 1) {
      set_unset_bitflags(8,0);
      set_unset_ammo_on_screen_setting(4,0);
      set_flags_in_BONDdata_stationary_intro_cam(1);
      proc_7F08A944(1);
      set_unset_clock_lock_bits(4,0);
      iVar6 = ptr_BONDdata->field_218;
      if (((iVar6 == 0) || (iVar6 == 2)) || (iVar6 == 3)) {
        proc_7F07DF28(1);
        proc_7F07E010(extraout_a0_lo);
        fVar8 = (float)ptr_BONDdata->field_214;
      }
      else {
        fVar8 = (float)ptr_BONDdata->field_214;
      }
    }
    else {
      fVar8 = (float)ptr_BONDdata->field_214;
    }
    if (fVar8 - (float)ptr_BONDdata->field_210 < 30.00000000) {
      ptr_BONDdata->pause_animation_state = 3;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      proc_7F07E7CC();
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
    else {
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
  }
  else {
    iVar6 = ptr_BONDdata->pause_animation_state;
  }
  if (iVar6 == 3) {
    if (ptr_BONDdata->field_1C0 == 1) {
      iVar6 = ptr_BONDdata->field_218;
      fVar8 = 40.00000000;
      if ((ptr_BONDdata->step_in_view_watch_animation != 0) &&
         (fVar8 = 40.00000000, ptr_BONDdata->step_in_view_watch_animation != 3)) {
        fVar8 = ((20.00000000 - (float)ptr_BONDdata->field_258) * 40.00000000) / 20.00000000;
      }
      if (((iVar6 == 0) || (iVar6 == 2)) || (local_14 = fVar8, iVar6 == 3)) {
        fVar7 = proc_7F07DF28(1);
        local_14 = fVar8 - 10.00000000;
        if (local_14 <= fVar7) {
          local_14 = fVar7;
        }
        proc_7F07E010(extraout_a0_lo_00);
        local_14 = local_14 + 10.00000000;
        if (local_14 <= fVar8) {
          local_14 = fVar8;
        }
      }
      proc_7F07E8B0(local_14);
      iVar6 = ptr_BONDdata->step_in_view_watch_animation;
    }
    else {
      iVar6 = ptr_BONDdata->step_in_view_watch_animation;
    }
    if (((iVar6 == 0) || (iVar6 == 3)) && (uVar2 = proc_7F07E068(), uVar2 == 0)) {
      ptr_BONDdata->pause_animation_state = 4;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
    else {
      ptr_BONDdata->pausing_flag = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
  }
  if (iVar6 == 4) {
    if ((ptr_BONDdata->field_1C0 == 1) && (ptr_BONDdata->field_21C != 0)) {
      play_sfx_a1(ptr_sfx_buf,0xed,NULL);
      ptr_BONDdata->field_21C = 0;
    }
    zoom_to_watch_on_open();
    uVar2 = check_watch_page_transistion_running();
    if (uVar2 == 0) {
      ptr_BONDdata->pause_animation_state = 5;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      ptr_BONDdata->field_21C = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
    else {
      ptr_BONDdata->pausing_flag = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
  }
  if (iVar6 == 5) {
    if (ptr_BONDdata->field_1C0 == 1) {
      proc_7F0C1310();
    }
    ptr_BONDdata->pausing_flag = 1;
    iVar6 = ptr_BONDdata->pause_animation_state;
  }
  if (iVar6 == 0xc) {
    ptr_BONDdata->pausing_flag = 1;
    if (2 < ptr_BONDdata->field_1C0) {
      ptr_BONDdata->pause_animation_state = 6;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      play_sfx_a1(ptr_sfx_buf,0xee,NULL);
      goto LAB_7f07f1d8;
    }
    iVar6 = ptr_BONDdata->pause_animation_state;
  }
  else {
LAB_7f07f1d8:
    iVar6 = ptr_BONDdata->pause_animation_state;
  }
  if (iVar6 == 6) {
    if (ptr_BONDdata->field_1C0 == 1) {
      zoom_from_watch_on_exit();
      if (bVar1) {
        draw_item_in_hand(0,0);
      }
      else {
        proc_7F05DAE4(0);
      }
    }
    uVar2 = check_watch_page_transistion_running();
    if (uVar2 == 0) {
      ptr_BONDdata->pause_animation_state = 7;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      ptr_BONDdata->field_21C = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
    else {
      ptr_BONDdata->pausing_flag = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
  }
  if (iVar6 == 7) {
    if (ptr_BONDdata->field_1C0 == 1) {
      proc_7F07DF28(0);
      fVar8 = 40.00000000;
      if ((ptr_BONDdata->step_in_view_watch_animation != 0) &&
         (ptr_BONDdata->step_in_view_watch_animation != 3)) {
        fVar8 = ((float)ptr_BONDdata->field_258 * 40.00000000) / 20.00000000;
      }
      proc_7F07E03C(extraout_a0_lo_01);
      proc_7F07E910(fVar8);
    }
    if ((ptr_BONDdata->step_in_view_watch_animation == 0) ||
       (ptr_BONDdata->step_in_view_watch_animation == 3)) {
      ptr_BONDdata->pause_animation_state = 8;
      ptr_BONDdata->field_1C0 = 1;
      ptr_BONDdata->field_1C4 = 0;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
    else {
      ptr_BONDdata->pausing_flag = 1;
      iVar6 = ptr_BONDdata->pause_animation_state;
    }
  }
  if (iVar6 == 8) {
    ptr_BONDdata->pausing_flag = 0;
    if (ptr_BONDdata->field_1C0 == 1) {
      IVar3 = return_ammo_in_hand(1);
      IVar5 = get_item_in_hand(1);
      if ((IVar5 != IVar3) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) {
        IVar3 = get_item_in_hand(1);
        draw_item_in_hand(1,IVar3);
      }
      if (bVar1) {
        IVar3 = return_ammo_in_hand(0);
        IVar5 = get_item_in_hand(0);
        if ((IVar5 != IVar3) && (uVar2 = proc_7F05CEBC(0), uVar2 != 0)) {
          IVar3 = get_item_in_hand(0);
          draw_item_in_hand(0,IVar3);
        }
      }
    }
    else {
      uVar2 = proc_7F07E068();
      if (uVar2 == 0) {
        IVar3 = return_ammo_in_hand(1);
        IVar5 = get_item_in_hand(1);
        if ((IVar5 == IVar3) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) {
          if (bVar1) {
            IVar3 = return_ammo_in_hand(0);
            IVar5 = get_item_in_hand(0);
            if ((IVar5 != IVar3) || (uVar2 = proc_7F05CEBC(0), uVar2 == 0)) goto LAB_7f07f548;
          }
          proc_7F05DAE4(1);
          if (bVar1) {
            proc_7F05DAE4(0);
          }
          set_unset_bitflags(8,1);
          set_unset_ammo_on_screen_setting(4,1);
          proc_7F08A380(1);
          proc_7F08A928(1);
          set_unset_clock_lock_bits(4,1);
          ptr_BONDdata->pause_animation_state = 0;
          ptr_BONDdata->field_1C0 = 0;
          ptr_BONDdata->field_1C4 = 0;
        }
      }
    }
  }
LAB_7f07f548:
  if (ptr_BONDdata->pause_animation_state == 9) {
    ptr_BONDdata->pausing_flag = 0;
    IVar3 = get_item_in_hand(1);
    IVar5 = return_ammo_in_hand(1);
    if ((IVar5 != IVar3) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) {
      if (bVar1) {
        IVar3 = get_item_in_hand(0);
        IVar5 = return_ammo_in_hand(0);
        if ((IVar5 == IVar3) || (uVar2 = proc_7F05CEBC(0), uVar2 == 0)) goto LAB_7f07f5ec;
      }
      ptr_BONDdata->pause_animation_state = 8;
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
    }
  }
LAB_7f07f5ec:
  if (ptr_BONDdata->pause_animation_state == 10) {
    ptr_BONDdata->pausing_flag = 0;
    if (ptr_BONDdata->field_1C0 == 1) {
      proc_7F07DF28(0);
      proc_7F07E03C(extraout_a0_lo_02);
    }
    IVar3 = get_item_in_hand(1);
    IVar5 = return_ammo_in_hand(1);
    if ((IVar5 != IVar3) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) {
      if (bVar1) {
        IVar3 = get_item_in_hand(0);
        IVar5 = return_ammo_in_hand(0);
        if ((IVar5 == IVar3) || (uVar2 = proc_7F05CEBC(0), uVar2 == 0)) goto LAB_7f07f6b8;
      }
      ptr_BONDdata->pause_animation_state = 8;
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
    }
  }
LAB_7f07f6b8:
  if (ptr_BONDdata->pause_animation_state == 0xb) {
    ptr_BONDdata->pausing_flag = 0;
    IVar3 = get_item_in_hand(1);
    IVar5 = return_ammo_in_hand(1);
    if ((IVar5 == IVar3) && (uVar2 = proc_7F05CEBC(1), uVar2 != 0)) {
      if (bVar1) {
        IVar3 = get_item_in_hand(0);
        IVar5 = return_ammo_in_hand(0);
        if ((IVar5 != IVar3) || (uVar2 = proc_7F05CEBC(0), uVar2 == 0)) goto LAB_7f07f760;
      }
      ptr_BONDdata->pause_animation_state = 1;
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
    }
  }
LAB_7f07f760:
  if (ptr_BONDdata->pause_animation_state == 0xd) {
    ptr_BONDdata->pausing_flag = 0;
    uVar2 = proc_7F05CEBC(1);
    if (((((uVar2 != 0) && (uVar2 = proc_7F05CEBC(0), uVar2 != 0)) &&
         (iVar6 = ptr_BONDdata->field_C3C, iVar6 != 5)) && ((iVar6 != 6 && (iVar6 != 7)))) &&
       (iVar6 != 8)) {
      ptr_BONDdata->pause_animation_state = 1;
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
    }
  }
  proc_7F07E090();
  proc_7F07E964();
  proc_7F07E62C();
  iVar6 = ptr_BONDdata->pause_animation_state;
LAB_7f07f80c:
  if (iVar6 == 5) {
    set_controls_locked_flag(1);
    proc_7F0A6A80();
  }
  else {
    if (iVar6 == 0xc) {
      set_controls_locked_flag(1);
    }
    else {
      set_controls_locked_flag(0);
    }
  }
  return;
}



void set_open_close_solo_watch_menu_to_1(void)

{
  ptr_BONDdata->open_close_solo_watch_menu = 1;
  return;
}



void trigger_solo_watch_menu(longlong param_1)

{
  BONDdata *pBVar1;
  ulonglong uVar2;
  int *piVar3;
  int *piVar4;
  undefined4 *puVar5;
  int iVar6;
  int *piVar7;
  float extraout_f12;
  float extraout_f12_00;
  
  iVar6 = ptr_BONDdata->pause_animation_state;
  if (iVar6 == 0) {
    if (param_1 == 0) {
      watch_transition_time = watch_transition_time * flt_80055090;
      if (flt_8005508C < watch_transition_time) {
        watch_transition_time = flt_8005508C;
      }
      uVar2 = proc_7F05CEBC(1);
      if ((((uVar2 == 0) || (uVar2 = proc_7F05CEBC(0), uVar2 == 0)) ||
          (iVar6 = ptr_BONDdata->field_C3C, iVar6 == 5)) ||
         (((iVar6 == 6 || (iVar6 == 7)) || (iVar6 == 8)))) {
        ptr_BONDdata->pause_animation_state = 0xd;
      }
      else {
        ptr_BONDdata->pause_animation_state = 1;
      }
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
      proc_7F07DEFC();
      proc_7F07E504();
      get_BONDdata_watch_armor();
      proc_7F0A2F30((short *)&ptr_BONDdata->related_to_armor_display,0x2e,1,extraout_f12);
      proc_7F0A3330(&ptr_BONDdata->field_19F8,(int)&ptr_BONDdata[0x30303].field_1338,0x2e);
      get_BONDdata_watch_health();
      proc_7F0A2F30((short *)&ptr_BONDdata->related_to_health_display,0x2e,-1,extraout_f12_00);
      proc_7F0A3330(&ptr_BONDdata->field_2128,(int)&ptr_BONDdata[0x30303].field_1618,0x2e);
      proc_7F0A69A8();
      iVar6 = 0;
      piVar4 = &ptr_BONDdata->buffer_for_watch_greenbackdrop_DL;
      piVar7 = &ptr_BONDdata->buffer_for_watch_greenbackdrop_vertices;
      do {
        piVar3 = (int *)proc_7F0A3AB8((short *)piVar7,(short)iVar6,0,100,0x14,-299,0x136);
        piVar4 = proc_7F0A3B40(piVar4,piVar7 + -0x20000000);
        iVar6 += 0x7d;
        piVar7 = piVar3;
      } while (iVar6 != 0x271);
      *piVar4 = -0x48000000;
      piVar4[1] = 0;
      pBVar1 = ptr_BONDdata;
      piVar7 = &ptr_BONDdata->field_2998;
      proc_7F0A3AB8((short *)&ptr_BONDdata->field_19B8,0,0,0x398,0x14,-0x1cc,0);
      puVar5 = proc_7F0A3B40(piVar7,&pBVar1[0x30303].field_1A38);
      *puVar5 = 0xb8000000;
      puVar5[1] = 0;
    }
  }
  else {
    if (iVar6 == 1) {
      ptr_BONDdata->pause_animation_state = 9;
      ptr_BONDdata->field_1C0 = 0;
      ptr_BONDdata->field_1C4 = 0;
    }
    else {
      if (iVar6 == 2) {
        ptr_BONDdata->pause_animation_state = 10;
        ptr_BONDdata->field_1C0 = 0;
        ptr_BONDdata->field_1C4 = 0;
      }
      else {
        if (iVar6 == 3) {
          ptr_BONDdata->pause_animation_state = 7;
          ptr_BONDdata->field_1C0 = 0;
          ptr_BONDdata->field_1C4 = 0;
        }
        else {
          if (iVar6 == 4) {
            ptr_BONDdata->pause_animation_state = 6;
            ptr_BONDdata->field_1C0 = 0;
            ptr_BONDdata->field_1C4 = 0;
          }
          else {
            if (iVar6 == 5) {
              deleteCurrentSelectedFolder();
              proc_7F0C1340();
              ptr_BONDdata->pause_animation_state = 0xc;
              ptr_BONDdata->field_1C0 = 0;
              ptr_BONDdata->field_1C4 = 0;
              ptr_BONDdata->open_close_solo_watch_menu = 0;
            }
            else {
              if (iVar6 != 0xc) {
                if (iVar6 == 6) {
                  if (param_1 == 0) {
                    ptr_BONDdata->pause_animation_state = 4;
                    ptr_BONDdata->field_1C0 = 0;
                    ptr_BONDdata->field_1C4 = 0;
                    proc_7F0A69A8();
                  }
                }
                else {
                  if (iVar6 == 7) {
                    if (param_1 == 0) {
                      ptr_BONDdata->pause_animation_state = 3;
                      ptr_BONDdata->field_1C0 = 0;
                      ptr_BONDdata->field_1C4 = 0;
                      proc_7F0A69A8();
                    }
                  }
                  else {
                    if (iVar6 == 8) {
                      if (param_1 == 0) {
                        ptr_BONDdata->pause_animation_state = 0xb;
                        ptr_BONDdata->field_1C0 = 0;
                        ptr_BONDdata->field_1C4 = 0;
                        proc_7F0A69A8();
                      }
                    }
                    else {
                      if (iVar6 == 9) {
                        if (param_1 == 0) {
                          ptr_BONDdata->pause_animation_state = 1;
                          ptr_BONDdata->field_1C0 = 0;
                          ptr_BONDdata->field_1C4 = 0;
                        }
                      }
                      else {
                        if (iVar6 == 10) {
                          if (param_1 == 0) {
                            ptr_BONDdata->pause_animation_state = 1;
                            ptr_BONDdata->field_1C0 = 0;
                            ptr_BONDdata->field_1C4 = 0;
                          }
                        }
                        else {
                          if (iVar6 == 0xb) {
                            ptr_BONDdata->pause_animation_state = 8;
                            ptr_BONDdata->field_1C0 = 0;
                            ptr_BONDdata->field_1C4 = 0;
                          }
                          else {
                            if (iVar6 == 0xd) {
                              ptr_BONDdata->pause_animation_state = 0;
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



void proc_7F07FCC4(longlong param_1)

{
  float fVar1;
  
  if (param_1 == -1) {
    ptr_BONDdata->strafe_movement_direction =
         ptr_BONDdata->strafe_movement_direction - global_timer_delta;
    fVar1 = ptr_BONDdata->strafe_movement_direction;
    if (fVar1 < -1.00000000) {
      ptr_BONDdata->strafe_movement_direction = -1.00000000;
      fVar1 = ptr_BONDdata->strafe_movement_direction;
    }
  }
  else {
    if (param_1 == 1) {
      ptr_BONDdata->strafe_movement_direction =
           ptr_BONDdata->strafe_movement_direction + global_timer_delta;
      fVar1 = ptr_BONDdata->strafe_movement_direction;
      if (1.00000000 < fVar1) {
        ptr_BONDdata->strafe_movement_direction = 1.00000000;
        fVar1 = ptr_BONDdata->strafe_movement_direction;
      }
    }
    else {
      fVar1 = ptr_BONDdata->strafe_movement_direction;
      if (0.00000000 < fVar1) {
        ptr_BONDdata->strafe_movement_direction = fVar1 - global_timer_delta;
        fVar1 = ptr_BONDdata->strafe_movement_direction;
        if (fVar1 < 0.00000000) {
          ptr_BONDdata->strafe_movement_direction = 0.00000000;
          fVar1 = ptr_BONDdata->strafe_movement_direction;
        }
      }
      else {
        ptr_BONDdata->strafe_movement_direction = fVar1 + global_timer_delta;
        fVar1 = ptr_BONDdata->strafe_movement_direction;
        if (0.00000000 < fVar1) {
          ptr_BONDdata->strafe_movement_direction = 0.00000000;
          fVar1 = ptr_BONDdata->strafe_movement_direction;
        }
      }
    }
  }
  ptr_BONDdata->strafe_speed_multiplier = fVar1;
  return;
}



void proc_7F07FE1C(longlong param_1)

{
  f32 fVar1;
  float fVar2;
  
  if (param_1 == 1) {
    *(float *)&ptr_BONDdata->field_2A4C = (float)ptr_BONDdata->field_2A4C + global_timer_delta;
    fVar1 = ptr_BONDdata->field_2A4C;
    if (1.00000000 < (float)fVar1) {
      ptr_BONDdata->field_2A4C = 1.00000000;
      fVar1 = ptr_BONDdata->field_2A4C;
    }
  }
  else {
    if (param_1 == -1) {
      *(float *)&ptr_BONDdata->field_2A4C = (float)ptr_BONDdata->field_2A4C - global_timer_delta;
      fVar1 = ptr_BONDdata->field_2A4C;
      if ((float)fVar1 < -1.00000000) {
        ptr_BONDdata->field_2A4C = -1.00000000;
        fVar1 = ptr_BONDdata->field_2A4C;
      }
    }
    else {
      fVar2 = (float)ptr_BONDdata->field_2A4C;
      if (0.00000000 < fVar2) {
        *(float *)&ptr_BONDdata->field_2A4C = fVar2 - global_timer_delta;
        fVar1 = ptr_BONDdata->field_2A4C;
        if ((float)fVar1 < 0.00000000) {
          ptr_BONDdata->field_2A4C = 0.00000000;
          fVar1 = ptr_BONDdata->field_2A4C;
        }
      }
      else {
        *(float *)&ptr_BONDdata->field_2A4C = fVar2 + global_timer_delta;
        fVar1 = ptr_BONDdata->field_2A4C;
        if (0.00000000 < (float)fVar1) {
          ptr_BONDdata->field_2A4C = 0.00000000;
          fVar1 = ptr_BONDdata->field_2A4C;
        }
      }
    }
  }
  *(f32 *)&ptr_BONDdata->forward_speed_multiplier = fVar1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F07FF74(void)

{
  float in_f0;
  float fVar1;
  float in_f12;
  
  if (0.00000000 < in_f12) {
    video_related_23();
    fVar1 = (in_f0 * in_f12 * flt_80055094) / 60.00000000;
  }
  else {
    if (in_f12 < 0.00000000) {
      video_related_23();
      fVar1 = (in_f0 * -in_f12 * flt_80055098) / 60.00000000;
    }
    else {
      fVar1 = 0.00000000;
    }
  }
  return fVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F080010(void)

{
  float in_f0;
  float fVar1;
  float fVar2;
  float in_f12;
  
  video_related_23();
  in_f0 = in_f0 / 60.00000000;
  fVar1 = (float)proc_7F07FF74();
  if (0.00000000 < in_f12) {
    fVar2 = ptr_BONDdata->inclination_turning_direction;
    if (0.00000000 < fVar2) {
      ptr_BONDdata->inclination_turning_direction =
           fVar2 - flt_8005509C * global_timer_delta * in_f0;
    }
    else {
      ptr_BONDdata->inclination_turning_direction =
           fVar2 - flt_800550A0 * global_timer_delta * in_f0;
    }
    if (ptr_BONDdata->inclination_turning_direction < fVar1) {
      ptr_BONDdata->inclination_turning_direction = fVar1;
    }
  }
  else {
    if (in_f12 < 0.00000000) {
      fVar2 = ptr_BONDdata->inclination_turning_direction;
      if (fVar2 < 0.00000000) {
        ptr_BONDdata->inclination_turning_direction =
             fVar2 + flt_800550A4 * global_timer_delta * in_f0;
      }
      else {
        ptr_BONDdata->inclination_turning_direction =
             fVar2 + flt_800550A8 * global_timer_delta * in_f0;
      }
      if (fVar1 < ptr_BONDdata->inclination_turning_direction) {
        ptr_BONDdata->inclination_turning_direction = fVar1;
      }
    }
    else {
      fVar2 = ptr_BONDdata->inclination_turning_direction;
      if (fVar1 < fVar2) {
        ptr_BONDdata->inclination_turning_direction =
             fVar2 - flt_800550AC * global_timer_delta * in_f0;
        if (ptr_BONDdata->inclination_turning_direction < fVar1) {
          ptr_BONDdata->inclination_turning_direction = fVar1;
        }
      }
      else {
        ptr_BONDdata->inclination_turning_direction =
             fVar2 + flt_800550B0 * global_timer_delta * in_f0;
        if (fVar1 < ptr_BONDdata->inclination_turning_direction) {
          ptr_BONDdata->inclination_turning_direction = fVar1;
        }
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F080228(void)

{
  float in_f0;
  float fVar1;
  float in_f12;
  
  if (0.00000000 < in_f12) {
    video_related_23();
    fVar1 = (in_f0 * in_f12 * flt_800550B4) / 60.00000000;
  }
  else {
    if (in_f12 < 0.00000000) {
      video_related_23();
      fVar1 = (in_f0 * -in_f12 * flt_800550B8) / 60.00000000;
    }
    else {
      fVar1 = 0.00000000;
    }
  }
  return fVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0802C4(void)

{
  float in_f0;
  float fVar1;
  float fVar2;
  float in_f12;
  
  video_related_23();
  in_f0 = in_f0 / 60.00000000;
  fVar1 = (float)proc_7F080228();
  if (0.00000000 < in_f12) {
    fVar2 = ptr_BONDdata->azimuth_turning_direction;
    if (0.00000000 < fVar2) {
      ptr_BONDdata->azimuth_turning_direction = fVar2 - flt_800550BC * global_timer_delta * in_f0;
    }
    else {
      ptr_BONDdata->azimuth_turning_direction = fVar2 - flt_800550C0 * global_timer_delta * in_f0;
    }
    if (ptr_BONDdata->azimuth_turning_direction < fVar1) {
      ptr_BONDdata->azimuth_turning_direction = fVar1;
    }
  }
  else {
    if (in_f12 < 0.00000000) {
      fVar2 = ptr_BONDdata->azimuth_turning_direction;
      if (fVar2 < 0.00000000) {
        ptr_BONDdata->azimuth_turning_direction = fVar2 + flt_800550C4 * global_timer_delta * in_f0;
      }
      else {
        ptr_BONDdata->azimuth_turning_direction = fVar2 + flt_800550C8 * global_timer_delta * in_f0;
      }
      if (fVar1 < ptr_BONDdata->azimuth_turning_direction) {
        ptr_BONDdata->azimuth_turning_direction = fVar1;
      }
    }
    else {
      fVar2 = ptr_BONDdata->azimuth_turning_direction;
      if (fVar1 < fVar2) {
        ptr_BONDdata->azimuth_turning_direction = fVar2 - flt_800550CC * global_timer_delta * in_f0;
        if (ptr_BONDdata->azimuth_turning_direction < fVar1) {
          ptr_BONDdata->azimuth_turning_direction = fVar1;
        }
      }
      else {
        ptr_BONDdata->azimuth_turning_direction = fVar2 + flt_800550D0 * global_timer_delta * in_f0;
        if (fVar1 < ptr_BONDdata->azimuth_turning_direction) {
          ptr_BONDdata->azimuth_turning_direction = fVar1;
        }
      }
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f080520) overlaps instruction at (ram,0x7f08051c)
// 

undefined4 * proc_7F0804E0(undefined4 *param_1)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  float fVar8;
  
  fVar8 = ptr_BONDdata->tint_alpha;
  iVar5 = *(int *)&ptr_BONDdata->field_3D0;
  uVar6 = *(uint *)&ptr_BONDdata->field_3D4;
  uVar7 = *(uint *)&ptr_BONDdata->field_3D8;
  if ((camera_80036430 != 0) || (camera_80036434 != 0)) {
    fVar8 = 1.00000000;
    uVar7 = 0;
    uVar6 = 0;
    iVar5 = 0;
  }
  if (0.00000000 < fVar8) {
    *param_1 = 0xe7000000;
    param_1[1] = 0;
    param_1[3] = 0;
    param_1[2] = 0xba001402;
    param_1[5] = 0xc0;
    param_1[4] = 0xba000602;
    param_1[6] = 0xba001301;
    param_1[7] = 0;
    param_1[8] = 0xb9000002;
    param_1[9] = 0;
    param_1[10] = 0xba001001;
    param_1[0xb] = 0;
    param_1[0xd] = 0x2000;
    param_1[0xc] = 0xba000c02;
    param_1[0xf] = 0xc00;
    param_1[0xe] = 0xba000903;
    param_1[0x10] = 0xba000e02;
    param_1[0x11] = 0;
    param_1[0x12] = 0xb900031d;
    param_1[0x13] = 0x504340;
    param_1[0x15] = 0xfffdf6fb;
    param_1[0x14] = 0xfcffffff;
    param_1[0x16] = 0xfa000000;
    param_1[0x17] =
         iVar5 << 0x18 | (uVar6 & 0xff) << 0x10 | (uVar7 & 0xff) << 8 |
         (int)(fVar8 * 255.00000000) & 0xffU;
    sVar1 = get_video2_settings_width();
    sVar2 = get_video2_settings_ulx();
    sVar3 = get_video2_settings_uly();
    sVar4 = get_video2_settings_height();
    param_1[0x18] =
         ((int)sVar4 + (int)sVar3 & 0x3ffU) << 2 | 0xf6000000 |
         ((int)sVar2 + (int)sVar1 & 0x3ffU) << 0xe;
    sVar1 = get_video2_settings_ulx();
    sVar2 = get_video2_settings_uly();
    param_1[0x19] = ((int)sVar2 & 0x3ffU) << 2 | ((int)sVar1 & 0x3ffU) << 0xe;
    param_1[0x1a] = 0xe7000000;
    param_1[0x1b] = 0;
    param_1[0x1d] = 0x40;
    param_1[0x1c] = 0xba000602;
    param_1[0x1f] = 0x80000;
    param_1[0x1e] = 0xba001301;
    param_1[0x21] = 0x10000;
    param_1[0x20] = 0xba001001;
    param_1 = param_1 + 0x22;
  }
  return param_1;
}



void proc_7F0807B0(undefined4 param_1,undefined4 param_2,undefined4 param_3,float param_4)

{
  *(undefined4 *)&ptr_BONDdata->field_3D0 = param_1;
  *(undefined4 *)&ptr_BONDdata->field_3D4 = param_2;
  *(undefined4 *)&ptr_BONDdata->field_3D8 = param_3;
  ptr_BONDdata->tint_alpha = param_4;
  return;
}



void proc_7F0807E0(undefined4 param_1,undefined8 param_2,int param_3,int param_4,f32 param_5,
                  undefined param_6,undefined param_7,undefined param_8,undefined param_9,
                  undefined param_10,undefined4 param_11)

{
  float in_f12;
  
  ptr_BONDdata->field_3E0 = 0.00000000;
  ptr_BONDdata->timer_for_fade = in_f12;
  ptr_BONDdata->field_3E8 = *(int *)&ptr_BONDdata->field_3D0;
  ptr_BONDdata->field_3EC = param_2._4_4_;
  ptr_BONDdata->field_3F0 = *(int *)&ptr_BONDdata->field_3D4;
  ptr_BONDdata->field_3F4 = param_3;
  ptr_BONDdata->field_3F8 = *(int *)&ptr_BONDdata->field_3D8;
  ptr_BONDdata->field_3FC = param_4;
  *(float *)&ptr_BONDdata->field_400 = ptr_BONDdata->tint_alpha;
  ptr_BONDdata->field_404 = param_5;
  return;
}



void fade_to_over_seconds(f32 seconds,f32 fadeto)

{
  undefined4 in_a0_lo;
  undefined unaff_retaddr;
  undefined in_stack_00000003;
  undefined in_stack_00000007;
  undefined4 in_stack_00000008;
  undefined in_stack_fffffff7;
  undefined in_stack_fffffffb;
  
  proc_7F0807E0(in_a0_lo,(longlong)*(int *)&ptr_BONDdata->field_3D0,
                *(undefined4 *)&ptr_BONDdata->field_3D4,*(undefined4 *)&ptr_BONDdata->field_3D8,
                fadeto,in_stack_fffffff7,in_stack_fffffffb,unaff_retaddr,in_stack_00000003,
                in_stack_00000007,in_stack_00000008);
  return;
}



ulonglong check_if_fade_to_black_complete(void)

{
  return (ulonglong)(ptr_BONDdata->timer_for_fade < 0.00000000);
}



void proc_7F0808BC(void)

{
  float fVar1;
  
  if (0.00000000 <= ptr_BONDdata->timer_for_fade) {
    *(float *)&ptr_BONDdata->field_3E0 = (float)ptr_BONDdata->field_3E0 + global_timer_delta;
    if ((float)ptr_BONDdata->field_3E0 < ptr_BONDdata->timer_for_fade) {
      fVar1 = (float)ptr_BONDdata->field_3E0 / ptr_BONDdata->timer_for_fade;
      ptr_BONDdata->tint_alpha =
           (float)ptr_BONDdata->field_400 +
           ((float)ptr_BONDdata->field_404 - (float)ptr_BONDdata->field_400) * fVar1;
      *(int *)&ptr_BONDdata->field_3D0 =
           ptr_BONDdata->field_3E8 +
           (int)((float)(ptr_BONDdata->field_3EC - ptr_BONDdata->field_3E8) * fVar1);
      *(int *)&ptr_BONDdata->field_3D4 =
           ptr_BONDdata->field_3F0 +
           (int)((float)(ptr_BONDdata->field_3F4 - ptr_BONDdata->field_3F0) * fVar1);
      *(int *)&ptr_BONDdata->field_3D8 =
           ptr_BONDdata->field_3F8 +
           (int)((float)(ptr_BONDdata->field_3FC - ptr_BONDdata->field_3F8) * fVar1);
      return;
    }
    *(f32 *)&ptr_BONDdata->tint_alpha = ptr_BONDdata->field_404;
    *(int *)&ptr_BONDdata->field_3D0 = ptr_BONDdata->field_3EC;
    *(int *)&ptr_BONDdata->field_3D4 = ptr_BONDdata->field_3F4;
    *(int *)&ptr_BONDdata->field_3D8 = ptr_BONDdata->field_3FC;
    ptr_BONDdata->timer_for_fade = -1.00000000;
  }
  return;
}



void set_curplayer_fade(f32 timer,f32 finalamount)

{
  int iVar1;
  float fVar2;
  
  iVar1 = *(int *)(ptr_BONDdata->position_data_pointer + 4);
  if (iVar1 != 0) {
    ptr_BONDdata->viewport_alpha = 0.00000000;
    ptr_BONDdata->rate_of_change = timer;
    fVar2 = (float)(uint)*(byte *)(iVar1 + 0xc);
    if (false) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    *(float *)&ptr_BONDdata->time_for_change = fVar2 / 255.00000000;
    ptr_BONDdata->final_alpha_level = finalamount;
  }
  return;
}



void proc_7F080A80(void)

{
  int iVar1;
  float fVar2;
  
  if (0.00000000 <= (float)ptr_BONDdata->rate_of_change) {
    iVar1 = *(int *)(ptr_BONDdata->position_data_pointer + 4);
    *(float *)&ptr_BONDdata->viewport_alpha =
         (float)ptr_BONDdata->viewport_alpha + global_timer_delta;
    if ((float)ptr_BONDdata->viewport_alpha < (float)ptr_BONDdata->rate_of_change) {
      fVar2 = (float)ptr_BONDdata->time_for_change +
              (((float)ptr_BONDdata->final_alpha_level - (float)ptr_BONDdata->time_for_change) *
              (float)ptr_BONDdata->viewport_alpha) / (float)ptr_BONDdata->rate_of_change;
    }
    else {
      fVar2 = (float)ptr_BONDdata->final_alpha_level;
      ptr_BONDdata->rate_of_change = -1.00000000;
    }
    if (iVar1 != 0) {
      *(undefined *)(iVar1 + 0xc) = (char)(int)(fVar2 * 255.00000000);
    }
  }
  return;
}



void proc_7F080B34(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5)

{
  u32 uVar1;
  u32 uVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  float fStackX8;
  float afStack132 [16];
  float afStack68 [4];
  int iStack52;
  int iStack48;
  int iStack44;
  int iStack36;
  int iStack32;
  int iStack28;
  float fStack4;
  
  fStack4 = 0.00000000;
  if (ptr_BONDdata->player_button_control == 0) {
    proc_7F08E8BC(param_1);
    fStackX8 = param_5;
    if (param_1 != 0.00000000) {
      fStack4 = param_2 / param_1;
      fStackX8 = param_5;
    }
  }
  else {
    if (ptr_BONDdata->field_420 != 0) {
      uVar1 = get_random_value();
      uVar2 = get_random_value();
      if (total_player_death_anim == 0) {
        trap(0x1c00);
      }
      proc_7F08EA48(player_death_ani_list[uVar1 % total_player_death_anim] + ptr_animation_table,
                    (byte)uVar2 & 1,extraout_f12,extraout_f14);
      ptr_BONDdata->field_420 = 0;
    }
    proc_7F08EAB8(0.50000000);
    fStackX8 = 0.00000000;
  }
  proc_7F08E240(fStack4,fStackX8);
  proc_7F058570((360.00000000 - (float)ptr_BONDdata->inclination_angle2) *
                firstperson_weapon_movement_restrictor,extraout_a0,afStack68);
  proc_7F059908(afStack132,extraout_f12_00,extraout_f14_00,0.00000000,0.00000000,0.00000000,
                -(float)ptr_BONDdata->field_508,-(float)ptr_BONDdata->field_50C,
                -(float)ptr_BONDdata->field_510,(float)ptr_BONDdata->field_514);
  proc_7F058068(afStack132,afStack68);
  proc_7F0585FC((360.00000000 - ptr_BONDdata->azimuth_angle) * flt_800550D8,extraout_a0_00,
                afStack132);
  proc_7F058068(afStack132,afStack68);
  ptr_BONDdata->field_4C0 = iStack36;
  ptr_BONDdata->field_4C4 = iStack32;
  ptr_BONDdata->field_4C8 = iStack28;
  ptr_BONDdata->field_4CC = iStack52;
  ptr_BONDdata->field_4D0 = iStack48;
  ptr_BONDdata->field_4D4 = iStack44;
  return;
}



float proc_7F080D60(undefined8 param_1,undefined4 param_2,undefined4 param_3)

{
  float fVar1;
  
  if (ptr_playerstank == 0) {
    if (ptr_BONDdata->field_2A6C == 0) {
      fVar1 = (float)proc_7F0B2970();
    }
    else {
      fVar1 = (float)proc_7F0B2970();
    }
  }
  else {
    fVar1 = (float)proc_7F0B2970();
    fVar1 = fVar1 + dword_80036454;
  }
  return fVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F080DF8(void)

{
  bool bVar1;
  longlong in_v0;
  BOOL BVar2;
  int iVar3;
  longlong in_a0;
  float in_a1_lo;
  float fVar4;
  float fVar5;
  float fVar6;
  float extraout_f12;
  float extraout_f14;
  float fVar7;
  float local_30;
  undefined4 uStack28;
  float fStack24;
  undefined4 local_14;
  int local_10;
  float local_c;
  int local_4;
  
  if (in_tank_flag == TRUE) {
    fVar4 = proc_7F080D60((longlong)ptr_BONDdata->ptr_tile_printmanpos,ptr_BONDdata->positionx,
                          ptr_BONDdata->positionz);
    fVar5 = flt_800550DC;
    *(float *)&ptr_BONDdata->clipping_height = fVar4;
    iVar3 = 0;
    *(float *)&ptr_BONDdata->field_6C = (float)ptr_BONDdata->field_70 / fVar5;
    fVar4 = flt_800550E0;
    if (0 < clock_timer) {
      do {
        iVar3 += 1;
        *(float *)&ptr_BONDdata->field_6C =
             (float)ptr_BONDdata->field_6C * fVar4 + (float)ptr_BONDdata->clipping_height;
      } while (iVar3 < clock_timer);
    }
    local_4 = 0;
    *(float *)&ptr_BONDdata->field_70 = (float)ptr_BONDdata->field_6C * fVar5;
    goto LAB_7f08139c;
  }
  if (in_a0 == 0) {
    local_10 = ptr_BONDdata->ptr_tile_printmanpos;
    proc_7F08A274(ptr_BONDdata->position_data_pointer,&local_14,&fStack24,&uStack28);
    local_c = proc_7F080D60((longlong)ptr_BONDdata->ptr_tile_printmanpos,ptr_BONDdata->positionx,
                            ptr_BONDdata->positionz);
    proc_7F089780(ptr_BONDdata);
    proc_7F0B26B8(&local_10,extraout_f12,extraout_f14,(float)ptr_BONDdata->positionx,
                  (float)ptr_BONDdata->positionz);
    fVar5 = local_c;
    if ((-1 < in_v0) && (fVar5 = (float)ptr_BONDdata->clipping_height, fVar5 <= local_c)) {
      fVar5 = local_c;
    }
    *(float *)&ptr_BONDdata->clipping_height = fVar5;
LAB_7f080fdc:
    iVar3 = ptr_BONDdata->field_2A6C;
  }
  else {
    *(float *)&ptr_BONDdata->clipping_height = (float)ptr_BONDdata->clipping_height + in_a1_lo;
    fVar5 = proc_7F080D60((longlong)ptr_BONDdata->ptr_tile_printmanpos,ptr_BONDdata->positionx,
                          ptr_BONDdata->positionz);
    if ((float)ptr_BONDdata->clipping_height < fVar5) {
      *(float *)&ptr_BONDdata->clipping_height = fVar5;
      goto LAB_7f080fdc;
    }
    iVar3 = ptr_BONDdata->field_2A6C;
  }
  if (iVar3 == 0) {
    fVar5 = (float)ptr_BONDdata->field_7C;
  }
  else {
    if ((float)ptr_BONDdata->field_70 < (float)ptr_BONDdata->clipping_height) {
      ptr_BONDdata->field_2A6C = 0;
      ptr_BONDdata->ptr_tile_printmanpos = ptr_BONDdata->field_2A70;
      ptr_BONDdata->field_2A70 = 0;
      fVar5 = (float)ptr_BONDdata->field_7C;
    }
    else {
      fVar5 = (float)ptr_BONDdata->field_7C;
    }
  }
  fVar4 = flt_800550E4;
  fVar7 = (float)ptr_BONDdata->field_70;
  if ((0.00000000 <= fVar5) || (fVar5 = (float)ptr_BONDdata->clipping_height, fVar7 < fVar5)) {
    iVar3 = 0;
    *(float *)&ptr_BONDdata->field_6C = fVar7 / flt_800550E4;
    fVar5 = flt_800550E8;
    if (0 < clock_timer) {
      do {
        iVar3 += 1;
        *(float *)&ptr_BONDdata->field_6C =
             (float)ptr_BONDdata->field_6C * fVar5 + (float)ptr_BONDdata->clipping_height;
      } while (iVar3 < clock_timer);
    }
    fVar7 = (float)ptr_BONDdata->field_70;
    if (fVar7 < (float)ptr_BONDdata->clipping_height) {
      *(float *)&ptr_BONDdata->field_70 = (float)ptr_BONDdata->field_6C * fVar4;
      fVar7 = (float)ptr_BONDdata->field_70;
      fVar5 = (float)ptr_BONDdata->clipping_height;
      goto LAB_7f0810d8;
    }
    bVar1 = (float)ptr_BONDdata->clipping_height < fVar7;
  }
  else {
LAB_7f0810d8:
    bVar1 = fVar5 < fVar7;
  }
  local_4 = 0;
  fVar5 = (float)ptr_BONDdata->field_7C;
  if (bVar1) {
    local_4 = 0;
    BVar2 = get_debug_fast_bond_flag();
    if (((BVar2 == FALSE) || (DAT_80079990 != 0.00000000)) || (DAT_80079998 != 0.00000000)) {
      local_30 = player_gravity_modifier;
    }
    else {
      local_30 = flt_800550EC;
    }
    fVar4 = (float)ptr_BONDdata->clipping_height;
    fVar6 = fVar5 - global_timer_delta * local_30;
    fVar7 = fVar7 + global_timer_delta * (fVar5 + fVar6) * 0.50000000;
    if (fVar7 < fVar4) {
      fVar5 = (float)ptr_BONDdata->field_70 - fVar4;
      fVar6 = sqrtf((float)ptr_BONDdata->field_7C * (float)ptr_BONDdata->field_7C +
                    (((fVar5 + fVar5) * player_view_gravity_modifier) / 60.00000000) * 60.00000000);
      fVar6 = -fVar6;
      fVar7 = fVar4;
      if (ptr_BONDdata->field_2A6C != 0) {
        ptr_BONDdata->field_2A6C = 0;
        ptr_BONDdata->ptr_tile_printmanpos = ptr_BONDdata->field_2A70;
        ptr_BONDdata->field_2A70 = 0;
        fVar7 = fVar4;
      }
    }
    *(float *)&ptr_BONDdata->field_70 = fVar7;
    *(float *)&ptr_BONDdata->field_7C = fVar6;
    fVar5 = (float)ptr_BONDdata->field_7C;
  }
  if (fVar5 < 0.00000000) {
    if ((float)ptr_BONDdata->field_70 <= (float)ptr_BONDdata->clipping_height) {
      if (fVar5 < flt_800550F8) {
        ptr_BONDdata->field_8C = 0xf;
        ptr_BONDdata->field_90 = -90.00000000;
LAB_7f08130c:
        ptr_BONDdata->field_7C = 0.00000000;
      }
      else {
        if (fVar5 < -5.00000000) {
          ptr_BONDdata->field_8C = 0xf;
          *(float *)&ptr_BONDdata->field_90 =
               ((-5.00000000 - (float)ptr_BONDdata->field_7C) * -90.00000000) / flt_800550FC;
          goto LAB_7f08130c;
        }
        ptr_BONDdata->field_7C = 0.00000000;
      }
      iVar3 = ptr_BONDdata->field_2A6C;
    }
    else {
      iVar3 = ptr_BONDdata->field_2A6C;
    }
  }
  else {
    iVar3 = ptr_BONDdata->field_2A6C;
  }
  if (iVar3 != 0) {
    fVar5 = proc_7F089780(ptr_BONDdata);
    fVar4 = (float)proc_7F0B2970();
    if ((float)ptr_BONDdata->field_70 + fVar5 < fVar4) {
      ptr_BONDdata->field_2A6C = 0;
      ptr_BONDdata->ptr_tile_printmanpos = ptr_BONDdata->field_2A70;
      ptr_BONDdata->field_2A70 = 0;
    }
  }
LAB_7f08139c:
  fVar5 = flt_80055100;
  if (0 < clock_timer) {
    do {
      if (ptr_BONDdata->field_8C < 1) {
        fVar4 = (float)ptr_BONDdata->field_90;
        if (fVar4 < 0.00000000) {
          *(float *)&ptr_BONDdata->field_90 = fVar4 - -4.50000000;
          fVar4 = (float)ptr_BONDdata->field_90;
          if (0.00000000 <= fVar4) {
            ptr_BONDdata->field_90 = 0.00000000;
            fVar4 = (float)ptr_BONDdata->field_90;
            fVar7 = (float)ptr_BONDdata->field_84;
          }
          else {
            fVar7 = (float)ptr_BONDdata->field_84;
          }
        }
        else {
          fVar7 = (float)ptr_BONDdata->field_84;
        }
        *(float *)&ptr_BONDdata->field_84 = fVar7 * fVar5 + fVar4;
      }
      else {
        *(float *)&ptr_BONDdata->field_84 =
             (float)ptr_BONDdata->field_84 * fVar5 + (float)ptr_BONDdata->field_90;
        ptr_BONDdata->field_8C = ptr_BONDdata->field_8C + -1;
      }
      local_4 += 1;
    } while (local_4 < clock_timer);
  }
  *(float *)&ptr_BONDdata->field_88 = (float)ptr_BONDdata->field_84 * flt_80055104;
  return;
}



void proc_7F081478(void)

{
  undefined4 uVar1;
  int iVar2;
  float fVar3;
  float fVar4;
  float in_f12;
  float in_f14;
  float fVar5;
  int local_c [3];
  
  fVar4 = 30.00000000;
  *(float *)&ptr_BONDdata->field_29BC =
       (float)ptr_BONDdata->field_500 * cur_player_stat_ptr->player_perspective_height + 7.00000000;
  fVar3 = (float)ptr_BONDdata->field_29BC +
          ((float)ptr_BONDdata->field_88 + (float)ptr_BONDdata->ducking_height_offset) *
          cur_player_stat_ptr->player_perspective_height;
  if (fVar3 < 30.00000000) {
    fVar5 = (float)ptr_BONDdata->field_70;
  }
  else {
    fVar5 = (float)ptr_BONDdata->field_70;
    fVar4 = fVar3;
  }
  *(float *)&ptr_BONDdata->positiony = fVar5 + fVar4;
  if ((((cameramode == UNK5_CAM) || (cameramode == UNK6_CAM)) || (cameramode == POSEND_CAM)) &&
     (ptr_BONDdata->ptr_char_objectinstance != 0)) {
    iVar2 = ptr_BONDdata->player_button_control;
  }
  else {
    *(f32 *)&ptr_BONDdata->field_4B4 = ptr_BONDdata->positionx;
    ptr_BONDdata->field_4B8 = ptr_BONDdata->positiony;
    ptr_BONDdata->field_4BC = ptr_BONDdata->positionz;
    iVar2 = ptr_BONDdata->player_button_control;
  }
  if (((iVar2 != 0) && (0.00000000 < (float)ptr_BONDdata->field_29C0)) &&
     (*(float *)&ptr_BONDdata->field_29C0 = (float)ptr_BONDdata->field_29C0 - 0.25000000,
     (float)ptr_BONDdata->field_29C0 < 0.00000000)) {
    ptr_BONDdata->field_29C0 = 0.00000000;
  }
  if (ptr_BONDdata->inclination_angle1 < 0.00000000) {
    *(float *)&ptr_BONDdata->field_4B8 =
         (float)ptr_BONDdata->field_4B8 +
         -(1.00000000 - (float)ptr_BONDdata->inclination_cosine) * (float)ptr_BONDdata->field_29C0;
    local_c[0] = ptr_BONDdata->ptr_tile_printmanpos;
  }
  else {
    local_c[0] = ptr_BONDdata->ptr_tile_printmanpos;
  }
  uVar1 = do_stanlinelog;
  do_stanlinelog = 0;
  proc_7F0B0BE4(local_c,in_f12,in_f14,(float)ptr_BONDdata->positionx,(float)ptr_BONDdata->positionz)
  ;
  do_stanlinelog = uVar1;
  ptr_BONDdata->room_tile_ptr = local_c[0];
  ptr_BONDdata->field_4A4 = ptr_BONDdata->field_4B4;
  ptr_BONDdata->field_4AC = ptr_BONDdata->field_4BC;
  fVar4 = proc_7F080D60((longlong)ptr_BONDdata->room_tile_ptr,ptr_BONDdata->field_4B4,
                        ptr_BONDdata->field_4BC);
  *(float *)&ptr_BONDdata->field_4A8 = fVar4;
  iVar2 = 0;
  *(int *)(ptr_BONDdata->position_data_pointer + 0x14) = ptr_BONDdata->ptr_tile_printmanpos;
  *(f32 *)(ptr_BONDdata->position_data_pointer + 8) = ptr_BONDdata->positionx;
  *(int *)(ptr_BONDdata->position_data_pointer + 0xc) = ptr_BONDdata->positiony;
  *(int *)(ptr_BONDdata->position_data_pointer + 0x10) = ptr_BONDdata->positionz;
  fVar4 = flt_80055108;
  if (0 < clock_timer) {
    do {
      iVar2 += 1;
      *(float *)&ptr_BONDdata->field_3B8 =
           (float)ptr_BONDdata->field_4B4 + fVar4 * (float)ptr_BONDdata->field_3B8;
      *(float *)&ptr_BONDdata->field_3BC =
           (float)ptr_BONDdata->field_4B8 + fVar4 * (float)ptr_BONDdata->field_3BC;
      *(float *)&ptr_BONDdata->field_3C0 =
           (float)ptr_BONDdata->field_4BC + fVar4 * (float)ptr_BONDdata->field_3C0;
    } while (iVar2 < clock_timer);
  }
  fVar4 = flt_8005510C;
  *(float *)&ptr_BONDdata->field_3C4 = (float)ptr_BONDdata->field_3B8 * flt_8005510C;
  *(float *)&ptr_BONDdata->field_3C8 = (float)ptr_BONDdata->field_3BC * fVar4;
  *(float *)&ptr_BONDdata->field_3CC = (float)ptr_BONDdata->field_3C0 * fVar4;
  return;
}



void proc_7F081790(void)

{
  float fVar1;
  
  fVar1 = ptr_BONDdata->inclination_angle1;
  while (fVar1 < -180.00000000) {
    ptr_BONDdata->inclination_angle1 = fVar1 + 360.00000000;
    fVar1 = ptr_BONDdata->inclination_angle1;
  }
  while (180.00000000 <= fVar1) {
    ptr_BONDdata->inclination_angle1 = fVar1 - 360.00000000;
    fVar1 = ptr_BONDdata->inclination_angle1;
  }
  if (90.00000000 < fVar1) {
    ptr_BONDdata->inclination_angle1 = 90.00000000;
  }
  else {
    if (fVar1 < -90.00000000) {
      ptr_BONDdata->inclination_angle1 = -90.00000000;
    }
  }
  fVar1 = cosf(ptr_BONDdata->azimuth_angle * flt_80055110);
  *(float *)&ptr_BONDdata->azimuth_cosine = fVar1;
  fVar1 = sinf(ptr_BONDdata->azimuth_angle * flt_80055114);
  *(float *)&ptr_BONDdata->azimuth_sine = fVar1;
  *(float *)&ptr_BONDdata->inclination_angle2 = ptr_BONDdata->inclination_angle1;
  fVar1 = (float)ptr_BONDdata->inclination_angle2;
  if (fVar1 < 0.00000000) {
    *(float *)&ptr_BONDdata->inclination_angle2 = fVar1 + 360.00000000;
    fVar1 = (float)ptr_BONDdata->inclination_angle2;
  }
  fVar1 = cosf(fVar1 * flt_80055118);
  *(float *)&ptr_BONDdata->inclination_cosine = fVar1;
  fVar1 = sinf((float)ptr_BONDdata->inclination_angle2 * flt_8005511C);
  *(float *)&ptr_BONDdata->inclination_sine = fVar1;
  *(float *)&ptr_BONDdata->field_498 = -(float)ptr_BONDdata->azimuth_sine;
  ptr_BONDdata->field_49C = 0;
  *(f32 *)&ptr_BONDdata->field_4A0 = ptr_BONDdata->azimuth_cosine;
  return;
}



// WARNING: Instruction at (ram,0x7f0837d8) overlaps instruction at (ram,0x7f0837d4)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

void controller_gameplay_interaction(void)

{
  bool bVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  ushort uVar8;
  ushort uVar9;
  uint uVar10;
  int iVar13;
  u32 uVar14;
  undefined4 uVar15;
  ITEM_IDS item;
  int iVar16;
  ulonglong uVar11;
  longlong lVar12;
  ushort uVar17;
  char in_a0_lo;
  undefined4 extraout_a0_lo;
  undefined4 extraout_a0_lo_00;
  undefined4 extraout_a0_lo_01;
  undefined4 extraout_a0_lo_02;
  undefined4 extraout_a0_lo_03;
  undefined4 extraout_a0_lo_04;
  char in_a1_lo;
  undefined4 extraout_a1_lo;
  undefined4 extraout_a1_lo_00;
  undefined4 extraout_a1_lo_01;
  undefined4 extraout_a1_lo_02;
  undefined4 extraout_a1_lo_03;
  undefined4 uVar18;
  undefined4 extraout_a1_lo_04;
  ushort in_a2_lo;
  ushort in_a3_lo;
  ushort uVar19;
  uint uVar20;
  f32 fVar21;
  float fVar22;
  float vector1;
  float fVar23;
  uint uStack380;
  undefined4 uStack288;
  undefined4 uStack284;
  float fStack280;
  float fStack276;
  float fStack272;
  float fStack268;
  float fStack260;
  int iStack256;
  float fStack252;
  f32 fStack220;
  int iStack212;
  int iStack204;
  ushort uStack198;
  ushort uStack196;
  ushort uStack194;
  uint uStack192;
  uint uStack188;
  uint uStack184;
  uint uStack180;
  int iStack176;
  int iStack172;
  ushort uStack166;
  ushort uStack164;
  char cStack162;
  char cStack161;
  int iStack160;
  int iStack156;
  int iStack152;
  int iStack148;
  int iStack144;
  int iStack140;
  int iStack128;
  uint uStack124;
  uint uStack120;
  int iStack116;
  uint uStack112;
  uint uStack108;
  uint uStack104;
  uint uStack100;
  float fStack96;
  float fStack92;
  int iStack88;
  int iStack84;
  uint uStack80;
  uint uStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  uint uStack48;
  uint uStack44;
  uint uStack40;
  uint uStack36;
  uint uStack32;
  uint uStack28;
  uint uStack24;
  uint uStack20;
  uint uStack16;
  uint uStack12;
  int iStack8;
  uint uStack4;
  
  uStack4 = 0;
  iStack8 = 0;
  uStack12 = 0;
  uStack16 = 0;
  uStack20 = 0;
  uStack24 = 0;
  uStack28 = 0;
  uStack32 = 0;
  uStack36 = 0;
  uStack40 = 0;
  uStack44 = 0;
  uStack48 = 0;
  uStack76 = 0;
  uStack80 = 0;
  iStack84 = 0;
  iStack88 = 0;
  uStack100 = 0;
  uStack104 = 0;
  uStack108 = 0;
  uStack112 = 0;
  iStack116 = 0;
  uStack120 = 0;
  fStack52 = 0.00000000;
  fStack56 = 0.00000000;
  fStack60 = 0.00000000;
  fStack64 = 0.00000000;
  fStack68 = 0.00000000;
  fStack72 = 0.00000000;
  fStack92 = 0.00000000;
  fStack96 = 0.00000000;
  iVar13 = get_cur_player_look_vertical_inverted();
  uStack124 = (uint)(iVar13 == 0);
  iStack128 = 0;
  if (in_a0_lo < -5) {
    iStack156 = (int)in_a0_lo + 5;
  }
  else {
    iStack156 = 0;
    if ('\x05' < in_a0_lo) {
      iStack156 = (int)in_a0_lo + -5;
    }
  }
  if (in_a1_lo < -5) {
    iStack160 = (int)in_a1_lo + 5;
  }
  else {
    iStack160 = 0;
    if ('\x05' < in_a1_lo) {
      iStack160 = (int)in_a1_lo + -5;
    }
  }
  iStack140 = (int)in_a0_lo;
  iStack144 = (int)in_a1_lo;
  iStack152 = iStack160;
  iStack148 = iStack156;
  if (((ptr_BONDdata->player_button_control == 0) &&
      (iStack152 = iStack160, iStack148 = iStack156, camera_80036424 < 1)) &&
     ((((ptr_BONDdata->pause_animation_state != 5 && ((in_a2_lo & ~in_a3_lo & 0x1000) != 0)) ||
       ((iStack152 = iStack160, iStack148 = iStack156, ptr_BONDdata->pause_animation_state == 5 &&
        (iStack152 = iStack160, iStack148 = iStack156, ptr_BONDdata->open_close_solo_watch_menu != 0
        )))) && (iStack152 = iStack160, iStack148 = iStack156, uVar11 = get_num_players(),
                uVar11 == 1)))) {
    trigger_solo_watch_menu(0);
  }
  if (((ptr_BONDdata->pause_animation_state == 0) && (ptr_BONDdata->player_button_control == 0)) &&
     ((uVar11 = get_num_players(), uVar11 == 1 || ((stop_play_flag == 0 && (is_gameover_flag == 0)))
      ))) {
    iVar13 = cur_player_get_control_type();
    if ((iVar13 == 6) ||
       (((iVar13 = cur_player_get_control_type(), iVar13 == 7 ||
         (iVar13 = cur_player_get_control_type(), iVar13 == 5)) ||
        (iVar13 = cur_player_get_control_type(), iVar13 == 4)))) {
      uVar19 = in_a2_lo & ~in_a3_lo;
      uVar14 = get_cur_playernum();
      uVar11 = get_num_players();
      cStack161 = get_cur_controller_horz_stick_pos
                            ((char)(((int)uVar11 + uVar14) * 0x1000000 >> 0x18));
      uVar14 = get_cur_playernum();
      uVar11 = get_num_players();
      cStack162 = get_cur_controller_vert_stick_pos
                            ((char)(((int)uVar11 + uVar14) * 0x1000000 >> 0x18));
      uVar14 = get_cur_playernum();
      uVar11 = get_num_players();
      uVar11 = get_controller_buttons_held
                         ((char)(((int)uVar11 + uVar14) * 0x1000000 >> 0x18),
                          R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                          R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
      uStack164 = (ushort)uVar11;
      uStack166 = ptr_BONDdata->field_3B6;
      if (cStack161 < -5) {
        iStack172 = (int)cStack161 + 5;
      }
      else {
        iStack172 = 0;
        if ('\x05' < cStack161) {
          iStack172 = (int)cStack161 + -5;
        }
      }
      iStack176 = (int)cStack162 + 5;
      if ((-6 < cStack162) && (iStack176 = (int)cStack162 + -5, cStack162 < '\x06')) {
        iStack176 = 0;
      }
      iVar13 = cur_player_get_control_type();
      if ((iVar13 == 4) || (iVar13 = cur_player_get_control_type(), iVar13 == 6)) {
        iStack156 = iStack172;
        iStack152 = iStack176;
      }
      else {
        if (in_tank_flag == TRUE) {
          if (ptr_BONDdata->is_aiming_flag == 0) {
            iStack148 = iStack172;
          }
          else {
            iStack156 = iStack172;
          }
        }
        else {
          iStack156 = iStack172;
        }
        iStack160 = iStack176;
      }
      iVar13 = cur_player_get_control_type();
      if ((iVar13 == 4) || (iVar13 = cur_player_get_control_type(), iVar13 == 5)) {
        uVar5 = uStack164 & 0x2000;
        uVar17 = uStack164 & ~uStack166;
        uVar6 = in_a2_lo & 0x2000;
        uVar7 = uVar17;
        uVar8 = uVar19;
      }
      else {
        uVar5 = in_a2_lo & 0x2000;
        uVar17 = uStack164 & ~uStack166;
        uVar6 = uStack164 & 0x2000;
        uVar7 = uVar19;
        uVar8 = uVar17;
      }
      uVar9 = uStack164;
      uStack180 = (uint)(uVar6 != 0);
      uStack184 = (uint)((uVar8 & 0x2000) != 0);
      uStack188 = (uint)(uVar5 != 0);
      uStack192 = (uint)((uVar7 & 0x2000) != 0);
      iVar13 = get_controls_locked_flag();
      if ((iVar13 == 0) && (lVar12 = proc_7F0C24BC(), lVar12 != 0)) {
        iVar13 = cur_player_get_aim_control();
        if (iVar13 == 0) {
          ptr_BONDdata->is_aiming_flag = uStack188;
        }
        else {
          if (uStack192 != 0) {
            ptr_BONDdata->is_aiming_flag = (uint)(ptr_BONDdata->is_aiming_flag == 0);
          }
        }
        iStack88 = ptr_BONDdata->is_aiming_flag;
        bVar4 = (uVar19 & 0x4000) != 0;
        uStack120 = (uint)(iStack88 == 0);
        bVar1 = bVar4;
        if (!bVar4) {
          bVar1 = (uVar17 & 0x4000) != 0;
        }
        uStack16 = (uint)bVar1;
        uStack32 = (uint)(iStack88 == 0);
        uStack24 = 1;
        if (((iStack88 != 0) && ('<' < in_a1_lo)) &&
           (fStack60 = (float)((int)in_a1_lo + -0x3c) / 10.00000000, 1.00000000 < fStack60)) {
          fStack60 = 1.00000000;
        }
        if (((iStack88 != 0) && (in_a1_lo < -0x3c)) &&
           (fStack64 = (float)(-0x3c - (int)in_a1_lo) / 10.00000000, 1.00000000 < fStack64)) {
          fStack64 = 1.00000000;
        }
        if (((iStack88 != 0) && (in_a0_lo < -0x3c)) &&
           (fStack68 = (float)(-0x3c - (int)in_a0_lo) / 10.00000000, 1.00000000 < fStack68)) {
          fStack68 = 1.00000000;
        }
        if (((iStack88 != 0) && ('<' < in_a0_lo)) &&
           (fStack72 = (float)((int)in_a0_lo + -0x3c) / 10.00000000, 1.00000000 < fStack72)) {
          fStack72 = 1.00000000;
        }
        bVar1 = (in_a2_lo & 0x8000) != 0;
        if ((bVar1) || (bVar2 = (uVar9 & 0x8000) != 0, bVar2)) {
          bVar2 = uStack184 != 0;
        }
        uStack76 = (uint)bVar2;
        bVar2 = (uVar19 & 0x8000) != 0;
        if ((bVar2) || (bVar3 = (uVar17 & 0x8000) != 0, bVar3)) {
          bVar3 = uStack180 == 0;
        }
        uStack80 = (uint)bVar3;
        iStack84 = iStack88;
        uStack28 = uStack32;
        uStack20 = uStack32;
        iStack8 = iStack88;
        uStack4 = uStack120;
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        if ((uVar11 != 0) && (ptr_BONDdata->is_aiming_flag != 0)) {
          if (iStack176 < 0) {
            fStack92 = (float)-iStack176 / 70.00000000;
            if (1.00000000 < fStack92) {
              fStack92 = 2.00000000;
            }
            else {
              fStack92 = fStack92 + fStack92;
            }
          }
          if (0 < iStack176) {
            fStack96 = (float)iStack176 / 70.00000000;
            if (1.00000000 < fStack96) {
              fStack96 = 2.00000000;
            }
            else {
              fStack96 = fStack96 + fStack96;
            }
          }
        }
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        uStack100 = (uint)(uVar11 == 0);
        if ((uVar11 == 0) &&
           (bVar3 = ptr_BONDdata->is_aiming_flag != 0, uStack100 = (uint)bVar3, bVar3)) {
          uStack100 = (uint)(cStack162 < -0x1e);
        }
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        uStack104 = (uint)(uVar11 == 0);
        if ((uVar11 == 0) &&
           (bVar3 = ptr_BONDdata->is_aiming_flag != 0, uStack104 = (uint)bVar3, bVar3)) {
          uStack104 = (uint)(cStack162 < '\x1f') ^ 1;
        }
        if ((((((bVar1) && (bVar4)) || (((in_a2_lo & 0x4000) != 0 && (bVar2)))) ||
             (((uVar9 & 0x8000) != 0 && ((uVar17 & 0x4000) != 0)))) ||
            (((uVar9 & 0x4000) != 0 && ((uVar17 & 0x8000) != 0)))) &&
           (item = get_item_in_hand(0), item == ITEM_REMOTEMINE)) {
          iStack116 = 1;
          uStack76 = 0;
          uStack80 = 0;
          uStack16 = 0;
        }
        if ((in_tank_flag == TRUE) && (ptr_BONDdata->is_aiming_flag != 0)) {
          item = get_item_in_hand(0);
          if (item == ITEM_TANKSHELLS) {
            iStack140 = 0;
            if (iStack156 == 0) {
              iStack156 = iStack148;
            }
          }
          else {
            if (iStack156 == 0) {
              if (0.00000000 < fStack68) {
                fStack52 = fStack68;
              }
              if (0.00000000 < fStack72) {
                fStack56 = fStack72;
              }
            }
          }
          fStack68 = 0.00000000;
          fStack72 = 0.00000000;
        }
      }
      uStack12 = (uint)(uStack180 != 0);
      if (uStack180 != 0) {
        bVar4 = ptr_BONDdata->pause_animation_state == 0;
        if (bVar4) {
          bVar4 = (in_a2_lo & 0x8000) == 0;
          uStack12 = (uint)bVar4;
          if (!bVar4) goto LAB_7f0822a8;
          bVar4 = (uVar9 & 0x8000) == 0;
        }
        uStack12 = (uint)bVar4;
      }
LAB_7f0822a8:
      iStack128 = 1;
      ptr_BONDdata->field_3B6 = uStack164;
    }
    else {
      iVar13 = cur_player_get_control_type();
      if ((iVar13 == 2) || (iVar13 = cur_player_get_control_type(), iVar13 == 3)) {
        uStack194 = 0x8000;
        uStack196 = 0x2000;
        uStack198 = 0x30;
      }
      else {
        uStack194 = 0x2000;
        uStack196 = 0x30;
        uStack198 = 0x8000;
      }
      iVar13 = get_controls_locked_flag();
      if ((iVar13 == 0) && (lVar12 = proc_7F0C24BC(), lVar12 != 0)) {
        uVar19 = in_a2_lo & ~in_a3_lo;
        iVar13 = cur_player_get_aim_control();
        if (iVar13 == 0) {
          ptr_BONDdata->is_aiming_flag = (uint)((in_a2_lo & uStack196) != 0);
        }
        else {
          if ((uVar19 & uStack196) != 0) {
            ptr_BONDdata->is_aiming_flag = (uint)(ptr_BONDdata->is_aiming_flag == 0);
          }
        }
        iStack8 = ptr_BONDdata->is_aiming_flag;
        bVar4 = (uVar19 & 0x4000) != 0;
        uStack120 = (uint)(iStack8 == 0);
        uStack16 = (uint)bVar4;
        uStack4 = uStack120;
        iVar13 = cur_player_get_control_type();
        if ((iVar13 == 1) || (iVar13 = cur_player_get_control_type(), iVar13 == 3)) {
          bVar1 = (in_a2_lo & 0x202) != 0;
          uVar20 = (uint)bVar1;
          if (bVar1) {
            if (ptr_BONDdata->is_aiming_flag == 0) {
              if (in_tank_flag == TRUE) {
                fStack68 = 1.00000000;
              }
              else {
                uStack44 = 1;
              }
            }
            else {
              fStack52 = 1.00000000;
            }
          }
          bVar2 = (in_a2_lo & 0x101) != 0;
          uStack380 = (uint)bVar2;
          iStack88 = ptr_BONDdata->is_aiming_flag;
          if (bVar2) {
            if (iStack88 == 0) {
              if (in_tank_flag == TRUE) {
                fStack72 = 1.00000000;
              }
              else {
                uStack48 = 1;
              }
            }
            else {
              fStack56 = 1.00000000;
            }
          }
          bVar2 = iStack88 == 0;
          bVar3 = bVar2;
          if (bVar2) {
            bVar3 = (in_a2_lo & 0x808) != 0;
          }
          uStack36 = (uint)bVar3;
          bVar3 = bVar2;
          if (bVar2) {
            bVar3 = (in_a2_lo & 0x404) != 0;
          }
          uStack40 = (uint)bVar3;
          uStack32 = (uint)bVar2;
          uVar10 = uStack32;
          if (in_tank_flag != TRUE) {
            uStack28 = (uint)bVar2;
            uVar20 = (uint)bVar1;
            uVar10 = uStack24;
          }
        }
        else {
          bVar1 = (in_a2_lo & 0x202) != 0;
          uVar20 = (uint)bVar1;
          if (bVar1) {
            fStack52 = 1.00000000;
          }
          bVar2 = (in_a2_lo & 0x101) != 0;
          if (bVar2) {
            fStack56 = 1.00000000;
          }
          iStack88 = ptr_BONDdata->is_aiming_flag;
          bVar3 = iStack88 == 0;
          uStack44 = (uint)(bVar3 && bVar1);
          uStack380 = (uint)bVar2;
          uStack48 = (uint)(bVar3 && bVar2);
          uStack20 = (uint)bVar3;
          if ((iStack88 == 0) && ((in_a2_lo & 0x808) != 0)) {
            fStack60 = 1.00000000;
          }
          if ((iStack88 == 0) && ((in_a2_lo & 0x404) != 0)) {
            fStack64 = 1.00000000;
          }
          uStack28 = (uint)bVar3;
          uVar10 = uStack24;
        }
        uStack24 = uVar10;
        if ((iStack88 == 0) || (in_a1_lo < '=')) {
          if ((iStack88 != 0) &&
             ((in_a1_lo < -0x3c &&
              (fStack64 = (float)(-0x3c - (int)in_a1_lo) / 10.00000000, 1.00000000 < fStack64)))) {
            fStack64 = 1.00000000;
          }
        }
        else {
          fStack60 = (float)((int)in_a1_lo + -0x3c) / 10.00000000;
          if (1.00000000 < fStack60) {
            fStack60 = 1.00000000;
          }
        }
        if (((iStack88 != 0) && (in_a0_lo < -0x3c)) &&
           (fStack68 = (float)(-0x3c - (int)in_a0_lo) / 10.00000000, 1.00000000 < fStack68)) {
          fStack68 = 1.00000000;
        }
        if (((iStack88 != 0) && ('<' < in_a0_lo)) &&
           (fStack72 = (float)((int)in_a0_lo + -0x3c) / 10.00000000, 1.00000000 < fStack72)) {
          fStack72 = 1.00000000;
        }
        bVar1 = (in_a2_lo & uStack198) != 0;
        bVar2 = bVar1;
        if (bVar1) {
          bVar2 = (uVar19 & uStack194) != 0;
        }
        uStack76 = (uint)bVar2;
        bVar3 = (uVar19 & uStack198) != 0;
        bVar2 = bVar3;
        if (bVar3) {
          bVar2 = (in_a2_lo & uStack194) == 0;
        }
        uStack80 = (uint)bVar2;
        iStack84 = iStack88;
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        if (uVar11 != 0) {
          if (ptr_BONDdata->is_aiming_flag != 0) {
            if ((in_a2_lo & 0x404) != 0) {
              fStack92 = 1.00000000;
            }
            if ((in_a2_lo & 0x808) != 0) {
              fStack96 = 1.00000000;
            }
          }
        }
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        uStack100 = (uint)(uVar11 == 0);
        if ((uVar11 == 0) &&
           (bVar2 = ptr_BONDdata->is_aiming_flag != 0, uStack100 = (uint)bVar2, bVar2)) {
          uStack100 = (uint)((in_a2_lo & 0x404) != 0);
        }
        item = get_item_in_hand(0);
        uVar11 = check_special_attributes(item,0x8000);
        uStack104 = (uint)(uVar11 == 0);
        if ((uVar11 == 0) &&
           (bVar2 = ptr_BONDdata->is_aiming_flag != 0, uStack104 = (uint)bVar2, bVar2)) {
          uStack104 = (uint)((~in_a2_lo & 0x808) != 0);
        }
        bVar2 = ptr_BONDdata->is_aiming_flag != 0;
        uStack112 = (uint)bVar2;
        uStack108 = uStack112;
        if (bVar2) {
          uStack112 = uStack380;
          uStack108 = uVar20;
        }
        if ((((bVar1) && (bVar4)) || (((in_a2_lo & 0x4000) != 0 && (bVar3)))) &&
           (item = get_item_in_hand(0), item == ITEM_REMOTEMINE)) {
          iStack116 = 1;
          uStack76 = 0;
          uStack80 = 0;
          uStack16 = 0;
        }
        if ((in_tank_flag == TRUE) && (ptr_BONDdata->is_aiming_flag != 0)) {
          item = get_item_in_hand(0);
          if (item == ITEM_TANKSHELLS) {
            iStack140 = 0;
            uStack24 = 1;
          }
          else {
            if ((fStack52 == 0.00000000) && (fStack56 == 0.00000000)) {
              if (0.00000000 < fStack68) {
                fStack52 = fStack68;
              }
              if (0.00000000 < fStack72) {
                fStack56 = fStack72;
              }
            }
          }
          fStack68 = 0.00000000;
          fStack72 = 0.00000000;
        }
      }
      bVar4 = (in_a2_lo & uStack194) != 0;
      uStack12 = (uint)bVar4;
      if ((bVar4) &&
         (bVar4 = ptr_BONDdata->pause_animation_state == 0, uStack12 = (uint)bVar4, bVar4)) {
        uStack12 = (uint)((in_a2_lo & uStack198) == 0);
      }
      iVar13 = cur_player_get_control_type();
      if ((iVar13 == 1) || (iVar13 = cur_player_get_control_type(), iVar13 == 3)) {
        iStack128 = 1;
      }
    }
  }
  ptr_BONDdata->field_D0 = 0;
  if (uStack16 != 0) {
    if (in_tank_flag == TRUE) {
      iStack204 = *(int *)(ptr_playerstank + 4);
      uVar15 = get_ammo_count_for_weapon(0x20);
      *(undefined4 *)(iStack204 + 0xd8) = uVar15;
      add_ammo_to_weapon(0x20,0);
      proc_7F08C61C(0x20);
      item = get_item_in_hand(0);
      if (item == ITEM_TANKSHELLS) {
        iVar13 = get_ammo_in_hands_magazine(0);
        *(int *)(iStack204 + 0xd8) = *(int *)(iStack204 + 0xd8) + iVar13;
        autoadvance_on_deplete_all_ammo();
      }
      *(undefined4 *)(iStack204 + 0xc4) = 0;
      in_tank_flag = FALSE;
      ptr_BONDdata->strafe_speed_multiplier = 0.00000000;
      ptr_BONDdata->forward_speed_multiplier = 0.00000000;
      ptr_BONDdata->azimuth_turning_direction = 0.00000000;
      iVar13 = 0;
      do {
        iVar16 = iVar13 + 4;
        *(undefined4 *)((int)&ptr_BONDdata->boost_factor_x + iVar13) = 0;
        iVar13 = iVar16;
      } while (iVar16 != 0xc);
      ptr_BONDdata->crouchposition = 2;
    }
    else {
      if ((((ptr_playerstank == NULL) || (*ptr_playerstank != '\x01')) ||
          (*(char *)(*(int *)(ptr_playerstank + 4) + 3) != '-')) || (dword_80036480 == 0)) {
        ptr_BONDdata->field_D0 = 1;
      }
      else {
        iStack212 = *(int *)(ptr_playerstank + 4);
        add_item_to_inventory(ITEM_TANKSHELLS);
        add_ammo_to_weapon(0x20,*(int *)(iStack212 + 0xd8));
        dword_8003646C = *(float *)(iStack212 + 200);
        *(undefined4 *)(iStack212 + 0xd8) = 0;
        dword_80036470 = dword_8003646C / flt_80055120;
        dword_80036484 = *(undefined4 *)(iStack212 + 0xcc);
        dword_80036474 = *(float *)(iStack212 + 0xcc);
        dword_80036478 = dword_80036474 / flt_80055124;
        dword_8003647C = 0;
        dword_80036464 = *(undefined4 *)(iStack212 + 0xdc);
        dword_80036460 = 0.00000000;
        in_tank_flag = TRUE;
        DAT_800799b8 = 0;
        ptr_BONDdata->strafe_speed_multiplier = 0.00000000;
        ptr_BONDdata->forward_speed_multiplier = 0.00000000;
        ptr_BONDdata->azimuth_turning_direction = 0.00000000;
        ptr_BONDdata->crouchposition = 1;
        DAT_800799bc = 0;
        f32_800799c0 = 1.00000000;
        copy_bond_azimuth = ptr_BONDdata->azimuth_angle;
        copy_bond_inclination_angle1 = ptr_BONDdata->inclination_angle1;
        copy_bond_posx = ptr_BONDdata->positionx;
        copy_bond_posy = ptr_BONDdata->positiony;
        copy_bond_posz = ptr_BONDdata->positionz;
        dword_80036490 = 0;
        proc_7F07C7B4();
      }
    }
  }
  fVar23 = fStack64;
  if (uStack124 == 0) {
    iStack144 = -(int)in_a1_lo;
    iStack152 = -iStack152;
    fStack64 = fStack60;
    fStack60 = fVar23;
  }
  uVar11 = check_if_bond_is_invincible();
  if ((uVar11 != 0) && (uVar11 = get_num_players(), uVar11 == 1)) {
    uStack12 = 0;
  }
  proc_7F067420(uStack12);
  iVar13 = get_invisible_to_guards_flag();
  if ((iVar13 != 0) &&
     ((lVar12 = get_hands_firing_status(0), lVar12 != 0 ||
      (lVar12 = get_hands_firing_status(1), lVar12 != 0)))) {
    fStack220 = 0.00000000;
    lVar12 = get_hands_firing_status(0);
    if ((lVar12 != 0) && (fVar21 = proc_7F067174(0), 0.00000000 < (float)fVar21)) {
      fStack220 = proc_7F067174(0);
    }
    lVar12 = get_hands_firing_status(1);
    if ((lVar12 != 0) && (fVar21 = proc_7F067174(1), (float)fStack220 < (float)fVar21)) {
      fStack220 = proc_7F067174(1);
    }
    proc_7F022EEC();
  }
  set_unset_bitflags(2,iStack84);
  if (0.00000000 < fStack92) {
    proc_7F05DDA4(fStack92);
  }
  if (0.00000000 < fStack96) {
    proc_7F05DE94(fStack96);
  }
  if (ptr_BONDdata->pause_animation_state == 0) {
    if (iStack88 != 0) {
      proc_7F05DD38();
    }
    proc_7F07E46C();
    proc_7F07E62C();
  }
  if (in_tank_flag == TRUE) {
    dword_80036488 = 0.00000000;
    if (DAT_800799b8 == 2) {
      if (0.00000000 < fStack56) {
        dword_80036488 = global_timer_delta * fStack56 * flt_80055128 + 0.00000000;
      }
      else {
        if (0.00000000 < fStack52) {
          dword_80036488 = 0.00000000 - global_timer_delta * fStack52 * flt_8005512C;
        }
        else {
          if (uStack24 != 0) {
            fVar23 = 1.00000000;
            if ((float)iStack156 / 70.00000000 <= 1.00000000) {
              fVar23 = (float)iStack156 / 70.00000000;
            }
            fVar22 = -1.00000000;
            if (-1.00000000 <= fVar23) {
              fVar22 = fVar23;
            }
            dword_80036488 = flt_80055130 * fVar22 * global_timer_delta + 0.00000000;
          }
        }
      }
      fVar23 = 1.00000000;
      if (ptr_BONDdata->is_aiming_flag == 0) {
        if (uStack20 == 0) {
          fVar22 = fVar23;
          if ((uStack36 == 0) && (fVar22 = 0.00000000, uStack40 != 0)) {
            fVar22 = -1.00000000;
          }
        }
        else {
          fVar22 = (float)iStack160 / 70.00000000;
        }
        if (1.00000000 < fVar22) {
          vector1 = 1.00000000;
        }
        else {
          vector1 = -1.00000000;
          if (-1.00000000 <= fVar22) {
            vector1 = fVar22;
          }
        }
        vector1 = vector1 * 15.00000000;
        if (0 < dword_80036490) {
          fVar23 = 4.00000000;
          dword_80036490 -= clock_timer;
          vector1 = vector1 * 0.50000000;
        }
        fVar22 = ptr_BONDdata->forward_speed_multiplier;
        if (vector1 != fVar22) {
          if (fVar22 < vector1) {
            ptr_BONDdata->forward_speed_multiplier =
                 fVar22 + (((((vector1 - fVar22) * 0.25000000) / 15.00000000 + 0.50000000) * fVar23
                           * 10.00000000) / 60.00000000) * global_timer_delta;
            if (vector1 < ptr_BONDdata->forward_speed_multiplier) {
              ptr_BONDdata->forward_speed_multiplier = vector1;
            }
          }
          else {
            if ((vector1 < fVar22) &&
               (ptr_BONDdata->forward_speed_multiplier =
                     fVar22 + (((((fVar22 - vector1) * 0.25000000) / 15.00000000 + 0.50000000) *
                                fVar23 * -10.00000000) / 60.00000000) * global_timer_delta,
               ptr_BONDdata->forward_speed_multiplier < vector1)) {
              ptr_BONDdata->forward_speed_multiplier = vector1;
            }
          }
        }
      }
    }
  }
  else {
    if (uStack44 == 0) {
      if (uStack48 == 0) {
        proc_7F07FCC4(0);
      }
      else {
        proc_7F07FCC4(1);
      }
    }
    else {
      proc_7F07FCC4(-1);
    }
    if (uStack24 != 0) {
      ptr_BONDdata->strafe_speed_multiplier = (float)iStack156 / 70.00000000;
    }
    if (uStack36 == 0) {
      if (uStack40 == 0) {
        proc_7F07FE1C(0);
      }
      else {
        proc_7F07FE1C(-1);
      }
    }
    else {
      proc_7F07FE1C(1);
      ptr_BONDdata->forward_speed_frame_counter =
           ptr_BONDdata->forward_speed_frame_counter + clock_timer;
    }
    if (uStack20 != 0) {
      ptr_BONDdata->forward_speed_multiplier = (float)iStack160 / 70.00000000;
      if (iStack160 < 0x3d) {
        ptr_BONDdata->forward_speed_frame_counter = 0;
      }
      else {
        ptr_BONDdata->forward_speed_frame_counter =
             ptr_BONDdata->forward_speed_frame_counter + clock_timer;
      }
    }
    fVar23 = ptr_BONDdata->forward_speed_multiplier;
    if (1.00000000 < fVar23) {
      ptr_BONDdata->forward_speed_multiplier = 1.00000000;
      fVar23 = ptr_BONDdata->forward_speed_multiplier;
    }
    if (fVar23 < -1.00000000) {
      ptr_BONDdata->forward_speed_multiplier = -1.00000000;
    }
    fVar23 = ptr_BONDdata->strafe_speed_multiplier;
    if (1.00000000 < fVar23) {
      ptr_BONDdata->strafe_speed_multiplier = 1.00000000;
      fVar23 = ptr_BONDdata->strafe_speed_multiplier;
    }
    if (fVar23 < -1.00000000) {
      ptr_BONDdata->strafe_speed_multiplier = -1.00000000;
    }
    ptr_BONDdata->forward_speed_multiplier = ptr_BONDdata->forward_speed_multiplier * flt_80055134;
    ptr_BONDdata->forward_speed_multiplier =
         ptr_BONDdata->forward_speed_multiplier * (float)ptr_BONDdata->forward_speed_multiplier_2;
    if ((uStack20 == 0) && (uStack36 == 0)) {
      ptr_BONDdata->forward_speed_frame_counter = 0;
    }
    if (uStack108 == 0) {
      if (uStack112 == 0) {
        proc_7F079988(0);
      }
      else {
        proc_7F079988(1);
      }
    }
    else {
      proc_7F079988(-1);
    }
    if (uStack100 == 0) {
      if (uStack104 != 0) {
        change_crouch_position(2);
      }
    }
    else {
      change_crouch_position(-2);
    }
  }
  if (ptr_BONDdata->forward_speed_frame_counter < 0xb4) {
    fVar23 = (float)ptr_BONDdata->forward_speed_multiplier_2;
    if (1.00000000 < fVar23) {
      *(float *)&ptr_BONDdata->forward_speed_multiplier_2 =
           fVar23 - FLOAT_8005513c * global_timer_delta;
      fVar23 = (float)ptr_BONDdata->forward_speed_multiplier_2;
    }
    if (fVar23 < 1.00000000) {
      ptr_BONDdata->forward_speed_multiplier_2 = 1.00000000;
      goto LAB_7f083468;
    }
    iVar13 = ptr_BONDdata->pause_animation_state;
  }
  else {
    fVar23 = (float)ptr_BONDdata->forward_speed_multiplier_2;
    if (fVar23 < 1.25000000) {
      *(float *)&ptr_BONDdata->forward_speed_multiplier_2 =
           fVar23 + flt_80055138 * global_timer_delta;
      fVar23 = (float)ptr_BONDdata->forward_speed_multiplier_2;
    }
    if (1.25000000 < fVar23) {
      ptr_BONDdata->forward_speed_multiplier_2 = 1.25000000;
LAB_7f083468:
      iVar13 = ptr_BONDdata->pause_animation_state;
    }
    else {
      iVar13 = ptr_BONDdata->pause_animation_state;
    }
  }
  if (iVar13 != 0) goto LAB_7f083b40;
  fVar22 = -4.00000000;
  if (ptr_BONDdata->field_114 != 0) {
    iStack256 = ptr_BONDdata->ptr_tile_printmanpos;
    fStack260 = 300.00000000;
    fStack252 = -4.00000000;
    proc_7F08A274(ptr_BONDdata->position_data_pointer,&uStack288,&fStack280,&uStack284);
    fStack276 = (float)ptr_BONDdata->field_498 * 300.00000000 + (float)ptr_BONDdata->positionx;
    fStack272 = (float)ptr_BONDdata->positiony;
    fStack268 = (float)ptr_BONDdata->field_4A0 * 300.00000000 + (float)ptr_BONDdata->positionz;
    proc_7F0B1CC4();
    lVar12 = proc_7F0B0E24();
    if (lVar12 == 0) {
      proc_7F026298((float *)&ptr_BONDdata->positionx,(float *)&ptr_BONDdata->field_498,&fStack276);
      fVar23 = fStack276 - (float)ptr_BONDdata->positionx;
      fVar22 = fStack268 - (float)ptr_BONDdata->positionz;
      fStack260 = sqrtf(fVar23 * fVar23 + fVar22 * fVar22);
      fVar23 = proc_7F080D60((longlong)iStack256,fStack276,fStack268);
    }
    else {
      fVar23 = proc_7F080D60((longlong)iStack256,fStack276,fStack268);
    }
    fVar22 = fStack252;
    fStack272 = fVar23;
    if (((0.00000000 < fStack260) &&
        (vector1 = fVar23 - (float)ptr_BONDdata->clipping_height, fVar22 = fStack252,
        fStack272 = fVar23, -300.00000000 < vector1)) &&
       (fVar22 = fStack252, fStack272 = fVar23, vector1 < 500.00000000)) {
      fStack272 = fVar23;
      fVar23 = convert_angle_using_inverse((f32)vector1,(f32)fStack260);
      fVar22 = (fVar23 * 360.00000000) / flt_80055140 + -4.00000000;
      if (180.00000000 <= fVar22) {
        fVar22 = fVar22 - 360.00000000;
      }
      if (0.00000000 < fVar22) {
        fVar22 = fVar22 * flt_80055144;
      }
    }
  }
  if (((ptr_BONDdata->field_110 != 0) && (iStack160 < 0x28)) && (-0x28 < iStack160)) {
    ptr_BONDdata->field_110 = 0;
  }
  if (in_tank_flag == FALSE) {
    if (fStack60 <= 0.00000000) {
      if (0.00000000 < fStack64) {
        ptr_BONDdata->field_104 = 0;
        goto LAB_7f0836e8;
      }
      if (iStack128 != 0) {
        ptr_BONDdata->field_120 = 0;
        goto LAB_7f083830;
      }
      if (ptr_BONDdata->look_ahead_setting == 0) {
        if (ptr_BONDdata->field_11C == 0) {
          ptr_BONDdata->field_10C = 0;
        }
        else {
          if ((uStack20 != 0) && ((0x3c < iStack160 || (iStack160 < -0x3c)))) {
            fVar23 = ptr_BONDdata->inclination_angle1;
            if (fVar23 <= fVar22 + 5.00000000) {
              if (fVar22 + -10.00000000 <= fVar23) {
                ptr_BONDdata->field_10C = 0;
                goto LAB_7f083838;
              }
              iVar13 = ptr_BONDdata->field_110;
            }
            else {
              iVar13 = ptr_BONDdata->field_110;
            }
            if (iVar13 != 0) {
              ptr_BONDdata->field_10C = 0;
              goto LAB_7f083838;
            }
            ptr_BONDdata->field_104 = 1;
          }
LAB_7f083830:
          ptr_BONDdata->field_10C = 0;
        }
      }
      else {
        if (uStack20 == 0) {
LAB_7f08374c:
          iVar13 = ptr_BONDdata->field_120;
        }
        else {
          if ((0x3c < iStack160) || (iStack160 < -0x3c)) {
            ptr_BONDdata->field_120 = 1;
            goto LAB_7f08374c;
          }
          iVar13 = ptr_BONDdata->field_120;
        }
        if (iVar13 == 0) {
          ptr_BONDdata->field_10C = 0;
        }
        else {
          fVar23 = ptr_BONDdata->inclination_angle1;
          if (fVar23 <= fVar22 + 5.00000000) {
            if (fVar22 + -10.00000000 <= fVar23) {
              ptr_BONDdata->field_10C = 0;
              goto LAB_7f083838;
            }
            iVar13 = ptr_BONDdata->field_110;
          }
          else {
            iVar13 = ptr_BONDdata->field_110;
          }
          if (iVar13 == 0) {
            ptr_BONDdata->field_104 = 1;
            goto LAB_7f083830;
          }
          ptr_BONDdata->field_10C = 0;
        }
      }
    }
    else {
      ptr_BONDdata->field_104 = 0;
LAB_7f0836e8:
      ptr_BONDdata->field_10C = 1;
      ptr_BONDdata->field_120 = 0;
    }
LAB_7f083838:
    iVar13 = ptr_BONDdata->field_104;
  }
  else {
    iVar13 = ptr_BONDdata->field_104;
  }
  if (iVar13 == 0) {
    if (uStack32 == 0) {
      if (fStack60 <= 0.00000000) {
        if (0.00000000 < fStack64) {
          fVar23 = (float)proc_7F080010();
          if ((uStack20 != 0) && ((0x3c < iStack160 || (iStack160 < 0x3c)))) {
            ptr_BONDdata->field_110 = 1;
          }
        }
        else {
          fVar23 = (float)proc_7F080010();
        }
      }
      else {
        fVar23 = (float)proc_7F080010();
        if ((uStack20 != 0) && ((0x3c < iStack160 || (iStack160 < 0x3c)))) {
          ptr_BONDdata->field_110 = 1;
        }
      }
    }
    else {
      video_related_23();
      fVar22 = (float)iStack152 / 70.00000000;
      if (1.00000000 < fVar22) {
        fVar22 = 1.00000000;
        bVar4 = true;
      }
      else {
        if (fVar22 < -1.00000000) {
          fVar22 = -1.00000000;
          bVar4 = false;
        }
        else {
          bVar4 = 0.00000000 <= fVar22;
        }
      }
      vector1 = fVar22;
      if (!bVar4) {
        vector1 = -fVar22;
      }
      ptr_BONDdata->inclination_turning_direction = -(fVar22 * vector1) * (fVar23 / 60.00000000);
    }
    ptr_BONDdata->inclination_angle1 =
         ptr_BONDdata->inclination_angle1 +
         ptr_BONDdata->inclination_turning_direction * global_timer_delta * 3.50000000;
    if (((in_tank_flag == TRUE) && (DAT_800799b8 == 2)) &&
       (fVar23 = -20.00000000, ptr_BONDdata->inclination_angle1 < -20.00000000)) {
      ptr_BONDdata->inclination_angle1 = -20.00000000;
    }
  }
  else {
    if (in_tank_flag == FALSE) {
      fVar23 = (ptr_BONDdata->inclination_turning_direction *
                ptr_BONDdata->inclination_turning_direction * 0.50000000) / flt_80055148;
      if (fVar22 + fVar23 < ptr_BONDdata->inclination_angle1) {
        fStack252 = fVar22;
        proc_7F080010();
      }
      else {
        if (ptr_BONDdata->inclination_angle1 < fVar22 - fVar23) {
          fStack252 = fVar22;
          proc_7F080010();
        }
        else {
          fStack252 = fVar22;
          proc_7F080010();
        }
      }
      fVar23 = ptr_BONDdata->inclination_angle1;
      fVar22 = ptr_BONDdata->inclination_turning_direction * global_timer_delta;
      fVar22 = fVar23 + fVar22 + fVar22;
      if ((fVar23 <= fStack252) || (fVar22 <= fStack252)) {
        if (fVar23 < fStack252) {
          if (fVar22 < fStack252) {
            ptr_BONDdata->inclination_angle1 = fVar22;
            goto LAB_7f083b40;
          }
          ptr_BONDdata->inclination_angle1 = fStack252;
        }
        else {
          ptr_BONDdata->inclination_angle1 = fStack252;
        }
        ptr_BONDdata->inclination_turning_direction = 0.00000000;
        if (ptr_BONDdata->field_10C == 0) {
          ptr_BONDdata->field_104 = 0;
        }
      }
      else {
        ptr_BONDdata->inclination_angle1 = fVar22;
      }
    }
  }
LAB_7f083b40:
  if (uStack28 == 0) {
    if (0.00000000 < fStack68) {
      proc_7F0802C4();
    }
    else {
      if (0.00000000 < fStack72) {
        proc_7F0802C4();
      }
      else {
        proc_7F0802C4();
      }
    }
  }
  else {
    video_related_23();
    fVar22 = (float)iStack148 / 70.00000000;
    if (1.00000000 < fVar22) {
      vector1 = 1.00000000;
    }
    else {
      vector1 = -1.00000000;
      if (-1.00000000 <= fVar22) {
        vector1 = fVar22;
      }
    }
    fVar22 = vector1;
    if (vector1 < 0.00000000) {
      fVar22 = -vector1;
    }
    ptr_BONDdata->azimuth_turning_direction = vector1 * fVar22 * (fVar23 / 60.00000000);
  }
  if (in_tank_flag == TRUE) {
    if (DAT_800799b8 == 2) {
      fVar23 = 0.00000000;
      if (uStack28 == 0) {
        if (0.00000000 < fStack68) {
          fVar23 = (float)proc_7F080228();
          fVar23 = fVar23 * flt_80055150;
        }
        else {
          if (0.00000000 < fStack72) {
            fVar23 = (float)proc_7F080228();
            fVar23 = fVar23 * flt_80055154;
          }
        }
      }
      else {
        fVar23 = ptr_BONDdata->azimuth_turning_direction * flt_8005514C;
      }
      if (0 < clock_timer) {
        iVar13 = 1;
        dword_80036460 = flt_80055158 * dword_80036460;
        if (1 < clock_timer) {
          do {
            iVar13 += 1;
            dword_80036460 = flt_80055158 * (dword_80036460 + fVar23);
          } while (iVar13 < clock_timer);
        }
        dword_80036460 = dword_80036460 + fVar23;
      }
      ptr_BONDdata->azimuth_turning_direction = dword_80036460 * flt_8005515C;
    }
    else {
      ptr_BONDdata->azimuth_turning_direction = 0.00000000;
    }
  }
  if (iStack116 != 0) {
    ptr_BONDdata->when_detonating_mines_is_0 = 0;
    ptr_BONDdata->right_weapon_current_animation = 0;
    trigger_remote_mine_detonation();
  }
  uVar11 = get_num_players();
  if ((longlong)uVar11 < 2) {
    bVar4 = true;
  }
  else {
    iVar13 = get_scenario();
    if (iVar13 == 2) {
      uVar11 = proc_7F08CF80();
      if (uVar11 == 0) {
        bVar4 = true;
      }
      else {
        bVar4 = false;
      }
    }
    else {
      bVar4 = true;
    }
  }
  if (bVar4) {
    if (uStack76 != 0) {
      backstep_through_inventory();
    }
    if (uStack80 != 0) {
      advance_through_inventory();
    }
  }
  if (uStack4 == 0) {
    if (iStack8 != 0) {
      ptr_BONDdata->controlstyle = 2;
    }
  }
  else {
    ptr_BONDdata->controlstyle = 0;
  }
  uVar11 = SEXT48(ptr_BONDdata->controlstyle);
  if (uVar11 == 0) {
    proc_7F067AA4(0);
    uVar15 = extraout_a0_lo;
    uVar18 = extraout_a1_lo;
    if (((uStack120 != 0) &&
        (redirect_get_BONDdata_autoaim_x(), uVar15 = extraout_a0_lo_00, uVar18 = extraout_a1_lo_00,
        uVar11 != 0)) &&
       (uVar15 = extraout_a0_lo_00, uVar18 = extraout_a1_lo_00, ptr_BONDdata->field_140 != 0)) {
      item = get_item_in_hand(0);
      uVar11 = check_special_attributes(item,8);
      uVar15 = extraout_a0_lo_01;
      uVar18 = extraout_a1_lo_01;
    }
    if (((uStack120 != 0) &&
        (redirect_get_BONDdata_autoaim(), uVar15 = extraout_a0_lo_02, uVar18 = extraout_a1_lo_02,
        uVar11 != 0)) &&
       (uVar15 = extraout_a0_lo_02, uVar18 = extraout_a1_lo_02, ptr_BONDdata->field_130 != 0)) {
      item = get_item_in_hand(0);
      check_special_attributes(item,8);
      uVar15 = extraout_a0_lo_03;
      uVar18 = extraout_a1_lo_03;
    }
    proc_7F067F58(uVar15,uVar18);
  }
  else {
    if (uVar11 == 2) {
      proc_7F067AA4(0);
      proc_7F067FBC(extraout_a0_lo_04,extraout_a1_lo_04);
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F083FC8(void)

{
  dword dVar1;
  dword dVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  float fVar6;
  f32 fVar7;
  
  if (ptr_BONDdata->invincibility_timer < 0) {
    iVar4 = ptr_BONDdata->health_bar_timer;
    goto LAB_7f084204;
  }
  if (ptr_BONDdata->invincibility_timer == 0) {
    set_unset_ammo_on_screen_setting(8,0);
    set_unset_bitflags(0x10,0);
    set_flags_in_BONDdata_stationary_intro_cam(4);
    proc_7F08A944(4);
    set_unset_clock_lock_bits(8,0);
    fVar7 = get_BONDdata_watch_health();
    ptr_BONDdata->field_29D4 = (int)((float)fVar7 * 8.00000000);
    if (7 < ptr_BONDdata->field_29D4) {
      ptr_BONDdata->field_29D4 = 7;
      goto LAB_7f08406c;
    }
    iVar4 = ptr_BONDdata->field_29D4;
  }
  else {
LAB_7f08406c:
    iVar4 = ptr_BONDdata->field_29D4;
  }
  iVar3 = ptr_BONDdata->invincibility_timer;
  if ((int)dword_80036634[iVar4 * 0xb + 2] < iVar3) {
    if (iVar3 <= (int)dword_80036634[iVar4 * 0xb + 6]) {
      iVar5 = ptr_BONDdata->player_button_control;
      goto LAB_7f0840c0;
    }
    ptr_BONDdata->invincibility_timer = -1;
    proc_7F0807B0(0xff,0xff,0xff,0);
    if (ptr_BONDdata->player_button_control != 0) {
      iVar4 = ptr_BONDdata->health_bar_timer;
      goto LAB_7f084204;
    }
    set_unset_ammo_on_screen_setting(8,1);
    set_unset_bitflags(0x10,1);
    proc_7F08A380(4);
    proc_7F08A928(4);
    set_unset_clock_lock_bits(8,1);
  }
  else {
    iVar5 = ptr_BONDdata->player_button_control;
LAB_7f0840c0:
    if (iVar5 == 0) {
      dVar1 = dword_80036634[iVar4 * 0xb + 4];
      if (iVar3 < (int)dVar1) {
        iVar4 = ptr_BONDdata->pause_animation_state;
      }
      else {
        if ((int)dword_80036634[iVar4 * 0xb + 6] < iVar3) {
          iVar4 = ptr_BONDdata->pause_animation_state;
        }
        else {
          dVar2 = dword_80036634[iVar4 * 0xb + 5];
          iVar3 -= dVar1;
          iVar5 = dword_80036634[iVar4 * 0xb + 6] - dVar1;
          if (iVar3 < (int)dVar2) {
            fVar6 = ((float)dword_80036634[iVar4 * 0xb + 7] * (float)iVar3) / (float)dVar2;
          }
          else {
            fVar6 = ((float)dword_80036634[iVar4 * 0xb + 7] * (float)(iVar5 - iVar3)) /
                    (float)(iVar5 - dVar2);
          }
          proc_7F0807B0(dword_80036634[iVar4 * 0xb + 8],dword_80036634[iVar4 * 0xb + 9],
                        dword_80036634[iVar4 * 0xb + 10],fVar6);
          iVar3 = ptr_BONDdata->invincibility_timer;
          iVar4 = ptr_BONDdata->pause_animation_state;
        }
      }
    }
    else {
      iVar4 = ptr_BONDdata->pause_animation_state;
    }
    if (iVar4 == 0) {
      ptr_BONDdata->invincibility_timer = iVar3 + clock_timer;
    }
    else {
      ptr_BONDdata->invincibility_timer = iVar3 + dword_80048498;
    }
  }
  iVar4 = ptr_BONDdata->health_bar_timer;
LAB_7f084204:
  if (-1 < iVar4) {
    if (iVar4 == 0) {
      fVar7 = get_BONDdata_watch_health();
      ptr_BONDdata->field_29B8 = (int)((float)fVar7 * 8.00000000);
      if (ptr_BONDdata->field_29B8 < 8) {
        iVar4 = ptr_BONDdata->player_button_control;
      }
      else {
        ptr_BONDdata->field_29B8 = 7;
        iVar4 = ptr_BONDdata->player_button_control;
      }
    }
    else {
      iVar4 = ptr_BONDdata->player_button_control;
    }
    if (iVar4 == 0) {
      iVar4 = ptr_BONDdata->field_29B8;
      iVar3 = ptr_BONDdata->health_bar_timer;
      if ((iVar3 < (int)(&dword_80036794)[iVar4 * 3]) || ((int)(&DAT_80036798)[iVar4 * 3] < iVar3))
      {
        if ((iVar3 < (int)(&dword_80036794)[iVar4 * 3]) ||
           ((int)null_ARRAY_8003679c[iVar4 * 3] < iVar3)) {
          ptr_BONDdata->health_bar_timer = -1;
        }
        else {
          ptr_BONDdata->mp_watch_health_total = ptr_BONDdata->current_health;
          ptr_BONDdata->mp_watch_armor_total = ptr_BONDdata->current_armor;
          ptr_BONDdata->health_bar_timer = ptr_BONDdata->health_bar_timer + clock_timer;
        }
      }
      else {
        ptr_BONDdata->mp_watch_health_total = ptr_BONDdata->previous_health;
        ptr_BONDdata->mp_watch_armor_total = ptr_BONDdata->previous_armor;
        ptr_BONDdata->health_bar_timer = ptr_BONDdata->health_bar_timer + clock_timer;
      }
    }
    else {
      ptr_BONDdata->health_bar_timer = -1;
    }
  }
  return;
}



void proc_7F084360(void)

{
  u32 uVar1;
  uint uVar2;
  float fVar3;
  float local_c;
  float local_8;
  float local_4;
  
  DAT_800799a0 += 1;
  if (((dword_80036444 != 0) && (disable_player_pickups_flag == 0)) && (DAT_8007999c < global_timer)
     ) {
    local_c = *(float *)(ptr_BONDdata->position_data_pointer + 8);
    local_8 = *(float *)(ptr_BONDdata->position_data_pointer + 0xc);
    local_4 = *(float *)(ptr_BONDdata->position_data_pointer + 0x10);
    uVar2 = DAT_800799a0 & 3;
    if (((int)DAT_800799a0 < 0) && (uVar2 != 0)) {
      uVar2 -= 4;
    }
    if (uVar2 == 0) {
      uVar1 = get_random_value();
      fVar3 = (float)uVar1;
      if ((int)uVar1 < 0) {
        fVar3 = fVar3 + 4294967296.00000000;
      }
      local_c = local_c + fVar3 * 0.00000000 * 150.00000000 + 250.00000000;
    }
    else {
      if (uVar2 == 1) {
        uVar1 = get_random_value();
        fVar3 = (float)uVar1;
        if ((int)uVar1 < 0) {
          fVar3 = fVar3 + 4294967296.00000000;
        }
        local_c = local_c - (fVar3 * 0.00000000 * 150.00000000 + 250.00000000);
      }
      else {
        if (uVar2 == 2) {
          uVar1 = get_random_value();
          fVar3 = (float)uVar1;
          if ((int)uVar1 < 0) {
            fVar3 = fVar3 + 4294967296.00000000;
          }
          local_4 = local_4 + fVar3 * 0.00000000 * 150.00000000 + 250.00000000;
        }
        else {
          if (uVar2 == 3) {
            uVar1 = get_random_value();
            fVar3 = (float)uVar1;
            if ((int)uVar1 < 0) {
              fVar3 = fVar3 + 4294967296.00000000;
            }
            local_4 = local_4 - (fVar3 * 0.00000000 * 150.00000000 + 250.00000000);
          }
        }
      }
    }
    uVar1 = get_random_value();
    fVar3 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar3 = fVar3 + 4294967296.00000000;
    }
    local_8 = local_8 + (fVar3 * 0.00000000 * 200.00000000 - 100.00000000);
    proc_7F09C250(0,&local_c,*(int *)(ptr_BONDdata->position_data_pointer + 0x14),0x12,0,0,
                  (char *)(ptr_BONDdata->position_data_pointer + 0x2c),0);
    uVar1 = get_random_value();
    DAT_8007999c = uVar1 % 0xf + global_timer + 0xf;
  }
  return;
}



void MoveBond(char param_1,char param_2,ushort param_3,ushort param_4)

{
  short sVar1;
  bool bVar2;
  ITEM_IDS IVar5;
  longlong lVar3;
  ulonglong uVar4;
  int iVar6;
  int **ppiVar7;
  BOOL BVar8;
  longlong lVar9;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  longlong extraout_a0_02;
  undefined8 extraout_a0_03;
  longlong extraout_a0_04;
  longlong extraout_a0_05;
  longlong extraout_a0_06;
  longlong extraout_a0_07;
  undefined8 extraout_a0_08;
  float *pfVar10;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  longlong extraout_a1_03;
  longlong extraout_a1_04;
  longlong extraout_a1_05;
  undefined8 extraout_a1_06;
  undefined8 extraout_a1_07;
  undefined8 extraout_a1_08;
  undefined8 extraout_a1_09;
  undefined8 extraout_a1_10;
  undefined8 uVar11;
  char *pcVar12;
  int iVar13;
  float fVar14;
  float __x;
  float ducking_offset;
  float fVar15;
  float z;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  tile_rgb tStack860;
  uint uStack856;
  float *apfStack852 [2];
  int iStack844;
  undefined4 uStack840;
  undefined4 uStack836;
  undefined4 uStack832;
  int iStack828;
  int iStack824;
  undefined4 uStack820;
  float fStack816;
  short *psStack812;
  uint auStack804 [8];
  float afStack772 [12];
  float fStack724;
  float fStack720;
  float fStack716;
  float afStack712 [16];
  int iStack648;
  int iStack640;
  float fStack628;
  float fStack592;
  float fStack588;
  int iStack584;
  int aiStack580 [3];
  float fStack568;
  float fStack564;
  float fStack560;
  float fStack556;
  float fStack552;
  float fStack544;
  float fStack540;
  float fStack536;
  float fStack532;
  float fStack528;
  float fStack520;
  undefined auStack516 [76];
  int iStack440;
  undefined4 *puStack436;
  float fStack432;
  float fStack416;
  float fStack412;
  float fStack408;
  float fStack372;
  float fStack356;
  float fStack352;
  float fStack348;
  float fStack344;
  float fStack340;
  float afStack336 [17];
  float *pfStack268;
  float afStack260 [16];
  float fStack196;
  undefined4 uStack192;
  float fStack188;
  int iStack184;
  float fStack180;
  float fStack176;
  float fStack172;
  float fStack156;
  float fStack152;
  float fStack148;
  float fStack132;
  float fStack128;
  float afStack124 [2];
  float fStack116;
  float afStack112 [2];
  float fStack104;
  float fStack100;
  float fStack96;
  undefined4 *puStack92;
  float fStack80;
  float fStack72;
  float afStack68 [2];
  float fStack60;
  float fStack48;
  float fStack44;
  float fStack40;
  undefined4 uStack36;
  float fStack32;
  float fStack24;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  fStack12 = dword_800367F4;
  fStack4 = dword_800367FC;
  uStack8 = dword_800367F8;
  uStack36 = 0;
  fStack32 = 0.00000000;
  fStack40 = 0.00000000;
  if (('c' < param_1) || (param_1 < -99)) {
    return_null();
  }
  if (('c' < param_2) || (param_2 < -99)) {
    return_null();
  }
  iVar13 = camera_80036424 + 1;
  if ((0 < camera_80036424) && (camera_80036424 = iVar13, 3 < iVar13)) {
    camera_80036424 = 0;
    ptr_BONDdata->lock_left_hand_model = 0;
    ptr_BONDdata->lock_right_hand_model = 0;
    IVar5 = get_item_in_hand(1);
    remove_hands_item(1,IVar5);
    IVar5 = get_item_in_hand(0);
    remove_hands_item(0,IVar5);
  }
  proc_7F079A50(0);
  proc_7F083FC8();
  proc_7F084360();
  controller_gameplay_interaction();
  iVar13 = get_controls_locked_flag();
  if (iVar13 != 0) {
    proc_7F07EAF0();
  }
  if (ptr_BONDdata->pause_animation_state != 0) {
    probably_look_at_watch();
  }
  if (in_tank_flag == FALSE) {
    iVar13 = proc_7F0799F0();
    if (iVar13 == 0) {
      ptr_BONDdata->forward_speed_multiplier = ptr_BONDdata->forward_speed_multiplier * 0.50000000;
      ptr_BONDdata->strafe_speed_multiplier = ptr_BONDdata->strafe_speed_multiplier * 0.50000000;
    }
    __x = (float)ptr_BONDdata->boost_factor_x;
    if (__x == 0.00000000) {
      if ((float)ptr_BONDdata->boost_factor_z == 0.00000000) goto LAB_7f08497c;
      fVar14 = (float)ptr_BONDdata->boost_factor_z;
    }
    else {
      fVar14 = (float)ptr_BONDdata->boost_factor_z;
    }
    fStack44 = fVar14 * (float)ptr_BONDdata->azimuth_cosine +
               -__x * (float)ptr_BONDdata->azimuth_sine;
    fStack48 = -__x * (float)ptr_BONDdata->azimuth_cosine -
               fVar14 * (float)ptr_BONDdata->azimuth_sine;
    fVar14 = sqrtf(fVar14 * fVar14 + __x * __x);
    iVar13 = 0;
    ptr_BONDdata->forward_speed_multiplier = ptr_BONDdata->forward_speed_multiplier + fStack44;
    ptr_BONDdata->strafe_speed_multiplier = ptr_BONDdata->strafe_speed_multiplier + fStack48;
    __x = flt_8005516C;
    do {
      iVar6 = (int)&ptr_BONDdata->unknown + iVar13;
      fVar15 = *(float *)(iVar6 + 0x180);
      if (fVar15 != 0.00000000) {
        if (0.00000000 < fVar15) {
          *(float *)(iVar6 + 0x180) = fVar15 - (__x * global_timer_delta * fVar15) / fVar14;
          iVar6 = (int)&ptr_BONDdata->unknown + iVar13;
          if (*(float *)(iVar6 + 0x180) < 0.00000000) {
            *(undefined4 *)(iVar6 + 0x180) = 0;
          }
        }
        else {
          if (fVar15 < 0.00000000) {
            *(float *)(iVar6 + 0x180) = fVar15 - (__x * global_timer_delta * fVar15) / fVar14;
            iVar6 = (int)&ptr_BONDdata->unknown + iVar13;
            if (0.00000000 < *(float *)(iVar6 + 0x180)) {
              *(undefined4 *)(iVar6 + 0x180) = 0;
            }
          }
        }
      }
      iVar13 += 4;
    } while (iVar13 != 0xc);
  }
LAB_7f08497c:
  if (in_tank_flag == TRUE) {
    fStack96 = ptr_BONDdata->azimuth_turning_direction * global_timer_delta * flt_80055174 *
               3.50000000;
    puStack92 = (undefined4 *)((float)dword_80036464 + fStack96);
    if ((float)flt_80055170 <= (float)puStack92) {
      puStack92 = (undefined4 *)((float)puStack92 - (float)flt_80055170);
    }
    if ((float)puStack92 < 0.00000000) {
      puStack92 = (undefined4 *)((float)puStack92 + (float)flt_80055170);
      iVar13 = ptr_BONDdata->ptr_tile_printmanpos;
    }
    else {
      iVar13 = ptr_BONDdata->ptr_tile_printmanpos;
    }
    iVar13 = proc_7F07CAC8(&ptr_BONDdata->positionx,iVar13,(float)flt_80055170,puStack92,afStack68);
    if (iVar13 == 0) {
      fStack156 = -1.00000000;
      fStack180 = -1.00000000;
      proc_7F0B28B0(afStack112,afStack124);
      fStack128 = afStack124[0] - afStack112[0];
      fStack132 = fStack116 - fStack104;
      __x = sqrtf(fStack128 * fStack128 + fStack132 * fStack132);
      fStack148 = fStack132 * (1.00000000 / __x);
      fStack152 = -(fStack128 * (1.00000000 / __x));
      __x = ((float)ptr_BONDdata->positionz - fStack72) * fStack152 +
            ((float)ptr_BONDdata->positionx - fStack80) * fStack148;
      if (__x < 0.00000000) {
        fStack148 = -fStack148;
        fStack152 = -fStack152;
        __x = -__x;
      }
      fVar14 = ((float)ptr_BONDdata->positionz - fStack104) * fStack152 +
               ((float)ptr_BONDdata->positionx - afStack112[0]) * fStack148;
      if (fVar14 < __x) {
        fStack156 = __x - fVar14;
      }
      fStack128 = fStack80 - afStack68[0];
      fStack132 = fStack72 - fStack60;
      __x = sqrtf(fStack128 * fStack128 + fStack132 * fStack132);
      fStack172 = fStack132 * (1.00000000 / __x);
      fStack176 = -(fStack128 * (1.00000000 / __x));
      z = (float)ptr_BONDdata->positionz;
      __x = (float)ptr_BONDdata->positionx;
      fVar14 = (z - fStack72) * fStack176 + (__x - fStack80) * fStack172;
      if (fVar14 < 0.00000000) {
        fStack172 = -fStack172;
        fStack176 = -fStack176;
        fVar14 = -fVar14;
      }
      fVar15 = (z - fStack104) * fStack176 + (__x - afStack112[0]) * fStack172;
      __x = (z - fStack116) * fStack176 + (__x - afStack124[0]) * fStack172;
      if (fVar15 <= __x) {
        __x = fVar15;
      }
      if (__x < fVar14) {
        fStack180 = fVar14 - __x;
      }
      if ((0.00000000 <= fStack180) && ((fStack180 < fStack156 || (fStack156 < 0.00000000)))) {
        fStack148 = fStack172;
        fStack152 = fStack176;
        fStack156 = fStack180;
      }
      if (0.00000000 <= fStack156) {
        fStack12 = fStack156 * fStack148 * flt_80055178;
        fStack4 = fStack156 * fStack152 * flt_8005517C;
        proc_7F07D960(&fStack12,1);
        fStack12 = 0.00000000;
        fStack4 = 0.00000000;
        iVar13 = proc_7F07CAC8(&ptr_BONDdata->positionx,ptr_BONDdata->ptr_tile_printmanpos,
                               extraout_f12,puStack92,afStack68);
        if (iVar13 == 0) {
          fStack96 = 0.00000000;
        }
        else {
          dword_80036464 = puStack92;
        }
      }
      else {
        fStack96 = 0.00000000;
      }
    }
    else {
      dword_80036464 = puStack92;
    }
    fStack100 = dword_80036474;
    dword_80036484 = dword_80036484 + dword_80036488;
    if (flt_80055180 <= dword_80036484) {
      dword_80036484 = dword_80036484 - flt_80055180;
    }
    if (dword_80036484 < 0.00000000) {
      dword_80036484 = dword_80036484 + flt_80055180;
      __x = ptr_BONDdata->azimuth_turning_direction;
    }
    else {
      __x = ptr_BONDdata->azimuth_turning_direction;
    }
    __x = __x * 3.50000000 * flt_80055184 * 4.00000000 + dword_80036484;
    if (__x < 0.00000000) {
      __x = __x + flt_80055180;
    }
    if (flt_80055180 <= __x) {
      __x = __x - flt_80055180;
    }
    if (flt_80055188 <= __x - dword_80036474) {
      __x = __x - flt_8005518C;
    }
    else {
      if (__x - dword_80036474 < flt_80055190) {
        __x = __x + flt_80055194;
      }
    }
    lVar9 = (longlong)clock_timer;
    lVar3 = 0;
    if (0 < lVar9) {
      lVar3 = 1;
      dword_80036478 = flt_80055198 * dword_80036478;
      if (1 < lVar9) {
        do {
          lVar3 = (longlong)((int)lVar3 + 1);
          dword_80036478 = flt_80055198 * (dword_80036478 + __x);
        } while (lVar3 < lVar9);
      }
      dword_80036478 = dword_80036478 + __x;
    }
    dword_80036474 = dword_80036478 * flt_8005519C;
    if (flt_800551A0 <= dword_80036474) {
      dword_80036474 = dword_80036474 - flt_800551A0;
      dword_80036478 = dword_80036474 / flt_8005519C;
    }
    __x = dword_80036474;
    if (dword_80036474 < 0.00000000) {
      dword_80036474 = dword_80036474 + flt_800551A0;
      dword_80036478 = dword_80036474 / flt_8005519C;
      iVar13 = ptr_BONDdata->ptr_tile_printmanpos;
    }
    else {
      iVar13 = ptr_BONDdata->ptr_tile_printmanpos;
    }
    proc_7F07CDA8((float *)&ptr_BONDdata->positionx,iVar13,__x);
    if (lVar3 == 0) {
      dword_80036474 = fStack100;
      dword_80036484 = fStack100;
      dword_80036478 = fStack100 / flt_800551AC;
    }
    __x = flt_800551A8;
    if (ptr_playerstank != 0) {
      iStack184 = *(int *)(ptr_playerstank + 4);
      uStack192 = 0;
      fStack196 = DAT_800799a8;
      fStack188 = dword_8007A070;
      proc_7F0585FC(fStack96,extraout_a0,afStack260);
      proc_7F0583D8(afStack260,&fStack196);
      proc_7F07C7B4();
      fStack196 = DAT_800799a8 - fStack196;
      uStack192 = 0;
      fStack188 = dword_8007A070 - fStack188;
      proc_7F0585FC(flt_800551BC - (float)dword_80036464,extraout_a0_00,afStack260);
      matrix_multiply_A1_by_F12
                (*(float *)(*(int *)(iStack184 + 0x14) + 0x14),extraout_a0_01,afStack260);
      proc_7F0583D8(afStack260,&fStack196);
      proc_7F07D960(&fStack196,1);
      __x = flt_800551CC;
    }
    if ((0 < clock_timer) && (0 < clock_timer)) {
      iVar13 = 1;
      dword_8003647C = __x * dword_8003647C;
      if (1 < clock_timer) {
        do {
          iVar13 += 1;
          dword_8003647C = __x * (dword_8003647C + dword_80036488 / global_timer_delta);
        } while (iVar13 < clock_timer);
      }
      dword_8003647C = dword_8003647C + dword_80036488 / global_timer_delta;
    }
    ptr_BONDdata->azimuth_angle =
         (((float)dword_80036464 + dword_80036474 +
           ptr_BONDdata->azimuth_turning_direction * 3.50000000 * flt_800551D4 * 4.00000000 +
          dword_8003647C * flt_800551D0 * 4.00000000) * 360.00000000) / flt_800551D8;
    __x = ptr_BONDdata->azimuth_angle;
    while (__x < 0.00000000) {
      ptr_BONDdata->azimuth_angle = __x + 360.00000000;
      __x = ptr_BONDdata->azimuth_angle;
    }
    while (360.00000000 <= __x) {
      ptr_BONDdata->azimuth_angle = __x - 360.00000000;
      __x = ptr_BONDdata->azimuth_angle;
    }
  }
  else {
    __x = ptr_BONDdata->azimuth_angle +
          ptr_BONDdata->azimuth_turning_direction * global_timer_delta * 3.50000000;
    while (__x < 0.00000000) {
      __x = __x + 360.00000000;
    }
    if (360.00000000 <= __x) {
      do {
        __x = __x - 360.00000000;
      } while (360.00000000 <= __x);
      ptr_BONDdata->azimuth_angle = __x;
    }
    else {
      ptr_BONDdata->azimuth_angle = __x;
    }
  }
  proc_7F081790();
  pfStack268 = NULL;
  iVar13 = proc_7F0799F0();
  if (iVar13 == 0) {
    pfStack268 = (float *)0xc2c80000;
    uVar11 = extraout_a1;
    __x = extraout_f12_00;
    fVar14 = extraout_f14;
  }
  else {
    iVar13 = proc_7F0799F0();
    if (iVar13 == 1) {
      pfStack268 = (float *)0xc2700000;
      uVar11 = extraout_a1_00;
      __x = extraout_f12_01;
      fVar14 = extraout_f14_00;
    }
    else {
      proc_7F0799F0();
      uVar11 = extraout_a1_01;
      __x = extraout_f12_02;
      fVar14 = extraout_f14_01;
    }
  }
  ducking_offset = (float)ptr_BONDdata->ducking_height_offset;
  lVar3 = (longlong)(int)&ptr_BONDdata->ducking_height_offset;
  if ((float)pfStack268 != ducking_offset) {
    proc_7F042F18((float *)&ptr_BONDdata->ducking_height_offset,__x,pfStack268,fVar14,
                  (float)&ptr_BONDdata->field_A4,0.50000000);
    ducking_offset = (float)ptr_BONDdata->ducking_height_offset;
    lVar3 = extraout_a0_02;
    uVar11 = extraout_a1_02;
  }
  if ((float)pfStack268 == ducking_offset) {
    ptr_BONDdata->field_A4 = 0.00000000;
  }
  if (in_tank_flag == TRUE) {
    if (DAT_800799b8 == 0) {
      lVar9 = (longlong)(int)afStack336;
      if (ptr_playerstank != 0) {
        iVar13 = *(int *)(ptr_playerstank + 4);
        proc_7F0585FC(flt_800551DC - (float)dword_80036464,lVar3,afStack336);
        matrix_multiply_A1_by_F12
                  (*(float *)(*(int *)(iVar13 + 0x14) + 0x14),extraout_a0_03,afStack336);
        fStack348 = DAT_800799a8;
        fStack344 = DAT_800799ac;
        fStack340 = dword_8007A070;
        proc_7F0583D8(afStack336,&fStack348);
        fStack356 = -20.00000000;
        fStack348 = fStack348 + *(float *)(iVar13 + 0x58);
        fStack344 = fStack344 + *(float *)(iVar13 + 0x5c);
        fStack340 = fStack340 + *(float *)(iVar13 + 0x60);
        fStack352 = (((float)dword_80036464 + dword_80036474) * 360.00000000) / flt_800551E0;
        if (-20.00000000 <= ptr_BONDdata->inclination_angle1) {
          fStack356 = ptr_BONDdata->inclination_angle1;
        }
        DAT_800799bc = DAT_800799bc + global_timer_delta / 45.00000000;
        if (1.00000000 <= DAT_800799bc) {
          DAT_800799bc = 1.00000000;
        }
        __x = cosf(DAT_800799bc * flt_800551E4 * 0.50000000);
        f32_800799c0 = (f32)((__x + 1.00000000) * 0.50000000);
        ptr_BONDdata->inclination_angle1 =
             (float)f32_800799c0 * copy_bond_inclination_angle1 +
             (1.00000000 - (float)f32_800799c0) * fStack356;
        __x = fStack352;
        if (180.00000000 < fStack352 - copy_bond_azimuth) {
          __x = fStack352 - 360.00000000;
        }
        if (fStack352 - copy_bond_azimuth < -180.00000000) {
          __x = __x + 360.00000000;
        }
        ptr_BONDdata->azimuth_angle =
             (float)f32_800799c0 * copy_bond_azimuth + (1.00000000 - (float)f32_800799c0) * __x;
        __x = ptr_BONDdata->azimuth_angle;
        if (360.00000000 <= __x) {
          ptr_BONDdata->azimuth_angle = __x - 360.00000000;
          __x = ptr_BONDdata->azimuth_angle;
        }
        if (__x < 0.00000000) {
          ptr_BONDdata->azimuth_angle = __x + 360.00000000;
        }
        uStack8 = 0;
        fStack12 = ((float)f32_800799c0 * copy_bond_posx +
                   (1.00000000 - (float)f32_800799c0) * fStack348) - (float)ptr_BONDdata->positionx;
        fStack4 = ((float)f32_800799c0 * copy_bond_posz +
                  (1.00000000 - (float)f32_800799c0) * fStack340) - (float)ptr_BONDdata->positionz;
        lVar3 = extraout_a0_04;
        lVar9 = extraout_a1_03;
      }
      if (1.00000000 <= DAT_800799bc) {
        DAT_800799b8 = 1;
      }
    }
    else {
      if (DAT_800799b8 == 1) {
        DAT_800799b8 = 2;
        if ((dword_80036458 == 0) && (iVar13 = get_controls_locked_flag(), iVar13 == 0)) {
          play_sfx_a1(ptr_sfx_buf,0x42,(sfxdata *)&dword_80036458);
        }
        music_related_36((longlong)dword_80036458,8,25000);
        DAT_800799b4 = 25000;
        lVar3 = extraout_a0_05;
        lVar9 = extraout_a1_04;
      }
      else {
        fVar14 = ptr_BONDdata->forward_speed_multiplier / 15.00000000;
        __x = ptr_BONDdata->azimuth_turning_direction / flt_800551E8;
        if (fVar14 < 0.00000000) {
          fVar14 = -fVar14;
        }
        if (__x < 0.00000000) {
          __x = -__x;
        }
        if (__x <= fVar14) {
          __x = fVar14;
        }
        if (0.00000000 < __x) {
          fVar14 = 1.00000000;
          if (__x <= 1.00000000) {
            fVar14 = __x;
          }
          if ((dword_8003645C == 0) &&
             (fStack372 = fVar14, iVar13 = get_controls_locked_flag(), fVar14 = fStack372,
             iVar13 == 0)) {
            play_sfx_a1(ptr_sfx_buf,0x3e,(sfxdata *)&dword_8003645C);
            fVar14 = fStack372;
          }
          __x = fVar14;
          if ((longlong)dword_8003645C != 0) {
            iVar13 = 0x7fff;
            if (fVar14 < flt_800551EC) {
              iVar13 = (int)((fVar14 * flt_800551F0) / flt_800551EC);
            }
            else {
              if (fVar14 < flt_800551F4) {
                iVar13 = (int)(((fVar14 - flt_800551EC) * flt_800551F8) / 0.75000000 + flt_800551FC)
                ;
              }
            }
            fStack372 = fVar14;
            music_related_36((longlong)dword_8003645C,8,iVar13);
            __x = fStack372;
          }
        }
        else {
          if ((dword_8003645C != 0) &&
             (fStack372 = __x, uVar4 = music_related_26(dword_8003645C), __x = fStack372, uVar4 != 0
             )) {
            music_related_28(dword_8003645C);
            __x = fStack372;
          }
        }
        if ((dword_80036458 == 0) &&
           (fStack372 = __x, iVar13 = get_controls_locked_flag(), __x = fStack372, iVar13 == 0)) {
          play_sfx_a1(ptr_sfx_buf,0x41,(sfxdata *)&dword_80036458);
          __x = fStack372;
        }
        if ((longlong)dword_80036458 != 0) {
          DAT_800799b4 = 0x7fff;
          if (__x < flt_80055200) {
            DAT_800799b4 = (int)((__x * flt_80055204) / flt_80055208 + flt_8005520C);
          }
          music_related_36((longlong)dword_80036458,8,DAT_800799b4);
        }
        IVar5 = get_item_in_hand(0);
        if (IVar5 == ITEM_TANKSHELLS) {
          dword_8003646C = (float)ptr_BONDdata->field_2A08 + flt_80055210;
        }
        __x = flt_80055214;
        if (dword_8003646C <= flt_80055214) {
          __x = dword_8003646C;
        }
        fVar14 = flt_80055218;
        if (flt_80055218 <= __x) {
          fVar14 = __x;
        }
        lVar3 = (longlong)clock_timer;
        if (0 < lVar3) {
          lVar9 = 1;
          dword_80036470 = flt_8005521C * dword_80036470;
          if (1 < lVar3) {
            do {
              lVar9 = (longlong)((int)lVar9 + 1);
              dword_80036470 = flt_8005521C * (dword_80036470 + fVar14);
            } while (lVar9 < lVar3);
          }
          dword_80036470 = dword_80036470 + fVar14;
        }
        dword_8003646C = dword_80036470 * flt_80055220;
        lVar9 = extraout_a1_05;
      }
    }
    *(float *)&ptr_BONDdata->field_19C =
         (float)ptr_BONDdata->field_19C - (global_timer_delta * 0.75000000) / flt_80055224;
    if ((float)ptr_BONDdata->field_19C < 0.00000000) {
      ptr_BONDdata->field_19C = 0.00000000;
    }
    proc_7F080B34(0.00000000,0.00000000,lVar3,lVar9,0.00000000);
    __x = sinf(flt_80055228 - (float)dword_80036464);
    fStack12 = fStack12 + ptr_BONDdata->forward_speed_multiplier * __x * global_timer_delta;
    __x = cosf(flt_8005522C - (float)dword_80036464);
    fStack4 = fStack4 + ptr_BONDdata->forward_speed_multiplier * __x * global_timer_delta;
    proc_7F07D960(&fStack12,1);
    if ((DAT_800799b8 == 2) && (0 < clock_timer)) {
      __x = ((float)ptr_BONDdata->positionx - (float)ptr_BONDdata->field_408) / global_timer_delta;
      fVar14 = ((float)ptr_BONDdata->positionz - (float)ptr_BONDdata->field_410) /
               global_timer_delta;
      __x = sqrtf(__x * __x + fVar14 * fVar14);
      if (ptr_BONDdata->forward_speed_multiplier < 0.00000000) {
        __x = -__x;
      }
      ptr_BONDdata->forward_speed_multiplier = __x;
    }
    goto LAB_7f0863ac;
  }
  if (dword_80036458 == 0) {
    lVar3 = (longlong)dword_8003645C;
  }
  else {
    uVar4 = music_related_26(dword_80036458);
    uVar11 = extraout_a1_06;
    if (uVar4 != 0) {
      DAT_800799b4 += clock_timer * -1000;
      if (0 < DAT_800799b4) {
        music_related_36((longlong)dword_80036458,8,DAT_800799b4);
        lVar3 = (longlong)dword_8003645C;
        uVar11 = extraout_a1_07;
        goto LAB_7f085bb4;
      }
      music_related_28(dword_80036458);
      uVar11 = extraout_a1_08;
    }
    lVar3 = (longlong)dword_8003645C;
  }
LAB_7f085bb4:
  if ((lVar3 != 0) &&
     (uVar4 = music_related_26((int)lVar3), lVar3 = extraout_a0_06, uVar11 = extraout_a1_09,
     uVar4 != 0)) {
    music_related_28(dword_8003645C);
    lVar3 = extraout_a0_07;
    uVar11 = extraout_a1_10;
  }
  fStack24 = ptr_BONDdata->strafe_speed_multiplier * DAT_80036af4 * 0.50000000 * global_timer_delta;
  fStack408 = (float)ptr_BONDdata->field_4A0 * -(float)ptr_BONDdata->field_1274 -
              (float)ptr_BONDdata->field_1278;
  fStack412 = (float)ptr_BONDdata->field_498 * (float)ptr_BONDdata->field_1274 -
              (float)ptr_BONDdata->field_127C;
  fStack416 = fStack408 * fStack408 + fStack412 * fStack412;
  if (100.00000000 <= fStack416) {
    fStack408 = fStack408 * flt_80055230;
    fStack412 = fStack412 * flt_80055230;
  }
  fVar14 = ptr_BONDdata->forward_speed_multiplier;
  fStack32 = ptr_BONDdata->strafe_speed_multiplier * flt_80055234;
  __x = ptr_BONDdata->azimuth_turning_direction * flt_80055234;
  if (fStack32 < 0.00000000) {
    fStack32 = -fStack32;
  }
  if (fVar14 < 0.00000000) {
    fVar14 = -fVar14;
  }
  if (__x < 0.00000000) {
    __x = -__x;
  }
  if (fStack32 <= fVar14) {
    fStack32 = fVar14;
  }
  if (__x <= fStack32) {
    __x = fStack32;
  }
  fStack32 = __x;
  if ((flt_80055238 <= fStack416) && (fStack32 < flt_80055234)) {
    fStack32 = flt_80055234;
  }
  if (0.75000000 <= fStack32) {
    *(float *)&ptr_BONDdata->field_19C =
         (float)ptr_BONDdata->field_19C +
         ((fStack32 - 0.75000000) * global_timer_delta) / 900.00000000;
  }
  else {
    *(float *)&ptr_BONDdata->field_19C =
         (float)ptr_BONDdata->field_19C -
         ((0.75000000 - fStack32) * global_timer_delta) / flt_8005523C;
  }
  if ((float)ptr_BONDdata->field_19C < 0.00000000) {
    ptr_BONDdata->field_19C = 0.00000000;
  }
  else {
    if (1.00000000 < (float)ptr_BONDdata->field_19C) {
      ptr_BONDdata->field_19C = 1.00000000;
    }
  }
  proc_7F080B34(fStack32,ptr_BONDdata->forward_speed_multiplier,lVar3,uVar11,fStack24);
  fStack12 = fStack12 +
             ((float)ptr_BONDdata->field_504 * (float)ptr_BONDdata->field_498 -
             (float)ptr_BONDdata->scaled_velocity * (float)ptr_BONDdata->field_4A0) *
             global_timer_delta + fStack408;
  fStack4 = fStack4 + ((float)ptr_BONDdata->field_504 * (float)ptr_BONDdata->field_4A0 +
                      (float)ptr_BONDdata->scaled_velocity * (float)ptr_BONDdata->field_498) *
                      global_timer_delta + fStack412;
  fStack432 = (float)ptr_BONDdata->positionx;
  puStack436 = (undefined4 *)ptr_BONDdata->positionz;
  iStack440 = ptr_BONDdata->ptr_tile_printmanpos;
  BVar8 = get_debug_fast_bond_flag();
  if (BVar8 != FALSE) {
    fStack12 = fStack12 +
               ((float)ptr_BONDdata->field_498 * ptr_BONDdata->forward_speed_multiplier -
               (float)ptr_BONDdata->field_4A0 * ptr_BONDdata->strafe_speed_multiplier) *
               global_timer_delta * 10.00000000;
    fStack4 = fStack4 + ((float)ptr_BONDdata->field_4A0 * ptr_BONDdata->forward_speed_multiplier +
                        (float)ptr_BONDdata->field_498 * ptr_BONDdata->strafe_speed_multiplier) *
                        global_timer_delta * 10.00000000;
  }
  proc_7F07D960(&fStack12,(uint)((float)ptr_BONDdata->field_1274 == 0.00000000));
  proc_7F0B2314(&iStack440,extraout_f12_03,extraout_f14_02,fStack432,puStack436);
  iVar13 = proc_7F0B23A4((int)auStack516);
  if (iVar13 != 0) {
    uStack36 = 1;
  }
  proc_7F0B2314(&ptr_BONDdata->ptr_tile_printmanpos,extraout_f12_04,extraout_f14_03,
                (float)ptr_BONDdata->positionx,(undefined4 *)ptr_BONDdata->positionz);
  iVar13 = proc_7F0B23A4((int)auStack516);
  if (iVar13 != 0) {
    uStack36 = 1;
  }
  proc_7F0B2314(&ptr_BONDdata->ptr_tile_printmanpos,extraout_f12_05,extraout_f14_04,
                (float)ptr_BONDdata->positionx,(undefined4 *)ptr_BONDdata->positionz);
  iVar13 = proc_7F0B23A4((int)auStack516);
  if (iVar13 == 0) {
    proc_7F0B2314(&iStack440,extraout_f12_06,extraout_f14_05,fStack432,puStack436);
  }
  iVar13 = proc_7F0B23A4((int)auStack516);
  if (iVar13 != 0) {
    uStack36 = 1;
    proc_7F0B2420(aiStack580,&iStack584,(int)&fStack564);
    if ((float)ptr_BONDdata->clipping_height <= fStack536) {
      fStack588 = fStack544 - fStack556;
      fStack592 = fStack564 - fStack552;
      __x = sqrtf(fStack588 * fStack588 + fStack592 * fStack592);
      fVar14 = ((float)puStack436 - fStack556) * (fStack592 / __x) +
               (fStack432 - fStack564) * (fStack588 / __x);
      __x = (((float)puStack436 + fStack4) - fStack556) * (fStack592 / __x) +
            ((fStack432 + fStack12) - fStack564) * (fStack588 / __x);
      if (fVar14 * __x <= 0.00000000) {
        fStack568 = 0.00000000;
      }
      else {
        if (__x < 0.00000000) {
          __x = -__x;
          fVar14 = -fVar14;
          bVar2 = fVar14 <= __x;
        }
        else {
          bVar2 = fVar14 <= __x;
        }
        if (bVar2) {
          fStack568 = 0.00000000;
        }
        else {
          fVar15 = (float)ptr_BONDdata->collision_radius;
          if (fVar15 < __x) {
            fStack568 = 0.00000000;
          }
          else {
            if (fVar14 < fVar15) {
              fStack568 = 0.00000000;
            }
            else {
              fStack568 = (fVar14 - fVar15) / (fVar14 - __x);
            }
          }
        }
      }
      fVar14 = sqrtf(fStack4 * fStack4 + fStack12 * fStack12);
      __x = fStack568;
      if (0.00000000 < fVar14) {
        fVar15 = (1.00000000 - fStack568) * fVar14;
        fStack40 = fVar15 * 0.25000000;
        __x = fStack568;
        if (fStack536 <= (float)ptr_BONDdata->clipping_height + fStack40) {
          fStack40 = fStack536 - (float)ptr_BONDdata->clipping_height;
          __x = fStack568 + (fVar15 - fStack40 / 0.25000000) / fVar14;
        }
      }
      fStack540 = fStack540 - fStack564;
      fStack532 = fStack532 - fStack556;
      fStack528 = fStack528 - fStack564;
      fStack520 = fStack520 - fStack556;
      if (fStack540 * fStack540 + fStack532 * fStack532 <=
          fStack528 * fStack528 + fStack520 * fStack520) {
        fStack528 = fStack540;
        fStack520 = fStack532;
      }
      fVar14 = fStack40 / (fStack536 - fStack560);
      fStack12 = fVar14 * fStack528 + fStack12 * __x;
      fStack4 = fVar14 * fStack520 + fStack4 * __x;
      *(float *)&ptr_BONDdata->positionx = fStack432;
      *(undefined4 **)&ptr_BONDdata->positionz = puStack436;
      ptr_BONDdata->ptr_tile_printmanpos = iStack440;
      proc_7F07D960(&fStack12,(uint)((float)ptr_BONDdata->field_1274 == 0.00000000));
    }
  }
  fVar14 = (float)ptr_BONDdata->positionx - fStack432;
  fVar15 = (float)ptr_BONDdata->positionz - (float)puStack436;
  __x = fStack4 * fStack4 + fStack12 * fStack12;
  if (__x != 0.00000000) {
    __x = (fVar14 * fVar14 + fVar15 * fVar15) / __x;
  }
  __x = sqrtf(__x);
  *(float *)&ptr_BONDdata->field_1278 = (float)ptr_BONDdata->field_1278 + __x * fStack408;
  *(float *)&ptr_BONDdata->field_127C = (float)ptr_BONDdata->field_127C + __x * fStack412;
LAB_7f0863ac:
  fStack628 = ptr_BONDdata->inclination_turning_direction / flt_8005524C +
              (float)ptr_BONDdata->field_A4 / 5.00000000;
  proc_7F08EAF8();
  proc_7F05E0E4();
  proc_7F05E5F0((float)ptr_BONDdata->inclination_angle2 * flt_80055254);
  if (((ptr_playerstank != 0) && (in_tank_flag == TRUE)) && (DAT_800799b8 == 2)) {
    iVar13 = *(int *)(ptr_playerstank + 4);
    iStack648 = *(int *)(*(int *)(*(int *)(*(int *)(*(int *)(iVar13 + 0x14) + 8) + 8) + 0x14) + 4);
    iStack640 = iVar13;
    IVar5 = get_item_in_hand(0);
    bVar2 = IVar5 == ITEM_TANKSHELLS;
    if (bVar2) {
      lVar3 = get_hands_firing_status(0);
      bVar2 = lVar3 != 0;
      *(uint *)(iVar13 + 0xc4) = (uint)bVar2;
    }
    else {
      *(uint *)(iVar13 + 0xc4) = (uint)bVar2;
    }
    *(float *)(iVar13 + 200) = dword_8003646C;
    *(float *)(iVar13 + 0xcc) = dword_80036474;
    *(undefined4 **)(iVar13 + 0xdc) = dword_80036464;
    proc_7F0585FC(flt_80055258 - (float)dword_80036464,(ulonglong)bVar2,afStack712);
    matrix_multiply_A1_by_F12
              (*(float *)(*(int *)(iStack640 + 0x14) + 0x14),extraout_a0_08,afStack712);
    fStack724 = -DAT_800799a8;
    fStack720 = -DAT_800799ac;
    fStack716 = -dword_8007A070;
    proc_7F0583D8(afStack712,&fStack724);
    fStack724 = fStack724 + (float)ptr_BONDdata->positionx;
    fStack716 = fStack716 + (float)ptr_BONDdata->positionz;
    *(int *)(*(int *)(iStack640 + 0x10) + 0x14) = ptr_BONDdata->ptr_tile_printmanpos;
    proc_7F0B0BE4((int *)(*(int *)(iStack640 + 0x10) + 0x14),extraout_f12_07,extraout_f14_06,
                  (float)ptr_BONDdata->positionx,(float)ptr_BONDdata->positionz);
    fVar14 = (float)proc_7F0B2970();
    *(float *)(iVar13 + 0xd4) = fVar14;
    __x = flt_8005525C;
    iVar6 = 0;
    if (0 < clock_timer) {
      fVar14 = *(float *)(iVar13 + 0xd0);
      while( true ) {
        iVar6 += 1;
        *(float *)(iVar13 + 0xd0) = fVar14 * __x + *(float *)(iVar13 + 0xd4);
        fVar14 = __x;
        if (clock_timer <= iVar6) break;
        fVar14 = *(float *)(iVar13 + 0xd0);
      }
    }
    __x = *(float *)(iVar13 + 0xd0) * flt_80055260;
    proc_7F03E864(iStack648);
    fStack720 = (__x - fVar14 * *(float *)(*(int *)(iStack640 + 0x14) + 0x14)) + 4.00000000;
    proc_7F058020(afStack712,(undefined4 *)(iStack640 + 0x18));
    *(float *)(*(int *)(iStack640 + 0x10) + 8) = fStack724;
    *(float *)(iStack640 + 0x58) = fStack724;
    *(float *)(*(int *)(iStack640 + 0x10) + 0xc) = fStack720;
    *(float *)(iStack640 + 0x5c) = fStack720;
    *(float *)(*(int *)(iStack640 + 0x10) + 0x10) = fStack716;
    *(float *)(iStack640 + 0x60) = fStack716;
    proc_7F056CA0(iStack640);
    proc_7F040484(iStack640);
    proc_7F07C888(afStack772,(float *)&ptr_BONDdata->positionx,extraout_f12_08);
    proc_7F03CB8C(*(char **)(iStack640 + 0x10),auStack804);
    proc_7F03E3FC((int *)auStack804);
    sVar1 = *ptr_list_object_lookup_indices;
    psStack812 = ptr_list_object_lookup_indices;
    while (-1 < sVar1) {
      iVar13 = (int)sVar1 * 0x34;
      pcVar12 = pos_data_entry + iVar13;
      if (pcVar12 != *(char **)(iStack640 + 0x10)) {
        if (*pcVar12 == '\x03') {
          iStack828 = 1;
          iStack844 = *(int *)(pos_data_entry + iVar13 + 4);
          proc_7F03CF88(pcVar12,&iStack824,&fStack816,&uStack820);
          pfVar10 = (float *)(pos_data_entry + iVar13 + 8);
          lVar3 = proc_7F03CCD8(pfVar10,afStack772,4);
          if (((lVar3 != 0) && (iStack828 = 0, *(char *)(iStack844 + 7) == '\x04')) &&
             (-1 < (int)(*(uint *)(iStack844 + 0x14) << 7))) {
            *(uint *)(iStack844 + 0x14) = *(uint *)(iStack844 + 0x14) | 0x1000000;
            iVar6 = dword_80048380 % 3;
            if (iVar6 < 2) {
              ppiVar7 = play_sfx_a1(ptr_sfx_buf,0xb7,NULL);
              proc_7F053A10((int)ppiVar7,pfVar10);
              iVar6 = dword_80048380 % 3;
            }
            if (0 < iVar6) {
              ppiVar7 = play_sfx_a1(ptr_sfx_buf,0xd5,NULL);
              proc_7F053A10((int)ppiVar7,pfVar10);
            }
          }
          if ((iStack828 != 0) &&
             (lVar3 = proc_7F044718((longlong)(int)pfVar10,(longlong)iStack824,afStack772,4),
             lVar3 != 0)) {
            iStack828 = 0;
          }
          if (iStack828 == 0) {
            uStack840 = *(undefined4 *)(iStack640 + 0x58);
            uStack836 = *(undefined4 *)(pos_data_entry + iVar13 + 0xc);
            uStack832 = *(undefined4 *)(iStack640 + 0x60);
            proc_7F027804();
          }
        }
        else {
          if (*pcVar12 == '\x01') {
            proc_7F03CCB0(pcVar12,(int **)apfStack852,&uStack856);
            if ((0 < (int)uStack856) &&
               (lVar3 = proc_7F0446B8(apfStack852[0],uStack856,afStack772,4), lVar3 != 0)) {
              get_cur_playernum();
              proc_7F04DEFC((int)pcVar12,extraout_f12_09,0x461c4000,
                            (longlong)(*(int *)(pos_data_entry + iVar13 + 4) + 0x58),0x20);
              dword_80036490 = 0x5a;
            }
          }
        }
      }
      psStack812 = psStack812 + 1;
      sVar1 = *psStack812;
    }
  }
  proc_7F080DF8();
  proc_7F081478();
  proc_7F08A19C();
  BVar8 = get_debug_man_pos_flag();
  if (BVar8 != FALSE) {
    copy_tile_RGB_as_24bit
              ((int *)ptr_BONDdata->ptr_tile_printmanpos,(int)ptr_BONDdata->positionx,
               ptr_BONDdata->positionz,&tStack860);
  }
  return;
}



void proc_7F086990(undefined8 param_1,undefined8 param_2,ushort param_3,ushort param_4)

{
  undefined8 extraout_a0;
  undefined8 extraout_a1;
  float afStack64 [3];
  int iStack52;
  float fStack48;
  undefined4 uStack44;
  float fStack40;
  float fStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  float fStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  float fStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  fStack12 = dword_80036800;
  uStack8 = dword_80036804;
  uStack4 = dword_80036808;
  fStack24 = dword_8003680C;
  uStack20 = dword_80036810;
  uStack16 = dword_80036814;
  fStack36 = dword_80036818;
  uStack32 = dword_8003681C;
  uStack28 = dword_80036820;
  fStack48 = dword_80036824;
  uStack44 = dword_80036828;
  fStack40 = dword_8003682C;
  proc_7F083FC8();
  proc_7F084360();
  controller_gameplay_interaction();
  proc_7F081790();
  proc_7F080B34(0.00000000,0.00000000,extraout_a0,extraout_a1,0.00000000);
  if ((DAT_80079990 != 0.00000000) || (DAT_80079998 != 0.00000000)) {
    fStack48 = fStack48 + DAT_80079990 * global_timer_delta;
    fStack40 = fStack40 + DAT_80079998 * global_timer_delta;
  }
  fStack48 = fStack48 +
             ((float)ptr_BONDdata->field_504 * (float)ptr_BONDdata->field_498 -
             (float)ptr_BONDdata->scaled_velocity * (float)ptr_BONDdata->field_4A0) *
             global_timer_delta;
  fStack40 = fStack40 +
             ((float)ptr_BONDdata->field_504 * (float)ptr_BONDdata->field_4A0 +
             (float)ptr_BONDdata->scaled_velocity * (float)ptr_BONDdata->field_498) *
             global_timer_delta;
  proc_7F07D960(&fStack48,1);
  proc_7F080DF8();
  proc_7F081478();
  if (((cameramode == FP_NOINPUT_CAM) || (cameramode == FP_CAM)) || (cameramode == UNK10_CAM)) {
    proc_7F079A50(0);
  }
  else {
    proc_7F07B56C();
    proc_7F079A50(1);
    proc_7F079A60(&fStack12,&fStack24,&fStack36,iStack52,afStack64);
  }
  return;
}



undefined8 proc_7F086BF8(void)

{
  if (camera_8003642C != 0) {
    return 0x1b8;
  }
  return 0x140;
}



undefined8 proc_7F086C1C(void)

{
  if (camera_8003642C != 0) {
    return 0x14a;
  }
  return 0xf0;
}



undefined8 get_curplayer_viewport_width(void)

{
  ulonglong uVar1;
  undefined8 uVar2;
  int iVar3;
  
  uVar1 = get_num_players();
  if ((longlong)uVar1 < 3) {
    if (camera_8003642C == 0) {
      iVar3 = cur_player_get_screen_setting();
      if (iVar3 == 1) {
        uVar2 = 0x140;
      }
      else {
        iVar3 = cur_player_get_screen_setting();
        if (iVar3 == 2) {
          uVar2 = 0x140;
        }
        else {
          uVar2 = 0x140;
        }
      }
    }
    else {
      uVar2 = 0x1b8;
    }
  }
  else {
    uVar2 = 0x9f;
  }
  return uVar2;
}



undefined8 get_curplayer_viewport_ulx(void)

{
  ulonglong uVar1;
  undefined8 uVar2;
  u32 uVar3;
  
  uVar1 = get_num_players();
  if ((longlong)uVar1 < 3) {
    uVar2 = 0;
  }
  else {
    uVar3 = get_cur_playernum();
    if ((uVar3 == 1) || (uVar3 = get_cur_playernum(), uVar3 == 3)) {
      uVar2 = 0xa1;
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



int get_curplayer_viewport_height(void)

{
  ulonglong uVar1;
  int iVar2;
  float fVar3;
  
  uVar1 = get_num_players();
  if ((longlong)uVar1 < 2) {
    if (camera_8003642C == 0) {
      iVar2 = cur_player_get_screen_setting();
      if (iVar2 == 1) {
        fVar3 = proc_7F07EA78();
        iVar2 = ((int)(fVar3 * 40.00000000) + 0xb4) * 0x10000 >> 0x10;
      }
      else {
        iVar2 = cur_player_get_screen_setting();
        if (iVar2 == 2) {
          fVar3 = proc_7F07EA78();
          iVar2 = ((int)(fVar3 * 84.00000000) + 0x88) * 0x10000 >> 0x10;
        }
        else {
          iVar2 = 0xdc;
        }
      }
    }
    else {
      iVar2 = cur_player_get_screen_setting();
      if (iVar2 == 1) {
        iVar2 = 0xf8;
      }
      else {
        iVar2 = cur_player_get_screen_setting();
        if (iVar2 == 2) {
          iVar2 = 0xbe;
        }
        else {
          iVar2 = 0x130;
        }
      }
    }
  }
  else {
    iVar2 = 0x6d;
  }
  return iVar2;
}



int get_curplayer_viewport_uly(void)

{
  ulonglong uVar1;
  u32 uVar2;
  int iVar3;
  float fVar4;
  
  uVar1 = get_num_players();
  if (uVar1 == 2) {
    uVar2 = get_cur_playernum();
    if (uVar2 == 0) {
      iVar3 = 10;
    }
    else {
      iVar3 = 0x79;
    }
  }
  else {
    uVar1 = get_num_players();
    if ((longlong)uVar1 < 3) {
      if (camera_8003642C == 0) {
        iVar3 = cur_player_get_screen_setting();
        if (iVar3 == 1) {
          fVar4 = proc_7F07EA78();
          iVar3 = ((int)(fVar4 * -20.00000000) + 0x1e) * 0x10000 >> 0x10;
        }
        else {
          iVar3 = cur_player_get_screen_setting();
          if (iVar3 == 2) {
            fVar4 = proc_7F07EA78();
            iVar3 = ((int)(fVar4 * -42.00000000) + 0x34) * 0x10000 >> 0x10;
          }
          else {
            iVar3 = 10;
          }
        }
      }
      else {
        iVar3 = cur_player_get_screen_setting();
        if (iVar3 == 1) {
          iVar3 = 0x29;
        }
        else {
          iVar3 = cur_player_get_screen_setting();
          if (iVar3 == 2) {
            iVar3 = 0x46;
          }
          else {
            iVar3 = 0xd;
          }
        }
      }
    }
    else {
      uVar2 = get_cur_playernum();
      if ((int)uVar2 < 2) {
        iVar3 = 10;
      }
      else {
        iVar3 = 0x79;
      }
    }
  }
  return iVar3;
}



// WARNING: Instruction at (ram,0x7f08735c) overlaps instruction at (ram,0x7f087358)
// 

void possibly_reset_viewport_options_for_player(char param_1,char param_2,ushort param_3)

{
  undefined1 *puVar4;
  int isset;
  undefined8 uVar1;
  undefined8 uVar2;
  undefined4 uVar5;
  ulonglong uVar3;
  u32 uVar6;
  uint flag;
  
  set_watch_menu_current_size_unused_maybe(60.00000000);
  video_related_1F(60.00000000);
  if (camera_80036430 == 0) {
    if (camera_80036434 != 0) {
      if ((camera_80036434 < 4) ||
         (puVar4 = (undefined1 *)get_video_settings2_frameb(), puVar4 != cfb_16_a)) {
        camera_80036434 += 1;
      }
      else {
        camera_8003642C = 0;
        camera_80036434 = 0;
      }
    }
  }
  else {
    if (((camera_80036430 < 4) || (resolution == 0)) ||
       (puVar4 = (undefined1 *)get_video_settings2_frameb(), puVar4 != cfb_16_b)) {
      camera_80036430 += 1;
    }
    else {
      camera_8003642C = 1;
      camera_80036430 = 0;
    }
  }
  if ((camera_8003642C != 0) &&
     (puVar4 = (undefined1 *)get_video_settings2_frameb(), puVar4 == cfb_16_b)) {
    set_video_settings2_frameb(resolution);
  }
  isset = get_screen_ratio();
  if (isset == 1) {
    uVar1 = get_curplayer_viewport_width();
    isset = get_curplayer_viewport_height();
    proc_7F09B224((f32)(((float)(int)(short)uVar1 / (float)isset) * 0.75000000 * flt_80055264));
    uVar1 = get_curplayer_viewport_width();
    isset = get_curplayer_viewport_height();
    video_related_21((f32)(((float)(int)(short)uVar1 / (float)isset) * 0.75000000 * flt_80055268));
  }
  else {
    uVar1 = get_curplayer_viewport_width();
    isset = get_curplayer_viewport_height();
    proc_7F09B224((f32)((float)(int)(short)uVar1 / (float)isset));
    uVar1 = get_curplayer_viewport_width();
    isset = get_curplayer_viewport_height();
    video_related_21((f32)((float)(int)(short)uVar1 / (float)isset));
  }
  uVar1 = get_curplayer_viewport_width();
  isset = get_curplayer_viewport_height();
  set_cur_player_screen_size((short)uVar1,(short)isset);
  uVar1 = get_curplayer_viewport_ulx();
  isset = get_curplayer_viewport_uly();
  set_cur_player_viewport_size((short)uVar1,(short)isset);
  uVar1 = proc_7F086BF8();
  uVar2 = proc_7F086C1C();
  set_video2_text_clip_size((short)uVar1,(short)uVar2);
  uVar1 = proc_7F086BF8();
  uVar2 = proc_7F086C1C();
  set_video2_settings_offset_18_1A((short)uVar1,(short)uVar2);
  uVar1 = get_curplayer_viewport_width();
  isset = get_curplayer_viewport_height();
  set_video2_width_height((short)uVar1,(short)isset);
  uVar1 = get_curplayer_viewport_ulx();
  isset = get_curplayer_viewport_uly();
  set_video2_ulx_uly((short)uVar1,(short)isset);
  proc_7F0808BC();
  proc_7F080A80();
  uVar5 = cur_player_get_autoaim();
  set_BONDdata_autoaim_y(uVar5);
  uVar5 = cur_player_get_autoaim();
  set_BONDdata_autoaim_x(uVar5);
  uVar5 = cur_player_get_lookahead();
  set_BONDdata_lookahead_setting(uVar5);
  isset = cur_player_get_ammo_onscreen_setting();
  set_unset_ammo_on_screen_setting(1,isset);
  uVar3 = get_num_players();
  if (uVar3 == 1) {
    isset = cur_player_get_sight_onscreen_control();
    flag = (uint)(isset != 0);
    if (isset != 0) goto LAB_7f087330;
  }
  uVar3 = get_num_players();
  uVar3 = (ulonglong)((longlong)uVar3 < 2) ^ 1;
  flag = (uint)uVar3;
  if (uVar3 != 0) {
    flag = (uint)(cur_player_stat_ptr->sight != '\0');
  }
LAB_7f087330:
  set_unset_bitflags(1,flag);
  if (((cameramode == 0) || ((cameramode == FP_CAM && (dword_800364B0 != 0)))) ||
     (cameramode == UNK10_CAM)) {
    uVar6 = get_cur_playernum();
    if (uVar6 == 0) {
      missiontime += clock_timer;
    }
    MoveBond(param_1,param_2,param_3,ptr_BONDdata->field_3B4);
  }
  else {
    proc_7F086990((longlong)param_1,(longlong)param_2,param_3,ptr_BONDdata->field_3B4);
  }
  watch_time += dword_80048498;
  if (stop_time_flag != 0) {
    isset = get_controls_locked_flag();
    if ((isset == 0) && ((param_3 & ~ptr_BONDdata->field_3B4 & 0xf030) != 0)) {
      stop_time_flag = 2;
      uVar3 = check_if_fade_to_black_complete();
      if (uVar3 == 0) {
        if ((float)ptr_BONDdata->field_404 == 0.00000000) {
          fade_to_over_seconds(ptr_BONDdata->field_3E0,1.00000000);
        }
      }
      else {
        if (ptr_BONDdata->tint_alpha == 0.00000000) {
          proc_7F0807B0(0,0,0,0);
          fade_to_over_seconds(60.00000000,1.00000000);
        }
      }
    }
    if (((stop_time_flag == 2) && (uVar3 = check_if_fade_to_black_complete(), uVar3 != 0)) &&
       (ptr_BONDdata->tint_alpha == 1.00000000)) {
      return_to_title_from_level_end();
    }
  }
  if (enable_move_after_cinema != 0) {
    proc_7F07B1A4();
  }
  if (ptr_BONDdata->player_button_control != 0) {
    isset = ptr_BONDdata->field_424;
    if (isset == 0) {
      draw_item_in_hand_has_more_ammo(1,ITEM_UNARMED);
      draw_item_in_hand_has_more_ammo(0,ITEM_UNARMED);
      isset = ptr_BONDdata->field_424;
    }
    if (((isset != 0) && (ptr_BONDdata->field_428 != 0)) && (2 < dword_80036510)) {
      run_title_stage();
    }
  }
  if ((cameramode == UNK10_CAM) && (uVar3 = check_if_fade_to_black_complete(), uVar3 != 0)) {
    run_title_stage();
  }
  ptr_BONDdata->field_3B4 = param_3;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0875E4(void)

{
  int in_a0_lo;
  f32 fVar1;
  
  proc_7F0BCA34(in_a0_lo,(float *)&ptr_BONDdata->current_model_xpos);
  fVar1 = proc_7F0B483C();
  *(float *)&ptr_BONDdata->current_room_xpos =
       (float)fVar1 * (float)ptr_BONDdata->current_model_xpos;
  fVar1 = proc_7F0B483C();
  *(float *)&ptr_BONDdata->current_room_ypos =
       (float)fVar1 * (float)ptr_BONDdata->current_model_ypos;
  fVar1 = proc_7F0B483C();
  *(float *)&ptr_BONDdata->current_room_zpos =
       (float)fVar1 * (float)ptr_BONDdata->current_model_zpos;
  proc_7F0BC624(in_a0_lo);
  return;
}



void store_BONDdata_curpos_to_previous(void)

{
  float *pfVar1;
  
  ptr_BONDdata->previous_model_xpos = ptr_BONDdata->current_model_xpos;
  ptr_BONDdata->previous_model_ypos = ptr_BONDdata->current_model_ypos;
  ptr_BONDdata->previous_model_zpos = ptr_BONDdata->current_model_zpos;
  pfVar1 = (float *)proc_7F0783C4();
  proc_7F0583D8(pfVar1,(float *)&ptr_BONDdata->previous_model_xpos);
  return;
}



void proc_7F0876C4(float *param_1,float *param_2,float *param_3)

{
  float *pfVar1;
  float *pfVar2;
  int iVar3;
  undefined8 extraout_a0;
  float *pfVar4;
  undefined4 unaff_s0_lo;
  undefined4 unaff_s1_lo;
  undefined4 unaff_s2_lo;
  undefined4 unaff_retaddr;
  f32 fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float extraout_f12;
  float xEye;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float yEye;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar11;
  float fVar12;
  undefined in_stack_fffffee4 [12];
  undefined8 in_stack_ffffff00;
  float afStack232 [16];
  float afStack168 [3];
  float fStack156;
  float fStack152;
  float fStack148;
  float fStack144;
  float fStack140;
  float fStack136;
  float afStack132 [16];
  LookAt *pLStack68;
  byte abStack64 [64];
  
  get_cur_players_room();
  pLStack68 = (LookAt *)proc_7F0875E4();
  proc_7F0BD6E0();
  *(LookAt **)&ptr_BONDdata->field_5C = pLStack68;
  proc_7F0BD6E0();
  *(LookAt **)&ptr_BONDdata->field_60 = pLStack68;
  proc_7F0BD6E0();
  *(LookAt **)&ptr_BONDdata->field_64 = pLStack68;
  proc_7F0BD6E0();
  *(LookAt **)&ptr_BONDdata->field_68 = pLStack68;
  proc_7F0BD6F8(2);
  fStack156 = (*param_1 - (float)ptr_BONDdata->current_model_xpos) * flt_800364CC;
  fStack152 = (param_1[1] - (float)ptr_BONDdata->current_model_ypos) * flt_800364CC;
  fStack148 = (param_1[2] - (float)ptr_BONDdata->current_model_zpos) * flt_800364CC;
  fStack144 = *param_2 + fStack156;
  fStack140 = param_2[1] + fStack152;
  fStack136 = param_2[2] + fStack148;
  proc_7F059424(afStack132,extraout_f12,extraout_f14,fStack156,fStack152,fStack148,*param_2,
                param_2[1],param_2[2],*param_3);
  fVar8 = param_3[2];
  guLookAtReflect((Mtx *)abStack64,pLStack68,xEye,yEye,fStack156,fStack152,fStack148,fStack144,
                  fStack140,fStack136,*param_3);
  pfVar1 = param_1;
  proc_7F059424((float *)ptr_BONDdata->field_64,extraout_f12_00,extraout_f14_00,*param_1,param_1[1],
                param_1[2],*param_2,param_2[1],param_2[2],*param_3);
  fVar11 = *param_2;
  fVar12 = param_2[1];
  fVar10 = param_2[2];
  fVar7 = *param_3;
  fVar6 = param_3[1];
  fVar9 = param_3[2];
  proc_7F059708((float *)ptr_BONDdata->field_68,extraout_f12_01,extraout_f14_01,*param_1,param_1[1],
                param_1[2],fVar11,fVar12,fVar10,fVar7);
  proc_7F0BD6E0();
  pfVar4 = (float *)proc_7F0783E4();
  proc_7F0580C8(pfVar4,afStack132,(int)(Mtx *)afStack232);
  pfVar4 = afStack232;
  do {
    iVar3 = 0;
    pfVar2 = pfVar4;
    do {
      iVar3 += 4;
      if (32000.00000000 < *pfVar2) {
        *pfVar2 = 32000.00000000;
      }
      else {
        if (*pfVar2 < -32000.00000000) {
          *pfVar2 = -32000.00000000;
        }
      }
      pfVar2 = pfVar2 + 1;
    } while (iVar3 != 0x10);
    pfVar4 = pfVar4 + 4;
  } while (pfVar4 != afStack168);
  guMtxF2L((float  [4] [4])
           CONCAT568(CONCAT524(CONCAT484(CONCAT444(CONCAT404(CONCAT2812(CONCAT244(CONCAT204(
                                                  CONCAT164(CONCAT124(CONCAT84(CONCAT44(fVar11,
                                                  fVar12),fVar10),fVar7),fVar6),fVar9),fVar8),
                                                  in_stack_fffffee4),unaff_s0_lo),unaff_s1_lo),
                                         unaff_s2_lo),unaff_retaddr),in_stack_ffffff00),
           (Mtx *)afStack232);
  proc_7F078384(pfVar1);
  fVar5 = proc_7F0B4878();
  matrix_multiply_A1_by_F12((float)fVar5,extraout_a0,afStack132);
  guMtxF2L((float  [4] [4])
           CONCAT568(CONCAT524(CONCAT484(CONCAT444(CONCAT404(CONCAT2812(CONCAT244(CONCAT204(
                                                  CONCAT164(CONCAT124(CONCAT84(CONCAT44(fVar11,
                                                  fVar12),fVar10),fVar7),fVar6),fVar9),fVar8),
                                                  in_stack_fffffee4),unaff_s0_lo),unaff_s1_lo),
                                         unaff_s2_lo),unaff_retaddr),in_stack_ffffff00),
           (Mtx *)afStack132);
  proc_7F059334((uint *)ptr_BONDdata->field_5C,ptr_BONDdata->field_60);
  proc_7F078344(ptr_BONDdata->field_5C);
  proc_7F078324(ptr_BONDdata->field_60);
  proc_7F0783A4(ptr_BONDdata->field_64);
  proc_7F078424(ptr_BONDdata->field_68);
  proc_7F078464(pLStack68);
  proc_7F0785DC();
  store_BONDdata_curpos_to_previous();
  return;
}



undefined4 proc_7F087A08(undefined4 param_1)

{
  float vector2;
  float fVar1;
  undefined4 auStack76 [3];
  float local_40;
  f32 local_3c;
  float local_38;
  float local_34;
  undefined4 local_30;
  undefined4 local_2c;
  int *local_28;
  f32 local_24;
  f32 local_20;
  f32 local_1c;
  float local_18;
  float local_14;
  float local_10;
  f32 local_c;
  f32 local_8;
  f32 local_4;
  
  if (ptr_BONDdata->unknown == 1) {
    local_c = ptr_BONDdata->xpos;
    local_8 = ptr_BONDdata->ypos;
    local_4 = ptr_BONDdata->zpos;
    local_18 = (float)ptr_BONDdata->xpos2 - (float)ptr_BONDdata->xpos;
    local_14 = (float)ptr_BONDdata->ypos2 - (float)ptr_BONDdata->ypos;
    local_10 = (float)ptr_BONDdata->zpos2 - (float)ptr_BONDdata->zpos;
    local_24 = ptr_BONDdata->xoffset;
    local_20 = ptr_BONDdata->yoffset;
    local_1c = ptr_BONDdata->zoffset;
  }
  else {
    local_28 = &ptr_BONDdata->ptr_tile_printmanpos;
    local_34 = dword_80036830;
    local_30 = dword_80036834;
    local_2c = dword_80036838;
    if (ptr_BONDdata->player_button_control == 0) {
      proc_7F09C7C4((float *)&ptr_BONDdata->field_4B4,(float *)&ptr_BONDdata->field_4C0,&local_34);
    }
    else {
      video_related_9(0.00000000);
    }
    local_c = (f32)local_28[0xb];
    local_8 = (f32)local_28[0xc];
    local_4 = (f32)local_28[0xd];
    local_18 = (float)local_28[0xe];
    local_14 = (float)local_28[0xf];
    local_10 = (float)local_28[0x10];
    local_24 = (f32)local_28[0x11];
    local_20 = (f32)local_28[0x12];
    local_1c = (f32)local_28[0x13];
  }
  proc_7F0876C4((float *)&local_c,&local_18,(float *)&local_24);
  proc_7F068190(auStack76,&local_40);
  vector2 = sqrtf(local_38 * local_38 + local_40 * local_40);
  fVar1 = get_curplay_vertical_rotation_in_degrees();
  vector2 = convert_angle_using_inverse(local_3c,(f32)vector2);
  vector2 = vector2 + fVar1;
  if (flt_8005526C <= vector2) {
    vector2 = vector2 - flt_80055270;
  }
  *(float *)&ptr_BONDdata->field_2A08 = vector2;
  vector2 = convert_angle_using_inverse((f32)-local_40,(f32)-local_38);
  if (flt_80055274 <= vector2) {
    vector2 = vector2 - flt_80055278;
  }
  *(float *)&ptr_BONDdata->field_2A0C = vector2;
  return param_1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void seems_to_load_cuff_microcode(void)

{
  u8 selectedbond;
  uint *puVar1;
  int objinst;
  ushort **ppuVar2;
  int in_a1_lo;
  int in_a2_lo;
  int iVar3;
  int iVar4;
  ushort *puVar5;
  
  selectedbond = getSelectedFolderBond();
  iVar3 = *(int *)(in_a1_lo + 8);
  iVar4 = in_a2_lo * 4;
  ppuVar2 = (ushort **)(iVar3 + iVar4);
  if (*ppuVar2 == NULL) {
    puVar5 = ppuVar2[1];
  }
  else {
    puVar1 = (uint *)extract_id_from_object_structure_microcode(objinst,*ppuVar2);
    *puVar1 = (uint)(ptr_BONDdata->cuff_value == 3);
    iVar3 = *(int *)(in_a1_lo + 8);
    ppuVar2 = (ushort **)(iVar3 + iVar4);
    puVar5 = ppuVar2[1];
  }
  if (puVar5 != NULL) {
    puVar1 = (uint *)extract_id_from_object_structure_microcode
                               (objinst,*(ushort **)(iVar3 + (in_a2_lo + 1) * 4));
    iVar3 = ptr_BONDdata->cuff_value;
    if (iVar3 == 1) {
      *puVar1 = (uint)(iVar3 == 1);
    }
    else {
      if (iVar3 == 6) {
        *puVar1 = (uint)(iVar3 == 6);
      }
      else {
        if (iVar3 == 7) {
          *puVar1 = (uint)(iVar3 == 7);
        }
        else {
          if (iVar3 == 8) {
            *puVar1 = (uint)(selectedbond != '\x01');
          }
          else {
            *puVar1 = (uint)(iVar3 == 8);
          }
        }
      }
    }
    iVar3 = *(int *)(in_a1_lo + 8);
    ppuVar2 = (ushort **)(iVar3 + iVar4);
  }
  if (ppuVar2[2] != NULL) {
    puVar1 = (uint *)extract_id_from_object_structure_microcode
                               (objinst,*(ushort **)(iVar3 + (in_a2_lo + 2) * 4));
    iVar3 = ptr_BONDdata->cuff_value;
    if (iVar3 == 5) {
      *puVar1 = (uint)(iVar3 == 5);
    }
    else {
      if (iVar3 == 8) {
        *puVar1 = (uint)(selectedbond == '\x01');
      }
      else {
        *puVar1 = (uint)(iVar3 == 8);
      }
    }
    iVar3 = *(int *)(in_a1_lo + 8);
    ppuVar2 = (ushort **)(iVar3 + iVar4);
  }
  if (ppuVar2[3] != NULL) {
    puVar1 = (uint *)extract_id_from_object_structure_microcode
                               (objinst,*(ushort **)(iVar3 + (in_a2_lo + 3) * 4));
    *puVar1 = (uint)(ptr_BONDdata->cuff_value == 0);
    iVar3 = *(int *)(in_a1_lo + 8);
    ppuVar2 = (ushort **)(iVar3 + iVar4);
  }
  if (ppuVar2[4] != NULL) {
    puVar1 = (uint *)extract_id_from_object_structure_microcode
                               (objinst,*(ushort **)(iVar3 + (in_a2_lo + 4) * 4));
    *puVar1 = (uint)(ptr_BONDdata->cuff_value == 2);
    iVar3 = *(int *)(in_a1_lo + 8);
    ppuVar2 = (ushort **)(iVar3 + iVar4);
  }
  if (ppuVar2[5] != NULL) {
    puVar1 = (uint *)extract_id_from_object_structure_microcode
                               (objinst,*(ushort **)(iVar3 + (in_a2_lo + 5) * 4));
    *puVar1 = (uint)(ptr_BONDdata->cuff_value == 4);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f088514) overlaps instruction at (ram,0x7f088510)
// 

undefined4 * proc_7F087E74(undefined4 *param_1)

{
  int *piVar1;
  int iVar2;
  undefined4 *puVar3;
  BONDdata *pBVar5;
  longlong lVar4;
  undefined8 extraout_a0;
  undefined4 extraout_a2_lo;
  float *pfVar6;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  float **ppfVar7;
  float **ppfVar8;
  float **ppfVar9;
  float **ppfVar10;
  float *pfVar11;
  float fVar12;
  float fovy;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float aspect;
  undefined4 *local_res0;
  float afStack428 [16];
  int *local_16c;
  int local_168;
  float *local_160;
  float local_15c;
  float local_144;
  float local_140;
  float local_13c;
  float afStack312 [4];
  float afStack296 [4];
  float afStack280 [4];
  float afStack264 [3];
  float afStack252 [3];
  float afStack240 [18];
  ushort local_a6;
  Mtx *local_a4;
  Mtx *local_a0;
  Gitemheader *local_98;
  float *local_94;
  float *local_90;
  float local_8c;
  float local_88;
  float local_84;
  float afStack128 [16];
  float *local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 *local_34;
  float *local_30;
  undefined4 local_10;
  uint local_c;
  
  local_res0 = param_1;
  if (ptr_BONDdata->pause_animation_state != 0) {
    ppfVar9 = (float **)&dword_8003683C;
    ppfVar7 = &local_40;
    local_res0 = param_1;
    if (ptr_BONDdata->pausing_flag != 0) {
      do {
        ppfVar10 = ppfVar9 + 3;
        ppfVar8 = ppfVar7 + 3;
        *ppfVar7 = *ppfVar9;
        ppfVar7[1] = ppfVar9[1];
        ppfVar7[2] = ppfVar9[2];
        ppfVar9 = ppfVar10;
        ppfVar7 = ppfVar8;
      } while (ppfVar10 != (float **)0x80036878);
      *ppfVar8 = pfRam80036878;
      local_8c = DAT_8003687c;
      local_88 = (float)DAT_80036880;
      local_84 = (float)DAT_80036884;
      local_98 = get_ptr_itemheader_in_hand(1);
      local_a4 = (Mtx *)extract_id_from_object_structure_microcode
                                  ((int)&ptr_BONDdata->something_with_watch_object_instance,
                                   *(ushort **)(local_98->offset_objblock + 0xc));
      local_a0 = local_a4;
      proc_7F0BD6E0();
      guPerspective(local_a4,&local_a6,fovy,aspect,ptr_BONDdata->watch_menu_current_size,1.45454550,
                    10.00000000);
      *param_1 = 0x1030040;
      *(Mtx **)(param_1 + 1) = local_a4 + -0x2000000;
      param_1[2] = 0xbc00000e;
      param_1[3] = (uint)local_a6;
      local_34 = param_1 + 4;
      *(int *)*local_a0 = ptr_BONDdata->paused_flag;
      local_8c = (float)ptr_BONDdata->field_498 * ((float)ptr_BONDdata->field_54C + -12.00000000) +
                 (float)ptr_BONDdata->positionx +
                 (float)ptr_BONDdata->field_544 * -(float)ptr_BONDdata->field_4A0;
      local_88 = (float)ptr_BONDdata->field_548 + (float)ptr_BONDdata->positiony;
      local_84 = (float)ptr_BONDdata->field_4A0 * ((float)ptr_BONDdata->field_54C + -12.00000000) +
                 (float)ptr_BONDdata->positionz +
                 (float)ptr_BONDdata->field_544 * (float)ptr_BONDdata->field_498;
      proc_7F0584D0(&local_8c,extraout_f12,
                    (float *)((360.00000000 - ptr_BONDdata->azimuth_angle) * flt_8005527C));
      local_94 = (float *)proc_7F0783C4();
      proc_7F058098(local_94,afStack128);
      proc_7F0BD714((int)local_98->num_objgroups << 6);
      seems_to_load_cuff_microcode();
      local_40 = afStack128;
      local_30 = local_94;
      subcalcmatrices(&local_40,(uint)&ptr_BONDdata->something_with_watch_object_instance,
                      extraout_a2_lo,extraout_a3_lo);
      local_90 = (float *)0x3f800000;
      pfVar11 = *(float **)(*(int *)local_98->offset_objblock + 4);
      local_168 = watch_time;
      pfVar6 = (float *)((float)ptr_BONDdata->field_258 / 20.00000000);
      if (1.00000000 < (float)pfVar6) {
        fVar12 = *pfVar11;
      }
      else {
        fVar12 = *pfVar11;
        local_90 = pfVar6;
      }
      local_144 = (((float)ptr_BONDdata->field_1D4 -
                   fVar12 * (float)ptr_BONDdata->watch_scale_destination) - local_94[0xc]) *
                  (float)local_90 + local_94[0xc];
      local_140 = (((float)ptr_BONDdata->field_1D8 +
                   pfVar11[2] * (float)ptr_BONDdata->watch_scale_destination) - local_94[0xd]) *
                  (float)local_90 + local_94[0xd];
      fVar12 = local_94[0xe];
      local_13c = (((float)ptr_BONDdata->pause_watch_position -
                   pfVar11[1] * (float)ptr_BONDdata->watch_scale_destination) - fVar12) *
                  (float)local_90 + fVar12;
      proc_7F059908(afStack240,fVar12,(float)local_90,0.00000000,0.00000000,0.00000000,
                    (float)ptr_BONDdata->field_1E0,(float)ptr_BONDdata->field_1E4,
                    (float)ptr_BONDdata->field_1E8,(float)ptr_BONDdata->field_1EC);
      proc_7F058860(local_94,afStack252);
      proc_7F058860(afStack240,afStack264);
      proc_7F05B3F4(afStack252,afStack280);
      proc_7F05B3F4(afStack264,afStack296);
      proc_7F05BE10(afStack280,afStack296);
      proc_7F05BA08(afStack280,afStack296,extraout_f12_00,local_90);
      proc_7F05B628(afStack312,local_94);
      proc_7F058998(&local_144,(int)local_94);
      matrix_multiply_A1_by_F12((float)ptr_BONDdata->watch_scale_destination,extraout_a0,local_94);
      iVar2 = local_168 / 0x3c;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (local_168 == -0x80000000)) {
        trap(0x1800);
      }
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
      local_15c = (-((float)(iVar2 % 0x3c) + (float)(local_168 % 0x3c) / 60.00000000) * flt_80055280
                  ) / 60.00000000;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar2 / 0x3c == -0x80000000)) {
        trap(0x1800);
      }
      local_160 = (float *)((-(float)((iVar2 / 0x3c) % 0x3c) * flt_80055280) / 60.00000000 +
                           local_15c / 60.00000000);
      pfVar11 = (float *)((-(float)((iVar2 / 0xe10) % 0xc) * flt_80055280) / 12.00000000 +
                          (float)local_160 / 12.00000000 + local_15c / 720.00000000);
      while (local_15c < 0.00000000) {
        local_15c = local_15c + flt_80055280;
      }
      while ((float)local_160 < 0.00000000) {
        local_160 = (float *)((float)local_160 + flt_80055280);
      }
      if ((float)pfVar11 < 0.00000000) {
        do {
          pfVar11 = (float *)((float)pfVar11 + flt_80055280);
        } while ((float)pfVar11 < 0.00000000);
        piVar1 = (int *)local_98->offset_objblock;
      }
      else {
        piVar1 = (int *)local_98->offset_objblock;
      }
      pfVar6 = local_94 + 0x10;
      proc_7F0584D0(*(float **)(*piVar1 + 4),local_15c,pfVar11);
      proc_7F058068(local_94,pfVar6);
      pfVar11 = local_94 + 0x20;
      proc_7F0584D0(*(float **)(*(int *)(local_98->offset_objblock + 4) + 4),extraout_f12_01,
                    local_160);
      proc_7F058068(local_94,pfVar11);
      pfVar11 = local_94 + 0x30;
      proc_7F0584D0(*(float **)(*(int *)(local_98->offset_objblock + 8) + 4),local_15c,
                    (float *)local_15c);
      proc_7F058068(local_94,pfVar11);
      local_38 = 3;
      local_3c = 0;
      local_10 = 4;
      if ((ptr_BONDdata->pause_animation_state == 5) || (ptr_BONDdata->pause_animation_state == 0xc)
         ) {
        local_c = 0xcd;
      }
      else {
        local_c = (uint)(byte)ptr_BONDdata->field_FDF | (uint)(byte)ptr_BONDdata->field_FDC << 0x18
                  | (uint)(byte)ptr_BONDdata->field_FDD << 0x10 |
                  (uint)(byte)ptr_BONDdata->field_FDE << 8;
      }
      pBVar5 = ptr_BONDdata;
      subdraw((int)&local_40,(uint)&ptr_BONDdata->something_with_watch_object_instance,
              extraout_a2_lo_00,extraout_a3_lo_00);
      puVar3 = local_34;
      local_16c = *(int **)(*(int *)(local_98->offset_objblock + 8) + 4);
      proc_7F0BD6E0();
      init_something_copy_posdata_to_it(local_16c,(int *)afStack428);
      proc_7F058068(local_94,afStack428);
      proc_7F058C64();
      proc_7F058C9C((int)afStack428,(uint *)pBVar5);
      proc_7F058C88();
      lVar4 = proc_7F0ACA28((longlong)(int)puVar3,(int)pBVar5,
                            (uint)(ptr_BONDdata->pause_animation_state == 5 ||
                                  ptr_BONDdata->pause_animation_state == 0xc));
      local_res0 = (undefined4 *)lVar4;
      proc_7F058C64();
      proc_7F08BD48((undefined4 *)ptr_BONDdata->field_23C,(int)local_98->num_objgroups);
      proc_7F058C88();
    }
  }
  return local_res0;
}



undefined4 * proc_7F088618(undefined4 *param_1)

{
  u32 uVar1;
  void *virtualAddress;
  float in_f12;
  float extraout_f12;
  float l;
  float extraout_f12_00;
  float r;
  float extraout_f14;
  float afStack72 [16];
  Mtx *pabStack8;
  Mtx *pabStack4;
  
  proc_7F0A2F30((short *)&ptr_BONDdata->related_to_armor_display,0x2e,1,in_f12);
  proc_7F0A3330(&ptr_BONDdata->field_19F8,(int)&ptr_BONDdata[0x30303].field_1338,0x2e);
  proc_7F0A2F30((short *)&ptr_BONDdata->related_to_health_display,0x2e,-1,extraout_f12);
  pabStack8 = (Mtx *)proc_7F0A3330(&ptr_BONDdata->field_2128,(int)&ptr_BONDdata[0x30303].field_1618,
                                   0x2e);
  proc_7F0BD6E0();
  pabStack4 = pabStack8;
  proc_7F0BD6E0();
  guOrtho(pabStack8,l,r,flt_800364CC * -800.00000000,flt_800364CC * 800.00000000,
          flt_800364CC * -600.00000000,flt_800364CC * 600.00000000,-100.00000000);
  *param_1 = 0x1030040;
  uVar1 = osVirtualToPhysical(pabStack8);
  param_1[1] = uVar1;
  proc_7F059694(afStack72,extraout_f12_00,extraout_f14,0.00000000,500.00000000,0.00000000,0.00000000
                ,0.00000000,0.00000000,0.00000000);
  proc_7F058C9C((int)afStack72,(uint *)pabStack4);
  param_1[2] = 0x1020040;
  uVar1 = osVirtualToPhysical(pabStack4);
  param_1[3] = uVar1;
  param_1[4] = 0xe7000000;
  param_1[5] = 0;
  param_1[6] = 0xba001402;
  param_1[7] = 0;
  param_1[8] = 0xb900031d;
  param_1[9] = 0x5041c8;
  param_1[10] = 0xb9000002;
  param_1[0xb] = 0;
  param_1[0xc] = 0xfcffffff;
  param_1[0xd] = 0xfffe793c;
  param_1[0xe] = 0xfa000000;
  param_1[0xf] = 0xe6e6e600;
  param_1[0x10] = 0xb6000000;
  param_1[0x11] = 0x3000;
  param_1[0x12] = 0x6000000;
  *(int **)(param_1 + 0x13) = &ptr_BONDdata[0x30303].field_1A78;
  param_1[0x14] = 0x6000000;
  *(int **)(param_1 + 0x15) = &ptr_BONDdata[0x30303].field_21A8;
  param_1[0x16] = 0x1030040;
  virtualAddress = (void *)proc_7F078374();
  uVar1 = osVirtualToPhysical(virtualAddress);
  param_1[0x17] = uVar1;
  return param_1 + 0x18;
}



void proc_7F0888E8(void)

{
  int *tile;
  ulonglong uVar1;
  uint uVar2;
  u32 uVar3;
  int iVar4;
  int iVar5;
  uint *puVar6;
  float fVar7;
  float __x;
  int iStack12;
  float fStack8;
  int iStack4;
  
  puVar6 = (uint *)ptr_setup_intro;
  iStack12 = DAT_8003688c;
  fStack8 = (float)DAT_80036890;
  iStack4 = DAT_80036894;
  init_player_BONDdata();
  proc_7F0798B8();
  ptr_BONDdata->player_button_control = 0;
  ptr_BONDdata->field_428 = 0;
  ptr_BONDdata->field_424 = 0;
  ptr_BONDdata->field_420 = 1;
  ptr_BONDdata->field_29B8 = 7;
  ptr_BONDdata->field_29D4 = 7;
  ptr_BONDdata->somekinda_flags = 0;
  ptr_BONDdata->somekinda_bitflags = 2;
  proc_7F08A380(0xffffffff);
  proc_7F08A928(0xffffffff);
  uVar1 = get_num_players();
  if ((longlong)uVar1 < 2) {
    uVar2 = 0;
  }
  else {
    if (DAT_80079c68 < 1) {
      uVar2 = 0;
    }
    else {
      uVar2 = proc_7F0790F0();
    }
  }
  tile = (int *)(&DAT_80079c28)[uVar2];
  iStack12 = *tile;
  iStack4 = tile[2];
  tile = (int *)tile[10];
  fVar7 = proc_7F080D60((longlong)(int)tile,iStack12,iStack4);
  fStack8 = (float)ptr_BONDdata->field_29BC + fVar7;
  *(float *)&ptr_BONDdata->field_70 = fVar7;
  uVar3 = get_random_value();
  __x = (float)uVar3;
  if ((int)uVar3 < 0) {
    __x = __x + 4294967296.00000000;
  }
  __x = __x * 0.00000000 * flt_80055284;
  ptr_BONDdata->azimuth_angle = (__x * 360.00000000) / flt_80055284;
  *(float *)&ptr_BONDdata->clipping_height = fVar7;
  *(float *)&ptr_BONDdata->field_6C = fVar7 / flt_80055288;
  change_player_pos_to_target(&ptr_BONDdata->ptr_tile_printmanpos,&iStack12,tile);
  fVar7 = sinf(__x);
  *(float *)&ptr_BONDdata->field_498 = -fVar7;
  ptr_BONDdata->field_49C = 0;
  __x = cosf(__x);
  fVar7 = flt_8005528C;
  *(float *)&ptr_BONDdata->field_4A0 = __x;
  ptr_BONDdata->field_408 = iStack12;
  *(int *)(ptr_BONDdata->position_data_pointer + 8) = iStack12;
  *(float *)&ptr_BONDdata->field_40C = fStack8;
  *(float *)(ptr_BONDdata->position_data_pointer + 0xc) = fStack8;
  ptr_BONDdata->field_410 = iStack4;
  *(int *)(ptr_BONDdata->position_data_pointer + 0x10) = iStack4;
  *(int **)(ptr_BONDdata->position_data_pointer + 0x14) = tile;
  *(float *)&ptr_BONDdata->field_3B8 = (float)ptr_BONDdata->field_4B4 / fVar7;
  *(float *)&ptr_BONDdata->field_3BC = (float)ptr_BONDdata->field_4B8 / fVar7;
  *(float *)&ptr_BONDdata->field_3C0 = (float)ptr_BONDdata->field_4BC / fVar7;
  reinit_BONDdata_inventory();
  ptr_BONDdata->ammo_totals[0] = 0;
  ptr_BONDdata->ammo_totals[1] = 0;
  iVar4 = 8;
  do {
    *(undefined4 *)((int)ptr_BONDdata->ammo_totals + iVar4) = 0;
    *(undefined4 *)((int)ptr_BONDdata->ammo_totals + iVar4 + 4) = 0;
    *(undefined4 *)((int)ptr_BONDdata->ammo_totals + iVar4 + 8) = 0;
    iVar5 = iVar4 + 0x10;
    *(undefined4 *)((int)ptr_BONDdata->ammo_totals + iVar4 + 0xc) = 0;
    iVar4 = iVar5;
  } while (iVar5 != 0x78);
  if (puVar6 != NULL) {
    uVar2 = *puVar6;
    while (uVar2 != 9) {
      if (uVar2 < 7) {
                    // WARNING: Could not recover jumptable at 0x7f088be0. Too many branches
                    // WARNING: Treating indirect jump as call
        (*(code *)(&jpt_700BCB10)[uVar2])();
        return;
      }
      puVar6 = puVar6 + 1;
      uVar2 = *puVar6;
    }
  }
  ptr_BONDdata->field_78 = 0.00000000;
  *(float *)&ptr_BONDdata->field_7C = flt_800552AC;
  ptr_BONDdata->field_80 = 0.00000000;
  set_curplayer_fade(120.00000000,1.00000000);
  return;
}



undefined4 * proc_7F088CD8(undefined4 *param_1)

{
  u16 uVar1;
  short *psVar2;
  short sVar3;
  int iVar4;
  LEVELID LVar5;
  uint *DL;
  short sVar7;
  u16 id;
  byte *pbVar6;
  short sVar8;
  short sVar9;
  undefined4 *DL_00;
  int iVar12;
  longlong lVar10;
  longlong lVar11;
  u16 *puVar13;
  int iVar14;
  int iVar15;
  longlong lVar16;
  longlong lVar17;
  int iStack40;
  int iStack32;
  int aiStack28 [3];
  int iStack16;
  int aiStack12 [2];
  int iStack4;
  
  LVar5 = get_stage_num();
  if (((LVar5 == LEVELID_CUBA) && (dword_8003643C == 1)) && (lVar16 = 0xdc, dword_80036440 != NULL))
  {
    lVar17 = 0xdc;
    sVar8 = 0;
    camera_80036438 += 1;
    sVar3 = 0;
    iStack4 = camera_80036438;
    DL = microcode_constructor(param_1);
    sVar7 = get_video2_settings_height();
    iVar12 = iStack4 - (int)sVar7;
    if (iVar12 < 0) {
      iVar12 += 0xf;
    }
    iVar12 >>= 4;
    iVar4 = iStack4;
    if (iStack4 < 0) {
      iVar4 = iStack4 + 0xf;
    }
    iStack40 = (iVar4 >> 4) + 1;
    if (iVar12 < 0) {
      iVar12 = 0;
    }
    iVar4 = 0;
    lVar10 = lVar16;
    lVar11 = lVar17;
    psVar2 = dword_80036440;
    sVar7 = sVar8;
    if (0 < iVar12) {
      do {
        if ((*psVar2 == 0) && (psVar2[1] == 0)) {
          dword_8003643C = 2;
          lVar10 = lVar16;
          lVar11 = lVar17;
          iVar12 = iVar4;
          iStack40 = iVar4;
          sVar7 = sVar8;
          break;
        }
        lVar10 = lVar16;
        sVar7 = sVar8;
        if (*psVar2 != 0x5011) {
          lVar10 = (longlong)psVar2[2];
          if (lVar10 < 0) {
            sVar7 = psVar2[3];
            lVar10 = lVar16;
          }
          else {
            sVar7 = psVar2[3];
          }
          if (sVar7 < 0) {
            sVar7 = sVar8;
          }
        }
        iVar4 += 1;
        lVar11 = lVar17;
        if (psVar2[1] != 0x5011) {
          lVar11 = (longlong)psVar2[4];
          if (lVar11 < 0) {
            sVar8 = psVar2[5];
            lVar11 = lVar17;
          }
          else {
            sVar8 = psVar2[5];
          }
          if (-1 < sVar8) {
            sVar3 = sVar8;
          }
        }
        lVar16 = lVar10;
        lVar17 = lVar11;
        psVar2 = psVar2 + 6;
        sVar8 = sVar7;
      } while (iVar4 != iVar12);
    }
    if (iVar12 < iStack40) {
      iVar4 = iVar12 * 0xc;
      puVar13 = (u16 *)(dword_80036440 + iVar12 * 6);
      id = *puVar13;
      lVar16 = lVar10;
      lVar17 = lVar11;
      if (id != 0) goto LAB_7f088e98;
      uVar1 = dword_80036440[iVar12 * 6 + 1];
      while (lVar16 = lVar10, lVar17 = lVar11, uVar1 != 0) {
LAB_7f088e98:
        do {
          lVar10 = lVar16;
          if (id != 0x5011) {
            pbVar6 = get_textptr_for_textID(id);
            iVar14 = (int)dword_80036440 + iVar4;
            lVar10 = (longlong)*(short *)(iVar14 + 4);
            if (lVar10 < 0) {
              sVar8 = *(short *)(iVar14 + 6);
              lVar10 = lVar16;
            }
            else {
              sVar8 = *(short *)(iVar14 + 6);
            }
            iVar14 = (int)lVar10;
            if (-1 < sVar8) {
              sVar7 = sVar8;
            }
            sVar8 = get_video2_settings_height();
            sVar9 = get_video2_settings_uly();
            iStack16 = (((int)sVar9 + iVar12 * 0x10) - iStack4) + (int)sVar8;
            aiStack28[0] = 0;
            iStack32 = 0;
            proc_7F0AE98C(aiStack28,&iStack32,pbVar6,(int)ptrSecondFontTable,
                          (int *)ptrFirstFontTable,0);
            if (sVar7 == 1) {
              lVar16 = (longlong)(iVar14 - iStack32);
            }
            else {
              if (sVar7 == 2) {
                iVar15 = iVar14 - (iStack32 >> 1);
                iVar14 = iVar15 + iStack32;
                lVar16 = (longlong)iVar15;
              }
              else {
                iVar14 += iStack32;
                lVar16 = lVar10;
              }
            }
            aiStack12[0] = (int)lVar16;
            DL_00 = microcode_constructor_related_to_menus
                              (DL,lVar16,(longlong)(iStack16 + -1),(longlong)(iVar14 + 1),
                               iStack16 + aiStack28[0] + 1,0);
            sVar8 = get_video2_settings_txtClipW();
            sVar9 = get_video2_settings_txtClipH();
            DL = en_text_write_stuff(DL_00,aiStack12,&iStack16,pbVar6,(int)ptrSecondFontTable,
                                     (int)ptrFirstFontTable,0xffffffff,(int)sVar8,(int)sVar9,0,0);
            puVar13 = (u16 *)((int)dword_80036440 + iVar4);
          }
          lVar11 = lVar17;
          if (puVar13[1] != 0x5011) {
            pbVar6 = get_textptr_for_textID(puVar13[1]);
            iVar14 = (int)dword_80036440 + iVar4;
            lVar11 = (longlong)*(short *)(iVar14 + 8);
            if (lVar11 < 0) {
              sVar8 = *(short *)(iVar14 + 10);
              lVar11 = lVar17;
            }
            else {
              sVar8 = *(short *)(iVar14 + 10);
            }
            iVar14 = (int)lVar11;
            if (-1 < sVar8) {
              sVar3 = sVar8;
            }
            sVar8 = get_video2_settings_height();
            sVar9 = get_video2_settings_uly();
            iStack16 = (((int)sVar9 + iVar12 * 0x10) - iStack4) + (int)sVar8;
            aiStack28[0] = 0;
            iStack32 = 0;
            proc_7F0AE98C(aiStack28,&iStack32,pbVar6,(int)ptrSecondFontTable,
                          (int *)ptrFirstFontTable,0);
            if (sVar3 == 1) {
              lVar16 = (longlong)(iVar14 - iStack32);
            }
            else {
              if (sVar3 == 2) {
                iVar15 = iVar14 - (iStack32 >> 1);
                iVar14 = iVar15 + iStack32;
                lVar16 = (longlong)iVar15;
              }
              else {
                iVar14 += iStack32;
                lVar16 = lVar11;
              }
            }
            aiStack12[0] = (int)lVar16;
            DL_00 = microcode_constructor_related_to_menus
                              (DL,lVar16,(longlong)(iStack16 + -1),(longlong)(iVar14 + 1),
                               iStack16 + aiStack28[0] + 1,0);
            sVar8 = get_video2_settings_txtClipW();
            sVar9 = get_video2_settings_txtClipH();
            DL = en_text_write_stuff(DL_00,aiStack12,&iStack16,pbVar6,(int)ptrSecondFontTable,
                                     (int)ptrFirstFontTable,0xffffffff,(int)sVar8,(int)sVar9,0,0);
          }
          iVar12 += 1;
          iVar4 += 0xc;
          if (iStack40 <= iVar12) goto LAB_7f0891c8;
          puVar13 = (u16 *)((int)dword_80036440 + iVar4);
          id = *puVar13;
          lVar16 = lVar10;
          lVar17 = lVar11;
        } while (id != 0);
        uVar1 = puVar13[1];
      }
    }
LAB_7f0891c8:
    param_1 = combiner_bayer_lod_perspective(DL);
  }
  return param_1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * maybe_mp_interface(void)

{
  int *piVar1;
  undefined4 *puVar3;
  short sVar7;
  short sVar8;
  short sVar9;
  short sVar10;
  short sVar11;
  short sVar12;
  ulonglong uVar2;
  s16 sVar13;
  int iVar4;
  u32 uVar5;
  int *piVar6;
  longlong lVar14;
  undefined4 *in_a0_lo;
  undefined4 extraout_a0_lo;
  int iVar15;
  undefined unaff_retaddr;
  float local_34;
  float fVar16;
  undefined4 *local_res0;
  undefined in_stack_ffffffbf;
  undefined in_stack_ffffffc3;
  undefined in_stack_ffffffcb;
  undefined4 in_stack_ffffffd0;
  
  if (ptr_BONDdata->unknown == 1) {
    local_res0 = in_a0_lo;
    proc_7F08A4E4();
    local_res0 = proc_7F08A5FC(local_res0);
    proc_7F08A9F8();
    local_res0 = (undefined4 *)proc_7F08AAE8();
    local_res0 = proc_7F056210(local_res0);
    local_res0 = proc_7F0804E0(local_res0);
    puVar3 = proc_7F088CD8(local_res0);
  }
  else {
    local_res0 = in_a0_lo;
    proc_7F061920();
    proc_7F06908C((undefined4 *)register0x000000ec);
    proc_7F062BE4((undefined4 *)register0x000000ec);
    local_res0 = proc_7F087E74(local_res0);
    if (ptr_BONDdata->in_mp_pause_menu != 0) {
      sVar7 = get_video2_settings_ulx();
      sVar8 = get_video2_settings_uly();
      sVar9 = get_video2_settings_ulx();
      sVar10 = get_video2_settings_width();
      sVar11 = get_video2_settings_uly();
      sVar12 = get_video2_settings_height();
      local_res0 = microcode_constructor(local_res0);
      in_stack_ffffffbf = 0xa0;
      local_res0 = microcode_constructor_related_to_menus
                             (local_res0,(longlong)(int)sVar7,(longlong)(int)sVar8,
                              (longlong)((int)sVar10 + (int)sVar9),(int)sVar12 + (int)sVar11,0xa0);
    }
    uVar2 = check_if_healthbar_timer_greater_than_0();
    if ((uVar2 == 0) || (ptr_BONDdata->pause_animation_state != 0)) {
      uVar2 = proc_7F0C6048();
      if (uVar2 != 0) {
        local_res0 = proc_7F088618(local_res0);
        iVar4 = ptr_BONDdata->how_long_to_show_health;
        if (0 < iVar4) {
          ptr_BONDdata->how_long_to_show_health = iVar4 - clock_timer;
          iVar4 = ptr_BONDdata->how_long_to_show_health;
        }
        if (iVar4 < 0) {
          ptr_BONDdata->how_long_to_show_health = 0;
        }
      }
    }
    else {
      local_res0 = proc_7F088618(local_res0);
    }
    uVar2 = get_num_players();
    if (uVar2 == 1) {
      display_objective_status_text_on_status_change();
    }
    if (ptr_BONDdata->player_button_control != 0) {
      if (ptr_BONDdata->field_428 == 0) {
        if (ptr_BONDdata->player_button_control == 1) {
          ptr_BONDdata->player_button_control = 2;
          die_blood_image_routine(0);
          uVar2 = get_num_players();
          sVar13 = (s16)uVar2;
          if (uVar2 == 1) {
            reset_music_in_slot(0xffffffff);
            set_missionstate(0);
            proc_7F0C0BF0();
            musicTrack1Vol(sVar13);
            music1_playing = 0;
            music_related_2nd_block_1(0);
            music2_playing = FALSE;
            musicTrack1Play(M_DEATHSOLO);
          }
          else {
            set_missionstate(6);
          }
        }
        else {
          if (ptr_BONDdata->field_424 == 0) {
            iVar4 = 2;
            if (0 < clock_timer) {
              iVar4 = 1;
            }
            uVar2 = die_blood_image_routine(iVar4);
            if (uVar2 != 0) {
              ptr_BONDdata->field_424 = 1;
            }
            local_res0 = proc_7F01C670(local_res0);
          }
          else {
            proc_7F0807B0(0x96,0,0,0x3f34b4b5);
          }
        }
      }
      proc_7F06F5BC((int)&ptr_BONDdata->field_598);
      fVar16 = proc_7F06F5C4((int)&ptr_BONDdata->field_598);
      if ((fVar16 <= local_34) && (ptr_BONDdata->field_424 != 0)) {
        if (ptr_BONDdata->field_428 == 0) {
          ptr_BONDdata->field_428 = 1;
          proc_7F0807E0(extraout_a0_lo,0,0,0,0x3f800000,in_stack_ffffffbf,in_stack_ffffffc3,
                        unaff_retaddr,in_stack_ffffffcb,SUB41(local_34,0),in_stack_ffffffd0);
          set_curplayer_fade(120.00000000,0.00000000);
        }
        uVar2 = check_if_fade_to_black_complete();
        if (uVar2 != 0) {
          uVar2 = get_num_players();
          if (uVar2 == 1) {
            set_camera_mode(5);
          }
          else {
            iVar4 = get_scenario();
            uVar5 = get_cur_playernum();
            uVar2 = get_num_players();
            iVar15 = 0;
            lVar14 = 0;
            if (0 < (longlong)uVar2) {
              piVar6 = &player1_playerdata.shots_fired + uVar5;
              do {
                piVar1 = piVar6 + 9;
                lVar14 = (longlong)((int)lVar14 + 1);
                piVar6 = piVar6 + 0x1c;
                iVar15 += *piVar1;
              } while (lVar14 < (longlong)uVar2);
            }
            if ((iVar4 != 1) || (iVar15 < 2)) {
              uVar5 = get_cur_playernum();
              uVar2 = get_controller_buttons_held((char)uVar5,START_BUTTON|Z_TRIG|A_BUTTON);
              if (uVar2 != 0) {
                proc_7F0888E8();
              }
            }
          }
        }
      }
    }
    proc_7F08A4E4();
    local_res0 = proc_7F08A5FC(local_res0);
    proc_7F08A9F8();
    local_res0 = (undefined4 *)proc_7F08AAE8();
    proc_7F06A5E4((uint **)register0x000000ec);
    local_res0 = (undefined4 *)generate_ammo_total_microcode();
    local_res0 = proc_7F056210(local_res0);
    local_res0 = display_red_blue_on_radar(local_res0);
    puVar3 = proc_7F0804E0(local_res0);
  }
  return puVar3;
}



undefined8 write_stan_tiles_in_yellow(undefined8 param_1)

{
  if (DAT_80079da0 != 0) {
    param_1 = proc_7F0B3024(param_1);
  }
  if (DAT_80079da4 != 0) {
    param_1 = proc_7F0B3024(param_1);
  }
  return param_1;
}



void proc_7F089718(float param_1)

{
  float *pfVar1;
  BONDdata *pBVar2;
  
  pBVar2 = ptr_BONDdata;
  pfVar1 = (float *)&ptr_BONDdata->positionz;
  *(float *)&ptr_BONDdata->positionx = (float)ptr_BONDdata->positionx * (flt_800364D0 / param_1);
  *(float *)&pBVar2->positionz = *pfVar1 * (flt_800364D0 / param_1);
  flt_800364D0 = param_1;
  flt_800364D4 = 1.00000000 / param_1;
  return;
}



void proc_7F08976C(f32 param_1)

{
  flt_800364CC = param_1;
  return;
}



f32 proc_7F089778(int param_1)

{
  return *(f32 *)(param_1 + 0x74);
}



float proc_7F089780(BONDdata *param_1)

{
  return (float)param_1->field_29BC + (float)param_1->field_88 +
         (float)param_1->ducking_height_offset;
}



int get_curplayer_positiondata(void)

{
  return ptr_BONDdata->position_data_pointer;
}



void kill_current_player(void)

{
  int iVar1;
  BONDdata *pBVar2;
  BONDdata *pBVar3;
  BONDdata *pBVar4;
  BONDdata *pBVar5;
  
  if ((ptr_BONDdata->invincible_flag == '\0') && (ptr_BONDdata->player_button_control == 0)) {
    if (ptr_BONDdata->pause_animation_state != 0) {
      trigger_solo_watch_menu(1);
    }
    mission_kia = TRUE;
    ptr_BONDdata->player_button_control = 1;
    pBVar2 = (BONDdata *)&ptr_BONDdata->current_room_ypos;
    pBVar5 = ptr_BONDdata;
    pBVar3 = ptr_BONDdata;
    do {
      pBVar4 = (BONDdata *)&pBVar3->zpos;
      pBVar5->field_434 = pBVar3->ptr_tile_printmanpos;
      *(f32 *)&pBVar5->field_438 = pBVar3->positionx;
      pBVar5->field_43C = pBVar3->positiony;
      pBVar5 = (BONDdata *)&pBVar5->zpos;
      pBVar3 = pBVar4;
    } while (pBVar4 != pBVar2);
    *(float *)&ptr_BONDdata->field_414 = ptr_BONDdata->azimuth_angle;
    *(float *)&ptr_BONDdata->field_418 = ptr_BONDdata->inclination_angle1;
    if (ptr_playerstank != 0) {
      dword_8003648C = 1;
    }
    draw_item_in_hand_has_more_ammo(1,ITEM_UNARMED);
    draw_item_in_hand_has_more_ammo(0,ITEM_UNARMED);
    iVar1 = getMissiontime();
    if (iVar1 - ptr_BONDdata->field_29F4 < cur_player_stat_ptr->shortest_inning) {
      iVar1 = getMissiontime();
      cur_player_stat_ptr->shortest_inning = iVar1 - ptr_BONDdata->field_29F4;
    }
    iVar1 = getMissiontime();
    ptr_BONDdata->field_29F4 = iVar1;
  }
  return;
}



int proc_7F0898E8(void)

{
  int iVar1;
  
  iVar1 = get_cur_controller_vert_stick_pos('\0');
  return (iVar1 * 8 + 0x280) / 0xa0;
}



// WARNING: Instruction at (ram,0x7f0899cc) overlaps instruction at (ram,0x7f0899c8)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

ulonglong record_damage_kills(void)

{
  bool bVar1;
  ulonglong uVar2;
  u32 playernum;
  int iVar4;
  longlong lVar3;
  int **ppiVar5;
  float vector2;
  u32 playernum_00;
  float fVar6;
  float in_f12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  f32 vector1;
  int in_stack_00000010;
  float fStack4;
  
  fStack4 = cur_player_stat_ptr->handicap * in_f12;
  if (ptr_BONDdata->pause_animation_state != 0) {
    get_BONDdata_watch_armor();
    proc_7F0A2F30((short *)&ptr_BONDdata->related_to_armor_display,0x2e,1,extraout_f12);
    get_BONDdata_watch_health();
    proc_7F0A2F30((short *)&ptr_BONDdata->related_to_health_display,0x2e,-1,extraout_f12_00);
  }
  uVar2 = get_num_players();
  if (1 < (longlong)uVar2) {
    if (stop_play_flag != 0) {
      return uVar2;
    }
    if (is_gameover_flag != 0) {
      return uVar2;
    }
  }
  if (in_tank_flag == TRUE) {
    fStack4 = fStack4 * 0.25000000;
  }
  if ((ptr_BONDdata->player_button_control == 0) && (ptr_BONDdata->invincible_flag == '\0')) {
    playernum = get_cur_playernum();
    controller_7000C854(playernum,extraout_f12_01);
    iVar4 = cur_player_get_control_type();
    if (3 < iVar4) {
      playernum = get_cur_playernum();
      uVar2 = get_num_players();
      controller_7000C854((int)uVar2 + playernum,extraout_f12_02);
    }
  }
  uVar2 = get_num_players();
  if ((1 < (longlong)uVar2) && (iVar4 = get_scenario(), iVar4 == 4)) {
    fStack4 = (float)ptr_BONDdata->current_health * (float)ptr_BONDdata->actual_health +
              (float)ptr_BONDdata->current_armor * (float)ptr_BONDdata->actual_armor;
  }
  lVar3 = (longlong)(int)ptr_BONDdata;
  if (ptr_BONDdata->invincible_flag != '\0') {
    return lVar3;
  }
  if (ptr_BONDdata->player_button_control != 0) {
    return lVar3;
  }
  if (disable_player_pickups_flag != 0) {
    return lVar3;
  }
  if (ptr_BONDdata->invincibility_timer < 0) {
    iVar4 = ptr_BONDdata->pause_animation_state;
  }
  else {
    uVar2 = get_num_players();
    if ((longlong)uVar2 < 2) {
      return ZEXT48(&DAT_80080000);
    }
    lVar3 = (longlong)(int)ptr_BONDdata;
    if (ptr_BONDdata->invincibility_timer != 0) {
      return lVar3;
    }
    iVar4 = ptr_BONDdata->pause_animation_state;
  }
  if (iVar4 == 5) {
    return lVar3;
  }
  if (iVar4 == 0xc) {
    return lVar3;
  }
  *(undefined4 *)((int)lVar3 + 0xe4) = *(undefined4 *)((int)lVar3 + 0xdc);
  ptr_BONDdata->previous_armor = ptr_BONDdata->current_armor;
  uVar2 = get_num_players();
  if (1 < (longlong)uVar2) {
    playernum = get_cur_playernum();
    fVar6 = convert_angle_using_inverse(vector1,(f32)vector2);
    fVar6 = (&ptr_BONDdata_p1)[playernum]->azimuth_angle -
            (360.00000000 - (fVar6 * 180.00000000) / flt_800552B0);
    if (fVar6 < 0.00000000) {
      fVar6 = -fVar6;
    }
    if (90.00000000 <= fVar6) {
      if (fVar6 <= 270.00000000) goto LAB_7f089c1c;
      iVar4 = (&player1_playerdata)[playernum_00].damage_to_backside;
    }
    else {
      iVar4 = (&player1_playerdata)[playernum_00].damage_to_backside;
    }
    (&player1_playerdata)[playernum_00].damage_to_backside = iVar4 + 1;
  }
LAB_7f089c1c:
  if (in_stack_00000010 == 0) {
LAB_7f089c68:
    if (in_stack_00000010 != 0) {
      fStack4 = fStack4 - (float)ptr_BONDdata->current_armor / (float)ptr_BONDdata->actual_armor;
      ptr_BONDdata->current_armor = 0.00000000;
      ptr_BONDdata->actual_armor = 1.00000000;
    }
    *(float *)&ptr_BONDdata->current_health =
         (float)ptr_BONDdata->current_health - fStack4 / (float)ptr_BONDdata->actual_health;
    if (0.00000000 < (float)ptr_BONDdata->current_health) {
      iVar4 = ptr_BONDdata->invincibility_timer;
      goto LAB_7f089ddc;
    }
    uVar2 = get_num_players();
    if (1 < (longlong)uVar2) {
      playernum = get_cur_playernum();
      bVar1 = false;
      iVar4 = get_scenario();
      lVar3 = (longlong)iVar4;
      if (lVar3 == 3) {
        proc_7F08CFC0();
        bVar1 = lVar3 != 0;
      }
      if (playernum != playernum_00) {
        drop_inventory();
        increment_num_deaths();
      }
      set_cur_player(playernum_00);
      if (playernum == playernum_00) {
        increment_num_suicides_display_MP();
      }
      else {
        increment_num_kills_display_text_in_MP();
        if (bVar1) {
          increment_num_times_killed_MwtGC();
        }
      }
      set_cur_player(playernum);
      (&(&player1_playerdata)[playernum_00].killed_p1)[playernum] =
           (&(&player1_playerdata)[playernum_00].killed_p1)[playernum] + 1;
    }
    kill_current_player();
  }
  else {
    if ((float)ptr_BONDdata->current_armor * (float)ptr_BONDdata->actual_armor < fStack4)
    goto LAB_7f089c68;
    *(float *)&ptr_BONDdata->current_armor =
         (float)ptr_BONDdata->current_armor - fStack4 / (float)ptr_BONDdata->actual_armor;
  }
  iVar4 = ptr_BONDdata->invincibility_timer;
LAB_7f089ddc:
  if (iVar4 < 0) {
    *(float *)&ptr_BONDdata->boost_factor_x =
         (float)ptr_BONDdata->boost_factor_x + (float)vector1 + (float)vector1;
    *(float *)&ptr_BONDdata->boost_factor_z =
         (float)ptr_BONDdata->boost_factor_z + vector2 + vector2;
  }
  ptr_BONDdata->invincibility_timer = 0;
  ptr_BONDdata->health_bar_timer = 0;
  ppiVar5 = play_sfx_a1(ptr_sfx_buf,0x44,NULL);
  return (longlong)(int)ppiVar5;
}



void proc_7F089E4C(undefined4 param_1,float param_2,undefined8 param_3,undefined8 param_4,
                  undefined4 param_5,undefined4 param_6)

{
  float __x;
  
  sinf(__x);
  cosf(__x);
  record_damage_kills();
  return;
}



ulonglong check_if_bond_is_invincible(void)

{
  return (ulonglong)(ptr_BONDdata->invincibility_timer < 0) ^ 1;
}



ulonglong check_if_healthbar_timer_greater_than_0(void)

{
  return (ulonglong)(0 < ptr_BONDdata->health_bar_timer);
}



f32 get_BONDdata_field19C(void)

{
  return ptr_BONDdata->field_19C;
}



float get_curplay_horizontal_rotation_in_degrees(void)

{
  return ((360.00000000 - ptr_BONDdata->azimuth_angle) * flt_800552B4) / 360.00000000;
}



float get_curplay_vertical_rotation_in_degrees(void)

{
  return (ptr_BONDdata->inclination_angle1 * flt_800552B8) / 360.00000000;
}



int proc_7F089F38(void)

{
  return ptr_BONDdata->field_D0;
}



void set_bondata_invincible_flag(char param_1)

{
  ptr_BONDdata->invincible_flag = param_1;
  return;
}



ulonglong get_bondata_invincible_flag(void)

{
  return (ulonglong)(byte)ptr_BONDdata->invincible_flag;
}



void set_invisible_to_guards_flag(BOOL param_1)

{
  visible_to_guards_flag = param_1;
  return;
}



BOOL get_invisible_to_guards_flag(void)

{
  return visible_to_guards_flag;
}



void set_obj_collision_flag(int flag)

{
  obj_collision_flag = flag;
  return;
}



BOOL get_obj_collision_flag(void)

{
  return obj_collision_flag;
}



ulonglong get_cur_players_room(void)

{
  int iVar1;
  
  if (ptr_BONDdata->unknown == 1) {
    if (ptr_BONDdata->room_pointer != 0) {
      return (ulonglong)*(byte *)(ptr_BONDdata->room_pointer + 3);
    }
    iVar1 = ptr_BONDdata->room_tile_ptr;
  }
  else {
    iVar1 = ptr_BONDdata->room_tile_ptr;
  }
  return (ulonglong)*(byte *)(iVar1 + 3);
}



xyzpoint * get_BONDdata_position(void)

{
  if (ptr_BONDdata->unknown == 1) {
    return (xyzpoint *)&ptr_BONDdata->xpos;
  }
  return (xyzpoint *)&ptr_BONDdata->field_4B4;
}



int * get_BONDdata_position3(void)

{
  if (ptr_BONDdata->unknown == 1) {
    return (int *)&ptr_BONDdata->xpos3;
  }
  return &ptr_BONDdata->field_4A4;
}



int proc_7F08A02C(void)

{
  return (int)&ptr_BONDdata->field_408;
}



void proc_7F08A03C(int param_1,int param_2)

{
  longlong lVar1;
  
  lVar1 = proc_7F09B15C(param_1);
  if (*(GUARDdata **)(param_1 + 4) != NULL) {
    set_or_unset_GUARDdata_flag(*(GUARDdata **)(param_1 + 4),param_2);
  }
  if (ptr_playerstank != 0) {
    proc_7F04F218(ptr_playerstank,(longlong)param_2);
  }
  (&ptr_BONDdata_p1)[(int)lVar1]->field_AC = param_2;
  return;
}



// WARNING: Instruction at (ram,0x7f08a118) overlaps instruction at (ram,0x7f08a114)
// 

void proc_7F08A0B0(int param_1,int **param_2,undefined4 *param_3,float *param_4,float *param_5)

{
  longlong lVar1;
  int iVar3;
  ulonglong uVar2;
  BONDdata **ppBVar4;
  float fVar5;
  
  lVar1 = proc_7F09B15C(param_1);
  iVar3 = (int)lVar1;
  if (((&ptr_BONDdata_p1)[iVar3]->field_AC == 0) ||
     (((uVar2 = get_num_players(), uVar2 != 1 &&
       ((&ptr_BONDdata_p1)[iVar3]->player_button_control != 0)) ||
      (ppBVar4 = &ptr_BONDdata_p1 + iVar3, (*ppBVar4)->unknown == 1)))) {
    *param_3 = 0;
  }
  else {
    *param_3 = 4;
    *param_2 = &(*ppBVar4)->field_B0;
    *(f32 *)param_5 = (*ppBVar4)->field_70;
    fVar5 = proc_7F089780(*ppBVar4);
    *param_4 = fVar5 + *param_5 + 10.00000000;
  }
  return;
}



void proc_7F08A19C(void)

{
  float in_f12;
  
  if (in_tank_flag == TRUE) {
    proc_7F07C888((float *)&ptr_BONDdata->field_B0,(float *)&ptr_BONDdata->positionx,in_f12);
  }
  else {
    *(float *)&ptr_BONDdata->field_B0 =
         (float)ptr_BONDdata->positionx + (float)ptr_BONDdata->collision_radius;
    ptr_BONDdata->zpos_0 = ptr_BONDdata->positionz;
    *(f32 *)&ptr_BONDdata->xpos_0 = ptr_BONDdata->positionx;
    *(float *)&ptr_BONDdata->field_BC =
         (float)ptr_BONDdata->positionz + (float)ptr_BONDdata->collision_radius;
    *(float *)&ptr_BONDdata->field_C0 =
         (float)ptr_BONDdata->positionx - (float)ptr_BONDdata->collision_radius;
    ptr_BONDdata->zpos_1 = ptr_BONDdata->positionz;
    *(f32 *)&ptr_BONDdata->xpos_1 = ptr_BONDdata->positionx;
    *(float *)&ptr_BONDdata->field_CC =
         (float)ptr_BONDdata->positionz - (float)ptr_BONDdata->collision_radius;
  }
  return;
}



void proc_7F08A274(int param_1,undefined4 *param_2,float *param_3,undefined4 *param_4)

{
  longlong lVar1;
  float fVar2;
  
  lVar1 = proc_7F09B15C(param_1);
  *param_2 = (&ptr_BONDdata_p1)[(int)lVar1]->collision_radius;
  fVar2 = proc_7F089780((&ptr_BONDdata_p1)[(int)lVar1]);
  *param_3 = (fVar2 + 10.00000000) - 30.00000000;
  *param_4 = 0x41f00000;
  return;
}



f32 get_BONDdata_watch_health(void)

{
  return ptr_BONDdata->current_health;
}



f32 get_BONDdata_watch_armor(void)

{
  return ptr_BONDdata->current_armor;
}



void add_BONDdata_watch_armor(f32 amount)

{
  cur_player_stat_ptr->body_armor_pickups = cur_player_stat_ptr->body_armor_pickups + (float)amount;
  ptr_BONDdata->current_armor = amount;
  return;
}



void reset_intro_camera_message_dialogs_for_BONDdata(void)

{
  ptr_BONDdata->stationary_intro_cam_flags = 0;
  ptr_BONDdata->set_neg1_by_stationary_intro_cam = -1;
  status_bar_text_buffer_index = 0;
  display_statusbar = FALSE;
  copy_1stfonttable = D_80040EAC;
  copy_2ndfonttable = D_80040EB0;
  return;
}



void proc_7F08A380(uint param_1)

{
  ptr_BONDdata->stationary_intro_cam_flags = ptr_BONDdata->stationary_intro_cam_flags & ~param_1;
  return;
}



void set_flags_in_BONDdata_stationary_intro_cam(uint param_1)

{
  ptr_BONDdata->stationary_intro_cam_flags = ptr_BONDdata->stationary_intro_cam_flags | param_1;
  return;
}



void proc_7F08A3B4(undefined4 param_1,undefined4 param_2)

{
  copy_1stfonttable = param_2;
  copy_2ndfonttable = param_1;
  return;
}



ulonglong display_string_in_lower_left_corner(char *text)

{
  int iVar1;
  BONDdata *pBVar2;
  ulonglong uVar3;
  char *pcVar4;
  u32 uVar5;
  
  uVar3 = get_num_players();
  if (uVar3 == 1) {
    if ((int)display_statusbar < 5) {
      iVar1 = ((int)(status_bar_text_buffer_index + display_statusbar) % 5) * 0x65;
      pcVar4 = something_with_strings(dword_8007A0E8 + iVar1,text,100);
      uVar3 = SEXT48((int)pcVar4);
      display_statusbar += TRUE;
      dword_8007A0E8[iVar1 + 100] = 0;
    }
  }
  else {
    uVar5 = get_cur_playernum();
    pcVar4 = something_with_strings(dword_8007A0E8 + uVar5 * 0x65,text,100);
    pBVar2 = ptr_BONDdata;
    uVar3 = SEXT48((int)pcVar4);
    dword_8007A0E8[uVar5 * 0x65 + 100] = 0;
    pBVar2->set_neg1_by_stationary_intro_cam = 0x78;
  }
  return uVar3;
}



void proc_7F08A4E4(void)

{
  ulonglong uVar1;
  
  if ((ptr_BONDdata->stationary_intro_cam_flags == 0) && (ptr_BONDdata->in_mp_pause_menu == 0)) {
    if (-1 < ptr_BONDdata->set_neg1_by_stationary_intro_cam) {
      ptr_BONDdata->set_neg1_by_stationary_intro_cam =
           ptr_BONDdata->set_neg1_by_stationary_intro_cam - clock_timer;
      uVar1 = get_num_players();
      if (uVar1 == 1) {
        if (ptr_BONDdata->set_neg1_by_stationary_intro_cam < 0) {
          status_bar_text_buffer_index = (status_bar_text_buffer_index + 1) % 5;
          display_statusbar += ~FALSE;
        }
        else {
          if ((1 < (int)display_statusbar) &&
             (0x1e < ptr_BONDdata->set_neg1_by_stationary_intro_cam)) {
            ptr_BONDdata->set_neg1_by_stationary_intro_cam = 0x1e;
          }
        }
      }
    }
    uVar1 = get_num_players();
    if (((uVar1 == 1) && (ptr_BONDdata->set_neg1_by_stationary_intro_cam < 0)) &&
       (0 < (int)display_statusbar)) {
      if ((int)display_statusbar < 2) {
        ptr_BONDdata->set_neg1_by_stationary_intro_cam = 0x78;
      }
      else {
        ptr_BONDdata->set_neg1_by_stationary_intro_cam = 0x1e;
      }
    }
  }
  return;
}



undefined4 * proc_7F08A5FC(undefined4 *param_1)

{
  ulonglong uVar1;
  undefined4 *DL;
  short sVar4;
  ITEM_IDS weapon;
  int iVar2;
  short sVar5;
  u32 uVar3;
  uint *DL_00;
  undefined4 *local_res0;
  int local_1c;
  int local_18;
  uint local_14;
  uint local_10;
  uint local_c;
  uint local_8;
  int local_4;
  
  local_res0 = param_1;
  if (((ptr_BONDdata->stationary_intro_cam_flags == 0) &&
      (local_res0 = param_1, -1 < ptr_BONDdata->set_neg1_by_stationary_intro_cam)) &&
     (local_res0 = param_1, ptr_BONDdata->in_mp_pause_menu == 0)) {
    local_4 = 0;
    uVar1 = get_num_players();
    if (uVar1 == 1) {
      iVar2 = local_4;
      if (dword_8007A0E8[status_bar_text_buffer_index * 0x65] != '\0') {
        iVar2 = 1;
      }
    }
    else {
      iVar2 = local_4;
      if (-1 < ptr_BONDdata->set_neg1_by_stationary_intro_cam) {
        status_bar_text_buffer_index = get_cur_playernum();
        iVar2 = 1;
      }
    }
    local_res0 = param_1;
    if (iVar2 != 0) {
      DL = microcode_constructor(param_1);
      local_1c = 0;
      local_18 = 0;
      proc_7F0AE98C(&local_18,&local_1c,dword_8007A0E8 + status_bar_text_buffer_index * 0x65,
                    copy_2ndfonttable,copy_1stfonttable,0);
      uVar1 = get_num_players();
      if ((longlong)uVar1 < 3) {
        sVar4 = get_video2_settings_ulx();
        local_8 = (int)sVar4 + 0x1e;
      }
      else {
        uVar3 = get_cur_playernum();
        if ((uVar3 & 1) == 0) {
          sVar4 = get_video2_settings_ulx();
          local_8 = (int)sVar4 + 0x1e;
        }
        else {
          sVar4 = get_video2_settings_ulx();
          local_8 = (int)sVar4 + 10;
        }
      }
      local_10 = local_8 + local_1c;
      uVar1 = get_num_players();
      if ((longlong)uVar1 < 3) {
        weapon = get_item_in_hand(1);
        iVar2 = get_ammo_type_for_weapon(weapon);
        if ((iVar2 == 0) && (uVar1 = is_clock_drawn_onscreen(), uVar1 == 0)) {
          sVar4 = get_video2_settings_uly();
          sVar5 = get_video2_settings_height();
          local_14 = ((int)sVar5 + (int)sVar4) - 0xc;
        }
        else {
          sVar4 = get_video2_settings_uly();
          sVar5 = get_video2_settings_height();
          local_14 = ((int)sVar5 + (int)sVar4) - 0x28;
        }
        uVar3 = get_cur_playernum();
        if (uVar3 == 1) {
          local_14 -= 8;
        }
      }
      else {
        sVar4 = get_video2_settings_uly();
        local_14 = (int)sVar4 + 0x10;
      }
      local_c = local_14 - local_18;
      DL_00 = draw_blackbox_to_screen(DL,&local_8,&local_c,&local_10,&local_14);
      sVar4 = get_video2_settings_txtClipW();
      sVar5 = get_video2_settings_txtClipH();
      DL_00 = jp_text_stuff(DL_00,&local_8,&local_c,
                            dword_8007A0E8 + status_bar_text_buffer_index * 0x65,copy_2ndfonttable,
                            (int)copy_1stfonttable,0xffffffff,0x646464ff,(int)sVar4,(int)sVar5,0,0);
      local_res0 = combiner_bayer_lod_perspective(DL_00);
    }
  }
  return local_res0;
}



void proc_7F08A900(void)

{
  upper_text_buffer_index = 0;
  display_upper_text_window = 0;
  upper_text_window_timer = 0xffffffff;
  DAT_800368b4 = 0;
  return;
}



void proc_7F08A928(uint param_1)

{
  DAT_800368b4 = DAT_800368b4 & ~param_1;
  return;
}



void proc_7F08A944(uint param_1)

{
  DAT_800368b4 = DAT_800368b4 | param_1;
  return;
}



void display_string_at_top_of_screen(char *text)

{
  uint uVar1;
  
  if (display_upper_text_window < 2) {
    uVar1 = upper_text_buffer_index + display_upper_text_window & 1;
    if ((upper_text_buffer_index + display_upper_text_window < 0) && (uVar1 != 0)) {
      uVar1 -= 2;
    }
    something_with_strings(ARRAY_80079c70 + uVar1 * 0x97,text,0x96);
    display_upper_text_window += 1;
    *(undefined *)(uVar1 * 0x97 + -0x7ff862fa) = 0;
  }
  return;
}



void proc_7F08A9F8(void)

{
  uint uVar1;
  
  if ((DAT_800368b4 == 0) && (ptr_BONDdata->in_mp_pause_menu == 0)) {
    if (-1 < upper_text_window_timer) {
      upper_text_window_timer -= clock_timer;
      if (upper_text_window_timer < 0) {
        uVar1 = upper_text_buffer_index + 1;
        upper_text_buffer_index = uVar1 & 1;
        if (((int)uVar1 < 0) && (upper_text_buffer_index != 0)) {
          upper_text_buffer_index -= 2;
        }
        display_upper_text_window += -1;
      }
      else {
        if ((1 < display_upper_text_window) && (0x3c < upper_text_window_timer)) {
          upper_text_window_timer = 0x3c;
        }
      }
    }
    if ((upper_text_window_timer < 0) && (0 < display_upper_text_window)) {
      if (1 < display_upper_text_window) {
        upper_text_window_timer = 0x3c;
        return;
      }
      upper_text_window_timer = 0xf0;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * proc_7F08AAE8(void)

{
  uint uVar1;
  undefined6 *puVar2;
  undefined4 *DL;
  short sVar5;
  short sVar6;
  uint *DL_00;
  BOOL BVar3;
  char *pcVar4;
  undefined4 *DL_01;
  float fVar7;
  undefined4 in_f5;
  undefined4 in_f9;
  undefined4 in_f17;
  undefined *local_9c;
  undefined4 local_98;
  undefined *local_94;
  undefined4 local_90;
  uint local_8c;
  undefined *local_88;
  undefined6 uStack130;
  int local_74;
  int local_6c;
  int local_68;
  byte abStack100 [16];
  byte abStack84 [16];
  byte abStack68 [16];
  byte abStack52 [16];
  byte abStack36 [16];
  int local_14;
  int local_10;
  uint local_c;
  int local_8;
  int local_4;
  
  if ((((DAT_800368b4 == 0) && (-1 < upper_text_window_timer)) &&
      (ARRAY_80079c70[upper_text_buffer_index * 0x97] != '\0')) &&
     (ptr_BONDdata->in_mp_pause_menu == 0)) {
    DL = microcode_constructor(DL_01);
    local_14 = 0;
    local_10 = 0;
    proc_7F0AE98C(&local_10,&local_14,ARRAY_80079c70 + upper_text_buffer_index * 0x97,
                  (int)ptrSecondFontTable,(int *)ptrFirstFontTable,0);
    if (camera_8003642C == 0) {
      sVar5 = get_video2_settings_ulx();
      local_4 = (int)sVar5 + 0x1e;
      sVar5 = get_video2_settings_uly();
      local_8 = (int)sVar5 + 0xd;
    }
    else {
      sVar5 = get_video2_settings_ulx();
      local_4 = (int)sVar5 + 0x46;
      sVar5 = get_video2_settings_uly();
      if (false) {
        trap(0x1c00);
      }
      if ((false) && ((int)sVar5 + 0x20 == -0x80000000)) {
        trap(0x1800);
      }
      local_8 = (((int)sVar5 + 0x20) / 0xb) * 0xb + -2;
    }
    local_c = local_8 + local_10;
    sVar5 = get_video2_settings_txtClipW();
    DL = microcode_constructor_related_to_menus
                   (DL,0,(longlong)(local_8 + -2),(longlong)sVar5,local_c,100);
    sVar5 = get_video2_settings_txtClipW();
    sVar6 = get_video2_settings_txtClipH();
    DL_00 = en_text_write_stuff(DL,&local_4,&local_8,ARRAY_80079c70 + upper_text_buffer_index * 0x97
                                ,(int)ptrSecondFontTable,(int)ptrFirstFontTable,0xffffffff,
                                (int)sVar5,(int)sVar6,0,0);
    DL_01 = combiner_bayer_lod_perspective(DL_00);
  }
  else {
    BVar3 = get_debug_testingmanpos_flag();
    if (BVar3 != FALSE) {
      fVar7 = convert_angle_using_inverse
                        ((f32)-(float)ptr_BONDdata->field_498,(f32)ptr_BONDdata->field_4A0);
      uStack130._2_4_ = (int)((fVar7 * 180.00000000) / flt_800552BC);
      local_9c = dword_800368B8;
      local_98 = DAT_800368bc;
      local_94 = PTR_DAT_800368c0;
      local_90 = DAT_800368c4;
      local_8c = DAT_800368c8;
      local_88 = PTR_DAT_800368cc;
      uVar1 = (uint)&uStack130 & 3;
      puVar2 = (undefined6 *)((int)&uStack130 - uVar1);
      *(uint *)puVar2 =
           *(uint *)puVar2 & 0xffffffffU >> (uVar1 + 1) * 8 |
           (DAT_800368c8 & 0xff000000 | DAT_800368d0 >> 8) << (3 - uVar1) * 8;
      pcVar4 = proc_7F0B5DE0((ulonglong)*(byte *)(ptr_BONDdata->ptr_tile_printmanpos + 3));
      sprintf((char *)abStack36,a8s,pcVar4);
      sprintf((char *)abStack52,aX4_0f,in_f5,SUB84((double)(float)ptr_BONDdata->positionx,0));
      sprintf((char *)abStack68,aY4_0f,in_f9,SUB84((double)(float)ptr_BONDdata->positiony,0));
      sprintf((char *)abStack84,aZ4_0f,in_f17,SUB84((double)(float)ptr_BONDdata->positionz,0));
      sprintf((char *)abStack100,aS3d,
              (undefined **)((int)&local_9c + ((uStack130._2_4_ + 0x16) / 0x2d) * 3));
      sVar5 = get_video2_settings_ulx();
      local_68 = (int)sVar5 + 0x11;
      sVar5 = get_video2_settings_uly();
      local_6c = (int)sVar5 + 0x11;
      local_74 = (int)sVar5 + 0x1b;
      DL = microcode_constructor(DL_01);
      sVar5 = get_video2_settings_txtClipW();
      DL = microcode_constructor_related_to_menus
                     (DL,0,(longlong)local_6c,(longlong)sVar5,local_74 + 1,100);
      sVar5 = get_video2_settings_txtClipW();
      sVar6 = get_video2_settings_txtClipH();
      DL_00 = en_text_write_stuff(DL,&local_68,&local_6c,abStack36,D_80040EB0,D_80040EAC,0xffffffff,
                                  (int)sVar5,(int)sVar6,0,0);
      sVar5 = get_video2_settings_ulx();
      local_68 = (int)sVar5 + 0x57;
      sVar5 = get_video2_settings_txtClipW();
      sVar6 = get_video2_settings_txtClipH();
      DL_00 = en_text_write_stuff(DL_00,&local_68,&local_6c,abStack52,D_80040EB0,D_80040EAC,
                                  0xffffffff,(int)sVar5,(int)sVar6,0,0);
      sVar5 = get_video2_settings_ulx();
      local_68 = (int)sVar5 + 0x8d;
      sVar5 = get_video2_settings_txtClipW();
      sVar6 = get_video2_settings_txtClipH();
      DL_00 = en_text_write_stuff(DL_00,&local_68,&local_6c,abStack68,D_80040EB0,D_80040EAC,
                                  0xffffffff,(int)sVar5,(int)sVar6,0,0);
      sVar5 = get_video2_settings_ulx();
      local_68 = (int)sVar5 + 0xc3;
      sVar5 = get_video2_settings_txtClipW();
      sVar6 = get_video2_settings_txtClipH();
      DL_00 = en_text_write_stuff(DL_00,&local_68,&local_6c,abStack84,D_80040EB0,D_80040EAC,
                                  0xffffffff,(int)sVar5,(int)sVar6,0,0);
      sVar5 = get_video2_settings_ulx();
      local_68 = (int)sVar5 + 0xf9;
      sVar5 = get_video2_settings_txtClipW();
      sVar6 = get_video2_settings_txtClipH();
      DL_00 = en_text_write_stuff(DL_00,&local_68,&local_6c,abStack100,D_80040EB0,D_80040EAC,
                                  0xffffffff,(int)sVar5,(int)sVar6,0,0);
      DL_01 = combiner_bayer_lod_perspective(DL_00);
    }
  }
  return DL_01;
}



undefined4 proc_7F08B0F0(char *param_1)

{
  float *pfVar1;
  bool bVar2;
  longlong lVar3;
  u32 playercount;
  int iVar5;
  float *pfVar6;
  ulonglong uVar4;
  int iVar7;
  int iVar8;
  int iVar9;
  u32 *puVar10;
  uint extraout_a1_lo;
  uint extraout_a1_lo_00;
  undefined4 extraout_a2_lo;
  int extraout_a2_lo_00;
  int extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a2_lo_03;
  undefined4 extraout_a2_lo_04;
  undefined4 extraout_a3_lo;
  uint extraout_a3_lo_00;
  uint extraout_a3_lo_01;
  uint extraout_a3_lo_02;
  uint extraout_a3_lo_03;
  uint extraout_a3_lo_04;
  uint extraout_a3_lo_05;
  uint extraout_a3_lo_06;
  uint extraout_a3_lo_07;
  uint extraout_a3_lo_08;
  uint uVar11;
  undefined4 extraout_a3_lo_09;
  undefined4 extraout_a3_lo_10;
  int iVar12;
  BONDdata *pBVar13;
  BONDdata **ppBVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float afStack136 [2];
  undefined4 uStack128;
  int *piStack124;
  f32 fStack112;
  f32 fStack108;
  f32 fStack104;
  float fStack100;
  f32 fStack96;
  int iStack92;
  undefined4 uStack88;
  undefined auStack84 [16];
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack36;
  float fStack32;
  float fStack28;
  undefined4 uStack16;
  GUARDdata *pGStack8;
  u32 uStack4;
  
  lVar3 = proc_7F09B15C((int)param_1);
  uStack4 = (u32)lVar3;
  pGStack8 = *(GUARDdata **)(param_1 + 4);
  if (pGStack8 != NULL) {
    playercount = get_cur_playernum();
    iVar5 = proc_7F09B4D8(playercount);
    if (iVar5 == 0) {
      pGStack8->special_bitflags = pGStack8->special_bitflags & 0xf7ff;
    }
  }
  if ((pGStack8 != NULL) &&
     (ppBVar14 = &ptr_BONDdata_p1 + uStack4, (*ppBVar14)->ptr_char_objectinstance != 0)) {
    playercount = get_debug_render_raster();
    if (playercount == 0) {
      pBVar13 = *ppBVar14;
LAB_7f08b198:
      pBVar13->field_AC = 0;
      uVar4 = proc_7F020EF0(param_1,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
      uStack16 = (undefined4)uVar4;
      (*ppBVar14)->field_AC = 1;
      (*ppBVar14)->positionx = *(f32 *)((*ppBVar14)->position_data_pointer + 8);
      (*ppBVar14)->positiony = *(int *)((*ppBVar14)->position_data_pointer + 0xc);
      (*ppBVar14)->positionz = *(int *)((*ppBVar14)->position_data_pointer + 0x10);
      (*ppBVar14)->ptr_tile_printmanpos = *(int *)((*ppBVar14)->position_data_pointer + 0x14);
      proc_7F07DE9C(*ppBVar14);
      if ((param_1[1] & 2U) == 0) {
        return uStack16;
      }
      pfVar1 = *(float **)((*ppBVar14)->ptr_char_objectinstance + 0xc);
      pfVar6 = (float *)proc_7F078444();
      proc_7F05818C(pfVar6,pfVar1,(int)auStack84);
      *(float *)&(*ppBVar14)->field_4B4 = fStack68 * 7.00000000 + fStack36;
      *(float *)&(*ppBVar14)->field_4B8 = fStack64 * 7.00000000 + fStack32;
      *(float *)&(*ppBVar14)->field_4BC = fStack60 * 7.00000000 + fStack28;
      return uStack16;
    }
    if ((*ppBVar14)->unknown == 1) {
      pBVar13 = *ppBVar14;
      goto LAB_7f08b198;
    }
  }
  if ((((pGStack8 == NULL) ||
       (ppBVar14 = &ptr_BONDdata_p1 + uStack4, (*ppBVar14)->ptr_char_objectinstance == 0)) ||
      (uVar4 = get_num_players(), (longlong)uVar4 < 2)) ||
     (playercount = get_cur_playernum(), playercount == uStack4)) {
    param_1[1] = param_1[1] & 0xfd;
    return 0;
  }
  iStack92 = 0;
  piStack124 = NULL;
  fStack104 = -1.00000000;
  fStack100 = -1.00000000;
  iVar7 = something_with_weaponpos_of_guarddata_hand(pGStack8,1);
  iVar8 = something_with_weaponpos_of_guarddata_hand(pGStack8,0);
  iVar5 = 0;
  iVar12 = 0;
  if (iVar7 != 0) {
    iVar5 = *(int *)(iVar7 + 4);
  }
  if (iVar8 != 0) {
    iVar12 = *(int *)(iVar8 + 4);
  }
  playercount = get_cur_playernum();
  iVar9 = proc_7F09B4D8(playercount);
  if (iVar9 == 0) {
    DAT_800368d4 += 1;
  }
  if (DAT_800368d4 < 2) {
    pBVar13 = *ppBVar14;
    iVar5 = extraout_a2_lo_00;
    uVar11 = extraout_a3_lo_00;
    goto LAB_7f08ba78;
  }
  pBVar13 = *ppBVar14;
  fStack108 = pBVar13->field_2A08;
  fStack112 = pBVar13->field_2A0C;
  if (pBVar13->player_button_control == 0) {
    if ((iVar7 == 0) || (iVar8 == 0)) {
      if ((iVar7 == 0) && (iVar8 == 0)) {
        iVar5 = 2;
      }
      else {
        if ((iVar5 == 0) ||
           (uVar4 = check_special_attributes((int)*(char *)(iVar5 + 0x80),0x200), uVar4 != 0)) {
          if ((iVar12 == 0) ||
             (uVar4 = check_special_attributes((int)*(char *)(iVar12 + 0x80),0x200), uVar4 != 0)) {
            if ((iVar5 == 0) ||
               (uVar4 = check_special_attributes((int)*(char *)(iVar5 + 0x80),0x100), uVar4 == 0)) {
              if (iVar12 == 0) {
                iVar5 = 1;
              }
              else {
                uVar4 = check_special_attributes((int)*(char *)(iVar12 + 0x80),0x100);
                if (uVar4 == 0) {
                  iVar5 = 1;
                }
                else {
                  iVar5 = 0;
                }
              }
            }
            else {
              iVar5 = 0;
            }
          }
          else {
            iVar5 = 2;
          }
        }
        else {
          iVar5 = 2;
        }
      }
    }
    else {
      iVar5 = 3;
    }
    iVar12 = proc_7F079A1C(uStack4);
    uVar11 = extraout_a3_lo_02;
    if ((iVar12 == 1) || (iVar12 = proc_7F079A1C(uStack4), uVar11 = extraout_a3_lo_03, iVar12 == 0))
    {
      fVar17 = 1.00000000;
      pBVar13 = *ppBVar14;
      iVar12 = 5;
    }
    else {
      pBVar13 = *ppBVar14;
      fVar17 = pBVar13->strafe_speed_multiplier;
      if ((0.00000000 <= fVar17) || (off_800368D8[iVar5 * 6 + 4].pointer == NULL)) {
        if (0.00000000 < fVar17) {
          if (off_800368D8[iVar5 * 6 + 3].pointer != NULL) {
            iVar12 = 3;
            uVar11 = extraout_a3_lo_03;
            if (-90.00000000 < (float)pBVar13->field_1280) {
              *(float *)&pBVar13->field_1280 = (float)pBVar13->field_1280 - 15.00000000;
              pBVar13 = *ppBVar14;
              iVar12 = 3;
              uVar11 = extraout_a3_lo_03;
            }
            goto LAB_7f08b7fc;
          }
          fVar17 = pBVar13->azimuth_turning_direction;
        }
        else {
          fVar17 = pBVar13->azimuth_turning_direction;
        }
        if (fVar17 < 0.00000000) {
          fVar17 = -fVar17;
          fVar15 = pBVar13->forward_speed_multiplier;
        }
        else {
          fVar15 = pBVar13->forward_speed_multiplier;
        }
        if (fVar15 < flt_800552C0) {
          if (fVar15 < -fVar17) {
            iVar12 = pBVar13->field_4E8;
            fVar17 = fVar15;
          }
          else {
            iVar12 = pBVar13->field_4E8;
            fVar17 = -fVar17;
          }
          if ((iVar12 == 0) || (iVar12 = 2, flt_800552C4 < fVar15)) {
            fVar17 = fVar17 + fVar17;
            iVar12 = 1;
            if (-1.00000000 <= fVar17) {
              fVar15 = (float)pBVar13->field_1280;
              goto LAB_7f08b7a8;
            }
            fVar17 = -1.00000000;
            iVar12 = 1;
          }
LAB_7f08b7a4:
          fVar15 = (float)pBVar13->field_1280;
        }
        else {
          if ((fVar15 <= flt_800552C8) && (fVar17 <= flt_800552C8)) {
            fVar17 = 1.00000000;
            iVar12 = 0;
            goto LAB_7f08b7a4;
          }
          if (fVar17 < fVar15) {
            iVar12 = pBVar13->field_4E8;
            fVar17 = fVar15;
          }
          else {
            iVar12 = pBVar13->field_4E8;
          }
          if ((iVar12 != 0) && (iVar12 = 2, flt_800552CC <= fVar15)) goto LAB_7f08b7a4;
          fVar16 = fVar17 + fVar17;
          iVar12 = 1;
          fVar17 = 1.00000000;
          if (1.00000000 < fVar16) {
            fVar15 = (float)pBVar13->field_1280;
          }
          else {
            fVar15 = (float)pBVar13->field_1280;
            fVar17 = fVar16;
          }
        }
LAB_7f08b7a8:
        if (0.00000000 < fVar15) {
          *(float *)&pBVar13->field_1280 = fVar15 - 15.00000000;
          pBVar13 = *ppBVar14;
          fVar15 = (float)pBVar13->field_1280;
        }
        uVar11 = extraout_a3_lo_03;
        if (fVar15 < 0.00000000) {
          *(float *)&pBVar13->field_1280 = fVar15 + 15.00000000;
          pBVar13 = *ppBVar14;
          uVar11 = extraout_a3_lo_03;
        }
      }
      else {
        fVar17 = -fVar17;
        iVar12 = 4;
        uVar11 = extraout_a3_lo_03;
        if ((float)pBVar13->field_1280 < 90.00000000) {
          *(float *)&pBVar13->field_1280 = (float)pBVar13->field_1280 + 15.00000000;
          pBVar13 = *ppBVar14;
          iVar12 = 4;
          uVar11 = extraout_a3_lo_03;
        }
      }
    }
LAB_7f08b7fc:
    piStack124 = (int *)off_800368D8[iVar12 + iVar5 * 6].pointer;
    if (off_800368D8[iVar12 + iVar5 * 6].anim != 0) {
      iStack92 = off_800368D8[iVar12 + iVar5 * 6].anim + ptr_animation_table;
    }
    fStack104 = off_800368D8[iVar12 + iVar5 * 6].z;
    fVar15 = (float)off_800368D8[iVar12 + iVar5 * 6].y;
    fVar17 = fVar17 * (float)off_800368D8[iVar12 + iVar5 * 6].x;
    iVar5 = pBVar13->players_cur_animation;
  }
  else {
    bVar2 = false;
    if (0 < (int)total_player_death_anim) {
      puVar10 = player_death_ani_list;
      playercount = player_death_ani_list[0];
      while( true ) {
        puVar10 = puVar10 + 1;
        if (pBVar13->players_cur_animation == playercount + ptr_animation_table) {
          bVar2 = true;
        }
        if (player_death_ani_list + total_player_death_anim <= puVar10) break;
        playercount = *puVar10;
      }
    }
    if (bVar2) {
      iVar5 = pBVar13->players_cur_animation;
      uVar11 = total_player_death_anim;
      iStack92 = iVar5;
    }
    else {
      playercount = get_random_value();
      pBVar13 = *ppBVar14;
      iStack92 = player_death_ani_list[playercount % total_player_death_anim] + ptr_animation_table;
      if (total_player_death_anim == 0) {
        trap(0x1c00);
      }
      iVar5 = pBVar13->players_cur_animation;
      uVar11 = extraout_a3_lo_01;
    }
    fVar17 = 0.50000000;
    fStack108 = 0.00000000;
    fStack112 = 0.00000000;
    fVar15 = fStack100;
  }
  if ((piStack124 != NULL) && (iStack92 == 0)) {
    iStack92 = *piStack124;
  }
  bVar2 = iStack92 != iVar5;
  if ((0.00000000 <= fVar15) &&
     ((*(char *)(pBVar13->ptr_char_objectinstance + 0x26) == '\0' ||
      (fVar15 != *(float *)(pBVar13->ptr_char_objectinstance + 0x90))))) {
    bVar2 = true;
  }
  if ((fVar15 < 0.00000000) && (*(char *)(pBVar13->ptr_char_objectinstance + 0x26) != '\0')) {
    bVar2 = true;
  }
  if (bVar2) {
    if (*(int *)(pBVar13->ptr_char_objectinstance + 0x54) == 0) {
      fVar16 = fVar15;
      if (fVar15 < 0.00000000) {
        fVar16 = 0.00000000;
      }
      fStack100 = fVar15;
      fStack96 = (f32)fVar17;
      proc_7F06FCA8(pBVar13->ptr_char_objectinstance,iStack92,0,fVar17,fVar16,0.00000000);
      (*ppBVar14)->players_cur_animation = iStack92;
      (*ppBVar14)->field_1288 = fStack96;
      fVar17 = (float)fStack96;
      uVar11 = extraout_a3_lo_04;
      if (0.00000000 <= fStack100) {
        proc_7F06FDCC((*ppBVar14)->ptr_char_objectinstance,fStack100,0x41800000);
        fVar17 = extraout_f12;
        uVar11 = extraout_a3_lo_05;
      }
      if (0.00000000 <= (float)fStack104) {
        proc_7F06FDE8((*ppBVar14)->ptr_char_objectinstance,fVar17);
        pBVar13 = *ppBVar14;
        fVar17 = extraout_f12_00;
        uVar11 = extraout_a3_lo_06;
      }
      else {
        pBVar13 = *ppBVar14;
      }
    }
    else {
      pBVar13 = *ppBVar14;
    }
    iVar5 = pBVar13->players_cur_animation;
  }
  else {
    if (fVar17 != (float)pBVar13->field_1288) {
      fStack96 = (f32)fVar17;
      proc_7F06FE4C(pBVar13->ptr_char_objectinstance,fVar17,fVar17);
      (*ppBVar14)->field_1288 = fStack96;
      iVar5 = (*ppBVar14)->players_cur_animation;
      fVar17 = (float)fStack96;
      uVar11 = extraout_a3_lo_07;
    }
  }
  if (iStack92 == iVar5) {
    if (piStack124 == NULL) {
      pGStack8->field_154 = 0;
      pGStack8->field_150 = 0;
      pGStack8->special_bitflags = pGStack8->special_bitflags | 0x400;
      *(f32 *)&pGStack8->field_158 = fStack108;
    }
    else {
      pGStack8->special_bitflags = pGStack8->special_bitflags & 0xfbff;
      proc_7F02D048((int)pGStack8,(int)piStack124,0,1,fVar17);
      iVar5 = extraout_a2_lo_01;
      uVar11 = extraout_a3_lo_08;
    }
  }
  pGStack8->field_E = '\n';
  *(f32 *)&pGStack8->field_15C = fStack112;
  pBVar13 = *ppBVar14;
LAB_7f08ba78:
  iVar7 = 0;
  *(f32 *)(param_1 + 8) = pBVar13->positionx;
  *(int *)(param_1 + 0xc) = (*ppBVar14)->positiony;
  *(int *)(param_1 + 0x10) = (*ppBVar14)->positionz;
  *(int *)(param_1 + 0x14) = (*ppBVar14)->ptr_tile_printmanpos;
  getsuboffset(pGStack8->MODELdata_pointer,afStack136,iVar5,uVar11);
  afStack136[0] = *(float *)(param_1 + 8);
  uStack128 = *(undefined4 *)(param_1 + 0x10);
  setsuboffset(pGStack8->MODELdata_pointer,afStack136,extraout_a2_lo_02,extraout_a3_lo_09);
  setsubroty(pGStack8->MODELdata_pointer,extraout_f12_01,
             (((float)(*ppBVar14)->field_1280 + (360.00000000 - (*ppBVar14)->azimuth_angle)) *
             flt_800552D0) / 360.00000000,extraout_a2_lo_03);
  pGStack8->current_action = 0x19;
  pGStack8->guard_bitflags = pGStack8->guard_bitflags | 1;
  *(int **)&pGStack8->bond_position = piStack124;
  proc_7F02D118((int)pGStack8,0,(int)*(char *)((int)&(*ppBVar14)->right_weapon_firing_status + 1));
  proc_7F02D118((int)pGStack8,1,(int)*(char *)((int)&(*ppBVar14)->left_weapon_firing_status + 1));
  uVar4 = proc_7F020EF0(param_1,extraout_a1_lo_00,extraout_a2_lo_04,extraout_a3_lo_10);
  uStack88 = (undefined4)uVar4;
  iVar12 = 0;
  iVar5 = 0;
  do {
    lVar3 = proc_7F02D630((int)pGStack8,iVar7,(float *)((int)&(*ppBVar14)->field_2A18 + iVar5));
    if (lVar3 == 0) {
      pBVar13 = *ppBVar14;
      if (*(int *)((int)&pBVar13->field_2A30 + iVar12) < dword_80048380 + -1) {
        *(int *)((int)&pBVar13->field_2A18 + iVar5) = (&pBVar13->field_B58)[iVar7 * 0xea];
        *(int *)((int)&(*ppBVar14)->field_2A1C + iVar5) = (&(*ppBVar14)->field_B5C)[iVar7 * 0xea];
        *(int *)((int)&(*ppBVar14)->field_2A20 + iVar5) = (&(*ppBVar14)->field_B60)[iVar7 * 0xea];
      }
    }
    else {
      *(int *)((int)&(*ppBVar14)->field_2A30 + iVar12) = dword_80048380;
    }
    iVar7 += 1;
    iVar12 += 4;
    iVar5 += 0xc;
  } while (iVar7 != 2);
  pGStack8->special_bitflags = pGStack8->special_bitflags | 0x800;
  *(f32 *)(param_1 + 8) = (*ppBVar14)->positionx;
  *(int *)(param_1 + 0xc) = (*ppBVar14)->positiony;
  *(int *)(param_1 + 0x10) = (*ppBVar14)->positionz;
  *(int *)(param_1 + 0x14) = (*ppBVar14)->ptr_tile_printmanpos;
  return uStack88;
}



undefined8 proc_7F08BCB8(undefined8 param_1)

{
  return param_1;
}



undefined8 proc_7F08BCC0(char *param_1,undefined8 param_2,uint param_3)

{
  if (*(int *)(param_1 + 4) != 0) {
    param_2 = proc_7F021BFC(param_1,(uint *)param_2,param_3);
  }
  return param_2;
}



undefined4 * proc_7F08BCF4(undefined4 *param_1)

{
  *param_1 = 0x1020040;
  param_1[1] = ptr_BONDdata->field_5C;
  return param_1 + 2;
}



void proc_7F08BD18(uint *param_1)

{
  undefined4 auStack64 [16];
  
  proc_7F058020(param_1,auStack64);
  proc_7F058C9C((int)auStack64,param_1);
  return;
}



void proc_7F08BD48(undefined4 *param_1,int param_2)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 auStack64 [16];
  
  iVar1 = 0;
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      proc_7F058020(puVar2,auStack64);
      proc_7F058C9C((int)auStack64,param_1 + iVar1 * 0x10);
      iVar1 += 1;
      puVar2 = puVar2 + 0x10;
    } while (iVar1 != param_2);
  }
  return;
}



void proc_7F08BDC4(uint *param_1)

{
  undefined4 auStack64 [12];
  float fStack16;
  float fStack12;
  float fStack8;
  
  proc_7F058020(param_1,auStack64);
  fStack16 = fStack16 - (float)ptr_BONDdata->previous_model_xpos;
  fStack12 = fStack12 - (float)ptr_BONDdata->previous_model_ypos;
  fStack8 = fStack8 - (float)ptr_BONDdata->previous_model_zpos;
  proc_7F058C9C((int)auStack64,param_1);
  return;
}



void proc_7F08BE2C(undefined4 *param_1,int param_2)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 auStack64 [12];
  float fStack16;
  float fStack12;
  float fStack8;
  
  iVar1 = 0;
  if (0 < param_2) {
    puVar2 = param_1;
    do {
      proc_7F058020(puVar2,auStack64);
      fStack16 = fStack16 - (float)ptr_BONDdata->previous_model_xpos;
      fStack12 = fStack12 - (float)ptr_BONDdata->previous_model_ypos;
      fStack8 = fStack8 - (float)ptr_BONDdata->previous_model_zpos;
      proc_7F058C9C((int)auStack64,param_1 + iVar1 * 0x10);
      iVar1 += 1;
      puVar2 = puVar2 + 0x10;
    } while (iVar1 != param_2);
  }
  return;
}



void proc_7F08BEEC(float *param_1,int param_2)

{
  float *pfVar1;
  float *pfVar2;
  int iVar3;
  undefined auStack64 [48];
  float fStack16;
  float fStack12;
  float fStack8;
  
  iVar3 = 0;
  if (0 < param_2) {
    pfVar2 = param_1;
    do {
      pfVar1 = (float *)proc_7F078444();
      proc_7F05818C(pfVar1,pfVar2,(int)auStack64);
      fStack16 = fStack16 - (float)ptr_BONDdata->current_model_xpos;
      fStack12 = fStack12 - (float)ptr_BONDdata->current_model_ypos;
      fStack8 = fStack8 - (float)ptr_BONDdata->current_model_zpos;
      proc_7F058C9C((int)auStack64,(uint *)(param_1 + iVar3 * 0x10));
      iVar3 += 1;
      pfVar2 = pfVar2 + 0x10;
    } while (iVar3 != param_2);
  }
  return;
}



int getMissiontime(void)

{
  return missiontime;
}



void trigger_explosions_around_player(int delay)

{
  dword_80036444 = 1;
  DAT_8007999c = delay + global_timer;
  DAT_800799a0 = 0;
  return;
}



void reinit_BONDdata_inventory(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar1 = 0;
  iVar2 = 0;
  if (ptr_BONDdata->items_max < 1) {
    ptr_BONDdata->ptr_inventory_first_in_cycle = 0;
  }
  else {
    iVar3 = ptr_BONDdata->p_itemcur;
    while( true ) {
      iVar1 += 1;
      *(undefined4 *)(iVar3 + iVar2) = 0xffffffff;
      iVar2 += 0x14;
      if (ptr_BONDdata->items_max <= iVar1) break;
      iVar3 = ptr_BONDdata->p_itemcur;
    }
    ptr_BONDdata->ptr_inventory_first_in_cycle = 0;
  }
  ptr_BONDdata->field_11F4 = 0;
  ptr_BONDdata->field_11F0 = 0;
  return;
}



void proc_7F08C054(int *param_1)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int *piVar7;
  int iVar8;
  
  iVar1 = *param_1;
  iVar3 = -1;
  iVar4 = -1;
  if (iVar1 == 1) {
    iVar3 = param_1[1];
  }
  else {
    if (iVar1 == 3) {
      iVar3 = param_1[1];
      iVar4 = param_1[2];
    }
    else {
      if (iVar1 == 2) {
        iVar3 = 2000;
      }
    }
  }
  piVar5 = (int *)param_1[3];
  if (piVar5 != (int *)ptr_BONDdata->ptr_inventory_first_in_cycle) {
    do {
      iVar1 = *piVar5;
      iVar6 = -1;
      iVar8 = -1;
      if (iVar1 == 1) {
        iVar6 = piVar5[1];
LAB_7f08c104:
        bVar2 = iVar6 < iVar3;
      }
      else {
        if (iVar1 == 3) {
          iVar6 = piVar5[1];
          iVar8 = piVar5[2];
          goto LAB_7f08c104;
        }
        if (iVar1 == 2) {
          iVar6 = 1000;
          goto LAB_7f08c104;
        }
        bVar2 = -1 < iVar3;
      }
      if (bVar2) {
        piVar7 = (int *)piVar5[3];
      }
      else {
        if (iVar3 != iVar6) {
          return;
        }
        if (iVar4 <= iVar8) {
          return;
        }
        piVar7 = (int *)piVar5[3];
      }
      if (param_1 == piVar7) {
        *(int **)&ptr_BONDdata->ptr_inventory_first_in_cycle = piVar5;
        piVar7 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
LAB_7f08c17c:
        piVar5 = (int *)param_1[3];
      }
      else {
        *(int **)(param_1 + 3) = piVar7;
        piVar5[4] = param_1[4];
        *(int **)(param_1 + 4) = piVar5;
        *(int **)(piVar5 + 3) = param_1;
        *(int **)(param_1[3] + 0x10) = param_1;
        *(int **)(piVar5[4] + 0xc) = piVar5;
        piVar7 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
        if (param_1 == piVar7) {
          *(int **)&ptr_BONDdata->ptr_inventory_first_in_cycle = piVar5;
          piVar7 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
          goto LAB_7f08c17c;
        }
        piVar5 = (int *)param_1[3];
      }
    } while (piVar5 != piVar7);
  }
  return;
}



void add_additional_weapon_slot_to_player_inventory_documentation_guess(int *param_1)

{
  int iVar1;
  
  iVar1 = ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (iVar1 == 0) {
    *(int **)(param_1 + 3) = param_1;
    *(int **)(param_1 + 4) = param_1;
  }
  else {
    param_1[3] = iVar1;
    param_1[4] = *(int *)(ptr_BONDdata->ptr_inventory_first_in_cycle + 0x10);
    *(int **)(iVar1 + 0x10) = param_1;
    *(int **)(param_1[4] + 0xc) = param_1;
  }
  *(int **)&ptr_BONDdata->ptr_inventory_first_in_cycle = param_1;
  proc_7F08C054(param_1);
  return;
}



void reorder_inventory_ptrs_based_on_id_code(undefined4 *param_1)

{
  undefined4 *puVar1;
  int iVar2;
  
  puVar1 = (undefined4 *)param_1[3];
  iVar2 = param_1[4];
  if (param_1 == (undefined4 *)ptr_BONDdata->ptr_inventory_first_in_cycle) {
    if (param_1 == puVar1) {
      ptr_BONDdata->ptr_inventory_first_in_cycle = 0;
    }
    else {
      *(undefined4 **)&ptr_BONDdata->ptr_inventory_first_in_cycle = puVar1;
    }
    puVar1[4] = iVar2;
  }
  else {
    puVar1[4] = iVar2;
  }
  *(undefined4 **)(iVar2 + 0xc) = puVar1;
  *param_1 = 0xffffffff;
  return;
}



int get_ptr_next_available_weapon(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  
  iVar2 = 0;
  if (0 < ptr_BONDdata->items_max) {
    iVar3 = 0;
    piVar4 = (int *)ptr_BONDdata->p_itemcur;
    do {
      iVar1 = *piVar4;
      iVar2 += 1;
      piVar4 = piVar4 + 5;
      if (iVar1 == -1) {
        return (int)(int *)ptr_BONDdata->p_itemcur + iVar3;
      }
      iVar3 += 0x14;
    } while (iVar2 < ptr_BONDdata->items_max);
  }
  return 0;
}



void set_BONDdata_allguns_flag(int param_1)

{
  ptr_BONDdata->flag_for_allguns = param_1;
  return;
}



int get_BONDdata_allguns_flag(void)

{
  return ptr_BONDdata->flag_for_allguns;
}



int * get_ptr_inventory_item(int item)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 != NULL) {
    iVar3 = *piVar1;
    piVar2 = piVar1;
    while( true ) {
      if (iVar3 == 1) {
        if (item == piVar2[1]) {
          return piVar2;
        }
        piVar2 = (int *)piVar2[3];
      }
      else {
        piVar2 = (int *)piVar2[3];
      }
      if ((piVar2 == piVar1) || (piVar2 == NULL)) break;
      iVar3 = *piVar2;
    }
  }
  return NULL;
}



BOOL is_weapon_in_inv(weaponid id)

{
  int *piVar1;
  
  piVar1 = get_ptr_inventory_item((int)(char)id);
  return (BOOL)(uint)(piVar1 != NULL);
}



int * get_ptr_inventory_for_item_in_hand(int item,int hand)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 != NULL) {
    iVar3 = *piVar1;
    piVar2 = piVar1;
    while( true ) {
      if (iVar3 == 3) {
        if (item == piVar2[1]) {
          if (hand == piVar2[2]) {
            return piVar2;
          }
          piVar2 = (int *)piVar2[3];
        }
        else {
          piVar2 = (int *)piVar2[3];
        }
      }
      else {
        piVar2 = (int *)piVar2[3];
      }
      if ((piVar2 == piVar1) || (piVar2 == NULL)) break;
      iVar3 = *piVar2;
    }
  }
  return NULL;
}



ulonglong is_item_for_hand_in_inventory(int item,int hand)

{
  int *piVar1;
  
  piVar1 = get_ptr_inventory_for_item_in_hand(item,hand);
  return (ulonglong)(piVar1 != NULL);
}



ulonglong check_if_item_available(ITEM_IDS weaponid)

{
  ulonglong uVar1;
  BOOL BVar2;
  
  if (((ptr_BONDdata->flag_for_allguns == 0) || (weaponid == ITEM_UNARMED)) ||
     (0x20 < (int)weaponid)) {
    BVar2 = is_weapon_in_inv((weaponid)weaponid);
    uVar1 = SEXT48((int)BVar2);
  }
  else {
    uVar1 = 1;
  }
  return uVar1;
}



ulonglong check_if_item_for_hand_available(ITEM_IDS item,int hand)

{
  ulonglong uVar1;
  
  if ((((ptr_BONDdata->flag_for_allguns != 0) && ((int)item < 0x21)) && (item == hand)) &&
     ((uVar1 = get_num_players(), uVar1 == 1 &&
      (uVar1 = check_special_attributes(item,0x100000), uVar1 != 0)))) {
    return 1;
  }
  uVar1 = is_item_for_hand_in_inventory(item,hand);
  return uVar1;
}



undefined8 add_item_to_inventory(ITEM_IDS item)

{
  BOOL BVar2;
  undefined8 uVar1;
  int *piVar3;
  
  BVar2 = is_weapon_in_inv((weaponid)item);
  if (BVar2 == FALSE) {
    piVar3 = (int *)get_ptr_next_available_weapon();
    if (piVar3 != NULL) {
      *piVar3 = 1;
      piVar3[1] = item;
      add_additional_weapon_slot_to_player_inventory_documentation_guess(piVar3);
    }
    if ((ptr_BONDdata->flag_for_allguns == 0) || (0x20 < (int)item)) {
      uVar1 = 1;
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 add_doubles_item_to_inventory(int right,int left)

{
  ulonglong uVar1;
  undefined8 uVar2;
  int *piVar3;
  
  uVar1 = is_item_for_hand_in_inventory(right,left);
  if (uVar1 == 0) {
    piVar3 = (int *)get_ptr_next_available_weapon();
    if (piVar3 != NULL) {
      *piVar3 = 3;
      piVar3[1] = right;
      piVar3[2] = left;
      add_additional_weapon_slot_to_player_inventory_documentation_guess(piVar3);
    }
    uVar2 = 1;
  }
  else {
    uVar2 = 0;
  }
  return uVar2;
}



int proc_7F08C570(char param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 != NULL) {
    piVar3 = (int *)piVar1[3];
    do {
      if ((((*piVar3 == 2) && (*(char *)piVar3[1] == '\x04')) &&
          (iVar2 = *(int *)((char *)piVar3[1] + 4), *(char *)(iVar2 + 3) == '\b')) &&
         (param_1 == *(char *)(iVar2 + 0x80))) {
        reorder_inventory_ptrs_based_on_id_code(piVar3);
        return iVar2;
      }
      if (piVar3 == piVar1) {
        return 0;
      }
      piVar3 = (int *)piVar3[3];
    } while (piVar1 != NULL);
  }
  return 0;
}



void proc_7F08C61C(longlong param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  int *piVar4;
  
  piVar3 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar3 != NULL) {
    piVar4 = (int *)piVar3[3];
    do {
      piVar1 = (int *)piVar4[3];
      if (*piVar4 == 2) {
        if (((*(char *)piVar4[1] == '\x04') &&
            (iVar2 = *(int *)((char *)piVar4[1] + 4), *(char *)(iVar2 + 3) == '\b')) &&
           (param_1 == (longlong)*(char *)(iVar2 + 0x80))) {
          reorder_inventory_ptrs_based_on_id_code(piVar4);
          piVar3 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
        }
      }
      else {
        if ((*piVar4 == 1) && (param_1 == (longlong)piVar4[1])) {
          reorder_inventory_ptrs_based_on_id_code(piVar4);
          piVar3 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
        }
      }
    } while ((piVar4 != piVar3) && (piVar4 = piVar1, piVar3 != NULL));
  }
  return;
}



undefined8 proc_7F08C724(int param_1)

{
  int *piVar1;
  
  piVar1 = (int *)get_ptr_next_available_weapon();
  if (piVar1 != NULL) {
    *piVar1 = 2;
    piVar1[1] = param_1;
    add_additional_weapon_slot_to_player_inventory_documentation_guess(piVar1);
  }
  return 1;
}



ulonglong proc_7F08C764(char *param_1)

{
  char cVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  ulonglong uVar5;
  
  uVar5 = 0;
  if ((*param_1 == '\x04') && (iVar3 = *(int *)(param_1 + 4), *(char *)(iVar3 + 3) == '\b')) {
    cVar1 = *(char *)(iVar3 + 0x80);
    uVar5 = add_item_to_inventory((int)cVar1);
    iVar4 = *(int *)(iVar3 + 0x84);
    if (iVar4 == 0) {
      cVar2 = *(char *)(iVar3 + 0x81);
      if (-1 < cVar2) {
        if (*(int *)(iVar3 + 8) << 3 < 0) {
          uVar5 = add_doubles_item_to_inventory((int)cVar2,(int)cVar1);
        }
        else {
          uVar5 = add_doubles_item_to_inventory((int)cVar1,(int)cVar2);
        }
      }
    }
    else {
      if (*(int *)(iVar3 + 8) << 3 < 0) {
        uVar5 = is_item_for_hand_in_inventory((int)*(char *)(iVar4 + 0x80),(int)cVar1);
      }
      else {
        uVar5 = is_item_for_hand_in_inventory((int)cVar1,(int)*(char *)(iVar4 + 0x80));
      }
      uVar5 = (ulonglong)(uVar5 == 0);
      *(char *)(*(int *)(iVar3 + 0x84) + 0x81) = cVar1;
      *(undefined4 *)(*(int *)(iVar3 + 0x84) + 0x84) = 0;
      *(undefined4 *)(iVar3 + 0x84) = 0;
    }
  }
  return uVar5;
}



// WARNING: Instruction at (ram,0x7f08c954) overlaps instruction at (ram,0x7f08c950)
// 

void proc_7F08C86C(int *param_1,int *param_2,longlong param_3)

{
  longlong lVar1;
  ulonglong uVar2;
  int item;
  int iVar3;
  int *piVar4;
  int item_00;
  int iVar5;
  int iVar6;
  
  piVar4 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  iVar5 = *param_1;
  iVar6 = *param_2;
  if (piVar4 != NULL) {
    item_00 = *piVar4;
    do {
      if (item_00 == 1) {
        item_00 = piVar4[1];
        if ((item_00 < 0x21) && (iVar5 < item_00)) {
          if (param_3 != 0) {
            lVar1 = check_if_have_ammo_for_item(item_00);
            if (lVar1 == 0) goto LAB_7f08c968;
            item_00 = piVar4[1];
          }
          iVar5 = item_00;
          iVar6 = 0;
          break;
        }
      }
      else {
        if (((item_00 == 3) &&
            ((item_00 = piVar4[1], iVar5 < item_00 || ((iVar5 == item_00 && (iVar6 < piVar4[2]))))))
           && ((param_3 == 0 ||
               ((lVar1 = check_if_have_ammo_for_item(item_00), lVar1 != 0 ||
                (lVar1 = check_if_have_ammo_for_item(piVar4[2]), lVar1 != 0)))))) {
          iVar5 = piVar4[1];
          iVar6 = piVar4[2];
          break;
        }
      }
LAB_7f08c968:
      piVar4 = (int *)piVar4[3];
      if (piVar4 == (int *)ptr_BONDdata->ptr_inventory_first_in_cycle) {
        if (param_3 != 0) {
          item_00 = ptr_BONDdata->flag_for_allguns;
          goto LAB_7f08c99c;
        }
        iVar5 = -1;
        iVar6 = -1;
      }
      if (piVar4 == NULL) break;
      item_00 = *piVar4;
    } while( true );
  }
  item_00 = ptr_BONDdata->flag_for_allguns;
LAB_7f08c99c:
  item = iVar5;
  iVar3 = iVar6;
  if (item_00 == 0) goto LAB_7f08cae8;
  item_00 = *param_1;
  uVar2 = get_num_players();
  if (((uVar2 == 1) && (uVar2 = check_special_attributes(*param_1,0x100000), uVar2 != 0)) &&
     (item = *param_1, *param_2 < item)) {
    if (param_3 != 0) {
      lVar1 = check_if_have_ammo_for_item(item);
      if (lVar1 == 0) goto LAB_7f08ca30;
      item = *param_1;
    }
    iVar3 = item;
    if ((iVar5 != item) || (iVar3 = item, item < iVar6)) goto LAB_7f08cae8;
  }
LAB_7f08ca30:
  if ((iVar5 != *param_1) || (item = iVar5, iVar3 = iVar6, iVar6 == *param_2)) {
    do {
      item = item_00 + 1;
      item_00 = item % 0x21;
      iVar3 = item_00 + 1;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (item == -0x80000000)) {
        trap(0x1800);
      }
      if (item_00 == 0) {
        item_00 = iVar3 % 0x21;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar3 == -0x80000000)) {
          trap(0x1800);
        }
      }
      if ((param_3 == 0) || (lVar1 = check_if_have_ammo_for_item(item_00), lVar1 != 0)) {
        item = item_00;
        iVar3 = 0;
        break;
      }
      item = iVar5;
      iVar3 = iVar6;
    } while (item_00 != iVar5);
  }
LAB_7f08cae8:
  *param_1 = item;
  *param_2 = iVar3;
  return;
}



// WARNING: Instruction at (ram,0x7f08cc18) overlaps instruction at (ram,0x7f08cc14)
// 

void proc_7F08CB10(int *param_1,int *param_2,longlong param_3)

{
  int *piVar1;
  longlong lVar2;
  ulonglong uVar3;
  int iVar4;
  int iVar5;
  int item;
  int iVar6;
  int iVar7;
  
  iVar6 = *param_1;
  iVar7 = *param_2;
  if (ptr_BONDdata->ptr_inventory_first_in_cycle != 0) {
    piVar1 = *(int **)(ptr_BONDdata->ptr_inventory_first_in_cycle + 0x10);
    do {
      if (*piVar1 == 1) {
        item = piVar1[1];
        if ((item < 0x21) && ((item < iVar6 || ((iVar6 == item && (0 < iVar7)))))) {
          if (param_3 != 0) {
            lVar2 = check_if_have_ammo_for_item(item);
            if (lVar2 == 0) goto LAB_7f08cc2c;
            item = piVar1[1];
          }
          iVar6 = item;
          iVar7 = 0;
          break;
        }
      }
      else {
        if (((*piVar1 == 3) &&
            ((item = piVar1[1], item < iVar6 || ((iVar6 == item && (piVar1[2] < iVar7)))))) &&
           ((param_3 == 0 ||
            ((lVar2 = check_if_have_ammo_for_item(item), lVar2 != 0 ||
             (lVar2 = check_if_have_ammo_for_item(piVar1[2]), lVar2 != 0))))))
        goto code_r0x7f08cc1c;
      }
LAB_7f08cc2c:
      if (piVar1 == (int *)ptr_BONDdata->ptr_inventory_first_in_cycle) {
        if (param_3 != 0) {
          item = ptr_BONDdata->flag_for_allguns;
          goto LAB_7f08cc5c;
        }
        iVar6 = 1000;
        iVar7 = 1000;
      }
      piVar1 = (int *)piVar1[4];
    } while( true );
  }
LAB_7f08cc58:
  item = ptr_BONDdata->flag_for_allguns;
LAB_7f08cc5c:
  if (item != 0) {
    item = *param_1;
    if (*param_2 == 0) {
      iVar4 = item + 0x20;
      item = iVar4 % 0x21;
      iVar5 = item + 0x20;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar4 == -0x80000000)) {
        trap(0x1800);
      }
      if (item == 0) {
        item = iVar5 % 0x21;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (iVar5 == -0x80000000)) {
          trap(0x1800);
        }
      }
    }
    while (item != iVar6) {
      if ((param_3 == 0) || (lVar2 = check_if_have_ammo_for_item(item), lVar2 != 0)) {
        uVar3 = get_num_players();
        if (((uVar3 != 1) || (uVar3 = check_special_attributes(item,0x100000), uVar3 == 0)) ||
           ((iVar4 = item, iVar5 = item, item == *param_1 &&
            (iVar4 = item, iVar5 = item, *param_2 <= item)))) {
          iVar4 = item;
          iVar5 = 0;
        }
        goto LAB_7f08ce44;
      }
      iVar4 = item + 0x20;
      item = iVar4 % 0x21;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar4 == -0x80000000)) {
        trap(0x1800);
      }
      if (item == 0) {
        item = 0x20;
        if (false) {
          trap(0x1c00);
        }
        if ((false) && (false)) {
          trap(0x1800);
        }
      }
    }
    uVar3 = get_num_players();
    iVar4 = iVar6;
    iVar5 = iVar7;
    if ((uVar3 != 1) ||
       (((uVar3 = check_special_attributes(item,0x100000), uVar3 != 0 &&
         ((param_3 == 0 || (lVar2 = check_if_have_ammo_for_item(item), lVar2 != 0)))) &&
        (((item == *param_1 && (iVar4 = iVar6, iVar5 = iVar7, *param_2 <= item)) ||
         (iVar4 = item, iVar5 = item, iVar7 < item)))))) {
LAB_7f08ce44:
      iVar6 = iVar4;
      iVar7 = iVar5;
    }
  }
  *param_1 = iVar6;
  *param_2 = iVar7;
  return;
code_r0x7f08cc1c:
  iVar6 = piVar1[1];
  iVar7 = piVar1[2];
  goto LAB_7f08cc58;
}



undefined8 proc_7F08CE70(uint param_1)

{
  int *piVar1;
  uint uVar2;
  int *piVar3;
  int iVar4;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  uVar2 = 0;
  if (piVar1 != NULL) {
    iVar4 = *piVar1;
    piVar3 = piVar1;
    while( true ) {
      if (iVar4 == 2) {
        if (*(char *)piVar3[1] == '\x01') {
          iVar4 = *(int *)((char *)piVar3[1] + 4);
          if (*(char *)(iVar4 + 3) == '\x04') {
            uVar2 |= *(uint *)(iVar4 + 0x80);
            if (param_1 == (param_1 & uVar2)) {
              return 1;
            }
            piVar3 = (int *)piVar3[3];
          }
          else {
            piVar3 = (int *)piVar3[3];
          }
        }
        else {
          piVar3 = (int *)piVar3[3];
        }
      }
      else {
        piVar3 = (int *)piVar3[3];
      }
      if (piVar3 == piVar1) {
        return 0;
      }
      if (piVar3 == NULL) break;
      iVar4 = *piVar3;
    }
  }
  return 0;
}



undefined8 proc_7F08CF0C(void)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 != NULL) {
    iVar3 = *piVar1;
    piVar2 = piVar1;
    while( true ) {
      if (iVar3 == 2) {
        if (*(char *)piVar2[1] == '\x04') {
          if (*(short *)(*(int *)((char *)piVar2[1] + 4) + 4) == 0xf8) {
            return 1;
          }
          piVar2 = (int *)piVar2[3];
        }
        else {
          piVar2 = (int *)piVar2[3];
        }
      }
      else {
        piVar2 = (int *)piVar2[3];
      }
      if ((piVar2 == piVar1) || (piVar2 == NULL)) break;
      iVar3 = *piVar2;
    }
  }
  return 0;
}



ulonglong proc_7F08CF80(void)

{
  ulonglong uVar1;
  BOOL BVar2;
  
  uVar1 = 0;
  if (ptr_BONDdata->player_button_control == 0) {
    BVar2 = is_weapon_in_inv(0x58);
    uVar1 = SEXT48((int)BVar2);
  }
  return uVar1;
}



void proc_7F08CFC0(void)

{
  is_weapon_in_inv(GOLDGUN);
  return;
}



undefined8 proc_7F08CFE0(int param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 != NULL) {
    iVar3 = *piVar1;
    piVar2 = piVar1;
    while( true ) {
      if (iVar3 == 2) {
        if (param_1 == piVar2[1]) {
          return 1;
        }
        piVar2 = (int *)piVar2[3];
      }
      else {
        piVar2 = (int *)piVar2[3];
      }
      if ((piVar2 == piVar1) || (piVar2 == NULL)) break;
      iVar3 = *piVar2;
    }
  }
  return 0;
}



int proc_7F08D038(void)

{
  int *piVar1;
  int iVar2;
  char *pcVar3;
  int iVar4;
  int *piVar5;
  
  iVar4 = 0;
  if (ptr_BONDdata->flag_for_allguns != 0) {
    iVar4 = 0x20;
  }
  piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  if (piVar1 == NULL) {
    return iVar4;
  }
  iVar2 = *piVar1;
  piVar5 = piVar1;
  do {
    if (iVar2 == 2) {
      pcVar3 = (char *)piVar5[1];
      if (*pcVar3 == '\x04') {
        if ((*(uint *)(*(int *)(pcVar3 + 4) + 100) & 0x400) == 0) {
          piVar5 = (int *)piVar5[3];
        }
        else {
LAB_7f08d0ec:
          iVar4 += 1;
          piVar5 = (int *)piVar5[3];
        }
      }
      else {
        if (*pcVar3 == '\x01') {
          if ((*(uint *)(*(int *)(pcVar3 + 4) + 0xc) & 0x40000) == 0) goto LAB_7f08d0ec;
          piVar5 = (int *)piVar5[3];
        }
        else {
          piVar5 = (int *)piVar5[3];
        }
      }
    }
    else {
      if (iVar2 == 1) {
        if ((ptr_BONDdata->flag_for_allguns == 0) || (0x20 < piVar5[1])) goto LAB_7f08d0ec;
        piVar5 = (int *)piVar5[3];
      }
      else {
        piVar5 = (int *)piVar5[3];
      }
    }
    if (piVar5 == piVar1) {
      return iVar4;
    }
    if (piVar5 == NULL) {
      return iVar4;
    }
    iVar2 = *piVar5;
  } while( true );
}



int * proc_7F08D108(int param_1)

{
  int *piVar1;
  int iVar2;
  char *pcVar3;
  bool bVar4;
  int *piVar5;
  
  bVar4 = param_1 < 0x20;
  if (ptr_BONDdata->flag_for_allguns == 0) {
    piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  }
  else {
    param_1 += -0x20;
    if (bVar4) {
      return NULL;
    }
    piVar1 = (int *)ptr_BONDdata->ptr_inventory_first_in_cycle;
  }
  if (piVar1 == NULL) {
    return NULL;
  }
  iVar2 = *piVar1;
  piVar5 = piVar1;
  do {
    if (iVar2 == 2) {
      pcVar3 = (char *)piVar5[1];
      if (*pcVar3 == '\x04') {
        if ((*(uint *)(*(int *)(pcVar3 + 4) + 100) & 0x400) == 0) {
          piVar5 = (int *)piVar5[3];
        }
        else {
          if (param_1 == 0) {
            return piVar5;
          }
LAB_7f08d1fc:
          param_1 += -1;
          piVar5 = (int *)piVar5[3];
        }
      }
      else {
        if (*pcVar3 == '\x01') {
          if ((*(uint *)(*(int *)(pcVar3 + 4) + 0xc) & 0x40000) == 0) {
            if (param_1 == 0) {
              return piVar5;
            }
            goto LAB_7f08d1fc;
          }
          piVar5 = (int *)piVar5[3];
        }
        else {
          piVar5 = (int *)piVar5[3];
        }
      }
    }
    else {
      if (iVar2 == 1) {
        if ((ptr_BONDdata->flag_for_allguns == 0) || (0x20 < piVar5[1])) {
          if (param_1 == 0) {
            return piVar5;
          }
          goto LAB_7f08d1fc;
        }
        piVar5 = (int *)piVar5[3];
      }
      else {
        piVar5 = (int *)piVar5[3];
      }
    }
    if (piVar5 == piVar1) {
      return NULL;
    }
    if (piVar5 == NULL) {
      return NULL;
    }
    iVar2 = *piVar5;
  } while( true );
}



int proc_7F08D21C(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = ptr_BONDdata->field_11F4;
  if (iVar1 != 0) {
    iVar2 = *(int *)(iVar1 + 0x24);
    while( true ) {
      if (param_1 == iVar2) {
        return iVar1;
      }
      iVar1 = *(int *)(iVar1 + 0x20);
      if (iVar1 == 0) break;
      iVar2 = *(int *)(iVar1 + 0x24);
    }
  }
  return 0;
}



int proc_7F08D25C(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = ptr_BONDdata->field_11F4;
  if (iVar1 != 0) {
    iVar2 = *(int *)(iVar1 + 4);
    while( true ) {
      if (iVar2 == 0) {
        if (param_1 == *(int *)(iVar1 + 8)) {
          return iVar1;
        }
        iVar1 = *(int *)(iVar1 + 0x20);
      }
      else {
        iVar1 = *(int *)(iVar1 + 0x20);
      }
      if (iVar1 == 0) break;
      iVar2 = *(int *)(iVar1 + 4);
    }
  }
  return 0;
}



int proc_7F08D2A8(int param_1)

{
  int *piVar1;
  int iVar2;
  
  piVar1 = proc_7F08D108(param_1);
  if (piVar1 == NULL) {
    if (ptr_BONDdata->flag_for_allguns == 0) {
      param_1 = 0;
    }
    else {
      if (param_1 < 0x20) {
        param_1 += 1;
      }
      else {
        param_1 = 0;
      }
    }
  }
  else {
    if (*piVar1 == 2) {
      iVar2 = proc_7F08D21C(*(int *)(piVar1[1] + 4));
      if (iVar2 == 0) {
        param_1 = 0;
      }
      else {
        param_1 = *(int *)(iVar2 + 8);
      }
    }
    else {
      if (*piVar1 == 1) {
        param_1 = piVar1[1];
      }
      else {
        param_1 = 0;
      }
    }
  }
  return param_1;
}



int proc_7F08D340(int param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar3;
  int item;
  
  piVar1 = proc_7F08D108(param_1);
  item = 0;
  if (piVar1 == NULL) {
    if ((ptr_BONDdata->flag_for_allguns != 0) && (param_1 < 0x20)) {
      item = get_ptr_short_watch_text_for_item(param_1 + 1);
      return item;
    }
  }
  else {
    if (*piVar1 == 2) {
      iVar2 = proc_7F08D21C(*(int *)(piVar1[1] + 4));
      item = 0;
      if (iVar2 != 0) {
        if (*(int *)(iVar2 + 0x14) != 0) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x14));
          return (int)pbVar3;
        }
        item = *(int *)(iVar2 + 8);
      }
    }
    else {
      if (*piVar1 == 1) {
        item = piVar1[1];
        iVar2 = proc_7F08D25C(item);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x14) != 0)) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x14));
          return (int)pbVar3;
        }
      }
    }
  }
  item = get_ptr_short_watch_text_for_item(item);
  return item;
}



int proc_7F08D434(int param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar3;
  int item;
  
  piVar1 = proc_7F08D108(param_1);
  item = 0;
  if (piVar1 == NULL) {
    if ((ptr_BONDdata->flag_for_allguns != 0) && (param_1 < 0x20)) {
      item = get_ptr_long_watch_text_for_item(param_1 + 1);
      return item;
    }
  }
  else {
    if (*piVar1 == 2) {
      iVar2 = proc_7F08D21C(*(int *)(piVar1[1] + 4));
      item = 0;
      if (iVar2 != 0) {
        if (*(int *)(iVar2 + 0x18) != 0) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x18));
          return (int)pbVar3;
        }
        item = *(int *)(iVar2 + 8);
      }
    }
    else {
      if (*piVar1 == 1) {
        item = piVar1[1];
        iVar2 = proc_7F08D25C(item);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x18) != 0)) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x18));
          return (int)pbVar3;
        }
      }
    }
  }
  item = get_ptr_long_watch_text_for_item(item);
  return item;
}



int proc_7F08D528(int param_1)

{
  int iVar1;
  
  iVar1 = proc_7F08D2A8(param_1);
  get_45_degree_angle_0();
  return iVar1;
}



int proc_7F08D550(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_horizontal_offset_on_solo_watch_menu_for_item(item);
  return item;
}



int proc_7F08D578(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_vertical_offset_on_solo_watch_menu_for_item(item);
  return item;
}



int proc_7F08D5A0(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_depth_offset_solo_watch_menu_inventory_page_for_item(item);
  return item;
}



int proc_7F08D5C8(int param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar3;
  int item;
  
  piVar1 = proc_7F08D108(param_1);
  item = 0;
  if (piVar1 == NULL) {
    if ((ptr_BONDdata->flag_for_allguns != 0) && (param_1 < 0x20)) {
      item = get_ptr_first_title_line_item(param_1 + 1);
      return item;
    }
  }
  else {
    if (*piVar1 == 2) {
      iVar2 = proc_7F08D21C(*(int *)(piVar1[1] + 4));
      item = 0;
      if (iVar2 != 0) {
        if (*(int *)(iVar2 + 0xc) != 0) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0xc));
          return (int)pbVar3;
        }
        item = *(int *)(iVar2 + 8);
      }
    }
    else {
      if (*piVar1 == 1) {
        item = piVar1[1];
        iVar2 = proc_7F08D25C(item);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0xc) != 0)) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0xc));
          return (int)pbVar3;
        }
      }
    }
  }
  item = get_ptr_first_title_line_item(item);
  return item;
}



int proc_7F08D6BC(int param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar3;
  int item;
  
  piVar1 = proc_7F08D108(param_1);
  item = 0;
  if (piVar1 == NULL) {
    if ((ptr_BONDdata->flag_for_allguns != 0) && (param_1 < 0x20)) {
      item = get_ptr_second_title_line_item(param_1 + 1);
      return item;
    }
  }
  else {
    if (*piVar1 == 2) {
      iVar2 = proc_7F08D21C(*(int *)(piVar1[1] + 4));
      item = 0;
      if (iVar2 != 0) {
        if (*(int *)(iVar2 + 0x10) != 0) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x10));
          return (int)pbVar3;
        }
        item = *(int *)(iVar2 + 8);
      }
    }
    else {
      if (*piVar1 == 1) {
        item = piVar1[1];
        iVar2 = proc_7F08D25C(item);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 0x10) != 0)) {
          pbVar3 = get_textptr_for_textID((u16)*(undefined4 *)(iVar2 + 0x10));
          return (int)pbVar3;
        }
      }
    }
  }
  item = get_ptr_second_title_line_item(item);
  return item;
}



int proc_7F08D7B0(int param_1)

{
  int iVar1;
  
  iVar1 = proc_7F08D2A8(param_1);
  get_45_degree_angle();
  return iVar1;
}



int proc_7F08D7D8(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_vertical_position_solo_watch_menu_main_page_for_item(item);
  return item;
}



int proc_7F08D800(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_lateral_position_solo_watch_menu_main_page_for_item(item);
  return item;
}



int proc_7F08D828(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_depth_on_solo_watch_menu_page_for_item(item);
  return item;
}



int proc_7F08D850(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_zrotation_solo_watch_menu_for_item(item);
  return item;
}



int proc_7F08D878(int param_1)

{
  int item;
  
  item = proc_7F08D2A8(param_1);
  get_xrotation_solo_watch_menu_for_item(item);
  return item;
}



void proc_7F08D8A0(int param_1)

{
  *(int *)(param_1 + 0x20) = ptr_BONDdata->field_11F4;
  ptr_BONDdata->field_11F4 = param_1;
  return;
}



int proc_7F08D8C0(void)

{
  return ptr_BONDdata->field_11F0;
}



void proc_7F08D8D0(int param_1)

{
  ptr_BONDdata->field_11F0 = param_1;
  return;
}



void proc_7F08D8E0(void)

{
  ITEM_IDS IVar1;
  int iVar2;
  ITEM_IDS IVar3;
  int iVar4;
  
  IVar1 = get_item_in_hand(0);
  iVar4 = 0;
  ptr_BONDdata->field_11F0 = 0;
  iVar2 = proc_7F08D038();
  if (0 < iVar2) {
    do {
      IVar3 = proc_7F08D2A8(iVar4);
      if (IVar3 == IVar1) {
        ptr_BONDdata->field_11F0 = iVar4;
        return;
      }
      iVar4 += 1;
      iVar2 = proc_7F08D038();
    } while (iVar4 < iVar2);
  }
  return;
}



int proc_7F08D95C(int param_1)

{
  int iVar1;
  byte *pbVar2;
  
  iVar1 = proc_7F08D21C(param_1);
  if ((iVar1 == 0) || (*(int *)(iVar1 + 0x1c) == 0)) {
    pbVar2 = NULL;
  }
  else {
    pbVar2 = get_textptr_for_textID((u16)*(undefined4 *)(iVar1 + 0x1c));
  }
  return (int)pbVar2;
}



int proc_7F08D9A4(int param_1)

{
  int iVar1;
  byte *pbVar2;
  
  iVar1 = proc_7F08D25C(param_1);
  if ((iVar1 == 0) || (*(int *)(iVar1 + 0x1c) == 0)) {
    pbVar2 = NULL;
  }
  else {
    pbVar2 = get_textptr_for_textID((u16)*(undefined4 *)(iVar1 + 0x1c));
  }
  return (int)pbVar2;
}



void proc_7F08D9EC(int param_1,int param_2)

{
  int iVar1;
  ulonglong uVar2;
  BONDdata *pBVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  uVar2 = check_special_attributes(param_1,0x20000);
  if (uVar2 != 0) {
    uVar2 = check_special_attributes(param_2,0x20000);
    iVar6 = 0x7fffffff;
    iVar7 = 0;
    if (uVar2 == 0) {
      param_2 = 0;
    }
    iVar4 = 0;
    pBVar3 = ptr_BONDdata;
    do {
      iVar5 = pBVar3->field_1200;
      if (iVar5 < 0) {
        iVar5 = 10;
        iVar7 = iVar4;
        break;
      }
      if ((param_1 == pBVar3->index_time_spent_using_item) && (param_2 == pBVar3->field_11FC)) {
        pBVar3->field_1200 = iVar5 + clock_timer;
        iVar5 = iVar4;
        break;
      }
      iVar1 = iVar4;
      if (iVar6 <= iVar5) {
        iVar5 = iVar6;
        iVar1 = iVar7;
      }
      iVar7 = iVar1;
      iVar6 = iVar5;
      iVar4 += 1;
      pBVar3 = (BONDdata *)&pBVar3->zpos;
      iVar5 = iVar4;
    } while (iVar4 < 10);
    if (iVar5 == 10) {
      (&ptr_BONDdata->field_1200)[iVar7 * 3] = clock_timer;
      (&ptr_BONDdata->index_time_spent_using_item)[iVar7 * 3] = param_1;
      (&ptr_BONDdata->field_11FC)[iVar7 * 3] = param_2;
    }
  }
  return;
}



void proc_7F08DB08(undefined4 *param_1,undefined4 *param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  *param_1 = 0;
  iVar2 = -1;
  *param_2 = 0;
  iVar4 = 0;
  do {
    iVar3 = (int)&ptr_BONDdata->unknown + iVar4;
    iVar1 = *(int *)(iVar3 + 0x1200);
    if (iVar1 < 0) {
LAB_7f08db64:
      iVar1 = *(int *)(iVar3 + 0x120c);
    }
    else {
      if (iVar2 < iVar1) {
        *param_1 = *(undefined4 *)(iVar3 + 0x11f8);
        *param_2 = *(undefined4 *)((int)&ptr_BONDdata->field_11FC + iVar4);
        iVar3 = (int)&ptr_BONDdata->unknown + iVar4;
        iVar2 = iVar1;
        goto LAB_7f08db64;
      }
      iVar1 = *(int *)(iVar3 + 0x120c);
    }
    if ((-1 < iVar1) && (iVar2 < iVar1)) {
      *param_1 = *(undefined4 *)(iVar3 + 0x1204);
      *param_2 = *(undefined4 *)((int)&ptr_BONDdata->field_1208 + iVar4);
      iVar2 = iVar1;
    }
    iVar4 += 0x18;
    if (iVar4 == 0x78) {
      return;
    }
  } while( true );
}



void proc_7F08DBB0(void)

{
  *(bool *)&ptr_BONDdata->field_5BC = *(char *)&ptr_BONDdata->field_5BC == '\0';
  return;
}



void proc_7F08DBC8(void)

{
  u32 uVar1;
  float fVar2;
  
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_564 + ptr_BONDdata->field_594 * 3) =
       (fVar2 * 0.00000000 - 0.50000000) * flt_800552E0;
  (&ptr_BONDdata->field_56C)[ptr_BONDdata->field_594 * 3] = 1.00000000;
  uVar1 = get_random_value();
  fVar2 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar2 = fVar2 + 4294967296.00000000;
  }
  *(float *)(&ptr_BONDdata->field_57C + ptr_BONDdata->field_594 * 3) =
       (fVar2 * 0.00000000 - 0.50000000) * flt_800552E4;
  (&ptr_BONDdata->field_580)[ptr_BONDdata->field_594 * 3] = 1.00000000;
  if (ptr_BONDdata->field_594 == 0) {
    uVar1 = get_random_value();
    fVar2 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    *(float *)(&ptr_BONDdata->field_568 + ptr_BONDdata->field_594 * 3) =
         fVar2 * 0.00000000 * flt_800552F0;
    uVar1 = get_random_value();
    fVar2 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    *(float *)(&ptr_BONDdata->field_584 + ptr_BONDdata->field_594 * 3) =
         fVar2 * 0.00000000 * flt_800552F4;
  }
  else {
    uVar1 = get_random_value();
    fVar2 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    *(float *)(&ptr_BONDdata->field_568 + ptr_BONDdata->field_594 * 3) =
         fVar2 * 0.00000000 * flt_800552E8;
    uVar1 = get_random_value();
    fVar2 = (float)uVar1;
    if ((int)uVar1 < 0) {
      fVar2 = fVar2 + 4294967296.00000000;
    }
    *(float *)(&ptr_BONDdata->field_584 + ptr_BONDdata->field_594 * 3) =
         fVar2 * 0.00000000 * flt_800552EC;
  }
  ptr_BONDdata->field_594 = 1 - ptr_BONDdata->field_594;
  return;
}



void proc_7F08DE48(float *param_1)

{
  float fVar1;
  float fVar2;
  int iVar3;
  
  fVar1 = flt_800552F8;
  if (ptr_BONDdata->field_4DC != 0) {
    ptr_BONDdata->velocity = 0.00000000;
    *(float *)&ptr_BONDdata->field_524 = param_1[1] / fVar1;
    ptr_BONDdata->field_528 = 0.00000000;
    ptr_BONDdata->field_4DC = 0;
  }
  fVar2 = flt_80055300;
  fVar1 = master_player_perspective;
  iVar3 = 0;
  if (0 < clock_timer) {
    do {
      iVar3 += 1;
      *(float *)&ptr_BONDdata->velocity = *param_1 + fVar2 * (float)ptr_BONDdata->velocity;
      *(float *)&ptr_BONDdata->field_524 = param_1[1] + fVar2 * (float)ptr_BONDdata->field_524;
      *(float *)&ptr_BONDdata->field_528 = param_1[2] + fVar2 * (float)ptr_BONDdata->field_528;
    } while (iVar3 < clock_timer);
  }
  *(float *)&ptr_BONDdata->scaled_velocity = (float)ptr_BONDdata->velocity * fVar1;
  *(float *)&ptr_BONDdata->field_500 = (float)ptr_BONDdata->field_524 * fVar1;
  *(float *)&ptr_BONDdata->field_504 = (float)ptr_BONDdata->field_528 * fVar1;
  return;
}



void proc_7F08DF44(float *param_1,float *param_2)

{
  int iVar1;
  
  if (ptr_BONDdata->field_4E0 != 0) {
    *(float *)&ptr_BONDdata->field_52C = *param_1 / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    *(float *)&ptr_BONDdata->field_530 = param_1[1] / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    *(float *)&ptr_BONDdata->field_534 = param_1[2] / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    *(float *)&ptr_BONDdata->field_538 = *param_2 / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    *(float *)&ptr_BONDdata->field_53C = param_2[1] / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    *(float *)&ptr_BONDdata->field_540 = param_2[2] / (1.00000000 - (float)ptr_BONDdata->field_4EC);
    ptr_BONDdata->field_4E0 = 0;
  }
  iVar1 = 0;
  if (0 < clock_timer) {
    do {
      iVar1 += 1;
      *(float *)&ptr_BONDdata->field_52C =
           *param_1 + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_52C;
      *(float *)&ptr_BONDdata->field_530 =
           param_1[1] + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_530;
      *(float *)&ptr_BONDdata->field_534 =
           param_1[2] + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_534;
      *(float *)&ptr_BONDdata->field_538 =
           *param_2 + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_538;
      *(float *)&ptr_BONDdata->field_53C =
           param_2[1] + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_53C;
      *(float *)&ptr_BONDdata->field_540 =
           param_2[2] + (float)ptr_BONDdata->field_4EC * (float)ptr_BONDdata->field_540;
    } while (iVar1 < clock_timer);
  }
  *(float *)&ptr_BONDdata->field_508 =
       (float)ptr_BONDdata->field_52C * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  *(float *)&ptr_BONDdata->field_50C =
       (float)ptr_BONDdata->field_530 * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  *(float *)&ptr_BONDdata->field_510 =
       (float)ptr_BONDdata->field_534 * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  *(float *)&ptr_BONDdata->field_514 =
       (float)ptr_BONDdata->field_538 * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  *(float *)&ptr_BONDdata->field_518 =
       (float)ptr_BONDdata->field_53C * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  *(float *)&ptr_BONDdata->field_51C =
       (float)ptr_BONDdata->field_540 * (1.00000000 - (float)ptr_BONDdata->field_4EC);
  return;
}



void proc_7F08E164(float param_1)

{
  float fVar1;
  
  if (param_1 != (float)ptr_BONDdata->field_4EC) {
    fVar1 = 1.00000000 - param_1;
    *(float *)&ptr_BONDdata->field_52C =
         ((float)ptr_BONDdata->field_52C * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_530 =
         ((float)ptr_BONDdata->field_530 * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_534 =
         ((float)ptr_BONDdata->field_534 * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_538 =
         ((float)ptr_BONDdata->field_538 * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_53C =
         ((float)ptr_BONDdata->field_53C * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_540 =
         ((float)ptr_BONDdata->field_540 * (1.00000000 - (float)ptr_BONDdata->field_4EC)) / fVar1;
    *(float *)&ptr_BONDdata->field_4EC = param_1;
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void proc_7F08E240(float param_1,float param_2)

{
  undefined4 uVar1;
  int iVar2;
  uint extraout_a1_lo;
  undefined4 extraout_a2_lo;
  undefined4 extraout_a2_lo_00;
  undefined4 extraout_a2_lo_01;
  undefined4 extraout_a2_lo_02;
  undefined4 extraout_a3_lo;
  undefined4 extraout_a3_lo_00;
  undefined4 extraout_a3_lo_01;
  undefined4 extraout_a3_lo_02;
  f32 **ppfVar3;
  f32 **ppfVar4;
  f32 **ppfVar5;
  f32 **ppfVar6;
  f32 fVar7;
  float *pfVar8;
  float extraout_f12;
  float extraout_f12_00;
  float fVar9;
  float extraout_f12_01;
  float fStack180;
  undefined4 uStack176;
  float fStack172;
  f32 afStack168 [16];
  f32 *apfStack104 [4];
  int *piStack88;
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  f32 fStack8;
  float fStack4;
  
  fStack12 = dword_80036B00;
  fStack8 = (f32)dword_80036B04;
  fStack4 = (float)dword_80036B08;
  fStack24 = dword_80036B0C;
  fStack20 = dword_80036B10;
  fStack16 = flt_80036B14;
  fStack36 = dword_80036B18;
  fStack32 = flt_80036B1C;
  fStack28 = dword_80036B20;
  fStack40 = proc_7F06F618((int)&ptr_BONDdata->field_598);
  ppfVar3 = (f32 **)&dword_80036B24;
  ppfVar5 = apfStack104;
  if (ptr_BONDdata->field_4E8 == 0) {
    if (flt_80055304 < fStack40) {
      ptr_BONDdata->field_4F4 = 1.00000000;
    }
    else {
      if (flt_80055308 < fStack40) {
        *(float *)&ptr_BONDdata->field_4F4 =
             ((fStack40 - flt_80055308) * flt_8005530C) / flt_80055310 + flt_80055314;
      }
      else {
        *(float *)&ptr_BONDdata->field_4F4 = flt_80055318;
      }
    }
    ptr_BONDdata->field_4F8 = ptr_BONDdata->field_4F4;
    ppfVar3 = (f32 **)&dword_80036B24;
  }
  else {
    if (ptr_BONDdata->field_4E8 == 1) {
      *(float *)&ptr_BONDdata->field_4F4 = flt_8005531C;
      ptr_BONDdata->field_4F8 = 0.50000000;
    }
    else {
      ptr_BONDdata->field_4F4 = 1.00000000;
      ptr_BONDdata->field_4F8 = ptr_BONDdata->field_4F4;
    }
  }
  do {
    ppfVar4 = ppfVar3 + 3;
    ppfVar6 = ppfVar5 + 3;
    *ppfVar5 = *ppfVar3;
    ppfVar5[1] = ppfVar3[1];
    ppfVar5[2] = ppfVar3[2];
    ppfVar3 = ppfVar4;
    ppfVar5 = ppfVar6;
  } while (ppfVar4 != (f32 **)&dword_80036B60);
  *ppfVar6 = _dword_80036B60;
  fStack180 = dword_80036B64;
  uStack176 = dword_80036B68;
  fStack172 = dword_80036B6C;
  uVar1 = proc_7F0701E0();
  ptr_BONDdata->field_4E4 = 0;
  proc_7F0701D4(0);
  proc_7F070AEC((int)&ptr_BONDdata->field_598,clock_timer,1);
  proc_7F0701D4(uVar1);
  subcalcpos((int)&ptr_BONDdata->field_598,extraout_a1_lo,extraout_a2_lo,extraout_a3_lo);
  proc_7F057FD0(afStack168);
  apfStack104[0] = afStack168;
  piStack88 = &ptr_BONDdata->field_6D0;
  subcalcmatrices((float **)apfStack104,(uint)&ptr_BONDdata->field_598,extraout_a2_lo_00,
                  extraout_a3_lo_00);
  ptr_BONDdata->field_544 = ptr_BONDdata->field_554;
  ptr_BONDdata->field_548 = ptr_BONDdata->field_558;
  ptr_BONDdata->field_54C = ptr_BONDdata->field_55C;
  getsuboffset((int)&ptr_BONDdata->field_598,&fStack180,extraout_a2_lo_01,extraout_a3_lo_01);
  fStack180 = fStack180 - (float)ptr_BONDdata->field_700;
  fStack172 = fStack172 - (float)ptr_BONDdata->field_708;
  setsuboffset((int)&ptr_BONDdata->field_598,&fStack180,extraout_a2_lo_02,extraout_a3_lo_02);
  if (0.00000000 < fStack40) {
    *(float *)&ptr_BONDdata->field_700 = (float)ptr_BONDdata->field_700 + param_2;
    *(float *)&ptr_BONDdata->field_708 = (float)ptr_BONDdata->field_708 * param_1;
    if (0 < clock_timer) {
      *(float *)&ptr_BONDdata->field_700 = (float)ptr_BONDdata->field_700 / global_timer_delta;
      *(float *)&ptr_BONDdata->field_708 = (float)ptr_BONDdata->field_708 / global_timer_delta;
    }
    fStack12 = (float)ptr_BONDdata->field_700 * (float)ptr_BONDdata->field_4F4;
    fStack8 = (f32)(((float)ptr_BONDdata->field_704 - (float)ptr_BONDdata->stationary_ground_offset)
                    * (float)ptr_BONDdata->field_4F4 + (float)ptr_BONDdata->stationary_ground_offset
                   );
    fStack4 = (float)ptr_BONDdata->field_708 * (float)ptr_BONDdata->field_4F4;
    if (ptr_BONDdata->field_4E8 < 0) {
      fStack24 = (float)ptr_BONDdata->field_6F0;
      fStack20 = (float)ptr_BONDdata->field_6F4;
      fStack16 = (float)ptr_BONDdata->field_6F8;
      fStack36 = (float)ptr_BONDdata->field_6E0;
      fStack32 = (float)ptr_BONDdata->field_6E4;
      fStack28 = (float)ptr_BONDdata->field_6E8;
      proc_7F08E164(flt_80055328);
    }
    else {
      fStack24 = (float)ptr_BONDdata->field_6F0 * (float)ptr_BONDdata->field_4F8;
      fStack20 = (float)ptr_BONDdata->field_6F4 * (float)ptr_BONDdata->field_4F4;
      fStack16 = ((float)ptr_BONDdata->field_6F8 - 1.00000000) * (float)ptr_BONDdata->field_4F4 +
                 1.00000000;
      fStack36 = (float)ptr_BONDdata->field_6E0 * (float)ptr_BONDdata->field_4F4;
      fStack32 = ((float)ptr_BONDdata->field_6E4 - 1.00000000) * (float)ptr_BONDdata->field_4F4 +
                 1.00000000;
      fStack28 = (float)ptr_BONDdata->field_6E8 * (float)ptr_BONDdata->field_4F4;
      ptr_BONDdata->field_4F0 = ptr_BONDdata->field_4F0 + clock_timer;
      if (ptr_BONDdata->field_4F0 < 0x3d) {
        proc_7F08E164(flt_80055324);
      }
      else {
        proc_7F08E164(flt_80055320);
      }
    }
  }
  else {
    ptr_BONDdata->field_544 = ptr_BONDdata->field_554;
    ptr_BONDdata->field_548 = ptr_BONDdata->field_558;
    ptr_BONDdata->field_54C = ptr_BONDdata->field_55C;
    fStack12 = 0.00000000;
    fStack8 = ptr_BONDdata->stationary_ground_offset;
    fStack4 = 0.00000000;
    ptr_BONDdata->field_4F0 = 0;
    proc_7F08E164(flt_8005532C);
    fVar7 = get_BONDdata_field19C();
    *(float *)&ptr_BONDdata->field_560 =
         (float)ptr_BONDdata->field_560 +
         (flt_80055330 + flt_80055334 * (float)fVar7) * global_timer_delta;
    pfVar8 = (float *)ptr_BONDdata->field_560;
    if (1.00000000 <= (float)pfVar8) {
      proc_7F08DBC8();
      *(float *)&ptr_BONDdata->field_560 = (float)ptr_BONDdata->field_560 - 1.00000000;
      pfVar8 = (float *)ptr_BONDdata->field_560;
      iVar2 = ptr_BONDdata->field_594;
      fVar9 = extraout_f12_00;
    }
    else {
      iVar2 = ptr_BONDdata->field_594;
      fVar9 = extraout_f12;
    }
    proc_7F05AE00((float *)(&ptr_BONDdata->field_564 + iVar2 * 3),
                  (float *)((int)ptr_BONDdata + iVar2 * -0xc + 0x570),fVar9,pfVar8);
    fVar7 = get_BONDdata_field19C();
    fStack24 = fStack24 * ((float)fVar7 * 5.00000000 + 1.00000000);
    fVar7 = get_BONDdata_field19C();
    fStack20 = fStack20 * ((float)fVar7 * 5.00000000 + 1.00000000);
    proc_7F05AE00((float *)(&ptr_BONDdata->field_57C + ptr_BONDdata->field_594 * 3),
                  (float *)((int)ptr_BONDdata + ptr_BONDdata->field_594 * -0xc + 0x588),
                  extraout_f12_01,(float *)ptr_BONDdata->field_560);
    fVar7 = get_BONDdata_field19C();
    fStack36 = fStack36 * ((float)fVar7 * 5.00000000 + 1.00000000);
    fVar7 = get_BONDdata_field19C();
    fStack28 = fStack28 * ((float)fVar7 * 5.00000000 + 1.00000000);
  }
  proc_7F08DE48(&fStack12);
  proc_7F08DF44(&fStack24,&fStack36);
  return;
}



void proc_7F08E8BC(float param_1)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  float extraout_f12;
  float fVar4;
  
  param_1 = param_1 * DAT_80036af4;
  piVar3 = &dword_80036AD0;
  iVar2 = 0;
  do {
    fVar4 = (float)piVar3[3];
    if (param_1 <= fVar4 * (float)piVar3[5]) {
      iVar1 = ptr_BONDdata->field_4E8;
      if (iVar2 != iVar1) {
        fVar4 = 0.00000000;
        if (-1 < iVar1) {
          fVar4 = ((float)piVar3[2] - (float)piVar3[1]) *
                  (((float)ptr_BONDdata->field_5C0 - (&FLOAT_80036ad4)[iVar1 * 6]) /
                  ((&FLOAT_80036ad8)[iVar1 * 6] - (&FLOAT_80036ad4)[iVar1 * 6])) + (float)piVar3[1];
        }
        proc_7F06FCA8((int)&ptr_BONDdata->field_598,*piVar3 + ptr_animation_table,
                      *(undefined *)&ptr_BONDdata->field_5BC,param_1,fVar4,fVar4);
        proc_7F06FDCC((int)&ptr_BONDdata->field_598,piVar3[1],0);
        proc_7F06FDE8((int)&ptr_BONDdata->field_598,extraout_f12);
        proc_7F06FE3C((int)&ptr_BONDdata->field_598,proc_7F08DBB0);
        ptr_BONDdata->field_4E8 = iVar2;
        fVar4 = (float)piVar3[3];
      }
      proc_7F06FE4C((int)&ptr_BONDdata->field_598,(param_1 / fVar4) * 0.50000000,param_1 / fVar4);
      return;
    }
    iVar2 += 1;
    piVar3 = piVar3 + 6;
  } while (iVar2 != 2);
  return;
}



void proc_7F08EA48(undefined4 param_1,undefined param_2,float param_3,float param_4)

{
  float in_a2_lo;
  float in_a3_lo;
  
  proc_7F06FCA8((int)&ptr_BONDdata->field_598,param_1,param_2,in_a2_lo,in_a2_lo,in_a3_lo);
  ptr_BONDdata->field_4E8 = -1;
  return;
}



void proc_7F08EAB8(float param_1)

{
  proc_7F06FE4C((int)&ptr_BONDdata->field_598,param_1 * 0.50000000,param_1);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

float proc_7F08EAF8(void)

{
  f32 fVar1;
  float fVar2;
  float fVar3;
  
  if (ptr_BONDdata->field_4E8 < 0) {
    fVar3 = 0.00000000;
  }
  else {
    fVar1 = get_BONDdata_field19C();
    fVar3 = (float)fVar1 * flt_80055338 + flt_8005533C;
    fVar2 = proc_7F06F618((int)&ptr_BONDdata->field_598);
    if ((0.00000000 < fVar2) &&
       (fVar2 = fVar2 / ((&FLOAT_80036ad8)[ptr_BONDdata->field_4E8 * 6] -
                        (&FLOAT_80036ad4)[ptr_BONDdata->field_4E8 * 6]), fVar3 <= fVar2)) {
      fVar3 = fVar2;
    }
  }
  return fVar3;
}



int * proc_7F08EBD0(float *param_1)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  piVar1 = NULL;
  if ((ptr_setup_path_tbl != NULL) && (fVar4 = -1.00000000, -1 < *(int *)ptr_setup_path_tbl)) {
    iVar3 = *(int *)ptr_setup_path_tbl;
    piVar2 = (int *)ptr_setup_path_tbl;
    do {
      fVar5 = param_1[2] - *(float *)(ptr_0xxxpresets + iVar3 * 0x2c + 2);
      fVar6 = *param_1 - *(float *)(ptr_0xxxpresets + iVar3 * 0x2c);
      fVar5 = fVar5 * fVar5 + fVar6 * fVar6;
      if ((fVar4 < 0.00000000) || (fVar5 < fVar4)) {
        iVar3 = piVar2[4];
        fVar4 = fVar5;
        piVar1 = piVar2;
      }
      else {
        iVar3 = piVar2[4];
      }
      piVar2 = piVar2 + 4;
    } while (-1 < iVar3);
  }
  return piVar1;
}



int * proc_7F08EC8C(float *param_1,undefined8 param_2,int *param_3)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  piVar2 = (int *)param_3[1];
  if (piVar2 != NULL) {
    iVar1 = *piVar2;
    fVar4 = param_1[2] - *(float *)(ptr_0xxxpresets + *param_3 * 0x2c + 2);
    fVar5 = *param_1 - *(float *)(ptr_0xxxpresets + *param_3 * 0x2c);
    fVar4 = fVar4 * fVar4 + fVar5 * fVar5;
    while (-1 < iVar1) {
      piVar3 = (int *)(ptr_setup_path_tbl + iVar1 * 0x10);
      fVar5 = param_1[2] - *(float *)(ptr_0xxxpresets + *piVar3 * 0x2c + 2);
      fVar6 = *param_1 - *(float *)(ptr_0xxxpresets + *piVar3 * 0x2c);
      fVar5 = fVar5 * fVar5 + fVar6 * fVar6;
      if (fVar4 <= fVar5) {
        fVar5 = fVar4;
        piVar3 = param_3;
      }
      iVar1 = piVar2[1];
      piVar2 = piVar2 + 1;
      fVar4 = fVar5;
      param_3 = piVar3;
    }
  }
  return param_3;
}



int proc_7F08ED60(int *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = *param_1;
  while( true ) {
    if (iVar1 < 0) {
      return 0;
    }
    if (param_2 == *(int *)(ptr_setup_path_link + iVar1 * 0xc + 8)) break;
    iVar1 = param_1[1];
    param_1 = param_1 + 1;
  }
  return (int)(ptr_setup_path_link + iVar1 * 0xc);
}



void proc_7F08EDB4(int *param_1,undefined4 param_2)

{
  undefined *puVar1;
  int iVar2;
  
  puVar1 = ptr_setup_path_link;
  iVar2 = *param_1;
  while (-1 < iVar2) {
    if (*(int *)(puVar1 + iVar2 * 0xc + 8) < 0) {
      *(undefined4 *)(puVar1 + iVar2 * 0xc + 8) = param_2;
      iVar2 = param_1[1];
    }
    else {
      iVar2 = param_1[1];
    }
    param_1 = param_1 + 1;
  }
  return;
}



undefined8 proc_7F08EE00(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  undefined8 uVar3;
  
  piVar1 = *param_1;
  uVar3 = 0;
  if (piVar1 != NULL) {
    piVar2 = param_1[2];
    while( true ) {
      if (param_2 == piVar2) {
        uVar3 = 1;
        proc_7F08EDB4(piVar1,(int)param_2 + 1);
        piVar1 = param_1[3];
      }
      else {
        piVar1 = param_1[3];
      }
      if (piVar1 == NULL) break;
      piVar2 = param_1[5];
      param_1 = param_1 + 3;
    }
  }
  return uVar3;
}



// WARNING: Instruction at (ram,0x7f08eed0) overlaps instruction at (ram,0x7f08eecc)
// 

longlong proc_7F08EE70(int param_1,int param_2,int **param_3,longlong param_4)

{
  int **ppiVar1;
  longlong lVar2;
  int *piVar3;
  
  lVar2 = 1;
  if (*param_3 != NULL) {
    piVar3 = param_3[3];
    ppiVar1 = param_3;
    while( true ) {
      ppiVar1[2] = (int *)0xffffffff;
      if (piVar3 == NULL) break;
      piVar3 = ppiVar1[6];
      ppiVar1 = ppiVar1 + 3;
    }
  }
  *(undefined4 *)(param_1 + 8) = 0;
  piVar3 = NULL;
  if ((param_4 != 0) || (*(int *)(param_2 + 8) < 0)) {
    do {
      lVar2 = proc_7F08EE00(param_3,piVar3);
      piVar3 = (int *)((int)piVar3 + 1);
      if ((param_4 == 0) && (-1 < *(int *)(param_2 + 8))) {
        return lVar2;
      }
    } while (lVar2 != 0);
  }
  return lVar2;
}



undefined4 proc_7F08EF1C(int param_1,int **param_2,int **param_3)

{
  longlong lVar1;
  int iVar2;
  int *piVar3;
  
  lVar1 = proc_7F08EE70(param_1,(int)param_2,param_3,0);
  if (lVar1 != 0) {
    iVar2 = (int)param_2[2] + -1;
    if (iVar2 < 0) {
      piVar3 = param_2[2];
    }
    else {
      do {
        param_2[2] = param_2[2] + 0x9c4;
        param_2 = (int **)proc_7F08ED60(*param_2,iVar2);
        iVar2 += -1;
      } while (-1 < iVar2);
      piVar3 = param_2[2];
    }
    param_2[2] = piVar3 + 0x9c4;
  }
  return (int)lVar1;
}



int proc_7F08EFA0(int **param_1,int **param_2,int **param_3,longlong param_4)

{
  int iVar1;
  int **ppiVar2;
  int *piVar3;
  int **ppiVar4;
  int iVar5;
  
  ppiVar4 = param_3;
  if (1 < param_4) {
    if (ptr_setup_path_link == NULL) {
      *param_3 = NULL;
      ppiVar4 = param_3;
      goto LAB_7f08f05c;
    }
    iVar1 = proc_7F08EF1C((int)param_1,param_2,(int **)ptr_setup_path_link);
    ppiVar4 = param_3;
    if (iVar1 != 0) {
      iVar5 = (int)param_4 + 9999;
      *(int ***)param_3 = param_1;
      iVar1 = 0x2711;
      ppiVar4 = param_3 + 1;
      if (10000 < (int)param_2[2]) {
        if (iVar5 < 0x2712) {
          *ppiVar4 = NULL;
          goto LAB_7f08f05c;
        }
        piVar3 = *param_1;
        while( true ) {
          ppiVar2 = (int **)proc_7F08ED60(piVar3,iVar1);
          *(int ***)ppiVar4 = ppiVar2;
          iVar1 += 1;
          ppiVar4 = ppiVar4 + 1;
          if (((int)param_2[2] < iVar1) || (iVar5 <= iVar1)) break;
          piVar3 = *ppiVar2;
        }
      }
    }
  }
  *ppiVar4 = NULL;
LAB_7f08f05c:
  return (int)ppiVar4 + (4 - (int)param_3) >> 2;
}



int proc_7F08F090(int *param_1,int param_2,int param_3)

{
  int iVar1;
  undefined *puVar2;
  
  iVar1 = *param_1;
  do {
    if (iVar1 < 0) {
      return 0;
    }
    puVar2 = ptr_setup_path_tbl + iVar1 * 0x10;
    if (param_3 == *(int *)(puVar2 + 8)) {
      if (param_2 == *(int *)(puVar2 + 0xc)) {
        return (int)puVar2;
      }
      iVar1 = param_1[1];
    }
    else {
      iVar1 = param_1[1];
    }
    param_1 = param_1 + 1;
  } while( true );
}



void proc_7F08F0E8(int *param_1,undefined4 param_2,int param_3)

{
  undefined *puVar1;
  int iVar2;
  undefined *puVar3;
  
  puVar1 = ptr_setup_path_tbl;
  iVar2 = *param_1;
  while (-1 < iVar2) {
    puVar3 = puVar1 + iVar2 * 0x10;
    if (param_3 == *(int *)(puVar3 + 8)) {
      if (*(int *)(puVar3 + 0xc) < 0) {
        *(undefined4 *)(puVar3 + 0xc) = param_2;
        iVar2 = param_1[1];
      }
      else {
        iVar2 = param_1[1];
      }
    }
    else {
      iVar2 = param_1[1];
    }
    param_1 = param_1 + 1;
  }
  return;
}



undefined8 proc_7F08F138(int *param_1,int param_2,int param_3)

{
  int *piVar1;
  undefined *puVar2;
  int iVar3;
  undefined8 uVar4;
  
  puVar2 = ptr_setup_path_tbl;
  iVar3 = *param_1;
  uVar4 = 0;
  while (-1 < iVar3) {
    if (param_2 == *(int *)(puVar2 + iVar3 * 0x10 + 0xc)) {
      piVar1 = *(int **)(puVar2 + iVar3 * 0x10 + 4);
      if (piVar1 == NULL) {
        iVar3 = param_1[1];
      }
      else {
        uVar4 = 1;
        proc_7F08F0E8(piVar1,param_2 + 1,param_3);
        iVar3 = param_1[1];
      }
    }
    else {
      iVar3 = param_1[1];
    }
    param_1 = param_1 + 1;
  }
  return uVar4;
}



void proc_7F08F1D8(int param_1,int param_2,longlong param_3)

{
  undefined *puVar1;
  undefined *puVar2;
  longlong lVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  
  puVar2 = ptr_setup_path_link;
  puVar1 = ptr_setup_path_tbl;
  iVar6 = 0;
  piVar4 = *(int **)(ptr_setup_path_link + *(int *)(param_1 + 8) * 0xc + 4);
  iVar5 = *piVar4;
  while (-1 < iVar5) {
    *(undefined4 *)(puVar1 + iVar5 * 0x10 + 0xc) = 0xffffffff;
    iVar5 = piVar4[1];
    piVar4 = piVar4 + 1;
  }
  *(undefined4 *)(param_1 + 0xc) = 0;
  if ((param_3 != 0) || (*(int *)(param_2 + 0xc) < 0)) {
    iVar5 = *(int *)(param_1 + 8);
    while( true ) {
      lVar3 = proc_7F08F138(*(int **)(puVar2 + iVar5 * 0xc + 4),iVar6,iVar5);
      iVar6 += 1;
      if (((param_3 == 0) && (-1 < *(int *)(param_2 + 0xc))) || (lVar3 == 0)) break;
      iVar5 = *(int *)(param_1 + 8);
    }
  }
  return;
}



void proc_7F08F2CC(int param_1,int param_2)

{
  int iVar1;
  
  proc_7F08F1D8(param_1,param_2,0);
  iVar1 = *(int *)(param_2 + 0xc) + -1;
  if (iVar1 < 0) {
    iVar1 = *(int *)(param_2 + 0xc);
  }
  else {
    do {
      *(int *)(param_2 + 0xc) = *(int *)(param_2 + 0xc) + 10000;
      param_2 = proc_7F08F090(*(int **)(param_2 + 4),iVar1,*(int *)(param_1 + 8));
      iVar1 += -1;
    } while (-1 < iVar1);
    iVar1 = *(int *)(param_2 + 0xc);
  }
  *(int *)(param_2 + 0xc) = iVar1 + 10000;
  return;
}



int proc_7F08F350(int param_1,int param_2,int *param_3,longlong param_4)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  
  piVar4 = param_3;
  if (1 < param_4) {
    proc_7F08F2CC(param_1,param_2);
    iVar5 = (int)param_4 + 9999;
    *param_3 = param_1;
    iVar3 = 0x2711;
    piVar4 = param_3 + 1;
    if (10000 < *(int *)(param_2 + 0xc)) {
      if (iVar5 < 0x2712) {
        *piVar4 = 0;
        goto LAB_7f08f400;
      }
      piVar2 = *(int **)(param_1 + 4);
      while( true ) {
        iVar1 = proc_7F08F090(piVar2,iVar3,*(int *)(param_1 + 8));
        *piVar4 = iVar1;
        iVar3 += 1;
        piVar4 = piVar4 + 1;
        if ((*(int *)(param_2 + 0xc) < iVar3) || (iVar5 <= iVar3)) break;
        piVar2 = *(int **)(iVar1 + 4);
      }
    }
  }
  *piVar4 = 0;
LAB_7f08f400:
  return (int)piVar4 + (4 - (int)param_3) >> 2;
}



void proc_7F08F438(int param_1,int param_2,int *param_3,int *param_4)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  undefined *puVar4;
  int *piVar5;
  
  piVar5 = *(int **)(param_1 + 4);
  iVar1 = *piVar5;
  do {
    if (iVar1 < 0) {
      *param_4 = 0;
      *param_3 = 0;
      return;
    }
    piVar3 = *(int **)(ptr_setup_path_tbl + iVar1 * 0x10 + 4);
    iVar2 = *piVar3;
    while (-1 < iVar2) {
      puVar4 = ptr_setup_path_tbl + iVar2 * 0x10;
      if ((undefined *)param_2 == ptr_setup_path_link + *(int *)(puVar4 + 8) * 0xc) {
        *(undefined **)param_3 = ptr_setup_path_tbl + iVar1 * 0x10;
        *(undefined **)param_4 = puVar4;
        return;
      }
      iVar2 = piVar3[1];
      piVar3 = piVar3 + 1;
    }
    iVar1 = piVar5[1];
    piVar5 = piVar5 + 1;
  } while( true );
}



int proc_7F08F4F0(int param_1,int param_2,int *param_3,longlong param_4)

{
  int iVar1;
  int **ppiVar2;
  int iVar3;
  int *piVar4;
  int **ppiVar5;
  int *piVar6;
  int **ppiVar7;
  int iStack44;
  int aiStack40 [10];
  
  piVar6 = param_3;
  if (ptr_setup_path_link != NULL) {
    ppiVar5 = (int **)(ptr_setup_path_link + *(int *)(param_1 + 8) * 0xc);
    ppiVar7 = (int **)(ptr_setup_path_link + *(int *)(param_2 + 8) * 0xc);
    iVar1 = proc_7F08EF1C((int)ppiVar5,ppiVar7,(int **)ptr_setup_path_link);
    if (iVar1 == 0) {
      *param_3 = 0;
      piVar6 = param_3;
      goto LAB_7f08f638;
    }
    iVar1 = (int)ppiVar5[2] + 1;
    piVar6 = param_3;
    if ((iVar1 <= (int)ppiVar7[2]) && (piVar6 = param_3, 1 < param_4)) {
      piVar4 = *ppiVar5;
      piVar6 = param_3;
      while( true ) {
        ppiVar2 = (int **)proc_7F08ED60(piVar4,iVar1);
        proc_7F08F438((int)ppiVar5,(int)ppiVar2,aiStack40,&iStack44);
        iVar3 = proc_7F08F350(param_1,aiStack40[0],piVar6,param_4);
        iVar1 += 1;
        param_4 = (longlong)(((int)param_4 - iVar3) + 1);
        piVar6 = piVar6 + iVar3 + -1;
        param_1 = iStack44;
        if (((int)ppiVar7[2] < iVar1) || (param_1 = iStack44, param_4 < 2)) break;
        piVar4 = *ppiVar2;
        param_1 = iStack44;
        ppiVar5 = ppiVar2;
      }
    }
    iVar1 = proc_7F08F350(param_1,param_2,piVar6,param_4);
    piVar6 = piVar6 + iVar1 + -1;
  }
  *piVar6 = 0;
LAB_7f08f638:
  return (int)piVar6 + (4 - (int)param_3) >> 2;
}



void proc_7F08F67C(void)

{
  undefined *puVar1;
  int iVar2;
  
  if (-1 < *(int *)ptr_setup_path_tbl) {
    iVar2 = *(int *)(ptr_setup_path_tbl + 0x10);
    puVar1 = ptr_setup_path_tbl;
    while( true ) {
      *(undefined4 *)(puVar1 + 0xc) = 0xffffffff;
      if (iVar2 < 0) break;
      iVar2 = *(int *)(puVar1 + 0x20);
      puVar1 = puVar1 + 0x10;
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f08f860) overlaps instruction at (ram,0x7f08f85c)
// 

int proc_7F08F6B0(int *param_1,int param_2)

{
  uint uVar1;
  int *piVar2;
  u32 uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  uVar5 = 0;
  if (-1 < *param_1) {
    iVar7 = param_1[1];
    piVar2 = param_1;
    while( true ) {
      uVar5 += 1;
      if (iVar7 < 0) break;
      iVar7 = piVar2[2];
      piVar2 = piVar2 + 1;
    }
  }
  uVar3 = get_random_value();
  uVar1 = uVar3 % uVar5;
  if (uVar5 == 0) {
    trap(0x1c00);
  }
  if ((int)uVar1 < (int)uVar5) {
    uVar6 = uVar5 - uVar1 & 3;
    if (uVar6 == 0) {
      iVar7 = uVar1 << 2;
      uVar4 = uVar1;
    }
    else {
      piVar2 = param_1 + uVar1;
      uVar4 = uVar1;
      do {
        uVar4 += 1;
        if (param_2 == *(int *)(ptr_setup_path_tbl + *piVar2 * 0x10 + 0xc)) {
          return (int)(ptr_setup_path_tbl + *piVar2 * 0x10);
        }
        piVar2 = piVar2 + 1;
      } while (uVar6 + uVar1 != uVar4);
      iVar7 = uVar4 * 4;
      if (uVar4 == uVar5) goto LAB_7f08f80c;
    }
    piVar2 = (int *)((int)param_1 + iVar7);
    do {
      uVar4 += 4;
      if (param_2 == *(int *)(ptr_setup_path_tbl + *piVar2 * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + *piVar2 * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + piVar2[1] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + piVar2[1] * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + piVar2[2] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + piVar2[2] * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + piVar2[3] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + piVar2[3] * 0x10);
      }
      piVar2 = piVar2 + 4;
    } while (uVar4 != uVar5);
  }
LAB_7f08f80c:
  uVar5 = 0;
  if (0 < (int)uVar1) {
    piVar2 = param_1;
    if ((uVar1 & 3) == 0) {
      iVar7 = 0;
    }
    else {
      do {
        uVar5 += 1;
        if (param_2 == *(int *)(ptr_setup_path_tbl + *piVar2 * 0x10 + 0xc)) {
          return (int)(ptr_setup_path_tbl + *piVar2 * 0x10);
        }
        piVar2 = piVar2 + 1;
      } while ((uVar1 & 3) != uVar5);
      iVar7 = uVar5 * 4;
      if (uVar5 == uVar1) {
        return 0;
      }
    }
    param_1 = (int *)((int)param_1 + iVar7);
    do {
      uVar5 += 4;
      if (param_2 == *(int *)(ptr_setup_path_tbl + *param_1 * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + *param_1 * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + param_1[1] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + param_1[1] * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + param_1[2] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + param_1[2] * 0x10);
      }
      if (param_2 == *(int *)(ptr_setup_path_tbl + param_1[3] * 0x10 + 0xc)) {
        return (int)(ptr_setup_path_tbl + param_1[3] * 0x10);
      }
      param_1 = param_1 + 4;
    } while (uVar5 != uVar1);
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f08fadc) overlaps instruction at (ram,0x7f08fad8)
// 

int proc_7F08F908(int *param_1,int param_2)

{
  uint uVar1;
  int *piVar2;
  u32 uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  uVar5 = 0;
  if (-1 < *param_1) {
    iVar7 = param_1[1];
    piVar2 = param_1;
    while( true ) {
      uVar5 += 1;
      if (iVar7 < 0) break;
      iVar7 = piVar2[2];
      piVar2 = piVar2 + 1;
    }
  }
  uVar3 = get_random_value();
  uVar1 = uVar3 % uVar5;
  if (uVar5 == 0) {
    trap(0x1c00);
  }
  if ((int)uVar1 < (int)uVar5) {
    uVar6 = uVar5 - uVar1 & 3;
    if (uVar6 == 0) {
      iVar7 = uVar1 << 2;
      uVar4 = uVar1;
    }
    else {
      piVar2 = param_1 + uVar1;
      uVar4 = uVar1;
      do {
        uVar4 += 1;
        if (param_2 == *(int *)(ptr_setup_path_link + *piVar2 * 0xc + 8)) {
          return (int)(ptr_setup_path_link + *piVar2 * 0xc);
        }
        piVar2 = piVar2 + 1;
      } while (uVar6 + uVar1 != uVar4);
      iVar7 = uVar4 * 4;
      if (uVar4 == uVar5) goto LAB_7f08fa80;
    }
    piVar2 = (int *)((int)param_1 + iVar7);
    do {
      uVar4 += 4;
      if (param_2 == *(int *)(ptr_setup_path_link + *piVar2 * 0xc + 8)) {
        return (int)(ptr_setup_path_link + *piVar2 * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + piVar2[1] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + piVar2[1] * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + piVar2[2] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + piVar2[2] * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + piVar2[3] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + piVar2[3] * 0xc);
      }
      piVar2 = piVar2 + 4;
    } while (uVar4 != uVar5);
  }
LAB_7f08fa80:
  uVar5 = 0;
  if (0 < (int)uVar1) {
    piVar2 = param_1;
    if ((uVar1 & 3) == 0) {
      iVar7 = 0;
    }
    else {
      do {
        uVar5 += 1;
        if (param_2 == *(int *)(ptr_setup_path_link + *piVar2 * 0xc + 8)) {
          return (int)(ptr_setup_path_link + *piVar2 * 0xc);
        }
        piVar2 = piVar2 + 1;
      } while ((uVar1 & 3) != uVar5);
      iVar7 = uVar5 * 4;
      if (uVar5 == uVar1) {
        return 0;
      }
    }
    param_1 = (int *)((int)param_1 + iVar7);
    do {
      uVar5 += 4;
      if (param_2 == *(int *)(ptr_setup_path_link + *param_1 * 0xc + 8)) {
        return (int)(ptr_setup_path_link + *param_1 * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + param_1[1] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + param_1[1] * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + param_1[2] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + param_1[2] * 0xc);
      }
      if (param_2 == *(int *)(ptr_setup_path_link + param_1[3] * 0xc + 8)) {
        return (int)(ptr_setup_path_link + param_1[3] * 0xc);
      }
      param_1 = param_1 + 4;
    } while (uVar5 != uVar1);
  }
  return 0;
}



int proc_7F08FB90(int param_1,int param_2)

{
  int iVar1;
  int **ppiVar2;
  int iStack52;
  int local_30 [2];
  int iStack40;
  int local_24;
  int local_1c;
  int local_18 [6];
  
  if (ptr_setup_path_link != NULL) {
    ppiVar2 = (int **)(ptr_setup_path_link + *(int *)(param_1 + 8) * 0xc);
    if (ppiVar2 == (int **)(ptr_setup_path_link + *(int *)(param_2 + 8) * 0xc)) {
      proc_7F08F67C();
      proc_7F08F1D8(param_2,param_1,1);
      iVar1 = proc_7F08F6B0(*(int **)(param_1 + 4),-1);
      if (iVar1 != 0) {
        return iVar1;
      }
      iVar1 = proc_7F08F6B0(*(int **)(param_1 + 4),*(int *)(param_1 + 0xc) + 1);
      if (iVar1 != 0) {
        return iVar1;
      }
      return 0;
    }
    proc_7F08EE70((int)(ptr_setup_path_link + *(int *)(param_2 + 8) * 0xc),(int)ppiVar2,
                  (int **)ptr_setup_path_link,0);
    if ((int)ppiVar2[2] < 0) {
      return 0;
    }
    iVar1 = proc_7F08F908(*ppiVar2,-1);
    if (iVar1 != 0) {
      proc_7F08F438((int)ppiVar2,iVar1,local_18,&local_1c);
      if (local_18[0] == param_1) {
        return local_1c;
      }
      iVar1 = proc_7F08F350(param_1,local_18[0],&iStack40,3);
      if (2 < iVar1) {
        return local_24;
      }
      return 0;
    }
    iVar1 = proc_7F08ED60(*ppiVar2,(int)ppiVar2[2] + -1);
    if (iVar1 != 0) {
      proc_7F08F438((int)ppiVar2,iVar1,local_30,&iStack52);
      proc_7F08F1D8(local_30[0],param_1,1);
      iVar1 = proc_7F08F090(*(int **)(param_1 + 4),*(int *)(param_1 + 0xc) + 1,*(int *)(param_1 + 8)
                           );
      if (iVar1 != 0) {
        return iVar1;
      }
      return 0;
    }
  }
  return 0;
}



void proc_7F08FD1C(void)

{
  undefined *puVar1;
  u32 uVar2;
  int iVar3;
  int *piVar4;
  int local_dc;
  int local_d8;
  undefined *local_10;
  uint local_8;
  undefined *local_4;
  
  if (ptr_setup_path_tbl != NULL) {
    local_8 = 0;
    if (*(int *)ptr_setup_path_tbl < 0) {
      local_8 = 0;
    }
    else {
      iVar3 = *(int *)(ptr_setup_path_tbl + 0x10);
      puVar1 = ptr_setup_path_tbl;
      while( true ) {
        local_8 += 1;
        if (iVar3 < 0) break;
        iVar3 = *(int *)(puVar1 + 0x20);
        puVar1 = puVar1 + 0x10;
      }
    }
    local_4 = ptr_setup_path_tbl;
    uVar2 = get_random_value();
    if (local_8 == 0) {
      trap(0x1c00);
    }
    local_10 = local_4 + (uVar2 % local_8) * 0x10;
    uVar2 = get_random_value();
    if (local_8 == 0) {
      trap(0x1c00);
    }
    iVar3 = proc_7F08F4F0((int)local_10,(int)(local_4 + (uVar2 % local_8) * 0x10),&local_dc,0x32);
    if ((iVar3 != 0) && (piVar4 = &local_dc, local_dc != 0)) {
      while (local_d8 != 0) {
        local_d8 = piVar4[2];
        piVar4 = piVar4 + 1;
      }
    }
  }
  return;
}



void nullsub_32(void)

{
  return;
}



void proc_7F08FE08(undefined4 param_1)

{
  num_mcm_something = param_1;
  return;
}



void init_debug_menu_values(char *strings,mcm_layout *positions,u32 *columns)

{
  u32 *puVar1;
  u32 uVar2;
  int iVar3;
  
  number_groups = 0;
  if ((int)*columns < 0) {
    iVar3 = 0;
  }
  else {
    uVar2 = columns[1];
    puVar1 = columns;
    while( true ) {
      number_groups += 1;
      if ((int)uVar2 < 0) break;
      uVar2 = puVar1[2];
      puVar1 = puVar1 + 1;
    }
    iVar3 = number_groups * 4;
  }
  ptr_last_debuggrp_cutoff = *(undefined **)((int)columns + iVar3 + -4);
  ptr_textptrs = strings;
  ptr_positions = positions;
  ptr_groupings = columns;
  return;
}



undefined4 print_debug_mcm_to_stdout(undefined4 counter)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  int *piVar4;
  int xpos;
  int ypos;
  u32 uVar5;
  int iVar6;
  int iVar7;
  
  bVar1 = x_offset_multiplier[num_mcm_something];
  bVar2 = y_offset_multiplier[num_mcm_something];
  uVar5 = 0;
  if (0 < (int)ptr_last_debuggrp_cutoff) {
    iVar6 = 0;
    iVar7 = 0;
    do {
      nullsub_32();
      if (uVar5 == highlighted_debug_option) {
        set_debug_text_color(0xc0,0,0,0xc0);
      }
      else {
        set_debug_text_color(0xc0,0xc0,0xc0,0xc0);
      }
      piVar4 = (int *)((int)&ptr_positions->xpos + iVar6);
      iVar3 = *piVar4 * (uint)bVar1;
      xpos = iVar3 + -0x14;
      if (xpos < 0) {
        xpos = iVar3 + -0x11;
      }
      ypos = piVar4[1] * (uint)bVar2 + -8;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (ypos == -0x80000000)) {
        trap(0x1800);
      }
      set_final_debug_text_positions(xpos >> 2,ypos / 7);
      write_string_stdout(*(byte **)(ptr_textptrs + iVar7));
      uVar5 += 1;
      iVar6 += 8;
      iVar7 += 4;
    } while ((int)uVar5 < (int)ptr_last_debuggrp_cutoff);
  }
  return counter;
}



void proc_7F09000C(void)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  int *piVar4;
  int xpos;
  int ypos;
  int checkedoption;
  int iVar5;
  int iVar6;
  
  bVar1 = x_offset_multiplier[num_mcm_something];
  bVar2 = y_offset_multiplier[num_mcm_something];
  checkedoption = 0;
  if (0 < (int)ptr_last_debuggrp_cutoff) {
    iVar5 = 0;
    iVar6 = 0;
    do {
      nullsub_32();
      if (checkedoption == highlighted_debug_option) {
        set_debug_text_color(0xc0,0,0,0xc0);
      }
      else {
        set_debug_text_color(0xc0,0xc0,0xc0,0xc0);
      }
      piVar4 = (int *)((int)&ptr_positions->xpos + iVar5);
      iVar3 = *piVar4 * (uint)bVar1;
      xpos = iVar3 + -0x14;
      if (xpos < 0) {
        xpos = iVar3 + -0x11;
      }
      ypos = piVar4[1] * (uint)bVar2 + -8;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (ypos == -0x80000000)) {
        trap(0x1800);
      }
      set_final_debug_text_positions(xpos >> 2,ypos / 7);
      write_string_stdout(*(byte **)(ptr_textptrs + iVar6));
      osSyncPrintf(aMenu_cErrorTriedToCallFont_makegt);
      checkedoption += 1;
      iVar5 += 8;
      iVar6 += 4;
    } while (checkedoption < (int)ptr_last_debuggrp_cutoff);
  }
  return;
}



u32 get_highlighted_debug_option(void)

{
  return highlighted_debug_option;
}



void set_highlighted_debug_option(u32 option)

{
  highlighted_debug_option = option;
  return;
}



void gotoAboveDebugOption(void)

{
  u32 *puVar1;
  int iVar2;
  
  if ((int)(highlighted_debug_option - 1) < 0) {
    highlighted_debug_option = *ptr_groupings - 1;
    return;
  }
  iVar2 = 0;
  puVar1 = ptr_groupings;
  if (0 < (int)number_groups) {
    do {
      iVar2 += 1;
      if (highlighted_debug_option == *puVar1) {
        highlighted_debug_option = puVar1[1] - 1;
        return;
      }
      puVar1 = puVar1 + 1;
    } while (iVar2 < (int)number_groups);
  }
  highlighted_debug_option = highlighted_debug_option - 1;
  return;
}



void gotoBelowDebugOption(void)

{
  int iVar1;
  u32 *puVar2;
  
  highlighted_debug_option += 1;
  if (highlighted_debug_option == *ptr_groupings) {
    highlighted_debug_option = 0;
    return;
  }
  iVar1 = 0;
  puVar2 = ptr_groupings;
  if (0 < (int)number_groups) {
    do {
      iVar1 += 1;
      if (highlighted_debug_option == *puVar2) {
        highlighted_debug_option = puVar2[-1];
        return;
      }
      puVar2 = puVar2 + 1;
    } while (iVar1 < (int)number_groups);
  }
  return;
}



void gotoRightDebugOption(void)

{
  int iVar1;
  u32 *puVar2;
  u32 uVar3;
  
  uVar3 = highlighted_debug_option + *ptr_groupings;
  if ((int)highlighted_debug_option < (int)*ptr_groupings) {
    highlighted_debug_option = uVar3;
    if ((int)ptr_groupings[1] <= (int)uVar3) {
      highlighted_debug_option = ptr_groupings[1] - 1;
      return;
    }
  }
  else {
    iVar1 = 0;
    puVar2 = ptr_groupings;
    if (0 < (int)number_groups) {
      do {
        iVar1 += 1;
        if ((int)highlighted_debug_option < (int)*puVar2) {
          highlighted_debug_option = (highlighted_debug_option + *puVar2) - puVar2[-1];
          uVar3 = puVar2[1];
          if ((int)uVar3 < 0) {
            if ((int)(highlighted_debug_option - *puVar2) < (int)*ptr_groupings) {
              highlighted_debug_option = highlighted_debug_option - *puVar2;
              return;
            }
            highlighted_debug_option = *ptr_groupings - 1;
            return;
          }
          if ((int)highlighted_debug_option < (int)uVar3) {
            return;
          }
          highlighted_debug_option = uVar3 - 1;
          return;
        }
        puVar2 = puVar2 + 1;
      } while (iVar1 < (int)number_groups);
    }
  }
  return;
}



void gotoLeftDebugOption(void)

{
  u32 *puVar1;
  int iVar2;
  u32 uVar3;
  
  if ((int)highlighted_debug_option < (int)*ptr_groupings) {
    if ((int)(number_groups - 1) < 1) {
      iVar2 = 0;
    }
    else {
      iVar2 = 1;
      while (iVar2 < (int)(number_groups - 1)) {
        iVar2 += 1;
      }
      iVar2 <<= 2;
    }
    highlighted_debug_option += ((int *)((int)ptr_groupings + iVar2))[-1];
    iVar2 = *(int *)((int)ptr_groupings + iVar2);
    if (iVar2 <= (int)highlighted_debug_option) {
      highlighted_debug_option = iVar2 - 1;
      return;
    }
  }
  else {
    iVar2 = 0;
    if ((int)*ptr_groupings <= (int)highlighted_debug_option) {
      uVar3 = ptr_groupings[1];
      puVar1 = ptr_groupings;
      while( true ) {
        iVar2 += 1;
        if ((int)highlighted_debug_option < (int)uVar3) break;
        uVar3 = puVar1[2];
        puVar1 = puVar1 + 1;
      }
    }
    puVar1 = ptr_groupings + iVar2;
    highlighted_debug_option -= puVar1[-1];
    if (-1 < iVar2 + -2) {
      highlighted_debug_option += puVar1[-2];
    }
    if ((int)puVar1[-1] <= (int)highlighted_debug_option) {
      highlighted_debug_option = puVar1[-1] - 1;
    }
  }
  return;
}



void display_debug_menu_text_onscreen(void)

{
  init_debug_menu_values((char *)mcm_strings,mcm_onscreen_positions,mcm_column_groupings);
  return;
}



void handle_debug_stanview(void)

{
  stanStoreBondCoord();
  debug_render_raster = get_highlighted_debug_option();
  debug_freeze_processing = debug_render_raster;
  debug_controlmode = debug_render_raster;
  return;
}



void handle_debug_bondview(void)

{
  maybe_solo_intro_camera_handler();
  debug_render_raster = get_highlighted_debug_option();
  debug_freeze_processing = debug_render_raster;
  debug_controlmode = debug_render_raster;
  return;
}



void handle_debug_case_2(void)

{
  maybe_solo_intro_camera_handler();
  debug_render_raster = get_highlighted_debug_option();
  debug_freeze_processing = debug_render_raster;
  debug_controlmode = debug_render_raster;
  return;
}



void null_68(void)

{
  return;
}



void nullsub_35(void)

{
  return;
}



// WARNING: Switch with 1 destination removed at 0x7f090ea8 : 5 cases all go to same destination

uint debug_menu_processor
               (undefined8 stick_h,undefined8 stick_v,controller_buttons bHeld,
               controller_buttons bPressed)

{
  bool bVar1;
  undefined4 uVar3;
  ulonglong uVar2;
  int iVar4;
  u32 playernum;
  float fVar5;
  float fVar6;
  float fVar7;
  int iStack8;
  int iStack4;
  
  if ((grab_rgb_screenshot_flag != 0) &&
     (playernum = grab_rgb_screenshot_flag + 1, bVar1 = grab_rgb_screenshot_flag == 3,
     grab_rgb_screenshot_flag = playernum, bVar1)) {
    grab_rgb_screenshot_flag = playernum;
    indy_grab_rgb_32bit();
    grab_rgb_screenshot_flag = 0;
    set_coloroutputmode_16bit();
    osViBlack('\0');
  }
  if ((grab_jpeg_screenshot_flag != 0) &&
     (playernum = grab_jpeg_screenshot_flag + 1, bVar1 = grab_jpeg_screenshot_flag == 3,
     grab_jpeg_screenshot_flag = playernum, bVar1)) {
    grab_jpeg_screenshot_flag = playernum;
    indy_grab_jpg_32bit();
    grab_jpeg_screenshot_flag = 0;
    set_coloroutputmode_16bit();
    osViBlack('\0');
  }
  if (show_debug_menu_flag == 0) {
    bVar1 = (bHeld & U_CBUTTONS) !=
            ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|
              L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
    if (bVar1) {
      bVar1 = (bHeld & D_CBUTTONS) !=
              ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|
                L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
    }
    show_debug_menu_flag = (uint)bVar1;
    if (bVar1 != false) {
      stop_recording_ramrom();
    }
  }
  else {
    if (debug_limit_controller_input != 0xfffffffe) {
      debug_controlmode = debug_limit_controller_input;
      debug_limit_controller_input = 0xfffffffe;
    }
    if ((bPressed & L_JPAD) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      gotoLeftDebugOption();
      debug_limit_controller_input = 0xfffffffe;
    }
    if ((bPressed & R_JPAD) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      gotoRightDebugOption();
      debug_limit_controller_input = 0xfffffffe;
    }
    if ((bPressed & U_JPAD) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      gotoAboveDebugOption();
      debug_limit_controller_input = 0xfffffffe;
    }
    if ((bPressed & D_JPAD) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      gotoBelowDebugOption();
      debug_limit_controller_input = 0xfffffffe;
    }
    if (((bPressed & (START_BUTTON|A_BUTTON)) !=
         ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
           D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) &&
       (uVar3 = get_highlighted_debug_option(), true)) {
      switch(uVar3) {
      case 0:
        handle_debug_stanview();
        break;
      case 1:
        handle_debug_bondview();
        break;
      case 2:
        handle_debug_case_2();
        break;
      case 3:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 4:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 5:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 6:
        set_loaded_stage(LEVELID_TITLE);
        break;
      case 7:
        kill_current_player();
        break;
      case 8:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 9:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 10:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0xb:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0xc:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0xd:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0xe:
        uVar2 = get_bondata_invincible_flag();
        set_bondata_invincible_flag(uVar2 == 0);
        break;
      case 0xf:
        iVar4 = get_invisible_to_guards_flag();
        set_invisible_to_guards_flag((uint)(iVar4 == 0));
        break;
      case 0x10:
        iVar4 = get_obj_collision_flag();
        set_obj_collision_flag((uint)(iVar4 == 0));
        break;
      case 0x11:
        iStack4 = 0;
        uVar2 = get_num_players();
        if (0 < (longlong)uVar2) {
          do {
            set_cur_player(iStack4);
            iVar4 = get_BONDdata_allguns_flag();
            set_BONDdata_allguns_flag((uint)(iVar4 == 0));
            iStack4 += 1;
            uVar2 = get_num_players();
          } while ((longlong)iStack4 < (longlong)uVar2);
        }
        break;
      case 0x12:
        playernum = get_cur_playernum();
        iStack8 = 0;
        uVar2 = get_num_players();
        if (0 < (longlong)uVar2) {
          do {
            set_cur_player(iStack8);
            set_max_ammo_for_cur_player();
            iStack8 += 1;
            uVar2 = get_num_players();
          } while ((longlong)iStack8 < (longlong)uVar2);
        }
        set_cur_player(playernum);
        break;
      case 0x13:
        memusage_display_flag ^= 1;
        if (memusage_display_flag == FALSE) {
          debug_text_related_1();
        }
        break;
      case 0x14:
        debug_do_draw_bg ^= 1;
        break;
      case 0x15:
        debug_do_draw_obj ^= 1;
        break;
      case 0x16:
        debug_stanhit_flag ^= 1;
        break;
      case 0x17:
        debug_stanregion_flag ^= 1;
        break;
      case 0x18:
        turbo_mode ^= 1;
        break;
      case 0x19:
        debug_man_pos_flag ^= 1;
        break;
      case 0x1a:
      case 0x1b:
      case 0x1c:
        debug_portal_flag ^= 1;
        break;
      case 0x1d:
        debug_prroomloads_flag ^= 1;
        break;
      case 0x1e:
        enable_show_mem_use_flag();
        break;
      case 0x1f:
        mem_bars_flag_toggle();
        break;
      case 0x20:
        grab_rgb_screenshot_flag = 1;
        osViBlack('\x01');
        set_coloroutputmode_32bit();
        break;
      case 0x21:
        grab_jpeg_screenshot_flag = 1;
        osViBlack('\x01');
        set_coloroutputmode_32bit();
        break;
      case 0x22:
        debug_enable_taskgrab_flag ^= 1;
        break;
      case 0x24:
        record_next_movie_to_slot(0);
        break;
      case 0x25:
        record_next_movie_to_slot(1);
        break;
      case 0x26:
        record_next_movie_to_slot(2);
        break;
      case 0x27:
        record_next_movie_to_slot(3);
        break;
      case 0x28:
        replay_recorded_ramrom_from_indy();
        break;
      case 0x29:
        save_ramrom_to_devtool();
        break;
      case 0x2a:
        load_ramrom_from_devtool();
        break;
      case 0x2b:
        uVar2 = get_BONDdata_autoaim_y();
        set_BONDdata_autoaim_y((uint)(uVar2 == 0));
        break;
      case 0x2c:
        uVar2 = get_BONDdata_autoaim_x();
        set_BONDdata_autoaim_x((uint)(uVar2 == 0));
        break;
      case 0x2d:
        debug_007_unlock_flag ^= 1;
        break;
      case 0x2e:
        debug_enable_agent_levels ^= 1;
        break;
      case 0x2f:
        debug_enable_all_levels ^= 1;
        break;
      case 0x30:
        debug_fast_bond ^= 1;
        break;
      case 0x31:
        debug_all_obj_complete ^= 1;
        break;
      case 0x37:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0x38:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0x39:
        iVar4 = get_show_patrols_flag();
        set_show_patrols_flag((uint)(iVar4 == 0));
        break;
      case 0x3a:
        set_camera_mode(3);
        break;
      case 0x3b:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0x3c:
        if (debug_render_raster == 0) {
          handle_debug_intropos();
        }
        break;
      case 0x3d:
        if (debug_render_raster == 0) {
          handle_debug_worldpos();
        }
        else {
          iVar4 = get_curplayer_positiondata();
          if (iVar4 != 0) {
            fVar5 = *(float *)(iVar4 + 8) - dword_80037004;
            fVar6 = *(float *)(iVar4 + 0xc) - dword_80037008;
            fVar7 = *(float *)(iVar4 + 0x10) - dword_8003700C;
            sqrtf(fVar5 * fVar5 + fVar6 * fVar6 + fVar7 * fVar7);
            dword_80037004 = *(float *)(iVar4 + 8);
            dword_80037008 = *(float *)(iVar4 + 0xc);
            dword_8003700C = *(float *)(iVar4 + 0x10);
          }
        }
        break;
      case 0x3e:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0x3f:
        linemode_flag ^= 1;
        break;
      case 0x40:
        debug_chrnum_flag ^= 1;
        break;
      case 0x41:
        removed_debug_roomblocks_feature();
        break;
      case 0x42:
        debug_profile_flag ^= 1;
        if (debug_profile_flag == FALSE) {
          nullsub_35();
        }
        else {
          null_68();
        }
        break;
      case 0x43:
        debug_object_load_all_models();
        break;
      case 0x44:
        debug_weapon_load_table();
        break;
      case 0x45:
        debug_joy2skyedit_flag ^= 1;
        break;
      case 0x46:
        debug_joy2hitsedit_flag ^= 1;
        break;
      case 0x47:
        debug_joy2detailedit_flag ^= 1;
        break;
      case 0x48:
        debug_explosioninfo_flag ^= 1;
        break;
      case 0x49:
        debug_controlmode = get_highlighted_debug_option();
        break;
      case 0x4a:
        debug_gunwatchpos_flag ^= 1;
        break;
      case 0x4b:
        debug_testingmanpos_flag ^= 1;
        break;
      case 0x4c:
        debug_controlmode = get_highlighted_debug_option();
      }
    }
    if ((bPressed & (R_CBUTTONS|L_CBUTTONS)) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      get_highlighted_debug_option();
    }
    if ((bPressed & START_BUTTON) !=
        ~(R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|R_JPAD|L_JPAD|
          D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON)) {
      if (show_debug_menu_flag == 1) {
        debug_text_related_1();
      }
      show_debug_menu_flag = 0;
    }
  }
  return show_debug_menu_flag;
}



u32 get_debug_render_raster(void)

{
  return debug_render_raster;
}



u32 get_debug_freeze_processing(void)

{
  return debug_freeze_processing;
}



u32 get_debug_limit_controller_input(void)

{
  return debug_limit_controller_input;
}



void set_debug_limit_controller_input(void)

{
  debug_limit_controller_input = debug_controlmode;
  return;
}



BOOL get_memusage_display_flag(void)

{
  return memusage_display_flag;
}



BOOL get_debug_do_draw_bg(void)

{
  return debug_do_draw_bg;
}



BOOL get_debug_do_draw_obj(void)

{
  return debug_do_draw_obj;
}



BOOL get_debug_stanhit_flag(void)

{
  return debug_stanhit_flag;
}



BOOL get_debug_stanregion_flag(void)

{
  return debug_stanregion_flag;
}



BOOL get_turbo_mode_flag(void)

{
  return turbo_mode;
}



BOOL get_debug_man_pos_flag(void)

{
  return debug_man_pos_flag;
}



BOOL get_debug_testingmanpos_flag(void)

{
  return debug_testingmanpos_flag;
}



void set_debug_testingmanpos_flag(BOOL flag)

{
  debug_testingmanpos_flag = flag;
  return;
}



BOOL get_debug_joy2skyedit_flag(void)

{
  return debug_joy2skyedit_flag;
}



BOOL get_debug_joy2hitsedit_flag(void)

{
  return debug_joy2hitsedit_flag;
}



BOOL get_debug_joy2detailedit_flag(void)

{
  return debug_joy2detailedit_flag;
}



BOOL get_debug_explosioninfo_flag(void)

{
  return debug_explosioninfo_flag;
}



BOOL get_debug_prroomloads_flag(void)

{
  return debug_prroomloads_flag;
}



BOOL get_linemode_flag(void)

{
  return linemode_flag;
}



void set_linemode_flag(BOOL param_1)

{
  linemode_flag = param_1;
  return;
}



BOOL get_debug_007_unlock_flag(void)

{
  return debug_007_unlock_flag;
}



BOOL get_debug_enable_agent_levels_flag(void)

{
  return debug_enable_agent_levels;
}



BOOL get_debug_enable_all_levels_flag(void)

{
  return debug_enable_all_levels;
}



BOOL get_debug_fast_bond_flag(void)

{
  return debug_fast_bond;
}



void set_debug_fast_bond_flag(BOOL param_1)

{
  debug_fast_bond = param_1;
  return;
}



BOOL get_debug_all_obj_complete_flag(void)

{
  return debug_all_obj_complete;
}



BOOL getdebug_portal_flag(void)

{
  return debug_portal_flag;
}



BOOL get_debug_chrnum_flag(void)

{
  return debug_chrnum_flag;
}



BOOL get_debug_gunwatchpos_flag(void)

{
  return debug_gunwatchpos_flag;
}



BOOL get_debug_profile_flag(void)

{
  return debug_profile_flag;
}



BOOL get_debug_taskgrab_val(void)

{
  return debug_enable_taskgrab_flag;
}



void proc_7F091080(char param_1,char param_2,ushort param_3)

{
  int iVar1;
  float fVar2;
  char cStackX3;
  
  fVar2 = 1.00000000;
  iVar1 = (int)param_2;
  if (param_1 < -3) {
    cStackX3 = param_1 + '\x03';
  }
  else {
    cStackX3 = param_1 + -3;
    if (param_1 < '\x04') {
      cStackX3 = '\0';
    }
  }
  if (iVar1 < -3) {
    iVar1 = (iVar1 + 3) * 0x1000000 >> 0x18;
  }
  else {
    if (iVar1 < 4) {
      iVar1 = 0;
    }
    else {
      iVar1 = (iVar1 + -3) * 0x1000000 >> 0x18;
    }
  }
  if ((param_3 & 0x30) == 0) {
    if ((param_3 & 0x2000) != 0) {
      fVar2 = 0.19999999;
    }
    if ((param_3 & ~dword_80037054 & 0x8000) != 0) {
      flt_80037050 = flt_80037050 + flt_80037050;
    }
    if ((param_3 & ~dword_80037054 & 0x4000) != 0) {
      flt_80037050 = flt_80037050 * 0.50000000;
    }
    stanbondx = stanbondx + (float)iVar1 * dword_80037040 * fVar2 * flt_80037050;
    stanbondz = stanbondz + -(float)iVar1 * flt_8003703C * fVar2 * flt_80037050;
    if ((param_3 & 0x202) != 0) {
      stanbondx = stanbondx - flt_8003703C * 20.00000000 * fVar2 * flt_80037050;
      stanbondz = stanbondz - dword_80037040 * 20.00000000 * fVar2 * flt_80037050;
    }
    if ((param_3 & 0x101) != 0) {
      stanbondx = stanbondx + flt_8003703C * 20.00000000 * fVar2 * flt_80037050;
      stanbondz = stanbondz + dword_80037040 * 20.00000000 * fVar2 * flt_80037050;
    }
    dword_80037038 = dword_80037038 + (float)(int)cStackX3 * fVar2 * 0.12500000;
    if ((param_3 & 0x800) != 0) {
      dword_80037044 = dword_80037044 - (fVar2 + fVar2);
    }
    if ((param_3 & 0x400) != 0) {
      dword_80037044 = dword_80037044 + fVar2 + fVar2;
    }
    if ((param_3 & 8) != 0) {
      stanbondy = stanbondy + fVar2 * 20.00000000 * flt_80037050;
    }
    if ((param_3 & 4) != 0) {
      stanbondy = stanbondy - fVar2 * 20.00000000 * flt_80037050;
    }
  }
  while (dword_80037038 < 0.00000000) {
    dword_80037038 = dword_80037038 + 360.00000000;
  }
  while (360.00000000 <= dword_80037038) {
    dword_80037038 = dword_80037038 - 360.00000000;
  }
  while (dword_80037044 < 0.00000000) {
    dword_80037044 = dword_80037044 + 360.00000000;
  }
  while (360.00000000 <= dword_80037044) {
    dword_80037044 = dword_80037044 - 360.00000000;
  }
  flt_8003703C = cosf(dword_80037038 * flt_80055850);
  dword_80037040 = sinf(dword_80037038 * flt_80055854);
  flt_80037048 = cosf(dword_80037044 * flt_80055858);
  dword_80037024 = sinf(dword_80037044 * flt_8005585C);
  dword_80037020 = flt_80037048 * dword_80037040;
  flt_80037030 = flt_80037048;
  flt_80037028 = -flt_80037048 * flt_8003703C;
  dword_8003702C = -dword_80037024 * dword_80037040;
  dword_80037034 = dword_80037024 * flt_8003703C;
  dword_8003704C = dword_80037024;
  dword_80037054 = param_3;
  set_watch_menu_current_size_unused_maybe(60.00000000);
  dword_8007A4E0 += 1;
  if (dword_8007A4E0 == 1) {
    remove_item_in_hand(0);
    remove_item_in_hand(1);
  }
  else {
    if (dword_8007A4E0 == 4) {
      solo_char_load();
    }
  }
  return;
}



undefined4 proc_7F091580(undefined4 param_1)

{
  proc_7F0876C4((float *)&stanbondx,(float *)&dword_80037020,(float *)&dword_8003702C);
  return param_1;
}



void proc_7F0915BC(f32 param_1)

{
  flt_80037058 = flt_80037058 / (float)param_1;
  stanbondx = stanbondx * flt_80037058;
  stanbondy = stanbondy * flt_80037058;
  stanbondz = stanbondz * flt_80037058;
  flt_80037058 = (float)param_1;
  flt_8003705C = 1.00000000 / (float)param_1;
  return;
}



void handle_debug_intropos(void)

{
  float __x;
  
  get_BONDdata_position();
  __x = get_curplay_horizontal_rotation_in_degrees();
  __x = flt_80055860 - __x;
  cosf(__x);
  sinf(__x);
  cosf(__x);
  sinf(__x);
  return;
}



void handle_debug_worldpos(void)

{
  sqrtf((stanbondx - dword_80037060) * (stanbondx - dword_80037060) +
        (stanbondy - dword_80037064) * (stanbondy - dword_80037064) +
        (stanbondz - dword_80037068) * (stanbondz - dword_80037068));
  dword_80037060 = stanbondx;
  dword_80037064 = stanbondy;
  dword_80037068 = stanbondz;
  return;
}



void stanStoreBondCoord(void)

{
  xyzpoint *pos;
  
  pos = get_BONDdata_position();
  stanbondx = pos->x;
  stanbondy = pos->y;
  stanbondz = pos->z;
  dword_8007A4E0 = 0;
  return;
}



int proc_7F091740(uint param_1)

{
  int iVar1;
  
  param_1 &= 0xffff;
  iVar1 = 0;
  while (param_1 != 0) {
    if ((param_1 & 1) != 0) {
      iVar1 += 1;
    }
    param_1 >>= 1;
  }
  return iVar1;
}



void proc_7F09177C(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  short *psVar5;
  ulonglong uVar6;
  ulonglong uVar7;
  char cVar8;
  struct_15 *psVar9;
  uint uVar10;
  
  psVar9 = stru_8003F80C;
  iVar2 = proc_7F0BDF04();
  if (iVar2 == 0x5a) {
    uVar10 = 1;
  }
  else {
    uVar7 = get_num_players();
    uVar10 = 4;
    if (uVar7 == 1) {
      uVar10 = 2;
    }
  }
  bVar1 = stru_8003F80C[0].field_1;
  if (stru_8003F80C[0].anonymous_0 == '\0') {
    return;
  }
  do {
    uVar7 = (ulonglong)bVar1;
    if (bVar1 == 0) {
      cVar8 = psVar9[1].anonymous_0;
    }
    else {
      if ((ulonglong)(byte)ptr_BONDdata->can_display_cheat_text < uVar7) {
        cVar8 = psVar9[1].anonymous_0;
      }
      else {
        if ((psVar9->anonymous_3 & uVar10) == 0) {
          cVar8 = psVar9[1].anonymous_0;
        }
        else {
          uVar6 = 0;
          iVar2 = ((uint)(byte)ptr_BONDdata->something_with_cheat_text - (uint)bVar1) + 0x14;
          if (false) {
            trap(0x1c00);
          }
          if ((false) && (iVar2 == -0x80000000)) {
            trap(0x1800);
          }
          if (bVar1 != 0) {
            psVar5 = (short *)psVar9->anonymous_1;
            do {
              iVar3 = iVar2 % 0x14;
              iVar2 = iVar3 + 1;
              if (*(short *)((int)&ptr_BONDdata->field_128C + iVar3 * 2) != *psVar5) break;
              if (false) {
                trap(0x1c00);
              }
              if ((false) && (iVar2 == -0x80000000)) {
                trap(0x1800);
              }
              uVar6 = SEXT48((int)uVar6 + 1);
              psVar5 = psVar5 + 1;
            } while ((longlong)uVar6 < (longlong)uVar7);
          }
          if (uVar6 == uVar7) {
            ptr_BONDdata->can_display_cheat_text = '\0';
            uVar4 = proc_7F0927BC((uint)(byte)psVar9->anonymous_0);
            if ((uVar4 == 0) || ((psVar9->anonymous_3 & 0x10U) != 0)) {
              proc_7F091B64();
              cVar8 = psVar9[1].anonymous_0;
            }
            else {
              proc_7F092438((uint)(byte)psVar9->anonymous_0);
              cVar8 = psVar9[1].anonymous_0;
            }
          }
          else {
            cVar8 = psVar9[1].anonymous_0;
          }
        }
      }
    }
    if (cVar8 == '\0') {
      return;
    }
    if (false) {
      return;
    }
    bVar1 = psVar9[1].field_1;
    psVar9 = psVar9 + 1;
  } while( true );
}



void proc_7F09193C(void)

{
  ushort uVar1;
  u32 uVar4;
  ulonglong uVar2;
  ulonglong uVar3;
  int iVar5;
  
  uVar4 = get_cur_playernum();
  uVar2 = get_controller_buttons_held
                    ((char)uVar4,
                     R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                     R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  uVar4 = get_cur_playernum();
  uVar3 = get_controller_buttons_pressed
                    ((char)uVar4,
                     R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                     R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  uVar1 = (ushort)(uVar2 & 0x30);
  uVar3 &= ~(uVar2 & 0x30);
  if ((uVar3 & 0xffff) != 0) {
    iVar5 = proc_7F091740((uint)uVar3 & 0xffff);
    if (iVar5 == 1) {
      iVar5 = proc_7F091740((uint)(ushort)((ushort)uVar2 & ~uVar1));
      if (iVar5 == 1) {
        *(ushort *)
         ((int)&ptr_BONDdata->field_128C + (uint)(byte)ptr_BONDdata->something_with_cheat_text * 2)
             = (ushort)uVar3 | uVar1;
        ptr_BONDdata->something_with_cheat_text =
             (char)((int)((uint)(byte)ptr_BONDdata->something_with_cheat_text + 1) % 0x14);
        if ((byte)ptr_BONDdata->can_display_cheat_text < 0x14) {
          ptr_BONDdata->can_display_cheat_text = ptr_BONDdata->can_display_cheat_text + 1;
        }
        goto LAB_7f091a44;
      }
    }
    ptr_BONDdata->can_display_cheat_text = '\0';
  }
LAB_7f091a44:
  proc_7F09177C();
  return;
}



undefined8 proc_7F091A5C(longlong param_1)

{
  if (param_1 == 0x1c) {
    return 1;
  }
  return 0;
}



undefined8 proc_7F091A78(int param_1)

{
  if ((*(uint *)(&dword_8003F808 + param_1 * 0x10) & 4) == 4) {
    return 1;
  }
  return 0;
}



void proc_7F091AAC(undefined8 param_1)

{
  uint uVar1;
  u32 playernum;
  ulonglong uVar2;
  ulonglong uVar3;
  
  uVar1 = *(uint *)(&dword_8003F808 + param_1._4_4_ * 0x10);
  playernum = get_cur_playernum();
  uVar2 = get_num_players();
  if (uVar2 == 1) {
    proc_7F091B64();
  }
  else {
    if ((uVar1 & 4) != 0) {
      if ((uVar1 & 0x20) == 0) {
        uVar3 = 0;
        if (0 < (longlong)uVar2) {
          do {
            set_cur_player((int)uVar3);
            proc_7F091B64();
            uVar3 = SEXT48((int)uVar3 + 1);
          } while (uVar3 != uVar2);
        }
        set_cur_player(playernum);
      }
      else {
        proc_7F091B64();
      }
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F091B64(void)

{
  uint uVar1;
  bool bVar2;
  u32 playernum;
  ulonglong uVar3;
  ulonglong uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  byte *text;
  BOOL BVar10;
  int amount;
  int in_a0_lo;
  STAGENUM stageid;
  STAGENUM SVar11;
  f32 fVar12;
  f32 scale;
  u32 local_10;
  
  uVar1 = *(uint *)(&dword_8003F808 + in_a0_lo * 0x10);
  playernum = get_cur_playernum();
  uVar3 = get_num_players();
  if ((uVar1 & 0x10) == 0) {
    if ((uVar1 & 0x20) == 0) {
      (&DAT_80079e30)[in_a0_lo] = (&DAT_80079e30)[in_a0_lo] | (byte)(1 << (playernum & 0x1f));
    }
    else {
      (&DAT_80079e30)[in_a0_lo] = (char)(1 << ((uint)uVar3 & 0x1f)) + -1;
    }
  }
  if (true) {
    switch(in_a0_lo) {
    case 1:
      unlock_mp_chars();
      break;
    case 2:
      uVar3 = get_bondata_invincible_flag();
      if (uVar3 == 0) {
        text = get_textptr_for_textID(0xb00f);
        display_string_in_lower_left_corner((char *)text);
        set_bondata_invincible_flag(1);
      }
      break;
    case 3:
      amount = get_BONDdata_allguns_flag();
      if (amount == 0) {
        text = get_textptr_for_textID(0xb010);
        display_string_in_lower_left_corner((char *)text);
        set_BONDdata_allguns_flag(1);
      }
      break;
    case 4:
      text = get_textptr_for_textID(0xb011);
      display_string_in_lower_left_corner((char *)text);
      set_max_ammo_for_cur_player();
      break;
    case 6:
      bVar2 = false;
      if (1 < (longlong)uVar3) {
        local_10 = 0;
        if (0 < (longlong)uVar3) {
          do {
            if (local_10 != playernum) {
              set_cur_player(local_10);
              uVar4 = get_bondata_invincible_flag();
              if (uVar4 != 0) {
                bVar2 = true;
                set_bondata_invincible_flag(0);
              }
            }
            set_cur_player(playernum);
            local_10 += 1;
          } while (local_10 != (uint)uVar3);
        }
        if (bVar2) {
          play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
        }
      }
      break;
    case 7:
      set_linemode_flag(1);
      break;
    case 8:
      if (((float)ptr_BONDdata->actual_health == 1.00000000) ||
         ((float)ptr_BONDdata->current_health < 1.00000000)) {
        text = get_textptr_for_textID(0xb012);
        display_string_in_lower_left_corner((char *)text);
        ptr_BONDdata->current_health = 1.00000000;
        ptr_BONDdata->actual_health = 2.00000000;
      }
      break;
    case 9:
      if (((float)ptr_BONDdata->actual_armor == 1.00000000) ||
         ((float)ptr_BONDdata->current_armor < 1.00000000)) {
        text = get_textptr_for_textID(0xb013);
        display_string_in_lower_left_corner((char *)text);
        ptr_BONDdata->current_armor = 1.00000000;
        ptr_BONDdata->actual_armor = 2.00000000;
      }
      break;
    case 10:
      amount = get_invisible_to_guards_flag();
      if (amount != 0) {
        text = get_textptr_for_textID(0xb014);
        display_string_in_lower_left_corner((char *)text);
        set_invisible_to_guards_flag(0);
      }
      break;
    case 0xb:
      text = get_textptr_for_textID(0xb016);
      display_string_in_lower_left_corner((char *)text);
      break;
    case 0xc:
      text = get_textptr_for_textID(0xb017);
      display_string_in_lower_left_corner((char *)text);
      proc_7F0927F4(1);
      break;
    case 0xd:
      if (uVar3 == 1) {
        uVar5 = add_item_to_inventory(ITEM_RUGER);
        uVar6 = add_item_to_inventory(ITEM_LASER);
        uVar7 = add_item_to_inventory(ITEM_GOLDENGUN);
        uVar8 = add_item_to_inventory(ITEM_SILVERWPPK);
        uVar9 = add_item_to_inventory(ITEM_GOLDWPPK);
        amount = get_max_ammo_for_type(AMMO_MAGNUM);
        give_cur_player_ammo(AMMO_MAGNUM,amount);
        amount = get_max_ammo_for_type(AMMO_GGUN);
        give_cur_player_ammo(AMMO_GGUN,amount);
        amount = get_max_ammo_for_type(AMMO_9MM);
        give_cur_player_ammo(AMMO_9MM,amount);
        if (0 < (int)uVar5 + (int)uVar6 + (int)uVar7 + (int)uVar8 + (int)uVar9) {
          text = get_textptr_for_textID(0xb018);
          display_string_in_lower_left_corner((char *)text);
        }
      }
      break;
    case 0xe:
      if ((uVar3 == 1) && (cur_player_stat_ptr->player_perspective_height == 1.00000000)) {
        text = get_textptr_for_textID(0xb019);
        display_string_in_lower_left_corner((char *)text);
        cur_player_stat_ptr->player_perspective_height = 0.50000000;
        if (ptr_BONDdata->ptr_char_objectinstance != 0) {
          set_obj_instance_controller_scale(ptr_BONDdata->ptr_char_objectinstance,scale);
        }
      }
      break;
    case 0xf:
      text = get_textptr_for_textID(0xb01a);
      display_string_in_lower_left_corner((char *)text);
      break;
    case 0x10:
      if (((float)ptr_BONDdata->actual_health == 1.00000000) ||
         ((float)ptr_BONDdata->current_health < 1.00000000)) {
        text = get_textptr_for_textID(0xb01b);
        display_string_in_lower_left_corner((char *)text);
        ptr_BONDdata->current_health = 1.00000000;
        ptr_BONDdata->actual_health = 10.00000000;
      }
      break;
    case 0x11:
      if (uVar3 == 1) {
        add_item_to_inventory(ITEM_RUGER);
        amount = get_max_ammo_for_type(AMMO_MAGNUM);
        give_cur_player_ammo(AMMO_MAGNUM,amount);
      }
      break;
    case 0x12:
      if (uVar3 == 1) {
        add_item_to_inventory(ITEM_LASER);
      }
      break;
    case 0x13:
      if (uVar3 == 1) {
        add_item_to_inventory(ITEM_GOLDENGUN);
        amount = get_max_ammo_for_type(AMMO_GGUN);
        give_cur_player_ammo(AMMO_GGUN,amount);
      }
      break;
    case 0x14:
      if (uVar3 == 1) {
        add_item_to_inventory(ITEM_SILVERWPPK);
        amount = get_max_ammo_for_type(AMMO_9MM);
        give_cur_player_ammo(AMMO_9MM,amount);
      }
      break;
    case 0x15:
      if (uVar3 == 1) {
        add_item_to_inventory(ITEM_GOLDWPPK);
        amount = get_max_ammo_for_type(AMMO_9MM);
        give_cur_player_ammo(AMMO_9MM,amount);
      }
      break;
    case 0x16:
      set_curplayer_fade(300.00000000,flt_800573D8);
      break;
    case 0x18:
      BVar10 = get_debug_fast_bond_flag();
      if (BVar10 == FALSE) {
        text = get_textptr_for_textID(0xb01d);
        display_string_in_lower_left_corner((char *)text);
        set_debug_fast_bond_flag(TRUE);
      }
      break;
    case 0x19:
      BVar10 = get_debug_testingmanpos_flag();
      if (BVar10 == FALSE) {
        set_debug_testingmanpos_flag(TRUE);
      }
      break;
    case 0x1a:
      fVar12 = get_animation_rate();
      if ((float)fVar12 < 4.00000000) {
        text = get_textptr_for_textID(0xb034);
        display_string_in_lower_left_corner((char *)text);
        animation_speed_related(4.00000000);
      }
      break;
    case 0x1b:
      fVar12 = get_animation_rate();
      if (0.25000000 < (float)fVar12) {
        text = get_textptr_for_textID(0xb032);
        display_string_in_lower_left_corner((char *)text);
        animation_speed_related(0.25000000);
      }
      break;
    case 0x1d:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(0x19,0x19);
        amount = get_max_ammo_for_type(AMMO_ROCKETS);
        give_cur_player_ammo(AMMO_ROCKETS,amount);
      }
      break;
    case 0x1e:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(0x18,0x18);
        amount = get_max_ammo_for_type(AMMO_GRENADEROUND);
        give_cur_player_ammo(AMMO_GRENADEROUND,amount);
      }
      break;
    case 0x1f:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(0xe,0xe);
        amount = get_max_ammo_for_type(AMMO_9MM);
        give_cur_player_ammo(AMMO_9MM,amount);
      }
      break;
    case 0x20:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(3,3);
        amount = get_max_ammo_for_type(AMMO_KNIFE);
        give_cur_player_ammo(AMMO_KNIFE,amount);
      }
      break;
    case 0x21:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(2,2);
      }
      break;
    case 0x22:
      if (uVar3 == 1) {
        add_doubles_item_to_inventory(0x16,0x16);
      }
      break;
    case 0x23:
    case 0x24:
    case 0x25:
    case 0x26:
    case 0x27:
    case 0x28:
    case 0x29:
    case 0x2a:
    case 0x2b:
    case 0x2c:
    case 0x2d:
    case 0x2e:
    case 0x2f:
    case 0x30:
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
      if ((-1 < (int)selected_folder_num) && ((int)selected_folder_num < 4)) {
        proc_7F01E760(selected_folder_num,(longlong)(in_a0_lo + -0x23));
        play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
      }
      break;
    case 0x37:
    case 0x38:
    case 0x39:
    case 0x3a:
    case 0x3b:
    case 0x3c:
    case 0x3d:
    case 0x3e:
    case 0x3f:
    case 0x40:
    case 0x41:
    case 0x42:
    case 0x43:
    case 0x44:
    case 0x45:
    case 0x46:
    case 0x47:
    case 0x48:
    case 0x49:
    case 0x4a:
      SVar11 = in_a0_lo + 0xffffffc9;
      if ((-1 < (int)selected_folder_num) && (amount = 0, (int)selected_folder_num < 4)) {
        stageid = SP_STAGE_DAM;
        if (0 < (int)SVar11) {
          do {
            BVar10 = doesFolderHaveStageUnlockedAtDifficulty
                               (selected_folder_num,stageid,DIFFICULTY_AGENT);
            if (BVar10 == 3) {
              amount += 1;
            }
            stageid += SP_STAGE_FACILITY;
          } while (stageid != SVar11);
        }
        if (SVar11 == amount + SP_STAGE_FACILITY) {
          unlock_stage_in_folder_on_difficulty
                    (selected_folder_num,(longlong)(in_a0_lo + -0x38),0,99999999);
          play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
        }
      }
    }
  }
  return;
}



void proc_7F092438(int param_1)

{
  uint uVar1;
  u32 uVar3;
  ulonglong uVar2;
  int iVar4;
  byte *text;
  BOOL BVar5;
  f32 scale;
  
  uVar1 = *(uint *)(&dword_8003F808 + param_1 * 0x10);
  uVar3 = get_cur_playernum();
  uVar2 = get_num_players();
  if ((uVar1 & 0x10) == 0) {
    if ((uVar1 & 0x20) == 0) {
      (&DAT_80079e30)[param_1] = (&DAT_80079e30)[param_1] & ~(byte)(1 << (uVar3 & 0x1f));
    }
    else {
      (&DAT_80079e30)[param_1] = 0;
    }
  }
  if (true) {
    switch(param_1) {
    case 2:
      uVar2 = get_bondata_invincible_flag();
      if (uVar2 != 0) {
        text = get_textptr_for_textID(0xb01e);
        display_string_in_lower_left_corner((char *)text);
        set_bondata_invincible_flag(0);
      }
      break;
    case 3:
      iVar4 = get_BONDdata_allguns_flag();
      if (iVar4 != 0) {
        text = get_textptr_for_textID(0xb01f);
        display_string_in_lower_left_corner((char *)text);
        set_BONDdata_allguns_flag(0);
      }
      break;
    case 7:
      set_linemode_flag(0);
      break;
    case 10:
      iVar4 = get_invisible_to_guards_flag();
      if (iVar4 == 0) {
        text = get_textptr_for_textID(0xb020);
        display_string_in_lower_left_corner((char *)text);
        set_invisible_to_guards_flag(1);
      }
      break;
    case 0xb:
      text = get_textptr_for_textID(0xb022);
      display_string_in_lower_left_corner((char *)text);
      break;
    case 0xc:
      text = get_textptr_for_textID(0xb023);
      display_string_in_lower_left_corner((char *)text);
      proc_7F0927F4(0);
      break;
    case 0xe:
      if ((uVar2 == 1) && (cur_player_stat_ptr->player_perspective_height != 1.00000000)) {
        text = get_textptr_for_textID(0xb024);
        display_string_in_lower_left_corner((char *)text);
        cur_player_stat_ptr->player_perspective_height = 1.00000000;
        if (ptr_BONDdata->ptr_char_objectinstance != 0) {
          set_obj_instance_controller_scale(ptr_BONDdata->ptr_char_objectinstance,scale);
        }
      }
      break;
    case 0xf:
      text = get_textptr_for_textID(0xb025);
      display_string_in_lower_left_corner((char *)text);
      break;
    case 0x16:
      set_curplayer_fade(300.00000000,1.00000000);
      break;
    case 0x18:
      BVar5 = get_debug_fast_bond_flag();
      if (BVar5 != FALSE) {
        text = get_textptr_for_textID(0xb027);
        display_string_in_lower_left_corner((char *)text);
        set_debug_fast_bond_flag(FALSE);
      }
      break;
    case 0x19:
      BVar5 = get_debug_testingmanpos_flag();
      if (BVar5 != FALSE) {
        set_debug_testingmanpos_flag(FALSE);
      }
    }
  }
  return;
}



void unload_loop_all_players(void)

{
  ulonglong numplayers;
  u32 playernum;
  uint uVar1;
  int iVar2;
  int iVar3;
  ulonglong curplayer;
  
  numplayers = get_num_players();
  playernum = get_cur_playernum();
  curplayer = 0;
  if (0 < (longlong)numplayers) {
    do {
      set_cur_player((int)curplayer);
      iVar3 = -0x7ffc07e4;
      iVar2 = 1;
      do {
        if (((*(uint *)(iVar3 + -4) & 0x40) != 0) && (uVar1 = proc_7F0927BC(iVar2), uVar1 != 0)) {
          proc_7F092438(iVar2);
        }
        iVar2 += 1;
        iVar3 += 0x10;
      } while (iVar2 != 0x4b);
      curplayer = SEXT48((int)curplayer + 1);
    } while (curplayer != numplayers);
  }
  set_cur_player(playernum);
  return;
}



int proc_7F092774(int param_1)

{
  byte *pbVar1;
  
  if (*(u16 *)(&dword_8003F804 + param_1 * 0x10) == 0) {
    pbVar1 = get_textptr_for_textID(0xb028);
  }
  else {
    pbVar1 = get_textptr_for_textID(*(u16 *)(&dword_8003F804 + param_1 * 0x10));
  }
  return (int)pbVar1;
}



uint proc_7F0927BC(int param_1)

{
  u32 uVar1;
  
  uVar1 = get_cur_playernum();
  return (int)(uint)(byte)(&DAT_80079e30)[param_1] >> (uVar1 & 0x1f) & 1;
}



void proc_7F0927F4(longlong param_1)

{
  int guardcount;
  int curguard;
  GUARDdata *guard;
  f32 extraout_f12;
  f32 extraout_f12_00;
  f32 scale;
  
  guard = ptr_guard_data;
  guardcount = get_numguards();
  curguard = 0;
  scale = extraout_f12;
  if (0 < guardcount) {
    do {
      if (guard->MODELdata_pointer != 0) {
        set_obj_instance_controller_scale(guard->MODELdata_pointer,scale);
        scale = extraout_f12_00;
      }
      curguard += 1;
      guard = guard + 1;
    } while (curguard != guardcount);
  }
  return;
}



undefined8
proc_7F092890(short *param_1,short *param_2,short *param_3,float *param_4,float *param_5,
             float *param_6,float *param_7,float *param_8)

{
  undefined8 uVar1;
  double dVar2;
  double dVar3;
  double dVar4;
  double dVar5;
  double dVar6;
  double dVar7;
  double dVar8;
  uint uVar9;
  double dVar10;
  double dVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  double dVar15;
  double dVar16;
  double dVar17;
  double dVar18;
  double dVar19;
  double dVar20;
  double dVar21;
  double dVar22;
  double dVar23;
  
  dVar3 = (double)*param_7;
  dVar6 = (double)param_7[1];
  dVar2 = (double)param_7[2];
  dVar10 = (double)((int)*param_2 - (int)*param_1);
  dVar7 = (double)((int)param_2[1] - (int)param_1[1]);
  dVar8 = (double)((int)param_2[2] - (int)param_1[2]);
  dVar18 = dVar7 * (double)((int)param_3[2] - (int)param_2[2]);
  dVar19 = dVar8 * (double)((int)param_3[1] - (int)param_2[1]);
  dVar20 = dVar8 * (double)((int)*param_3 - (int)*param_2);
  dVar21 = dVar10 * (double)((int)param_3[2] - (int)param_2[2]);
  dVar14 = dVar18 - dVar19;
  dVar22 = dVar10 * (double)((int)param_3[1] - (int)param_2[1]);
  dVar23 = dVar7 * (double)((int)*param_3 - (int)*param_2);
  dVar15 = dVar20 - dVar21;
  dVar16 = dVar22 - dVar23;
  if (dVar2 * dVar16 + dVar14 * dVar3 + dVar15 * dVar6 ==
      (double)((ulonglong)(dVar14 * dVar3) & 0xffffffff00000000)) {
    uVar1 = 0;
  }
  else {
    dVar23 = dVar23 - dVar22;
    uVar1 = 0;
    dVar17 = (double)((ulonglong)dVar16 & 0xffffffff00000000);
    dVar22 = ((((((double)param_4[2] + (double)(int)param_1[2]) * dVar16 +
                dVar14 * ((double)(int)*param_1 + (double)*param_4) +
                dVar15 * ((double)(int)param_1[1] + (double)param_4[1])) - dVar14 * (double)*param_6
               ) - dVar15 * (double)param_6[1]) - (double)param_6[2] * dVar16) /
             (dVar2 * dVar16 + dVar14 * dVar3 + dVar15 * dVar6);
    dVar4 = dVar3 * dVar22 + (double)*param_6;
    dVar11 = dVar6 * dVar22 + (double)param_6[1];
    dVar22 = dVar2 * dVar22 + (double)param_6[2];
    dVar12 = dVar4 - ((double)*param_4 + (double)(int)*param_1);
    dVar13 = dVar11 - ((double)param_4[1] + (double)(int)param_1[1]);
    dVar5 = dVar22 - ((double)param_4[2] + (double)(int)param_1[2]);
    if (dVar23 == (double)((ulonglong)(double)(int)param_1[2] & 0xffffffff00000000)) {
      dVar19 = dVar19 - dVar18;
      if (dVar19 == (double)((ulonglong)dVar13 & 0xffffffff00000000)) {
        dVar19 = (dVar5 * dVar10 - dVar8 * dVar12) / (dVar21 - dVar20);
      }
      else {
        dVar19 = (dVar13 * dVar8 - dVar7 * dVar5) / dVar19;
      }
    }
    else {
      dVar19 = (dVar12 * dVar7 - dVar10 * dVar13) / dVar23;
    }
    if (dVar17 == dVar10) {
      uVar9 = (uint)((ulonglong)(double)((int)param_3[1] - (int)param_1[1]) >> 0x20);
      if (dVar17 == dVar7) {
        uVar9 = (uint)((ulonglong)dVar5 >> 0x20);
        dVar8 = (dVar5 - dVar19 * (double)((int)param_3[2] - (int)param_1[2])) / dVar8;
      }
      else {
        dVar8 = (dVar13 - dVar19 * (double)((int)param_3[1] - (int)param_1[1])) / dVar7;
      }
    }
    else {
      uVar9 = (uint)((ulonglong)dVar12 >> 0x20);
      dVar8 = (dVar12 - dVar19 * (double)((int)*param_3 - (int)*param_1)) / dVar10;
    }
    if (((dVar17 <= dVar8) && (dVar17 <= dVar19)) &&
       (dVar8 + dVar19 <= (double)((ulonglong)uVar9 << 0x20))) {
      if (dVar17 <= (dVar22 - (double)param_5[2]) * dVar2 +
                    dVar3 * (dVar4 - (double)*param_5) + dVar6 * (dVar11 - (double)param_5[1])) {
        uVar1 = 1;
        *param_8 = (float)dVar4;
        param_8[1] = (float)dVar11;
        param_8[2] = (float)dVar22;
        param_8[3] = (float)dVar14;
        param_8[4] = (float)dVar15;
        *(undefined2 *)((int)param_8 + 0x2a) = 0;
        param_8[5] = (float)dVar16;
      }
      else {
        uVar1 = 0;
      }
    }
  }
  return uVar1;
}



void proc_7F092E50(void)

{
  float fVar1;
  ushort uVar2;
  uint uVar3;
  uint uVar4;
  float fVar5;
  
  fVar5 = (float)clock_timer;
  FLOAT_80079e80 = FLOAT_80079e80 + fVar5 * 0.25000000;
  if (256.00000000 <= FLOAT_80079e80) {
    FLOAT_80079e80 = FLOAT_80079e80 - 256.00000000;
  }
  if (FLOAT_80079e80 < 0.00000000) {
    FLOAT_80079e80 = FLOAT_80079e80 + 256.00000000;
  }
  FLOAT_80079e84 = FLOAT_80079e84 + fVar5 * flt_80057510;
  if (256.00000000 <= FLOAT_80079e84) {
    FLOAT_80079e84 = FLOAT_80079e84 - 256.00000000;
  }
  if (FLOAT_80079e84 < 0.00000000) {
    FLOAT_80079e84 = FLOAT_80079e84 + 256.00000000;
  }
  FLOAT_80079e88 = FLOAT_80079e88 + fVar5 * flt_80057518;
  if (flt_80057514 <= FLOAT_80079e88) {
    FLOAT_80079e88 = FLOAT_80079e88 - flt_80057514;
  }
  if (FLOAT_80079e88 < 0.00000000) {
    FLOAT_80079e88 = FLOAT_80079e88 + flt_80057514;
  }
  if (false) {
    fVar5 = ROUND(FLOAT_80079e80);
  }
  else {
    fVar5 = FLOOR(FLOAT_80079e80);
  }
  uVar3 = (uint)fVar5;
  if (false) {
    if (false) {
      fVar5 = ROUND(FLOAT_80079e80 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(FLOAT_80079e80 - 2147483648.00000000);
    }
    if (false) goto LAB_7f093000;
    uVar3 = (int)fVar5 | 0x80000000;
  }
  else {
    if ((int)uVar3 < 0) {
LAB_7f093000:
      uVar3 = 0xffffffff;
    }
  }
  if (false) {
    fVar5 = ROUND(FLOAT_80079e84);
  }
  else {
    fVar5 = FLOOR(FLOAT_80079e84);
  }
  QWORD_8003fcd0._0_4_ = ((uVar3 ^ QWORD_8003fcd0._0_4_ >> 0xc) << 0x14) >> 8 ^ QWORD_8003fcd0._0_4_
  ;
  if (false) {
    if (false) {
      fVar5 = ROUND(FLOAT_80079e84 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(FLOAT_80079e84 - 2147483648.00000000);
    }
    if (false) goto LAB_7f093098;
    uVar2 = (ushort)(int)fVar5;
  }
  else {
    uVar2 = (ushort)(int)fVar5;
    if ((int)fVar5 < 0) {
LAB_7f093098:
      uVar2 = 0xffff;
    }
  }
  QWORD_8003fcd0._0_4_ =
       QWORD_8003fcd0._0_4_ & 0xffff0000 | (uint)(uVar2 & 0xfff | QWORD_8003fcd0._2_2_ & 0xf000);
  dword_8003FCD8._0_4_ =
       (((int)FLOAT_80079e80 + 0x5aU & 0xff ^ dword_8003FCD8._0_4_ >> 0xc) << 0x14) >> 8 ^
       dword_8003FCD8._0_4_;
  dword_8003FCD8._0_4_ =
       dword_8003FCD8._0_4_ & 0xffff0000 |
       (uint)((short)(int)FLOAT_80079e84 + 0x96U & 0xff | dword_8003FCD8._2_2_ & 0xf000);
  fVar5 = sinf(FLOAT_80079e88);
  fVar5 = fVar5 * 127.00000000 + 128.00000000;
  if (false) {
    fVar1 = ROUND(fVar5);
  }
  else {
    fVar1 = FLOOR(fVar5);
  }
  uVar3 = (uint)fVar1;
  if (false) {
    if (false) {
      fVar5 = ROUND(fVar5 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar5 - 2147483648.00000000);
    }
    if (false) goto LAB_7f0931bc;
    uVar3 = (int)fVar5 | 0x80000000;
  }
  else {
    if ((int)uVar3 < 0) {
LAB_7f0931bc:
      uVar3 = 0xffffffff;
    }
  }
  if (false) {
    fVar5 = ROUND(FLOAT_80079e80);
  }
  else {
    fVar5 = FLOOR(FLOAT_80079e80);
  }
  uVar4 = (uint)fVar5;
  QWORD_8003fce0._0_4_ = uVar3 | QWORD_8003fce0._0_4_ & 0xffffff00;
  if (false) {
    if (false) {
      fVar5 = ROUND(FLOAT_80079e80 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(FLOAT_80079e80 - 2147483648.00000000);
    }
    if (false) goto LAB_7f093254;
    uVar4 = (int)fVar5 | 0x80000000;
  }
  else {
    if ((int)uVar4 < 0) {
LAB_7f093254:
      uVar4 = 0xffffffff;
    }
  }
  if (false) {
    fVar5 = ROUND(FLOAT_80079e84);
  }
  else {
    fVar5 = FLOOR(FLOAT_80079e84);
  }
  QWORD_8003fd38._0_4_ = ((uVar4 ^ QWORD_8003fd38._0_4_ >> 0xc) << 0x14) >> 8 ^ QWORD_8003fd38._0_4_
  ;
  if (false) {
    if (false) {
      fVar5 = ROUND(FLOAT_80079e84 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(FLOAT_80079e84 - 2147483648.00000000);
    }
    if (false) goto LAB_7f0932ec;
    uVar2 = (ushort)(int)fVar5;
  }
  else {
    uVar2 = (ushort)(int)fVar5;
    if ((int)fVar5 < 0) {
LAB_7f0932ec:
      uVar2 = 0xffff;
    }
  }
  QWORD_8003fd38._0_4_ =
       QWORD_8003fd38._0_4_ & 0xffff0000 | (uint)(uVar2 & 0xfff | QWORD_8003fd38._2_2_ & 0xf000);
  dword_8003FD40._0_4_ =
       (((int)FLOAT_80079e80 + 0x5aU & 0xff ^ dword_8003FD40._0_4_ >> 0xc) << 0x14) >> 8 ^
       dword_8003FD40._0_4_;
  dword_8003FD40._0_4_ =
       dword_8003FD40._0_4_ & 0xffff0000 |
       (uint)((short)(int)FLOAT_80079e84 + 0x96U & 0xff | dword_8003FD40._2_2_ & 0xf000);
  fVar5 = sinf(FLOAT_80079e88);
  fVar5 = fVar5 * 127.00000000 + 128.00000000;
  if (false) {
    fVar1 = ROUND(fVar5);
  }
  else {
    fVar1 = FLOOR(fVar5);
  }
  uVar3 = (uint)fVar1;
  if (false) {
    if (false) {
      fVar5 = ROUND(fVar5 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar5 - 2147483648.00000000);
    }
    if (true) {
      uVar3 = (int)fVar5 | 0x80000000;
      goto LAB_7f093418;
    }
  }
  else {
    if (-1 < (int)uVar3) goto LAB_7f093418;
  }
  uVar3 = 0xffffffff;
LAB_7f093418:
  QWORD_8003fd48._0_4_ = uVar3 | QWORD_8003fce0._0_4_ & 0xffffff00;
  return;
}



undefined4 * proc_7F09343C(undefined4 *param_1,longlong param_2)

{
  float fVar1;
  float fVar2;
  uint uVar3;
  
  if (param_2 != 0) {
    *param_1 = 0x6000000;
    param_1[1] = 0x8003fcc0;
    return param_1 + 2;
  }
  param_1[1] = 82000;
  *param_1 = 0xf5100800;
  param_1[3] = 0x1014050;
  param_1[2] = 0xf5100800;
  param_1[4] = 0xf2000000;
  param_1[5] = 0;
  param_1[7] = 0x1000000;
  param_1[6] = 0xf205a096;
  fVar2 = sinf(FLOAT_80079e88);
  fVar2 = fVar2 * 127.00000000 + 128.00000000;
  if (false) {
    fVar1 = ROUND(fVar2);
  }
  else {
    fVar1 = FLOOR(fVar2);
  }
  uVar3 = (uint)fVar1;
  if (true) {
    if (-1 < (int)uVar3) goto LAB_7f0935a8;
  }
  else {
    if (false) {
      fVar2 = ROUND(fVar2 - 2147483648.00000000);
    }
    else {
      fVar2 = FLOOR(fVar2 - 2147483648.00000000);
    }
    if (true) {
      uVar3 = (int)fVar2 | 0x80000000;
      goto LAB_7f0935a8;
    }
  }
  uVar3 = 0xffffffff;
LAB_7f0935a8:
  param_1[8] = uVar3 & 0xff | 0xfa000000;
  param_1[9] = 0xffffffff;
  param_1[0xb] = 0;
  param_1[10] = 0xba001102;
  param_1[0xd] = 0x2000;
  param_1[0xc] = 0xba000c02;
  param_1[0xf] = 0x1f1093ff;
  param_1[0xe] = 0xfc272c04;
  param_1[0x11] = 0xc192078;
  param_1[0x10] = 0xb900031d;
  param_1[0x12] = 0xba001001;
  param_1[0x13] = 0;
  param_1[0x15] = 0x100000;
  param_1[0x14] = 0xba001402;
  param_1[0x16] = 0xb7000000;
  param_1[0x17] = 0x2000;
  return param_1 + 0x18;
}



undefined4 * proc_7F09365C(undefined4 *param_1,longlong param_2)

{
  float fVar1;
  float fVar2;
  uint uVar3;
  
  if (param_2 != 0) {
    *param_1 = 0x6000000;
    param_1[1] = 0x8003fd28;
    return param_1 + 2;
  }
  param_1[1] = 82000;
  *param_1 = 0xf5480400;
  param_1[3] = 0x1014050;
  param_1[2] = 0xf5480400;
  param_1[4] = 0xf2000000;
  param_1[5] = 0;
  param_1[7] = 0x1000000;
  param_1[6] = 0xf205a096;
  fVar2 = sinf(FLOAT_80079e88);
  fVar2 = fVar2 * 127.00000000 + 128.00000000;
  if (false) {
    fVar1 = ROUND(fVar2);
  }
  else {
    fVar1 = FLOOR(fVar2);
  }
  uVar3 = (uint)fVar1;
  if (true) {
    if (-1 < (int)uVar3) goto LAB_7f0937c8;
  }
  else {
    if (false) {
      fVar2 = ROUND(fVar2 - 2147483648.00000000);
    }
    else {
      fVar2 = FLOOR(fVar2 - 2147483648.00000000);
    }
    if (true) {
      uVar3 = (int)fVar2 | 0x80000000;
      goto LAB_7f0937c8;
    }
  }
  uVar3 = 0xffffffff;
LAB_7f0937c8:
  param_1[8] = uVar3 & 0xff | 0xfa000000;
  param_1[9] = 0xffffffff;
  param_1[0xb] = 0;
  param_1[10] = 0xba001102;
  param_1[0xd] = 0x2000;
  param_1[0xc] = 0xba000c02;
  param_1[0xf] = 0x1f1093ff;
  param_1[0xe] = 0xfc272c04;
  param_1[0x11] = 0xc192078;
  param_1[0x10] = 0xb900031d;
  param_1[0x12] = 0xba001001;
  param_1[0x13] = 0;
  param_1[0x15] = 0x100000;
  param_1[0x14] = 0xba001402;
  param_1[0x16] = 0xb7000000;
  param_1[0x17] = 0x2000;
  return param_1 + 0x18;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F093880(void)

{
  undefined4 *puVar1;
  float *in_a2_lo;
  f32 fVar2;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float fStack12;
  float fStack8;
  float *pfStack4;
  
  pfStack4 = (float *)proc_7F078444();
  fVar2 = get_ulx();
  fStack12 = (float)fVar2 + in_f12;
  fVar2 = get_uly();
  puVar1 = get_ptr_currentdata();
  fStack8 = (float)puVar1[0xe] + in_f14 + (float)fVar2;
  proc_7F077EEC(&fStack12,in_a2_lo,extraout_f12);
  proc_7F0583D8(pfStack4,in_a2_lo);
  return;
}



undefined8 proc_7F0938FC(xyzpoint *param_1,xyzpoint *param_2,float *param_3)

{
  xyzpoint *pxVar2;
  undefined8 uVar1;
  undefined4 *puVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  pxVar2 = get_BONDdata_position();
  fVar4 = sqrtf(param_1->z * param_1->z + param_1->x * param_1->x + flt_80057520);
  fVar6 = 1.00000000;
  uVar1 = 0;
  fVar4 = (param_1->y + param_1->y) / fVar4;
  if (fVar4 <= 1.00000000) {
    fVar6 = fVar4;
  }
  *param_3 = 1.00000000 - fVar6;
  fVar6 = flt_80057524;
  if (param_1->y != 0.00000000) {
    fVar6 = param_1->y;
  }
  if (0.00000000 < fVar6) {
    puVar3 = get_ptr_currentdata();
    fVar5 = ((float)puVar3[3] - pxVar2->y) / fVar6;
    fVar4 = sqrtf(param_1->z * param_1->z + param_1->x * param_1->x);
    if (flt_80057528 < fVar4 * fVar5) {
      fVar5 = fVar5 * (flt_80057528 / (fVar4 * fVar5));
      fVar4 = param_1->x;
    }
    else {
      fVar4 = param_1->x;
    }
    uVar1 = 1;
    param_2->x = fVar4 * fVar5 + pxVar2->x;
    param_2->y = pxVar2->y + fVar5 * fVar6;
    param_2->z = param_1->z * fVar5 + pxVar2->z;
  }
  return uVar1;
}



undefined8 proc_7F093A78(float *param_1,float *param_2,float *param_3)

{
  xyzpoint *pxVar2;
  undefined8 uVar1;
  undefined4 *puVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  
  pxVar2 = get_BONDdata_position();
  fVar4 = sqrtf(param_1[2] * param_1[2] + *param_1 * *param_1 + flt_8005752C);
  fVar6 = 1.00000000;
  uVar1 = 0;
  fVar4 = (param_1[1] * -2.00000000) / fVar4;
  if (fVar4 <= 1.00000000) {
    fVar6 = fVar4;
  }
  *param_3 = 1.00000000 - fVar6;
  fVar6 = flt_80057530;
  if (param_1[1] != 0.00000000) {
    fVar6 = param_1[1];
  }
  if (fVar6 < 0.00000000) {
    puVar3 = get_ptr_currentdata();
    fVar5 = ((float)puVar3[9] - pxVar2->y) / fVar6;
    fVar4 = sqrtf(param_1[2] * param_1[2] + *param_1 * *param_1);
    if (flt_80057534 < fVar4 * fVar5) {
      fVar5 = fVar5 * (flt_80057534 / (fVar4 * fVar5));
      fVar4 = *param_1;
    }
    else {
      fVar4 = *param_1;
    }
    uVar1 = 1;
    *param_2 = fVar4 * fVar5 + pxVar2->x;
    param_2[1] = pxVar2->y + fVar5 * fVar6;
    param_2[2] = param_1[2] * fVar5 + pxVar2->z;
  }
  return uVar1;
}



void proc_7F093BFC(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  
  fVar1 = param_1[1];
  fVar2 = param_2[1];
  fVar4 = *param_1;
  fVar3 = *param_2;
  param_3[1] = 0.00000000;
  fVar1 = fVar1 / (fVar1 - fVar2);
  *param_3 = (fVar3 - fVar4) * fVar1 + fVar4;
  param_3[2] = (param_2[2] - param_1[2]) * fVar1 + param_1[2];
  return;
}



float proc_7F093C48(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5)

{
  if (param_1 < param_2) {
    return param_2;
  }
  if (param_1 <= param_5) {
    return param_1;
  }
  return param_5;
}



float proc_7F093C88(float param_1)

{
  return (float)(int)(param_1 + 0.50000000);
}



void proc_7F093CB0(int param_1,float param_2)

{
  float fVar1;
  undefined4 *puVar2;
  float in_a1_lo;
  undefined uVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  puVar2 = get_ptr_currentdata();
  fVar5 = (float)(uint)*(byte *)(puVar2 + 2);
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar7 = (float)(uint)*(byte *)((int)puVar2 + 9);
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar6 = (float)(uint)*(byte *)((int)puVar2 + 10);
  if (false) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar4 = 1.00000000 - in_a1_lo;
  fVar5 = (float)puVar2[5] * (1.00000000 - fVar5 / 255.00000000) * fVar4 + fVar5;
  if (false) {
    fVar1 = ROUND(fVar5);
  }
  else {
    fVar1 = FLOOR(fVar5);
  }
  uVar3 = (undefined)(int)fVar1;
  if (true) {
    if ((int)fVar1 < 0) goto LAB_7f093de0;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar5 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar5 - 2147483648.00000000);
    }
    if (false) {
LAB_7f093de0:
      uVar3 = 0xff;
    }
    else {
      uVar3 = (undefined)(int)fVar5;
    }
  }
  *(undefined *)(param_1 + 0x14) = uVar3;
  puVar2 = get_ptr_currentdata();
  fVar7 = (float)puVar2[6] * (1.00000000 - fVar7 / 255.00000000) * fVar4 + fVar7;
  if (false) {
    fVar5 = ROUND(fVar7);
  }
  else {
    fVar5 = FLOOR(fVar7);
  }
  uVar3 = (undefined)(int)fVar5;
  if (true) {
    if ((int)fVar5 < 0) goto LAB_7f093ea8;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar7 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar7 - 2147483648.00000000);
    }
    if (false) {
LAB_7f093ea8:
      uVar3 = 0xff;
    }
    else {
      uVar3 = (undefined)(int)fVar5;
    }
  }
  *(undefined *)(param_1 + 0x15) = uVar3;
  puVar2 = get_ptr_currentdata();
  fVar6 = (float)puVar2[7] * (1.00000000 - fVar6 / 255.00000000) * fVar4 + fVar6;
  if (false) {
    fVar5 = ROUND(fVar6);
  }
  else {
    fVar5 = FLOOR(fVar6);
  }
  if (true) {
    uVar3 = (undefined)(int)fVar5;
    if (-1 < (int)fVar5) goto LAB_7f093f88;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar6 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar6 - 2147483648.00000000);
    }
    if (true) {
      uVar3 = (undefined)(int)fVar5;
      goto LAB_7f093f88;
    }
  }
  uVar3 = 0xff;
LAB_7f093f88:
  *(undefined *)(param_1 + 0x16) = uVar3;
  *(undefined *)(param_1 + 0x17) = 0xff;
  return;
}



void proc_7F093FA4(int param_1,float param_2)

{
  float fVar1;
  undefined4 *puVar2;
  float in_a1_lo;
  undefined uVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  puVar2 = get_ptr_currentdata();
  fVar5 = (float)(uint)*(byte *)(puVar2 + 2);
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar7 = (float)(uint)*(byte *)((int)puVar2 + 9);
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar6 = (float)(uint)*(byte *)((int)puVar2 + 10);
  if (false) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  puVar2 = get_ptr_currentdata();
  fVar4 = 1.00000000 - in_a1_lo;
  fVar5 = (float)puVar2[0xb] * (1.00000000 - fVar5 / 255.00000000) * fVar4 + fVar5;
  if (false) {
    fVar1 = ROUND(fVar5);
  }
  else {
    fVar1 = FLOOR(fVar5);
  }
  uVar3 = (undefined)(int)fVar1;
  if (true) {
    if ((int)fVar1 < 0) goto LAB_7f0940d4;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar5 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar5 - 2147483648.00000000);
    }
    if (false) {
LAB_7f0940d4:
      uVar3 = 0xff;
    }
    else {
      uVar3 = (undefined)(int)fVar5;
    }
  }
  *(undefined *)(param_1 + 0x14) = uVar3;
  puVar2 = get_ptr_currentdata();
  fVar7 = (float)puVar2[0xc] * (1.00000000 - fVar7 / 255.00000000) * fVar4 + fVar7;
  if (false) {
    fVar5 = ROUND(fVar7);
  }
  else {
    fVar5 = FLOOR(fVar7);
  }
  uVar3 = (undefined)(int)fVar5;
  if (true) {
    if ((int)fVar5 < 0) goto LAB_7f09419c;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar7 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar7 - 2147483648.00000000);
    }
    if (false) {
LAB_7f09419c:
      uVar3 = 0xff;
    }
    else {
      uVar3 = (undefined)(int)fVar5;
    }
  }
  *(undefined *)(param_1 + 0x15) = uVar3;
  puVar2 = get_ptr_currentdata();
  fVar6 = (float)puVar2[0xd] * (1.00000000 - fVar6 / 255.00000000) * fVar4 + fVar6;
  if (false) {
    fVar5 = ROUND(fVar6);
  }
  else {
    fVar5 = FLOOR(fVar6);
  }
  if (true) {
    uVar3 = (undefined)(int)fVar5;
    if (-1 < (int)fVar5) goto LAB_7f09427c;
  }
  else {
    if (false) {
      fVar5 = ROUND(fVar6 - 2147483648.00000000);
    }
    else {
      fVar5 = FLOOR(fVar6 - 2147483648.00000000);
    }
    if (true) {
      uVar3 = (undefined)(int)fVar5;
      goto LAB_7f09427c;
    }
  }
  uVar3 = 0xff;
LAB_7f09427c:
  *(undefined *)(param_1 + 0x16) = uVar3;
  *(undefined *)(param_1 + 0x17) = 0xff;
  return;
}



uint proc_7F094298(float param_1)

{
  float fVar1;
  float fVar2;
  
  fVar1 = flt_80057538;
  if (param_1 <= flt_80057538) {
    fVar1 = param_1;
  }
  fVar2 = flt_8005753C;
  if (flt_8005753C <= fVar1) {
    fVar2 = fVar1;
  }
  if (fVar2 < 0.00000000) {
    fVar2 = fVar2 * -65536.00000000;
    if (false) {
      fVar1 = ROUND(fVar2);
    }
    else {
      fVar1 = FLOOR(fVar2);
    }
    if (false) {
      if (false) {
        fVar1 = ROUND(fVar2 - 2147483648.00000000);
      }
      else {
        fVar1 = FLOOR(fVar2 - 2147483648.00000000);
      }
      if (true) {
        return -((int)fVar1 | 0x80000000U);
      }
    }
    else {
      if (-1 < (int)fVar1) {
        return (uint)-(int)fVar1;
      }
    }
    return 1;
  }
  fVar2 = fVar2 * 65536.00000000;
  if (false) {
    fVar1 = ROUND(fVar2);
  }
  else {
    fVar1 = FLOOR(fVar2);
  }
  if (false) {
    if (false) {
      fVar1 = ROUND(fVar2 - 2147483648.00000000);
    }
    else {
      fVar1 = FLOOR(fVar2 - 2147483648.00000000);
    }
    if (true) {
      return (int)fVar1 | 0x80000000;
    }
  }
  else {
    if (-1 < (int)fVar1) {
      return (int)fVar1;
    }
  }
  return 0xffffffff;
}



void proc_7F09442C(undefined4 stagenum)

{
  copyof_stagenum = stagenum;
  return;
}



void proc_7F094438(void)

{
  DAT_8003fd94 = DAT_8003fd94 + (float)clock_timer;
  if (4096.00000000 < DAT_8003fd94) {
    DAT_8003fd94 = DAT_8003fd94 - 4096.00000000;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0959fc) overlaps instruction at (ram,0x7f0959f8)
// 
// WARNING: Unknown calling convention yet parameter storage is locked

uint * proc_7F094488(void)

{
  undefined4 *puVar3;
  undefined4 *DL;
  ulonglong uVar1;
  uint *puVar4;
  short sVar8;
  short sVar9;
  short sVar10;
  short sVar11;
  undefined8 uVar2;
  float *pfVar5;
  float *pfVar6;
  undefined4 *puVar7;
  int iVar12;
  undefined4 *in_a0_lo;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  int iVar13;
  undefined *puVar14;
  uint uVar15;
  uint uVar16;
  f32 fVar17;
  f32 fVar18;
  f32 fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float extraout_f12_07;
  float extraout_f12_08;
  float extraout_f12_09;
  float extraout_f12_10;
  float extraout_f12_11;
  float extraout_f12_12;
  float extraout_f12_13;
  float extraout_f12_14;
  float extraout_f12_15;
  float extraout_f12_16;
  float extraout_f12_17;
  float extraout_f12_18;
  float extraout_f12_19;
  float extraout_f12_20;
  float extraout_f12_21;
  float extraout_f12_22;
  float extraout_f12_23;
  float extraout_f12_24;
  float extraout_f12_25;
  float extraout_f12_26;
  float extraout_f12_27;
  float extraout_f12_28;
  float extraout_f12_29;
  float extraout_f12_30;
  float extraout_f12_31;
  float extraout_f12_32;
  float extraout_f12_33;
  float extraout_f12_34;
  float extraout_f12_35;
  float extraout_f12_36;
  float extraout_f12_37;
  float mf_4__4_;
  float extraout_f12_38;
  float extraout_f12_39;
  float extraout_f12_40;
  float fVar24;
  float extraout_f12_41;
  float extraout_f12_42;
  float extraout_f12_43;
  float extraout_f12_44;
  float extraout_f12_45;
  float extraout_f12_46;
  float extraout_f12_47;
  float extraout_f12_48;
  float extraout_f12_49;
  float extraout_f12_50;
  float extraout_f12_51;
  float extraout_f12_52;
  float extraout_f12_53;
  float extraout_f12_54;
  float extraout_f12_55;
  float extraout_f12_56;
  float extraout_f12_57;
  float extraout_f12_58;
  float extraout_f12_59;
  float extraout_f12_60;
  float extraout_f12_61;
  float extraout_f12_62;
  float extraout_f12_63;
  float extraout_f12_64;
  float extraout_f12_65;
  float extraout_f12_66;
  float extraout_f12_67;
  float extraout_f12_68;
  float extraout_f12_69;
  float extraout_f12_70;
  float extraout_f12_71;
  float extraout_f12_72;
  float extraout_f12_73;
  float extraout_f12_74;
  float extraout_f12_75;
  float extraout_f12_76;
  float extraout_f12_77;
  float extraout_f12_78;
  float extraout_f12_79;
  float extraout_f12_80;
  float extraout_f12_81;
  float extraout_f12_82;
  float extraout_f12_83;
  float mf_4__4__00;
  float extraout_f12_84;
  float extraout_f12_85;
  float extraout_f12_86;
  float extraout_f12_87;
  float extraout_f12_88;
  float extraout_f12_89;
  float extraout_f12_90;
  float x;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float fVar25;
  float fVar26;
  float x_00;
  float extraout_f14_02;
  float fVar27;
  float extraout_f14_03;
  float fVar28;
  float fVar29;
  uint *puStackX0;
  float *pfStack1624;
  int iStack1576;
  undefined auStack1572 [40];
  float fStack1532;
  float fStack1528;
  undefined auStack1516 [40];
  float fStack1476;
  float fStack1472;
  undefined auStack1460 [40];
  float fStack1420;
  float fStack1416;
  undefined auStack1404 [40];
  float fStack1364;
  float fStack1360;
  undefined auStack1348 [56];
  float afStack1292 [16];
  float afStack1228 [17];
  undefined4 *puStack1160;
  uint uStack1088;
  undefined auStack1084 [40];
  float afStack1044 [4];
  undefined auStack1028 [44];
  float fStack984;
  undefined auStack972 [44];
  float fStack928;
  undefined auStack916 [44];
  float fStack872;
  undefined auStack860 [56];
  float afStack804 [16];
  float afStack740 [25];
  int iStack640;
  float fStack628;
  float fStack624;
  float fStack620;
  float fStack616;
  float fStack612;
  float fStack604;
  float fStack600;
  float fStack596;
  float fStack592;
  float fStack588;
  float fStack580;
  float fStack576;
  float fStack572;
  float fStack568;
  float fStack564;
  float fStack556;
  float fStack552;
  float fStack548;
  float fStack544;
  float fStack540;
  float fStack532;
  float fStack528;
  float fStack524;
  float fStack520;
  float fStack516;
  float fStack508;
  float fStack504;
  float fStack500;
  float fStack496;
  float fStack492;
  float fStack484;
  float fStack480;
  float fStack476;
  float fStack472;
  float fStack468;
  float fStack460;
  float fStack456;
  float fStack452;
  float fStack448;
  float fStack444;
  float fStack436;
  float fStack432;
  float fStack428;
  float fStack424;
  float fStack420;
  float fStack412;
  float fStack408;
  float fStack404;
  float fStack400;
  float fStack396;
  uint uStack388;
  uint uStack384;
  uint uStack380;
  uint uStack376;
  float fStack360;
  float fStack356;
  float fStack352;
  float fStack348;
  float fStack344;
  float fStack340;
  float fStack336;
  float fStack332;
  float fStack328;
  float fStack324;
  float fStack320;
  float fStack316;
  float fStack312;
  float fStack308;
  float fStack304;
  float fStack300;
  float fStack296;
  float fStack292;
  float fStack288;
  float fStack284;
  float fStack280;
  float fStack276;
  float fStack272;
  float fStack268;
  float fStack264;
  float fStack260;
  float fStack256;
  float fStack252;
  float fStack248;
  float fStack244;
  float fStack240;
  float fStack236;
  float fStack232;
  float fStack228;
  float fStack224;
  float fStack220;
  float fStack216;
  float fStack212;
  float fStack208;
  float fStack204;
  float fStack200;
  float fStack196;
  xyzpoint xStack192;
  xyzpoint xStack180;
  xyzpoint xStack168;
  xyzpoint xStack156;
  xyzpoint xStack144;
  xyzpoint xStack132;
  xyzpoint xStack120;
  xyzpoint xStack108;
  xyzpoint xStack96;
  xyzpoint xStack84;
  xyzpoint xStack72;
  xyzpoint xStack60;
  xyzpoint xStack48;
  xyzpoint xStack36;
  xyzpoint xStack24;
  xyzpoint xStack12;
  
  puStackX0 = in_a0_lo;
  fVar17 = proc_7F0B483C();
  iStack640 = 0;
  fVar29 = (float)fVar17 / 30.00000000;
  puVar3 = get_ptr_currentdata();
  DL = get_ptr_currentdata();
  if (*(char *)((int)DL + 0xb) == '\0') {
    uVar1 = get_num_players();
    if (uVar1 == 1) {
      DL = puStackX0 + 2;
      puStackX0[1] = 0x300000;
      *puStackX0 = 0xba001402;
      puStackX0 = DL;
      puVar4 = set_setfillcolor(DL,(uint)*(byte *)(puVar3 + 2),(uint)*(byte *)((int)puVar3 + 9),
                                (uint)*(byte *)((int)puVar3 + 10));
      puStackX0 = puVar4 + 2;
      sVar8 = get_video2_settings_width();
      sVar9 = get_video2_settings_ulx();
      sVar10 = get_video2_settings_uly();
      sVar11 = get_video2_settings_height();
      *puVar4 = (((int)sVar11 + (int)sVar10) - 1U & 0x3ff) << 2 | 0xf6000000 |
                (((int)sVar9 + (int)sVar8) - 1U & 0x3ff) << 0xe;
      sVar8 = get_video2_settings_ulx();
      sVar9 = get_video2_settings_uly();
      puVar4[1] = ((int)sVar9 & 0x3ffU) << 2 | ((int)sVar8 & 0x3ffU) << 0xe;
      puStackX0[1] = 0;
      *puStackX0 = 0xe7000000;
      return puStackX0 + 2;
    }
    puStackX0[1] = 0;
    *puStackX0 = 0xe7000000;
    puStackX0[3] = 0x300000;
    puStackX0[2] = 0xba001402;
    puStackX0[5] = 0;
    puStackX0[4] = 0xb900031d;
    puStackX0[6] = (((int)ptr_BONDdata->playerscreenulx + (int)ptr_BONDdata->playerscreenwidth) - 1U
                   & 0x3ff) << 0xe | 0xf6000000 |
                   (((int)ptr_BONDdata->playerscreenuly + (int)ptr_BONDdata->playerscreenheight) -
                    1U & 0x3ff) << 2;
    puStackX0[7] = ((int)ptr_BONDdata->playerscreenulx & 0x3ffU) << 0xe |
                   ((int)ptr_BONDdata->playerscreenuly & 0x3ffU) << 2;
    puStackX0[9] = 0;
    puStackX0[8] = 0xe7000000;
    return puStackX0 + 10;
  }
  puStackX0 = set_setfillcolor(puStackX0,(uint)*(byte *)(puVar3 + 2),
                               (uint)*(byte *)((int)puVar3 + 9),(uint)*(byte *)((int)puVar3 + 10));
  proc_7F093880();
  get_screen_width();
  fVar27 = flt_80057540;
  proc_7F093880();
  get_screen_height();
  proc_7F093880();
  get_screen_width();
  get_screen_height();
  proc_7F093880();
  uVar2 = proc_7F0938FC(&xStack12,&xStack108,&fStack292);
  uStack376 = (uint)uVar2;
  uVar2 = proc_7F0938FC(&xStack24,&xStack120,&fStack296);
  uStack380 = (uint)uVar2;
  uVar2 = proc_7F0938FC(&xStack36,&xStack132,&fStack300);
  uStack384 = (uint)uVar2;
  uVar2 = proc_7F0938FC(&xStack48,&xStack144,&fStack304);
  uStack388 = (uint)uVar2;
  proc_7F093A78((float *)&xStack12,&fStack204,&fStack324);
  proc_7F093A78((float *)&xStack24,&fStack216,&fStack328);
  proc_7F093A78((float *)&xStack36,&fStack228,&fStack332);
  proc_7F093A78((float *)&xStack48,&fStack240,&fStack336);
  if (uStack376 == uStack384) {
    fStack356 = 0.00000000;
  }
  else {
    fVar17 = get_uly();
    fVar18 = get_screen_height();
    fStack356 = (xStack12.y / (xStack12.y - xStack36.y)) * (float)fVar18 + (float)fVar17;
    proc_7F093880();
    proc_7F093BFC((float *)&xStack12,(float *)&xStack36,(float *)&xStack84);
    proc_7F0938FC(&xStack84,&xStack180,&fStack316);
    proc_7F093A78((float *)&xStack84,&fStack276,&fStack348);
  }
  if (uStack380 == uStack388) {
    fStack360 = 0.00000000;
  }
  else {
    fVar17 = get_uly();
    fVar18 = get_screen_height();
    fStack360 = (xStack24.y / (xStack24.y - xStack48.y)) * (float)fVar18 + (float)fVar17;
    get_screen_width();
    proc_7F093880();
    proc_7F093BFC((float *)&xStack24,(float *)&xStack48,(float *)&xStack96);
    proc_7F0938FC(&xStack96,&xStack192,&fStack320);
    proc_7F093A78((float *)&xStack96,&fStack288,&fStack352);
  }
  if (uStack376 != uStack380) {
    get_ulx();
    get_screen_width();
    proc_7F093880();
    proc_7F093BFC((float *)&xStack12,(float *)&xStack24,(float *)&xStack60);
    proc_7F0938FC(&xStack60,&xStack156,&fStack308);
    proc_7F093A78((float *)&xStack60,&fStack252,&fStack340);
  }
  if (uStack384 != uStack388) {
    get_ulx();
    get_screen_width();
    get_screen_height();
    proc_7F093880();
    proc_7F093BFC((float *)&xStack36,(float *)&xStack48,(float *)&xStack72);
    proc_7F0938FC(&xStack72,&xStack168,&fStack312);
    proc_7F093A78((float *)&xStack72,&fStack264,&fStack344);
  }
  uVar16 = uStack376 << 3 | uStack380 << 2 | uStack384 << 1 | uStack388;
  if (false) {
    return puStackX0;
  }
  switch(uVar16) {
  case 0:
    fStack628 = fStack204 * fVar29;
    fStack624 = fStack200 * fVar29;
    fStack620 = fStack196 * fVar29;
    fStack604 = fStack216 * fVar29;
    fStack600 = fStack212 * fVar29;
    fStack596 = fStack208 * fVar29;
    fStack580 = fStack228 * fVar29;
    fStack576 = fStack224 * fVar29;
    fStack572 = fStack220 * fVar29;
    fStack556 = fStack240 * fVar29;
    uVar15 = 4;
    fStack552 = fStack236 * fVar29;
    fStack588 = fStack208 + DAT_8003fd94;
    fStack548 = fStack232 * fVar29;
    fStack612 = fStack196 + DAT_8003fd94;
    fStack564 = fStack220 + DAT_8003fd94;
    fStack540 = fStack232 + DAT_8003fd94;
    fStack616 = fStack204;
    fStack592 = fStack216;
    fStack568 = fStack228;
    fStack544 = fStack240;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12);
    proc_7F093FA4((int)&fStack580,extraout_f12_00);
    proc_7F093FA4((int)&fStack556,extraout_f12_01);
    break;
  case 1:
    fStack628 = fStack228 * fVar29;
    fStack624 = fStack224 * fVar29;
    fStack620 = fStack220 * fVar29;
    fStack604 = fStack204 * fVar29;
    fStack600 = fStack200 * fVar29;
    fStack596 = fStack196 * fVar29;
    fStack580 = fStack216 * fVar29;
    fStack576 = fStack212 * fVar29;
    fStack572 = fStack208 * fVar29;
    fStack556 = fStack288 * fVar29;
    uVar15 = 5;
    fStack552 = fStack284 * fVar29;
    fStack548 = fStack280 * fVar29;
    fStack532 = fStack264 * fVar29;
    fStack528 = fStack260 * fVar29;
    fStack612 = fStack220 + DAT_8003fd94;
    fStack616 = fStack228;
    fStack524 = fStack256 * fVar29;
    fStack564 = fStack208 + DAT_8003fd94;
    fStack588 = fStack196 + DAT_8003fd94;
    fStack540 = fStack280 + DAT_8003fd94;
    fStack592 = fStack204;
    fStack516 = fStack256 + DAT_8003fd94;
    fStack568 = fStack216;
    fStack544 = fStack288;
    fStack520 = fStack264;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12_22);
    proc_7F093FA4((int)&fStack580,extraout_f12_23);
    proc_7F093FA4((int)&fStack556,extraout_f12_24);
    proc_7F093FA4((int)&fStack532,extraout_f12_25);
    break;
  case 2:
    fStack628 = fStack204 * fVar29;
    fStack620 = fStack196 * fVar29;
    fStack604 = fStack216 * fVar29;
    fStack624 = fStack200 * fVar29;
    fStack600 = fStack212 * fVar29;
    fStack596 = fStack208 * fVar29;
    fStack576 = fStack236 * fVar29;
    fStack556 = fStack264 * fVar29;
    uVar15 = 5;
    fStack580 = fStack240 * fVar29;
    fStack548 = fStack256 * fVar29;
    fStack528 = fStack272 * fVar29;
    fStack564 = fStack232 + DAT_8003fd94;
    fStack572 = fStack232 * fVar29;
    fStack516 = fStack268 + DAT_8003fd94;
    fStack552 = fStack260 * fVar29;
    fStack588 = fStack208 + DAT_8003fd94;
    fStack524 = fStack268 * fVar29;
    fStack532 = fStack276 * fVar29;
    fStack612 = fStack196 + DAT_8003fd94;
    fStack540 = fStack256 + DAT_8003fd94;
    fStack616 = fStack204;
    fStack592 = fStack216;
    fStack568 = fStack240;
    fStack544 = fStack264;
    fStack520 = fStack276;
    proc_7F093FA4((int)&fStack628,fStack564);
    proc_7F093FA4((int)&fStack604,extraout_f12_26);
    proc_7F093FA4((int)&fStack580,extraout_f12_27);
    proc_7F093FA4((int)&fStack556,extraout_f12_28);
    proc_7F093FA4((int)&fStack532,extraout_f12_29);
    break;
  case 3:
    fStack628 = fStack204 * fVar29;
    fStack624 = fStack200 * fVar29;
    fStack620 = fStack196 * fVar29;
    fStack604 = fStack216 * fVar29;
    fStack600 = fStack212 * fVar29;
    fStack596 = fStack208 * fVar29;
    fStack580 = fStack276 * fVar29;
    fStack576 = fStack272 * fVar29;
    fStack572 = fStack268 * fVar29;
    fStack556 = fStack288 * fVar29;
    uVar15 = 4;
    fStack552 = fStack284 * fVar29;
    fStack588 = fStack208 + DAT_8003fd94;
    fStack548 = fStack280 * fVar29;
    fStack612 = fStack196 + DAT_8003fd94;
    fStack564 = fStack268 + DAT_8003fd94;
    fStack540 = fStack280 + DAT_8003fd94;
    fStack616 = fStack204;
    fStack592 = fStack216;
    fStack568 = fStack276;
    fStack544 = fStack288;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12_02);
    proc_7F093FA4((int)&fStack580,extraout_f12_03);
    proc_7F093FA4((int)&fStack556,extraout_f12_04);
    break;
  case 4:
    fStack628 = fStack240 * fVar29;
    fStack624 = fStack236 * fVar29;
    fStack620 = fStack232 * fVar29;
    fStack604 = fStack228 * fVar29;
    fStack600 = fStack224 * fVar29;
    fStack596 = fStack220 * fVar29;
    fStack580 = fStack204 * fVar29;
    fStack576 = fStack200 * fVar29;
    fStack572 = fStack196 * fVar29;
    fStack556 = fStack252 * fVar29;
    uVar15 = 5;
    fStack552 = fStack248 * fVar29;
    fStack548 = fStack244 * fVar29;
    fStack532 = fStack288 * fVar29;
    fStack528 = fStack284 * fVar29;
    fStack612 = fStack232 + DAT_8003fd94;
    fStack616 = fStack240;
    fStack524 = fStack280 * fVar29;
    fStack564 = fStack196 + DAT_8003fd94;
    fStack588 = fStack220 + DAT_8003fd94;
    fStack540 = fStack244 + DAT_8003fd94;
    fStack592 = fStack228;
    fStack516 = fStack280 + DAT_8003fd94;
    fStack568 = fStack204;
    fStack544 = fStack252;
    fStack520 = fStack288;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12_30);
    proc_7F093FA4((int)&fStack580,extraout_f12_31);
    proc_7F093FA4((int)&fStack556,extraout_f12_32);
    proc_7F093FA4((int)&fStack532,extraout_f12_33);
    break;
  case 5:
    fStack628 = fStack228 * fVar29;
    fStack624 = fStack224 * fVar29;
    fStack620 = fStack220 * fVar29;
    fStack604 = fStack204 * fVar29;
    fStack600 = fStack200 * fVar29;
    fStack596 = fStack196 * fVar29;
    fStack580 = fStack264 * fVar29;
    fStack576 = fStack260 * fVar29;
    fStack572 = fStack256 * fVar29;
    fStack556 = fStack252 * fVar29;
    uVar15 = 4;
    fStack552 = fStack248 * fVar29;
    fStack588 = fStack196 + DAT_8003fd94;
    fStack548 = fStack244 * fVar29;
    fStack612 = fStack220 + DAT_8003fd94;
    fStack564 = fStack256 + DAT_8003fd94;
    fStack540 = fStack244 + DAT_8003fd94;
    fStack616 = fStack228;
    fStack592 = fStack204;
    fStack568 = fStack264;
    fStack544 = fStack252;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12_11);
    proc_7F093FA4((int)&fStack580,extraout_f12_12);
    proc_7F093FA4((int)&fStack556,extraout_f12_13);
    break;
  default:
    return puStackX0;
  case 7:
    fStack628 = fStack204 * fVar29;
    fStack624 = fStack200 * fVar29;
    fStack620 = fStack196 * fVar29;
    fStack604 = fStack252 * fVar29;
    fStack600 = fStack248 * fVar29;
    fStack596 = fStack244 * fVar29;
    fStack580 = fStack276 * fVar29;
    uVar15 = 3;
    fStack576 = fStack272 * fVar29;
    fStack588 = fStack244 + DAT_8003fd94;
    fStack572 = fStack268 * fVar29;
    fStack612 = fStack196 + DAT_8003fd94;
    fStack564 = fStack268 + DAT_8003fd94;
    fStack616 = fStack204;
    fStack592 = fStack252;
    fStack568 = fStack276;
    proc_7F093FA4((int)&fStack628,fStack196);
    proc_7F093FA4((int)&fStack604,extraout_f12_20);
    proc_7F093FA4((int)&fStack580,extraout_f12_21);
    break;
  case 8:
    fStack628 = fStack216 * fVar29;
    fStack624 = fStack212 * fVar29;
    fStack620 = fStack208 * fVar29;
    fStack604 = fStack240 * fVar29;
    fStack600 = fStack236 * fVar29;
    fStack596 = fStack232 * fVar29;
    fStack580 = fStack228 * fVar29;
    fStack576 = fStack224 * fVar29;
    fStack572 = fStack220 * fVar29;
    fStack556 = fStack276 * fVar29;
    uVar15 = 5;
    fStack552 = fStack272 * fVar29;
    fStack548 = fStack268 * fVar29;
    fStack532 = fStack252 * fVar29;
    fStack528 = fStack248 * fVar29;
    fStack612 = fStack208 + DAT_8003fd94;
    fStack616 = fStack216;
    fStack524 = fStack244 * fVar29;
    fStack564 = fStack220 + DAT_8003fd94;
    fStack588 = fStack232 + DAT_8003fd94;
    fStack540 = fStack268 + DAT_8003fd94;
    fStack592 = fStack240;
    fStack516 = fStack244 + DAT_8003fd94;
    fStack568 = fStack228;
    fStack544 = fStack276;
    fStack520 = fStack252;
    proc_7F093FA4((int)&fStack628,fStack268);
    proc_7F093FA4((int)&fStack604,extraout_f12_34);
    proc_7F093FA4((int)&fStack580,extraout_f12_35);
    proc_7F093FA4((int)&fStack556,extraout_f12_36);
    proc_7F093FA4((int)&fStack532,extraout_f12_37);
    break;
  case 10:
    fStack628 = fStack216 * fVar29;
    fStack624 = fStack212 * fVar29;
    fStack620 = fStack208 * fVar29;
    fStack604 = fStack240 * fVar29;
    fStack600 = fStack236 * fVar29;
    fStack596 = fStack232 * fVar29;
    fStack580 = fStack252 * fVar29;
    fStack576 = fStack248 * fVar29;
    fStack572 = fStack244 * fVar29;
    fStack556 = fStack264 * fVar29;
    uVar15 = 4;
    fStack552 = fStack260 * fVar29;
    fStack588 = fStack232 + DAT_8003fd94;
    fStack548 = fStack256 * fVar29;
    fStack612 = fStack208 + DAT_8003fd94;
    fStack564 = fStack244 + DAT_8003fd94;
    fStack540 = fStack256 + DAT_8003fd94;
    fStack616 = fStack216;
    fStack592 = fStack240;
    fStack568 = fStack252;
    fStack544 = fStack264;
    proc_7F093FA4((int)&fStack628,fStack244);
    proc_7F093FA4((int)&fStack604,extraout_f12_08);
    proc_7F093FA4((int)&fStack580,extraout_f12_09);
    proc_7F093FA4((int)&fStack556,extraout_f12_10);
    break;
  case 0xb:
    fStack628 = fStack216 * fVar29;
    fStack624 = fStack212 * fVar29;
    fStack620 = fStack208 * fVar29;
    fStack604 = fStack288 * fVar29;
    fStack600 = fStack284 * fVar29;
    fStack596 = fStack280 * fVar29;
    fStack580 = fStack252 * fVar29;
    uVar15 = 3;
    fStack576 = fStack248 * fVar29;
    fStack588 = fStack280 + DAT_8003fd94;
    fStack572 = fStack244 * fVar29;
    fStack612 = fStack208 + DAT_8003fd94;
    fStack564 = fStack244 + DAT_8003fd94;
    fStack616 = fStack216;
    fStack592 = fStack288;
    fStack568 = fStack252;
    proc_7F093FA4((int)&fStack628,fStack244);
    proc_7F093FA4((int)&fStack604,extraout_f12_18);
    proc_7F093FA4((int)&fStack580,extraout_f12_19);
    break;
  case 0xc:
    fStack628 = fStack240 * fVar29;
    fStack624 = fStack236 * fVar29;
    fStack620 = fStack232 * fVar29;
    fStack604 = fStack228 * fVar29;
    fStack600 = fStack224 * fVar29;
    fStack596 = fStack220 * fVar29;
    fStack580 = fStack288 * fVar29;
    fStack576 = fStack284 * fVar29;
    fStack572 = fStack280 * fVar29;
    fStack556 = fStack276 * fVar29;
    fStack552 = fStack272 * fVar29;
    fStack588 = fStack220 + DAT_8003fd94;
    fStack548 = fStack268 * fVar29;
    fStack612 = fStack232 + DAT_8003fd94;
    uVar15 = 4;
    fStack564 = fStack280 + DAT_8003fd94;
    iStack640 = 1;
    fStack540 = fStack268 + DAT_8003fd94;
    fStack616 = fStack240;
    fStack592 = fStack228;
    fStack568 = fStack288;
    fStack544 = fStack276;
    proc_7F093FA4((int)&fStack628,fStack268);
    proc_7F093FA4((int)&fStack604,extraout_f12_05);
    proc_7F093FA4((int)&fStack580,extraout_f12_06);
    proc_7F093FA4((int)&fStack556,extraout_f12_07);
    break;
  case 0xd:
    fStack628 = fStack228 * fVar29;
    fStack624 = fStack224 * fVar29;
    fStack620 = fStack220 * fVar29;
    fStack604 = fStack276 * fVar29;
    fStack600 = fStack272 * fVar29;
    fStack596 = fStack268 * fVar29;
    fStack580 = fStack264 * fVar29;
    uVar15 = 3;
    fStack576 = fStack260 * fVar29;
    fStack588 = fStack268 + DAT_8003fd94;
    fStack572 = fStack256 * fVar29;
    fStack612 = fStack220 + DAT_8003fd94;
    fStack564 = fStack256 + DAT_8003fd94;
    fStack616 = fStack228;
    fStack592 = fStack276;
    fStack568 = fStack264;
    proc_7F093FA4((int)&fStack628,fStack268);
    proc_7F093FA4((int)&fStack604,extraout_f12_16);
    proc_7F093FA4((int)&fStack580,extraout_f12_17);
    break;
  case 0xe:
    fStack628 = fStack240 * fVar29;
    fStack624 = fStack236 * fVar29;
    fStack620 = fStack232 * fVar29;
    fStack604 = fStack264 * fVar29;
    fStack600 = fStack260 * fVar29;
    fStack596 = fStack256 * fVar29;
    fStack580 = fStack288 * fVar29;
    uVar15 = 3;
    fStack576 = fStack284 * fVar29;
    fStack588 = fStack256 + DAT_8003fd94;
    fStack572 = fStack280 * fVar29;
    fStack612 = fStack232 + DAT_8003fd94;
    fStack564 = fStack280 + DAT_8003fd94;
    fStack616 = fStack240;
    fStack592 = fStack264;
    fStack568 = fStack288;
    proc_7F093FA4((int)&fStack628,fStack280);
    proc_7F093FA4((int)&fStack604,extraout_f12_14);
    proc_7F093FA4((int)&fStack580,extraout_f12_15);
    break;
  case 0xf:
    uVar15 = 0;
  }
  if (uVar15 != 0) {
    pfVar5 = (float *)proc_7F0783E4();
    pfVar6 = (float *)proc_7F0783C4();
    proc_7F0580C8(pfVar5,pfVar6,(int)afStack740);
    guScaleF(mf_4__4_,x,(float)&DAT_80079e98,1.00000000 / fVar29);
    proc_7F0580C8(afStack740,(float *)&DAT_80079e98,(int)afStack804);
    uStack1088 = 0;
    if (uVar15 != 0) {
      pfStack1624 = &fStack628;
      puVar14 = auStack1084;
      fVar20 = extraout_f12_38;
      fVar24 = extraout_f14;
      do {
        proc_7F097388(pfStack1624,afStack804,0x82,fVar20,fVar24,(float *)flt_80057584);
        fVar17 = get_ulx();
        fVar18 = get_ulx();
        fVar19 = get_screen_width();
        fVar20 = proc_7F093C48(*(float *)(puVar14 + 0x28),(float)fVar17 * 4.00000000,extraout_a0,
                               extraout_a1,((float)fVar19 + (float)fVar18) * 4.00000000 - 1.00000000
                              );
        *(float *)(puVar14 + 0x28) = fVar20;
        fVar17 = get_uly();
        fVar18 = get_uly();
        fVar19 = get_screen_height();
        fVar20 = proc_7F093C48(*(float *)(puVar14 + 0x2c),(float)fVar17 * 4.00000000,extraout_a0_00,
                               extraout_a1_00,
                               ((float)fVar19 + (float)fVar18) * 4.00000000 - 1.00000000);
        *(float *)(puVar14 + 0x2c) = fVar20;
        fVar17 = get_uly();
        fVar20 = extraout_f12_39;
        fVar24 = extraout_f14_00;
        if ((float)fVar17 * 4.00000000 + 4.00000000 < *(float *)(puVar14 + 0x2c)) {
          fVar17 = get_uly();
          fVar18 = get_screen_height();
          fVar20 = extraout_f12_40;
          fVar24 = extraout_f14_01;
          if (*(float *)(puVar14 + 0x2c) < ((float)fVar18 + (float)fVar17) * 4.00000000 - 4.00000000
             ) {
            *(float *)(puVar14 + 0x2c) = *(float *)(puVar14 + 0x2c) - 4.00000000;
            fVar20 = extraout_f12_40;
            fVar24 = extraout_f14_01;
          }
        }
        puVar14 = puVar14 + 0x38;
        pfStack1624 = pfStack1624 + 6;
        uStack1088 += 1;
      } while (uStack1088 != uVar15);
    }
    puVar3 = get_ptr_currentdata();
    if (*(char *)(puVar3 + 8) == '\0') {
      fVar28 = 0.00000000;
      iVar12 = 0;
      fVar24 = 0.00000000;
      fVar20 = flt_80057588;
      fVar26 = flt_8005758C;
      if (uVar15 != 0) {
        if ((uVar15 & 1) == 0) {
          iVar13 = 0;
          fVar20 = flt_80057588;
          fVar26 = flt_8005758C;
        }
        else {
          iVar12 = 1;
          fVar20 = afStack1044[0];
          if (flt_80057588 <= afStack1044[0]) {
            fVar20 = flt_80057588;
          }
          if (afStack1044[0] <= 0.00000000) {
            afStack1044[0] = fVar24;
          }
          fVar24 = afStack1044[0];
          fVar26 = afStack1044[1];
          if (flt_8005758C <= afStack1044[1]) {
            fVar26 = flt_8005758C;
          }
          fVar21 = afStack1044[1];
          if (afStack1044[1] <= 0.00000000) {
            fVar21 = fVar28;
          }
          fVar28 = fVar21;
          iVar13 = 8;
          if (uVar15 == 1) goto LAB_7f095adc;
        }
        fVar21 = afStack1044[(iVar13 - iVar12) * 2];
        puVar14 = auStack1084 + (iVar13 - iVar12) * 8;
        while( true ) {
          fVar23 = fVar21;
          if (fVar20 <= fVar21) {
            fVar23 = fVar20;
          }
          if (fVar24 < fVar21) {
            fVar22 = *(float *)(puVar14 + 0x2c);
          }
          else {
            fVar22 = *(float *)(puVar14 + 0x2c);
            fVar21 = fVar24;
          }
          fVar25 = fVar22;
          if (fVar26 <= fVar22) {
            fVar25 = fVar26;
          }
          if (fVar28 < fVar22) {
            fVar24 = *(float *)(puVar14 + 0x60);
          }
          else {
            fVar24 = *(float *)(puVar14 + 0x60);
            fVar22 = fVar28;
          }
          fVar20 = fVar24;
          if (fVar23 <= fVar24) {
            fVar20 = fVar23;
          }
          if (fVar21 < fVar24) {
            fVar28 = *(float *)(puVar14 + 100);
          }
          else {
            fVar28 = *(float *)(puVar14 + 100);
            fVar24 = fVar21;
          }
          fVar26 = fVar28;
          if (fVar25 <= fVar28) {
            fVar26 = fVar25;
          }
          if (fVar28 <= fVar22) {
            fVar28 = fVar22;
          }
          if (puVar14 + 0x70 == auStack1084 + uVar15 * 0x38) break;
          fVar21 = *(float *)(puVar14 + 0x98);
          puVar14 = puVar14 + 0x70;
        }
      }
LAB_7f095adc:
      puStackX0[1] = 0;
      *puStackX0 = 0xe7000000;
      puStackX0[3] = 0x300000;
      puStackX0[2] = 0xba001402;
      puStackX0[4] = 0xb900031d;
      puStackX0[5] = 0;
      puStackX0[6] = 0xba001301;
      puStackX0[7] = 0;
      puStackX0[8] = ((int)(fVar24 * 0.25000000) & 0x3ffU) << 0xe | 0xf6000000 |
                     ((int)(fVar28 * 0.25000000) & 0x3ffU) << 2;
      puStackX0[9] = ((int)(fVar20 * 0.25000000) & 0x3ffU) << 0xe |
                     ((int)(fVar26 * 0.25000000) & 0x3ffU) << 2;
      puStackX0[0xb] = 0;
      puStackX0[10] = 0xe7000000;
      puStackX0[0xd] = 0x80000;
      puStackX0[0xc] = 0xba001301;
      puStackX0 = puStackX0 + 0xe;
    }
    else {
      puStackX0[1] = 0;
      *puStackX0 = 0xe7000000;
      puStackX0 = puStackX0 + 2;
      puVar3 = get_ptr_currentdata();
      likely_generate_DL_for_image_declaration
                ((uint **)register0x000000ec,
                 (uint *)((int)*(short *)(puVar3 + 10) * 0xc + DAT_8008d124),1,0,2);
      puVar3 = proc_7F09343C(puStackX0,0);
      puStackX0 = puVar3 + 2;
      puVar3[1] = 0xf0a4000;
      *puVar3 = 0xb900031d;
      if (uVar15 == 4) {
        puStackX0 = proc_7F097818(puStackX0,(int)auStack1084,(int)auStack1028,(int)auStack916,
                                  extraout_f12_41,0x43020000);
        if (iStack640 != 0) {
          fStack984 = fStack984 + 1.00000000;
          afStack1044[1] = afStack1044[1] + 1.00000000;
          fStack928 = fStack928 + 1.00000000;
          fStack872 = fStack872 + 1.00000000;
        }
        puStackX0 = proc_7F097818(puStackX0,(int)auStack916,(int)auStack972,(int)auStack1084,
                                  extraout_f12_42,0x43020000);
      }
      else {
        if (uVar15 == 5) {
          puStackX0 = proc_7F097818(puStackX0,(int)auStack1084,(int)auStack1028,(int)auStack972,
                                    extraout_f12_41,0x43020000);
          puStackX0 = proc_7F097818(puStackX0,(int)auStack1084,(int)auStack972,(int)auStack916,
                                    extraout_f12_43,0x43020000);
          puStackX0 = proc_7F097818(puStackX0,(int)auStack1084,(int)auStack916,(int)auStack860,
                                    extraout_f12_44,0x43020000);
        }
        else {
          if (uVar15 == 3) {
            puStackX0 = proc_7F097818(puStackX0,(int)auStack1084,(int)auStack1028,(int)auStack972,
                                      extraout_f12_41,0x43020000);
          }
        }
      }
    }
  }
  if (false) {
    return puStackX0;
  }
  switch(uVar16) {
  case 0:
    return puStackX0;
  case 1:
    fStack508 = xStack144.x * fVar29;
    fStack504 = xStack144.y * fVar29;
    fStack500 = xStack144.z * fVar29;
    fStack484 = xStack168.x * fVar29;
    fStack480 = xStack168.y * fVar29;
    fStack476 = xStack168.z * fVar29;
    fStack460 = xStack192.x * fVar29;
    fStack456 = xStack192.y * fVar29;
    iVar12 = 3;
    fStack452 = xStack192.z * fVar29;
    fStack496 = xStack144.x * fVar27;
    fStack472 = xStack168.x * fVar27;
    fStack492 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack192.x * fVar27;
    fStack468 = xStack168.z * fVar27 + DAT_8003fd94;
    fStack444 = xStack192.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack192.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_60);
    proc_7F093CB0((int)&fStack460,extraout_f12_61);
    break;
  case 2:
    fStack508 = xStack132.x * fVar29;
    fStack504 = xStack132.y * fVar29;
    fStack500 = xStack132.z * fVar29;
    fStack484 = xStack180.x * fVar29;
    fStack480 = xStack180.y * fVar29;
    fStack476 = xStack180.z * fVar29;
    fStack460 = xStack168.x * fVar29;
    fStack456 = xStack168.y * fVar29;
    iVar12 = 3;
    fStack452 = xStack168.z * fVar29;
    fStack496 = xStack132.x * fVar27;
    fStack472 = xStack180.x * fVar27;
    fStack492 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack168.x * fVar27;
    fStack468 = xStack180.z * fVar27 + DAT_8003fd94;
    fStack444 = xStack168.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack180.x);
    proc_7F093CB0((int)&fStack484,extraout_f12_62);
    proc_7F093CB0((int)&fStack460,extraout_f12_63);
    break;
  case 3:
    fStack508 = xStack144.x * fVar29;
    fStack504 = xStack144.y * fVar29;
    fStack500 = xStack144.z * fVar29;
    fStack484 = xStack132.x * fVar29;
    fStack480 = xStack132.y * fVar29;
    fStack476 = xStack132.z * fVar29;
    fStack460 = xStack192.x * fVar29;
    fStack456 = xStack192.y * fVar29;
    fStack452 = xStack192.z * fVar29;
    iVar12 = 4;
    fStack436 = xStack180.x * fVar29;
    fStack432 = xStack180.y * fVar29;
    fStack428 = xStack180.z * fVar29;
    fStack496 = xStack144.x * fVar27;
    fStack472 = xStack132.x * fVar27;
    fStack492 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack192.x * fVar27;
    fStack468 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack180.x * fVar27;
    fStack444 = xStack192.z * fVar27 + DAT_8003fd94;
    fStack420 = xStack180.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack180.x);
    proc_7F093CB0((int)&fStack484,extraout_f12_51);
    proc_7F093CB0((int)&fStack460,extraout_f12_52);
    proc_7F093CB0((int)&fStack436,extraout_f12_53);
    break;
  case 4:
    fStack508 = xStack120.x * fVar29;
    fStack504 = xStack120.y * fVar29;
    fStack500 = xStack120.z * fVar29;
    fStack484 = xStack192.x * fVar29;
    fStack480 = xStack192.y * fVar29;
    fStack476 = xStack192.z * fVar29;
    fStack460 = xStack156.x * fVar29;
    fStack456 = xStack156.y * fVar29;
    iVar12 = 3;
    fStack452 = xStack156.z * fVar29;
    fStack496 = xStack120.x * fVar27;
    fStack472 = xStack192.x * fVar27;
    fStack492 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack156.x * fVar27;
    fStack468 = xStack192.z * fVar27 + DAT_8003fd94;
    fStack444 = xStack156.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack192.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_64);
    proc_7F093CB0((int)&fStack460,extraout_f12_65);
    break;
  case 5:
    fStack508 = xStack120.x * fVar29;
    fStack504 = xStack120.y * fVar29;
    fStack500 = xStack120.z * fVar29;
    fStack484 = xStack144.x * fVar29;
    fStack480 = xStack144.y * fVar29;
    fStack476 = xStack144.z * fVar29;
    fStack460 = xStack156.x * fVar29;
    fStack456 = xStack156.y * fVar29;
    fStack452 = xStack156.z * fVar29;
    iVar12 = 4;
    fStack436 = xStack168.x * fVar29;
    fStack432 = xStack168.y * fVar29;
    fStack428 = xStack168.z * fVar29;
    fStack496 = xStack120.x * fVar27;
    fStack472 = xStack144.x * fVar27;
    fStack492 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack156.x * fVar27;
    fStack468 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack168.x * fVar27;
    fStack444 = xStack156.z * fVar27 + DAT_8003fd94;
    fStack420 = xStack168.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack168.x);
    proc_7F093CB0((int)&fStack484,extraout_f12_54);
    proc_7F093CB0((int)&fStack460,extraout_f12_55);
    proc_7F093CB0((int)&fStack436,extraout_f12_56);
    break;
  default:
    goto LAB_7f097360;
  case 7:
    fStack508 = xStack120.x * fVar29;
    fStack504 = xStack120.y * fVar29;
    fStack500 = xStack120.z * fVar29;
    fStack484 = xStack144.x * fVar29;
    fStack480 = xStack144.y * fVar29;
    fStack476 = xStack144.z * fVar29;
    fStack460 = xStack132.x * fVar29;
    fStack456 = xStack132.y * fVar29;
    fStack452 = xStack132.z * fVar29;
    fStack436 = xStack180.x * fVar29;
    iVar12 = 5;
    fStack432 = xStack180.y * fVar29;
    fStack428 = xStack180.z * fVar29;
    fStack412 = xStack156.x * fVar29;
    fStack408 = xStack156.y * fVar29;
    fStack404 = xStack156.z * fVar29;
    fStack496 = xStack120.x * fVar27;
    fStack472 = xStack144.x * fVar27;
    fStack492 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack132.x * fVar27;
    fStack468 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack180.x * fVar27;
    fStack444 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack400 = xStack156.x * fVar27;
    fStack420 = xStack180.z * fVar27 + DAT_8003fd94;
    fStack396 = xStack156.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack180.x);
    proc_7F093CB0((int)&fStack484,extraout_f12_80);
    proc_7F093CB0((int)&fStack460,extraout_f12_81);
    proc_7F093CB0((int)&fStack436,extraout_f12_82);
    proc_7F093CB0((int)&fStack412,extraout_f12_83);
    break;
  case 8:
    fStack508 = xStack108.x * fVar29;
    fStack504 = xStack108.y * fVar29;
    fStack500 = xStack108.z * fVar29;
    fStack484 = xStack156.x * fVar29;
    fStack480 = xStack156.y * fVar29;
    fStack476 = xStack156.z * fVar29;
    fStack460 = xStack180.x * fVar29;
    fStack456 = xStack180.y * fVar29;
    iVar12 = 3;
    fStack452 = xStack180.z * fVar29;
    fStack496 = xStack108.x * fVar27;
    fStack472 = xStack156.x * fVar27;
    fStack492 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack180.x * fVar27;
    fStack468 = xStack156.z * fVar27 + DAT_8003fd94;
    fStack444 = xStack180.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_66);
    proc_7F093CB0((int)&fStack460,extraout_f12_67);
    break;
  case 10:
    fStack508 = xStack132.x * fVar29;
    fStack504 = xStack132.y * fVar29;
    fStack500 = xStack132.z * fVar29;
    fStack484 = xStack108.x * fVar29;
    fStack480 = xStack108.y * fVar29;
    fStack476 = xStack108.z * fVar29;
    fStack460 = xStack168.x * fVar29;
    fStack456 = xStack168.y * fVar29;
    fStack452 = xStack168.z * fVar29;
    iVar12 = 4;
    fStack436 = xStack156.x * fVar29;
    fStack432 = xStack156.y * fVar29;
    fStack428 = xStack156.z * fVar29;
    fStack496 = xStack132.x * fVar27;
    fStack472 = xStack108.x * fVar27;
    fStack492 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack168.x * fVar27;
    fStack468 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack156.x * fVar27;
    fStack444 = xStack168.z * fVar27 + DAT_8003fd94;
    fStack420 = xStack156.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_57);
    proc_7F093CB0((int)&fStack460,extraout_f12_58);
    proc_7F093CB0((int)&fStack436,extraout_f12_59);
    break;
  case 0xb:
    fStack508 = xStack144.x * fVar29;
    fStack504 = xStack144.y * fVar29;
    fStack500 = xStack144.z * fVar29;
    fStack484 = xStack132.x * fVar29;
    fStack480 = xStack132.y * fVar29;
    fStack476 = xStack132.z * fVar29;
    iVar12 = 5;
    fStack460 = xStack108.x * fVar29;
    fStack456 = xStack108.y * fVar29;
    fStack452 = xStack108.z * fVar29;
    fStack436 = xStack156.x * fVar29;
    fStack432 = xStack156.y * fVar29;
    fStack428 = xStack156.z * fVar29;
    fStack412 = xStack192.x * fVar29;
    fStack408 = xStack192.y * fVar29;
    fStack404 = xStack192.z * fVar29;
    fStack496 = xStack144.x * fVar27;
    fStack472 = xStack132.x * fVar27;
    fStack492 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack108.x * fVar27;
    fStack468 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack156.x * fVar27;
    fStack444 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack400 = xStack192.x * fVar27;
    fStack420 = xStack156.z * fVar27 + DAT_8003fd94;
    fStack396 = xStack192.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_76);
    proc_7F093CB0((int)&fStack460,extraout_f12_77);
    proc_7F093CB0((int)&fStack436,extraout_f12_78);
    proc_7F093CB0((int)&fStack412,extraout_f12_79);
    break;
  case 0xc:
    fStack508 = xStack108.x * fVar29;
    fStack504 = xStack108.y * fVar29;
    fStack500 = xStack108.z * fVar29;
    fStack484 = xStack120.x * fVar29;
    fStack480 = xStack120.y * fVar29;
    fStack476 = xStack120.z * fVar29;
    fStack460 = xStack180.x * fVar29;
    fStack456 = xStack180.y * fVar29;
    fStack452 = xStack180.z * fVar29;
    fStack436 = xStack192.x * fVar29;
    iVar12 = 4;
    fStack432 = xStack192.y * fVar29;
    fStack428 = xStack192.z * fVar29;
    fStack496 = xStack108.x * fVar27;
    fStack472 = xStack120.x * fVar27;
    fStack492 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack180.x * fVar27;
    fStack468 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack192.x * fVar27;
    fStack444 = xStack180.z * fVar27 + DAT_8003fd94;
    fStack420 = xStack192.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_48);
    proc_7F093CB0((int)&fStack460,extraout_f12_49);
    proc_7F093CB0((int)&fStack436,extraout_f12_50);
    break;
  case 0xd:
    fStack508 = xStack108.x * fVar29;
    fStack504 = xStack108.y * fVar29;
    fStack500 = xStack108.z * fVar29;
    fStack484 = xStack120.x * fVar29;
    fStack480 = xStack120.y * fVar29;
    fStack476 = xStack120.z * fVar29;
    fStack460 = xStack144.x * fVar29;
    fStack456 = xStack144.y * fVar29;
    fStack452 = xStack144.z * fVar29;
    fStack436 = xStack168.x * fVar29;
    iVar12 = 5;
    fStack432 = xStack168.y * fVar29;
    fStack428 = xStack168.z * fVar29;
    fStack412 = xStack180.x * fVar29;
    fStack408 = xStack180.y * fVar29;
    fStack404 = xStack180.z * fVar29;
    fStack496 = xStack108.x * fVar27;
    fStack472 = xStack120.x * fVar27;
    fStack492 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack144.x * fVar27;
    fStack468 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack444 = xStack144.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack168.x * fVar27;
    fStack400 = xStack180.x * fVar27;
    fStack420 = xStack168.z * fVar27 + DAT_8003fd94;
    fStack396 = xStack180.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_72);
    proc_7F093CB0((int)&fStack460,extraout_f12_73);
    proc_7F093CB0((int)&fStack436,extraout_f12_74);
    proc_7F093CB0((int)&fStack412,extraout_f12_75);
    break;
  case 0xe:
    fStack508 = xStack132.x * fVar29;
    fStack504 = xStack132.y * fVar29;
    fStack500 = xStack132.z * fVar29;
    fStack484 = xStack108.x * fVar29;
    fStack480 = xStack108.y * fVar29;
    fStack476 = xStack108.z * fVar29;
    fStack460 = xStack120.x * fVar29;
    fStack456 = xStack120.y * fVar29;
    fStack452 = xStack120.z * fVar29;
    fStack436 = xStack192.x * fVar29;
    iVar12 = 5;
    fStack432 = xStack192.y * fVar29;
    fStack428 = xStack192.z * fVar29;
    fStack412 = xStack168.x * fVar29;
    fStack408 = xStack168.y * fVar29;
    fStack404 = xStack168.z * fVar29;
    fStack496 = xStack132.x * fVar27;
    fStack472 = xStack108.x * fVar27;
    fStack492 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack120.x * fVar27;
    fStack468 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack192.x * fVar27;
    fStack444 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack400 = xStack168.x * fVar27;
    fStack420 = xStack192.z * fVar27 + DAT_8003fd94;
    fStack396 = xStack168.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_68);
    proc_7F093CB0((int)&fStack460,extraout_f12_69);
    proc_7F093CB0((int)&fStack436,extraout_f12_70);
    proc_7F093CB0((int)&fStack412,extraout_f12_71);
    break;
  case 0xf:
    fStack508 = xStack108.x * fVar29;
    fStack504 = xStack108.y * fVar29;
    fStack500 = xStack108.z * fVar29;
    fStack484 = xStack120.x * fVar29;
    fStack480 = xStack120.y * fVar29;
    fStack476 = xStack120.z * fVar29;
    fStack460 = xStack132.x * fVar29;
    fStack456 = xStack132.y * fVar29;
    fStack452 = xStack132.z * fVar29;
    fStack436 = xStack144.x * fVar29;
    iVar12 = 4;
    fStack432 = xStack144.y * fVar29;
    fStack428 = xStack144.z * fVar29;
    fStack496 = xStack108.x * fVar27;
    fStack472 = xStack120.x * fVar27;
    fStack492 = xStack108.z * fVar27 + DAT_8003fd94;
    fStack448 = xStack132.x * fVar27;
    fStack468 = xStack120.z * fVar27 + DAT_8003fd94;
    fStack424 = xStack144.x * fVar27;
    fStack444 = xStack132.z * fVar27 + DAT_8003fd94;
    fStack420 = xStack144.z * fVar27 + DAT_8003fd94;
    proc_7F093CB0((int)&fStack508,xStack108.z);
    proc_7F093CB0((int)&fStack484,extraout_f12_45);
    proc_7F093CB0((int)&fStack460,extraout_f12_46);
    proc_7F093CB0((int)&fStack436,extraout_f12_47);
  }
  pfStack1624 = (float *)(1.00000000 / fVar29);
  puStackX0[1] = 0;
  *puStackX0 = 0xe7000000;
  puStackX0 = puStackX0 + 2;
  puVar3 = get_ptr_currentdata();
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,(uint *)((int)*(short *)(puVar3 + 4) * 0xc + DAT_8008d124),
             1,0,2);
  *puStackX0 = 0xfb000000;
  puStack1160 = puStackX0;
  puStackX0 = puStackX0 + 2;
  puVar3 = get_ptr_currentdata();
  DL = get_ptr_currentdata();
  puVar7 = get_ptr_currentdata();
  puStack1160[1] =
       (uint)*(byte *)((int)puVar7 + 10) << 8 | (uint)*(byte *)(DL + 2) << 0x18 |
       (uint)*(byte *)((int)puVar3 + 9) << 0x10 | 0xff;
  puStackX0[1] = 0x55fef97c;
  *puStackX0 = 0xfc40fe81;
  puStackX0 = puStackX0 + 2;
  pfVar5 = (float *)proc_7F0783E4();
  pfVar6 = (float *)proc_7F0783C4();
  proc_7F0580C8(pfVar5,pfVar6,(int)afStack1228);
  guScaleF(mf_4__4__00,x_00,(float)&DAT_80079e98,(float)pfStack1624);
  proc_7F0580C8(afStack1228,(float *)&DAT_80079e98,(int)afStack1292);
  iStack1576 = 0;
  fVar29 = extraout_f12_84;
  if (iVar12 != 0) {
    pfStack1624 = &fStack508;
    puVar14 = auStack1572;
    fVar29 = extraout_f12_84;
    fVar27 = extraout_f14_02;
    do {
      proc_7F097388(pfStack1624,afStack1292,0x82,fVar29,fVar27,(float *)flt_800575D0);
      fVar17 = get_ulx();
      fVar18 = get_ulx();
      fVar19 = get_screen_width();
      fVar29 = proc_7F093C48(*(float *)(puVar14 + 0x28),(float)fVar17 * 4.00000000,extraout_a0_01,
                             extraout_a1_01,
                             ((float)fVar19 + (float)fVar18) * 4.00000000 - 1.00000000);
      *(float *)(puVar14 + 0x28) = fVar29;
      fVar17 = get_uly();
      fVar18 = get_uly();
      fVar19 = get_screen_height();
      fVar29 = proc_7F093C48(*(float *)(puVar14 + 0x2c),(float)fVar17 * 4.00000000,extraout_a0_02,
                             extraout_a1_02,
                             ((float)fVar19 + (float)fVar18) * 4.00000000 - 1.00000000);
      *(float *)(puVar14 + 0x2c) = fVar29;
      iStack1576 += 1;
      pfStack1624 = pfStack1624 + 6;
      puVar14 = puVar14 + 0x38;
      fVar29 = extraout_f12_85;
      fVar27 = extraout_f14_03;
    } while (iStack1576 != iVar12);
  }
  if (iVar12 == 4) {
    if (uVar16 == 0xc) {
      if (fStack360 < fStack356) {
        if (fStack1472 + 4.00000000 <= fStack1360) {
          fVar17 = get_ulx();
          fStack1532 = (float)fVar17 * 4.00000000;
          fVar17 = get_uly();
          fStack1528 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fVar18 = get_screen_width();
          fStack1476 = ((float)fVar18 + (float)fVar17) * 4.00000000 - 1.00000000;
          fVar17 = get_uly();
          fStack1472 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fStack1420 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fVar18 = get_screen_width();
          fStack1364 = ((float)fVar18 + (float)fVar17) * 4.00000000 - 1.00000000;
          puStackX0 = proc_7F098A2C(puStackX0,(int)auStack1572,(int)auStack1516,(int)auStack1460,
                                    (int)auStack1404,extraout_f12_86);
        }
        else {
          puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1516,(int)auStack1460,
                                    fVar29,0x43020000);
        }
      }
      else {
        if (fStack1528 + 4.00000000 <= fStack1416) {
          fVar17 = get_ulx();
          fStack1532 = (float)fVar17 * 4.00000000;
          fVar17 = get_uly();
          fStack1528 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fVar18 = get_screen_width();
          fStack1476 = ((float)fVar18 + (float)fVar17) * 4.00000000 - 1.00000000;
          fVar17 = get_uly();
          fStack1472 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fStack1420 = (float)fVar17 * 4.00000000;
          fVar17 = get_ulx();
          fVar18 = get_screen_width();
          fStack1364 = ((float)fVar18 + (float)fVar17) * 4.00000000 - 1.00000000;
          puStackX0 = proc_7F098A2C(puStackX0,(int)auStack1516,(int)auStack1572,(int)auStack1404,
                                    (int)auStack1460,extraout_f12_87);
        }
        else {
          puStackX0 = proc_7F097818(puStackX0,(int)auStack1516,(int)auStack1572,(int)auStack1404,
                                    fVar29,0x43020000);
        }
      }
    }
    else {
      puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1516,(int)auStack1404,fVar29,
                                0x43020000);
      puStackX0 = proc_7F097818(puStackX0,(int)auStack1404,(int)auStack1460,(int)auStack1572,
                                extraout_f12_88,0x43020000);
    }
  }
  else {
    if (iVar12 == 5) {
      puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1516,(int)auStack1460,fVar29,
                                0x43020000);
      puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1460,(int)auStack1404,
                                extraout_f12_89,0x43020000);
      puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1404,(int)auStack1348,
                                extraout_f12_90,0x43020000);
    }
    else {
      if (iVar12 == 3) {
        puStackX0 = proc_7F097818(puStackX0,(int)auStack1572,(int)auStack1516,(int)auStack1460,
                                  fVar29,0x43020000);
      }
    }
  }
LAB_7f097360:
  return puStackX0;
}



void proc_7F097388(float *param_1,float *param_2,uint param_3,float param_4,float param_5,
                  float *param_6)

{
  undefined4 *puVar1;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  float fVar2;
  f32 fVar3;
  f32 fVar4;
  f32 fVar5;
  f32 fVar6;
  f32 fVar7;
  f32 fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float in_stack_00000010;
  float *in_stack_00000014;
  
  fVar11 = (float)(param_3 & 0xffff);
  if (false) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  fVar11 = fVar11 / 65536.00000000;
  fVar12 = param_2[0xc] + *param_1 * *param_2 + param_1[1] * param_2[4] + param_1[2] * param_2[8];
  fVar13 = param_2[0xd] + *param_1 * param_2[1] + param_1[1] * param_2[5] + param_1[2] * param_2[9];
  fVar14 = param_2[0xe] + *param_1 * param_2[2] + param_1[1] * param_2[6] + param_1[2] * param_2[10]
  ;
  fVar15 = param_2[0xf] +
           *param_1 * param_2[3] + param_1[1] * param_2[7] + param_1[2] * param_2[0xb];
  fVar17 = param_1[3];
  fVar16 = param_1[4];
  fVar19 = flt_800575D4;
  if (fVar15 != 0.00000000) {
    fVar19 = 1.00000000 / (fVar15 * fVar11);
  }
  fVar2 = flt_800575D8;
  if (0.00000000 <= fVar19) {
    fVar2 = fVar19;
  }
  fVar3 = get_screen_width();
  fVar4 = get_screen_width();
  fVar5 = get_ulx();
  fVar6 = get_screen_height();
  fVar7 = get_screen_height();
  fVar8 = get_uly();
  fVar18 = fVar14 * fVar2 * fVar11 * flt_800575DC + flt_800575DC;
  fVar9 = proc_7F093C48((float)fVar5 * 4.00000000 + (float)fVar4 * 2.00000000 +
                        fVar12 * fVar2 * fVar11 * (float)fVar3 * 2.00000000,flt_800575E0,extraout_a0
                        ,extraout_a1,4090.00000000);
  fVar10 = proc_7F093C48((float)fVar8 * 4.00000000 + (float)fVar7 * 2.00000000 +
                         -(fVar13 * fVar2 * fVar11) * (float)fVar6 * 2.00000000,flt_800575E4,
                         extraout_a0_00,extraout_a1_00,4090.00000000);
  fVar18 = proc_7F093C48(fVar18,0.00000000,extraout_a0_01,extraout_a1_01,32767.00000000);
  proc_7F093C48(fVar15 * fVar2 * fVar11 * 0.00000000,0.00000000,extraout_a0_02,extraout_a1_02,
                32767.00000000);
  *in_stack_00000014 = fVar12;
  in_stack_00000014[1] = fVar13;
  in_stack_00000014[2] = fVar14;
  in_stack_00000014[3] = fVar15;
  in_stack_00000014[8] = fVar17 * ((float)param_6 / 65536.00000000);
  in_stack_00000014[9] = fVar16 * (in_stack_00000010 / 65536.00000000);
  in_stack_00000014[10] = fVar9;
  puVar1 = get_ptr_currentdata();
  in_stack_00000014[0xb] = fVar10 - (float)puVar1[0xe] * 4.00000000;
  in_stack_00000014[0xd] = fVar19;
  in_stack_00000014[0xc] = fVar18;
  fVar11 = (float)(uint)*(byte *)(param_1 + 5);
  if (false) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  in_stack_00000014[4] = fVar11;
  fVar11 = (float)(uint)*(byte *)((int)param_1 + 0x15);
  if (false) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  in_stack_00000014[5] = fVar11;
  fVar11 = (float)(uint)*(byte *)((int)param_1 + 0x16);
  if (false) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  in_stack_00000014[6] = fVar11;
  fVar11 = (float)(uint)*(byte *)((int)param_1 + 0x17);
  if (false) {
    fVar11 = fVar11 + 4294967296.00000000;
  }
  in_stack_00000014[7] = fVar11;
  return;
}



ulonglong proc_7F0977B4(int param_1,int param_2)

{
  float fVar1;
  float fVar2;
  
  fVar1 = *(float *)(param_1 + 0x28) - *(float *)(param_2 + 0x28);
  fVar2 = *(float *)(param_1 + 0x2c) - *(float *)(param_2 + 0x2c);
  fVar1 = sqrtf(fVar1 * fVar1 + fVar2 * fVar2);
  return (ulonglong)(fVar1 < 1.00000000);
}



undefined4 *
proc_7F097818(undefined4 *param_1,int param_2,int param_3,int param_4,float param_5,int param_6)

{
  ulonglong uVar1;
  uint uVar2;
  float *pfVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  undefined4 *puVar19;
  float *pfVar20;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  float *pfVar21;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  float *pfVar22;
  float *pfVar23;
  float *pfVar24;
  float *pfVar25;
  int iVar26;
  float *pfVar27;
  float fVar28;
  float fVar29;
  float fVar30;
  int in_stack_00000014;
  float afStack728 [4];
  float fStack712;
  float fStack708;
  float fStack704;
  float afStack696 [4];
  float fStack680;
  float fStack676;
  float fStack672;
  float fStack648;
  float fStack644;
  float fStack640;
  float fStack632;
  float fStack628;
  float fStack624;
  float fStack620;
  float fStack616;
  float fStack612;
  float fStack608;
  float fStack600;
  float fStack596;
  float fStack592;
  float fStack588;
  float fStack584;
  float fStack580;
  float fStack576;
  float afStack568 [8];
  float afStack536 [8];
  float fStack504;
  float fStack500;
  float fStack496;
  float fStack492;
  float fStack488;
  float fStack484;
  float fStack480;
  float fStack472;
  float fStack468;
  float fStack464;
  float fStack460;
  float fStack456;
  float fStack452;
  float fStack448;
  float fStack440;
  float fStack436;
  float fStack432;
  float fStack428;
  float fStack424;
  float fStack420;
  float fStack416;
  undefined4 uStack412;
  float fStack408;
  float fStack404;
  float fStack400;
  float fStack396;
  float fStack392;
  float fStack388;
  float fStack384;
  undefined4 uStack380;
  float fStack376;
  float fStack372;
  float fStack368;
  float fStack364;
  float fStack360;
  float fStack356;
  float fStack352;
  undefined4 uStack348;
  float fStack344;
  float fStack340;
  float fStack336;
  float fStack332;
  float fStack328;
  float fStack324;
  float fStack320;
  float fStack316;
  float fStack312;
  float fStack308;
  float fStack304;
  float fStack300;
  float fStack296;
  float fStack292;
  float fStack288;
  float fStack284;
  float fStack280;
  float fStack276;
  float fStack272;
  float fStack268;
  undefined4 uStack264;
  float fStack260;
  undefined4 uStack256;
  float fStack252;
  undefined4 uStack248;
  float fStack244;
  undefined4 uStack240;
  undefined4 uStack236;
  undefined4 uStack232;
  float fStack228;
  undefined4 uStack224;
  float fStack220;
  undefined4 uStack216;
  float fStack212;
  undefined4 uStack208;
  undefined4 uStack204;
  float fStack200;
  float fStack196;
  float fStack192;
  float fStack188;
  float fStack184;
  float fStack180;
  undefined4 uStack176;
  undefined4 uStack172;
  float fStack168;
  float fStack164;
  float fStack160;
  float fStack156;
  float fStack152;
  float fStack148;
  undefined4 uStack144;
  undefined4 uStack140;
  float fStack128;
  float fStack120;
  float fStack104;
  undefined4 uStack100;
  float fStack96;
  undefined4 uStack92;
  float fStack88;
  undefined4 uStack84;
  undefined4 uStack80;
  undefined4 uStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack28;
  float fStack20;
  int iStack12;
  int iStack8;
  int iStack4;
  
  uVar1 = proc_7F0977B4(param_2,param_3);
  puVar19 = param_1;
  if (((uVar1 == 0) && (uVar1 = proc_7F0977B4(param_3,param_4), puVar19 = param_1, uVar1 == 0)) &&
     (uVar1 = proc_7F0977B4(param_4,param_2), puVar19 = param_1, uVar1 == 0)) {
    fStack272 = (float)param_6 / 65536.00000000;
    fVar30 = *(float *)(param_2 + 0x2c);
    fStack68 = ((*(float *)(param_4 + 0x28) - *(float *)(param_2 + 0x28)) *
                (*(float *)(param_3 + 0x2c) - fVar30) -
               (*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) *
               (*(float *)(param_4 + 0x2c) - fVar30)) / 65536.00000000;
    puVar19 = param_1;
    if (fStack68 != 0.00000000) {
      fStack72 = 1.00000000 / fStack68;
      iVar26 = param_3;
      if (*(float *)(param_3 + 0x2c) < fVar30) {
        fStack68 = fStack68 * -1.00000000;
        fStack72 = fStack72 * -1.00000000;
        iVar26 = param_2;
        param_2 = param_3;
      }
      fVar30 = *(float *)(iVar26 + 0x2c);
      iStack8 = iVar26;
      if (*(float *)(param_4 + 0x2c) < fVar30) {
        fStack68 = fStack68 * -1.00000000;
        fStack72 = fStack72 * -1.00000000;
        fVar30 = *(float *)(param_4 + 0x2c);
        iStack8 = param_4;
        param_4 = iVar26;
      }
      iStack4 = param_2;
      if (fVar30 < *(float *)(param_2 + 0x2c)) {
        fStack68 = fStack68 * -1.00000000;
        fStack72 = fStack72 * -1.00000000;
        iStack4 = iStack8;
        iStack8 = param_2;
      }
      uStack100 = 0;
      fStack104 = *(float *)(iStack8 + 0x28) * 0.25000000;
      uStack92 = 0;
      fStack96 = *(float *)(iStack4 + 0x28) * 0.25000000;
      uStack84 = 0;
      uStack76 = 0;
      fStack88 = *(float *)(iStack4 + 0x28) * 0.25000000;
      uStack80 = 0;
      fStack64 = *(float *)(param_4 + 0x28);
      fStack60 = *(float *)(param_4 + 0x2c);
      fStack56 = *(float *)(iStack8 + 0x28);
      fStack52 = *(float *)(iStack8 + 0x2c);
      fStack48 = *(float *)(iStack4 + 0x28);
      fStack44 = *(float *)(iStack4 + 0x2c);
      fStack20 = fStack56 - fStack48;
      fStack252 = fStack52 - fStack44;
      uStack140 = 0;
      fStack244 = fStack60 - fStack44;
      uStack144 = 0;
      fStack28 = fStack64 - fStack48;
      uStack172 = 0;
      uStack176 = 0;
      fStack36 = fStack64 - fStack56;
      uStack232 = 0;
      fStack168 = fStack36 * 0.25000000;
      fStack40 = fStack60 - fStack52;
      uStack224 = 0;
      fStack164 = fStack40 * 0.25000000;
      fStack160 = fStack20 * 0.25000000;
      uStack216 = 0;
      uStack204 = 0;
      uStack208 = 0;
      fStack156 = fStack252 * 0.25000000;
      uStack264 = 0;
      fStack152 = fStack28 * 0.25000000;
      uStack256 = 0;
      uStack248 = 0;
      uStack236 = 0;
      fStack148 = fStack244 * 0.25000000;
      fStack200 = fStack36 * 4.00000000;
      uStack240 = 0;
      fStack196 = fStack40 * 4.00000000;
      fStack192 = fStack20 * 4.00000000;
      fStack188 = fStack252 * 4.00000000;
      fStack184 = fStack28 * 4.00000000;
      fStack180 = fStack244 * 4.00000000;
      fStack228 = 4.00000000 / fStack40;
      fStack220 = 4.00000000 / fStack252;
      fStack212 = 4.00000000 / fStack244;
      fStack260 = fStack36 / fStack40;
      fStack244 = fStack28 / fStack244;
      fStack252 = fStack20 / fStack252;
      iStack12 = param_4;
      fStack260 = proc_7F093C48(fStack260,flt_800575E8,extraout_a0,extraout_a1,1877.00000000);
      fStack252 = proc_7F093C48(fStack252,flt_800575EC,extraout_a0_00,extraout_a1_00,1877.00000000);
      fStack244 = proc_7F093C48(fStack244,flt_800575F0,extraout_a0_01,extraout_a1_01,1877.00000000);
      fStack268 = *(float *)(iStack4 + 0x2c) * 0.25000000;
      fStack268 = fStack268 - (float)(int)fStack268;
      fVar30 = proc_7F093C88(fStack252 * 8192.00000000);
      fStack128 = fStack96 - fVar30 * 0.00012207 * fStack268;
      fVar30 = proc_7F093C88(fStack244 * 8192.00000000);
      uVar4 = 0xc8000000;
      uVar2 = 0;
      fStack120 = fStack88 - fVar30 * 0.00012207 * fStack268;
      *param_1 = 0xb4000000;
      if (in_stack_00000014 != 0) {
        uVar4 = 0xce000000;
      }
      if (fStack68 < 0.00000000) {
        uVar2 = 0x800000;
      }
      param_1[1] = uVar2 | uVar4 | (int)*(float *)(iStack12 + 0x2c);
      param_1[2] = 0xb2000000;
      param_1[3] = (int)*(float *)(iStack8 + 0x2c) << 0x10 | (int)*(float *)(iStack4 + 0x2c);
      param_1[4] = 0xb4000000;
      uVar2 = proc_7F094298(*(float *)(iStack8 + 0x28) * 0.25000000);
      param_1[5] = uVar2;
      param_1[6] = 0xb2000000;
      uVar2 = proc_7F094298(fStack260);
      param_1[7] = uVar2;
      param_1[8] = 0xb4000000;
      uVar2 = proc_7F094298(fStack120);
      param_1[9] = uVar2;
      param_1[10] = 0xb2000000;
      uVar2 = proc_7F094298(fStack244);
      param_1[0xb] = uVar2;
      param_1[0xc] = 0xb4000000;
      uVar2 = proc_7F094298(fStack128);
      param_1[0xd] = uVar2;
      param_1[0xe] = 0xb2000000;
      uVar2 = proc_7F094298(fStack252);
      param_1[0xf] = uVar2;
      puVar19 = param_1 + 0x10;
      if (in_stack_00000014 != 0) {
        fStack284 = *(float *)(iStack4 + 0xc) * fStack272;
        fStack280 = *(float *)(iStack8 + 0xc) * fStack272;
        fStack276 = *(float *)(iStack12 + 0xc) * fStack272;
        fVar30 = fStack280;
        if (fStack284 <= fStack280) {
          fVar30 = fStack284;
        }
        fStack288 = fStack276;
        if (fVar30 <= fStack276) {
          fStack288 = fVar30;
        }
        fStack288 = fStack288 * 0.50000000;
        fStack300 = *(float *)(iStack4 + 0x34) * fStack288;
        fStack296 = *(float *)(iStack8 + 0x34) * fStack288;
        fStack292 = *(float *)(iStack12 + 0x34) * fStack288;
        fStack360 = fStack300 * *(float *)(iStack4 + 0x20);
        fStack356 = fStack300 * *(float *)(iStack4 + 0x24);
        fStack352 = fStack300 * flt_800575F4;
        fStack392 = fStack296 * *(float *)(iStack8 + 0x20);
        fStack388 = fStack296 * *(float *)(iStack8 + 0x24);
        fStack384 = fStack296 * flt_800575F4;
        fStack424 = fStack292 * *(float *)(iStack12 + 0x20);
        fStack420 = fStack292 * *(float *)(iStack12 + 0x24);
        fStack416 = fStack292 * flt_800575F4;
        fStack344 = fStack360;
        if (fStack360 < 0.00000000) {
          fStack344 = -fStack360;
        }
        fStack340 = fStack356;
        if (fStack356 < 0.00000000) {
          fStack340 = -fStack356;
        }
        fVar30 = fStack392;
        if (fStack392 < 0.00000000) {
          fVar30 = -fStack392;
        }
        if ((fStack344 < fVar30) && (fStack344 = fStack392, fStack392 < 0.00000000)) {
          fStack344 = -fStack392;
        }
        fVar30 = fStack388;
        if (fStack388 < 0.00000000) {
          fVar30 = -fStack388;
        }
        if ((fStack340 < fVar30) && (fStack340 = fStack388, fStack388 < 0.00000000)) {
          fStack340 = -fStack388;
        }
        fVar30 = fStack424;
        if (fStack424 < 0.00000000) {
          fVar30 = -fStack424;
        }
        if ((fStack344 < fVar30) && (fStack344 = fStack424, fStack424 < 0.00000000)) {
          fStack344 = -fStack424;
        }
        fVar30 = fStack420;
        if (fStack420 < 0.00000000) {
          fVar30 = -fStack420;
        }
        if (fStack340 < fVar30) {
          fStack340 = fStack420;
          if (fStack420 < 0.00000000) {
            fStack340 = -fStack420;
          }
          fStack376 = *(float *)(iStack4 + 0x10);
        }
        else {
          fStack376 = *(float *)(iStack4 + 0x10);
        }
        pfVar23 = &fStack408;
        fStack376 = fStack376 + 0.50000000;
        pfVar3 = &fStack376;
        pfVar22 = &fStack440;
        fStack372 = *(float *)(iStack4 + 0x14) + 0.50000000;
        fStack368 = *(float *)(iStack4 + 0x18) + 0.50000000;
        fStack364 = *(float *)(iStack4 + 0x1c) + 0.50000000;
        fStack408 = *(float *)(iStack8 + 0x10) + 0.50000000;
        fStack404 = *(float *)(iStack8 + 0x14) + 0.50000000;
        fStack400 = *(float *)(iStack8 + 0x18) + 0.50000000;
        fStack396 = *(float *)(iStack8 + 0x1c) + 0.50000000;
        fStack440 = *(float *)(iStack12 + 0x10) + 0.50000000;
        fStack436 = *(float *)(iStack12 + 0x14) + 0.50000000;
        fStack432 = *(float *)(iStack12 + 0x18) + 0.50000000;
        fStack428 = *(float *)(iStack12 + 0x1c) + 0.50000000;
        uStack348 = *(undefined4 *)(iStack4 + 0x30);
        uStack380 = *(undefined4 *)(iStack8 + 0x30);
        uStack412 = *(undefined4 *)(iStack12 + 0x30);
        pfVar21 = &fStack472;
        pfVar20 = &fStack504;
        do {
          fVar30 = *pfVar3;
          fVar29 = *pfVar23;
          fVar28 = *pfVar22;
          pfVar22 = pfVar22 + 1;
          pfVar23 = pfVar23 + 1;
          pfVar3 = pfVar3 + 1;
          *pfVar21 = fVar29 - fVar30;
          *pfVar20 = fVar28 - fVar30;
          pfVar21 = pfVar21 + 1;
          pfVar20 = pfVar20 + 1;
        } while (pfVar22 < &fStack408);
        pfVar21 = afStack568;
        pfVar20 = afStack536;
        pfVar3 = &fStack504;
        pfVar22 = &fStack376;
        pfVar23 = &fStack472;
        pfVar27 = &fStack600;
        pfVar24 = &fStack632;
        do {
          fVar30 = *pfVar3;
          fVar28 = *pfVar23;
          pfVar25 = pfVar24 + 1;
          fVar29 = (fVar30 * fStack188 - fStack180 * fVar28) / 65536.00000000;
          *pfVar21 = fVar29;
          *pfVar20 = (fVar28 * fStack184 - fStack192 * fVar30) / 65536.00000000;
          fVar30 = *pfVar20;
          *pfVar3 = fVar29 * fStack72;
          fVar28 = *pfVar3;
          fVar29 = *pfVar22;
          *pfVar23 = fVar30 * fStack72;
          fVar30 = fStack244 * fVar28 + fVar30 * fStack72;
          *pfVar27 = fVar30;
          *pfVar24 = fVar29 - fVar30 * fStack268;
          pfVar21 = pfVar21 + 1;
          pfVar20 = pfVar20 + 1;
          pfVar3 = pfVar3 + 1;
          pfVar22 = pfVar22 + 1;
          pfVar23 = pfVar23 + 1;
          pfVar27 = pfVar27 + 1;
          pfVar24 = pfVar25;
        } while (pfVar25 < &fStack600);
        fStack336 = fStack360;
        fStack332 = fStack356;
        fStack328 = fStack352;
        fStack324 = fStack392;
        fStack320 = fStack388;
        fStack316 = fStack384;
        fStack312 = fStack424;
        fStack308 = fStack420;
        fStack304 = fStack416;
        uVar2 = proc_7F094298(fStack632);
        uVar4 = proc_7F094298(fStack628);
        uVar5 = proc_7F094298(fStack624);
        uVar6 = proc_7F094298(fStack620);
        uVar7 = proc_7F094298(fStack504);
        uVar8 = proc_7F094298(fStack500);
        uVar9 = proc_7F094298(fStack496);
        uVar10 = proc_7F094298(fStack492);
        uVar11 = proc_7F094298(fStack472);
        uVar12 = proc_7F094298(fStack468);
        uVar13 = proc_7F094298(fStack464);
        uVar14 = proc_7F094298(fStack460);
        uVar15 = proc_7F094298(fStack600);
        uVar16 = proc_7F094298(fStack596);
        uVar17 = proc_7F094298(fStack592);
        uVar18 = proc_7F094298(fStack588);
        param_1[0x10] = 0xb4000000;
        param_1[0x11] = uVar2 & 0xffff0000 | uVar4 >> 0x10;
        param_1[0x12] = 0xb2000000;
        param_1[0x13] = uVar5 & 0xffff0000 | uVar6 >> 0x10;
        param_1[0x14] = 0xb4000000;
        param_1[0x15] = uVar7 & 0xffff0000 | uVar8 >> 0x10;
        param_1[0x16] = 0xb2000000;
        param_1[0x17] = uVar9 & 0xffff0000 | uVar10 >> 0x10;
        param_1[0x18] = 0xb4000000;
        param_1[0x19] = uVar2 << 0x10 | uVar4 & 0xffff;
        param_1[0x1a] = 0xb2000000;
        param_1[0x1b] = uVar5 << 0x10 | uVar6 & 0xffff;
        param_1[0x1c] = 0xb4000000;
        param_1[0x1d] = uVar7 << 0x10 | uVar8 & 0xffff;
        param_1[0x1e] = 0xb2000000;
        param_1[0x1f] = uVar9 << 0x10 | uVar10 & 0xffff;
        param_1[0x20] = 0xb4000000;
        param_1[0x21] = uVar15 & 0xffff0000 | uVar16 >> 0x10;
        param_1[0x23] = uVar17 & 0xffff0000 | uVar18 >> 0x10;
        param_1[0x22] = 0xb2000000;
        param_1[0x24] = 0xb4000000;
        param_1[0x25] = uVar11 & 0xffff0000 | uVar12 >> 0x10;
        param_1[0x26] = 0xb2000000;
        param_1[0x27] = uVar13 & 0xffff0000 | uVar14 >> 0x10;
        param_1[0x29] = uVar15 << 0x10 | uVar16 & 0xffff;
        param_1[0x28] = 0xb4000000;
        param_1[0x2a] = 0xb2000000;
        param_1[0x2b] = uVar17 << 0x10 | uVar18 & 0xffff;
        param_1[0x2c] = 0xb4000000;
        param_1[0x2d] = uVar11 << 0x10 | uVar12 & 0xffff;
        param_1[0x2e] = 0xb2000000;
        param_1[0x2f] = uVar13 << 0x10 | uVar14 & 0xffff;
        fStack648 = fStack344 * 0.03125000;
        fStack644 = fStack340 * 0.03125000;
        pfVar22 = afStack696;
        fStack640 = fStack288 * 0.03125000;
        pfVar3 = &fStack472;
        pfVar20 = &fStack504;
        pfVar21 = afStack728;
        do {
          fVar30 = *pfVar20;
          if (fVar30 < 0.00000000) {
            fVar30 = -fVar30;
          }
          fVar28 = *pfVar3;
          *pfVar22 = fVar30 * 0.03125000;
          if (fVar28 < 0.00000000) {
            fVar28 = -fVar28;
          }
          pfVar23 = pfVar21 + 1;
          pfVar3 = pfVar3 + 1;
          pfVar20 = pfVar20 + 1;
          pfVar22 = pfVar22 + 1;
          *pfVar21 = fVar28 * 0.03125000;
          pfVar21 = pfVar23;
        } while (pfVar23 != afStack696);
        fVar30 = 1.00000000;
        fStack712 = fStack712 + fStack648 + fStack680 * 2.00000000;
        fStack708 = fStack708 + fStack644 + fStack676 * 2.00000000;
        fStack704 = fStack704 + fStack640 + fStack672 * 2.00000000;
        if (fStack708 <= fStack712) {
          fStack708 = fStack712;
        }
        if (fStack704 <= fStack708) {
          fStack704 = fStack708;
        }
        if (1.00000000 < fStack704 * 0.00097656) {
          fVar30 = 1.00000000 / (fStack704 * 0.00097656);
        }
        uVar2 = proc_7F094298(fVar30 * fStack616);
        uVar4 = proc_7F094298(fVar30 * fStack612);
        uVar5 = proc_7F094298(fVar30 * fStack608);
        uVar6 = proc_7F094298(fVar30 * fStack488);
        uVar7 = proc_7F094298(fVar30 * fStack484);
        uVar8 = proc_7F094298(fVar30 * fStack480);
        uVar9 = proc_7F094298(fVar30 * fStack456);
        uVar10 = proc_7F094298(fVar30 * fStack452);
        uVar11 = proc_7F094298(fVar30 * fStack448);
        uVar12 = proc_7F094298(fVar30 * fStack584);
        uVar13 = proc_7F094298(fVar30 * fStack580);
        uVar14 = proc_7F094298(fVar30 * fStack576);
        param_1[0x30] = 0xb4000000;
        param_1[0x31] = uVar2 & 0xffff0000 | uVar4 >> 0x10;
        param_1[0x33] = uVar5 & 0xffff0000;
        param_1[0x32] = 0xb2000000;
        param_1[0x34] = 0xb4000000;
        param_1[0x35] = uVar6 & 0xffff0000 | uVar7 >> 0x10;
        param_1[0x36] = 0xb2000000;
        param_1[0x37] = uVar8 & 0xffff0000;
        param_1[0x38] = 0xb4000000;
        param_1[0x39] = uVar2 << 0x10 | uVar4 & 0xffff;
        param_1[0x3b] = uVar5 << 0x10;
        param_1[0x3a] = 0xb2000000;
        param_1[0x3c] = 0xb4000000;
        param_1[0x3d] = uVar6 << 0x10 | uVar7 & 0xffff;
        param_1[0x3f] = uVar8 << 0x10;
        param_1[0x3e] = 0xb2000000;
        param_1[0x40] = 0xb4000000;
        param_1[0x41] = uVar12 & 0xffff0000 | uVar13 >> 0x10;
        param_1[0x42] = 0xb2000000;
        param_1[0x43] = uVar14 & 0xffff0000;
        param_1[0x44] = 0xb4000000;
        param_1[0x45] = uVar9 & 0xffff0000 | uVar10 >> 0x10;
        param_1[0x47] = uVar11 & 0xffff0000;
        param_1[0x46] = 0xb2000000;
        param_1[0x48] = 0xb4000000;
        param_1[0x49] = uVar12 << 0x10 | uVar13 & 0xffff;
        param_1[0x4b] = uVar14 << 0x10;
        param_1[0x4a] = 0xb2000000;
        param_1[0x4c] = 0xb4000000;
        param_1[0x4d] = uVar9 << 0x10 | uVar10 & 0xffff;
        param_1[0x4f] = uVar11 << 0x10;
        param_1[0x4e] = 0xb3000000;
        puVar19 = param_1 + 0x50;
      }
    }
  }
  return puVar19;
}



undefined4 *
proc_7F098A2C(undefined4 *param_1,int param_2,int param_3,int param_4,int param_5,float param_6)

{
  float fVar1;
  int iVar2;
  ulonglong uVar3;
  uint uVar4;
  float *pfVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  longlong lVar18;
  float *pfVar19;
  float *pfVar20;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  float *pfVar21;
  longlong lVar22;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  float *pfVar23;
  float *pfVar24;
  float *pfVar25;
  int iVar26;
  float *pfVar27;
  float fVar28;
  f32 fVar29;
  f32 fVar30;
  float fVar31;
  float fVar32;
  uint uVar33;
  float fVar34;
  float fVar35;
  uint uVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  uint uVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float in_stack_00000014;
  float fStack788;
  float fStack732;
  float fStack728;
  float fStack724;
  float afStack716 [4];
  float fStack700;
  float fStack696;
  float fStack692;
  float fStack668;
  float fStack664;
  float fStack660;
  float fStack636;
  float fStack632;
  float fStack628;
  float fStack624;
  float afStack620 [4];
  float fStack604;
  float fStack600;
  float fStack596;
  float fStack592;
  float afStack572 [8];
  float afStack540 [8];
  float fStack508;
  float fStack504;
  float fStack500;
  float fStack496;
  float fStack476;
  float fStack472;
  float fStack468;
  float fStack464;
  float fStack444;
  float fStack440;
  float fStack436;
  undefined4 uStack432;
  float afStack428 [4];
  float fStack412;
  float fStack408;
  float fStack404;
  undefined4 uStack400;
  float fStack380;
  float fStack376;
  float fStack372;
  undefined4 uStack368;
  float fStack364;
  float fStack360;
  float fStack356;
  float fStack352;
  float fStack348;
  float fStack344;
  float fStack340;
  float fStack336;
  float fStack332;
  float fStack328;
  float fStack324;
  float fStack320;
  float fStack316;
  float fStack312;
  float fStack308;
  float fStack304;
  float fStack300;
  float fStack296;
  float fStack292;
  float fStack288;
  float fStack284;
  float fStack280;
  float fStack276;
  float fStack272;
  undefined4 uStack268;
  float fStack264;
  undefined4 uStack260;
  float fStack256;
  undefined4 uStack252;
  float fStack248;
  undefined4 uStack244;
  undefined4 uStack240;
  undefined4 uStack236;
  float fStack232;
  undefined4 uStack228;
  float fStack224;
  undefined4 uStack220;
  float fStack216;
  undefined4 uStack212;
  undefined4 uStack208;
  float fStack204;
  float fStack200;
  float fStack196;
  float fStack192;
  float fStack188;
  float fStack184;
  undefined4 uStack180;
  undefined4 uStack176;
  float fStack172;
  float fStack168;
  float fStack164;
  float fStack160;
  float fStack156;
  float fStack152;
  undefined4 uStack148;
  undefined4 uStack144;
  float fStack132;
  float fStack124;
  float fStack108;
  undefined4 uStack104;
  float fStack100;
  undefined4 uStack96;
  float fStack92;
  undefined4 uStack88;
  undefined4 uStack84;
  undefined4 uStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack32;
  int iStack12;
  int iStack8;
  int iStack4;
  
  uVar3 = proc_7F0977B4(param_2,param_3);
  if (uVar3 != 0) {
    return param_1;
  }
  uVar3 = proc_7F0977B4(param_3,param_4);
  if (uVar3 != 0) {
    return param_1;
  }
  uVar3 = proc_7F0977B4(param_4,param_2);
  if (uVar3 != 0) {
    return param_1;
  }
  uVar3 = proc_7F0977B4(param_5,param_2);
  if (uVar3 != 0) {
    return param_1;
  }
  uVar3 = proc_7F0977B4(param_5,param_3);
  if (uVar3 != 0) {
    return param_1;
  }
  uVar3 = proc_7F0977B4(param_5,param_4);
  if (uVar3 != 0) {
    return param_1;
  }
  lVar18 = (longlong)param_2;
  fStack272 = in_stack_00000014 / 65536.00000000;
  fVar28 = *(float *)(param_2 + 0x2c);
  fStack72 = ((*(float *)(param_4 + 0x28) - *(float *)(param_2 + 0x28)) *
              (*(float *)(param_3 + 0x2c) - fVar28) -
             (*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) *
             (*(float *)(param_4 + 0x2c) - fVar28)) / 65536.00000000;
  fStack76 = 1.00000000 / fStack72;
  lVar22 = (longlong)param_3;
  if (*(float *)(param_3 + 0x2c) < fVar28) {
    fStack72 = fStack72 * -1.00000000;
    fStack76 = fStack76 * -1.00000000;
    lVar22 = lVar18;
    lVar18 = (longlong)param_3;
  }
  iVar26 = (int)lVar18;
  iVar2 = (int)lVar22;
  fVar28 = *(float *)(iVar2 + 0x2c);
  iStack12 = param_4;
  if (*(float *)(param_4 + 0x2c) < fVar28) {
    fStack76 = fStack76 * -1.00000000;
    fVar28 = *(float *)(param_4 + 0x2c);
    lVar22 = (longlong)param_4;
    iStack12 = iVar2;
  }
  iStack4 = (int)lVar22;
  if (fVar28 < *(float *)(iVar26 + 0x2c)) {
    fStack76 = fStack76 * -1.00000000;
    fStack108 = *(float *)(iVar26 + 0x28);
  }
  else {
    fStack108 = *(float *)(iStack4 + 0x28);
    lVar18 = lVar22;
    iStack4 = iVar26;
  }
  fStack108 = fStack108 * 0.25000000;
  uStack104 = 0;
  uStack96 = 0;
  fStack100 = *(float *)(iStack4 + 0x28) * 0.25000000;
  uStack88 = 0;
  uStack80 = 0;
  fStack92 = *(float *)(iStack4 + 0x28) * 0.25000000;
  uStack84 = 0;
  fStack68 = *(float *)(iStack12 + 0x28);
  fStack64 = *(float *)(iStack12 + 0x2c);
  iStack8 = (int)lVar18;
  fStack60 = *(float *)(iStack8 + 0x28);
  fStack56 = *(float *)(iStack8 + 0x2c);
  fStack52 = *(float *)(iStack4 + 0x28);
  fStack48 = *(float *)(iStack4 + 0x2c);
  fVar28 = fStack56 - fStack48;
  fStack256 = fStack60 - fStack52;
  fStack248 = fStack64 - fStack48;
  fStack32 = fStack68 - fStack52;
  uStack144 = 0;
  uStack148 = 0;
  fStack40 = fStack68 - fStack60;
  fStack44 = fStack64 - fStack56;
  fStack172 = fStack40 * 0.25000000;
  fStack168 = fStack44 * 0.25000000;
  uStack176 = 0;
  uStack180 = 0;
  uStack236 = 0;
  uStack228 = 0;
  fStack164 = fStack256 * 0.25000000;
  uStack220 = 0;
  uStack208 = 0;
  fStack160 = fVar28 * 0.25000000;
  uStack212 = 0;
  uStack268 = 0;
  uStack260 = 0;
  fStack156 = fStack32 * 0.25000000;
  uStack252 = 0;
  fStack152 = fStack248 * 0.25000000;
  uStack240 = 0;
  fStack204 = fStack40 * 4.00000000;
  uStack244 = 0;
  fStack200 = fStack44 * 4.00000000;
  fStack196 = fStack256 * 4.00000000;
  fStack192 = fVar28 * 4.00000000;
  fStack188 = fStack32 * 4.00000000;
  fStack184 = fStack248 * 4.00000000;
  fStack232 = 4.00000000 / fStack44;
  fStack224 = 4.00000000 / fVar28;
  fStack216 = 4.00000000 / fStack248;
  fStack264 = fStack40 / fStack44;
  fStack256 = fStack256 / fVar28;
  fStack248 = fStack32 / fStack248;
  fStack264 = proc_7F093C48(fStack264,flt_800575F8,(longlong)param_4,lVar18,1877.00000000);
  fStack256 = proc_7F093C48(fStack256,flt_800575FC,extraout_a0,extraout_a1,1877.00000000);
  fStack248 = proc_7F093C48(fStack248,flt_80057600,extraout_a0_00,extraout_a1_00,1877.00000000);
  fStack132 = fStack100;
  fStack124 = fStack92;
  if (*(float *)(param_2 + 0x28) < *(float *)(param_3 + 0x28)) {
    if (*(float *)(param_4 + 0x2c) - *(float *)(param_5 + 0x2c) < 1.00000000) {
      fStack788 = flt_80057604;
    }
    else {
      fVar29 = get_screen_width();
      fStack788 = -((float)fVar29 - 0.25000000) /
                  ((*(float *)(param_4 + 0x2c) - *(float *)(param_5 + 0x2c)) * 0.25000000);
    }
    *param_1 = 0xb4000000;
    param_1[1] = (int)*(float *)(param_4 + 0x2c) | 0xce800000;
    param_1[2] = 0xb2000000;
    param_1[3] = (int)*(float *)(param_5 + 0x2c) << 0x10 | (int)*(float *)(param_2 + 0x2c);
    param_1[4] = 0xb4000000;
    fVar29 = get_ulx();
    fVar30 = get_screen_width();
    uVar4 = proc_7F094298(((float)fVar30 + (float)fVar29) - 0.25000000);
    param_1[5] = uVar4;
    param_1[6] = 0xb2000000;
    uVar4 = proc_7F094298(fStack788);
    param_1[7] = uVar4;
    param_1[8] = 0xb4000000;
    fVar29 = get_ulx();
    uVar4 = proc_7F094298((float)fVar29);
    param_1[9] = uVar4;
    param_1[10] = 0xb2000000;
    uVar4 = proc_7F094298(0.00000000);
    param_1[0xb] = uVar4;
    param_1[0xc] = 0xb4000000;
    fVar29 = get_ulx();
    fVar30 = get_screen_width();
    uVar4 = proc_7F094298(((float)fVar30 + (float)fVar29) - 0.25000000);
    param_1[0xd] = uVar4;
    param_1[0xe] = 0xb2000000;
    uVar4 = proc_7F094298(0.00000000);
    param_1[0xf] = uVar4;
  }
  else {
    fVar28 = flt_80057608;
    if (1.00000000 <= *(float *)(param_4 + 0x2c) - *(float *)(param_5 + 0x2c)) {
      fVar29 = get_screen_width();
      fVar28 = ((float)fVar29 - 0.25000000) /
               ((*(float *)(param_4 + 0x2c) - *(float *)(param_5 + 0x2c)) * 0.25000000);
    }
    *param_1 = 0xb4000000;
    param_1[1] = (int)*(float *)(param_4 + 0x2c) | 0xce000000;
    param_1[2] = 0xb2000000;
    param_1[3] = (int)*(float *)(param_5 + 0x2c) << 0x10 | (int)*(float *)(param_2 + 0x2c);
    param_1[4] = 0xb4000000;
    fVar29 = get_ulx();
    uVar4 = proc_7F094298((float)fVar29);
    param_1[5] = uVar4;
    param_1[6] = 0xb2000000;
    uVar4 = proc_7F094298(fVar28);
    param_1[7] = uVar4;
    param_1[8] = 0xb4000000;
    fVar29 = get_ulx();
    fVar30 = get_screen_width();
    uVar4 = proc_7F094298(((float)fVar30 + (float)fVar29) - 0.25000000);
    param_1[9] = uVar4;
    param_1[10] = 0xb2000000;
    uVar4 = proc_7F094298(0.00000000);
    param_1[0xb] = uVar4;
    param_1[0xc] = 0xb4000000;
    fVar29 = get_ulx();
    uVar4 = proc_7F094298((float)fVar29);
    param_1[0xd] = uVar4;
    param_1[0xe] = 0xb2000000;
    uVar4 = proc_7F094298(0.00000000);
    param_1[0xf] = uVar4;
  }
  fStack288 = *(float *)(iStack4 + 0xc) * fStack272;
  fStack284 = *(float *)(iStack8 + 0xc) * fStack272;
  fStack280 = *(float *)(iStack12 + 0xc) * fStack272;
  fStack276 = *(float *)(param_5 + 0xc) * fStack272;
  fVar28 = fStack284;
  if (fStack288 <= fStack284) {
    fVar28 = fStack288;
  }
  fVar31 = fStack280;
  if (fVar28 <= fStack280) {
    fVar31 = fVar28;
  }
  fStack292 = fStack276;
  if (fVar31 <= fStack276) {
    fStack292 = fVar31;
  }
  fStack292 = fStack292 * 0.50000000;
  fStack308 = *(float *)(iStack4 + 0x34) * fStack292;
  fStack304 = *(float *)(iStack8 + 0x34) * fStack292;
  fStack300 = *(float *)(iStack12 + 0x34) * fStack292;
  fStack296 = *(float *)(param_5 + 0x34) * fStack292;
  fStack380 = fStack308 * *(float *)(iStack4 + 0x20);
  fStack376 = fStack308 * *(float *)(iStack4 + 0x24);
  fStack372 = fStack308 * flt_8005760C;
  fStack412 = fStack304 * *(float *)(iStack8 + 0x20);
  fStack408 = fStack304 * *(float *)(iStack8 + 0x24);
  fStack404 = fStack304 * flt_8005760C;
  fStack444 = fStack300 * *(float *)(iStack12 + 0x20);
  fStack440 = fStack300 * *(float *)(iStack12 + 0x24);
  fStack436 = fStack300 * flt_8005760C;
  fStack320 = fStack296 * *(float *)(param_5 + 0x20);
  fStack316 = fStack296 * *(float *)(param_5 + 0x24);
  fStack312 = fStack296 * flt_8005760C;
  fStack364 = fStack380;
  if (fStack380 < 0.00000000) {
    fStack364 = -fStack380;
  }
  fStack360 = fStack376;
  if (fStack376 < 0.00000000) {
    fStack360 = -fStack376;
  }
  fVar28 = fStack412;
  if (fStack412 < 0.00000000) {
    fVar28 = -fStack412;
  }
  if ((fStack364 < fVar28) && (fStack364 = fStack412, fStack412 < 0.00000000)) {
    fStack364 = -fStack412;
  }
  fVar28 = fStack408;
  if (fStack408 < 0.00000000) {
    fVar28 = -fStack408;
  }
  if ((fStack360 < fVar28) && (fStack360 = fStack408, fStack408 < 0.00000000)) {
    fStack360 = -fStack408;
  }
  fVar28 = fStack444;
  if (fStack444 < 0.00000000) {
    fVar28 = -fStack444;
  }
  if ((fStack364 < fVar28) && (fStack364 = fStack444, fStack444 < 0.00000000)) {
    fStack364 = -fStack444;
  }
  fVar28 = fStack440;
  if (fStack440 < 0.00000000) {
    fVar28 = -fStack440;
  }
  if ((fStack360 < fVar28) && (fStack360 = fStack440, fStack440 < 0.00000000)) {
    fStack360 = -fStack440;
  }
  fVar28 = fStack320;
  if (fStack320 < 0.00000000) {
    fVar28 = -fStack320;
  }
  if ((fStack364 < fVar28) && (fStack364 = fStack320, fStack320 < 0.00000000)) {
    fStack364 = -fStack320;
  }
  fVar28 = fStack316;
  if (fStack316 < 0.00000000) {
    fVar28 = -fStack316;
  }
  if ((fStack360 < fVar28) && (fStack360 = fStack316, fStack316 < 0.00000000)) {
    fStack360 = -fStack316;
  }
  uStack368 = *(undefined4 *)(iStack4 + 0x30);
  pfVar24 = &fStack412;
  uStack400 = *(undefined4 *)(iStack8 + 0x30);
  pfVar5 = &fStack380;
  uStack432 = *(undefined4 *)(iStack12 + 0x30);
  pfVar23 = &fStack444;
  pfVar19 = &fStack476;
  pfVar21 = &fStack508;
  do {
    fVar28 = *pfVar5;
    fVar31 = *pfVar24;
    fVar39 = *pfVar23;
    pfVar23 = pfVar23 + 1;
    pfVar24 = pfVar24 + 1;
    pfVar5 = pfVar5 + 1;
    *pfVar19 = fVar31 - fVar28;
    *pfVar21 = fVar39 - fVar28;
    pfVar19 = pfVar19 + 1;
    pfVar21 = pfVar21 + 1;
  } while (pfVar23 < afStack428);
  pfVar19 = afStack572;
  pfVar21 = afStack540;
  pfVar5 = &fStack380;
  pfVar23 = &fStack508;
  pfVar24 = &fStack636;
  pfVar20 = &fStack476;
  pfVar27 = &fStack604;
  do {
    fVar28 = *pfVar23;
    fVar31 = *pfVar20;
    pfVar25 = pfVar24 + 1;
    fVar39 = (fVar28 * fStack192 - fStack184 * fVar31) / 65536.00000000;
    *pfVar19 = fVar39;
    *pfVar21 = (fVar31 * fStack188 - fStack196 * fVar28) / 65536.00000000;
    fVar28 = *pfVar21;
    fVar31 = *pfVar5;
    *pfVar23 = fVar39 * fStack76;
    *pfVar24 = fVar31;
    *pfVar20 = fVar28 * fStack76;
    *pfVar27 = fVar28 * fStack76;
    pfVar19 = pfVar19 + 1;
    pfVar21 = pfVar21 + 1;
    pfVar5 = pfVar5 + 1;
    pfVar23 = pfVar23 + 1;
    pfVar24 = pfVar25;
    pfVar20 = pfVar20 + 1;
    pfVar27 = pfVar27 + 1;
  } while (pfVar25 < afStack620);
  fVar42 = *(float *)(param_2 + 0x10);
  fVar28 = *(float *)(param_5 + 0x2c) / *(float *)(param_4 + 0x2c);
  fVar40 = *(float *)(param_4 + 0x14);
  fVar31 = *(float *)(param_2 + 0x14);
  fVar37 = *(float *)(param_5 + 0x14);
  fVar38 = *(float *)(param_4 + 0x18);
  fVar43 = *(float *)(param_2 + 0x18);
  fVar39 = *(float *)(param_5 + 0x18);
  fVar32 = *(float *)(param_4 + 0x1c);
  fVar44 = *(float *)(param_2 + 0x1c);
  fVar34 = *(float *)(param_5 + 0x1c);
  fVar35 = fVar42 * 65536.00000000;
  if (false) {
    fVar1 = ROUND(fVar35);
  }
  else {
    fVar1 = FLOOR(fVar35);
  }
  uVar4 = (uint)fVar1;
  if (true) {
    if ((int)uVar4 < 0) goto LAB_7f0997c0;
  }
  else {
    if (false) {
      fVar35 = ROUND(fVar35 - 2147483648.00000000);
    }
    else {
      fVar35 = FLOOR(fVar35 - 2147483648.00000000);
    }
    if (false) {
LAB_7f0997c0:
      uVar4 = 0xffffffff;
    }
    else {
      uVar4 = (int)fVar35 | 0x80000000;
    }
  }
  fVar35 = fVar31 * 65536.00000000;
  if (false) {
    fVar1 = ROUND(fVar35);
  }
  else {
    fVar1 = FLOOR(fVar35);
  }
  uVar36 = (uint)fVar1;
  if (true) {
    if ((int)uVar36 < 0) goto LAB_7f099850;
  }
  else {
    if (false) {
      fVar35 = ROUND(fVar35 - 2147483648.00000000);
    }
    else {
      fVar35 = FLOOR(fVar35 - 2147483648.00000000);
    }
    if (false) {
LAB_7f099850:
      uVar36 = 0xffffffff;
    }
    else {
      uVar36 = (int)fVar35 | 0x80000000;
    }
  }
  fVar35 = fVar43 * 65536.00000000;
  if (false) {
    fVar1 = ROUND(fVar35);
  }
  else {
    fVar1 = FLOOR(fVar35);
  }
  uVar41 = (uint)fVar1;
  if (true) {
    if ((int)uVar41 < 0) goto LAB_7f0998e0;
  }
  else {
    if (false) {
      fVar35 = ROUND(fVar35 - 2147483648.00000000);
    }
    else {
      fVar35 = FLOOR(fVar35 - 2147483648.00000000);
    }
    if (false) {
LAB_7f0998e0:
      uVar41 = 0xffffffff;
    }
    else {
      uVar41 = (int)fVar35 | 0x80000000;
    }
  }
  fVar35 = fVar44 * 65536.00000000;
  if (false) {
    fVar1 = ROUND(fVar35);
  }
  else {
    fVar1 = FLOOR(fVar35);
  }
  uVar33 = (uint)fVar1;
  if (true) {
    if (-1 < (int)uVar33) goto LAB_7f099988;
  }
  else {
    if (false) {
      fVar35 = ROUND(fVar35 - 2147483648.00000000);
    }
    else {
      fVar35 = FLOOR(fVar35 - 2147483648.00000000);
    }
    if (true) {
      uVar33 = (int)fVar35 | 0x80000000;
      goto LAB_7f099988;
    }
  }
  uVar33 = 0xffffffff;
LAB_7f099988:
  fStack356 = fStack380;
  fStack352 = fStack376;
  fStack348 = fStack372;
  fStack344 = fStack412;
  fStack340 = fStack408;
  fStack336 = fStack404;
  fStack332 = fStack444;
  fStack328 = fStack440;
  fStack324 = fStack436;
  uVar6 = proc_7F094298(((*(float *)(param_5 + 0x10) +
                         (fVar42 - *(float *)(param_4 + 0x10)) * fVar28) - fVar42) /
                        ((*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) * 0.25000000));
  uVar7 = proc_7F094298(((fVar37 + (fVar31 - fVar40) * fVar28) - *(float *)(param_2 + 0x14)) /
                        ((*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) * 0.25000000));
  uVar8 = proc_7F094298(((fVar39 + (fVar43 - fVar38) * fVar28) - *(float *)(param_2 + 0x18)) /
                        ((*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) * 0.25000000));
  uVar9 = proc_7F094298(((fVar34 + (fVar44 - fVar32) * fVar28) - *(float *)(param_2 + 0x1c)) /
                        ((*(float *)(param_3 + 0x28) - *(float *)(param_2 + 0x28)) * 0.25000000));
  uVar10 = proc_7F094298((*(float *)(param_4 + 0x10) - *(float *)(param_2 + 0x10)) /
                         ((*(float *)(param_4 + 0x2c) - *(float *)(param_2 + 0x2c)) * 0.25000000));
  uVar11 = proc_7F094298((*(float *)(param_4 + 0x14) - *(float *)(param_2 + 0x14)) /
                         ((*(float *)(param_4 + 0x2c) - *(float *)(param_2 + 0x2c)) * 0.25000000));
  uVar12 = proc_7F094298((*(float *)(param_4 + 0x18) - *(float *)(param_2 + 0x18)) /
                         ((*(float *)(param_4 + 0x2c) - *(float *)(param_2 + 0x2c)) * 0.25000000));
  uVar13 = proc_7F094298((*(float *)(param_4 + 0x1c) - *(float *)(param_2 + 0x1c)) /
                         ((*(float *)(param_4 + 0x2c) - *(float *)(param_2 + 0x2c)) * 0.25000000));
  param_1[0x11] = uVar4 & 0xffff0000 | uVar36 >> 0x10;
  param_1[0x10] = 0xb4000000;
  param_1[0x12] = 0xb2000000;
  param_1[0x13] = uVar41 & 0xffff0000 | uVar33 >> 0x10;
  param_1[0x14] = 0xb4000000;
  param_1[0x15] = uVar6 & 0xffff0000 | uVar7 >> 0x10;
  param_1[0x16] = 0xb2000000;
  param_1[0x17] = uVar8 & 0xffff0000 | uVar9 >> 0x10;
  param_1[0x19] = uVar4 << 0x10 | uVar36 & 0xffff;
  param_1[0x18] = 0xb4000000;
  param_1[0x1a] = 0xb2000000;
  param_1[0x1b] = uVar41 << 0x10 | uVar33 & 0xffff;
  param_1[0x1c] = 0xb4000000;
  param_1[0x1d] = uVar6 << 0x10 | uVar7 & 0xffff;
  param_1[0x1e] = 0xb2000000;
  param_1[0x1f] = uVar8 << 0x10 | uVar9 & 0xffff;
  param_1[0x21] = uVar10 & 0xffff0000 | uVar11 >> 0x10;
  param_1[0x20] = 0xb4000000;
  param_1[0x22] = 0xb2000000;
  param_1[0x23] = uVar12 & 0xffff0000 | uVar13 >> 0x10;
  param_1[0x24] = 0xb4000000;
  param_1[0x25] = uVar10 & 0xffff0000 | uVar11 >> 0x10;
  param_1[0x26] = 0xb2000000;
  param_1[0x27] = uVar12 & 0xffff0000 | uVar13 >> 0x10;
  param_1[0x29] = uVar10 << 0x10 | uVar11 & 0xffff;
  param_1[0x28] = 0xb4000000;
  param_1[0x2a] = 0xb2000000;
  param_1[0x2b] = uVar12 << 0x10 | uVar13 & 0xffff;
  param_1[0x2c] = 0xb4000000;
  param_1[0x2d] = uVar10 << 0x10 | uVar11 & 0xffff;
  param_1[0x2f] = uVar12 << 0x10 | uVar13 & 0xffff;
  param_1[0x2e] = 0xb2000000;
  fStack668 = fStack364 * 0.03125000;
  fStack664 = fStack360 * 0.03125000;
  pfVar5 = &fStack508;
  fStack660 = fStack292 * 0.03125000;
  pfVar23 = &fStack700;
  pfVar21 = &fStack476;
  pfVar19 = &fStack732;
  do {
    fVar28 = *pfVar5;
    if (fVar28 < 0.00000000) {
      fVar28 = -fVar28;
    }
    fVar31 = *pfVar21;
    *pfVar23 = fVar28 * 0.03125000;
    if (fVar31 < 0.00000000) {
      fVar31 = -fVar31;
    }
    pfVar24 = pfVar19 + 1;
    pfVar21 = pfVar21 + 1;
    pfVar5 = pfVar5 + 1;
    pfVar23 = pfVar23 + 1;
    *pfVar19 = fVar31 * 0.03125000;
    pfVar19 = pfVar24;
  } while (pfVar24 != afStack716);
  fStack732 = fStack732 + fStack668 + fStack700 * 2.00000000;
  fStack728 = fStack728 + fStack664 + fStack696 * 2.00000000;
  fStack724 = fStack724 + fStack660 + fStack692 * 2.00000000;
  if (fStack728 <= fStack732) {
    fStack728 = fStack732;
  }
  if (fStack724 <= fStack728) {
    fStack724 = fStack728;
  }
  if (1.00000000 < fStack724 * 0.00097656) {
    fVar28 = 1.00000000 / (fStack724 * 0.00097656);
  }
  else {
    fVar28 = 1.00000000;
  }
  uVar4 = proc_7F094298(fVar28 * fStack636);
  uVar36 = proc_7F094298(fVar28 * fStack632);
  uVar41 = proc_7F094298(fVar28 * fStack628);
  uVar33 = proc_7F094298(fVar28 * fStack624);
  uVar6 = proc_7F094298(fVar28 * fStack508);
  uVar7 = proc_7F094298(fVar28 * fStack504);
  uVar8 = proc_7F094298(fVar28 * fStack500);
  uVar9 = proc_7F094298(fVar28 * fStack496);
  uVar10 = proc_7F094298(fVar28 * fStack476);
  uVar11 = proc_7F094298(fVar28 * fStack472);
  uVar12 = proc_7F094298(fVar28 * fStack468);
  uVar13 = proc_7F094298(fVar28 * fStack464);
  uVar14 = proc_7F094298(fVar28 * fStack604);
  uVar15 = proc_7F094298(fVar28 * fStack600);
  uVar16 = proc_7F094298(fVar28 * fStack596);
  uVar17 = proc_7F094298(fVar28 * fStack592);
  param_1[0x30] = 0xb4000000;
  param_1[0x31] = uVar4 & 0xffff0000 | uVar36 >> 0x10;
  param_1[0x32] = 0xb2000000;
  param_1[0x33] = uVar41 & 0xffff0000 | uVar33 >> 0x10;
  param_1[0x34] = 0xb4000000;
  param_1[0x35] = uVar6 & 0xffff0000 | uVar7 >> 0x10;
  param_1[0x36] = 0xb2000000;
  param_1[0x37] = uVar8 & 0xffff0000 | uVar9 >> 0x10;
  param_1[0x38] = 0xb4000000;
  param_1[0x39] = uVar4 << 0x10 | uVar36 & 0xffff;
  param_1[0x3a] = 0xb2000000;
  param_1[0x3b] = uVar41 << 0x10 | uVar33 & 0xffff;
  param_1[0x3c] = 0xb4000000;
  param_1[0x3d] = uVar6 << 0x10 | uVar7 & 0xffff;
  param_1[0x3e] = 0xb2000000;
  param_1[0x3f] = uVar8 << 0x10 | uVar9 & 0xffff;
  param_1[0x40] = 0xb4000000;
  param_1[0x41] = uVar14 & 0xffff0000 | uVar15 >> 0x10;
  param_1[0x43] = uVar16 & 0xffff0000 | uVar17 >> 0x10;
  param_1[0x42] = 0xb2000000;
  param_1[0x44] = 0xb4000000;
  param_1[0x45] = uVar10 & 0xffff0000 | uVar11 >> 0x10;
  param_1[0x46] = 0xb2000000;
  param_1[0x47] = uVar12 & 0xffff0000 | uVar13 >> 0x10;
  param_1[0x48] = 0xb4000000;
  param_1[0x49] = uVar14 << 0x10 | uVar15 & 0xffff;
  param_1[0x4a] = 0xb2000000;
  param_1[0x4b] = uVar16 << 0x10 | uVar17 & 0xffff;
  param_1[0x4c] = 0xb4000000;
  param_1[0x4d] = uVar10 << 0x10 | uVar11 & 0xffff;
  param_1[0x4e] = 0xb3000000;
  param_1[0x4f] = uVar12 << 0x10 | uVar13 & 0xffff;
  return param_1 + 0x50;
}



void default_player_perspective_and_height(void)

{
  player1_playerdata.handicap = 1.00000000;
  player1_playerdata.player_perspective_height = 1.00000000;
  player2_player_data.handicap = 1.00000000;
  player2_player_data.player_perspective_height = 1.00000000;
  player3_player_data.handicap = 1.00000000;
  player3_player_data.player_perspective_height = 1.00000000;
  player4_player_data.handicap = 1.00000000;
  player4_player_data.player_perspective_height = 1.00000000;
  return;
}



void reset_play_data_ptrs(void)

{
  ptr_BONDdata_p1 = NULL;
  ptr_BONDdata_p2 = NULL;
  ptr_BONDdata_p3 = NULL;
  ptr_BONDdata_p4 = NULL;
  ptr_BONDdata = NULL;
  cur_player_stat_ptr = NULL;
  player_num = 0;
  random_byte = 0;
  DAT_8007a0c0 = 0;
  DAT_8007a0c4 = 1;
  DAT_8007a0c8 = 2;
  DAT_8007a0cc = 3;
  return;
}



void init_player_data_ptrs_construct_viewports(int playercount)

{
  u32 uVar1;
  short width;
  short height;
  int player;
  
  ptr_BONDdata_p1 = NULL;
  ptr_BONDdata_p2 = NULL;
  ptr_BONDdata_p3 = NULL;
  ptr_BONDdata_p4 = NULL;
  uVar1 = get_random_value();
  random_byte = uVar1 & 0xff;
  if (playercount < 1) {
    initBONDdataforPlayer(0);
    set_cur_player(0);
    width = get_video2_settings_width();
    height = get_video2_settings_height();
    set_cur_player_screen_size(width,height);
    width = get_video2_settings_ulx();
    height = get_video2_settings_uly();
    set_cur_player_viewport_size(width,height);
  }
  else {
    player = 0;
    if (0 < playercount) {
      do {
        initBONDdataforPlayer(player);
        player += 1;
      } while (player != playercount);
    }
    set_cur_player(0);
  }
  return;
}



ulonglong get_num_players(void)

{
  ulonglong uVar1;
  
  uVar1 = (ulonglong)(ptr_BONDdata_p1 != NULL);
  if (ptr_BONDdata_p2 != NULL) {
    uVar1 = SEXT48((int)((uint)(ptr_BONDdata_p1 != NULL) + 1));
  }
  if (ptr_BONDdata_p3 != NULL) {
    uVar1 = SEXT48((int)uVar1 + 1);
  }
  if (ptr_BONDdata_p4 != NULL) {
    uVar1 = SEXT48((int)uVar1 + 1);
  }
  return uVar1;
}



void initBONDdataforPlayer(int player)

{
  int iVar1;
  int iVar2;
  BONDdata **ppBVar3;
  int *piVar4;
  int *piVar5;
  int *piVar6;
  BONDdata *pBVar7;
  int aiStack940 [234];
  int iStack4;
  f32 temp_3f36e15f8e;
  
  piVar5 = &DAT_8003fda0;
  piVar4 = aiStack940;
  do {
    piVar6 = piVar5 + 3;
    *piVar4 = *piVar5;
    piVar4[1] = piVar5[1];
    piVar4[2] = piVar5[2];
    piVar5 = piVar6;
    piVar4 = piVar4 + 3;
  } while (piVar6 != (int *)0x80040148);
  pBVar7 = (BONDdata *)allocate_bytes_in_bank(0x2a80,4);
  ppBVar3 = &ptr_BONDdata_p1 + player;
  *ppBVar3 = pBVar7;
  pBVar7->unknown = 0;
  (*ppBVar3)->xpos = 0.00000000;
  (*ppBVar3)->ypos = 0.00000000;
  (*ppBVar3)->zpos = 0.00000000;
  (*ppBVar3)->xpos2 = 0.00000000;
  (*ppBVar3)->ypos2 = 0.00000000;
  (*ppBVar3)->zpos2 = 1.00000000;
  (*ppBVar3)->xoffset = 0.00000000;
  (*ppBVar3)->yoffset = 1.00000000;
  (*ppBVar3)->zoffset = 0.00000000;
  (*ppBVar3)->xpos3 = 0.00000000;
  (*ppBVar3)->ypos3 = 0.00000000;
  (*ppBVar3)->zpos3 = 0.00000000;
  (*ppBVar3)->room_pointer = 0;
  (*ppBVar3)->current_model_xpos = 0.00000000;
  (*ppBVar3)->current_model_ypos = 0.00000000;
  (*ppBVar3)->current_model_zpos = 0.00000000;
  (*ppBVar3)->previous_model_xpos = 0.00000000;
  (*ppBVar3)->previous_model_ypos = 0.00000000;
  (*ppBVar3)->previous_model_zpos = 0.00000000;
  (*ppBVar3)->current_room_xpos = 0.00000000;
  (*ppBVar3)->current_room_ypos = 0.00000000;
  (*ppBVar3)->current_room_zpos = 0.00000000;
  (*ppBVar3)->field_6C = 0.00000000;
  (*ppBVar3)->field_70 = 0.00000000;
  (*ppBVar3)->clipping_height = 0.00000000;
  (*ppBVar3)->field_78 = 0.00000000;
  (*ppBVar3)->field_7C = 0.00000000;
  (*ppBVar3)->field_80 = 0.00000000;
  (*ppBVar3)->field_84 = 0.00000000;
  (*ppBVar3)->field_88 = 0.00000000;
  (*ppBVar3)->field_8C = 0;
  (*ppBVar3)->field_90 = 0.00000000;
  (*ppBVar3)->field_94 = 0;
  (*ppBVar3)->field_98 = 0.00000000;
  (*ppBVar3)->field_1274 = 0.00000000;
  (*ppBVar3)->field_1278 = 0.00000000;
  (*ppBVar3)->field_127C = 0.00000000;
  (*ppBVar3)->crouchposition = 2;
  (*ppBVar3)->field_29FC = 2;
  (*ppBVar3)->ducking_height_offset = 0.00000000;
  (*ppBVar3)->field_A4 = 0.00000000;
  (*ppBVar3)->position_data_pointer = 0;
  (*ppBVar3)->field_AC = 1;
  (*ppBVar3)->field_D0 = 0;
  (*ppBVar3)->ptr_char_objectinstance = 0;
  (*ppBVar3)->player_button_control = 0;
  (*ppBVar3)->current_health = 1.00000000;
  (*ppBVar3)->current_armor = 0.00000000;
  (*ppBVar3)->previous_health = 1.00000000;
  (*ppBVar3)->previous_armor = 0.00000000;
  (*ppBVar3)->mp_watch_health_total = 1.00000000;
  (*ppBVar3)->mp_watch_armor_total = 0.00000000;
  (*ppBVar3)->invincibility_timer = -1;
  (*ppBVar3)->health_bar_timer = -1;
  (*ppBVar3)->field_104 = 0;
  (*ppBVar3)->field_108 = 0;
  (*ppBVar3)->field_10C = 0;
  (*ppBVar3)->field_110 = 0;
  (*ppBVar3)->field_114 = 1;
  (*ppBVar3)->look_ahead_setting = 1;
  (*ppBVar3)->field_11C = 0;
  (*ppBVar3)->field_120 = 1;
  (*ppBVar3)->is_aiming_flag = 0;
  (*ppBVar3)->auto_aim_flag = 1;
  (*ppBVar3)->y_aim_related_float = 0.00000000;
  (*ppBVar3)->field_130 = 0;
  (*ppBVar3)->field_134 = -1;
  (*ppBVar3)->solo_auto_aim_x_setting = 1;
  (*ppBVar3)->x_aim_related_float = 0.00000000;
  (*ppBVar3)->field_140 = 0;
  (*ppBVar3)->field_144 = -1;
  (*ppBVar3)->azimuth_angle = 0.00000000;
  (*ppBVar3)->azimuth_turning_direction = 0.00000000;
  (*ppBVar3)->azimuth_cosine = 1.00000000;
  (*ppBVar3)->azimuth_sine = 0.00000000;
  (*ppBVar3)->inclination_angle1 = -4.00000000;
  (*ppBVar3)->inclination_angle2 = f32_80057610;
  (*ppBVar3)->inclination_turning_direction = 0.00000000;
  (*ppBVar3)->inclination_cosine = 1.00000000;
  (*ppBVar3)->inclination_sine = 0.00000000;
  (*ppBVar3)->strafe_speed_multiplier = 0.00000000;
  (*ppBVar3)->strafe_movement_direction = 0.00000000;
  (*ppBVar3)->forward_speed_multiplier = 0.00000000;
  (*ppBVar3)->field_2A4C = 0.00000000;
  (*ppBVar3)->forward_speed_multiplier_2 = 1.00000000;
  (*ppBVar3)->boost_factor_x = 0.00000000;
  (*ppBVar3)->boost_factor_y = 0.00000000;
  (*ppBVar3)->boost_factor_z = 0.00000000;
  (*ppBVar3)->viewport_alpha = -1.00000000;
  (*ppBVar3)->rate_of_change = -1.00000000;
  (*ppBVar3)->time_for_change = 0.00000000;
  (*ppBVar3)->final_alpha_level = 0.00000000;
  (*ppBVar3)->field_19C = 0.00000000;
  (*ppBVar3)->field_1A0 = 0;
  (*ppBVar3)->field_1C0 = 0;
  (*ppBVar3)->field_1C4 = 0;
  (*ppBVar3)->pause_animation_state = 0;
  (*ppBVar3)->paused_flag = 1;
  (*ppBVar3)->open_close_solo_watch_menu = 0;
  (*ppBVar3)->field_1D4 = 0.00000000;
  (*ppBVar3)->field_1D8 = 0.00000000;
  (*ppBVar3)->pause_watch_position = -25.00000000;
  (*ppBVar3)->field_1E0 = 0.00000000;
  (*ppBVar3)->field_1E4 = 1.00000000;
  (*ppBVar3)->field_1E8 = 0.00000000;
  (*ppBVar3)->field_1EC = 0.00000000;
  (*ppBVar3)->field_1F0 = 0.00000000;
  (*ppBVar3)->field_1F4 = 1.00000000;
  (*ppBVar3)->pausing_flag = 0;
  (*ppBVar3)->pause_starting_angle = 0.00000000;
  (*ppBVar3)->field_208 = 0.00000000;
  (*ppBVar3)->pause_target_angle = 0.00000000;
  (*ppBVar3)->field_210 = 0.00000000;
  (*ppBVar3)->field_214 = 0.00000000;
  (*ppBVar3)->field_218 = 0;
  (*ppBVar3)->field_21C = 1;
  (*ppBVar3)->step_in_view_watch_animation = 0;
  (*ppBVar3)->pause_animation_counter = 0.00000000;
  (*ppBVar3)->field_3B4 = 0;
  (*ppBVar3)->field_3B6 = 0;
  (*ppBVar3)->field_3B8 = 0.00000000;
  (*ppBVar3)->field_3BC = 0.00000000;
  *(float *)&(*ppBVar3)->field_3C0 = flt_80057614;
  (*ppBVar3)->field_3C4 = 0.00000000;
  (*ppBVar3)->field_3C8 = 0.00000000;
  (*ppBVar3)->field_3CC = 1.00000000;
  *(undefined4 *)&(*ppBVar3)->field_3D0 = 0xff;
  *(undefined4 *)&(*ppBVar3)->field_3D4 = 0xff;
  *(undefined4 *)&(*ppBVar3)->field_3D8 = 0xff;
  (*ppBVar3)->tint_alpha = 0.00000000;
  (*ppBVar3)->field_3E0 = -1.00000000;
  (*ppBVar3)->timer_for_fade = -1.00000000;
  (*ppBVar3)->field_3E8 = 0xff;
  (*ppBVar3)->field_3EC = 0xff;
  (*ppBVar3)->field_3F0 = 0xff;
  (*ppBVar3)->field_3F4 = 0xff;
  (*ppBVar3)->field_3F8 = 0xff;
  (*ppBVar3)->field_3FC = 0xff;
  (*ppBVar3)->field_400 = 0.00000000;
  (*ppBVar3)->field_404 = 0.00000000;
  (*ppBVar3)->cuff_value = 0;
  (*ppBVar3)->field_420 = 1;
  (*ppBVar3)->field_424 = 0;
  (*ppBVar3)->field_428 = 0;
  (*ppBVar3)->field_42C = 2;
  (*ppBVar3)->controlstyle = 0;
  (*ppBVar3)->field_4DC = 1;
  (*ppBVar3)->field_4E0 = 1;
  (*ppBVar3)->field_4E4 = 1;
  (*ppBVar3)->field_4E8 = 0;
  (*ppBVar3)->field_4EC = flt_80057618;
  (*ppBVar3)->field_4F0 = 0;
  (*ppBVar3)->field_4F4 = 1.00000000;
  (*ppBVar3)->field_4F8 = 1.00000000;
  (*ppBVar3)->scaled_velocity = 0.00000000;
  (*ppBVar3)->field_500 = 0.00000000;
  (*ppBVar3)->field_504 = 0.00000000;
  temp_3f36e15f8e = flt_8005761C;
  (*ppBVar3)->field_508 = 0.00000000;
  (*ppBVar3)->field_50C = 0.00000000;
  (*ppBVar3)->field_510 = 1.00000000;
  (*ppBVar3)->field_514 = 0.00000000;
  (*ppBVar3)->field_518 = 1.00000000;
  (*ppBVar3)->field_51C = 0.00000000;
  (*ppBVar3)->velocity = 0.00000000;
  (*ppBVar3)->field_524 = 0.00000000;
  (*ppBVar3)->field_528 = 0.00000000;
  (*ppBVar3)->field_52C = 0.00000000;
  (*ppBVar3)->field_530 = 0.00000000;
  *(f32 *)&(*ppBVar3)->field_534 = temp_3f36e15f8e;
  (*ppBVar3)->field_538 = 0;
  (*ppBVar3)->field_53C = temp_3f36e15f8e;
  (*ppBVar3)->field_540 = 0.00000000;
  (*ppBVar3)->field_544 = 0.00000000;
  (*ppBVar3)->field_548 = 0.00000000;
  (*ppBVar3)->field_54C = 0.00000000;
  (*ppBVar3)->stationary_ground_offset = 0.00000000;
  (*ppBVar3)->field_554 = 0.00000000;
  (*ppBVar3)->field_558 = 0.00000000;
  (*ppBVar3)->field_55C = 0.00000000;
  (*ppBVar3)->field_560 = 0.00000000;
  (*ppBVar3)->field_564 = 0.00000000;
  (*ppBVar3)->field_568 = 0.00000000;
  (*ppBVar3)->field_56C = 1.00000000;
  (*ppBVar3)->field_570 = 0.00000000;
  (*ppBVar3)->field_574 = 0.00000000;
  (*ppBVar3)->field_578 = 1.00000000;
  (*ppBVar3)->field_57C = 0.00000000;
  (*ppBVar3)->field_580 = 1.00000000;
  (*ppBVar3)->field_584 = 0.00000000;
  (*ppBVar3)->field_588 = 0.00000000;
  (*ppBVar3)->field_58C = 1.00000000;
  (*ppBVar3)->field_590 = 0.00000000;
  (*ppBVar3)->field_594 = 0;
  iVar1 = 0;
  do {
    *(undefined2 *)((int)&(*ppBVar3)->field_7D0 + iVar1) = 0x280;
    *(undefined2 *)((int)&(*ppBVar3)->field_7D0 + iVar1 + 2) = 0x1e0;
    *(undefined2 *)((int)&(*ppBVar3)->field_7D4 + iVar1) = 0x1ff;
    *(undefined2 *)((int)&(*ppBVar3)->field_7D4 + iVar1 + 2) = 0;
    *(undefined2 *)((int)&(*ppBVar3)->field_7D8 + iVar1) = 0x280;
    *(undefined2 *)((int)&(*ppBVar3)->field_7D8 + iVar1 + 2) = 0x1e0;
    *(undefined2 *)((int)&(*ppBVar3)->field_7DC + iVar1) = 0x1ff;
    iVar2 = iVar1 + 0x10;
    *(undefined2 *)((int)&(*ppBVar3)->field_7DC + iVar1 + 2) = 0;
    iVar1 = iVar2;
  } while (iVar2 != 0x20);
  (*ppBVar3)->playerscreenwidth = 100;
  (*ppBVar3)->playerscreenheight = 100;
  (*ppBVar3)->playerscreenulx = 0;
  (*ppBVar3)->playerscreenuly = 0;
  (*ppBVar3)->right_invisible = 0;
  (*ppBVar3)->left_invisible = 0;
  (*ppBVar3)->item_right = 0;
  (*ppBVar3)->item_left = 0;
  (*ppBVar3)->field_2A44 = -1;
  (*ppBVar3)->field_2A48 = -1;
  (*ppBVar3)->lock_right_hand_model = 0;
  (*ppBVar3)->lock_left_hand_model = 0;
  (*ppBVar3)->ptr_right_weapon_buffer = NULL;
  (*ppBVar3)->ptr_left_weapon_buffer = NULL;
  pBVar7 = *ppBVar3;
  piVar5 = aiStack940;
  do {
    piVar4 = piVar5 + 3;
    pBVar7->right_weapon = *piVar5;
    pBVar7->right_weapon_attack = piVar5[1];
    pBVar7->previous_right_weapon = piVar5[2];
    pBVar7 = (BONDdata *)&pBVar7->zpos;
    piVar5 = piVar4;
  } while (piVar4 != &iStack4);
  piVar5 = aiStack940;
  pBVar7 = *ppBVar3;
  do {
    piVar4 = piVar5 + 3;
    pBVar7->left_weapon = *piVar5;
    pBVar7->left_weapon_attack = piVar5[1];
    pBVar7->left_weapon_previous = piVar5[2];
    piVar5 = piVar4;
    pBVar7 = (BONDdata *)&pBVar7->zpos;
  } while (piVar4 != &iStack4);
  (*ppBVar3)->field_FC0 = 1.00000000;
  (*ppBVar3)->field_FC4 = 1.00000000;
  (*ppBVar3)->field_FC8 = 0;
  (*ppBVar3)->field_FCC = 0;
  temp_3f36e15f8e = flt_80057620;
  (*ppBVar3)->field_FD0 = 0;
  (*ppBVar3)->field_FD4 = 0;
  (*ppBVar3)->field_FD8 = 0;
  (*ppBVar3)->field_FDC = -1;
  (*ppBVar3)->field_FDD = -1;
  (*ppBVar3)->field_FDE = -1;
  (*ppBVar3)->field_FDF = '\0';
  (*ppBVar3)->field_FE0 = 1;
  (*ppBVar3)->field_FE4 = 0;
  (*ppBVar3)->field_FE8 = 0.00000000;
  (*ppBVar3)->field_FEC = 0.00000000;
  (*ppBVar3)->field_FF0 = 0.00000000;
  (*ppBVar3)->field_FF4 = 0.00000000;
  (*ppBVar3)->field_FF8 = temp_3f36e15f8e;
  (*ppBVar3)->field_FFC = 0.00000000;
  (*ppBVar3)->field_1000 = 0.00000000;
  (*ppBVar3)->field_1004 = 0.00000000;
  (*ppBVar3)->field_1008 = 0.00000000;
  (*ppBVar3)->field_100C = temp_3f36e15f8e;
  (*ppBVar3)->field_1010 = 0.00000000;
  (*ppBVar3)->holds_neg_pi = flt_80057624;
  (*ppBVar3)->field_1018 = 0.00000000;
  (*ppBVar3)->field_105C = 0;
  (*ppBVar3)->GEkey_analyzed = 0;
  (*ppBVar3)->somekinda_flags = 0;
  (*ppBVar3)->field_106C = 0.00000000;
  (*ppBVar3)->field_1070 = 0.00000000;
  (*ppBVar3)->field_1074 = 0.00000000;
  (*ppBVar3)->field_1078 = 0;
  (*ppBVar3)->field_107C = 0.00000000;
  (*ppBVar3)->field_1080 = 0.00000000;
  (*ppBVar3)->sniper_zoom = 60.00000000;
  (*ppBVar3)->camera_zoom = 60.00000000;
  (*ppBVar3)->field_108C = -1;
  (*ppBVar3)->maybe_screen_width = 320.00000000;
  (*ppBVar3)->maybe_screen_height = 240.00000000;
  (*ppBVar3)->ulx = 0.00000000;
  (*ppBVar3)->uly = 0.00000000;
  (*ppBVar3)->field_10A0 = 10.00000000;
  (*ppBVar3)->field_10A4 = 46.00000000;
  (*ppBVar3)->field_10A8 = 1.00000000;
  (*ppBVar3)->maybe_half_screen_width = 160.00000000;
  (*ppBVar3)->maybe_half_screen_height = 120.00000000;
  (*ppBVar3)->field_10B4 = 1.00000000;
  (*ppBVar3)->field_10B8 = 1.00000000;
  (*ppBVar3)->field_10BC = 1.00000000;
  (*ppBVar3)->field_10C0 = 1.00000000;
  (*ppBVar3)->field_10C4 = 0;
  (*ppBVar3)->field_10C8 = 0;
  (*ppBVar3)->field_10CC = 0;
  (*ppBVar3)->field_10D0 = 0;
  (*ppBVar3)->field_10D4 = 0;
  (*ppBVar3)->field_10D8 = 0;
  (*ppBVar3)->field_10DC = 0;
  (*ppBVar3)->field_10E0 = 0;
  (*ppBVar3)->field_10E4 = 0;
  (*ppBVar3)->field_10E8 = 0;
  (*ppBVar3)->field_10EC = 0;
  (*ppBVar3)->field_10F0 = 1.00000000;
  (*ppBVar3)->field_10F4 = 1.00000000;
  (*ppBVar3)->field_10F8 = 1.00000000;
  (*ppBVar3)->field_10FC = 0x10000;
  (*ppBVar3)->field_1118 = 0.00000000;
  (*ppBVar3)->field_111C = 0.00000000;
  (*ppBVar3)->field_1120 = 320.00000000;
  (*ppBVar3)->field_1124 = 240.00000000;
  (*ppBVar3)->somekinda_bitflags = 0;
  (*ppBVar3)->field_11B0 = 0;
  (*ppBVar3)->field_11B4 = 0;
  (*ppBVar3)->field_11B8 = 0;
  (*ppBVar3)->watch_menu_screen_swap_current_timer = 0.00000000;
  (*ppBVar3)->watch_endtime = 0.00000000;
  (*ppBVar3)->watch_menu_current_size = 60.00000000;
  (*ppBVar3)->watch_menu_initial_size = 60.00000000;
  (*ppBVar3)->watch_menu_final_size = 60.00000000;
  (*ppBVar3)->watch_menu_current_size_unused_maybe = 60.00000000;
  (*ppBVar3)->field_11D4 = f32_80057628;
  (*ppBVar3)->stationary_intro_cam_flags = 0;
  (*ppBVar3)->set_neg1_by_stationary_intro_cam = -1;
  (*ppBVar3)->ptr_inventory_first_in_cycle = 0;
  (*ppBVar3)->p_itemcur = 0;
  (*ppBVar3)->items_max = 0;
  (*ppBVar3)->flag_for_allguns = 0;
  (*ppBVar3)->field_11F0 = 0;
  (*ppBVar3)->field_11F4 = 0;
  (*ppBVar3)->field_1280 = 0;
  (*ppBVar3)->players_cur_animation = 0;
  (*ppBVar3)->field_1288 = 0.00000000;
  (*ppBVar3)->invincible_flag = '\0';
  (*ppBVar3)->field_29B8 = 7;
  (*ppBVar3)->field_29BC = 1.00000000;
  (*ppBVar3)->field_29C0 = 0.00000000;
  (*ppBVar3)->in_mp_pause_menu = 0;
  (*ppBVar3)->field_29D4 = 7;
  (*ppBVar3)->num_deaths = 0;
  (*ppBVar3)->field_29E0 = random_byte;
  random_byte += 1;
  (*ppBVar3)->field_29E4 = -1;
  (*ppBVar3)->field_29E8 = -1;
  (*ppBVar3)->field_29EC = -1;
  (*ppBVar3)->field_29F0 = -1;
  (*ppBVar3)->how_long_to_show_health = 0;
  (*ppBVar3)->field_2A30 = 0;
  (*ppBVar3)->field_2A34 = 0;
  (*ppBVar3)->field_2A38 = 1;
  (*ppBVar3)->actual_health = 1.00000000;
  (*ppBVar3)->actual_armor = 1.00000000;
  (*ppBVar3)->cur_player_control_type_0 = 0;
  (*ppBVar3)->cur_player_control_type_1 = 0;
  (*ppBVar3)->cur_player_control_type_2 = 0.00000000;
  (*ppBVar3)->neg_vspacing_for_control_type_entry = 0;
  (*ppBVar3)->has_set_control_type_data = 1;
  (*ppBVar3)->field_2A6C = 0;
  (*ppBVar3)->field_2A70 = 0;
  visible_to_guards_flag = TRUE;
  obj_collision_flag = TRUE;
  return;
}



void set_cur_player(int playernum)

{
  ptr_BONDdata = (&ptr_BONDdata_p1)[playernum];
  cur_player_stat_ptr = &player1_playerdata + playernum;
  player_num = playernum;
  return;
}



u32 get_cur_playernum(void)

{
  return player_num;
}



longlong proc_7F09B15C(int param_1)

{
  BONDdata *pBVar1;
  ulonglong uVar2;
  BONDdata **ppBVar3;
  longlong lVar4;
  
  lVar4 = 0;
  uVar2 = get_num_players();
  if ((longlong)uVar2 < 1) {
LAB_7f09b1c0:
    lVar4 = -1;
  }
  else {
    ppBVar3 = &ptr_BONDdata_p1;
    pBVar1 = ptr_BONDdata_p1;
    while (ppBVar3 = ppBVar3 + 1, param_1 != pBVar1->position_data_pointer) {
      lVar4 = (longlong)((int)lVar4 + 1);
      uVar2 = get_num_players();
      if ((longlong)uVar2 <= lVar4) goto LAB_7f09b1c0;
      pBVar1 = *ppBVar3;
    }
  }
  return lVar4;
}



void set_cur_player_screen_size(short width,short height)

{
  ptr_BONDdata->playerscreenwidth = width;
  ptr_BONDdata->playerscreenheight = height;
  return;
}



void set_cur_player_viewport_size(short ulx,short uly)

{
  ptr_BONDdata->playerscreenulx = ulx;
  ptr_BONDdata->playerscreenuly = uly;
  return;
}



void set_watch_menu_current_size_unused_maybe(f32 size)

{
  ptr_BONDdata->watch_menu_current_size_unused_maybe = size;
  return;
}



void proc_7F09B224(f32 param_1)

{
  ptr_BONDdata->field_11D4 = param_1;
  return;
}



f32 get_watch_menu_current_size_unused_maybe(void)

{
  return ptr_BONDdata->watch_menu_current_size_unused_maybe;
}



undefined8 proc_7F09B244(ulonglong param_1)

{
  undefined8 uVar1;
  
  uVar1 = 0xffffffffffffffff;
  if ((longlong)param_1 < 0x20) {
    if (param_1 < 0x20) {
                    // WARNING: Could not recover jumptable at 0x7f09b27c. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar1 = (*(code *)(&jpt_700CF1AC)[(int)param_1])();
      return uVar1;
    }
  }
  else {
    if (param_1 != 0x58) {
      return 0xffffffffffffffff;
    }
    uVar1 = 0x14d;
  }
  return uVar1;
}



void proc_7F09B368(int param_1)

{
  set_0x4_in_runtime_flags_for_item_in_guards_hand
            (*(int **)(ptr_BONDdata->position_data_pointer + 4),param_1);
  return;
}



longlong proc_7F09B398(uint param_1)

{
  undefined2 *puVar1;
  longlong lVar2;
  ITEM_IDS IVar3;
  undefined *puVar4;
  uint uVar5;
  
  puVar1 = *(undefined2 **)(ptr_BONDdata->position_data_pointer + 4);
  lVar2 = (longlong)(int)puVar1;
  if (*(int *)(puVar1 + param_1 * 2 + 0xb0) == 0) {
    IVar3 = get_item_in_hand(param_1);
    lVar2 = proc_7F09B244((longlong)(int)IVar3);
    if (-1 < lVar2) {
      if ((param_1 & 0x3fffffff) == 0) {
        uVar5 = 0;
      }
      else {
        uVar5 = 0x10000000;
      }
      puVar4 = create_held_weapon(puVar1,(int)lVar2,(char)IVar3,uVar5,NULL,NULL);
      lVar2 = (longlong)(int)puVar4;
    }
  }
  return lVar2;
}



void proc_7F09B41C(void)

{
  undefined4 uVar1;
  u32 uVar2;
  undefined4 *puVar3;
  uint uVar4;
  int iVar5;
  int *piVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  
  piVar6 = &DAT_8007a0c0;
  iVar5 = 0;
  do {
    *piVar6 = iVar5;
    iVar5 += 1;
    piVar6 = piVar6 + 1;
  } while (iVar5 < 4);
  puVar8 = &DAT_8007a0c0;
  iVar5 = 0;
  puVar7 = puVar8;
  do {
    uVar2 = get_random_value();
    uVar4 = 4 - iVar5;
    puVar3 = puVar8 + uVar2 % uVar4;
    uVar1 = *puVar7;
    iVar5 += 1;
    if (uVar4 == 0) {
      trap(0x1c00);
    }
    *puVar7 = *puVar3;
    puVar8 = puVar8 + 1;
    puVar7 = puVar7 + 1;
    *puVar3 = uVar1;
  } while (iVar5 != 3);
  return;
}



int proc_7F09B4D8(int playercount)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  iVar2 = 0;
  piVar3 = &DAT_8007a0c0;
  iVar1 = DAT_8007a0c0;
  while( true ) {
    piVar3 = piVar3 + 1;
    if (playercount == iVar1) {
      return iVar2;
    }
    if ((&ptr_BONDdata_p1)[iVar1] != NULL) {
      iVar2 += 1;
    }
    if (piVar3 == &DAT_8007a0d0) break;
    iVar1 = *piVar3;
  }
  return iVar2;
}



int proc_7F09B528(int param_1)

{
  if ((&ptr_BONDdata_p1)[DAT_8007a0c0] != NULL) {
    if (param_1 == 0) {
      return DAT_8007a0c0;
    }
    param_1 += -1;
  }
  if ((&ptr_BONDdata_p1)[DAT_8007a0c4] != NULL) {
    if (param_1 == 0) {
      return DAT_8007a0c4;
    }
    param_1 += -1;
  }
  if ((&ptr_BONDdata_p1)[DAT_8007a0c8] != NULL) {
    if (param_1 == 0) {
      return DAT_8007a0c8;
    }
    param_1 += -1;
  }
  if (((&ptr_BONDdata_p1)[DAT_8007a0cc] != NULL) && (param_1 == 0)) {
    return DAT_8007a0cc;
  }
  return 0;
}



void proc_7F09B600(byte *param_1,byte *param_2,uint *param_3)

{
  u32 uVar1;
  int iVar2;
  uint uVar3;
  byte *pbVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iStack16;
  uint uStack12;
  
  uVar5 = 0;
  iStack16 = -0x707f60b9;
  uStack12 = 0x3108b3c1;
  uVar6 = 0;
  uVar7 = 0;
  if (param_1 < param_2) {
    pbVar4 = param_1;
    do {
      iVar2 = (uint)*pbVar4 << (uVar5 & 0xf);
      uVar3 = iVar2 + uStack12;
      iStack16 = (uint)(uVar3 < uStack12) + (iVar2 >> 0x1f) + iStack16;
      uStack12 = uVar3;
      uVar1 = lotsa_shifting_random_related((ulonglong *)&iStack16);
      pbVar4 = pbVar4 + 1;
      uVar5 += 7;
      uVar6 ^= uVar1;
    } while (pbVar4 != param_2);
  }
  param_2 = param_2 + -1;
  if (param_1 <= param_2) {
    do {
      iVar2 = (uint)*param_2 << (uVar5 & 0xf);
      uVar3 = iVar2 + uStack12;
      iStack16 = (uint)(uVar3 < uStack12) + (iVar2 >> 0x1f) + iStack16;
      uStack12 = uVar3;
      uVar1 = lotsa_shifting_random_related((ulonglong *)&iStack16);
      param_2 = param_2 + -1;
      uVar5 += 3;
      uVar7 ^= uVar1;
    } while (param_2 != param_1 + -1);
  }
  *param_3 = uVar6;
  param_3[1] = uVar7;
  return;
}



undefined4 proc_7F09B740(void)

{
  ulonglong uVar1;
  
  uVar1 = ((randomseed << 0x3f) >> 0x1f | (randomseed << 0x1f) >> 0x20) ^
          (randomseed << 0x2c) >> 0x20;
  randomseed = uVar1 >> 0x14 & 0xfff ^ uVar1;
  return (int)randomseed;
}



void proc_7F09B788(longlong param_1)

{
  randomseed = param_1 + 1;
  return;
}



void removed_7f09b7a0(void)

{
  return;
}



void proc_7F09B7A8(void)

{
  int iVar1;
  
  iVar1 = 0;
  if (0 < DAT_8007a0d4) {
    do {
      iVar1 += 0x14;
    } while (iVar1 < DAT_8007a0d4 * 0x14);
  }
  return;
}



void proc_7F09B7E4(void)

{
  int iVar1;
  
  iVar1 = 0;
  if (0 < DAT_8007a0dc) {
    do {
      iVar1 += 0x14;
    } while (iVar1 < DAT_8007a0dc * 0x14);
  }
  return;
}



void proc_7F09B820(void)

{
  ulonglong uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = get_num_players();
  if ((longlong)uVar1 < 2) {
    iVar2 = proc_7F0BDF04();
    if ((iVar2 == 0x1e) || (iVar2 == 0x1d)) {
      DAT_8007a0d0 = 500;
      DAT_8007a0d4 = 0x14;
      DAT_8007a0d8 = 500;
      DAT_8007a0dc = 0x14;
    }
    else {
      DAT_8007a0d0 = 500;
      DAT_8007a0d4 = 0x14;
      DAT_8007a0d8 = 0x5dc;
      DAT_8007a0dc = 0x28;
    }
  }
  else {
    DAT_8007a0d0 = 3000;
    DAT_8007a0d4 = 0x50;
    DAT_8007a0d8 = 500;
    DAT_8007a0dc = 0x14;
  }
  DAT_8007a0e8 = (void **)allocate_bytes_in_bank(DAT_8007a0d4 * 0x14,4);
  DAT_8007a0e0 = allocate_bytes_in_bank(DAT_8007a0d0 << 4,4);
  DAT_8007a0ec = (void **)allocate_bytes_in_bank(DAT_8007a0dc * 0x14,4);
  DAT_8007a0e4 = allocate_bytes_in_bank(DAT_8007a0d8 << 4,4);
  DAT_8007a0f0 = (undefined2)DAT_8007a0d0;
  *DAT_8007a0e8 = DAT_8007a0e0;
  *(short *)(DAT_8007a0e8 + 3) = (short)DAT_8007a0d0;
  *(undefined2 *)((int)DAT_8007a0e8 + 0xe) = 0;
  iVar2 = 0x14;
  *(undefined2 *)(DAT_8007a0e8 + 4) = 0xffff;
  iVar3 = 1;
  *(undefined2 *)((int)DAT_8007a0e8 + 0x12) = 0xffff;
  if (1 < DAT_8007a0d4) {
    do {
      iVar3 += 1;
      *(undefined2 *)((int)DAT_8007a0e8 + iVar2 + 0xe) = 0xffff;
      iVar2 += 0x14;
    } while (iVar3 < DAT_8007a0d4);
  }
  iVar3 = 1;
  DAT_8007a0f2 = (undefined2)DAT_8007a0d8;
  iVar2 = 0x14;
  *DAT_8007a0ec = DAT_8007a0e4;
  *(short *)(DAT_8007a0ec + 3) = (short)DAT_8007a0d8;
  *(undefined2 *)((int)DAT_8007a0ec + 0xe) = 0;
  *(undefined2 *)(DAT_8007a0ec + 4) = 0xffff;
  *(undefined2 *)((int)DAT_8007a0ec + 0x12) = 0xffff;
  if (1 < DAT_8007a0dc) {
    do {
      iVar3 += 1;
      *(undefined2 *)((int)DAT_8007a0ec + iVar2 + 0xe) = 0xffff;
      iVar2 += 0x14;
    } while (iVar3 < DAT_8007a0dc);
  }
  return;
}



void proc_7F09BAC4(int param_1,int param_2)

{
  char cVar1;
  ushort uVar2;
  int *piVar3;
  ushort *partdesc;
  ushort *puVar4;
  char *pcVar5;
  
  pcVar5 = (char *)get_ptr_obj_pos_list_current_entry();
  if (pcVar5 == NULL) {
    return;
  }
  cVar1 = *pcVar5;
  do {
    if (cVar1 == '\x01') {
      partdesc = **(ushort ***)(*(int *)(*(int *)(pcVar5 + 4) + 0x14) + 8);
      if (partdesc == NULL) {
        pcVar5 = *(char **)(pcVar5 + 0x24);
      }
      else {
        uVar2 = *partdesc;
        while ((uVar2 & 0xff) != 0x18) {
          puVar4 = *(ushort **)(partdesc + 10);
          if ((puVar4 == NULL) && (puVar4 = partdesc, partdesc != NULL)) {
            puVar4 = *(ushort **)(partdesc + 6);
            while ((puVar4 == NULL &&
                   (partdesc = *(ushort **)(partdesc + 4), puVar4 = partdesc, partdesc != NULL))) {
              puVar4 = *(ushort **)(partdesc + 6);
            }
          }
          if (puVar4 == NULL) goto LAB_7f09bb90;
          uVar2 = *puVar4;
          partdesc = puVar4;
        }
        piVar3 = (int *)extract_id_from_object_structure_microcode
                                  (*(int *)(*(int *)(pcVar5 + 4) + 0x14),partdesc);
        if (param_1 == *piVar3) {
          *piVar3 = param_2;
LAB_7f09bb90:
          pcVar5 = *(char **)(pcVar5 + 0x24);
        }
        else {
          pcVar5 = *(char **)(pcVar5 + 0x24);
        }
      }
    }
    else {
      pcVar5 = *(char **)(pcVar5 + 0x24);
    }
    if (pcVar5 == NULL) {
      return;
    }
    cVar1 = *pcVar5;
  } while( true );
}



void proc_7F09BBBC(void)

{
  short sVar1;
  int iVar2;
  bool bVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  int iVar10;
  
  bVar3 = false;
  if ((longlong)DAT_8007a0f2 < (longlong)(DAT_8007a0d8 >> 2)) {
    iVar10 = 0;
    iVar5 = DAT_8007a0dc + -1;
    iVar7 = DAT_8007a0dc;
    iVar9 = DAT_8007a0ec;
    if (0 < iVar5) {
      do {
        iVar2 = iVar10 * 0x14;
        iVar6 = (iVar10 + 1) * 0x10000 >> 0x10;
        if ((0 < *(short *)(iVar9 + iVar2 + 0xe)) && ((iVar10 + 1) * 0x10000 >> 0x10 < iVar7)) {
          do {
            iVar5 = iVar6 * 0x14;
            piVar8 = (int *)(iVar9 + iVar2);
            piVar4 = (int *)(iVar9 + iVar5);
            if ((0 < *(short *)((int)piVar4 + 0xe)) &&
               ((piVar8[1] == piVar4[1] && (piVar8[2] == piVar4[2])))) {
              bVar3 = true;
              proc_7F09BAC4(*piVar4,*piVar8);
              *(short *)(DAT_8007a0ec + iVar2 + 0xe) =
                   *(short *)(DAT_8007a0ec + iVar2 + 0xe) + *(short *)(DAT_8007a0ec + iVar5 + 0xe);
              *(undefined2 *)(DAT_8007a0ec + iVar5 + 0xe) = 0;
              DAT_8007a0f2 += *(short *)(DAT_8007a0ec + iVar5 + 0xc);
              iVar7 = DAT_8007a0dc;
              iVar9 = DAT_8007a0ec;
            }
            iVar6 = (int)(short)((short)iVar6 + 1);
          } while (iVar6 < iVar7);
          iVar5 = iVar7 + -1;
        }
        iVar10 = (int)(short)((short)iVar10 + 1);
      } while (iVar10 < iVar5);
    }
  }
  if (bVar3) {
    bVar3 = false;
    iVar7 = 0;
    do {
      iVar9 = DAT_8007a0ec + iVar7 * 0x14;
      sVar1 = *(short *)(iVar9 + 0x10);
      if (sVar1 < 0) {
        bVar3 = true;
      }
      else {
        if (*(short *)(iVar9 + 0xe) == 0) {
          iVar5 = (int)sVar1 * 0x14;
          if (*(short *)(DAT_8007a0ec + iVar5 + 0xe) == 0) {
            *(short *)(iVar9 + 0xc) =
                 *(short *)(iVar9 + 0xc) + *(short *)(DAT_8007a0ec + iVar5 + 0xc);
            *(undefined2 *)(DAT_8007a0ec + iVar5 + 0xe) = 0xffff;
            sVar1 = *(short *)(DAT_8007a0ec + iVar5 + 0x10);
            *(short *)(DAT_8007a0ec + iVar7 * 0x14 + 0x10) = sVar1;
            if (-1 < sVar1) {
              *(undefined2 *)(DAT_8007a0ec + (int)sVar1 * 0x14 + 0x12) = (short)iVar7;
            }
            goto LAB_7f09bdf0;
          }
        }
        iVar7 = (int)sVar1;
      }
LAB_7f09bdf0:
    } while (!bVar3);
  }
  if ((longlong)DAT_8007a0f2 < (longlong)(DAT_8007a0d8 >> 2)) {
    proc_7F056690();
  }
  return;
}



int proc_7F09BE4C(longlong param_1,longlong param_2,int param_3,int param_4)

{
  short sVar1;
  int *piVar2;
  bool bVar3;
  longlong lVar4;
  int *piVar5;
  int iVar6;
  int *piVar7;
  longlong lVar8;
  longlong lVar9;
  short *psVar10;
  short sVar11;
  int iVar12;
  
  if (param_2 == 0xb0b) {
    psVar10 = &DAT_8007a0f2;
    sVar1 = DAT_8007a0dc._2_2_;
    piVar2 = DAT_8007a0ec;
  }
  else {
    if (param_2 != 0xcccc) {
      return 0;
    }
    psVar10 = &DAT_8007a0f0;
    sVar1 = DAT_8007a0d4._2_2_;
    piVar2 = DAT_8007a0e8;
  }
  lVar9 = (longlong)sVar1;
  iVar12 = 0;
  lVar4 = 0;
  lVar8 = 0;
  do {
    piVar7 = piVar2 + (int)lVar8 * 5;
    if (*(short *)((int)piVar7 + 0xe) == 0) {
      if ((longlong)*(short *)(piVar7 + 3) < param_1) {
        sVar1 = *(short *)(piVar7 + 4);
        goto LAB_7f09befc;
      }
      iVar12 = 1;
    }
    else {
      sVar1 = *(short *)(piVar7 + 4);
LAB_7f09befc:
      lVar8 = (longlong)sVar1;
      lVar4 = (longlong)((int)lVar4 + 1);
      if ((lVar8 == -1) || (lVar9 < lVar4)) {
        iVar12 = -1;
      }
    }
  } while (iVar12 == 0);
  if (lVar9 < lVar4) {
    proc_7F09B7A8();
    proc_7F09B7E4();
    iVar6 = 0;
  }
  else {
    iVar6 = 0;
    if (iVar12 == 1) {
      bVar3 = false;
      piVar7 = piVar2 + (int)lVar8 * 5;
      sVar1 = *(short *)(piVar7 + 3);
      piVar7[1] = param_3;
      *(short *)((int)piVar7 + 0xe) = *(short *)((int)piVar7 + 0xe) + 1;
      piVar7[2] = param_4;
      sVar11 = (short)param_1;
      if (((longlong)sVar1 != param_1) && (lVar4 = 0, piVar5 = piVar2, 0 < lVar9)) {
        do {
          if (*(short *)((int)piVar5 + 0xe) == -1) {
            *(short *)(piVar7 + 3) = sVar11;
            *piVar5 = *piVar7 + (int)param_1 * 0x10;
            *(short *)(piVar5 + 3) = sVar1 - sVar11;
            *(undefined2 *)((int)piVar5 + 0xe) = 0;
            *(undefined2 *)((int)piVar5 + 0x12) = (short)lVar8;
            bVar3 = true;
            *(undefined2 *)(piVar5 + 4) = *(undefined2 *)(piVar7 + 4);
            if (-1 < *(short *)(piVar7 + 4)) {
              *(undefined2 *)((int)piVar2 + (int)*(short *)(piVar7 + 4) * 0x14 + 0x12) =
                   (short)lVar4;
            }
            *(short *)(piVar7 + 4) = (short)lVar4;
            break;
          }
          lVar4 = (longlong)((int)lVar4 + 1);
          piVar5 = piVar5 + 5;
        } while (lVar4 != lVar9);
      }
      if (bVar3) {
        *psVar10 = *psVar10 - sVar11;
      }
      else {
        *psVar10 = *psVar10 - sVar1;
      }
      iVar6 = *piVar7;
    }
  }
  return iVar6;
}



void proc_7F09C044(uint param_1)

{
  short sVar1;
  bool bVar2;
  int iVar3;
  longlong lVar4;
  uint *puVar5;
  longlong lVar6;
  int iVar7;
  short *psVar8;
  short sVar9;
  
  if (((param_1 < DAT_8007a0e0) ||
      (psVar8 = &DAT_8007a0f0, iVar7 = DAT_8007a0e8,
      (DAT_8007a0d0 + -1) * 0x10 + DAT_8007a0e0 < param_1)) &&
     ((param_1 < DAT_8007a0e4 ||
      (psVar8 = &DAT_8007a0f2, iVar7 = DAT_8007a0ec,
      (DAT_8007a0d8 + -1) * 0x10 + DAT_8007a0e4 < param_1)))) {
    proc_7F09B7A8();
    proc_7F09B7E4();
  }
  else {
    lVar6 = 0;
    bVar2 = false;
    do {
      puVar5 = (uint *)(iVar7 + (int)lVar6 * 0x14);
      if (param_1 == *puVar5) {
        bVar2 = true;
        *(short *)((int)puVar5 + 0xe) = *(short *)((int)puVar5 + 0xe) + -1;
        if (*(short *)((int)puVar5 + 0xe) == 0) {
          *psVar8 = *psVar8 + *(short *)(puVar5 + 3);
          if (*(short *)(puVar5 + 4) < 0) {
            lVar4 = (longlong)*(short *)((int)puVar5 + 0x12);
          }
          else {
            iVar3 = iVar7 + (int)*(short *)(puVar5 + 4) * 0x14;
            if (*(short *)(iVar3 + 0xe) == 0) {
              *(short *)(puVar5 + 3) = *(short *)(puVar5 + 3) + *(short *)(iVar3 + 0xc);
              *(undefined2 *)(puVar5 + 4) = *(undefined2 *)(iVar3 + 0x10);
              *(undefined2 *)(iVar3 + 0xe) = 0xffff;
              if (*(short *)(puVar5 + 4) < 0) {
                lVar4 = (longlong)*(short *)((int)puVar5 + 0x12);
              }
              else {
                *(undefined2 *)(iVar7 + (int)*(short *)(puVar5 + 4) * 0x14 + 0x12) = (short)lVar6;
                lVar4 = (longlong)*(short *)((int)puVar5 + 0x12);
              }
            }
            else {
              lVar4 = (longlong)*(short *)((int)puVar5 + 0x12);
            }
          }
          if (-1 < lVar4) {
            iVar3 = iVar7 + (int)lVar4 * 0x14;
            sVar9 = (short)lVar4;
            if (*(short *)(iVar3 + 0xe) == 0) {
              lVar6 = (longlong)(int)sVar9;
              *(short *)(iVar3 + 0xc) = *(short *)(iVar3 + 0xc) + *(short *)(puVar5 + 3);
              *(undefined2 *)(iVar3 + 0x10) = *(undefined2 *)(puVar5 + 4);
              *(undefined2 *)((int)puVar5 + 0xe) = 0xffff;
              sVar1 = *(short *)(iVar7 + (int)sVar9 * 0x14 + 0x10);
              if (-1 < sVar1) {
                *(short *)(iVar7 + (int)sVar1 * 0x14 + 0x12) = sVar9;
              }
            }
          }
        }
      }
      else {
        lVar6 = (longlong)*(short *)(puVar5 + 4);
        if (lVar6 == -1) {
          bVar2 = true;
        }
      }
    } while (!bVar2);
  }
  return;
}



void proc_7F09C250(int param_1,float *param_2,int param_3,undefined4 param_4,int param_5,
                  undefined param_6,char *param_7,int param_8)

{
  char *pcVar1;
  byte bVar2;
  short sVar3;
  object_standard *poVar5;
  int **ppiVar6;
  ulonglong uVar4;
  u32 uVar7;
  int *piVar8;
  object_standard *poVar9;
  object_standard *poVar10;
  int iVar11;
  longlong lVar12;
  int iVar13;
  float fVar14;
  float __x;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  float fVar15;
  
  iVar11 = (int)(short)param_4;
  iVar13 = iVar11 * 0x40;
  poVar10 = NULL;
  if ((iVar11 != 0x10) && (iVar11 != 1)) {
    DAT_80040170 = 6;
  }
  iVar11 = 0;
  piVar8 = DAT_8007a144;
  do {
    if (*piVar8 == 0) {
      poVar10 = (object_standard *)(iVar11 + (int)DAT_8007a144);
      break;
    }
    iVar11 += 0x3e0;
    piVar8 = piVar8 + 0xf8;
  } while (iVar11 < 0x1740);
  if (poVar10 == NULL) {
    return;
  }
  poVar5 = remove_last_obj_pos_data_entry();
  if ((&DAT_800402bd)[iVar13] != 0) {
    ppiVar6 = play_sfx_a1(ptr_sfx_buf,(ushort)(byte)(&DAT_800402bd)[iVar13],NULL);
    proc_7F053A10((int)ppiVar6,param_2);
  }
  if (poVar5 == NULL) {
    return;
  }
  bVar2 = *(byte *)((int)&poVar5->scale + 1);
  *(undefined *)&poVar5->scale = 7;
  *(byte *)((int)&poVar5->scale + 1) = bVar2 | 2;
  *(object_standard **)&poVar5->objectID = poVar10;
  iVar11 = 0;
  poVar5->runtime_ptr_obj_instance_controller = param_3;
  *(float *)&poVar5->FLAGS1 = *param_2;
  *(float *)&poVar5->FLAGS5 = param_2[1];
  *(float *)&poVar5->runtime_ptr_obj_posdata = param_2[2];
  if (*param_7 != -1) {
    *(char *)&poVar5->runtime_MATRIX5 = *param_7;
    poVar9 = poVar5;
    while( true ) {
      pcVar1 = param_7 + 1;
      iVar11 += 1;
      param_7 = param_7 + 1;
      if ((*pcVar1 == -1) || (iVar11 == 7)) break;
      *(char *)((int)&poVar9->runtime_MATRIX5 + 1) = *pcVar1;
      poVar9 = (object_standard *)((int)&poVar9->scale + 1);
    }
  }
  *(undefined *)((int)&poVar5->runtime_MATRIX5 + iVar11) = 0xff;
  lVar12 = 0;
  if (param_8 != 0) {
    *(byte *)((int)&poVar5->scale + 1) = *(byte *)((int)&poVar5->scale + 1) | 8;
  }
  proc_7F03A4F0((int)poVar5);
  set_stateflag_0x04_for_posdata((int)poVar5);
  *(undefined2 *)&poVar10[7].runtime_MATRIXC = 0;
  *(undefined2 *)((int)&poVar10[7].runtime_MATRIXC + 2) = 0xffff;
  *(undefined *)((int)&poVar10[7].runtime_MATRIXD + 1) = (char)param_5;
  *(object_standard **)poVar10 = poVar5;
  *(int *)&poVar10->objectID = param_1;
  *(char *)&poVar10[7].runtime_MATRIXD = (char)param_4;
  *(undefined *)((int)&poVar10[7].runtime_MATRIXD + 2) = param_6;
  if (param_5 == 0) {
    *(float *)&poVar10[7].runtime_MATRIXE = flt_800576B0;
  }
  else {
    if (param_1 == 0) {
      fVar14 = *param_2;
    }
    else {
      if (*(int *)(param_1 + 0x14) != 0) {
        poVar10[7].runtime_MATRIXE = *(int *)(param_1 + 8);
        fVar14 = (float)proc_7F0B2970();
        *(float *)&poVar10[7].runtime_MATRIXF = fVar14 + 4.00000000;
        poVar10[7].runtime_x_pos = *(float *)(param_1 + 0x10);
        uVar4 = proc_7F0B2FD8(*(int *)(param_1 + 0x14));
        *(short *)&poVar10[7].runtime_y_pos = (short)uVar4;
        goto LAB_7f09c500;
      }
      fVar14 = *param_2;
    }
    *(float *)&poVar10[7].runtime_MATRIXE = fVar14;
    fVar14 = (float)proc_7F0B2970();
    *(float *)&poVar10[7].runtime_MATRIXF = fVar14 + 4.00000000;
    poVar10[7].runtime_x_pos = param_2[2];
    uVar4 = proc_7F0B2FD8(param_3);
    *(short *)&poVar10[7].runtime_y_pos = (short)uVar4;
  }
LAB_7f09c500:
  uVar7 = get_random_value();
  fVar14 = (float)uVar7;
  if ((int)uVar7 < 0) {
    fVar14 = fVar14 + 4294967296.00000000;
  }
  fVar15 = (fVar14 * 0.00000000 * 0.50000000 + 1.00000000) * *(float *)(&DAT_80040294 + iVar13);
  uVar7 = get_random_value();
  fVar14 = (float)uVar7;
  if ((int)uVar7 < 0) {
    fVar14 = fVar14 + 4294967296.00000000;
  }
  __x = fVar14 * 0.00000000 * flt_800576B4;
  fVar14 = cosf(__x);
  *(float *)&poVar10->runtime_ptr_obj_instance_controller = fVar14 * fVar15;
  fVar14 = sinf(__x);
  *(undefined2 *)&poVar10->runtime_MATRIX1 = 1;
  *(float *)&poVar10->runtime_MATRIX0 = fVar14 * fVar15;
  *(float *)&poVar10->FLAGS1 = *param_2;
  *(float *)&poVar10->FLAGS5 = param_2[1];
  *(float *)&poVar10->runtime_ptr_obj_posdata = param_2[2];
  fVar14 = extraout_f12;
  fVar15 = extraout_f14;
  if (0 < *(short *)(&DAT_800402a8 + iVar13)) {
    do {
      proc_7F09F254(param_2,fVar14,fVar15,*(float *)(&DAT_800402b0 + iVar13),
                    *(float *)(&DAT_800402b4 + iVar13));
      lVar12 = (longlong)((int)lVar12 + 1);
      fVar14 = extraout_f12_00;
      fVar15 = extraout_f14_00;
    } while (lVar12 < (longlong)*(short *)(&DAT_800402a8 + iVar13));
  }
  uVar4 = get_num_players();
  iVar11 = 0;
  if (1 < (longlong)uVar4) {
    do {
      piVar8 = (int *)(DAT_8007a140 + iVar11);
      iVar13 = iVar11 + DAT_8007a140;
      if (*piVar8 == 0) {
        iVar13 = piVar8[0x66];
      }
      else {
        if (*(short *)(iVar13 + 6) == 7) {
          iVar13 = piVar8[0x66];
        }
        else {
          if (*(short *)(iVar13 + 6) == 8) {
            iVar13 = piVar8[0x66];
          }
          else {
            if (*(short *)(iVar13 + 6) == 9) {
              iVar13 = piVar8[0x66];
            }
            else {
              *(word *)(iVar13 + 4) = (&WORD_8004017c)[(int)*(short *)(iVar13 + 6) * 0xc];
              piVar8 = (int *)(DAT_8007a140 + iVar11);
              iVar13 = piVar8[0x66];
            }
          }
        }
      }
      if (iVar13 == 0) {
        iVar13 = piVar8[0xcc];
      }
      else {
        sVar3 = *(short *)(iVar11 + DAT_8007a140 + 0x19e);
        if (sVar3 == 7) {
          iVar13 = piVar8[0xcc];
        }
        else {
          if (sVar3 == 8) {
            iVar13 = piVar8[0xcc];
          }
          else {
            if (sVar3 == 9) {
              iVar13 = piVar8[0xcc];
            }
            else {
              *(word *)(iVar11 + DAT_8007a140 + 0x19c) = (&WORD_8004017c)[(int)sVar3 * 0xc];
              piVar8 = (int *)(DAT_8007a140 + iVar11);
              iVar13 = piVar8[0xcc];
            }
          }
        }
      }
      if (iVar13 == 0) {
        iVar13 = piVar8[0x132];
      }
      else {
        sVar3 = *(short *)(iVar11 + DAT_8007a140 + 0x336);
        if (sVar3 == 7) {
          iVar13 = piVar8[0x132];
        }
        else {
          if (sVar3 == 8) {
            iVar13 = piVar8[0x132];
          }
          else {
            if (sVar3 == 9) {
              iVar13 = piVar8[0x132];
            }
            else {
              *(word *)(iVar11 + DAT_8007a140 + 0x334) = (&WORD_8004017c)[(int)sVar3 * 0xc];
              iVar13 = *(int *)(DAT_8007a140 + iVar11 + 0x4c8);
            }
          }
        }
      }
      if ((((iVar13 != 0) && (sVar3 = *(short *)(iVar11 + DAT_8007a140 + 0x4ce), sVar3 != 7)) &&
          (sVar3 != 8)) && (sVar3 != 9)) {
        *(word *)(iVar11 + DAT_8007a140 + 0x4cc) = (&WORD_8004017c)[(int)sVar3 * 0xc];
      }
      iVar11 += 0x660;
    } while (iVar11 != 0x1fe0);
  }
  return;
}



void proc_7F09C7AC(void)

{
  DAT_80040170 = 6;
  DAT_80040174 = 6;
  return;
}



void proc_7F09C7C4(float *param_1,float *param_2,float *param_3)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float __x;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  
  __x = flt_800576B8;
  if (DAT_80040170 == 0) {
    video_related_9(0.00000000);
  }
  else {
    fVar4 = cosf(flt_800576B8);
    fVar5 = sinf(__x);
    fVar9 = *param_2;
    fVar10 = param_2[2];
    fVar6 = sinf(__x);
    __x = cosf(__x);
    fVar13 = param_2[2];
    fVar11 = *param_2;
    fVar14 = 0.00000000;
    iVar3 = 0;
    piVar2 = DAT_8007a144;
    do {
      iVar1 = *piVar2;
      if (iVar1 != 0) {
        fVar7 = *(float *)(iVar1 + 8) - *param_1;
        fVar8 = *(float *)(iVar1 + 0xc) - param_1[1];
        fVar12 = *(float *)(iVar1 + 0x10) - param_1[2];
        fVar7 = sqrtf(fVar7 * fVar7 + fVar8 * fVar8 + fVar12 * fVar12);
        piVar2 = (int *)((int)DAT_8007a144 + iVar3);
        fVar14 = fVar14 + (*(float *)(&DAT_80040294 + (int)*(char *)(piVar2 + 0xf3) * 0x40) / fVar7)
                          * 15.00000000;
      }
      iVar3 += 0x3e0;
      piVar2 = piVar2 + 0xf8;
    } while (iVar3 != 0x1740);
    if (0 < DAT_80040174) {
      DAT_80040174 += -1;
      fVar14 = fVar14 + 1.00000000;
    }
    DAT_80040170 -= 1;
    if ((DAT_80040170 & 2) == 0) {
      param_3[1] = -fVar14;
    }
    else {
      param_3[1] = fVar14;
      fVar14 = -fVar14;
    }
    *param_3 = fVar14 * (fVar4 * fVar9 - fVar10 * fVar5);
    param_3[2] = fVar14 * (fVar13 * __x + fVar6 * fVar11);
    video_related_9((float)DAT_80040170 * fVar14);
  }
  return;
}



void proc_7F09C9D8(char *param_1,float param_2,float param_3)

{
  char cVar1;
  short sVar2;
  int iVar3;
  uint uVar4;
  longlong lVar5;
  u32 playernum;
  float in_a1_lo;
  float in_a2_lo;
  int iVar6;
  int iVar7;
  char *pcVar8;
  short *psVar9;
  float extraout_f12;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  uint auStack32 [8];
  
  iVar3 = *(int *)(param_1 + 4);
  iVar7 = (int)*(char *)(iVar3 + 0x3cc) * 0x40;
  if (*(short *)(iVar3 + 0x3c8) < *(short *)(iVar3 + 0x3ca)) {
    return;
  }
  proc_7F03CB8C(param_1,auStack32);
  proc_7F03E3FC((int *)auStack32);
  lVar5 = (longlong)*ptr_list_object_lookup_indices;
  if (-1 < lVar5) {
    iVar6 = (int)*ptr_list_object_lookup_indices;
    psVar9 = ptr_list_object_lookup_indices;
    do {
      iVar6 = (iVar6 * 0x10 + (int)lVar5 * -4 + (int)lVar5) * 4;
      pcVar8 = pos_data_entry + iVar6;
      if (pcVar8 == *(char **)(iVar3 + 4)) {
        lVar5 = (longlong)psVar9[1];
      }
      else {
        if (*(short *)(pos_data_entry + iVar6 + 2) == 0) {
          cVar1 = *pcVar8;
          if (cVar1 == '\x01') {
            iVar6 = *(int *)(pos_data_entry + iVar6 + 4);
          }
          else {
            if ((cVar1 != '\x04') && (cVar1 != '\x02')) {
              if ((cVar1 == '\x03') || (cVar1 == '\x06')) {
                fVar11 = *(float *)(pos_data_entry + iVar6 + 8) - *(float *)(param_1 + 8);
                fVar12 = *(float *)(pos_data_entry + iVar6 + 0x10) - *(float *)(param_1 + 0x10);
                if (fVar11 <= in_a1_lo) {
                  if (-in_a1_lo <= fVar11) {
                    if (*(float *)(pos_data_entry + iVar6 + 0xc) - *(float *)(param_1 + 0xc) <=
                        in_a2_lo) {
                      if (-in_a2_lo <=
                          *(float *)(pos_data_entry + iVar6 + 0xc) - *(float *)(param_1 + 0xc)) {
                        if (fVar12 <= in_a1_lo) {
                          if (-in_a1_lo <= fVar12) {
                            if (cVar1 == '\x03') {
                              proc_7F027804();
                              lVar5 = (longlong)psVar9[1];
                            }
                            else {
                              if ((fVar11 != 0.00000000) || (fVar12 != 0.00000000)) {
                                sqrtf(fVar11 * fVar11 + fVar12 * fVar12);
                              }
                              playernum = get_cur_playernum();
                              lVar5 = proc_7F09B15C((int)pcVar8);
                              set_cur_player((int)lVar5);
                              get_num_players();
                              get_intank_flag();
                              record_damage_kills();
                              set_cur_player(playernum);
                              lVar5 = (longlong)psVar9[1];
                            }
                          }
                          else {
                            lVar5 = (longlong)psVar9[1];
                          }
                        }
                        else {
                          lVar5 = (longlong)psVar9[1];
                        }
                      }
                      else {
                        lVar5 = (longlong)psVar9[1];
                      }
                    }
                    else {
                      lVar5 = (longlong)psVar9[1];
                    }
                  }
                  else {
                    lVar5 = (longlong)psVar9[1];
                  }
                }
                else {
                  lVar5 = (longlong)psVar9[1];
                }
              }
              else {
                lVar5 = (longlong)psVar9[1];
              }
              goto LAB_7f09ce88;
            }
            iVar6 = *(int *)(pos_data_entry + iVar6 + 4);
          }
          fVar10 = *(float *)(iVar6 + 0x58) - *(float *)(param_1 + 8);
          fVar11 = *(float *)(iVar6 + 0x5c) - *(float *)(param_1 + 0xc);
          fVar12 = *(float *)(iVar6 + 0x60) - *(float *)(param_1 + 0x10);
          if (((((fVar10 <= in_a1_lo) && (-in_a1_lo <= fVar10)) && (fVar11 <= in_a2_lo)) &&
              ((-in_a2_lo <= fVar11 && (fVar12 <= in_a1_lo)))) && (-in_a1_lo <= fVar12)) {
            fVar10 = fVar10 / in_a1_lo;
            fVar13 = *(float *)(&DAT_800402c0 + iVar7);
            fVar11 = fVar11 / in_a2_lo;
            fVar12 = fVar12 / in_a1_lo;
            if (fVar10 < 0.00000000) {
              fVar10 = -fVar10;
            }
            if (fVar11 < 0.00000000) {
              fVar11 = -fVar11;
            }
            fVar11 = 1.00000000 - fVar11;
            if (fVar12 < 0.00000000) {
              fVar12 = -fVar12;
            }
            fVar12 = 1.00000000 - fVar12;
            if (1.00000000 - fVar10 <= fVar11) {
              fVar11 = 1.00000000 - fVar10;
            }
            if (fVar12 < fVar11) {
              uVar4 = *(uint *)(iVar6 + 100);
            }
            else {
              uVar4 = *(uint *)(iVar6 + 100);
              fVar12 = fVar11;
            }
            if (((uVar4 & 0x1000) == 0) && ((*(uint *)(iVar6 + 0xc) & 0x200400) == 0)) {
              playernum = get_random_value();
              fVar11 = (float)playernum;
              if ((int)playernum < 0) {
                fVar11 = fVar11 + 4294967296.00000000;
              }
              proc_7F04DEFC((int)pcVar8,extraout_f12,
                            (longlong)
                            (int)((fVar11 * 0.00000000 * 0.50000000 + 1.00000000) * fVar12 * fVar13)
                            ,(longlong)(iVar6 + 0x58),0x1d);
            }
          }
          lVar5 = (longlong)psVar9[1];
        }
        else {
          lVar5 = (longlong)psVar9[1];
        }
      }
LAB_7f09ce88:
      psVar9 = psVar9 + 1;
      if (lVar5 < 0) goto code_r0x7f09ce94;
      iVar6 = (int)lVar5;
    } while( true );
  }
  sVar2 = *(short *)(&DAT_800402a0 + iVar7);
LAB_7f09ce98:
  *(short *)(iVar3 + 0x3ca) = *(short *)(iVar3 + 0x3c8) + (sVar2 >> 2);
  return;
code_r0x7f09ce94:
  sVar2 = *(short *)(&DAT_800402a0 + iVar7);
  goto LAB_7f09ce98;
}



undefined8 proc_7F09CEE8(char *param_1)

{
  byte bVar1;
  short sVar2;
  short sVar3;
  undefined4 *puVar4;
  char *pcVar5;
  undefined8 uVar6;
  u32 uVar7;
  int iVar8;
  longlong lVar9;
  undefined4 uVar10;
  longlong lVar11;
  int iVar12;
  undefined4 *puVar13;
  int iVar14;
  float fVar15;
  int iVar16;
  float in_f12;
  float __x;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f14;
  float fVar17;
  float fVar18;
  float fVar19;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack48;
  int iStack44;
  float fStack40;
  
  puVar4 = *(undefined4 **)(param_1 + 4);
  iVar12 = (int)*(char *)(puVar4 + 0xf3) * 0x40;
  if (clock_timer == 0) {
    uVar6 = 0;
  }
  else {
    if (clock_timer < 0xf) {
      fStack40 = (float)clock_timer;
    }
    else {
      fStack40 = 15.00000000;
    }
    lVar9 = (longlong)*(short *)(puVar4 + 0xf2);
    if (7 < lVar9) {
      sVar2 = *(short *)(&DAT_800402a0 + iVar12);
      iVar14 = (int)sVar2;
      if (lVar9 < (longlong)sVar2) {
        fVar15 = (float)(int)*(short *)(puVar4 + 0xf2);
        fVar18 = *(float *)(&DAT_80040284 + iVar12) + *(float *)(&DAT_8004028c + iVar12) * fVar15;
        fVar19 = *(float *)(&DAT_80040288 + iVar12) + *(float *)(&DAT_80040290 + iVar12) * fVar15;
        if (*(char *)(puVar4 + 0xf3) == '\x0e') {
          if (lVar9 < 0x20) {
            *(float *)(param_1 + 0xc) = *(float *)(param_1 + 0xc) + fStack40 * 10.00000000;
            lVar9 = (longlong)*(short *)(puVar4 + 0xf2);
            sVar2 = *(short *)(&DAT_800402a0 + iVar12);
            fVar15 = (float)(int)*(short *)(puVar4 + 0xf2);
          }
          iVar14 = (int)sVar2;
          if (0x20 < lVar9) {
            fVar19 = 20.00000000;
            fVar18 = fVar15 * 3.00000000 + 40.00000000;
            if (300.00000000 < fVar18) {
              fVar18 = 300.00000000;
            }
          }
        }
        iVar16 = 0;
        iStack44 = (int)(((float)(int)*(short *)(&DAT_800402a2 + iVar12) * fVar15) / (float)iVar14)
                   + 1;
        if (0 < iStack44) {
          do {
            iVar14 = 0;
            puVar13 = puVar4;
            do {
              iVar14 += 0x18;
              if (*(short *)(puVar13 + 7) == 0) {
                *(undefined2 *)(puVar13 + 7) = 1;
                uVar7 = get_random_value();
                fVar15 = (float)uVar7;
                if ((int)uVar7 < 0) {
                  fVar15 = fVar15 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 2) =
                     (fVar15 * 0.00000000 - 0.50000000) * fVar18 + *(float *)(param_1 + 8);
                uVar7 = get_random_value();
                fVar15 = (float)uVar7;
                if ((int)uVar7 < 0) {
                  fVar15 = fVar15 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 3) =
                     (fVar15 * 0.00000000 - 0.50000000) * fVar19 + *(float *)(param_1 + 0xc);
                uVar7 = get_random_value();
                fVar15 = (float)uVar7;
                if ((int)uVar7 < 0) {
                  fVar15 = fVar15 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 4) =
                     (fVar15 * 0.00000000 - 0.50000000) * fVar18 + *(float *)(param_1 + 0x10);
                uVar7 = get_random_value();
                fVar15 = (float)uVar7;
                if ((int)uVar7 < 0) {
                  fVar15 = fVar15 + 4294967296.00000000;
                }
                fVar17 = (fVar15 * 0.00000000 * 0.50000000 + 1.00000000) *
                         *(float *)(&DAT_80040294 + iVar12);
                uVar7 = get_random_value();
                fVar15 = (float)uVar7;
                if ((int)uVar7 < 0) {
                  fVar15 = fVar15 + 4294967296.00000000;
                }
                __x = fVar15 * 0.00000000 * flt_800576BC;
                fVar15 = cosf(__x);
                *(float *)(puVar13 + 5) = fVar15 * fVar17;
                fVar15 = sinf(__x);
                *(float *)(puVar13 + 6) = fVar15 * fVar17;
                in_f12 = extraout_f12;
                break;
              }
              puVar13 = puVar13 + 6;
            } while (iVar14 != 0x3c0);
            iVar16 += 1;
          } while (iVar16 != iStack44);
        }
        fStack60 = fVar18 * 0.50000000 + *(float *)(&DAT_80040294 + iVar12) * 1.50000000;
        fStack56 = *(float *)(param_1 + 8) - fStack60;
        fStack64 = fVar19 * 0.50000000 + *(float *)(&DAT_80040294 + iVar12) * 1.50000000;
        fStack52 = *(float *)(param_1 + 0xc) - fStack64;
        fStack48 = *(float *)(param_1 + 0x10) - fStack60;
        fStack68 = *(float *)(param_1 + 8) + fStack60;
        fStack64 = *(float *)(param_1 + 0xc) + fStack64;
        fStack60 = *(float *)(param_1 + 0x10) + fStack60;
        proc_7F03E27C(param_1,&fStack56,&fStack68,in_f12);
        proc_7F09C9D8(param_1,extraout_f12_00,extraout_f14);
        lVar9 = (longlong)*(short *)(puVar4 + 0xf2);
        in_f12 = extraout_f12_01;
      }
    }
    iVar16 = (int)fStack40;
    iVar14 = 0;
    if (0 < iVar16) {
      uVar10 = (undefined4)lVar9;
      do {
        *(short *)(puVar4 + 0xf2) = (short)uVar10 + 1;
        iVar8 = 0;
        puVar13 = puVar4;
        do {
          iVar8 += 0x18;
          if (0 < *(short *)(puVar13 + 7)) {
            *(short *)(puVar13 + 7) = *(short *)(puVar13 + 7) + 1;
          }
          puVar13 = puVar13 + 6;
        } while (iVar8 != 0x3c0);
        lVar9 = (longlong)*(short *)(puVar4 + 0xf2);
        if (lVar9 == 0xf) {
          if (*(char *)(puVar4 + 0xf3) != '\x0e') {
            sVar2 = *(short *)(&DAT_800402a0 + iVar12);
            goto LAB_7f09d360;
          }
          pcVar5 = (char *)puVar4[1];
LAB_7f09d37c:
          if (pcVar5 == NULL) {
            bVar1 = param_1[1];
LAB_7f09d400:
            proc_7F09E700((undefined4 *)(param_1 + 8),*(undefined4 *)(param_1 + 0x14),
                          (ushort)(byte)(&DAT_800402bc)[iVar12],param_1 + 0x2c,
                          (uint)((bVar1 & 8) != 0));
            sVar2 = *(short *)(puVar4 + 0xf2);
            sVar3 = *(short *)(&DAT_800402a0 + iVar12);
            in_f12 = extraout_f12_04;
          }
          else {
            iVar8 = *(int *)(pcVar5 + 0x14);
            if (iVar8 == 0) {
              bVar1 = param_1[1];
              goto LAB_7f09d400;
            }
            if (*pcVar5 == '\x01') {
              proc_7F09E700((undefined4 *)(*(int *)(pcVar5 + 4) + 0x58),iVar8,
                            (ushort)(byte)(&DAT_800402bc)[iVar12],pcVar5 + 0x2c,
                            (uint)((param_1[1] & 8U) != 0));
              sVar2 = *(short *)(puVar4 + 0xf2);
              in_f12 = extraout_f12_02;
            }
            else {
              proc_7F09E700((undefined4 *)(pcVar5 + 8),iVar8,(ushort)(byte)(&DAT_800402bc)[iVar12],
                            pcVar5 + 0x2c,(uint)((param_1[1] & 8U) != 0));
              sVar2 = *(short *)(puVar4 + 0xf2);
              in_f12 = extraout_f12_03;
            }
            sVar3 = *(short *)(&DAT_800402a0 + iVar12);
          }
          lVar9 = (longlong)sVar2;
          lVar11 = (longlong)((int)sVar3 >> 1);
        }
        else {
          sVar2 = *(short *)(&DAT_800402a0 + iVar12);
LAB_7f09d360:
          if ((longlong)sVar2 == (longlong)((int)*(short *)(puVar4 + 0xf2) + 0x14)) {
            if (*(char *)(puVar4 + 0xf3) != '\x0e') {
              pcVar5 = (char *)puVar4[1];
              goto LAB_7f09d37c;
            }
            lVar11 = (longlong)((int)sVar2 >> 1);
          }
          else {
            lVar11 = (longlong)((int)sVar2 >> 1);
          }
        }
        if ((lVar11 == lVar9) && (*(char *)((int)puVar4 + 0x3cd) != '\0')) {
          proc_7F0A027C((float *)(puVar4 + 0xf4),in_f12,
                        SUB42(*(float *)(&DAT_80040294 + iVar12) * 4.00000000,0));
          lVar9 = (longlong)*(short *)(puVar4 + 0xf2);
          in_f12 = extraout_f12_05;
        }
        iVar14 += 1;
        if (iVar14 == iVar16) break;
        uVar10 = (undefined4)lVar9;
      } while( true );
    }
    uVar6 = 0;
    if ((longlong)
        ((int)*(short *)(&DAT_800402a0 + iVar12) +
        (int)(*(float *)(&DAT_800402a4 + iVar12) * 16.00000000)) <= lVar9) {
      *puVar4 = 0;
      uVar6 = 1;
    }
  }
  return uVar6;
}



undefined8 proc_7F09D4EC(int param_1)

{
  int iVar1;
  float fVar2;
  
  iVar1 = proc_7F0783C4();
  *(float *)(param_1 + 0x18) =
       -(*(float *)(iVar1 + 0x38) +
        *(float *)(iVar1 + 8) * *(float *)(param_1 + 8) +
        *(float *)(iVar1 + 0x18) * *(float *)(param_1 + 0xc) +
        *(float *)(iVar1 + 0x28) * *(float *)(param_1 + 0x10));
  fVar2 = *(float *)(param_1 + 0x18);
  if (fVar2 < 100.00000000) {
    *(float *)(param_1 + 0x18) = fVar2 * 0.50000000;
  }
  else {
    *(float *)(param_1 + 0x18) = fVar2 - 100.00000000;
  }
  return 0;
}



longlong proc_7F09D5A0(char *param_1,longlong param_2,longlong param_3)

{
  byte bVar1;
  short sVar2;
  float *pfVar4;
  longlong lVar3;
  uint *puVar5;
  void *virtualAddress;
  u32 uVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  float extraout_f12;
  float extraout_f14;
  float fStack32;
  float fStack28;
  
  bVar1 = param_1[0x2c];
  iVar10 = *(int *)(param_1 + 4);
  pfVar4 = (float *)proc_7F0BCA14((uint)bVar1);
  if (param_3 != 0) {
    lVar3 = proc_7F054A64(param_1,&fStack32);
    if (lVar3 < 1) {
      puVar5 = proc_7F0B4FB4((uint *)param_2);
    }
    else {
      puVar5 = proc_7F0B4FF4((uint *)param_2,extraout_f12,extraout_f14,fStack32,fStack28);
    }
    *puVar5 = 0xb6000000;
    puVar5[1] = 0x13000;
    puVar5[2] = 0x1030040;
    virtualAddress = (void *)proc_7F078394();
    uVar6 = osVirtualToPhysical(virtualAddress);
    puVar5[3] = uVar6;
    puVar7 = proc_7F0BC9C4(puVar5 + 4,(uint)bVar1);
    *puVar7 = 0xbc000806;
    puVar8 = puVar7 + 2;
    uVar6 = osVirtualToPhysical(ptr_explosionDL);
    puVar7[1] = uVar6;
    puVar7 = &DAT_800407fc;
    iVar12 = 0xe;
    do {
      *puVar8 = 0x6000000;
      iVar11 = 0;
      puVar8[1] = *puVar7;
      puVar8 = puVar8 + 2;
      iVar9 = iVar10;
      do {
        if ((0 < *(short *)(iVar9 + 0x1c)) &&
           (iVar12 == (int)((float)((int)*(short *)(iVar9 + 0x1c) + -1) /
                           *(float *)(&DAT_800402a4 + (int)*(char *)(iVar10 + 0x3cc) * 0x40)))) {
          puVar8 = proc_7F09D82C((float *)(iVar9 + 8),puVar8,pfVar4);
        }
        iVar11 += 0x18;
        iVar9 += 0x18;
      } while (iVar11 < 0x3c0);
      iVar12 += -1;
      puVar7 = puVar7 + -1;
    } while (-1 < iVar12);
    *puVar8 = 0x1030040;
    param_2 = (longlong)(int)(puVar8 + 2);
    virtualAddress = (void *)proc_7F078374();
    uVar6 = osVirtualToPhysical(virtualAddress);
    puVar8[1] = uVar6;
    iVar12 = 0;
    lVar3 = (longlong)
            (int)(*(float *)(&DAT_800402a4 + (int)*(char *)(iVar10 + 0x3cc) * 0x40) * 15.00000000);
    do {
      iVar12 += 0x60;
      if (lVar3 < (longlong)*(short *)(iVar10 + 0x1c)) {
        *(undefined2 *)(iVar10 + 0x1c) = 0;
        sVar2 = *(short *)(iVar10 + 0x34);
      }
      else {
        sVar2 = *(short *)(iVar10 + 0x34);
      }
      if (lVar3 < (longlong)sVar2) {
        *(undefined2 *)(iVar10 + 0x34) = 0;
        sVar2 = *(short *)(iVar10 + 0x4c);
      }
      else {
        sVar2 = *(short *)(iVar10 + 0x4c);
      }
      if (lVar3 < (longlong)sVar2) {
        *(undefined2 *)(iVar10 + 0x4c) = 0;
        sVar2 = *(short *)(iVar10 + 100);
      }
      else {
        sVar2 = *(short *)(iVar10 + 100);
      }
      if (lVar3 < (longlong)sVar2) {
        *(undefined2 *)(iVar10 + 100) = 0;
      }
      iVar10 += 0x60;
    } while (iVar12 != 0x3c0);
  }
  return param_2;
}



undefined4 * proc_7F09D82C(float *param_1,undefined4 *param_2,float *param_3)

{
  float *pfVar1;
  xyzpoint *pxVar2;
  xyzpoint *virtualAddress;
  u32 uVar3;
  float fVar4;
  f32 fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  
  fVar8 = dword_8004090C;
  fVar7 = DAT_80040908;
  fVar6 = DAT_80040904;
  fVar10 = DAT_80040900;
  pfVar1 = (float *)proc_7F078444();
  pxVar2 = get_BONDdata_position();
  fVar20 = *param_1 - pxVar2->x;
  fVar21 = param_1[1] - pxVar2->y;
  fVar22 = param_1[2] - pxVar2->z;
  virtualAddress = pxVar2;
  fVar4 = sqrtf(fVar20 * fVar20 + fVar21 * fVar21 + fVar22 * fVar22);
  fVar11 = 100.00000000;
  if (fVar4 * 0.50000000 <= 100.00000000) {
    fVar11 = fVar4 * 0.50000000;
  }
  if (fVar4 == 0.00000000) {
    fVar4 = 0.00000000;
    fVar11 = param_1[3];
  }
  else {
    fVar4 = (fVar4 - fVar11) / fVar4;
    fVar11 = param_1[3];
  }
  fVar11 = fVar11 * fVar4;
  fVar19 = param_1[4] * fVar4;
  fVar12 = pxVar2->x + fVar20 * fVar4;
  fVar20 = pxVar2->y + fVar21 * fVar4;
  fVar4 = pxVar2->z + fVar22 * fVar4;
  proc_7F0BD6C4(4);
  virtualAddress->x = fVar10;
  virtualAddress->y = fVar6;
  virtualAddress->z = fVar7;
  virtualAddress[1].x = fVar8;
  virtualAddress[1].y = fVar10;
  virtualAddress[1].z = fVar6;
  virtualAddress[2].x = fVar7;
  virtualAddress[2].y = fVar8;
  virtualAddress[2].z = fVar10;
  virtualAddress[3].x = fVar6;
  virtualAddress[3].y = fVar7;
  virtualAddress[3].z = fVar8;
  virtualAddress[4].x = fVar10;
  virtualAddress[4].y = fVar6;
  virtualAddress[4].z = fVar7;
  virtualAddress[5].x = fVar8;
  virtualAddress[5].y = fVar10;
  virtualAddress[5].z = fVar6;
  virtualAddress[6].x = fVar7;
  virtualAddress[6].y = fVar8;
  fVar6 = *pfVar1;
  fVar13 = pfVar1[1];
  fVar7 = pfVar1[2];
  fVar14 = *pfVar1;
  fVar8 = pfVar1[1];
  fVar15 = pfVar1[2];
  fVar21 = pfVar1[4];
  fVar16 = pfVar1[5];
  fVar22 = pfVar1[6];
  fVar17 = pfVar1[4];
  fVar9 = pfVar1[5];
  fVar18 = pfVar1[6];
  fVar5 = proc_7F0B483C();
  *(short *)&virtualAddress->x =
       (short)(int)(((fVar12 - fVar6 * fVar11) - fVar17 * fVar19) * (float)fVar5 - *param_3);
  fVar5 = proc_7F0B483C();
  *(undefined2 *)((int)&virtualAddress->x + 2) =
       (short)(int)(((fVar20 - fVar13 * fVar11) - fVar9 * fVar19) * (float)fVar5 - param_3[1]);
  fVar5 = proc_7F0B483C();
  fVar10 = param_3[2];
  *(undefined2 *)&virtualAddress->z = 0x6e0;
  *(undefined2 *)((int)&virtualAddress->z + 2) = 0;
  *(short *)&virtualAddress->y =
       (short)(int)(((fVar4 - fVar7 * fVar11) - fVar18 * fVar19) * (float)fVar5 - fVar10);
  fVar5 = proc_7F0B483C();
  *(short *)&virtualAddress[1].y =
       (short)(int)(((fVar12 + fVar14 * fVar19) - fVar21 * fVar11) * (float)fVar5 - *param_3);
  fVar5 = proc_7F0B483C();
  *(undefined2 *)((int)&virtualAddress[1].y + 2) =
       (short)(int)(((fVar20 + fVar8 * fVar19) - fVar16 * fVar11) * (float)fVar5 - param_3[1]);
  fVar5 = proc_7F0B483C();
  fVar10 = param_3[2];
  *(undefined2 *)&virtualAddress[2].x = 0;
  *(undefined2 *)((int)&virtualAddress[2].x + 2) = 0;
  *(short *)&virtualAddress[1].z =
       (short)(int)(((fVar4 + fVar15 * fVar19) - fVar22 * fVar11) * (float)fVar5 - fVar10);
  fVar5 = proc_7F0B483C();
  *(short *)&virtualAddress[2].z =
       (short)(int)((fVar12 + fVar6 * fVar11 + fVar17 * fVar19) * (float)fVar5 - *param_3);
  fVar5 = proc_7F0B483C();
  *(undefined2 *)((int)&virtualAddress[2].z + 2) =
       (short)(int)((fVar20 + fVar13 * fVar11 + fVar9 * fVar19) * (float)fVar5 - param_3[1]);
  fVar5 = proc_7F0B483C();
  fVar10 = param_3[2];
  *(undefined2 *)&virtualAddress[3].y = 0;
  *(undefined2 *)((int)&virtualAddress[3].y + 2) = 0x6e0;
  *(short *)&virtualAddress[3].x =
       (short)(int)((fVar4 + fVar7 * fVar11 + fVar18 * fVar19) * (float)fVar5 - fVar10);
  fVar5 = proc_7F0B483C();
  *(short *)&virtualAddress[4].x =
       (short)(int)(((fVar12 - fVar14 * fVar19) + fVar21 * fVar11) * (float)fVar5 - *param_3);
  fVar5 = proc_7F0B483C();
  *(undefined2 *)((int)&virtualAddress[4].x + 2) =
       (short)(int)(((fVar20 - fVar8 * fVar19) + fVar16 * fVar11) * (float)fVar5 - param_3[1]);
  fVar5 = proc_7F0B483C();
  fVar10 = param_3[2];
  *(undefined2 *)&virtualAddress[4].z = 0x6e0;
  *(undefined2 *)((int)&virtualAddress[4].z + 2) = 0x6e0;
  *(short *)&virtualAddress[4].y =
       (short)(int)(((fVar4 - fVar15 * fVar19) + fVar22 * fVar11) * (float)fVar5 - fVar10);
  *param_2 = 0x4300040;
  uVar3 = osVirtualToPhysical(virtualAddress);
  param_2[1] = uVar3;
  param_2[3] = 0x2010;
  param_2[2] = 0xb1000032;
  return param_2 + 4;
}



undefined4 * proc_7F09DDA4(int param_1,float *param_2,undefined4 *param_3,float *param_4)

{
  float *pfVar1;
  xyzpoint *pxVar2;
  xyzpoint *virtualAddress;
  u32 uVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  f32 fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  undefined uStack97;
  
  fVar7 = dword_8004091C;
  fVar6 = dword_80040918;
  fVar5 = dword_80040914;
  fVar4 = dword_80040910;
  pfVar1 = (float *)proc_7F078444();
  pxVar2 = get_BONDdata_position();
  if ((short)(&WORD_8004017e)[(int)*(short *)(param_1 + 6) * 0xc] < *(short *)(param_2 + 9)) {
    fVar17 = param_2[8];
    if (false) {
      fVar14 = ROUND(fVar17);
    }
    else {
      fVar14 = FLOOR(fVar17);
    }
    uStack97 = (undefined)(int)fVar14;
    if (false) {
      if (false) {
        fVar17 = ROUND(fVar17 - 2147483648.00000000);
      }
      else {
        fVar17 = FLOOR(fVar17 - 2147483648.00000000);
      }
      if (true) {
        uStack97 = (undefined)(int)fVar17;
        goto LAB_7f09df7c;
      }
    }
    else {
      if (-1 < (int)fVar14) goto LAB_7f09df7c;
    }
    uStack97 = 0xff;
  }
  else {
    fVar17 = (param_2[8] / (float)(int)(short)(&WORD_8004017e)[(int)*(short *)(param_1 + 6) * 0xc])
             * (float)(int)*(short *)(param_2 + 9);
    if (false) {
      fVar14 = ROUND(fVar17);
    }
    else {
      fVar14 = FLOOR(fVar17);
    }
    uStack97 = (undefined)(int)fVar14;
    if (false) {
      if (false) {
        fVar17 = ROUND(fVar17 - 2147483648.00000000);
      }
      else {
        fVar17 = FLOOR(fVar17 - 2147483648.00000000);
      }
      if (true) {
        uStack97 = (undefined)(int)fVar17;
        goto LAB_7f09df7c;
      }
    }
    else {
      if (-1 < (int)fVar14) goto LAB_7f09df7c;
    }
    uStack97 = 0xff;
  }
LAB_7f09df7c:
  virtualAddress = pxVar2;
  proc_7F0BD6C4(4);
  virtualAddress->x = fVar4;
  virtualAddress->y = fVar5;
  virtualAddress->z = fVar6;
  virtualAddress[1].x = fVar7;
  virtualAddress[1].y = fVar4;
  virtualAddress[1].z = fVar5;
  virtualAddress[2].x = fVar6;
  virtualAddress[2].y = fVar7;
  virtualAddress[2].z = fVar4;
  virtualAddress[3].x = fVar5;
  virtualAddress[3].y = fVar6;
  virtualAddress[3].z = fVar7;
  virtualAddress[4].x = fVar4;
  virtualAddress[4].y = fVar5;
  virtualAddress[4].z = fVar6;
  virtualAddress[5].x = fVar7;
  fVar4 = cosf(param_2[4]);
  fVar14 = param_2[3];
  fVar5 = sinf(param_2[4]);
  fVar17 = param_2[3];
  fVar6 = sinf(param_2[6]);
  fVar15 = *param_2;
  fVar18 = param_2[1];
  fVar7 = sinf(param_2[7]);
  fVar15 = (fVar6 * 7.00000000 + fVar15) - pxVar2->x;
  fVar18 = fVar18 - pxVar2->y;
  fVar7 = (fVar7 * 7.00000000 + param_2[2]) - pxVar2->z;
  fVar6 = sqrtf(fVar15 * fVar15 + fVar18 * fVar18 + fVar7 * fVar7);
  if (fVar6 <= flt_800576C0) {
    fVar9 = 100.00000000;
    if (fVar6 * 0.50000000 <= 100.00000000) {
      fVar9 = fVar6 * 0.50000000;
    }
    if (fVar6 == 0.00000000) {
      fVar6 = 0.00000000;
    }
    else {
      fVar6 = (fVar6 - fVar9) / fVar6;
    }
    fVar22 = fVar4 * fVar14 * fVar6;
    fVar24 = fVar5 * fVar17 * fVar6;
    fVar16 = pxVar2->x + fVar15 * fVar6;
    fVar19 = pxVar2->y + fVar18 * fVar6;
    fVar20 = pxVar2->z + fVar7 * fVar6;
    fVar18 = *pfVar1;
    fVar5 = pfVar1[1];
    fVar9 = pfVar1[2];
    fVar6 = *pfVar1;
    fVar10 = pfVar1[1];
    fVar7 = pfVar1[2];
    fVar11 = pfVar1[4];
    fVar17 = pfVar1[5];
    fVar12 = pfVar1[6];
    fVar14 = pfVar1[4];
    fVar13 = pfVar1[5];
    fVar15 = pfVar1[6];
    fVar8 = proc_7F0B483C();
    fVar4 = (((fVar16 - fVar18 * fVar22) - fVar14 * fVar24) * (float)fVar8 - *param_4) * 10.00000000
    ;
    fVar8 = proc_7F0B483C();
    fVar21 = (((fVar19 - fVar5 * fVar22) - fVar13 * fVar24) * (float)fVar8 - param_4[1]) *
             10.00000000;
    fVar8 = proc_7F0B483C();
    fVar23 = (((fVar20 - fVar9 * fVar22) - fVar15 * fVar24) * (float)fVar8 - param_4[2]) *
             10.00000000;
    if ((((fVar4 <= flt_800576C4) && (flt_800576C8 <= fVar4)) && (fVar21 <= flt_800576C4)) &&
       (((flt_800576C8 <= fVar21 && (fVar23 <= flt_800576C4)) && (flt_800576C8 <= fVar23)))) {
      *(undefined2 *)&virtualAddress->z = 0x6e0;
      *(undefined2 *)((int)&virtualAddress->z + 2) = 0;
      *(short *)&virtualAddress->x = (short)(int)fVar4;
      *(undefined2 *)((int)&virtualAddress->x + 2) = (short)(int)fVar21;
      *(short *)&virtualAddress->y = (short)(int)fVar23;
      *(byte *)&virtualAddress[1].x = (&dword_80040188)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[1].x + 1) =
           (&BYTE_80040189)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[1].x + 2) =
           (&BYTE_8004018a)[(int)*(short *)(param_1 + 6) * 0x18];
      *(undefined *)((int)&virtualAddress[1].x + 3) = uStack97;
      fVar8 = proc_7F0B483C();
      *(short *)&virtualAddress[1].y =
           (short)(int)((((fVar16 + fVar6 * fVar24) - fVar11 * fVar22) * (float)fVar8 - *param_4) *
                       10.00000000);
      fVar8 = proc_7F0B483C();
      *(undefined2 *)((int)&virtualAddress[1].y + 2) =
           (short)(int)((((fVar19 + fVar10 * fVar24) - fVar17 * fVar22) * (float)fVar8 - param_4[1])
                       * 10.00000000);
      fVar8 = proc_7F0B483C();
      fVar4 = param_4[2];
      *(undefined2 *)&virtualAddress[2].x = 0;
      *(undefined2 *)((int)&virtualAddress[2].x + 2) = 0;
      *(short *)&virtualAddress[1].z =
           (short)(int)((((fVar20 + fVar7 * fVar24) - fVar12 * fVar22) * (float)fVar8 - fVar4) *
                       10.00000000);
      *(byte *)&virtualAddress[2].y = (&dword_80040188)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[2].y + 1) =
           (&BYTE_80040189)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[2].y + 2) =
           (&BYTE_8004018a)[(int)*(short *)(param_1 + 6) * 0x18];
      *(undefined *)((int)&virtualAddress[2].y + 3) = uStack97;
      fVar8 = proc_7F0B483C();
      *(short *)&virtualAddress[2].z =
           (short)(int)(((fVar16 + fVar18 * fVar22 + fVar14 * fVar24) * (float)fVar8 - *param_4) *
                       10.00000000);
      fVar8 = proc_7F0B483C();
      *(undefined2 *)((int)&virtualAddress[2].z + 2) =
           (short)(int)(((fVar19 + fVar5 * fVar22 + fVar13 * fVar24) * (float)fVar8 - param_4[1]) *
                       10.00000000);
      fVar8 = proc_7F0B483C();
      fVar4 = param_4[2];
      *(undefined2 *)&virtualAddress[3].y = 0;
      *(undefined2 *)((int)&virtualAddress[3].y + 2) = 0x6e0;
      *(short *)&virtualAddress[3].x =
           (short)(int)(((fVar20 + fVar9 * fVar22 + fVar15 * fVar24) * (float)fVar8 - fVar4) *
                       10.00000000);
      *(byte *)&virtualAddress[3].z = (&dword_80040188)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[3].z + 1) =
           (&BYTE_80040189)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[3].z + 2) =
           (&BYTE_8004018a)[(int)*(short *)(param_1 + 6) * 0x18];
      *(undefined *)((int)&virtualAddress[3].z + 3) = uStack97;
      fVar8 = proc_7F0B483C();
      *(short *)&virtualAddress[4].x =
           (short)(int)((((fVar16 - fVar6 * fVar24) + fVar11 * fVar22) * (float)fVar8 - *param_4) *
                       10.00000000);
      fVar8 = proc_7F0B483C();
      *(undefined2 *)((int)&virtualAddress[4].x + 2) =
           (short)(int)((((fVar19 - fVar10 * fVar24) + fVar17 * fVar22) * (float)fVar8 - param_4[1])
                       * 10.00000000);
      fVar8 = proc_7F0B483C();
      fVar4 = param_4[2];
      *(undefined2 *)&virtualAddress[4].z = 0x6e0;
      *(undefined2 *)((int)&virtualAddress[4].z + 2) = 0x6e0;
      *(short *)&virtualAddress[4].y =
           (short)(int)((((fVar20 - fVar7 * fVar24) + fVar12 * fVar22) * (float)fVar8 - fVar4) *
                       10.00000000);
      *(byte *)&virtualAddress[5].x = (&dword_80040188)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[5].x + 1) =
           (&BYTE_80040189)[(int)*(short *)(param_1 + 6) * 0x18];
      *(byte *)((int)&virtualAddress[5].x + 2) =
           (&BYTE_8004018a)[(int)*(short *)(param_1 + 6) * 0x18];
      *(undefined *)((int)&virtualAddress[5].x + 3) = uStack97;
      *param_3 = 0x4300040;
      uVar3 = osVirtualToPhysical(virtualAddress);
      param_3[1] = uVar3;
      param_3[3] = 0x2010;
      param_3[2] = 0xb1000032;
      param_3 = param_3 + 4;
    }
  }
  return param_3;
}



void proc_7F09E700(undefined4 *param_1,int param_2,short param_3,char *param_4,int param_5)

{
  char *pcVar1;
  byte bVar2;
  short sVar3;
  ulonglong uVar4;
  object_standard *poVar5;
  object_standard *poVar6;
  int iVar7;
  int iVar8;
  object_standard *poVar9;
  
  uVar4 = get_num_players();
  poVar9 = NULL;
  iVar8 = 0;
  do {
    iVar7 = iVar8 + DAT_8007a140;
    if (*(int *)(DAT_8007a140 + iVar8) == 0) {
      poVar9 = (object_standard *)(iVar8 + DAT_8007a140);
      break;
    }
    iVar8 += 0x198;
    if ((((1 < (longlong)uVar4) && (sVar3 = *(short *)(iVar7 + 6), sVar3 != 7)) && (sVar3 != 8)) &&
       (sVar3 != 9)) {
      *(word *)(iVar7 + 4) = (&WORD_8004017c)[(int)sVar3 * 0xc];
    }
  } while (iVar8 < 0x1fe0);
  if ((poVar9 != NULL) && (poVar5 = remove_last_obj_pos_data_entry(), poVar5 != NULL)) {
    bVar2 = *(byte *)((int)&poVar5->scale + 1);
    *(undefined *)&poVar5->scale = 8;
    *(byte *)((int)&poVar5->scale + 1) = bVar2 | 2;
    *(object_standard **)&poVar5->objectID = poVar9;
    iVar8 = 0;
    poVar5->runtime_ptr_obj_instance_controller = param_2;
    *(undefined4 *)&poVar5->FLAGS1 = *param_1;
    *(undefined4 *)&poVar5->FLAGS5 = param_1[1];
    poVar5->runtime_ptr_obj_posdata = param_1[2];
    if (*param_4 != -1) {
      *(char *)&poVar5->runtime_MATRIX5 = *param_4;
      poVar6 = poVar5;
      while( true ) {
        pcVar1 = param_4 + 1;
        iVar8 += 1;
        param_4 = param_4 + 1;
        if ((*pcVar1 == -1) || (iVar8 == 7)) break;
        *(char *)((int)&poVar6->runtime_MATRIX5 + 1) = *pcVar1;
        poVar6 = (object_standard *)((int)&poVar6->scale + 1);
      }
    }
    *(undefined *)((int)&poVar5->runtime_MATRIX5 + iVar8) = 0xff;
    if (param_5 != 0) {
      *(byte *)((int)&poVar5->scale + 1) = *(byte *)((int)&poVar5->scale + 1) | 8;
    }
    proc_7F03A4F0((int)poVar5);
    set_stateflag_0x04_for_posdata((int)poVar5);
    poVar9->objectID = 0;
    *(object_standard **)poVar9 = poVar5;
    poVar9->presetID = param_3;
  }
  return;
}



undefined8 proc_7F09E8AC(char *param_1)

{
  short sVar1;
  word wVar2;
  undefined4 *puVar3;
  bool bVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  undefined8 uVar8;
  u32 uVar9;
  float *pfVar10;
  float *pfVar11;
  undefined4 *puVar12;
  undefined4 *puVar13;
  int iVar14;
  int iVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  
  fVar7 = flt_800576D8;
  fVar6 = flt_800576D4;
  fVar5 = flt_800576D0;
  fVar17 = flt_800576CC;
  puVar3 = *(undefined4 **)(param_1 + 4);
  if (clock_timer == 0) {
    uVar8 = 0;
  }
  else {
    if (clock_timer < 0xf) {
      fVar16 = (float)clock_timer;
    }
    else {
      fVar16 = 15.00000000;
    }
    iVar15 = 0;
    if (0 < (int)fVar16) {
      sVar1 = *(short *)(puVar3 + 1);
      do {
        iVar14 = 0;
        *(short *)(puVar3 + 1) = sVar1 + 1;
        puVar13 = puVar3;
        do {
          if ((float)puVar13[5] != 0.00000000) {
            *(float *)(puVar13 + 3) = (float)puVar13[3] + fVar5;
            *(float *)(puVar13 + 5) = (float)puVar13[5] + fVar17;
            fVar18 = (&FLOAT_8004018c)[(int)*(short *)((int)puVar3 + 6) * 6];
            *(short *)(puVar13 + 0xb) = *(short *)(puVar13 + 0xb) + 1;
            *(float *)(puVar13 + 6) = (float)puVar13[6] + (float)puVar13[7];
            *(float *)(puVar13 + 10) = (float)puVar13[10] - fVar18;
            uVar9 = get_random_value();
            fVar18 = (float)uVar9;
            if ((int)uVar9 < 0) {
              fVar18 = fVar18 + 4294967296.00000000;
            }
            *(float *)(puVar13 + 8) = (float)puVar13[8] + fVar7 + fVar18 * 0.00000000 * fVar6;
            uVar9 = get_random_value();
            fVar18 = (float)uVar9;
            if ((int)uVar9 < 0) {
              fVar18 = fVar18 + 4294967296.00000000;
            }
            *(float *)(puVar13 + 9) = (float)puVar13[9] + fVar7 + fVar18 * 0.00000000 * fVar6;
            if ((float)puVar13[10] < 4.00000000) {
              puVar13[5] = 0;
            }
          }
          iVar14 += 0x28;
          puVar13 = puVar13 + 10;
        } while (iVar14 < 400);
        sVar1 = *(short *)(puVar3 + 1);
        if ((longlong)sVar1 <
            (longlong)(short)(&WORD_8004017c)[(int)*(short *)((int)puVar3 + 6) * 0xc]) {
          wVar2 = (&WORD_80040180)[(int)*(short *)((int)puVar3 + 6) * 0xc];
          iVar14 = 0;
          if (wVar2 == 0) {
            trap(0x1c00);
          }
          if ((wVar2 == 0xffff) && ((longlong)sVar1 == -0x80000000)) {
            trap(0x1800);
          }
          puVar13 = puVar3;
          if ((int)sVar1 % (int)(short)wVar2 == 1) {
            do {
              iVar14 += 0x28;
              if ((float)puVar13[5] == 0.00000000) {
                uVar9 = get_random_value();
                fVar18 = (float)uVar9;
                if ((int)uVar9 < 0) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 5) =
                     (fVar18 * 0.00000000 * 0.50000000 + 1.00000000) *
                     (float)(int)(short)(&WORD_80040182)[(int)*(short *)((int)puVar3 + 6) * 0xc];
                uVar9 = get_random_value();
                fVar18 = (float)(uVar9 % 0x46);
                if (false) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(undefined2 *)(puVar13 + 0xb) = 0;
                *(float *)(puVar13 + 10) = fVar18 + 110.00000000;
                uVar9 = get_random_value();
                fVar18 = (float)uVar9;
                if ((int)uVar9 < 0) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 6) = fVar18 * 0.00000000 * flt_800576DC;
                uVar9 = get_random_value();
                fVar18 = (float)uVar9;
                if ((int)uVar9 < 0) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 7) =
                     (float)(&DWORD_80040184)[(int)*(short *)((int)puVar3 + 6) * 6] *
                     (0.50000000 - fVar18 * 0.00000000);
                puVar13[2] = *(undefined4 *)(param_1 + 8);
                puVar13[3] = *(undefined4 *)(param_1 + 0xc);
                puVar13[4] = *(undefined4 *)(param_1 + 0x10);
                uVar9 = get_random_value();
                fVar18 = (float)uVar9;
                if ((int)uVar9 < 0) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 8) = fVar18 * 0.00000000 * 0.50000000;
                uVar9 = get_random_value();
                fVar18 = (float)uVar9;
                if ((int)uVar9 < 0) {
                  fVar18 = fVar18 + 4294967296.00000000;
                }
                *(float *)(puVar13 + 9) = fVar18 * 0.00000000 * 0.50000000;
                if ((longlong)
                    ((int)(short)(&WORD_8004017c)[(int)*(short *)((int)puVar3 + 6) * 0xc] -
                    (int)(short)(&WORD_80040190)[(int)*(short *)((int)puVar3 + 6) * 0xc]) <
                    (longlong)*(short *)(puVar3 + 1)) {
                  *(float *)(puVar13 + 10) =
                       (float)puVar13[10] *
                       ((float)((int)(short)(&WORD_8004017c)[(int)*(short *)((int)puVar3 + 6) * 0xc]
                               - (int)*(short *)(puVar3 + 1)) /
                       (float)(int)(short)(&WORD_80040190)[(int)*(short *)((int)puVar3 + 6) * 0xc]);
                }
                break;
              }
              puVar13 = puVar13 + 10;
            } while (iVar14 != 400);
          }
        }
        iVar15 += 1;
        if (iVar15 == (int)fVar16) break;
        sVar1 = *(short *)(puVar3 + 1);
      } while( true );
    }
    fStack40 = *(float *)(param_1 + 8) - 1.00000000;
    iVar15 = 0;
    fStack36 = *(float *)(param_1 + 0xc) - 1.00000000;
    fStack32 = *(float *)(param_1 + 0x10) - 1.00000000;
    fStack52 = *(float *)(param_1 + 8) + 1.00000000;
    fStack48 = *(float *)(param_1 + 0xc) + 1.00000000;
    fStack44 = *(float *)(param_1 + 0x10) + 1.00000000;
    puVar13 = puVar3;
    do {
      iVar15 += 0x28;
      iVar14 = 0;
      pfVar10 = &fStack52 + 3;
      puVar12 = puVar13;
      if ((float)puVar13[5] != 0.00000000) {
        do {
          pfVar11 = (float *)(puVar12 + 2);
          puVar12 = puVar12 + 1;
          fVar17 = *pfVar11 - (float)puVar13[5];
          pfVar11 = (float *)((int)&fStack52 + iVar14);
          if (fVar17 < *pfVar10) {
            *pfVar10 = fVar17;
          }
          else {
            if (*pfVar11 < fVar17) {
              *pfVar11 = fVar17;
            }
          }
          pfVar10 = pfVar10 + 1;
          iVar14 += 4;
        } while (pfVar10 != &fStack52 + 6);
      }
      puVar13 = puVar13 + 10;
    } while (iVar15 < 400);
    proc_7F03E27C(param_1,&fStack52 + 3,&fStack52,fStack52 - *(float *)(param_1 + 8));
    iVar15 = 0;
    bVar4 = false;
    if ((short)(&WORD_80040180)[(int)*(short *)((int)puVar3 + 6) * 0xc] < *(short *)(puVar3 + 1)) {
      bVar4 = true;
      puVar13 = puVar3;
      do {
        iVar15 += 0x28;
        if (0.00000000 < (float)puVar13[5]) {
          bVar4 = false;
          break;
        }
        puVar13 = puVar13 + 10;
      } while (iVar15 != 400);
    }
    uVar8 = 0;
    if (bVar4) {
      *puVar3 = 0;
      uVar8 = 1;
    }
  }
  return uVar8;
}



undefined8 proc_7F09EF9C(int param_1)

{
  int iVar1;
  float fVar2;
  
  iVar1 = proc_7F0783C4();
  *(float *)(param_1 + 0x18) =
       -(*(float *)(iVar1 + 0x38) +
        *(float *)(iVar1 + 8) * *(float *)(param_1 + 8) +
        *(float *)(iVar1 + 0x18) * *(float *)(param_1 + 0xc) +
        *(float *)(iVar1 + 0x28) * *(float *)(param_1 + 0x10));
  fVar2 = *(float *)(param_1 + 0x18);
  if (fVar2 < 100.00000000) {
    *(float *)(param_1 + 0x18) = fVar2 * 0.50000000;
  }
  else {
    *(float *)(param_1 + 0x18) = fVar2 - 100.00000000;
  }
  return 0;
}



longlong proc_7F09F03C(char *param_1,longlong param_2,longlong param_3)

{
  byte bVar1;
  int iVar2;
  float *pfVar4;
  longlong lVar3;
  uint *puVar5;
  void *virtualAddress;
  u32 uVar6;
  undefined4 *puVar7;
  int iVar8;
  int iVar9;
  float extraout_f12;
  float extraout_f14;
  float fStack24;
  float fStack20;
  
  bVar1 = param_1[0x2c];
  iVar2 = *(int *)(param_1 + 4);
  pfVar4 = (float *)proc_7F0BCA14((uint)bVar1);
  if (param_3 != 0) {
    lVar3 = proc_7F054A64(param_1,&fStack24);
    if (lVar3 < 1) {
      puVar5 = proc_7F0B4FB4((uint *)param_2);
    }
    else {
      puVar5 = proc_7F0B4FF4((uint *)param_2,extraout_f12,extraout_f14,fStack24,fStack20);
    }
    *puVar5 = 0xb6000000;
    puVar5[1] = 0x13000;
    puVar5[2] = 0x1030040;
    virtualAddress = (void *)proc_7F078394();
    uVar6 = osVirtualToPhysical(virtualAddress);
    puVar5[3] = uVar6;
    puVar7 = proc_7F0BC9C4(puVar5 + 4,(uint)bVar1);
    *puVar7 = 0x1000040;
    uVar6 = osVirtualToPhysical(&DAT_8007a100);
    puVar7[1] = uVar6;
    puVar7[2] = 0xbc000806;
    uVar6 = osVirtualToPhysical(ptr_explosionDL);
    puVar7[3] = uVar6;
    puVar7[4] = 0x6000000;
    puVar7[5] = 0x2000000;
    puVar7[7] = 0x80;
    puVar7[6] = 0xba000602;
    puVar7 = puVar7 + 8;
    iVar9 = 0;
    iVar8 = iVar2;
    do {
      if (0.00000000 < *(float *)(iVar8 + 0x14)) {
        puVar7 = proc_7F09DDA4(iVar2,(float *)(iVar8 + 8),puVar7,pfVar4);
      }
      else {
        *(undefined4 *)(iVar8 + 0x14) = 0;
      }
      iVar9 += 0x28;
      iVar8 += 0x28;
    } while (iVar9 != 400);
    puVar7[1] = 0x40;
    *puVar7 = 0xba000602;
    puVar7[2] = 0x1030040;
    param_2 = (longlong)(int)(puVar7 + 4);
    virtualAddress = (void *)proc_7F078374();
    uVar6 = osVirtualToPhysical(virtualAddress);
    puVar7[3] = uVar6;
  }
  return param_2;
}



void proc_7F09F254(float *param_1,float param_2,float param_3,float param_4,float param_5)

{
  short sVar1;
  u32 uVar2;
  char cVar3;
  byte bVar4;
  float in_a3_lo;
  short sVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float in_stack_00000010;
  
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  fVar8 = (fVar6 * 0.00000000 + fVar6 * 0.00000000) - 1.00000000;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  fVar6 = fVar6 * 0.00000000 * flt_800576E0 - flt_800576E4;
  uVar2 = get_random_value();
  *(undefined4 *)(DAT_8007a14c + DAT_80040800 * 0x78) = 1;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 4) = *param_1 + param_4 * fVar8;
  fVar7 = (float)uVar2;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 8) = param_1[1] + param_4 * fVar6;
  if ((int)uVar2 < 0) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar7 = (fVar7 * 0.00000000 + fVar7 * 0.00000000) - 1.00000000;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0xc) = param_1[2] + param_4 * fVar7;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x1c) = fVar8 * param_5;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x20) = fVar6 * in_a3_lo;
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x24) = fVar7 * param_5;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x38) =
       (short)(int)((fVar6 * 0.00000000 * 0.75000000 + 0.75000000) * in_stack_00000010);
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x3a) = 0;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x3c) =
       (short)(int)((fVar6 * 0.00000000 * 0.75000000 + 0.75000000) * in_stack_00000010);
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x48) =
       (short)(int)((fVar6 * 0.00000000 * 0.75000000 + 0.75000000) * in_stack_00000010);
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x4a) = 0;
  uVar2 = get_random_value();
  fVar6 = -in_stack_00000010;
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x4c) =
       (short)(int)((fVar8 * 0.00000000 * 0.75000000 + 0.75000000) * fVar6);
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x58) =
       (short)(int)((fVar8 * 0.00000000 * 0.75000000 + 0.75000000) * fVar6);
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x5a) = 0;
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x5c) =
       (short)(int)((fVar8 * 0.00000000 * 0.75000000 + 0.75000000) * fVar6);
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x68) =
       (short)(int)((fVar8 * 0.00000000 * 0.75000000 + 0.75000000) * fVar6);
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x6a) = 0;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x6c) =
       (short)(int)((fVar6 * 0.00000000 * 0.75000000 + 0.75000000) * in_stack_00000010);
  uVar2 = get_random_value();
  sVar5 = (short)((uVar2 & 3) << 8);
  uVar2 = get_random_value();
  sVar1 = (short)((uVar2 & 3) << 8);
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x40) = sVar5 + 0xe0;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x42) = sVar1 + 0xe0;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x50) = sVar5 + 0xe0;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x52) = sVar1;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x60) = sVar5;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x62) = sVar1;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x70) = sVar5;
  *(short *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x72) = sVar1 + 0xe0;
  uVar2 = get_random_value();
  if ((uVar2 & 1) == 0) {
    uVar2 = get_random_value();
    bVar4 = (byte)uVar2 & 0x3f;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x46) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x45) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x44) = bVar4;
    uVar2 = get_random_value();
    bVar4 = (byte)uVar2 & 0x3f;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x56) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x55) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x54) = bVar4;
    uVar2 = get_random_value();
    bVar4 = (byte)uVar2 & 0x3f;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x66) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x65) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 100) = bVar4;
    uVar2 = get_random_value();
    bVar4 = (byte)uVar2 & 0x3f;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x76) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x75) = bVar4;
    *(byte *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x74) = bVar4;
  }
  else {
    uVar2 = get_random_value();
    cVar3 = -1 - ((byte)uVar2 & 0x3f);
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x46) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x45) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x44) = cVar3;
    uVar2 = get_random_value();
    cVar3 = -1 - ((byte)uVar2 & 0x3f);
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x56) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x55) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x54) = cVar3;
    uVar2 = get_random_value();
    cVar3 = -1 - ((byte)uVar2 & 0x3f);
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x66) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x65) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 100) = cVar3;
    uVar2 = get_random_value();
    cVar3 = -1 - ((byte)uVar2 & 0x3f);
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x76) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x75) = cVar3;
    *(char *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x74) = cVar3;
  }
  *(undefined *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x47) = 0xdc;
  *(undefined *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x57) = 0xdc;
  *(undefined *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x67) = 0xdc;
  *(undefined *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x77) = 0xdc;
  uVar2 = get_random_value();
  fVar6 = flt_800576E8;
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x10) = fVar8 * 0.00000000 * flt_800576E8;
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x14) = fVar8 * 0.00000000 * fVar6;
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x18) = fVar8 * 0.00000000 * fVar6;
  uVar2 = get_random_value();
  fVar6 = flt_800576EC;
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x28) = fVar8 * 0.00000000 * flt_800576EC;
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x2c) = fVar8 * 0.00000000 * fVar6;
  uVar2 = get_random_value();
  fVar8 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar8 = fVar8 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a14c + DAT_80040800 * 0x78 + 0x30) = fVar8 * 0.00000000 * fVar6;
  DAT_80040800 += 1;
  if (DAT_8007a148 <= DAT_80040800) {
    DAT_80040800 = 0;
  }
  return;
}



void proc_7F09FD3C(void)

{
  float fVar1;
  float fVar2;
  float fVar3;
  int iVar4;
  u32 uVar5;
  int *piVar6;
  uint uVar7;
  int iVar8;
  int iVar9;
  float fVar10;
  float fVar11;
  uint uVar12;
  float fVar13;
  
  fVar3 = flt_800576F8;
  fVar2 = flt_800576F4;
  fVar1 = flt_800576F0;
  if (clock_timer < 0xf) {
    fVar13 = (float)clock_timer;
  }
  else {
    fVar13 = 15.00000000;
  }
  iVar9 = 0;
  iVar8 = 0;
  if (0 < DAT_8007a148) {
    do {
      iVar4 = *(int *)(DAT_8007a14c + iVar8);
      if (0 < iVar4) {
        uVar12 = (uint)fVar13;
        uVar7 = 0;
        *(int *)(DAT_8007a14c + iVar8) = iVar4 + uVar12;
        iVar4 = DAT_8007a14c + iVar8;
        *(float *)(iVar4 + 0x10) = *(float *)(iVar4 + 0x10) + *(float *)(iVar4 + 0x28) * fVar13;
        iVar4 = DAT_8007a14c + iVar8;
        *(float *)(iVar4 + 0x14) = *(float *)(iVar4 + 0x14) + *(float *)(iVar4 + 0x2c) * fVar13;
        iVar4 = DAT_8007a14c + iVar8;
        *(float *)(iVar4 + 0x18) = *(float *)(iVar4 + 0x18) + *(float *)(iVar4 + 0x30) * fVar13;
        iVar4 = DAT_8007a14c + iVar8;
        *(float *)(iVar4 + 4) = *(float *)(iVar4 + 4) + *(float *)(iVar4 + 0x1c) * fVar13;
        iVar4 = DAT_8007a14c + iVar8;
        *(float *)(iVar4 + 0xc) = *(float *)(iVar4 + 0xc) + *(float *)(iVar4 + 0x24) * fVar13;
        if (0 < (int)uVar12) {
          if ((uVar12 & 1) != 0) {
            uVar7 = 1;
            iVar4 = DAT_8007a14c + iVar8;
            *(float *)(iVar4 + 8) = *(float *)(iVar4 + 8) + *(float *)(iVar4 + 0x20);
            fVar10 = *(float *)(DAT_8007a14c + iVar8 + 0x20);
            if (-3.75000000 < fVar10) {
              *(float *)(DAT_8007a14c + iVar8 + 0x20) = fVar10 - fVar3;
            }
            if (uVar12 == 1) goto LAB_7f09ff70;
          }
          do {
            uVar7 += 2;
            iVar4 = DAT_8007a14c + iVar8;
            *(float *)(iVar4 + 8) = *(float *)(iVar4 + 8) + *(float *)(iVar4 + 0x20);
            iVar4 = DAT_8007a14c + iVar8;
            fVar10 = *(float *)(iVar4 + 0x20);
            if (-3.75000000 < fVar10) {
              *(float *)(iVar4 + 0x20) = fVar10 - fVar3;
              iVar4 = DAT_8007a14c + iVar8;
              fVar10 = *(float *)(iVar4 + 0x20);
              fVar11 = *(float *)(iVar4 + 8);
            }
            else {
              fVar11 = *(float *)(iVar4 + 8);
            }
            *(float *)(iVar4 + 8) = fVar11 + fVar10;
            fVar10 = *(float *)(DAT_8007a14c + iVar8 + 0x20);
            if (-3.75000000 < fVar10) {
              *(float *)(DAT_8007a14c + iVar8 + 0x20) = fVar10 - fVar3;
            }
          } while (uVar7 != uVar12);
        }
LAB_7f09ff70:
        piVar6 = (int *)(DAT_8007a14c + iVar8);
        if (*piVar6 < 0x65) {
          fVar10 = (float)piVar6[2];
        }
        else {
          uVar5 = get_random_value();
          if (((uVar5 & 0x1f) == 0) || (piVar6 = (int *)(DAT_8007a14c + iVar8), *piVar6 == 300)) {
            *(undefined4 *)(DAT_8007a14c + iVar8) = 0;
            piVar6 = (int *)(DAT_8007a14c + iVar8);
            fVar10 = (float)piVar6[2];
          }
          else {
            fVar10 = (float)piVar6[2];
          }
        }
        if (fVar2 <= fVar10) {
          if (fVar1 < fVar10) {
            *piVar6 = 0;
          }
        }
        else {
          *piVar6 = 0;
        }
      }
      iVar9 += 1;
      iVar8 += 0x78;
    } while (iVar9 < DAT_8007a148);
  }
  return;
}



undefined4 * proc_7F0A0034(undefined4 *param_1)

{
  float fVar1;
  float fVar2;
  u32 uVar3;
  int *piVar4;
  float *virtualAddress;
  int iVar5;
  int iVar6;
  float afStack64 [12];
  float fStack16;
  float fStack12;
  float fStack8;
  
  param_1[1] = 0x3000;
  *param_1 = 0xb6000000;
  param_1[2] = 0xbc000806;
  uVar3 = osVirtualToPhysical(ptr_explosionDL);
  param_1[3] = uVar3;
  param_1[4] = 0x6000000;
  param_1[5] = 0x2000a50;
  param_1[6] = 0xb900031d;
  param_1[7] = 0x5049d8;
  fVar2 = flt_80057700;
  fVar1 = flt_800576FC;
  param_1 = param_1 + 8;
  iVar6 = 0;
  iVar5 = 0;
  if (0 < DAT_8007a148) {
    do {
      piVar4 = (int *)(DAT_8007a14c + iVar5);
      if (0 < *piVar4) {
        proc_7F05892C(piVar4 + 1,(float *)(piVar4 + 4),afStack64);
        virtualAddress = (float *)proc_7F0783C4();
        proc_7F058098(virtualAddress,afStack64);
        if ((((fStack16 < fVar2) && (fVar1 < fStack16)) && (fStack12 < fVar2)) &&
           (((fVar1 < fStack12 && (fStack8 < fVar2)) && (fVar1 < fStack8)))) {
          proc_7F0BD6E0();
          proc_7F058C9C((int)afStack64,(uint *)virtualAddress);
          *param_1 = 0x1020040;
          uVar3 = osVirtualToPhysical(virtualAddress);
          param_1[1] = uVar3;
          param_1[2] = 0x4300040;
          uVar3 = osVirtualToPhysical((void *)(DAT_8007a14c + iVar5 + 0x38));
          param_1[3] = uVar3;
          param_1[5] = 0x2010;
          param_1[4] = 0xb1000032;
          param_1 = param_1 + 6;
        }
      }
      iVar6 += 1;
      iVar5 += 0x78;
    } while (iVar6 < DAT_8007a148);
  }
  return param_1;
}



void proc_7F0A027C(float *param_1,float param_2,short param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  u32 uVar6;
  float *pfVar7;
  ulonglong uVar5;
  short in_a2_lo;
  char cVar8;
  int iVar9;
  undefined uVar10;
  f32 fVar11;
  float fVar12;
  float __x;
  float fVar13;
  
  uVar4 = dword_8004092C;
  uVar3 = dword_80040928;
  uVar2 = dword_80040924;
  uVar1 = dword_80040920;
  fVar12 = (float)(int)param_3;
  uVar6 = get_random_value();
  __x = (float)uVar6;
  if ((int)uVar6 < 0) {
    __x = __x + 4294967296.00000000;
  }
  __x = __x * 0.00000000 * flt_80057704;
  uVar6 = get_random_value();
  cVar8 = -1 - (char)(uVar6 % 0x50);
  pfVar7 = (float *)proc_7F0BCA14((int)in_a2_lo);
  uVar5 = get_num_players();
  if ((longlong)uVar5 < 2) {
    if (200.00000000 < fVar12) {
      fVar12 = 200.00000000;
    }
    uVar6 = get_random_value();
    fVar13 = (float)uVar6;
    if ((int)uVar6 < 0) {
      fVar13 = fVar13 + 4294967296.00000000;
    }
    fVar13 = flt_8005770C + flt_80057708 * fVar13 * 0.00000000;
    fVar11 = proc_7F0B483C();
    *param_1 = *param_1 * (float)fVar11 - *pfVar7;
    fVar11 = proc_7F0B483C();
    param_1[1] = param_1[1] * (float)fVar11 - pfVar7[1];
    fVar11 = proc_7F0B483C();
    param_1[2] = param_1[2] * (float)fVar11 - pfVar7[2];
    fVar11 = proc_7F0B483C();
    fVar13 = fVar12 * fVar13 * (float)fVar11;
    fVar12 = cosf(__x);
    fVar12 = fVar12 * fVar13;
    __x = sinf(__x);
    __x = __x * fVar13;
    *(short *)(DAT_8007a150 + DAT_80040804 * 0x58) = in_a2_lo;
    *(float *)(DAT_8007a150 + DAT_80040804 * 0x58 + 4) = *param_1;
    *(float *)(DAT_8007a150 + DAT_80040804 * 0x58 + 8) = param_1[1];
    *(float *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0xc) = param_1[2];
    *(float *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x10) = fVar13;
    iVar9 = DAT_8007a150 + DAT_80040804 * 0x58;
    *(undefined4 *)(iVar9 + 0x18) = uVar1;
    *(undefined4 *)(iVar9 + 0x1c) = uVar2;
    *(undefined4 *)(iVar9 + 0x20) = uVar3;
    *(undefined4 *)(iVar9 + 0x24) = uVar4;
    iVar9 = DAT_8007a150 + DAT_80040804 * 0x58;
    *(undefined4 *)(iVar9 + 0x28) = uVar1;
    *(undefined4 *)(iVar9 + 0x2c) = uVar2;
    *(undefined4 *)(iVar9 + 0x30) = uVar3;
    *(undefined4 *)(iVar9 + 0x34) = uVar4;
    iVar9 = DAT_8007a150 + DAT_80040804 * 0x58;
    *(undefined4 *)(iVar9 + 0x38) = uVar1;
    *(undefined4 *)(iVar9 + 0x3c) = uVar2;
    *(undefined4 *)(iVar9 + 0x40) = uVar3;
    *(undefined4 *)(iVar9 + 0x44) = uVar4;
    iVar9 = DAT_8007a150 + DAT_80040804 * 0x58;
    *(undefined4 *)(iVar9 + 0x48) = uVar1;
    *(undefined4 *)(iVar9 + 0x4c) = uVar2;
    *(undefined4 *)(iVar9 + 0x50) = uVar3;
    *(undefined4 *)(iVar9 + 0x54) = uVar4;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x18) = (short)(int)(*param_1 + fVar12);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x1a) =
         (short)(int)(param_1[1] + 0.50000000);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x1c) = (short)(int)(param_1[2] + __x);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x20) = 0;
    *(short *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x22) = (ushort)*(byte *)(image + 4) << 5;
    uVar6 = get_random_value();
    uVar10 = (undefined)(uVar6 % 0x32);
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x26) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x25) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x24) = uVar10;
    *(char *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x27) = cVar8;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x28) = (short)(int)(*param_1 + __x);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x2a) =
         (short)(int)(param_1[1] + 0.50000000);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x2c) = (short)(int)(param_1[2] - fVar12);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x30) = 0;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x32) = 0;
    uVar6 = get_random_value();
    uVar10 = (undefined)(uVar6 % 0x32);
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x36) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x35) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x34) = uVar10;
    *(char *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x37) = cVar8;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x38) = (short)(int)(*param_1 - fVar12);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x3a) =
         (short)(int)(param_1[1] + 0.50000000);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x3c) = (short)(int)(param_1[2] - __x);
    *(short *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x40) = (ushort)*(byte *)(image + 5) << 5;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x42) = 0;
    uVar6 = get_random_value();
    uVar10 = (undefined)(uVar6 % 0x32);
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x46) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x45) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x44) = uVar10;
    *(char *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x47) = cVar8;
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x48) = (short)(int)(*param_1 - __x);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x4a) =
         (short)(int)(param_1[1] + 0.50000000);
    *(undefined2 *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x4c) = (short)(int)(param_1[2] + fVar12);
    *(short *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x50) = (ushort)*(byte *)(image + 4) << 5;
    *(short *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x52) = (ushort)*(byte *)(image + 5) << 5;
    uVar6 = get_random_value();
    uVar10 = (undefined)(uVar6 % 0x32);
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x56) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x55) = uVar10;
    *(undefined *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x54) = uVar10;
    *(char *)(DAT_8007a150 + DAT_80040804 * 0x58 + 0x57) = cVar8;
    DAT_80040804 += 1;
    if (0x13 < DAT_80040804) {
      DAT_80040804 = 0;
    }
  }
  return;
}



undefined4 * proc_7F0A0AB4(undefined4 *param_1)

{
  short sVar1;
  ulonglong uVar2;
  undefined4 *puVar3;
  u32 uVar4;
  int iVar5;
  short sVar6;
  undefined4 *puStackX0;
  
  sVar6 = -1;
  puStackX0 = param_1;
  uVar2 = get_num_players();
  if ((longlong)uVar2 < 2) {
    puStackX0[1] = 0x2000;
    *puStackX0 = 0xb7000000;
    puStackX0[2] = 0xb6000000;
    puStackX0[3] = 0x11000;
    puStackX0[5] = 0x80;
    puStackX0[4] = 0xba000602;
    puStackX0 = puStackX0 + 6;
    likely_generate_DL_for_image_declaration((uint **)register0x000000ec,image,4,1,2);
    iVar5 = 0;
    do {
      if ((-1 < *(short *)(DAT_8007a150 + iVar5)) &&
         (uVar2 = proc_7F0B5E50((int)*(short *)(DAT_8007a150 + iVar5)), uVar2 != 0)) {
        sVar1 = *(short *)(DAT_8007a150 + iVar5);
        puVar3 = puStackX0;
        if (sVar6 != sVar1) {
          puVar3 = proc_7F0BC9C4(puStackX0,(int)sVar1);
          sVar6 = sVar1;
        }
        puStackX0 = puVar3 + 2;
        *puVar3 = 0x4300040;
        uVar4 = osVirtualToPhysical((void *)(DAT_8007a150 + iVar5 + 0x18));
        puVar3[1] = uVar4;
        puStackX0[1] = 0x2010;
        *puStackX0 = 0xb1000032;
        puStackX0 = puStackX0 + 2;
      }
      iVar5 += 0x58;
    } while (iVar5 != 0x6e0);
    puStackX0[1] = 0x40;
    *puStackX0 = 0xba000602;
    puStackX0 = puStackX0 + 2;
  }
  return puStackX0;
}



float proc_7F0A0C74(float param_1)

{
  float in_f0;
  
  if (param_1 < 0.00000000) {
    return in_f0;
  }
  return in_f0;
}



void proc_7F0A0CCC(int param_1,char param_2)

{
  undefined2 *puVar1;
  int iVar2;
  longlong lVar3;
  int iVar4;
  
  lVar3 = (longlong)(int)param_2;
  iVar2 = 0;
  do {
    puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
    if (param_1 == *(int *)(puVar1 + 0x24)) {
      if (lVar3 == (longlong)*(char *)((int)puVar1 + 0x4d)) {
        *puVar1 = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar4 = *(int *)(puVar1 + 0x4c);
      }
      else {
        iVar4 = *(int *)(puVar1 + 0x4c);
      }
    }
    else {
      iVar4 = *(int *)(puVar1 + 0x4c);
    }
    if (param_1 == iVar4) {
      if (lVar3 == (longlong)*(char *)((int)puVar1 + 0x9d)) {
        puVar1[0x28] = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar4 = *(int *)(puVar1 + 0x74);
      }
      else {
        iVar4 = *(int *)(puVar1 + 0x74);
      }
    }
    else {
      iVar4 = *(int *)(puVar1 + 0x74);
    }
    if (param_1 == iVar4) {
      if (lVar3 == (longlong)*(char *)((int)puVar1 + 0xed)) {
        puVar1[0x50] = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar4 = *(int *)(puVar1 + 0x9c);
      }
      else {
        iVar4 = *(int *)(puVar1 + 0x9c);
      }
    }
    else {
      iVar4 = *(int *)(puVar1 + 0x9c);
    }
    iVar2 += 0x140;
    if ((param_1 == iVar4) && (lVar3 == (longlong)*(char *)((int)puVar1 + 0x13d))) {
      puVar1[0x78] = 0xffff;
    }
  } while (iVar2 != 8000);
  return;
}



void proc_7F0A0D90(int param_1)

{
  undefined2 *puVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = 0;
  do {
    puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
    if (param_1 == *(int *)(puVar1 + 0x24)) {
      if ((&DAT_80040815)[(int)(short)puVar1[1] * 0xc] == '\x02') {
        *puVar1 = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar3 = *(int *)(puVar1 + 0x4c);
      }
      else {
        iVar3 = *(int *)(puVar1 + 0x4c);
      }
    }
    else {
      iVar3 = *(int *)(puVar1 + 0x4c);
    }
    if (param_1 == iVar3) {
      if ((&DAT_80040815)[(int)(short)puVar1[0x29] * 0xc] == '\x02') {
        puVar1[0x28] = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar3 = *(int *)(puVar1 + 0x74);
      }
      else {
        iVar3 = *(int *)(puVar1 + 0x74);
      }
    }
    else {
      iVar3 = *(int *)(puVar1 + 0x74);
    }
    if (param_1 == iVar3) {
      if ((&DAT_80040815)[(int)(short)puVar1[0x51] * 0xc] == '\x02') {
        puVar1[0x50] = 0xffff;
        puVar1 = (undefined2 *)(DAT_8007a154 + iVar2);
        iVar3 = *(int *)(puVar1 + 0x9c);
      }
      else {
        iVar3 = *(int *)(puVar1 + 0x9c);
      }
    }
    else {
      iVar3 = *(int *)(puVar1 + 0x9c);
    }
    iVar2 += 0x140;
    if ((param_1 == iVar3) && ((&DAT_80040815)[(int)(short)puVar1[0x79] * 0xc] == '\x02')) {
      puVar1[0x78] = 0xffff;
    }
  } while (iVar2 != 8000);
  return;
}



void proc_7F0A0E98(int param_1)

{
  float fVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  float fVar5;
  undefined uVar6;
  
  iVar2 = 0;
  do {
    iVar3 = param_1 * 0x50;
    fVar5 = ((float)iVar2 / 10.00000000) * 255.00000000;
    if (false) {
      fVar1 = ROUND(fVar5);
    }
    else {
      fVar1 = FLOOR(fVar5);
    }
    uVar6 = (undefined)(int)fVar1;
    if (false) {
      if (false) {
        fVar5 = ROUND(fVar5 - 2147483648.00000000);
      }
      else {
        fVar5 = FLOOR(fVar5 - 2147483648.00000000);
      }
      if (false) goto LAB_7f0a0f3c;
      uVar6 = (undefined)(int)fVar5;
    }
    else {
      if ((int)fVar1 < 0) {
LAB_7f0a0f3c:
        uVar6 = 0xff;
      }
    }
    iVar4 = iVar2 + 1;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x47) = uVar6;
    param_1 += 1;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x37) = uVar6;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x27) = uVar6;
    iVar2 += 2;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x17) = uVar6;
    iVar3 += 0x50;
    if (99 < param_1) {
      param_1 = 0;
      iVar3 = 0;
    }
    fVar5 = ((float)iVar4 / 10.00000000) * 255.00000000;
    if (false) {
      fVar1 = ROUND(fVar5);
    }
    else {
      fVar1 = FLOOR(fVar5);
    }
    uVar6 = (undefined)(int)fVar1;
    if (false) {
      if (false) {
        fVar5 = ROUND(fVar5 - 2147483648.00000000);
      }
      else {
        fVar5 = FLOOR(fVar5 - 2147483648.00000000);
      }
      if (false) goto LAB_7f0a1020;
      uVar6 = (undefined)(int)fVar5;
    }
    else {
      if ((int)fVar1 < 0) {
LAB_7f0a1020:
        uVar6 = 0xff;
      }
    }
    param_1 += 1;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x47) = uVar6;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x37) = uVar6;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x27) = uVar6;
    *(undefined *)(DAT_8007a154 + iVar3 + 0x17) = uVar6;
    if (99 < param_1) {
      param_1 = 0;
    }
    if (iVar2 == 10) {
      return;
    }
  } while( true );
}



void proc_7F0A108C(float *param_1,float *param_2,short param_3,short param_4,int param_5,
                  char param_6,undefined param_7)

{
  char cVar1;
  uint uVar2;
  float *pfVar3;
  undefined2 uVar5;
  u32 uVar4;
  ulonglong uVar6;
  ulonglong uVar7;
  int iVar8;
  byte bVar9;
  undefined uVar10;
  int iVar11;
  int iVar12;
  f32 fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  short sStackX10;
  byte bStack143;
  byte bStack142;
  float fStack132;
  float fStack128;
  float fStack124;
  float fStack120;
  float fStack116;
  float fStack112;
  float fStack104;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  float fStack44;
  float fStack28;
  float fStack24;
  float fStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack16 = dword_80040930;
  uStack12 = dword_80040934;
  uStack8 = dword_80040938;
  uStack4 = dword_8004093C;
  uVar2 = proc_7F0927BC(0xf);
  sStackX10 = param_3;
  if (uVar2 != 0) {
    sStackX10 = 0x10;
  }
  fStack80 = *param_1;
  fStack76 = param_1[1];
  fStack72 = param_1[2];
  iVar11 = (int)sStackX10 * 0xc;
  fStack84 = *(float *)(&dword_8004080C + iVar11);
  fStack88 = *(float *)(iVar11 + -0x7ffbf7f0);
  fVar18 = *param_2;
  if ((fVar18 == 0.00000000) && (param_2[2] == 0.00000000)) {
    fStack56 = 0.00000000;
    fStack60 = 0.00000000;
    fStack52 = 0.00000000;
    fStack64 = 1.00000000;
    fStack44 = 1.00000000;
  }
  else {
    fStack24 = sqrtf(param_2[2] * param_2[2] + fVar18 * fVar18 + param_2[1] * param_2[1]);
    fStack20 = *param_2 / fStack24;
    fStack28 = param_2[2] / fStack24;
    fStack24 = param_2[1] / fStack24;
    fVar18 = sqrtf(fStack20 * fStack20 + fStack28 * fStack28);
    fStack60 = -fVar18;
    fStack44 = fStack28 / fVar18;
    fStack56 = fStack24 * (fStack20 / fVar18);
    fStack52 = -(fStack20 / fVar18);
    fStack64 = fStack24 * fStack44;
  }
  uVar5 = (undefined2)param_5;
  if (param_5 == 0) {
    pfVar3 = (float *)proc_7F0BCA14((int)param_4);
    uVar5 = SUB42(pfVar3,0);
    fVar13 = proc_7F0B483C();
    fStack80 = fStack80 * (float)fVar13 - *pfVar3;
    fVar13 = proc_7F0B483C();
    fStack76 = fStack76 * (float)fVar13 - pfVar3[1];
    fVar13 = proc_7F0B483C();
    fStack72 = fStack72 * (float)fVar13 - pfVar3[2];
    fVar13 = proc_7F0B483C();
    fStack84 = fStack84 * (float)fVar13;
    fVar13 = proc_7F0B483C();
    fStack88 = fStack88 * (float)fVar13;
  }
  else {
    iVar8 = *(int *)(param_5 + 4);
    fStack120 = fStack44;
    pfVar3 = (float *)(*(int *)(*(int *)(iVar8 + 0x14) + 0xc) + (int)param_6 * 0x40);
    fStack116 = 0.00000000;
    fStack112 = fStack52;
    fStack132 = fStack56;
    fStack128 = fStack60;
    fStack124 = fStack64;
    proc_7F0583D8(pfVar3,&fStack120);
    proc_7F0583D8(pfVar3,&fStack132);
    fStack104 = sqrtf(fStack112 * fStack112 + fStack120 * fStack120 + fStack116 * fStack116);
    fVar18 = sqrtf(fStack124 * fStack124 + fStack132 * fStack132 + fStack128 * fStack128);
    fStack84 = fStack84 / fStack104;
    fStack88 = fStack88 / fVar18;
    if ((byte)(&DAT_80040816)[iVar11] < 2) {
      if ((&DAT_80040815)[iVar11] == '\x02') {
        *(byte *)(iVar8 + 2) = *(byte *)(iVar8 + 2) | 2;
        goto LAB_7f0a13b0;
      }
      bVar9 = *(byte *)(iVar8 + 2);
    }
    else {
      bVar9 = *(byte *)(iVar8 + 2);
    }
    *(byte *)(iVar8 + 2) = bVar9 | 1;
  }
LAB_7f0a13b0:
  *(int *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x48) = param_5;
  *(char *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x4c) = param_6;
  *(undefined *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x4d) = param_7;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50) = param_4;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50 + 2) = sStackX10;
  iVar8 = DAT_8007a154 + DAT_80040808 * 0x50;
  *(undefined4 *)(iVar8 + 8) = uStack16;
  *(undefined4 *)(iVar8 + 0xc) = uStack12;
  *(undefined4 *)(iVar8 + 0x10) = uStack8;
  *(undefined4 *)(iVar8 + 0x14) = uStack4;
  iVar8 = DAT_8007a154 + DAT_80040808 * 0x50;
  *(undefined4 *)(iVar8 + 0x18) = uStack16;
  *(undefined4 *)(iVar8 + 0x1c) = uStack12;
  *(undefined4 *)(iVar8 + 0x20) = uStack8;
  *(undefined4 *)(iVar8 + 0x24) = uStack4;
  iVar8 = DAT_8007a154 + DAT_80040808 * 0x50;
  *(undefined4 *)(iVar8 + 0x28) = uStack16;
  *(undefined4 *)(iVar8 + 0x2c) = uStack12;
  *(undefined4 *)(iVar8 + 0x30) = uStack8;
  *(undefined4 *)(iVar8 + 0x34) = uStack4;
  iVar8 = DAT_8007a154 + DAT_80040808 * 0x50;
  *(undefined4 *)(iVar8 + 0x38) = uStack16;
  *(undefined4 *)(iVar8 + 0x3c) = uStack12;
  *(undefined4 *)(iVar8 + 0x40) = uStack8;
  *(undefined4 *)(iVar8 + 0x44) = uStack4;
  fVar18 = fStack84 * fStack44;
  fVar16 = fStack88 * fStack56;
  proc_7F0A0C74((fStack80 - fVar18) - fVar16);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 8) = uVar5;
  fVar14 = fStack88 * fStack60;
  proc_7F0A0C74((fStack76 - 0.00000000) - fVar14);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 10) = uVar5;
  fVar15 = fStack84 * fStack52;
  fVar17 = fStack88 * fStack64;
  proc_7F0A0C74((fStack72 - fVar15) - fVar17);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0xc) = uVar5;
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x10) = 0;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x12) =
       (ushort)*(byte *)(DAT_8008d0bc + iVar11 + 5) << 5;
  proc_7F0A0C74((fStack80 - fVar18) + fVar16);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x18) = uVar5;
  proc_7F0A0C74((fStack76 - 0.00000000) + fVar14);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x1a) = uVar5;
  proc_7F0A0C74((fStack72 - fVar15) + fVar17);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x1c) = uVar5;
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x20) = 0;
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x22) = 0;
  proc_7F0A0C74(fStack80 + fVar18 + fVar16);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x28) = uVar5;
  proc_7F0A0C74(fStack76 + 0.00000000 + fVar14);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x2a) = uVar5;
  proc_7F0A0C74(fStack72 + fVar15 + fVar17);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x2c) = uVar5;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x30) =
       (ushort)*(byte *)(DAT_8008d0bc + iVar11 + 4) << 5;
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x32) = 0;
  proc_7F0A0C74((fStack80 + fVar18) - fVar16);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x38) = uVar5;
  proc_7F0A0C74((fStack76 + 0.00000000) - fVar14);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x3a) = uVar5;
  proc_7F0A0C74((fStack72 + fVar15) - fVar17);
  iVar8 = 0;
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x3c) = uVar5;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x40) =
       (ushort)*(byte *)(DAT_8008d0bc + iVar11 + 4) << 5;
  *(short *)(DAT_8007a154 + DAT_80040808 * 0x50 + 0x42) =
       (ushort)*(byte *)(DAT_8008d0bc + iVar11 + 5) << 5;
  uVar6 = (ulonglong)bStack143;
  uVar7 = (ulonglong)bStack142;
  do {
    cVar1 = *(char *)(iVar11 + -0x7ffbf7ec);
    if (cVar1 == '\0') {
      uVar4 = get_random_value();
      uVar6 = SEXT48((int)(uVar4 % 0x28));
      uVar10 = (undefined)(uVar4 % 0x28);
      uVar7 = uVar6;
      if (false) {
        trap(0x1c00);
        uVar7 = uVar6;
      }
    }
    else {
      if (cVar1 == '\x01') {
        uVar4 = get_random_value();
        iVar12 = 0xff - uVar4 % 0x28;
        if (false) {
          trap(0x1c00);
        }
        uVar6 = (longlong)iVar12 & 0xff;
        uVar10 = (undefined)iVar12;
        uVar7 = (longlong)iVar12 & 0xff;
      }
      else {
        if (cVar1 == '\x02') {
          uVar4 = get_random_value();
          uVar10 = 0;
          if ((uVar4 & 1) != 0) {
            uVar10 = 0xff;
          }
          uVar4 = get_random_value();
          bVar9 = 0;
          if ((uVar4 & 1) != 0) {
            bVar9 = 0xff;
          }
          uVar4 = get_random_value();
          if ((uVar4 & 1) == 0) {
            uVar6 = 0;
            uVar7 = (ulonglong)bVar9;
          }
          else {
            uVar6 = 0xff;
            uVar7 = (ulonglong)bVar9;
          }
        }
        else {
          uVar10 = 0;
        }
      }
    }
    *(undefined *)(DAT_8007a154 + DAT_80040808 * 0x50 + iVar8 + 0x14) = uVar10;
    *(undefined *)(DAT_8007a154 + DAT_80040808 * 0x50 + iVar8 + 0x15) = (char)uVar7;
    *(undefined *)(DAT_8007a154 + DAT_80040808 * 0x50 + iVar8 + 0x16) = (char)uVar6;
    iVar12 = DAT_8007a154 + DAT_80040808 * 0x50 + iVar8;
    iVar8 += 0x10;
    *(undefined *)(iVar12 + 0x17) = 0xff;
  } while (iVar8 != 0x40);
  DAT_80040808 += 1;
  if (99 < DAT_80040808) {
    DAT_80040808 = 0;
  }
  proc_7F0A0E98(DAT_80040808);
  *(undefined2 *)(DAT_8007a154 + DAT_80040808 * 0x50) = 0xffff;
  return;
}



undefined4 * proc_7F0A1A94(undefined4 *param_1,int param_2,uint param_3)

{
  char cVar1;
  short sVar2;
  short sVar3;
  int iVar4;
  bool bVar5;
  bool bVar6;
  undefined4 *puVar7;
  ulonglong uVar8;
  u32 uVar9;
  short *psVar10;
  undefined *puVar11;
  int iVar12;
  int iVar13;
  longlong lVar14;
  undefined4 *puStackX0;
  uint uStackX8;
  int iStack24;
  int iStack20;
  
  lVar14 = -1;
  bVar6 = false;
  iStack20 = 0;
  iStack24 = -1;
  if (param_2 != 0) {
    iStack20 = *(int *)(param_2 + 4);
  }
  param_1[1] = 0x3000;
  *param_1 = 0xb6000000;
  puStackX0 = param_1 + 4;
  iVar13 = 0;
  param_1[3] = 0x80;
  param_1[2] = 0xba000602;
  uStackX8 = param_3;
  do {
    psVar10 = (short *)(DAT_8007a154 + iVar13);
    if ((param_2 == *(int *)(psVar10 + 0x24)) && (-1 < *psVar10)) {
      if (param_2 == 0) {
        uVar8 = proc_7F0B5E50((int)*psVar10);
        if (uVar8 == 0) goto LAB_7f0a1cec;
        psVar10 = (short *)(DAT_8007a154 + iVar13);
      }
      puVar7 = puStackX0;
      sVar2 = psVar10[1];
      if (uStackX8 == 0) {
        iVar12 = (int)sVar2 * 0xc;
        puVar11 = &dword_8004080C + iVar12;
        bVar5 = 1 < (byte)(&DAT_80040816)[iVar12];
        if (!bVar5) {
          bVar5 = (&DAT_80040815)[iVar12] != '\x02';
        }
      }
      else {
        iVar12 = (int)sVar2 * 0xc;
        puVar11 = &dword_8004080C + iVar12;
        bVar5 = (byte)(&DAT_80040816)[iVar12] < 2;
        if (bVar5) {
          bVar5 = (&DAT_80040815)[iVar12] == '\x02';
        }
      }
      if (bVar5) {
        bVar6 = true;
        if (param_2 == 0) {
          sVar3 = *psVar10;
          if (lVar14 != (longlong)sVar3) {
            lVar14 = (longlong)(int)sVar3;
            puStackX0 = proc_7F0BC9C4(puStackX0,(int)sVar3);
          }
        }
        else {
          cVar1 = *(char *)(psVar10 + 0x26);
          if (lVar14 != (longlong)cVar1) {
            iVar4 = *(int *)(*(int *)(iStack20 + 0x14) + 0xc);
            lVar14 = (longlong)(int)(short)cVar1;
            *puStackX0 = 0x1020040;
            puStackX0 = puStackX0 + 2;
            uVar9 = osVirtualToPhysical((void *)((int)cVar1 * 0x40 + iVar4));
            puVar7[1] = uVar9;
          }
        }
        if ((longlong)iStack24 != (longlong)sVar2) {
          likely_generate_DL_for_image_declaration
                    ((uint **)register0x000000ec,(uint *)(iVar12 + DAT_8008d0bc),
                     (uint)(byte)puVar11[9],(ulonglong)(byte)puVar11[10],2);
          iStack24 = (int)sVar2;
        }
        puVar7 = puStackX0;
        *puStackX0 = 0x4300040;
        puStackX0 = puStackX0 + 2;
        uVar9 = osVirtualToPhysical((void *)(DAT_8007a154 + iVar13 + 8));
        puVar7[1] = uVar9;
        puStackX0[1] = 0x2010;
        *puStackX0 = 0xb1000032;
        puStackX0 = puStackX0 + 2;
      }
    }
LAB_7f0a1cec:
    iVar13 += 0x50;
    if (iVar13 == 8000) {
      if ((param_2 != 0) && (!bVar6)) {
        *(byte *)(iStack20 + 2) = *(byte *)(iStack20 + 2) & ~(byte)(1 << (uStackX8 & 0x1f));
      }
      puStackX0[1] = 0x40;
      *puStackX0 = 0xba000602;
      return puStackX0 + 2;
    }
  } while( true );
}



undefined4 * proc_7F0A1D78(undefined4 *param_1)

{
  undefined4 *puVar1;
  
  puVar1 = proc_7F0A1A94(param_1,0,0);
  return puVar1;
}



void proc_7F0A1DA0(float *param_1,float *param_2,float *param_3,float *param_4,float param_5,
                  float param_6,float param_7,float param_8)

{
  int iVar1;
  int **ppiVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  int iVar11;
  float fVar12;
  int iVar13;
  float extraout_f12;
  float fVar14;
  int iVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float in_stack_00000018;
  float in_stack_0000001c;
  float fStack32;
  float fStack28;
  float fStack24;
  
  fVar8 = *param_2;
  fVar10 = param_2[1];
  fVar12 = param_2[2];
  fVar4 = sqrtf(fVar12 * fVar12 + fVar8 * fVar8 + fVar10 * fVar10);
  fVar19 = 1.00000000 / fVar4;
  fVar16 = *param_3;
  fVar14 = param_3[1];
  fVar9 = param_3[2];
  fVar5 = sqrtf(fVar9 * fVar9 + fVar16 * fVar16 + fVar14 * fVar14);
  fVar20 = 1.00000000 / fVar5;
  fVar6 = convert_angle_using_inverse((f32)*param_4,(f32)param_4[2]);
  fVar21 = param_8 * fVar4 - param_7 * fVar4;
  fVar22 = in_stack_0000001c * fVar5 - in_stack_00000018 * fVar5;
  iVar1 = DAT_8007a160;
  if (DAT_8007a160 < 0) {
    iVar1 = DAT_8007a160 + 1;
  }
  fVar7 = sqrtf((fVar21 * fVar22) / (float)(iVar1 >> 1));
  iVar11 = (int)fVar7;
  fVar17 = *param_1;
  fVar7 = param_7 * fVar4 + (float)(iVar11 >> 1);
  fVar4 = in_stack_00000018 * fVar5 + (float)(iVar11 >> 1);
  fVar5 = param_1[1];
  fVar18 = param_1[2];
  ppiVar2 = play_sfx_a1(ptr_sfx_buf,0x47,NULL);
  proc_7F053A10((int)ppiVar2,param_1);
  iVar1 = 0;
  iVar13 = (int)(fVar21 / (float)iVar11);
  iVar15 = (int)(fVar22 / (float)iVar11);
  if (0 < iVar15) {
    do {
      iVar3 = 0;
      if (0 < iVar13) {
        fVar21 = (float)iVar1 * (float)iVar11;
        do {
          fVar22 = (float)iVar3 * (float)iVar11;
          fStack32 = fVar16 * fVar20 * fVar21 +
                     fVar16 * fVar20 * fVar4 + fVar17 + fVar7 * fVar8 * fVar19 +
                     fVar22 * fVar8 * fVar19;
          fStack28 = fVar14 * fVar20 * fVar21 +
                     fVar14 * fVar20 * fVar4 + fVar5 + fVar7 * fVar10 * fVar19 +
                     fVar22 * fVar10 * fVar19;
          fStack24 = fVar9 * fVar20 * fVar21 +
                     fVar9 * fVar20 * fVar4 + fVar18 + fVar7 * fVar12 * fVar19 +
                     fVar22 * fVar12 * fVar19;
          get_random_value();
          proc_7F0A2160(&fStack32,fVar6,extraout_f12);
          iVar3 += 1;
        } while (iVar3 != iVar13);
      }
      iVar1 += 1;
    } while (iVar1 < iVar15);
  }
  return;
}



void proc_7F0A2160(undefined4 *param_1,undefined4 param_2,float param_3)

{
  undefined uVar1;
  u32 uVar2;
  int iVar3;
  float in_a2_lo;
  float fVar4;
  float fVar5;
  float fVar6;
  
  uVar2 = get_random_value();
  fVar4 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  fVar6 = fVar6 * 0.00000000 * flt_80057718 - flt_8005771C;
  uVar2 = get_random_value();
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68) = 1;
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68 + 4) = *param_1;
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68 + 8) = param_1[1];
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0xc) = param_1[2];
  fVar5 = (float)uVar2;
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x1c) =
       ((fVar4 * 0.00000000 + fVar4 * 0.00000000) - 1.00000000) * 1.50000000;
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x20) = fVar6 * 3.00000000;
  if ((int)uVar2 < 0) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x24) =
       ((fVar5 * 0.00000000 + fVar5 * 0.00000000) - 1.00000000) * 1.50000000;
  uVar2 = get_random_value();
  fVar4 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x38) =
       (short)(int)((fVar4 * 0.00000000 * 0.50000000 + 1.00000000) * in_a2_lo);
  uVar2 = get_random_value();
  fVar4 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x3a) =
       (short)(int)((fVar4 * 0.00000000 * 0.50000000 + 1.00000000) * in_a2_lo);
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x3c) = 0;
  uVar2 = get_random_value();
  fVar4 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x48) =
       (short)(int)((fVar4 * 0.00000000 * 0.50000000 + 1.00000000) * in_a2_lo);
  uVar2 = get_random_value();
  fVar4 = -in_a2_lo;
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x4a) =
       (short)(int)((fVar6 * 0.00000000 * 0.50000000 + 1.00000000) * fVar4);
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x4c) = 0;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x58) =
       (short)(int)((fVar6 * 0.00000000 * 0.50000000 + 1.00000000) * fVar4);
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x5a) =
       (short)(int)((fVar6 * 0.00000000 * 0.50000000 + 1.00000000) * fVar4);
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x5c) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x40) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x42) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x50) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x52) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x60) = 0;
  *(undefined2 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x62) = 0;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x44) = 5;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x45) = 5;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x46) = 0x7e;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x54) = 5;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x55) = 0xfb;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x56) = 0x7e;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 100) = 0xfb;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x65) = 0xfb;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x66) = 0x7e;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x67) = 0xff;
  iVar3 = DAT_8007a164 + dword_80040940 * 0x68;
  uVar1 = *(undefined *)(iVar3 + 0x67);
  *(undefined *)(iVar3 + 0x57) = uVar1;
  *(undefined *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x47) = uVar1;
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x10) = param_2;
  *(undefined4 *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x14) = 0;
  uVar2 = get_random_value();
  fVar4 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x18) = fVar4 * 0.00000000 * flt_80057720;
  uVar2 = get_random_value();
  fVar4 = flt_80057724;
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x28) = fVar6 * 0.00000000 * flt_80057724;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x2c) = fVar6 * 0.00000000 * fVar4;
  uVar2 = get_random_value();
  fVar6 = (float)uVar2;
  if ((int)uVar2 < 0) {
    fVar6 = fVar6 + 4294967296.00000000;
  }
  *(float *)(DAT_8007a164 + dword_80040940 * 0x68 + 0x30) = fVar6 * 0.00000000 * fVar4;
  dword_80040940 += 1;
  if (DAT_8007a160 <= dword_80040940) {
    dword_80040940 = 0;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a2a68) overlaps instruction at (ram,0x7f0a2a64)
// 

void proc_7F0A28D4(void)

{
  float fVar1;
  float fVar2;
  float fVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  uint uVar8;
  uint uVar9;
  float fVar10;
  float fVar11;
  uint uVar12;
  
  fVar3 = flt_80057730;
  fVar2 = flt_8005772C;
  fVar1 = flt_80057728;
  iVar5 = 0;
  if (clock_timer < 0xf) {
    fVar10 = (float)clock_timer;
  }
  else {
    fVar10 = 15.00000000;
  }
  iVar4 = 0;
  if (0 < DAT_8007a160) {
    do {
      iVar6 = *(int *)(DAT_8007a164 + iVar5);
      if (0 < iVar6) {
        uVar12 = (uint)fVar10;
        *(int *)(DAT_8007a164 + iVar5) = iVar6 + uVar12;
        iVar6 = DAT_8007a164 + iVar5;
        *(float *)(iVar6 + 0x10) = *(float *)(iVar6 + 0x10) + *(float *)(iVar6 + 0x28) * fVar10;
        iVar6 = DAT_8007a164 + iVar5;
        *(float *)(iVar6 + 0x14) = *(float *)(iVar6 + 0x14) + *(float *)(iVar6 + 0x2c) * fVar10;
        iVar6 = DAT_8007a164 + iVar5;
        *(float *)(iVar6 + 0x18) = *(float *)(iVar6 + 0x18) + *(float *)(iVar6 + 0x30) * fVar10;
        iVar6 = DAT_8007a164 + iVar5;
        *(float *)(iVar6 + 4) = *(float *)(iVar6 + 4) + *(float *)(iVar6 + 0x1c) * fVar10;
        iVar6 = DAT_8007a164 + iVar5;
        *(float *)(iVar6 + 0xc) = *(float *)(iVar6 + 0xc) + *(float *)(iVar6 + 0x24) * fVar10;
        if (0 < (int)uVar12) {
          uVar9 = uVar12 & 3;
          if (uVar9 == 0) {
            uVar9 = 4;
          }
          else {
            uVar8 = 1;
            if (uVar9 != 1) {
              do {
                iVar6 = DAT_8007a164 + iVar5;
                uVar8 += 1;
                *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
                *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                     *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
              } while (uVar9 != uVar8);
            }
            iVar6 = DAT_8007a164 + iVar5;
            *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
            *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                 *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
            uVar9 = uVar8 + 4;
            if (uVar8 == uVar12) goto LAB_7f0a2bd8;
          }
          while (uVar9 != uVar12) {
            iVar6 = DAT_8007a164 + iVar5;
            uVar9 += 4;
            *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
            *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                 *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
            iVar6 = DAT_8007a164 + iVar5;
            *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
            *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                 *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
            iVar6 = DAT_8007a164 + iVar5;
            *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
            *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                 *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
            iVar6 = DAT_8007a164 + iVar5;
            *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
            *(float *)(DAT_8007a164 + iVar5 + 0x20) =
                 *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
          }
          iVar6 = DAT_8007a164 + iVar5;
          *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
          *(float *)(DAT_8007a164 + iVar5 + 0x20) = *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
          iVar6 = DAT_8007a164 + iVar5;
          *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
          *(float *)(DAT_8007a164 + iVar5 + 0x20) = *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
          iVar6 = DAT_8007a164 + iVar5;
          *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
          *(float *)(DAT_8007a164 + iVar5 + 0x20) = *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
          iVar6 = DAT_8007a164 + iVar5;
          *(float *)(iVar6 + 8) = *(float *)(iVar6 + 8) + *(float *)(iVar6 + 0x20);
          *(float *)(DAT_8007a164 + iVar5 + 0x20) = *(float *)(DAT_8007a164 + iVar5 + 0x20) - fVar3;
        }
LAB_7f0a2bd8:
        piVar7 = (int *)(DAT_8007a164 + iVar5);
        if (*piVar7 < 0x96) {
          fVar11 = (float)piVar7[2];
        }
        else {
          *piVar7 = 0;
          piVar7 = (int *)(DAT_8007a164 + iVar5);
          fVar11 = (float)piVar7[2];
        }
        if (fVar2 <= fVar11) {
          if (fVar1 < fVar11) {
            *piVar7 = 0;
          }
        }
        else {
          *piVar7 = 0;
        }
      }
      iVar4 += 1;
      iVar5 += 0x68;
    } while (iVar4 < DAT_8007a160);
  }
  return;
}



undefined4 * proc_7F0A2C44(undefined4 *param_1)

{
  undefined4 *puVar1;
  void *virtualAddress;
  uint *virtualAddress_00;
  u32 uVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  undefined4 *puStackX0;
  float afStack64 [12];
  float fStack16;
  float fStack12;
  float fStack8;
  
  puStackX0 = param_1;
  likely_generate_DL_for_image_declaration
            ((uint **)register0x000000ec,(uint *)(DAT_8008d11c + 0xc),2,1,2);
  puVar1 = puStackX0;
  *puStackX0 = 0xbb001001;
  puStackX0[1] = 0xd800d80;
  puStackX0[3] = 0x100000;
  puStackX0[2] = 0xba001402;
  puStackX0[5] = 0x10000;
  puStackX0[4] = 0xba001001;
  puStackX0[7] = 0x3000;
  puStackX0[6] = 0xb6000000;
  puStackX0[9] = 0x2000;
  puStackX0[8] = 0xba000c02;
  puVar7 = puStackX0 + 0xc;
  puStackX0[0xb] = 0x60000;
  puStackX0[10] = 0xb7000000;
  puStackX0 = puStackX0 + 0xe;
  *puVar7 = 0x1030040;
  virtualAddress = (void *)proc_7F078394();
  virtualAddress_00 = (uint *)osVirtualToPhysical(virtualAddress);
  *(uint **)(puVar1 + 0xd) = virtualAddress_00;
  iVar5 = 0;
  iVar6 = 0;
  if (0 < DAT_8007a160) {
    iVar4 = DAT_8007a160;
    do {
      if (0 < *(int *)(DAT_8007a164 + iVar5)) {
        proc_7F0BD6E0();
        proc_7F05892C((undefined4 *)(DAT_8007a164 + iVar5 + 4),
                      (float *)(DAT_8007a164 + iVar5 + 0x10),afStack64);
        fStack16 = fStack16 - (float)ptr_BONDdata->current_model_xpos;
        fStack12 = fStack12 - (float)ptr_BONDdata->current_model_ypos;
        fStack8 = fStack8 - (float)ptr_BONDdata->current_model_zpos;
        proc_7F058C9C((int)afStack64,virtualAddress_00);
        puVar1 = puStackX0;
        *puStackX0 = 0x1020040;
        puStackX0 = puStackX0 + 2;
        uVar2 = osVirtualToPhysical(virtualAddress_00);
        puVar7 = puStackX0;
        puVar1[1] = uVar2;
        *puStackX0 = 0x4200030;
        puStackX0 = puStackX0 + 2;
        virtualAddress_00 = (uint *)osVirtualToPhysical((void *)(DAT_8007a164 + iVar5 + 0x38));
        *(uint **)(puVar7 + 1) = virtualAddress_00;
        puStackX0[1] = 0xa14;
        *puStackX0 = 0xbf000000;
        iVar4 = DAT_8007a160;
        puStackX0 = puStackX0 + 2;
      }
      iVar6 += 1;
      iVar5 += 0x68;
    } while (iVar6 < iVar4);
  }
  puVar1 = puStackX0;
  puVar7 = puStackX0 + 2;
  puStackX0[1] = 0x60000;
  *puStackX0 = 0xb6000000;
  puStackX0 = puStackX0 + 4;
  *puVar7 = 0x1030040;
  uVar3 = proc_7F078374();
  puVar7 = puStackX0;
  puVar1[3] = uVar3;
  *puStackX0 = 0x1020040;
  puStackX0 = puStackX0 + 2;
  uVar3 = proc_7F078354();
  puVar7[1] = uVar3;
  return puStackX0;
}



void proc_7F0A2F30(short *param_1,undefined8 param_2,longlong param_3,float param_4)

{
  int iVar1;
  float in_a3_lo;
  int iVar2;
  int iVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float __x;
  int iStack24;
  
  fVar6 = in_a3_lo * 8.00000000;
  iVar2 = 0;
  iStack24 = 0;
  do {
    iVar3 = 0;
    __x = ((float)(int)(dbl_80057740 - (double)iStack24) * flt_80057748 * 2.00000000) / 360.00000000
    ;
    do {
      fVar4 = sinf(__x);
      fVar5 = cosf(__x);
      *param_1 = (short)(int)(((fVar4 * 4.00000000 * 130.00000000 * (float)(6 - iVar3)) / 5.00000000
                              ) * (float)(int)param_3) + 1;
      param_1[1] = 0;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0;
      *(undefined *)(param_1 + 6) = 0xff;
      *(undefined *)((int)param_1 + 0xd) = 0xff;
      *(undefined *)(param_1 + 7) = 0xff;
      param_1[2] = -(short)(int)((fVar5 * 4.00000000 * 130.00000000 * (float)(6 - iVar3)) /
                                5.00000000);
      if (param_3 < 1) {
        if (param_3 < 0) {
          fVar4 = cosf(__x);
          *(undefined *)((int)param_1 + 0xd) = (char)(int)(127.00000000 - fVar4 * 127.00000000);
          fVar4 = cosf(__x);
          *(char *)(param_1 + 7) = (char)(int)(32.00000000 - fVar4 * 32.00000000);
        }
      }
      else {
        fVar4 = cosf(__x);
        *(char *)(param_1 + 6) = (char)(int)(96.00000000 - fVar4 * 96.00000000);
        fVar4 = cosf(__x);
        *(undefined *)(param_1 + 7) = 0xff;
        *(undefined *)((int)param_1 + 0xd) = (char)(int)(127.00000000 - fVar4 * 127.00000000);
      }
      iVar3 += 1;
      if (iVar2 < 10) {
        iVar1 = (int)fVar6 * 2 + -1;
        if (iVar1 < iVar2) {
          if ((iVar2 < (int)(fVar6 + fVar6)) && (iVar1 < iVar2)) {
            *(char *)((int)param_1 + 0xf) =
                 (char)(int)((fVar6 - (float)(int)fVar6) * 207.00000000) + '0';
          }
          else {
            *(undefined *)((int)param_1 + 0xf) = 0x30;
          }
        }
        else {
          *(undefined *)((int)param_1 + 0xf) = 0xff;
        }
      }
      else {
        if (9 < iVar2) {
          fVar4 = (fVar6 - 5.00000000) * 4.00000000;
          if ((float)iVar2 <= fVar4 + 9.00000000) {
            *(undefined *)((int)param_1 + 0xf) = 0xff;
          }
          else {
            if ((int)(fVar4 + 0.50000000) + 9 < iVar2) {
              *(undefined *)((int)param_1 + 0xf) = 0x30;
            }
            else {
              if ((int)(fVar6 - 5.00000000) * 2 + 8 < iVar2) {
                *(char *)((int)param_1 + 0xf) =
                     (char)(int)((fVar6 - (float)(int)fVar6) * 207.00000000) + '0';
              }
              else {
                *(undefined *)((int)param_1 + 0xf) = 0x30;
              }
            }
          }
        }
      }
      param_1 = param_1 + 8;
    } while (iVar3 != 2);
    iVar2 += 1;
    iStack24 += 5;
  } while (iVar2 != 0x17);
  return;
}



undefined4 * proc_7F0A3330(undefined4 *param_1,int param_2,longlong param_3)

{
  int iVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  uint uVar5;
  
  uVar2 = 0;
  iVar1 = (int)param_3;
  if (param_3 < 0) {
    iVar1 += 1;
  }
  iVar1 = (iVar1 >> 1) + -2;
  puVar3 = param_1;
  if (-1 < iVar1) {
    do {
      *puVar3 = 0x4300040;
      puVar3[1] = param_2;
      puVar4 = puVar3 + 2;
      if ((int)uVar2 < 9) {
        param_1 = puVar4;
        if (((int)uVar2 < 9) && (param_1 = puVar4, (uVar2 & 1) == 0)) {
          param_1 = puVar3 + 4;
          *puVar4 = 0xb1000032;
          puVar3[3] = 0x2110;
        }
      }
      else {
        uVar5 = uVar2 + 3 & 3;
        if (((int)(uVar2 + 3) < 0) && (uVar5 != 0)) {
          uVar5 -= 4;
        }
        param_1 = puVar4;
        if (uVar5 != 0) {
          *puVar4 = 0xb1000032;
          puVar3[3] = 0x2110;
          param_1 = puVar3 + 4;
        }
      }
      uVar2 = (int)((uVar2 + 1) * 0x1000000) >> 0x18;
      param_2 += 0x20;
      puVar3 = param_1;
    } while ((int)uVar2 <= iVar1);
  }
  *param_1 = 0xb8000000;
  param_1[1] = 0;
  return param_1 + 2;
}



void proc_7F0A33F8(short *param_1,int param_2,float param_3,longlong param_4)

{
  short sVar1;
  short sVar2;
  longlong in_a3;
  short *psVar3;
  int iVar4;
  float fVar5;
  float fVar6;
  undefined uVar7;
  float __x;
  
  if (in_a3 != 0) {
    *param_1 = 1;
    param_1[1] = 0;
    param_1[2] = 0;
    param_1[3] = 0;
    param_1[4] = 0;
    param_1[5] = 0;
    *(undefined *)(param_1 + 6) = 0;
    *(undefined *)((int)param_1 + 0xd) = 0x2c;
    *(undefined *)(param_1 + 7) = 0;
    *(undefined *)((int)param_1 + 0xf) = 0xb0;
    param_1 = param_1 + 8;
  }
  iVar4 = 7;
  if (6 < param_2 + -7) {
    do {
      __x = ((float)iVar4 * flt_8005774C) / (float)param_2;
      fVar5 = sinf(__x);
      fVar6 = cosf(__x);
      sVar1 = (short)(int)(fVar5 * 520.00000000 * (float)param_4);
      *param_1 = sVar1 + 1;
      param_1[1] = 0;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0;
      sVar2 = (short)(int)(fVar6 * 520.00000000 * (float)param_4);
      param_1[2] = -sVar2;
      fVar5 = cosf(__x);
      fVar5 = 0.00000000 - fVar5 * 0.00000000;
      if (false) {
        fVar6 = ROUND(fVar5);
      }
      else {
        fVar6 = FLOOR(fVar5);
      }
      uVar7 = (undefined)(int)fVar6;
      if (false) {
        if (false) {
          fVar5 = ROUND(fVar5 - 2147483648.00000000);
        }
        else {
          fVar5 = FLOOR(fVar5 - 2147483648.00000000);
        }
        if (false) goto LAB_7f0a35c0;
        uVar7 = (undefined)(int)fVar5;
      }
      else {
        if ((int)fVar6 < 0) {
LAB_7f0a35c0:
          uVar7 = 0xff;
        }
      }
      *(undefined *)(param_1 + 6) = uVar7;
      fVar5 = cosf(__x);
      fVar5 = 44.00000000 - fVar5 * 20.00000000;
      if (false) {
        fVar6 = ROUND(fVar5);
      }
      else {
        fVar6 = FLOOR(fVar5);
      }
      uVar7 = (undefined)(int)fVar6;
      if (false) {
        if (false) {
          fVar5 = ROUND(fVar5 - 2147483648.00000000);
        }
        else {
          fVar5 = FLOOR(fVar5 - 2147483648.00000000);
        }
        if (false) goto LAB_7f0a3658;
        uVar7 = (undefined)(int)fVar5;
      }
      else {
        if ((int)fVar6 < 0) {
LAB_7f0a3658:
          uVar7 = 0xff;
        }
      }
      *(undefined *)((int)param_1 + 0xd) = uVar7;
      fVar5 = cosf(__x);
      fVar5 = 0.00000000 - fVar5 * 0.00000000;
      if (false) {
        fVar6 = ROUND(fVar5);
      }
      else {
        fVar6 = FLOOR(fVar5);
      }
      uVar7 = (undefined)(int)fVar6;
      if (false) {
        if (false) {
          fVar5 = ROUND(fVar5 - 2147483648.00000000);
        }
        else {
          fVar5 = FLOOR(fVar5 - 2147483648.00000000);
        }
        if (false) goto LAB_7f0a36f0;
        uVar7 = (undefined)(int)fVar5;
      }
      else {
        if ((int)fVar6 < 0) {
LAB_7f0a36f0:
          uVar7 = 0xff;
        }
      }
      *(undefined *)(param_1 + 7) = uVar7;
      *(undefined *)((int)param_1 + 0xf) = 0xb0;
      psVar3 = param_1 + 8;
      if ((iVar4 != 0) && (iVar4 < param_2)) {
        *psVar3 = 1 - sVar1;
        param_1[9] = 0;
        param_1[10] = -sVar2;
        param_1[0xb] = 0;
        param_1[0xc] = 0;
        param_1[0xd] = 0;
        *(undefined *)(param_1 + 0xe) = 0xff;
        *(undefined *)((int)param_1 + 0x1d) = 0xff;
        *(undefined *)(param_1 + 0xf) = 0xff;
        fVar5 = cosf(__x);
        fVar5 = 0.00000000 - fVar5 * 0.00000000;
        if (false) {
          fVar6 = ROUND(fVar5);
        }
        else {
          fVar6 = FLOOR(fVar5);
        }
        uVar7 = (undefined)(int)fVar6;
        if (false) {
          if (false) {
            fVar5 = ROUND(fVar5 - 2147483648.00000000);
          }
          else {
            fVar5 = FLOOR(fVar5 - 2147483648.00000000);
          }
          if (false) goto LAB_7f0a37cc;
          uVar7 = (undefined)(int)fVar5;
        }
        else {
          if ((int)fVar6 < 0) {
LAB_7f0a37cc:
            uVar7 = 0xff;
          }
        }
        *(undefined *)(param_1 + 0xe) = uVar7;
        fVar5 = cosf(__x);
        fVar5 = 44.00000000 - fVar5 * 20.00000000;
        if (false) {
          fVar6 = ROUND(fVar5);
        }
        else {
          fVar6 = FLOOR(fVar5);
        }
        uVar7 = (undefined)(int)fVar6;
        if (false) {
          if (false) {
            fVar5 = ROUND(fVar5 - 2147483648.00000000);
          }
          else {
            fVar5 = FLOOR(fVar5 - 2147483648.00000000);
          }
          if (false) goto LAB_7f0a3864;
          uVar7 = (undefined)(int)fVar5;
        }
        else {
          if ((int)fVar6 < 0) {
LAB_7f0a3864:
            uVar7 = 0xff;
          }
        }
        *(undefined *)((int)param_1 + 0x1d) = uVar7;
        fVar5 = cosf(__x);
        fVar5 = 0.00000000 - fVar5 * 0.00000000;
        if (false) {
          fVar6 = ROUND(fVar5);
        }
        else {
          fVar6 = FLOOR(fVar5);
        }
        uVar7 = (undefined)(int)fVar6;
        if (false) {
          if (false) {
            fVar5 = ROUND(fVar5 - 2147483648.00000000);
          }
          else {
            fVar5 = FLOOR(fVar5 - 2147483648.00000000);
          }
          if (false) goto LAB_7f0a38fc;
          uVar7 = (undefined)(int)fVar5;
        }
        else {
          if ((int)fVar6 < 0) {
LAB_7f0a38fc:
            uVar7 = 0xff;
          }
        }
        *(undefined *)(param_1 + 0xf) = uVar7;
        *(undefined *)((int)param_1 + 0x1f) = 0xb0;
        psVar3 = param_1 + 0x10;
      }
      iVar4 += 2;
      param_1 = psVar3;
    } while (iVar4 <= param_2 + -7);
  }
  return;
}



undefined4 * proc_7F0A3978(undefined4 *param_1,int param_2,undefined8 param_3,longlong param_4)

{
  undefined4 *puVar1;
  int iVar2;
  
  if (param_4 == 0) {
    iVar2 = 0;
    do {
      iVar2 = (iVar2 + 1) * 0x1000000 >> 0x18;
      param_1[1] = param_2;
      *param_1 = 0x4300040;
      param_1[3] = 0x2110;
      param_1[2] = 0xb1000032;
      param_1 = param_1 + 4;
      param_2 += 0x20;
    } while (iVar2 < 8);
  }
  else {
    param_1[1] = param_2 + 0xf0;
    *param_1 = 0x4300040;
    param_1[2] = 0x4040010;
    param_1[3] = param_2;
    iVar2 = 7;
    param_1[5] = 0x42;
    param_1[4] = 0xb1000003;
    puVar1 = param_1 + 6;
    do {
      param_1 = puVar1;
      param_1[1] = iVar2 * 0x20 + param_2 + 0x10;
      *param_1 = 0x4300040;
      iVar2 = (iVar2 + -1) * 0x1000000 >> 0x18;
      param_1[3] = param_2;
      param_1[2] = 0x4040010;
      param_1[5] = 0x3140;
      param_1[4] = 0xb1000042;
      puVar1 = param_1 + 6;
    } while (-1 < iVar2);
    param_1[7] = 0x10;
    param_1[6] = 0xb1000004;
    param_1 = param_1 + 8;
  }
  *param_1 = 0xb8000000;
  param_1[1] = 0;
  return param_1 + 2;
}



short * proc_7F0A3AB8(short *param_1,short param_2,short param_3,short param_4,short param_5,
                     short param_6,short param_7)

{
  int iVar1;
  int iVar2;
  short sVar3;
  
  param_2 += param_6;
  iVar1 = 0;
  do {
    iVar2 = 0;
    sVar3 = param_3 + param_7;
    do {
      iVar2 += 1;
      param_1[2] = sVar3;
      sVar3 += param_5;
      *param_1 = param_2;
      param_1[1] = 0;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[5] = 0;
      *(undefined *)(param_1 + 6) = 0x20;
      *(undefined *)((int)param_1 + 0xd) = 0x70;
      *(undefined *)(param_1 + 7) = 0x20;
      *(undefined *)((int)param_1 + 0xf) = 0xf0;
      param_1 = param_1 + 8;
    } while (iVar2 != 2);
    iVar1 += 1;
    param_2 += param_4;
  } while (iVar1 != 2);
  return param_1;
}



undefined4 * proc_7F0A3B40(undefined4 *param_1,undefined4 param_2)

{
  *param_1 = 0x4300040;
  param_1[1] = param_2;
  param_1[3] = 0x2110;
  param_1[2] = 0xb1000032;
  return param_1 + 4;
}



void proc_7F0A3B70(int param_1,undefined *param_2)

{
  int iVar1;
  
  iVar1 = param_1 * 4;
  *param_2 = *(undefined *)(&dword_80040960 + param_1);
  param_2[1] = *(undefined *)((int)&dword_80040960 + iVar1 + 1);
  param_2[2] = *(undefined *)((int)&dword_80040960 + iVar1 + 2);
  param_2[3] = *(undefined *)((int)&dword_80040960 + iVar1 + 3);
  return;
}



void proc_7F0A3BA4(int param_1,undefined *param_2)

{
  int iVar1;
  
  iVar1 = param_1 * 4;
  *(undefined *)(&dword_80040960 + param_1) = *param_2;
  *(undefined *)((int)&dword_80040960 + iVar1 + 1) = param_2[1];
  *(undefined *)((int)&dword_80040960 + iVar1 + 2) = param_2[2];
  *(undefined *)((int)&dword_80040960 + iVar1 + 3) = param_2[3];
  return;
}



void proc_7F0A3BD8(void)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)null_ARRAY_8007a170;
  do {
    puVar1 = puVar1 + 0xb;
    puVar1[3] = 0;
    *(undefined2 *)(puVar1 + 1) = 0;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 < null_ARRAY_8007a4e0);
  return;
}



void proc_7F0A3C08(undefined4 *param_1,undefined4 *param_2,int param_3,float param_4,short param_5)

{
  u32 uVar1;
  int iVar2;
  float __x;
  float fVar3;
  float fVar4;
  undefined2 in_stack_00000012;
  
  uVar1 = get_random_value();
  __x = (float)uVar1;
  if ((int)uVar1 < 0) {
    __x = __x + 4294967296.00000000;
  }
  __x = __x * 0.00000000 * flt_80057750;
  *param_1 = 0;
  *(undefined2 *)((int)param_1 + 6) = in_stack_00000012;
  if (param_3 == 4) {
    *(undefined2 *)(param_1 + 1) = 1;
    param_1[2] = 0x3f800000;
    param_1[3] = DAT_8008d0cc;
  }
  else {
    if (param_3 == 1) {
      *(undefined2 *)(param_1 + 1) = 0xb;
      param_1[2] = 0x3f000000;
      param_1[3] = DAT_8008d0c0;
    }
    else {
      if (param_3 == 3) {
        *(undefined2 *)(param_1 + 1) = 9;
        param_1[2] = 0x3f000000;
        param_1[3] = DAT_8008d0c4;
      }
      else {
        if (param_3 == 6) {
          *(undefined2 *)(param_1 + 1) = 100;
          param_1[2] = 0;
          param_1[3] = DAT_8008d0cc;
        }
        else {
          *(undefined2 *)(param_1 + 1) = 0xb;
          param_1[2] = 0x3f000000;
          param_1[3] = DAT_8008d0c0;
        }
      }
    }
  }
  iVar2 = param_3 * 4;
  *(undefined *)(param_1 + 10) = *(undefined *)(&dword_80040960 + param_3);
  *(undefined *)((int)param_1 + 0x29) = *(undefined *)((int)&dword_80040960 + iVar2 + 1);
  *(undefined *)((int)param_1 + 0x2a) = *(undefined *)((int)&dword_80040960 + iVar2 + 2);
  *(undefined *)((int)param_1 + 0x2b) = *(undefined *)((int)&dword_80040960 + iVar2 + 3);
  param_1[4] = *param_2;
  param_1[5] = param_2[1];
  param_1[6] = param_2[2];
  uVar1 = get_random_value();
  fVar3 = (float)uVar1;
  if ((int)uVar1 < 0) {
    fVar3 = fVar3 + 4294967296.00000000;
  }
  fVar4 = (float)(int)param_5 * (fVar3 * 0.00000000 * 0.25000000 + 1.00000000) * flt_80057754;
  *(float *)(param_1 + 9) = fVar4;
  fVar3 = cosf(__x);
  *(float *)(param_1 + 7) = fVar3 * fVar4;
  __x = sinf(__x);
  *(float *)(param_1 + 8) = __x * fVar4;
  return;
}



undefined4 * proc_7F0A3E1C(undefined4 *param_1,int param_2,float param_3,short param_4)

{
  short sVar1;
  undefined4 *puVar2;
  
  sVar1 = null_ARRAY_8007a170._4_2_;
  puVar2 = (undefined4 *)null_ARRAY_8007a170;
  while( true ) {
    if (sVar1 == 0) {
      proc_7F0A3C08(puVar2,param_1,param_2,(float)(int)param_4,param_4);
      return puVar2;
    }
    if (null_ARRAY_8007a170 + 0x36f < puVar2 + 0xb) break;
    sVar1 = *(short *)(puVar2 + 0xc);
    puVar2 = puVar2 + 0xb;
  }
  return NULL;
}



void proc_7F0A3EA0(void)

{
  int *piVar1;
  short sVar2;
  int iVar3;
  
  sVar2 = null_ARRAY_8007a170._4_2_;
  piVar1 = (int *)null_ARRAY_8007a170;
  while( true ) {
    if (0 < sVar2) {
      iVar3 = *piVar1 + clock_timer;
      *piVar1 = iVar3;
      if ((-1 < (longlong)iVar3) && ((longlong)*(short *)(piVar1 + 1) <= (longlong)iVar3)) {
        *(undefined2 *)(piVar1 + 1) = 0;
      }
    }
    if (null_ARRAY_8007a170 + 0x36f < piVar1 + 0xb) break;
    sVar2 = *(short *)(piVar1 + 0xc);
    piVar1 = piVar1 + 0xb;
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0A3F04(void)

{
  byte bVar1;
  short sVar2;
  longlong lVar3;
  float *virtualAddress;
  float *pfVar4;
  void *virtualAddress_00;
  u32 uVar5;
  int *in_a0_lo;
  uint **in_a1_lo;
  int in_a2_lo;
  uint *puVar6;
  uint *puVar7;
  int iVar8;
  f32 fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar29;
  float in_f12;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  uint *puStack24;
  float *pfStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  if (((0 < *(short *)(in_a0_lo + 1)) && (-1 < *in_a0_lo)) &&
     (lVar3 = proc_7F078A58((float *)(in_a0_lo + 4),in_f12), lVar3 != 0)) {
    fStack16 = DAT_80040980;
    fStack12 = DAT_80040984;
    fStack4 = (float)DAT_8004098c;
    fStack8 = DAT_80040988;
    virtualAddress = (float *)proc_7F078444();
    puStack24 = *in_a1_lo;
    pfStack20 = virtualAddress;
    proc_7F0BD6C4(4);
    sVar2 = *(short *)((int)in_a0_lo + 6);
    pfVar4 = (float *)proc_7F0BCA14((int)sVar2);
    fStack4 = (float)in_a0_lo[10];
    iVar8 = *in_a0_lo;
    fVar37 = (float)in_a0_lo[2];
    fVar30 = (float)in_a0_lo[4];
    fVar10 = (float)in_a0_lo[5];
    fVar16 = (float)in_a0_lo[6];
    fVar24 = (float)in_a0_lo[7];
    fVar17 = *pfStack20;
    fVar23 = (float)in_a0_lo[7];
    fVar31 = pfStack20[1];
    fVar25 = (float)in_a0_lo[7];
    fVar18 = pfStack20[2];
    fVar11 = (float)in_a0_lo[8];
    fVar32 = *pfStack20;
    fVar26 = (float)in_a0_lo[8];
    fVar19 = pfStack20[1];
    fVar12 = (float)in_a0_lo[8];
    fVar33 = pfStack20[2];
    fVar27 = (float)in_a0_lo[7];
    fVar20 = pfStack20[4];
    fVar13 = (float)in_a0_lo[7];
    fVar34 = pfStack20[5];
    fVar28 = (float)in_a0_lo[7];
    fVar21 = pfStack20[6];
    fVar14 = (float)in_a0_lo[8];
    fVar35 = pfStack20[4];
    fVar29 = (float)in_a0_lo[8];
    fVar22 = pfStack20[5];
    fVar15 = (float)in_a0_lo[8];
    fVar36 = pfStack20[6];
    *virtualAddress = fStack16;
    virtualAddress[1] = fStack12;
    virtualAddress[2] = fStack8;
    virtualAddress[3] = fStack4;
    virtualAddress[4] = fStack16;
    virtualAddress[5] = fStack12;
    virtualAddress[6] = fStack8;
    virtualAddress[7] = fStack4;
    virtualAddress[8] = fStack16;
    virtualAddress[9] = fStack12;
    virtualAddress[10] = fStack8;
    virtualAddress[0xb] = fStack4;
    virtualAddress[0xc] = fStack16;
    virtualAddress[0xd] = fStack12;
    virtualAddress[0xe] = fStack8;
    virtualAddress[0xf] = fStack4;
    fVar9 = proc_7F0B483C();
    *(short *)virtualAddress =
         (short)(int)(((fVar30 - fVar17 * fVar24) - fVar35 * fVar14) * (float)fVar9 - *pfVar4);
    fVar9 = proc_7F0B483C();
    *(undefined2 *)((int)virtualAddress + 2) =
         (short)(int)(((fVar10 - fVar31 * fVar23) - fVar22 * fVar29) * (float)fVar9 - pfVar4[1]);
    fVar9 = proc_7F0B483C();
    *(short *)(virtualAddress + 1) =
         (short)(int)(((fVar16 - fVar18 * fVar25) - fVar36 * fVar15) * (float)fVar9 - pfVar4[2]);
    iVar8 = (int)((float)iVar8 * fVar37) * 0xc;
    bVar1 = *(byte *)(in_a0_lo[3] + iVar8 + 4);
    *(undefined2 *)((int)virtualAddress + 10) = 0;
    *(ushort *)(virtualAddress + 2) = (ushort)bVar1 << 5;
    fVar9 = proc_7F0B483C();
    *(short *)(virtualAddress + 4) =
         (short)(int)(((fVar30 + fVar32 * fVar11) - fVar20 * fVar27) * (float)fVar9 - *pfVar4);
    fVar9 = proc_7F0B483C();
    *(undefined2 *)((int)virtualAddress + 0x12) =
         (short)(int)(((fVar10 + fVar19 * fVar26) - fVar34 * fVar13) * (float)fVar9 - pfVar4[1]);
    fVar9 = proc_7F0B483C();
    fVar37 = pfVar4[2];
    *(undefined2 *)(virtualAddress + 6) = 0;
    *(undefined2 *)((int)virtualAddress + 0x1a) = 0;
    *(short *)(virtualAddress + 5) =
         (short)(int)(((fVar16 + fVar33 * fVar12) - fVar21 * fVar28) * (float)fVar9 - fVar37);
    fVar9 = proc_7F0B483C();
    *(short *)(virtualAddress + 8) =
         (short)(int)((fVar30 + fVar17 * fVar24 + fVar35 * fVar14) * (float)fVar9 - *pfVar4);
    fVar9 = proc_7F0B483C();
    *(undefined2 *)((int)virtualAddress + 0x22) =
         (short)(int)((fVar10 + fVar31 * fVar23 + fVar22 * fVar29) * (float)fVar9 - pfVar4[1]);
    fVar9 = proc_7F0B483C();
    fVar23 = pfVar4[2];
    *(undefined2 *)(virtualAddress + 10) = 0;
    *(short *)(virtualAddress + 9) =
         (short)(int)((fVar16 + fVar18 * fVar25 + fVar36 * fVar15) * (float)fVar9 - fVar23);
    *(short *)((int)virtualAddress + 0x2a) = (ushort)*(byte *)(in_a0_lo[3] + iVar8 + 5) << 5;
    fVar9 = proc_7F0B483C();
    *(short *)(virtualAddress + 0xc) =
         (short)(int)(((fVar30 - fVar32 * fVar11) + fVar20 * fVar27) * (float)fVar9 - *pfVar4);
    fVar9 = proc_7F0B483C();
    *(undefined2 *)((int)virtualAddress + 0x32) =
         (short)(int)(((fVar10 - fVar19 * fVar26) + fVar34 * fVar13) * (float)fVar9 - pfVar4[1]);
    fVar9 = proc_7F0B483C();
    puVar6 = puStack24;
    *(short *)(virtualAddress + 0xd) =
         (short)(int)(((fVar16 - fVar33 * fVar12) + fVar21 * fVar28) * (float)fVar9 - pfVar4[2]);
    *(ushort *)(virtualAddress + 0xe) = (ushort)*(byte *)(in_a0_lo[3] + iVar8 + 4) << 5;
    *(short *)((int)virtualAddress + 0x3a) = (ushort)*(byte *)(in_a0_lo[3] + iVar8 + 5) << 5;
    puVar7 = puStack24 + 2;
    puStack24[1] = 0x2000;
    *puStack24 = 0xb7000000;
    puStack24 = puStack24 + 4;
    *puVar7 = 0x1030040;
    virtualAddress_00 = (void *)proc_7F078394();
    uVar5 = osVirtualToPhysical(virtualAddress_00);
    puVar6[3] = uVar5;
    puStack24 = proc_7F0BC9C4(puStack24,(int)sVar2);
    likely_generate_DL_for_image_declaration
              (&puStack24,(uint *)(in_a0_lo[3] + iVar8),4,(longlong)in_a2_lo,2);
    puVar6 = puStack24;
    *puStack24 = 0x4300040;
    puStack24 = puStack24 + 2;
    uVar5 = osVirtualToPhysical(virtualAddress);
    puVar7 = puStack24;
    puVar6[1] = uVar5;
    puVar6 = puStack24 + 2;
    puStack24[1] = 0x2010;
    *puStack24 = 0xb1000032;
    puStack24 = puStack24 + 4;
    *puVar6 = 0x1030040;
    virtualAddress_00 = (void *)proc_7F078374();
    uVar5 = osVirtualToPhysical(virtualAddress_00);
    puVar7[3] = uVar5;
    *in_a1_lo = puStack24;
  }
  return;
}



void proc_7F0A4528(undefined8 param_1,undefined8 param_2)

{
  undefined1 *puVar1;
  
  puVar1 = null_ARRAY_8007a170;
  do {
    proc_7F0A3F04();
    puVar1 = (undefined1 *)((undefined4 *)puVar1 + 0xb);
  } while (puVar1 < null_ARRAY_8007a4e0);
  return;
}



float proc_7F0A4594(int param_1)

{
  float *pfVar1;
  float fStack12;
  undefined4 uStack8;
  float fStack4;
  
  fStack12 = *(float *)(param_1 + 0x10);
  uStack8 = *(undefined4 *)(param_1 + 0x14);
  fStack4 = *(float *)(param_1 + 0x18);
  pfVar1 = (float *)proc_7F0783C4();
  proc_7F058474(pfVar1,&fStack12);
  return -fStack4;
}



void proc_7F0A45D8(void)

{
  undefined4 *puVar1;
  
  puVar1 = null_ARRAY_8007a4e0;
  do {
    puVar1 = puVar1 + 0xf;
    *(undefined2 *)(puVar1 + 1) = 0;
    puVar1 = puVar1;
  } while (puVar1 < (undefined4 *)0x8007b098);
  return;
}



undefined4 *
proc_7F0A4600(undefined4 *param_1,undefined4 *param_2,int param_3,float param_4,float param_5,
             undefined2 param_6)

{
  short sVar1;
  undefined4 *puVar2;
  undefined4 in_stack_00000010;
  
  sVar1 = null_ARRAY_8007a4e0[1]._0_2_;
  puVar2 = null_ARRAY_8007a4e0;
  while( true ) {
    if (sVar1 == 0) {
      proc_7F0A3C08(puVar2,param_1,param_3,param_5,SUB42(param_5,0));
      puVar2[0xb] = *param_2;
      puVar2[0xc] = param_2[1];
      puVar2[0xd] = param_2[2];
      puVar2[0xe] = in_stack_00000010;
      return puVar2;
    }
    if ((undefined4 *)((int)null_ARRAY_8007a4e0 + 2999U) < puVar2 + 0xf) break;
    sVar1 = *(short *)(puVar2 + 0x10);
    puVar2 = puVar2 + 0xf;
  }
  return NULL;
}



void proc_7F0A46A0(void)

{
  short sVar1;
  int *piVar2;
  int iVar3;
  float in_f12;
  float extraout_f12;
  
  sVar1 = null_ARRAY_8007a4e0[1]._0_2_;
  piVar2 = null_ARRAY_8007a4e0;
  while( true ) {
    if (0 < sVar1) {
      iVar3 = *piVar2 + clock_timer;
      *piVar2 = iVar3;
      if (-1 < (longlong)iVar3) {
        if ((longlong)iVar3 < (longlong)*(short *)(piVar2 + 1)) {
          proc_7F057D88((float *)(piVar2 + 4),(float *)(piVar2 + 0xb),in_f12);
          in_f12 = extraout_f12;
          if ((float)piVar2[5] < (float)piVar2[0xe]) {
            *(undefined2 *)(piVar2 + 1) = 0;
            in_f12 = extraout_f12;
          }
        }
        else {
          *(undefined2 *)(piVar2 + 1) = 0;
        }
      }
    }
    if ((int *)((int)null_ARRAY_8007a4e0 + 2999) < piVar2 + 0xf) break;
    sVar1 = *(short *)(piVar2 + 0x10);
    piVar2 = piVar2 + 0xf;
  }
  return;
}



void proc_7F0A4768(undefined8 param_1,undefined8 param_2)

{
  undefined4 *puVar1;
  
  puVar1 = null_ARRAY_8007a4e0;
  do {
    proc_7F0A3F04();
    puVar1 = puVar1 + 0xf;
  } while (puVar1 < (undefined4 *)0x8007b098);
  return;
}



void proc_7F0A47D4(void)

{
  proc_7F0A3BD8();
  proc_7F0A45D8();
  return;
}



void proc_7F0A47FC(void)

{
  proc_7F0A3EA0();
  proc_7F0A46A0();
  return;
}



void proc_7F0A4824(undefined8 param_1,undefined8 param_2)

{
  proc_7F0A4528(param_1,param_2);
  proc_7F0A4768((longlong)(int)param_1,(longlong)(int)param_2);
  return;
}



void proc_7F0A4860(void)

{
  return;
}



void init_watch_at_start_of_stage(void)

{
  DAT_80040994 = 0;
  DAT_80040998 = 0;
  DAT_8004099c = 0;
  dword_800409A0 = 4;
  dword_800409A4 = 0;
  dword_800409A8 = 0;
  dword_800409AC = 0;
  dword_800409B0 = 0;
  dword_800409B4 = 0;
  dword_800409B8 = 0;
  dword_800409BC = 0;
  dword_800409C0 = 0;
  dword_800409C4 = 0;
  dword_800409C8 = 0;
  dword_800409CC = 0;
  dword_800409D0 = 0xffffffff;
  DAT_800409d4 = 0;
  ptr_BONDdata->neg_vspacing_for_control_type_entry = 0;
  ptr_BONDdata->cur_player_control_type_1 = 0;
  ptr_BONDdata->cur_player_control_type_0 = 0;
  ptr_BONDdata->cur_player_control_type_2 = 0.00000000;
  ptr_BONDdata->has_set_control_type_data = 1;
  dword_800409D8 = 8;
  controlstick_lr_enabled = 0;
  dword_80040AE0 = 0;
  dword_80040AE4 = 0;
  flt_80040AE8 = 0.00000000;
  flt_80040AEC = 0.00000000;
  dword_80040AF0 = 45.00000000;
  dword_80040AF4 = 0xff00a0;
  dword_80040AF8 = 10;
  dword_80040AFC = 0xff;
  dword_80040B00 = 10;
  dword_80040B04 = 0xe0;
  dword_80040B08 = 0;
  dword_80040B0C = 0xffa0;
  dword_80040B10 = 0xf800;
  dword_80040B14 = 0;
  dword_80040B18 = 0;
  dword_80040B1C = 2.50000000;
  dword_80040B20 = 0.00000000;
  dword_80040B24 = 0.00000000;
  dword_80040B28 = 0.00000000;
  dword_80040B2C = 0;
  dword_80040B30 = 0.00000000;
  dword_80040B34 = 0.00000000;
  dword_80040B38 = 0.00000000;
  dword_80040B3C = 0;
  dword_80040B40 = 0;
  dword_80040B44 = 1;
  dword_80040B48 = 0x32;
  dword_80040B4C = 0x32;
  dword_80040B50 = 0x32;
  dword_80040B54 = 0x32;
  proc_7F01D500();
  mission_failed_or_aborted = FALSE;
  return;
}



void controller_deadzone_related(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  if (10 < lVar1) {
    dword_80040B50 += 1;
  }
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  if (lVar1 < -10) {
    dword_80040B50 += -1;
  }
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  if (10 < lVar1) {
    dword_80040B54 += -1;
  }
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  if (lVar1 < -10) {
    dword_80040B54 += 1;
  }
  return;
}



uint * proc_7F0A4B40(undefined4 *param_1)

{
  longlong lVar1;
  undefined4 *DL;
  uint *puVar2;
  int iStack52;
  int iStack48;
  int iStack44;
  int *piStack40;
  byte abStack36 [36];
  
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  if (10 < lVar1) {
    dword_80040B48 += 1;
  }
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  if (lVar1 < -10) {
    dword_80040B48 -= 1;
  }
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  if (10 < lVar1) {
    dword_80040B4C -= 1;
  }
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  if (lVar1 < -10) {
    dword_80040B4C += 1;
  }
  *param_1 = 0xb900031d;
  param_1[1] = 0x504240;
  param_1[2] = 0xfcffffff;
  param_1[3] = 0xfffdf6fb;
  param_1[4] = 0xfa000000;
  param_1[5] = 0xff0000ff;
  param_1[6] = (dword_80040B48 + 1 & 0x3ff) << 0xe | 0xf6000000 | (dword_80040B4C + 1 & 0x3ff) << 2;
  param_1[7] = (dword_80040B48 & 0x3ff) << 0xe | (dword_80040B4C & 0x3ff) << 2;
  piStack40 = D_80040EAC;
  iStack44 = D_80040EB0;
  sprintf((char *)abStack36,aDD,dword_80040B48,dword_80040B4C);
  DL = microcode_constructor(param_1 + 8);
  proc_7F0AE98C(&iStack52,&iStack48,abStack36,iStack44,piStack40,0);
  puVar2 = en_text_write_stuff(DL,&dword_80040B48,&dword_80040B4C,abStack36,iStack44,(int)piStack40,
                               0xff0000ff,iStack48,iStack52,0,0);
  dword_80040B4C = (dword_80040B4C - *(int *)(iStack44 + 0x890)) + 1;
  return puVar2;
}



undefined8 proc_7F0A4D74(void)

{
  longlong controllercount;
  undefined8 uVar1;
  int controllertype;
  
  controllercount = get_attached_controller_count();
  if (controllercount < 2) {
    uVar1 = 0;
  }
  else {
    controllertype = cur_player_get_control_type();
    if (controllertype < 4) {
      uVar1 = 0;
    }
    else {
      uVar1 = 1;
    }
  }
  return uVar1;
}



int cur_player_get_control_type(void)

{
  return ptr_BONDdata->cur_player_control_type_0;
}



void cur_player_set_control_type(int param_1)

{
  int iVar1;
  
  ptr_BONDdata->cur_player_control_type_0 = param_1;
  iVar1 = 10;
  ptr_BONDdata->cur_player_control_type_1 = param_1;
  ptr_BONDdata->cur_player_control_type_2 = (float)param_1;
  if (j_text_trigger != 0) {
    iVar1 = 0xe;
  }
  ptr_BONDdata->neg_vspacing_for_control_type_entry = -(iVar1 * param_1);
  ptr_BONDdata->has_set_control_type_data = 1;
  return;
}



u32 get_cur_player_look_vertical_inverted(void)

{
  return cur_player_look_vertical_inverted;
}



void set_cur_player_look_vertical_inverted(u32 param_1)

{
  cur_player_look_vertical_inverted = param_1;
  return;
}



u32 cur_player_get_autoaim(void)

{
  return cur_player_autoaim_setting;
}



void cur_player_set_autoaim(u32 param_1)

{
  cur_player_autoaim_setting = param_1;
  return;
}



undefined4 cur_player_get_lookahead(void)

{
  return cur_player_lookahead_setting;
}



void cur_player_set_lookahead(undefined4 param_1)

{
  cur_player_lookahead_setting = param_1;
  return;
}



undefined4 cur_player_get_aim_control(void)

{
  return cur_player_aim_control;
}



void cur_player_set_aim_control(undefined4 param_1)

{
  cur_player_aim_control = param_1;
  return;
}



undefined4 cur_player_get_sight_onscreen_control(void)

{
  return cur_player_sight_onscreen;
}



void cur_player_set_sight_onscreen_control(undefined4 param_1)

{
  cur_player_sight_onscreen = param_1;
  return;
}



undefined4 cur_player_get_ammo_onscreen_setting(void)

{
  return cur_player_ammo_onscreen_setting;
}



void cur_player_set_ammo_onscreen_setting(undefined4 param_1)

{
  cur_player_ammo_onscreen_setting = param_1;
  return;
}



undefined4 cur_player_get_screen_setting(void)

{
  return cur_player_screen_setting;
}



void cur_player_set_screen_setting(undefined4 param_1)

{
  cur_player_screen_setting = param_1;
  return;
}



undefined4 get_screen_ratio(void)

{
  return screen_ratio;
}



void set_screen_ratio(undefined4 param_1)

{
  screen_ratio = param_1;
  return;
}



int ** proc_7F0A4EF8(void)

{
  int **ppiVar1;
  
  ppiVar1 = (int **)&dword_800409A8;
  if (dword_800409A8 == 1) {
    dword_800409A8 = 0;
  }
  else {
    dword_800409A8 = 1;
    ppiVar1 = play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
  }
  return ppiVar1;
}



void proc_7F0A4F44(void)

{
  dword_800409A8 = 0;
  return;
}



ulonglong is_holding_greater_than_2E_left_on_stick(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  return (ulonglong)(lVar1 < -0x2d);
}



ulonglong is_holding_greater_than_2E_right_on_stick(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_horz_stick_pos('\0');
  return (ulonglong)(lVar1 < 0x2e) ^ 1;
}



undefined4 get_controlstick_lr_enabled(void)

{
  return controlstick_lr_enabled;
}



void set_controlstick_lr_disabled(void)

{
  controlstick_lr_enabled = 0;
  return;
}



ulonglong proc_7F0A4FB0(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = is_holding_greater_than_2E_left_on_stick();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = get_controlstick_lr_enabled();
    bVar1 = iVar3 != 0;
  }
  return (ulonglong)bVar1;
}



ulonglong proc_7F0A4FEC(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = is_holding_greater_than_2E_right_on_stick();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = get_controlstick_lr_enabled();
    bVar1 = iVar3 != 0;
  }
  return (ulonglong)bVar1;
}



ulonglong proc_7F0A5028(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  return (ulonglong)(lVar1 < 0x2e) ^ 1;
}



ulonglong proc_7F0A504C(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  return (ulonglong)(lVar1 < -0x2d);
}



undefined4 proc_7F0A5070(void)

{
  return dword_80040AE0;
}



void proc_7F0A507C(void)

{
  dword_80040AE0 = 0;
  return;
}



ulonglong proc_7F0A5088(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = proc_7F0A5028();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = proc_7F0A5070();
    bVar1 = iVar3 != 0;
  }
  return (ulonglong)bVar1;
}



ulonglong proc_7F0A50C4(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = proc_7F0A504C();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = proc_7F0A5070();
    bVar1 = iVar3 != 0;
  }
  return (ulonglong)bVar1;
}



ulonglong proc_7F0A5100(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  return (ulonglong)(lVar1 < 0x10) ^ 1;
}



ulonglong proc_7F0A5124(void)

{
  longlong lVar1;
  
  lVar1 = get_cur_controller_vert_stick_pos('\0');
  return (ulonglong)(lVar1 < -0xf);
}



undefined4 proc_7F0A5148(void)

{
  return dword_80040AE4;
}



void proc_7F0A5154(void)

{
  dword_80040AE4 = 0;
  return;
}



ulonglong proc_7F0A5160(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = proc_7F0A5100();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = proc_7F0A5148();
    bVar1 = iVar3 == 0;
  }
  return (ulonglong)bVar1;
}



ulonglong proc_7F0A519C(void)

{
  bool bVar1;
  ulonglong uVar2;
  int iVar3;
  
  uVar2 = proc_7F0A5124();
  bVar1 = uVar2 != 0;
  if (bVar1) {
    iVar3 = proc_7F0A5148();
    bVar1 = iVar3 == 0;
  }
  return (ulonglong)bVar1;
}



int ** proc_7F0A51D8(void)

{
  int **ppiVar1;
  
  dword_80040B04 = 0x80;
  ppiVar1 = play_sfx_a1(ptr_sfx_buf,0xec,NULL);
  return ppiVar1;
}



int ** proc_7F0A5210(void)

{
  int **ppiVar1;
  
  set_controlstick_lr_disabled();
  play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
  ppiVar1 = (int **)get_random_value();
  if ((int **)(dword_80040B10 << 0x10) < ppiVar1) {
    ppiVar1 = proc_7F0A51D8();
  }
  return ppiVar1;
}



void proc_7F0A526C(void)

{
  bool bVar1;
  bool bVar2;
  int iVar4;
  ulonglong uVar3;
  
  if (dword_800409A8 == 0) {
    bVar1 = false;
    bVar2 = false;
    iVar4 = get_debug_gunwatchpos_flag();
    if (iVar4 == 0) {
      uVar3 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG);
      bVar1 = uVar3 != 0;
      uVar3 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG);
      if (uVar3 != 0) {
        bVar2 = true;
      }
    }
    uVar3 = get_controller_buttons_pressed('\0',L_JPAD);
    if ((uVar3 != 0) || (uVar3 = proc_7F0A4FB0(), uVar3 != 0)) {
      bVar1 = true;
    }
    uVar3 = get_controller_buttons_pressed('\0',R_JPAD);
    if ((uVar3 != 0) || (uVar3 = proc_7F0A4FEC(), uVar3 != 0)) {
      bVar2 = true;
    }
    if (bVar1) {
      DAT_80040994 = 4;
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058458,15.00000000);
    }
    if (bVar2) {
      DAT_80040994 = 1;
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_8005845C,15.00000000);
    }
  }
  else {
    if ((dword_800409A4 != 0) &&
       (uVar3 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON), uVar3 != 0)) {
      dword_800409A4 = 0;
      set_missionstate(0);
      run_title_stage();
      mission_failed_or_aborted = TRUE;
      deleteCurrentSelectedFolder();
    }
  }
  return;
}



void proc_7F0A53D8(void)

{
  bool bVar1;
  bool bVar2;
  int iVar4;
  ulonglong uVar3;
  
  if (dword_800409A8 == 0) {
    bVar1 = false;
    bVar2 = false;
    iVar4 = get_debug_gunwatchpos_flag();
    if (iVar4 == 0) {
      uVar3 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG);
      bVar1 = uVar3 != 0;
      uVar3 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG);
      if (uVar3 != 0) {
        bVar2 = true;
      }
    }
    uVar3 = get_controller_buttons_pressed('\0',L_JPAD);
    if ((uVar3 != 0) || (uVar3 = proc_7F0A4FB0(), uVar3 != 0)) {
      bVar1 = true;
    }
    uVar3 = get_controller_buttons_pressed('\0',R_JPAD);
    if ((uVar3 != 0) || (uVar3 = proc_7F0A4FEC(), uVar3 != 0)) {
      bVar2 = true;
    }
    if (bVar1) {
      DAT_80040994 = 0;
      proc_7F0AB4A4();
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058460,15.00000000);
    }
    if (bVar2) {
      DAT_80040994 = 2;
      set_controlstick_lr_disabled();
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058464,15.00000000);
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a5574) overlaps instruction at (ram,0x7f0a5570)
// 

void proc_7F0A5504(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
  if (((uVar1 == 0) && (uVar1 = proc_7F0A4FB0(), uVar1 == 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A4FEC(), uVar1 != 0)) && (dword_800409A8 == 0)) {
      DAT_80040994 = 2;
      proc_7F0AB48C();
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058468,15.00000000);
    }
  }
  else {
    DAT_80040994 = 1;
    set_controlstick_lr_disabled();
  }
  return;
}



void proc_7F0A55C4(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
  if ((((uVar1 == 0) && (uVar1 = proc_7F0A4FB0(), uVar1 == 0)) ||
      (uVar1 = get_controller_buttons_held('\0',Z_TRIG), uVar1 != 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A4FEC(), uVar1 != 0)) &&
       ((uVar1 = get_controller_buttons_held('\0',Z_TRIG), uVar1 == 0 && (dword_800409A8 == 0)))) {
      DAT_80040994 = 3;
      proc_7F0AB498();
      set_controlstick_lr_disabled();
    }
  }
  else {
    DAT_80040994 = 1;
    proc_7F0A5210();
    trigger_watch_zoom((f32)flt_8005846C,15.00000000);
  }
  return;
}



void proc_7F0A56A4(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
  if ((((uVar1 == 0) && (uVar1 = proc_7F0A4FB0(), uVar1 == 0)) ||
      (uVar1 = get_controller_buttons_held('\0',Z_TRIG), uVar1 != 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A4FEC(), uVar1 != 0)) &&
       ((uVar1 = get_controller_buttons_held('\0',Z_TRIG), uVar1 == 0 && (dword_800409A8 == 0)))) {
      DAT_80040994 = 4;
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058470,15.00000000);
    }
  }
  else {
    DAT_80040994 = 2;
    proc_7F0AB48C();
    set_controlstick_lr_disabled();
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a5814) overlaps instruction at (ram,0x7f0a5810)
// 

void proc_7F0A5784(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
  if (((uVar1 == 0) && (uVar1 = proc_7F0A4FB0(), uVar1 == 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A4FEC(), uVar1 != 0)) && (dword_800409A8 == 0)) {
      DAT_80040994 = 0;
      proc_7F0AB4A4();
      proc_7F0A5210();
      trigger_watch_zoom((f32)flt_80058478,15.00000000);
    }
  }
  else {
    DAT_80040994 = 3;
    proc_7F0AB498();
    proc_7F0A5210();
    trigger_watch_zoom((f32)flt_80058474,15.00000000);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a58d0) overlaps instruction at (ram,0x7f0a58cc)
// 

void proc_7F0A5860(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if (((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) && (dword_800409A8 == 0)) {
      DAT_80040998 = 1;
      proc_7F0A507C();
    }
  }
  else {
    DAT_80040998 = 1;
    proc_7F0A507C();
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a596c) overlaps instruction at (ram,0x7f0a5968)
// 

void proc_7F0A5900(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if (((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) || (dword_800409A8 != 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) && (dword_800409A8 == 0)) {
      DAT_80040998 = 0;
      proc_7F0A507C();
    }
  }
  else {
    DAT_80040998 = 0;
    proc_7F0A507C();
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a5a08) overlaps instruction at (ram,0x7f0a5a04)
// 

void proc_7F0A5998(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      DAT_8004099c += 1;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    DAT_8004099c += -1;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  if (DAT_8004099c < 10) {
    if (DAT_8004099c < 0) {
      DAT_8004099c = 9;
    }
  }
  else {
    DAT_8004099c = 0;
  }
  return;
}



void proc_7F0A5A64(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      DAT_8004099c = 1;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    DAT_8004099c = 9;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



void proc_7F0A5AF4(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      DAT_8004099c = 2;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    DAT_8004099c = 0;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a5bc0) overlaps instruction at (ram,0x7f0a5bbc)
// 

void proc_7F0A5B80(void)

{
  float fVar1;
  int iVar4;
  int iVar5;
  ulonglong uVar2;
  longlong lVar3;
  
  iVar4 = proc_7F08D038();
  iVar5 = get_debug_gunwatchpos_flag();
  if (iVar5 == 0) {
    uVar2 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
    if ((uVar2 == 0) && (lVar3 = get_cur_controller_vert_stick_pos('\0'), lVar3 < 0x47)) {
      uVar2 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
      if ((((uVar2 != 0) || (lVar3 = get_cur_controller_vert_stick_pos('\0'), lVar3 < -0x46)) &&
          ((int)dword_800409BC < iVar4 + -1)) && (dword_800409A8 == 0)) {
        dword_800409BC = dword_800409BC + 1.00000000;
      }
    }
    else {
      if ((0 < (int)dword_800409BC) && (dword_800409A8 == 0)) {
        dword_800409BC = dword_800409BC - 1.00000000;
      }
    }
    uVar2 = get_controller_buttons_held('\0',U_CBUTTONS|U_JPAD);
    if (uVar2 == 0) {
      uVar2 = get_controller_buttons_held('\0',D_CBUTTONS|D_JPAD);
      if (((uVar2 != 0) && ((int)dword_800409BC < iVar4 + -1)) && (dword_800409A8 == 0)) {
        dword_800409BC = dword_800409BC + flt_80058480;
      }
    }
    else {
      if ((0 < (int)dword_800409BC) && (dword_800409A8 == 0)) {
        dword_800409BC = dword_800409BC - flt_8005847C;
      }
    }
  }
  lVar3 = get_cur_controller_vert_stick_pos('\0');
  if ((((lVar3 < 0x1f) || (lVar3 = get_cur_controller_vert_stick_pos('\0'), 0x45 < lVar3)) ||
      (dword_800409B8 < 1)) || (dword_800409A8 != 0)) {
    lVar3 = get_cur_controller_vert_stick_pos('\0');
    if (((lVar3 < -0x1e) && (lVar3 = get_cur_controller_vert_stick_pos('\0'), -0x46 < lVar3)) &&
       (((int)dword_800409BC < iVar4 + -1 && (dword_800409A8 == 0)))) {
      iVar5 = get_cur_controller_vert_stick_pos('\0');
      dword_800409BC = dword_800409BC - (float)iVar5 / 300.00000000;
    }
  }
  else {
    iVar5 = get_cur_controller_vert_stick_pos('\0');
    dword_800409BC = dword_800409BC - (float)iVar5 / 300.00000000;
  }
  uVar2 = proc_7F0A5160();
  if (((uVar2 == 0) || (dword_800409B8 < 1)) || (dword_800409A8 != 0)) {
    uVar2 = proc_7F0A519C();
    if (((uVar2 != 0) && (dword_800409B8 < iVar4 + -1)) && (dword_800409A8 == 0)) {
      dword_800409BC = dword_800409BC + 1.00000000;
    }
  }
  else {
    dword_800409BC = dword_800409BC - 1.00000000;
  }
  uVar2 = proc_7F0A5100();
  if ((uVar2 == 0) && (uVar2 = proc_7F0A5124(), uVar2 == 0)) {
    dword_80040AE4 = 0;
  }
  else {
    dword_80040AE4 = 1;
  }
  fVar1 = (float)iVar4 - 0.50000000;
  if (dword_800409BC <= (float)iVar4 - 0.50000000) {
    fVar1 = dword_800409BC;
  }
  dword_800409BC = fVar1;
  if (dword_800409BC < -0.50000000) {
    dword_800409BC = -0.50000000;
  }
  dword_800409B8 = (int)dword_800409BC;
  if (j_text_trigger == 0) {
    iVar4 = 0xc;
    iVar5 = 0xc;
  }
  else {
    iVar4 = 0xe;
    iVar5 = 0xe;
  }
  dword_800409B4 = iVar5 * 2 + -dword_800409B8 * iVar4;
  if (dword_800409B4 < dword_800409B0) {
    dword_800409B0 = (dword_800409B0 - (dword_800409B0 - dword_800409B4) / 3) + -1;
    dword_800409C0 = 0;
  }
  else {
    if (dword_800409B0 < dword_800409B4) {
      dword_800409B0 = dword_800409B0 + (dword_800409B4 - dword_800409B0) / 3 + 1;
      dword_800409C0 = 0;
    }
    else {
      dword_800409C0 = 1;
    }
  }
  if ((dword_800409BC <= (float)dword_800409B8 + flt_80058484) ||
     (uVar2 = get_controller_buttons_held
                        ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                              DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                              A_BUTTON), uVar2 != 0)) {
    if ((dword_800409BC <= (float)dword_800409B8 + flt_8005848C) &&
       (uVar2 = get_controller_buttons_held
                          ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                                DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                                A_BUTTON), uVar2 == 0)) {
      dword_800409BC = dword_800409BC + flt_80058490;
    }
  }
  else {
    dword_800409BC = dword_800409BC - flt_80058488;
  }
  return;
}



void proc_7F0A611C(float *param_1,int *param_2,int param_3,int *param_4,int *param_5,
                  undefined4 *param_6,int param_7,int param_8,int param_9)

{
  int iVar3;
  ulonglong uVar1;
  longlong lVar2;
  int iVar4;
  float fVar5;
  
  iVar3 = get_debug_gunwatchpos_flag();
  if (iVar3 != 0) goto LAB_7f0a6298;
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if (uVar1 == 0) {
    lVar2 = get_cur_controller_vert_stick_pos('\0');
    if (0x46 < lVar2) {
      fVar5 = *param_1;
      goto LAB_7f0a616c;
    }
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if (uVar1 == 0) {
      lVar2 = get_cur_controller_vert_stick_pos('\0');
      if (lVar2 < -0x46) {
        fVar5 = *param_1;
        goto LAB_7f0a61c8;
      }
    }
    else {
      fVar5 = *param_1;
LAB_7f0a61c8:
      if (((int)fVar5 < param_3 + -1) && (param_8 != 0)) {
        *param_1 = fVar5 + 1.00000000;
      }
    }
  }
  else {
    fVar5 = *param_1;
LAB_7f0a616c:
    if ((0 < (int)fVar5) && (param_8 != 0)) {
      *param_1 = fVar5 - 1.00000000;
    }
  }
  uVar1 = get_controller_buttons_held('\0',U_CBUTTONS|U_JPAD);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_held('\0',D_CBUTTONS|D_JPAD);
    if (((uVar1 != 0) && ((int)*param_1 < param_3 + -1)) && (param_8 != 0)) {
      *param_1 = *param_1 + flt_80058498;
    }
  }
  else {
    if ((0 < (int)*param_1) && (param_8 != 0)) {
      *param_1 = *param_1 - flt_80058494;
    }
  }
LAB_7f0a6298:
  lVar2 = get_cur_controller_vert_stick_pos('\0');
  if (((lVar2 < 0x1f) || (lVar2 = get_cur_controller_vert_stick_pos('\0'), 0x45 < lVar2)) ||
     ((*param_2 < 1 || (param_8 == 0)))) {
    lVar2 = get_cur_controller_vert_stick_pos('\0');
    if ((((lVar2 < -0x1e) && (lVar2 = get_cur_controller_vert_stick_pos('\0'), -0x46 < lVar2)) &&
        ((int)*param_1 < param_3 + -1)) && (param_8 != 0)) {
      iVar3 = get_cur_controller_vert_stick_pos('\0');
      *param_1 = *param_1 - (float)iVar3 / 300.00000000;
    }
  }
  else {
    iVar3 = get_cur_controller_vert_stick_pos('\0');
    *param_1 = *param_1 - (float)iVar3 / 300.00000000;
  }
  uVar1 = proc_7F0A5160();
  if (((uVar1 == 0) || (*param_2 < 1)) || (param_8 == 0)) {
    uVar1 = proc_7F0A519C();
    if (((uVar1 != 0) && (*param_2 < param_3 + -1)) && (param_8 != 0)) {
      *param_1 = *param_1 + 1.00000000;
    }
  }
  else {
    *param_1 = *param_1 - 1.00000000;
  }
  uVar1 = proc_7F0A5100();
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5124(), uVar1 == 0)) {
    dword_80040AE4 = 0;
  }
  else {
    dword_80040AE4 = 1;
  }
  fVar5 = *param_1;
  if ((float)param_3 - 0.50000000 < fVar5) {
    *param_1 = (float)param_3 - 0.50000000;
    fVar5 = *param_1;
  }
  if (fVar5 < -0.50000000) {
    *param_1 = -0.50000000;
    fVar5 = *param_1;
  }
  *param_2 = (int)fVar5;
  iVar4 = -(int)fVar5 * param_9 + param_7 * param_9;
  *param_5 = iVar4;
  iVar3 = *param_4;
  if (iVar4 < iVar3) {
    *param_4 = (iVar3 - (iVar3 - iVar4) / 3) + -1;
    *param_6 = 0;
  }
  else {
    if (iVar3 < iVar4) {
      *param_4 = iVar3 + (iVar4 - iVar3) / 3 + 1;
      *param_6 = 0;
    }
    else {
      *param_6 = 1;
    }
  }
  if ((*param_1 <= (float)*param_2 + flt_8005849C) ||
     (uVar1 = get_controller_buttons_held
                        ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                              DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                              A_BUTTON), uVar1 != 0)) {
    if ((*param_1 <= (float)*param_2 + flt_800584A4) &&
       (uVar1 = get_controller_buttons_held
                          ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                                DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                                A_BUTTON), uVar1 == 0)) {
      *param_1 = *param_1 + flt_800584A8;
    }
  }
  else {
    *param_1 = *param_1 - flt_800584A0;
  }
  return;
}



void proc_7F0A6618(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 != 0) || (uVar1 = proc_7F0A5088(), uVar1 != 0)) {
    dword_800409A0 = 4;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
  if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
    dword_800409A0 = 1;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



void proc_7F0A66A0(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      dword_800409A0 = 2;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    dword_800409A0 = 0;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



void proc_7F0A672C(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      dword_800409A0 = 3;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    dword_800409A0 = 1;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



void proc_7F0A67BC(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      dword_800409A0 = 4;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    dword_800409A0 = 2;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0a68b4) overlaps instruction at (ram,0x7f0a68b0)
// 

void proc_7F0A684C(void)

{
  ulonglong uVar1;
  
  uVar1 = get_controller_buttons_pressed('\0',U_CBUTTONS|U_JPAD);
  if ((uVar1 == 0) && (uVar1 = proc_7F0A5088(), uVar1 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',D_CBUTTONS|D_JPAD);
    if ((uVar1 != 0) || (uVar1 = proc_7F0A50C4(), uVar1 != 0)) {
      dword_800409A0 = 0;
      proc_7F0A507C();
      proc_7F0A4F44();
    }
  }
  else {
    dword_800409A0 = 3;
    proc_7F0A507C();
    proc_7F0A4F44();
  }
  return;
}



void proc_7F0A68D8(short *param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  short *psVar5;
  float fVar6;
  
  fVar6 = sqrtf(flt_800584AC - (float)(dword_80040B40 * dword_80040B40));
  iVar4 = 0;
  iVar3 = -1;
  while( true ) {
    do {
      sVar1 = (short)iVar3;
      param_1[1] = 0;
      iVar3 += 2;
      psVar5 = param_1 + 8;
      *param_1 = (short)(int)fVar6 * sVar1;
      iVar2 = dword_80040B40;
      param_1[3] = 0;
      param_1[4] = 0;
      param_1[2] = (short)iVar4 + (short)iVar2;
      param_1[5] = 0;
      *(undefined *)(param_1 + 6) = 0;
      *(undefined *)((int)param_1 + 0xd) = 0xa0;
      *(undefined *)(param_1 + 7) = 0;
      *(undefined *)((int)param_1 + 0xf) = (char)dword_80040B08;
      param_1 = psVar5;
    } while (iVar3 != 3);
    iVar4 += 4;
    if (iVar4 == 8) break;
    iVar3 = -1;
    param_1 = psVar5;
  }
  return;
}



void proc_7F0A69A8(void)

{
  longlong lVar1;
  
  lVar1 = get_attached_controller_count();
  if (lVar1 < 2) {
    dword_800409D8 = 4;
  }
  else {
    dword_800409D8 = 8;
  }
  proc_7F0A4F44();
  DAT_80040994 = 0;
  dword_800409A0 = 4;
  dword_800409C8 = flt_800584B0;
  dword_800409CC = flt_800584B4;
  proc_7F08D8E0();
  return;
}



float proc_7F0A6A2C(float param_1)

{
  if (flt_800584B8 < param_1) {
    return param_1 - flt_800584BC;
  }
  if (param_1 < flt_800584C0) {
    param_1 = param_1 + flt_800584C4;
  }
  return param_1;
}



void proc_7F0A6A80(void)

{
  bool bVar1;
  ulonglong uVar2;
  longlong lVar3;
  u32 uVar4;
  uint uVar5;
  
  uVar2 = get_controller_buttons_pressed('\0',START_BUTTON);
  if (uVar2 != 0) {
    set_open_close_solo_watch_menu_to_1();
  }
  if (controlstick_lr_enabled == 0) {
    lVar3 = get_cur_controller_horz_stick_pos('\0');
    if ((lVar3 < -10) || (lVar3 = get_cur_controller_horz_stick_pos('\0'), 10 < lVar3)) {
      lVar3 = get_cur_controller_horz_stick_pos('\0');
      if ((lVar3 < 0xb) && (lVar3 = controller_7000C174('\0'), 10 < lVar3)) {
        controlstick_lr_enabled = 1;
      }
      else {
        lVar3 = get_cur_controller_horz_stick_pos('\0');
        if ((-0xb < lVar3) && (lVar3 = controller_7000C174('\0'), lVar3 < -10)) {
          controlstick_lr_enabled = 1;
        }
      }
    }
    else {
      controlstick_lr_enabled = 1;
    }
  }
  if (dword_80040AE0 == 0) {
    lVar3 = get_cur_controller_vert_stick_pos('\0');
    if ((lVar3 < -10) || (lVar3 = get_cur_controller_vert_stick_pos('\0'), 10 < lVar3)) {
      lVar3 = get_cur_controller_vert_stick_pos('\0');
      if ((lVar3 < 0xb) && (lVar3 = controller_7000C284('\0'), 10 < lVar3)) {
        dword_80040AE0 = 1;
      }
      else {
        lVar3 = get_cur_controller_vert_stick_pos('\0');
        if ((-0xb < lVar3) && (lVar3 = controller_7000C284('\0'), lVar3 < -10)) {
          dword_80040AE0 = 1;
        }
      }
    }
    else {
      dword_80040AE0 = 1;
    }
  }
  bVar1 = dword_80040AF8 < 0;
  dword_80040AF8 += -1;
  if (bVar1) {
    dword_80040AF4 = dword_80040AF4 + -0x100000;
  }
  if (dword_80040AF4 < &UNK_005f00a1) {
    dword_80040AF4 = (undefined *)0xff00a0;
    dword_80040AF8 = 0xf;
  }
  if (dword_80040B00 < 0) {
    dword_80040AFC -= 0x10;
  }
  dword_80040B00 += -1;
  if (dword_80040AFC < 0x60) {
    dword_80040AFC = 0xff;
    dword_80040B00 = 0xf;
  }
  dword_80040B14 =
       dword_80040B14 +
       ((float)dword_80040B1C * (float)dword_80048498 * flt_800584C8) / 360.00000000;
  dword_80040B14 = proc_7F0A6A2C(dword_80040B14);
  uVar5 = dword_80040B0C << 0x10;
  uVar4 = get_random_value();
  if (uVar5 < uVar4) {
    proc_7F0A51D8();
  }
  if (dword_80040B04 < 0xe0) {
    uVar4 = get_random_value();
    dword_80040B04 += uVar4 >> 0x1e;
  }
  if (0xe0 < dword_80040B04) {
    dword_80040B04 = 0xe0;
  }
  dword_80040B08 = dword_80040B04 * -4 + 0x380;
  dword_80040B40 += -4;
  if (0x156 < dword_80040B40) {
    dword_80040B40 = -0x156;
  }
  if (dword_80040B40 < -0x156) {
    dword_80040B40 = 0x156;
  }
  dword_80040B44 = dword_80040B44 + 1 & 1;
  switch(DAT_80040994) {
  case 0:
    proc_7F0A526C();
    break;
  case 1:
    proc_7F0A53D8();
    break;
  case 2:
    if (DAT_80040998 == 0) {
      proc_7F0A5860();
    }
    else {
      if (DAT_80040998 == 1) {
        proc_7F0A5900();
      }
    }
    proc_7F0A55C4();
    break;
  case 3:
    switch(DAT_8004099c) {
    case 0:
      proc_7F0A5A64();
      break;
    case 1:
      proc_7F0A5AF4();
      break;
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
      proc_7F0A5998();
    }
    proc_7F0A56A4();
    break;
  case 4:
    proc_7F0A5784();
  }
  return;
}



undefined4 * proc_7F0A6EE8(undefined4 *param_1)

{
  short sVar1;
  short sVar2;
  
  param_1[1] = 0x2000;
  *param_1 = 0xb7000000;
  param_1[2] = 0xba001402;
  param_1[3] = 0;
  param_1[5] = 0x800000;
  param_1[4] = 0xba001701;
  param_1[6] = 0xed000000;
  sVar1 = get_video2_settings_txtClipW();
  sVar2 = get_video2_settings_txtClipH();
  param_1[7] = (int)((float)(int)sVar2 * 4.00000000) & 0xfffU |
               ((int)((float)(int)sVar1 * 4.00000000) & 0xfffU) << 0xc;
  param_1[8] = 0xba001001;
  param_1[9] = 0;
  param_1[0xb] = 0;
  param_1[10] = 0xba000e02;
  param_1[0xd] = 0;
  param_1[0xc] = 0xba001102;
  param_1[0xf] = 0x80000;
  param_1[0xe] = 0xba001301;
  param_1[0x11] = 0x2000;
  param_1[0x10] = 0xba000c02;
  param_1[0x13] = 0xc00;
  param_1[0x12] = 0xba000903;
  param_1[0x15] = 0xfffe793c;
  param_1[0x14] = 0xfcffffff;
  param_1[0x16] = 0xba000801;
  param_1[0x17] = 0;
  param_1[0x18] = 0xb9000002;
  param_1[0x19] = 0;
  param_1[0x1b] = 0xf0a4000;
  param_1[0x1a] = 0xb900031d;
  param_1[0x1c] = 0xba000602;
  param_1[0x1d] = 0;
  return param_1 + 0x1e;
}



void proc_7F0A70AC(int param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  
  iVar1 = 0;
  iVar3 = param_2;
  do {
    iVar1 += 1;
    *(undefined *)(iVar3 + 0xc) = 0x20;
    *(undefined *)(iVar3 + 0xd) = 0x70;
    *(undefined *)(iVar3 + 0xe) = 0x20;
    iVar3 = iVar3 + 0x10;
  } while (iVar1 < 0x14);
  iVar3 = param_1 * 4 + 3;
  if (param_1 * 4 <= iVar3) {
    uVar2 = param_2 + param_1 * 0x40;
    *(undefined *)(uVar2 + 0xc) = 0x50;
    while( true ) {
      *(undefined *)(uVar2 + 0xd) = 0xf0;
      *(undefined *)(uVar2 + 0xe) = 0x50;
      if (dword_800409A8 != 0) {
        *(undefined *)(uVar2 + 0xc) = 0x30;
        *(undefined *)(uVar2 + 0xd) = 0xa0;
        *(undefined *)(uVar2 + 0xe) = 0x30;
      }
      if ((uint)(iVar3 * 0x10 + param_2) < uVar2 + 0x10) break;
      *(undefined *)(uVar2 + 0x1c) = 0x50;
      uVar2 = uVar2 + 0x10;
    }
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * proc_7F0A714C(void)

{
  undefined4 *in_v0_lo;
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *in_a0_lo;
  int iVar4;
  undefined4 in_a1_lo;
  int in_a2_lo;
  undefined4 *puVar5;
  undefined4 *puVar6;
  float extraout_f12;
  float x;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f14;
  float extraout_f14_00;
  float y;
  float y_00;
  
  proc_7F0BD6C4(0x1e);
  puVar1 = in_v0_lo;
  proc_7F0BD6C4(0x1e);
  puVar3 = puVar1;
  proc_7F0BD714(0xf8);
  puVar2 = puVar3;
  proc_7F0BD714(0xf8);
  *in_a0_lo = 0xe7000000;
  in_a0_lo[1] = 0;
  in_a0_lo[2] = 0xba001402;
  in_a0_lo[3] = 0;
  in_a0_lo[4] = 0xb900031d;
  in_a0_lo[5] = 0x5041c8;
  in_a0_lo[6] = 0xfcffffff;
  in_a0_lo[7] = 0xfffe793c;
  in_a0_lo[8] = 0xfa000000;
  in_a0_lo[9] = 0xe6e6e600;
  in_a0_lo[10] = 0x1020040;
  in_a0_lo[0xb] = in_a1_lo;
  check_watch_page_transistion_running();
  x = 1.00000000;
  y = extraout_f14;
  if (in_a2_lo == 1) {
    dword_80040B04 = 0xe0;
    if ((ptr_BONDdata->pause_animation_state == 4) ||
       (y = extraout_f14, ptr_BONDdata->pause_animation_state == 6)) {
      proc_7F07E740();
      x = extraout_f12;
      y = extraout_f14_00;
    }
  }
  guScale((Mtx *)&DAT_8007b0a0,x,y,0.25000000);
  in_a0_lo[0xc] = 0x1000040;
  in_a0_lo[0xd] = 0x8007b0a0;
  puVar5 = in_a0_lo + 0xe;
  if (in_a2_lo == 0) {
    in_a0_lo[0xf] = 0x3000;
    *puVar5 = 0xb6000000;
    in_a0_lo[0x10] = 0x6000000;
    *(int **)(in_a0_lo + 0x11) = &ptr_BONDdata[0x30303].field_1A78;
    in_a0_lo[0x12] = 0x6000000;
    *(int **)(in_a0_lo + 0x13) = &ptr_BONDdata[0x30303].field_21A8;
    puVar5 = in_a0_lo + 0x14;
  }
  guScale((Mtx *)&DAT_8007b0e0,1.00000000,y_00,1.00000000);
  *puVar5 = 0x1000040;
  puVar5[1] = 0x8007b0e0;
  puVar6 = puVar5 + 2;
  if (in_a2_lo == 1) {
    puVar5[3] = 0x3000;
    *puVar6 = 0xb6000000;
    puVar5[4] = 0x6000000;
    *(int **)(puVar5 + 5) = &ptr_BONDdata[0x30303].field_1A78;
    puVar5[6] = 0x6000000;
    *(int **)(puVar5 + 7) = &ptr_BONDdata[0x30303].field_21A8;
    puVar6 = puVar5 + 8;
  }
  proc_7F0A33F8((short *)puVar1,0x1e,extraout_f12_00,0x3f6b851f);
  proc_7F0A3978(puVar2,(int)(puVar1 + -0x20000000),0x1e,0);
  *puVar6 = 0xe7000000;
  puVar6[1] = 0;
  puVar6[2] = 0xb900031d;
  puVar6[3] = 0x504240;
  puVar6[4] = 0xfcffffff;
  puVar6[5] = 0xfffdf6fb;
  puVar6[7] = 0xff0000;
  puVar6[6] = 0xfa000000;
  puVar6[8] = 0x6000000;
  *(undefined4 **)(puVar6 + 9) = puVar2 + -0x20000000;
  puVar6[10] = 0xe7000000;
  puVar6[0xb] = 0;
  if (dword_80040B04 < 0xe0) {
    proc_7F0A33F8((short *)in_v0_lo,0x1e,extraout_f12_01,0x3f666666);
    proc_7F0A3978(puVar3,(int)(in_v0_lo + -0x20000000),0x1e,0);
    puVar6[0xc] = 0xb900031d;
    puVar6[0xd] = 0x50004b;
  }
  else {
    proc_7F0A33F8((short *)in_v0_lo,0x1e,extraout_f12_01,0x3f666666);
    proc_7F0A3978(puVar3,(int)(in_v0_lo + -0x20000000),0x1e,1);
    puVar6[0xc] = 0xb900031d;
    puVar6[0xd] = 0x5041c8;
  }
  puVar6[0xe] = 0xfcffffff;
  puVar6[0xf] = 0xfffe793c;
  puVar6[0x10] = 0x6000000;
  *(undefined4 **)(puVar6 + 0x11) = puVar3 + -0x20000000;
  puVar6[0x12] = 0xb900031d;
  puVar6[0x13] = 0x504240;
  puVar6[0x14] = 0xfcffffff;
  puVar6[0x15] = 0xfffe793c;
  puVar6[0x16] = 0x6000000;
  puVar5 = puVar6 + 0x18;
  *(int **)(puVar6 + 0x17) = &ptr_BONDdata[0x30303].field_28D8;
  iVar4 = 2;
  *(undefined *)((int)in_v0_lo + 0xf) = (char)dword_80040B04;
  *(undefined *)((int)puVar1 + 0xf) = (char)dword_80040B04;
  *(undefined *)((int)in_v0_lo + 0x1f) = (char)dword_80040B04;
  *(undefined *)((int)puVar1 + 0x1f) = (char)dword_80040B04;
  puVar2 = in_v0_lo + 8;
  puVar3 = puVar1 + 8;
  do {
    iVar4 += 4;
    *(undefined *)((int)puVar2 + 0xf) = (char)dword_80040B04;
    *(undefined *)((int)puVar3 + 0xf) = (char)dword_80040B04;
    *(undefined *)((int)puVar2 + 0x1f) = (char)dword_80040B04;
    *(undefined *)((int)puVar3 + 0x1f) = (char)dword_80040B04;
    *(undefined *)((int)puVar2 + 0x2f) = (char)dword_80040B04;
    *(undefined *)((int)puVar3 + 0x2f) = (char)dword_80040B04;
    *(undefined *)((int)puVar2 + 0x3f) = (char)dword_80040B04;
    *(undefined *)((int)puVar3 + 0x3f) = (char)dword_80040B04;
    puVar2 = puVar2 + 0x10;
    puVar3 = puVar3 + 0x10;
  } while (iVar4 != 0x1e);
  if (dword_80040B04 < 0xe0) {
    proc_7F0A68D8((short *)&ptr_BONDdata->field_19B8);
    *puVar5 = 0xb900031d;
    puVar6[0x19] = 0x5041c8;
    puVar6[0x1a] = 0x6000000;
    *(int **)(puVar6 + 0x1b) = &ptr_BONDdata[0x30303].field_2A18;
    puVar5 = puVar6 + 0x1c;
  }
  return puVar5;
}



void proc_7F0A77A8(undefined8 param_1,undefined8 param_2)

{
  proc_7F0A714C();
  return;
}



// WARNING: Instruction at (ram,0x7f0a78b0) overlaps instruction at (ram,0x7f0a78ac)
// 

uint * proc_7F0A77C8(undefined4 *param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar5;
  byte *pbVar6;
  byte *pbVar7;
  int iVar8;
  longlong lVar3;
  ulonglong uVar4;
  uint *DL;
  short sVar9;
  short sVar10;
  int iStack32;
  int iStack28;
  uint uStack24;
  uint uStack20;
  uint uStack16;
  uint uStack12;
  uint uStack8;
  int iStack4;
  
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  pbVar5 = get_textptr_for_textID(0xac24);
  pbVar6 = get_textptr_for_textID(0xac25);
  pbVar7 = get_textptr_for_textID(0xac26);
  iStack4 = 0x51;
  if (j_text_trigger == 0) {
    iVar8 = 0;
  }
  else {
    iVar8 = 0xf;
  }
  uStack8 = iVar8 + 0xbd;
  if (j_text_trigger == 0) {
    iVar8 = 0;
  }
  else {
    iVar8 = 10;
  }
  uStack12 = iVar8 + 0x88;
  if (j_text_trigger == 0) {
    iVar8 = 0;
  }
  else {
    iVar8 = 3;
  }
  uStack24 = iVar8 + 0x4c;
  uStack20 = uStack24;
  uStack16 = uStack24;
  if (dword_800409A8 != 0) {
    if (dword_800409A4 == 0) {
      uStack20 = uStack24;
      uStack16 = uStack24;
      lVar3 = get_cur_controller_horz_stick_pos('\0');
      if ((0x2d < lVar3) ||
         (uVar4 = get_controller_buttons_held('\0',R_CBUTTONS|R_TRIG|R_JPAD), uVar4 != 0)) {
        dword_800409A4 = 1;
      }
    }
    else {
      uStack20 = uStack24;
      uStack16 = uStack24;
      if ((dword_800409A4 != 0) &&
         ((uStack20 = uStack24, uStack16 = uStack24, lVar3 = get_cur_controller_horz_stick_pos('\0')
          , lVar3 < -0x2d ||
          (uVar4 = get_controller_buttons_held('\0',L_CBUTTONS|L_TRIG|L_JPAD), uVar4 != 0)))) {
        dword_800409A4 = 0;
      }
    }
  }
  if (dword_800409A8 == 0) {
    proc_7F0AE98C(&iStack32,&iStack28,pbVar5,iVar2,piVar1,0);
    DL = en_text_write_stuff(param_1,&iStack4,(int *)&uStack16,pbVar5,iVar2,(int)piVar1,
                             (uint)&DAT_00800080,iStack28,iStack32,0,0);
    sVar9 = get_video2_settings_txtClipW();
    sVar10 = get_video2_settings_txtClipH();
    DL = en_text_write_stuff(DL,(int *)&uStack8,(int *)&uStack20,pbVar6,iVar2,(int)piVar1,
                             (uint)&DAT_00800080,(int)sVar9,(int)sVar10,0,0);
    sVar9 = get_video2_settings_txtClipW();
    sVar10 = get_video2_settings_txtClipH();
    DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack24,pbVar7,iVar2,(int)piVar1,
                             (uint)&DAT_00800080,(int)sVar9,(int)sVar10,0,0);
  }
  else {
    proc_7F0AE98C(&iStack32,&iStack28,pbVar5,iVar2,piVar1,0);
    DL = en_text_write_stuff(param_1,&iStack4,(int *)&uStack16,pbVar5,iVar2,(int)piVar1,0xa0ffa0f0,
                             iStack28,iStack32,0,0);
    if (dword_800409A4 == 0) {
      if (true) {
        sVar9 = get_video2_settings_txtClipW();
        sVar10 = get_video2_settings_txtClipH();
        DL = en_text_write_stuff(DL,(int *)&uStack8,(int *)&uStack20,pbVar6,iVar2,(int)piVar1,
                                 0xff00b0,(int)sVar9,(int)sVar10,0,0);
        sVar9 = get_video2_settings_txtClipW();
        sVar10 = get_video2_settings_txtClipH();
        DL = jp_text_stuff(DL,&uStack12,&uStack24,pbVar7,iVar2,(int)piVar1,0xffffffff,
                           (uint)&DAT_007000a0,(int)sVar9,(int)sVar10,0,0);
      }
    }
    else {
      sVar9 = get_video2_settings_txtClipW();
      sVar10 = get_video2_settings_txtClipH();
      DL = jp_text_stuff(DL,&uStack8,&uStack20,pbVar6,iVar2,(int)piVar1,0xffffffff,
                         (uint)&DAT_007000a0,(int)sVar9,(int)sVar10,0,0);
      sVar9 = get_video2_settings_txtClipW();
      sVar10 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack24,pbVar7,iVar2,(int)piVar1,
                               0xff00b0,(int)sVar9,(int)sVar10,0,0);
    }
  }
  return DL;
}



uint * proc_7F0A7C18(undefined4 *param_1)

{
  int *piVar1;
  int iVar2;
  longlong lVar3;
  undefined4 *DL;
  uint *DL_00;
  int iVar4;
  uint uStack36;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  byte *pbStack8;
  byte *pbStack4;
  
  pbStack4 = get_textptr_for_textID(0xac27);
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  lVar3 = check_objectives_complete();
  if (lVar3 == 0) {
    uStack36 = dword_80040AF4;
    pbStack8 = get_textptr_for_textID(0xac29);
  }
  else {
    uStack36 = 0xff00b0;
    pbStack8 = get_textptr_for_textID(0xac28);
  }
  DL = microcode_constructor(param_1);
  proc_7F0AE98C(&iStack20,&iStack24,pbStack4,iVar2,piVar1,0);
  iStack12 = 0x51;
  iStack16 = 0x41;
  DL_00 = en_text_write_stuff(DL,&iStack12,&iStack16,pbStack4,iVar2,(int)piVar1,0xff00b0,iStack24,
                              iStack20,0,0);
  if (j_text_trigger == 0) {
    iVar4 = 0;
  }
  else {
    iVar4 = 0x22;
  }
  iStack12 = iStack12 + iStack24 + iVar4 + 4;
  iStack16 -= iStack20;
  proc_7F0AE98C(&iStack20,&iStack24,pbStack8,iVar2,piVar1,0);
  DL_00 = en_text_write_stuff(DL_00,&iStack12,&iStack16,pbStack8,iVar2,(int)piVar1,uStack36,iStack24
                              ,iStack20,0,0);
  DL_00 = proc_7F0A77C8(DL_00);
  return DL_00;
}



undefined8 proc_7F0A7DBC(undefined8 param_1)

{
  return param_1;
}



uint * proc_7F0A7DC4(undefined4 *param_1)

{
  int *piVar1;
  int iVar2;
  undefined4 *DL;
  uint *puVar3;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  byte *pbStack4;
  
  pbStack4 = get_textptr_for_textID(0xac2b);
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  if (j_text_trigger == 0) {
    iStack8 = 0;
  }
  else {
    iStack8 = -5;
  }
  iStack8 += 0x65;
  iStack12 = 0x31;
  iStack16 = 0;
  iStack20 = 0;
  DL = microcode_constructor(param_1);
  proc_7F0AE98C(&iStack16,&iStack20,pbStack4,iVar2,piVar1,0);
  puVar3 = en_text_write_stuff(DL,&iStack8,&iStack12,pbStack4,iVar2,(int)piVar1,0xff00b0,iStack20,
                               iStack16,0,0);
  return puVar3;
}



// WARNING: Unknown calling convention yet parameter storage is locked

uint * debug_gun_watch_move_related(void)

{
  int *piVar1;
  int iVar2;
  Mtx *in_v0_lo;
  int iVar4;
  int iVar5;
  byte *pbVar6;
  byte *pbVar7;
  ITEM_IDS IVar8;
  ulonglong uVar3;
  u32 uVar9;
  undefined4 *DL;
  uint *DL_00;
  undefined4 *in_a0_lo;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  float in_f0;
  float fVar10;
  float fVar11;
  float near;
  float fVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f12_00;
  float fovy;
  float extraout_f14;
  float extraout_f14_00;
  float aspect;
  float extraout_f14_01;
  int iStack152;
  int iStack148;
  int iStack144;
  int iStack140;
  float afStack136 [16];
  float afStack72 [16];
  u16 uStack6;
  Mtx *pabStack4;
  
  proc_7F0BD6E0();
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  iStack148 = 0;
  iStack152 = 0;
  pabStack4 = in_v0_lo;
  iVar4 = proc_7F08D8C0();
  iVar5 = proc_7F08D2A8(iVar4);
  proc_7F08D7D8(iVar4);
  fVar10 = in_f0;
  proc_7F08D800(iVar4);
  fVar11 = fVar10;
  proc_7F08D828(iVar4);
  near = fVar11;
  proc_7F08D7B0(iVar4);
  fVar12 = near;
  proc_7F08D850(iVar4);
  fVar13 = fVar12;
  proc_7F08D878(iVar4);
  pbVar6 = (byte *)proc_7F08D5C8(iVar4);
  pbVar7 = (byte *)proc_7F08D6BC(iVar4);
  iVar4 = get_debug_gunwatchpos_flag();
  fovy = extraout_f12;
  aspect = extraout_f14;
  if (iVar4 != 0) {
    IVar8 = get_item_in_hand(0);
    uVar3 = get_controller_buttons_held('\0',L_CBUTTONS);
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_y = (&gitem_structs)[IVar8].watch_pos_y - 2.00000000;
    }
    uVar3 = get_controller_buttons_held('\0',R_CBUTTONS);
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_y = (&gitem_structs)[IVar8].watch_pos_y + 2.00000000;
    }
    uVar3 = get_controller_buttons_held('\0',D_CBUTTONS);
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_x = (&gitem_structs)[IVar8].watch_pos_x + 2.00000000;
    }
    uVar3 = get_controller_buttons_held('\0',U_CBUTTONS);
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_x = (&gitem_structs)[IVar8].watch_pos_x - 2.00000000;
    }
    uVar3 = get_controller_buttons_held('\0',L_TRIG);
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_z = (&gitem_structs)[IVar8].watch_pos_z * flt_8005850C;
    }
    uVar3 = get_controller_buttons_held('\0',R_TRIG);
    fovy = extraout_f12_00;
    aspect = extraout_f14_00;
    if (uVar3 != 0) {
      (&gitem_structs)[IVar8].watch_pos_z = (&gitem_structs)[IVar8].watch_pos_z * flt_80058510;
      fovy = extraout_f12_00;
      aspect = extraout_f14_00;
    }
  }
  guPerspective(pabStack4,&uStack6,fovy,aspect,near,1.33333337,10.00000000);
  *in_a0_lo = 0x1030040;
  uVar9 = osVirtualToPhysical(pabStack4);
  in_a0_lo[1] = uVar9;
  proc_7F0585FC((fVar13 * flt_80058518) / 360.00000000,extraout_a0,afStack72);
  proc_7F058688(flt_8005851C - (fVar12 * flt_8005851C) / 360.00000000,extraout_a0_00,afStack136);
  proc_7F058068(afStack136,afStack72);
  proc_7F059694(afStack136,in_f0,extraout_f14_01,fVar11,in_f0,fVar10,0.00000000,in_f0,fVar10,
                0.00000000);
  proc_7F058068(afStack136,afStack72);
  DL = proc_7F0A6EE8(in_a0_lo + 2);
  if (dword_80040B04 < 0xe0) {
    DL = set_enviro_fog_for_items_in_solo_watch_menu
                   (DL,(longlong)iVar5,afStack72,dword_80040B04 + 1,0x64dc6428);
  }
  else {
    DL = set_enviro_fog_for_items_in_solo_watch_menu(DL,(longlong)iVar5,afStack72,0xff,0x64dc6428);
  }
  DL = proc_7F06A334(DL);
  DL = microcode_constructor(DL);
  iStack140 = 0x60;
  iStack144 = 0xa0;
  proc_7F0AE98C(&iStack148,&iStack152,pbVar6,iVar2,piVar1,0);
  DL_00 = en_text_write_stuff(DL,&iStack140,&iStack144,pbVar6,iVar2,(int)piVar1,0xff00b0,iStack152,
                              iStack148,0,0);
  iStack144 = 0xaa;
  proc_7F0AE98C(&iStack148,&iStack152,pbVar7,iVar2,piVar1,0);
  DL_00 = en_text_write_stuff(DL_00,&iStack140,&iStack144,pbVar7,iVar2,(int)piVar1,0xff00b0,
                              iStack152,iStack148,0,0);
  return DL_00;
}



undefined8 proc_7F0A830C(undefined8 param_1,undefined8 param_2)

{
  undefined8 uVar1;
  ulonglong uVar2;
  uint *puVar3;
  
  uVar1 = proc_7F0A714C();
  uVar2 = check_watch_page_transistion_running();
  if (uVar2 == 1) {
    check_watch_page_transistion_running();
  }
  else {
    puVar3 = proc_7F0A7DC4((undefined4 *)uVar1);
    puVar3 = proc_7F0A7C18(puVar3);
    proc_7F0A7DBC((longlong)(int)puVar3);
    uVar1 = debug_gun_watch_move_related();
  }
  return uVar1;
}



// WARNING: Instruction at (ram,0x7f0a83c4) overlaps instruction at (ram,0x7f0a83c0)
// 

int ** proc_7F0A8378(void)

{
  ulonglong uVar1;
  int **ppiVar2;
  int iVar3;
  int **ppiVar4;
  
  uVar1 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_pressed('\0',START_BUTTON);
    if (uVar1 == 0) {
      return (int **)uVar1;
    }
    ppiVar4 = (int **)get_item_in_hand(0);
    ppiVar2 = (int **)proc_7F08D2A8(dword_800409B8);
    if (ppiVar2 == ppiVar4) {
      return ppiVar2;
    }
  }
  iVar3 = proc_7F08D2A8(dword_800409B8);
  remove_hands_item(0,iVar3);
  remove_hands_item(1,0);
  proc_7F08D8D0(dword_800409B8);
  dword_800409C4 = 10;
  ppiVar4 = play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
  return ppiVar4;
}



uint * debug_gun_watch_move_related2(undefined8 param_1,undefined8 param_2)

{
  int *piVar1;
  ulonglong uVar2;
  int iVar3;
  ITEM_IDS IVar4;
  u32 uVar5;
  undefined4 *DL;
  char *pcVar6;
  int iVar7;
  uint *DL_00;
  byte *pbVar8;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  int iVar9;
  float extraout_f0;
  float fovy;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  float aspect;
  uint *puStackX0;
  int iStack2264;
  int iStack2260;
  int iStack2256;
  byte abStack2248 [36];
  byte abStack2212 [2000];
  int iStack212;
  int *piStack208;
  int iStack204;
  int aiStack200 [3];
  uint uStack188;
  uint auStack184 [3];
  float fStack172;
  float fStack168;
  int iStack164;
  float fStack160;
  float fStack156;
  float fStack152;
  float fStack148;
  float fStack140;
  float afStack136 [16];
  float afStack72 [16];
  u16 uStack6;
  Mtx *pabStack4;
  
  puStackX0 = (uint *)proc_7F0A714C();
  fStack172 = extraout_f0;
  uVar2 = check_watch_page_transistion_running();
  pabStack4 = (Mtx *)uVar2;
  if (uVar2 != 1) {
    proc_7F0BD6E0();
    proc_7F08D528(dword_800409B8);
    fStack148 = fStack172;
    proc_7F08D550(dword_800409B8);
    fStack152 = fStack172;
    proc_7F08D578(dword_800409B8);
    fStack156 = fStack172;
    proc_7F08D5A0(dword_800409B8);
    fStack160 = fStack172;
    iStack164 = proc_7F08D2A8(dword_800409B8);
    proc_7F08D850(dword_800409B8);
    fStack168 = fStack172;
    proc_7F08D878(dword_800409B8);
    iVar3 = get_debug_gunwatchpos_flag();
    fovy = extraout_f12;
    aspect = extraout_f14;
    if (iVar3 != 0) {
      IVar4 = get_item_in_hand(0);
      uVar2 = get_controller_buttons_held('\0',L_CBUTTONS);
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_x = (&gitem_structs)[IVar4].equip_watch_x - 2.00000000;
      }
      uVar2 = get_controller_buttons_held('\0',R_CBUTTONS);
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_x = (&gitem_structs)[IVar4].equip_watch_x + 2.00000000;
      }
      uVar2 = get_controller_buttons_held('\0',D_CBUTTONS);
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_y = (&gitem_structs)[IVar4].equip_watch_y + 2.00000000;
      }
      uVar2 = get_controller_buttons_held('\0',U_CBUTTONS);
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_y = (&gitem_structs)[IVar4].equip_watch_y - 2.00000000;
      }
      uVar2 = get_controller_buttons_held('\0',L_TRIG);
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_z = (&gitem_structs)[IVar4].equip_watch_z * flt_80058520
        ;
      }
      uVar2 = get_controller_buttons_held('\0',R_TRIG);
      fovy = extraout_f12_00;
      aspect = extraout_f14_00;
      if (uVar2 != 0) {
        (&gitem_structs)[IVar4].equip_watch_z = (&gitem_structs)[IVar4].equip_watch_z * flt_80058524
        ;
        fovy = extraout_f12_00;
        aspect = extraout_f14_00;
      }
    }
    guPerspective(pabStack4,&uStack6,fovy,aspect,fStack148,1.33333337,10.00000000);
    *puStackX0 = 0x1030040;
    uVar5 = osVirtualToPhysical(pabStack4);
    puStackX0[1] = uVar5;
    proc_7F0585FC((fStack172 * flt_8005852C) / 360.00000000,extraout_a0,afStack72);
    proc_7F058688(flt_80058530 - (fStack168 * flt_80058530) / 360.00000000,extraout_a0_00,afStack136
                 );
    proc_7F058068(afStack136,afStack72);
    fStack140 = cosf(dword_80040B14);
    fStack140 = fStack140 * fStack160;
    fovy = sinf(dword_80040B14);
    proc_7F059694(afStack136,fStack156,fStack152,fStack140,fStack156,fovy * fStack160 + fStack152,
                  0.00000000,fStack156,fStack152,0.00000000);
    proc_7F058068(afStack136,afStack72);
    DL = proc_7F0A6EE8(puStackX0 + 2);
    DL = set_enviro_fog_for_items_in_solo_watch_menu
                   (DL,(longlong)iStack164,afStack72,0x40,-0x5f005fc4);
    aiStack200[0] = 0;
    iStack204 = 0;
    abStack2212[0] = 0;
    iVar9 = 0;
    piStack208 = D_80040EAC;
    iStack212 = D_80040EB0;
    iVar3 = proc_7F08D038();
    if (0 < iVar3) {
      do {
        pcVar6 = (char *)proc_7F08D340(iVar9);
        string_load_parse_something((char *)abStack2212,pcVar6);
        iVar9 += 1;
        iVar3 = proc_7F08D038();
      } while (iVar9 < iVar3);
    }
    if (0 < dword_800409C4) {
      dword_800409C4 = dword_800409C4 + -1;
    }
    proc_7F0A5B80();
    auStack184[0] = 0x4e;
    uStack188 = 0x8c;
    if (j_text_trigger == 0) {
      iVar3 = 0xc;
    }
    else {
      iVar3 = 0xe;
    }
    iVar3 = iVar3 * 2 + 0x8d;
    DL = microcode_constructor(DL);
    if (j_text_trigger == 0) {
      iVar9 = 0xc;
    }
    else {
      iVar9 = 0xe;
    }
    proc_7F0AE98C(aiStack200,&iStack204,abStack2212,iStack212,piStack208,iVar9);
    if (j_text_trigger == 0) {
      iVar9 = 0xc;
    }
    else {
      iVar9 = 0xe;
    }
    DL = microcode_constructor_related_to_menus
                   (DL,0x4e,0x8c,(longlong)(iStack204 + 0x4e),iVar9 * 5 + 0x8c,0);
    if (j_text_trigger == 0) {
      iVar9 = 0xc;
    }
    else {
      iVar9 = 0xe;
    }
    if (j_text_trigger == 0) {
      iVar7 = 0xc;
    }
    else {
      iVar7 = 0xe;
    }
    DL_00 = en_text_write_stuff(DL,(int *)auStack184,(int *)&uStack188,abStack2212,iStack212,
                                (int)piStack208,(uint)&DAT_00aa00b0,iStack204 + 1,iVar9 * 5,
                                dword_800409B0,iVar7);
    if (j_text_trigger == 0) {
      iVar9 = 0xc;
    }
    else {
      iVar9 = 0xe;
    }
    DL = microcode_constructor_related_to_menus
                   (DL_00,0x4b,(longlong)iVar3,(longlong)(iStack204 + 0x52),(iVar9 + iVar3) - 2,
                    (uint)&DAT_00800050);
    piVar1 = D_80040EAC;
    iStack2256 = D_80040EB0;
    pbVar8 = (byte *)proc_7F08D340(dword_800409B8);
    sprintf((char *)abStack2248,aDDDF,dword_800409B0,dword_800409B4,dword_800409B8);
    puStackX0 = microcode_constructor(DL);
    proc_7F0AE98C(&iStack2264,&iStack2260,abStack2248,iStack2256,piVar1,0);
    if (dword_800409C0 != 0) {
      iVar3 = 0xc;
      if (j_text_trigger != 0) {
        iVar3 = 0xe;
      }
      proc_7F0AE98C(&iStack2264,&iStack2260,pbVar8,iStack2256,piVar1,iVar3);
      auStack184[0] = 0x4e;
      if (j_text_trigger == 0) {
        iVar3 = 0xc;
      }
      else {
        iVar3 = 0xe;
      }
      uStack188 = iVar3 * 2 + 0x8c;
      if (dword_800409C4 == 0) {
        if (j_text_trigger == 0) {
          iVar3 = 0xc;
        }
        else {
          iVar3 = 0xe;
        }
        puStackX0 = en_text_write_stuff(puStackX0,(int *)auStack184,(int *)&uStack188,pbVar8,
                                        iStack2256,(int)piVar1,0xa0ffa0f0,iStack2260,100,0,iVar3);
      }
      else {
        if (j_text_trigger == 0) {
          iVar3 = 0xc;
        }
        else {
          iVar3 = 0xe;
        }
        puStackX0 = jp_text_stuff(puStackX0,auStack184,&uStack188,pbVar8,iStack2256,(int)piVar1,
                                  0xffffffff,(uint)&DAT_007000a0,iStack2260 + 1,100,0,iVar3);
      }
      proc_7F0A8378();
    }
  }
  return puStackX0;
}



uint * proc_7F0A8B10(undefined8 param_1,undefined4 param_2)

{
  int *piVar1;
  int iVar2;
  byte *pbVar4;
  ulonglong uVar3;
  undefined4 *DL;
  uint *DL_00;
  int iVar5;
  int iStack36;
  int iStack32;
  uint uStack28;
  int iStack24;
  uint uStack12;
  uint auStack8 [2];
  
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  iStack32 = 0;
  iStack36 = 0;
  pbVar4 = (byte *)proc_7F08D434(dword_800409B8);
  DL_00 = (uint *)proc_7F0A714C();
  uVar3 = check_watch_page_transistion_running();
  if (uVar3 != 1) {
    if (0 < dword_800409C4) {
      dword_800409C4 = dword_800409C4 + -1;
    }
    proc_7F0A5B80();
    DL = microcode_constructor(DL_00);
    proc_7F0AE98C(&iStack32,&iStack36,pbVar4,iVar2,piVar1,0);
    iVar5 = -iStack36 + 0xaa;
    if (iVar5 < 0) {
      iVar5 = -iStack36 + 0xab;
    }
    auStack8[0] = (iVar5 >> 1) + 0x4b;
    uStack12 = 0x1e;
    DL_00 = microcode_constructor_related_to_menus
                      (DL,(longlong)(int)auStack8[0],0x1e,(longlong)iStack24,uStack28,
                       (uint)&DAT_00800050);
    if (dword_800409C0 == 0) {
      DL_00 = en_text_write_stuff(DL_00,(int *)auStack8,(int *)&uStack12,pbVar4,iVar2,(int)piVar1,
                                  (uint)&DAT_00aa00b0,iStack36,100,0,0);
    }
    else {
      proc_7F0A8378();
      if (dword_800409C4 == 0) {
        DL_00 = en_text_write_stuff(DL_00,(int *)auStack8,(int *)&uStack12,pbVar4,iVar2,(int)piVar1,
                                    0xa0ffa0f0,iStack36,100,0,0);
      }
      else {
        DL_00 = jp_text_stuff(DL_00,auStack8,&uStack12,pbVar4,iVar2,(int)piVar1,0xffffffff,
                              (uint)&DAT_007000a0,iStack36 + 1,100,0,0);
      }
    }
  }
  return DL_00;
}



void proc_7F0A8D40(undefined2 *param_1,float param_2,int param_3)

{
  short sVar1;
  short sVar2;
  char cVar3;
  int iVar4;
  int in_a2_lo;
  undefined2 *puVar5;
  short *psVar6;
  int iVar7;
  
  sVar1 = param_1[0x10];
  sVar2 = param_1[0x20];
  iVar4 = 0;
  iVar7 = (int)((float)in_a2_lo * (flt_80058534 - (float)param_3));
  puVar5 = param_1;
  do {
    iVar4 += 1;
    *(undefined *)(puVar5 + 6) = 0x20;
    *(undefined *)((int)puVar5 + 0xd) = 0x40;
    *(undefined *)(puVar5 + 7) = 0x20;
    *(undefined *)((int)puVar5 + 0xf) = 0xe0;
    puVar5 = puVar5 + 8;
  } while (iVar4 < 4);
  iVar4 = 4;
  psVar6 = param_1 + 0x20;
  do {
    if (iVar4 < 10) {
      cVar3 = (char)(int)((float)param_3 * 48.00000000) + '@';
      *(char *)(psVar6 + 6) = cVar3;
      *(char *)((int)psVar6 + 0xd) = (char)(int)((float)param_3 * 96.00000000) + -0x80;
      *(char *)(psVar6 + 7) = cVar3;
      if (5 < iVar4) {
        *psVar6 = (short)(int)(((float)(int)(short)param_1[0x20] +
                               ((float)((int)sVar1 - (int)sVar2) + (float)iVar7) * (float)param_3) -
                              (float)iVar7);
        if (*psVar6 < (short)param_1[0x20]) {
          *psVar6 = param_1[0x20];
        }
      }
    }
    else {
      *psVar6 = (short)(int)((float)(int)(short)param_1[0x20] +
                             (float)(((int)sVar1 - (int)sVar2) + iVar7) * (float)param_3 +
                            (float)iVar7);
      if ((short)param_1[0x10] < *psVar6) {
        *psVar6 = param_1[0x10];
      }
    }
    iVar4 += 1;
    psVar6 = psVar6 + 8;
  } while (iVar4 != 0xc);
  param_1[8] = param_1[0x50];
  *param_1 = param_1[0x50];
  return;
}



void proc_7F0A8ED0(ushort *param_1)

{
  int iVar2;
  ulonglong uVar1;
  uint uVar3;
  
  iVar2 = get_cur_controller_horz_stick_pos('\0');
  uVar3 = (uint)*param_1;
  uVar1 = get_controller_buttons_held('\0',R_CBUTTONS|R_TRIG|R_JPAD);
  if (uVar1 == 0) {
    uVar1 = get_controller_buttons_held('\0',L_CBUTTONS|L_TRIG|L_JPAD);
    if (uVar1 != 0) {
      uVar3 -= 0x400;
    }
  }
  else {
    uVar3 += 0x400;
  }
  if (iVar2 < 0x47) {
    if (iVar2 < -0x46) {
      iVar2 = -0x46;
    }
  }
  else {
    iVar2 = 0x46;
  }
  if (iVar2 < 8) {
    if (iVar2 < -7) {
      uVar3 += (iVar2 * 0x800 + 0x3800) / 0x46;
    }
  }
  else {
    uVar3 += (iVar2 * 0x800 + -0x3800) / 0x46;
  }
  if ((int)uVar3 < 0x8000) {
    if ((int)uVar3 < 0) {
      *param_1 = 0;
    }
    else {
      *param_1 = (ushort)uVar3;
    }
  }
  else {
    *param_1 = 0x7fff;
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * proc_7F0A8FEC(void)

{
  short *in_v0_lo;
  u32 uVar1;
  undefined4 *puVar2;
  short *psVar3;
  undefined4 *in_a0_lo;
  ulonglong uVar4;
  float fVar5;
  float extraout_f12;
  ushort uStack2;
  
  proc_7F0BD6C4(0xc);
  uVar1 = music_related_37();
  uStack2 = (ushort)uVar1;
  if (dword_800409A8 == 0) {
    uVar4 = (ulonglong)uStack2;
  }
  else {
    if (DAT_8004099c == 1) {
      proc_7F0A8ED0(&uStack2);
      uVar4 = (ulonglong)uStack2;
    }
    else {
      uVar4 = (ulonglong)uStack2;
    }
  }
  fVar5 = (float)(int)uVar4;
  if (false) {
    fVar5 = fVar5 + 4294967296.00000000;
  }
  fVar5 = fVar5 / flt_80058538;
  music_related_38(uVar4);
  *in_a0_lo = 0xb900031d;
  in_a0_lo[1] = 0x504240;
  puVar2 = proc_7F0A3B40(in_a0_lo + 2,in_v0_lo + -0x40000000);
  psVar3 = proc_7F0A3AB8(in_v0_lo,0,0,600,0x14,-299,-0xcd);
  puVar2 = proc_7F0A3B40(puVar2,psVar3 + -0x40000000);
  psVar3 = proc_7F0A3AB8(psVar3,0,0,600,0x14,-299,-0xcd);
  puVar2 = proc_7F0A3B40(puVar2,psVar3 + -0x40000000);
  proc_7F0A3AB8(psVar3,0,0,600,0x14,-299,-0xcd);
  proc_7F0A8D40(in_v0_lo,extraout_f12,(int)fVar5);
  return puVar2;
}



void proc_7F0A9180(void)

{
  music_related_37();
  return;
}



void proc_7F0A91A0(ulonglong param_1)

{
  music_related_38(param_1 & 0xffff);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 * proc_7F0A91C8(void)

{
  short *in_v0_lo;
  undefined4 *puVar1;
  short *psVar2;
  undefined4 *in_a0_lo;
  uint uVar3;
  float fVar4;
  float extraout_f12;
  ushort uStack2;
  
  proc_7F0BD6C4(0xc);
  uStack2 = proc_7F0A9358();
  if (dword_800409A8 == 0) {
    uVar3 = (uint)uStack2;
  }
  else {
    if (DAT_8004099c == 0) {
      proc_7F0A8ED0(&uStack2);
      uVar3 = (uint)uStack2;
    }
    else {
      uVar3 = (uint)uStack2;
    }
  }
  fVar4 = (float)uVar3;
  if (false) {
    fVar4 = fVar4 + 4294967296.00000000;
  }
  fVar4 = fVar4 / flt_8005853C;
  proc_7F0A9364((ushort)uVar3);
  *in_a0_lo = 0xb900031d;
  in_a0_lo[1] = 0x504240;
  puVar1 = proc_7F0A3B40(in_a0_lo + 2,in_v0_lo + -0x40000000);
  psVar2 = proc_7F0A3AB8(in_v0_lo,0,0,600,0x14,-299,-0x113);
  puVar1 = proc_7F0A3B40(puVar1,psVar2 + -0x40000000);
  psVar2 = proc_7F0A3AB8(psVar2,0,0,600,0x14,-299,-0x113);
  puVar1 = proc_7F0A3B40(puVar1,psVar2 + -0x40000000);
  proc_7F0A3AB8(psVar2,0,0,600,0x14,-299,-0x113);
  proc_7F0A8D40(in_v0_lo,extraout_f12,(int)fVar4);
  return puVar1;
}



s16 proc_7F0A9358(void)

{
  return dword_80040B58;
}



void proc_7F0A9364(ushort param_1)

{
  dword_80040B58 = param_1;
  music_related_2nd_block_1((longlong)(short)param_1 & 0xffff);
  return;
}



uint * proc_7F0A9398(undefined4 *param_1,uint param_2,uint param_3,byte *param_4,uint param_5,
                    int param_6,uint param_7,int param_8,int param_9,uint param_10,int param_11)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  uint *DL;
  uint uStackX8;
  byte *pbStackX12;
  int iStack20;
  int aiStack16 [3];
  uint uStack4;
  
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  uStackX8 = param_3;
  pbStackX12 = param_4;
  proc_7F0AE98C(&iStack20,aiStack16,param_4,D_80040EB0,D_80040EAC,10);
  if (param_8 == 0) {
    if (param_11 != 0) {
      param_2 -= aiStack16[0];
    }
  }
  else {
    iVar3 = aiStack16[0];
    if (aiStack16[0] < 0) {
      iVar3 = aiStack16[0] + 1;
    }
    param_2 -= iVar3 >> 1;
  }
  if (dword_80040B04 < 0xe0) {
    *param_1 = 0xb900031d;
    param_1[1] = 0x50004b;
  }
  else {
    *param_1 = 0xb900031d;
    param_1[1] = 0x5041c8;
  }
  param_1 = param_1 + 2;
  uStack4 = param_2;
  if (param_9 != 0) {
    uStack4 = param_2;
    param_1 = microcode_constructor_related_to_menus
                        (param_1,(longlong)(int)(param_2 - 1),
                         (longlong)(int)(uStackX8 + param_6 + 1),
                         (longlong)(int)(param_2 + aiStack16[0] + 1),uStackX8 + iStack20 + 1,
                         param_10);
  }
  *param_1 = 0xb900031d;
  param_1[1] = 0x5041c8;
  DL = param_1 + 2;
  if (param_6 == 0) {
    DL = en_text_write_stuff(DL,(int *)&uStack4,(int *)&uStackX8,pbStackX12,iVar2,(int)piVar1,
                             param_5,aiStack16[0],iStack20,0,10);
  }
  if (param_6 != 0) {
    DL = jp_text_stuff(DL,&uStack4,&uStackX8,pbStackX12,iVar2,(int)piVar1,param_5,param_7,
                       aiStack16[0] + 1,iStack20,0,10);
  }
  return DL;
}



float proc_7F0A95C4(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5)

{
  if (param_1 < param_2) {
    return param_1 + (param_2 - param_1) / param_5;
  }
  if (param_2 < param_1) {
    param_1 = param_1 - (param_1 - param_2) / param_5;
  }
  return param_1;
}



BOOL proc_7F0A9610(void)

{
  if ((((dword_80040B24 < flt_80058540) && (flt_80058544 < dword_80040B24)) &&
      (dword_80040B20 < flt_80058540)) && (flt_80058544 < dword_80040B20)) {
    return TRUE;
  }
  return FALSE;
}



void proc_7F0A9684(char param_1,int *param_2,float *param_3,float *param_4)

{
  longlong lVar1;
  int iVar2;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 uVar3;
  undefined8 extraout_a0_01;
  undefined8 extraout_a1;
  float fVar4;
  
  lVar1 = get_cur_controller_horz_stick_pos(param_1);
  uVar3 = extraout_a0;
  if ((lVar1 < 10) &&
     (lVar1 = get_cur_controller_horz_stick_pos(param_1), uVar3 = extraout_a0_00, -10 < lVar1)) {
LAB_7f0a96f0:
    iVar2 = *param_2;
  }
  else {
    if (dword_800409A8 != 0) {
      iVar2 = 0;
      if (DAT_80040998 == 1) {
        *param_2 = 0;
        goto LAB_7f0a9710;
      }
      goto LAB_7f0a96f0;
    }
    iVar2 = *param_2;
  }
  if (iVar2 < 100) {
    *param_2 = iVar2 + 1;
    iVar2 = iVar2 + 1;
  }
LAB_7f0a9710:
  if (iVar2 < 100) {
    if ((dword_800409A8 != 0) && (DAT_80040998 == 1)) {
      iVar2 = get_cur_controller_horz_stick_pos(param_1);
      fVar4 = proc_7F0A95C4(*param_3,(-(float)iVar2 * flt_80058548 * flt_8005854C) / 360.00000000,
                            extraout_a0_01,extraout_a1,4.00000000);
      *param_3 = fVar4;
    }
  }
  else {
    fVar4 = proc_7F0A95C4(*param_3,-*param_4 / 10.00000000,uVar3,(longlong)(int)param_2,4.00000000);
    *param_3 = fVar4;
  }
  return;
}



uint * proc_7F0A97D0(undefined4 *param_1)

{
  int *piVar1;
  int iVar2;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  u16 *puVar6;
  uint *puStackX0;
  int iStack2036;
  int aiStack2032 [3];
  int iStack2020;
  int iStack2016;
  byte abStack2012 [2012];
  
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  aiStack2032[0] = 0;
  iStack2036 = 0;
  abStack2012[0] = 0;
  iVar5 = 0;
  if (0 < dword_800409D8) {
    puVar6 = &word_800409DC;
    do {
      pbVar3 = get_textptr_for_textID(*puVar6);
      string_load_parse_something((char *)abStack2012,(char *)pbVar3);
      iVar5 += 1;
      puVar6 = puVar6 + 10;
    } while (iVar5 < dword_800409D8);
  }
  if ((dword_800409A8 != 0) && (DAT_80040998 == 0)) {
    iVar5 = 10;
    if (j_text_trigger != 0) {
      iVar5 = 0xe;
    }
    proc_7F0A611C(&ptr_BONDdata->cur_player_control_type_2,&ptr_BONDdata->cur_player_control_type_0,
                  dword_800409D8,&ptr_BONDdata->neg_vspacing_for_control_type_entry,
                  &ptr_BONDdata->cur_player_control_type_1,&ptr_BONDdata->has_set_control_type_data,
                  0,1,iVar5);
  }
  iStack2016 = 0xaa;
  iStack2020 = 0x1a;
  if (j_text_trigger == 0) {
    iVar5 = 10;
  }
  else {
    iVar5 = 0xe;
  }
  proc_7F0AE98C(aiStack2032,&iStack2036,abStack2012,iVar2,piVar1,iVar5);
  if (j_text_trigger == 0) {
    iVar5 = 10;
  }
  else {
    iVar5 = 0xe;
  }
  if (j_text_trigger == 0) {
    iVar4 = 10;
  }
  else {
    iVar4 = 0xe;
  }
  puStackX0 = en_text_write_stuff(param_1,&iStack2016,&iStack2020,abStack2012,iVar2,(int)piVar1,
                                  (uint)&DAT_00aa00b0,iStack2036,iVar5,
                                  ptr_BONDdata->neg_vspacing_for_control_type_entry,iVar4);
  if (ptr_BONDdata->has_set_control_type_data != 0) {
    pbVar3 = get_textptr_for_textID((&word_800409DC)[ptr_BONDdata->cur_player_control_type_0 * 10]);
    if (j_text_trigger == 0) {
      iVar5 = 10;
    }
    else {
      iVar5 = 0xe;
    }
    proc_7F0AE98C(aiStack2032,&iStack2036,pbVar3,iVar2,piVar1,iVar5);
    iStack2016 = 0xaa;
    iStack2020 = 0x1a;
    pbVar3 = get_textptr_for_textID((&word_800409DC)[ptr_BONDdata->cur_player_control_type_0 * 10]);
    if (j_text_trigger == 0) {
      iVar5 = 10;
    }
    else {
      iVar5 = 0xe;
    }
    puStackX0 = en_text_write_stuff(puStackX0,&iStack2016,&iStack2020,pbVar3,iVar2,(int)piVar1,
                                    0xa0ffa0f0,iStack2036,100,0,iVar5);
  }
  return puStackX0;
}



uint * proc_7F0A9AB8(undefined4 *displaylist)

{
  bool bVar1;
  undefined4 *puVar3;
  ulonglong uVar2;
  byte *pbVar4;
  uint *puVar5;
  byte *local_58;
  byte *local_54;
  byte *local_8;
  byte *local_4;
  
  if (cur_player_look_vertical_inverted == 1) {
    local_4 = get_textptr_for_textID(0xac2d);
    local_8 = get_textptr_for_textID(0xac2c);
  }
  else {
    local_4 = get_textptr_for_textID(0xac2c);
    local_8 = get_textptr_for_textID(0xac2d);
  }
  bVar1 = false;
  puVar3 = microcode_constructor(displaylist);
  uVar2 = get_controller_buttons_held('\0',L_TRIG);
  if (uVar2 == 0) {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e4 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar3,0x32,0x52,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e4 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar3,0x32,0x52,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
    if (*(short *)(&DAT_800409e4 + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53ff) {
      bVar1 = true;
    }
  }
  if (((DAT_80040998 == 1) && (dword_800409A8 != 0)) &&
     (uVar2 = get_controller_buttons_held('\0',R_JPAD|L_JPAD|D_JPAD|U_JPAD), uVar2 != 0)) {
    uVar2 = get_controller_buttons_held('\0',U_JPAD);
    if (uVar2 == 0) {
      uVar2 = get_controller_buttons_held('\0',D_JPAD);
      if (uVar2 == 0) {
        uVar2 = get_controller_buttons_held('\0',L_JPAD);
        if (uVar2 == 0) {
          uVar2 = get_controller_buttons_held('\0',R_JPAD);
          if (uVar2 != 0) {
            local_58 = get_textptr_for_textID(0xac2e);
          }
        }
        else {
          local_58 = get_textptr_for_textID(0xac2f);
        }
      }
      else {
        local_58 = local_8;
        if (*(short *)(&DAT_800409ea + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53fb) {
          local_58 = get_textptr_for_textID(0xac31);
        }
      }
    }
    else {
      local_58 = local_4;
      if (*(short *)(&DAT_800409ea + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53fb) {
        local_58 = get_textptr_for_textID(0xac30);
      }
    }
    puVar5 = proc_7F0A9398(puVar5,0x32,0x6b,local_58,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409ea + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x32,0x6b,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  pbVar4 = get_textptr_for_textID
                     (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf614));
  puVar5 = proc_7F0A9398(puVar5,0x32,0x84,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                         (uint)&DAT_003000b0,0);
  uVar2 = get_controller_buttons_held('\0',Z_TRIG);
  if (uVar2 == 0) {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e2 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x32,0x9d,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e2 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x32,0x9d,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
    if (*(short *)(&DAT_800409e2 + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53ff) {
      bVar1 = true;
    }
  }
  uVar2 = get_controller_buttons_held('\0',R_TRIG);
  if (uVar2 == 0) {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e6 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x52,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e6 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x52,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
    if (*(short *)(&DAT_800409e6 + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53ff) {
      bVar1 = true;
    }
  }
  if (((DAT_80040998 == 1) && (dword_800409A8 != 0)) &&
     (uVar2 = get_controller_buttons_held('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS),
     uVar2 != 0)) {
    uVar2 = get_controller_buttons_held('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS);
    if ((uVar2 & (longlong)((int)uVar2 + -1)) == 0) {
      uVar2 = get_controller_buttons_held('\0',U_CBUTTONS);
      if (uVar2 == 0) {
        uVar2 = get_controller_buttons_held('\0',D_CBUTTONS);
        if (uVar2 == 0) {
          uVar2 = get_controller_buttons_held('\0',L_CBUTTONS);
          if (uVar2 == 0) {
            uVar2 = get_controller_buttons_held('\0',R_CBUTTONS);
            if (uVar2 != 0) {
              local_54 = get_textptr_for_textID(0xac2e);
            }
          }
          else {
            local_54 = get_textptr_for_textID(0xac2f);
          }
        }
        else {
          local_54 = local_8;
          if (*(short *)(&DAT_800409e8 + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53fb)
          {
            local_54 = get_textptr_for_textID(0xac31);
          }
        }
      }
      else {
        local_54 = local_4;
        if (*(short *)(&DAT_800409e8 + ptr_BONDdata->cur_player_control_type_0 * 0x14) == -0x53fb) {
          local_54 = get_textptr_for_textID(0xac30);
        }
      }
      puVar5 = proc_7F0A9398(puVar5,0x10e,0x6b,local_54,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                             (uint)&DAT_003000b0,1);
    }
    else {
      pbVar4 = get_textptr_for_textID
                         (*(u16 *)(&DAT_800409e8 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
      puVar5 = proc_7F0A9398(puVar5,0x10e,0x6b,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                             (uint)&DAT_003000b0,1);
    }
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(&DAT_800409e8 + ptr_BONDdata->cur_player_control_type_0 * 0x14));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x6b,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  uVar2 = get_controller_buttons_held('\0',B_BUTTON);
  if (uVar2 == 0) {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf620));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x84,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf620));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x84,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  uVar2 = get_controller_buttons_held('\0',A_BUTTON);
  if (uVar2 == 0) {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf622));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x9d,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf622));
    puVar5 = proc_7F0A9398(puVar5,0x10e,0x9d,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  if (bVar1) {
    pbVar4 = get_textptr_for_textID(0xac08);
    puVar5 = proc_7F0A9398(puVar5,0xfa,0xc3,pbVar4,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar4 = get_textptr_for_textID
                       (*(u16 *)(ptr_BONDdata->cur_player_control_type_0 * 0x14 + -0x7ffbf612));
    puVar5 = proc_7F0A9398(puVar5,0xfa,0xc3,pbVar4,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  return puVar5;
}



uint * proc_7F0AA7C8(undefined4 *param_1)

{
  undefined4 *puVar2;
  ulonglong uVar1;
  byte *pbVar3;
  uint *puVar4;
  
  puVar2 = microcode_constructor(param_1);
  uVar1 = get_controller_buttons_held('\0',A_BUTTON);
  if (uVar1 == 0) {
    pbVar3 = get_textptr_for_textID(0xac03);
    puVar4 = proc_7F0A9398(puVar2,0x5a,0xa7,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac03);
    puVar4 = proc_7F0A9398(puVar2,0x5a,0xa7,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
  }
  uVar1 = get_controller_buttons_held('\0',B_BUTTON);
  if (uVar1 == 0) {
    pbVar3 = get_textptr_for_textID(0xac02);
    puVar4 = proc_7F0A9398(puVar4,0x5a,0x95,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac02);
    puVar4 = proc_7F0A9398(puVar4,0x5a,0x95,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
  }
  if ((ptr_BONDdata->cur_player_control_type_0 == 4) ||
     (ptr_BONDdata->cur_player_control_type_0 == 5)) {
    pbVar3 = get_textptr_for_textID(0xac00);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac01);
  }
  uVar1 = get_controller_buttons_held('\0',Z_TRIG);
  if (uVar1 == 0) {
    puVar4 = proc_7F0A9398(puVar4,0x5a,0xb9,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,0);
  }
  else {
    puVar4 = proc_7F0A9398(puVar4,0x5a,0xb9,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,0);
  }
  if ((ptr_BONDdata->cur_player_control_type_0 == 4) ||
     (ptr_BONDdata->cur_player_control_type_0 == 6)) {
    pbVar3 = get_textptr_for_textID(0xac05);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac06);
  }
  puVar4 = proc_7F0A9398(puVar4,0x5a,0xcb,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                         (uint)&DAT_003000b0,0);
  uVar1 = get_controller_buttons_held('\x01',A_BUTTON);
  if (uVar1 == 0) {
    pbVar3 = get_textptr_for_textID(0xac03);
    puVar4 = proc_7F0A9398(puVar4,0xe6,0xa7,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac03);
    puVar4 = proc_7F0A9398(puVar4,0xe6,0xa7,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  uVar1 = get_controller_buttons_held('\x01',B_BUTTON);
  if (uVar1 == 0) {
    pbVar3 = get_textptr_for_textID(0xac02);
    puVar4 = proc_7F0A9398(puVar4,0xe6,0x95,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac02);
    puVar4 = proc_7F0A9398(puVar4,0xe6,0x95,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  if ((ptr_BONDdata->cur_player_control_type_0 == 4) ||
     (ptr_BONDdata->cur_player_control_type_0 == 5)) {
    pbVar3 = get_textptr_for_textID(0xac01);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac00);
  }
  uVar1 = get_controller_buttons_held('\x01',Z_TRIG);
  if (uVar1 == 0) {
    puVar4 = proc_7F0A9398(puVar4,0xe6,0xb9,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                           (uint)&DAT_003000b0,1);
  }
  else {
    puVar4 = proc_7F0A9398(puVar4,0xe6,0xb9,pbVar3,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                           (uint)&DAT_003000b0,1);
  }
  if ((ptr_BONDdata->cur_player_control_type_0 == 4) ||
     (ptr_BONDdata->cur_player_control_type_0 == 6)) {
    pbVar3 = get_textptr_for_textID(0xac06);
  }
  else {
    pbVar3 = get_textptr_for_textID(0xac05);
  }
  puVar4 = proc_7F0A9398(puVar4,0xe6,0xcb,pbVar3,(uint)&DAT_00aa00b0,0,0xffffffff,0,0,
                         (uint)&DAT_003000b0,1);
  return puVar4;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// WARNING: Unknown calling convention yet parameter storage is locked

uint * proc_7F0AADC0(void)

{
  Mtx *in_v0_lo;
  int iVar2;
  longlong lVar1;
  u32 uVar3;
  undefined4 *displaylist;
  uint *puVar4;
  undefined4 *in_a0_lo;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a0_02;
  undefined8 extraout_a0_03;
  undefined8 extraout_a0_04;
  undefined8 extraout_a0_05;
  undefined8 extraout_a0_06;
  undefined8 extraout_a0_07;
  undefined8 extraout_a0_08;
  undefined8 uVar5;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  undefined8 extraout_a1_02;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  float extraout_f12;
  float fovy;
  float extraout_f12_00;
  float fovy_00;
  float extraout_f14;
  float aspect;
  float extraout_f14_00;
  float aspect_00;
  undefined4 auStack1268 [55];
  undefined4 auStack1048 [55];
  undefined4 auStack828 [55];
  char cStack606;
  char acStack605 [5];
  undefined4 *puStack600;
  float afStack596 [16];
  float afStack532 [16];
  u16 uStack466;
  int iStack464;
  undefined4 uStack460;
  undefined4 uStack456;
  float afStack452 [16];
  float afStack388 [16];
  float afStack324 [16];
  float afStack260 [16];
  float afStack196 [16];
  float afStack132 [16];
  f32 afStack68 [16];
  Mtx *pabStack4;
  
  proc_7F0BD6E0();
  iStack464 = dword_80040B5C;
  uStack460 = dword_80040B60;
  uStack456 = dword_80040B64;
  acStack605[0] = '\0';
  cStack606 = '\x01';
  displaylist = &dword_80040B68;
  puVar6 = auStack828;
  do {
    puVar8 = displaylist + 3;
    puVar7 = puVar6 + 3;
    *puVar6 = *displaylist;
    puVar6[1] = displaylist[1];
    puVar6[2] = displaylist[2];
    displaylist = puVar8;
    puVar6 = puVar7;
  } while (puVar8 != (undefined4 *)0x80040c40);
  *puVar7 = uRam80040c40;
  displaylist = &DAT_80040c44;
  puVar6 = auStack1048;
  do {
    puVar7 = displaylist + 3;
    puVar8 = puVar6 + 3;
    *puVar6 = *displaylist;
    puVar6[1] = displaylist[1];
    puVar6[2] = displaylist[2];
    displaylist = puVar7;
    puVar6 = puVar8;
  } while (puVar7 != (undefined4 *)&dword_80040D1C);
  *puVar8 = _dword_80040D1C;
  displaylist = &dword_80040D20;
  puVar6 = auStack1268;
  do {
    puVar7 = displaylist + 3;
    puVar8 = puVar6 + 3;
    *puVar6 = *displaylist;
    puVar6[1] = displaylist[1];
    puVar6[2] = displaylist[2];
    displaylist = puVar7;
    puVar6 = puVar8;
  } while (puVar7 != (undefined4 *)&dword_80040DF8);
  *puVar8 = _dword_80040DF8;
  pabStack4 = in_v0_lo;
  proc_7F0A9684('\0',&dword_80040B2C,(float *)&dword_80040B28,&dword_80040B24);
  proc_7F057FD0(afStack68);
  dword_80040B24 = dword_80040B24 + (float)dword_80040B28 * (float)dword_80048498 * 0.50000000;
  dword_80040B24 = proc_7F0A6A2C(dword_80040B24);
  proc_7F058688(dword_80040B24,extraout_a0,afStack132);
  if ((dword_800409A8 == 0) || (DAT_80040998 != 1)) {
    dword_80040B20 = proc_7F0A95C4(dword_80040B20,0.00000000,extraout_a0_00,extraout_a1,4.00000000);
    uVar5 = extraout_a0_03;
  }
  else {
    iVar2 = get_cur_controller_vert_stick_pos('\0');
    dword_80040B20 =
         proc_7F0A95C4(dword_80040B20,((float)iVar2 * flt_80058550) / 360.00000000,extraout_a0_01,
                       extraout_a1_00,4.00000000);
    uVar5 = extraout_a0_02;
  }
  proc_7F058570(-dword_80040B20 - flt_80058554,uVar5,afStack196);
  proc_7F0580C8((float *)afStack68,afStack132,(int)afStack260);
  proc_7F0580C8(afStack260,afStack196,(int)afStack324);
  init_something_copy_posdata_to_it(&iStack464,(int *)afStack260);
  proc_7F0580C8(afStack260,afStack324,(int)afStack388);
  lVar1 = proc_7F0A4D74();
  if (lVar1 == 0) {
    puStack600 = auStack828;
    proc_7F059694(afStack532,extraout_f12,extraout_f14,-5.00000000,2000.00000000,-168.00000000,
                  -5.00000000,0.00000000,-168.00000000,0.00000000);
  }
  else {
    puStack600 = auStack1048;
    proc_7F059694(afStack532,32.00000000,extraout_f14,flt_80058558,2500.00000000,32.00000000,
                  flt_80058558,0.00000000,32.00000000,0.00000000);
  }
  proc_7F0580C8(afStack532,afStack388,(int)afStack452);
  guPerspective(pabStack4,&uStack466,fovy,aspect,50.50000000,1.33333337,1000.00000000);
  *in_a0_lo = 0x1030040;
  uVar3 = osVirtualToPhysical(pabStack4);
  in_a0_lo[1] = uVar3;
  displaylist = proc_7F0A6EE8(in_a0_lo + 2);
  if (dword_80040B04 < 0xe0) {
    displaylist = (undefined4 *)
                  proc_7F06359C(displaylist,afStack452,(longlong)(dword_80040B04 + -6),1,
                                (int)puStack600,acStack605);
  }
  else {
    displaylist = (undefined4 *)proc_7F064364(displaylist,afStack452,1,(int)puStack600,acStack605);
  }
  lVar1 = proc_7F0A4D74();
  if (lVar1 != 0) {
    proc_7F0A9684('\x01',&dword_80040B3C,(float *)&dword_80040B38,(float *)&dword_80040B34);
    proc_7F057FD0(afStack68);
    dword_80040B34 =
         (f32)((float)dword_80040B34 + (float)dword_80040B38 * (float)dword_80048498 * 0.50000000);
    dword_80040B34 = (f32)proc_7F0A6A2C((float)dword_80040B34);
    proc_7F058688((float)dword_80040B34,extraout_a0_04,afStack132);
    if ((dword_800409A8 == 0) || (DAT_80040998 != 1)) {
      dword_80040B30 =
           (f32)proc_7F0A95C4((float)dword_80040B30,0.00000000,extraout_a0_05,extraout_a1_01,
                              4.00000000);
      uVar5 = extraout_a0_08;
    }
    else {
      iVar2 = get_cur_controller_vert_stick_pos('\x01');
      dword_80040B30 =
           (f32)proc_7F0A95C4((float)dword_80040B30,((float)iVar2 * flt_80058560) / 360.00000000,
                              extraout_a0_06,extraout_a1_02,4.00000000);
      uVar5 = extraout_a0_07;
    }
    proc_7F058570(-(float)dword_80040B30 - flt_80058564,uVar5,afStack196);
    proc_7F0580C8((float *)afStack68,afStack132,(int)afStack260);
    proc_7F0580C8(afStack260,afStack196,(int)afStack324);
    init_something_copy_posdata_to_it(&iStack464,(int *)afStack260);
    proc_7F0580C8(afStack260,afStack324,(int)afStack388);
    proc_7F059694(afStack596,extraout_f12_00,extraout_f14_00,flt_80058568,2500.00000000,32.00000000,
                  flt_80058568,0.00000000,32.00000000,0.00000000);
    proc_7F0580C8(afStack596,afStack388,(int)afStack452);
    guPerspective(pabStack4,&uStack466,fovy_00,aspect_00,50.50000000,1.33333337,1000.00000000);
    *displaylist = 0x1030040;
    uVar3 = osVirtualToPhysical(pabStack4);
    displaylist[1] = uVar3;
    displaylist = proc_7F0A6EE8(displaylist + 2);
    if (dword_80040B04 < 0xe0) {
      displaylist = (undefined4 *)
                    proc_7F06359C(displaylist,afStack452,(longlong)(dword_80040B04 + -6),1,
                                  (int)auStack1268,&cStack606);
    }
    else {
      displaylist = (undefined4 *)
                    proc_7F064364(displaylist,afStack452,1,(int)auStack1268,&cStack606);
    }
  }
  lVar1 = proc_7F0A4D74();
  if (lVar1 == 0) {
    puVar4 = proc_7F0A9AB8(displaylist);
  }
  else {
    puVar4 = proc_7F0AA7C8(displaylist);
  }
  return puVar4;
}



void proc_7F0AB48C(void)

{
  DAT_80040998 = 0;
  return;
}



void proc_7F0AB498(void)

{
  DAT_8004099c = 0;
  return;
}



void proc_7F0AB4A4(void)

{
  dword_800409A4 = 0;
  return;
}



undefined8 proc_7F0AB4B0(undefined8 param_1)

{
  return param_1;
}



uint * proc_7F0AB4B8(undefined8 param_1,undefined8 param_2)

{
  int *piVar1;
  int iVar2;
  ulonglong uVar3;
  undefined4 *DL;
  uint *DL_00;
  byte *pbVar5;
  longlong lVar4;
  uint uVar6;
  int iStack24;
  int iStack20;
  uint uStack16;
  uint auStack12 [3];
  
  DL_00 = (uint *)proc_7F0A714C();
  uVar3 = check_watch_page_transistion_running();
  if (uVar3 != 1) {
    DL = (undefined4 *)proc_7F0AADC0();
    iVar2 = D_80040EB0;
    piVar1 = D_80040EAC;
    DL_00 = microcode_constructor(DL);
    pbVar5 = get_textptr_for_textID(0xac32);
    auStack12[0] = 0x40;
    uStack16 = 0x1a;
    uVar6 = 0xff00b0;
    if ((DAT_80040998 == 0) && (uVar6 = 0xa0ffa0f0, dword_800409A8 != 0)) {
      uVar6 = 0xffffffff;
    }
    proc_7F0AE98C(&iStack24,&iStack20,pbVar5,iVar2,piVar1,0);
    if ((dword_800409A8 == 0) || (DAT_80040998 != 0)) {
      DL_00 = en_text_write_stuff(DL_00,(int *)auStack12,(int *)&uStack16,pbVar5,iVar2,(int)piVar1,
                                  uVar6,iStack20,iStack24,0,0);
    }
    else {
      DL_00 = jp_text_stuff(DL_00,auStack12,&uStack16,pbVar5,iVar2,(int)piVar1,uVar6,
                            (uint)&DAT_007000a0,iStack20 + 1,iStack24,0,0);
    }
    uVar6 = 0xff00b0;
    DL_00 = proc_7F0A97D0(DL_00);
    pbVar5 = get_textptr_for_textID(0xac33);
    lVar4 = proc_7F0A4D74();
    if (lVar4 != 0) {
      pbVar5 = get_textptr_for_textID(0xac34);
    }
    auStack12[0] = 0x40;
    uStack16 = 0x2b;
    if ((DAT_80040998 == 1) && (uVar6 = 0xa0ffa0f0, dword_800409A8 != 0)) {
      uVar6 = 0xffffffff;
    }
    proc_7F0AE98C(&iStack24,&iStack20,pbVar5,iVar2,piVar1,0);
    if ((dword_800409A8 == 0) || (DAT_80040998 != 1)) {
      DL_00 = en_text_write_stuff(DL_00,(int *)auStack12,(int *)&uStack16,pbVar5,iVar2,(int)piVar1,
                                  uVar6,iStack20,iStack24,0,0);
    }
    else {
      DL_00 = jp_text_stuff(DL_00,auStack12,&uStack16,pbVar5,iVar2,(int)piVar1,uVar6,
                            (uint)&DAT_007000a0,iStack20 + 1,iStack24,0,0);
    }
  }
  return DL_00;
}



int ** proc_7F0AB7A4(undefined4 *param_1,undefined4 param_2)

{
  int **ppiVar1;
  
  *param_1 = param_2;
  set_controlstick_lr_disabled();
  ppiVar1 = play_sfx_a1(ptr_sfx_buf,0x2b,NULL);
  return ppiVar1;
}



// WARNING: Instruction at (ram,0x7f0ab88c) overlaps instruction at (ram,0x7f0ab888)
// 

ulonglong proc_7F0AB7D8(int param_1)

{
  ulonglong uVar1;
  int **ppiVar2;
  
  uVar1 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD);
  if (((uVar1 == 0) && (uVar1 = proc_7F0A4FB0(), uVar1 == 0)) || (dword_800409A8 == 0)) {
    uVar1 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD);
    if (((uVar1 != 0) || (uVar1 = proc_7F0A4FEC(), uVar1 != 0)) && (dword_800409A8 != 0)) {
      uVar1 = SEXT48((int)(&word_80040A7C + param_1 * 6));
      if ((&cur_player_look_vertical_inverted)[param_1 * 3] == 0) {
        ppiVar2 = proc_7F0AB7A4(&cur_player_look_vertical_inverted + param_1 * 3,1);
        uVar1 = SEXT48((int)ppiVar2);
      }
      else {
        if (((&cur_player_look_vertical_inverted)[param_1 * 3] == 1) &&
           (*(short *)(&DAT_80040a82 + param_1 * 0xc) != 0)) {
          ppiVar2 = proc_7F0AB7A4(&cur_player_look_vertical_inverted + param_1 * 3,2);
          uVar1 = SEXT48((int)ppiVar2);
        }
      }
    }
  }
  else {
    uVar1 = SEXT48((int)(&word_80040A7C + param_1 * 6));
    if ((&cur_player_look_vertical_inverted)[param_1 * 3] == 1) {
      ppiVar2 = proc_7F0AB7A4(&cur_player_look_vertical_inverted + param_1 * 3,0);
      uVar1 = SEXT48((int)ppiVar2);
    }
    else {
      if ((&cur_player_look_vertical_inverted)[param_1 * 3] == 2) {
        ppiVar2 = proc_7F0AB7A4(&cur_player_look_vertical_inverted + param_1 * 3,1);
        uVar1 = SEXT48((int)ppiVar2);
      }
    }
  }
  return uVar1;
}



uint * proc_7F0AB908(undefined4 *param_1,uint param_2,int param_3,longlong param_4)

{
  u32 uVar1;
  byte *pbVar2;
  uint *puVar3;
  uint uVar4;
  undefined2 *puVar5;
  undefined *puVar6;
  undefined *puVar7;
  uint *local_res0;
  uint local_14;
  undefined *local_c;
  
  puVar7 = &DAT_00800080;
  puVar6 = &DAT_00800080;
  local_c = &DAT_00800080;
  if (j_text_trigger == 0) {
    uVar4 = 0xb4;
    local_14 = 0xe1;
  }
  else {
    uVar4 = 0xaa;
    local_14 = 0xdc;
  }
  if (param_4 == 0) {
    puVar5 = &word_80040A7C + param_3 * 6;
    uVar1 = (&cur_player_look_vertical_inverted)[param_3 * 3];
    if (uVar1 == 0) {
      puVar6 = (undefined *)0xff00b0;
    }
    else {
      if (uVar1 == 1) {
        puVar7 = (undefined *)0xff00b0;
      }
      else {
        if (uVar1 == 2) {
          local_c = (undefined *)0xff00b0;
        }
      }
    }
  }
  else {
    if (param_4 == 1) {
      puVar5 = &word_80040A7C + param_3 * 6;
      uVar1 = (&cur_player_look_vertical_inverted)[param_3 * 3];
      if (uVar1 == 0) {
        puVar6 = (undefined *)0xff00b0;
      }
      else {
        if (uVar1 == 1) {
          puVar7 = (undefined *)0xff00b0;
        }
        else {
          if (uVar1 == 2) {
            local_c = (undefined *)0xff00b0;
          }
        }
      }
    }
    else {
      if (param_4 == 2) {
        proc_7F0AB7D8(param_3);
        puVar5 = &word_80040A7C + param_3 * 6;
        uVar1 = (&cur_player_look_vertical_inverted)[param_3 * 3];
        puVar6 = &DAT_00800080;
        puVar7 = &DAT_00800080;
        if (uVar1 == 0) {
          puVar6 = (undefined *)0xa0ffa0f0;
        }
        else {
          if (uVar1 == 1) {
            puVar7 = (undefined *)0xa0ffa0f0;
          }
          else {
            if (uVar1 == 2) {
              local_c = (undefined *)0xa0ffa0f0;
            }
          }
        }
      }
      else {
        puVar5 = &word_80040A7C + param_3 * 6;
        puVar6 = puVar7;
      }
    }
  }
  if (puVar5[3] == 0) {
    uVar4 = 200;
    if (j_text_trigger == 0) {
      local_14 = 0xfa;
    }
    else {
      uVar4 = 0xbe;
      local_14 = 0xfa;
    }
  }
  pbVar2 = get_textptr_for_textID(puVar5[1]);
  puVar3 = proc_7F0A9398(param_1,uVar4,param_2,pbVar2,(uint)puVar6,0,0xffffffff,1,0,
                         (uint)&DAT_003000b0,0);
  pbVar2 = get_textptr_for_textID(puVar5[2]);
  local_res0 = proc_7F0A9398(puVar3,local_14,param_2,pbVar2,(uint)puVar7,0,0xffffffff,1,0,
                             (uint)&DAT_003000b0,0);
  if (puVar5[3] != 0) {
    pbVar2 = get_textptr_for_textID(puVar5[3]);
    local_res0 = proc_7F0A9398(local_res0,0x10e,param_2,pbVar2,(uint)local_c,0,0xffffffff,1,0,
                               (uint)&DAT_003000b0,0);
  }
  return local_res0;
}



uint * proc_7F0ABC1C(undefined4 *param_1)

{
  uint *puVar1;
  byte *pbVar2;
  uint uVar3;
  int iVar4;
  u16 *puVar5;
  
  puVar1 = microcode_constructor(param_1);
  puVar5 = &word_80040A7C;
  iVar4 = 0;
  uVar3 = 0x50;
  do {
    if (iVar4 + 2 == DAT_8004099c) {
      if (dword_800409A8 == 0) {
        pbVar2 = get_textptr_for_textID(*puVar5);
        puVar1 = proc_7F0A9398(puVar1,0x40,uVar3,pbVar2,0xa0ffa0f0,0,0xffffffff,0,0,
                               (uint)&DAT_003000b0,0);
        puVar1 = proc_7F0AB908(puVar1,uVar3,iVar4,1);
      }
      else {
        pbVar2 = get_textptr_for_textID(*puVar5);
        puVar1 = proc_7F0A9398(puVar1,0x40,uVar3,pbVar2,0xffffffff,1,(uint)&DAT_007000a0,0,0,
                               (uint)&DAT_003000b0,0);
        puVar1 = proc_7F0AB908(puVar1,uVar3,iVar4,2);
      }
    }
    else {
      pbVar2 = get_textptr_for_textID(*puVar5);
      puVar1 = proc_7F0A9398(puVar1,0x40,uVar3,pbVar2,0xff00b0,0,0xffffffff,0,0,(uint)&DAT_003000b0,
                             0);
      puVar1 = proc_7F0AB908(puVar1,uVar3,iVar4,0);
    }
    iVar4 += 1;
    puVar5 = puVar5 + 6;
    uVar3 += 0xf;
  } while (iVar4 != 8);
  return puVar1;
}



uint * proc_7F0ABDFC(undefined8 param_1,undefined8 param_2)

{
  int *piVar1;
  int iVar2;
  uint uVar3;
  ulonglong uVar4;
  undefined4 *DL;
  uint *DL_00;
  int iStack24;
  int iStack20;
  uint uStack16;
  uint uStack12;
  byte *pbStack8;
  uint uStack4;
  
  DL_00 = (uint *)proc_7F0A714C();
  uVar4 = check_watch_page_transistion_running();
  if (uVar4 == 1) {
    return DL_00;
  }
  proc_7F0A91C8();
  DL = (undefined4 *)proc_7F0A8FEC();
  iVar2 = D_80040EB0;
  piVar1 = D_80040EAC;
  DL_00 = microcode_constructor(DL);
  pbStack8 = get_textptr_for_textID(0xac35);
  uStack12 = 0x40;
  uStack16 = 0x25;
  uStack4 = 0xff00b0;
  if ((DAT_8004099c == 0) && (uStack4 = 0xa0ffa0f0, dword_800409A8 != 0)) {
    uStack4 = 0xffffffff;
  }
  proc_7F0AE98C(&iStack24,&iStack20,pbStack8,iVar2,piVar1,0);
  uVar3 = uStack4;
  if (dword_800409A8 != 0) {
    if (DAT_8004099c == 0) {
      uStack4 = 0xff00b0;
      DL_00 = jp_text_stuff(DL_00,&uStack12,&uStack16,pbStack8,iVar2,(int)piVar1,uVar3,
                            (uint)&DAT_007000a0,iStack20 + 1,iStack24,0,0);
      goto LAB_7f0abf9c;
    }
  }
  uStack4 = 0xff00b0;
  DL_00 = en_text_write_stuff(DL_00,(int *)&uStack12,(int *)&uStack16,pbStack8,iVar2,(int)piVar1,
                              uVar3,iStack20,iStack24,0,0);
LAB_7f0abf9c:
  pbStack8 = get_textptr_for_textID(0xac36);
  uStack12 = 0x40;
  uStack16 = 0x3b;
  if ((DAT_8004099c == 1) && (uStack4 = 0xa0ffa0f0, dword_800409A8 != 0)) {
    uStack4 = 0xffffffff;
  }
  proc_7F0AE98C(&iStack24,&iStack20,pbStack8,iVar2,piVar1,0);
  if ((dword_800409A8 == 0) || (DAT_8004099c != 1)) {
    DL_00 = en_text_write_stuff(DL_00,(int *)&uStack12,(int *)&uStack16,pbStack8,iVar2,(int)piVar1,
                                uStack4,iStack20,iStack24,0,0);
  }
  else {
    DL_00 = jp_text_stuff(DL_00,&uStack12,&uStack16,pbStack8,iVar2,(int)piVar1,uStack4,
                          (uint)&DAT_007000a0,iStack20 + 1,iStack24,0,0);
  }
  DL_00 = proc_7F0ABC1C(DL_00);
  return DL_00;
}



int proc_7F0AC0E8(char *param_1)

{
  char cVar1;
  int iVar2;
  
  cVar1 = *param_1;
  iVar2 = 0;
  while (cVar1 != '\0') {
    if (cVar1 == '\n') {
      iVar2 += 1;
      cVar1 = param_1[1];
    }
    else {
      cVar1 = param_1[1];
    }
    param_1 = param_1 + 1;
  }
  return iVar2;
}



char * proc_7F0AC120(char *param_1)

{
  char cVar1;
  char *pcVar2;
  char *pcVar3;
  
  cVar1 = *param_1;
  pcVar2 = param_1;
  while (cVar1 != '\0') {
    if (cVar1 == '\n') {
      pcVar3 = param_1 + 1;
      if (param_1[1] == '\0') {
        cVar1 = param_1[2];
      }
      else {
        cVar1 = param_1[2];
        pcVar2 = pcVar3;
      }
    }
    else {
      cVar1 = param_1[1];
      pcVar3 = param_1;
    }
    param_1 = pcVar3 + 1;
  }
  return pcVar2;
}



uint * proc_7F0AC168(undefined8 param_1,undefined8 param_2)

{
  ulonglong uVar1;
  undefined4 *DL;
  byte *__format;
  int objective;
  DIFFICULTY DVar2;
  DIFFICULTY DVar3;
  char *pcVar4;
  size_t sVar5;
  int iVar6;
  uint *DL_00;
  short sVar7;
  short sVar8;
  int iVar9;
  undefined4 uVar10;
  char *__s;
  undefined4 *puVar11;
  undefined4 *puVar12;
  undefined4 *puVar13;
  int iVar14;
  int iVar15;
  longlong objective_00;
  uint *puStackX0;
  int iStack3444;
  uint uStack3428;
  undefined uStack3424;
  int iStack3224;
  int aiStack3220 [4];
  byte *pbStack3204;
  byte *pbStack3200;
  byte *pbStack3196;
  byte abStack3192 [32];
  undefined4 auStack3160 [750];
  int iStack160;
  int *piStack156;
  int iStack152;
  int iStack148;
  uint uStack144;
  uint uStack140;
  uint uStack136;
  uint uStack132;
  undefined4 auStack128 [15];
  undefined4 uStack68;
  undefined4 uStack64;
  undefined4 auStack60 [15];
  
  puStackX0 = (uint *)proc_7F0A714C();
  uVar1 = check_watch_page_transistion_running();
  if (uVar1 != 1) {
    DL = &dword_80040DFC;
    puVar12 = auStack60;
    do {
      puVar13 = DL + 3;
      *puVar12 = *DL;
      puVar12[1] = DL[1];
      puVar12[2] = DL[2];
      DL = puVar13;
      puVar12 = puVar12 + 3;
    } while (puVar13 != &dword_80040E38);
    uStack68 = dword_80040E38;
    uStack64 = dword_80040E3C;
    DL = &dword_80040E40;
    puVar12 = auStack128;
    do {
      puVar13 = DL + 3;
      *puVar12 = *DL;
      puVar12[1] = DL[1];
      puVar12[2] = DL[2];
      DL = puVar13;
      puVar12 = puVar12 + 3;
    } while (puVar13 != (undefined4 *)&dword_80040E7C);
    iStack148 = 0;
    iStack152 = 0;
    piStack156 = D_80040EAC;
    iStack160 = D_80040EB0;
    DL = (undefined4 *)asc_800577C0;
    puVar12 = auStack3160;
    do {
      puVar13 = DL + 3;
      *puVar12 = *DL;
      puVar12[1] = DL[1];
      puVar12[2] = DL[2];
      DL = puVar13;
      puVar12 = puVar12 + 3;
    } while (puVar13 != null_ARRAY_80058378);
    pbStack3196 = get_textptr_for_textID(0xac28);
    pbStack3200 = get_textptr_for_textID(0xac29);
    pbStack3204 = get_textptr_for_textID(0xac37);
    __format = (byte *)get_ptr_text_for_watch_breifing_page(BRIEFING_TITLE);
    DL = microcode_constructor(puStackX0);
    proc_7F0AE98C(&iStack148,&iStack152,__format,iStack160,piStack156,0);
    iVar9 = -iStack152 + 0xaa;
    if (iVar9 < 0) {
      iVar9 = -iStack152 + 0xab;
    }
    uStack132 = (iVar9 >> 1) + 0x4b;
    uStack140 = uStack132 + iStack152;
    uStack144 = iStack148 + 0x1e;
    uStack136 = 0x1e;
    DL = draw_blackbox_to_screen(DL,&uStack132,&uStack136,&uStack140,&uStack144);
    puStackX0 = en_text_write_stuff(DL,(int *)&uStack132,(int *)&uStack136,__format,iStack160,
                                    (int)piStack156,0xa0ffa0f0,iStack152,iStack148,0,0);
    uStack132 = 0x41;
    switch(dword_800409A0) {
    case 0:
      __format = get_textptr_for_textID(0xac38);
      sprintf((char *)abStack3192,(char *)__format);
      __format = (byte *)get_ptr_text_for_watch_breifing_page(BRIEFING_OVERVIEW);
      proc_7F0AEB64(0xd2,__format,(byte *)auStack3160,iStack160,piStack156);
      proc_7F0A6618();
      break;
    case 1:
      __format = get_textptr_for_textID(0xac39);
      sprintf((char *)abStack3192,(char *)__format);
      __format = (byte *)get_ptr_text_for_watch_breifing_page(BRIEFING_M);
      proc_7F0AEB64(0xd2,__format,(byte *)auStack3160,iStack160,piStack156);
      proc_7F0A66A0();
      break;
    case 2:
      __format = get_textptr_for_textID(0xac3a);
      sprintf((char *)abStack3192,(char *)__format);
      __format = (byte *)get_ptr_text_for_watch_breifing_page(BRIEFING_Q);
      proc_7F0AEB64(0xd2,__format,(byte *)auStack3160,iStack160,piStack156);
      proc_7F0A672C();
      break;
    case 3:
      __format = get_textptr_for_textID(0xac3b);
      sprintf((char *)abStack3192,(char *)__format);
      __format = (byte *)get_ptr_text_for_watch_breifing_page(BRIEFING_MONEYPENNY);
      proc_7F0AEB64(0xd2,__format,(byte *)auStack3160,iStack160,piStack156);
      proc_7F0A67BC();
      break;
    case 4:
      DL = null_ARRAY_80058378;
      puVar12 = &uStack3424;
      do {
        puVar11 = puVar12;
        puVar13 = DL;
        *puVar11 = *puVar13;
        puVar11[1] = puVar13[1];
        puVar11[2] = puVar13[2];
        DL = puVar13 + 3;
        puVar12 = puVar11 + 3;
      } while (puVar13 + 3 != (undefined4 *)0x80058438);
      iVar9 = 1;
      puVar11[3] = uRam80058438;
      iVar15 = 0;
      uVar10 = 5;
      puVar11[4] = puVar13[4];
      iStack3444 = 0;
      if (j_text_trigger != 0) {
        uVar10 = 1;
      }
      proc_7F0ACBA0(uVar10);
      __format = get_textptr_for_textID(0xac3c);
      sprintf((char *)abStack3192,(char *)__format);
      objective_00 = 0;
      objective = add_objective();
      if (0 < objective) {
        do {
          objective = (int)objective_00;
          DVar2 = get_difficulty_for_objective(objective);
          DVar3 = get_current_difficulty();
          if (DVar2 <= DVar3) {
            iVar14 = 0;
            pcVar4 = (char *)get_text_for_objective(objective);
            uStack3424 = 0;
            if (0 < iVar9) {
              do {
                string_load_parse_something((char *)&uStack3424,asc_80058440);
                iVar14 += 1;
              } while (iVar14 != iVar9);
            }
            iVar14 = 0;
            if (0 < iVar15) {
              do {
                string_load_parse_something((char *)&uStack3424,asc_80058444);
                iVar14 += 1;
              } while (iVar14 != iVar15);
            }
            iVar14 = 0;
            sVar5 = strlen((char *)&uStack3424);
            __s = (char *)(sVar5 + (int)&uStack3424);
            sprintf(__s,aC_2,iStack3444 + 0x61);
            string_load_parse_something((char *)&uStack3424,pcVar4);
            aiStack3220[0] = 5;
            if (j_text_trigger != 0) {
              aiStack3220[0] = 1;
            }
            aiStack3220[0] += uStack136;
            iStack3224 = 0x3c;
            sVar7 = get_video2_settings_txtClipW();
            sVar8 = get_video2_settings_txtClipH();
            DL_00 = en_text_write_stuff(puStackX0,&iStack3224,aiStack3220,(byte *)&uStack3424,
                                        iStack160,(int)piStack156,0xff00b0,(int)sVar7,(int)sVar8,0,
                                        10);
            iVar6 = proc_7F0AC0E8(__s);
            iVar9 += iVar6;
            __format = (byte *)proc_7F0AC120(__s);
            proc_7F0AE98C(&iStack148,&iStack152,__format,iStack160,piStack156,10);
            sVar7 = get_video2_settings_txtClipW();
            iVar6 = (int)sVar7;
            if (sVar7 < 0) {
              iVar6 += 1;
            }
            if (iStack152 + 0x3c < iVar6 >> 1) {
              iVar9 += -1;
            }
            uStack3424 = 0;
            if (0 < iVar9) {
              do {
                string_load_parse_something((char *)&uStack3424,asc_80058450);
                iVar14 += 1;
              } while (iVar14 != iVar9);
            }
            iVar14 = 0;
            if (0 < iVar15) {
              do {
                string_load_parse_something((char *)&uStack3424,asc_80058454);
                iVar14 += 1;
              } while (iVar14 != iVar15);
            }
            iVar14 = get_status_of_objective(objective_00);
            if (iVar14 == 0) {
              string_load_parse_something((char *)&uStack3424,(char *)pbStack3200);
              uStack3428 = dword_80040AFC << 0x10 | 0x400040ff;
            }
            else {
              if (iVar14 == 1) {
                uStack3428 = 0xa0ffa0f0;
                string_load_parse_something((char *)&uStack3424,(char *)pbStack3196);
              }
              else {
                if (iVar14 == 2) {
                  string_load_parse_something((char *)&uStack3424,(char *)pbStack3204);
                  if (j_text_trigger == 0) {
                    uStack3428 = 0xff00b0;
                  }
                  else {
                    uStack3428 = 0xa0ffa0f0;
                  }
                }
              }
            }
            proc_7F0AE98C(&iStack148,&iStack152,(byte *)&uStack3424,iStack160,piStack156,10);
            aiStack3220[0] = 5;
            if (j_text_trigger != 0) {
              aiStack3220[0] = 1;
            }
            aiStack3220[0] += uStack136;
            if (j_text_trigger == 0) {
              iStack3224 = 0xaf;
            }
            else {
              iStack3224 = 0xf5 - iStack152;
            }
            sVar7 = get_video2_settings_txtClipH();
            puStackX0 = en_text_write_stuff(DL_00,&iStack3224,aiStack3220,(byte *)&uStack3424,
                                            iStack160,(int)piStack156,uStack3428,0xd2,(int)sVar7,0,
                                            10);
            iVar15 += 1;
            iStack3444 += 1;
          }
          objective_00 = (longlong)(objective + 1);
          objective = add_objective();
        } while (objective_00 < (longlong)objective);
      }
      proc_7F0ACBA0(0xffffffff);
      proc_7F0A684C();
    }
    proc_7F0AE98C(&iStack148,&iStack152,abStack3192,iStack160,piStack156,10);
    DL_00 = en_text_write_stuff(puStackX0,(int *)&uStack132,(int *)&uStack136,abStack3192,iStack160,
                                (int)piStack156,0xa0ffa0f0,0xd2,0x82,0,10);
    uStack136 += 5;
    uStack132 = 0x3c;
    proc_7F0AE98C(&iStack148,&iStack152,(byte *)auStack3160,iStack160,piStack156,10);
    sVar7 = get_video2_settings_txtClipW();
    sVar8 = get_video2_settings_txtClipH();
    puStackX0 = en_text_write_stuff(DL_00,(int *)&uStack132,(int *)&uStack136,(byte *)auStack3160,
                                    iStack160,(int)piStack156,0xff00b0,(int)sVar7,(int)sVar8,0,10);
  }
  return puStackX0;
}



longlong proc_7F0ACA28(longlong param_1,int param_2,int param_3)

{
  longlong lVar1;
  ulonglong uVar2;
  uint *puVar3;
  
  proc_7F0A70AC(DAT_80040994,(int)&ptr_BONDdata->buffer_for_watch_greenbackdrop_vertices);
  lVar1 = (longlong)param_3;
  if (lVar1 == 1) {
    set_BONDdata_paused_flag(0);
    proc_7F0BD8FC(0);
    if ((DAT_80040994 != 1) &&
       (uVar2 = get_controller_buttons_pressed('\0',Z_TRIG|A_BUTTON), uVar2 != 0)) {
      proc_7F0A4EF8();
    }
    switch(DAT_80040994) {
    case 0:
      param_1 = proc_7F0A830C(param_1,(longlong)param_2);
      break;
    case 1:
      puVar3 = debug_gun_watch_move_related2(param_1,(longlong)param_2);
      param_1 = (longlong)(int)puVar3;
      break;
    case 2:
      puVar3 = proc_7F0AB4B8(param_1,(longlong)param_2);
      param_1 = (longlong)(int)puVar3;
      break;
    case 3:
      puVar3 = proc_7F0ABDFC(param_1,(longlong)param_2);
      param_1 = (longlong)(int)puVar3;
      break;
    case 4:
      puVar3 = proc_7F0AC168(param_1,(longlong)param_2);
      param_1 = (longlong)(int)puVar3;
    }
  }
  else {
    if (lVar1 == 0) {
      proc_7F0BD8FC(1);
      set_BONDdata_paused_flag(1);
      proc_7F0A77A8(param_1,(longlong)param_2);
      param_1 = lVar1;
    }
  }
  return param_1;
}



void removed_7f0acb70(void)

{
  return;
}



void proc_7F0ACB78(int param_1)

{
  dword_80040E84 = -param_1;
  return;
}



void proc_7F0ACB88(undefined4 param_1)

{
  dword_80040E88 = param_1;
  return;
}



void proc_7F0ACB94(undefined4 param_1)

{
  dword_80040E8C = param_1;
  return;
}



void proc_7F0ACBA0(undefined4 param_1)

{
  dword_80040E90 = param_1;
  return;
}



void load_font_table_controllers(void)

{
  int iVar1;
  undefined *puVar2;
  int iVar3;
  
  dword_80040E84 = 0;
  dword_80040E88 = 0;
  dword_80040E8C = 0;
  dword_80040E90 = 0xffffffff;
  dword_80040E94 = 0;
  dword_80040E98 = 0;
  dword_80040E9C = 0;
  dword_80040EA0 = 0;
  dword_80040EA4 = 0;
  D_80040EAC = allocate_bytes_in_bank(0x24b0,4);
  D_80040EB0 = (int)D_80040EAC + 0x2a4;
  romCopy(D_80040EAC,&font_first_font_table_controller_small,0x24b0);
  iVar3 = 0;
  do {
    iVar1 = D_80040EB0 + iVar3;
    iVar3 += 0x18;
    *(int *)(iVar1 + 0x14) = *(int *)(iVar1 + 0x14) + (int)D_80040EAC;
  } while (iVar3 < 0x8d0);
  ptrFirstFontTable = (undefined *)allocate_bytes_in_bank(0x3540,4);
  ptrSecondFontTable = ptrFirstFontTable + 0x2a4;
  romCopy(ptrFirstFontTable,&font_first_font_table_controller_large,0x3540);
  iVar3 = 0x30;
  *(undefined **)(ptrSecondFontTable + 0x14) =
       ptrFirstFontTable + *(int *)(ptrSecondFontTable + 0x14);
  *(undefined **)(ptrSecondFontTable + 0x2c) =
       ptrFirstFontTable + *(int *)(ptrSecondFontTable + 0x2c);
  do {
    *(undefined **)(ptrSecondFontTable + iVar3 + 0x14) =
         ptrFirstFontTable + *(int *)(ptrSecondFontTable + iVar3 + 0x14);
    *(undefined **)(ptrSecondFontTable + iVar3 + 0x2c) =
         ptrFirstFontTable + *(int *)(ptrSecondFontTable + iVar3 + 0x2c);
    *(undefined **)(ptrSecondFontTable + iVar3 + 0x44) =
         ptrFirstFontTable + *(int *)(ptrSecondFontTable + iVar3 + 0x44);
    puVar2 = ptrSecondFontTable + iVar3;
    iVar3 += 0x60;
    *(undefined **)(puVar2 + 0x5c) = ptrFirstFontTable + *(int *)(puVar2 + 0x5c);
  } while (iVar3 != 0x8d0);
  return;
}



undefined4 * microcode_constructor(undefined4 *DL)

{
  *DL = 0xe7000000;
  DL[1] = 0;
  DL[2] = 0xba001402;
  DL[3] = 0;
  DL[5] = 0xc0;
  DL[4] = 0xba000602;
  DL[6] = 0xb900031d;
  DL[7] = 0x5041c8;
  DL[8] = 0xfcff97ff;
  DL[9] = 0xff2dfeff;
  DL[10] = 0xba001301;
  DL[0xb] = 0;
  DL[0xc] = 0xb9000002;
  DL[0xd] = 0;
  DL[0xe] = 0xba001001;
  DL[0xf] = 0;
  DL[0x11] = 0xc00;
  DL[0x10] = 0xba000903;
  DL[0x12] = 0xba000e02;
  DL[0x13] = 0;
  if (dword_80040E94 != 0) {
    DL[0x15] = 0x3000;
    DL[0x14] = 0xba000c02;
    return DL + 0x16;
  }
  DL[0x15] = 0x2000;
  DL[0x14] = 0xba000c02;
  return DL + 0x16;
}



undefined4 * combiner_bayer_lod_perspective(undefined4 *DL)

{
  *DL = 0xe7000000;
  DL[1] = 0;
  DL[3] = 0x40;
  DL[2] = 0xba000602;
  DL[5] = 0x80000;
  DL[4] = 0xba001301;
  DL[7] = 0x10000;
  DL[6] = 0xba001001;
  return DL + 8;
}



undefined4 * draw_blackbox_to_screen(undefined4 *DL,uint *ulx,uint *uly,uint *lrx,uint *lry)

{
  *DL = 0xb900031d;
  DL[1] = 0x504240;
  DL[2] = 0xfcffffff;
  DL[3] = 0xfffdf6fb;
  DL[4] = 0xfa000000;
  DL[5] = 0;
  DL[6] = (*lry & 0x3ff) << 2 | 0xf6000000 | (*lrx & 0x3ff) << 0xe;
  DL[7] = (*uly & 0x3ff) << 2 | (*ulx & 0x3ff) << 0xe;
  DL[9] = 0x504240;
  DL[8] = 0xb900031d;
  DL[10] = 0xfcff97ff;
  DL[0xb] = 0xff2dfeff;
  return DL + 0xc;
}



undefined4 *
microcode_constructor_related_to_menus
          (undefined4 *DL,undefined8 param_2,undefined8 param_3,undefined8 param_4,uint param_5,
          uint param_6)

{
  *DL = 0xb900031d;
  DL[1] = 0x504240;
  DL[2] = 0xfcffffff;
  DL[3] = 0xfffdf6fb;
  DL[4] = 0xfa000000;
  DL[5] = param_6 & 0xff000000 | (param_6 >> 0x10 & 0xff) << 0x10 | (param_6 >> 8 & 0xff) << 8 |
          param_6 & 0xff;
  DL[7] = ((uint)param_2 & 0x3ff) << 0xe | ((uint)param_3 & 0x3ff) << 2;
  DL[6] = ((uint)param_4 & 0x3ff) << 0xe | 0xf6000000 | (param_5 & 0x3ff) << 2;
  DL[9] = 0xff2dfeff;
  DL[8] = 0xfcff97ff;
  return DL + 10;
}



uint * proc_7F0AD0F8(uint *param_1,int *param_2,int *param_3,uint *param_4,int param_5,int param_6,
                    int param_7,int param_8,int param_9,int param_10,int param_11)

{
  uint uVar1;
  short sVar5;
  uint uVar2;
  int iVar3;
  u32 uVar4;
  uint uVar6;
  int iVar7;
  uint *puVar8;
  
  param_11 = *param_3 + param_11;
  iVar7 = (*param_2 -
          (*(int *)(param_6 + *(int *)(param_5 + 0x10) * 0x34 + param_4[4] * 4) + dword_80040E84)) +
          1;
  *param_2 = iVar7;
  if ((dword_80040E88 != 0) ||
     (((puVar8 = param_1, 0 < iVar7 &&
       (sVar5 = get_video2_settings_txtClipW(), puVar8 = param_1,
       (longlong)*param_2 <= (longlong)sVar5)) &&
      (sVar5 = get_video2_settings_txtClipH(), puVar8 = param_1,
      (longlong)(int)(param_11 + param_4[1]) <= (longlong)sVar5)))) {
    puVar8 = param_1;
    if (*param_2 <= param_7 + param_9) {
      param_10 = param_8 + param_10;
      puVar8 = param_1;
      if ((((int)(param_4[1] + param_11) <= param_10) && (puVar8 = param_1, param_7 <= *param_2)) &&
         (puVar8 = param_1, param_8 <= (int)(param_4[1] + param_11 + param_4[2]))) {
        if ((int)*param_4 < 0x80) {
          *param_1 = 0xba000e02;
          param_1[1] = 0;
          param_1[2] = 0xfd900000;
          param_1[3] = param_4[5];
          param_1[5] = 0x7000000;
          param_1[4] = 0xf5900000;
          param_1[6] = 0xe6000000;
          param_1[7] = 0;
          param_1[8] = 0xf3000000;
          uVar1 = param_4[3] + 7 & 0xf8;
          uVar2 = ((int)(uVar1 * param_4[2] + 1) >> 1) - 1;
          uVar6 = 0x7ff;
          if ((int)uVar2 < 0x7ff) {
            uVar6 = uVar2;
          }
          if (false) {
            uVar1 += 7;
          }
          iVar3 = (int)uVar1 >> 3;
          iVar7 = iVar3;
          if (iVar3 == 0) {
            iVar7 = 1;
          }
          if (iVar3 == 0) {
            iVar3 = 1;
          }
          if (iVar3 == 0) {
            trap(0x1c00);
          }
          if ((iVar3 == -1) && (iVar7 + 0x7ff == -0x80000000)) {
            trap(0x1800);
          }
          param_1[9] = (iVar7 + 0x7ff) / iVar3 & 0xfffU | 0x7000000 | (uVar6 & 0xfff) << 0xc;
          param_1[10] = 0xe7000000;
          param_1[0xb] = 0;
          param_1[0xc] = ((int)((param_4[3] + 7 & 0xf8) + 7) >> 3) << 9 | 0xf5880000;
          param_1[0xd] = 0;
          param_1[0xe] = 0xf2000000;
          puVar8 = param_1 + 0x10;
          param_1[0xf] = ((param_4[3] + 7 & 0xf8) - 1 & 0x3ff) << 0xe | (param_4[2] - 1) * 4 & 0xfff
          ;
        }
        else {
          *param_1 = 0xe7000000;
          param_1[1] = 0;
          param_1[3] = 0xc000;
          param_1[2] = 0xba000e02;
          puVar8 = param_1 + 4;
          if (dword_80040EA8 != 0) {
            dword_80040EA8 = 0;
            *puVar8 = 0xfd100000;
            uVar4 = osVirtualToPhysical(&dword_80040EBC);
            param_1[5] = uVar4;
            param_1[6] = 0xe8000000;
            param_1[7] = 0;
            param_1[8] = 0xf5000100;
            param_1[9] = 0x7000000;
            param_1[10] = 0xe6000000;
            param_1[0xb] = 0;
            param_1[0xc] = 0xf0000000;
            param_1[0xd] = 0x703c000;
            param_1[0xe] = 0xe7000000;
            param_1[0xf] = 0;
            param_1[0x10] = 0xfd100000;
            uVar4 = osVirtualToPhysical(&DWORD_80040edc);
            param_1[0x11] = uVar4;
            param_1[0x12] = 0xe8000000;
            param_1[0x13] = 0;
            param_1[0x15] = 0x7000000;
            param_1[0x14] = 0xf5000110;
            param_1[0x16] = 0xe6000000;
            param_1[0x17] = 0;
            param_1[0x18] = 0xf0000000;
            param_1[0x19] = 0x703c000;
            param_1[0x1a] = 0xe7000000;
            param_1[0x1b] = 0;
            puVar8 = param_1 + 0x1c;
          }
          *puVar8 = 0xfd500000;
          uVar4 = osVirtualToPhysical((void *)param_4[5]);
          puVar8[1] = uVar4;
          puVar8[2] = 0xf5500000;
          puVar8[3] = 0x7000000;
          puVar8[4] = 0xe6000000;
          puVar8[5] = 0;
          puVar8[6] = 0xf3000000;
          uVar1 = param_4[2] * 4 - 1;
          if (0x7fe < (int)uVar1) {
            uVar1 = 0x7ff;
          }
          puVar8[7] = (uVar1 & 0xfff) << 0xc | 0x7000800;
          puVar8[8] = 0xe7000000;
          puVar8[9] = 0;
          puVar8[10] = 0xf5400200;
          puVar8[0xb] = (*param_4 & 1) << 0x14 | 0x80200;
          puVar8[0xc] = 0xf2000000;
          puVar8[0xd] = (param_4[2] - 1) * 4 & 0xfff | 0x3c000;
          puVar8 = puVar8 + 0xe;
        }
        iVar7 = *param_2 + param_4[3];
        if (iVar7 <= param_7 + param_9) {
          iVar3 = param_4[1] + param_11;
          if (iVar3 < param_8) {
            if (param_8 <= (int)(iVar3 + param_4[2])) {
              *puVar8 = (iVar7 * 4 + dword_80040E98 & 0xfffU) << 0xc | 0xe4000000 |
                        (iVar3 + param_4[2]) * 4 + dword_80040E9C & 0xfff;
              puVar8[1] = (*param_2 * 4 + dword_80040E98 & 0xfffU) << 0xc |
                          param_8 * 4 + dword_80040E9C & 0xfffU;
              puVar8[2] = 0xb4000000;
              puVar8[3] = dword_80040EA0 << 0x10 |
                          ((param_8 - param_11) - param_4[1]) * 0x20 + dword_80040EA4 & 0xffff;
              puVar8[4] = 0xb3000000;
              puVar8[5] = 0x4000400;
              puVar8 = puVar8 + 6;
            }
          }
          else {
            if (param_10 < (int)(iVar3 + param_4[2])) {
              if (iVar3 <= param_10) {
                *puVar8 = (iVar7 * 4 + dword_80040E98 & 0xfffU) << 0xc | 0xe4000000 |
                          param_10 + dword_80040E9C & 0xfffU;
                puVar8[1] = (*param_2 * 4 + dword_80040E98 & 0xfffU) << 0xc |
                            (param_11 + param_4[1]) * 4 + dword_80040E9C & 0xfff;
                puVar8[2] = 0xb4000000;
                puVar8[3] = dword_80040EA0 << 0x10 | dword_80040EA4 & 0xffff;
                puVar8[4] = 0xb3000000;
                puVar8[5] = 0x4000400;
                puVar8 = puVar8 + 6;
              }
            }
            else {
              if (dword_80040E88 == 0) {
                *puVar8 = (iVar7 * 4 + dword_80040E98 & 0xfffU) << 0xc | 0xe4000000 |
                          (iVar3 + param_4[2]) * 4 + dword_80040E9C & 0xfff;
                puVar8[1] = (*param_2 * 4 + dword_80040E98 & 0xfffU) << 0xc |
                            (param_11 + param_4[1]) * 4 + dword_80040E9C & 0xfff;
                puVar8[2] = 0xb4000000;
                puVar8[3] = dword_80040EA0 << 0x10 | dword_80040EA4 & 0xffff;
                puVar8[4] = 0xb3000000;
                puVar8[5] = 0x4000400;
                puVar8 = puVar8 + 6;
              }
              else {
                *puVar8 = iVar7 * 4 + dword_80040E98 & 0xfffU | 0xe5000000 |
                          ((param_11 - param_4[1]) * 4 + dword_80040E9C & 0xfff) << 0xc;
                puVar8[1] = *param_2 * 4 + dword_80040E98 & 0xfffU |
                            (((param_11 - param_4[1]) - param_4[2]) * 4 + dword_80040E9C & 0xfff) <<
                            0xc;
                puVar8[2] = 0xb4000000;
                puVar8[3] = dword_80040EA4 << 0x10 |
                            (param_4[2] - 1) * 0x20 + dword_80040EA0 & 0xffff;
                puVar8[4] = 0xb3000000;
                puVar8[5] = 0x400fc00;
                puVar8 = puVar8 + 6;
              }
            }
          }
        }
      }
    }
  }
  *param_2 = *param_2 + param_4[3];
  return puVar8;
}



uint * en_text_write_stuff(undefined4 *DL,int *param_2,int *param_3,byte *param_4,int param_5,
                          int param_6,uint param_7,int param_8,int param_9,int param_10,int param_11
                          )

{
  byte bVar1;
  int iVar2;
  uint *puVar3;
  uint uVar4;
  uint uVar5;
  ulonglong uVar6;
  int iVar7;
  uint uStack60;
  undefined4 uStack56;
  undefined4 uStack52;
  undefined4 uStack48;
  undefined4 uStack44;
  int iStack40;
  int iStack8;
  
  dword_80040EA8 = 1;
  iStack8 = *param_3;
  iVar2 = *param_2;
  uVar6 = 0x48;
  if (param_11 == 0) {
    param_11 = *(int *)(param_5 + 0x88c) + *(int *)(param_5 + 0x890);
  }
  if ((j_text_trigger != 0) && (param_11 < 0xe)) {
    param_11 = 0xe;
  }
  *DL = 0xfa000000;
  DL[1] = param_7 & 0xff000000 | (param_7 >> 0x10 & 0xff) << 0x10 | (param_7 >> 8 & 0xff) << 8 |
          param_7 & 0xff;
  bVar1 = *param_4;
  puVar3 = DL + 2;
  if (bVar1 != 0) {
    do {
      if (bVar1 == 0x20) {
        uVar6 = 0x48;
        param_4 = param_4 + 1;
        *param_2 = *param_2 + 5;
      }
      else {
        if (bVar1 == 10) {
          uVar6 = 0x48;
          param_4 = param_4 + 1;
          if (dword_80040E90 < 0) {
            iVar7 = *param_3;
LAB_7f0adc14:
            *param_3 = iVar7 + param_11;
          }
          else {
            if (iVar2 != *param_2) {
              iVar7 = *param_3;
              goto LAB_7f0adc14;
            }
            *param_3 = *param_3 + dword_80040E90;
          }
          *param_2 = iVar2;
        }
        else {
          if (bVar1 < 0x80) {
            puVar3 = proc_7F0AD0F8(puVar3,param_2,param_3,
                                   (uint *)((uint)bVar1 * 0x18 + param_5 + -0x318),
                                   (int)uVar6 * 0x18 + param_5 + -0x318,param_6,iVar2,iStack8,
                                   param_8,param_9,param_10);
            uVar6 = (ulonglong)*param_4;
            param_4 = param_4 + 1;
          }
          else {
            uVar5 = ((uint)bVar1 & 0x7f) << 7;
            uStack56 = DAT_80040f00;
            uVar4 = (uint)((ulonglong)param_4[1] & 0x7f) | uVar5;
            uStack52 = dword_80040F04;
            uStack48 = dword_80040F08;
            uStack44 = dword_80040F0C;
            iStack40 = dword_80040F10;
            if (((longlong)(int)uVar5 & 0x2000U) != 0) {
              uStack48 = 0xf;
              uStack52 = 0x10;
            }
            if (((ulonglong)param_4[1] & 0x7f | (longlong)(int)uVar5 & 0x1fffU) < 0x3c7) {
              uStack60 = uVar4 + 0x80;
            }
            else {
              uVar4 = 2;
              uStack60 = 0x82;
            }
            iStack40 = something_with_LnameX(uVar4);
            puVar3 = proc_7F0AD0F8(puVar3,param_2,param_3,&uStack60,(int)&uStack60,param_6,iVar2,
                                   iStack8,param_8,param_9,param_10);
            param_4 = param_4 + 2;
          }
        }
      }
      bVar1 = *param_4;
    } while (bVar1 != 0);
  }
  return puVar3;
}



uint * proc_7F0ADDAC(uint *DL,uint *param_2,int *param_3,uint *param_4,int param_5,int param_6,
                    int param_7,uint param_8,uint param_9,uint param_10,int param_11,int param_12,
                    int param_13)

{
  uint uVar1;
  short sVar5;
  uint uVar2;
  int iVar3;
  u32 uVar4;
  uint *DL_00;
  int iVar6;
  uint uVar7;
  
  param_13 = *param_3 + param_13;
  *param_2 = (*param_2 -
             (*(int *)(param_6 + *(int *)(param_5 + 0x10) * 0x34 + param_4[4] * 4) + dword_80040E84)
             ) + 1;
  if ((0 < (int)*param_2) &&
     (sVar5 = get_video2_settings_txtClipW(), (longlong)(int)*param_2 <= (longlong)sVar5)) {
    sVar5 = get_video2_settings_txtClipH();
    iVar6 = param_13 + param_4[1];
    if (((longlong)iVar6 <= (longlong)sVar5) &&
       (((((int)*param_2 <= param_7 + param_11 &&
          ((longlong)iVar6 <= (longlong)(int)(param_8 + param_12))) && (param_7 <= (int)*param_2))
        && ((int)param_8 <= (int)(iVar6 + param_4[2]))))) {
      if ((int)*param_4 < 0x80) {
        *DL = 0xba000e02;
        DL[1] = 0;
        DL[2] = 0xfd900000;
        DL[3] = param_4[5];
        DL[4] = 0xf5900000;
        DL[5] = 0x7000000;
        DL[6] = 0xe6000000;
        DL[7] = 0;
        DL[8] = 0xf3000000;
        uVar1 = param_4[3] + 7 & 0xf8;
        uVar2 = ((int)(uVar1 * param_4[2] + 1) >> 1) - 1;
        uVar7 = 0x7ff;
        if ((int)uVar2 < 0x7ff) {
          uVar7 = uVar2;
        }
        if (false) {
          uVar1 += 7;
        }
        iVar3 = (int)uVar1 >> 3;
        iVar6 = iVar3;
        if (iVar3 == 0) {
          iVar6 = 1;
        }
        if (iVar3 == 0) {
          iVar3 = 1;
        }
        DL[9] = (iVar6 + 0x7ff) / iVar3 & 0xfffU | 0x7000000 | (uVar7 & 0xfff) << 0xc;
        DL[10] = 0xe7000000;
        DL[0xb] = 0;
        if (iVar3 == 0) {
          trap(0x1c00);
        }
        if ((iVar3 == -1) && (iVar6 + 0x7ff == -0x80000000)) {
          trap(0x1800);
        }
        DL[0xc] = ((int)((param_4[3] + 7 & 0xf8) + 7) >> 3) << 9 | 0xf5880000;
        DL[0xd] = 0;
        DL[0xe] = 0xf2000000;
        DL_00 = DL + 0x10;
        DL[0xf] = ((param_4[3] + 7 & 0xf8) - 1 & 0x3ff) << 0xe | (param_4[2] - 1) * 4 & 0xfff;
      }
      else {
        *DL = 0xe7000000;
        DL[1] = 0;
        DL[3] = 0xc000;
        DL[2] = 0xba000e02;
        DL_00 = DL + 4;
        if (dword_80040EA8 != 0) {
          dword_80040EA8 = 0;
          *DL_00 = 0xfd100000;
          uVar4 = osVirtualToPhysical(&dword_80040EBC);
          DL[5] = uVar4;
          DL[6] = 0xe8000000;
          DL[7] = 0;
          DL[9] = 0x7000000;
          DL[8] = 0xf5000100;
          DL[10] = 0xe6000000;
          DL[0xb] = 0;
          DL[0xc] = 0xf0000000;
          DL[0xd] = 0x703c000;
          DL[0xf] = 0;
          DL[0xe] = 0xe7000000;
          DL[0x10] = 0xfd100000;
          uVar4 = osVirtualToPhysical(&DWORD_80040edc);
          DL[0x11] = uVar4;
          DL[0x12] = 0xe8000000;
          DL[0x13] = 0;
          DL[0x14] = 0xf5000110;
          DL[0x15] = 0x7000000;
          DL[0x16] = 0xe6000000;
          DL[0x17] = 0;
          DL[0x18] = 0xf0000000;
          DL[0x19] = 0x703c000;
          DL[0x1b] = 0;
          DL[0x1a] = 0xe7000000;
          DL_00 = DL + 0x1c;
        }
        *DL_00 = 0xfd500000;
        uVar4 = osVirtualToPhysical((void *)param_4[5]);
        DL_00[1] = uVar4;
        DL_00[2] = 0xf5500000;
        DL_00[3] = 0x7000000;
        DL_00[4] = 0xe6000000;
        DL_00[5] = 0;
        DL_00[6] = 0xf3000000;
        uVar1 = param_4[2] * 4 - 1;
        if (0x7fe < (int)uVar1) {
          uVar1 = 0x7ff;
        }
        DL_00[7] = (uVar1 & 0xfff) << 0xc | 0x7000800;
        DL_00[9] = 0;
        DL_00[8] = 0xe7000000;
        DL_00[10] = 0xf5400200;
        DL_00[0xb] = (*param_4 & 1) << 0x14 | 0x80200;
        DL_00[0xc] = 0xf2000000;
        DL_00[0xd] = (param_4[2] - 1) * 4 & 0xfff | 0x3c000;
        DL_00 = DL_00 + 0xe;
      }
      *DL_00 = 0xfa000000;
      DL_00[1] = param_10 & 0xff000000 | (param_10 >> 0x10 & 0xff) << 0x10 |
                 (param_10 >> 8 & 0xff) << 8 | param_10 & 0xff;
      DL_00 = DL_00 + 2;
      iVar3 = -1;
      uVar1 = *param_2;
      iVar6 = -1;
      while( true ) {
        do {
          if ((iVar3 != 0) || (iVar6 != 0)) {
            DL_00 = proc_7F0AE45C(DL_00,uVar1 + iVar3,param_13 + iVar6,(int)param_4,param_7,param_8,
                                  param_11,param_12);
            uVar1 = *param_2;
          }
          iVar6 += 1;
        } while (iVar6 != 2);
        iVar3 += 1;
        if (iVar3 == 2) break;
        iVar6 = -1;
      }
      *DL_00 = 0xfa000000;
      DL_00[1] = param_9 & 0xff000000 | (param_9 >> 0x10 & 0xff) << 0x10 |
                 (param_9 >> 8 & 0xff) << 8 | param_9 & 0xff;
      DL = proc_7F0AE45C(DL_00 + 2,uVar1,param_13,(int)param_4,param_7,param_8,param_11,param_12);
    }
  }
  *param_2 = *param_2 + param_4[3];
  return DL;
}



uint * proc_7F0AE45C(uint *DL,uint param_2,int param_3,int param_4,int param_5,uint param_6,
                    int param_7,int param_8)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = *(int *)(param_4 + 0xc) + param_2;
  if ((int)uVar1 <= param_5 + param_7) {
    iVar2 = *(int *)(param_4 + 4) + param_3;
    if (iVar2 < (int)param_6) {
      iVar2 += *(int *)(param_4 + 8);
      if ((int)param_6 <= iVar2) {
        *DL = (uVar1 & 0x3ff) << 0xe | 0xe4000000 | iVar2 * 4 & 0xfffU;
        DL[1] = (param_2 & 0x3ff) << 0xe | (param_6 & 0x3ff) << 2;
        DL[2] = 0xb4000000;
        DL[3] = ((param_6 - *(int *)(param_4 + 4)) - param_3 & 0x7ff) << 5;
        DL[4] = 0xb3000000;
        DL[5] = 0x4000400;
        DL = DL + 6;
      }
    }
    else {
      param_8 = param_6 + param_8;
      iVar3 = iVar2 + *(int *)(param_4 + 8);
      if (iVar3 <= param_8) {
        if (dword_80040E88 != 0) {
          *DL = (param_3 - *(int *)(param_4 + 4) & 0x3ffU) << 0xe | 0xe5000000 | uVar1 * 4 & 0xfff;
          DL[1] = ((param_3 - *(int *)(param_4 + 4)) - *(int *)(param_4 + 8) & 0x3ffU) << 0xe |
                  (param_2 & 0x3ff) << 2;
          DL[2] = 0xb4000000;
          DL[3] = (*(int *)(param_4 + 8) - 1U & 0x7ff) << 5;
          DL[4] = 0xb3000000;
          DL[5] = 0x400fc00;
          return DL + 6;
        }
        *DL = (uVar1 & 0x3ff) << 0xe | 0xe4000000 | iVar3 * 4 & 0xfffU;
        DL[1] = (param_2 & 0x3ff) << 0xe | (param_3 + *(int *)(param_4 + 4)) * 4 & 0xfffU;
        DL[2] = 0xb4000000;
        DL[3] = 0;
        DL[4] = 0xb3000000;
        DL[5] = 0x4000400;
        return DL + 6;
      }
      if (iVar2 <= param_8) {
        *DL = (uVar1 & 0x3ff) << 0xe | 0xe4000000 | param_8 * 4 & 0xfffU;
        DL[1] = (param_2 & 0x3ff) << 0xe | (param_3 + *(int *)(param_4 + 4)) * 4 & 0xfffU;
        DL[2] = 0xb4000000;
        DL[3] = 0;
        DL[4] = 0xb3000000;
        DL[5] = 0x4000400;
        return DL + 6;
      }
    }
  }
  return DL;
}



uint * jp_text_stuff(uint *param_1,uint *param_2,uint *param_3,byte *param_4,int param_5,int param_6
                    ,uint param_7,uint param_8,int param_9,int param_10,int param_11,int param_12)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  ulonglong uVar5;
  uint uStack36;
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  int iStack16;
  uint uStack8;
  
  dword_80040EA8 = 1;
  uStack8 = *param_3;
  uVar2 = *param_2;
  uVar5 = 0x48;
  if (param_12 == 0) {
    param_12 = *(int *)(param_5 + 0x88c) + *(int *)(param_5 + 0x890);
  }
  if ((j_text_trigger != 0) && (param_12 < 0xe)) {
    param_12 = 0xe;
  }
  bVar1 = *param_4;
  while (bVar1 != 0) {
    if (bVar1 == 0x20) {
      uVar5 = 0x48;
      param_4 = param_4 + 1;
      *param_2 = *param_2 + 5;
    }
    else {
      if (bVar1 == 10) {
        *param_2 = uVar2;
        uVar5 = 0x48;
        param_4 = param_4 + 1;
        *param_3 = *param_3 + param_12;
      }
      else {
        if (bVar1 < 0x80) {
          param_1 = proc_7F0ADDAC(param_1,param_2,(int *)param_3,
                                  (uint *)((uint)bVar1 * 0x18 + param_5 + -0x318),
                                  (int)uVar5 * 0x18 + param_5 + -0x318,param_6,uVar2,uStack8,param_7
                                  ,param_8,param_9,param_10,param_11);
          uVar5 = (ulonglong)*param_4;
          param_4 = param_4 + 1;
        }
        else {
          uVar4 = ((uint)bVar1 & 0x7f) << 7;
          uVar3 = (uint)((ulonglong)param_4[1] & 0x7f) | uVar4;
          uStack28 = dword_80040F1C;
          uStack24 = dword_80040F20;
          if (((longlong)(int)uVar4 & 0x2000U) != 0) {
            uStack24 = 0xf;
            uStack28 = 0x10;
          }
          if (((ulonglong)param_4[1] & 0x7f | (longlong)(int)uVar4 & 0x1fffU) < 0x3c7) {
            uStack36 = uVar3 + 0x80;
          }
          else {
            uVar3 = 2;
            uStack36 = 0x82;
          }
          uStack32 = dword_80040F18;
          uStack20 = dword_80040F24;
          iStack16 = dword_80040F28;
          iStack16 = something_with_LnameX(uVar3);
          param_1 = proc_7F0ADDAC(param_1,param_2,(int *)param_3,&uStack36,(int)&uStack36,param_6,
                                  uVar2,uStack8,param_7,param_8,param_9,param_10,param_11);
          param_4 = param_4 + 2;
        }
      }
    }
    bVar1 = *param_4;
  }
  return param_1;
}



void proc_7F0AE98C(int *param_1,int *param_2,byte *param_3,int param_4,int *param_5,int param_6)

{
  byte bVar1;
  ulonglong uVar2;
  byte *pbVar3;
  int iVar4;
  int iVar5;
  
  *param_1 = 0;
  uVar2 = 0x48;
  iVar4 = 0;
  *param_2 = 0;
  if (param_6 == 0) {
    param_6 = *(int *)(param_4 + 0x890) + *(int *)(param_4 + 0x88c);
  }
  if (j_text_trigger != 0) {
    if (0xd < param_6) {
      bVar1 = *param_3;
      goto joined_r0x7f0ae9f4;
    }
    param_6 = 0xe;
  }
  bVar1 = *param_3;
joined_r0x7f0ae9f4:
  while (bVar1 != 0) {
    if (bVar1 == 0x20) {
      uVar2 = 0x48;
      if (param_3[1] != 10) {
        *param_2 = *param_2 + 5;
      }
      pbVar3 = param_3 + 1;
    }
    else {
      if (bVar1 == 10) {
        iVar5 = *param_2;
        if (iVar4 < iVar5) {
          *param_2 = 0;
        }
        else {
          *param_2 = 0;
          iVar5 = iVar4;
        }
        pbVar3 = param_3 + 1;
        *param_1 = *param_1 + param_6;
        iVar4 = iVar5;
      }
      else {
        if (bVar1 < 0x80) {
          pbVar3 = param_3 + 1;
          iVar5 = param_4 + (uint)bVar1 * 0x18;
          *param_2 = (*param_2 + *(int *)(iVar5 + -0x30c)) -
                     (param_5[*(int *)(iVar5 + -0x308) +
                              *(int *)(param_4 + (int)uVar2 * 0x18 + -0x308) * 0xd] + dword_80040E84
                     + -1);
          uVar2 = (ulonglong)*param_3;
        }
        else {
          if (bVar1 < 0xc0) {
            pbVar3 = param_3 + 2;
            *param_2 = (*param_2 - (*param_5 + dword_80040E84 + -1)) + 0xb;
          }
          else {
            pbVar3 = param_3 + 2;
            *param_2 = (*param_2 - (*param_5 + dword_80040E84 + -1)) + 0xf;
          }
        }
      }
    }
    bVar1 = *pbVar3;
    param_3 = pbVar3;
  }
  if (*param_2 < iVar4) {
    *param_2 = iVar4;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0aedec) overlaps instruction at (ram,0x7f0aede8)
// 

void proc_7F0AEB64(int param_1,byte *param_2,byte *param_3,int param_4,int *param_5)

{
  byte bVar1;
  bool bVar2;
  byte *pbVar3;
  byte *pbVar4;
  int iVar5;
  uint uVar6;
  byte *pbVar7;
  uint uVar8;
  byte abStack68 [44];
  int iStack24;
  int iStack20;
  int aiStack16 [3];
  int iStack4;
  
  iStack4 = 0;
  iStack20 = 0;
  iStack24 = 1;
  do {
    aiStack16[0] = 0;
    bVar1 = *param_2;
    uVar8 = 0;
    if (0x20 < bVar1) {
      pbVar3 = abStack68;
      uVar6 = uVar8;
      while( true ) {
        uVar8 = uVar6 + 1;
        pbVar7 = pbVar3 + 1;
        pbVar4 = param_2 + 1;
        if (0x7f < *pbVar3) {
          uVar8 = uVar6 + 2;
          pbVar3[1] = param_2[1];
          pbVar7 = pbVar3 + 2;
          pbVar4 = param_2 + 2;
        }
        param_2 = pbVar4;
        pbVar3 = pbVar7;
        abStack68[0] = bVar1;
        if (*param_2 < 0x21) break;
        *pbVar3 = *param_2;
        uVar6 = uVar8;
      }
    }
    abStack68[uVar8] = 0;
    proc_7F0AE98C(&iStack20,aiStack16,abStack68,param_4,param_5,0);
    iStack4 += aiStack16[0];
    bVar2 = param_1 < iStack4;
    bVar1 = *param_2;
    if (bVar1 == 10) {
      iVar5 = 0;
      if (bVar2) {
        *param_3 = 10;
        param_3 = param_3 + 1;
        if (0 < dword_80040E8C) {
          *param_3 = 0x20;
          while( true ) {
            iVar5 += 1;
            param_3 = param_3 + 1;
            if (dword_80040E8C <= iVar5) break;
            *param_3 = 0x20;
          }
        }
      }
      uVar6 = 0;
      iStack4 = 0;
      if (0 < (int)uVar8) {
        pbVar3 = abStack68;
        pbVar7 = param_3;
        if ((uVar8 & 3) != 0) {
          do {
            uVar6 += 1;
            param_3 = pbVar7 + 1;
            *pbVar7 = *pbVar3;
            pbVar3 = pbVar3 + 1;
            pbVar7 = param_3;
          } while ((uVar8 & 3) != uVar6);
          if (uVar6 == uVar8) goto LAB_7f0aed54;
        }
        pbVar3 = abStack68 + uVar6;
        pbVar7 = param_3;
        do {
          pbVar4 = pbVar3 + 4;
          param_3 = pbVar7 + 4;
          *pbVar7 = *pbVar3;
          pbVar7[1] = pbVar3[1];
          pbVar7[2] = pbVar3[2];
          pbVar7[3] = pbVar3[3];
          pbVar3 = pbVar4;
          pbVar7 = param_3;
        } while (pbVar4 != abStack68 + uVar8);
      }
LAB_7f0aed54:
      *param_3 = 10;
      param_3 = param_3 + 1;
    }
    else {
      if (bVar1 == 0x20) {
        iVar5 = 0;
        if (bVar2) {
          *param_3 = 10;
          param_3 = param_3 + 1;
          if (0 < dword_80040E8C) {
            *param_3 = 0x20;
            while( true ) {
              iVar5 += 1;
              param_3 = param_3 + 1;
              if (dword_80040E8C <= iVar5) break;
              *param_3 = 0x20;
            }
          }
          iStack4 = dword_80040E8C * 5 + aiStack16[0];
        }
        uVar6 = 0;
        iStack4 += 5;
        if (0 < (int)uVar8) {
          pbVar3 = abStack68;
          pbVar7 = param_3;
          if ((uVar8 & 3) != 0) {
            do {
              uVar6 += 1;
              param_3 = pbVar7 + 1;
              *pbVar7 = *pbVar3;
              pbVar3 = pbVar3 + 1;
              pbVar7 = param_3;
            } while ((uVar8 & 3) != uVar6);
            if (uVar6 == uVar8) goto LAB_7f0aee24;
          }
          pbVar3 = abStack68 + uVar6;
          pbVar7 = param_3;
          do {
            pbVar4 = pbVar3 + 4;
            param_3 = pbVar7 + 4;
            *pbVar7 = *pbVar3;
            pbVar7[1] = pbVar3[1];
            pbVar7[2] = pbVar3[2];
            pbVar7[3] = pbVar3[3];
            pbVar3 = pbVar4;
            pbVar7 = param_3;
          } while (pbVar4 != abStack68 + uVar8);
        }
LAB_7f0aee24:
        *param_3 = 0x20;
        param_3 = param_3 + 1;
      }
      else {
        iVar5 = 0;
        if (bVar1 == 0) {
          iStack24 = 0;
          if (bVar2) {
            *param_3 = 10;
            param_3 = param_3 + 1;
            if (0 < dword_80040E8C) {
              *param_3 = 0x20;
              while( true ) {
                iVar5 += 1;
                param_3 = param_3 + 1;
                if (dword_80040E8C <= iVar5) break;
                *param_3 = 0x20;
              }
            }
          }
          uVar6 = 0;
          if (0 < (int)uVar8) {
            pbVar3 = abStack68;
            pbVar7 = param_3;
            if ((uVar8 & 3) != 0) {
              do {
                uVar6 += 1;
                param_3 = pbVar7 + 1;
                *pbVar7 = *pbVar3;
                pbVar3 = pbVar3 + 1;
                pbVar7 = param_3;
              } while ((uVar8 & 3) != uVar6);
              if (uVar6 == uVar8) goto LAB_7f0aeedc;
            }
            pbVar3 = abStack68 + uVar6;
            pbVar7 = param_3;
            do {
              pbVar4 = pbVar3 + 4;
              param_3 = pbVar7 + 4;
              *pbVar7 = *pbVar3;
              pbVar7[1] = pbVar3[1];
              pbVar7[2] = pbVar3[2];
              pbVar7[3] = pbVar3[3];
              pbVar3 = pbVar4;
              pbVar7 = param_3;
            } while (pbVar4 != abStack68 + uVar8);
          }
LAB_7f0aeedc:
          *param_3 = 0;
        }
      }
    }
    param_2 = param_2 + 1;
    if (iStack24 != 1) {
      return;
    }
  } while( true );
}



void proc_7F0AEF0C(void)

{
  return;
}



u32 sub_GAME_7F0AEF20(u32 param_1,u32 param_2)

{
  return param_1;
}



f32 proc_7F0AEF30(f32 param_1)

{
  f32 in_f0;
  
  return in_f0;
}



char * proc_7F0AEF3C(ushort *param_1)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = dword_80040FAC * 9;
  bVar1 = *(byte *)(param_1 + 1);
  dword_80040FAC = dword_80040FAC + 1 & 7;
  if ((bVar1 & 7) == 0) {
    iVar3 = 0;
  }
  else {
    iVar3 = ((uint)bVar1 & 7) + 0x30;
  }
  sprintf(&dword_80040F64 + iVar2,aCDCC,((int)(uint)*param_1 >> 0xf) + 0x70,
          (ulonglong)*param_1 & 0x7fff,((int)(uint)bVar1 >> 3) + 0x61,iVar3);
  return (char *)(&dword_80040F64 + iVar2);
}



char * proc_7F0AEFE0(ushort *param_1)

{
  char *pcVar1;
  
  pcVar1 = proc_7F0AEF3C(param_1);
  return pcVar1;
}



undefined8 proc_7F0AF000(void)

{
  return 0;
}



void something_stan_c_debug_related(void)

{
  get_ptr_debug_notice_list_entry(&stan_c_debug_notice_list_entry,aStan_c_debug);
  return;
}



void proc_7F0AF038(void)

{
  byte bVar1;
  undefined4 *puVar2;
  int iVar3;
  int *piVar4;
  ulonglong uVar5;
  ulonglong uVar6;
  ulonglong uVar7;
  uint uVar8;
  short sVar9;
  int *piVar10;
  int iVar11;
  int *piVar12;
  short *psVar13;
  short sVar14;
  
  DAT_8007b9dc = 0;
  DAT_8007b128 = 0;
  DAT_8007b12c = 0;
  uVar6 = 0xff;
  DAT_8007b130 = 0;
  puVar2 = &DAT_8007b134;
  do {
    puVar2 = puVar2 + 4;
    *puVar2 = 0;
    puVar2[1] = 0;
    puVar2[2] = 0;
    puVar2[3] = 0;
    puVar2 = puVar2;
  } while (puVar2 != (undefined4 *)&DAT_8007b354);
  piVar4 = *(int **)(clippingfile + 4);
  if (*piVar4 != 0) {
    bVar1 = *(byte *)((int)piVar4 + 3);
    uVar5 = 0xff;
    while( true ) {
      uVar7 = (ulonglong)bVar1;
      iVar3 = 0;
      if (uVar5 == uVar7) {
        sVar9 = *(short *)((int)piVar4 + 6);
        uVar7 = uVar5;
      }
      else {
        if ((longlong)DAT_8007b9dc <= (longlong)uVar7) {
          DAT_8007b9dc = (uint)bVar1 + 1;
        }
        uVar8 = (uint)bVar1;
        *(int **)(&DAT_8007b128 + (uint)bVar1) = piVar4;
        (&DAT_8007b35c)[uVar8 * 6] = 0x7fff;
        (&DAT_8007b362)[uVar8 * 6] = 0x8000;
        (&DAT_8007b35a)[uVar8 * 6] = (&DAT_8007b35c)[uVar8 * 6];
        (&DAT_8007b358)[uVar8 * 6] = (&DAT_8007b35c)[uVar8 * 6];
        (&DAT_8007b360)[uVar8 * 6] = (&DAT_8007b362)[uVar8 * 6];
        (&DAT_8007b35e)[uVar8 * 6] = (&DAT_8007b362)[uVar8 * 6];
        sVar9 = *(short *)((int)piVar4 + 6);
        uVar6 = uVar7;
      }
      uVar8 = (int)sVar9 >> 0xc & 0xf;
      if (uVar8 != 0) {
        piVar10 = piVar4;
        do {
          iVar11 = 0;
          psVar13 = &DAT_8007b358 + (int)uVar6 * 6;
          piVar12 = piVar10;
          do {
            sVar9 = *(short *)(piVar12 + 2);
            iVar11 += 2;
            if (sVar9 < *psVar13) {
              *psVar13 = sVar9;
              sVar9 = *(short *)(piVar12 + 2);
              sVar14 = psVar13[3];
            }
            else {
              sVar14 = psVar13[3];
            }
            piVar12 = (int *)((int)piVar12 + 2);
            if (sVar14 < sVar9) {
              psVar13[3] = sVar9;
            }
            psVar13 = psVar13 + 1;
          } while (iVar11 != 6);
          iVar3 += 1;
          piVar10 = piVar10 + 2;
          uVar8 = (int)*(short *)((int)piVar4 + 6) >> 0xc & 0xf;
        } while (iVar3 < (int)uVar8);
      }
      piVar4 = (int *)((uint)(byte)list_of_tilesizes[uVar8] + (int)piVar4);
      if (*piVar4 == 0) break;
      bVar1 = *(byte *)((int)piVar4 + 3);
      uVar5 = uVar7;
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0af4c8) overlaps instruction at (ram,0x7f0af4c4)
// 

int * proc_7F0AF20C(float *param_1,byte *param_2,float *param_3)

{
  byte bVar1;
  int *piVar2;
  byte *pbVar4;
  ulonglong uVar3;
  longlong lVar5;
  int iVar6;
  int *piVar7;
  ulonglong uVar8;
  int iVar9;
  float fVar10;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float in_f14;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float fVar11;
  float fVar12;
  int **ppiStack88;
  float afStack76 [2];
  float fStack68;
  int iStack64;
  int *piStack44;
  int *apiStack40 [3];
  short sStack28;
  short sStack26;
  short sStack24;
  float fStack16;
  float fStack12;
  float fStack8;
  
  piStack44 = NULL;
  fStack16 = *param_1 * flt_80040F44;
  fStack12 = param_1[1] * flt_80040F44;
  fStack8 = param_1[2] * flt_80040F44;
  if (flt_800585CC < fStack12) {
    fStack12 = flt_800585CC;
  }
  uVar8 = 0;
  fVar10 = flt_800585D4;
  if (flt_800585D4 <= fStack12) {
    fVar10 = fStack12;
  }
  lVar5 = (longlong)DAT_8007b9dc;
  sStack24 = (short)(int)fStack8;
  sStack26 = (short)(int)fVar10;
  sStack28 = (short)(int)fStack16;
  fVar12 = flt_800585D0;
  if (0 < lVar5) {
    ppiStack88 = (int **)&DAT_8007b128;
    fVar12 = flt_800585D0;
    fStack12 = fVar10;
    do {
      iVar9 = (int)uVar8;
      piVar7 = *ppiStack88;
      if (((((piVar7 != NULL) && ((short)(&DAT_8007b358)[iVar9 * 6] <= sStack28)) &&
           (sStack28 <= (short)(&DAT_8007b35e)[iVar9 * 6])) &&
          (((short)(&DAT_8007b35c)[iVar9 * 6] <= sStack24 &&
           (sStack24 <= (short)(&DAT_8007b362)[iVar9 * 6])))) &&
         ((short)(&DAT_8007b35a)[iVar9 * 6] <= sStack26)) {
        if (param_2 == NULL) {
          iVar6 = *piVar7;
LAB_7f0af41c:
          if (iVar6 != 0) {
            bVar1 = *(byte *)((int)piVar7 + 3);
            while (uVar8 == (ulonglong)bVar1) {
              lVar5 = 0;
              do {
                fVar10 = proc_7F0AFE70((int)piVar7,lVar5,fVar10,in_f14);
                lVar5 = (longlong)((int)lVar5 + 1);
                if (fVar10 < -2.00000000) {
                  iVar6 = (int)*(short *)((int)piVar7 + 6);
                  fVar10 = extraout_f12;
                  in_f14 = extraout_f14;
                  goto LAB_7f0af508;
                }
                if (fVar10 < 2.00000000) {
                  iStack64 = 1;
                }
                fVar10 = extraout_f12;
                in_f14 = extraout_f14;
              } while (lVar5 != 3);
              uVar3 = proc_7F0AF760((int)piVar7);
              if (uVar3 == 0) {
                if (iStack64 == 0) {
code_r0x7f0af4cc:
                  fVar11 = (float)proc_7F0B2970();
                  if (param_1[1] < fVar11) {
                    iVar6 = (int)*(short *)((int)piVar7 + 6);
                    fVar10 = extraout_f12_03;
                    in_f14 = extraout_f14_03;
                  }
                  else {
                    fVar10 = extraout_f12_03;
                    in_f14 = extraout_f14_03;
                    piVar2 = piVar7;
                    if (fVar12 < fVar11) goto LAB_7f0af504;
                    iVar6 = (int)*(short *)((int)piVar7 + 6);
                    fVar10 = extraout_f12_03;
                    in_f14 = extraout_f14_03;
                  }
                }
                else {
                  proc_7F0AF924((int)piVar7,afStack76);
                  apiStack40[0] = piVar7;
                  proc_7F0B0BE4((int *)apiStack40,extraout_f12_01,extraout_f14_01,afStack76[0],
                                fStack68);
                  fVar10 = extraout_f12_02;
                  in_f14 = extraout_f14_02;
                  fVar11 = fVar12;
                  piVar2 = piStack44;
                  if ((uVar3 != 0) &&
                     (fVar10 = extraout_f12_02, in_f14 = extraout_f14_02, fVar11 = fVar12,
                     piVar2 = piStack44, apiStack40[0] == piVar7)) goto code_r0x7f0af4cc;
LAB_7f0af504:
                  piStack44 = piVar2;
                  iVar6 = (int)*(short *)((int)piVar7 + 6);
                  fVar12 = fVar11;
                }
              }
              else {
                iVar6 = (int)*(short *)((int)piVar7 + 6);
                fVar10 = extraout_f12_00;
                in_f14 = extraout_f14_00;
              }
LAB_7f0af508:
              piVar7 = (int *)((uint)(byte)list_of_tilesizes[iVar6 >> 0xc & 0xf] + (int)piVar7);
              if (*piVar7 == 0) break;
              bVar1 = *(byte *)((int)piVar7 + 3);
            }
          }
          lVar5 = (longlong)DAT_8007b9dc;
        }
        else {
          iVar6 = 0;
          if (*param_2 != 0xff) {
            bVar1 = *param_2;
            pbVar4 = param_2;
            do {
              if (uVar8 == (ulonglong)bVar1) {
                iVar6 = *piVar7;
                goto LAB_7f0af41c;
              }
              bVar1 = pbVar4[1];
              iVar6 += 1;
              pbVar4 = pbVar4 + 1;
            } while ((bVar1 != 0xff) && (iVar6 != 4));
          }
        }
      }
      uVar8 = SEXT48(iVar9 + 1);
      ppiStack88 = ppiStack88 + 1;
    } while ((longlong)uVar8 < lVar5);
  }
  if ((piStack44 != NULL) && (param_3 != NULL)) {
    *param_3 = fVar12;
  }
  return piStack44;
}



void proc_7F0AF5B8(int param_1)

{
  byte *pbVar1;
  
  dword_80040FB0 = 1;
  base_ptr_connection_vals = *(int *)(param_1 + 4) + -0x80;
  clippingfile = param_1;
  pbVar1 = check_token(1,aStanlinelog);
  if (pbVar1 != NULL) {
    do_stanlinelog = 1;
  }
  proc_7F0AF038();
  proc_7F0B2950(1.00000000);
  return;
}



void removed_7F0AF630(int param_1)

{
  return;
}



int proc_7F0AF638(ushort *param_1,uint param_2,ushort **param_3)

{
  ushort *puVar1;
  bool bVar2;
  ulonglong uVar3;
  ushort *puVar4;
  ushort *puVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  ushort **ppuVar9;
  int iVar10;
  
  iVar10 = 0;
  *param_3 = param_1;
  iVar8 = 1;
  ppuVar9 = param_3 + 1;
  puVar1 = *param_3;
  while( true ) {
    iVar8 += -1;
    ppuVar9 = ppuVar9 + -1;
    iVar7 = 0;
    if ((param_2 & 0xff) != (int)(uint)*puVar1 >> 0xf) {
      *puVar1 = *puVar1 ^ 0x8000;
      uVar3 = proc_7F0AF760((int)puVar1);
      if (uVar3 == 0) {
        iVar10 += 1;
      }
      uVar6 = (int)(short)puVar1[3] >> 0xc & 0xf;
      puVar5 = puVar1;
      if (uVar6 != 0) {
        do {
          iVar7 += 1;
          if ((int)(uint)puVar5[7] >> 4 == 0) {
            bVar2 = iVar7 < (int)uVar6;
          }
          else {
            puVar4 = (ushort *)((uint)puVar5[7] * 8 + base_ptr_connection_vals);
            if ((param_2 & 0xff) == (int)(uint)*puVar4 >> 0xf) {
              bVar2 = iVar7 < (int)uVar6;
            }
            else {
              *ppuVar9 = puVar4;
              iVar8 += 1;
              ppuVar9 = ppuVar9 + 1;
              uVar6 = (int)(short)puVar1[3] >> 0xc & 0xf;
              bVar2 = iVar7 < (int)uVar6;
            }
          }
          puVar5 = puVar5 + 4;
        } while (bVar2);
      }
    }
    if (iVar8 == 0) break;
    puVar1 = ppuVar9[-1];
  }
  return iVar10;
}



ulonglong proc_7F0AF760(int param_1)

{
  short sVar1;
  int iVar2;
  int iVar3;
  
  sVar1 = *(short *)(param_1 + 6);
  iVar3 = param_1 + ((int)sVar1 >> 8 & 0xfU) * 8;
  iVar2 = param_1 + ((int)sVar1 >> 4 & 0xfU) * 8;
  param_1 += ((int)sVar1 & 0xfU) * 8;
  return (ulonglong)
         (((int)*(short *)(iVar2 + 0xc) - (int)*(short *)(iVar3 + 0xc)) *
          ((int)*(short *)(param_1 + 8) - (int)*(short *)(iVar3 + 8)) -
          ((int)*(short *)(param_1 + 0xc) - (int)*(short *)(iVar3 + 0xc)) *
          ((int)*(short *)(iVar2 + 8) - (int)*(short *)(iVar3 + 8)) == 0);
}



int * proc_7F0AF808(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6)

{
  ulonglong uVar1;
  int iVar3;
  longlong lVar2;
  int *piVar4;
  float fVar5;
  float extraout_f12;
  float extraout_f14;
  int *apiStack8 [2];
  
  piVar4 = *(int **)(clippingfile + 4);
  if (*piVar4 != 0) {
    do {
      apiStack8[0] = piVar4;
      uVar1 = proc_7F0AF760((int)piVar4);
      if (uVar1 == 0) {
        lVar2 = proc_7F0B036C();
        if (lVar2 == 0) {
          iVar3 = (int)*(short *)((int)piVar4 + 6);
        }
        else {
          proc_7F0B20D0((int *)apiStack8,extraout_f12,extraout_f14,param_1);
          if (lVar2 == 0) {
            iVar3 = (int)*(short *)((int)piVar4 + 6);
          }
          else {
            if (piVar4 == apiStack8[0]) {
              fVar5 = (float)proc_7F0B2970();
              if (fVar5 < param_2) {
                return piVar4;
              }
              iVar3 = (int)*(short *)((int)piVar4 + 6);
            }
            else {
              iVar3 = (int)*(short *)((int)piVar4 + 6);
            }
          }
        }
      }
      else {
        iVar3 = (int)*(short *)((int)piVar4 + 6);
      }
      piVar4 = (int *)((uint)(byte)list_of_tilesizes[iVar3 >> 0xc & 0xf] + (int)piVar4);
    } while (*piVar4 != 0);
  }
  return NULL;
}



void proc_7F0AF924(int param_1,float *param_2)

{
  short sVar1;
  int iVar2;
  int iVar3;
  
  sVar1 = *(short *)(param_1 + 6);
  iVar3 = param_1 + ((int)sVar1 >> 4 & 0xfU) * 8;
  iVar2 = param_1 + ((int)sVar1 >> 8 & 0xfU) * 8;
  param_1 += ((int)sVar1 & 0xfU) * 8;
  *param_2 = (((float)(int)*(short *)(param_1 + 8) +
              (float)(int)*(short *)(iVar2 + 8) + (float)(int)*(short *)(iVar3 + 8)) / 3.00000000) *
             flt_80040F48;
  param_2[1] = (((float)(int)*(short *)(param_1 + 10) +
                (float)(int)*(short *)(iVar2 + 10) + (float)(int)*(short *)(iVar3 + 10)) /
               3.00000000) * flt_80040F48;
  param_2[2] = (((float)(int)*(short *)(param_1 + 0xc) +
                (float)(int)*(short *)(iVar2 + 0xc) + (float)(int)*(short *)(iVar3 + 0xc)) /
               3.00000000) * flt_80040F48;
  return;
}



void proc_7F0AFA1C(int param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  int iVar3;
  float fStack12;
  float fStack8;
  float fStack4;
  
  iVar3 = param_1 + ((int)*(short *)(param_1 + 6) >> ((int)param_2 * -4 + 8U & 0x1f) & 0xfU) * 8;
  *param_3 = (float)(int)*(short *)(iVar3 + 8) * flt_80040F48;
  param_3[1] = (float)(int)*(short *)(iVar3 + 10) * flt_80040F48;
  param_3[2] = (float)(int)*(short *)(iVar3 + 0xc) * flt_80040F48;
  proc_7F0AF924(param_1,&fStack12);
  fVar2 = flt_800585DC;
  fVar1 = flt_800585D8;
  *param_3 = fStack12 * flt_800585D8 + flt_800585DC * *param_3;
  param_3[1] = fStack8 * fVar1 + fVar2 * param_3[1];
  param_3[2] = fStack4 * fVar1 + fVar2 * param_3[2];
  return;
}



float proc_7F0AFB1C(float *param_1,float *param_2)

{
  return (param_2[2] - param_1[2]) * (param_2[2] - param_1[2]) +
         (*param_2 - *param_1) * (*param_2 - *param_1) +
         (param_2[1] - param_1[1]) * (param_2[1] - param_1[1]);
}



int * proc_7F0AFB78(float *param_1,undefined4 *param_2,float *param_3,float param_4)

{
  ushort uVar1;
  ulonglong uVar2;
  longlong lVar3;
  int *piVar4;
  float fVar5;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  float fVar6;
  float fVar7;
  float fStack48;
  undefined4 uStack44;
  float fStack40;
  float fStack36;
  undefined4 uStack32;
  float fStack28;
  int *piStack16;
  int *apiStack12 [3];
  
  piStack16 = NULL;
  fStack36 = *param_1;
  uStack32 = *param_2;
  fStack28 = *param_3;
  fVar7 = 4294967296.00000000;
  piVar4 = *(int **)(clippingfile + 4);
  if (*piVar4 != 0) {
    uVar1 = *(ushort *)piVar4;
    while( true ) {
      if ((int)(uint)uVar1 >> 0xf == 1) {
        uVar1 = *(ushort *)((int)piVar4 + 6);
      }
      else {
        uVar2 = proc_7F0AF760((int)piVar4);
        lVar3 = 0;
        if (uVar2 == 0) {
          do {
            if (lVar3 == 3) {
              proc_7F0AF924((int)piVar4,&fStack48);
              fVar5 = extraout_f12;
              fVar6 = extraout_f14;
            }
            else {
              proc_7F0AFA1C((int)piVar4,lVar3,&fStack48);
              fVar5 = extraout_f12_00;
              fVar6 = extraout_f14_00;
            }
            apiStack12[0] = piVar4;
            proc_7F0B20D0((int *)apiStack12,fVar5,fVar6,fStack48);
            if (((longlong)uVar2 < 0) && (fVar5 = proc_7F0AFB1C(&fStack48,&fStack36), fVar5 < fVar7)
               ) {
              *param_1 = fStack48;
              *param_2 = uStack44;
              *param_3 = fStack40;
              fVar7 = fVar5;
              piStack16 = piVar4;
            }
            lVar3 = (longlong)((int)lVar3 + 1);
          } while (lVar3 != 4);
        }
        uVar1 = *(ushort *)((int)piVar4 + 6);
      }
      piVar4 = (int *)((uint)(byte)list_of_tilesizes[(int)(short)uVar1 >> 0xc & 0xf] + (int)piVar4);
      if (*piVar4 == 0) break;
      uVar1 = *(ushort *)piVar4;
    }
  }
  return piStack16;
}



float proc_7F0AFD1C(int param_1,int param_2,float param_3,float param_4)

{
  int iVar1;
  float in_a2_lo;
  float in_a3_lo;
  uint uVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  
  uVar2 = (int)*(short *)(param_1 + 6) >> 0xc & 0xf;
  iVar1 = param_1 + ((param_2 + 1) % uVar2) * 8;
  param_1 += param_2 * 8;
  fVar4 = (float)((int)*(short *)(iVar1 + 8) - (int)*(short *)(param_1 + 8));
  if (uVar2 == 0) {
    trap(0x1c00);
  }
  if ((uVar2 == 0xffffffff) && (param_2 + 1 == -0x80000000)) {
    trap(0x1800);
  }
  fVar5 = (float)((int)*(short *)(iVar1 + 0xc) - (int)*(short *)(param_1 + 0xc));
  fVar3 = sqrtf(fVar4 * fVar4 + fVar5 * fVar5);
  if (fVar3 == 0.00000000) {
    fVar4 = in_a2_lo - (float)(int)*(short *)(iVar1 + 8);
    fVar3 = in_a3_lo - (float)(int)*(short *)(iVar1 + 0xc);
    fVar3 = sqrtf(fVar4 * fVar4 + fVar3 * fVar3);
  }
  else {
    fVar3 = ((in_a3_lo - (float)(int)*(short *)(param_1 + 0xc)) * -fVar4 +
            fVar5 * (in_a2_lo - (float)(int)*(short *)(param_1 + 8))) / fVar3;
  }
  return fVar3;
}



float proc_7F0AFE70(int param_1,longlong param_2,float param_3,float param_4)

{
  int iVar1;
  float in_a2_lo;
  int iVar2;
  float in_a3_lo;
  float fVar3;
  float fVar4;
  float fVar5;
  
  if (param_2 == 2) {
    iVar1 = 0;
  }
  else {
    iVar1 = (int)param_2 + 1;
  }
  iVar2 = param_1 + ((int)*(short *)(param_1 + 6) >> ((int)param_2 * -4 + 8U & 0x1f) & 0xfU) * 8;
  param_1 += ((int)*(short *)(param_1 + 6) >> (iVar1 * -4 + 8U & 0x1f) & 0xfU) * 8;
  fVar4 = (float)((int)*(short *)(param_1 + 8) - (int)*(short *)(iVar2 + 8));
  fVar5 = (float)((int)*(short *)(param_1 + 0xc) - (int)*(short *)(iVar2 + 0xc));
  fVar3 = sqrtf(fVar4 * fVar4 + fVar5 * fVar5);
  if (fVar3 == 0.00000000) {
    fVar3 = in_a2_lo - (float)(int)*(short *)(param_1 + 8);
    fVar4 = in_a3_lo - (float)(int)*(short *)(param_1 + 0xc);
    fVar3 = sqrtf(fVar3 * fVar3 + fVar4 * fVar4);
  }
  else {
    fVar3 = ((in_a3_lo - (float)(int)*(short *)(iVar2 + 0xc)) * -fVar4 +
            fVar5 * (in_a2_lo - (float)(int)*(short *)(iVar2 + 8))) / fVar3;
  }
  return fVar3;
}



undefined proc_7F0AFFCC(int param_1,int param_2,float param_3,float param_4)

{
  undefined in_v0_lo;
  float in_a2_lo;
  float in_a3_lo;
  
  proc_7F0AFD1C(param_1,param_2,in_a2_lo,in_a3_lo);
  return in_v0_lo;
}



undefined proc_7F0B0018(int param_1,longlong param_2,float param_3,float param_4)

{
  undefined in_v0_lo;
  float in_a2_lo;
  float in_a3_lo;
  
  proc_7F0AFE70(param_1,param_2,in_a2_lo,in_a3_lo);
  return in_v0_lo;
}



void proc_7F0B0064(int param_1,int param_2,float param_3,float param_4)

{
  float in_a2_lo;
  float in_a3_lo;
  float fVar1;
  float fVar2;
  
  param_1 += param_2 * 8;
  fVar2 = in_a3_lo - (float)(int)*(short *)(param_1 + 0xc);
  fVar1 = in_a2_lo - (float)(int)*(short *)(param_1 + 8);
  sqrtf(fVar1 * fVar1 + fVar2 * fVar2);
  return;
}



float proc_7F0B00C4(int param_1,int param_2,float param_3,float param_4)

{
  float in_a2_lo;
  float in_a3_lo;
  float fVar1;
  float fVar2;
  
  param_1 += param_2 * 8;
  fVar1 = in_a2_lo * flt_80040F44 - (float)(int)*(short *)(param_1 + 8);
  fVar2 = in_a3_lo * flt_80040F44 - (float)(int)*(short *)(param_1 + 0xc);
  fVar1 = sqrtf(fVar1 * fVar1 + fVar2 * fVar2);
  return fVar1 * flt_80040F48;
}



float proc_7F0B0140(int param_1,int param_2,float param_3,float param_4)

{
  float in_a2_lo;
  float in_a3_lo;
  
  param_1 += param_2 * 8;
  return ((float)(int)*(short *)(param_1 + 0xc) * in_a3_lo * flt_80040F44 +
         in_a2_lo * flt_80040F44 * (float)(int)*(short *)(param_1 + 8)) * flt_80040F48;
}



ulonglong proc_7F0B0198(int param_1,int param_2,float param_3,float param_4)

{
  int iVar2;
  ulonglong uVar1;
  float in_a2_lo;
  float in_a3_lo;
  uint uVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  uVar3 = (int)*(short *)(param_1 + 6) >> 0xc & 0xf;
  iVar2 = param_1 + param_2 * 8;
  param_1 += ((param_2 + 1) % uVar3) * 8;
  fVar4 = (float)(int)*(short *)(iVar2 + 8);
  fVar5 = (float)(int)*(short *)(iVar2 + 0xc);
  if (uVar3 == 0) {
    trap(0x1c00);
  }
  if ((uVar3 == 0xffffffff) && (param_2 + 1 == -0x80000000)) {
    trap(0x1800);
  }
  fVar7 = (float)(int)*(short *)(param_1 + 8) - fVar4;
  fVar8 = (float)(int)*(short *)(param_1 + 0xc) - fVar5;
  fVar6 = fVar7 * fVar7 + fVar8 * fVar8;
  fVar4 = (in_a2_lo - fVar4) * fVar7 + (in_a3_lo - fVar5) * fVar8;
  if ((((fVar4 <= fVar6) || (uVar1 = (ulonglong)(fVar4 < 0.00000000), fVar4 >= 0.00000000)) &&
      (uVar1 = (ulonglong)(0.00000000 < fVar4), 0.00000000 < fVar4)) && (uVar1 = 0, fVar4 < fVar6))
  {
    uVar1 = 1;
  }
  return uVar1;
}



undefined8 proc_7F0B02D8(void)

{
  int in_a0_lo;
  longlong lVar1;
  float fVar2;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float extraout_f14;
  
  lVar1 = 0;
  do {
    fVar2 = proc_7F0AFE70(in_a0_lo,lVar1,in_f12,in_f14);
    lVar1 = (longlong)((int)lVar1 + 1);
    if (fVar2 < 0.00000000) {
      return 0;
    }
    in_f12 = extraout_f12;
    in_f14 = extraout_f14;
  } while (lVar1 != 3);
  return 1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F0B036C(void)

{
  int in_a0_lo;
  longlong lVar1;
  float in_f0;
  float in_f12;
  float extraout_f12;
  float in_f14;
  float extraout_f14;
  
  lVar1 = 0;
  do {
    proc_7F0B0018(in_a0_lo,lVar1,in_f12,in_f14);
    lVar1 = (longlong)((int)lVar1 + 1);
    if (in_f0 < 0.00000000) {
      return 0;
    }
    in_f12 = extraout_f12;
    in_f14 = extraout_f14;
  } while (lVar1 != 3);
  return 1;
}



float proc_7F0B0400(int param_1,longlong param_2,float param_3,float param_4)

{
  int iVar1;
  float in_a2_lo;
  int iVar2;
  float in_a3_lo;
  float fVar3;
  float fVar4;
  float fVar5;
  
  if (param_2 == 2) {
    iVar1 = 0;
  }
  else {
    iVar1 = (int)param_2 + 1;
  }
  iVar2 = param_1 + ((int)*(short *)(param_1 + 6) >> ((int)param_2 * -4 + 8U & 0x1f) & 0xfU) * 8;
  param_1 += ((int)*(short *)(param_1 + 6) >> (iVar1 * -4 + 8U & 0x1f) & 0xfU) * 8;
  fVar4 = (float)((int)*(short *)(param_1 + 8) - (int)*(short *)(iVar2 + 8));
  fVar5 = (float)((int)*(short *)(param_1 + 0xc) - (int)*(short *)(iVar2 + 0xc));
  fVar3 = sqrtf(fVar4 * fVar4 + fVar5 * fVar5);
  if (fVar3 == 0.00000000) {
    fVar3 = 0.00000000;
  }
  else {
    fVar3 = ((in_a3_lo - (float)(int)*(short *)(iVar2 + 0xc)) * -fVar4 +
            fVar5 * (in_a2_lo - (float)(int)*(short *)(iVar2 + 8))) / fVar3;
  }
  return fVar3;
}



undefined8 proc_7F0B0518(int param_1,float param_2,float param_3)

{
  longlong lVar1;
  float fVar2;
  float extraout_f12;
  float extraout_f14;
  
  lVar1 = 0;
  do {
    fVar2 = proc_7F0B0400(param_1,lVar1,param_2,param_3);
    lVar1 = (longlong)((int)lVar1 + 1);
    if (fVar2 < -2.00000000) {
      return 0;
    }
    param_2 = extraout_f12;
    param_3 = extraout_f14;
  } while (lVar1 != 3);
  return 1;
}



undefined8
proc_7F0B05C0(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
             float param_6)

{
  if (param_2 * param_5 < param_1 * param_6) {
    return 1;
  }
  if (param_1 * param_6 < param_2 * param_5) {
    return 0xffffffffffffffff;
  }
  if ((0.00000000 <= param_1 * param_5) && (0.00000000 <= param_2 * param_6)) {
    if (param_1 * param_1 + param_2 * param_2 < param_5 * param_5 + param_6 * param_6) {
      return 1;
    }
    return 0;
  }
  return 0xffffffffffffffff;
}



ulonglong proc_7F0B0688(float param_1,float param_2,undefined8 param_3,undefined8 param_4,
                       float param_5,float param_6,float param_7,float param_8,float param_9,
                       float param_10)

{
  bool bVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  
  uVar2 = proc_7F0B05C0(param_5 - param_1,param_6 - param_2,param_3,param_4,-(param_1 - param_7),
                        -(param_2 - param_8));
  uVar3 = proc_7F0B05C0(param_5 - param_1,param_6 - param_2,extraout_a0,extraout_a1,
                        param_9 - param_1,param_10 - param_2);
  bVar1 = (int)uVar3 * (int)uVar2 < 1;
  if (bVar1) {
    uVar2 = proc_7F0B05C0(param_9 - param_7,param_10 - param_8,extraout_a0_00,extraout_a1_00,
                          param_1 - param_7,param_2 - param_8);
    uVar3 = proc_7F0B05C0(param_9 - param_7,param_10 - param_8,extraout_a0_01,extraout_a1_01,
                          param_5 - param_7,param_6 - param_8);
    bVar1 = (int)uVar3 * (int)uVar2 < 1;
  }
  return (ulonglong)bVar1;
}



uint proc_7F0B07BC(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                  float param_6,float param_7,float param_8,float param_9,float param_10,
                  int param_11)

{
  undefined8 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  uint uStack36;
  
  uVar1 = proc_7F0B05C0(param_5 - param_1,param_6 - param_2,param_3,param_4,-(param_1 - param_7),
                        -(param_2 - param_8));
  uVar2 = proc_7F0B05C0(param_5 - param_1,param_6 - param_2,extraout_a0,extraout_a1,
                        param_9 - param_1,param_10 - param_2);
  uVar3 = proc_7F0B05C0(param_9 - param_7,param_10 - param_8,extraout_a0_00,extraout_a1_00,
                        param_1 - param_7,param_2 - param_8);
  uVar4 = proc_7F0B05C0(param_9 - param_7,param_10 - param_8,extraout_a0_01,extraout_a1_01,
                        param_5 - param_7,param_6 - param_8);
  uStack36 = (uint)((int)uVar2 * (int)uVar1 < param_11);
  if (param_11 <= (int)uVar4 * (int)uVar3) {
    uStack36 = 0;
  }
  return uStack36;
}



undefined8
proc_7F0B0914(int *param_1,float param_2,float param_3,float param_4,float param_5,
             undefined *param_6,float param_7)

{
  short sVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  longlong lVar5;
  longlong lVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  ulonglong uVar12;
  longlong lVar13;
  float fVar14;
  code *in_stack_00000014;
  undefined4 in_stack_00000018;
  int iStack44;
  int iStack32;
  
  param_4 = param_4 * flt_80040F44;
  param_5 = param_5 * flt_80040F44;
  fVar14 = (float)param_6 * flt_80040F44;
  param_7 = param_7 * flt_80040F44;
  iVar8 = *param_1;
  iVar9 = 0;
  iStack44 = 0;
  lVar13 = (longlong)iStack32;
  iVar7 = iVar8;
  iVar11 = iVar8;
  do {
    iVar10 = iVar7;
    iVar7 = iVar8;
    iVar8 = 0;
    if (in_stack_00000014 == NULL) {
      sVar1 = *(short *)(iVar7 + 6);
    }
    else {
      (*in_stack_00000014)(iVar7,iVar10,in_stack_00000018);
      sVar1 = *(short *)(iVar7 + 6);
    }
    uVar12 = (longlong)((int)sVar1 >> 0xc) & 0xf;
    lVar5 = 0;
    iVar4 = iVar7;
    if (uVar12 != 0) {
      do {
        lVar6._4_4_ = (int)lVar5 + 1;
        lVar6 = (longlong)lVar6._4_4_;
        lVar6._4_4_ = iVar7 + (lVar6._4_4_ % (int)uVar12) * 8;
        sVar1 = *(short *)(lVar6._4_4_ + 0xc);
        lVar6._4_4_ = (int)*(short *)(lVar6._4_4_ + 8);
        if (uVar12 == 0) {
          trap(0x1c00);
        }
        if ((uVar12 == 0xffffffffffffffff) && (lVar6 == -0x80000000)) {
          trap(0x1800);
        }
        if ((float)((int)sVar1 - (int)*(short *)(iVar4 + 0xc)) * (fVar14 - param_4) +
            -(param_7 - param_5) * (float)(lVar6._4_4_ - (int)*(short *)(iVar4 + 8)) <= 0.00000000)
        {
          uVar3 = proc_7F0B07BC(param_4,param_5,uVar12,(longlong)sVar1,fVar14,param_7,
                                (float)(int)*(short *)(iVar4 + 8),
                                (float)(int)*(short *)(iVar4 + 0xc),(float)lVar6._4_4_,
                                (float)(int)sVar1,
                                (uint)((int)(uint)*(ushort *)(iVar4 + 0xe) >> 4 != 0));
          if (uVar3 != 0) {
            iVar8 += 1;
            lVar6._4_4_ = (uint)*(ushort *)(iVar4 + 0xe) * 8 + base_ptr_connection_vals;
            if (((iVar10 != lVar6._4_4_) && (iVar11 != lVar6._4_4_)) &&
               (lVar13 = lVar5, iVar9 = lVar6._4_4_, (int)(uint)*(ushort *)(iVar4 + 0xe) >> 4 == 0))
            {
              lVar13 = lVar5;
              iVar9 = 0;
            }
            goto LAB_7f0b0b0c;
          }
          sVar1 = *(short *)(iVar7 + 6);
        }
        else {
LAB_7f0b0b0c:
          sVar1 = *(short *)(iVar7 + 6);
        }
        iVar4 += 8;
        uVar12 = (longlong)((int)sVar1 >> 0xc) & 0xf;
        lVar5 = lVar6;
      } while (lVar6 < (longlong)uVar12);
    }
    if (iVar7 == iVar9) {
      iVar8 = 0;
    }
    if (iVar8 == 0) {
      return 1;
    }
    bVar2 = 500 < iStack44;
    iStack44 += 1;
    if (((bVar2) || (iVar9 == 0)) || (iVar8 == 0)) {
      DAT_8007b9e4 = iVar7;
      DAT_8007b9e8 = (int)lVar13;
      return 0;
    }
    *param_1 = iVar9;
    iVar8 = iVar9;
    iVar11 = iVar10;
  } while( true );
}



void proc_7F0B0BE4(int *param_1,float param_2,float param_3,float param_4,float param_5)

{
  undefined *in_a3_lo;
  undefined4 in_stack_00000010;
  
  proc_7F0B0914(param_1,param_4,param_5,param_4,param_5,in_a3_lo,in_stack_00000010);
  return;
}



void proc_7F0B0C24(int *param_1,float param_2,float param_3,float param_4,float param_5,
                  undefined *param_6,undefined4 *param_7,undefined4 param_8)

{
  undefined4 *in_stack_00000018;
  
  proc_7F0B0914(param_1,param_4,param_5,param_4,param_5,param_6,param_7);
  *in_stack_00000018 = 0;
  return;
}



void proc_7F0B0C98(int param_1,undefined8 param_2,uint **param_3)

{
  byte bVar1;
  
  bVar1 = *(byte *)(param_1 + 3);
  if (((longlong)(int)param_3[3] != (ulonglong)bVar1) && ((int)param_3[1] < (int)param_3[2])) {
    *(uint **)*param_3 = (uint *)(uint)bVar1;
    param_3[3] = (uint *)(uint)bVar1;
    *param_3 = *param_3 + 1;
    param_3[1] = (uint *)((int)param_3[1] + 1);
  }
  return;
}



void proc_7F0B0CEC(int param_1,undefined8 param_2,uint **param_3)

{
  proc_7F0B0C98(param_1,param_2,param_3);
  return;
}



int proc_7F0B0D0C(int param_1,float param_2,float param_3,int *param_4,float param_5,float param_6,
                 uint *param_7,int param_8)

{
  byte bVar1;
  longlong lVar2;
  int iVar3;
  ulonglong uVar4;
  float extraout_f12;
  float extraout_f14;
  uint *in_stack_00000018;
  int in_stack_0000001c;
  int iStack8;
  int iStack4;
  
  iStack8 = 0;
  lVar2 = (longlong)*(int *)param_6;
  iStack4 = param_1;
  if (lVar2 != 0) {
    bVar1 = *(byte *)(param_1 + 3);
    uVar4 = (ulonglong)*(byte *)(*(int *)param_6 + 3);
    if ((ulonglong)bVar1 == uVar4) {
      *in_stack_00000018 = (uint)bVar1;
      return 1;
    }
    iStack4 = param_1;
    lVar2 = proc_7F0B8FD0((ulonglong)bVar1,uVar4);
    param_2 = extraout_f12;
    param_3 = extraout_f14;
    if (lVar2 != 0) {
      *in_stack_00000018 = (uint)*(byte *)(param_1 + 3);
      in_stack_00000018[1] = (uint)*(byte *)(*(int *)param_6 + 3);
      return 2;
    }
  }
  proc_7F0B0C24(&iStack4,param_2,param_3,(float)param_4,param_5,param_7,(undefined4 *)param_8,
                in_stack_00000018);
  if (lVar2 == 0) {
    iStack8 = 0;
  }
  else {
    if (in_stack_0000001c < 0) {
      iStack8 = in_stack_0000001c;
      iVar3 = *(int *)param_6;
    }
    else {
      iVar3 = *(int *)param_6;
    }
    if (iVar3 == 0) {
      *(int *)param_6 = iStack4;
      iVar3 = iStack4;
    }
    if (iStack4 != iVar3) {
      iStack8 = 0;
    }
  }
  return iStack8;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined4 proc_7F0B0E24(void)

{
  bool bVar1;
  bool bVar2;
  longlong in_v0;
  longlong lVar3;
  ulonglong uVar4;
  int *in_a0_lo;
  float *pfVar5;
  float in_a1_lo;
  float in_a2_lo;
  float in_a3_lo;
  int iVar6;
  int iVar7;
  longlong lVar8;
  char *pcVar9;
  uint uVar10;
  float fVar11;
  float fVar12;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f12_06;
  float fVar13;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float extraout_f14_06;
  float fVar14;
  undefined4 *in_stack_00000010;
  uint in_stack_00000014;
  float in_stack_00000018;
  float in_stack_0000001c;
  float in_stack_00000020;
  float in_stack_00000024;
  float fStack192;
  float afStack188 [3];
  int iStack176;
  int *piStack172;
  short *psStack168;
  float fStack160;
  float fStack156;
  uint uStack148;
  int aiStack144 [21];
  int iStack60;
  float fStack52;
  float fStack48;
  float fStack44;
  float fStack40;
  float afStack28 [2];
  float afStack20 [2];
  int iStack12;
  undefined4 uStack8;
  
  fVar11 = 1.00000000;
  iStack60 = 0;
  uStack148 = (uint)(in_stack_0000001c <= in_stack_00000018);
  iStack12 = *in_a0_lo;
  bVar1 = false;
  proc_7F0B0C24(&iStack12,in_a1_lo,in_a2_lo,in_a1_lo,in_a2_lo,in_a3_lo,in_stack_00000010,aiStack144)
  ;
  uStack8 = (undefined4)in_v0;
  if (0x14 < iStack60) {
    iStack60 = 0x14;
  }
  fVar13 = extraout_f12;
  fVar14 = extraout_f14;
  if (in_v0 == 0) {
    uVar10 = (int)*(short *)(DAT_8007b9e4 + 6) >> 0xc & 0xf;
    iVar6 = DAT_8007b9e4 + DAT_8007b9e8 * 8;
    if (uVar10 == 0) {
      trap(0x1c00);
    }
    if ((uVar10 == 0xffffffff) && (DAT_8007b9e8 + 1 == -0x80000000)) {
      trap(0x1800);
    }
    dword_800413BC = 1;
    iVar7 = DAT_8007b9e4 + ((DAT_8007b9e8 + 1) % uVar10) * 8;
    DAT_8007b9f0 = (float)(int)*(short *)(iVar6 + 8) * flt_80040F48;
    DAT_8007b9f4 = (float)(int)*(short *)(iVar6 + 0xc) * flt_80040F48;
    DAT_8007b9f8 = (float)(int)*(short *)(iVar7 + 8) * flt_80040F48;
    DAT_8007b9fc = (float)(int)*(short *)(iVar7 + 0xc) * flt_80040F48;
    fVar11 = proc_7F0B3200(afStack20,afStack28,(float *)&DAT_8007b9f0,(float *)&DAT_8007b9f8);
    fVar13 = extraout_f12_00;
    fVar14 = extraout_f14_00;
  }
  DAT_8007ba04 = NULL;
  if (in_stack_00000014 != 0) {
    aiStack144[iStack60] = -1;
    proc_7F03E3FC(aiStack144);
    lVar3 = (longlong)*ptr_list_object_lookup_indices;
    fVar13 = extraout_f12_01;
    fVar14 = extraout_f14_01;
    if (-1 < lVar3) {
      psStack168 = ptr_list_object_lookup_indices;
      do {
        pcVar9 = pos_data_entry + (int)lVar3 * 0x34;
        iVar6 = proc_7F03DA50(pcVar9,in_stack_00000014);
        fVar13 = extraout_f12_02;
        fVar14 = extraout_f14_02;
        if (((iVar6 != 0) &&
            (proc_7F03CC20(pcVar9,&piStack172,&iStack176,afStack188,&fStack192),
            fVar13 = extraout_f12_03, fVar14 = extraout_f14_03, 0 < iStack176)) &&
           (fVar13 = extraout_f12_03, fVar14 = extraout_f14_03, 0 < iStack176)) {
          iVar6 = 0;
          lVar3 = 0;
          do {
            iVar7 = (int)lVar3 + 1;
            lVar8 = (longlong)iVar7;
            iVar7 %= iStack176;
            pfVar5 = (float *)(piStack172 + iVar7 * 2);
            if (iStack176 == 0) {
              trap(0x1c00);
            }
            if ((iStack176 == -1) && (lVar8 == -0x80000000)) {
              trap(0x1800);
            }
            uVar4 = proc_7F0B0688(in_a1_lo,in_a2_lo,(longlong)(int)pfVar5,lVar3,in_a3_lo,
                                  (float)in_stack_00000010,*(float *)((int)piStack172 + iVar6),
                                  ((float *)((int)piStack172 + iVar6))[1],*pfVar5,pfVar5[1]);
            fVar13 = extraout_f12_04;
            fVar14 = extraout_f14_04;
            if (uVar4 != 0) {
              fStack44 = *(float *)((int)piStack172 + iVar6);
              fStack40 = ((float *)((int)piStack172 + iVar6))[1];
              fStack52 = (float)piStack172[iVar7 * 2];
              fStack48 = (float)(piStack172 + iVar7 * 2)[1];
              fVar12 = proc_7F0B3200(afStack20,afStack28,&fStack44,&fStack52);
              fVar13 = extraout_f12_05;
              fVar14 = extraout_f14_05;
              if (fVar12 < fVar11) {
                bVar2 = true;
                fVar13 = extraout_f12_05;
                fVar14 = extraout_f14_05;
                if (uStack148 != 0) {
                  fVar13 = extraout_f12_05;
                  fVar14 = extraout_f14_05;
                  if (!bVar1) {
                    bVar1 = true;
                    if (in_stack_00000024 <= in_stack_00000020) {
                      fStack156 = in_stack_00000020 - in_stack_00000018;
                      fStack160 = in_stack_00000024 - in_stack_0000001c;
                      fVar13 = extraout_f12_05;
                      fVar14 = extraout_f14_05;
                    }
                    else {
                      if (fVar11 < 1.00000000) {
                        in_a3_lo = in_a1_lo + (in_a3_lo - in_a1_lo) * fVar11;
                        in_stack_00000010 =
                             (undefined4 *)
                             (in_a2_lo + ((float)in_stack_00000010 - in_a2_lo) * fVar11);
                      }
                      fVar13 = (float)proc_7F0B2970();
                      in_stack_00000018 = in_stack_00000018 + fVar13;
                      in_stack_0000001c = in_stack_0000001c + fVar13;
                      fVar14 = (float)proc_7F0B2970();
                      fStack160 = (fVar14 - fVar13) / fVar11;
                      fVar13 = extraout_f12_06;
                      fVar14 = extraout_f14_06;
                      fStack156 = fStack160;
                    }
                  }
                  if (fStack160 * fVar12 + in_stack_0000001c < afStack188[0]) {
                    if (fStack156 * fVar12 + in_stack_00000018 <= fStack192) {
                      bVar2 = false;
                    }
                  }
                  else {
                    bVar2 = false;
                  }
                }
                if (bVar2) {
                  uStack8 = 0;
                  dword_800413BC = 1;
                  DAT_8007b9f0 = fStack44;
                  DAT_8007b9f4 = fStack40;
                  DAT_8007b9f8 = fStack52;
                  DAT_8007b9fc = fStack48;
                  DAT_8007b9e4 = 0;
                  DAT_8007b9e8 = 0;
                  iStack12 = 0;
                  fVar11 = fVar12;
                  DAT_8007ba04 = pcVar9;
                }
              }
            }
            iVar6 += 8;
            lVar3 = lVar8;
          } while (lVar8 < (longlong)iStack176);
        }
        lVar3 = (longlong)psStack168[1];
        psStack168 = psStack168 + 1;
      } while (-1 < lVar3);
    }
  }
  if (iStack12 == 0) {
    iStack12 = *in_a0_lo;
    proc_7F0B0BE4(&iStack12,fVar13,fVar14,in_a1_lo,in_a2_lo);
  }
  *in_a0_lo = iStack12;
  DAT_8007ba00 = fVar11;
  return uStack8;
}



char * proc_7F0B1410(int param_1,float param_2,float param_3,float param_4,float param_5,
                    uint param_6)

{
  short sVar1;
  longlong lVar2;
  int iVar5;
  ulonglong uVar3;
  longlong lVar4;
  float *pfVar6;
  longlong lVar7;
  char *pcVar8;
  char *pcVar9;
  float fVar10;
  float fVar11;
  undefined4 *in_stack_00000010;
  uint in_stack_00000014;
  int iStack156;
  int *piStack152;
  short *psStack148;
  int aiStack144 [21];
  int iStack60;
  int aiStack56 [2];
  float fStack48;
  float fStack44;
  float fStack40;
  float fStack36;
  float afStack24 [2];
  float fStack16;
  float fStack12;
  
  fVar11 = 1.00000000;
  pcVar9 = NULL;
  iStack60 = 0;
  aiStack56[0] = param_1;
  proc_7F0B0C24(aiStack56,param_2,param_3,param_4,param_5,param_6,in_stack_00000010,aiStack144);
  if (0x14 < iStack60) {
    iStack60 = 0x14;
  }
  if (in_stack_00000014 != 0) {
    aiStack144[iStack60] = -1;
    afStack24[0] = (float)param_6;
    fStack16 = param_4;
    fStack12 = param_5;
    proc_7F03E3FC(aiStack144);
    sVar1 = *ptr_list_object_lookup_indices;
    lVar2 = (longlong)sVar1;
    if (-1 < lVar2) {
      psStack148 = ptr_list_object_lookup_indices;
      do {
        pcVar8 = pos_data_entry + ((int)sVar1 * 0x10 + (int)lVar2 * -4 + (int)lVar2) * 4;
        iVar5 = proc_7F03DA50(pcVar8,in_stack_00000014);
        if (((iVar5 != 0) && (proc_7F03CCB0(pcVar8,&piStack152,&iStack156), 0 < iStack156)) &&
           (0 < iStack156)) {
          iVar5 = 0;
          lVar2 = 0;
          do {
            lVar7._4_4_ = (int)lVar2 + 1;
            lVar7 = (longlong)lVar7._4_4_;
            lVar7._4_4_ %= iStack156;
            pfVar6 = (float *)(piStack152 + lVar7._4_4_ * 2);
            if (iStack156 == 0) {
              trap(0x1c00);
            }
            if ((iStack156 == -1) && (lVar7 == -0x80000000)) {
              trap(0x1800);
            }
            uVar3 = proc_7F0B0688(param_4,param_5,(longlong)(int)pfVar6,lVar2,(float)param_6,
                                  (float)in_stack_00000010,*(float *)((int)piStack152 + iVar5),
                                  ((float *)((int)piStack152 + iVar5))[1],*pfVar6,pfVar6[1]);
            if (uVar3 == 0) {
              lVar4 = (longlong)iStack156;
            }
            else {
              fStack40 = *(float *)((int)piStack152 + iVar5);
              fStack36 = ((float *)((int)piStack152 + iVar5))[1];
              fStack48 = (float)piStack152[lVar7._4_4_ * 2];
              fStack44 = (float)(piStack152 + lVar7._4_4_ * 2)[1];
              fVar10 = proc_7F0B3200(&fStack16,afStack24,&fStack40,&fStack48);
              if (fVar10 < fVar11) {
                lVar4 = (longlong)iStack156;
                fVar11 = fVar10;
                pcVar9 = pcVar8;
              }
              else {
                lVar4 = (longlong)iStack156;
              }
            }
            iVar5 += 8;
            lVar2 = lVar7;
          } while (lVar7 < lVar4);
        }
        sVar1 = psStack148[1];
        lVar2 = (longlong)sVar1;
        psStack148 = psStack148 + 1;
      } while (-1 < lVar2);
    }
  }
  return pcVar9;
}



float proc_7F0B16C4(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                   float param_6,float param_7,float param_8)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar2 = param_5 - param_1;
  fVar3 = param_6 - param_2;
  fVar1 = sqrtf(fVar2 * fVar2 + fVar3 * fVar3);
  if (fVar1 == 0.00000000) {
    fVar1 = sqrtf((param_7 - param_5) * (param_7 - param_5) +
                  (param_8 - param_6) * (param_8 - param_6));
  }
  else {
    fVar1 = (fVar3 * (param_7 - param_1) + -fVar2 * (param_8 - param_2)) / fVar1;
  }
  return fVar1;
}



void proc_7F0B1794(float param_1,float param_2,undefined8 param_3,undefined8 param_4,float param_5,
                  float param_6)

{
  sqrtf((param_5 - param_1) * (param_5 - param_1) + (param_6 - param_2) * (param_6 - param_2));
  return;
}



ulonglong proc_7F0B17E4(float param_1,float param_2,undefined8 param_3,undefined8 param_4,
                       float param_5,float param_6,float param_7,float param_8)

{
  ulonglong uVar1;
  float fVar2;
  float fVar3;
  
  param_5 = param_5 - param_1;
  param_6 = param_6 - param_2;
  fVar3 = param_5 * param_5 + param_6 * param_6;
  fVar2 = (param_7 - param_1) * param_5 + (param_8 - param_2) * param_6;
  if ((((fVar2 <= fVar3) || (uVar1 = (ulonglong)(fVar2 < 0.00000000), fVar2 >= 0.00000000)) &&
      (uVar1 = (ulonglong)(0.00000000 < fVar2), 0.00000000 < fVar2)) && (uVar1 = 0, fVar2 < fVar3))
  {
    uVar1 = 1;
  }
  return uVar1;
}



longlong proc_7F0B18B8(void)

{
  short sVar1;
  longlong lVar2;
  int iVar4;
  ulonglong uVar3;
  int *in_a0_lo;
  float *pfVar5;
  undefined8 extraout_a0;
  undefined8 extraout_a0_00;
  undefined8 extraout_a0_01;
  float in_a1_lo;
  int iVar6;
  undefined8 extraout_a1;
  undefined8 extraout_a1_00;
  undefined8 extraout_a1_01;
  float in_a2_lo;
  undefined4 *in_a3_lo;
  char *pcVar7;
  float fVar8;
  float fVar9;
  float in_f12;
  float in_f14;
  float fVar10;
  float fVar11;
  uint in_stack_00000010;
  float in_stack_00000014;
  float in_stack_00000018;
  float fStack144;
  float afStack140 [3];
  int iStack128;
  int *piStack124;
  int aiStack120 [21];
  int iStack36;
  short *psStack32;
  uint uStack24;
  
  uStack24 = (uint)(in_stack_00000018 <= in_stack_00000014);
  iStack36 = 0;
  lVar2 = proc_7F0B21B0(in_a0_lo,in_f12,in_f14,in_a1_lo,in_a2_lo,in_a3_lo,aiStack120);
  if (lVar2 < 0) {
    if (0x14 < iStack36) {
      iStack36 = 0x14;
    }
    DAT_8007ba04 = NULL;
    if (in_stack_00000010 == 0) {
      lVar2 = -2;
    }
    else {
      if (in_stack_00000018 <= in_stack_00000014) {
        fVar11 = (float)proc_7F0B2970();
        in_stack_00000014 = in_stack_00000014 + fVar11;
        in_stack_00000018 = in_stack_00000018 + fVar11;
      }
      aiStack120[iStack36] = -1;
      proc_7F03E3FC(aiStack120);
      sVar1 = *ptr_list_object_lookup_indices;
      lVar2 = (longlong)sVar1;
      if (-1 < lVar2) {
        psStack32 = ptr_list_object_lookup_indices;
        do {
          pcVar7 = pos_data_entry + ((int)sVar1 * 0x10 + (int)lVar2 * -4 + (int)lVar2) * 4;
          iVar4 = proc_7F03DA50(pcVar7,in_stack_00000010);
          if (((iVar4 != 0) &&
              (proc_7F03CC20(pcVar7,&piStack124,&iStack128,afStack140,&fStack144), 0 < iStack128))
             && ((uStack24 == 0 ||
                 ((fStack144 <= in_stack_00000014 && (in_stack_00000018 <= afStack140[0])))))) {
            fVar11 = -1.00000000;
            lVar2 = 0;
            do {
              iVar6 = (int)lVar2;
              iVar4 = (iVar6 + 1) % iStack128;
              pfVar5 = (float *)(piStack124 + iVar4 * 2);
              if (iStack128 == 0) {
                trap(0x1c00);
              }
              if ((iStack128 == -1) && (iVar6 + 1 == -0x80000000)) {
                trap(0x1800);
              }
              fVar8 = proc_7F0B16C4((float)piStack124[iVar6 * 2],(float)(piStack124 + iVar6 * 2)[1],
                                    (longlong)(int)pfVar5,lVar2,*pfVar5,pfVar5[1],in_a1_lo,in_a2_lo)
              ;
              fVar10 = fVar8;
              if (fVar8 < 0.00000000) {
                fVar10 = -fVar8;
              }
              if (fVar11 < fVar10) {
                proc_7F0B1794((float)piStack124[iVar6 * 2],(float)(piStack124 + iVar6 * 2)[1],
                              extraout_a0,extraout_a1,in_a1_lo,in_a2_lo);
                fVar9 = fVar8;
                proc_7F0B1794((float)piStack124[iVar4 * 2],(float)(piStack124 + iVar4 * 2)[1],
                              extraout_a0_00,extraout_a1_00,in_a1_lo,in_a2_lo);
                if ((fVar10 < (float)in_a3_lo) &&
                   (((fVar8 < (float)in_a3_lo || (fVar9 < (float)in_a3_lo)) ||
                    (uVar3 = proc_7F0B17E4((float)piStack124[iVar6 * 2],
                                           (float)(piStack124 + iVar6 * 2)[1],extraout_a0_01,
                                           extraout_a1_01,(float)piStack124[iVar4 * 2],
                                           (float)(piStack124 + iVar4 * 2)[1],in_a1_lo,in_a2_lo),
                    uVar3 != 0)))) {
                  dword_800413BC = 1;
                  DAT_8007b9f0 = piStack124[iVar6 * 2];
                  DAT_8007b9f4 = (piStack124 + iVar6 * 2)[1];
                  DAT_8007b9f8 = piStack124[iVar4 * 2];
                  DAT_8007b9fc = (piStack124 + iVar4 * 2)[1];
                  DAT_8007b9e4 = 0;
                  DAT_8007b9e8 = 0;
                  fVar11 = fVar10;
                  DAT_8007ba04 = pcVar7;
                }
              }
              lVar2 = (longlong)iVar4;
            } while ((longlong)iVar4 != 0);
            if (-1.00000000 < fVar11) {
              return 2;
            }
          }
          sVar1 = psStack32[1];
          lVar2 = (longlong)sVar1;
          psStack32 = psStack32 + 1;
        } while (-1 < lVar2);
      }
      lVar2 = -2;
    }
  }
  return lVar2;
}



void proc_7F0B1CC4(void)

{
  dword_800413BC = 0;
  DAT_8007b9e4 = 0;
  DAT_8007b9e8 = 0;
  return;
}



undefined4 proc_7F0B1CE0(void)

{
  return DAT_8007b9e4;
}



undefined4 proc_7F0B1CEC(void)

{
  return DAT_8007b9e8;
}



void proc_7F0B1CF8(int param_1,int param_2,float *param_3,float *param_4)

{
  float fVar1;
  int iVar2;
  uint uVar3;
  
  fVar1 = flt_80040F48;
  iVar2 = param_1 + param_2 * 8;
  *param_3 = (float)(int)*(short *)(iVar2 + 8) * flt_80040F48;
  param_3[1] = (float)(int)*(short *)(iVar2 + 10) * fVar1;
  param_3[2] = (float)(int)*(short *)(iVar2 + 0xc) * fVar1;
  uVar3 = (int)*(short *)(param_1 + 6) >> 0xc & 0xf;
  param_1 += ((param_2 + 1) % uVar3) * 8;
  if (uVar3 == 0) {
    trap(0x1c00);
  }
  if ((uVar3 == 0xffffffff) && (param_2 + 1 == -0x80000000)) {
    trap(0x1800);
  }
  *param_4 = (float)(int)*(short *)(param_1 + 8) * fVar1;
  param_4[1] = (float)(int)*(short *)(param_1 + 10) * fVar1;
  param_4[2] = (float)(int)*(short *)(param_1 + 0xc) * fVar1;
  return;
}



// WARNING: Instruction at (ram,0x7f0b1f90) overlaps instruction at (ram,0x7f0b1f8c)
// 

undefined8
proc_7F0B1DDC(int *param_1,float param_2,float param_3,float param_4,undefined *param_5,
             undefined *param_6,undefined *param_7,code *param_8)

{
  int iVar1;
  ulonglong uVar2;
  longlong lVar3;
  int *piVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int *piVar8;
  uint uVar9;
  int iVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f12_05;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  float extraout_f14_05;
  float fVar14;
  code *in_stack_00000018;
  undefined4 in_stack_0000001c;
  int iStack172;
  int aiStack160 [40];
  
  iStack172 = 0;
  aiStack160[0] = *param_1;
  piVar8 = aiStack160;
  fVar14 = (float)param_6 * flt_80040F44;
  uVar9 = 1;
  do {
    iVar1 = *piVar8;
    piVar8 = piVar8 + 1;
    iStack172 += 1;
    if (param_7 != NULL) {
      (*(code *)param_7)(iVar1,in_stack_0000001c);
      param_2 = extraout_f12;
      param_3 = extraout_f14;
    }
    uVar6 = (int)*(short *)(iVar1 + 6) >> 0xc & 0xf;
    iVar5 = 0;
    if (uVar6 != 0) {
      do {
        iVar10 = iVar5 + 1;
        if (uVar6 == 0) {
          trap(0x1c00);
        }
        if ((uVar6 == 0xffffffff) && (iVar10 == -0x80000000)) {
          trap(0x1800);
        }
        fVar11 = proc_7F0AFD1C(iVar1,iVar5,param_2,param_3);
        fVar12 = fVar11;
        proc_7F0B0064(iVar1,iVar5,extraout_f12_00,extraout_f14_00);
        fVar13 = fVar12;
        proc_7F0B0064(iVar1,iVar10 % uVar6,extraout_f12_01,extraout_f14_01);
        if (fVar11 < fVar14) {
          param_2 = extraout_f12_02;
          param_3 = extraout_f14_02;
          if (((fVar12 < fVar14) ||
              (param_2 = extraout_f12_02, param_3 = extraout_f14_02, fVar13 < fVar14)) ||
             (uVar2 = proc_7F0B0198(iVar1,iVar5,extraout_f12_02,extraout_f14_02),
             param_2 = extraout_f12_03, param_3 = extraout_f14_03, uVar2 != 0)) {
            if ((param_8 == NULL) ||
               (lVar3 = (*param_8)(iVar1,iVar5,fVar11,fVar12,fVar13), param_2 = extraout_f12_04,
               param_3 = extraout_f14_04, lVar3 == 0)) {
              uVar6 = (uint)*(ushort *)(iVar1 + iVar5 * 8 + 0xe);
              if ((int)uVar6 >> 4 != 0) {
                iVar5 = uVar6 * 8 + base_ptr_connection_vals;
                if ((int)(uVar9 - 1) < 0) {
LAB_7f0b1fe8:
                  aiStack160[uVar9] = iVar5;
                  uVar9 += 1;
                  iVar5 = (int)*(short *)(iVar1 + 6);
                }
                else {
                  piVar4 = aiStack160 + (uVar9 - 1);
                  iVar7 = *piVar4;
                  while( true ) {
                    piVar4 = piVar4 + -1;
                    if (iVar5 == iVar7) break;
                    if (piVar4 < aiStack160) goto LAB_7f0b1fe8;
                    iVar7 = *piVar4;
                  }
                  iVar5 = (int)*(short *)(iVar1 + 6);
                }
                goto LAB_7f0b2038;
              }
            }
            DAT_8007b9e4 = iVar1;
            DAT_8007b9e8 = iVar5;
            if ((in_stack_00000018 == NULL) ||
               (DAT_8007b9e4 = iVar1, DAT_8007b9e8 = iVar5,
               lVar3 = (*in_stack_00000018)(aiStack160,uVar9,in_stack_0000001c), lVar3 != 1)) {
              return 2;
            }
            iVar5 = (int)*(short *)(iVar1 + 6);
            param_2 = extraout_f12_05;
            param_3 = extraout_f14_05;
          }
          else {
            iVar5 = (int)*(short *)(iVar1 + 6);
            param_2 = extraout_f12_03;
            param_3 = extraout_f14_03;
          }
        }
        else {
          iVar5 = (int)*(short *)(iVar1 + 6);
          param_2 = extraout_f12_02;
          param_3 = extraout_f14_02;
        }
LAB_7f0b2038:
        uVar6 = iVar5 >> 0xc & 0xf;
        iVar5 = iVar10;
      } while (iVar10 < (int)uVar6);
    }
    if (0x28 < uVar9) {
      return 5;
    }
    if ((int)uVar9 <= iStack172) {
      if (in_stack_00000018 != NULL) {
        (*in_stack_00000018)(aiStack160,uVar9,in_stack_0000001c);
      }
      return 0xfffffffffffffffe;
    }
  } while( true );
}



void proc_7F0B20D0(int *param_1,float param_2,float param_3,float param_4)

{
  float in_a2_lo;
  undefined *in_a3_lo;
  
  proc_7F0B1DDC(param_1,param_4,in_a2_lo,param_4,(undefined *)in_a2_lo,in_a3_lo,NULL,0);
  return;
}



undefined8 proc_7F0B2110(int param_1,int **param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  
  piVar1 = param_2[1];
  iVar3 = 0;
  if ((int)piVar1 < 1) {
    piVar4 = param_2[2];
  }
  else {
    piVar4 = *param_2;
    iVar2 = *piVar4;
    while( true ) {
      if ((ulonglong)*(byte *)(param_1 + 3) == (longlong)iVar2) {
        return 0;
      }
      iVar3 += 1;
      piVar4 = piVar4 + 1;
      if ((int)param_2[1] <= iVar3) break;
      iVar2 = *piVar4;
    }
    piVar4 = param_2[2];
  }
  if ((int)piVar1 < (int)piVar4) {
    (*param_2)[(int)piVar1] = (uint)*(byte *)(param_1 + 3);
    param_2[1] = (int *)((int)param_2[1] + 1);
  }
  return 0;
}



undefined8 proc_7F0B2194(undefined8 param_1,undefined8 param_2,int param_3)

{
  *(int *)(param_3 + 0xc) = *(int *)(param_3 + 0xc) + 1;
  return 1;
}



undefined8
proc_7F0B21B0(int *param_1,float param_2,float param_3,float param_4,float param_5,
             undefined4 *param_6,undefined4 param_7)

{
  undefined8 uVar1;
  undefined4 *in_stack_00000014;
  
  uVar1 = proc_7F0B1DDC(param_1,param_4,param_5,param_4,(undefined *)param_5,(undefined *)param_6,
                        proc_7F0B2110,0);
  *in_stack_00000014 = 0;
  if (false) {
    uVar1 = 2;
  }
  return uVar1;
}



undefined8 proc_7F0B2244(int param_1,undefined4 *param_2)

{
  if ((*(byte *)((int)&dword_80040F30 + ((int)*(short *)(param_1 + 4) >> 0xc)) & 2) != 0) {
    *param_2 = 1;
  }
  return 0;
}



undefined8
proc_7F0B2274(int param_1,int param_2,undefined param_3,undefined param_4,undefined param_5,
             undefined4 *param_6)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = (uint)*(ushort *)(param_1 + param_2 * 8 + 0xe);
  if ((int)uVar1 >> 4 != 0) {
    iVar2 = uVar1 * 8 + base_ptr_connection_vals;
    iVar3 = (int)*(short *)(iVar2 + 4) >> 0xc;
    if ((*(byte *)((int)&dword_80040F30 + iVar3) & 2) != 0) {
      *param_6 = 1;
      return 1;
    }
    if ((*(byte *)((int)&dword_80040F30 + iVar3) & 0x40) != 0) {
      DAT_8007ba0c = iVar2;
      param_6[1] = 1;
      return 0;
    }
  }
  return 0;
}



uint proc_7F0B2314(int *param_1,float param_2,float param_3,float param_4,undefined4 *param_5)

{
  undefined8 uVar1;
  int iVar2;
  undefined *in_a3_lo;
  undefined4 *in_stack_00000010;
  
  iVar2 = 0;
  do {
    iVar2 += 4;
    *in_stack_00000010 = 0;
    in_stack_00000010[1] = 0;
    in_stack_00000010[2] = 0;
    in_stack_00000010[3] = 0;
    in_stack_00000010 = in_stack_00000010 + 4;
  } while (iVar2 != 0x10);
  uVar1 = proc_7F0B1DDC(param_1,param_4,(float)param_5,param_4,(undefined *)param_5,in_a3_lo,
                        proc_7F0B2244,proc_7F0B2274);
  return (uint)uVar1;
}



undefined4 proc_7F0B239C(undefined4 *param_1)

{
  return *param_1;
}



undefined4 proc_7F0B23A4(int param_1)

{
  return *(undefined4 *)(param_1 + 4);
}



void proc_7F0B23AC(int param_1,undefined8 param_2,float *param_3)

{
  float fVar1;
  
  fVar1 = flt_80040F48;
  param_1 += ((int)*(short *)(param_1 + 6) >> ((int)param_2 * -4 + 8U & 0x1f) & 0xfU) * 8;
  *param_3 = (float)(int)*(short *)(param_1 + 8) * flt_80040F48;
  param_3[1] = (float)(int)*(short *)(param_1 + 10) * fVar1;
  param_3[2] = (float)(int)*(short *)(param_1 + 0xc) * fVar1;
  return;
}



void proc_7F0B2420(int *param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  
  iVar1 = DAT_8007ba0c;
  uVar7 = (int)*(short *)(DAT_8007ba0c + 6) >> 0xc & 0xf;
  iVar2 = 0;
  iVar4 = DAT_8007ba0c;
  if (uVar7 == 0) {
    return;
  }
  while ((iVar6 = (uint)*(ushort *)(iVar4 + 0xe) * 8 + base_ptr_connection_vals,
         (int)(uint)*(ushort *)(iVar4 + 0xe) >> 4 == 0 ||
         ((*(byte *)((int)&dword_80040F30 + ((int)*(short *)(iVar6 + 4) >> 0xc)) & 0x40) == 0))) {
    iVar2 += 1;
    iVar4 = iVar4 + 8;
    if ((int)uVar7 <= iVar2) {
      return;
    }
  }
  *param_1 = DAT_8007ba0c;
  *param_2 = iVar6;
  uVar7 = 0;
  while( true ) {
    iVar4 = 0;
    uVar5 = uVar7;
    do {
      iVar3 = ((int)uVar7 >> 2) + iVar4;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar3 == -0x80000000)) {
        trap(0x1800);
      }
      proc_7F0B23AC(iVar6,(longlong)(iVar3 % 3),(float *)(param_3 + (uVar5 & 3) * 0xc));
      iVar4 += 1;
      uVar5 += 1;
    } while (iVar4 != 3);
    proc_7F0B23AC(iVar1,(longlong)((iVar2 + 2) % 3),(float *)(param_3 + (uVar7 + 3 & 3) * 0xc));
    uVar7 += 1;
    if (uVar7 == 0xc) break;
    if ((((*(float *)(param_3 + 4) <= *(float *)(param_3 + 0x1c)) &&
         (*(float *)(param_3 + 0x10) <= *(float *)(param_3 + 0x1c))) &&
        (*(float *)(param_3 + 4) <= *(float *)(param_3 + 0x28))) &&
       (*(float *)(param_3 + 0x10) <= *(float *)(param_3 + 0x28))) {
      return;
    }
  }
  return;
}



undefined8
proc_7F0B260C(int param_1,int param_2,undefined param_3,undefined param_4,undefined param_5,
             float *param_6)

{
  uint uVar1;
  
  if (*param_6 < (float)(int)*(short *)(param_1 + param_2 * 8 + 10)) {
    uVar1 = (int)*(short *)(param_1 + 6) >> 0xc & 0xf;
    if (uVar1 == 0) {
      trap(0x1c00);
    }
    if ((uVar1 == 0xffffffff) && (param_2 + 1 == -0x80000000)) {
      trap(0x1800);
    }
    if (*param_6 < (float)(int)*(short *)(param_1 + ((param_2 + 1) % uVar1) * 8 + 10)) {
      return 1;
    }
  }
  return 0;
}



void proc_7F0B26B8(int *param_1,float param_2,float param_3,float param_4,float param_5)

{
  undefined *in_a3_lo;
  
  proc_7F0B1DDC(param_1,param_4,param_5,param_4,(undefined *)param_5,in_a3_lo,NULL,proc_7F0B260C);
  return;
}



int proc_7F0B2718(int param_1,undefined *param_2)

{
  int iVar1;
  bool bVar2;
  longlong lVar3;
  uint uVar4;
  int *piVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int *piStack28;
  uint uStack8;
  
  lVar3 = (*(code *)param_2)();
  if (lVar3 == 0) {
    uStack8 = 1;
    DAT_8007ba10 = param_1;
    do {
      iVar11 = 0;
      uVar8 = uStack8;
      if (0 < (int)uStack8) {
        piStack28 = &DAT_8007ba10;
        uVar8 = uStack8;
        do {
          iVar9 = 0;
          iVar1 = *piStack28;
          uVar6 = (int)*(short *)(iVar1 + 6) >> 0xc & 0xf;
          iVar10 = iVar1;
          if (uVar6 != 0) {
            do {
              iVar7 = (uint)*(ushort *)(iVar10 + 0xe) * 8 + base_ptr_connection_vals;
              if ((int)(uint)*(ushort *)(iVar10 + 0xe) >> 4 != 0) {
                uVar4 = 0;
                if (0 < (int)uVar8) {
                  piVar5 = &DAT_8007ba10;
                  do {
                    uVar4 += 1;
                    if (iVar7 == *piVar5) goto LAB_7f0b283c;
                    piVar5 = piVar5 + 1;
                  } while (uVar4 != uVar8);
                }
                lVar3 = (*(code *)param_2)(iVar7);
                if (lVar3 != 0) {
                  return iVar7;
                }
                (&DAT_8007ba10)[uVar8] = iVar7;
                if (0x15e < uVar8 + 1) {
                  return 0;
                }
                uVar6 = (int)*(short *)(iVar1 + 6) >> 0xc & 0xf;
                uVar8 = uVar8 + 1;
              }
LAB_7f0b283c:
              iVar9 += 1;
              iVar10 += 8;
            } while (iVar9 < (int)uVar6);
          }
          iVar11 += 1;
          piStack28 = piStack28 + 1;
        } while (iVar11 < (int)uStack8);
      }
      bVar2 = uVar8 != uStack8;
      uStack8 = uVar8;
    } while (bVar2);
    param_1 = 0;
  }
  return param_1;
}



undefined8 proc_7F0B28B0(float *param_1,float *param_2)

{
  float fVar1;
  undefined8 uVar2;
  
  fVar1 = DAT_8007b9f0;
  if (DAT_8007b9e4 == 0) {
    if (dword_800413BC == 0) {
      uVar2 = 0;
    }
    else {
      param_1[1] = 0.00000000;
      *param_1 = fVar1;
      uVar2 = 1;
      param_1[2] = DAT_8007b9f4;
      fVar1 = DAT_8007b9f8;
      param_2[1] = 0.00000000;
      *param_2 = fVar1;
      param_2[2] = DAT_8007b9fc;
    }
  }
  else {
    proc_7F0B1CF8(DAT_8007b9e4,DAT_8007b9e8,param_1,param_2);
    uVar2 = 1;
  }
  return uVar2;
}



void proc_7F0B2950(f32 param_1)

{
  flt_80040F44 = (float)param_1;
  flt_80040F48 = 1.00000000 / (float)param_1;
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ulonglong proc_7F0B2970(void)

{
  short sVar1;
  longlong lVar2;
  longlong lVar3;
  longlong lVar4;
  longlong lVar5;
  longlong lVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  int in_a0_lo;
  float in_a1_lo;
  float in_a2_lo;
  int iVar12;
  int iVar13;
  undefined4 uVar14;
  undefined8 in_f0;
  ulonglong uVar15;
  double dVar16;
  double dVar17;
  double dVar18;
  double dVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  float fVar26;
  float fVar27;
  
  uVar14 = (undefined4)((ulonglong)in_f0 >> 0x20);
  fVar26 = in_a1_lo * flt_80040F44;
  fVar21 = in_a2_lo * flt_80040F44;
  sVar1 = *(short *)(in_a0_lo + 6);
  iVar13 = in_a0_lo + ((int)sVar1 >> 8 & 0xfU) * 8;
  uVar7 = in_a0_lo + ((int)sVar1 >> 4 & 0xfU) * 8;
  iVar12 = in_a0_lo + ((int)sVar1 & 0xfU) * 8;
  fVar23 = (float)((int)*(short *)(uVar7 + 8) - (int)*(short *)(iVar13 + 8));
  fVar27 = (float)((int)*(short *)(uVar7 + 10) - (int)*(short *)(iVar13 + 10));
  fVar22 = (float)((int)*(short *)(uVar7 + 0xc) - (int)*(short *)(iVar13 + 0xc));
  fVar24 = (float)((int)*(short *)(iVar12 + 8) - (int)*(short *)(iVar13 + 8));
  fVar20 = (float)((int)*(short *)(iVar12 + 10) - (int)*(short *)(iVar13 + 10));
  fVar25 = (float)((int)*(short *)(iVar12 + 0xc) - (int)*(short *)(iVar13 + 0xc));
  lVar2 = __f_to_ll(fVar27 * fVar25 - fVar20 * fVar22);
  uVar8 = uVar7;
  lVar3 = __f_to_ll(fVar22 * fVar24 - fVar25 * fVar23);
  iVar12 = (int)lVar3;
  uVar9 = uVar8;
  lVar3 = __f_to_ll(fVar23 * fVar20 - fVar24 * fVar27);
  uVar10 = uVar9;
  lVar4 = __ll_mul((longlong)iVar12,(longlong)(int)uVar8);
  uVar11 = uVar10;
  lVar5 = __ll_mul((longlong)(int)lVar2,(longlong)(int)uVar7);
  uVar7 = uVar11;
  lVar6 = __ll_mul((longlong)(int)lVar3,(longlong)(int)uVar9);
  if ((iVar12 == 0) && (uVar8 == 0)) {
    uVar15 = CONCAT44(uVar14,(float)(int)*(short *)(iVar13 + 10) * flt_80040F48);
  }
  else {
    dVar16 = __ll_to_d((longlong)(int)lVar3);
    dVar17 = __ll_to_d((longlong)(int)lVar2);
    dVar18 = __ll_to_d((longlong)
                       (int)((uint)(uVar7 + uVar11 + uVar10 < uVar10) +
                             (uint)(uVar7 + uVar11 < uVar11) + (int)lVar6 + (int)lVar5 + (int)lVar4)
                      );
    dVar19 = __ll_to_d((longlong)iVar12);
    uVar15 = (ulonglong)dVar19 & 0xffffffff00000000 |
             (ulonglong)
             (uint)((float)(((dVar18 - (double)fVar26 * dVar17) - (double)fVar21 * dVar16) / dVar19)
                   * flt_80040F48);
  }
  return uVar15;
}



void copy_tile_RGB_as_24bit(int *tile,int posx,int posz,tile_rgb *target)

{
  short sVar1;
  uint uVar2;
  uint uVar3;
  
  sVar1 = *(short *)(tile + 1);
  uVar2 = (int)sVar1 >> 8 & 0xf;
  uVar3 = (int)sVar1 >> 4 & 0xf;
  target->red = (byte)(uVar2 << 4) | (byte)uVar2;
  target->green = (byte)(uVar3 << 4) | (byte)uVar3;
  target->blue = (byte)((int)((longlong)sVar1 & 0xfU) << 4) | (byte)((longlong)sVar1 & 0xfU);
  return;
}



void proc_7F0B2C74(int param_1,float *param_2)

{
  float fVar1;
  
  fVar1 = (float)(int)*(short *)(param_1 + ((int)*(short *)(param_1 + 6) >> 8 & 0xfU) * 8 + 10);
  *param_2 = fVar1 * flt_80040F48;
  param_2[1] = fVar1 * flt_80040F48;
  return;
}



float proc_7F0B2D14(int param_1)

{
  float afStack8 [2];
  
  proc_7F0B2C74(param_1,afStack8);
  return afStack8[0];
}



void removed_7F0B2D38(u32 param_1,u32 param_2,u32 param_3)

{
  return;
}



undefined8 proc_7F0B2D48(undefined8 param_1)

{
  return param_1;
}



void proc_7F0B2D50(byte *param_1,ushort *param_2,byte *param_3)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  ulonglong uVar5;
  byte *apbStack8 [2];
  
  iVar3 = (uint)*param_1 - 0x70;
  if ((-1 < iVar3) && (iVar3 < 2)) {
    uVar2 = strtol((char *)(param_1 + 1),(char **)apbStack8,10);
    if ((apbStack8[0] != param_1 + 1) && (uVar2 < 0x8000)) {
      iVar4 = (uint)*apbStack8[0] - 0x61;
      if ((-1 < iVar4) && (iVar4 < 0x1a)) {
        bVar1 = apbStack8[0][1];
        uVar5 = (ulonglong)bVar1;
        if ((bVar1 != 0) && (bVar1 != 0x30)) {
          uVar5 = SEXT48((int)((uint)bVar1 - 0x30));
        }
        if (((-1 < (longlong)uVar5) && ((longlong)uVar5 < 8)) &&
           ((bVar1 == 0 || (apbStack8[0][2] == 0)))) {
          *param_2 = (short)iVar3 * -0x8000 | (ushort)uVar2;
          *param_3 = (char)iVar4 * '\b' | (byte)uVar5;
          return;
        }
      }
    }
  }
  *param_2 = 0xffff;
  *param_3 = 0xff;
  return;
}



int * stanMatchTileName(byte *param_1)

{
  short sVar1;
  ushort uVar2;
  int *piVar3;
  byte bStack7;
  ushort auStack6 [3];
  
  if (*param_1 != 0) {
    proc_7F0B2D50(param_1,auStack6,&bStack7);
    piVar3 = *(int **)(clippingfile + 4);
    if (*piVar3 != 0) {
      uVar2 = *(ushort *)piVar3;
      while( true ) {
        if (auStack6[0] == uVar2) {
          if (bStack7 == *(byte *)((int)piVar3 + 2)) {
            return piVar3;
          }
          sVar1 = *(short *)((int)piVar3 + 6);
        }
        else {
          sVar1 = *(short *)((int)piVar3 + 6);
        }
        piVar3 = (int *)((uint)(byte)list_of_tilesizes[(int)sVar1 >> 0xc & 0xf] + (int)piVar3);
        if (*piVar3 == 0) break;
        uVar2 = *(ushort *)piVar3;
      }
    }
  }
  return NULL;
}



void proc_7F0B2F00(int **param_1)

{
  int *piVar1;
  
  piVar1 = stanMatchTileName((byte *)*param_1);
  *param_1 = piVar1;
  return;
}



void load_stan(int ptr_clipfile,int param_2,int param_3)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  
  param_3 -= param_2;
  base_ptr_connection_vals = *(int *)(ptr_clipfile + 4) + param_3 + -0x80;
  ptr_firstroom_0 = *(int *)(ptr_clipfile + 4) + param_3;
  piVar3 = (int *)(ptr_clipfile + 4);
  if (*(int *)(ptr_clipfile + 4) != 0) {
    iVar1 = *piVar3;
    do {
      iVar4 = iVar1 + param_3;
      iVar1 = piVar3[1];
      *piVar3 = iVar4;
      piVar3 = piVar3 + 1;
    } while (iVar1 != 0);
  }
  iVar1 = piVar3[1];
  piVar3 = piVar3 + 1;
  while (piVar2 = piVar3, iVar1 != 0) {
    iVar1 = *(int *)((uint)(byte)list_of_tilesizes[(int)*(short *)((int)piVar2 + 6) >> 0xc & 0xf] +
                    (int)piVar2);
    piVar3 = (int *)((uint)(byte)list_of_tilesizes[(int)*(short *)((int)piVar2 + 6) >> 0xc & 0xf] +
                    (int)piVar2);
    DAT_80040f60 = piVar2;
  }
  clippingfile = ptr_clipfile;
  return;
}



ulonglong proc_7F0B2FD8(int param_1)

{
  return (ulonglong)*(byte *)(param_1 + 3);
}



undefined4 proc_7F0B2FE0(int param_1)

{
  undefined4 uVar1;
  
  uVar1 = proc_7F0B4F9C((uint)*(byte *)(param_1 + 3));
  return uVar1;
}



void proc_7F0B3004(int param_1)

{
  proc_7F0B2D14(param_1);
  return;
}



undefined8 proc_7F0B3024(undefined8 param_1)

{
  return param_1;
}



undefined8 proc_7F0B3034(undefined8 param_1)

{
  return param_1;
}



undefined8 stan_problems_removed(undefined8 param_1)

{
  return param_1;
}



// WARNING: Instruction at (ram,0x7f0b3070) overlaps instruction at (ram,0x7f0b306c)
// 

undefined4 proc_7F0B3044(int param_1)

{
  int iVar1;
  undefined4 uStack4;
  
  uStack4 = 0;
  iVar1 = num_microcode_cmds_that_fit(param_1);
  if (((iVar1 < 0x1000) || (iVar1 = proc_7F0BD7A4(), iVar1 < 0x1000)) && (dword_800413D0 == 0)) {
    flt_800413C0 = 0.00000000;
    flt_800413C4 = 0.00000000;
    dword_800413C8 = dword_800413CC;
    dword_800413D0 = 1;
  }
  if ((dword_800413D0 == 0) &&
     (flt_800413C0 = flt_800413C0 + flt_800413C4, 1.00000000 < flt_800413C0)) {
    flt_800413C0 = flt_800413C0 - 1.00000000;
    uStack4 = 1;
  }
  dword_800413CC = dword_800413CC + 1;
  return uStack4;
}



undefined8 stan_region_removed(undefined8 param_1)

{
  return param_1;
}



void proc_7F0B3138(undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined4 param_9)

{
  proc_7F0B0E24();
  return;
}



void proc_7F0B31A4(undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  proc_7F0B18B8();
  return;
}



float proc_7F0B3200(float *param_1,float *param_2,float *param_3,float *param_4)

{
  float fVar1;
  float fVar2;
  float fVar3;
  
  fVar3 = *param_4 - *param_3;
  fVar1 = param_3[1] - param_4[1];
  fVar2 = (*param_2 - *param_1) * fVar1 + (param_2[1] - param_1[1]) * fVar3;
  if (fVar2 == 0.00000000) {
    fVar2 = 1.00000000;
  }
  else {
    fVar2 = ((*param_3 - *param_1) * fVar1 + (param_3[1] - param_1[1]) * fVar3) / fVar2;
    if ((fVar2 < 0.00000000) || (1.00000000 < fVar2)) {
      fVar2 = 1.00000000;
    }
  }
  return fVar2;
}



float proc_7F0B32D8(float *param_1,float *param_2,float *param_3)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float __x;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  
  fVar5 = param_1[2];
  fVar4 = param_3[1];
  fVar3 = param_1[1];
  fVar2 = *param_3;
  fVar6 = *param_2;
  fVar7 = param_2[1];
  fVar8 = fVar6 * (fVar4 - fVar5) - (fVar2 - fVar3) * fVar7;
  __x = (*param_1 - fVar8) * (*param_1 + fVar8);
  fVar1 = flt_800585E0;
  if (0.00000000 <= __x) {
    fVar1 = sqrtf(__x);
    fVar1 = (fVar6 * (fVar2 - fVar3) + (fVar4 - fVar5) * fVar7) - fVar1;
    if ((fVar1 < 0.00000000) &&
       (fVar2 = fVar1 * fVar1, fVar1 = flt_800585E4, fVar2 + fVar8 * fVar8 <= *param_1 * *param_1))
    {
      fVar1 = 0.00000000;
    }
  }
  return fVar1;
}



float proc_7F0B33DC(float *param_1,float *param_2,float *param_3,float *param_4)

{
  float *pfVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float *pfStackX8;
  float fStack40;
  float fStack36;
  float fStack16;
  float fStack12;
  float fStack4;
  
  fStack4 = sqrtf(*param_4 * *param_4 + param_4[1] * param_4[1]);
  if (fStack4 == 0.00000000) {
    return 1.00000000;
  }
  fVar10 = 1.00000000 / fStack4;
  fStack16 = *param_4 * fVar10;
  fStack12 = param_4[1] * fVar10;
  fVar2 = *param_3 - *param_2;
  fStack40 = param_3[1] - param_2[1];
  fVar3 = sqrtf(fVar2 * fVar2 + fStack40 * fStack40);
  pfStackX8 = param_3;
  if (fVar3 == 0.00000000) {
LAB_7f0b369c:
    fVar2 = proc_7F0B32D8(param_1,&fStack16,pfStackX8);
  }
  else {
    fStack40 = fStack40 * (1.00000000 / fVar3);
    fStack36 = -fVar2 * (1.00000000 / fVar3);
    fVar2 = *param_1;
    fVar3 = param_1[1];
    fVar8 = fVar2 * fStack40;
    fVar5 = param_1[2];
    fVar11 = fVar2 * fStack36;
    if ((fVar3 - *param_2) * fVar8 + fVar11 * (fVar5 - param_2[1]) < 0.00000000) {
      fVar8 = -fVar8;
      fVar11 = -fVar11;
    }
    fVar6 = param_4[1];
    fVar4 = *param_4;
    fVar7 = fVar6 * (*param_2 + fVar8) - (param_2[1] + fVar11) * fVar4;
    fVar9 = fVar3 * fVar6 - fVar5 * fVar4;
    fVar12 = fVar6 * (*param_3 + fVar8) - (param_3[1] + fVar11) * fVar4;
    fVar8 = fVar7;
    fVar11 = fVar12;
    pfVar1 = param_2;
    if (fVar12 < fVar7) {
      fStack40 = -fStack40;
      fStack36 = -fStack36;
      fVar8 = fVar12;
      fVar11 = fVar7;
      pfVar1 = param_3;
      param_3 = param_2;
    }
    if (fVar12 == fVar7) {
      fVar3 = proc_7F0B32D8(param_1,&fStack16,pfVar1);
      fVar2 = proc_7F0B32D8(param_1,&fStack16,param_3);
      if (fVar3 <= fVar2) goto LAB_7f0b375c;
    }
    else {
      pfStackX8 = param_3;
      if (fVar11 < fVar9) goto LAB_7f0b369c;
      if (fVar9 < fVar8) {
        fVar2 = proc_7F0B32D8(param_1,&fStack16,pfVar1);
      }
      else {
        fVar8 = (fVar3 - *pfVar1) * fStack40 + fStack36 * (fVar5 - pfVar1[1]);
        fVar3 = ((fVar3 + fVar4) - *pfVar1) * fStack40 + fStack36 * ((fVar5 + fVar6) - pfVar1[1]);
        if (fVar8 == fVar3) {
          return 1.00000000;
        }
        fVar2 = ((fVar8 - fVar2) * fStack4) / (fVar8 - fVar3);
      }
    }
  }
  fVar3 = fVar2;
LAB_7f0b375c:
  fVar2 = 1.00000000;
  if (fVar3 <= fStack4) {
    if (fVar3 < 0.00000000) {
      fVar2 = 0.00000000;
    }
    else {
      fVar2 = fVar3 * fVar10;
    }
  }
  return fVar2;
}



void something_with_bg_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&bg_c_debug_notice_list_entry,aBg_c_debug);
  return;
}



void proc_7F0B37EC(void)

{
  byte bVar1;
  byte bVar2;
  undefined4 *puVar3;
  byte *pbVar4;
  ulonglong uVar5;
  int iVar6;
  
  puVar3 = (undefined4 *)&dword_80044824;
  do {
    pbVar4 = (byte *)((int)puVar3 + 1);
    if ((longlong)(int)levelentry_index == (ulonglong)*(byte *)puVar3) {
      bVar1 = *pbVar4;
      bVar2 = *(byte *)((int)puVar3 + 2);
      while( true ) {
        uVar5 = (ulonglong)bVar1;
        if ((ulonglong)bVar2 < uVar5) {
          bVar1 = pbVar4[2];
        }
        else {
          do {
            iVar6 = (int)uVar5;
            uVar5 = (longlong)(iVar6 + 1) & 0xff;
            *(byte *)&ptr_bgdata_portals[iVar6].controlbytes =
                 *(byte *)&ptr_bgdata_portals[iVar6].controlbytes | 2;
          } while (uVar5 <= (ulonglong)pbVar4[1]);
          bVar1 = pbVar4[2];
        }
        if (bVar1 == 0xff) break;
        bVar2 = pbVar4[3];
        pbVar4 = pbVar4 + 2;
      }
    }
    else {
      bVar1 = *(byte *)((int)puVar3 + 3);
      while (bVar1 != 0xff) {
        bVar1 = pbVar4[4];
        pbVar4 = pbVar4 + 2;
      }
    }
    puVar3 = (undefined4 *)(pbVar4 + 3);
  } while (puVar3 < &current_room_maybe);
  return;
}



void proc_7F0B38B4(byte param_1,byte *param_2)

{
  byte bVar2;
  longlong lVar1;
  byte *pbVar3;
  byte *pbVar4;
  
  bVar2 = *param_2;
  pbVar4 = param_2;
  do {
    do {
      pbVar3 = pbVar4;
      if (param_1 == bVar2) {
        bVar2 = *param_2;
        do {
          pbVar4 = param_2;
          lVar1 = proc_7F0B5208((uint)bVar2,&ptr_BONDdata->field_1118);
          if (lVar1 != 0) {
            proc_7F0B39BC((uint)*pbVar4,0,&ptr_BONDdata->field_1118,1);
          }
          bVar2 = pbVar4[1];
          param_2 = pbVar4 + 1;
        } while (bVar2 != 0);
        pbVar4 = pbVar4 + 2;
        bVar2 = *pbVar4;
        do {
          lVar1 = proc_7F0B5208((uint)bVar2,&ptr_BONDdata->field_1118);
          if (lVar1 != 0) {
            proc_7F0B39BC((uint)*pbVar4,0,&ptr_BONDdata->field_1118,1);
          }
          bVar2 = pbVar4[1];
          pbVar4 = pbVar4 + 1;
        } while (bVar2 != 0);
        return;
      }
      bVar2 = pbVar3[1];
      pbVar4 = pbVar3 + 1;
    } while (bVar2 != 0);
    bVar2 = pbVar3[2];
    param_2 = pbVar3 + 1;
    while (bVar2 != 0) {
      bVar2 = param_2[2];
      param_2 = param_2 + 1;
    }
    param_2 = param_2 + 2;
    bVar2 = *param_2;
    pbVar4 = param_2;
  } while (bVar2 != 0);
  return;
}



uint proc_7F0B39BC(int param_1,int param_2,float *param_3,uint param_4)

{
  uint uVar1;
  s32 sVar2;
  int iVar3;
  int *piVar4;
  float fVar5;
  
  (&roominformationblock)[param_1 * 0x50] = 1;
  sVar2 = NumberOfRoomsDrawn;
  if ((&DAT_80041448)[param_1 * 0x50] == '\0') {
    iVar3 = 0;
    if (0 < NumberOfRoomsDrawn) {
      piVar4 = &DAT_8007ffa0;
      do {
        iVar3 += 1;
        if (param_1 == *piVar4) {
          if (piVar4[1] < param_2) {
            piVar4[1] = param_2;
          }
          proc_7F0B5CC0(param_3,(float *)(piVar4 + 2));
          uVar1 = piVar4[6];
          *(float *)(piVar4 + 2) = *param_3;
          *(float *)(piVar4 + 3) = param_3[1];
          *(float *)(piVar4 + 4) = param_3[2];
          fVar5 = param_3[3];
          piVar4[6] = uVar1 | param_4;
          *(float *)(piVar4 + 5) = fVar5;
          return uVar1;
        }
        piVar4 = piVar4 + 7;
      } while (iVar3 < NumberOfRoomsDrawn);
    }
    (&DAT_8007ffa0)[NumberOfRoomsDrawn * 7] = param_1;
    (&DAT_8007ffa4)[NumberOfRoomsDrawn * 7] = param_2;
    *(float *)(&DAT_8007ffa8 + NumberOfRoomsDrawn * 7) = *param_3;
    *(float *)(&DAT_8007ffac + NumberOfRoomsDrawn * 7) = param_3[1];
    *(float *)(&DAT_8007ffb0 + NumberOfRoomsDrawn * 7) = param_3[2];
    fVar5 = param_3[3];
    iVar3 = NumberOfRoomsDrawn * 7;
    NumberOfRoomsDrawn = NumberOfRoomsDrawn + 1;
    (&DAT_8007ffb8)[iVar3] = param_4;
    *(float *)(&DAT_8007ffb4 + sVar2 * 7) = fVar5;
  }
  return 0;
}



void proc_7F0B3B04(int param_1)

{
  (&DAT_80041417)[param_1 * 0x50] = 0;
  return;
}



int proc_7F0B3B20(void)

{
  undefined *puVar1;
  int iVar2;
  
  if (DAT_80041417 != '\0') {
    return 0;
  }
  puVar1 = &DAT_800414b4;
  iVar2 = 2;
  if (DAT_80041467 != '\0') {
    return 1;
  }
  while( true ) {
    if (puVar1[3] != '\0') {
      return iVar2;
    }
    if (puVar1[0x53] != '\0') {
      return iVar2 + 1;
    }
    if (puVar1[0xa3] != '\0') {
      return iVar2 + 2;
    }
    if (puVar1[0xf3] != '\0') break;
    iVar2 += 4;
    puVar1 = puVar1 + 0x140;
    if (iVar2 == 0x96) {
      return -1;
    }
  }
  return iVar2 + 3;
}



void proc_7F0B3BC4(void)

{
  u32 *puVar1;
  
  NumberOfRoomsDrawn = 0;
  DAT_80041417 = 0;
  DAT_80041467 = 0;
  puVar1 = (u32 *)&DAT_800414b4;
  do {
    puVar1 = puVar1 + 0x50;
    *(undefined *)((int)puVar1 + 3) = 0;
    *(undefined *)((int)puVar1 + 0x53) = 0;
    *(undefined *)((int)puVar1 + 0xa3) = 0;
    *(undefined *)((int)puVar1 + 0xf3) = 0;
    puVar1 = puVar1;
  } while (puVar1 != &max_num_rooms);
  return;
}



undefined8 proc_7F0B3C0C(int param_1,int *param_2)

{
  int iVar1;
  int *piVar2;
  
  iVar1 = 0;
  if (0 < NumberOfRoomsDrawn) {
    piVar2 = &DAT_8007ffa0;
    do {
      iVar1 += 1;
      if (param_1 == *piVar2) {
        *param_2 = piVar2[2];
        param_2[1] = piVar2[3];
        param_2[2] = piVar2[4];
        param_2[3] = piVar2[5];
        return 1;
      }
      piVar2 = piVar2 + 7;
    } while (iVar1 < NumberOfRoomsDrawn);
  }
  *param_2 = 0;
  param_2[1] = 0;
  param_2[2] = 0;
  param_2[3] = 0;
  return 0;
}



longlong proc_7F0B3C8C(longlong param_1)

{
  s32 sVar1;
  void *virtualAddress;
  uint *puVar2;
  uint *DL;
  u32 uVar3;
  undefined4 *puVar4;
  BOOL BVar5;
  int iVar6;
  longlong lVar7;
  undefined4 *puVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f14;
  float extraout_f14_00;
  
  puVar4 = (undefined4 *)param_1;
  uVar13 = 99999999;
  uVar11 = 0;
  if (0 < NumberOfRoomsDrawn) {
    uVar12 = uVar11;
    uVar10 = DAT_8007ffa4;
    puVar8 = &DAT_8007ffa0;
    while( true ) {
      uVar11 = uVar10;
      if ((int)uVar10 <= (int)uVar12) {
        uVar11 = uVar12;
      }
      if ((int)uVar13 <= (int)uVar10) {
        uVar10 = uVar13;
      }
      uVar13 = uVar10;
      if (&DAT_8007ffa0 + NumberOfRoomsDrawn * 7 <= puVar8 + 7) break;
      uVar10 = puVar8[8];
      uVar12 = uVar11;
      puVar8 = puVar8 + 7;
    }
  }
  if ((int)uVar13 <= (int)uVar11) {
    sVar1 = NumberOfRoomsDrawn;
    uVar10 = uVar13;
    do {
      iVar9 = 0;
      if (0 < sVar1) {
        puVar2 = &DAT_8007ffa0;
        do {
          if (uVar10 == puVar2[1]) {
            puVar4 = (undefined4 *)param_1;
            *puVar4 = 0x1030040;
            virtualAddress = (void *)proc_7F078374();
            uVar3 = osVirtualToPhysical(virtualAddress);
            puVar4[1] = uVar3;
            puVar4 = proc_7F0BB298(puVar4 + 2);
            BVar5 = get_debug_do_draw_obj();
            if ((BVar5 != FALSE) && (iVar6 = proc_7F0BD8F0(), iVar6 != 0)) {
              lVar7 = proc_7F03A6F4((longlong)(int)puVar4,*puVar2,0);
              puVar4 = (undefined4 *)lVar7;
            }
            *puVar4 = 0x1030040;
            virtualAddress = (void *)proc_7F078394();
            uVar3 = osVirtualToPhysical(virtualAddress);
            puVar4[1] = uVar3;
            DL = proc_7F0B4FF4(puVar4 + 2,extraout_f12,extraout_f14,(float)puVar2[2],
                               (float)puVar2[3]);
            puVar4 = proc_7F0BB070(DL,0);
            BVar5 = get_debug_do_draw_bg();
            if ((BVar5 != FALSE) && (iVar6 = proc_7F0BD8F0(), iVar6 != 0)) {
              puVar4 = proc_7F0B677C(puVar4,*puVar2);
            }
            *puVar4 = 0x1030040;
            virtualAddress = (void *)proc_7F078374();
            uVar3 = osVirtualToPhysical(virtualAddress);
            puVar4[1] = uVar3;
            puVar4 = proc_7F0BB298(puVar4 + 2);
            param_1 = (longlong)(int)puVar4;
            BVar5 = get_debug_do_draw_obj();
            sVar1 = NumberOfRoomsDrawn;
            if ((BVar5 != FALSE) &&
               (iVar6 = proc_7F0BD8F0(), sVar1 = NumberOfRoomsDrawn, iVar6 != 0)) {
              param_1 = proc_7F03A6F4(param_1,*puVar2,2);
              sVar1 = NumberOfRoomsDrawn;
            }
          }
          iVar9 += 1;
          puVar2 = puVar2 + 7;
        } while (iVar9 < sVar1);
      }
      puVar4 = (undefined4 *)param_1;
      uVar10 += 1;
    } while (uVar11 + 1 != uVar10);
  }
  puVar2 = proc_7F0BB298(puVar4);
  DL = proc_7F0B4FB4(puVar2);
  puVar2 = DL + 2;
  *DL = 0x1030040;
  virtualAddress = (void *)proc_7F078394();
  uVar3 = osVirtualToPhysical(virtualAddress);
  DL[1] = uVar3;
  iVar9 = proc_7F0BD8F0();
  if (iVar9 != 0) {
    puVar4 = proc_7F0A0AB4(puVar2);
    puVar2 = proc_7F0A1D78(puVar4);
  }
  lVar7 = (longlong)(int)puVar2;
  if ((int)uVar13 <= (int)uVar11) {
    sVar1 = NumberOfRoomsDrawn;
    do {
      iVar9 = 0;
      if (0 < sVar1) {
        puVar2 = &DAT_8007ffa0;
        do {
          if (uVar11 == puVar2[1]) {
            puVar4 = (undefined4 *)lVar7;
            *puVar4 = 0x1030040;
            virtualAddress = (void *)proc_7F078394();
            uVar3 = osVirtualToPhysical(virtualAddress);
            puVar4[1] = uVar3;
            DL = proc_7F0B4FF4(puVar4 + 2,extraout_f12_00,extraout_f14_00,(float)puVar2[2],
                               (float)puVar2[3]);
            puVar4 = proc_7F0BB070(DL,1);
            BVar5 = get_debug_do_draw_bg();
            if ((BVar5 != FALSE) && (iVar6 = proc_7F0BD8F0(), iVar6 != 0)) {
              puVar4 = proc_7F0B6898(puVar4,*puVar2);
            }
            *puVar4 = 0x1030040;
            virtualAddress = (void *)proc_7F078374();
            uVar3 = osVirtualToPhysical(virtualAddress);
            puVar4[1] = uVar3;
            puVar4 = proc_7F0BB298(puVar4 + 2);
            lVar7 = (longlong)(int)puVar4;
            BVar5 = get_debug_do_draw_obj();
            sVar1 = NumberOfRoomsDrawn;
            if ((BVar5 != FALSE) &&
               (iVar6 = proc_7F0BD8F0(), sVar1 = NumberOfRoomsDrawn, iVar6 != 0)) {
              lVar7 = proc_7F03A6F4(lVar7,*puVar2,1);
              sVar1 = NumberOfRoomsDrawn;
            }
          }
          iVar9 += 1;
          puVar2 = puVar2 + 7;
        } while (iVar9 < sVar1);
      }
      uVar11 -= 1;
    } while (uVar11 != uVar13 - 1);
  }
  return lVar7;
}



int proc_7F0B4034(int param_1)

{
  bg_room_data *pbVar1;
  f32 fVar2;
  
  if (ptr_bgdata_room_fileposition_list[param_1].ypos == 0.00000000) {
    fVar2 = (ptr_bgdata_room_fileposition_list + param_1)[1].ypos;
    pbVar1 = ptr_bgdata_room_fileposition_list + param_1;
    while( true ) {
      param_1 += 1;
      if (fVar2 != 0.00000000) break;
      fVar2 = pbVar1[2].ypos;
      pbVar1 = pbVar1 + 1;
    }
  }
  return param_1;
}



int proc_7F0B4084(int param_1)

{
  bg_room_data *pbVar1;
  f32 fVar2;
  
  if (ptr_bgdata_room_fileposition_list[param_1].zpos == 0.00000000) {
    fVar2 = (ptr_bgdata_room_fileposition_list + param_1)[1].zpos;
    pbVar1 = ptr_bgdata_room_fileposition_list + param_1;
    while( true ) {
      param_1 += 1;
      if (fVar2 != 0.00000000) break;
      fVar2 = pbVar1[2].zpos;
      pbVar1 = pbVar1 + 1;
    }
  }
  return param_1;
}



int proc_7F0B40D4(int param_1)

{
  bg_room_data *pbVar1;
  f32 fVar2;
  
  if (ptr_bgdata_room_fileposition_list[param_1].xpos == 0.00000000) {
    fVar2 = (ptr_bgdata_room_fileposition_list + param_1)[1].xpos;
    pbVar1 = ptr_bgdata_room_fileposition_list + param_1;
    while( true ) {
      param_1 += 1;
      if (fVar2 != 0.00000000) break;
      fVar2 = pbVar1[2].xpos;
      pbVar1 = pbVar1 + 1;
    }
  }
  return param_1;
}



void proc_7F0B4124(int param_1)

{
  char cVar1;
  byte bVar2;
  bg_room_data *pbVar3;
  LEVEL_INDEX LVar4;
  levelentry *plVar6;
  bg_data_header *target;
  int iVar7;
  int iVar8;
  ulonglong uVar5;
  bg_portal_entry *pbVar9;
  bg_portal_data_entry *pbVar10;
  char *pcVar11;
  undefined1 *puVar12;
  bg_room_data *pbVar13;
  u32 uVar14;
  int *piVar15;
  u32 *puVar16;
  int bytes;
  LEVEL_INDEX LVar17;
  int iVar18;
  bg_data_header abStack72 [4];
  
  levelentry_index = LEVEL_INDEX_SEVBUNKER;
  puVar16 = (u32 *)&roominformationblock;
  do {
    puVar16 = puVar16 + 0x14;
    puVar16[0xb] = 0;
    puVar16 = puVar16;
  } while (puVar16 < &max_num_rooms);
  plVar6 = levelinfostruct;
  LVar17 = LEVEL_INDEX_SEVBUNKER;
  do {
    LVar4 = LVar17;
    if (param_1 != plVar6->levelID) {
      LVar4 = levelentry_index;
    }
    levelentry_index = LVar4;
    LVar17 += LEVEL_INDEX_SILO;
    plVar6 = plVar6 + 1;
  } while ((int)LVar17 < 0x26);
  init_lightfixture_tables();
  ptr_bg_data = abStack72;
  load_bg_bytes_at_offset_to_membank
            ((byte *)levelinfostruct[levelentry_index].bg_seg_filename,(int)ptr_bg_data,0,0x40);
  DAT_8007ff84 = ptr_bg_data;
  bytes = (int)&ptr_bg_data->RESERVED + (int)&ptr_bg_data->pRoomDataTable->xpos;
  ptr_bgdata_room_fileposition_list = (bg_room_data *)(bytes + -0xf000000);
  bytes = ((*(uint *)(bytes + -0xeffffe8) & 0xffffff) - 1 | 0xf) + 1;
  target = (bg_data_header *)allocate_bytes_in_bank(bytes,4);
  ptr_bg_data = target;
  load_bg_bytes_at_offset_to_membank
            ((byte *)levelinfostruct[levelentry_index].bg_seg_filename,(int)target,0,bytes);
  _load_resource_named_to_membank((byte *)levelinfostruct[levelentry_index].bg_stan_filename,2,0,4);
  DAT_8007bf94 = target;
  load_stan((int)target,0,(int)target);
  proc_7F0AF5B8((int)DAT_8007bf94);
  proc_7F0B4810(levelinfostruct[levelentry_index].levelscale);
  proc_7F0B2950(levelinfostruct[levelentry_index].levelscale);
  proc_7F0915BC(levelinfostruct[levelentry_index].levelscale);
  removed_tooklevelscale(levelinfostruct[levelentry_index].levelscale);
  room_data_float3 = levelinfostruct[levelentry_index].visibility;
  proc_7F08976C((f32)room_data_float3);
  proc_7F058C4C(room_data_float3);
  DAT_8007bf98 = ptr_bg_data->RESERVED;
  DAT_8007ff88 = 1;
  if (DAT_8007bf98 == 0) {
    DAT_8007ff88 = 2;
    bytes = (int)&ptr_bg_data->RESERVED + (int)&ptr_bg_data->pRoomDataTable->xpos;
    ptr_bgdata_room_fileposition_list = (bg_room_data *)(bytes + -0xf000000);
    max_num_rooms = 0;
    if (*(int *)(bytes + -0xeffffe4) != 0) {
      max_num_rooms = 0;
      bytes = bytes + -0xeffffe8;
      do {
        max_num_rooms += 1;
        piVar15 = (int *)(bytes + 0x1c);
        bytes = bytes + 0x18;
      } while (*piVar15 != 0);
    }
    pbVar10 = (bg_portal_data_entry *)
              ((int)ptr_bg_data->pPortalDataTable + (int)ptr_bg_data + -0xf000000);
    if (ptr_bg_data->pGlobalVisCmds == NULL) {
      DAT_8007ff90 = NULL;
    }
    else {
      DAT_8007ff90 = (char *)((int)ptr_bg_data->pGlobalVisCmds + (int)ptr_bg_data + -0xf000000);
      if (ptr_bg_data[1].RESERVED == 0) {
        DAT_8007ff94 = 0;
      }
      else {
        DAT_8007ff94 = (int)&ptr_bg_data[-0xf00000].RESERVED + ptr_bg_data[1].RESERVED;
      }
    }
    pbVar9 = pbVar10->offset_portal;
    ptr_bgdata_portals = pbVar10;
    bytes = 0;
    DAT_8007ff84 = ptr_bg_data;
    while (pbVar9 != NULL) {
      pbVar10->offset_portal =
           (bg_portal_entry *)((int)&ptr_bg_data[-0xf00000].RESERVED + (int)pbVar9);
      pbVar10 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals[1].offset_portal + bytes);
      pbVar9 = pbVar10->offset_portal;
      bytes = bytes + 8;
    }
    if (DAT_8007ff90 != NULL) {
      cVar1 = *DAT_8007ff90;
      bytes = 0;
      pcVar11 = DAT_8007ff90;
      while (cVar1 != '\0') {
        if (cVar1 == 'd') {
          iVar18 = proc_7F0B5E88((int)&ptr_bg_data[-0xf00000].RESERVED + *(int *)(pcVar11 + 4));
          *(int *)(DAT_8007ff90 + bytes + 4) = iVar18;
          pcVar11 = DAT_8007ff90 + bytes;
          cVar1 = pcVar11[8];
        }
        else {
          cVar1 = pcVar11[8];
        }
        bytes += 8;
        pcVar11 = pcVar11 + 8;
      }
    }
    bytes = 1;
    if (1 < (int)max_num_rooms) {
      iVar18 = 0x18;
      puVar12 = &DAT_80041464;
      pbVar3 = ptr_bgdata_room_fileposition_list;
      do {
        pbVar13 = pbVar3 + 1;
        puVar12[2] = 0;
        puVar12[0x35] = 0;
        if (pbVar3[1].ypos == 0.00000000) {
          *(undefined4 *)(puVar12 + 0x14) = 0;
        }
        else {
          iVar8 = proc_7F0B4034(bytes + 1);
          iVar7 = proc_7F0B4084(bytes);
          if (iVar7 < iVar8) {
            pbVar13 = (bg_room_data *)((int)&ptr_bgdata_room_fileposition_list->xpos + iVar18);
            *(int *)(puVar12 + 0x14) =
                 (int)ptr_bgdata_room_fileposition_list[iVar7].zpos - (int)pbVar13->ypos;
          }
          else {
            pbVar13 = (bg_room_data *)((int)&ptr_bgdata_room_fileposition_list->xpos + iVar18);
            *(int *)(puVar12 + 0x14) =
                 (int)ptr_bgdata_room_fileposition_list[iVar8].ypos - (int)pbVar13->ypos;
          }
        }
        bytes += 1;
        if (pbVar13->zpos == 0.00000000) {
          *(undefined4 *)(puVar12 + 0x18) = 0;
        }
        else {
          iVar8 = proc_7F0B4034(bytes);
          iVar7 = proc_7F0B4084(bytes);
          if (iVar7 < iVar8) {
            pbVar13 = (bg_room_data *)((int)&ptr_bgdata_room_fileposition_list->xpos + iVar18);
            *(int *)(puVar12 + 0x18) =
                 (int)ptr_bgdata_room_fileposition_list[iVar7].zpos - (int)pbVar13->zpos;
          }
          else {
            pbVar13 = (bg_room_data *)((int)&ptr_bgdata_room_fileposition_list->xpos + iVar18);
            *(int *)(puVar12 + 0x18) =
                 (int)ptr_bgdata_room_fileposition_list[iVar8].ypos - (int)pbVar13->zpos;
          }
        }
        if (pbVar13->xpos == 0.00000000) {
          *(undefined4 *)(puVar12 + 0x10) = 0;
          uVar14 = max_num_rooms;
        }
        else {
          iVar8 = proc_7F0B40D4(bytes);
          uVar14 = max_num_rooms;
          pbVar13 = (bg_room_data *)((int)&ptr_bgdata_room_fileposition_list->xpos + iVar18);
          *(int *)(puVar12 + 0x10) =
               (int)ptr_bgdata_room_fileposition_list[iVar8].xpos - (int)pbVar13->xpos;
        }
        iVar18 += 0x18;
        *(undefined4 *)(puVar12 + 0x28) = 0xffffffff;
        puVar12 = puVar12 + 0x50;
        pbVar3 = pbVar13;
      } while (bytes < (int)uVar14);
    }
    bytes = 1;
    proc_7F0BC530();
    if (1 < (int)max_num_rooms) {
      do {
        proc_7F0B9338(bytes);
        bytes += 1;
      } while (bytes < (int)max_num_rooms);
    }
    puVar12 = &dword_800443C4;
    pbVar9 = ptr_bgdata_portals->offset_portal;
    iVar18 = 0;
    bytes = 0;
    pbVar10 = ptr_bgdata_portals;
    if (pbVar9 != NULL) {
      do {
        uVar5 = proc_7F0B993C(iVar18);
        pbVar10 = ptr_bgdata_portals;
        piVar15 = (int *)((int)&ptr_bgdata_portals[1].offset_portal + bytes);
        *puVar12 = (char)uVar5;
        iVar18 += 1;
        puVar12 = puVar12 + 1;
        bytes = bytes + 8;
      } while (*piVar15 != 0);
      pbVar9 = pbVar10->offset_portal;
    }
    iVar18 = 0;
    bytes = 0;
    while (pbVar9 != NULL) {
      proc_7F0B9B94(iVar18);
      iVar18 += 1;
      pbVar9 = *(bg_portal_entry **)((int)&ptr_bgdata_portals[1].offset_portal + bytes);
      bytes = bytes + 8;
      pbVar10 = ptr_bgdata_portals;
    }
    uVar5 = 0;
    if ((int)max_num_rooms < 1) {
      pbVar9 = pbVar10->offset_portal;
    }
    else {
      do {
        proc_7F0B95D8(uVar5);
        uVar5 = SEXT48((int)uVar5 + 1);
      } while ((longlong)uVar5 < (longlong)(int)max_num_rooms);
      pbVar9 = ptr_bgdata_portals->offset_portal;
      pbVar10 = ptr_bgdata_portals;
    }
    if (pbVar9 != NULL) {
      bVar2 = *(byte *)&pbVar10->controlbytes;
      bytes = 0;
      while( true ) {
        *(byte *)&pbVar10->controlbytes = bVar2 & 0xfe;
        pbVar10 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals[1].offset_portal + bytes);
        if (pbVar10->offset_portal == NULL) break;
        bVar2 = *(byte *)&pbVar10->controlbytes;
        bytes = bytes + 8;
      }
    }
    proc_7F0B37EC();
  }
  proc_7F0BAA5C(param_1);
  dword_800442F8 = 200;
  return;
}



void proc_7F0B47E0(void)

{
  unload_rooms();
  proc_7F058C4C(1.00000000);
  return;
}



void proc_7F0B4810(f32 param_1)

{
  room_data_float1 = (float)param_1;
  room_data_float2 = 1.00000000 / (float)param_1;
  return;
}



f32 proc_7F0B4830(void)

{
  return (f32)room_data_float2;
}



f32 proc_7F0B483C(void)

{
  return (f32)room_data_float1;
}



float proc_7F0B4848(void)

{
  return levelinfostruct[levelentry_index].unknownfloat /
         (float)levelinfostruct[levelentry_index].levelscale;
}



f32 proc_7F0B4878(void)

{
  return (f32)room_data_float3;
}



void proc_7F0B4884(void)

{
  u32 playercount;
  int iVar3;
  undefined4 uVar4;
  ulonglong uVar1;
  xyzpoint *pxVar5;
  float *pfVar6;
  longlong lVar2;
  bg_portal_data_entry *pbVar7;
  bg_portal_data_entry *pbVar8;
  int iVar9;
  int iVar10;
  char *pcVar11;
  int iVar12;
  bg_portal_entry *pbVar13;
  
  iVar12 = -1;
  num_visible_rooms_in_cur_global_vis_packet = 0;
  playercount = get_cur_playernum();
  iVar3 = proc_7F09B4D8(playercount);
  if (iVar3 == 0) {
    proc_7F0B66E8();
  }
  uVar4 = get_camera_mode();
  dword_800442F8 = 3;
  if (true) {
    switch(uVar4) {
    default:
      dword_800442F8 = 200;
    }
  }
  uVar1 = get_cur_players_room();
  current_room_maybe = (undefined4)uVar1;
  pxVar5 = get_BONDdata_position();
  pfVar6 = (float *)get_BONDdata_position3();
  iVar3 = 0;
  pbVar13 = ptr_bgdata_portals->offset_portal;
  pbVar7 = ptr_bgdata_portals;
  do {
    pcVar11 = &dword_800443C4;
    iVar9 = 0;
    pbVar8 = pbVar7;
    if (pbVar13 != NULL) {
      iVar10 = 0;
      pbVar8 = pbVar7;
      do {
        if (*pcVar11 == '\0') {
          if (iVar9 == iVar12) {
            pbVar13 = pbVar7[1].offset_portal;
          }
          else {
            if (((uVar1 == (ulonglong)pbVar7->connectedRoom1) ||
                (uVar1 == (ulonglong)pbVar7->connectedRoom2)) &&
               (lVar2 = proc_7F0B9F14(iVar9,(float *)pxVar5,pfVar6), lVar2 != 0)) {
              iVar10 = (int)&ptr_bgdata_portals->offset_portal + iVar10;
              uVar1 = (ulonglong)*(byte *)(iVar10 + 5) ^ uVar1 ^ (ulonglong)*(byte *)(iVar10 + 4);
              iVar12 = iVar9;
              pbVar8 = ptr_bgdata_portals;
              break;
            }
            pbVar7 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals->offset_portal + iVar10);
            pbVar13 = pbVar7[1].offset_portal;
            pbVar8 = ptr_bgdata_portals;
          }
        }
        else {
          pbVar13 = pbVar7[1].offset_portal;
        }
        iVar9 += 1;
        pcVar11 = pcVar11 + 1;
        iVar10 += 8;
        pbVar7 = pbVar7 + 1;
      } while (pbVar13 != NULL);
    }
    pbVar7 = pbVar8;
    iVar3 += 1;
    if ((pbVar7[iVar9].offset_portal == NULL) || (iVar3 == 0xb)) {
      current_room_maybe = (undefined4)uVar1;
      proc_7F0B8A6C();
      return;
    }
    pbVar13 = pbVar7->offset_portal;
  } while( true );
}



void proc_7F0B4A50(char *param_1,char param_2)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  
  iVar2 = 0;
  if (*param_1 != -1) {
    cVar1 = *param_1;
    pcVar3 = param_1;
    do {
      iVar2 += 1;
      if (param_2 == cVar1) {
        return;
      }
      pcVar3 = pcVar3 + 1;
    } while ((iVar2 < 0x10) && (cVar1 = *pcVar3, cVar1 != -1));
  }
  if (iVar2 < 0xf) {
    param_1[iVar2] = param_2;
    (param_1 + iVar2)[1] = -1;
  }
  return;
}



void proc_7F0B4AB4(float *param_1,float *param_2,byte *param_3,int param_4,uint *param_5,
                  int *param_6,int param_7)

{
  undefined8 uVar1;
  char cVar2;
  byte *pbVar3;
  bg_portal_data_entry *pbVar4;
  byte *pbVar5;
  byte *pbVar6;
  bg_portal_data_entry *pbVar7;
  byte bVar8;
  char *pcVar9;
  int iVar10;
  int *piVar11;
  undefined auStackX0 [12];
  int iStackX12;
  char acStack260 [200];
  int iStack60;
  int iStack52;
  byte abStack48 [8];
  byte abStack40 [8];
  byte bStack32;
  byte bStack31;
  byte abStack16 [8];
  byte abStack8 [8];
  
  iStackX12 = param_4;
  if (ptr_bgdata_portals->offset_portal != NULL) {
    pcVar9 = acStack260;
    iStack52 = 0;
    iVar10 = 0;
    iStackX12 = param_4;
    do {
      uVar1 = proc_7F0B9F14(iStack52,param_1,param_2);
      *pcVar9 = (char)uVar1;
      iStack52 += 1;
      piVar11 = (int *)((int)&ptr_bgdata_portals[1].offset_portal + iVar10);
      pcVar9 = pcVar9 + 1;
      iVar10 = iVar10 + 8;
    } while (*piVar11 != 0);
  }
  pbVar7 = ptr_bgdata_portals;
  pbVar5 = abStack16;
  pbVar6 = param_3;
  do {
    bVar8 = *pbVar6;
    pbVar3 = pbVar5 + 1;
    pbVar6 = pbVar6 + 1;
    *pbVar5 = bVar8;
    pbVar5 = pbVar3;
  } while (pbVar3 < abStack8);
  pbVar5 = abStack48;
  do {
    bVar8 = *param_3;
    pbVar6 = pbVar5 + 1;
    param_3 = param_3 + 1;
    *pbVar5 = bVar8;
    pbVar5 = pbVar6;
  } while (pbVar6 < abStack40);
  if (abStack16[0] != 0xff) {
    pbVar5 = abStack16;
    while ((abStack16[1] != 0xff && (pbVar5 + 1 != (byte *)register0x000000ec))) {
      abStack16[1] = pbVar5[2];
      pbVar5 = pbVar5 + 1;
    }
  }
  do {
    iStack60 = 0;
    bStack32 = 0xff;
    iStack52 = 0;
    iVar10 = 0;
    pbVar4 = pbVar7;
    if (pbVar7->offset_portal == NULL) {
      bStack32 = 0xff;
    }
    else {
      do {
        pcVar9 = acStack260 + iStack52;
        if (abStack16[0] != 0xff) {
          pbVar5 = abStack16;
          cVar2 = *pcVar9;
          while( true ) {
            if ((cVar2 == '\x01') && (pbVar4->connectedRoom1 == *pbVar5)) {
              proc_7F0B4A50((char *)&bStack32,pbVar4->connectedRoom2);
              proc_7F0B4A50((char *)abStack48,(&ptr_bgdata_portals->connectedRoom2)[iVar10]);
              pbVar7 = ptr_bgdata_portals;
              *pcVar9 = '\0';
              cVar2 = '\0';
              pbVar4 = (bg_portal_data_entry *)((int)&pbVar7->offset_portal + iVar10);
            }
            if (cVar2 == '\x02') {
              if (pbVar4->connectedRoom2 == *pbVar5) {
                proc_7F0B4A50((char *)&bStack32,pbVar4->connectedRoom1);
                proc_7F0B4A50((char *)abStack48,(&ptr_bgdata_portals->connectedRoom1)[iVar10]);
                pbVar7 = ptr_bgdata_portals;
                *pcVar9 = '\0';
                pbVar4 = (bg_portal_data_entry *)((int)&pbVar7->offset_portal + iVar10);
                bVar8 = pbVar5[1];
              }
              else {
                bVar8 = pbVar5[1];
              }
            }
            else {
              bVar8 = pbVar5[1];
            }
            pbVar5 = pbVar5 + 1;
            if ((bVar8 == 0xff) || (pbVar5 == (byte *)register0x000000ec)) break;
            cVar2 = *pcVar9;
          }
        }
        iVar10 += 8;
        pbVar4 = pbVar4 + 1;
        iStack52 += 1;
      } while (pbVar4->offset_portal != NULL);
    }
    pbVar6 = &bStack32;
    pbVar5 = abStack16;
    if (bStack32 == 0xff) break;
    do {
      bVar8 = *pbVar6;
      pbVar6 = pbVar6 + 1;
      *pbVar5 = bVar8;
      pbVar5 = pbVar5 + 1;
    } while (pbVar6 < abStack16);
    bVar8 = bStack31;
    pbVar5 = &bStack32;
    if (bStack32 != 0xff) {
      while( true ) {
        if ((bVar8 == 0xff) || (pbVar5 + 1 == abStack16)) break;
        bVar8 = pbVar5[2];
        pbVar5 = pbVar5 + 1;
      }
    }
    iStack60 = 0;
  } while (bStack32 != 0xff);
  if (abStack16[0] != 0xff) {
    pbVar5 = abStack16 + iStack60;
    pbVar6 = (byte *)(iStackX12 + iStack60);
    *pbVar6 = *pbVar5;
    while( true ) {
      pbVar5 = pbVar5 + 1;
      pbVar6 = pbVar6 + 1;
      iStack60 += 1;
      if ((6 < iStack60) || (*pbVar5 == 0xff)) break;
      *pbVar6 = *pbVar5;
    }
  }
  *(undefined *)(iStackX12 + iStack60) = 0xff;
  iStack60 = 0;
  if (0 < param_7) {
    pbVar5 = abStack48;
    if (abStack48[0] == 0xff) {
      iStack60 = 0;
    }
    else {
      *param_5 = (uint)abStack48[0];
      while( true ) {
        pbVar5 = pbVar5 + 1;
        param_5 = param_5 + 1;
        iStack60 += 1;
        if ((param_7 <= iStack60) || (*pbVar5 == 0xff)) break;
        *param_5 = (uint)*pbVar5;
      }
    }
  }
  *param_6 = iStack60;
  return;
}



undefined4 * proc_7F0B4E40(undefined4 *param_1)

{
  undefined4 uVar1;
  int iVar2;
  uint *puVar3;
  undefined4 *puVar4;
  
  *param_1 = 0xbc000002;
  param_1[1] = 0x80000040;
  param_1[2] = 0x3860010;
  param_1[3] = 0x80044848;
  param_1[4] = 0x3880010;
  param_1[5] = 0x80044840;
  param_1[6] = 0x3840010;
  uVar1 = proc_7F078474();
  param_1[7] = uVar1;
  param_1[8] = 0x3820010;
  iVar2 = proc_7F078474();
  param_1[9] = iVar2 + 0x10;
  param_1[10] = 0xbc003c06;
  *(bg_data_header **)(param_1 + 0xb) = ptr_bg_data;
  if (DAT_8007ff88 == 1) {
    param_1[0xc] = 0x6000000;
    puVar4 = param_1 + 0xe;
    param_1[0xd] = DAT_8007bf98;
  }
  else {
    puVar4 = proc_7F0BB070(param_1 + 0xc,0);
    puVar3 = proc_7F0B8D78((longlong)(int)puVar4);
    puVar3 = proc_7F0B4FB4(puVar3);
    puVar4 = proc_7F0BB298(puVar3);
  }
  *puVar4 = 0x1030040;
  puVar4[1] = DAT_80060820;
  puVar4 = proc_7F08BCF4(puVar4 + 2);
  return puVar4;
}



undefined4 proc_7F0B4F9C(int param_1)

{
  undefined4 in_v0_lo;
  
  return in_v0_lo;
}



uint * proc_7F0B4FB4(uint *param_1)

{
  uint *puVar1;
  
  puVar1 = proc_7F0B5058(param_1,(longlong)ptr_BONDdata->playerscreenulx,
                         (longlong)ptr_BONDdata->playerscreenuly,
                         (int)ptr_BONDdata->playerscreenulx + (int)ptr_BONDdata->playerscreenwidth,
                         (int)ptr_BONDdata->playerscreenuly + (int)ptr_BONDdata->playerscreenheight)
  ;
  return puVar1;
}



uint * proc_7F0B4FF4(uint *param_1,float param_2,float param_3,float param_4,float param_5)

{
  int iVar1;
  int iVar2;
  uint *puVar3;
  float in_a3_lo;
  float in_stack_00000010;
  
  iVar1 = proc_7F05C4B8(in_a3_lo);
  iVar2 = proc_7F05C4B8(in_stack_00000010);
  puVar3 = proc_7F0B5058(param_1,(longlong)(int)param_4,(longlong)(int)param_5,iVar1,iVar2);
  return puVar3;
}



uint * proc_7F0B5058(uint *param_1,longlong param_2,longlong param_3,int param_4,int param_5)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int local_resc;
  
  iVar3 = (int)param_2;
  sVar1 = ptr_BONDdata->playerscreenulx;
  if (param_2 < (longlong)sVar1) {
    iVar3 = (int)sVar1;
    sVar2 = ptr_BONDdata->playerscreenuly;
  }
  else {
    sVar2 = ptr_BONDdata->playerscreenuly;
  }
  iVar4 = (int)param_3;
  if (param_3 < (longlong)sVar2) {
    iVar4 = (int)sVar2;
  }
  iVar5 = (int)sVar1 + (int)ptr_BONDdata->playerscreenwidth;
  local_resc = param_4;
  if (iVar5 < param_4) {
    local_resc = iVar5;
  }
  iVar5 = (int)sVar2 + (int)ptr_BONDdata->playerscreenheight;
  if (param_5 <= iVar5) {
    iVar5 = param_5;
  }
  *param_1 = ((int)((float)iVar3 * 4.00000000) & 0xfffU) << 0xc | 0xed000000 |
             (int)((float)iVar4 * 4.00000000) & 0xfffU;
  param_1[1] = ((int)((float)local_resc * 4.00000000) & 0xfffU) << 0xc |
               (int)((float)iVar5 * 4.00000000) & 0xfffU;
  return param_1 + 2;
}



void proc_7F0B5168(void)

{
  undefined4 *puVar1;
  
  puVar1 = &DAT_80081618;
  do {
    puVar1 = puVar1 + 0x14;
    puVar1[5] = 0xffffffff;
    puVar1[10] = 0xffffffff;
    puVar1[0xf] = 0xffffffff;
    *puVar1 = 0xffffffff;
    puVar1 = puVar1;
  } while (puVar1 != (undefined4 *)0x800825b8);
  return;
}



undefined8 proc_7F0B519C(float *param_1,float *param_2)

{
  if ((((*param_2 <= *param_1) && (*param_1 <= param_2[2])) && (param_2[1] <= param_1[1])) &&
     (param_1[1] <= param_2[3])) {
    return 1;
  }
  return 0;
}



undefined8 proc_7F0B5208(int param_1,float *param_2)

{
  ulonglong uVar1;
  undefined8 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  float fVar10;
  undefined4 uStack60;
  float fStack56;
  float fStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  uint uStack4;
  
  iVar3 = 0;
  iVar8 = 0;
  iVar4 = 0;
  iVar5 = 0;
  iVar6 = 0;
  iVar7 = 0;
  video_related_27(&uStack60);
  fStack56 = fStack56 / room_data_float3;
  param_1 *= 0x50;
  uStack4 = 0;
  uVar9 = 0;
  do {
    if (uVar9 == 0) {
      fStack28 = *(float *)(&DAT_80041458 + param_1);
    }
    else {
      fStack28 = *(float *)(&DAT_8004144c + param_1);
    }
    if ((uStack4 & 2) == 0) {
      uStack24 = *(undefined4 *)(&DAT_8004145c + param_1);
    }
    else {
      uStack24 = *(undefined4 *)(&DAT_80041450 + param_1);
    }
    if ((uStack4 & 4) == 0) {
      uStack20 = *(undefined4 *)(&DAT_80041460 + param_1);
    }
    else {
      uStack20 = *(undefined4 *)(&DAT_80041454 + param_1);
    }
    uVar1 = proc_7F0B5488(&fStack28,&fStack16);
    if (uVar1 == 0) {
      if (fStack56 <= -fStack8) {
        iVar3 += 1;
        fVar10 = *param_2;
      }
      else {
        fVar10 = *param_2;
      }
      if (fVar10 <= fStack16) {
        iVar4 += 1;
        fVar10 = param_2[2];
      }
      else {
        fVar10 = param_2[2];
      }
      if (fStack16 <= fVar10) {
        iVar5 += 1;
        fVar10 = param_2[1];
      }
      else {
        fVar10 = param_2[1];
      }
      if (fVar10 <= fStack12) {
        iVar6 += 1;
        fVar10 = param_2[3];
      }
      else {
        fVar10 = param_2[3];
      }
      if (fStack12 <= fVar10) {
        iVar7 += 1;
      }
      iVar8 += 1;
    }
    else {
      if (fStack56 <= -fStack8) {
        iVar3 += 1;
        fVar10 = *param_2;
      }
      else {
        fVar10 = *param_2;
      }
      if (fStack16 <= fVar10) {
        iVar4 += 1;
LAB_7f0b53ec:
        fVar10 = param_2[1];
      }
      else {
        if (param_2[2] <= fStack16) {
          iVar5 += 1;
          goto LAB_7f0b53ec;
        }
        fVar10 = param_2[1];
      }
      if (fStack12 <= fVar10) {
        iVar6 += 1;
      }
      else {
        if (param_2[3] <= fStack12) {
          iVar7 += 1;
        }
      }
    }
    uStack4 += 1;
    if (uStack4 == 8) {
      if ((((iVar8 == 8) || (iVar3 == 8)) || (iVar4 == 8)) ||
         (((iVar5 == 8 || (iVar6 == 8)) || (uVar2 = 1, iVar7 == 8)))) {
        uVar2 = 0;
      }
      return uVar2;
    }
    uVar9 = uStack4 & 1;
  } while( true );
}



ulonglong proc_7F0B5488(float *param_1,float *param_2)

{
  float *pfVar1;
  
  pfVar1 = (float *)proc_7F0783C4();
  *param_2 = *param_1 * room_data_float2;
  param_2[1] = param_1[1] * room_data_float2;
  param_2[2] = param_1[2] * room_data_float2;
  proc_7F058474(pfVar1,param_2);
  proc_7F078060(param_2,param_2);
  return (ulonglong)(param_2[2] <= 0.00000000);
}



ulonglong proc_7F0B5528(int param_1,float param_2,float *param_3)

{
  bool bVar1;
  float *pfVar2;
  float *pfVar3;
  ulonglong uVar4;
  ulonglong uVar5;
  int iVar6;
  float *in_a2_lo;
  float *pfVar7;
  longlong lVar8;
  bg_portal_entry *pbVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fStack48;
  float fStack44;
  float fStack40;
  undefined4 uStack24;
  float fStack20;
  float *pfStack4;
  
  pfStack4 = (float *)proc_7F0783C4();
  bVar1 = true;
  video_related_27(&uStack24);
  fVar12 = flt_80058C7C;
  fStack20 = fStack20 / room_data_float3;
  lVar8 = 0;
  pbVar9 = ptr_bgdata_portals[param_1].offset_portal;
  uVar4 = (ulonglong)pbVar9->numPoints;
  if (pbVar9->numPoints != 0) {
    iVar6 = 0;
    pfVar7 = in_a2_lo;
    while( true ) {
      *pfVar7 = (pbVar9->point).x;
      pfVar7[1] = *(float *)((int)&((ptr_bgdata_portals[param_1].offset_portal)->point).y + iVar6);
      pfVar7[2] = *(float *)((int)&((ptr_bgdata_portals[param_1].offset_portal)->point).z + iVar6);
      if ((float)param_3 != 0.00000000) {
        proc_7F0B96CC(param_1,&fStack48);
        *pfVar7 = *pfVar7 + fStack48 * (float)param_3;
        pfVar7[1] = pfVar7[1] + fStack44 * (float)param_3;
        pfVar7[2] = pfVar7[2] + fStack40 * (float)param_3;
      }
      *pfVar7 = *pfVar7 * room_data_float2;
      pfVar7[1] = pfVar7[1] * room_data_float2;
      pfVar7[2] = pfVar7[2] * room_data_float2;
      proc_7F058474(pfStack4,pfVar7);
      if (-fStack20 * fVar12 < pfVar7[2]) {
        bVar1 = false;
      }
      lVar8 = (longlong)((int)lVar8 + 1);
      pfVar7 = pfVar7 + 3;
      uVar4 = (ulonglong)(ptr_bgdata_portals[param_1].offset_portal)->numPoints;
      if ((longlong)uVar4 <= lVar8) break;
      pbVar9 = (bg_portal_entry *)
               ((int)&((ptr_bgdata_portals[param_1].offset_portal)->point).z + iVar6);
      iVar6 = iVar6 + 0xc;
    }
  }
  if (bVar1) {
    uVar4 = 0;
  }
  else {
    lVar8 = 0;
    uVar5 = uVar4;
    pfVar7 = in_a2_lo;
    if (uVar4 != 0) {
      do {
        iVar6 = (int)lVar8 + 1;
        lVar8 = (longlong)iVar6;
        iVar6 %= (int)uVar5;
        fVar12 = pfVar7[2];
        if (uVar5 == 0) {
          trap(0x1c00);
        }
        if ((uVar5 == 0xffffffffffffffff) && (lVar8 == -0x80000000)) {
          trap(0x1800);
        }
        if (0.00000000 < fVar12) {
          pfVar2 = in_a2_lo + iVar6 * 3;
          fVar11 = pfVar2[2];
          if (0.00000000 < fVar11) goto code_r0x7f0b5788;
LAB_7f0b57b4:
          iVar6 = (int)uVar4;
          fVar10 = -fVar12 / (fVar11 - fVar12);
          uVar4 = SEXT48(iVar6 + 1);
          pfVar3 = in_a2_lo + iVar6 * 3;
          *pfVar3 = (*pfVar2 - *pfVar7) * fVar10 + *pfVar7;
          fVar11 = pfVar2[1];
          fVar12 = pfVar7[1];
          pfVar3[2] = 0.00000000;
          pfVar3[1] = (fVar11 - fVar12) * fVar10 + fVar12;
          uVar5 = (ulonglong)(ptr_bgdata_portals[param_1].offset_portal)->numPoints;
          bVar1 = lVar8 < (longlong)uVar5;
        }
        else {
code_r0x7f0b5788:
          if (fVar12 <= 0.00000000) {
            pfVar2 = in_a2_lo + iVar6 * 3;
            fVar11 = pfVar2[2];
            if (0.00000000 < fVar11) goto LAB_7f0b57b4;
            bVar1 = lVar8 < (longlong)uVar5;
          }
          else {
            bVar1 = lVar8 < (longlong)uVar5;
          }
        }
        pfVar7 = pfVar7 + 3;
      } while (bVar1);
    }
  }
  return uVar4;
}



int proc_7F0B5864(void)

{
  int iVar1;
  float fVar2;
  ulonglong uVar3;
  int iVar4;
  int in_a0_lo;
  float *in_a1_lo;
  float *pfVar5;
  ulonglong uVar6;
  int *piVar7;
  float fVar8;
  float extraout_f12;
  float extraout_f12_00;
  float fVar9;
  float fStack264;
  float fStack260;
  float fStack256;
  float fStack252;
  float fStack248;
  float fStack244;
  float afStack240 [60];
  
  iVar1 = in_a0_lo * 0x14;
  piVar7 = &DAT_80081618 + in_a0_lo * 5;
  if (*piVar7 < 0) {
    pfVar5 = (float *)proc_7F0B9990(in_a0_lo);
    uVar3 = proc_7F0B5528(in_a0_lo,extraout_f12,pfVar5);
    if (0.00000000 < (float)pfVar5) {
      uVar6 = proc_7F0B5528(in_a0_lo,extraout_f12_00,(float *)-(float)pfVar5);
      uVar3 = SEXT48((int)uVar3 + (int)uVar6);
    }
    iVar4 = 0;
    uVar6 = 0;
    if (0 < (longlong)uVar3) {
      pfVar5 = afStack240;
      do {
        if (pfVar5[2] <= 0.00000000) {
          proc_7F078060(pfVar5,&fStack248);
          fVar8 = fStack244;
          fVar9 = fStack248;
          fVar2 = fStack248;
          if (iVar4 == 0) {
LAB_7f0b59f4:
            fStack264 = fVar2;
            fStack252 = fStack244;
          }
          else {
            fVar8 = fStack248;
            if (fStack264 <= fStack248) {
              fVar8 = fStack264;
            }
            fStack264 = fVar8;
            fVar9 = fStack248;
            if (fStack248 <= fStack256) {
              fVar9 = fStack256;
            }
            fVar8 = fStack244;
            if (fStack260 <= fStack244) {
              fVar8 = fStack260;
            }
            fVar2 = fStack264;
            if (fStack252 < fStack244) goto LAB_7f0b59f4;
          }
          iVar4 += 1;
          fStack260 = fVar8;
          fStack256 = fVar9;
        }
        uVar6 = SEXT48((int)uVar6 + 1);
        pfVar5 = pfVar5 + 3;
      } while (uVar6 != uVar3);
    }
    if (iVar4 == 0) {
      fStack252 = 0.00000000;
      fStack260 = 0.00000000;
      fStack256 = 0.00000000;
      fStack264 = 0.00000000;
    }
    else {
      if ((fStack256 <= fStack264) || (fStack252 <= fStack260)) {
        fStack264 = ptr_BONDdata->field_1118;
        fStack260 = ptr_BONDdata->field_111C;
        fStack256 = ptr_BONDdata->field_1120;
        fStack252 = ptr_BONDdata->field_1124;
      }
    }
    *in_a1_lo = fStack264;
    in_a1_lo[1] = fStack260;
    in_a1_lo[2] = fStack256;
    in_a1_lo[3] = fStack252;
    *(float *)(&DAT_8008161c + iVar1) = *in_a1_lo;
    *(float *)(&DAT_80081620 + iVar1) = in_a1_lo[1];
    *(float *)(&DAT_80081624 + iVar1) = in_a1_lo[2];
    fVar8 = in_a1_lo[3];
    *piVar7 = iVar4;
    *(float *)(&DAT_80081628 + iVar1) = fVar8;
  }
  else {
    *in_a1_lo = *(float *)(&DAT_8008161c + iVar1);
    in_a1_lo[1] = *(float *)(&DAT_80081620 + iVar1);
    in_a1_lo[2] = *(float *)(&DAT_80081624 + iVar1);
    in_a1_lo[3] = *(float *)(&DAT_80081628 + iVar1);
    iVar4 = *piVar7;
  }
  return iVar4;
}



uint * proc_7F0B5B14(uint *param_1,undefined8 param_2,undefined8 param_3,int param_4,int param_5)

{
  param_1[1] = ((uint)param_2 & 0x3ff) << 0xe | ((uint)param_3 & 0x3ff) << 2;
  *param_1 = (param_4 + 1U & 0x3ff) << 0xe | 0xf6000000 | (param_5 + 1U & 0x3ff) << 2;
  return param_1 + 2;
}



uint * proc_7F0B5B60(uint *param_1,undefined8 param_2,undefined8 param_3,int param_4,int param_5)

{
  uint *puVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = (int)param_2;
  iVar3 = (int)param_3;
  puVar1 = proc_7F0B5B14(param_1,param_2,param_3,param_4,iVar3);
  puVar1 = proc_7F0B5B14(puVar1,(longlong)param_4,(longlong)iVar3,param_4,param_5);
  puVar1 = proc_7F0B5B14(puVar1,(longlong)iVar2,(longlong)param_5,param_4,param_5);
  puVar1 = proc_7F0B5B14(puVar1,(longlong)iVar2,(longlong)iVar3,iVar2,param_5);
  return puVar1;
}



undefined8 vis_is_inline_of_sight(float *param_1,float *param_2)

{
  if (*param_2 < *param_1) {
    *param_1 = *param_1;
  }
  else {
    *param_1 = *param_2;
  }
  if (param_2[1] < param_1[1]) {
    param_1[1] = param_1[1];
  }
  else {
    param_1[1] = param_2[1];
  }
  if (param_1[2] < param_2[2]) {
    param_1[2] = param_1[2];
  }
  else {
    param_1[2] = param_2[2];
  }
  if (param_1[3] < param_2[3]) {
    param_1[3] = param_1[3];
  }
  else {
    param_1[3] = param_2[3];
  }
  if (*param_1 < param_1[2]) {
    if (param_1[1] < param_1[3]) {
      return 1;
    }
    param_1[1] = param_1[3];
    return 0;
  }
  *param_1 = param_1[2];
  return 0;
}



void proc_7F0B5CC0(float *param_1,float *param_2)

{
  if (*param_1 < *param_2) {
    *param_1 = *param_1;
  }
  else {
    *param_1 = *param_2;
  }
  if (param_1[1] < param_2[1]) {
    param_1[1] = param_1[1];
  }
  else {
    param_1[1] = param_2[1];
  }
  if (param_2[2] < param_1[2]) {
    param_1[2] = param_1[2];
  }
  else {
    param_1[2] = param_2[2];
  }
  if (param_1[3] <= param_2[3]) {
    param_1[3] = param_2[3];
    return;
  }
  param_1[3] = param_1[3];
  return;
}



void proc_7F0B5D58(undefined4 *param_1,undefined4 *param_2)

{
  *param_1 = *param_2;
  param_1[1] = param_2[1];
  param_1[2] = param_2[2];
  param_1[3] = param_2[3];
  return;
}



char * proc_7F0B5D7C(undefined8 param_1)

{
  char *__s;
  
  DAT_80044860 = (DAT_80044860 + 1) % 10;
  __s = (char *)(DAT_80044860 * 9 + -0x7ff83fc0);
  sprintf(__s,aPortD,param_1);
  return __s;
}



char * proc_7F0B5DE0(undefined8 param_1)

{
  char *__s;
  
  DAT_80044864 = (DAT_80044864 + 1) % 10;
  __s = (char *)(DAT_80044864 * 9 + -0x7ff83f60);
  sprintf(__s,aRoomD,param_1);
  return __s;
}



u32 proc_7F0B5E44(void)

{
  return max_num_rooms;
}



ulonglong proc_7F0B5E50(int param_1)

{
  return (ulonglong)(byte)(&roominformationblock)[param_1 * 0x50];
}



ulonglong proc_7F0B5E6C(int param_1)

{
  return (ulonglong)(byte)(&DAT_80041415)[param_1 * 0x50];
}



int proc_7F0B5E88(int param_1)

{
  int iVar1;
  bg_portal_data_entry *pbVar2;
  bg_portal_entry *pbVar3;
  
  iVar1 = 0;
  if (ptr_bgdata_portals->offset_portal != NULL) {
    pbVar3 = ptr_bgdata_portals->offset_portal;
    pbVar2 = ptr_bgdata_portals;
    do {
      if ((bg_portal_entry *)param_1 == pbVar3) {
        return iVar1;
      }
      pbVar3 = pbVar2[1].offset_portal;
      iVar1 += 1;
      pbVar2 = pbVar2 + 1;
    } while (pbVar3 != NULL);
  }
  return 0;
}



void generate_room_load_string(void)

{
  char *pcVar1;
  u32 uVar2;
  int iVar3;
  char *pcVar4;
  undefined1 *puVar5;
  char acStack152 [152];
  
  iVar3 = get_debug_prroomloads_flag();
  uVar2 = max_num_rooms;
  if (iVar3 != 0) {
    puVar5 = &DAT_80041464;
    iVar3 = 1;
    if (1 < (int)max_num_rooms) {
      pcVar4 = acStack152;
      do {
        pcVar4 = pcVar4 + 1;
        pcVar1 = puVar5 + 2;
        puVar5 = puVar5 + 0x50;
        if (*pcVar1 == '\0') {
          *pcVar4 = '.';
        }
        else {
          if (false) {
            trap(0x1c00);
          }
          if ((false) && (iVar3 == -0x80000000)) {
            trap(0x1800);
          }
          *pcVar4 = (char)(iVar3 % 10) + '0';
        }
        iVar3 += 1;
      } while (iVar3 < (int)uVar2);
    }
    acStack152[iVar3] = '\0';
  }
  return;
}



undefined4 decompressdata_with_8448buffer(int source,void *target)

{
  undefined4 uVar1;
  undefined buffer [8448];
  
  uVar1 = decompressdata((void *)source,target,buffer);
  return uVar1;
}



undefined4 proc_7F0B5FAC(int param_1,int param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  int target;
  uint size;
  
  iVar1 = param_1 * 0x50;
  size = *(int *)(&room_information + iVar1) + 0xfU & 0xfffffff0;
  if (param_3 < (int)(size + 0x20)) {
    uVar2 = 0xffffffff;
  }
  else {
    target = (param_3 - size) + param_2;
    load_bg_bytes_at_offset_to_membank
              ((byte *)levelinfostruct[levelentry_index].bg_seg_filename,target,
               (int)ptr_bgdata_room_fileposition_list[param_1].xpos + -0xf000000,size);
    uVar2 = decompressdata_with_8448buffer(target,param_2);
    *(undefined4 *)(&DAT_80041430 + iVar1) = uVar2;
    *(int *)(&dword_80041418 + iVar1) = param_2;
  }
  return uVar2;
}



uint * proc_7F0B609C(int param_1,uint *param_2,int param_3)

{
  int iVar1;
  uint *puVar2;
  int target;
  uint *puVar3;
  uint size;
  
  iVar1 = param_1 * 0x50;
  size = *(int *)(&DAT_80041428 + iVar1) + 0xfU & 0xfffffff0;
  if (param_3 < (int)(size + 0x20)) {
    puVar3 = (uint *)0xffffffff;
  }
  else {
    target = (param_3 - size) + (int)param_2;
    load_bg_bytes_at_offset_to_membank
              ((byte *)levelinfostruct[levelentry_index].bg_seg_filename,target,
               (int)ptr_bgdata_room_fileposition_list[param_1].ypos + -0xf000000,size);
    puVar3 = (uint *)decompressdata_with_8448buffer(target,param_2);
    puVar2 = (uint *)((param_3 - (int)puVar3) + (int)param_2);
    proc_7F0CE794((int)param_2,(int)puVar2,(int)puVar3);
    proc_7F0BC4C4((short)param_1);
    puVar2 = process_microcode_sort_display_modes_expand_image_calls
                       (puVar2,(int)puVar3,param_2,NULL);
    if ((int)puVar3 < (int)puVar2) {
      puVar3 = puVar2;
    }
    *(uint **)(&DAT_8004141c + iVar1) = param_2;
    *(uint **)(iVar1 + -0x7ffbebcc) = puVar3;
  }
  return puVar3;
}



uint * proc_7F0B61DC(int param_1,uint *source,int param_3)

{
  int iVar1;
  uint *puVar2;
  int target;
  uint *puVar3;
  uint size;
  
  iVar1 = param_1 * 0x50;
  size = *(int *)(&DAT_8004142c + iVar1) + 0xfU & 0xfffffff0;
  if (param_3 < (int)(size + 0x20)) {
    puVar3 = (uint *)0xffffffff;
  }
  else {
    target = (param_3 - size) + (int)source;
    load_bg_bytes_at_offset_to_membank
              ((byte *)levelinfostruct[levelentry_index].bg_seg_filename,target,
               (int)ptr_bgdata_room_fileposition_list[param_1].zpos + -0xf000000,size);
    puVar3 = (uint *)decompressdata_with_8448buffer(target,source);
    puVar2 = (uint *)((param_3 - (int)puVar3) + (int)source);
    proc_7F0CE794((int)source,(int)puVar2,(int)puVar3);
    puVar2 = process_microcode_sort_display_modes_expand_image_calls(puVar2,(int)puVar3,source,NULL)
    ;
    if ((int)puVar3 < (int)puVar2) {
      puVar3 = puVar2;
    }
    *(uint **)(&DAT_80041420 + iVar1) = source;
    *(uint **)(iVar1 + -0x7ffbebc8) = puVar3;
  }
  return puVar3;
}



ulonglong proc_7F0B6314(int param_1)

{
  char cVar1;
  
  cVar1 = (&DAT_80041416)[param_1 * 0x50];
  (&DAT_80041449)[param_1 * 0x50] = 1;
  if (cVar1 == '\0') {
    proc_7F0B6368(param_1);
  }
  return (ulonglong)(cVar1 == '\0');
}



void proc_7F0B6368(int param_1)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint *puVar5;
  int iVar6;
  ulonglong uVar7;
  uint local_4;
  
  if ((param_1 < (int)max_num_rooms) && (iVar2 = param_1 * 0x50, (&DAT_80041416)[iVar2] == '\0')) {
    local_4 = *(uint *)(&DAT_8004143c + iVar2);
    if ((int)local_4 < 1) {
      local_4 = mem_related_0();
    }
    else {
      iVar6 = get_debug_joy2detailedit_flag();
      if (iVar6 != 0) {
        local_4 += 0x400;
      }
    }
    iVar3 = mem_related_something_find_first(local_4);
    iVar6 = 0;
    if (iVar3 != 0) {
      if (*(int *)(&room_information + iVar2) == 0) {
        *(undefined4 *)(&dword_80041418 + iVar2) = 0;
        *(undefined4 *)(&DAT_80041430 + iVar2) = 0;
      }
      else {
        iVar4 = proc_7F0B5FAC(param_1,iVar3,local_4);
        iVar6 = 0;
        if (-1 < iVar4) {
          proc_7F0BB978((longlong)param_1);
          iVar6 = iVar4;
        }
      }
      if ((*(int *)(&DAT_80041428 + iVar2) != 0) &&
         (puVar5 = proc_7F0B609C(param_1,(uint *)(iVar3 + iVar6),local_4 - iVar6), -1 < (int)puVar5)
         ) {
        iVar6 += (int)puVar5;
      }
      if (*(int *)(&DAT_8004142c + iVar2) == 0) {
        *(undefined4 *)(&DAT_80041420 + iVar2) = 0;
      }
      else {
        puVar5 = proc_7F0B61DC(param_1,(uint *)(iVar3 + iVar6),local_4 - iVar6);
        if (0 < (int)puVar5) {
          iVar6 += (int)puVar5;
        }
      }
      uVar7 = (longlong)(iVar6 + 0x20) & 0xfffffffffffffff0;
      *(int *)(&DAT_8004143c + iVar2) = (int)uVar7;
      (&DAT_80041416)[iVar2] = 1;
      if ((longlong)(int)local_4 != uVar7) {
        mem_related_1(iVar3,(longlong)(int)local_4,uVar7);
      }
      if (sky_enabled == 0) {
        proc_7F0BA640(*(int **)(&DAT_8004141c + iVar2),
                      (int *)(*(int *)(iVar2 + -0x7ffbebcc) + (int)*(int **)(&DAT_8004141c + iVar2))
                      ,6);
        piVar1 = *(int **)(&DAT_80041420 + iVar2);
        if (piVar1 != NULL) {
          proc_7F0BA640(piVar1,(int *)(*(int *)(iVar2 + -0x7ffbebc8) + (int)piVar1),7);
        }
      }
      else {
        proc_7F0BA640(*(int **)(&DAT_8004141c + iVar2),
                      (int *)(*(int *)(iVar2 + -0x7ffbebcc) + (int)*(int **)(&DAT_8004141c + iVar2))
                      ,1);
        piVar1 = *(int **)(&DAT_80041420 + iVar2);
        if (piVar1 != NULL) {
          proc_7F0BA640(piVar1,(int *)(*(int *)(iVar2 + -0x7ffbebc8) + (int)piVar1),5);
        }
      }
      proc_7F0B6994(param_1);
      generate_room_load_string();
    }
  }
  return;
}



void proc_7F0B65C4(int room)

{
  uint uVar1;
  int iVar2;
  
  iVar2 = room * 0x50;
  if ((&DAT_80041440)[room * 0x14] == 0) {
    uVar1 = *(uint *)(&DAT_8004143c + iVar2);
  }
  else {
    mem_related_model_room_buffers_0
              ((&DAT_80041440)[room * 0x14],
               (int)*(short *)(&DAT_80041444 + iVar2) * 0x1c + 0xfU & 0xfffffff0);
    (&DAT_80041440)[room * 0x14] = 0;
    uVar1 = *(uint *)(&DAT_8004143c + iVar2);
  }
  if (0 < (int)uVar1) {
    if (*(uint *)(&dword_80041418 + iVar2) == 0) {
      mem_related_model_room_buffers_0(*(uint *)(&DAT_8004141c + iVar2),uVar1);
      *(undefined4 *)(&dword_80041418 + iVar2) = 0;
    }
    else {
      mem_related_model_room_buffers_0(*(uint *)(&dword_80041418 + iVar2),uVar1);
      *(undefined4 *)(&dword_80041418 + iVar2) = 0;
    }
    *(undefined4 *)(&DAT_8004141c + iVar2) = 0;
    *(undefined4 *)(&DAT_80041420 + iVar2) = 0;
  }
  (&DAT_80041416)[iVar2] = 0;
  generate_room_load_string();
  return;
}



void unload_rooms(void)

{
  u32 uVar1;
  undefined1 *puVar2;
  int room;
  
  room = 1;
  if (1 < (int)max_num_rooms) {
    puVar2 = &DAT_80041464;
    uVar1 = max_num_rooms;
    do {
      if (puVar2[2] != '\0') {
        proc_7F0B65C4(room);
        uVar1 = max_num_rooms;
      }
      room += 1;
      puVar2 = puVar2 + 0x50;
    } while (room < (int)uVar1);
  }
  return;
}



void proc_7F0B66E8(void)

{
  char cVar1;
  u32 maxrooms;
  undefined1 *puVar2;
  int room;
  
  room = 1;
  if (1 < (int)max_num_rooms) {
    puVar2 = &DAT_80041464;
    maxrooms = max_num_rooms;
    do {
      if (puVar2[0x35] == '\0') {
        cVar1 = puVar2[2];
        if (cVar1 == '\x04') {
          proc_7F0B65C4(room);
          maxrooms = max_num_rooms;
        }
        else {
          if (cVar1 != '\0') {
            puVar2[2] = cVar1 + '\x01';
          }
        }
      }
      room += 1;
      puVar2 = puVar2 + 0x50;
    } while (room < (int)maxrooms);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0b67cc) overlaps instruction at (ram,0x7f0b67c8)
// 

undefined4 * proc_7F0B677C(undefined4 *param_1,int param_2)

{
  int iVar1;
  char cVar3;
  undefined4 *puVar2;
  
  if ((param_2 < (int)max_num_rooms) && ((dword_8004485C != 0 || (DAT_80044858 == param_2 % 10)))) {
    iVar1 = param_2 * 0x50;
    cVar3 = (&DAT_80041416)[iVar1];
    if ((cVar3 == '\0') && (0 < dword_800442F8)) {
      dword_800442F8 = dword_800442F8 + -1;
      proc_7F0B6368(param_2);
      cVar3 = (&DAT_80041416)[iVar1];
    }
    if (cVar3 != '\0') {
      puVar2 = proc_7F0BC9C4(param_1,param_2);
      *puVar2 = 0xbc003806;
      puVar2[1] = *(int *)(&dword_80041418 + iVar1) + -0x80000000;
      puVar2[2] = 0x6000000;
      param_1 = puVar2 + 4;
      puVar2[3] = *(int *)(&DAT_8004141c + iVar1) + -0x80000000;
      (&DAT_80041416)[iVar1] = 1;
    }
  }
  return param_1;
}



undefined4 * proc_7F0B6898(undefined4 *param_1,int param_2)

{
  char cVar1;
  int iVar2;
  undefined4 *puVar3;
  
  if ((param_2 < (int)max_num_rooms) &&
     (iVar2 = param_2 * 0x50, *(int *)(&DAT_80041420 + iVar2) != 0)) {
    if (dword_8004485C == 0) {
      if (DAT_80044858 != param_2 % 10) {
        return param_1;
      }
      cVar1 = (&DAT_80041416)[iVar2];
    }
    else {
      cVar1 = (&DAT_80041416)[iVar2];
    }
    if (cVar1 == '\0') {
      proc_7F0B6368(param_2);
    }
    else {
      puVar3 = proc_7F0BC9C4(param_1,param_2);
      *puVar3 = 0xbc003806;
      puVar3[1] = *(int *)(&dword_80041418 + iVar2) + -0x80000000;
      puVar3[2] = 0x6000000;
      param_1 = puVar3 + 4;
      puVar3[3] = *(int *)(&DAT_80041420 + iVar2) + -0x80000000;
      (&DAT_80041416)[iVar2] = 1;
    }
  }
  return param_1;
}



void proc_7F0B6994(int param_1)

{
  byte bVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  char cVar6;
  undefined4 *puVar5;
  short *psVar7;
  short *psVar8;
  int iVar9;
  char *pcVar10;
  char *pcVar11;
  int iVar12;
  short sVar13;
  
  iVar12 = param_1 * 0x50;
  if ((&DAT_80041440)[param_1 * 0x14] == 0) {
    iVar3 = *(int *)(&dword_80041418 + iVar12);
    pcVar11 = *(char **)(&DAT_8004141c + iVar12);
    iVar9 = 0;
    if (*pcVar11 != -0x48) {
      cVar6 = *pcVar11;
      pcVar10 = pcVar11;
      do {
        if (cVar6 == '\x04') {
          iVar9 += 1;
          cVar6 = pcVar10[8];
        }
        else {
          cVar6 = pcVar10[8];
        }
        pcVar10 = pcVar10 + 8;
      } while (cVar6 != -0x48);
    }
    iVar4 = mem_related_something_find_first(iVar9 * 0x1c + 0xfU & 0xfffffff0);
    if (iVar4 != 0) {
      (&DAT_80041440)[param_1 * 0x14] = iVar4;
      *(short *)(&DAT_80041444 + iVar12) = (short)iVar9;
      iVar12 = 0;
      sVar13 = 0;
      if (*pcVar11 != -0x48) {
        cVar6 = *pcVar11;
        do {
          if (cVar6 == '\x04') {
            psVar7 = (short *)(iVar4 + iVar12 * 0x1c);
            *psVar7 = sVar13;
            iVar9 = 0;
            puVar5 = (undefined4 *)(iVar4 + iVar12 * 0x1c);
            do {
              iVar9 += 1;
              puVar5[1] = 0x7fff;
              puVar5[4] = 0xffff8000;
              puVar5 = puVar5 + 1;
            } while (iVar9 < 3);
            bVar1 = pcVar11[1];
            iVar9 = 0;
            psVar8 = (short *)((*(uint *)(pcVar11 + 4) & 0xffffff) + iVar3);
            if ((uint)(bVar1 >> 4) != 0xffffffff) {
              do {
                iVar9 += 1;
                if ((longlong)*psVar8 < (longlong)*(int *)(psVar7 + 2)) {
                  *(int *)(psVar7 + 2) = (int)*psVar8;
                  sVar2 = psVar8[1];
                }
                else {
                  sVar2 = psVar8[1];
                }
                if ((longlong)sVar2 < (longlong)*(int *)(psVar7 + 4)) {
                  *(int *)(psVar7 + 4) = (int)sVar2;
                  sVar2 = psVar8[2];
                }
                else {
                  sVar2 = psVar8[2];
                }
                if ((longlong)sVar2 < (longlong)*(int *)(psVar7 + 6)) {
                  *(int *)(psVar7 + 6) = (int)sVar2;
                  sVar2 = *psVar8;
                }
                else {
                  sVar2 = *psVar8;
                }
                if ((longlong)*(int *)(psVar7 + 8) < (longlong)sVar2) {
                  *(int *)(psVar7 + 8) = (int)sVar2;
                  sVar2 = psVar8[1];
                }
                else {
                  sVar2 = psVar8[1];
                }
                if ((longlong)*(int *)(psVar7 + 10) < (longlong)sVar2) {
                  *(int *)(psVar7 + 10) = (int)sVar2;
                  sVar2 = psVar8[2];
                }
                else {
                  sVar2 = psVar8[2];
                }
                if ((longlong)*(int *)(psVar7 + 0xc) < (longlong)sVar2) {
                  *(int *)(psVar7 + 0xc) = (int)sVar2;
                }
                psVar8 = psVar8 + 8;
              } while (iVar9 != (uint)(bVar1 >> 4) + 1);
            }
            if (*(int *)(psVar7 + 2) == *(int *)(psVar7 + 8)) {
              *(int *)(psVar7 + 8) = *(int *)(psVar7 + 8) + 1;
              iVar9 = *(int *)(psVar7 + 10);
            }
            else {
              iVar9 = *(int *)(psVar7 + 10);
            }
            if (*(int *)(psVar7 + 4) == iVar9) {
              *(int *)(psVar7 + 10) = iVar9 + 1;
              iVar9 = *(int *)(psVar7 + 6);
            }
            else {
              iVar9 = *(int *)(psVar7 + 6);
            }
            if (iVar9 == *(int *)(psVar7 + 0xc)) {
              *(int *)(psVar7 + 0xc) = *(int *)(psVar7 + 0xc) + 1;
              iVar9 = *(int *)(psVar7 + 6);
            }
            iVar12 += 1;
            *(int *)(psVar7 + 2) =
                 *(int *)(psVar7 + 2) +
                 (int)(float)ptr_bgdata_room_fileposition_list[param_1].pPointTableBin;
            *(int *)(psVar7 + 4) =
                 *(int *)(psVar7 + 4) +
                 (int)(float)ptr_bgdata_room_fileposition_list[param_1].pPriMappingBin;
            *(int *)(psVar7 + 6) =
                 iVar9 + (int)(float)ptr_bgdata_room_fileposition_list[param_1].pSecMappingBin;
            *(int *)(psVar7 + 8) =
                 *(int *)(psVar7 + 8) +
                 (int)(float)ptr_bgdata_room_fileposition_list[param_1].pPointTableBin;
            *(int *)(psVar7 + 10) =
                 *(int *)(psVar7 + 10) +
                 (int)(float)ptr_bgdata_room_fileposition_list[param_1].pPriMappingBin;
            *(int *)(psVar7 + 0xc) =
                 *(int *)(psVar7 + 0xc) +
                 (int)(float)ptr_bgdata_room_fileposition_list[param_1].pSecMappingBin;
          }
          cVar6 = pcVar11[8];
          sVar13 += 1;
          pcVar11 = pcVar11 + 8;
        } while (cVar6 != -0x48);
      }
    }
  }
  return;
}



BOOL proc_7F0B6CEC(float *param_1,float *param_2,int *param_3,int *param_4)

{
  BOOL BVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float local_74;
  float local_48;
  float local_44;
  
  fVar6 = *param_2;
  fVar5 = (float)*param_4 - *param_1;
  fVar4 = (float)*param_3 - *param_1;
  if (fVar6 < 0.00000000) {
    fVar6 = -fVar6;
    fVar4 = -fVar4;
    fVar5 = -fVar5;
  }
  if ((0.00000000 <= fVar4) || (0.00000000 <= fVar5)) {
    if (fVar5 < fVar4) {
      fVar2 = param_1[1];
      fVar7 = fVar5;
    }
    else {
      fVar2 = param_1[1];
      fVar7 = fVar4;
      fVar4 = fVar5;
    }
    fVar3 = param_2[1];
    fVar5 = (float)param_4[1] - fVar2;
    fVar2 = (float)param_3[1] - fVar2;
    if (fVar3 < 0.00000000) {
      fVar3 = -fVar3;
      fVar2 = -fVar2;
      fVar5 = -fVar5;
    }
    if ((0.00000000 <= fVar2) || (0.00000000 <= fVar5)) {
      local_44 = fVar5;
      if (fVar2 <= fVar5) {
        local_44 = fVar2;
        fVar2 = fVar5;
      }
      if (local_44 * fVar6 < fVar7 * fVar3) {
        local_48 = fVar6;
        local_44 = fVar7;
        if (fVar2 * fVar6 < fVar7 * fVar3) {
          return FALSE;
        }
      }
      else {
        local_48 = fVar3;
        if (fVar4 * fVar3 < local_44 * fVar6) {
          return FALSE;
        }
      }
      local_74 = fVar4 * fVar3;
      if (fVar2 * fVar6 <= local_74) {
        fVar4 = fVar2;
        fVar6 = fVar3;
      }
      fVar2 = param_2[2];
      fVar7 = (float)param_3[2] - param_1[2];
      fVar5 = (float)param_4[2] - param_1[2];
      if (fVar2 < 0.00000000) {
        fVar2 = -fVar2;
        fVar7 = -fVar7;
        fVar5 = -fVar5;
      }
      if ((0.00000000 <= fVar7) || (0.00000000 <= fVar5)) {
        fVar3 = fVar7;
        if (fVar7 <= fVar5) {
          fVar3 = fVar5;
          fVar5 = fVar7;
        }
        if (local_44 * fVar2 < fVar5 * local_48) {
          if (fVar4 * fVar2 < fVar5 * fVar6) {
            BVar1 = FALSE;
          }
          else {
            BVar1 = TRUE;
          }
        }
        else {
          if (fVar3 * local_48 < local_44 * fVar2) {
            BVar1 = FALSE;
          }
          else {
            BVar1 = TRUE;
          }
        }
      }
      else {
        BVar1 = FALSE;
      }
    }
    else {
      BVar1 = FALSE;
    }
  }
  else {
    BVar1 = FALSE;
  }
  return BVar1;
}



undefined4
proc_7F0B7010(float *param_1,float *param_2,float *param_3,short *param_4,int param_5,float *param_6
             )

{
  char cVar1;
  short sVar2;
  int iVar3;
  longlong lVar4;
  bg_room_data *pbVar5;
  BOOL BVar6;
  uint *puVar7;
  uint *puVar8;
  short *psVar9;
  int *piVar10;
  ulonglong imageID;
  int iVar11;
  int iVar12;
  int iVar13;
  uint *puVar14;
  uint *puVar15;
  uint uVar16;
  int iStack192;
  int iStack188;
  int iStack184;
  int iStack180;
  int iStack176;
  int iStack172;
  int iStack164;
  int iStack160;
  int iStack156;
  int aiStack152 [8];
  int iStack120;
  int iStack116;
  int iStack112;
  int iStack108;
  int iStack104;
  int iStack100;
  int iStack92;
  int iStack88;
  int iStack84;
  int aiStack80 [2];
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  undefined4 uStack20;
  
  iVar3 = param_5 * 0x50;
  puVar14 = (uint *)((int)*param_4 * 8 + *(int *)(&DAT_8004141c + iVar3));
  aiStack80[0] = 0x7fffffff;
  uStack20 = 0;
  cVar1 = *(char *)(puVar14 + 2);
  uVar16 = (uint)*(byte *)((int)puVar14 + 1) & 0xf;
  iVar11 = (puVar14[1] & 0xffffff) + *(int *)(&dword_80041418 + iVar3);
joined_r0x7f0b70b0:
  do {
    if ((cVar1 == '\x04') || (cVar1 == -0x48)) {
      return uStack20;
    }
    puVar15 = puVar14 + 2;
    if (cVar1 == -0x41) {
      piVar10 = &iStack92;
      iStack92 = (int)(uint)*(byte *)((int)puVar14 + 0xd) / 10 - uVar16;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && ((ulonglong)*(byte *)((int)puVar14 + 0xd) == 0xffffffff80000000)) {
        trap(0x1800);
      }
      iStack88 = (int)(uint)*(byte *)((int)puVar14 + 0xe) / 10 - uVar16;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && ((ulonglong)*(byte *)((int)puVar14 + 0xe) == 0xffffffff80000000)) {
        trap(0x1800);
      }
      iStack84 = (int)(uint)*(byte *)((int)puVar14 + 0xf) / 10 - uVar16;
      if (false) {
        trap(0x1c00);
      }
      iVar12 = iStack92;
      iStack120 = DAT_80044874;
      iStack116 = DAT_80044878;
      iStack112 = DAT_8004487c;
      iStack108 = dword_80044868;
      iStack104 = DAT_8004486c;
      iStack100 = DAT_80044870;
      if ((false) &&
         (iVar12 = iStack92, iStack120 = DAT_80044874, iStack116 = DAT_80044878,
         iStack112 = DAT_8004487c, iStack108 = dword_80044868, iStack104 = DAT_8004486c,
         iStack100 = DAT_80044870, (ulonglong)*(byte *)((int)puVar14 + 0xf) == 0xffffffff80000000))
      {
        trap(0x1800);
        iVar12 = iStack92;
        iStack120 = DAT_80044874;
        iStack116 = DAT_80044878;
        iStack112 = DAT_8004487c;
        iStack108 = dword_80044868;
        iStack104 = DAT_8004486c;
        iStack100 = DAT_80044870;
      }
      while( true ) {
        piVar10 = piVar10 + 1;
        psVar9 = (short *)(iVar11 + iVar12 * 0x10);
        lVar4 = (longlong)*psVar9;
        if (lVar4 < (longlong)iStack108) {
          iStack108 = (int)*psVar9;
          lVar4 = (longlong)*psVar9;
        }
        if ((longlong)iStack120 < lVar4) {
          iStack120 = (int)lVar4;
          sVar2 = psVar9[1];
        }
        else {
          sVar2 = psVar9[1];
        }
        lVar4 = (longlong)sVar2;
        if (lVar4 < (longlong)iStack104) {
          iStack104 = (int)sVar2;
          lVar4 = (longlong)psVar9[1];
        }
        if ((longlong)iStack116 < lVar4) {
          iStack116 = (int)lVar4;
          sVar2 = psVar9[2];
        }
        else {
          sVar2 = psVar9[2];
        }
        lVar4 = (longlong)sVar2;
        if (lVar4 < (longlong)iStack100) {
          iStack100 = (int)sVar2;
          lVar4 = (longlong)psVar9[2];
        }
        if ((longlong)iStack112 < lVar4) {
          iStack112 = (int)lVar4;
        }
        if (piVar10 == aiStack80) break;
        iVar12 = *piVar10;
      }
      pbVar5 = ptr_bgdata_room_fileposition_list + param_5;
      iStack108 += (int)(float)pbVar5->pPointTableBin;
      iStack104 += (int)(float)pbVar5->pPriMappingBin;
      iStack100 += (int)(float)pbVar5->pSecMappingBin;
      iStack120 += (int)(float)pbVar5->pPointTableBin;
      iStack116 += (int)(float)pbVar5->pPriMappingBin;
      iStack112 += (int)(float)pbVar5->pSecMappingBin;
      BVar6 = proc_7F0B6CEC(param_1,param_3,&iStack108,&iStack120);
      if ((BVar6 != FALSE) &&
         (lVar4 = proc_7F092890((short *)(iVar11 + iStack92 * 0x10),
                                (short *)(iVar11 + iStack88 * 0x10),
                                (short *)(iVar11 + iStack84 * 0x10),
                                (float *)&ptr_bgdata_room_fileposition_list[param_5].pPointTableBin,
                                param_1,param_2,param_3,&fStack72), lVar4 != 0)) {
        uStack20 = 1;
        iVar12 = ((int)fStack72 - (int)*param_1) * ((int)fStack72 - (int)*param_1) +
                 ((int)fStack68 - (int)param_1[1]) * ((int)fStack68 - (int)param_1[1]) +
                 ((int)fStack64 - (int)param_1[2]) * ((int)fStack64 - (int)param_1[2]);
        puVar8 = puVar15;
        if (*(char *)puVar15 == -3) {
LAB_7f0b748c:
          puVar7 = *(uint **)(&DAT_8004141c + iVar3);
        }
        else {
          if (*(uint **)(&DAT_8004141c + iVar3) < puVar15) {
            cVar1 = *(char *)puVar14;
            puVar7 = puVar15;
            while( true ) {
              puVar8 = puVar7 + -2;
              if (cVar1 == -3) break;
              if (puVar8 <= *(uint **)(&DAT_8004141c + iVar3)) goto LAB_7f0b748c;
              cVar1 = *(char *)(puVar7 + -4);
              puVar7 = puVar8;
            }
            puVar7 = *(uint **)(&DAT_8004141c + iVar3);
          }
          else {
            puVar7 = *(uint **)(&DAT_8004141c + iVar3);
            puVar8 = puVar15;
          }
        }
        if (puVar8 == puVar7) {
          imageID = 0xffffffffffffffff;
        }
        else {
          imageID = (ulonglong)*(ushort *)(puVar8[1] - 8 | 0x80000000);
        }
        lVar4 = check_if_imageID_is_light(imageID);
        if (lVar4 != 0) {
          iVar12 += -4;
        }
        if (iVar12 < aiStack80[0]) {
          if (imageID == 0x4fd) {
            cVar1 = *(char *)(puVar14 + 4);
            puVar14 = puVar15;
            goto joined_r0x7f0b70b0;
          }
          *param_6 = fStack72;
          param_6[1] = fStack68;
          param_6[2] = fStack64;
          param_6[3] = fStack60;
          param_6[4] = fStack56;
          param_6[5] = fStack52;
          *(int *)(param_6 + 6) = iStack92 * 0x10 + iVar11;
          *(int *)(param_6 + 7) = iStack88 * 0x10 + iVar11;
          *(undefined2 *)((int)param_6 + 0x2a) = (short)imageID;
          *(uint **)(param_6 + 9) = puVar15;
          *(int *)(param_6 + 8) = iStack84 * 0x10 + iVar11;
          *(undefined2 *)(param_6 + 10) = 0;
          aiStack80[0] = iVar12;
        }
      }
    }
    else {
      if (cVar1 == -0x4f) {
        iVar12 = 0;
        do {
          iStack180 = DAT_80044880;
          iStack176 = DAT_80044884;
          iStack172 = DAT_80044888;
          iStack192 = DAT_8004488c;
          iStack188 = DAT_80044890;
          iStack184 = DAT_80044894;
          if (iVar12 == 0) {
            iStack164 = (puVar14[3] & 0xf) - uVar16;
            iStack160 = (uint)(*(byte *)((int)puVar14 + 0xf) >> 4) - uVar16;
            iStack156 = (*puVar15 & 0xf) - uVar16;
          }
          else {
            if (iVar12 == 1) {
              iStack164 = ((uint)*(byte *)((int)puVar14 + 0xe) & 0xf) - uVar16;
              iStack160 = (uint)(*(ushort *)((int)puVar14 + 0xe) >> 0xc) - uVar16;
              iStack156 = (uint)(*(byte *)((int)puVar14 + 0xb) >> 4) - uVar16;
            }
            else {
              if (iVar12 == 2) {
                iStack164 = ((uint)*(ushort *)(puVar14 + 3) & 0xf) - uVar16;
                iStack160 = (uint)(*(byte *)((int)puVar14 + 0xd) >> 4) - uVar16;
                iStack156 = ((uint)*(byte *)((int)puVar14 + 10) & 0xf) - uVar16;
              }
              else {
                iStack164 = ((uint)*(byte *)(puVar14 + 3) & 0xf) - uVar16;
                iStack160 = (puVar14[3] >> 0x1c) - uVar16;
                iStack156 = (uint)(*(ushort *)((int)puVar14 + 10) >> 0xc) - uVar16;
              }
            }
          }
          piVar10 = &iStack164;
          iVar13 = iStack164;
          while( true ) {
            piVar10 = piVar10 + 1;
            psVar9 = (short *)(iVar11 + iVar13 * 0x10);
            lVar4 = (longlong)*psVar9;
            if (lVar4 < (longlong)iStack180) {
              iStack180 = (int)*psVar9;
              lVar4 = (longlong)*psVar9;
            }
            if ((longlong)iStack192 < lVar4) {
              iStack192 = (int)lVar4;
              sVar2 = psVar9[1];
            }
            else {
              sVar2 = psVar9[1];
            }
            lVar4 = (longlong)sVar2;
            if (lVar4 < (longlong)iStack176) {
              iStack176 = (int)sVar2;
              lVar4 = (longlong)psVar9[1];
            }
            if ((longlong)iStack188 < lVar4) {
              iStack188 = (int)lVar4;
              sVar2 = psVar9[2];
            }
            else {
              sVar2 = psVar9[2];
            }
            lVar4 = (longlong)sVar2;
            if (lVar4 < (longlong)iStack172) {
              iStack172 = (int)sVar2;
              lVar4 = (longlong)psVar9[2];
            }
            if ((longlong)iStack184 < lVar4) {
              iStack184 = (int)lVar4;
            }
            if (piVar10 == aiStack152) break;
            iVar13 = *piVar10;
          }
          pbVar5 = ptr_bgdata_room_fileposition_list + param_5;
          iStack180 += (int)(float)pbVar5->pPointTableBin;
          iStack176 += (int)(float)pbVar5->pPriMappingBin;
          iStack172 += (int)(float)pbVar5->pSecMappingBin;
          iStack192 += (int)(float)pbVar5->pPointTableBin;
          iStack188 += (int)(float)pbVar5->pPriMappingBin;
          iStack184 += (int)(float)pbVar5->pSecMappingBin;
          BVar6 = proc_7F0B6CEC(param_1,param_3,&iStack180,&iStack192);
          if ((BVar6 != FALSE) &&
             (lVar4 = proc_7F092890((short *)(iVar11 + iStack164 * 0x10),
                                    (short *)(iVar11 + iStack160 * 0x10),
                                    (short *)(iVar11 + iStack156 * 0x10),
                                    (float *)&ptr_bgdata_room_fileposition_list[param_5].
                                              pPointTableBin,param_1,param_2,param_3,&fStack72),
             lVar4 != 0)) {
            uStack20 = 1;
            iVar13 = ((int)fStack72 - (int)*param_1) * ((int)fStack72 - (int)*param_1) +
                     ((int)fStack68 - (int)param_1[1]) * ((int)fStack68 - (int)param_1[1]) +
                     ((int)fStack64 - (int)param_1[2]) * ((int)fStack64 - (int)param_1[2]);
            puVar8 = puVar15;
            if (*(char *)puVar15 == -3) {
LAB_7f0b7950:
              puVar7 = *(uint **)(&DAT_8004141c + iVar3);
            }
            else {
              if (*(uint **)(&DAT_8004141c + iVar3) < puVar15) {
                cVar1 = *(char *)puVar14;
                puVar7 = puVar15;
                while( true ) {
                  puVar8 = puVar7 + -2;
                  if (cVar1 == -3) break;
                  if (puVar8 <= *(uint **)(&DAT_8004141c + iVar3)) goto LAB_7f0b7950;
                  cVar1 = *(char *)(puVar7 + -4);
                  puVar7 = puVar8;
                }
                puVar7 = *(uint **)(&DAT_8004141c + iVar3);
              }
              else {
                puVar7 = *(uint **)(&DAT_8004141c + iVar3);
                puVar8 = puVar15;
              }
            }
            if (puVar8 == puVar7) {
              imageID = 0xffffffffffffffff;
            }
            else {
              imageID = (ulonglong)*(ushort *)(puVar8[1] - 8 | 0x80000000);
            }
            lVar4 = check_if_imageID_is_light(imageID);
            if (lVar4 != 0) {
              iVar13 += -4;
            }
            if ((iVar13 < aiStack80[0]) && (imageID != 0x4fd)) {
              *param_6 = fStack72;
              param_6[1] = fStack68;
              param_6[2] = fStack64;
              param_6[3] = fStack60;
              param_6[4] = fStack56;
              param_6[5] = fStack52;
              *(int *)(param_6 + 6) = iStack164 * 0x10 + iVar11;
              *(int *)(param_6 + 7) = iStack160 * 0x10 + iVar11;
              *(undefined2 *)((int)param_6 + 0x2a) = (short)imageID;
              *(uint **)(param_6 + 9) = puVar15;
              *(int *)(param_6 + 8) = iStack156 * 0x10 + iVar11;
              *(short *)(param_6 + 10) = (short)iVar12 + 1;
              aiStack80[0] = iVar13;
            }
          }
          iVar12 += 1;
        } while (iVar12 != 4);
      }
    }
    cVar1 = *(char *)(puVar14 + 4);
    puVar14 = puVar15;
  } while( true );
}



int proc_7F0B7A78(float *param_1,float *param_2,int param_3,float *param_4)

{
  char cVar1;
  int iVar2;
  BOOL BVar4;
  int iVar5;
  longlong lVar3;
  short *psVar6;
  longlong lVar7;
  int *piVar8;
  int *piVar9;
  int iStack108;
  int iStack100;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  float fStack76;
  float fStack72;
  float fStack68;
  float fStack64;
  float fStack60;
  float fStack56;
  undefined2 uStack52;
  short sStack50;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  short sStack6;
  
  iStack108 = 0;
  iStack100 = 0x7fffffff;
  fStack20 = *param_1 * room_data_float1;
  iVar2 = param_3 * 0x50;
  psVar6 = (short *)(&DAT_80041440)[param_3 * 0x14];
  fStack16 = param_1[1] * room_data_float1;
  fStack12 = param_1[2] * room_data_float1;
  fStack32 = *param_2 * room_data_float1;
  fStack28 = param_2[1] * room_data_float1;
  fStack44 = fStack32 - fStack20;
  fStack24 = param_2[2] * room_data_float1;
  fStack40 = fStack28 - fStack16;
  fStack36 = fStack24 - fStack12;
  if (psVar6 == NULL) {
    iStack108 = 0;
  }
  else {
    sStack6 = *(short *)(&DAT_80041444 + iVar2);
    lVar7 = 0;
    piVar8 = (int *)(psVar6 + 2);
    if (0 < sStack6) {
      piVar9 = (int *)(psVar6 + 8);
      do {
        BVar4 = proc_7F0B6CEC(&fStack20,&fStack44,piVar8,piVar9);
        if ((BVar4 != FALSE) &&
           (iVar5 = proc_7F0B7010(&fStack20,&fStack32,&fStack44,psVar6,param_3,&fStack92),
           iVar5 != 0)) {
          iStack108 = 1;
          iVar5 = (int)(fStack92 - fStack20) * (int)(fStack92 - fStack20) +
                  (int)(fStack88 - fStack16) * (int)(fStack88 - fStack16) +
                  (int)(fStack84 - fStack12) * (int)(fStack84 - fStack12);
          lVar3 = check_if_imageID_is_light((longlong)sStack50);
          if (lVar3 != 0) {
            iVar5 += -4;
          }
          if (iVar5 < iStack100) {
            *param_4 = fStack92;
            param_4[1] = fStack88;
            param_4[2] = fStack84;
            param_4[3] = fStack80;
            param_4[4] = fStack76;
            param_4[5] = fStack72;
            param_4[6] = fStack68;
            param_4[7] = fStack64;
            param_4[8] = fStack60;
            *(short *)((int)param_4 + 0x2a) = sStack50;
            param_4[9] = fStack56;
            *(undefined2 *)(param_4 + 10) = uStack52;
            iStack100 = iVar5;
          }
        }
        lVar7 = (longlong)((int)lVar7 + 1);
        psVar6 = psVar6 + 0xe;
        piVar8 = piVar8 + 7;
        piVar9 = piVar9 + 7;
      } while (lVar7 != (longlong)sStack6);
    }
    if (iStack108 != 0) {
      piVar8 = (int *)param_4[9];
      if (*(char *)piVar8 == -0xb) {
        piVar9 = *(int **)(&DAT_8004141c + iVar2);
      }
      else {
        if (*(int **)(&DAT_8004141c + iVar2) < piVar8) {
          cVar1 = *(char *)(piVar8 + -2);
          piVar9 = piVar8;
          while( true ) {
            piVar8 = piVar9 + -2;
            if (cVar1 == -0xb) break;
            if (piVar8 <= *(int **)(&DAT_8004141c + iVar2)) {
              piVar9 = *(int **)(&DAT_8004141c + iVar2);
              goto LAB_7f0b7d2c;
            }
            cVar1 = *(char *)(piVar9 + -4);
            piVar9 = piVar8;
          }
          piVar9 = *(int **)(&DAT_8004141c + iVar2);
        }
        else {
          piVar9 = *(int **)(&DAT_8004141c + iVar2);
        }
      }
LAB_7f0b7d2c:
      if (piVar8 == piVar9) {
        *(undefined2 *)(param_4 + 0xb) = 0xffff;
        *(undefined2 *)((int)param_4 + 0x2e) = 0xffff;
      }
      else {
        *(ushort *)(param_4 + 0xb) = (ushort)(*(byte *)((int)piVar8 + 1) >> 5);
        *(ushort *)((int)param_4 + 0x2e) = (ushort)((uint)(*piVar8 << 0xb) >> 0x1e);
      }
    }
  }
  return iStack108;
}



void proc_7F0B7D94(void)

{
  DAT_800448a0 = 0;
  DAT_800448a4 = 0;
  return;
}



ulonglong proc_7F0B7DA8(int param_1)

{
  byte bVar1;
  
  bVar1 = (&DAT_80041417)[param_1 * 0x50];
  if (bVar1 != 0xff) {
    bVar1 += 1;
    (&DAT_80041417)[param_1 * 0x50] = bVar1;
  }
  return (ulonglong)bVar1;
}



void proc_7F0B7DE4(undefined4 param_1,uint param_2,int param_3,int param_4,undefined4 *param_5)

{
  int iVar1;
  ulonglong uVar2;
  int iVar3;
  
  iVar3 = DAT_800448a0 * 0x20;
  if ((param_4 < 2) ||
     (uVar2 = proc_7F0B7DA8((uint)(ptr_bgdata_portals[param_3].connectedRoom1 ^
                                  ptr_bgdata_portals[param_3].connectedRoom2) ^ param_2),
     iVar1 = DAT_800448a0, (longlong)uVar2 < 9)) {
    *(undefined4 *)(&DAT_8007c100 + iVar3) = param_1;
    *(uint *)(&DAT_8007c104 + iVar3) = param_2;
    *(int *)(&DAT_8007c10c + iVar3) = param_4;
    *(int *)(&DAT_8007c108 + iVar3) = param_3;
    *(undefined4 *)(&DAT_8007c110 + iVar3) = *param_5;
    *(undefined4 *)(&DAT_8007c114 + iVar3) = param_5[1];
    *(undefined4 *)(&DAT_8007c118 + iVar3) = param_5[2];
    *(undefined4 *)(&DAT_8007c11c + iVar3) = param_5[3];
    DAT_800448a0 += 1;
    if (DAT_800448a0 == 500) {
      DAT_800448a0 = 0;
    }
    iVar1 = DAT_800448a0 + -1;
    if (DAT_800448a4 != DAT_800448a0) {
      return;
    }
  }
  DAT_800448a0 = iVar1;
  return;
}



undefined8 proc_7F0B7EE4(int *param_1)

{
  undefined8 uVar1;
  undefined8 uVar2;
  int iVar3;
  
  iVar3 = DAT_800448a4 * 0x20;
  if (DAT_800448a0 == DAT_800448a4) {
    uVar1 = 0;
  }
  else {
    uVar2 = proc_7F0B7F84((longlong)*param_1,*(int *)(&DAT_8007c104 + iVar3),
                          *(int *)(&DAT_8007c108 + iVar3),*(int *)(&DAT_8007c10c + iVar3),
                          (float *)(&DAT_8007c110 + iVar3));
    DAT_800448a4 += 1;
    if (DAT_800448a4 == 500) {
      DAT_800448a4 = 0;
    }
    uVar1 = 1;
    *param_1 = (int)uVar2;
  }
  return uVar1;
}



// WARNING: Instruction at (ram,0x7f0b8318) overlaps instruction at (ram,0x7f0b8314)
// 

undefined8 proc_7F0B7F84(undefined8 param_1,int param_2,int param_3,int param_4,float *param_5)

{
  byte bVar1;
  xyzpoint *pxVar3;
  longlong lVar2;
  uint uVar4;
  bg_portal_data_entry *pbVar5;
  ulonglong uVar6;
  int iVar7;
  bg_portal_entry *pbVar8;
  int iVar9;
  float fVar10;
  float fVar11;
  float fStack44;
  float fStack40;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  DAT_80044898 += 1;
  if (100 < param_4) {
    return param_1;
  }
  if (dword_8004489C < param_4) {
    return param_1;
  }
  if (0xf < param_4) {
    return param_1;
  }
  if ((*(byte *)&ptr_bgdata_portals[param_3].controlbytes & 1) != 0) {
    return param_1;
  }
  pxVar3 = get_BONDdata_position();
  proc_7F0B96CC(param_3,&fStack44);
  fVar11 = (pxVar3->z * fStack36 + fStack44 * pxVar3->x + fStack40 * pxVar3->y) * room_data_float1;
  fVar10 = proc_7F0B9990(param_3);
  pbVar5 = ptr_bgdata_portals + param_3;
  uVar6 = (ulonglong)pbVar5->connectedRoom1;
  if ((longlong)param_2 == uVar6) {
    uVar6 = (ulonglong)pbVar5->connectedRoom2;
    if (fStack28 <= fVar11 - fVar10) {
      return param_1;
    }
  }
  else {
    if (fVar11 + fVar10 <= fStack32) {
      return param_1;
    }
  }
  if (fStack32 - fVar10 < fVar11) {
    if (fVar11 < fStack28 + fVar10) {
      fStack16 = ptr_BONDdata->field_1118;
      fStack12 = ptr_BONDdata->field_111C;
      fStack8 = ptr_BONDdata->field_1120;
      fStack4 = ptr_BONDdata->field_1124;
      goto LAB_7f0b8264;
    }
    bVar1 = *(byte *)&pbVar5->controlbytes;
  }
  else {
    bVar1 = *(byte *)&pbVar5->controlbytes;
  }
  if ((bVar1 & 2) == 0) {
    lVar2 = proc_7F0B5864();
    if (lVar2 == 0) {
      return param_1;
    }
    vis_is_inline_of_sight(&fStack16,param_5);
    vis_is_inline_of_sight(&fStack16,&ptr_BONDdata->field_1118);
  }
  else {
    lVar2 = proc_7F0B5864();
    if (lVar2 == 0) {
      return param_1;
    }
    uVar6 = (ulonglong)
            (ptr_bgdata_portals[param_3].connectedRoom2 ^ ptr_bgdata_portals[param_3].connectedRoom1
            ) ^ (longlong)param_2;
    lVar2 = proc_7F0B5208((int)uVar6,&fStack16);
    if (lVar2 == 0) {
      return param_1;
    }
    fStack16 = ptr_BONDdata->field_1118;
    fStack12 = ptr_BONDdata->field_111C;
    fStack8 = ptr_BONDdata->field_1120;
    fStack4 = ptr_BONDdata->field_1124;
  }
  if (fStack8 <= fStack16) {
    return param_1;
  }
  if (fStack4 <= fStack12) {
    return param_1;
  }
LAB_7f0b8264:
  (&dword_800442FC)[param_3] = (char)param_4;
  if ((fStack16 < fStack8) && (fStack12 < fStack4)) {
    uVar4 = proc_7F0B39BC((uint)uVar6,param_4,&fStack16,
                          (uint)*(byte *)&ptr_bgdata_portals[param_3].controlbytes & 2);
    if (uVar4 == 0) {
      iVar9 = 0;
      iVar7 = 0;
      pbVar8 = ptr_bgdata_portals->offset_portal;
      pbVar5 = ptr_bgdata_portals;
      while (pbVar8 != NULL) {
        if (iVar9 == param_3) {
          pbVar8 = pbVar5[1].offset_portal;
        }
        else {
          if ((uVar6 == (ulonglong)pbVar5->connectedRoom1) ||
             (uVar6 == (ulonglong)pbVar5->connectedRoom2)) {
            proc_7F0B7DE4((int)param_1,(uint)uVar6,iVar9,param_4 + 1,&fStack16);
            pbVar5 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals->offset_portal + iVar7);
          }
          pbVar8 = pbVar5[1].offset_portal;
        }
        iVar9 += 1;
        iVar7 += 8;
        pbVar5 = pbVar5 + 1;
      }
    }
  }
  return param_1;
}



undefined8 push_arg_to_table(undefined8 param_1)

{
  *(int *)(&DAT_800448a8 + DAT_800448f8 * 4) = (int)param_1;
  DAT_800448f8 = (DAT_800448f8 + 1) % 0x14;
  return param_1;
}



undefined4 pull_arg_from_stack(void)

{
  DAT_800448f8 = (DAT_800448f8 + 0x13) % 0x14;
  return *(undefined4 *)(&DAT_800448a8 + DAT_800448f8 * 4);
}



undefined4 proc_7F0B83E4(int param_1)

{
  return *(undefined4 *)(&DAT_800448a8 + (((DAT_800448f8 - param_1) + 0x13) % 0x14) * 4);
}



byte * parse_global_vis_command_list(byte *cmd,uint mode)

{
  byte bVar1;
  bool bVar2;
  bool bVar3;
  uint uVar6;
  uint uVar7;
  longlong lVar4;
  int iVar8;
  ulonglong uVar5;
  undefined1 *puVar9;
  int iVar10;
  float afStack40 [4];
  float afStack24 [6];
  
  bVar2 = true;
  DAT_80081610 = 0;
  if (cmd == NULL) {
LAB_7f0b89f4:
    return cmd;
  }
LAB_7f0b8480:
  do {
    bVar1 = *cmd;
    while (0x27 < bVar1) {
      if (false) {
        return cmd;
      }
      switch((uint)bVar1) {
      case 0x50:
        cmd = parse_global_vis_command_list(cmd + (uint)cmd[1] * 8,mode);
        cmd = cmd + (uint)cmd[1] * 8;
        goto LAB_7f0b8480;
      case 0x51:
        bVar3 = mode != 0;
        mode = 0;
        cmd = cmd + (uint)cmd[1] * 8;
        if (bVar3) {
          DAT_80081610 = 1;
        }
        goto LAB_7f0b8480;
      case 0x52:
        DAT_80081610 = 0;
        return cmd + (uint)cmd[1] * 8;
      default:
        return cmd;
      case 0x5a:
        uVar6 = pull_arg_from_stack();
        cmd = parse_global_vis_command_list(cmd + (uint)cmd[1] * 8,uVar6 & mode);
        if (DAT_80081610 != 0) {
          mode = 0;
          goto LAB_7f0b8480;
        }
        bVar1 = *cmd;
        break;
      case 0x5b:
        mode ^= 1;
        cmd = cmd + (uint)cmd[1] * 8;
        goto LAB_7f0b8480;
      case 0x5c:
        return cmd + (uint)cmd[1] * 8;
      }
    }
    if (false) {
      return cmd;
    }
    switch(bVar1) {
    case 0:
      return cmd;
    case 1:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        push_arg_to_table((longlong)*(int *)(cmd + 4));
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 2:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        pull_arg_from_stack();
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 3:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        uVar6 = pull_arg_from_stack();
        uVar7 = pull_arg_from_stack();
        push_arg_to_table((longlong)(int)(uVar7 & uVar6));
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 4:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        uVar6 = pull_arg_from_stack();
        uVar7 = pull_arg_from_stack();
        push_arg_to_table((longlong)(int)(uVar7 | uVar6));
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 5:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        iVar8 = pull_arg_from_stack();
        push_arg_to_table((ulonglong)(iVar8 == 0));
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 6:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        uVar6 = pull_arg_from_stack();
        uVar7 = pull_arg_from_stack();
        push_arg_to_table((longlong)(int)(uVar7 ^ uVar6));
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    default:
      goto LAB_7f0b89f4;
    case 0x14:
      if (mode != 0) {
        uVar5 = (ulonglong)(current_room_maybe < *(int *)(cmd + 0xc)) ^ 1;
        if (uVar5 != 0) {
          uVar5 = (ulonglong)(*(int *)(cmd + 0x14) < current_room_maybe) ^ 1;
        }
        push_arg_to_table(uVar5);
      }
      cmd = cmd + (uint)cmd[1] * 8;
      break;
    case 0x1e:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        DAT_80081600 = ptr_BONDdata->field_1118;
        DAT_80081604 = ptr_BONDdata->field_111C;
        DAT_80081608 = ptr_BONDdata->field_1120;
        DAT_8008160c = ptr_BONDdata->field_1124;
        current_visibility = 0;
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 0x1f:
      if (mode != 0) {
        lVar4 = proc_7F0B5864();
        if (lVar4 == 0) {
          current_visibility = 1;
        }
        else {
          lVar4 = vis_is_inline_of_sight((float *)&DAT_80081600,&ptr_BONDdata->field_1118);
          if (lVar4 == 0) {
            current_visibility = 1;
          }
          else {
            current_visibility = 0;
          }
        }
      }
      cmd = cmd + (uint)cmd[1] * 8;
      break;
    case 0x20:
      if (mode == 0) {
        uVar6 = (uint)cmd[1];
      }
      else {
        if (current_visibility == 0) {
          lVar4 = proc_7F0B5208(*(int *)(cmd + 0xc),(float *)&DAT_80081600);
          if (lVar4 != 0) {
            proc_7F0B39BC(*(int *)(cmd + 0xc),0,(float *)&DAT_80081600,0);
            (&list_visible_rooms_in_cur_global_vis_packet)
            [num_visible_rooms_in_cur_global_vis_packet] = (char)*(undefined4 *)(cmd + 0xc);
            num_visible_rooms_in_cur_global_vis_packet += 1;
          }
          uVar6 = (uint)cmd[1];
        }
        else {
          uVar6 = (uint)cmd[1];
        }
      }
      cmd = cmd + uVar6 * 8;
      break;
    case 0x21:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        current_visibility = 1;
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 0x22:
      if (mode == 0) {
LAB_7f0b8704:
        uVar6 = (uint)cmd[1];
      }
      else {
        lVar4 = proc_7F0B5864();
        if (lVar4 == 0) {
          uVar6 = (uint)cmd[1];
        }
        else {
          lVar4 = vis_is_inline_of_sight(afStack24,&ptr_BONDdata->field_1118);
          if (lVar4 != 0) {
            if (current_visibility == 0) {
              proc_7F0B5CC0((float *)&DAT_80081600,afStack24);
            }
            else {
              proc_7F0B5D58(&DAT_80081600,afStack24);
              current_visibility = 0;
            }
            goto LAB_7f0b8704;
          }
          uVar6 = (uint)cmd[1];
        }
      }
      cmd = cmd + uVar6 * 8;
      break;
    case 0x23:
      if (mode == 0) {
        uVar6 = (uint)cmd[1];
      }
      else {
        if (current_visibility == 0) {
          lVar4 = proc_7F0B5864();
          if (((lVar4 == 0) ||
              (lVar4 = vis_is_inline_of_sight(afStack40,&ptr_BONDdata->field_1118), lVar4 == 0)) ||
             (lVar4 = vis_is_inline_of_sight((float *)&DAT_80081600,afStack40), lVar4 == 0)) {
            current_visibility = 1;
            uVar6 = (uint)cmd[1];
          }
          else {
            uVar6 = (uint)cmd[1];
          }
        }
        else {
          uVar6 = (uint)cmd[1];
        }
      }
      cmd = cmd + uVar6 * 8;
      break;
    case 0x24:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        (&DAT_80041448)[*(int *)(cmd + 0xc) * 0x50] = 1;
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 0x25:
      if (mode == 0) {
        bVar1 = cmd[1];
      }
      else {
        iVar8 = *(int *)(cmd + 0xc);
        if (iVar8 <= *(int *)(cmd + 0x14)) {
          (&DAT_80041448)[iVar8 * 0x50] = 1;
          puVar9 = &roominformationblock + iVar8 * 0x50;
          while( true ) {
            iVar8 += 1;
            if (*(int *)(cmd + 0x14) < iVar8) break;
            puVar9[0x84] = 1;
            puVar9 = puVar9 + 0x50;
          }
        }
        bVar1 = cmd[1];
      }
      cmd = cmd + (uint)bVar1 * 8;
      break;
    case 0x26:
      if (mode == 0) {
        uVar6 = (uint)cmd[1];
      }
      else {
        if (bVar2) {
          uVar5 = proc_7F0B6314(*(int *)(cmd + 0xc));
          bVar2 = uVar5 == 0;
          uVar6 = (uint)cmd[1];
        }
        else {
          uVar6 = (uint)cmd[1];
        }
      }
      cmd = cmd + uVar6 * 8;
      break;
    case 0x27:
      if (mode == 0) {
        uVar6 = (uint)cmd[1];
      }
      else {
        iVar8 = *(int *)(cmd + 0xc);
        iVar10 = *(int *)(cmd + 0x14);
        if (iVar10 < iVar8) {
          uVar6 = (uint)cmd[1];
        }
        else {
          do {
            if (bVar2) {
              uVar5 = proc_7F0B6314(iVar8);
              bVar2 = uVar5 == 0;
              iVar10 = *(int *)(cmd + 0x14);
            }
            iVar8 += 1;
          } while (iVar8 <= iVar10);
          uVar6 = (uint)cmd[1];
        }
      }
      cmd = cmd + uVar6 * 8;
    }
  } while( true );
}



byte * proc_7F0B8A24(byte *param_1)

{
  current_visibility = 0;
  if (param_1 != NULL) {
    proc_7F0B83E4(0);
    param_1 = parse_global_vis_command_list(param_1,1);
  }
  return param_1;
}



// WARNING: Instruction at (ram,0x7f0b8c4c) overlaps instruction at (ram,0x7f0b8c48)
// 

void proc_7F0B8A6C(void)

{
  byte bVar1;
  u32 *puVar3;
  undefined *puVar4;
  longlong lVar2;
  bg_portal_data_entry *pbVar5;
  bg_portal_entry *pbVar6;
  int iVar7;
  int iVar8;
  int aiStack28 [3];
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  proc_7F0B908C();
  fStack16 = ptr_BONDdata->field_1118;
  fStack12 = ptr_BONDdata->field_111C;
  fStack8 = ptr_BONDdata->field_1120;
  fStack4 = ptr_BONDdata->field_1124;
  proc_7F0B3BC4();
  puVar3 = (u32 *)&roominformationblock;
  do {
    puVar3 = puVar3 + 0x14;
    *(undefined *)puVar3 = 0;
    *(undefined *)((int)puVar3 + 1) = 0;
    *(undefined *)(puVar3 + 0xd) = 0;
    puVar3 = puVar3;
  } while (puVar3 < &max_num_rooms);
  puVar4 = &dword_800442FC;
  do {
    puVar4 = puVar4 + 4;
    puVar4[1] = 0;
    puVar4[2] = 0;
    puVar4[3] = 0;
    *puVar4 = 0;
    puVar4 = puVar4;
  } while (puVar4 != &dword_800443C4);
  DAT_80044858 = (DAT_80044858 + 1) % 10;
  DAT_8007ff98 = 0;
  DAT_80044898 = 0;
  proc_7F0B7D94();
  proc_7F0B5168();
  proc_7F0B8A24(DAT_8007ff90);
  if ((levelentry_index == LEVEL_INDEX_CRAD) || (ptr_bgdata_portals->offset_portal == NULL)) {
    if (levelentry_index == LEVEL_INDEX_CRAD) {
      proc_7F0B39BC(9,0,&ptr_BONDdata->field_1118,1);
    }
    iVar7 = 1;
    if (1 < (int)max_num_rooms) {
      do {
        lVar2 = proc_7F0B5208(iVar7,&ptr_BONDdata->field_1118);
        if (lVar2 != 0) {
          proc_7F0B39BC(iVar7,0,&ptr_BONDdata->field_1118,1);
        }
        iVar7 += 1;
      } while (iVar7 < (int)max_num_rooms);
    }
    pbVar6 = ptr_bgdata_portals->offset_portal;
  }
  else {
    if (levelentry_index == LEVEL_INDEX_CRAD) {
      proc_7F0B39BC(9,0,&ptr_BONDdata->field_1118,1);
    }
    proc_7F0B39BC(current_room_maybe,0,&ptr_BONDdata->field_1118,1);
    iVar8 = 0;
    iVar7 = 0;
    pbVar6 = ptr_bgdata_portals->offset_portal;
    pbVar5 = ptr_bgdata_portals;
    while (pbVar6 != NULL) {
      if (((longlong)(int)current_room_maybe == (ulonglong)pbVar5->connectedRoom1) ||
         ((longlong)(int)current_room_maybe == (ulonglong)pbVar5->connectedRoom2)) {
        proc_7F0B7DE4(0,current_room_maybe,iVar8,1,&fStack16);
        pbVar5 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals->offset_portal + iVar7);
      }
      pbVar6 = pbVar5[1].offset_portal;
      iVar8 += 1;
      iVar7 += 8;
      pbVar5 = pbVar5 + 1;
    }
    aiStack28[0] = 0;
    lVar2 = proc_7F0B7EE4(aiStack28);
    while (lVar2 != 0) {
      lVar2 = proc_7F0B7EE4(aiStack28);
    }
    pbVar6 = ptr_bgdata_portals->offset_portal;
  }
  if (pbVar6 == NULL) {
    return;
  }
  bVar1 = ptr_bgdata_portals->connectedRoom1;
  pbVar5 = ptr_bgdata_portals;
  do {
    if (((&roominformationblock)[(uint)bVar1 * 0x50] == '\0') ||
       (iVar7 = (uint)pbVar5->connectedRoom2 * 0x50, (&roominformationblock)[iVar7] != '\0')) {
      if ((&roominformationblock)[(uint)pbVar5->connectedRoom2 * 0x50] == '\0') {
        pbVar6 = pbVar5[1].offset_portal;
      }
      else {
        if ((&roominformationblock)[(uint)bVar1 * 0x50] == '\0') {
          (&DAT_80041415)[(uint)bVar1 * 0x50] = 1;
          goto LAB_7f0b8d54;
        }
        pbVar6 = pbVar5[1].offset_portal;
      }
    }
    else {
      (&DAT_80041415)[iVar7] = 1;
LAB_7f0b8d54:
      pbVar6 = pbVar5[1].offset_portal;
    }
    if (pbVar6 == NULL) {
      return;
    }
    bVar1 = pbVar5[1].connectedRoom1;
    pbVar5 = pbVar5 + 1;
  } while( true );
}



uint * proc_7F0B8D78(longlong param_1)

{
  int *piVar2;
  longlong lVar1;
  uint *puVar3;
  int iVar4;
  
  if (levelentry_index == LEVEL_INDEX_DAM) {
    piVar2 = &DAT_8007ffa0;
    iVar4 = 0;
    if (0 < NumberOfRoomsDrawn) {
      do {
        iVar4 += 1;
        if (*piVar2 == 0x23) {
          piVar2[1] = 0;
          break;
        }
        piVar2 = piVar2 + 7;
      } while (iVar4 < NumberOfRoomsDrawn);
    }
  }
  lVar1 = proc_7F0B3C8C(param_1);
  puVar3 = proc_7F0B4FB4((uint *)lVar1);
  return puVar3;
}



int proc_7F0B8DF4(ulonglong param_1,int param_2,int param_3)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  bg_portal_data_entry *pbVar5;
  int *piVar6;
  
  iVar3 = 0;
  iVar2 = 0;
  if (ptr_bgdata_portals->offset_portal == NULL) {
    return 0;
  }
  bVar1 = ptr_bgdata_portals->connectedRoom1;
  iVar4 = 0;
  pbVar5 = ptr_bgdata_portals;
  do {
    piVar6 = (int *)(param_2 + iVar3 * 4);
    if (param_1 == (ulonglong)bVar1) {
      *piVar6 = iVar2;
LAB_7f0b8e50:
      iVar3 += 1;
    }
    else {
      if (param_1 == (ulonglong)pbVar5->connectedRoom2) {
        *piVar6 = iVar2;
        goto LAB_7f0b8e50;
      }
    }
    if (param_3 <= iVar3) {
      return iVar3;
    }
    iVar2 += 1;
    pbVar5 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals[1].offset_portal + iVar4);
    if (pbVar5->offset_portal == NULL) {
      return iVar3;
    }
    bVar1 = pbVar5->connectedRoom1;
    iVar4 = iVar4 + 8;
  } while( true );
}



int proc_7F0B8E98(uint *param_1,int param_2)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  
  iVar2 = 0;
  if ((0 < num_visible_rooms_in_cur_global_vis_packet) && (0 < param_2)) {
    pbVar3 = &list_visible_rooms_in_cur_global_vis_packet;
    bVar1 = list_visible_rooms_in_cur_global_vis_packet;
    while( true ) {
      iVar2 += 1;
      *param_1 = (uint)bVar1;
      pbVar3 = pbVar3 + 1;
      if ((num_visible_rooms_in_cur_global_vis_packet <= iVar2) || (param_2 <= iVar2)) break;
      bVar1 = *pbVar3;
      param_1 = param_1 + 1;
    }
  }
  return iVar2;
}



int proc_7F0B8EFC(ulonglong param_1,int *param_2,int param_3)

{
  byte bVar1;
  ulonglong uVar2;
  int iVar3;
  int iVar4;
  bg_portal_data_entry *pbVar5;
  ulonglong uVar6;
  int iVar7;
  int *piVar8;
  bg_portal_entry *pbVar9;
  
  if (ptr_bgdata_portals->offset_portal == NULL) {
    return 0;
  }
  iVar4 = 0;
  bVar1 = ptr_bgdata_portals->connectedRoom1;
  iVar3 = 0;
  pbVar5 = ptr_bgdata_portals;
  do {
    uVar2 = (ulonglong)bVar1;
    uVar6 = (ulonglong)pbVar5->connectedRoom2;
    if ((ulonglong)bVar1 == param_1) {
      uVar2 = (ulonglong)pbVar5->connectedRoom2;
      uVar6 = param_1;
    }
    if (uVar6 == param_1) {
      iVar7 = 0;
      piVar8 = param_2;
      if (0 < iVar3) {
        do {
          iVar7 += 1;
          if (uVar2 == (longlong)*piVar8) {
            pbVar9 = pbVar5[1].offset_portal;
            iVar7 = iVar3;
            goto LAB_7f0b8fa8;
          }
          piVar8 = piVar8 + 1;
        } while (iVar7 != iVar3);
      }
      iVar7 = iVar3 + 1;
      param_2[iVar3] = (int)uVar2;
      if (param_3 <= iVar7) {
        return iVar7;
      }
      pbVar5 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals->offset_portal + iVar4);
      pbVar9 = pbVar5[1].offset_portal;
    }
    else {
      pbVar9 = pbVar5[1].offset_portal;
      iVar7 = iVar3;
    }
LAB_7f0b8fa8:
    iVar4 += 8;
    if (pbVar9 == NULL) {
      return iVar7;
    }
    bVar1 = pbVar5[1].connectedRoom1;
    iVar3 = iVar7;
    pbVar5 = pbVar5 + 1;
  } while( true );
}



undefined8 proc_7F0B8FD0(ulonglong param_1,ulonglong param_2)

{
  byte bVar1;
  bg_portal_data_entry *pbVar2;
  bg_portal_entry *pbVar3;
  
  if (ptr_bgdata_portals->offset_portal != NULL) {
    bVar1 = ptr_bgdata_portals->connectedRoom1;
    pbVar2 = ptr_bgdata_portals;
    while( true ) {
      if (((ulonglong)bVar1 == param_1) && ((ulonglong)pbVar2->connectedRoom2 == param_2)) {
        return 1;
      }
      if ((ulonglong)pbVar2->connectedRoom2 == param_1) {
        if ((ulonglong)bVar1 == param_2) {
          return 1;
        }
        pbVar3 = pbVar2[1].offset_portal;
      }
      else {
        pbVar3 = pbVar2[1].offset_portal;
      }
      if (pbVar3 == NULL) break;
      bVar1 = pbVar2[1].connectedRoom1;
      pbVar2 = pbVar2 + 1;
    }
  }
  return 0;
}



float proc_7F0B9040(int param_1,float param_2,float param_3)

{
  float in_a1_lo;
  float in_a2_lo;
  int iVar1;
  
  iVar1 = (int)((float)(&dword_80041404)[param_1] * in_a1_lo + in_a2_lo);
  (&dword_80041404)[param_1] = iVar1;
  return (float)iVar1;
}



void proc_7F0B908C(void)

{
  short sVar1;
  short sVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  
  fVar4 = (float)dword_80041404;
  fVar7 = (float)dword_80041408;
  sVar1 = get_video2_settings_txtClipW();
  fVar6 = (float)dword_8004140C + (float)(int)sVar1;
  sVar1 = get_video2_settings_txtClipH();
  fVar5 = (float)dword_80041410 + (float)(int)sVar1;
  sVar1 = get_video2_settings_ulx();
  ptr_BONDdata->field_1118 = (float)(int)sVar1;
  fVar3 = ptr_BONDdata->field_1118;
  if (fVar3 < fVar4) {
    ptr_BONDdata->field_1118 = fVar4;
    fVar3 = ptr_BONDdata->field_1118;
  }
  if (fVar6 < fVar3) {
    ptr_BONDdata->field_1118 = fVar6;
  }
  sVar1 = get_video2_settings_uly();
  ptr_BONDdata->field_111C = (float)(int)sVar1;
  fVar3 = ptr_BONDdata->field_111C;
  if (fVar3 < fVar7) {
    ptr_BONDdata->field_111C = fVar7;
    fVar3 = ptr_BONDdata->field_111C;
  }
  if (fVar5 < fVar3) {
    ptr_BONDdata->field_111C = fVar5;
  }
  sVar1 = get_video2_settings_ulx();
  sVar2 = get_video2_settings_width();
  ptr_BONDdata->field_1120 = (float)((int)sVar2 + (int)sVar1);
  fVar3 = ptr_BONDdata->field_1120;
  if (fVar3 < fVar4) {
    ptr_BONDdata->field_1120 = fVar4;
    fVar3 = ptr_BONDdata->field_1120;
  }
  if (fVar6 < fVar3) {
    ptr_BONDdata->field_1120 = fVar6;
  }
  sVar1 = get_video2_settings_uly();
  sVar2 = get_video2_settings_height();
  ptr_BONDdata->field_1124 = (float)((int)sVar2 + (int)sVar1);
  fVar3 = ptr_BONDdata->field_1124;
  if (fVar3 < fVar7) {
    ptr_BONDdata->field_1124 = fVar7;
    fVar3 = ptr_BONDdata->field_1124;
  }
  if (fVar5 < fVar3) {
    ptr_BONDdata->field_1124 = fVar5;
  }
  return;
}



void proc_7F0B92B4(int param_1,float *param_2)

{
  int iVar1;
  undefined1 *puVar2;
  float fVar3;
  
  param_1 *= 0x50;
  iVar1 = 1;
  fVar3 = (*(float *)(&DAT_80041458 + param_1) + *(float *)(&DAT_8004144c + param_1)) * 0.50000000;
  if (true) {
    *param_2 = fVar3;
    puVar2 = &roominformationblock + param_1;
    while( true ) {
      iVar1 += 1;
      param_2 = param_2 + 1;
      fVar3 = (*(float *)(puVar2 + 0x48) + *(float *)(puVar2 + 0x3c)) * 0.50000000;
      if (iVar1 == 3) break;
      *param_2 = fVar3;
      puVar2 = puVar2 + 4;
    }
  }
  *param_2 = fVar3;
  return;
}



void proc_7F0B9338(int param_1)

{
  char cVar1;
  short sVar2;
  short *psVar3;
  int iVar4;
  int iVar5;
  short *psVar6;
  undefined1 *puVar7;
  short *psVar8;
  short *psVar9;
  bg_room_data *pbVar10;
  short sVar11;
  int iVar12;
  short local_18;
  undefined2 local_16;
  undefined2 local_14;
  short local_12;
  undefined2 local_10;
  undefined2 local_e;
  
  pbVar10 = ptr_bgdata_room_fileposition_list + param_1;
  if (pbVar10->xpos == 0.00000000) {
    if ((param_1 < DAT_8007b9dc) && ((&DAT_8007b128)[param_1] != 0)) {
      psVar8 = &DAT_8007b358 + param_1 * 6;
      iVar4 = 0;
      puVar7 = &roominformationblock + param_1 * 0x50;
      do {
        pbVar10 = ptr_bgdata_room_fileposition_list;
        sVar2 = psVar8[3];
        iVar12 = (int)sVar2 + (int)*psVar8;
        iVar5 = iVar4 + 4;
        *(float *)(puVar7 + 0x38) = (float)(int)*psVar8;
        psVar8 = psVar8 + 1;
        *(float *)(puVar7 + 0x44) = (float)(int)sVar2;
        if (iVar12 < 0) {
          iVar12 += 1;
        }
        *(float *)((int)&pbVar10[param_1].pPointTableBin + iVar4) = (float)(iVar12 >> 1);
        iVar4 = iVar5;
        puVar7 = puVar7 + 4;
      } while (iVar5 != 0xc);
    }
  }
  else {
    iVar4 = param_1 * 0x50;
    cVar1 = (&DAT_80041416)[iVar4];
    if (cVar1 == '\0') {
      proc_7F0B6368(param_1);
      pbVar10 = ptr_bgdata_room_fileposition_list + param_1;
      psVar8 = *(short **)(&dword_80041418 + iVar4);
    }
    else {
      psVar8 = *(short **)(&dword_80041418 + iVar4);
    }
    psVar9 = (short *)(*(int *)(&DAT_80041430 + iVar4) + (int)psVar8);
    local_18 = 0x7fff;
    local_16 = 0x7fff;
    local_14 = 0x7fff;
    local_12 = -0x7fff;
    local_10 = 0x8001;
    local_e = 0x8001;
    if (psVar8 < psVar9) {
      do {
        psVar3 = &local_18;
        psVar6 = psVar8;
        do {
          sVar2 = *psVar6;
          if (sVar2 < *psVar3) {
            *psVar3 = sVar2;
            sVar2 = *psVar6;
            sVar11 = psVar3[3];
          }
          else {
            sVar11 = psVar3[3];
          }
          if (sVar11 < sVar2) {
            psVar3[3] = sVar2;
          }
          psVar3 = psVar3 + 1;
          psVar6 = psVar6 + 1;
        } while (psVar3 != &local_12);
        psVar8 = psVar8 + 8;
      } while (psVar8 < psVar9);
    }
    *(float *)(&DAT_8004144c + iVar4) = (float)pbVar10->pPointTableBin + 32767.00000000;
    *(float *)(&DAT_80041450 + iVar4) = (float)pbVar10->pPriMappingBin + 32767.00000000;
    *(float *)(&DAT_80041454 + iVar4) = (float)pbVar10->pSecMappingBin + 32767.00000000;
    *(float *)(&DAT_80041458 + iVar4) = (float)pbVar10->pPointTableBin + -32767.00000000;
    *(float *)(&DAT_8004145c + iVar4) = (float)pbVar10->pPriMappingBin + -32767.00000000;
    *(float *)(&DAT_80041460 + iVar4) = (float)pbVar10->pSecMappingBin + -32767.00000000;
    if (cVar1 == '\0') {
      proc_7F0B65C4(param_1);
    }
  }
  return;
}



int proc_7F0B95D8(ulonglong param_1)

{
  byte bVar1;
  int iVar2;
  bg_portal_data_entry *pbVar3;
  longlong lVar4;
  int iVar5;
  undefined1 *puVar6;
  bg_portal_entry *pbVar7;
  float fVar8;
  float fVar9;
  
  iVar2 = 0;
  if (ptr_bgdata_portals->offset_portal == NULL) {
    return 0;
  }
  bVar1 = ptr_bgdata_portals->connectedRoom1;
  pbVar3 = ptr_bgdata_portals;
  do {
    if (param_1 == (ulonglong)bVar1) {
      pbVar7 = pbVar3->offset_portal;
LAB_7f0b9614:
      lVar4 = 0;
      if (pbVar7->numPoints != '\0') {
        do {
          iVar5 = 0;
          puVar6 = &roominformationblock + (int)param_1 * 0x50;
          do {
            fVar8 = *(float *)((int)&(&pbVar7->point)[(int)lVar4].x + iVar5);
            iVar5 += 4;
            if (fVar8 < *(float *)(puVar6 + 0x38)) {
              *(float *)(puVar6 + 0x38) = fVar8;
              iVar2 += 1;
              fVar9 = *(float *)(puVar6 + 0x44);
            }
            else {
              fVar9 = *(float *)(puVar6 + 0x44);
            }
            if (fVar9 < fVar8) {
              *(float *)(puVar6 + 0x44) = fVar8;
              iVar2 += 1;
            }
            puVar6 = puVar6 + 4;
            pbVar7 = pbVar3->offset_portal;
          } while (iVar5 != 0xc);
          lVar4 = (longlong)((int)lVar4 + 1);
        } while (lVar4 < (longlong)(ulonglong)pbVar7->numPoints);
      }
      pbVar7 = pbVar3[1].offset_portal;
    }
    else {
      if (param_1 == (ulonglong)pbVar3->connectedRoom2) {
        pbVar7 = pbVar3->offset_portal;
        goto LAB_7f0b9614;
      }
      pbVar7 = pbVar3[1].offset_portal;
    }
    if (pbVar7 == NULL) {
      return iVar2;
    }
    bVar1 = pbVar3[1].connectedRoom1;
    pbVar3 = pbVar3 + 1;
  } while( true );
}



void proc_7F0B96CC(int param_1,float *param_2)

{
  float *pfVar1;
  byte *pbVar2;
  int iVar3;
  bg_portal_entry *pbVar4;
  u8 *puVar5;
  bg_portal_data_entry *pbVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  float fVar10;
  undefined auStackX0 [16];
  float fStack24;
  float fStack20;
  float fStack16;
  float fStack12;
  float fStack8;
  float fStack4;
  
  iVar3 = 0;
  pbVar6 = ptr_bgdata_portals + param_1;
  pbVar4 = pbVar6->offset_portal;
  pfVar1 = &fStack8;
  while (pfVar1 < register0x000000ec) {
    puVar5 = &pbVar4->numPoints + iVar3;
    iVar3 += 4;
    pfVar1[-1] = *(float *)(puVar5 + 4) - *(float *)(puVar5 + 0x10);
    pbVar4 = pbVar6->offset_portal;
    pfVar1 = pfVar1 + 1;
  }
  pfVar1[-1] = *(float *)(&pbVar4->numPoints + iVar3 + 4) -
               *(float *)(&pbVar4->numPoints + iVar3 + 0x10);
  iVar3 = 0;
  pbVar4 = pbVar6->offset_portal;
  pfVar1 = &fStack20;
  while (pfVar1 < &fStack12) {
    puVar5 = &pbVar4->numPoints + iVar3;
    iVar3 += 4;
    pfVar1[-1] = *(float *)(puVar5 + 0x1c) - *(float *)(puVar5 + 0x10);
    pbVar4 = pbVar6->offset_portal;
    pfVar1 = pfVar1 + 1;
  }
  pfVar1[-1] = *(float *)(&pbVar4->numPoints + iVar3 + 0x1c) -
               *(float *)(&pbVar4->numPoints + iVar3 + 0x10);
  *param_2 = fStack8 * fStack16 - fStack20 * fStack4;
  param_2[1] = fStack4 * fStack24 - fStack16 * fStack12;
  param_2[2] = fStack12 * fStack20 - fStack24 * fStack8;
  fVar7 = sqrtf(param_2[2] * param_2[2] + *param_2 * *param_2 + param_2[1] * param_2[1]);
  iVar3 = 0;
  if (fVar7 == 0.00000000) {
    fVar9 = *param_2;
  }
  else {
    fVar7 = 1.00000000 / fVar7;
    fVar9 = *param_2;
  }
  *param_2 = fVar9 * fVar7;
  param_2[1] = param_2[1] * fVar7;
  param_2[2] = param_2[2] * fVar7;
  pbVar4 = ptr_bgdata_portals[param_1].offset_portal;
  pbVar2 = &pbVar4->numPoints;
  fVar7 = flt_80058D54;
  fVar9 = flt_80058D58;
  if (*pbVar2 != 0) {
    fVar8 = flt_80058D54;
    fVar10 = flt_80058D58;
    do {
      iVar3 += 0xc;
      fVar9 = param_2[2] * (pbVar4->point).z +
              (pbVar4->point).x * *param_2 + (pbVar4->point).y * param_2[1];
      fVar7 = fVar9;
      if (fVar8 <= fVar9) {
        fVar7 = fVar8;
      }
      if (fVar9 <= fVar10) {
        fVar9 = fVar10;
      }
      pbVar4 = (bg_portal_entry *)&(pbVar4->point).z;
      fVar8 = fVar7;
      fVar10 = fVar9;
    } while (iVar3 < (int)((uint)*pbVar2 * 0xc));
  }
  param_2[3] = fVar7;
  param_2[4] = fVar9;
  return;
}



ulonglong proc_7F0B993C(int param_1)

{
  float afStack20 [2];
  float fStack12;
  
  proc_7F0B96CC(param_1,afStack20);
  return (ulonglong)(flt_80058D5C <= fStack12 * fStack12 + afStack20[0] * afStack20[0]);
}



float proc_7F0B9990(int param_1)

{
  byte bVar1;
  uint uVar2;
  uint uVar3;
  float fVar4;
  
  bVar1 = *(byte *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1);
  uVar3 = (int)(uint)bVar1 >> 4;
  fVar4 = (float)((uint)bVar1 & 0xf) * 0.25000000;
  if (uVar3 != 0) {
    uVar2 = -(uVar3 & 3) + uVar3;
    if (-(uVar3 & 3) != 0) {
      do {
        uVar3 -= 1;
        fVar4 = fVar4 + fVar4;
      } while (uVar2 != uVar3);
      if (uVar3 == 0) {
        return fVar4;
      }
    }
    do {
      uVar3 -= 4;
      fVar4 = fVar4 + fVar4 + fVar4 + fVar4;
      fVar4 = fVar4 + fVar4;
      fVar4 = fVar4 + fVar4;
    } while (uVar3 != 0);
  }
  return fVar4;
}



ulonglong proc_7F0B9A14(int param_1)

{
  return (ulonglong)*(byte *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1);
}



void proc_7F0B9A2C(int param_1)

{
  char cVar1;
  byte bVar2;
  
  cVar1 = *(char *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1);
  bVar2 = cVar1 + 1;
  if (cVar1 == -1) {
    bVar2 = 0xff;
  }
  else {
    if ((int)(uint)bVar2 >> 4 != 0) {
      bVar2 |= 8;
    }
  }
  *(byte *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1) = bVar2;
  return;
}



void proc_7F0B9A7C(int param_1)

{
  uint uVar1;
  byte bVar2;
  
  bVar2 = *(byte *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1);
  if ((int)(uint)bVar2 >> 4 == 0) {
    if (bVar2 != 0) {
      bVar2 -= 1;
    }
  }
  else {
    uVar1 = (uint)bVar2 - 1;
    bVar2 = (byte)uVar1;
    if ((uVar1 & 0xf) < 8) {
      bVar2 -= 8;
    }
  }
  *(byte *)((int)&ptr_bgdata_portals[param_1].controlbytes + 1) = bVar2;
  return;
}



ulonglong proc_7F0B9AE4(int param_1)

{
  return (ulonglong)*(byte *)&ptr_bgdata_portals[param_1].controlbytes & 1;
}



ulonglong proc_7F0B9B04(int param_1)

{
  return (ulonglong)*(byte *)&ptr_bgdata_portals[param_1].controlbytes & 2;
}



void proc_7F0B9B24(int param_1)

{
  *(byte *)&ptr_bgdata_portals[param_1].controlbytes =
       *(byte *)&ptr_bgdata_portals[param_1].controlbytes | 2;
  return;
}



void proc_7F0B9B44(int param_1)

{
  *(byte *)&ptr_bgdata_portals[param_1].controlbytes =
       *(byte *)&ptr_bgdata_portals[param_1].controlbytes & 0xfd;
  return;
}



void proc_7F0B9B64(int param_1)

{
  u8 uVar1;
  bg_portal_data_entry *pbVar2;
  
  pbVar2 = ptr_bgdata_portals + param_1;
  uVar1 = pbVar2->connectedRoom1;
  pbVar2->connectedRoom1 = pbVar2->connectedRoom2;
  ptr_bgdata_portals[param_1].connectedRoom2 = uVar1;
  return;
}



void proc_7F0B9B94(int param_1)

{
  byte bVar1;
  bool bVar2;
  float fVar3;
  float local_2c;
  float local_28;
  float local_24;
  float local_20;
  float local_1c;
  float local_18;
  float local_14;
  float local_10;
  float local_c;
  float local_8;
  float local_4;
  
  bVar1 = ptr_bgdata_portals[param_1].connectedRoom2;
  proc_7F0B92B4((uint)ptr_bgdata_portals[param_1].connectedRoom1,&local_c);
  proc_7F0B92B4((uint)bVar1,&local_18);
  proc_7F0B96CC(param_1,&local_2c);
  bVar2 = local_1c < local_4 * local_24 + local_2c * local_c + local_28 * local_8;
  if (bVar2) {
    proc_7F0B9B64(param_1);
    fVar3 = -local_1c;
    local_1c = -local_20;
    local_28 = -local_28;
    local_24 = -local_24;
    local_2c = -local_2c;
    local_20 = fVar3;
  }
  if ((local_10 * local_24 + local_2c * local_18 + local_28 * local_14 <= local_20) && (bVar2)) {
    proc_7F0B9B64(param_1);
  }
  return;
}



int proc_7F0B9CC8(ulonglong param_1,ulonglong param_2,float *param_3,float *param_4)

{
  byte bVar1;
  bg_portal_data_entry *pbVar3;
  longlong lVar2;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  iVar7 = -1;
  iVar4 = 0;
  if (ptr_bgdata_portals->offset_portal != NULL) {
    bVar1 = ptr_bgdata_portals->connectedRoom1;
    iVar6 = iVar7;
    iVar5 = 0;
    pbVar3 = ptr_bgdata_portals;
    while( true ) {
      if ((((param_1 == (ulonglong)bVar1) && (param_2 == (ulonglong)pbVar3->connectedRoom2)) ||
          ((iVar7 = iVar6, param_2 == (ulonglong)bVar1 &&
           (iVar7 = iVar6, param_1 == (ulonglong)pbVar3->connectedRoom2)))) &&
         (lVar2 = proc_7F0B9F14(iVar4,param_3,param_4), iVar7 = iVar4, lVar2 == 0)) {
        iVar7 = iVar6;
      }
      iVar4 += 1;
      pbVar3 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals[1].offset_portal + iVar5);
      if (pbVar3->offset_portal == NULL) break;
      bVar1 = pbVar3->connectedRoom1;
      iVar6 = iVar7;
      iVar5 = iVar5 + 8;
    }
  }
  return iVar7;
}



void proc_7F0B9DBC(int param_1,longlong param_2)

{
  *(byte *)&ptr_bgdata_portals[param_1].controlbytes =
       (*(byte *)&ptr_bgdata_portals[param_1].controlbytes | 1) ^ param_2 != 0;
  return;
}



undefined8 proc_7F0B9DE4(undefined8 param_1)

{
  return param_1;
}



void proc_7F0B9DF4(void)

{
  return;
}



void proc_7F0B9DFC(void)

{
  return;
}



int proc_7F0B9E04(float *param_1,float *param_2)

{
  longlong lVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  float fVar7;
  float fVar8;
  
  iVar5 = -1;
  iVar2 = 0;
  if (ptr_bgdata_portals->offset_portal != NULL) {
    fVar8 = flt_80058D60;
    iVar4 = iVar5;
    iVar3 = 0;
    do {
      lVar1 = proc_7F0B9F14(iVar2,param_1,param_2);
      fVar7 = fVar8;
      iVar5 = iVar4;
      if (lVar1 != 0) {
        fVar7 = DAT_80044900;
        if (DAT_80044900 < 0.00000000) {
          fVar7 = -DAT_80044900;
        }
        iVar5 = iVar2;
        if (fVar8 <= fVar7) {
          fVar7 = fVar8;
          iVar5 = iVar4;
        }
      }
      fVar8 = fVar7;
      iVar2 += 1;
      piVar6 = (int *)((int)&ptr_bgdata_portals[1].offset_portal + iVar3);
      iVar4 = iVar5;
      iVar3 = iVar3 + 8;
    } while (*piVar6 != 0);
  }
  return iVar5;
}



undefined8 proc_7F0B9F14(int param_1,float *param_2,float *param_3)

{
  int iVar1;
  bool bVar2;
  bool bVar3;
  bg_portal_entry *pbVar4;
  u8 *puVar5;
  undefined8 uVar6;
  int iVar7;
  ulonglong uVar8;
  bg_portal_data_entry *pbVar9;
  int iVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fStack64;
  float fStack60;
  float fStack56;
  float fStack52;
  
  proc_7F0B96CC(param_1,&fStack64);
  bVar3 = false;
  bVar2 = false;
  fVar13 = (fStack56 * param_2[2] + *param_2 * fStack64 + param_2[1] * fStack60) * room_data_float1;
  fVar11 = (fStack56 * param_3[2] + *param_3 * fStack64 + param_3[1] * fStack60) * room_data_float1;
  if (((fVar13 < fStack52) && (fVar11 < fStack52)) || ((fStack52 < fVar13 && (fStack52 < fVar11))))
  {
    uVar6 = 0;
  }
  else {
    pbVar9 = ptr_bgdata_portals + param_1;
    DAT_80044900 = (fVar13 + fVar11) * 0.50000000 - fStack52;
    iVar7 = 0;
    pbVar4 = pbVar9->offset_portal;
    uVar8 = (ulonglong)pbVar4->numPoints;
    if (pbVar4->numPoints != 0) {
      iVar10 = 1;
      while( true ) {
        iVar1 = iVar10 % (int)uVar8;
        if (uVar8 == 0) {
          trap(0x1c00);
        }
        if ((uVar8 == 0xffffffffffffffff) && ((longlong)iVar10 == -0x80000000)) {
          trap(0x1800);
        }
        fVar14 = (&pbVar4->point)[iVar1].x - *(float *)((int)&(pbVar4->point).x + iVar7);
        fVar11 = (&pbVar9->offset_portal->point)[iVar1].y -
                 *(float *)((int)&(pbVar9->offset_portal->point).y + iVar7);
        fVar15 = (&pbVar9->offset_portal->point)[iVar1].z -
                 *(float *)((int)&(pbVar9->offset_portal->point).z + iVar7);
        fVar12 = fVar11 * (param_3[2] - param_2[2]) - (param_3[1] - param_2[1]) * fVar15;
        fVar15 = fVar15 * (*param_3 - *param_2) - (param_3[2] - param_2[2]) * fVar14;
        fVar11 = fVar14 * (param_3[1] - param_2[1]) - (*param_3 - *param_2) * fVar11;
        if (fVar11 * fVar11 + fVar12 * fVar12 + fVar15 * fVar15 == 0.00000000) {
          return 0;
        }
        puVar5 = &pbVar9->offset_portal->numPoints + iVar7;
        if ((param_2[2] * fVar11 + fVar12 * *param_2 + fVar15 * param_2[1]) * room_data_float1 <
            *(float *)(puVar5 + 0xc) * fVar11 +
            fVar12 * *(float *)(puVar5 + 4) + fVar15 * *(float *)(puVar5 + 8)) {
          if (bVar2) {
            return 0;
          }
          bVar3 = true;
        }
        else {
          bVar2 = true;
          if (bVar3) {
            return 0;
          }
        }
        pbVar4 = pbVar9->offset_portal;
        iVar7 += 0xc;
        uVar8 = (ulonglong)pbVar4->numPoints;
        if ((longlong)uVar8 <= (longlong)iVar10) break;
        iVar10 += 1;
      }
    }
    uVar6 = 2;
    if (fVar13 < fStack52) {
      uVar6 = 1;
    }
  }
  return uVar6;
}



undefined8 proc_7F0BA26C(int param_1,float *param_2,float *param_3,int param_4)

{
  int iVar1;
  float *pfVar2;
  float *pfVar3;
  float fVar4;
  
  iVar1 = 0;
  while( true ) {
    fVar4 = *param_2;
    pfVar2 = (float *)(param_4 + iVar1);
    pfVar3 = (float *)(param_1 + iVar1);
    iVar1 += 4;
    param_2 = param_2 + 1;
    if ((fVar4 < *param_3) || (*pfVar2 < *pfVar3)) break;
    param_3 = param_3 + 1;
    if (iVar1 == 0xc) {
      return 1;
    }
  }
  return 0;
}



void proc_7F0BA2D4(float *param_1,float *param_2,int *param_3,int *param_4,int param_5)

{
  byte bVar1;
  bg_portal_data_entry *pbVar3;
  float *pfVar4;
  ulonglong uVar2;
  int *piVar5;
  float *pfVar6;
  int iVar7;
  longlong lVar8;
  bg_portal_data_entry *pbVar9;
  int iVar10;
  bg_portal_entry *pbVar11;
  int iVar12;
  int iVar13;
  ulonglong uVar14;
  float fVar15;
  float fVar16;
  int *piStack92;
  float fStack84;
  undefined4 uStack80;
  undefined4 uStack76;
  float fStack72;
  undefined4 uStack68;
  undefined4 uStack64;
  int iStack60;
  int iStack44;
  float fStack36;
  float fStack32;
  float fStack28;
  float fStack24;
  float fStack20;
  float fStack16;
  
  iVar12 = *param_4;
  fStack24 = *param_1 * room_data_float1;
  iStack44 = 0;
  fStack20 = param_1[1] * room_data_float1;
  fStack16 = param_1[2] * room_data_float1;
  fStack36 = *param_2 * room_data_float1;
  fStack32 = param_2[1] * room_data_float1;
  fStack28 = param_2[2] * room_data_float1;
  do {
    iStack60 = iVar12;
    if (iStack44 < iVar12) {
      piStack92 = param_3 + iStack44;
      pbVar3 = ptr_bgdata_portals;
      iStack60 = iVar12;
      do {
        iVar13 = 0;
        uVar14 = SEXT48(*piStack92);
        if (pbVar3->offset_portal != NULL) {
          bVar1 = *(byte *)&pbVar3->controlbytes;
          pbVar9 = pbVar3;
          do {
            if ((bVar1 & 1) == 0) {
              if ((uVar14 == (ulonglong)pbVar9->connectedRoom1) ||
                 (uVar14 == (ulonglong)pbVar9->connectedRoom2)) {
                fStack72 = dword_80044904;
                uStack68 = DAT_80044908;
                uStack64 = DAT_8004490c;
                lVar8 = 0;
                fStack84 = DAT_80044910;
                uStack80 = DAT_80044914;
                uStack76 = DAT_80044918;
                pbVar11 = pbVar9->offset_portal;
                if (pbVar11->numPoints != '\0') {
                  do {
                    iVar7 = 0;
                    pfVar6 = &fStack72;
                    pfVar4 = &fStack84;
                    do {
                      fVar15 = *(float *)((int)&(&pbVar11->point)[(int)lVar8].x + iVar7);
                      iVar7 += 4;
                      if (fVar15 < *pfVar6) {
                        *pfVar6 = fVar15;
                        fVar16 = *pfVar4;
                      }
                      else {
                        fVar16 = *pfVar4;
                      }
                      pfVar6 = pfVar6 + 1;
                      if (fVar16 < fVar15) {
                        *pfVar4 = fVar15;
                      }
                      pfVar4 = pfVar4 + 1;
                      pbVar11 = pbVar9->offset_portal;
                    } while (pfVar4 != &fStack72);
                    lVar8 = (longlong)((int)lVar8 + 1);
                  } while (lVar8 < (longlong)(ulonglong)pbVar11->numPoints);
                }
                lVar8 = proc_7F0BA26C((int)&fStack72,&fStack84,&fStack24,(int)&fStack36);
                if (lVar8 != 0) {
                  iVar10 = 0;
                  iVar7 = (int)&ptr_bgdata_portals->offset_portal + iVar13;
                  uVar2 = (ulonglong)*(byte *)(iVar7 + 4);
                  if (uVar14 == uVar2) {
                    uVar2 = (ulonglong)*(byte *)(iVar7 + 5);
                  }
                  piVar5 = param_3;
                  if (0 < iVar12) {
                    do {
                      if (uVar2 == (longlong)*piVar5) break;
                      iVar10 += 1;
                      piVar5 = piVar5 + 1;
                    } while (iVar10 != iVar12);
                  }
                  if (iVar10 == iVar12) {
                    if (iVar12 < param_5) {
                      param_3[iVar12] = (int)uVar2;
                      iVar12 += 1;
                    }
                    if (param_5 <= iVar12) {
                      *param_4 = iVar12;
                      return;
                    }
                  }
                }
                pbVar9 = (bg_portal_data_entry *)((int)&ptr_bgdata_portals->offset_portal + iVar13);
                pbVar11 = pbVar9[1].offset_portal;
                pbVar3 = ptr_bgdata_portals;
              }
              else {
                pbVar11 = pbVar9[1].offset_portal;
              }
            }
            else {
              pbVar11 = pbVar9[1].offset_portal;
            }
            iVar13 += 8;
            if (pbVar11 == NULL) break;
            bVar1 = *(byte *)&pbVar9[1].controlbytes;
            pbVar9 = pbVar9 + 1;
          } while( true );
        }
        iStack44 += 1;
        piStack92 = piStack92 + 1;
      } while (iStack44 < iStack60);
    }
    if (iVar12 == iStack60) {
      *param_4 = iVar12;
      return;
    }
  } while( true );
}



void proc_7F0BA5C0(int *param_1,int *param_2)

{
  u64 *puVar1;
  int iVar2;
  int iVar3;
  
  if (param_1 < param_2) {
    do {
      if (dword_80044940[0]._0_4_ != 0) {
        iVar3 = *param_1;
        iVar2 = dword_80044940[0]._0_4_;
        puVar1 = dword_80044940;
        while( true ) {
          if (iVar3 == iVar2) {
            if (param_1[1] == *(int *)((int)puVar1 + 4)) {
              *param_1 = *(int *)(puVar1 + 1);
              param_1[1] = *(int *)((int)puVar1 + 0xc);
              iVar2 = *(int *)(puVar1 + 2);
            }
            else {
              iVar2 = *(int *)(puVar1 + 2);
            }
          }
          else {
            iVar2 = *(int *)(puVar1 + 2);
          }
          puVar1 = puVar1 + 2;
          if (iVar2 == 0) break;
          iVar3 = *param_1;
        }
      }
      param_1 = param_1 + 2;
    } while (param_1 < param_2);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0ba668) overlaps instruction at (ram,0x7f0ba664)
// 

void proc_7F0BA640(int *param_1,int *param_2,int param_3)

{
  char cVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  
  if ((param_2 != NULL) && (param_1 < param_2)) goto code_r0x7f0ba66c;
  if (param_2 == NULL) {
    cVar1 = *(char *)param_1;
    while (cVar1 != -0x48) {
code_r0x7f0ba66c:
      do {
        piVar2 = (int *)(&off_80044D88)[param_3];
        iVar3 = *piVar2;
        if (iVar3 != 0) {
          iVar4 = *param_1;
          while( true ) {
            if (iVar4 == iVar3) {
              if (param_1[1] == piVar2[1]) {
                dword_80044DB0 += 1;
                *param_1 = piVar2[2];
                param_1[1] = piVar2[3];
                iVar3 = piVar2[4];
              }
              else {
                iVar3 = piVar2[4];
              }
            }
            else {
              iVar3 = piVar2[4];
            }
            piVar2 = piVar2 + 4;
            if (iVar3 == 0) break;
            iVar4 = *param_1;
          }
        }
        param_1 = param_1 + 2;
      } while ((param_2 != NULL) && (param_1 < param_2));
      if (param_2 != NULL) {
        return;
      }
      cVar1 = *(char *)param_1;
    }
  }
  return;
}



void proc_7F0BA720(int param_1,int param_2)

{
  return;
}



undefined4 * get_ptr_currentdata(void)

{
  return &ptr_current_data;
}



f32 get_near_fog_value(void)

{
  return (f32)near_fog_value;
}



float square_near_fog_value(void)

{
  return near_fog_value * near_fog_value;
}



void copy_table1_env_to_current(f32 param_1,f32 param_2)

{
  int in_a0_lo;
  f32 fVar1;
  float fVar2;
  float fVar3;
  float fStack8;
  float fStack4;
  
  set_page_height(*(f32 *)(in_a0_lo + 4),*(f32 *)(in_a0_lo + 8));
  video_related_27(&fStack8);
  fVar1 = proc_7F0B4878();
  fStack8 = fStack8 / (float)fVar1;
  bg_dif_light = (float)*(int *)(in_a0_lo + 0x20) / 1000.00000000;
  ptr_nearfog_enviroment_values = in_a0_lo + 0xc;
  buffer_far_ambiant = (float)*(int *)(in_a0_lo + 0x24) / 1000.00000000;
  fVar3 = fStack4 / (float)fVar1 - fStack8;
  buffer_far_pervasiveness = *(float *)(in_a0_lo + 4) / (float)fVar1;
  far_fog = *(float *)(in_a0_lo + 8) / (float)fVar1;
  fVar2 = 128.00000000 / (buffer_far_ambiant - bg_dif_light);
  if (*(float *)(in_a0_lo + 0xc) == 0.00000000) {
    ptr_nearfog_enviroment_values = 0;
  }
  near_fog_value = fStack8 + fVar3 * buffer_far_ambiant;
  near_fog_times_intensity = fStack8 + fVar3 * bg_dif_light;
  ptr_current_data = *(undefined4 *)(in_a0_lo + 0x20);
  DAT_80044dd0 = *(undefined4 *)(in_a0_lo + 0x24);
  DAT_80044dd4 = *(undefined *)(in_a0_lo + 0x28);
  DAT_80044dd5 = *(undefined *)(in_a0_lo + 0x29);
  DAT_80044dd6 = *(undefined *)(in_a0_lo + 0x2a);
  DAT_80044dd7 = *(undefined *)(in_a0_lo + 0x2b);
  DAT_80044dd8 = *(undefined4 *)(in_a0_lo + 0x2c);
  DAT_80044ddc = *(undefined2 *)(in_a0_lo + 0x30);
  DAT_80044de0 = *(undefined4 *)(in_a0_lo + 0x34);
  DAT_80044de4 = *(undefined4 *)(in_a0_lo + 0x38);
  DAT_80044de8 = *(undefined4 *)(in_a0_lo + 0x3c);
  DAT_80044dec = *(undefined *)(in_a0_lo + 0x40);
  DAT_80044df0 = *(undefined4 *)(in_a0_lo + 0x44);
  DAT_80044df4 = *(undefined2 *)(in_a0_lo + 0x48);
  DAT_80044df8 = *(undefined4 *)(in_a0_lo + 0x4c);
  DAT_80044dfc = *(undefined4 *)(in_a0_lo + 0x50);
  DAT_80044e00 = *(undefined4 *)(in_a0_lo + 0x54);
  DAT_80044e04 = *(undefined4 *)(in_a0_lo + 0x58);
  sky_enabled = 1;
  DAT_800825d8 = ((-fVar2 * far_fog * (buffer_far_pervasiveness + 1.00000000)) /
                 (far_fog - buffer_far_pervasiveness)) / 255.00000000;
  DAT_800825dc = (((far_fog + 1.00000000) * fVar2) / (far_fog - buffer_far_pervasiveness) +
                 ((0.50000000 - bg_dif_light) * 256.00000000) / (buffer_far_ambiant - bg_dif_light))
                 / 255.00000000;
  return;
}



void copy_table2_env_to_current(int param_1)

{
  DAT_80044dd4 = *(undefined *)(param_1 + 4);
  DAT_80044dd5 = *(undefined *)(param_1 + 5);
  DAT_80044dd6 = *(undefined *)(param_1 + 6);
  DAT_80044dd7 = *(undefined *)(param_1 + 7);
  DAT_80044dd8 = *(undefined4 *)(param_1 + 8);
  DAT_80044ddc = *(undefined2 *)(param_1 + 0xc);
  DAT_80044de0 = *(undefined4 *)(param_1 + 0x10);
  DAT_80044de4 = *(undefined4 *)(param_1 + 0x14);
  DAT_80044de8 = *(undefined4 *)(param_1 + 0x18);
  DAT_80044dec = *(undefined *)(param_1 + 0x1c);
  DAT_80044df0 = *(undefined4 *)(param_1 + 0x20);
  DAT_80044df4 = *(undefined2 *)(param_1 + 0x24);
  DAT_80044df8 = *(undefined4 *)(param_1 + 0x28);
  DAT_80044dfc = *(undefined4 *)(param_1 + 0x2c);
  DAT_80044e00 = *(undefined4 *)(param_1 + 0x30);
  DAT_80044e04 = *(undefined4 *)(param_1 + 0x34);
  return;
}



void proc_7F0BAA5C(int param_1)

{
  return;
}



void load_enviroment(int stagenum,int multi)

{
  ulonglong uVar1;
  u32 uVar2;
  fog_element *pfVar3;
  fog_element *pfVar4;
  fog_element2 *pfVar5;
  fog_element2 *pfVar6;
  f32 extraout_f12;
  f32 extraout_f14;
  
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    uVar1 = 0;
  }
  near_fog_value = default_near_fog;
  near_fog_times_intensity = 0.00000000;
  if (multi != 0) {
    pfVar4 = fog_tables;
    uVar2 = fog_tables[0].stageID;
    while (uVar2 != 0) {
      if (stagenum + 900U == uVar2) {
        env_table_match_end = pfVar4 + 1;
        env_table_hit = pfVar4;
        env_table_match_start = pfVar4;
        copy_table1_env_to_current(extraout_f12,extraout_f14);
        return;
      }
      uVar2 = pfVar4[1].stageID;
      pfVar4 = pfVar4 + 1;
    }
  }
  pfVar4 = fog_tables;
  if (fog_tables[0].stageID != 0) {
    uVar2 = fog_tables[0].stageID;
    pfVar3 = pfVar4;
    do {
      if (stagenum + (int)uVar1 * 100 == uVar2) {
        env_table_match_end = pfVar3 + 1;
        env_table_hit = pfVar3;
        env_table_match_start = pfVar3;
        copy_table1_env_to_current(extraout_f12,extraout_f14);
        return;
      }
      uVar2 = pfVar3[1].stageID;
      pfVar3 = pfVar3 + 1;
    } while (uVar2 != 0);
  }
  if ((1 < (longlong)uVar1) && (fog_tables[0].stageID != 0)) {
    uVar2 = fog_tables[0].stageID;
    do {
      if ((int)uVar1 * 100 == uVar2) {
        env_table_match_end = pfVar4 + 1;
        env_table_hit = pfVar4;
        env_table_match_start = pfVar4;
        copy_table1_env_to_current(extraout_f12,extraout_f14);
        return;
      }
      uVar2 = pfVar4[1].stageID;
      pfVar4 = pfVar4 + 1;
    } while (uVar2 != 0);
  }
  set_page_height(15.00000000,(f32)flt_80058D74);
  sky_enabled = 0;
  pfVar6 = NULL;
  pfVar5 = fog_tables2;
  uVar2 = fog_tables2[0].stageID;
  while (uVar2 != 0) {
    if (stagenum == uVar2) {
      uVar2 = pfVar5[1].stageID;
      pfVar6 = pfVar5;
    }
    else {
      uVar2 = pfVar5[1].stageID;
    }
    pfVar5 = pfVar5 + 1;
  }
  if (pfVar6 == NULL) {
    pfVar6 = fog_tables2;
  }
  copy_table2_env_to_current((int)pfVar6);
  env_table_hit = NULL;
  return;
}



void switch_to_solosky2(float param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  float fVar7;
  float fVar8;
  float fVar9;
  
  puVar1 = env_table_match_start;
  puVar4 = env_table_match_start + 0x15;
  puVar2 = &DAT_800825f8;
  puVar6 = env_table_match_start;
  do {
    puVar5 = puVar6;
    puVar3 = puVar2;
    puVar6 = puVar5 + 3;
    *puVar3 = *puVar5;
    puVar3[1] = puVar5[1];
    puVar3[2] = puVar5[2];
    puVar2 = puVar3 + 3;
  } while (puVar6 != puVar4);
  puVar3[3] = *puVar6;
  puVar3[4] = puVar5[4];
  DAT_800825fc = (float)puVar1[1] +
                 param_1 * (*(float *)(env_table_match_end + 4) - (float)puVar1[1]);
  DAT_80082600 = (float)puVar1[2] +
                 param_1 * (*(float *)(env_table_match_end + 8) - (float)puVar1[2]);
  fVar8 = (float)puVar1[8];
  DAT_80082618 = (int)(fVar8 + param_1 * ((float)*(int *)(env_table_match_end + 0x20) - fVar8));
  DAT_8008261c = (int)((float)puVar1[9] +
                      param_1 * ((float)*(int *)(env_table_match_end + 0x24) - (float)puVar1[9]));
  fVar9 = (float)(uint)*(byte *)(puVar1 + 10);
  if (false) {
    fVar9 = fVar9 + 4294967296.00000000;
  }
  fVar7 = (float)(uint)*(byte *)(env_table_match_end + 0x28);
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar9 = fVar9 + param_1 * (fVar7 - fVar9);
  if (false) {
    fVar7 = ROUND(fVar9);
  }
  else {
    fVar7 = FLOOR(fVar9);
  }
  DAT_80082620 = (byte)(int)fVar7;
  if (false) {
    if (false) {
      fVar9 = ROUND(fVar9 - 2147483648.00000000);
    }
    else {
      fVar9 = FLOOR(fVar9 - 2147483648.00000000);
    }
    if (false) goto LAB_7f0bae60;
    DAT_80082620 = (byte)(int)fVar9;
  }
  else {
    if ((int)fVar7 < 0) {
LAB_7f0bae60:
      DAT_80082620 = 0xff;
    }
  }
  fVar9 = (float)(uint)*(byte *)((int)puVar1 + 0x29);
  if (false) {
    fVar9 = fVar9 + 4294967296.00000000;
  }
  DAT_80082620 &= 0xf8;
  fVar7 = (float)(uint)*(byte *)(env_table_match_end + 0x29);
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar9 = fVar9 + param_1 * (fVar7 - fVar9);
  if (false) {
    fVar7 = ROUND(fVar9);
  }
  else {
    fVar7 = FLOOR(fVar9);
  }
  DAT_80082621 = (byte)(int)fVar7;
  if (false) {
    if (false) {
      fVar9 = ROUND(fVar9 - 2147483648.00000000);
    }
    else {
      fVar9 = FLOOR(fVar9 - 2147483648.00000000);
    }
    if (false) goto LAB_7f0baf44;
    DAT_80082621 = (byte)(int)fVar9;
  }
  else {
    if ((int)fVar7 < 0) {
LAB_7f0baf44:
      DAT_80082621 = 0xff;
    }
  }
  DAT_80082621 &= 0xf8;
  fVar9 = (float)(uint)*(byte *)((int)puVar1 + 0x2a);
  if (false) {
    fVar9 = fVar9 + 4294967296.00000000;
  }
  fVar7 = (float)(uint)*(byte *)(env_table_match_end + 0x2a);
  if (false) {
    fVar7 = fVar7 + 4294967296.00000000;
  }
  fVar9 = fVar9 + param_1 * (fVar7 - fVar9);
  if (false) {
    fVar7 = ROUND(fVar9);
  }
  else {
    fVar7 = FLOOR(fVar9);
  }
  DAT_80082622 = (byte)(int)fVar7;
  if (false) {
    if (false) {
      fVar9 = ROUND(fVar9 - 2147483648.00000000);
    }
    else {
      fVar9 = FLOOR(fVar9 - 2147483648.00000000);
    }
    if (true) {
      DAT_80082622 = (byte)(int)fVar9;
      goto LAB_7f0bb040;
    }
  }
  else {
    if (-1 < (int)fVar7) goto LAB_7f0bb040;
  }
  DAT_80082622 = 0xff;
LAB_7f0bb040:
  DAT_80082622 &= 0xf8;
  copy_table1_env_to_current((f32)param_1,(f32)fVar8);
  return;
}



undefined4 * proc_7F0BB070(undefined4 *DL,longlong param_2)

{
  int iVar1;
  int iVar2;
  
  if (sky_enabled != 0) {
    if (param_2 == 0) {
      *DL = 0xf8000000;
      DL[1] = (uint)DAT_80044dd4 << 0x18 | (uint)DAT_80044dd5 << 0x10 | (uint)DAT_80044dd6 << 8 |
              0xff;
      DL[2] = 0xbc000008;
      iVar1 = DAT_80044dd0 - ptr_current_data;
      iVar2 = ptr_current_data * -0x100 + 0x1f400;
      DL[3] = 0x1f400 / iVar1 << 0x10 | iVar2 / iVar1 & 0xffffU;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (false)) {
        trap(0x1800);
      }
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
    }
    else {
      *DL = 0xf8000000;
      DL[1] = (uint)DAT_80044dd4 << 0x18 | (uint)DAT_80044dd5 << 0x10 | (uint)DAT_80044dd6 << 8 |
              0xff;
      DL[2] = 0xbc000008;
      iVar1 = DAT_80044dd0 - ptr_current_data;
      iVar2 = ptr_current_data * -0x100 + 0x1f400;
      DL[3] = 0x1f400 / iVar1 << 0x10 | iVar2 / iVar1 & 0xffffU;
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (false)) {
        trap(0x1800);
      }
      if (iVar1 == 0) {
        trap(0x1c00);
      }
      if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
        trap(0x1800);
      }
    }
    DL[5] = 0x10000;
    DL[4] = 0xb7000000;
    DL[7] = 0x20;
    DL[6] = 0xba000402;
    return DL + 8;
  }
  return DL;
}



undefined4 * proc_7F0BB298(undefined4 *param_1)

{
  if (sky_enabled == 0) {
    return param_1;
  }
  *param_1 = 0xb6000000;
  param_1[1] = 0x10000;
  return param_1 + 2;
}



undefined8 proc_7F0BB2C8(float *param_1,float param_2)

{
  undefined8 uVar1;
  xyzpoint *pxVar2;
  float *pfVar3;
  float in_a1_lo;
  
  if (sky_enabled == 0) {
    uVar1 = 1;
  }
  else {
    pxVar2 = get_BONDdata_position();
    pfVar3 = (float *)proc_7F0783C4();
    uVar1 = 1;
    if (near_fog_value + in_a1_lo <
        pfVar3[2] * (param_1[2] - pxVar2->z) +
        (*param_1 - pxVar2->x) * *pfVar3 + (param_1[1] - pxVar2->y) * pfVar3[1]) {
      uVar1 = 0;
    }
  }
  return uVar1;
}



undefined4 return_nearfog_values(void)

{
  return ptr_nearfog_enviroment_values;
}



undefined8 if_sky_present_convert_values(int param_1,float *param_2)

{
  float fVar1;
  
  if (sky_enabled == 0) {
    return 2;
  }
  if (0.00000000 <= *(float *)(param_1 + 0x18)) {
    fVar1 = (float)(uint)DAT_80044dd4;
    if (false) {
      fVar1 = fVar1 + 4294967296.00000000;
    }
    *param_2 = fVar1 / 255.00000000;
    fVar1 = (float)(uint)DAT_80044dd5;
    if (false) {
      fVar1 = fVar1 + 4294967296.00000000;
    }
    param_2[1] = fVar1 / 255.00000000;
    fVar1 = (float)(uint)DAT_80044dd6;
    if (false) {
      fVar1 = fVar1 + 4294967296.00000000;
    }
    param_2[2] = fVar1 / 255.00000000;
    param_2[3] = DAT_800825d8 / *(float *)(param_1 + 0x18) + DAT_800825dc;
    if (0.00000000 <= param_2[3]) {
      if (param_2[3] <= 1.00000000) {
        return 1;
      }
      return 0;
    }
    return 2;
  }
  return 2;
}



void init_lightfixture_tables(void)

{
  undefined2 *puVar1;
  
  puVar1 = &light_fixture_table;
  do {
    puVar1 = puVar1 + 6;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 < &cur_entry_lightfixture_table);
  puVar1 = &DAT_80082b18;
  do {
    puVar1 = puVar1 + 8;
    puVar1[2] = 0;
    puVar1[4] = 0;
    puVar1[6] = 0;
    *puVar1 = 0;
    puVar1 = puVar1;
  } while (puVar1 != (undefined2 *)&DAT_80083318);
  dword_80046030 = 0;
  return;
}



int get_index_of_current_entry_in_init_lightfixture_table(void)

{
  short *psVar1;
  int iVar2;
  
  psVar1 = &light_fixture_table;
  iVar2 = 0;
  while( true ) {
    if (*psVar1 == 0) {
      return iVar2;
    }
    if (psVar1[6] == 0) {
      return iVar2 + 1;
    }
    if (psVar1[0xc] == 0) {
      return iVar2 + 2;
    }
    if (psVar1[0x12] == 0) break;
    iVar2 += 4;
    psVar1 = psVar1 + 0x18;
    if (iVar2 == 100) {
      return 100;
    }
  }
  return iVar2 + 3;
}



void add_entry_to_init_lightfixture_table(undefined4 param_1)

{
  int iVar1;
  
  iVar1 = get_index_of_current_entry_in_init_lightfixture_table();
  cur_entry_lightfixture_table = (short)iVar1;
  iVar1 = (int)cur_entry_lightfixture_table;
  if (cur_entry_lightfixture_table != 100) {
    (&light_fixture_table)[iVar1 * 6] = index_of_cur_entry_lightfixture_table;
    (&DAT_80082664)[iVar1 * 3] = param_1;
  }
  return;
}



void save_ptrDL_enpoint_to_current_init_lightfixture_table(undefined4 param_1)

{
  if (cur_entry_lightfixture_table != 100) {
    (&DAT_80082668)[(int)cur_entry_lightfixture_table * 3] = param_1;
  }
  return;
}



undefined8 check_if_imageID_is_light(longlong imageID)

{
  if ((((((imageID != 0xc9) && (imageID != 0xcb)) && (imageID != 0xcd)) &&
       ((imageID != 0xfc && (imageID != 0xfe)))) &&
      ((imageID != 0xff && ((imageID != 0x100 && (imageID != 0x1ac)))))) &&
     ((imageID != 0x3d6 && (imageID != 0x567)))) {
    return 0;
  }
  return 1;
}



uint return_ptr_vertex_of_entry_room(char *entry,int room)

{
  uint uVar1;
  char *pcVar2;
  char cVar3;
  
  if (*entry != '\x04') {
    cVar3 = entry[-8];
    pcVar2 = entry;
    while (entry = pcVar2 + -8, cVar3 != '\x04') {
      cVar3 = pcVar2[-0x10];
      pcVar2 = entry;
    }
  }
  uVar1 = *(uint *)(entry + 4);
  if ((uVar1 & 0xff000000) == 0xe000000) {
    uVar1 = *(int *)(&dword_80041418 + room * 0x50) + (uVar1 & 0xffffff);
  }
  return uVar1;
}



void proc_7F0BB6F4(undefined8 param_1,ulonglong param_2)

{
  if (param_2 < 5) {
                    // WARNING: Could not recover jumptable at 0x7f0bb70c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)(&jpt_700EF63C)[(int)param_2])();
    return;
  }
  return;
}



void proc_7F0BB874(undefined8 param_1,ulonglong param_2,int param_3,undefined2 *param_4,
                  undefined2 *param_5,undefined2 *param_6)

{
  uint uVar1;
  int iStack12;
  int iStack8;
  int iStack4;
  
  proc_7F0BB6F4(param_1,param_2);
  uVar1 = return_ptr_vertex_of_entry_room((char *)param_1,param_3);
  *param_4 = *(undefined2 *)(uVar1 + iStack4 * 0x10);
  param_4[1] = *(undefined2 *)(uVar1 + iStack4 * 0x10 + 2);
  param_4[2] = *(undefined2 *)(uVar1 + iStack4 * 0x10 + 4);
  *param_5 = *(undefined2 *)(uVar1 + iStack8 * 0x10);
  param_5[1] = *(undefined2 *)(uVar1 + iStack8 * 0x10 + 2);
  param_5[2] = *(undefined2 *)(uVar1 + iStack8 * 0x10 + 4);
  *param_6 = *(undefined2 *)(uVar1 + iStack12 * 0x10);
  param_6[1] = *(undefined2 *)(uVar1 + iStack12 * 0x10 + 2);
  param_6[2] = *(undefined2 *)(uVar1 + iStack12 * 0x10 + 4);
  return;
}



void proc_7F0BB978(ulonglong param_1)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  ushort *puVar4;
  
  iVar2 = *(int *)(&dword_80041418 + (int)param_1 * 0x50);
  puVar4 = &DAT_80082b18;
  uVar1 = DAT_80082b18;
  while( true ) {
    if (param_1 == (ulonglong)uVar1) {
      iVar3 = iVar2 + (uint)puVar4[1] * 0x10;
      *(byte *)(iVar3 + 0xc) = *(byte *)(iVar3 + 0xc) >> 2;
      iVar3 = iVar2 + (uint)puVar4[1] * 0x10;
      *(byte *)(iVar3 + 0xd) = *(byte *)(iVar3 + 0xd) >> 2;
      iVar3 = iVar2 + (uint)puVar4[1] * 0x10;
      *(byte *)(iVar3 + 0xe) = *(byte *)(iVar3 + 0xe) >> 2;
      iVar3 = iVar2 + (uint)puVar4[1] * 0x10;
      *(byte *)(iVar3 + 0xf) = *(byte *)(iVar3 + 0xf) >> 2;
    }
    puVar4 = puVar4 + 2;
    if (puVar4 == (ushort *)&DAT_80083318) break;
    uVar1 = *puVar4;
  }
  return;
}



void proc_7F0BBA20(int param_1,ulonglong param_2)

{
  int iVar1;
  int iVar2;
  longlong lVar3;
  
  lVar3 = proc_7F0BBADC(param_1,param_2);
  iVar2 = dword_80046030;
  if (lVar3 == 0) {
    iVar1 = *(int *)(&dword_80041418 + (int)param_2 * 0x50);
    (&DAT_80082b18)[dword_80046030 * 2] = (short)param_2;
    (&DAT_80082b1a)[iVar2 * 2] = (short)((uint)(param_1 - iVar1) >> 4);
    *(byte *)(param_1 + 0xc) = *(byte *)(param_1 + 0xc) >> 2;
    *(byte *)(param_1 + 0xd) = *(byte *)(param_1 + 0xd) >> 2;
    *(byte *)(param_1 + 0xe) = *(byte *)(param_1 + 0xe) >> 2;
    *(byte *)(param_1 + 0xf) = *(byte *)(param_1 + 0xf) >> 2;
    dword_80046030 += 1;
    if (0x1ff < dword_80046030) {
      dword_80046030 = 0;
    }
  }
  return;
}



undefined8 proc_7F0BBADC(int param_1,ulonglong param_2)

{
  ushort uVar1;
  ushort *puVar2;
  ulonglong uVar3;
  
  uVar3 = SEXT48((int)((uint)(param_1 - *(int *)(&dword_80041418 + (int)param_2 * 0x50)) >> 4));
  puVar2 = &DAT_80082b18;
  uVar1 = DAT_80082b18;
  while( true ) {
    if (param_2 == (ulonglong)uVar1) {
      if (uVar3 == (ulonglong)puVar2[1]) {
        return 1;
      }
      uVar1 = puVar2[2];
    }
    else {
      uVar1 = puVar2[2];
    }
    if (param_2 == (ulonglong)uVar1) {
      if (uVar3 == (ulonglong)puVar2[3]) {
        return 1;
      }
      uVar1 = puVar2[4];
    }
    else {
      uVar1 = puVar2[4];
    }
    if (param_2 == (ulonglong)uVar1) {
      if (uVar3 == (ulonglong)puVar2[5]) {
        return 1;
      }
      uVar1 = puVar2[6];
    }
    else {
      uVar1 = puVar2[6];
    }
    if ((param_2 == (ulonglong)uVar1) && (uVar3 == (ulonglong)puVar2[7])) break;
    puVar2 = puVar2 + 8;
    if (puVar2 == (ushort *)&DAT_80083318) {
      return 0;
    }
    uVar1 = *puVar2;
  }
  return 1;
}



void proc_7F0BBBA8(undefined8 param_1,ulonglong param_2,int param_3)

{
  uint uVar1;
  int iStack16;
  int iStack12;
  int iStack8;
  
  proc_7F0BB6F4(param_1,param_2);
  uVar1 = return_ptr_vertex_of_entry_room((char *)param_1,param_3);
  proc_7F0BBA20(iStack8 * 0x10 + uVar1,(longlong)param_3);
  proc_7F0BBA20(iStack12 * 0x10 + uVar1,(longlong)param_3);
  proc_7F0BBA20(iStack16 * 0x10 + uVar1,(longlong)param_3);
  return;
}



int proc_7F0BBC30(undefined8 param_1,ulonglong param_2,int param_3)

{
  uint uVar4;
  undefined8 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  int iStack16;
  int iStack12;
  int iStack8;
  
  proc_7F0BB6F4(param_1,param_2);
  uVar4 = return_ptr_vertex_of_entry_room((char *)param_1,param_3);
  uVar1 = proc_7F0BBADC(iStack12 * 0x10 + uVar4,(longlong)param_3);
  uVar2 = proc_7F0BBADC(iStack8 * 0x10 + uVar4,(longlong)param_3);
  uVar3 = proc_7F0BBADC(iStack16 * 0x10 + uVar4,(longlong)param_3);
  return (int)uVar3 + (int)uVar2 + (int)uVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F0BBCCC(void)

{
  ushort uVar1;
  short *psVar2;
  short *in_a0_lo;
  ulonglong in_a1;
  int iVar3;
  int iVar4;
  int iVar5;
  ushort *puVar6;
  f32 fVar7;
  
  puVar6 = &DAT_80082b18;
  uVar1 = DAT_80082b18;
  do {
    if (in_a1 == (ulonglong)uVar1) {
      psVar2 = (short *)((uint)puVar6[1] * 0x10 + *(int *)(&dword_80041418 + (int)in_a1 * 0x50));
      iVar3 = (int)*psVar2 - (int)*in_a0_lo;
      iVar4 = (int)psVar2[1] - (int)in_a0_lo[1];
      iVar5 = (int)psVar2[2] - (int)in_a0_lo[2];
      if (iVar3 < 0) {
        iVar3 = -iVar3;
      }
      if (iVar4 < 0) {
        iVar4 = -iVar4;
      }
      if (iVar5 < 0) {
        iVar5 = -iVar5;
      }
      fVar7 = proc_7F0B483C();
      if (iVar3 + iVar4 + iVar5 < (int)((float)fVar7 * 100.00000000)) {
        return 1;
      }
    }
    puVar6 = puVar6 + 2;
    if (puVar6 == (ushort *)&DAT_80083318) {
      return 0;
    }
    uVar1 = *puVar6;
  } while( true );
}



void proc_7F0BBE0C(ulonglong param_1,ulonglong param_2,short param_3)

{
  short sVar1;
  bool bVar2;
  int iVar5;
  char cVar6;
  longlong lVar3;
  ulonglong uVar4;
  ulonglong uVar7;
  int iVar8;
  short *psVar9;
  int iVar11;
  ulonglong uVar10;
  char *pcVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  float fVar17;
  f32 fVar18;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float fStack112;
  float fStack108;
  float fStack104;
  float fStack100;
  float fStack96;
  float fStack92;
  float fStack88;
  float fStack84;
  float fStack80;
  short sStack74;
  short sStack68;
  undefined2 auStack48 [4];
  undefined2 auStack40 [4];
  undefined2 auStack32 [4];
  short sStack24;
  short sStack22;
  short sStack20;
  short sStack16;
  short sStack14;
  short sStack12;
  short sStack8;
  short sStack6;
  short sStack4;
  
  psVar9 = &light_fixture_table;
  sVar1 = light_fixture_table;
  while (((param_3 != sVar1 || (param_1 < (ulonglong)(longlong)*(int *)(psVar9 + 2))) ||
         ((ulonglong)(longlong)*(int *)(psVar9 + 4) <= param_1))) {
    psVar9 = psVar9 + 6;
    if (psVar9 == &cur_entry_lightfixture_table) {
      return;
    }
    sVar1 = *psVar9;
  }
  iVar5 = proc_7F0BBC30(param_1,param_2,(int)sVar1);
  if (iVar5 == 0) {
    proc_7F0BBBA8(param_1,param_2,(int)*psVar9);
    proc_7F0BB874(param_1,param_2,(int)*psVar9,&sStack8,&sStack16,&sStack24);
    iVar5 = ((int)sStack8 - (int)sStack16) * 0x10000 >> 0x10;
    iVar13 = ((int)sStack8 - (int)sStack24) * 0x10000 >> 0x10;
    iVar8 = ((int)sStack6 - (int)sStack14) * 0x10000 >> 0x10;
    sStack68 = sStack14 - sStack22;
    iVar16 = ((int)sStack16 - (int)sStack24) * 0x10000 >> 0x10;
    iVar11 = ((int)sStack4 - (int)sStack12) * 0x10000 >> 0x10;
    iVar15 = ((int)sStack4 - (int)sStack20) * 0x10000 >> 0x10;
    iVar14 = ((int)sStack6 - (int)sStack22) * 0x10000 >> 0x10;
    sStack74 = sStack12 - sStack20;
    fVar17 = sqrtf((float)(iVar5 * iVar5 + iVar8 * iVar8 + iVar11 * iVar11));
    fVar18 = proc_7F0B4830();
    fStack80 = 10.00000000 / ((float)fVar18 * fVar17);
    fVar17 = sqrtf((float)(iVar13 * iVar13 + iVar14 * iVar14 + iVar15 * iVar15));
    fVar18 = proc_7F0B4830();
    fStack84 = 10.00000000 / ((float)fVar18 * fVar17);
    fVar17 = sqrtf((float)(iVar16 * iVar16 + (int)sStack68 * (int)sStack68 +
                          (int)sStack74 * (int)sStack74));
    fVar18 = proc_7F0B4830();
    fStack88 = 10.00000000 / ((float)fVar18 * fVar17);
    proc_7F0BCA34((int)*psVar9,&fStack100);
    fVar17 = 0.00000000;
    if (true) {
      do {
        fVar18 = proc_7F0B4830();
        fStack112 = fStack100 + ((float)(int)sStack16 + (float)iVar5 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack108 = fStack96 + ((float)(int)sStack14 + (float)iVar8 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack104 = fStack92 + ((float)(int)sStack12 + (float)iVar11 * fVar17) * (float)fVar18;
        proc_7F0A2160(&fStack112,0,extraout_f12);
        fVar17 = fVar17 + fStack80;
      } while (fVar17 < 1.00000000);
    }
    fVar17 = 0.00000000;
    if (true) {
      do {
        fVar18 = proc_7F0B4830();
        fStack112 = fStack100 + ((float)(int)sStack24 + (float)iVar13 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack108 = fStack96 + ((float)(int)sStack22 + (float)iVar14 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack104 = fStack92 + ((float)(int)sStack20 + (float)iVar15 * fVar17) * (float)fVar18;
        proc_7F0A2160(&fStack112,0,extraout_f12_00);
        fVar17 = fVar17 + fStack84;
      } while (fVar17 < 1.00000000);
    }
    fVar17 = 0.00000000;
    if (true) {
      iVar5 = (int)sStack68;
      iVar8 = (int)sStack74;
      do {
        fVar18 = proc_7F0B4830();
        fStack112 = fStack100 + ((float)(int)sStack24 + (float)iVar16 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack108 = fStack96 + ((float)(int)sStack22 + (float)iVar5 * fVar17) * (float)fVar18;
        fVar18 = proc_7F0B4830();
        fStack104 = fStack92 + ((float)(int)sStack20 + (float)iVar8 * fVar17) * (float)fVar18;
        proc_7F0A2160(&fStack112,0,extraout_f12_01);
        fVar17 = fVar17 + fStack88;
      } while (fVar17 < 1.00000000);
      pcVar12 = *(char **)(psVar9 + 2);
    }
    else {
      pcVar12 = *(char **)(psVar9 + 2);
    }
    uVar10 = SEXT48((int)pcVar12);
    uVar7 = SEXT48(*(int *)(psVar9 + 4));
    if (uVar10 < uVar7) {
      cVar6 = *pcVar12;
      while( true ) {
        bVar2 = false;
        if (cVar6 == -0x41) {
          proc_7F0BB874(uVar10,0,(int)*psVar9,auStack32,auStack40,auStack48);
          lVar3 = proc_7F0BBCCC();
          if (lVar3 == 0) {
            lVar3 = proc_7F0BBCCC();
            if (lVar3 == 0) {
              lVar3 = proc_7F0BBCCC();
              if (lVar3 != 0) {
                bVar2 = true;
              }
            }
            else {
              bVar2 = true;
            }
          }
          else {
            bVar2 = true;
          }
          if (bVar2) {
            proc_7F0BBBA8(uVar10,0,(int)*psVar9);
          }
          uVar7 = SEXT48(*(int *)(psVar9 + 4));
        }
        else {
          uVar4 = 0;
          if (cVar6 == -0x4f) {
            do {
              uVar4 = SEXT48((int)uVar4 + 1);
              bVar2 = false;
              proc_7F0BB874(uVar10,uVar4,(int)*psVar9,auStack32,auStack40,auStack48);
              lVar3 = proc_7F0BBCCC();
              if (lVar3 == 0) {
                lVar3 = proc_7F0BBCCC();
                if (lVar3 == 0) {
                  lVar3 = proc_7F0BBCCC();
                  if (lVar3 != 0) {
                    bVar2 = true;
                  }
                }
                else {
                  bVar2 = true;
                }
              }
              else {
                bVar2 = true;
              }
              if (bVar2) {
                proc_7F0BBBA8(uVar10,uVar4,(int)*psVar9);
              }
            } while (uVar4 != 4);
            uVar7 = SEXT48(*(int *)(psVar9 + 4));
          }
        }
        pcVar12 = (char *)((int)uVar10 + 8);
        uVar10 = SEXT48((int)pcVar12);
        if (uVar7 <= uVar10) break;
        cVar6 = *pcVar12;
      }
    }
  }
  return;
}



void proc_7F0BC4C4(short param_1)

{
  short *psVar1;
  short sVar2;
  
  psVar1 = &light_fixture_table;
  sVar2 = light_fixture_table;
  while( true ) {
    if (param_1 == sVar2) {
      *psVar1 = 0;
      sVar2 = psVar1[6];
    }
    else {
      sVar2 = psVar1[6];
    }
    if (param_1 == sVar2) {
      psVar1[6] = 0;
      sVar2 = psVar1[0xc];
    }
    else {
      sVar2 = psVar1[0xc];
    }
    if (param_1 == sVar2) {
      psVar1[0xc] = 0;
      sVar2 = psVar1[0x12];
    }
    else {
      sVar2 = psVar1[0x12];
    }
    if (param_1 == sVar2) {
      psVar1[0x12] = 0;
    }
    psVar1 = psVar1 + 0x18;
    if (psVar1 == &cur_entry_lightfixture_table) break;
    sVar2 = *psVar1;
  }
  index_of_cur_entry_lightfixture_table = param_1;
  return;
}



void proc_7F0BC530(void)

{
  BONDdata *pBVar1;
  ulonglong uVar2;
  undefined4 *puVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined1 *puVar7;
  longlong lVar8;
  BONDdata **ppBVar9;
  
  lVar8 = 0;
  uVar2 = get_num_players();
  if (0 < (longlong)uVar2) {
    ppBVar9 = &ptr_BONDdata_p1;
    pBVar1 = ptr_BONDdata_p1;
    while( true ) {
      lVar8 = (longlong)((int)lVar8 + 1);
      ppBVar9 = ppBVar9 + 1;
      pBVar1->field_108C = -1;
      uVar2 = get_num_players();
      if ((longlong)uVar2 <= lVar8) break;
      pBVar1 = *ppBVar9;
    }
  }
  puVar6 = &DAT_80083450;
  puVar7 = &DAT_80083320;
  puVar3 = &DAT_80083900;
  do {
    puVar3 = puVar3 + 1;
    *puVar6 = 0xffffffff;
    *puVar7 = 2;
    *puVar3 = 0xffffffff;
    puVar6 = puVar6 + 1;
    puVar7 = puVar7 + 1;
    puVar3 = puVar3;
  } while (puVar3 < &DAT_80083db0);
  iVar4 = proc_7F0B5E44();
  if (0 < iVar4) {
    iVar4 = 1;
    puVar7 = &roominformationblock;
    while( true ) {
      *(undefined2 *)(puVar7 + 0x36) = 0xffff;
      iVar5 = proc_7F0B5E44();
      if (iVar5 <= iVar4) break;
      iVar4 += 1;
      puVar7 = puVar7 + 0x50;
    }
  }
  return;
}



void proc_7F0BC624(int param_1)

{
  ptr_BONDdata->field_108C = param_1;
  return;
}



void proc_7F0BC634(int param_1,int param_2)

{
  (&DAT_8004144a)[param_2 * 0x28] = (short)param_1;
  (&DAT_80083450)[param_1] = param_2;
  return;
}



void proc_7F0BC660(int param_1,int param_2)

{
  (&DAT_8004144a)[param_2 * 0x28] = 0xffff;
  (&DAT_80083450)[param_1] = 0xffffffff;
  return;
}



void proc_7F0BC690(int param_1)

{
  if ((&DAT_80083450)[param_1] != -1) {
    proc_7F0BC660(param_1,(&DAT_80083450)[param_1]);
  }
  (&DAT_80083320)[param_1] = 2;
  (&DAT_80083900)[param_1] = 0xffffffff;
  return;
}



int proc_7F0BC6F0(void)

{
  byte bVar1;
  byte *pbVar2;
  int iVar3;
  
  pbVar2 = &DAT_80083320;
  iVar3 = 0;
  while( true ) {
    if (*pbVar2 < 2) {
      bVar1 = pbVar2[1];
    }
    else {
      if ((&DAT_80083900)[iVar3] == -1) {
        return iVar3;
      }
      bVar1 = pbVar2[1];
    }
    if (bVar1 < 2) {
      bVar1 = pbVar2[2];
    }
    else {
      if ((&DAT_80083904)[iVar3] == -1) {
        return iVar3 + 1;
      }
      bVar1 = pbVar2[2];
    }
    if (bVar1 < 2) {
      bVar1 = pbVar2[3];
    }
    else {
      if ((&DAT_80083908)[iVar3] == -1) {
        return iVar3 + 2;
      }
      bVar1 = pbVar2[3];
    }
    if ((1 < bVar1) && ((&DAT_8008390c)[iVar3] == -1)) break;
    iVar3 += 4;
    pbVar2 = pbVar2 + 4;
    if (iVar3 == 300) {
      return 0;
    }
  }
  return iVar3 + 3;
}



void proc_7F0BC7D4(void)

{
  int iVar1;
  int *piVar2;
  byte bVar3;
  
  piVar2 = &DAT_80083900;
  iVar1 = 0;
  do {
    if ((-1 < *piVar2) &&
       (bVar3 = (&DAT_80083320)[iVar1] + 1, (&DAT_80083320)[iVar1] = bVar3, 1 < bVar3)) {
      proc_7F0BC690(iVar1);
    }
    iVar1 += 1;
    piVar2 = piVar2 + 1;
  } while (iVar1 != 300);
  return;
}



longlong proc_7F0BC85C(int param_1)

{
  short sVar1;
  int iVar2;
  bg_room_data *pbVar3;
  longlong lVar4;
  float afStack68 [5];
  float fStack48;
  float fStack28;
  float fStack20;
  float fStack16;
  float fStack12;
  
  sVar1 = (&DAT_8004144a)[param_1 * 0x28];
  lVar4 = (longlong)sVar1;
  if ((lVar4 == -1) || (ptr_BONDdata->field_108C != (&DAT_80083900)[(int)sVar1])) {
    if (lVar4 != -1) {
      proc_7F0BC660((int)sVar1,param_1);
    }
    iVar2 = proc_7F0BC6F0();
    lVar4 = (longlong)iVar2;
    proc_7F0BC634(iVar2,param_1);
    (&DAT_80083320)[iVar2] = 0;
    (&DAT_80083900)[iVar2] = ptr_BONDdata->field_108C;
    proc_7F057FD0((f32 *)afStack68);
    afStack68[0] = room_data_float2;
    fStack48 = room_data_float2;
    fStack28 = room_data_float2;
    pbVar3 = ptr_bgdata_room_fileposition_list + param_1;
    fStack20 = (float)pbVar3->pPointTableBin * room_data_float2 -
               (float)ptr_BONDdata->current_model_xpos;
    fStack16 = (float)pbVar3->pPriMappingBin * room_data_float2 -
               (float)ptr_BONDdata->current_model_ypos;
    fStack12 = (float)pbVar3->pSecMappingBin * room_data_float2 -
               (float)ptr_BONDdata->current_model_zpos;
    proc_7F058C9C((int)afStack68,(uint *)(&DAT_80083db0 + iVar2 * 0x40));
  }
  else {
    (&DAT_80083320)[(int)sVar1] = 0;
  }
  return lVar4;
}



undefined4 * proc_7F0BC9C4(undefined4 *param_1,int param_2)

{
  longlong lVar1;
  
  lVar1 = proc_7F0BC85C(param_2);
  *param_1 = 0x1020040;
  *(undefined **)(param_1 + 1) = &DAT_80083db0 + (int)lVar1 * 0x40;
  return param_1 + 2;
}



int proc_7F0BCA14(int param_1)

{
  return (int)&ptr_bgdata_room_fileposition_list[param_1].pPointTableBin;
}



void proc_7F0BCA34(int param_1,float *param_2)

{
  *param_2 = (float)ptr_bgdata_room_fileposition_list[param_1].pPointTableBin * room_data_float2;
  param_2[1] = (float)ptr_bgdata_room_fileposition_list[param_1].pPriMappingBin * room_data_float2;
  param_2[2] = (float)ptr_bgdata_room_fileposition_list[param_1].pSecMappingBin * room_data_float2;
  return;
}



void load_resource(ulonglong rdramaddr,longlong buf_size,int ptr_res_table_entry,int *ptr_res_entry)

{
  int iVar1;
  void *ptr_target;
  undefined auStack8452 [8448];
  void *pvStack4;
  
  ptr_target = (void *)rdramaddr;
  if (buf_size == 0) {
    romCopy(ptr_target,*(void **)(ptr_res_table_entry + 8),*ptr_res_entry);
  }
  else {
    pvStack4 = (void *)((int)ptr_target + ((int)buf_size - (*ptr_res_entry + 7U & 0xfffffff8)));
    if ((void *)((int)&i + 3U) < (void *)((int)pvStack4 - (int)ptr_target)) {
      romCopy(pvStack4,*(void **)(ptr_res_table_entry + 8),*ptr_res_entry);
      iVar1 = decompressdata(pvStack4,ptr_target,auStack8452);
      ptr_res_entry[1] = iVar1;
    }
    else {
      ptr_res_entry[1] = 0;
    }
  }
  return;
}



void load_resource_from_indy
               (undefined *ptr_alloc_data,int buf_size,int ptr_resource_entry,int ptr_resource_data)

{
  undefined4 uVar1;
  undefined auStack8452 [8448];
  char *pcStack4;
  
  if (buf_size == 0) {
    indy_load_resource(*(char **)(ptr_resource_entry + 4),ptr_alloc_data);
  }
  else {
    check_file_found_on_indy
              (*(char **)(ptr_resource_entry + 4),(undefined4 *)(ptr_resource_data + 8));
    pcStack4 = ptr_alloc_data + (buf_size - (*(int *)(ptr_resource_data + 8) + 7U & 0xfffffff8));
    if ((char *)((int)&i + 3) < pcStack4 + -(int)ptr_alloc_data) {
      indy_load_resource(*(char **)(ptr_resource_entry + 4),pcStack4);
      if ((*pcStack4 == rz_header_1[0]._0_1_) && (pcStack4[1] == rz_header_1[1]._1_1_)) {
        uVar1 = decompressdata(pcStack4,ptr_alloc_data,auStack8452);
      }
      else {
        _bcopy(pcStack4,ptr_alloc_data,*(size_t *)(ptr_resource_data + 8));
        uVar1 = *(undefined4 *)(ptr_resource_data + 8);
      }
      *(undefined4 *)(ptr_resource_data + 4) = uVar1;
    }
    else {
      *(undefined4 *)(ptr_resource_data + 4) = 0;
    }
  }
  return;
}



void ob_c_debug_setup(void)

{
  int *piVar1;
  int *piVar2;
  undefined **ppuVar3;
  undefined **ppuVar4;
  int iVar5;
  int iVar6;
  
  get_ptr_debug_notice_list_entry(&ob_c_debug_notice_list_entry,aOb_c_debug);
  iVar6 = -0x7ffb9fa0;
  iVar5 = file_entry_max + -1;
  if (1 < iVar5) {
    ppuVar3 = &ptr_res_data_next;
    do {
      piVar1 = (int *)(iVar6 + 0x14);
      piVar2 = (int *)(iVar6 + 8);
      ppuVar4 = ppuVar3 + 5;
      iVar6 += 0xc;
      *ppuVar3 = (undefined *)(*piVar1 - *piVar2);
      ppuVar3[1] = NULL;
      ppuVar3[2] = NULL;
      ppuVar3[3] = NULL;
      ppuVar3 = ppuVar4;
    } while (ppuVar4 < &DAT_800888b0 + iVar5 * 0x14);
  }
  return;
}



void _load_rom_index_to_membank(int index,longlong mode,int update,byte bank)

{
  load_rom_resource_index_to_membank(index,mode,update,bank);
  return;
}



undefined *
_load_resource_index_to_membank(int index,longlong bank,undefined *ptr_target,int buffer)

{
  undefined *puVar1;
  
  puVar1 = load_resource_index_to_buffer(index,bank,ptr_target,buffer);
  return puVar1;
}



void _load_resource_named_to_membank(byte *name,int mode,int update,byte bank)

{
  int name_00;
  
  name_00 = get_index_num_of_named_resource((char *)name);
  load_rom_resource_index_to_membank(name_00,(longlong)mode,update,bank);
  return;
}



undefined * _load_resource_named_to_buffer(byte *name,int mode,undefined *target,int bufsize)

{
  int index;
  undefined *puVar1;
  
  index = get_index_num_of_named_resource((char *)name);
  puVar1 = load_resource_index_to_buffer(index,(longlong)mode,target,bufsize);
  return puVar1;
}



void load_bg_bytes_at_offset_to_membank(byte *name,int target,int offset,int size)

{
  int index;
  
  index = get_index_num_of_named_resource((char *)name);
  if (*(int *)(&DAT_800888b0 + index * 0x14) != 0) {
    if (*(int *)(&DAT_800888b0 + index * 0x14) + 0xfU < (uint)(offset + size)) {
      do {
                    // WARNING: Do nothing block with infinite loop
      } while( true );
    }
    romCopy((void *)target,(void *)(file_resource_table[index].hw_address + offset),size);
  }
  return;
}



ulonglong load_rom_resource_index_to_membank(int name,longlong mode,int update,byte bank)

{
  int iVar1;
  int bytes;
  undefined *ptr_alloc_data;
  uint uVar2;
  ulonglong rdramaddr;
  int *ptr_res_entry;
  
  uVar2 = SEXT14((char)bank);
  if (((mode == 0) || (mode == 1)) || (mode == 2)) {
    iVar1 = name * 0x14;
    bytes = *(int *)(&DAT_800888b4 + iVar1);
    if (bytes == 0) {
      bytes = memp_related_3(uVar2 & 0xff);
      *(int *)(&DAT_800888b4 + iVar1) = bytes;
    }
    ptr_alloc_data = (undefined *)allocate_bytes_in_bank(bytes,uVar2 & 0xff);
    bytes = *(int *)(&DAT_800888b4 + iVar1);
    *(int *)(&DAT_800888bc + iVar1) = bytes;
    if (file_resource_table[name].hw_address == 0) {
      load_resource_from_indy
                (ptr_alloc_data,bytes,(int)(file_resource_table + name),(int)(&DAT_800888b0 + iVar1)
                );
    }
    else {
      load_resource((longlong)(int)ptr_alloc_data,(longlong)bytes,(int)(file_resource_table + name),
                    (int *)(&DAT_800888b0 + iVar1));
    }
    rdramaddr = SEXT48((int)ptr_alloc_data);
    if ((int)mode != 0) {
      memp_related_1(ptr_alloc_data,*(int *)(&DAT_800888b4 + iVar1),(uint)bank);
    }
  }
  else {
    iVar1 = name * 0x14;
    ptr_res_entry = (int *)(&DAT_800888b0 + iVar1);
    bytes = *(int *)(&DAT_800888b4 + iVar1);
    if (bytes == 0) {
      bytes = *ptr_res_entry;
      if (bytes == 0) {
        bytes = *(int *)(&DAT_800888b8 + iVar1);
        *(int *)(&DAT_800888b4 + iVar1) = bytes;
      }
      else {
        *(int *)(&DAT_800888b4 + iVar1) = bytes;
      }
    }
    ptr_alloc_data = (undefined *)allocate_bytes_in_bank(bytes,uVar2 & 0xff);
    rdramaddr = SEXT48((int)ptr_alloc_data);
    *(undefined4 *)(&DAT_800888bc + iVar1) = *(undefined4 *)(&DAT_800888b4 + iVar1);
    if (file_resource_table[name].hw_address == 0) {
      load_resource_from_indy(ptr_alloc_data,0,(int)(file_resource_table + name),(int)ptr_res_entry)
      ;
    }
    else {
      load_resource(rdramaddr,0,(int)(file_resource_table + name),ptr_res_entry);
    }
    if (update == 0) {
      (&DAT_800888c0)[iVar1] = bank;
    }
  }
  return rdramaddr;
}



undefined * load_resource_index_to_buffer(int index,longlong mode,undefined *target,int buf_size)

{
  int iVar1;
  int *ptr_res_entry;
  
  iVar1 = index * 0x14;
  ptr_res_entry = (int *)(&DAT_800888b0 + iVar1);
  if (*(int *)(&DAT_800888b4 + iVar1) == 0) {
    if (*ptr_res_entry == 0) {
      *(undefined4 *)(&DAT_800888b4 + iVar1) = *(undefined4 *)(&DAT_800888b8 + iVar1);
    }
    else {
      *(int *)(&DAT_800888b4 + iVar1) = *ptr_res_entry;
    }
  }
  if (((mode == 0) || (mode == 1)) || (mode == 2)) {
    if (file_resource_table[index].hw_address == 0) {
      *(int *)(&DAT_800888bc + iVar1) = buf_size;
      load_resource_from_indy(target,buf_size,(int)(file_resource_table + index),(int)ptr_res_entry)
      ;
    }
    else {
      *(int *)(&DAT_800888bc + iVar1) = buf_size;
      load_resource((longlong)(int)target,(longlong)buf_size,(int)(file_resource_table + index),
                    ptr_res_entry);
    }
  }
  else {
    if (file_resource_table[index].hw_address == 0) {
      load_resource_from_indy(target,0,(int)(file_resource_table + index),(int)ptr_res_entry);
    }
    else {
      load_resource((longlong)(int)target,0,(int)(file_resource_table + index),ptr_res_entry);
    }
  }
  return target;
}



undefined4 get_temp_remaining_buffer_for_index(int index)

{
  return *(undefined4 *)(&DAT_800888b4 + index * 0x14);
}



undefined4 get_remaining_buffer_for_index(int index)

{
  return *(undefined4 *)(&DAT_800888bc + index * 0x14);
}



void proc_7F0BD138(int param_1,int param_2,int param_3,longlong param_4)

{
  *(int *)(&DAT_800888b4 + param_1 * 0x14) = param_3;
  *(int *)(&DAT_800888bc + param_1 * 0x14) = param_3;
  if (param_4 != 0) {
    memp_related_1((void *)param_2,param_3,4);
  }
  return;
}



undefined4 proc_7F0BD188(byte *name)

{
  int index;
  
  index = get_index_num_of_named_resource((char *)name);
  return *(undefined4 *)(&DAT_800888b4 + index * 0x14);
}



void something_mem_bank_a0(u8 bank)

{
  byte bVar1;
  undefined **nextres;
  int tablesize;
  
  if (1 < file_entry_max) {
    tablesize = file_entry_max * 0x14;
    bVar1 = u8_800888d4;
    nextres = &ptr_res_data_next;
    while( true ) {
      if (bVar1 <= bank) {
        *(undefined *)(nextres + 4) = 0;
      }
      if (bank == '\x04') {
        nextres[1] = NULL;
      }
      if (&DAT_800888b0 + tablesize <= nextres + 5) break;
      bVar1 = *(byte *)(nextres + 9);
      nextres = nextres + 5;
    }
  }
  return;
}



void proc_7F0BD234(void)

{
  something_mem_bank_a0('\x05');
  return;
}



int get_index_num_of_named_resource(char *name)

{
  longlong lVar1;
  int iVar2;
  char *pcVar3;
  int iVar4;
  int aiStack12 [3];
  
  iVar4 = 1;
  if (1 < file_entry_max) {
    pcVar3 = file_resource_table[1].ptr_name;
    iVar2 = -0x7ffb9fa0;
    while( true ) {
      if ((pcVar3 != NULL) && (lVar1 = something_with_strings_0((byte *)name,pcVar3), lVar1 == 0)) {
        return iVar4;
      }
      iVar4 += 1;
      if (file_entry_max <= iVar4) break;
      pcVar3 = *(char **)(iVar2 + 0x10);
      iVar2 = iVar2 + 0xc;
    }
  }
  iVar4 = file_entry_max;
  if (file_entry_max < 0x2e0) {
    file_entry_max += 1;
    iVar2 = check_file_found_on_indy(name,aiStack12);
    if (iVar2 == 0) {
      iVar4 = 0;
    }
    else {
      iVar2 = iVar4 * 0x14;
      file_resource_table[iVar4].index = iVar4;
      file_resource_table[iVar4].ptr_name = name;
      (&DAT_800888c1)[iVar2] = 0;
      file_resource_table[iVar4].hw_address = 0;
      *(undefined4 *)(&DAT_800888b0 + iVar2) = 0;
      *(undefined4 *)(&DAT_800888b4 + iVar2) = 0;
      *(undefined4 *)(&DAT_800888bc + iVar2) = 0;
      (&DAT_800888c0)[iVar2] = 0;
      *(uint *)(&DAT_800888b8 + iVar2) = (aiStack12[0] + 0xfU | 0xf) ^ 0xf;
    }
  }
  else {
    iVar4 = 0;
  }
  return iVar4;
}



void removed_handle_filetable_entry(int param_1)

{
  return;
}



void removed_loop_handle_filetable_entries(void)

{
  int iVar1;
  
  iVar1 = 1;
  if (1 < file_entry_max) {
    do {
      removed_handle_filetable_entry(iVar1);
      iVar1 += 1;
    } while (iVar1 < file_entry_max);
  }
  return;
}



void removed_loop_filetableentries(void)

{
  int entry;
  
  entry = 2;
  if (1 < file_entry_max) {
    while (entry < file_entry_max) {
      entry += 1;
    }
  }
  return;
}



void proc_7F0BD410(void)

{
  undefined4 *puVar1;
  
  if (1 < file_entry_max) {
    puVar1 = &DAT_800888d8;
    while (puVar1 < &DAT_800888b0 + file_entry_max * 0x14) {
      puVar1 = puVar1 + 5;
    }
  }
  return;
}



void something_with_dyn_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&dyn_c_debug_notice_list_entry,aDyn_c_debug);
  return;
}



void set_vtx_gfx_mem_alloc(void)

{
  byte *__nptr;
  ulonglong uVar1;
  long lVar2;
  
  __nptr = check_token(1,aMgfx);
  if (__nptr != NULL) {
    uVar1 = get_num_players();
    __nptr = check_token(1,aMgfx_1);
    lVar2 = strtol((char *)__nptr,NULL,0);
    (&dyn_c_debug_notice_list_entry)[(int)uVar1] = (undefined *)(lVar2 << 10);
  }
  __nptr = check_token(1,aMvtx);
  if (__nptr != NULL) {
    uVar1 = get_num_players();
    __nptr = check_token(1,aMvtx_0);
    lVar2 = strtol((char *)__nptr,NULL,0);
    (&dword_800482F0)[(int)uVar1] = (undefined *)(lVar2 << 10);
  }
  uVar1 = get_num_players();
  ptr_mgfx0_alloc_start =
       allocate_bytes_in_bank((int)(&dyn_c_debug_notice_list_entry)[(int)uVar1] << 1,4);
  uVar1 = get_num_players();
  ptr_mgfx1_alloc_start = (&dyn_c_debug_notice_list_entry)[(int)uVar1] + (int)ptr_mgfx0_alloc_start;
  uVar1 = get_num_players();
  ptr_mgfx_end = (&dyn_c_debug_notice_list_entry)[(int)uVar1] + (int)ptr_mgfx1_alloc_start;
  uVar1 = get_num_players();
  ptr_mvtx0_alloc_start =
       (undefined *)allocate_bytes_in_bank((int)(&dword_800482F0)[(int)uVar1] << 1,4);
  uVar1 = get_num_players();
  ptr_mvtx1_alloc_start = ptr_mvtx0_alloc_start + (int)(&dword_800482F0)[(int)uVar1];
  uVar1 = get_num_players();
  ptr_mvtx_end = (&dword_800482F0)[(int)uVar1] + (int)ptr_mvtx1_alloc_start;
  ptr_mvtx_cur_pos = ptr_mvtx0_alloc_start;
  bank_in_mgfx_alloc_table = 0;
  DAT_8008c254 = 0;
  return;
}



undefined4 get_ptr_displaylist(void)

{
  DAT_8008c254 = 1;
  return (&ptr_mgfx0_alloc_start)[(uint)bank_in_mgfx_alloc_table];
}



int allocate_something_in_mgfx(int param_1)

{
  return (&ptr_mgfx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] - param_1 >> 3;
}



void proc_7F0BD6C4(int param_1)

{
  ptr_mvtx_cur_pos = ptr_mvtx_cur_pos + param_1 * 0x10;
  return;
}



void proc_7F0BD6E0(void)

{
  ptr_mvtx_cur_pos = ptr_mvtx_cur_pos + 0x40;
  return;
}



void proc_7F0BD6F8(int param_1)

{
  ptr_mvtx_cur_pos = ptr_mvtx_cur_pos + param_1 * 0x10;
  return;
}



void proc_7F0BD714(int param_1)

{
  ptr_mvtx_cur_pos = ptr_mvtx_cur_pos + ((param_1 + 0xfU | 0xf) ^ 0xf);
  return;
}



void allocate_something_in_mvtx(void)

{
  ptr_mvtx_cur_pos = (undefined *)(&ptr_mvtx0_alloc_start)[(uint)(bank_in_mgfx_alloc_table ^ 1)];
  bank_in_mgfx_alloc_table = bank_in_mgfx_alloc_table ^ 1;
  DAT_8008c254 = 0;
  return;
}



void removed_debug_routine(int param_1)

{
  return;
}



int num_microcode_cmds_that_fit(int ptr_DLtarget)

{
  return (&ptr_mgfx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] - ptr_DLtarget >> 3;
}



int proc_7F0BD7A4(void)

{
  return (&ptr_mvtx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] - (int)ptr_mvtx_cur_pos;
}



char * compute_membar_display_string(char *string,int commandsused,int commandsavailable)

{
  char *pcVar1;
  
  pcVar1 = (char *)strlen(string);
  return pcVar1;
}



char * draw_membars(void)

{
  char *pcVar1;
  int in_a0_lo;
  
  compute_membar_display_string
            (membars_string_1,
             (int)(float)((&ptr_mgfx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] - in_a0_lo >> 3),
             (int)(float)((int)((&ptr_mgfx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] -
                               (&ptr_mgfx0_alloc_start)[(uint)bank_in_mgfx_alloc_table]) >> 3));
  pcVar1 = compute_membar_display_string
                     (membars_string_1,
                      (int)(float)((&ptr_mvtx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] -
                                  (int)ptr_mvtx_cur_pos),
                      (int)(float)((&ptr_mvtx1_alloc_start)[(uint)bank_in_mgfx_alloc_table] -
                                  (&ptr_mvtx0_alloc_start)[(uint)bank_in_mgfx_alloc_table]));
  return pcVar1;
}



undefined4 proc_7F0BD8F0(void)

{
  return dword_800483C0;
}



void proc_7F0BD8FC(undefined4 param_1)

{
  dword_800483C0 = param_1;
  return;
}



void something_with_lvl_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&lvl_c_debug_notice_list,aLv_c_debug);
  lvl_c_debug_notice_list = 1;
  ptr_jfont_DL = allocate_bytes_in_bank(0xc0,6);
  romCopy(ptr_jfont_DL,unknown,0xc0);
  return;
}



void proc_7F0BD984(void)

{
  u32 uVar1;
  
  uVar1 = get_random_value();
  dword_8004836C = uVar1 % 0x3d + 2;
  musicTrack1Play((MUSIC_TRACKS)dword_8004836C);
  return;
}



void proc_7F0BD9C4(int param_1)

{
  dword_8004836C = param_1;
  musicTrack1Play((MUSIC_TRACKS)param_1);
  return;
}



void proc_7F0BD9EC(void)

{
  MUSIC_TRACKS track;
  
  dword_8004836C = (dword_8004836C + 1) % 0x3f;
  track = (MUSIC_TRACKS)dword_8004836C;
  if (dword_8004836C == 0) {
    track = M_SHORT_SOLO_DEATH;
    dword_8004836C = 1;
  }
  musicTrack1Play(track);
  return;
}



void proc_7F0BDA38(void)

{
  MUSIC_TRACKS track;
  
  dword_8004836C = (dword_8004836C + 0x3e) % 0x3f;
  track = (MUSIC_TRACKS)dword_8004836C;
  if (dword_8004836C == 0) {
    track = M_END_SOMETHING;
    dword_8004836C = 0x3e;
  }
  musicTrack1Play(track);
  return;
}



void proc_7F0BDA84(void)

{
  short sVar1;
  
  sVar1 = getmusictrack_or_randomtrack(stagenum);
  proc_7F0BD9C4((int)sVar1);
  return;
}



void stage_load(LEVELID stagenum)

{
  longlong lVar1;
  int iVar3;
  undefined4 time;
  ulonglong uVar2;
  int player;
  longlong lVar4;
  undefined1 *puVar5;
  player_data *ppVar6;
  player_data *ppVar7;
  player_data *ppVar8;
  f32 fVar9;
  
  dword_800483C0 = 1;
  controls_locked_flag = 0;
  clock_timer = 1;
  global_timer_delta = 0x3f800000;
  dword_80048380 = 0;
  global_timer = 0;
  dword_80048388 = 0;
  dword_8004838C = 0;
  dword_80048390 = 0;
  dword_80048394 = 0;
  cur_mp_sec = 0.00000000;
  dword_800483B0 = 0;
  stage_time_sec = 0.00000000;
  dword_800483A0 = 0;
  stagenum = stagenum;
  music_related_39(1.00000000);
  musicTrack1Vol(0x7fff);
  music_related_2nd_block_1(0x7fff);
  music_related_3rd_block_1(0x7fff);
  proc_7F0C1364();
  proc_7F005534(1);
  set_mt_tex_alloc();
  proc_7F0A47D4();
  load_prepare_global_image_bank();
  load_font_table_controllers();
  if (stagenum == LEVELID_TITLE) {
    init_menus_or_reset();
  }
  else {
    newcheatunlocked = 0;
    if (((stagenum != LEVELID_TITLE) && (dword_80048394 == 0)) && (0 < clock_timer)) {
      puVar5 = CHEAT_AVAILABLE_EXTRA_CHARS;
      lVar4 = 1;
      if (append_cheat_sp != FALSE) {
        do {
          player = (int)lVar4;
          if (*puVar5 == '\0') {
            lVar4 = (longlong)(player + 1);
          }
          else {
            lVar1 = proc_7F091A5C(lVar4);
            if (lVar1 == 0) {
              lVar4 = (longlong)(player + 1);
            }
            else {
              proc_7F091AAC(lVar4);
              lVar4 = (longlong)(player + 1);
            }
          }
          puVar5 = puVar5 + 1;
        } while (lVar4 != 0x4b);
      }
    }
    proc_7F0B4124(stagenum);
    proc_7F09442C(stagenum);
    init_watch_at_start_of_stage();
    proc_7F0C11FC(stagenum);
    ppVar8 = &player1_playerdata;
    ppVar7 = ppVar8;
    do {
      uVar2 = get_num_players();
      player = 0;
      if (uVar2 == 1) {
        ppVar8->autoaim = '\0';
        ppVar8->sight = '\0';
        ppVar8->handicap = 1.00000000;
        ppVar8->player_perspective_height = 1.00000000;
      }
      else {
        ppVar6 = &player1_playerdata;
        do {
          iVar3 = get_scenario();
          if (iVar3 == 4) {
            ppVar6->handicap = 200.00000000;
          }
          else {
            fVar9 = get_player_mp_handicap(player);
            *(f32 *)&ppVar6->handicap = fVar9;
          }
          fVar9 = get_player_mp_char_height(player);
          player += 1;
          *(f32 *)&ppVar6->player_perspective_height = fVar9;
          ppVar6 = ppVar6 + 1;
        } while (player != 4);
        time = get_mp_timelimit();
        set_mp_time(time);
        time = get_mp_pointlimit();
        set_mp_point(time);
        copy_aim_settings_to_playerdata();
      }
      ppVar8->time_other_players_on_screen = 0;
      ppVar8->damage_to_backside = 0;
      ppVar8->min_time_between_kills = 0x7fffffff;
      ppVar8->max_time_between_kills = 0;
      ppVar8->most_killed_one_life = 0;
      ppVar8->most_killed_one_time = 0;
      ppVar8->longest_inning = 0;
      ppVar8->shortest_inning = 0x7fffffff;
      ppVar8->order_out_in_yolt = '\0';
      ppVar8->flag_counter = 0;
      ppVar8->distance_traveled = 0.00000000;
      ppVar8->body_armor_pickups = 0.00000000;
      ppVar6 = ppVar7 + 1;
      ppVar8 = ppVar8 + 1;
      ppVar7->killed_p4 = 0;
      ppVar7->killed_p3 = 0;
      ppVar7->killed_p2 = 0;
      ppVar7->killed_p1 = 0;
      ppVar7 = ppVar6;
    } while (ppVar6 != (player_data *)&ptr_BONDdata);
  }
  something_with_stage_objectives();
  unpause_game();
  proc_7F09B820();
  proc_7F005450();
  proc_7F005520();
  init_load_objpos_table();
  reinit_between_menus();
  init_sound_effects_registers();
  initguards();
  set_new_rand_head_bodies();
  stage_loading_setup_objparse_cleanupafter((longlong)stagenum);
  alloc_explosion_smoke_casing_scorch_impact_buffers();
  proc_7F007180();
  proc_7F007290();
  proc_7F0072B0();
  if (stagenum == LEVELID_TITLE) {
    disable_onscreen_cheat_text();
  }
  else {
    init_path_table_links();
    something_with_ejected_cartridges();
    lVar4 = 0;
    uVar2 = get_num_players();
    if (0 < (longlong)uVar2) {
      do {
        set_cur_player((int)lVar4);
        proc_7F0061F0();
        init_player_BONDdata_stats();
        init_player_BONDdata();
        load_camera_intro_type_values();
        proc_7F0798B8();
        sets_a_bunch_of_BONDdata_values_to_default();
        disable_onscreen_cheat_text();
        lVar4 = (longlong)((int)lVar4 + 1);
        uVar2 = get_num_players();
      } while (lVar4 < (longlong)uVar2);
    }
    set_cur_player(0);
  }
  proc_7F005534(0);
  remove_viewport_buffer();
  setVideoWidthHeightToMode(1);
  flt_80048368 = 1.00000000;
  set_controls_locked_flag(0);
  return;
}



undefined4 proc_7F0BDF04(void)

{
  return stagenum;
}



undefined4 proc_7F0BDF10(longlong param_1)

{
  undefined8 uVar1;
  ulonglong uVar2;
  ulonglong uVar3;
  
  if (param_1 != 0) {
    uVar1 = proc_7F0B9DE4(param_1);
    DAT_800483d0 = DAT_800483d4;
    DAT_800483d4 = DAT_800483d8;
    DAT_800483d8 = DAT_800483dc;
    DAT_800483dc = DAT_800483e0;
    uVar2 = get_controller_buttons_held('\0',A_BUTTON);
    uVar3 = get_controller_buttons_held('\x01',A_BUTTON);
    uVar3 |= uVar2 & 0xffff;
    if ((longlong)DAT_800483dc != uVar3) {
      dword_800483C0 ^= 1;
    }
    if (DAT_800483d0 != DAT_800483d4) {
      dword_800483C0 ^= 1;
    }
    DAT_800483e0 = (int)uVar3;
    proc_7F0B9DF4();
    return (int)uVar1;
  }
  uVar2 = get_controller_buttons_pressed('\0',L_JPAD);
  uVar3 = get_controller_buttons_pressed('\x01',L_JPAD);
  if (((uVar3 | uVar2 & 0xffff) != 0) && (DAT_800483cc += -1, DAT_800483cc < 0)) {
    DAT_800483cc = 0;
  }
  uVar2 = get_controller_buttons_pressed('\0',R_JPAD);
  uVar3 = get_controller_buttons_pressed('\x01',R_JPAD);
  if ((uVar3 | uVar2 & 0xffff) != 0) {
    DAT_800483cc += 1;
  }
  uVar2 = get_controller_buttons_held('\0',R_TRIG);
  uVar3 = get_controller_buttons_held('\x01',R_TRIG);
  if ((uVar3 | uVar2 & 0xffff) != 0) {
    uVar2 = get_controller_buttons_held('\0',L_TRIG);
    uVar3 = get_controller_buttons_held('\x01',L_TRIG);
    if ((uVar3 | uVar2 & 0xffff) != 0) {
      uVar2 = get_controller_buttons_pressed('\0',D_JPAD);
      if (uVar2 == 0) {
        return 0;
      }
      proc_7F0B9B64(DAT_800483cc);
      return 0;
    }
  }
  uVar2 = get_controller_buttons_held('\0',R_TRIG);
  uVar3 = get_controller_buttons_held('\x01',R_TRIG);
  if ((uVar3 | uVar2 & 0xffff) == 0) {
    uVar2 = get_controller_buttons_held('\0',L_TRIG);
    uVar3 = get_controller_buttons_held('\x01',L_TRIG);
    if ((uVar3 | uVar2 & 0xffff) == 0) {
      uVar2 = get_controller_buttons_pressed('\0',D_JPAD);
      uVar3 = get_controller_buttons_pressed('\x01',D_JPAD);
      if ((uVar3 | uVar2 & 0xffff) != 0) {
        proc_7F0B9A7C(DAT_800483cc);
      }
      uVar2 = get_controller_buttons_pressed('\0',U_JPAD);
      uVar3 = get_controller_buttons_pressed('\x01',U_JPAD);
      if ((uVar3 | uVar2 & 0xffff) != 0) {
        proc_7F0B9A2C(DAT_800483cc);
      }
    }
    else {
      uVar2 = get_controller_buttons_pressed('\0',D_JPAD);
      uVar3 = get_controller_buttons_pressed('\x01',D_JPAD);
      if (((uVar3 | uVar2 & 0xffff) != 0) && (uVar2 = proc_7F0B9B04(DAT_800483cc), uVar2 != 0)) {
        proc_7F0B9B44(DAT_800483cc);
      }
      uVar2 = get_controller_buttons_pressed('\0',U_JPAD);
      uVar3 = get_controller_buttons_pressed('\x01',U_JPAD);
      if (((uVar3 | uVar2 & 0xffff) != 0) && (uVar2 = proc_7F0B9B04(DAT_800483cc), uVar2 == 0)) {
        proc_7F0B9B24(DAT_800483cc);
        return 0;
      }
    }
  }
  else {
    uVar2 = get_controller_buttons_pressed('\0',D_JPAD);
    uVar3 = get_controller_buttons_pressed('\x01',D_JPAD);
    if (((uVar3 | uVar2 & 0xffff) != 0) && (uVar2 = proc_7F0B9AE4(DAT_800483cc), uVar2 == 0)) {
      proc_7F0B9DBC(DAT_800483cc,0);
    }
    uVar2 = get_controller_buttons_pressed('\0',U_JPAD);
    uVar3 = get_controller_buttons_pressed('\x01',U_JPAD);
    if (((uVar3 | uVar2 & 0xffff) != 0) && (uVar2 = proc_7F0B9AE4(DAT_800483cc), uVar2 != 0)) {
      proc_7F0B9DBC(DAT_800483cc,1);
      return 0;
    }
  }
  return 0;
}



uint * proc_7F0BE30C(undefined4 *param_1)

{
  u32 uVar4;
  uint *puVar5;
  short sVar10;
  short sVar11;
  ulonglong uVar1;
  int playernum;
  undefined8 uVar2;
  longlong lVar3;
  BOOL BVar6;
  byte *pbVar7;
  int *piVar8;
  uint uVar9;
  undefined4 *puVar12;
  int iVar13;
  uint *puStackX0;
  
  *param_1 = 0xbc000006;
  param_1[1] = 0;
  puStackX0 = param_1 + 4;
  param_1[2] = 0xbc000406;
  uVar4 = osVirtualToPhysical(ptr_jfont_DL);
  param_1[3] = uVar4;
  puStackX0[1] = 0x1000040;
  *puStackX0 = 0x6000000;
  puVar12 = puStackX0 + 4;
  puStackX0[3] = 0x1000020;
  puStackX0[2] = 0x6000000;
  if (stagenum == 0x5a) {
    puStackX0 = puVar12;
    puStackX0 = proc_70003EB4(puVar12);
    puVar5 = proc_70003C58(puStackX0);
    puStackX0 = puVar5 + 2;
    *puVar5 = 0xed000000;
    sVar10 = get_video2_settings_txtClipW();
    sVar11 = get_video2_settings_txtClipH();
    puVar5[1] = (int)((float)(int)sVar11 * 4.00000000) & 0xfffU |
                ((int)((float)(int)sVar10 * 4.00000000) & 0xfffU) << 0xc;
    puStackX0 = (uint *)menu_jump_constructor_handler();
  }
  else {
    puStackX0 = puVar12;
    uVar1 = get_num_players();
    *puStackX0 = 0xbc000404;
    puStackX0[1] = 2;
    puStackX0[3] = 2;
    puStackX0[2] = 0xbc000c04;
    puStackX0[4] = 0xbc001404;
    puStackX0[5] = 0xfffe;
    puVar5 = puStackX0 + 8;
    iVar13 = 0;
    puStackX0[7] = 0xfffe;
    puStackX0[6] = 0xbc001c04;
    puStackX0 = puVar5;
    if (0 < (longlong)uVar1) {
      do {
        playernum = proc_7F09B528(iVar13);
        set_cur_player(playernum);
        set_video2_width_height(ptr_BONDdata->playerscreenwidth,ptr_BONDdata->playerscreenheight);
        set_video2_ulx_uly(ptr_BONDdata->playerscreenulx,ptr_BONDdata->playerscreenuly);
        video_related_1F(ptr_BONDdata->watch_menu_current_size_unused_maybe);
        video_related_21(ptr_BONDdata->field_11D4);
        puStackX0 = proc_70003EB4(puStackX0);
        puStackX0 = proc_70003C58(puStackX0);
        uVar4 = get_debug_render_raster();
        if (uVar4 == 0) {
          puStackX0 = (uint *)proc_7F091580(puStackX0);
        }
        uVar4 = get_debug_render_raster();
        if (uVar4 == 1) {
          uVar2 = proc_7F0B2D48((longlong)(int)puStackX0);
          puStackX0 = (uint *)uVar2;
        }
        uVar4 = get_debug_render_raster();
        if (uVar4 == 2) {
          puStackX0 = (uint *)proc_7F087A08(puStackX0);
        }
        puStackX0 = setupscreensfornumplayers(puStackX0);
        puStackX0 = (uint *)proc_7F094488();
        proc_7F0B4884();
        determing_type_of_object_and_detection();
        proc_7F03A240();
        proc_7F03D78C();
        proc_7F03C294();
        playernum = proc_7F089F38();
        if ((playernum != 0) && (lVar3 = proc_7F03C4F0(), lVar3 != 0)) {
          attempt_reload_item_in_hand(0);
          attempt_reload_item_in_hand(1);
        }
        proc_7F03D0D4();
        puStackX0 = proc_7F0B4E40(puStackX0);
        BVar6 = getdebug_portal_flag();
        if (BVar6 != FALSE) {
          puStackX0 = (uint *)proc_7F0BDF10((longlong)(int)puStackX0);
        }
        BVar6 = get_turbo_mode_flag();
        if (BVar6 != FALSE) {
          uVar2 = stan_problems_removed((longlong)(int)puStackX0);
          puStackX0 = (uint *)uVar2;
        }
        BVar6 = get_debug_stanhit_flag();
        if (BVar6 != FALSE) {
          uVar2 = proc_7F0B3034((longlong)(int)puStackX0);
          puStackX0 = (uint *)(int)uVar2;
          uVar2 = write_stan_tiles_in_yellow(uVar2);
          puStackX0 = (uint *)uVar2;
        }
        BVar6 = get_debug_stanregion_flag();
        if (BVar6 != FALSE) {
          uVar2 = proc_7F0B3034((longlong)(int)puStackX0);
          puStackX0 = (uint *)(int)uVar2;
          uVar2 = stan_region_removed(uVar2);
          puStackX0 = (uint *)uVar2;
        }
        pbVar7 = check_token(1,aStanshow_);
        if (pbVar7 != NULL) {
          pbVar7 = check_token(1,aStanshow__5);
          piVar8 = stanMatchTileName(pbVar7);
          if (piVar8 != NULL) {
            uVar2 = proc_7F0B3034((longlong)(int)puStackX0);
            puStackX0 = (uint *)(int)uVar2;
            uVar2 = proc_7F0B3024(uVar2);
            puStackX0 = (uint *)uVar2;
          }
        }
        pbVar7 = check_token(2,aStanshow__0);
        if (pbVar7 != NULL) {
          pbVar7 = check_token(2,aStanshow__1);
          piVar8 = stanMatchTileName(pbVar7);
          if (piVar8 != NULL) {
            uVar2 = proc_7F0B3034((longlong)(int)puStackX0);
            puStackX0 = (uint *)(int)uVar2;
            uVar2 = proc_7F0B3024(uVar2);
            puStackX0 = (uint *)uVar2;
          }
        }
        pbVar7 = check_token(3,aStanshow__2);
        if (pbVar7 != NULL) {
          pbVar7 = check_token(3,aStanshow__3);
          piVar8 = stanMatchTileName(pbVar7);
          if (piVar8 != NULL) {
            uVar2 = proc_7F0B3034((longlong)(int)puStackX0);
            puStackX0 = (uint *)(int)uVar2;
            uVar2 = proc_7F0B3024(uVar2);
            puStackX0 = (uint *)uVar2;
          }
        }
        uVar4 = get_debug_limit_controller_input();
        proc_7F022E24((uint)(uVar4 == 8));
        puStackX0 = proc_7F049B58(puStackX0);
        proc_7F0A4824((longlong)(int)register0x000000ec,1);
        puStackX0 = proc_7F0A2C44(puStackX0);
        puStackX0 = proc_7F0A0034(puStackX0);
        uVar9 = proc_7F0927BC(0xb);
        if (uVar9 != 0) {
          set_max_ammo_for_cur_player();
        }
        uVar4 = get_debug_render_raster();
        if (uVar4 == 2) {
          puStackX0 = (uint *)maybe_mp_interface();
        }
        else {
          uVar2 = proc_7F08BCB8((longlong)(int)puStackX0);
          puStackX0 = (uint *)uVar2;
        }
        puStackX0 = mp_watch_menu_display(puStackX0);
        iVar13 += 1;
      } while (iVar13 < (int)uVar1);
    }
  }
  puVar5 = puStackX0;
  *puStackX0 = 0xed000000;
  puStackX0 = puStackX0 + 2;
  sVar10 = get_video2_settings_txtClipW();
  sVar11 = get_video2_settings_txtClipH();
  puVar5[1] = (int)((float)(int)sVar11 * 4.00000000) & 0xfffU |
              ((int)((float)(int)sVar10 * 4.00000000) & 0xfffU) << 0xc;
  return puStackX0;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void proc_7F0BE8D0(void)

{
  f32 fVar1;
  f32 fVar2;
  float fVar3;
  float fVar4;
  
  if (difficulty_0 == 0) {
    fVar1 = get_BONDdata_watch_health();
    fVar2 = get_BONDdata_watch_armor();
    fVar3 = 1.00000000;
    fVar4 = (float)fVar2 + (float)fVar1;
    if (fVar4 <= 0.12500000) {
      fVar3 = 0.50000000;
    }
    else {
      if (fVar4 <= flt_8005B73C) {
        fVar3 = ((fVar4 - 0.12500000) * 0.50000000) / flt_8005B740 + 0.50000000;
      }
    }
    flt_80030B14 = 2.00000000;
    ai_damage_modifier = (f32)(fVar3 * 0.50000000);
    flt_80030B18 = 2.00000000;
    flt_80030B24 = 2.00000000;
    ai_accuracy_modifier = (f32)flt_8005B744;
    ai_health_modifier = 2.00000000;
    dword_80040178 = (f32)(fVar3 * 0.25000000);
    difficulty = 1.50000000;
    solo_ammo_multiplier = 2.00000000;
    ai_reaction_speed = (f32)flt_8005B748;
    flt_80030B1C = (float)ai_damage_modifier;
    flt_80030B20 = (float)ai_damage_modifier;
  }
  else {
    if (difficulty_0 == 1) {
      flt_80030B14 = 1.00000000;
      flt_80030B18 = 1.00000000;
      flt_80030B1C = 0.75000000;
      flt_80030B20 = 0.75000000;
      flt_80030B24 = 1.00000000;
      ai_accuracy_modifier = 0.75000000;
      ai_damage_modifier = 0.75000000;
      ai_health_modifier = 1.00000000;
      dword_80040178 = 0.75000000;
      difficulty = 0.75000000;
      solo_ammo_multiplier = 1.50000000;
      ai_reaction_speed = 0.50000000;
    }
    else {
      if (difficulty_0 == 2) {
        flt_80030B14 = 1.00000000;
        flt_80030B18 = 1.00000000;
        flt_80030B1C = 1.00000000;
        flt_80030B20 = 1.00000000;
        flt_80030B24 = 1.00000000;
        ai_accuracy_modifier = 1.00000000;
        ai_damage_modifier = 1.00000000;
        ai_health_modifier = 1.00000000;
        dword_80040178 = 1.00000000;
        difficulty = flt_8005B74C;
        solo_ammo_multiplier = 1.00000000;
        ai_reaction_speed = 1.00000000;
      }
      else {
        if (difficulty_0 == 3) {
          flt_80030B14 = 1.00000000;
          flt_80030B18 = 1.00000000;
          flt_80030B1C = 1.00000000;
          flt_80030B20 = 1.00000000;
          flt_80030B24 = 1.00000000;
          ai_accuracy_modifier = 1.00000000;
          ai_damage_modifier = 1.00000000;
          ai_health_modifier = 1.00000000;
          dword_80040178 = 1.00000000;
          difficulty = 1.00000000;
          solo_ammo_multiplier = 1.00000000;
          ai_reaction_speed = 1.00000000;
        }
      }
    }
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0bf074) overlaps instruction at (ram,0x7f0bf070)
// 

void manage_mp_game(void)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  BONDdata *pBVar4;
  longlong lVar5;
  ulonglong uVar6;
  int iVar7;
  int iVar8;
  BOOL BVar9;
  u32 uVar10;
  undefined1 *puVar11;
  BONDdata **ppBVar12;
  longlong lVar13;
  int *piVar14;
  undefined8 extraout_a0;
  undefined8 extraout_a1;
  char cVar15;
  char cVar16;
  ulonglong uVar17;
  int iVar18;
  int iVar19;
  int iVar20;
  int iVar21;
  int iStack364;
  int iStack360;
  int iStack28;
  
  mp_tlb_related();
  if (controls_locked_flag == 0) {
    iVar7 = get_ispaused();
    if (iVar7 == 0) {
      clock_timer = dword_80048498;
      dword_80048380 += 1;
    }
    else {
      clock_timer = 0;
    }
  }
  else {
    clock_timer = 0;
  }
  global_timer_delta = (float)clock_timer;
  global_timer += clock_timer;
  if (((stagenum != 0x5a) && (dword_80048394 == 0)) && (0 < clock_timer)) {
    puVar11 = CHEAT_AVAILABLE_EXTRA_CHARS;
    lVar13 = 1;
    if (append_cheat_sp != FALSE) {
      do {
        if (*puVar11 != '\0') {
          lVar5 = proc_7F091A5C(lVar13);
          if (lVar5 == 0) {
            proc_7F091AAC((longlong)(int)lVar13);
          }
        }
        lVar13 = (longlong)((int)lVar13 + 1);
        puVar11 = puVar11 + 1;
      } while (lVar13 != 0x4b);
    }
  }
  uVar6 = get_num_players();
  if ((1 < (longlong)uVar6) && (stagenum != 0x5a)) {
    iVar7 = get_mission_state();
    if (iVar7 == 6) {
      uVar6 = get_num_players();
      lVar13 = 0;
      iVar7 = 0;
      iVar20 = 0;
      if (0 < (longlong)uVar6) {
        ppBVar12 = &ptr_BONDdata_p1;
        do {
          pBVar4 = *ppBVar12;
          ppBVar12 = ppBVar12 + 1;
          if ((pBVar4->player_button_control != 0) && (iVar7 += 1, pBVar4->field_424 != 0)) {
            iVar20 += 1;
          }
          uVar6 = get_num_players();
          lVar13 = (longlong)((int)lVar13 + 1);
        } while (lVar13 < (longlong)uVar6);
      }
      if ((0 < iVar7) && (iVar7 == iVar20)) {
        set_missionstate(1);
      }
    }
    iVar7 = dword_80048394;
    if (0 < mp_time) {
      iVar20 = clock_timer + dword_80048394;
      if ((dword_80048394 < mp_time + -0xe10) && (mp_time + -0xe10 <= iVar20)) {
        iStack28 = 0;
        uVar6 = get_num_players();
        if (0 < (longlong)uVar6) {
          do {
            set_cur_player(iStack28);
            display_string_in_lower_left_corner(aOneMinuteLeft);
            iStack28 += 1;
            uVar6 = get_num_players();
          } while ((longlong)iStack28 < (longlong)uVar6);
        }
      }
      if (((mp_time + -600 <= iVar20) && (dword_800483A0 == 0)) &&
         (iVar8 = get_controls_locked_flag(), iVar8 == 0)) {
        play_sfx_a1(ptr_sfx_buf,0xa1,(sfxdata *)&dword_800483A0);
      }
      iVar8 = get_controls_locked_flag();
      if (((iVar8 != 0) && (dword_800483A0 != 0)) &&
         (uVar6 = music_related_26(dword_800483A0), uVar6 != 0)) {
        music_related_28(dword_800483A0);
      }
      if ((iVar7 < mp_time) && (mp_time <= iVar20)) {
        proc_7F0C2530(0);
      }
    }
    if ((0 < mp_point) && (clock_timer != 0)) {
      uVar6 = get_num_players();
      iVar7 = 0;
      iVar20 = 0;
      lVar13 = 0;
      if (0 < (longlong)uVar6) {
        ppBVar12 = &ptr_BONDdata_p1;
        do {
          pBVar4 = *ppBVar12;
          if ((pBVar4->player_button_control != 0) &&
             (((pBVar4->field_424 == 0 || (pBVar4->field_428 == 0)) ||
              (0.00000000 <= pBVar4->timer_for_fade)))) {
            iVar7 += 1;
          }
          iVar8 = get_points_for_mp_player((uint)lVar13);
          uVar6 = SEXT48((int)uVar6);
          if (mp_point <= iVar8) {
            iVar20 += 1;
          }
          lVar13 = (longlong)(int)((uint)lVar13 + 1);
          ppBVar12 = ppBVar12 + 1;
        } while (lVar13 < (longlong)uVar6);
      }
      if (0 < iVar20) {
        if (iVar7 == 0) {
          proc_7F0C2530(0);
        }
        else {
          set_stopplay_flag();
        }
      }
    }
    iVar7 = get_scenario();
    if ((iVar7 == 1) && (clock_timer != 0)) {
      uVar6 = get_num_players();
      iVar7 = 0;
      iVar20 = 0;
      lVar13 = 0;
      if (0 < (longlong)uVar6) {
        do {
          iVar8 = 0;
          cVar16 = '\0';
          cVar15 = '\0';
          uVar17 = 0;
          iVar18 = 0;
          iVar19 = (int)lVar13;
          if (0 < (longlong)uVar6) {
            if ((uVar6 & 3) != 0) {
              ppBVar12 = &ptr_BONDdata_p1;
              piVar14 = &player1_playerdata.shots_fired + iVar19;
              cVar15 = cVar16;
              do {
                pBVar4 = *ppBVar12;
                iVar18 = (int)uVar17 + 1;
                uVar17 = SEXT48(iVar18);
                ppBVar12 = ppBVar12 + 1;
                if (pBVar4->player_button_control == 0) {
                  cVar15 += '\x01';
                  iVar21 = piVar14[9];
                }
                else {
                  iVar21 = piVar14[9];
                }
                piVar14 = piVar14 + 0x1c;
                iVar8 += iVar21;
              } while ((uVar6 & 3) != uVar17);
              cVar16 = cVar15;
              if (uVar17 == uVar6) goto LAB_7f0bf124;
            }
            ppBVar12 = &ptr_BONDdata_p1 + iVar18;
            piVar14 = &(&player1_playerdata)[iVar18].shots_fired + iVar19;
            cVar15 = cVar16;
            do {
              if ((*ppBVar12)->player_button_control == 0) {
                cVar15 += '\x01';
                pBVar4 = ppBVar12[1];
              }
              else {
                pBVar4 = ppBVar12[1];
              }
              piVar1 = piVar14 + 9;
              if (pBVar4->player_button_control == 0) {
                cVar15 += '\x01';
                pBVar4 = ppBVar12[2];
              }
              else {
                pBVar4 = ppBVar12[2];
              }
              piVar2 = piVar14 + 0x25;
              if (pBVar4->player_button_control == 0) {
                cVar15 += '\x01';
                pBVar4 = ppBVar12[3];
              }
              else {
                pBVar4 = ppBVar12[3];
              }
              piVar3 = piVar14 + 0x41;
              ppBVar12 = ppBVar12 + 4;
              if (pBVar4->player_button_control == 0) {
                cVar15 += '\x01';
                iVar18 = piVar14[0x5d];
              }
              else {
                iVar18 = piVar14[0x5d];
              }
              piVar14 = piVar14 + 0x70;
              iVar8 = iVar8 + *piVar1 + *piVar2 + *piVar3 + iVar18;
            } while (ppBVar12 != &ptr_BONDdata_p1 + (int)uVar6);
          }
LAB_7f0bf124:
          if (iVar8 < 2) {
LAB_7f0bf19c:
            lVar13 = (longlong)(iVar19 + 1);
          }
          else {
            if ((&player1_playerdata)[iVar19].order_out_in_yolt == '\0') {
              (&player1_playerdata)[iVar19].order_out_in_yolt = cVar15 + '\x01';
            }
            pBVar4 = (&ptr_BONDdata_p1)[iVar19];
            iVar7 += 1;
            if (pBVar4->field_424 == 0) {
              lVar13 = (longlong)(iVar19 + 1);
            }
            else {
              if (pBVar4->field_428 == 0) {
                lVar13 = (longlong)(iVar19 + 1);
              }
              else {
                if (pBVar4->timer_for_fade < 0.00000000) {
                  iVar20 += 1;
                  goto LAB_7f0bf19c;
                }
                lVar13 = (longlong)(iVar19 + 1);
              }
            }
          }
        } while (lVar13 < (longlong)uVar6);
      }
      iVar8 = (int)uVar6 + -1;
      if (iVar20 < iVar8) {
        if (iVar8 <= iVar7) {
          set_stopplay_flag();
        }
      }
      else {
        proc_7F0C2530(0);
      }
    }
  }
  dword_80048394 += clock_timer;
  cur_mp_sec = (float)dword_80048394 / 60.00000000;
  dword_800483A8 += clock_timer;
  cur_mp_min = (f32)((float)dword_800483A8 / 60.00000000);
  uVar6 = get_controller_buttons_pressed
                    ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                          R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  if (uVar6 == 0) {
    dword_80048390 += clock_timer;
    if (0x707 < dword_80048390) {
      dword_80048388 = 1;
    }
  }
  else {
    dword_80048388 = 0;
    dword_80048390 = 0;
  }
  if (dword_80048388 == 0) {
    dword_800483B0 += clock_timer;
    stage_time_sec = (f32)((float)dword_800483B0 / 60.00000000);
    dword_800483B8 += clock_timer;
    poweron_time_sec = (f32)((float)dword_800483B8 / 60.00000000);
  }
  else {
    dword_8004838C += clock_timer;
  }
  set_video2_settings_offset_24(1);
  if (stagenum == 0x5a) {
    proc_7F09193C();
    menu_init(extraout_a0,extraout_a1);
    something_with_LnameJ();
  }
  else {
    proc_7F09BBBC();
    proc_7F0BE8D0();
    proc_7F0BC7D4();
    proc_7F092E50();
    proc_7F094438();
    proc_7F0A47FC();
    proc_7F068E6C();
    proc_7F0A28D4();
    proc_7F09FD3C();
    handle_mp_respawn_and_some_things();
    reset_all_music_slots();
    something_with_LnameJ();
    iVar7 = get_debug_joy2detailedit_flag();
    if (((iVar7 != 0) && (DAT_800483c8 == NULL)) &&
       (DAT_800483c8 = allocate_bytes_in_bank(0x3000,4), DAT_800483c8 != NULL)) {
      iVar7 = 0;
      do {
        *(undefined *)((int)DAT_800483c8 + iVar7) = 0xff;
        *(byte *)((int)DAT_800483c8 + iVar7 + 1) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 1) & 0x1f | 0x20;
        *(byte *)((int)DAT_800483c8 + iVar7 + 1) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 1) & 0xe3 | 4;
        *(undefined *)((int)DAT_800483c8 + iVar7 + 4) = 0xff;
        *(byte *)((int)DAT_800483c8 + iVar7 + 5) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 5) & 0x1f | 0x20;
        *(byte *)((int)DAT_800483c8 + iVar7 + 5) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 5) & 0xe3 | 4;
        *(undefined *)((int)DAT_800483c8 + iVar7 + 8) = 0xff;
        *(byte *)((int)DAT_800483c8 + iVar7 + 9) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 9) & 0x1f | 0x20;
        *(byte *)((int)DAT_800483c8 + iVar7 + 9) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 9) & 0xe3 | 4;
        *(undefined *)((int)DAT_800483c8 + iVar7 + 0xc) = 0xff;
        *(byte *)((int)DAT_800483c8 + iVar7 + 0xd) =
             *(byte *)((int)DAT_800483c8 + iVar7 + 0xd) & 0x1f | 0x20;
        iVar20 = (int)DAT_800483c8 + iVar7;
        iVar7 += 0x10;
        *(byte *)(iVar20 + 0xd) = *(byte *)(iVar20 + 0xd) & 0xe3 | 4;
      } while (iVar7 != 12000);
    }
    BVar9 = getdebug_portal_flag();
    if (BVar9 != FALSE) {
      proc_7F0BDF10(0);
    }
    uVar10 = get_debug_limit_controller_input();
    if (uVar10 == 4) {
      uVar6 = get_controller_buttons_pressed('\0',L_CBUTTONS);
      if (uVar6 != 0) {
        removed_7F0AF630(-1);
        removed_7F0B2D38(0,0,0);
      }
      uVar6 = get_controller_buttons_pressed('\0',R_CBUTTONS);
      if (uVar6 != 0) {
        removed_7F0AF630(1);
        removed_7F0B2D38(0,0,0);
      }
    }
    else {
      if (uVar10 == 8) {
        uVar6 = get_controller_buttons_pressed('\0',L_CBUTTONS);
        if (uVar6 != 0) {
          proc_7F022E30();
        }
        uVar6 = get_controller_buttons_pressed('\0',R_CBUTTONS);
        if (uVar6 != 0) {
          proc_7F022E90();
        }
        uVar6 = get_controller_buttons_pressed('\0',L_TRIG);
        if (uVar6 != 0) {
          proc_7F022EC8();
        }
        uVar6 = get_controller_buttons_held('\0',R_TRIG);
        proc_7F022EE0((uint)(uVar6 != 0));
      }
    }
  }
  uVar10 = get_debug_limit_controller_input();
  if (uVar10 == 0xc) {
    uVar6 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_JPAD);
    if (uVar6 != 0) {
      proc_7F0BDA38();
    }
    uVar6 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_JPAD);
    if (uVar6 != 0) {
      proc_7F0BD9EC();
    }
    uVar6 = get_controller_buttons_pressed('\0',D_JPAD);
    if (uVar6 != 0) {
      musicTrack1Stop();
    }
    uVar6 = get_controller_buttons_pressed('\0',B_BUTTON);
    if (uVar6 != 0) {
      music_related_0();
    }
  }
  else {
    if (uVar10 == 0xd) {
      uVar6 = get_controller_buttons_pressed('\0',L_CBUTTONS|L_TRIG|L_JPAD|D_JPAD);
      if (uVar6 != 0) {
        DAT_800483e4 += -1;
        play_sfx_a1(ptr_sfx_buf,DAT_800483e4,NULL);
      }
      uVar6 = get_controller_buttons_pressed('\0',R_CBUTTONS|R_TRIG|R_JPAD|U_JPAD);
      if (uVar6 != 0) {
        DAT_800483e4 += 1;
        play_sfx_a1(ptr_sfx_buf,DAT_800483e4,NULL);
      }
      uVar6 = get_controller_buttons_pressed('\0',D_CBUTTONS);
      if (uVar6 != 0) {
        music_related_30();
      }
      uVar6 = get_controller_buttons_pressed('\0',U_CBUTTONS);
      if (uVar6 != 0) {
        play_sfx_a1(ptr_sfx_buf,DAT_800483e4,NULL);
      }
    }
    else {
      if (uVar10 == 0x38) {
        iStack360 = get_video_mp_related_8002329C();
        iStack364 = get_video_mp_related_800232A0();
        uVar6 = get_controller_buttons_held('\0',D_CBUTTONS);
        if (uVar6 != 0) {
          iStack364 += 1;
        }
        uVar6 = get_controller_buttons_held('\0',U_CBUTTONS);
        if (uVar6 != 0) {
          iStack364 += -1;
        }
        uVar6 = get_controller_buttons_held('\0',R_CBUTTONS);
        if (uVar6 != 0) {
          iStack360 += 1;
        }
        uVar6 = get_controller_buttons_held('\0',L_CBUTTONS);
        if (uVar6 != 0) {
          iStack360 += -1;
        }
        set_video_mp_related_8002329C(iStack360);
        set_video_mp_related_800232A0(iStack364);
      }
    }
  }
  return;
}



void proc_7F0BF800(void)

{
  u32 uVar3;
  char cVar5;
  char cVar6;
  char cVar7;
  int iVar4;
  ulonglong uVar1;
  ITEM_IDS itemheld;
  longlong lVar2;
  float fVar8;
  float fVar9;
  
  uVar3 = get_cur_playernum();
  cVar7 = (char)uVar3;
  proc_7F09193C();
  uVar3 = get_debug_freeze_processing();
  if (uVar3 == 0) {
    uVar3 = get_debug_limit_controller_input();
    if ((uVar3 == 0) ||
       ((uVar3 = get_debug_limit_controller_input(), uVar3 == 0x3b && (DAT_80036abc < 0)))) {
      cVar5 = get_cur_controller_horz_stick_pos(cVar7);
      cVar6 = get_cur_controller_vert_stick_pos(cVar7);
      uVar1 = get_controller_buttons_held
                        (cVar7,R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                               DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                               A_BUTTON);
      proc_7F091080(cVar5,cVar6,(ushort)uVar1);
    }
    else {
      cVar5 = get_cur_controller_horz_stick_pos(cVar7);
      cVar7 = get_cur_controller_vert_stick_pos(cVar7);
      proc_7F091080(cVar5,cVar7,0);
    }
  }
  else {
    if (uVar3 == 1) {
      uVar3 = get_debug_limit_controller_input();
      if (uVar3 == 1) {
        cVar5 = get_cur_controller_horz_stick_pos(cVar7);
        cVar6 = get_cur_controller_vert_stick_pos(cVar7);
        uVar1 = get_controller_buttons_held
                          (cVar7,R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|
                                 DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|
                                 A_BUTTON);
        removed_7F0B2D38((int)cVar5,(int)cVar6,(uint)uVar1 & 0xffff);
      }
      else {
        cVar5 = get_cur_controller_horz_stick_pos(cVar7);
        cVar7 = get_cur_controller_vert_stick_pos(cVar7);
        removed_7F0B2D38((int)cVar5,(int)cVar7,0);
      }
    }
    else {
      if (uVar3 == 2) {
        uVar3 = get_debug_limit_controller_input();
        if (uVar3 == 2) {
          cVar5 = get_cur_controller_horz_stick_pos(cVar7);
          cVar6 = get_cur_controller_vert_stick_pos(cVar7);
          uVar1 = get_controller_buttons_held
                            (cVar7,R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2
                                   |DUMMY_1|R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON
                                   |A_BUTTON);
          possibly_reset_viewport_options_for_player(cVar5,cVar6,(ushort)uVar1);
        }
        else {
          cVar5 = get_cur_controller_horz_stick_pos(cVar7);
          cVar7 = get_cur_controller_vert_stick_pos(cVar7);
          possibly_reset_viewport_options_for_player(cVar5,cVar7,0);
        }
        proc_7F0C2E80();
      }
    }
  }
  fVar8 = *(float *)(ptr_BONDdata->position_data_pointer + 8) - (float)ptr_BONDdata->field_408;
  fVar9 = *(float *)(ptr_BONDdata->position_data_pointer + 0x10) - (float)ptr_BONDdata->field_410;
  fVar8 = sqrtf(fVar8 * fVar8 + fVar9 * fVar9);
  cur_player_stat_ptr->distance_traveled = cur_player_stat_ptr->distance_traveled + fVar8;
  iVar4 = get_scenario();
  if (iVar4 == 2) {
    uVar1 = proc_7F08CF80();
    if (uVar1 == 0) {
      cur_player_stat_ptr->have_token_or_goldengun = '\0';
    }
    else {
      itemheld = get_item_in_hand(0);
      if ((itemheld != ITEM_TOKEN) &&
         (draw_item_in_hand_has_more_ammo(0,ITEM_TOKEN),
         ptr_BONDdata->when_detonating_mines_is_0 == 2)) {
        ptr_BONDdata->when_detonating_mines_is_0 = 5;
      }
      cur_player_stat_ptr->flag_counter = cur_player_stat_ptr->flag_counter + clock_timer;
      cur_player_stat_ptr->have_token_or_goldengun = '\x01';
    }
  }
  else {
    iVar4 = get_scenario();
    lVar2 = (longlong)iVar4;
    if (lVar2 == 3) {
      proc_7F08CFC0();
      if (lVar2 == 0) {
        cur_player_stat_ptr->have_token_or_goldengun = '\0';
      }
      else {
        cur_player_stat_ptr->have_token_or_goldengun = '\x01';
      }
    }
  }
  return;
}



void unload_stage_text_data(void)

{
  ulonglong uVar1;
  undefined8 uVar2;
  
  if ((dword_800483A0 != 0) && (uVar1 = music_related_26(dword_800483A0), uVar1 != 0)) {
    music_related_28(dword_800483A0);
  }
  if (stagenum != LEVELID_TITLE) {
    uVar2 = get_textbank_number_for_stagenum(stagenum);
    blank_text_bank((int)uVar2);
    proc_7F007770();
  }
  unload_loop_all_players();
  unload_loop_all_guards();
  unload_loop_all_sfx();
  unload_loop_all_objects();
  unload_something_7f007920();
  unload_removed_7f007970();
  unload_alarms_something();
  cleanupObjects();
  cleanupObjectives();
  unload_music_related();
  unload_music_related_7F007980();
  setmissionstate_to_zero();
  proc_7F0B47E0();
  return;
}



void set_controls_locked_flag(undefined4 flag)

{
  controls_locked_flag = flag;
  return;
}



undefined4 get_controls_locked_flag(void)

{
  return controls_locked_flag;
}



DIFFICULTY get_current_difficulty(void)

{
  return difficulty_0;
}



void set_difficulty(undefined4 difficulty)

{
  difficulty_0 = difficulty;
  return;
}



void set_mp_time(undefined4 time)

{
  mp_time = time;
  return;
}



void set_mp_point(undefined4 point)

{
  mp_point = point;
  return;
}



f32 get_cur_mp_sec(void)

{
  return (f32)cur_mp_sec;
}



f32 get_cur_mp_min(void)

{
  return cur_mp_min;
}



f32 get_stage_time_sec(void)

{
  return stage_time_sec;
}



f32 get_poweron_time_sec(void)

{
  return poweron_time_sec;
}



void clear_ramrom_block_buffer_heading_ptrs(void)

{
  ptr_active_demofile = 0;
  ramrom_demo_related_0 = 0;
  ramrom_demo_related_1 = 0;
  return;
}



undefined4 get_is_ramrom_flag(void)

{
  return is_ramrom_flag;
}



u32 get_recording_ramrom_flag(void)

{
  return recording_ramrom_flag;
}



undefined4 interface_menu0B_runstage(void)

{
  return ramrom_demo_related_4;
}



void finalize_ramrom_on_hw(void)

{
  undefined *source;
  undefined auStack25 [25];
  
  source = (undefined *)(((uint)auStack25 | 0xf) ^ 0xf);
  *source = 0;
  source[1] = 0;
  romWrite(source,address_demo_loaded,0x10);
  address_demo_loaded = (void *)((int)address_demo_loaded + 4);
  ptr_active_demofile = (void *)romCopyAligned(&ramrom_data_target,(void *)0xf00000,0xf0);
  *(int *)((int)ptr_active_demofile + 0x7c) = global_timer - clock_timer;
  *(int *)((int)ptr_active_demofile + 0x80) = (int)address_demo_loaded + -0xf00000;
  romWrite(ptr_active_demofile,(void *)0xf00000,0xf0);
  return;
}



void save_ramrom_to_devtool(void)

{
  int iVar1;
  int iVar2;
  undefined4 uStack264;
  char acStack260 [260];
  
  iVar2 = 1;
  while( true ) {
    sprintf(acStack260,aReplayDemo_D,iVar2);
    iVar1 = check_file_found_on_indy(acStack260,&uStack264);
    if (iVar1 == 0) break;
    iVar2 += 1;
  }
  sprintf(acStack260,aReplayDemo_D_1,iVar2);
  check_file_exported(acStack260,0xf00000,*(undefined4 *)(ptr_active_demofile + 0x80));
  return;
}



void load_ramrom_from_devtool(void)

{
  int iVar1;
  undefined4 uStack4;
  
  iVar1 = check_file_found_on_indy(aReplayDemo_load,&uStack4);
  if (iVar1 != 0) {
    indy_load_ramrom_file(aReplayDemo_load,0xf00000,uStack4);
    ptr_active_demofile = romCopyAligned(&ramrom_data_target,(void *)0xf00000,0xe8);
  }
  return;
}



void record_player_input_as_packet(int param_1,int param_2,int param_3)

{
  int iVar1;
  char *pcVar2;
  ushort *puVar3;
  int iVar4;
  int iVar5;
  char cVar6;
  int iVar7;
  
  iVar1 = *(int *)(ptr_active_demofile + 0x18);
  iVar7 = 0;
  cVar6 = '\0';
  ramrom_demo_related_0 = &DAT_8008c470;
  ramrom_demo_related_1 = &DAT_8008c474;
  if (param_2 != param_3) {
    iVar5 = (param_2 + 1) % 0x14;
    if (false) {
      trap(0x1c00);
    }
    if ((false) && (param_2 + 1 == -0x80000000)) {
      trap(0x1800);
    }
    while( true ) {
      iVar4 = 0;
      if (0 < iVar1) {
        puVar3 = (ushort *)(param_1 + iVar5 * 0x18);
        do {
          pcVar2 = ramrom_demo_related_1 + iVar4 * 4 + iVar7 * iVar1 * 4;
          *pcVar2 = *(char *)(puVar3 + 1);
          iVar4 += 1;
          pcVar2[1] = *(char *)((int)puVar3 + 3);
          pcVar2[2] = (char)*puVar3;
          pcVar2[3] = (char)((uint)*puVar3 >> 8);
          cVar6 += *pcVar2 + pcVar2[1] + pcVar2[2] + pcVar2[3];
          puVar3 = puVar3 + 3;
        } while (iVar4 != iVar1);
      }
      iVar7 += 1;
      if (iVar5 == param_3) break;
      iVar4 = iVar5 + 1;
      iVar5 = iVar4 % 0x14;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar4 == -0x80000000)) {
        trap(0x1800);
      }
    }
  }
  ramrom_demo_related_0[1] = (char)iVar7;
  *ramrom_demo_related_0 = (char)dword_80048498;
  ramrom_demo_related_0[2] = (char)randseed._4_4_;
  iVar7 = iVar1 * 4 * iVar7;
  ramrom_demo_related_0[3] =
       cVar6 + *ramrom_demo_related_0 + ramrom_demo_related_0[1] + ramrom_demo_related_0[2];
  romWrite(ramrom_demo_related_0,address_demo_loaded,(iVar7 + 0x13U | 0xf) ^ 0xf);
  address_demo_loaded = (void *)((int)address_demo_loaded + ((iVar7 + 5U | 1) ^ 1));
  return;
}



int ramrom_replay_handler(int param_1,int param_2)

{
  byte bVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  undefined2 *puVar5;
  ulonglong uVar6;
  char cVar7;
  int iVar8;
  
  bVar1 = ramrom_demo_related_0[1];
  cVar7 = '\0';
  uVar6 = 0;
  iVar3 = *(int *)(ptr_active_demofile + 0x18);
  if (bVar1 != 0) {
    iVar8 = param_2 + 1;
    while( true ) {
      param_2 = iVar8 % 0x14;
      if (false) {
        trap(0x1c00);
      }
      if ((false) && (iVar8 == -0x80000000)) {
        trap(0x1800);
      }
      puVar5 = (undefined2 *)(param_1 + param_2 * 0x18);
      iVar8 = 0;
      do {
        if (iVar8 < iVar3) {
          pcVar4 = (char *)((int)uVar6 * iVar3 * 4 + ramrom_demo_related_1 + iVar8 * 4);
          *(char *)(puVar5 + 1) = *pcVar4;
          *(char *)((int)puVar5 + 3) = pcVar4[1];
          *puVar5 = CONCAT11(pcVar4[3],pcVar4[2]);
          cVar7 += *pcVar4 + pcVar4[1] + pcVar4[2] + pcVar4[3];
        }
        else {
          *(undefined *)(puVar5 + 1) = 0;
          *(undefined *)((int)puVar5 + 3) = 0;
          *puVar5 = 0;
        }
        iVar8 += 1;
        puVar5 = puVar5 + 3;
      } while (iVar8 != 4);
      uVar6 = SEXT48((int)uVar6 + 1);
      if (uVar6 == (ulonglong)bVar1) break;
      iVar8 = param_2 + 1;
    }
  }
  bVar1 = ramrom_demo_related_0[2];
  if (((longlong)randseed._4_4_ & 0xffU) == (ulonglong)bVar1) {
    cVar2 = *ramrom_demo_related_0;
  }
  else {
    check_set_cameramode_to_A();
    bVar1 = ramrom_demo_related_0[2];
    cVar2 = *ramrom_demo_related_0;
  }
  if ((byte)(cVar7 + cVar2 + ramrom_demo_related_0[1] + bVar1) != ramrom_demo_related_0[3]) {
    check_set_cameramode_to_A();
  }
  controller_7000C930(0);
  uVar6 = get_controller_buttons_pressed
                    ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                          R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  if (uVar6 != 0) {
    check_set_cameramode_to_A();
    prev_keypresses = 1;
  }
  controller_7000C930(1);
  return param_2;
}



void iterate_ramrom_entries_handle_camera_out(void)

{
  byte bVar1;
  int iVar2;
  
  ramrom_demo_related_0 = (byte *)romCopyAligned(&DAT_8008c468,address_demo_loaded,4);
  bVar1 = ramrom_demo_related_0[1];
  if (bVar1 != 0) {
    ramrom_demo_related_1 =
         romCopyAligned(&DAT_8008c48e,(void *)((int)address_demo_loaded + 4),
                        *(int *)(ptr_active_demofile + 0x18) * 4 * (uint)bVar1);
    bVar1 = ramrom_demo_related_0[1];
  }
  if ((bVar1 == 0) && (*ramrom_demo_related_0 == 0)) {
    check_set_cameramode_to_A();
  }
  else {
    address_demo_loaded =
         (void *)((int)address_demo_loaded +
                 ((*(int *)(ptr_active_demofile + 0x18) * 4 * (uint)bVar1 + 5 | 1) ^ 1));
  }
  proc_7F0C0AA0((uint)*ramrom_demo_related_0);
  iVar2 = *(int *)(ptr_active_demofile + 0x7c) + -0x3c;
  if ((iVar2 <= global_timer) && (global_timer - clock_timer < iVar2)) {
    check_set_cameramode_to_A();
  }
  return;
}



void copy_current_ingame_registers_before_ramrom_playback(ramromfilestructure *param_1)

{
  undefined4 uVar1;
  u32 uVar3;
  ulonglong uVar2;
  
  uVar1 = randseed._0_4_;
  *(undefined4 *)((int)&param_1->randomseed + 4) = randseed._4_4_;
  *(undefined4 *)&param_1->randomseed = uVar1;
  uVar1 = randomseed._0_4_;
  *(undefined4 *)((int)&param_1->randomizer + 4) = randomseed._4_4_;
  *(undefined4 *)&param_1->randomizer = uVar1;
  param_1->mode = gamemode;
  param_1->numplayers = selected_num_players;
  param_1->scenario = scenario;
  param_1->mpstage_sel = MP_stage_selected;
  param_1->gamelength = game_length;
  uVar3 = get_mp_weapon_set();
  param_1->mp_weapon_set = uVar3;
  param_1->p1_mp_char = player_1_char;
  param_1->p2_mp_char = player_2_char;
  param_1->p3_mp_char = player_3_char;
  param_1->p4_mp_char = player_4_char;
  param_1->p1_handi = handicap_player1;
  param_1->p2_handi = handicap_player2;
  param_1->p3_handi = handicap_player3;
  param_1->p4_handi = handicap_player4;
  param_1->p1_contstyle = controlstyle_player[0];
  param_1->p2_contstyle = controlstyle_player[1];
  param_1->p3_contstyle = controlstyle_player[2];
  param_1->p4_contstyle = controlstyle_player[3];
  param_1->aim_option = aim_sight_adjustment;
  uVar2 = get_players_team_or_scenario_item_flag(0);
  param_1->p1_flags = (u32)uVar2;
  uVar2 = get_players_team_or_scenario_item_flag(1);
  param_1->p2_flags = (u32)uVar2;
  uVar2 = get_players_team_or_scenario_item_flag(2);
  param_1->p3_flags = (u32)uVar2;
  uVar2 = get_players_team_or_scenario_item_flag(3);
  param_1->p4_flags = (u32)uVar2;
  return;
}



void copy_recorded_ramrom_registers_to_proper_place_ingame(ramromfilestructure *demo)

{
  randseed._0_4_ = *(undefined4 *)&demo->randomseed;
  randseed._4_4_ = *(undefined4 *)((int)&demo->randomseed + 4);
  randomseed._0_4_ = *(undefined4 *)&demo->randomizer;
  randomseed._4_4_ = *(undefined4 *)((int)&demo->randomizer + 4);
  gamemode = demo->mode;
  selected_num_players = demo->numplayers;
  scenario = demo->scenario;
  MP_stage_selected = demo->mpstage_sel;
  game_length = demo->gamelength;
  set_mp_weapon_set(demo->mp_weapon_set);
  player_1_char = demo->p1_mp_char;
  player_2_char = demo->p2_mp_char;
  player_3_char = demo->p3_mp_char;
  player_4_char = demo->p4_mp_char;
  handicap_player1 = demo->p1_handi;
  handicap_player2 = demo->p2_handi;
  handicap_player3 = demo->p3_handi;
  handicap_player4 = demo->p4_handi;
  controlstyle_player[0] = demo->p1_contstyle;
  controlstyle_player[1] = demo->p2_contstyle;
  controlstyle_player[2] = demo->p3_contstyle;
  controlstyle_player[3] = demo->p4_contstyle;
  aim_sight_adjustment = demo->aim_option;
  set_players_team_or_scenario_item_flag(0,(char)demo->p1_flags);
  set_players_team_or_scenario_item_flag(1,(char)demo->p2_flags);
  set_players_team_or_scenario_item_flag(2,(char)demo->p3_flags);
  set_players_team_or_scenario_item_flag(3,(char)demo->p4_flags);
  return;
}



void test_if_replaying_or_recording_demos_this_stage_load(LEVELID stage,DIFFICULTY difficulty)

{
  u32 uVar1;
  
  if (flag_to_record_ramrom == 0) {
    if (ramrom_demo_related_4 != 0) {
      DAT_8008c5f8 = 0;
      set_selected_difficulty(ptr_active_demofile->difficulty);
      set_solo_and_ptr_briefing(ptr_active_demofile->stagenum);
      proc_7F01D644(&ptr_active_demofile->savefile);
      copy_current_ingame_registers_before_ramrom_playback(&ramromsettingsbackup);
      copy_recorded_ramrom_registers_to_proper_place_ingame(ptr_active_demofile);
      is_ramrom_flag = 1;
      ramrom_demo_related_3 = 1;
      set_disable_all_rumble_and_something(ramrom_replay_handler,ptr_active_demofile->size_cmds);
      controller_7000C930(1);
      ramrom_demo_related_4 = 0;
    }
  }
  else {
    ptr_active_demofile = &ramrom_data_target;
    DAT_8008c5f8 = 0;
    ramrom_data_target.stagenum = stage;
    ramrom_data_target.difficulty = difficulty;
    uVar1 = get_attached_controller_count();
    ptr_active_demofile->size_cmds = uVar1;
    ptr_active_demofile->slotnum = record_slot_num;
    proc_7F01D61C(&ptr_active_demofile->savefile);
    copy_current_ingame_registers_before_ramrom_playback(ptr_active_demofile);
    recording_ramrom_flag = 1;
    ramrom_demo_related_6 = 1;
    set_ptr_tlb_ramrom_record(record_player_input_as_packet);
    address_demo_loaded = 0xf00000;
    romWrite(ptr_active_demofile,(void *)0xf00000,0xf0);
    address_demo_loaded += 0xe8;
    flag_to_record_ramrom = 0;
  }
  return;
}



void record_next_movie_to_slot(undefined4 slotnum)

{
  flag_to_record_ramrom = 1;
  record_slot_num = slotnum;
  return;
}



void stop_recording_ramrom(void)

{
  if (ramrom_demo_related_6 != 0) {
    finalize_ramrom_on_hw();
    set_ptr_tlb_ramrom_record(0);
    ramrom_demo_related_6 = 0;
    recording_ramrom_flag = 0;
  }
  return;
}



void replay_recorded_ramrom_at_address(uint param_1)

{
  address_demo_loaded = param_1;
  ptr_active_demofile = romCopyAligned(&ramrom_data_target,(void *)param_1,0xe8);
  address_demo_loaded += 0xe8;
  ramrom_demo_related_4 = 1;
  set_solo_and_ptr_briefing(*(LEVELID *)(ptr_active_demofile + 0x10));
  set_selected_difficulty(*(DIFFICULTY *)(ptr_active_demofile + 0x14));
  set_menu_to_mode(MENU_RUN_STAGE,1);
  return;
}



void replay_recorded_ramrom_from_indy(void)

{
  replay_recorded_ramrom_at_address(0xf00000);
  return;
}



void check_set_cameramode_to_A(void)

{
  int iVar1;
  
  iVar1 = get_camera_mode();
  if (iVar1 != 10) {
    set_camera_mode(10);
  }
  return;
}



void stop_demo_playback(void)

{
  if (ramrom_demo_related_6 == 0) {
    if (ramrom_demo_related_3 != 0) {
      copy_recorded_ramrom_registers_to_proper_place_ingame(&ramromsettingsbackup);
      set_disable_all_rumble_and_something(0,0xffffffff);
      controller_7000C930(0);
      ramrom_demo_related_3 = 0;
      is_ramrom_flag = 0;
    }
  }
  else {
    stop_recording_ramrom();
  }
  return;
}



void select_ramrom_to_play(void)

{
  u32 uVar1;
  ramrom_struct *prVar2;
  uint uVar3;
  int iVar4;
  
  uVar1 = check_egypt_completed_any_folder();
  uVar3 = 0;
  if ((ramrom_table.dam1.ROMaddress != 0) && (ramrom_table.dam1.is_locked <= (int)uVar1)) {
    iVar4 = ramrom_table.dam2.ROMaddress;
    prVar2 = &ramrom_table;
    while( true ) {
      uVar3 += 1;
      if ((iVar4 == 0) || ((int)uVar1 < (prVar2->dam2).is_locked)) break;
      iVar4 = (prVar2->facility1).ROMaddress;
      prVar2 = (ramrom_struct *)&prVar2->dam2;
    }
  }
  uVar1 = get_random_value();
  if (uVar3 == 0) {
    trap(0x1c00);
  }
  replay_recorded_ramrom_at_address((&ramrom_table.dam1)[uVar1 % uVar3].ROMaddress);
  return;
}



// WARNING: Instruction at (ram,0x7f0c0a44) overlaps instruction at (ram,0x7f0c0a40)
// 

undefined4 check_ramrom_flags(void)

{
  int iVar1;
  u32 uVar2;
  undefined4 uVar3;
  
  iVar1 = get_is_ramrom_flag();
  if ((iVar1 == 0) && (uVar2 = get_recording_ramrom_flag(), uVar2 == 0)) {
    uVar3 = 0;
  }
  else {
    uVar3 = *(undefined4 *)(ptr_active_demofile + 0x88);
  }
  return uVar3;
}



void store_osgetcount(void)

{
  copy_of_osgetcount_value_0 = osGetCount();
  copy_of_osgetcount_value_1 = copy_of_osgetcount_value_0;
  return;
}



void proc_7F0C0AA0(int param_1)

{
  uint uVar1;
  uint uVar2;
  
  copy_of_osgetcount_value_0 = copy_of_osgetcount_value_1;
  copy_of_osgetcount_value_1 = osGetCount();
  uVar2 = DAT_80048494 + param_1;
  uVar1 = uVar2;
  if ((int)uVar2 < 0) {
    uVar1 = uVar2 + 1;
  }
  DAT_800484a8 = ((int)uVar1 >> 1) - DAT_800484a0;
  dword_80048490 = DAT_80048494;
  DAT_80048494 = uVar2;
  dword_80048498 = param_1;
  DAT_8004849c = DAT_800484a0;
  DAT_800484a0 = (int)uVar1 >> 1;
  DAT_800484a4 = uVar2 & 1;
  return;
}



void proc_7F0C0B4C(void)

{
  uint uVar1;
  u32 uVar2;
  
  do {
    uVar2 = osGetCount();
    uVar1 = ((uVar2 - copy_of_osgetcount_value_1) + 0x5eb61) / 0xbd6c3;
    if (false) {
      trap(0x1c00);
    }
  } while (uVar1 < dword_800484B4);
  dword_800484B4 = 1;
  proc_7F0C0AA0(uVar1);
  return;
}



void proc_7F0C0BE4(undefined4 param_1)

{
  dword_800484B4 = param_1;
  return;
}



void proc_7F0C0BF0(void)

{
  proc_7F0A9358();
  return;
}



void proc_7F0C0C10(void)

{
  proc_7F0A9180();
  return;
}



undefined4 get_mission_state(void)

{
  return mission_state;
}



void set_missionstate(ulonglong param_1)

{
  int iVar1;
  
  iVar1 = (int)param_1;
  switch(mission_state) {
  case 0:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c0c8c. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4BBC)[iVar1])();
      return;
    }
  case 1:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c0d40. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4C70)[iVar1])();
      return;
    }
  case 2:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c0e30. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4D60)[iVar1])();
      return;
    }
  case 3:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c0ec8. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4DF8)[iVar1])();
      return;
    }
  case 4:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c1000. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4F30)[iVar1])();
      return;
    }
  case 5:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c10cc. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F4FFC)[iVar1])();
      return;
    }
  case 6:
    if (param_1 < 7) {
      mission_state = iVar1;
                    // WARNING: Could not recover jumptable at 0x7f0c1174. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&jpt_700F50A4)[iVar1])();
      return;
    }
  default:
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
}



void proc_7F0C11FC(undefined4 param_1)

{
  short sVar1;
  
  musicTrack1Stop();
  music_related_2nd_block_0();
  music_related_3rd_block_0();
  mission_state = 0;
  DAT_8008c600 = param_1;
  sVar1 = proc_7F0D2848((short)param_1);
  if (sVar1 < 0) {
    set_missionstate(1);
  }
  else {
    set_missionstate(4);
  }
  return;
}



void setmissionstate_to_zero(void)

{
  set_missionstate(0);
  return;
}



void proc_7F0C1288(void)

{
  short sVar1;
  
  sVar1 = proc_7F0D2848((short)DAT_8008c600);
  if (sVar1 < 0) {
    set_missionstate(2);
  }
  else {
    set_missionstate(5);
  }
  return;
}



void proc_7F0C12CC(void)

{
  short sVar1;
  
  sVar1 = proc_7F0D2848((short)DAT_8008c600);
  if (sVar1 < 0) {
    set_missionstate(1);
  }
  else {
    set_missionstate(4);
  }
  return;
}



void proc_7F0C1310(void)

{
  DAT_8008c604 = mission_state;
  set_missionstate(3);
  return;
}



void proc_7F0C1340(void)

{
  set_missionstate((longlong)DAT_8008c604);
  return;
}



void proc_7F0C1364(void)

{
  DAT_8008c608 = 0;
  DAT_8008c60c = 0;
  DAT_8008c610 = 0;
  DAT_8008c614 = 0;
  DAT_8008c618 = 0;
  DAT_8008c61c = 0;
  DAT_8008c620 = 0;
  DAT_8008c624 = 0;
  DAT_8008c628 = 0;
  DAT_8008c62c = 0;
  DAT_8008c630 = 0;
  DAT_8008c634 = 0;
  return;
}



void reset_all_music_slots(void)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int *piVar6;
  int *piVar7;
  int iVar8;
  
  iVar4 = clock_timer;
  bVar2 = false;
  piVar6 = &DAT_8008c618;
  piVar7 = &DAT_8008c608;
  iVar8 = 0;
  do {
    iVar1 = *piVar7;
    if (iVar1 == 0) {
      if (0 < *piVar6) {
        iVar3 = *piVar6;
        goto LAB_7f0c1414;
      }
    }
    else {
      iVar3 = *piVar6;
LAB_7f0c1414:
      piVar5 = (int *)((int)&DAT_8008c628 + iVar8);
      if (iVar3 < iVar4) {
        *piVar6 = 0;
      }
      else {
        *piVar6 = iVar3 - iVar4;
      }
      iVar3 = *piVar5;
      if (iVar3 != 0) {
        if (iVar3 < iVar4) {
          *piVar5 = 0;
        }
        else {
          *piVar5 = iVar3 - iVar4;
        }
        if (*piVar5 == 0) {
          *piVar7 = 0;
        }
        else {
          if ((iVar1 != 0) || (*piVar6 != 0)) {
            bVar2 = true;
          }
        }
      }
    }
    piVar6 = piVar6 + 1;
    iVar8 += 4;
    piVar7 = piVar7 + 1;
    if (piVar6 == &DAT_8008c628) {
      if (iVar4 != 0) {
        iVar4 = get_mission_state();
        if ((iVar4 == 2) || (iVar4 = get_mission_state(), iVar4 == 5)) {
          if (!bVar2) {
            proc_7F0C12CC();
          }
        }
        else {
          if (bVar2) {
            proc_7F0C1288();
          }
        }
      }
      return;
    }
  } while( true );
}



void set_musicslot_time(int slot,int min,int sec)

{
  if ((&DAT_8008c608)[slot] == 0) {
    (&DAT_8008c608)[slot] = 1;
    (&DAT_8008c618)[slot] = min * 0x3c;
    (&DAT_8008c628)[slot] = sec * 0x3c;
  }
  return;
}



void reset_music_in_slot(u32 param_1)

{
  if (-1 < (int)param_1) {
    (&DAT_8008c608)[param_1] = 0;
    return;
  }
  DAT_8008c608 = 0;
  DAT_8008c60c = 0;
  DAT_8008c610 = 0;
  DAT_8008c614 = 0;
  DAT_8008c618 = 0;
  DAT_8008c61c = 0;
  DAT_8008c620 = 0;
  DAT_8008c624 = 0;
  DAT_8008c628 = 0;
  DAT_8008c62c = 0;
  DAT_8008c630 = 0;
  DAT_8008c634 = 0;
  return;
}



undefined8 get_textbank_number_for_stagenum(LEVELID param_1)

{
  if (true) {
    switch(param_1) {
    case LEVELID_BUNKER1:
      return 0x1e;
    case LEVELID_SILO:
      return 0x22;
    case LEVELID_STATUE:
      return 0x23;
    case LEVELID_CONTROL:
      return 8;
    case LEVELID_ARCHIVES:
      return 2;
    case LEVELID_TRAIN:
      return 0x24;
    case LEVELID_FRIGATE:
      return 0xd;
    case LEVELID_BUNKER2:
      return 0x1d;
    case LEVELID_AZTEC:
      return 5;
    case LEVELID_STREETS:
      return 0x19;
    case LEVELID_DEPOT:
      return 0xc;
    case LEVELID_COMPLEX:
      return 0x1a;
    case LEVELID_EGYPT:
      return 10;
    case LEVELID_DAM:
      return 0xb;
    case LEVELID_FACILITY:
      return 3;
    case LEVELID_RUNWAY:
      return 0x1c;
    case LEVELID_SURFACE:
      return 0x1f;
    case LEVELID_JUNGLE:
      return 0x12;
    case LEVELID_TEMPLE:
      return 0xe;
    case LEVELID_CAVERNS:
      return 7;
    case LEVELID_CRADLE:
      return 9;
    case LEVELID_SURFACE2:
      return 0x20;
    case LEVELID_BASEMENT:
      return 0x11;
    case LEVELID_STACK:
      return 4;
    case LEVELID_LIBRARY:
      return 1;
    case LEVELID_CAVES:
      return 0x17;
    case LEVELID_CUBA:
      return 0x14;
    }
  }
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 proc_7F0C16E4(void)

{
  undefined8 in_v1;
  
  return in_v1;
}



void init_LnameX(void)

{
  undefined *puVar1;
  undefined **ppuVar2;
  undefined **ppuVar3;
  int iVar4;
  
  if (j_text_trigger != 0) {
    ptr_char_data_buf = (undefined *)allocate_bytes_in_bank(0x2e80,6);
    ptr_char_registry = (undefined *)allocate_bytes_in_bank(0x100,6);
    iVar4 = 0;
    do {
      ptr_char_registry[iVar4] = ptr_char_registry[iVar4] & 0x3f;
      *(ushort *)(ptr_char_registry + iVar4) = *(ushort *)(ptr_char_registry + iVar4) | 0x3fff;
      (ptr_char_registry + iVar4)[2] = (ptr_char_registry + iVar4)[2] & 0x3f;
      *(ushort *)(ptr_char_registry + iVar4 + 2) =
           *(ushort *)(ptr_char_registry + iVar4 + 2) | 0x3fff;
      (ptr_char_registry + iVar4)[4] = (ptr_char_registry + iVar4)[4] & 0x3f;
      *(ushort *)(ptr_char_registry + iVar4 + 4) =
           *(ushort *)(ptr_char_registry + iVar4 + 4) | 0x3fff;
      (ptr_char_registry + iVar4)[6] = (ptr_char_registry + iVar4)[6] & 0x3f;
      puVar1 = ptr_char_registry + iVar4;
      iVar4 += 8;
      *(ushort *)(puVar1 + 6) = *(ushort *)(puVar1 + 6) | 0x3fff;
    } while (iVar4 != 0xf8);
  }
  iVar4 = j_text_trigger;
  ptr_text = 0;
  ppuVar2 = (undefined **)table_text_pointers;
  do {
    ppuVar3 = ppuVar2 + 4;
    ppuVar2[1] = NULL;
    ppuVar2[2] = NULL;
    ppuVar2[3] = NULL;
    *ppuVar2 = NULL;
    ppuVar2 = ppuVar3;
  } while (ppuVar3 != &ptr_char_data_buf);
  _load_resource_named_to_membank(*(byte **)(&ptr_LgunX + iVar4 * 4),1,0x100,6);
  table_text_pointers[37] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LtitleX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[38] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LmpmenuX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[39] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LpropobjX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[40] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LmpweaponsX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[41] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LoptionsX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[42] = ppuVar3;
  _load_resource_named_to_membank(*(byte **)(&ptr_LmiscX + j_text_trigger * 4),1,0x100,6);
  table_text_pointers[43] = ppuVar3;
  return;
}



void something_with_LnameJ(void)

{
  ushort uVar1;
  ushort *puVar2;
  int iVar3;
  
  iVar3 = 0;
  if (j_text_trigger != 0) {
    do {
      puVar2 = (ushort *)(ptr_char_registry + iVar3);
      if (*puVar2 >> 0xe == 0) {
        uVar1 = puVar2[1];
      }
      else {
        *(byte *)puVar2 = ((byte)(*puVar2 >> 0xe) - 1) * '@' | *(byte *)puVar2 & 0x3f;
        puVar2 = (ushort *)(ptr_char_registry + iVar3);
        uVar1 = puVar2[1];
      }
      if (uVar1 >> 0xe == 0) {
        uVar1 = puVar2[2];
      }
      else {
        *(byte *)(puVar2 + 1) = ((byte)(uVar1 >> 0xe) - 1) * '@' | *(byte *)(puVar2 + 1) & 0x3f;
        puVar2 = (ushort *)(ptr_char_registry + iVar3);
        uVar1 = puVar2[2];
      }
      if (uVar1 >> 0xe == 0) {
        uVar1 = puVar2[3];
      }
      else {
        *(byte *)(puVar2 + 2) = ((byte)(uVar1 >> 0xe) - 1) * '@' | *(byte *)(puVar2 + 2) & 0x3f;
        puVar2 = (ushort *)(ptr_char_registry + iVar3);
        uVar1 = puVar2[3];
      }
      iVar3 += 8;
      if (uVar1 >> 0xe != 0) {
        *(byte *)(puVar2 + 3) = ((byte)(uVar1 >> 0xe) - 1) * '@' | *(byte *)(puVar2 + 3) & 0x3f;
      }
    } while (iVar3 != 0xf8);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0c1abc) overlaps instruction at (ram,0x7f0c1ab8)
// 

int something_with_LnameX(uint param_1)

{
  bool bVar1;
  ushort uVar3;
  undefined *puVar2;
  int iVar4;
  ushort *puVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  
  iVar8 = -1;
  bVar1 = (param_1 & 0x2000) != 0;
  iVar7 = 0;
  iVar4 = 0;
  iVar10 = -1;
  puVar5 = (ushort *)ptr_char_registry;
  do {
    iVar11 = (int)param_1 >> 1;
    if ((!bVar1) && ((longlong)iVar11 == ((ulonglong)*puVar5 & 0x3fff))) break;
    if ((bVar1) &&
       (((iVar4 + 1 < 0x7c && ((longlong)iVar11 == ((ulonglong)*puVar5 & 0x3fff))) &&
        ((longlong)iVar11 == ((ulonglong)puVar5[1] & 0x3fff))))) break;
    uVar3 = *puVar5 >> 0xe;
    iVar6 = iVar4 + 1;
    if (uVar3 == 0) {
      iVar8 = iVar4;
    }
    iVar7 += 2;
    iVar9 = iVar10;
    if (((uVar3 == 0) && (iVar9 = iVar10, puVar5[1] >> 0xe == 0)) && (iVar9 = iVar4, 0x7b < iVar6))
    {
      iVar9 = iVar10;
    }
    puVar5 = puVar5 + 1;
    iVar4 = iVar6;
    iVar10 = iVar9;
  } while (iVar6 != 0x7c);
  if (iVar4 < 0x7c) {
    if (bVar1) {
      *(byte *)puVar5 = *(byte *)puVar5 & 0x3f | 0x80;
      (ptr_char_registry + iVar7)[2] = (ptr_char_registry + iVar7)[2] & 0x3f | 0x80;
      puVar2 = ptr_char_data_buf + iVar4 * 0x60;
    }
    else {
      *(byte *)puVar5 = *(byte *)puVar5 & 0x3f | 0x80;
      puVar2 = ptr_char_data_buf + iVar4 * 0x60;
    }
  }
  else {
    if ((bVar1) || (iVar8 < 0)) {
      puVar2 = ptr_char_data_buf;
      if ((bVar1) && (iVar4 = iVar10 * 2, puVar2 = ptr_char_data_buf, -1 < iVar10)) {
        ptr_char_registry[iVar4] = ptr_char_registry[iVar4] & 0x3f | 0x80;
        (ptr_char_registry + iVar4)[2] = (ptr_char_registry + iVar4)[2] & 0x3f | 0x80;
        uVar3 = (ushort)iVar11 & 0x3fff;
        *(ushort *)(ptr_char_registry + iVar4) =
             uVar3 | *(ushort *)(ptr_char_registry + iVar4) & 0xc000;
        *(ushort *)(ptr_char_registry + iVar4 + 2) =
             uVar3 | *(ushort *)(ptr_char_registry + iVar4 + 2) & 0xc000;
        romCopy(ptr_char_data_buf + iVar10 * 0x60,
                &unknown123040 + ((int)(param_1 & 0x1fff) >> 1) * 0x80,0x80);
        puVar2 = ptr_char_data_buf + iVar10 * 0x60;
      }
    }
    else {
      ptr_char_registry[iVar8 * 2] = ptr_char_registry[iVar8 * 2] & 0x3f | 0x80;
      *(ushort *)(ptr_char_registry + iVar8 * 2) =
           (ushort)iVar11 & 0x3fff | *(ushort *)(ptr_char_registry + iVar8 * 2) & 0xc000;
      romCopy(ptr_char_data_buf + iVar8 * 0x60,&unknown117940 + iVar11 * 0x60,0x60);
      puVar2 = ptr_char_data_buf + iVar8 * 0x60;
    }
  }
  return (int)puVar2;
}



void load_mission_text_bank(u32 param_1)

{
  undefined4 in_v0_lo;
  
  _load_resource_named_to_membank
            ((byte *)(&(&LnameX_lookuptable)[param_1].en_file)[j_text_trigger],1,0x100,4);
  (&ptr_text)[param_1] = in_v0_lo;
  return;
}



void load_briefing_text_bank(int lnameID,undefined *target,int size)

{
  undefined *puVar1;
  
  puVar1 = _load_resource_named_to_buffer
                     ((byte *)(&(&LnameX_lookuptable)[lnameID].en_file)[j_text_trigger],1,target,
                      size);
  *(undefined **)(&ptr_text + lnameID) = puVar1;
  return;
}



void blank_text_bank(int param_1)

{
  (&ptr_text)[param_1] = 0;
  return;
}



byte * get_textptr_for_textID(u16 id)

{
  int iVar1;
  
  iVar1 = *(int *)((&ptr_text)[(int)(short)id >> 10] + ((int)(short)id & 0x3ffU) * 4);
  if (iVar1 != 0) {
    return (byte *)(iVar1 + (&ptr_text)[(int)(short)id >> 10]);
  }
  return NULL;
}



undefined8 MP_menu_page_adv_right(void)

{
  switch(ptr_BONDdata->page_in_mp_pause_menu) {
  case 0:
  case 1:
  case 2:
  case 4:
    return 1;
  case 3:
    break;
  case 5:
  case 6:
  case 7:
    return 0;
  default:
    return 0;
  }
  if (is_gameover_flag == 0) {
    return 1;
  }
  return 0;
}



undefined8 MP_menu_page_adv_left(void)

{
  switch(ptr_BONDdata->page_in_mp_pause_menu) {
  case 0:
  case 6:
  case 7:
    return 0;
  case 1:
    break;
  case 2:
  case 3:
  case 4:
  case 5:
    return 1;
  default:
    return 0;
  }
  if (is_gameover_flag == 0) {
    return 0;
  }
  return 1;
}



undefined8 check_if_player_is_pressing_anything_right(char param_1)

{
  int iVar3;
  ulonglong uVar1;
  undefined8 uVar2;
  
  iVar3 = get_controller_3dstick_L_R(param_1,-2,1);
  uVar1 = get_controller_buttons_pressed(param_1,R_CBUTTONS|R_JPAD);
  if ((uVar1 != 0) || ((uVar2 = 0, 0 < iVar3 && (ptr_BONDdata->press_stick_register != 0)))) {
    uVar2 = 1;
  }
  return uVar2;
}



undefined8 check_if_player_is_pressing_anything_left(char param_1)

{
  int iVar3;
  ulonglong uVar1;
  undefined8 uVar2;
  
  iVar3 = get_controller_3dstick_L_R(param_1,-2,1);
  uVar1 = get_controller_buttons_pressed(param_1,L_CBUTTONS|L_JPAD);
  if ((uVar1 != 0) || ((uVar2 = 0, iVar3 < -1 && (ptr_BONDdata->press_stick_register != 0)))) {
    uVar2 = 1;
  }
  return uVar2;
}



int ** play_watch_sfx_beep(void)

{
  int **ppiVar1;
  
  ppiVar1 = play_sfx_a1(ptr_sfx_buf,0x9f,NULL);
  return ppiVar1;
}



void unpause_game(void)

{
  stop_play_flag = 0;
  is_gameover_flag = 0;
  is_paused = 0;
  return;
}



undefined4 proc_7F0C2024(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  u32 uVar1;
  undefined4 uVar2;
  
  if ((param_2 < param_3) ||
     ((param_3 == param_2 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
    uVar2 = 1;
  }
  else {
    uVar2 = 0;
    param_3 = param_2;
  }
  if (2 < param_1) {
    if ((param_3 < param_4) ||
       ((param_4 == param_3 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
      uVar2 = 2;
      param_3 = param_4;
    }
    if (3 < param_1) {
      if (param_3 < param_5) {
        uVar2 = 3;
      }
      else {
        if ((param_5 == param_3) && (uVar1 = get_random_value(), (uVar1 & 1) != 0)) {
          uVar2 = 3;
        }
      }
    }
  }
  return uVar2;
}



undefined4 proc_7F0C2114(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  u32 uVar1;
  undefined4 uVar2;
  
  if ((param_3 < param_2) ||
     ((param_3 == param_2 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
    uVar2 = 1;
  }
  else {
    uVar2 = 0;
    param_3 = param_2;
  }
  if (2 < param_1) {
    if ((param_4 < param_3) ||
       ((param_4 == param_3 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
      uVar2 = 2;
      param_3 = param_4;
    }
    if (3 < param_1) {
      if (param_5 < param_3) {
        uVar2 = 3;
      }
      else {
        if ((param_5 == param_3) && (uVar1 = get_random_value(), (uVar1 & 1) != 0)) {
          uVar2 = 3;
        }
      }
    }
  }
  return uVar2;
}



undefined4 proc_7F0C2204(int param_1,float param_2,float param_3,float param_4,float param_5)

{
  u32 uVar1;
  undefined4 uVar2;
  float in_a3_lo;
  int iVar3;
  float in_stack_00000010;
  
  if ((param_4 < param_5) ||
     ((param_5 == param_4 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
    uVar2 = 1;
    param_4 = param_5;
  }
  else {
    uVar2 = 0;
  }
  iVar3 = (int)param_4;
  if (2 < param_1) {
    if (((float)iVar3 < in_a3_lo) ||
       ((in_a3_lo == (float)iVar3 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
      uVar2 = 2;
      iVar3 = (int)in_a3_lo;
    }
    if (3 < param_1) {
      if (in_stack_00000010 <= (float)iVar3) {
        if ((in_stack_00000010 == (float)iVar3) && (uVar1 = get_random_value(), (uVar1 & 1) != 0)) {
          uVar2 = 3;
        }
      }
      else {
        uVar2 = 3;
      }
    }
  }
  return uVar2;
}



undefined4 proc_7F0C234C(int param_1,float param_2,float param_3,float param_4,float param_5)

{
  u32 uVar1;
  undefined4 uVar2;
  float in_a3_lo;
  int iVar3;
  float in_stack_00000010;
  
  if ((param_5 < param_4) ||
     ((param_5 == param_4 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
    uVar2 = 1;
    param_4 = param_5;
  }
  else {
    uVar2 = 0;
  }
  iVar3 = (int)param_4;
  if (2 < param_1) {
    if ((in_a3_lo < (float)iVar3) ||
       ((in_a3_lo == (float)iVar3 && (uVar1 = get_random_value(), (uVar1 & 1) != 0)))) {
      uVar2 = 2;
      iVar3 = (int)in_a3_lo;
    }
    if (3 < param_1) {
      if ((float)iVar3 <= in_stack_00000010) {
        if ((in_stack_00000010 == (float)iVar3) && (uVar1 = get_random_value(), (uVar1 & 1) != 0)) {
          uVar2 = 3;
        }
      }
      else {
        uVar2 = 3;
      }
    }
  }
  return uVar2;
}



void proc_7F0C2494(void)

{
  set_controls_locked_flag(1);
  is_paused = 1;
  return;
}



undefined8 proc_7F0C24BC(void)

{
  ulonglong uVar1;
  undefined8 uVar2;
  
  uVar1 = get_num_players();
  if (uVar1 == 1) {
    uVar2 = 1;
  }
  else {
    if (stop_play_flag == 0) {
      uVar2 = 1;
      if (ptr_BONDdata->in_mp_pause_menu != 0) {
        uVar2 = 0;
      }
    }
    else {
      uVar2 = 0;
    }
  }
  return uVar2;
}



void set_stopplay_flag(void)

{
  stop_play_flag = 1;
  return;
}



// WARNING: Instruction at (ram,0x7f0c2c04) overlaps instruction at (ram,0x7f0c2c00)
// 

void proc_7F0C2530(longlong param_1)

{
  int *piVar1;
  int iVar2;
  ulonglong uVar3;
  int iVar4;
  s16 sVar7;
  byte *pbVar5;
  u32 uVar6;
  int playernum;
  uint uVar8;
  player_data *ppVar9;
  uint uVar10;
  ulonglong uVar11;
  int *piVar12;
  int *piVar13;
  player_data *ppVar14;
  ulonglong uVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float extraout_f12;
  float extraout_f12_00;
  float extraout_f12_01;
  float extraout_f12_02;
  float extraout_f12_03;
  float extraout_f12_04;
  float extraout_f14;
  float extraout_f14_00;
  float extraout_f14_01;
  float extraout_f14_02;
  float extraout_f14_03;
  float extraout_f14_04;
  int aiStack252 [4];
  int iStack236;
  float afStack232 [2];
  int aiStack224 [2];
  float afStack216 [2];
  uint uStack208;
  int aiStack204 [6];
  int iStack180;
  float fStack176;
  float fStack172;
  int iStack168;
  int iStack164;
  float fStack160;
  float fStack156;
  uint uStack152;
  int iStack148;
  int iStack144;
  int iStack140;
  int iStack136;
  int iStack124;
  int iStack112;
  int iStack108;
  int iStack92;
  int iStack88;
  int iStack84;
  int iStack80;
  int iStack68;
  int iStack56;
  int iStack52;
  int iStack36;
  int iStack32;
  u32 uStack24;
  undefined4 uStack20;
  undefined4 auStack16 [4];
  
  uVar3 = get_num_players();
  iVar4 = getMissiontime();
  sVar7 = (s16)iVar4;
  music_related_30();
  set_missionstate(0);
  proc_7F0C0BF0();
  musicTrack1Vol(sVar7);
  music1_playing = 0;
  musicTrack1Play(M_INTROSWOOSH);
  proc_7F0C2494();
  if (param_1 == 0) {
    is_gameover_flag = 1;
  }
  else {
    is_gameover_flag = 300;
  }
  DAT_8008c710 = 1;
  DAT_8008c714 = 0x14;
  DAT_8008c708 = 0;
  DAT_8008c70c = 0;
  uStack24 = get_cur_playernum();
  uVar15 = 0;
  if (0 < (longlong)uVar3) {
    fVar17 = (float)(iVar4 + 1) / flt_8005BC80;
    ppVar14 = &player1_playerdata;
    piVar12 = aiStack252;
    do {
      uVar11 = 0;
      playernum = (int)uVar15;
      set_cur_player(playernum);
      ptr_BONDdata->in_mp_pause_menu = 1;
      ptr_BONDdata->page_in_mp_pause_menu = 3;
      ptr_BONDdata->ptr_text_first_mp_award = 0;
      ptr_BONDdata->ptr_text_second_mp_award = 0;
      proc_7F08DB08(&uStack20,auStack16);
      store_favorite_weapon_current_player(uStack20,auStack16[0]);
      iVar4 = get_curplayer_shot_register(0);
      *piVar12 = iVar4;
      iVar4 = get_curplayer_shot_register(1);
      piVar12[1] = iVar4;
      piVar12[2] = 0;
      piVar12[3] = 0;
      piVar12[4] = 0;
      iVar4 = get_selected_num_players();
      if (0 < iVar4) {
        piVar13 = &player1_playerdata.shots_fired + playernum;
        ppVar9 = &player1_playerdata + playernum;
        iVar4 = piVar12[3];
        while( true ) {
          piVar1 = piVar13 + 9;
          piVar13 = piVar13 + 0x1c;
          piVar12[3] = iVar4 + *piVar1;
          if (uVar15 == uVar11) {
            piVar12[4] = piVar12[4] + ppVar9->killed_p1;
          }
          else {
            piVar12[2] = piVar12[2] + ppVar9->killed_p1;
          }
          uVar11 = SEXT48((int)uVar11 + 1);
          ppVar9 = (player_data *)&ppVar9->head_hits;
          iVar4 = get_selected_num_players();
          if ((longlong)iVar4 <= (longlong)uVar11) break;
          iVar4 = piVar12[3];
        }
      }
      iVar4 = ppVar14->time_other_players_on_screen;
      piVar12[7] = ppVar14->damage_to_backside;
      piVar12[8] = iVar4;
      iVar4 = ppVar14->longest_inning;
      iVar2 = ppVar14->shortest_inning;
      uVar15 = SEXT48(playernum + 1);
      fVar18 = ppVar14->distance_traveled;
      *(float *)(piVar12 + 5) = ((float)piVar12[2] * 100.00000000) / ((float)*piVar12 + 1.00000000);
      *(float *)(piVar12 + 6) =
           ((float)piVar12[2] * 100.00000000) / ((float)piVar12[3] + 1.00000000);
      fVar16 = ppVar14->body_armor_pickups;
      fVar18 = fVar18 / flt_8005BC84;
      piVar12[0xb] = 0;
      piVar12[0xc] = iVar4;
      piVar12[0xd] = iVar2;
      *(float *)(piVar12 + 10) = fVar16;
      *(float *)(piVar12 + 9) = fVar18 / fVar17;
      ppVar14 = ppVar14 + 1;
      piVar12 = piVar12 + 0xe;
    } while (uVar15 != uVar3);
  }
  set_cur_player(uStack24);
  playernum = (int)uVar3;
  iVar4 = proc_7F0C2024(playernum,iStack236,iStack180,iStack124,iStack68);
  if (0 < aiStack252[iVar4 * 0xe + 4]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 1;
  }
  iVar4 = proc_7F0C2114(playernum,aiStack252[0],aiStack204[2],iStack140,iStack84);
  if (aiStack252[iVar4 * 0xe] < 100) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 2;
  }
  iVar4 = proc_7F0C234C(playernum,extraout_f12,extraout_f14,afStack216[1],fStack156);
  if (afStack216[iVar4 * 0xe + 1] <= 2.00000000) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 4;
  }
  iVar4 = proc_7F0C2204(playernum,extraout_f12_00,extraout_f14_00,afStack216[1],fStack156);
  if (6.00000000 < afStack216[iVar4 * 0xe + 1]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 8;
  }
  iVar4 = proc_7F0C2024(playernum,aiStack252[1],aiStack204[3],iStack136,iStack80);
  if (0 < aiStack252[iVar4 * 0xe + 1]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x10;
  }
  iVar4 = proc_7F0C2204(playernum,extraout_f12_01,extraout_f14_01,afStack232[0],fStack176);
  if (0.00000000 < afStack232[iVar4 * 0xe]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x20;
  }
  iVar4 = proc_7F0C2204(playernum,extraout_f12_02,extraout_f14_02,afStack232[1],fStack172);
  if (0.00000000 < afStack232[iVar4 * 0xe + 1]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x40;
  }
  iVar4 = proc_7F0C234C(playernum,extraout_f12_03,extraout_f14_03,afStack232[1],fStack172);
  (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x80;
  iVar4 = proc_7F0C2114(playernum,aiStack224[1],iStack164,iStack108,iStack52);
  (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x100;
  iVar4 = proc_7F0C2204(playernum,extraout_f12_04,extraout_f14_04,afStack216[0],fStack160);
  if (10.00000000 < afStack216[iVar4 * 0xe]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x200;
  }
  iVar4 = proc_7F0C2114(playernum,aiStack224[0],iStack168,iStack112,iStack56);
  (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x400;
  iVar4 = proc_7F0C2024(playernum,aiStack224[0],iStack168,iStack112,iStack56);
  if ((0 < aiStack224[iVar4 * 0xe]) && (((&uStack208)[iVar4 * 0xe] & 0x400) == 0)) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x800;
  }
  iVar4 = proc_7F0C2024(playernum,aiStack204[0],iStack148,iStack92,iStack36);
  if (0 < aiStack204[iVar4 * 0xe]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x2000;
  }
  iVar4 = proc_7F0C2114(playernum,aiStack204[1],iStack144,iStack88,iStack32);
  if (0 < aiStack204[iVar4 * 0xe + 1]) {
    (&uStack208)[iVar4 * 0xe] = (&uStack208)[iVar4 * 0xe] | 0x1000;
  }
  uVar15 = 0;
  if (0 < (longlong)uVar3) {
    if ((uVar3 & 1) == 0) {
      iVar4 = 0;
    }
    else {
      uVar15 = 1;
      if (player1_playerdata.most_killed_one_time == 4) {
        uStack208 |= 0x10000;
      }
      else {
        if (player1_playerdata.most_killed_one_time == 3) {
          uStack208 |= 0x8000;
        }
        else {
          if (player1_playerdata.most_killed_one_time == 2) {
            uStack208 |= 0x4000;
          }
        }
      }
      iVar4 = 8;
      if (uVar3 == 1) goto LAB_7f0c2d0c;
    }
    piVar12 = &player1_playerdata.shots_fired + (iVar4 - (int)uVar15) * 4;
    do {
      iVar4 = piVar12[0x16];
      playernum = (int)uVar15;
      if (iVar4 == 4) {
        (&uStack208)[playernum * 0xe] = (&uStack208)[playernum * 0xe] | 0x10000;
LAB_7f0c2c90:
        iVar4 = piVar12[0x32];
      }
      else {
        if (iVar4 == 3) {
          (&uStack208)[playernum * 0xe] = (&uStack208)[playernum * 0xe] | 0x8000;
          goto LAB_7f0c2c90;
        }
        if (iVar4 == 2) {
          (&uStack208)[playernum * 0xe] = (&uStack208)[playernum * 0xe] | 0x4000;
          goto LAB_7f0c2c90;
        }
        iVar4 = piVar12[0x32];
      }
      if (iVar4 == 4) {
        (&uStack152)[playernum * 0xe] = (&uStack152)[playernum * 0xe] | 0x10000;
      }
      else {
        if (iVar4 == 3) {
          (&uStack152)[playernum * 0xe] = (&uStack152)[playernum * 0xe] | 0x8000;
        }
        else {
          if (iVar4 == 2) {
            (&uStack152)[playernum * 0xe] = (&uStack152)[playernum * 0xe] | 0x4000;
          }
        }
      }
      uVar15 = SEXT48(playernum + 2);
      piVar12 = piVar12 + 0x38;
    } while (uVar15 != uVar3);
  }
LAB_7f0c2d0c:
  uVar15 = 0;
  if (0 < (longlong)uVar3) {
    piVar12 = aiStack252;
    do {
      uVar11 = 0;
      uVar8 = 0x10;
      uVar10 = piVar12[0xb];
      while( true ) {
        iVar4 = (int)uVar15;
        if ((uVar10 & 1 << uVar8) != 0) {
          piVar12[0xb] = uVar10 & ~(1 << uVar8);
          uVar11 = 1;
          pbVar5 = get_textptr_for_textID(*(u16 *)(loaded_text_index + uVar8 * 2));
          *(byte **)&(&ptr_BONDdata_p1)[iVar4]->ptr_text_first_mp_award = pbVar5;
          uVar10 = piVar12[0xb];
        }
        if (uVar10 == 0) {
          uVar11 = 1;
        }
        uVar6 = get_random_value();
        uVar8 = uVar6 % 0x11;
        if (false) {
          trap(0x1c00);
        }
        if (uVar11 != 0) break;
        uVar10 = piVar12[0xb];
      }
      if (uVar11 < 2) {
        do {
          uVar6 = get_random_value();
          uVar8 = uVar6 % 0x11;
          uVar10 = piVar12[0xb];
          if (false) {
            trap(0x1c00);
          }
          uVar15 = uVar11;
          if ((uVar10 & 1 << uVar8) != 0) {
            piVar12[0xb] = uVar10 & ~(1 << uVar8);
            uVar15 = 2;
            pbVar5 = get_textptr_for_textID(*(u16 *)(loaded_text_index + uVar8 * 2));
            *(byte **)&(&ptr_BONDdata_p1)[iVar4]->ptr_text_second_mp_award = pbVar5;
            uVar10 = piVar12[0xb];
          }
          uVar11 = uVar15;
          if (uVar10 == 0) {
            uVar11 = 2;
          }
        } while (uVar10 != 0 && uVar15 < 2);
      }
      uVar15 = SEXT48(iVar4 + 1);
      piVar12 = piVar12 + 0xe;
    } while (uVar15 != uVar3);
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0c3520) overlaps instruction at (ram,0x7f0c351c)
// 

int ** proc_7F0C2E80(void)

{
  BONDdata *pBVar1;
  int **ppiVar2;
  u32 playercount;
  ulonglong uVar3;
  uint uVar6;
  int **ppiVar7;
  int iVar8;
  longlong lVar4;
  ulonglong uVar5;
  BONDdata **ppBVar9;
  int **ppiVar10;
  uint uVar11;
  uint uVar12;
  char cStack1;
  
  playercount = get_cur_playernum();
  uVar3 = get_num_players();
  cStack1 = (char)playercount;
  uVar6 = (uint)uVar3;
  ppiVar7 = (int **)get_controller_3dstick_L_R(cStack1,-2,1);
  ppiVar10 = (int **)proc_7F09B4D8(playercount);
  ppiVar2 = is_gameover_flag;
  if (((ppiVar10 == NULL) &&
      (ppiVar10 = is_gameover_flag, ppiVar2 = is_gameover_flag, 1 < (int)is_gameover_flag)) &&
     (ppiVar10 = is_gameover_flag, ppiVar2 = (int **)((int)is_gameover_flag - dword_80048498),
     (int)(int **)((int)is_gameover_flag - dword_80048498) < 1)) {
    ppiVar10 = is_gameover_flag;
    ppiVar2 = (int **)((int)&rgba + 1);
  }
  is_gameover_flag = ppiVar2;
  if (uVar6 == 1) {
    return ppiVar10;
  }
  if ((ptr_BONDdata->player_button_control != 0) && (is_gameover_flag == NULL)) {
    ptr_BONDdata->in_mp_pause_menu = 0;
    ptr_BONDdata->how_long_to_show_health = 0;
    return NULL;
  }
  if (1 < (int)is_gameover_flag) {
    return is_gameover_flag;
  }
  iVar8 = proc_7F09B4D8(playercount);
  if (iVar8 == 0) {
    DAT_8008c70c += dword_80048498;
    DAT_8008c714 += dword_80048498;
    if (0x13 < DAT_8008c70c) {
      DAT_8008c70c += -0x14;
      DAT_8008c708 = (uint)(DAT_8008c708 == 0);
    }
    if (0x77 < DAT_8008c714) {
      DAT_8008c714 += -0x78;
      DAT_8008c710 = (uint)(DAT_8008c710 == 0);
    }
  }
  if (cur_player_stat_ptr->most_killed_one_life < ptr_BONDdata->field_29F8) {
    cur_player_stat_ptr->most_killed_one_life = ptr_BONDdata->field_29F8;
  }
  iVar8 = getMissiontime();
  if (cur_player_stat_ptr->longest_inning < iVar8 - ptr_BONDdata->field_29F4) {
    iVar8 = getMissiontime();
    cur_player_stat_ptr->longest_inning = iVar8 - ptr_BONDdata->field_29F4;
    iVar8 = ptr_BONDdata->in_mp_pause_menu;
  }
  else {
    iVar8 = ptr_BONDdata->in_mp_pause_menu;
  }
  if (iVar8 == 0) {
    uVar3 = get_controller_buttons_pressed(cStack1,START_BUTTON);
    if (uVar3 == 0) {
      return (int **)uVar3;
    }
    ppiVar10 = play_watch_sfx_beep();
    ptr_BONDdata->in_mp_pause_menu = 1;
    ptr_BONDdata->page_in_mp_pause_menu = 3;
    ptr_BONDdata->press_stick_register = 1;
    ptr_BONDdata->mp_watch_health_total = ptr_BONDdata->current_health;
    ptr_BONDdata->mp_watch_armor_total = ptr_BONDdata->current_armor;
    return ppiVar10;
  }
  lVar4 = check_if_player_is_pressing_anything_right(cStack1);
  if ((lVar4 != 0) && (lVar4 = MP_menu_page_adv_right(), lVar4 != 0)) {
    play_watch_sfx_beep();
    ptr_BONDdata->page_in_mp_pause_menu = ptr_BONDdata->page_in_mp_pause_menu + 1;
    goto LAB_7f0c350c;
  }
  lVar4 = check_if_player_is_pressing_anything_left(cStack1);
  if ((lVar4 != 0) && (lVar4 = MP_menu_page_adv_left(), lVar4 != 0)) {
    play_watch_sfx_beep();
    ptr_BONDdata->page_in_mp_pause_menu = ptr_BONDdata->page_in_mp_pause_menu + -1;
    goto LAB_7f0c350c;
  }
  lVar4 = check_if_player_is_pressing_anything_right(cStack1);
  if ((lVar4 != 0) && (ptr_BONDdata->page_in_mp_pause_menu == 6)) {
    play_watch_sfx_beep();
    ptr_BONDdata->selection_on_mp_pause_menu_page_6 = 1;
    goto LAB_7f0c350c;
  }
  lVar4 = check_if_player_is_pressing_anything_left(cStack1);
  if ((lVar4 != 0) && (ptr_BONDdata->page_in_mp_pause_menu == 6)) {
    play_watch_sfx_beep();
    ptr_BONDdata->selection_on_mp_pause_menu_page_6 = 0;
    goto LAB_7f0c350c;
  }
  uVar5 = get_controller_buttons_pressed(cStack1,A_BUTTON);
  if ((uVar5 != 0) && (ptr_BONDdata->page_in_mp_pause_menu == 4)) {
    play_watch_sfx_beep();
    if (is_paused == 0) {
      is_paused = 1;
      DAT_8008c71c = get_cur_playernum();
      set_controls_locked_flag(1);
    }
    else {
      playercount = get_cur_playernum();
      if (playercount == DAT_8008c71c) {
        is_paused = 0;
        set_controls_locked_flag(0);
      }
    }
    goto LAB_7f0c350c;
  }
  if (ptr_BONDdata->page_in_mp_pause_menu == 7) {
    uVar3 = get_controller_buttons_pressed(cStack1,B_BUTTON);
    if (uVar3 != 0) {
      play_watch_sfx_beep();
      ptr_BONDdata->in_mp_pause_menu = 1;
      ptr_BONDdata->page_in_mp_pause_menu = 3;
    }
    goto LAB_7f0c350c;
  }
  uVar5 = get_controller_buttons_pressed(cStack1,START_BUTTON|A_BUTTON);
  if (((uVar5 == 0) ||
      (((iVar8 = ptr_BONDdata->page_in_mp_pause_menu, iVar8 == 5 || (iVar8 == 6)) &&
       ((iVar8 != 6 || (ptr_BONDdata->selection_on_mp_pause_menu_page_6 == 1)))))) &&
     (uVar5 = get_controller_buttons_pressed(cStack1,B_BUTTON), uVar5 == 0)) {
    uVar3 = get_controller_buttons_pressed(cStack1,START_BUTTON|A_BUTTON);
    if ((uVar3 == 0) || (ptr_BONDdata->page_in_mp_pause_menu != 5)) {
      uVar3 = get_controller_buttons_pressed(cStack1,START_BUTTON|A_BUTTON);
      if ((uVar3 != 0) &&
         ((ptr_BONDdata->page_in_mp_pause_menu == 6 &&
          (ptr_BONDdata->selection_on_mp_pause_menu_page_6 == 1)))) {
        play_watch_sfx_beep();
        ptr_BONDdata->in_mp_pause_menu = 0;
        ptr_BONDdata->how_long_to_show_health = 0;
        proc_7F0C2530(0);
      }
    }
    else {
      play_watch_sfx_beep();
      ptr_BONDdata->page_in_mp_pause_menu = 6;
      ptr_BONDdata->selection_on_mp_pause_menu_page_6 = 0;
    }
    goto LAB_7f0c350c;
  }
  play_watch_sfx_beep();
  if (is_gameover_flag == NULL) {
    ptr_BONDdata->in_mp_pause_menu = 0;
    ptr_BONDdata->how_long_to_show_health = 0x3c;
    playercount = get_cur_playernum();
    if (playercount == DAT_8008c71c) {
      is_paused = 0;
      set_controls_locked_flag(0);
    }
    goto LAB_7f0c350c;
  }
  uVar11 = 0;
  uVar12 = 0;
  ptr_BONDdata->page_in_mp_pause_menu = 7;
  if (0 < (int)uVar6) {
    if ((uVar3 & 3) != 0) {
      ppBVar9 = &ptr_BONDdata_p1;
      do {
        uVar12 += 1;
        if ((*ppBVar9)->page_in_mp_pause_menu == 7) {
          uVar11 += 1;
        }
        ppBVar9 = ppBVar9 + 1;
      } while ((uVar6 & 3) != uVar12);
      if (uVar12 == uVar6) goto LAB_7f0c33f8;
    }
    ppBVar9 = &ptr_BONDdata_p1 + uVar12;
    pBVar1 = *ppBVar9;
    while( true ) {
      if (pBVar1->page_in_mp_pause_menu == 7) {
        uVar11 += 1;
        pBVar1 = ppBVar9[1];
      }
      else {
        pBVar1 = ppBVar9[1];
      }
      if (pBVar1->page_in_mp_pause_menu == 7) {
        uVar11 += 1;
        pBVar1 = ppBVar9[2];
      }
      else {
        pBVar1 = ppBVar9[2];
      }
      if (pBVar1->page_in_mp_pause_menu == 7) {
        uVar11 += 1;
        pBVar1 = ppBVar9[3];
      }
      else {
        pBVar1 = ppBVar9[3];
      }
      ppBVar9 = ppBVar9 + 4;
      if (pBVar1->page_in_mp_pause_menu == 7) {
        uVar11 += 1;
      }
      if (ppBVar9 == &ptr_BONDdata_p1 + uVar6) break;
      pBVar1 = *ppBVar9;
    }
  }
LAB_7f0c33f8:
  if (uVar11 == uVar6) {
    set_loaded_stage(LEVELID_TITLE);
  }
LAB_7f0c350c:
  if ((ppiVar7 == NULL) || (ppiVar7 == (int **)0xffffffff)) {
    ptr_BONDdata->press_stick_register = 1;
  }
  else {
    ptr_BONDdata->press_stick_register = 0;
  }
  return ppiVar7;
}



uint * display_text_for_playerdata_on_MP_menu
                 (uint *param_1,int param_2,uint param_3,undefined8 param_4,undefined4 param_5)

{
  short sVar1;
  short sVar2;
  byte abStack24 [8];
  int iStack16;
  int iStack12;
  uint uStack8;
  uint uStack4;
  
  sprintf((char *)abStack24,ascii_MP_watch_menu_percentd,param_4);
  proc_7F0AE98C(&iStack16,&iStack12,abStack24,D_80040EB0,D_80040EAC,0);
  uStack4 = param_2 - (iStack12 >> 1);
  switch(param_5) {
  case 0:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = en_text_write_stuff(param_1,(int *)&uStack4,(int *)&uStack8,abStack24,D_80040EB0,
                                  (int)D_80040EAC,0xff00b0,(int)sVar1,(int)sVar2,0,0);
    break;
  case 1:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = jp_text_stuff(param_1,&uStack4,&uStack8,abStack24,D_80040EB0,(int)D_80040EAC,
                            0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar1,(int)sVar2,0,0);
    break;
  case 2:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = en_text_write_stuff(param_1,(int *)&uStack4,(int *)&uStack8,abStack24,D_80040EB0,
                                  (int)D_80040EAC,0xff4040b0,(int)sVar1,(int)sVar2,0,0);
    break;
  case 3:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = jp_text_stuff(param_1,&uStack4,&uStack8,abStack24,D_80040EB0,(int)D_80040EAC,
                            0xffa0a0f0,0x700000a0,(int)sVar1,(int)sVar2,0,0);
    break;
  case 4:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = en_text_write_stuff(param_1,(int *)&uStack4,(int *)&uStack8,abStack24,D_80040EB0,
                                  (int)D_80040EAC,0x4040ffb0,(int)sVar1,(int)sVar2,0,0);
    break;
  case 5:
    uStack8 = param_3;
    sVar1 = get_video2_settings_txtClipW();
    sVar2 = get_video2_settings_txtClipH();
    param_1 = jp_text_stuff(param_1,&uStack4,&uStack8,abStack24,D_80040EB0,(int)D_80040EAC,
                            0xa0a0fff0,0x70a0,(int)sVar1,(int)sVar2,0,0);
  }
  return param_1;
}



// WARNING: Instruction at (ram,0x7f0c3bc0) overlaps instruction at (ram,0x7f0c3bbc)
// 

int get_points_for_mp_player(uint param_1)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  ulonglong uVar6;
  undefined4 uVar7;
  player_data *ppVar8;
  int *piVar9;
  player_data *ppVar10;
  int *piVar11;
  int iVar12;
  uint uVar13;
  int iVar14;
  uint uVar15;
  player_data *ppVar16;
  int iVar17;
  
  cVar2 = (&player1_playerdata)[param_1].have_token_or_goldengun;
  uVar6 = get_num_players();
  uVar7 = (uint)uVar6;
  uVar7 = get_scenario();
  iVar12 = 0;
  switch(uVar7) {
  case 0:
  case 3:
  case 4:
    uVar15 = 0;
    if (0 < (int)uVar7) {
      if ((uVar6 & 3) != 0) {
        do {
          if (uVar15 == param_1) {
            iVar17 = -(&(&player1_playerdata)[uVar15].killed_p1)[param_1];
          }
          else {
            iVar17 = (&(&player1_playerdata)[param_1].killed_p1)[uVar15];
          }
          iVar12 += iVar17;
          uVar15 += 1;
        } while ((uVar7 & 3) != uVar15);
        if (uVar15 == uVar7) goto LAB_7f0c3af8;
      }
      do {
        if (uVar15 == param_1) {
          iVar17 = -(&(&player1_playerdata)[uVar15].killed_p1)[param_1];
        }
        else {
          iVar17 = (&(&player1_playerdata)[param_1].killed_p1)[uVar15];
        }
        if (uVar15 == param_1 - 1) {
          iVar14 = -(&(&player2_player_data)[uVar15].killed_p1)[param_1];
        }
        else {
          iVar14 = (&(&player1_playerdata)[param_1].killed_p2)[uVar15];
        }
        if (uVar15 == param_1 - 2) {
          iVar3 = -(&(&player3_player_data)[uVar15].killed_p1)[param_1];
        }
        else {
          iVar3 = (&(&player1_playerdata)[param_1].killed_p3)[uVar15];
        }
        if (uVar15 == param_1 - 3) {
          iVar4 = -(&(&player4_player_data)[uVar15].killed_p1)[param_1];
        }
        else {
          iVar4 = (&(&player1_playerdata)[param_1].killed_p4)[uVar15];
        }
        iVar12 = iVar12 + iVar17 + iVar14 + iVar3 + iVar4;
        uVar15 += 4;
      } while (uVar15 != uVar7);
    }
LAB_7f0c3af8:
    iVar12 += (&player1_playerdata)[param_1].killed_gg_owner_count * (uVar7 - 2);
    break;
  case 1:
    iVar12 = 4 - (uint)(byte)(&player1_playerdata)[param_1].order_out_in_yolt;
    break;
  case 2:
    iVar12 = (&player1_playerdata)[param_1].flag_counter;
    break;
  case 5:
  case 6:
  case 7:
    uVar15 = 0;
    if (0 < (int)uVar7) {
      ppVar16 = &player1_playerdata;
      do {
        if ((cVar2 == ppVar16->have_token_or_goldengun) && (uVar13 = 0, 0 < (int)uVar7)) {
          if ((uVar6 & 3) == 0) {
            iVar17 = 0;
          }
          else {
            ppVar10 = &player1_playerdata;
            ppVar8 = &player1_playerdata + uVar15;
            do {
              pcVar1 = &ppVar10->have_token_or_goldengun;
              uVar13 += 1;
              ppVar10 = ppVar10 + 1;
              if (cVar2 == *pcVar1) {
                iVar17 = -ppVar8->killed_p1;
              }
              else {
                iVar17 = ppVar8->killed_p1;
              }
              iVar12 += iVar17;
              ppVar8 = (player_data *)&ppVar8->head_hits;
            } while ((uVar7 & 3) != uVar13);
            iVar17 = uVar13 * 8;
            if (uVar13 == uVar7) goto LAB_7f0c3c78;
          }
          iVar14 = uVar13 * 4;
          piVar9 = &(&player1_playerdata)[uVar15].shots_fired + uVar13;
          piVar11 = &player1_playerdata.shots_fired + (iVar17 - uVar13) * 4;
          do {
            iVar14 += 0x10;
            if (cVar2 == *(char *)((int)piVar11 + 0x69)) {
              iVar17 = -piVar9[9];
            }
            else {
              iVar17 = piVar9[9];
            }
            if (cVar2 == *(char *)((int)piVar11 + 0xd9)) {
              iVar3 = -piVar9[10];
            }
            else {
              iVar3 = piVar9[10];
            }
            if (cVar2 == *(char *)((int)piVar11 + 0x149)) {
              iVar4 = -piVar9[0xb];
            }
            else {
              iVar4 = piVar9[0xb];
            }
            pcVar1 = (char *)((int)piVar11 + 0x1b9);
            piVar11 = piVar11 + 0x70;
            if (cVar2 == *pcVar1) {
              iVar5 = -piVar9[0xc];
            }
            else {
              iVar5 = piVar9[0xc];
            }
            iVar12 = iVar12 + iVar17 + iVar3 + iVar4 + iVar5;
            piVar9 = piVar9 + 4;
          } while (iVar14 != uVar7 << 2);
        }
LAB_7f0c3c78:
        uVar15 += 1;
        ppVar16 = ppVar16 + 1;
      } while (uVar15 != uVar7);
    }
  }
  return iVar12;
}



// WARNING: Instruction at (ram,0x7f0c3d60) overlaps instruction at (ram,0x7f0c3d5c)
// 

int write_playerrank_to_buffer(char *buffer,uint player)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  ulonglong uVar4;
  int iVar5;
  byte *__format;
  int *piVar6;
  uint uVar7;
  uint *puVar8;
  int iVar9;
  int iVar10;
  ulonglong uVar11;
  int *piVar12;
  longlong lVar13;
  int iVar14;
  uint uStack40;
  uint uStack36;
  int aiStack24 [4];
  int iStack8;
  int iStack4;
  
  iStack4 = get_scenario();
  uVar4 = get_num_players();
  lVar13 = 0;
  if (0 < (longlong)uVar4) {
    puVar8 = &uStack40;
    piVar6 = aiStack24;
    do {
      iStack8 = (int)uVar4;
      uVar7 = (uint)lVar13;
      iVar5 = get_points_for_mp_player(uVar7);
      uVar4 = SEXT48(iStack8);
      *puVar8 = uVar7;
      lVar13 = (longlong)(int)(uVar7 + 1);
      puVar8 = puVar8 + 1;
      *piVar6 = iVar5;
      piVar6 = piVar6 + 1;
    } while (lVar13 < (longlong)uVar4);
  }
  uVar11 = 0;
  if (0 < (longlong)uVar4) {
    iVar5 = (int)uVar4 + -1;
    do {
      uVar7 = uStack40;
      iVar14 = 0;
      uVar11 = SEXT48((int)uVar11 + 1);
      if (0 < iVar5) {
        if (((int)uVar4 - 1U & 1) != 0) {
          iVar14 = 1;
          iVar10 = aiStack24[0];
          if (aiStack24[0] < aiStack24[1]) {
            uStack40 = uStack36;
            uStack36 = uVar7;
            iVar10 = aiStack24[1];
            aiStack24[1] = aiStack24[0];
          }
          aiStack24[0] = iVar10;
          if (iVar5 == 1) goto LAB_7f0c3df4;
        }
        iVar10 = iVar14 * 4;
        piVar6 = aiStack24 + iVar14;
        do {
          iVar14 = *piVar6;
          iVar1 = piVar6[1];
          if (iVar14 < iVar1) {
            uVar2 = *(undefined4 *)((int)&uStack40 + iVar10 + 4);
            uVar3 = *(undefined4 *)((int)&uStack40 + iVar10);
            *piVar6 = iVar1;
            piVar6[1] = iVar14;
            *(undefined4 *)((int)&uStack40 + iVar10) = uVar2;
            *(undefined4 *)((int)&uStack40 + iVar10 + 4) = uVar3;
            iVar9 = piVar6[2];
          }
          else {
            iVar9 = piVar6[2];
            iVar14 = iVar1;
          }
          if (iVar14 < iVar9) {
            uVar2 = *(undefined4 *)((int)&uStack40 + iVar10 + 8);
            uVar3 = *(undefined4 *)((int)&uStack40 + iVar10 + 4);
            piVar6[2] = iVar14;
            piVar6[1] = iVar9;
            *(undefined4 *)((int)&uStack40 + iVar10 + 4) = uVar2;
            *(undefined4 *)((int)&uStack40 + iVar10 + 8) = uVar3;
          }
          piVar6 = piVar6 + 2;
          iVar10 += 8;
        } while (piVar6 != aiStack24 + iVar5);
      }
LAB_7f0c3df4:
    } while (uVar11 != uVar4);
  }
  uVar11 = 0;
  iVar5 = 0;
  puVar8 = &uStack40;
  if (0 < (longlong)uVar4) {
    do {
      if (player == *puVar8) break;
      uVar11 = SEXT48((int)uVar11 + 1);
      puVar8 = puVar8 + 1;
    } while (uVar11 != uVar4);
  }
  if (-1 < (longlong)uVar11) {
    piVar6 = aiStack24;
    piVar12 = piVar6 + (int)uVar11;
    do {
      if (*piVar6 == *piVar12) break;
      iVar5 += 1;
      piVar6 = piVar6 + 1;
    } while ((int)uVar11 + 1 != iVar5);
  }
  if (iVar5 == 0) {
    __format = get_textptr_for_textID(0xa011);
    iStack4 = sprintf(buffer,(char *)__format);
  }
  else {
    if (iVar5 == 1) {
      __format = get_textptr_for_textID(0xa012);
      iStack4 = sprintf(buffer,(char *)__format);
    }
    else {
      if (iVar5 == 2) {
        if ((iStack4 == 5) || (iStack4 == 7)) {
          __format = get_textptr_for_textID(0xa012);
          iStack4 = sprintf(buffer,(char *)__format);
        }
        else {
          __format = get_textptr_for_textID(0xa013);
          iStack4 = sprintf(buffer,(char *)__format);
        }
      }
      else {
        if (iVar5 == 3) {
          if (iStack4 == 6) {
            __format = get_textptr_for_textID(0xa012);
            iStack4 = sprintf(buffer,(char *)__format);
          }
          else {
            __format = get_textptr_for_textID(0xa014);
            iStack4 = sprintf(buffer,(char *)__format);
          }
        }
      }
    }
  }
  return iStack4;
}



undefined8 true_if_displaying_rank_in_mp(int param_1)

{
  undefined4 uVar2;
  undefined8 uVar1;
  
  uVar2 = get_scenario();
  switch(uVar2) {
  case 0:
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
    uVar1 = 1;
    break;
  case 1:
    if (param_1 == 0) {
      uVar1 = 1;
    }
    else {
      uVar1 = 0;
    }
    break;
  default:
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  return uVar1;
}



undefined8 true_if_displaying_score_in_mp(void)

{
  undefined4 uVar2;
  undefined8 uVar1;
  
  uVar2 = get_scenario();
  switch(uVar2) {
  case 0:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
    uVar1 = 1;
    break;
  case 1:
  case 2:
    uVar1 = 0;
    break;
  default:
    do {
                    // WARNING: Do nothing block with infinite loop
    } while( true );
  }
  return uVar1;
}



// WARNING: Instruction at (ram,0x7f0c4834) overlaps instruction at (ram,0x7f0c4830)
// 
// WARNING: Heritage AFTER dead removal. Example location: r0x80079f88 : 0x7f0c55c4
// WARNING: Restarted to delay deadcode elimination for space: ram

uint * mp_watch_menu_display(uint *param_1)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  bool bVar5;
  ulonglong uVar6;
  u32 uVar8;
  longlong lVar7;
  byte *pbVar9;
  int iVar10;
  uint *DL;
  undefined4 *DL_00;
  byte *pbVar11;
  short sVar12;
  short sVar13;
  int *piVar14;
  uint uVar15;
  int iVar16;
  ulonglong uVar17;
  int *piStack148;
  int iStack136;
  int iStack116;
  int iStack112;
  int iStack108;
  int iStack104;
  int iStack100;
  int iStack96;
  int iStack92;
  int iStack88;
  undefined4 uStack84;
  undefined4 uStack80;
  undefined4 uStack76;
  uint uStack72;
  int iStack68;
  int iStack64;
  int iStack60;
  int iStack56;
  char *pcStack52;
  int iStack48;
  byte abStack44 [16];
  int iStack28;
  int aiStack24 [2];
  uint uStack16;
  uint uStack12;
  uint uStack8;
  u32 uStack4;
  
  uStack4 = get_cur_playernum();
  uVar6 = get_num_players();
  bVar5 = false;
  if (uVar6 == 1) {
    return param_1;
  }
  if (ptr_BONDdata->in_mp_pause_menu == 0) {
    if (ptr_BONDdata->player_button_control == 0) {
      return param_1;
    }
    if (ptr_BONDdata->field_428 == 0) {
      return param_1;
    }
    if (ptr_BONDdata->field_424 == 0) {
      return param_1;
    }
    if (stop_play_flag != 0) {
      return param_1;
    }
    iVar16 = 0;
    if (is_gameover_flag != 0) {
      return param_1;
    }
    uVar17 = 0;
    if (0 < (longlong)uVar6) {
      if ((uVar6 & 3) != 0) {
        piVar14 = &player1_playerdata.shots_fired + uStack4;
        do {
          piVar1 = piVar14 + 9;
          uVar17 = SEXT48((int)uVar17 + 1);
          piVar14 = piVar14 + 0x1c;
          iVar16 += *piVar1;
        } while ((uVar6 & 3) != uVar17);
        if (uVar17 == uVar6) goto LAB_7f0c5f0c;
      }
      piVar14 = &(&player1_playerdata)[(int)uVar17].shots_fired + uStack4;
      do {
        piVar1 = piVar14 + 9;
        piVar2 = piVar14 + 0x25;
        piVar3 = piVar14 + 0x41;
        piVar4 = piVar14 + 0x5d;
        uVar17 = SEXT48((int)uVar17 + 4);
        piVar14 = piVar14 + 0x70;
        iVar16 = iVar16 + *piVar1 + *piVar2 + *piVar3 + *piVar4;
      } while (uVar17 != uVar6);
    }
LAB_7f0c5f0c:
    iVar10 = get_scenario();
    if ((iVar10 == 1) && (1 < iVar16)) {
      return param_1;
    }
    DL = proc_7F0B4FB4(param_1);
    DL_00 = microcode_constructor(DL);
    pbVar11 = get_textptr_for_textID(0xa022);
    proc_7F0AE98C(&iStack116,&iStack112,pbVar11,D_80040EB0,D_80040EAC,0);
    sVar12 = get_video2_settings_ulx();
    sVar13 = get_video2_settings_width();
    iStack104 = (((int)sVar13 >> 1) + (int)sVar12) - (iStack112 >> 1);
    sVar12 = get_video2_settings_uly();
    sVar13 = get_video2_settings_height();
    iStack108 = (((int)sVar13 >> 1) + (int)sVar12) - (iStack116 >> 1);
    sVar12 = get_video2_settings_txtClipW();
    sVar13 = get_video2_settings_txtClipH();
    DL = en_text_write_stuff(DL_00,&iStack104,&iStack108,pbVar11,D_80040EB0,(int)D_80040EAC,0xff00b0
                             ,(int)sVar12,(int)sVar13,0,0);
    DL = combiner_bayer_lod_perspective(DL);
    return DL;
  }
  uStack8 = (uint)uVar6;
  DL = microcode_constructor(param_1);
  if (uStack8 == 2) {
    iStack48 = 0x50;
  }
  else {
    iStack48 = 0;
  }
  switch(ptr_BONDdata->page_in_mp_pause_menu) {
  case 0:
  case 1:
  case 2:
  case 3:
    if (is_gameover_flag == 0) {
      pcStack52 = (char *)get_textptr_for_textID(0xa015);
    }
    else {
      if (DAT_8008c710 == 0) {
        pcStack52 = (char *)get_textptr_for_textID(0xa017);
      }
      else {
        pcStack52 = (char *)get_textptr_for_textID(0xa016);
      }
    }
    break;
  case 4:
    if (is_paused == 0) {
      pcStack52 = (char *)get_textptr_for_textID(0xa019);
    }
    else {
      pcStack52 = (char *)get_textptr_for_textID(0xa018);
      uVar8 = get_cur_playernum();
      if (uVar8 == DAT_8008c71c) {
        bVar5 = true;
      }
    }
    break;
  case 5:
  case 6:
    pcStack52 = (char *)get_textptr_for_textID(0xa01a);
    sVar12 = get_video2_settings_ulx();
    uStack12 = (int)sVar12 + iStack48 + 0x41;
    break;
  case 7:
    pcStack52 = ascii_MP_watch_menu_BLANK;
  }
  proc_7F0AE98C(&iStack28,aiStack24,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
  sVar12 = get_video2_settings_ulx();
  uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
  sVar12 = get_video2_settings_uly();
  uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x16;
  if (bVar5) {
    sVar12 = get_video2_settings_txtClipW();
    sVar13 = get_video2_settings_txtClipH();
    DL = jp_text_stuff(DL,&uStack12,&uStack16,(byte *)pcStack52,D_80040EB0,(int)D_80040EAC,
                       0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar12,(int)sVar13,0,0);
  }
  else {
    sVar12 = get_video2_settings_txtClipW();
    sVar13 = get_video2_settings_txtClipH();
    DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                             (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
  }
  lVar7 = MP_menu_page_adv_left();
  if (lVar7 != 0) {
    sVar12 = get_video2_settings_ulx();
    if (is_gameover_flag == 0) {
      iStack136 = 0;
    }
    else {
      iStack136 = 10;
    }
    iStack136 = ((int)sVar12 + iStack48) - iStack136;
    uStack12 = iStack136 + 0x28;
    if (is_gameover_flag != 0) {
      uStack12 = iStack136 + 0x20;
    }
    sVar12 = get_video2_settings_uly();
    uStack16 = (int)sVar12 + 0x16;
    if (DAT_8008c708 == 0) {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,
                               (byte *)ascii_MP_watch_menu_left_chevron,D_80040EB0,(int)D_80040EAC,
                               0xff00b0,(int)sVar12,(int)sVar13,0,0);
    }
    else {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = jp_text_stuff(DL,&uStack12,&uStack16,(byte *)ascii_MP_watch_menu_left_chevron,D_80040EB0,
                         (int)D_80040EAC,0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar12,(int)sVar13,0,0)
      ;
    }
  }
  lVar7 = MP_menu_page_adv_right();
  if (lVar7 != 0) {
    sVar12 = get_video2_settings_ulx();
    if (is_gameover_flag == 0) {
      iStack136 = 0;
    }
    else {
      iStack136 = 10;
    }
    iVar16 = iStack136 + (int)sVar12 + iStack48;
    uStack12 = iVar16 + 0x70;
    if (is_gameover_flag != 0) {
      uStack12 = iVar16 + 0x78;
    }
    sVar12 = get_video2_settings_uly();
    uStack16 = (int)sVar12 + 0x16;
    if (DAT_8008c708 == 0) {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,
                               (byte *)ascii_MP_watch_menu_right_chevron,D_80040EB0,(int)D_80040EAC,
                               0xff00b0,(int)sVar12,(int)sVar13,0,0);
    }
    else {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = jp_text_stuff(DL,&uStack12,&uStack16,(byte *)ascii_MP_watch_menu_right_chevron,D_80040EB0
                         ,(int)D_80040EAC,0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar12,(int)sVar13,0,0
                        );
    }
  }
  iVar16 = ptr_BONDdata->page_in_mp_pause_menu;
  if ((iVar16 == 3) || (iVar16 == 4)) {
    uVar15 = 0;
    if (0 < (int)uStack8) {
      piStack148 = &iStack68;
      do {
        uStack72 = uVar15;
        iVar16 = get_points_for_mp_player(uVar15);
        *piStack148 = iVar16;
        uVar15 = uStack72 + 1;
        piStack148 = piStack148 + 1;
      } while (uVar15 != uStack8);
    }
    lVar7 = true_if_displaying_rank_in_mp((uint)(is_gameover_flag == 0 && stop_play_flag == 0));
    if (lVar7 != 0) {
      write_playerrank_to_buffer((char *)abStack44,uStack4);
      proc_7F0AE98C(&iStack28,aiStack24,abStack44,D_80040EB0,D_80040EAC,0);
      sVar12 = get_video2_settings_ulx();
      uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
      sVar12 = get_video2_settings_uly();
      uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x25;
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,abStack44,D_80040EB0,
                               (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
    }
    lVar7 = true_if_displaying_score_in_mp();
    if (lVar7 != 0) {
      iStack88 = get_scenario();
      pcStack52 = (char *)get_textptr_for_textID(0xa01b);
      proc_7F0AE98C(&iStack28,aiStack24,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
      sVar12 = get_video2_settings_ulx();
      uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
      sVar12 = get_video2_settings_uly();
      uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x35;
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                               (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
      if ((((iStack88 == 5) || (iStack88 == 6)) || (iStack88 == 7)) ||
         ((iStack88 == 2 || (iStack88 == 3)))) {
        if ((&player1_playerdata)[uStack4].have_token_or_goldengun == '\0') {
          uStack76 = 3;
          uStack80 = 2;
          uStack84 = 4;
        }
        else {
          uStack76 = 5;
          uStack80 = 4;
          uStack84 = 2;
        }
      }
      else {
        uStack76 = 1;
        uStack80 = 0;
        uStack84 = 0;
      }
      if (uStack8 == 2) {
        sVar12 = get_video2_settings_ulx();
        sVar13 = get_video2_settings_uly();
        if (uStack4 == 0) {
          iStack136 = uStack76;
        }
        else {
          iStack136 = uStack84;
          if (player1_playerdata.have_token_or_goldengun ==
              (&player1_playerdata)[uStack4].have_token_or_goldengun) {
            iStack136 = uStack80;
          }
        }
        DL = display_text_for_playerdata_on_MP_menu
                       (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x46,(longlong)iStack68,
                        iStack136);
        sVar12 = get_video2_settings_ulx();
        sVar13 = get_video2_settings_uly();
        if (uStack4 == 1) {
          iStack136 = uStack76;
        }
        else {
          iStack136 = uStack84;
          if (player2_player_data.have_token_or_goldengun ==
              (&player1_playerdata)[uStack4].have_token_or_goldengun) {
            iStack136 = uStack80;
          }
        }
        DL = display_text_for_playerdata_on_MP_menu
                       (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x56,(longlong)iStack64,
                        iStack136);
      }
      else {
        sVar12 = get_video2_settings_ulx();
        sVar13 = get_video2_settings_uly();
        if (uStack4 == 0) {
          iStack136 = uStack76;
        }
        else {
          iStack136 = uStack84;
          if (player1_playerdata.have_token_or_goldengun ==
              (&player1_playerdata)[uStack4].have_token_or_goldengun) {
            iStack136 = uStack80;
          }
        }
        DL = display_text_for_playerdata_on_MP_menu
                       (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x46,(longlong)iStack68,
                        iStack136);
        sVar12 = get_video2_settings_ulx();
        sVar13 = get_video2_settings_uly();
        if (uStack4 == 1) {
          iStack136 = uStack76;
        }
        else {
          iStack136 = uStack84;
          if (player2_player_data.have_token_or_goldengun ==
              (&player1_playerdata)[uStack4].have_token_or_goldengun) {
            iStack136 = uStack80;
          }
        }
        DL = display_text_for_playerdata_on_MP_menu
                       (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x46,(longlong)iStack64,
                        iStack136);
        sVar12 = get_video2_settings_ulx();
        sVar13 = get_video2_settings_uly();
        if (uStack4 == 2) {
          iStack136 = uStack76;
        }
        else {
          iStack136 = uStack84;
          if (player3_player_data.have_token_or_goldengun ==
              (&player1_playerdata)[uStack4].have_token_or_goldengun) {
            iStack136 = uStack80;
          }
        }
        DL = display_text_for_playerdata_on_MP_menu
                       (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x56,(longlong)iStack60,
                        iStack136);
        if (uStack8 == 4) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          if (uStack4 == 3) {
            iStack136 = uStack76;
          }
          else {
            iStack136 = uStack84;
            if (player4_player_data.have_token_or_goldengun ==
                (&player1_playerdata)[uStack4].have_token_or_goldengun) {
              iStack136 = uStack80;
            }
          }
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x56,(longlong)iStack56,
                          iStack136);
        }
      }
    }
  }
  else {
    if (iVar16 == 2) {
      lVar7 = true_if_displaying_rank_in_mp((uint)(is_gameover_flag == 0 && stop_play_flag == 0));
      if (lVar7 != 0) {
        write_playerrank_to_buffer((char *)abStack44,uStack4);
        proc_7F0AE98C(&iStack28,aiStack24,abStack44,D_80040EB0,D_80040EAC,0);
        sVar12 = get_video2_settings_ulx();
        uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
        sVar12 = get_video2_settings_uly();
        uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x25;
        sVar12 = get_video2_settings_txtClipW();
        sVar13 = get_video2_settings_txtClipH();
        DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,abStack44,D_80040EB0,
                                 (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
      }
      pbVar11 = get_textptr_for_textID(0xa01c);
      pbVar9 = get_textptr_for_textID(0xa01d);
      sprintf((char *)abStack44,ascii_pnum_KILLS,pbVar11,uStack4 + 1,pbVar9);
      proc_7F0AE98C(&iStack28,aiStack24,abStack44,D_80040EB0,D_80040EAC,0);
      sVar12 = get_video2_settings_ulx();
      uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
      sVar12 = get_video2_settings_uly();
      uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x35;
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,abStack44,D_80040EB0,
                               (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
      if (uStack8 == 2) {
        if (uStack4 != 0) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x46,
                          (longlong)(&player1_playerdata)[uStack4].killed_p1,0);
        }
        uVar15 = uStack4;
        if (uStack4 != 1) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x56,
                          (longlong)(&player1_playerdata)[uVar15].killed_p2,0);
        }
      }
      else {
        if (uStack4 != 0) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x46,
                          (longlong)(&player1_playerdata)[uStack4].killed_p1,0);
        }
        uVar15 = uStack4;
        if (uStack4 != 1) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x46,
                          (longlong)(&player1_playerdata)[uVar15].killed_p2,0);
        }
        uVar15 = uStack4;
        if (uStack4 != 2) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x56,
                          (longlong)(&player1_playerdata)[uVar15].killed_p3,0);
        }
        uVar15 = uStack4;
        if ((uStack8 == 4) && (uStack4 != 3)) {
          sVar12 = get_video2_settings_ulx();
          sVar13 = get_video2_settings_uly();
          DL = display_text_for_playerdata_on_MP_menu
                         (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x56,
                          (longlong)(&player1_playerdata)[uVar15].killed_p4,0);
        }
      }
    }
    else {
      if (iVar16 == 1) {
        lVar7 = true_if_displaying_rank_in_mp((uint)(is_gameover_flag == 0 && stop_play_flag == 0));
        if (lVar7 != 0) {
          write_playerrank_to_buffer((char *)abStack44,uStack4);
          proc_7F0AE98C(&iStack28,aiStack24,abStack44,D_80040EB0,D_80040EAC,0);
          sVar12 = get_video2_settings_ulx();
          uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
          sVar12 = get_video2_settings_uly();
          uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x25;
          sVar12 = get_video2_settings_txtClipW();
          sVar13 = get_video2_settings_txtClipH();
          DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,abStack44,D_80040EB0,
                                   (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
        }
        pbVar11 = get_textptr_for_textID(0xa01c);
        pbVar9 = get_textptr_for_textID(0xa01e);
        sprintf((char *)abStack44,ascii_pnum_LOSSES,pbVar11,uStack4 + 1,pbVar9);
        proc_7F0AE98C(&iStack28,aiStack24,abStack44,D_80040EB0,D_80040EAC,0);
        sVar12 = get_video2_settings_ulx();
        uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x50;
        sVar12 = get_video2_settings_uly();
        uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x35;
        sVar12 = get_video2_settings_txtClipW();
        sVar13 = get_video2_settings_txtClipH();
        DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,abStack44,D_80040EB0,
                                 (int)D_80040EAC,0xff4040b0,(int)sVar12,(int)sVar13,0,0);
        if (uStack8 == 2) {
          if (uStack4 == 0) {
            if (0 < player1_playerdata.killed_p1) {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x46,
                              (longlong)(&player1_playerdata.killed_p1)[uStack4],3);
            }
          }
          else {
            sVar12 = get_video2_settings_ulx();
            sVar13 = get_video2_settings_uly();
            DL = display_text_for_playerdata_on_MP_menu
                           (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x46,
                            (longlong)(&player1_playerdata.killed_p1)[uStack4],0);
          }
          uVar15 = uStack4;
          if (uStack4 == 1) {
            if (0 < player2_player_data.killed_p2) {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x56,
                              (longlong)player2_player_data.killed_p2,3);
            }
          }
          else {
            sVar12 = get_video2_settings_ulx();
            sVar13 = get_video2_settings_uly();
            DL = display_text_for_playerdata_on_MP_menu
                           (DL,(int)sVar12 + iStack48 + 0x50,(int)sVar13 + 0x56,
                            (longlong)(&player2_player_data.killed_p1)[uVar15],0);
          }
        }
        else {
          if (uStack4 == 0) {
            if (0 < player1_playerdata.killed_p1) {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x46,
                              (longlong)(&player1_playerdata.killed_p1)[uStack4],3);
            }
          }
          else {
            sVar12 = get_video2_settings_ulx();
            sVar13 = get_video2_settings_uly();
            DL = display_text_for_playerdata_on_MP_menu
                           (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x46,
                            (longlong)(&player1_playerdata.killed_p1)[uStack4],0);
          }
          uVar15 = uStack4;
          if (uStack4 == 1) {
            if (0 < player2_player_data.killed_p2) {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x46,
                              (longlong)player2_player_data.killed_p2,3);
            }
          }
          else {
            sVar12 = get_video2_settings_ulx();
            sVar13 = get_video2_settings_uly();
            DL = display_text_for_playerdata_on_MP_menu
                           (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x46,
                            (longlong)(&player2_player_data.killed_p1)[uVar15],0);
          }
          uVar15 = uStack4;
          if (uStack4 == 2) {
            if (0 < player3_player_data.killed_p3) {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x56,
                              (longlong)player3_player_data.killed_p3,3);
            }
          }
          else {
            sVar12 = get_video2_settings_ulx();
            sVar13 = get_video2_settings_uly();
            DL = display_text_for_playerdata_on_MP_menu
                           (DL,(int)sVar12 + iStack48 + 0x40,(int)sVar13 + 0x56,
                            (longlong)(&player3_player_data.killed_p1)[uVar15],0);
          }
          uVar15 = uStack4;
          if (uStack8 == 4) {
            if (uStack4 == 3) {
              if (0 < player4_player_data.killed_p4) {
                sVar12 = get_video2_settings_ulx();
                sVar13 = get_video2_settings_uly();
                DL = display_text_for_playerdata_on_MP_menu
                               (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x56,
                                (longlong)player4_player_data.killed_p4,3);
              }
            }
            else {
              sVar12 = get_video2_settings_ulx();
              sVar13 = get_video2_settings_uly();
              DL = display_text_for_playerdata_on_MP_menu
                             (DL,(int)sVar12 + iStack48 + 0x60,(int)sVar13 + 0x56,
                              (longlong)(&player4_player_data.killed_p1)[uVar15],0);
            }
          }
        }
      }
      else {
        if (iVar16 != 0) {
          iVar16 = ptr_BONDdata->page_in_mp_pause_menu;
          goto LAB_7f0c5b48;
        }
        iStack100 = iStack48;
        if (2 < (int)uStack8) {
          iStack100 = iStack48 + 7;
          if ((uStack4 & 1) != 0) {
            iStack100 = iStack48 + -7;
          }
        }
        pcStack52 = (char *)get_textptr_for_textID(0xa01f);
        proc_7F0AE98C(&iStack92,&iStack96,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
        sVar12 = get_video2_settings_ulx();
        uStack12 = (((int)sVar12 + iStack100) - (iStack96 >> 1)) + 0x50;
        sVar12 = get_video2_settings_uly();
        uStack16 = ((int)sVar12 - (iStack92 >> 1)) + 0x25;
        sVar12 = get_video2_settings_txtClipW();
        sVar13 = get_video2_settings_txtClipH();
        DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                                 (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
        pcStack52 = (char *)getplayerfavoredweapon(uStack4,0);
        proc_7F0AE98C(&iStack92,&iStack96,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
        sVar12 = get_video2_settings_ulx();
        uStack12 = (((int)sVar12 + iStack100) - (iStack96 >> 1)) + 0x50;
        sVar12 = get_video2_settings_uly();
        if (j_text_trigger == 0) {
          iVar16 = 0;
        }
        else {
          iVar16 = 4;
        }
        uStack16 = ((iVar16 + (int)sVar12) - (iStack92 >> 1)) + 0x35;
        sVar12 = get_video2_settings_txtClipW();
        sVar13 = get_video2_settings_txtClipH();
        DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                                 (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
        pbVar11 = (byte *)ptr_BONDdata->ptr_text_first_mp_award;
        if (pbVar11 != NULL) {
          pcStack52 = (char *)pbVar11;
          proc_7F0AE98C(&iStack92,&iStack96,pbVar11,D_80040EB0,D_80040EAC,0);
          sVar12 = get_video2_settings_ulx();
          uStack12 = (((int)sVar12 + iStack100) - (iStack96 >> 1)) + 0x50;
          sVar12 = get_video2_settings_uly();
          uStack16 = ((int)sVar12 - (iStack92 >> 1)) + 0x4b;
          sVar12 = get_video2_settings_txtClipW();
          sVar13 = get_video2_settings_txtClipH();
          DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0
                                   ,(int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
        }
        pbVar11 = (byte *)ptr_BONDdata->ptr_text_second_mp_award;
        if (pbVar11 != NULL) {
          pcStack52 = (char *)pbVar11;
          proc_7F0AE98C(&iStack92,&iStack96,pbVar11,D_80040EB0,D_80040EAC,0);
          sVar12 = get_video2_settings_ulx();
          uStack12 = (((int)sVar12 + iStack100) - (iStack96 >> 1)) + 0x50;
          sVar12 = get_video2_settings_uly();
          uStack16 = ((int)sVar12 - (iStack92 >> 1)) + 0x58;
          sVar12 = get_video2_settings_txtClipW();
          sVar13 = get_video2_settings_txtClipH();
          DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0
                                   ,(int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
        }
      }
    }
  }
  iVar16 = ptr_BONDdata->page_in_mp_pause_menu;
LAB_7f0c5b48:
  if (iVar16 == 6) {
    pcStack52 = (char *)get_textptr_for_textID(0xa020);
    proc_7F0AE98C(&iStack28,aiStack24,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
    sVar12 = get_video2_settings_ulx();
    uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x36;
    sVar12 = get_video2_settings_uly();
    uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x36;
    if (ptr_BONDdata->selection_on_mp_pause_menu_page_6 == 0) {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = jp_text_stuff(DL,&uStack12,&uStack16,(byte *)pcStack52,D_80040EB0,(int)D_80040EAC,
                         0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar12,(int)sVar13,0,0);
    }
    else {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                               (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
    }
    pcStack52 = (char *)get_textptr_for_textID(0xa021);
    proc_7F0AE98C(&iStack28,aiStack24,(byte *)pcStack52,D_80040EB0,D_80040EAC,0);
    sVar12 = get_video2_settings_ulx();
    uStack12 = (((int)sVar12 + iStack48) - (aiStack24[0] >> 1)) + 0x68;
    sVar12 = get_video2_settings_uly();
    uStack16 = ((int)sVar12 - (iStack28 >> 1)) + 0x36;
    if (ptr_BONDdata->selection_on_mp_pause_menu_page_6 == 1) {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = jp_text_stuff(DL,&uStack12,&uStack16,(byte *)pcStack52,D_80040EB0,(int)D_80040EAC,
                         0xa0ffa0f0,(uint)&DAT_007000a0,(int)sVar12,(int)sVar13,0,0);
    }
    else {
      sVar12 = get_video2_settings_txtClipW();
      sVar13 = get_video2_settings_txtClipH();
      DL = en_text_write_stuff(DL,(int *)&uStack12,(int *)&uStack16,(byte *)pcStack52,D_80040EB0,
                               (int)D_80040EAC,0xff00b0,(int)sVar12,(int)sVar13,0,0);
    }
  }
  DL = combiner_bayer_lod_perspective(DL);
  return DL;
}



ulonglong proc_7F0C6048(void)

{
  if (is_gameover_flag != 0) {
    return 0;
  }
  return (longlong)ptr_BONDdata->in_mp_pause_menu |
         (ulonglong)(0 < ptr_BONDdata->how_long_to_show_health);
}



undefined4 get_ispaused(void)

{
  return is_paused;
}



undefined4 * display_red_blue_on_radar(undefined4 *param_1)

{
  int iVar2;
  u32 uVar3;
  ulonglong uVar1;
  u32 uVar4;
  uint uVar5;
  short sVar9;
  short sVar10;
  short sVar11;
  int iVar6;
  undefined4 *puVar7;
  int iVar8;
  int iVar12;
  u32 uVar13;
  int iVar14;
  float fVar15;
  float __x;
  float fVar16;
  float vector1;
  float vector2;
  float fVar17;
  undefined4 *puStackX0;
  
  puStackX0 = param_1;
  iVar2 = get_scenario();
  uVar3 = get_cur_playernum();
  uVar1 = get_num_players();
  uVar4 = (u32)uVar1;
  if ((((uVar1 != 1) && (ptr_BONDdata->in_mp_pause_menu == 0)) &&
      (ptr_BONDdata->player_button_control == 0)) && (uVar5 = proc_7F0927BC(0x17), uVar5 == 0)) {
    sVar9 = get_video2_settings_ulx();
    sVar10 = get_video2_settings_width();
    iVar14 = (int)sVar10 + (int)sVar9 + -0x29;
    sVar11 = get_video2_settings_uly();
    iVar6 = (int)sVar11;
    if ((2 < (int)uVar4) && ((uVar3 & 1) == 0)) {
      iVar14 = (int)sVar10 + (int)sVar9 + -0x1a;
    }
    likely_generate_DL_for_image_declaration((uint **)register0x000000ec,DAT_8008d12c,2,0,2);
    puVar7 = microcode_constructor(puStackX0);
    *puVar7 = 0xfcffb3ff;
    puVar7[1] = 0xff65feff;
    puVar7[3] = 0xa0;
    puVar7[2] = 0xfa000000;
    puVar7[5] = (iVar14 - 0x10U & 0x3ff) << 0xe | (iVar6 + 10) * 4 & 0xfffU;
    puVar7[4] = (iVar14 + 0x10U & 0x3ff) << 0xe | 0xe4000000 | (iVar6 + 0x2a) * 4 & 0xfffU;
    puVar7[6] = 0xb4000000;
    puVar7[7] = 0x100010;
    puStackX0 = puVar7 + 10;
    puVar7[8] = 0xb3000000;
    puVar7[9] = 0x4000400;
    puStackX0 = microcode_constructor_related_to_menus
                          (puStackX0,(longlong)(iVar14 + -2),(longlong)(iVar6 + 0x18),
                           (longlong)(iVar14 + 2),iVar6 + 0x1c,0x40);
    if (((iVar2 == 5) || (iVar2 == 6)) || ((iVar2 == 7 || ((iVar2 == 2 || (iVar2 == 3)))))) {
      if ((&player1_playerdata)[uVar3].have_token_or_goldengun == '\0') {
        uVar5 = 0xff7777ff;
      }
      else {
        uVar5 = 0x8888ffff;
      }
      puStackX0 = microcode_constructor_related_to_menus
                            (puStackX0,(longlong)(iVar14 + -1),(longlong)(iVar6 + 0x19),
                             (longlong)(iVar14 + 1),iVar6 + 0x1b,uVar5);
    }
    else {
      puStackX0 = microcode_constructor_related_to_menus
                            (puStackX0,(longlong)(iVar14 + -1),(longlong)(iVar6 + 0x19),
                             (longlong)(iVar14 + 1),iVar6 + 0x1b,0xffffffa0);
    }
    uVar13 = 0;
    if (0 < (int)uVar4) {
      do {
        if ((uVar13 != uVar3) && ((&ptr_BONDdata_p1)[uVar13]->player_button_control == 0)) {
          iVar8 = (&ptr_BONDdata_p1)[uVar13]->position_data_pointer;
          vector1 = *(float *)(iVar8 + 8) - *(float *)(ptr_BONDdata->position_data_pointer + 8);
          vector2 = *(float *)(iVar8 + 0x10) -
                    *(float *)(ptr_BONDdata->position_data_pointer + 0x10);
          fVar17 = 16.00000000;
          fVar15 = convert_angle_using_inverse((f32)vector1,(f32)vector2);
          fVar16 = ptr_BONDdata->azimuth_angle;
          __x = (fVar15 * 180.00000000) / flt_8005BD20;
          fVar15 = sqrtf(vector1 * vector1 + vector2 * vector2);
          fVar15 = fVar15 * 0.00400000;
          if (((iVar2 == 5) || (((iVar2 == 6 || (iVar2 == 7)) || (iVar2 == 2)))) || (iVar2 == 3)) {
            if (fVar15 < 16.00000000) {
              if ((&player1_playerdata)[uVar13].have_token_or_goldengun == '\0') {
                uVar5 = 0xff0000a0;
                fVar17 = fVar15;
              }
              else {
                uVar5 = 0x2828ffff;
                fVar17 = fVar15;
              }
            }
            else {
              if ((&player1_playerdata)[uVar13].have_token_or_goldengun == '\0') {
                uVar5 = 0xff000060;
                fVar17 = 16.00000000;
              }
              else {
                uVar5 = 0x2828ffb0;
                fVar17 = 16.00000000;
              }
            }
          }
          else {
            uVar5 = 0xffff0060;
            if (fVar15 < 16.00000000) {
              uVar5 = 0xffff00a0;
              fVar17 = fVar15;
            }
          }
          __x = (__x + fVar16 + 180.00000000) * flt_8005BD24;
          fVar15 = sinf(__x);
          iVar12 = (int)(fVar15 * fVar17) + iVar14;
          fVar15 = cosf(__x);
          iVar8 = (int)(fVar15 * fVar17) + iVar6 + 0x1a;
          puStackX0 = microcode_constructor_related_to_menus
                                (puStackX0,(longlong)(iVar12 + -2),(longlong)(iVar8 + -2),
                                 (longlong)(iVar12 + 2),iVar8 + 2,0x40);
          puStackX0 = microcode_constructor_related_to_menus
                                (puStackX0,(longlong)(iVar12 + -1),(longlong)(iVar8 + -1),
                                 (longlong)(iVar12 + 1),iVar8 + 1,uVar5);
        }
        uVar13 += 1;
      } while (uVar13 != uVar4);
    }
    puStackX0 = combiner_bayer_lod_perspective(puStackX0);
  }
  return puStackX0;
}



void advance_mp_weapon_set_by_one_save_value(void)

{
  mp_weapon_set = (int)(mp_weapon_set + 1) % 0xe;
  return;
}



mp_weaponset_set * get_mpweaponset(void)

{
  return (mp_weaponset_set *)(mp_weapon_set_text_table + mp_weapon_set);
}



mp_weaponset_weapon * get_ptr_mp_weapon_set_data(void)

{
  return mp_weapon_set_text_table[mp_weapon_set].entries;
}



void set_mp_weapon_set(u32 param_1)

{
  mp_weapon_set = param_1;
  return;
}



u32 get_mp_weapon_set(void)

{
  return mp_weapon_set;
}



void nullsub_41(void)

{
  return;
}



uint image_related_calls_decompressdata
               (undefined4 param_1,byte *param_2,int param_3,int param_4,int param_5)

{
  short sVar1;
  ushort uVar2;
  bool bVar3;
  byte *pbVar4;
  short *psVar5;
  uint uVar6;
  undefined *puVar7;
  ushort *puVar8;
  ushort *puVar9;
  uint uVar10;
  int iVar11;
  ushort *puVar12;
  undefined *puVar13;
  int iVar14;
  byte *pbVar15;
  byte *pbVar16;
  ushort auStack11064 [256];
  undefined auStack10552 [8448];
  undefined auStack2104 [2056];
  uint uStack48;
  uint uStack36;
  uint uStack32;
  uint uStack20;
  int iStack12;
  uint uStack4;
  
  puVar13 = NULL;
  bVar3 = false;
  proc_7F0CBF10(param_1);
  if ((param_3 == 0) || (iStack12 = param_4, param_4 == 0)) {
    iStack12 = 1;
  }
  *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
       (byte)(param_4 << 5) | *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0x1f;
  *(byte *)(*(int *)(param_5 + 0xc) + 0xc) =
       (byte)(param_3 << 5) & 0x20 | *(byte *)(*(int *)(param_5 + 0xc) + 0xc) & 0xdf;
  if ((param_3 != 0) && (bVar3 = true, 0 < DAT_8008d090)) {
    psVar5 = &DAT_8008c730;
    sVar1 = DAT_8008c730;
    while( true ) {
      psVar5 = psVar5 + 8;
      if ((longlong)(int)(**(uint **)(param_5 + 0xc) >> 0x14) == (longlong)sVar1) {
        bVar3 = false;
      }
      if (&DAT_8008c730 + DAT_8008d090 * 8 <= psVar5) break;
      sVar1 = *psVar5;
    }
  }
  uStack20 = proc_7F0CBF2C(8);
  uStack48 = proc_7F0CBF2C(8);
  uStack48 += 1;
  if (0 < (int)uStack48) {
    puVar12 = auStack11064 + uStack48;
    puVar8 = auStack11064;
    do {
      uVar6 = proc_7F0CBF2C(0x10);
      puVar9 = puVar8 + 1;
      *puVar8 = (ushort)uVar6;
      puVar8 = puVar9;
    } while (puVar9 < puVar12);
  }
  iVar14 = 0;
  if (0 < iStack12) {
    do {
      uStack32 = proc_7F0CBF2C(8);
      uStack36 = proc_7F0CBF2C(8);
      if (iVar14 == 0) {
        *(undefined *)(*(int *)(param_5 + 0xc) + 8) = (char)uStack32;
        *(undefined *)(*(int *)(param_5 + 0xc) + 9) = (char)uStack36;
        *(char *)(*(int *)(param_5 + 0xc) + 10) = (char)uStack48 + -1;
        iVar11 = uStack20 * 4;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
             (byte)(*(int *)(&DAT_80049248 + iVar11) << 2) & 0x1c |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0xe3;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
             (byte)*(undefined4 *)(&DAT_8004927c + iVar11) & 3 |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0xfc;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xc) =
             (byte)((*(int *)(&DAT_800492b0 + iVar11) >> 0xe) << 6) |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xc) & 0x3f;
      }
      else {
        if (bVar3) {
          iVar11 = DAT_8008d090 * 0x10 + iVar14;
          *(undefined *)((int)&DAT_8008c730 + iVar11 + 1) = (char)uStack32;
          (&DAT_8008c738)[iVar11] = (char)uStack36;
        }
      }
      if (0x1000 < (int)(uStack32 * uStack36)) {
        return 0;
      }
      decompressdata(DAT_8008d0a0,auStack2104,auStack10552);
      puVar7 = copy_loaded_image_to_final_mem_location
                         (auStack2104,uStack32,uStack36,(longlong)(int)uStack20,
                          param_2 + (int)puVar13);
      iVar11 = proc_7F0CE894();
      proc_7F0CBF10(iVar11);
      if ((param_3 == 1) && (0 < param_4)) {
        proc_7F0CB67C((int)(param_2 + (int)puVar13),uStack32,uStack36,uStack20);
      }
      iVar14 += 1;
      puVar13 = puVar7 + (int)puVar13;
    } while (iVar14 != iStack12);
  }
  uStack4 = 0;
  if (bVar3) {
    (&DAT_8008c730)[DAT_8008d090 * 8] = (ushort)((uint)**(undefined4 **)(param_5 + 0xc) >> 0x14);
    DAT_8008d090 += 1;
    if (0x95 < DAT_8008d090) {
      DAT_8008d090 = 0;
    }
  }
  if (param_3 == 0) {
    if (param_4 < 2) {
      if (param_4 == 1) {
        uStack4 = 0;
        proc_7F0CB67C((int)param_2,uStack32,uStack36,uStack20);
      }
    }
    else {
      iVar14 = 1;
      uVar6 = uStack32;
      pbVar16 = param_2;
      uVar10 = uStack36;
      if (param_4 >= 2) {
        uVar6 = uStack32;
        pbVar15 = param_2;
        pbVar4 = param_2 + (int)puVar13;
        uVar10 = uStack36;
        do {
          pbVar16 = pbVar4;
          iVar11 = proc_7F0C6C70(pbVar15,(int)pbVar16,uVar6,uVar10,uStack20,auStack11064,uStack48);
          if (0x800 < (int)(puVar13 + iVar11)) {
            *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
                 (byte)(iVar14 << 5) | *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0x1f;
            pbVar16 = pbVar15;
            break;
          }
          proc_7F0CB67C((int)pbVar15,uVar6,uVar10,uStack20);
          iVar14 += 1;
          uVar6 = (int)(uVar6 + 1) >> 1;
          uVar10 = (int)(uVar10 + 1) >> 1;
          puVar13 = puVar13 + iVar11;
          pbVar15 = pbVar16;
          pbVar4 = pbVar16 + iVar11;
        } while (iVar14 != param_4);
      }
      proc_7F0CB67C((int)pbVar16,uVar6,uVar10,uStack20);
    }
  }
  if (0 < (int)uStack48) {
    param_2 = param_2 + (int)puVar13;
    if ((uStack48 & 3) != 0) {
      puVar8 = auStack11064 + uStack4;
      pbVar16 = param_2;
      do {
        puVar7 = puVar13;
        uStack4 += 1;
        puVar13 = puVar7 + 2;
        *pbVar16 = (byte)((uint)*puVar8 >> 8);
        uVar2 = *puVar8;
        param_2 = pbVar16 + 2;
        puVar8 = puVar8 + 1;
        pbVar16[1] = (byte)uVar2;
        pbVar16 = param_2;
      } while ((uStack48 & 3) != uStack4);
      if (uStack4 == uStack48) {
        puVar7 = puVar7 + 9;
        goto LAB_7f0c6b94;
      }
    }
    puVar8 = auStack11064 + uStack4;
    do {
      puVar12 = puVar8 + 4;
      puVar13 = puVar13 + 8;
      *param_2 = (byte)((uint)*puVar8 >> 8);
      param_2[1] = (byte)*puVar8;
      param_2[2] = (byte)((uint)puVar8[1] >> 8);
      param_2[3] = (byte)puVar8[1];
      param_2[4] = (byte)((uint)puVar8[2] >> 8);
      param_2[5] = (byte)puVar8[2];
      param_2[6] = (byte)((uint)puVar8[3] >> 8);
      param_2[7] = (byte)puVar8[3];
      puVar8 = puVar12;
      param_2 = param_2 + 8;
    } while (puVar12 != auStack11064 + uStack48);
  }
  puVar7 = puVar13 + 7;
LAB_7f0c6b94:
  return (uint)puVar7 & 0xfffffff8;
}



undefined *
copy_loaded_image_to_final_mem_location
          (undefined *param_1,int param_2,int param_3,longlong param_4,undefined *param_5)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  int iStack16;
  
  if ((param_4 == 9) || (param_4 == 0xb)) {
    iStack16 = 1;
  }
  else {
    if ((param_4 == 10) || (param_4 == 0xc)) {
      iStack16 = 2;
    }
  }
  iVar4 = 0;
  puVar3 = param_5;
  if (0 < param_3) {
    do {
      iVar5 = 0;
      puVar2 = puVar3;
      if (0 < param_2) {
        do {
          uVar1 = *param_1;
          iVar5 += iStack16;
          puVar3 = puVar2 + 1;
          param_1 = param_1 + 1;
          *puVar2 = uVar1;
          puVar2 = puVar3;
        } while (iVar5 < param_2);
      }
      iVar4 += 1;
      puVar3 = (undefined *)((uint)(puVar3 + 7) & 0xfffffff8);
    } while (iVar4 != param_3);
  }
  return puVar3 + -(int)param_5;
}



int proc_7F0C6C70(byte *param_1,int param_2,int param_3,int param_4,int param_5,ushort *param_6,
                 uint param_7)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  bool bVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  byte *pbVar14;
  byte *pbVar15;
  int iVar16;
  int iStack52;
  uint uStack16;
  uint uStack12;
  int iStack8;
  
  iVar16 = param_4 + 1 >> 1;
  if (param_5 == 9) {
LAB_7f0c6cf0:
    uStack16 = (param_3 + 1 >> 1) + 7U & 0xff8;
    uStack12 = param_3 + 7U & 0xff8;
  }
  else {
    if (param_5 != 10) {
      if (param_5 == 0xb) goto LAB_7f0c6cf0;
      if (param_5 != 0xc) goto LAB_7f0c6d30;
    }
    uStack16 = (param_3 + 1 >> 1) + 0xfU & 0xff0;
    uStack12 = param_3 + 0xfU & 0xff0;
  }
LAB_7f0c6d30:
  if (param_5 == 9) {
    iStack8 = 0;
    iStack52 = param_2;
    if (0 < param_4) {
      do {
        uVar8 = uStack12;
        if (param_4 <= iStack8 + 1) {
          uVar8 = 0;
        }
        if (0 < (int)uStack12) {
          pbVar15 = param_1 + uVar8;
          iVar6 = 1;
          iVar12 = 0;
          pbVar14 = param_1;
          while( true ) {
            iVar13 = iVar12;
            if (iVar6 < param_3) {
              iVar13 = iVar6;
            }
            uVar1 = param_6[(uint)*pbVar14];
            uVar2 = param_6[(uint)param_1[iVar13]];
            uVar3 = param_6[(uint)*pbVar15];
            uVar4 = param_6[(uint)param_1[uVar8 + iVar13]];
            uVar7 = proc_7F0C77AC(param_6,param_7,
                                  (int)(((int)(short)uVar1 >> 0xb & 0x1fU) +
                                        ((int)(short)uVar2 >> 0xb & 0x1fU) +
                                        ((int)(short)uVar3 >> 0xb & 0x1fU) +
                                       ((int)(short)uVar4 >> 0xb & 0x1fU)) >> 2 & 0x1f,
                                  (int)(((int)(short)uVar1 >> 6 & 0x1fU) +
                                        ((int)(short)uVar2 >> 6 & 0x1fU) +
                                        ((int)(short)uVar3 >> 6 & 0x1fU) +
                                       ((int)(short)uVar4 >> 6 & 0x1fU)) >> 2 & 0x1f,
                                  (int)(((int)(short)uVar1 >> 1 & 0x1fU) +
                                        ((int)(short)uVar2 >> 1 & 0x1fU) +
                                        ((int)(short)uVar3 >> 1 & 0x1fU) +
                                       ((int)(short)uVar4 >> 1 & 0x1fU)) >> 2 & 0x1f,
                                  (int)(((int)(short)uVar1 & 1U) + ((int)(short)uVar2 & 1U) +
                                        ((int)(short)uVar3 & 1U) + ((int)(short)uVar4 & 1U) + 2) >>
                                  2 & 1);
            *(undefined *)(iStack52 + (iVar12 >> 1)) = (char)uVar7;
            pbVar14 = pbVar14 + 2;
            pbVar15 = pbVar15 + 2;
            if ((int)uStack12 <= iVar12 + 2) break;
            iVar6 = iVar12 + 3;
            iVar12 = iVar12 + 2;
          }
        }
        iStack8 += 2;
        iStack52 += uStack16;
        param_1 = param_1 + uStack12 * 2;
      } while (iStack8 < param_4);
    }
    iVar12 = iVar16 * uStack16;
  }
  else {
    iVar6 = (int)uStack16 >> 1;
    if (param_5 == 10) {
      iStack8 = 0;
      iStack52 = param_2;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          iVar12 = (int)uStack12 >> 1;
          if (param_4 <= iStack8 + 1) {
            iVar12 = 0;
          }
          if (0 < (int)uStack12) {
            iVar11 = 0;
            while( true ) {
              bVar5 = param_3 <= iVar13 + 1;
              uVar1 = param_6[(int)(uint)param_1[iVar11] >> 4];
              if (bVar5) {
                iVar9 = 4;
              }
              else {
                iVar9 = 0;
              }
              uVar2 = param_6[(int)(uint)param_1[iVar11] >> iVar9 & 0xf];
              uVar3 = param_6[(int)(uint)param_1[iVar11 + iVar12] >> 4];
              if (bVar5) {
                iVar9 = 4;
              }
              else {
                iVar9 = 0;
              }
              uVar4 = param_6[(int)(uint)(param_1 + iVar12)[iVar11] >> iVar9 & 0xf];
              uVar8 = proc_7F0C77AC(param_6,param_7,
                                    (int)(((int)(short)uVar1 >> 0xb & 0x1fU) +
                                          ((int)(short)uVar2 >> 0xb & 0x1fU) +
                                          ((int)(short)uVar3 >> 0xb & 0x1fU) +
                                         ((int)(short)uVar4 >> 0xb & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 >> 6 & 0x1fU) +
                                          ((int)(short)uVar2 >> 6 & 0x1fU) +
                                          ((int)(short)uVar3 >> 6 & 0x1fU) +
                                         ((int)(short)uVar4 >> 6 & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 >> 1 & 0x1fU) +
                                          ((int)(short)uVar2 >> 1 & 0x1fU) +
                                          ((int)(short)uVar3 >> 1 & 0x1fU) +
                                         ((int)(short)uVar4 >> 1 & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 & 1U) + ((int)(short)uVar2 & 1U) +
                                          ((int)(short)uVar3 & 1U) + ((int)(short)uVar4 & 1U) + 2)
                                    >> 2 & 1);
              iVar11 = iVar13 + 2 >> 1;
              pbVar14 = (byte *)(iStack52 + (iVar13 >> 2));
              *pbVar14 = (byte)(uVar8 << 4);
              bVar5 = param_3 <= iVar13 + 3;
              uVar1 = param_6[(int)(uint)param_1[iVar11] >> 4];
              if (bVar5) {
                iVar9 = 4;
              }
              else {
                iVar9 = 0;
              }
              uVar2 = param_6[(int)(uint)param_1[iVar11] >> iVar9 & 0xf];
              uVar3 = param_6[(int)(uint)param_1[iVar11 + iVar12] >> 4];
              if (bVar5) {
                iVar9 = 4;
              }
              else {
                iVar9 = 0;
              }
              uVar4 = param_6[(int)(uint)(param_1 + iVar12)[iVar11] >> iVar9 & 0xf];
              uVar8 = proc_7F0C77AC(param_6,param_7,
                                    (int)(((int)(short)uVar1 >> 0xb & 0x1fU) +
                                          ((int)(short)uVar2 >> 0xb & 0x1fU) +
                                          ((int)(short)uVar3 >> 0xb & 0x1fU) +
                                         ((int)(short)uVar4 >> 0xb & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 >> 6 & 0x1fU) +
                                          ((int)(short)uVar2 >> 6 & 0x1fU) +
                                          ((int)(short)uVar3 >> 6 & 0x1fU) +
                                         ((int)(short)uVar4 >> 6 & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 >> 1 & 0x1fU) +
                                          ((int)(short)uVar2 >> 1 & 0x1fU) +
                                          ((int)(short)uVar3 >> 1 & 0x1fU) +
                                         ((int)(short)uVar4 >> 1 & 0x1fU)) >> 2 & 0x1f,
                                    (int)(((int)(short)uVar1 & 1U) + ((int)(short)uVar2 & 1U) +
                                          ((int)(short)uVar3 & 1U) + ((int)(short)uVar4 & 1U) + 2)
                                    >> 2 & 1);
              iVar13 += 4;
              *pbVar14 = *pbVar14 | (byte)uVar8;
              if ((int)uStack12 <= iVar13) break;
              iVar11 = iVar13 >> 1;
            }
          }
          iStack8 += 2;
          iStack52 += iVar6;
          param_1 = param_1 + uStack12;
        } while (iStack8 < param_4);
      }
      iVar12 = iVar6 * iVar16;
    }
    else {
      if (param_5 == 0xb) {
        iStack8 = 0;
        iStack52 = param_2;
        if (0 < param_4) {
          do {
            uVar8 = uStack12;
            if (param_4 <= iStack8 + 1) {
              uVar8 = 0;
            }
            if (0 < (int)uStack12) {
              pbVar15 = param_1 + uVar8;
              iVar6 = 1;
              iVar12 = 0;
              pbVar14 = param_1;
              while( true ) {
                iVar13 = iVar12;
                if (iVar6 < param_3) {
                  iVar13 = iVar6;
                }
                uVar7 = proc_7F0C7BD8(param_6,param_7,
                                      (int)(((int)(short)param_6[(uint)*pbVar14] >> 8 & 0xffU) +
                                            ((int)(short)param_6[(uint)param_1[iVar13]] >> 8 & 0xffU
                                            ) + ((int)(short)param_6[(uint)*pbVar15] >> 8 & 0xffU) +
                                           ((int)(short)param_6[(uint)param_1[uVar8 + iVar13]] >> 8
                                           & 0xffU)) >> 2 & 0xff,
                                      (int)(((int)(short)param_6[(uint)*pbVar14] & 0xffU) +
                                            ((int)(short)param_6[(uint)param_1[iVar13]] & 0xffU) +
                                            ((int)(short)param_6[(uint)*pbVar15] & 0xffU) +
                                            ((int)(short)param_6[(uint)param_1[uVar8 + iVar13]] &
                                            0xffU) + 1) >> 2 & 0xff);
                *(undefined *)(iStack52 + (iVar12 >> 1)) = (char)uVar7;
                pbVar14 = pbVar14 + 2;
                pbVar15 = pbVar15 + 2;
                if ((int)uStack12 <= iVar12 + 2) break;
                iVar6 = iVar12 + 3;
                iVar12 = iVar12 + 2;
              }
            }
            iStack8 += 2;
            iStack52 += uStack16;
            param_1 = param_1 + uStack12 * 2;
          } while (iStack8 < param_4);
        }
        iVar12 = iVar16 * uStack16;
      }
      else {
        iVar12 = 0;
        if (param_5 == 0xc) {
          iStack8 = 0;
          iStack52 = param_2;
          if (0 < param_4) {
            do {
              iVar13 = 0;
              iVar12 = (int)uStack12 >> 1;
              if (param_4 <= iStack8 + 1) {
                iVar12 = 0;
              }
              iVar11 = 0;
              if (0 < (int)uStack12) {
                while( true ) {
                  bVar5 = iVar13 + 1 < param_3;
                  if ((int)(uint)param_1[iVar11] >> bVar5 == 0) {
                    iVar9 = 4;
                  }
                  else {
                    iVar9 = 0;
                  }
                  if ((int)(uint)param_1[iVar11 + iVar12] >> bVar5 == 0) {
                    iVar10 = 4;
                  }
                  else {
                    iVar10 = 0;
                  }
                  uVar8 = proc_7F0C7BD8(param_6,param_7,
                                        (int)(((int)(short)param_6[(int)(uint)param_1[iVar11] >> 4]
                                               >> 8 & 0xffU) +
                                              ((int)(short)param_6[iVar9] >> 8 & 0xffU) +
                                              ((int)(short)param_6[(int)(uint)param_1[iVar11 + 
                                                  iVar12] >> 4] >> 8 & 0xffU) +
                                             ((int)(short)param_6[iVar10] >> 8 & 0xffU)) >> 2 & 0xff
                                        ,(int)(((int)(short)param_6[(int)(uint)param_1[iVar11] >> 4]
                                               & 0xffU) + ((int)(short)param_6[iVar9] & 0xffU) +
                                               ((int)(short)param_6[(int)(uint)param_1[iVar11 + 
                                                  iVar12] >> 4] & 0xffU) +
                                               ((int)(short)param_6[iVar10] & 0xffU) + 1) >> 2 &
                                         0xff);
                  iVar11 = iVar13 + 2 >> 1;
                  pbVar14 = (byte *)(iStack52 + (iVar13 >> 2));
                  *pbVar14 = (byte)(uVar8 << 4);
                  bVar5 = iVar13 + 3 < param_3;
                  if ((int)(uint)param_1[iVar11] >> bVar5 == 0) {
                    iVar9 = 4;
                  }
                  else {
                    iVar9 = 0;
                  }
                  if ((int)(uint)param_1[iVar11 + iVar12] >> bVar5 == 0) {
                    iVar10 = 4;
                  }
                  else {
                    iVar10 = 0;
                  }
                  uVar8 = proc_7F0C7BD8(param_6,param_7,
                                        (int)(((int)(short)param_6[(int)(uint)param_1[iVar11] >> 4]
                                               >> 8 & 0xffU) +
                                              ((int)(short)param_6[iVar9] >> 8 & 0xffU) +
                                              ((int)(short)param_6[(int)(uint)param_1[iVar11 + 
                                                  iVar12] >> 4] >> 8 & 0xffU) +
                                             ((int)(short)param_6[iVar10] >> 8 & 0xffU)) >> 2 & 0xff
                                        ,(int)(((int)(short)param_6[(int)(uint)param_1[iVar11] >> 4]
                                               & 0xffU) + ((int)(short)param_6[iVar9] & 0xffU) +
                                               ((int)(short)param_6[(int)(uint)param_1[iVar11 + 
                                                  iVar12] >> 4] & 0xffU) +
                                               ((int)(short)param_6[iVar10] & 0xffU) + 1) >> 2 &
                                         0xff);
                  iVar13 += 4;
                  *pbVar14 = *pbVar14 | (byte)uVar8;
                  if ((int)uStack12 <= iVar13) break;
                  iVar11 = iVar13 >> 1;
                }
              }
              iStack8 += 2;
              iStack52 += iVar6;
              param_1 = param_1 + uStack12;
            } while (iStack8 < param_4);
          }
          iVar12 = iVar6 * iVar16;
        }
      }
    }
  }
  return iVar12;
}



// WARNING: Instruction at (ram,0x7f0c7ab0) overlaps instruction at (ram,0x7f0c7aac)
// 

uint proc_7F0C77AC(ushort *param_1,uint param_2,int param_3,int param_4,int param_5,uint param_6)

{
  ushort uVar1;
  ushort *puVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  ulonglong uVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  
  uVar3 = 0;
  if (0 < (int)param_2) {
    if ((param_2 & 3) != 0) {
      puVar2 = param_1;
      do {
        if (((longlong)(int)(param_3 << 0xb | param_4 << 6 | param_5 << 1 | param_6) & 0xffffU) ==
            (ulonglong)*puVar2) {
          return uVar3;
        }
        uVar3 += 1;
        puVar2 = puVar2 + 1;
      } while ((param_2 & 3) != uVar3);
      if (uVar3 == param_2) goto LAB_7f0c78d8;
    }
    puVar2 = param_1 + uVar3;
    uVar10 = (longlong)(int)(param_3 << 0xb | param_4 << 6 | param_5 << 1 | param_6) & 0xffff;
    do {
      if (uVar10 == (ulonglong)*puVar2) {
        return uVar3;
      }
      if (uVar10 == (ulonglong)puVar2[1]) {
        return uVar3 + 1;
      }
      if (uVar10 == (ulonglong)puVar2[2]) {
        return uVar3 + 2;
      }
      if (uVar10 == (ulonglong)puVar2[3]) {
        return uVar3 + 3;
      }
      uVar3 += 4;
      puVar2 = puVar2 + 4;
    } while (uVar3 != param_2);
  }
LAB_7f0c78d8:
  uVar10 = SEXT48((int)param_6);
  iVar6 = param_2 - 1;
  iVar11 = iVar6;
  if (1 < iVar6) {
    iVar8 = param_3 * param_3 + param_4 * param_4 + param_5 * param_5 + param_6 * 0x3c1;
    iVar11 = iVar6;
    iVar7 = 0;
    iVar12 = iVar6;
    while( true ) {
      iVar4 = iVar12 >> 1;
      uVar1 = param_1[iVar4];
      iVar12 = (int)(uint)uVar1 >> 0xb;
      uVar3 = (int)(uint)uVar1 >> 6 & 0x1f;
      uVar9 = (int)(uint)uVar1 >> 1 & 0x1f;
      iVar12 = iVar12 * iVar12 + uVar3 * uVar3 + uVar9 * uVar9 + ((uint)uVar1 & 1) * 0x3c1;
      if ((iVar8 <= iVar12) && (iVar11 = iVar4, iVar8 < iVar12)) {
        iVar11 = iVar4;
        iVar4 = iVar7;
      }
      if (iVar11 - iVar4 < 2) break;
      iVar12 = iVar11 + iVar4;
      iVar7 = iVar4;
    }
  }
  uVar3 = iVar11 - 4;
  if ((int)uVar3 < 0) {
    uVar3 = 0;
  }
  iVar7 = iVar11 + 4;
  if ((int)param_2 <= iVar11 + 4) {
    iVar7 = iVar6;
  }
  iVar11 = 999999;
  uVar9 = 0;
  if ((int)uVar3 <= iVar7) {
    if (((iVar7 - uVar3) + 1 & 1) == 0) {
      iVar6 = uVar3 << 1;
    }
    else {
      uVar1 = param_1[uVar3];
      uVar5 = uVar3 + 1;
      iVar6 = 0x3c1;
      if (uVar10 == ((ulonglong)uVar1 & 1)) {
        iVar6 = 0;
      }
      iVar12 = ((int)(uint)uVar1 >> 0xb) - param_3;
      iVar8 = ((int)(uint)uVar1 >> 6 & 0x1fU) - param_4;
      iVar4 = ((int)(uint)uVar1 >> 1 & 0x1fU) - param_5;
      iVar6 = iVar6 + iVar12 * iVar12 + iVar8 * iVar8 + iVar4 * iVar4;
      if (iVar6 < 999999) {
        uVar9 = uVar3;
        iVar11 = iVar6;
      }
      iVar6 = uVar5 * 2;
      uVar3 = uVar5;
      if (iVar7 + 1U == uVar5) {
        return uVar9;
      }
    }
    param_1 = (ushort *)((int)param_1 + iVar6);
    do {
      uVar1 = *param_1;
      iVar6 = 0x3c1;
      if (uVar10 == ((ulonglong)uVar1 & 1)) {
        iVar6 = 0;
      }
      iVar8 = ((int)(uint)uVar1 >> 0xb) - param_3;
      iVar4 = ((int)(uint)uVar1 >> 6 & 0x1fU) - param_4;
      iVar13 = ((int)(uint)uVar1 >> 1 & 0x1fU) - param_5;
      iVar12 = 0x3c1;
      iVar6 = iVar6 + iVar8 * iVar8 + iVar4 * iVar4 + iVar13 * iVar13;
      if (iVar6 < iVar11) {
        uVar1 = param_1[1];
        uVar9 = uVar3;
      }
      else {
        uVar1 = param_1[1];
        iVar6 = iVar11;
      }
      if (uVar10 == ((ulonglong)uVar1 & 1)) {
        iVar12 = 0;
      }
      iVar11 = ((int)(uint)uVar1 >> 0xb) - param_3;
      iVar8 = ((int)(uint)uVar1 >> 6 & 0x1fU) - param_4;
      iVar4 = ((int)(uint)uVar1 >> 1 & 0x1fU) - param_5;
      iVar12 = iVar12 + iVar11 * iVar11 + iVar8 * iVar8 + iVar4 * iVar4;
      iVar11 = iVar6;
      if (iVar12 < iVar6) {
        uVar9 = uVar3 + 1;
        iVar11 = iVar12;
      }
      uVar3 += 2;
      param_1 = param_1 + 2;
    } while (iVar7 + 1U != uVar3);
  }
  return uVar9;
}



// WARNING: Instruction at (ram,0x7f0c7c34) overlaps instruction at (ram,0x7f0c7c30)
// 

uint proc_7F0C7BD8(ushort *param_1,uint param_2,int param_3,uint param_4)

{
  ushort *puVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  ulonglong uVar11;
  
  uVar2 = 0;
  if (0 < (int)param_2) {
    if ((param_2 & 3) != 0) {
      puVar1 = param_1;
      do {
        if (((longlong)(int)(param_3 << 8 | param_4) & 0xffffU) == (ulonglong)*puVar1) {
          return uVar2;
        }
        uVar2 += 1;
        puVar1 = puVar1 + 1;
      } while ((param_2 & 3) != uVar2);
      if (uVar2 == param_2) goto LAB_7f0c7ca8;
    }
    uVar11 = (longlong)(int)(param_3 << 8 | param_4) & 0xffff;
    puVar1 = param_1 + uVar2;
    do {
      if (uVar11 == (ulonglong)*puVar1) {
        return uVar2;
      }
      if (uVar11 == (ulonglong)puVar1[1]) {
        return uVar2 + 1;
      }
      if (uVar11 == (ulonglong)puVar1[2]) {
        return uVar2 + 2;
      }
      if (uVar11 == (ulonglong)puVar1[3]) {
        return uVar2 + 3;
      }
      uVar2 += 4;
      puVar1 = puVar1 + 4;
    } while (uVar2 != param_2);
  }
LAB_7f0c7ca8:
  iVar7 = param_2 - 1;
  iVar3 = iVar7;
  if (1 < iVar7) {
    iVar8 = param_3 * param_3 + param_4 * param_4;
    iVar3 = iVar7;
    iVar4 = 0;
    iVar10 = iVar7;
    while( true ) {
      iVar9 = iVar10 >> 1;
      iVar10 = (int)(uint)param_1[iVar9] >> 8;
      uVar2 = (uint)param_1[iVar9] & 0xff;
      iVar10 = iVar10 * iVar10 + uVar2 * uVar2;
      if ((iVar8 <= iVar10) && (iVar3 = iVar9, iVar8 < iVar10)) {
        iVar3 = iVar9;
        iVar9 = iVar4;
      }
      if (iVar3 - iVar9 < 2) break;
      iVar10 = iVar3 + iVar9;
      iVar4 = iVar9;
    }
  }
  uVar2 = iVar3 - 4;
  if ((int)uVar2 < 0) {
    uVar2 = 0;
  }
  uVar6 = 0;
  iVar4 = iVar3 + 4;
  if ((int)param_2 <= iVar3 + 4) {
    iVar4 = iVar7;
  }
  iVar3 = 999999;
  if ((int)uVar2 <= iVar4) {
    param_1 = param_1 + uVar2;
    uVar5 = uVar6;
    do {
      iVar7 = ((int)(uint)*param_1 >> 8) - param_3;
      iVar10 = ((uint)*param_1 & 0xff) - param_4;
      iVar7 = iVar7 * iVar7 + iVar10 * iVar10;
      uVar6 = uVar2;
      if (iVar3 <= iVar7) {
        uVar6 = uVar5;
        iVar7 = iVar3;
      }
      iVar3 = iVar7;
      uVar2 += 1;
      param_1 = param_1 + 1;
      uVar5 = uVar6;
    } while (iVar4 + 1U != uVar2);
  }
  return uVar6;
}



int process_huffman_compressed_images
              (undefined4 param_1,uint *param_2,int param_3,int param_4,int param_5)

{
  short sVar1;
  bool bVar2;
  uint *puVar3;
  short *psVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  ushort *puVar8;
  int iVar9;
  uint *puVar10;
  undefined uVar11;
  undefined uVar12;
  uint uStack12328;
  int iStack12320;
  uint uStack12308;
  uint uStack12304;
  int iStack12300;
  int iStack12296;
  uint auStack12288 [1024];
  ushort auStack8192 [4096];
  
  iStack12320 = 0;
  bVar2 = false;
  proc_7F0CBF10(param_1);
  if ((param_3 == 0) || (iStack12300 = param_4, param_4 == 0)) {
    iStack12300 = 1;
  }
  *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
       (byte)(param_4 << 5) | *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0x1f;
  *(byte *)(*(int *)(param_5 + 0xc) + 0xc) =
       (byte)(param_3 << 5) & 0x20 | *(byte *)(*(int *)(param_5 + 0xc) + 0xc) & 0xdf;
  if (param_3 != 0) {
    bVar2 = true;
    if (0 < DAT_8008d090) {
      psVar4 = &DAT_8008c730;
      sVar1 = DAT_8008c730;
      bVar2 = true;
      while( true ) {
        psVar4 = psVar4 + 8;
        if ((longlong)(int)(**(uint **)(param_5 + 0xc) >> 0x14) == (longlong)sVar1) {
          bVar2 = false;
        }
        if (&DAT_8008c730 + DAT_8008d090 * 8 <= psVar4) break;
        sVar1 = *psVar4;
      }
    }
  }
  iStack12296 = 0;
  if (0 < iStack12300) {
    do {
      uStack12328 = proc_7F0CBF2C(4);
      uStack12304 = proc_7F0CBF2C(8);
      uStack12308 = proc_7F0CBF2C(8);
      uVar5 = proc_7F0CBF2C(4);
      uVar11 = (undefined)uStack12304;
      uVar12 = (undefined)uStack12308;
      if (iStack12296 == 0) {
        *(undefined *)(*(int *)(param_5 + 0xc) + 8) = uVar11;
        *(undefined *)(*(int *)(param_5 + 0xc) + 9) = uVar12;
        iVar6 = uStack12328 * 4;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
             (byte)(*(int *)(&DAT_80049248 + iVar6) << 2) & 0x1c |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0xe3;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xb) =
             (byte)*(undefined4 *)(&DAT_8004927c + iVar6) & 3 |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xb) & 0xfc;
        *(byte *)(*(int *)(param_5 + 0xc) + 0xc) =
             (byte)((*(int *)(&DAT_800492b0 + iVar6) >> 0xe) << 6) |
             *(byte *)(*(int *)(param_5 + 0xc) + 0xc) & 0x3f;
      }
      else {
        if (bVar2) {
          iVar6 = DAT_8008d090 * 0x10 + iStack12296;
          *(undefined *)((int)&DAT_8008c730 + iVar6 + 1) = uVar11;
          (&DAT_8008c738)[iVar6] = uVar12;
        }
      }
      iVar6 = uStack12304 * uStack12308;
      if (0x2000 < iVar6) {
        return 0;
      }
      switch(uVar5) {
      case 0:
      case 1:
        iVar6 = image_compression0_expand();
        break;
      case 2:
        iVar7 = uStack12328 * 4;
        generate_sample_table
                  ((int)auStack8192,*(int *)(&dword_80049178 + iVar7) * uStack12304 * uStack12308,
                   (longlong)*(int *)(&dword_800491E0 + iVar7));
        if (*(int *)(&DAT_800491ac + iVar7) != 0) {
          image_get_alpha_values((undefined *)((int)auStack8192 + iVar6 * 3),iVar6);
        }
        iVar6 = generate_link_final_image
                          ((int)auStack8192,uStack12304,uStack12308,
                           (uint *)((int)param_2 + iStack12320),uStack12328);
        break;
      case 3:
        iVar7 = uStack12328 * 4;
        iVar9 = 0;
        if (0 < *(int *)(&dword_80049178 + iVar7)) {
          puVar8 = auStack8192;
          do {
            generate_sample_table((int)puVar8,iVar6,(longlong)*(int *)(&dword_800491E0 + iVar7));
            iVar9 += 1;
            puVar8 = (ushort *)((int)puVar8 + uStack12304 * uStack12308);
          } while (iVar9 < *(int *)(&dword_80049178 + iVar7));
        }
        if (*(int *)(&DAT_800491ac + iVar7) != 0) {
          image_get_alpha_values((undefined *)((int)auStack8192 + iVar6 * 3),iVar6);
        }
        iVar6 = generate_link_final_image
                          ((int)auStack8192,uStack12304,uStack12308,
                           (uint *)((int)param_2 + iStack12320),uStack12328);
        break;
      case 4:
        type4_7_9_getsamples
                  ((int)auStack8192,
                   *(int *)(&dword_80049178 + uStack12328 * 4) * uStack12304 * uStack12308);
        if (*(int *)(&DAT_800491ac + uStack12328 * 4) != 0) {
          image_get_alpha_values((undefined *)((int)auStack8192 + iVar6 * 3),iVar6);
        }
        iVar6 = generate_link_final_image
                          ((int)auStack8192,uStack12304,uStack12308,
                           (uint *)((int)param_2 + iStack12320),uStack12328);
        break;
      case 5:
        uVar5 = type5_6_7_getsamples(auStack12288,(longlong)*(int *)(uStack12328 * 4 + -0x7ffb6dec))
        ;
        iVar6 = type5_generate_link_final_image
                          (uStack12304,uStack12308,(int *)((int)param_2 + iStack12320),
                           (int)auStack12288,uVar5,uStack12328);
        break;
      case 6:
        uVar5 = type5_6_7_getsamples(auStack12288,(longlong)*(int *)(uStack12328 * 4 + -0x7ffb6dec))
        ;
        generate_sample_table((int)auStack8192,iVar6,(longlong)(int)uVar5);
        iVar6 = type6_7_generate_link_final_image
                          (auStack8192,uStack12304,uStack12308,(uint *)((int)param_2 + iStack12320),
                           (int)auStack12288,uVar5,uStack12328);
        break;
      case 7:
        uVar5 = type5_6_7_getsamples(auStack12288,(longlong)*(int *)(uStack12328 * 4 + -0x7ffb6dec))
        ;
        type4_7_9_getsamples((int)auStack8192,iVar6);
        iVar6 = type6_7_generate_link_final_image
                          (auStack8192,uStack12304,uStack12308,(uint *)((int)param_2 + iStack12320),
                           (int)auStack12288,uVar5,uStack12328);
        break;
      case 8:
        iVar7 = uStack12328 * 4;
        uVar5 = proc_7F0CBF2C(3);
        generate_sample_table
                  ((int)auStack8192,*(int *)(&dword_80049178 + iVar7) * uStack12304 * uStack12308,
                   (longlong)*(int *)(&dword_800491E0 + iVar7));
        type8_9_doohick((int)auStack8192,uStack12304,*(int *)(&dword_80049178 + iVar7) * uStack12308
                        ,uVar5,*(int *)(&dword_800491E0 + iVar7));
        if (*(int *)(&DAT_800491ac + iVar7) != 0) {
          image_get_alpha_values((undefined *)((int)auStack8192 + iVar6 * 3),iVar6);
        }
        iVar6 = generate_link_final_image
                          ((int)auStack8192,uStack12304,uStack12308,
                           (uint *)((int)param_2 + iStack12320),uStack12328);
        break;
      case 9:
        iVar7 = uStack12328 * 4;
        uVar5 = proc_7F0CBF2C(3);
        type4_7_9_getsamples
                  ((int)auStack8192,*(int *)(&dword_80049178 + iVar7) * uStack12304 * uStack12308);
        type8_9_doohick((int)auStack8192,uStack12304,*(int *)(&dword_80049178 + iVar7) * uStack12308
                        ,uVar5,*(int *)(&dword_800491E0 + iVar7));
        if (*(int *)(&DAT_800491ac + iVar7) != 0) {
          image_get_alpha_values((undefined *)((int)auStack8192 + iVar6 * 3),iVar6);
        }
        iVar6 = generate_link_final_image
                          ((int)auStack8192,uStack12304,uStack12308,
                           (uint *)((int)param_2 + iStack12320),uStack12328);
        break;
      default:
        *(undefined *)((int)&DAT_8008c730 + DAT_8008d090 * 0x10 + 1) = uVar11;
        (&DAT_8008c738)[DAT_8008d090 * 0x10] = uVar12;
        do {
                    // WARNING: Do nothing block with infinite loop
        } while( true );
      }
      if ((param_3 == 1) && (0 < param_4)) {
        proc_7F0CB67C((int)param_2 + iStack12320,uStack12304,uStack12308,uStack12328);
      }
      iStack12320 += iVar6 + 7U & 0xfffffff8;
      if (DAT_8008d0a8 == 0) {
        DAT_8008d0a0 += 1;
      }
      else {
        DAT_8008d0a8 = 0;
      }
      iStack12296 += 1;
    } while (iStack12296 != iStack12300);
  }
  if (bVar2) {
    (&DAT_8008c730)[DAT_8008d090 * 8] = (ushort)((uint)**(undefined4 **)(param_5 + 0xc) >> 0x14);
    DAT_8008d090 += 1;
    if (0x95 < DAT_8008d090) {
      DAT_8008d090 = 0;
    }
  }
  if (param_3 == 0) {
    if (param_4 < 2) {
      if (param_4 == 1) {
        proc_7F0CB67C((int)param_2,uStack12304,uStack12308,uStack12328);
      }
    }
    else {
      iStack12296 = 1;
      puVar10 = param_2;
      puVar3 = (uint *)((int)param_2 + iStack12320);
      if (1 < param_4) {
        do {
          param_2 = puVar3;
          iVar6 = image_decompresion_related
                            (puVar10,(int)param_2,uStack12304,uStack12308,uStack12328);
          proc_7F0CB67C((int)puVar10,uStack12304,uStack12308,uStack12328);
          uStack12304 = (int)(uStack12304 + 1) >> 1;
          uStack12308 = (int)(uStack12308 + 1) >> 1;
          iStack12296 += 1;
          iStack12320 += iVar6;
          puVar10 = param_2;
          puVar3 = (uint *)((int)param_2 + iVar6);
        } while (iStack12296 != param_4);
      }
      proc_7F0CB67C((int)param_2,uStack12304,uStack12308,uStack12328);
    }
  }
  return iStack12320;
}



int image_decompresion_related(uint *param_1,int param_2,int param_3,int param_4,uint param_5)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  ushort uVar5;
  ushort uVar6;
  ushort uVar7;
  ushort uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  uint *puVar16;
  byte *pbVar17;
  int iVar18;
  uint *puVar19;
  uint *puVar20;
  uint uVar21;
  int iVar22;
  int iVar23;
  int iVar24;
  uint uStack16;
  uint uStack12;
  
  iVar15 = param_4 + 1 >> 1;
  switch(param_5) {
  case 0:
  case 2:
    uStack16 = (param_3 + 1 >> 1) + 3U & 0xffc;
    uStack12 = param_3 + 3U & 0xffc;
    break;
  case 1:
  case 3:
  case 4:
    uStack16 = (param_3 + 1 >> 1) + 3U & 0xffc;
    uStack12 = param_3 + 3U & 0xffc;
    break;
  case 5:
  case 7:
    uStack16 = (param_3 + 1 >> 1) + 7U & 0xff8;
    uStack12 = param_3 + 7U & 0xff8;
    break;
  case 6:
  case 8:
    uStack16 = (param_3 + 1 >> 1) + 0xfU & 0xff0;
    uStack12 = param_3 + 0xfU & 0xff0;
  }
  if (param_5 < 9) {
    iVar13 = (int)uStack12 >> 1;
    iVar23 = (int)uStack16 >> 1;
    switch(param_5) {
    default:
      iVar23 = 0;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          uVar21 = uStack12;
          if (param_4 <= iVar23 + 1) {
            uVar21 = 0;
          }
          iVar23 += 2;
          if (0 < (int)uStack12) {
            puVar19 = param_1 + uVar21;
            puVar16 = param_1;
            do {
              iVar24 = iVar13;
              if (iVar13 + 1 < param_3) {
                iVar24 = iVar13 + 1;
              }
              uVar9 = param_1[iVar24];
              uVar10 = *puVar16;
              uVar11 = *puVar19;
              uVar12 = (param_1 + uVar21)[iVar24];
              iVar24 = iVar13 >> 1;
              iVar13 += 2;
              puVar16 = puVar16 + 2;
              puVar19 = puVar19 + 2;
              *(uint *)(param_2 + iVar24 * 4) =
                   ((uVar10 >> 0x18) + (uVar9 >> 0x18) + (uVar11 >> 0x18) + (uVar12 >> 0x18) >> 2)
                   << 0x18 | ((uVar10 >> 0x10 & 0xff) + (uVar9 >> 0x10 & 0xff) +
                              (uVar11 >> 0x10 & 0xff) + (uVar12 >> 0x10 & 0xff) >> 2 & 0xff) << 0x10
                   | ((uVar10 >> 8 & 0xff) + (uVar9 >> 8 & 0xff) + (uVar11 >> 8 & 0xff) +
                      (uVar12 >> 8 & 0xff) >> 2 & 0xff) << 8 |
                   (uVar10 & 0xff) + (uVar9 & 0xff) + (uVar11 & 0xff) + (uVar12 & 0xff) + 1 >> 2 &
                   0xff;
            } while (iVar13 < (int)uStack12);
          }
          param_2 += uStack16 * 4;
          param_1 = param_1 + uStack12 * 2;
        } while (iVar23 < param_4);
      }
      iVar23 = iVar15 * uStack16 * 4;
      break;
    case 1:
    case 3:
      iVar23 = 0;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          uVar21 = uStack12;
          if (param_4 <= iVar23 + 1) {
            uVar21 = 0;
          }
          iVar23 += 2;
          if (0 < (int)uStack12) {
            puVar20 = (uint *)((int)param_1 + uVar21 * 2);
            puVar19 = puVar20;
            puVar16 = param_1;
            do {
              iVar24 = iVar13;
              if (iVar13 + 1 < param_3) {
                iVar24 = iVar13 + 1;
              }
              uVar5 = *(ushort *)((int)param_1 + iVar24 * 2);
              uVar6 = *(ushort *)puVar16;
              uVar7 = *(ushort *)puVar19;
              uVar8 = *(ushort *)((int)puVar20 + iVar24 * 2);
              iVar24 = iVar13 >> 1;
              iVar13 += 2;
              puVar16 = puVar16 + 1;
              puVar19 = puVar19 + 1;
              *(ushort *)(param_2 + iVar24 * 2) =
                   (ushort)((((int)(uint)uVar6 >> 0xb) + ((int)(uint)uVar5 >> 0xb) +
                             ((int)(uint)uVar7 >> 0xb) + ((int)(uint)uVar8 >> 0xb) >> 2) << 0xb) |
                   (ushort)(((int)(((int)(uint)uVar6 >> 6 & 0x1fU) + ((int)(uint)uVar5 >> 6 & 0x1fU)
                                   + ((int)(uint)uVar7 >> 6 & 0x1fU) +
                                  ((int)(uint)uVar8 >> 6 & 0x1fU)) >> 2 & 0x1fU) << 6) |
                   (ushort)(((int)(((int)(uint)uVar6 >> 1 & 0x1fU) + ((int)(uint)uVar5 >> 1 & 0x1fU)
                                   + ((int)(uint)uVar7 >> 1 & 0x1fU) +
                                  ((int)(uint)uVar8 >> 1 & 0x1fU)) >> 2 & 0x1fU) << 1) |
                   (ushort)((int)(((uint)uVar6 & 1) + ((uint)uVar5 & 1) + ((uint)uVar7 & 1) +
                                  ((uint)uVar8 & 1) + 2) >> 2) & 1;
            } while (iVar13 < (int)uStack12);
          }
          param_2 += uStack16 * 2;
          param_1 = param_1 + uStack12;
        } while (iVar23 < param_4);
      }
      iVar23 = iVar15 * uStack16 * 2;
      break;
    case 4:
      iVar23 = 0;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          uVar21 = uStack12;
          if (param_4 <= iVar23 + 1) {
            uVar21 = 0;
          }
          iVar23 += 2;
          if (0 < (int)uStack12) {
            puVar20 = (uint *)((int)param_1 + uVar21 * 2);
            puVar19 = puVar20;
            puVar16 = param_1;
            do {
              iVar24 = iVar13;
              if (iVar13 + 1 < param_3) {
                iVar24 = iVar13 + 1;
              }
              uVar5 = *(ushort *)((int)param_1 + iVar24 * 2);
              uVar6 = *(ushort *)puVar16;
              uVar7 = *(ushort *)puVar19;
              uVar8 = *(ushort *)((int)puVar20 + iVar24 * 2);
              iVar24 = iVar13 >> 1;
              iVar13 += 2;
              puVar16 = puVar16 + 1;
              puVar19 = puVar19 + 1;
              *(ushort *)(param_2 + iVar24 * 2) =
                   (ushort)((((int)(uint)uVar6 >> 8) + ((int)(uint)uVar5 >> 8) +
                             ((int)(uint)uVar7 >> 8) + ((int)(uint)uVar8 >> 8) >> 2) << 8) |
                   (ushort)((int)(((uint)uVar6 & 0xff) + ((uint)uVar5 & 0xff) + ((uint)uVar7 & 0xff)
                                  + ((uint)uVar8 & 0xff) + 1) >> 2) & 0xff;
            } while (iVar13 < (int)uStack12);
          }
          param_2 += uStack16 * 2;
          param_1 = param_1 + uStack12;
        } while (iVar23 < param_4);
      }
      iVar23 = iVar15 * uStack16 * 2;
      break;
    case 5:
      iVar23 = 0;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          uVar21 = uStack12;
          if (param_4 <= iVar23 + 1) {
            uVar21 = 0;
          }
          iVar23 += 2;
          if (0 < (int)uStack12) {
            pbVar17 = (byte *)(uVar21 + (int)param_1);
            puVar19 = param_1;
            do {
              iVar24 = iVar13;
              if (iVar13 + 1 < param_3) {
                iVar24 = iVar13 + 1;
              }
              bVar1 = *(byte *)puVar19;
              bVar2 = *pbVar17;
              bVar3 = *(byte *)(uVar21 + iVar24 + (int)param_1);
              iVar14 = iVar13 >> 1;
              iVar13 += 2;
              puVar19 = (uint *)((int)puVar19 + 2);
              pbVar17 = pbVar17 + 2;
              *(byte *)(param_2 + iVar14) =
                   ((char)((int)(uint)bVar1 >> 4) +
                    (char)((int)(uint)*(byte *)((int)param_1 + iVar24) >> 4) +
                    (char)((int)(uint)bVar2 >> 4) + (char)((int)(uint)bVar3 >> 4)) * '\x04' & 0xf0U
                   | (byte)((int)(((uint)bVar1 & 0xf) +
                                  ((uint)*(byte *)((int)param_1 + iVar24) & 0xf) +
                                  ((uint)bVar2 & 0xf) + ((uint)bVar3 & 0xf) + 1) >> 2) & 0xf;
            } while (iVar13 < (int)uStack12);
          }
          param_1 = (uint *)((int)param_1 + uStack12 * 2);
          param_2 += uStack16;
        } while (iVar23 < param_4);
      }
      iVar23 = iVar15 * uStack16;
      break;
    case 6:
      iVar24 = 0;
      if (0 < param_4) {
        do {
          iVar14 = 0;
          if (0 < (int)uStack12) {
            do {
              iVar18 = iVar14 >> 1;
              bVar1 = *(byte *)(iVar18 + (int)param_1);
              iVar22 = iVar13;
              if (param_4 <= iVar24 + 1) {
                iVar22 = 0;
              }
              bVar2 = *(byte *)(iVar22 + iVar18 + (int)param_1);
              bVar3 = ((byte *)(iVar18 + (int)param_1))[1];
              iVar22 = iVar13;
              if (param_4 <= iVar24 + 1) {
                iVar22 = 0;
              }
              bVar4 = *(byte *)((int)param_1 + iVar22 + iVar18 + 1);
              iVar22 = iVar14 >> 2;
              iVar14 += 4;
              *(byte *)(param_2 + iVar22) =
                   ((char)((int)(uint)bVar1 >> 5) + ((byte)((int)(uint)bVar1 >> 1) & 7) +
                    (char)((int)(uint)bVar2 >> 5) + ((byte)((int)(uint)bVar2 >> 1) & 7)) * '\b' &
                   0xe0 | (byte)((int)(((int)(uint)bVar3 >> 5) + ((int)(uint)bVar3 >> 1 & 7U) +
                                       ((int)(uint)bVar4 >> 5) + ((int)(uint)bVar4 >> 1 & 7U)) >> 1)
                          & 0xe |
                   (((byte)((int)(uint)bVar1 >> 4) & 1) + (bVar1 & 1) +
                    ((byte)((int)(uint)bVar2 >> 4) & 1) + (bVar2 & 1) + '\x01') * '\x04' & 0x10 |
                   (byte)((int)(((int)(uint)bVar3 >> 4 & 1U) + ((uint)bVar3 & 1) +
                                ((int)(uint)bVar4 >> 4 & 1U) + ((uint)bVar4 & 1) + 1) >> 2) & 1;
            } while (iVar14 < (int)uStack12);
          }
          iVar24 += 2;
          param_2 += iVar23;
          param_1 = (uint *)((int)param_1 + uStack12);
        } while (iVar24 < param_4);
      }
      iVar23 *= iVar15;
      break;
    case 7:
      iVar23 = 0;
      if (0 < param_4) {
        do {
          iVar13 = 0;
          uVar21 = uStack12;
          if (param_4 <= iVar23 + 1) {
            uVar21 = 0;
          }
          iVar23 += 2;
          if (0 < (int)uStack12) {
            pbVar17 = (byte *)(uVar21 + (int)param_1);
            puVar19 = param_1;
            do {
              iVar24 = iVar13;
              if (iVar13 + 1 < param_3) {
                iVar24 = iVar13 + 1;
              }
              bVar1 = *(byte *)puVar19;
              bVar2 = *pbVar17;
              iVar14 = iVar13 >> 1;
              iVar13 += 2;
              puVar19 = (uint *)((int)puVar19 + 2);
              pbVar17 = pbVar17 + 2;
              *(undefined *)(param_2 + iVar14) =
                   (char)((int)((uint)bVar1 + (uint)*(byte *)((int)param_1 + iVar24) + (uint)bVar2 +
                                (uint)*(byte *)(uVar21 + iVar24 + (int)param_1) + 1) >> 2);
            } while (iVar13 < (int)uStack12);
          }
          param_1 = (uint *)((int)param_1 + uStack12 * 2);
          param_2 += uStack16;
        } while (iVar23 < param_4);
      }
      iVar23 = iVar15 * uStack16;
      break;
    case 8:
      iVar24 = 0;
      if (0 < param_4) {
        do {
          iVar14 = 0;
          if (0 < (int)uStack12) {
            do {
              iVar18 = iVar14 >> 1;
              bVar1 = *(byte *)(iVar18 + (int)param_1);
              iVar22 = iVar13;
              if (param_4 <= iVar24 + 1) {
                iVar22 = 0;
              }
              bVar2 = *(byte *)(iVar22 + iVar18 + (int)param_1);
              bVar3 = ((byte *)(iVar18 + (int)param_1))[1];
              iVar22 = iVar13;
              if (param_4 <= iVar24 + 1) {
                iVar22 = 0;
              }
              bVar4 = *(byte *)((int)param_1 + iVar22 + iVar18 + 1);
              iVar22 = iVar14 >> 2;
              iVar14 += 4;
              *(byte *)(param_2 + iVar22) =
                   ((char)((int)(uint)bVar1 >> 4) + (bVar1 & 0xf) + (char)((int)(uint)bVar2 >> 4) +
                   (bVar2 & 0xf)) * '\x04' & 0xf0 |
                   (byte)((int)(((int)(uint)bVar3 >> 4) + ((uint)bVar3 & 0xf) +
                                ((int)(uint)bVar4 >> 4) + ((uint)bVar4 & 0xf)) >> 2) & 0xf;
            } while (iVar14 < (int)uStack12);
          }
          iVar24 += 2;
          param_2 += iVar23;
          param_1 = (uint *)((int)param_1 + uStack12);
        } while (iVar24 < param_4);
      }
      iVar23 *= iVar15;
    }
  }
  else {
    iVar23 = 0;
  }
  return iVar23;
}



void generate_sample_table(int param_1,int param_2,ulonglong param_3)

{
  bool bVar1;
  bool bVar2;
  uint uVar3;
  ushort *puVar4;
  ushort *puVar5;
  ushort *puVar6;
  ushort uVar7;
  ulonglong uVar8;
  ushort uVar10;
  ulonglong uVar9;
  ushort uVar11;
  ulonglong uVar12;
  int iVar14;
  ushort uVar15;
  ulonglong uVar13;
  ushort uVar16;
  int iVar17;
  ushort *puVar18;
  ulonglong uVar19;
  ulonglong uVar20;
  ushort uVar21;
  int iStack12312;
  int iStack12308;
  ushort uStack12288;
  short sStack12286;
  ushort auStack4096 [2048];
  
  bVar2 = false;
  uVar19 = 0;
  if (0 < (longlong)param_3) {
    puVar18 = auStack4096;
    do {
      uVar3 = proc_7F0CBF2C(8);
      uVar19 = SEXT48((int)uVar19 + 1);
      *puVar18 = (ushort)uVar3;
      puVar18 = puVar18 + 1;
    } while (uVar19 != param_3);
  }
  puVar18 = &uStack12288;
  do {
    puVar4 = puVar18 + 2;
    *puVar18 = 0xffff;
    puVar18[1] = 0xffff;
    puVar18 = puVar4;
  } while (puVar4 < auStack4096);
  uVar11 = 9999;
  uVar7 = 9999;
  uVar19 = 0;
  if (0 < (longlong)param_3) {
    if ((param_3 & 1) != 0) {
      if ((auStack4096[0] < 9999) || (auStack4096[0] < 9999)) {
        iStack12312 = 0;
        uVar7 = auStack4096[0];
      }
      uVar19 = 1;
      if (param_3 == 1) goto LAB_7f0c9378;
    }
    puVar18 = auStack4096 + (int)uVar19;
    uVar8 = SEXT48(iStack12312);
    uVar12 = SEXT48(iStack12308);
    do {
      uVar16 = *puVar18;
      if (uVar16 < uVar11) {
        uVar20 = uVar8;
        uVar9 = uVar19;
        uVar21 = uVar7;
        if (uVar11 <= uVar7) {
          uVar20 = uVar19;
          uVar9 = uVar12;
          uVar21 = uVar16;
          uVar16 = uVar11;
        }
LAB_7f0c9318:
        uVar7 = uVar21;
        uVar21 = puVar18[1];
        uVar8 = uVar20;
        uVar12 = uVar9;
        uVar11 = uVar16;
      }
      else {
        bVar1 = uVar16 < uVar7;
        uVar20 = uVar19;
        uVar9 = uVar12;
        uVar21 = uVar16;
        uVar16 = uVar11;
        if (bVar1) goto LAB_7f0c9318;
        uVar21 = puVar18[1];
      }
      iVar17 = (int)uVar19;
      if (uVar21 < uVar11) {
        if (uVar7 < uVar11) {
          uVar12 = SEXT48(iVar17 + 1);
          uVar11 = uVar21;
        }
        else {
          uVar8 = SEXT48(iVar17 + 1);
          uVar7 = uVar21;
        }
      }
      else {
        if (uVar21 < uVar7) {
          uVar8 = SEXT48(iVar17 + 1);
          uVar7 = uVar21;
        }
      }
      iStack12308 = (int)uVar12;
      iStack12312 = (int)uVar8;
      uVar19 = SEXT48(iVar17 + 2);
      puVar18 = puVar18 + 2;
    } while (uVar19 != param_3);
  }
LAB_7f0c9378:
  uVar19 = SEXT48(iStack12312);
  uVar8 = SEXT48(iStack12308);
  do {
    uVar12 = 0;
    iVar14 = (int)uVar8;
    puVar18 = auStack4096 + iVar14;
    puVar6 = auStack4096 + iStack12312;
    iVar17 = (int)uVar19;
    uVar16 = (ushort)((uint)*puVar6 + (uint)*puVar18);
    puVar5 = &uStack12288 + iVar17 * 2;
    puVar4 = &uStack12288 + iVar14 * 2;
    uVar11 = 9999;
    uVar7 = 9999;
    if ((uint)*puVar6 + (uint)*puVar18 == 0) {
      uVar16 = 1;
    }
    uVar21 = *puVar4;
    *puVar18 = 9999;
    *puVar6 = 9999;
    uVar10 = (ushort)uVar19;
    uVar15 = (ushort)uVar8;
    if ((short)uVar21 < 0) {
      if (-1 < (short)(&uStack12288)[iVar14 * 2 + 1]) {
        uVar21 = *puVar5;
        goto LAB_7f0c942c;
      }
      *puVar4 = uVar15 + 10000;
      uVar21 = *puVar5;
      *puVar18 = uVar16;
      if (((short)uVar21 < 0) && ((short)(&uStack12288)[iVar17 * 2 + 1] < 0)) {
        (&uStack12288)[iVar14 * 2 + 1] = uVar10 + 10000;
        uVar20 = uVar8;
      }
      else {
        (&uStack12288)[iVar14 * 2 + 1] = uVar10;
        uVar20 = uVar8;
      }
    }
    else {
      uVar21 = *puVar5;
LAB_7f0c942c:
      if (((short)uVar21 < 0) && ((short)(&uStack12288)[iVar17 * 2 + 1] < 0)) {
        *puVar5 = uVar10 + 10000;
        uVar21 = *puVar4;
        *puVar6 = uVar16;
        if (((short)uVar21 < 0) && ((short)(&uStack12288)[iVar14 * 2 + 1] < 0)) {
          (&uStack12288)[iVar17 * 2 + 1] = uVar15 + 10000;
          uVar20 = uVar19;
        }
        else {
          (&uStack12288)[iVar17 * 2 + 1] = uVar15;
          uVar20 = uVar19;
        }
      }
      else {
        uVar20 = 0;
        if (((short)uStack12288 < 0) && ((sStack12286 < 0 && (0x270e < auStack4096[0])))) {
          iVar17 = 0;
          puVar18 = &uStack12288;
        }
        else {
          uVar20 = 1;
          while( true ) {
            while( true ) {
              while( true ) {
                iVar17 = (int)uVar20;
                puVar18 = &uStack12288 + iVar17 * 2;
                if ((short)*puVar18 < 0) break;
                uVar20 = SEXT48(iVar17 + 1);
              }
              if ((short)(&uStack12288)[iVar17 * 2 + 1] < 0) break;
              uVar20 = SEXT48(iVar17 + 1);
            }
            if (0x270e < auStack4096[iVar17]) break;
            uVar20 = SEXT48(iVar17 + 1);
          }
          iVar17 <<= 1;
        }
        *(ushort *)((int)auStack4096 + iVar17) = uVar16;
        *puVar18 = uVar15;
        puVar18[1] = uVar10;
      }
    }
    if (0 < (longlong)param_3) {
      if ((param_3 & 1) == 0) {
        iVar17 = 0;
      }
      else {
        uVar12 = 1;
        if (auStack4096[0] < 9999) {
          uVar19 = 0;
          uVar7 = auStack4096[0];
        }
        else {
          if (auStack4096[0] < 9999) {
            uVar19 = 0;
            uVar7 = auStack4096[0];
          }
        }
        iVar17 = 2;
        if (param_3 == 1) goto LAB_7f0c95fc;
      }
      puVar18 = (ushort *)((int)auStack4096 + iVar17);
      do {
        uVar16 = *puVar18;
        if (uVar16 < uVar11) {
          uVar9 = uVar19;
          uVar13 = uVar12;
          uVar21 = uVar7;
          if (uVar11 <= uVar7) {
            uVar9 = uVar12;
            uVar13 = uVar8;
            uVar21 = uVar16;
            uVar16 = uVar11;
          }
LAB_7f0c95a4:
          uVar10 = puVar18[1];
          uVar19 = uVar9;
          uVar8 = uVar13;
          uVar11 = uVar16;
          uVar7 = uVar21;
        }
        else {
          bVar1 = uVar16 < uVar7;
          uVar9 = uVar12;
          uVar13 = uVar8;
          uVar21 = uVar16;
          uVar16 = uVar11;
          if (bVar1) goto LAB_7f0c95a4;
          uVar10 = puVar18[1];
        }
        iVar17 = (int)uVar12;
        if (uVar10 < uVar11) {
          if (uVar7 < uVar11) {
            uVar8 = SEXT48(iVar17 + 1);
            uVar11 = uVar10;
          }
          else {
            uVar19 = SEXT48(iVar17 + 1);
            uVar7 = uVar10;
          }
        }
        else {
          if (uVar10 < uVar7) {
            uVar19 = SEXT48(iVar17 + 1);
            uVar7 = uVar10;
          }
        }
        uVar12 = SEXT48(iVar17 + 2);
        puVar18 = puVar18 + 2;
      } while (uVar12 != param_3);
    }
LAB_7f0c95fc:
    iVar17 = 0;
    if (uVar11 == 9999) {
      bVar2 = true;
    }
    else {
      if (uVar7 == 9999) {
        bVar2 = true;
      }
    }
    if (bVar2) {
      uVar19 = uVar20;
      uVar7 = (ushort)uVar20;
      if (0 < param_2) {
        do {
          while ((longlong)uVar19 < 10000) {
            uVar3 = proc_7F0CBF2C(1);
            iVar14 = (int)uVar19;
            uVar19 = (longlong)(short)(&uStack12288)[iVar14 * 2 + uVar3];
            uVar7 = (&uStack12288)[iVar14 * 2 + uVar3];
          }
          if ((longlong)param_3 < 0x101) {
            *(char *)(param_1 + iVar17) = (char)uVar7 + -0x10;
          }
          else {
            *(short *)(param_1 + iVar17 * 2) = uVar7 + 0xd8f0;
          }
          iVar17 += 1;
          uVar19 = uVar20;
          uVar7 = (ushort)uVar20;
        } while (iVar17 != param_2);
      }
      return;
    }
    iStack12312 = (int)uVar19;
  } while( true );
}



// WARNING: Instruction at (ram,0x7f0c97f8) overlaps instruction at (ram,0x7f0c97f4)
// 

void type4_7_9_getsamples(int param_1,int param_2)

{
  undefined uVar1;
  undefined2 uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  undefined *puVar7;
  undefined *puVar8;
  undefined2 *puVar9;
  undefined2 *puVar10;
  undefined2 *puVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  undefined *puVar16;
  undefined2 *puVar17;
  int iVar18;
  int iVar19;
  
  uVar3 = proc_7F0CBF2C(3);
  uVar4 = proc_7F0CBF2C(3);
  uVar5 = proc_7F0CBF2C(4);
  iVar19 = 0;
  iVar12 = uVar3 + uVar4 + uVar5 + 1;
  while (0 < iVar12) {
    iVar12 = (iVar12 - uVar5) + -1;
    iVar19 += 1;
  }
  iVar12 = 0;
  if (0 < param_2) {
    do {
      uVar6 = proc_7F0CBF2C(1);
      if (uVar6 == 0) {
        if ((int)uVar5 < 9) {
          uVar6 = proc_7F0CBF2C(uVar5);
          *(undefined *)(param_1 + iVar12) = (char)uVar6;
          iVar12 += 1;
        }
        else {
          uVar6 = proc_7F0CBF2C(uVar5);
          *(undefined2 *)(param_1 + iVar12 * 2) = (short)uVar6;
          iVar12 += 1;
        }
      }
      else {
        uVar6 = proc_7F0CBF2C(uVar3);
        iVar18 = (iVar12 - uVar6) + -1;
        uVar6 = proc_7F0CBF2C(uVar4);
        iVar14 = uVar6 + iVar19;
        if ((int)uVar5 < 9) {
          iVar15 = iVar18 + iVar14;
          puVar16 = (undefined *)(param_1 + iVar12);
          if (iVar18 < iVar15) {
            uVar6 = iVar15 - iVar18 & 3;
            iVar13 = iVar18;
            if (uVar6 != 0) {
              puVar7 = (undefined *)(param_1 + iVar18);
              iVar13 = iVar18;
              puVar8 = puVar16;
              do {
                uVar1 = *puVar7;
                iVar13 += 1;
                iVar12 += 1;
                puVar16 = puVar8 + 1;
                puVar7 = puVar7 + 1;
                *puVar8 = uVar1;
                puVar8 = puVar16;
              } while (uVar6 + iVar18 != iVar13);
              if (iVar13 == iVar15) goto LAB_7f0c9834;
            }
            puVar8 = (undefined *)(param_1 + iVar13);
            puVar7 = puVar16;
            do {
              iVar13 += 4;
              iVar12 += 4;
              *puVar7 = *puVar8;
              puVar16 = puVar7 + 4;
              puVar7[1] = puVar8[1];
              puVar7[2] = puVar8[2];
              puVar7[3] = puVar8[3];
              puVar8 = puVar8 + 4;
              puVar7 = puVar16;
            } while (iVar13 != iVar18 + iVar14);
          }
LAB_7f0c9834:
          uVar6 = proc_7F0CBF2C(uVar5);
          *puVar16 = (char)uVar6;
          iVar12 += 1;
        }
        else {
          iVar15 = iVar18 + iVar14;
          puVar17 = (undefined2 *)(param_1 + iVar12 * 2);
          if (iVar18 < iVar15) {
            uVar6 = iVar15 - iVar18 & 3;
            iVar13 = iVar18;
            if (uVar6 != 0) {
              puVar9 = (undefined2 *)(param_1 + iVar18 * 2);
              iVar13 = iVar18;
              puVar10 = puVar17;
              do {
                uVar2 = *puVar9;
                iVar13 += 1;
                iVar12 += 1;
                puVar17 = puVar10 + 1;
                puVar9 = puVar9 + 1;
                *puVar10 = uVar2;
                puVar10 = puVar17;
              } while (uVar6 + iVar18 != iVar13);
              if (iVar13 == iVar15) goto LAB_7f0c98dc;
            }
            puVar10 = (undefined2 *)(param_1 + iVar13 * 2);
            puVar9 = puVar17;
            do {
              puVar11 = puVar10 + 4;
              iVar12 += 4;
              *puVar9 = *puVar10;
              puVar17 = puVar9 + 4;
              puVar9[1] = puVar10[1];
              puVar9[2] = puVar10[2];
              puVar9[3] = puVar10[3];
              puVar10 = puVar11;
              puVar9 = puVar17;
            } while (puVar11 != (undefined2 *)((iVar18 + iVar14) * 2 + param_1));
          }
LAB_7f0c98dc:
          uVar6 = proc_7F0CBF2C(uVar5);
          *puVar17 = (short)uVar6;
          iVar12 += 1;
        }
      }
    } while (iVar12 < param_2);
  }
  return;
}



uint type5_6_7_getsamples(uint *param_1,longlong param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  uVar1 = proc_7F0CBF2C(0xb);
  uVar4 = (uint)param_2;
  if (param_2 < 0x11) {
    uVar5 = 0;
    if (0 < (int)uVar1) {
      do {
        uVar2 = proc_7F0CBF2C(uVar4);
        uVar5 += 1;
        *(short *)param_1 = (short)uVar2;
        param_1 = (uint *)((int)param_1 + 2);
      } while (uVar5 != uVar1);
    }
  }
  else {
    if (param_2 < 0x19) {
      uVar5 = 0;
      if (0 < (int)uVar1) {
        do {
          uVar2 = proc_7F0CBF2C(uVar4);
          uVar5 += 1;
          *param_1 = uVar2;
          param_1 = param_1 + 1;
        } while (uVar5 != uVar1);
      }
    }
    else {
      uVar5 = 0;
      if (0 < (int)uVar1) {
        do {
          uVar2 = proc_7F0CBF2C(0x18);
          uVar3 = proc_7F0CBF2C(uVar4 - 0x18);
          uVar5 += 1;
          *param_1 = uVar3 | uVar2 << 8;
          param_1 = param_1 + 1;
        } while (uVar5 != uVar1);
      }
    }
  }
  return uVar1;
}



int proc_7F0C9A24(int param_1)

{
  int iVar1;
  
  param_1 += -1;
  iVar1 = 0;
  while (0 < param_1) {
    param_1 >>= 1;
    iVar1 += 1;
  }
  return iVar1;
}



void image_get_alpha_values(undefined *param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  iVar2 = 0;
  if (0 < param_2) {
    do {
      uVar1 = proc_7F0CBF2C(1);
      iVar2 += 1;
      *param_1 = (char)uVar1;
      param_1 = param_1 + 1;
    } while (iVar2 != param_2);
  }
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

undefined8 image_compression0_expand(void)

{
  undefined8 uVar1;
  undefined4 in_a3_hi;
  int in_a3_lo;
  
  if (CONCAT44(in_a3_hi,in_a3_lo) < 9) {
                    // WARNING: Could not recover jumptable at 0x7f0c9b04. Too many branches
                    // WARNING: Treating indirect jump as call
    uVar1 = (*(code *)(&jpt_700FDA34)[in_a3_lo])();
    return uVar1;
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f0ca6dc) overlaps instruction at (ram,0x7f0ca6d8)
// 

int generate_link_final_image(int param_1,uint param_2,int param_3,uint *param_4,undefined4 param_5)

{
  undefined *puVar1;
  byte bVar2;
  undefined uVar3;
  char cVar4;
  undefined *puVar5;
  char *pcVar6;
  byte *pbVar7;
  char *pcVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  uint *puVar13;
  ushort *puVar14;
  undefined2 *puVar15;
  undefined *puVar16;
  byte *pbVar17;
  byte *pbVar18;
  byte *pbVar19;
  int iVar20;
  
  iVar12 = 0;
  switch(param_5) {
  case 0:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          iVar10 = param_2 * param_3;
          pbVar17 = (byte *)(param_1 + iVar12);
          pbVar19 = (byte *)(param_1 + iVar12 + iVar10 * 2);
          pbVar7 = (byte *)(iVar10 * 3 + iVar12 + param_1);
          pbVar18 = (byte *)(param_1 + iVar12 + iVar10);
          puVar13 = param_4;
          if ((param_2 & 3) == 0) {
            iVar10 = 0;
          }
          else {
            do {
              bVar2 = *pbVar17;
              uVar9 += 1;
              iVar12 += 1;
              pbVar17 = pbVar17 + 1;
              *puVar13 = (uint)*pbVar7 | (uint)bVar2 << 0x18 | (uint)*pbVar18 << 0x10 |
                         (uint)*pbVar19 << 8;
              pbVar7 = pbVar7 + 1;
              pbVar18 = pbVar18 + 1;
              pbVar19 = pbVar19 + 1;
              puVar13 = puVar13 + 1;
            } while ((param_2 & 3) != uVar9);
            iVar10 = uVar9 * 4;
            if (uVar9 == param_2) goto LAB_7f0c9f80;
          }
          puVar13 = (uint *)((int)param_4 + iVar10);
          do {
            uVar9 += 4;
            iVar12 += 4;
            *puVar13 = (uint)*pbVar7 | (uint)*pbVar17 << 0x18 | (uint)*pbVar18 << 0x10 |
                       (uint)*pbVar19 << 8;
            puVar13[1] = (uint)pbVar7[1] | (uint)pbVar17[1] << 0x18 | (uint)pbVar18[1] << 0x10 |
                         (uint)pbVar19[1] << 8;
            puVar13[2] = (uint)pbVar7[2] | (uint)pbVar17[2] << 0x18 | (uint)pbVar18[2] << 0x10 |
                         (uint)pbVar19[2] << 8;
            puVar13[3] = (uint)pbVar7[3] | (uint)pbVar17[3] << 0x18 | (uint)pbVar18[3] << 0x10 |
                         (uint)pbVar19[3] << 8;
            pbVar17 = pbVar17 + 4;
            pbVar7 = pbVar7 + 4;
            pbVar18 = pbVar18 + 4;
            pbVar19 = pbVar19 + 4;
            puVar13 = puVar13 + 4;
          } while (uVar9 != param_2);
        }
LAB_7f0c9f80:
        iVar11 += 1;
        param_4 = param_4 + (param_2 + 3 & 0xffc);
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 3 & 0xffc) * param_3 * 4;
    break;
  case 1:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          iVar10 = param_2 * param_3;
          pbVar17 = (byte *)(param_1 + iVar12);
          pbVar19 = (byte *)(param_1 + iVar12 + iVar10 * 2);
          pbVar7 = (byte *)(iVar10 * 3 + iVar12 + param_1);
          pbVar18 = (byte *)(param_1 + iVar12 + iVar10);
          puVar13 = param_4;
          if ((param_2 & 3) == 0) {
            iVar10 = 0;
          }
          else {
            do {
              bVar2 = *pbVar17;
              uVar9 += 1;
              iVar12 += 1;
              pbVar17 = pbVar17 + 1;
              *(ushort *)puVar13 =
                   (ushort)*pbVar7 | (ushort)bVar2 << 0xb | (ushort)*pbVar18 << 6 |
                   (ushort)*pbVar19 << 1;
              pbVar7 = pbVar7 + 1;
              pbVar18 = pbVar18 + 1;
              pbVar19 = pbVar19 + 1;
              puVar13 = (uint *)((int)puVar13 + 2);
            } while ((param_2 & 3) != uVar9);
            iVar10 = uVar9 * 2;
            if (uVar9 == param_2) goto LAB_7f0ca2c0;
          }
          puVar14 = (ushort *)((int)param_4 + iVar10);
          do {
            uVar9 += 4;
            iVar12 += 4;
            *puVar14 = (ushort)*pbVar7 | (ushort)*pbVar17 << 0xb | (ushort)*pbVar18 << 6 |
                       (ushort)*pbVar19 << 1;
            puVar14[1] = (ushort)pbVar7[1] | (ushort)pbVar17[1] << 0xb | (ushort)pbVar18[1] << 6 |
                         (ushort)pbVar19[1] << 1;
            puVar14[2] = (ushort)pbVar7[2] | (ushort)pbVar17[2] << 0xb | (ushort)pbVar18[2] << 6 |
                         (ushort)pbVar19[2] << 1;
            puVar14[3] = (ushort)pbVar7[3] | (ushort)pbVar17[3] << 0xb | (ushort)pbVar18[3] << 6 |
                         (ushort)pbVar19[3] << 1;
            pbVar17 = pbVar17 + 4;
            pbVar7 = pbVar7 + 4;
            pbVar18 = pbVar18 + 4;
            pbVar19 = pbVar19 + 4;
            puVar14 = puVar14 + 4;
          } while (uVar9 != param_2);
        }
LAB_7f0ca2c0:
        iVar11 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 3 & 0xffc) * 2);
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 3 & 0xffc) * param_3 * 2;
    break;
  case 2:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          pbVar17 = (byte *)(param_1 + iVar12);
          pbVar18 = (byte *)(param_2 * param_3 * 2 + iVar12 + param_1);
          pbVar7 = (byte *)(param_1 + iVar12 + param_2 * param_3);
          puVar13 = param_4;
          if ((param_2 & 3) == 0) {
            iVar10 = 0;
          }
          else {
            do {
              uVar9 += 1;
              *puVar13 = (uint)*pbVar18 << 8 | (uint)*pbVar17 << 0x18 | (uint)*pbVar7 << 0x10 | 0xff
              ;
              iVar12 += 1;
              pbVar17 = pbVar17 + 1;
              pbVar7 = pbVar7 + 1;
              pbVar18 = pbVar18 + 1;
              puVar13 = puVar13 + 1;
            } while ((param_2 & 3) != uVar9);
            iVar10 = uVar9 * 4;
            if (uVar9 == param_2) goto LAB_7f0ca10c;
          }
          puVar13 = (uint *)((int)param_4 + iVar10);
          do {
            uVar9 += 4;
            *puVar13 = (uint)*pbVar18 << 8 | (uint)*pbVar17 << 0x18 | (uint)*pbVar7 << 0x10 | 0xff;
            iVar12 += 4;
            puVar13[1] = (uint)pbVar18[1] << 8 | (uint)pbVar17[1] << 0x18 | (uint)pbVar7[1] << 0x10
                         | 0xff;
            puVar13[2] = (uint)pbVar18[2] << 8 | (uint)pbVar17[2] << 0x18 | (uint)pbVar7[2] << 0x10
                         | 0xff;
            puVar13[3] = (uint)pbVar18[3] << 8 | (uint)pbVar17[3] << 0x18 | (uint)pbVar7[3] << 0x10
                         | 0xff;
            pbVar18 = pbVar18 + 4;
            puVar13 = puVar13 + 4;
            pbVar17 = pbVar17 + 4;
            pbVar7 = pbVar7 + 4;
          } while (uVar9 != param_2);
        }
LAB_7f0ca10c:
        iVar11 += 1;
        param_4 = param_4 + (param_2 + 3 & 0xffc);
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 3 & 0xffc) * param_3 * 4;
    break;
  case 3:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          pbVar17 = (byte *)(param_1 + iVar12);
          pbVar18 = (byte *)(param_2 * param_3 * 2 + iVar12 + param_1);
          pbVar7 = (byte *)(param_1 + iVar12 + param_2 * param_3);
          puVar13 = param_4;
          if ((param_2 & 3) == 0) {
            iVar10 = 0;
          }
          else {
            do {
              uVar9 += 1;
              *(ushort *)puVar13 =
                   (ushort)*pbVar18 << 1 | (ushort)*pbVar17 << 0xb | (ushort)*pbVar7 << 6 | 1;
              iVar12 += 1;
              pbVar17 = pbVar17 + 1;
              pbVar7 = pbVar7 + 1;
              pbVar18 = pbVar18 + 1;
              puVar13 = (uint *)((int)puVar13 + 2);
            } while ((param_2 & 3) != uVar9);
            iVar10 = uVar9 * 2;
            if (uVar9 == param_2) goto LAB_7f0ca560;
          }
          puVar14 = (ushort *)((int)param_4 + iVar10);
          do {
            uVar9 += 4;
            *puVar14 = (ushort)*pbVar18 << 1 | (ushort)*pbVar17 << 0xb | (ushort)*pbVar7 << 6 | 1;
            iVar12 += 4;
            puVar14[1] = (ushort)pbVar18[1] << 1 | (ushort)pbVar17[1] << 0xb |
                         (ushort)pbVar7[1] << 6 | 1;
            puVar14[2] = (ushort)pbVar18[2] << 1 | (ushort)pbVar17[2] << 0xb |
                         (ushort)pbVar7[2] << 6 | 1;
            puVar14[3] = (ushort)pbVar18[3] << 1 | (ushort)pbVar17[3] << 0xb |
                         (ushort)pbVar7[3] << 6 | 1;
            pbVar18 = pbVar18 + 4;
            puVar14 = puVar14 + 4;
            pbVar17 = pbVar17 + 4;
            pbVar7 = pbVar7 + 4;
          } while (uVar9 != param_2);
        }
LAB_7f0ca560:
        iVar11 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 3 & 0xffc) * 2);
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 3 & 0xffc) * param_3 * 2;
    break;
  case 4:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          puVar5 = (undefined *)(param_1 + iVar12);
          puVar16 = (undefined *)(iVar12 + param_2 * param_3 + param_1);
          puVar13 = param_4;
          if ((param_2 & 3) == 0) {
            iVar10 = 0;
          }
          else {
            do {
              uVar9 += 1;
              *(ushort *)puVar13 = CONCAT11(*puVar5,*puVar16);
              iVar12 += 1;
              puVar5 = puVar5 + 1;
              puVar16 = puVar16 + 1;
              puVar13 = (uint *)((int)puVar13 + 2);
            } while ((param_2 & 3) != uVar9);
            iVar10 = uVar9 * 2;
            if (uVar9 == param_2) goto LAB_7f0ca3d4;
          }
          puVar15 = (undefined2 *)((int)param_4 + iVar10);
          do {
            uVar9 += 4;
            *puVar15 = CONCAT11(*puVar5,*puVar16);
            iVar12 += 4;
            puVar15[1] = CONCAT11(puVar5[1],puVar16[1]);
            puVar15[2] = CONCAT11(puVar5[2],puVar16[2]);
            puVar1 = puVar16 + 3;
            puVar16 = puVar16 + 4;
            puVar15[3] = CONCAT11(puVar5[3],*puVar1);
            puVar15 = puVar15 + 4;
            puVar5 = puVar5 + 4;
          } while (uVar9 != param_2);
        }
LAB_7f0ca3d4:
        iVar11 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 3 & 0xffc) * 2);
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 3 & 0xffc) * param_3 * 2;
    break;
  case 5:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          pcVar6 = (char *)(param_1 + iVar12);
          pbVar17 = (byte *)(iVar12 + param_2 * param_3 + param_1);
          puVar13 = param_4;
          if ((param_2 & 3) != 0) {
            do {
              uVar9 += 1;
              *(byte *)puVar13 = *pbVar17 | *pcVar6 << 4;
              iVar12 += 1;
              pcVar6 = pcVar6 + 1;
              pbVar17 = pbVar17 + 1;
              puVar13 = (uint *)((int)puVar13 + 1);
            } while ((param_2 & 3) != uVar9);
            puVar13 = (uint *)((int)param_4 + uVar9);
            if (uVar9 == param_2) goto LAB_7f0ca668;
          }
          do {
            uVar9 += 4;
            *(byte *)puVar13 = *pbVar17 | *pcVar6 << 4;
            iVar12 += 4;
            *(byte *)((int)puVar13 + 1) = pbVar17[1] | pcVar6[1] << 4;
            *(byte *)((int)puVar13 + 2) = pbVar17[2] | pcVar6[2] << 4;
            pbVar7 = pbVar17 + 3;
            pbVar17 = pbVar17 + 4;
            *(byte *)((int)puVar13 + 3) = *pbVar7 | pcVar6[3] << 4;
            pcVar6 = pcVar6 + 4;
            puVar13 = puVar13 + 1;
          } while (uVar9 != param_2);
        }
LAB_7f0ca668:
        iVar11 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 7 & 0xff8));
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 7 & 0xff8) * param_3;
    break;
  case 6:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        iVar10 = 0;
        if (0 < (int)param_2) {
          pcVar8 = (char *)(param_2 * param_3 * 3 + iVar12 + param_1);
          pcVar6 = (char *)(param_1 + iVar12);
          do {
            pbVar17 = (byte *)(pcVar8 + 1);
            iVar12 += 2;
            cVar4 = *pcVar8;
            pcVar8 = pcVar8 + 2;
            iVar20 = iVar10 >> 1;
            iVar10 += 2;
            *(byte *)((int)param_4 + iVar20) = *pbVar17 | *pcVar6 << 5 | cVar4 << 4 | pcVar6[1] << 1
            ;
            pcVar6 = pcVar6 + 2;
          } while (iVar10 < (int)param_2);
        }
        iVar11 += 1;
        if ((param_2 & 1) != 0) {
          iVar12 += -1;
        }
        param_4 = (uint *)((int)param_4 + (param_2 + 0xf & 0xff0));
      } while (iVar11 != param_3);
    }
    param_3 = ((int)(param_2 + 0xf & 0xff0) >> 1) * param_3;
    break;
  case 7:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        uVar9 = 0;
        if (0 < (int)param_2) {
          puVar5 = (undefined *)(param_1 + iVar12);
          puVar13 = param_4;
          if ((param_2 & 3) != 0) {
            do {
              uVar3 = *puVar5;
              uVar9 += 1;
              iVar12 += 1;
              puVar5 = puVar5 + 1;
              *(undefined *)puVar13 = uVar3;
              puVar13 = (uint *)((int)puVar13 + 1);
            } while ((param_2 & 3) != uVar9);
            puVar13 = (uint *)((int)param_4 + uVar9);
            if (uVar9 == param_2) goto LAB_7f0ca714;
          }
          do {
            uVar9 += 4;
            iVar12 += 4;
            *(undefined *)puVar13 = *puVar5;
            *(undefined *)((int)puVar13 + 1) = puVar5[1];
            *(undefined *)((int)puVar13 + 2) = puVar5[2];
            *(undefined *)((int)puVar13 + 3) = puVar5[3];
            puVar5 = puVar5 + 4;
            puVar13 = puVar13 + 1;
          } while (uVar9 != param_2);
        }
LAB_7f0ca714:
        iVar11 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 7 & 0xff8));
      } while (iVar11 != param_3);
    }
    param_3 = (param_2 + 7 & 0xff8) * param_3;
    break;
  case 8:
    iVar11 = 0;
    if (0 < param_3) {
      do {
        iVar10 = 0;
        if (0 < (int)param_2) {
          pcVar6 = (char *)(param_1 + iVar12);
          do {
            iVar12 += 2;
            iVar20 = iVar10 >> 1;
            iVar10 += 2;
            *(byte *)((int)param_4 + iVar20) = pcVar6[1] | *pcVar6 << 4;
            pcVar6 = pcVar6 + 2;
          } while (iVar10 < (int)param_2);
        }
        iVar11 += 1;
        if ((param_2 & 1) != 0) {
          iVar12 += -1;
        }
        param_4 = (uint *)((int)param_4 + ((int)(param_2 + 0xf & 0xff0) >> 1));
      } while (iVar11 != param_3);
    }
    param_3 = ((int)(param_2 + 0xf & 0xff0) >> 1) * param_3;
    break;
  default:
    param_3 = 0;
  }
  return param_3;
}



int type5_generate_link_final_image
              (int param_1,int param_2,int *param_3,int param_4,int param_5,undefined4 param_6)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int *piVar4;
  byte *pbVar5;
  int iVar6;
  
  uVar1 = proc_7F0C9A24(param_5);
  iVar6 = 0;
  switch(param_6) {
  case 0:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        piVar4 = param_3;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            iVar3 += 1;
            *piVar4 = *(int *)(param_4 + uVar2 * 4);
            piVar4 = piVar4 + 1;
          } while (iVar3 != param_1);
        }
        iVar6 += 1;
        param_3 = param_3 + (param_1 + 3U & 0xffc);
      } while (iVar6 != param_2);
    }
    iVar6 = (param_1 + 3U & 0xffc) * param_2 * 4;
    break;
  case 1:
  case 4:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        piVar4 = param_3;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            iVar3 += 1;
            *(undefined2 *)piVar4 = *(undefined2 *)(param_4 + uVar2 * 2);
            piVar4 = (int *)((int)piVar4 + 2);
          } while (iVar3 != param_1);
        }
        iVar6 += 1;
        param_3 = (int *)((int)param_3 + (param_1 + 3U & 0xffc) * 2);
      } while (iVar6 != param_2);
    }
    iVar6 = (param_1 + 3U & 0xffc) * param_2 * 2;
    break;
  case 2:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        piVar4 = param_3;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            iVar3 += 1;
            *piVar4 = *(int *)(param_4 + uVar2 * 4) << 8;
            piVar4 = piVar4 + 1;
          } while (iVar3 != param_1);
        }
        iVar6 += 1;
        param_3 = param_3 + (param_1 + 3U & 0xffc);
      } while (iVar6 != param_2);
    }
    iVar6 = (param_1 + 3U & 0xffc) * param_2 * 4;
    break;
  case 3:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        piVar4 = param_3;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            iVar3 += 1;
            *(ushort *)piVar4 = *(short *)(param_4 + uVar2 * 2) << 1 | 1;
            piVar4 = (int *)((int)piVar4 + 2);
          } while (iVar3 != param_1);
        }
        iVar6 += 1;
        param_3 = (int *)((int)param_3 + (param_1 + 3U & 0xffc) * 2);
      } while (iVar6 != param_2);
    }
    iVar6 = (param_1 + 3U & 0xffc) * param_2 * 2;
    break;
  case 5:
  case 7:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        piVar4 = param_3;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            iVar3 += 1;
            *(char *)piVar4 = (char)*(undefined2 *)(param_4 + uVar2 * 2);
            piVar4 = (int *)((int)piVar4 + 1);
          } while (iVar3 != param_1);
        }
        iVar6 += 1;
        param_3 = (int *)((int)param_3 + (param_1 + 7U & 0xff8));
      } while (iVar6 != param_2);
    }
    iVar6 = (param_1 + 7U & 0xff8) * param_2;
    break;
  case 6:
  case 8:
    iVar6 = 0;
    if (0 < param_2) {
      do {
        iVar3 = 0;
        if (0 < param_1) {
          do {
            uVar2 = proc_7F0CBF2C(uVar1);
            pbVar5 = (byte *)((int)param_3 + (iVar3 >> 1));
            *pbVar5 = (char)*(undefined2 *)(param_4 + uVar2 * 2) << 4;
            if (iVar3 + 1 < param_1) {
              uVar2 = proc_7F0CBF2C(uVar1);
              *pbVar5 = *pbVar5 | *(byte *)(param_4 + uVar2 * 2 + 1);
            }
            iVar3 += 2;
          } while (iVar3 < param_1);
        }
        iVar6 += 1;
        param_3 = (int *)((int)param_3 + ((int)(param_1 + 0xfU & 0xff0) >> 1));
      } while (iVar6 != param_2);
    }
    iVar6 = ((int)(param_1 + 0xfU & 0xff0) >> 1) * param_2;
  }
  return iVar6;
}



// WARNING: Instruction at (ram,0x7f0cb448) overlaps instruction at (ram,0x7f0cb444)
// 

int type6_7_generate_link_final_image
              (ushort *param_1,uint param_2,int param_3,uint *param_4,int param_5,int param_6,
              undefined4 param_7)

{
  uint uVar1;
  int iVar2;
  ushort *puVar3;
  int iVar4;
  uint *puVar5;
  undefined4 *puVar6;
  undefined2 *puVar7;
  ushort *puVar8;
  ushort *puStack24;
  ushort *puStack20;
  
  puVar3 = param_1;
  if (param_6 < 0x101) {
    puVar3 = puStack24;
    puStack20 = param_1;
  }
  iVar4 = 0;
  switch(param_7) {
  case 0:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        uVar1 = 0;
        if (0 < (int)param_2) {
          puVar5 = param_4;
          if ((param_2 & 3) == 0) {
            iVar2 = 0;
          }
          else {
            do {
              if (param_6 < 0x101) {
                *puVar5 = *(uint *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 4);
              }
              else {
                *puVar5 = *(uint *)(param_5 + (uint)puVar3[uVar1] * 4);
              }
              uVar1 += 1;
              puVar5 = puVar5 + 1;
            } while ((param_2 & 3) != uVar1);
            iVar2 = uVar1 * 4;
            if (uVar1 == param_2) goto LAB_7f0cae60;
          }
          puVar6 = (undefined4 *)((int)param_4 + iVar2);
          do {
            if (param_6 < 0x101) {
              *puVar6 = *(undefined4 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 4);
              puVar6[1] = *(undefined4 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 1) * 4)
              ;
              puVar6[2] = *(undefined4 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 2) * 4)
              ;
              puVar6[3] = *(undefined4 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 3) * 4)
              ;
            }
            else {
              *puVar6 = *(undefined4 *)(param_5 + (uint)puVar3[uVar1] * 4);
              puVar6[1] = *(undefined4 *)(param_5 + (uint)puVar3[uVar1 + 1] * 4);
              puVar6[2] = *(undefined4 *)(param_5 + (uint)puVar3[uVar1 + 2] * 4);
              puVar6[3] = *(undefined4 *)(param_5 + (uint)puVar3[uVar1 + 3] * 4);
            }
            uVar1 += 4;
            puVar6 = puVar6 + 4;
          } while (uVar1 != param_2);
        }
LAB_7f0cae60:
        iVar4 += 1;
        param_4 = param_4 + (param_2 + 3 & 0xffc);
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = (param_2 + 3 & 0xffc) * param_3 * 4;
    break;
  case 1:
  case 4:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        uVar1 = 0;
        if (0 < (int)param_2) {
          if ((param_2 & 3) == 0) {
            iVar2 = 0;
          }
          else {
            iVar2 = 0;
            puVar5 = param_4;
            do {
              if (param_6 < 0x101) {
                *(undefined2 *)puVar5 =
                     *(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 2);
              }
              else {
                *(undefined2 *)puVar5 =
                     *(undefined2 *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2) * 2);
              }
              uVar1 += 1;
              iVar2 += 2;
              puVar5 = (uint *)((int)puVar5 + 2);
            } while ((param_2 & 3) != uVar1);
            iVar2 = uVar1 * 2;
            if (uVar1 == param_2) goto LAB_7f0cb23c;
          }
          puVar7 = (undefined2 *)((int)param_4 + iVar2);
          do {
            if (param_6 < 0x101) {
              *puVar7 = *(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 2);
              puVar7[1] = *(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 1) * 2)
              ;
              puVar7[2] = *(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 2) * 2)
              ;
              puVar7[3] = *(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 3) * 2)
              ;
            }
            else {
              *puVar7 = *(undefined2 *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2) * 2);
              puVar7[1] = *(undefined2 *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2 + 2) * 2);
              puVar7[2] = *(undefined2 *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2 + 4) * 2);
              puVar7[3] = *(undefined2 *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2 + 6) * 2);
            }
            uVar1 += 4;
            iVar2 += 8;
            puVar7 = puVar7 + 4;
          } while (uVar1 != param_2);
        }
LAB_7f0cb23c:
        iVar4 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 3 & 0xffc) * 2);
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = (param_2 + 3 & 0xffc) * param_3 * 2;
    break;
  case 2:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        uVar1 = 0;
        if (0 < (int)param_2) {
          puVar5 = param_4;
          if ((param_2 & 3) == 0) {
            iVar2 = 0;
          }
          else {
            do {
              if (param_6 < 0x101) {
                *puVar5 = *(int *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 4) << 8 |
                          0xff;
              }
              else {
                *puVar5 = *(int *)(param_5 + (uint)puVar3[uVar1] * 4) << 8 | 0xff;
              }
              uVar1 += 1;
              puVar5 = puVar5 + 1;
            } while ((param_2 & 3) != uVar1);
            iVar2 = uVar1 * 4;
            if (uVar1 == param_2) goto LAB_7f0cb07c;
          }
          puVar5 = (uint *)((int)param_4 + iVar2);
          do {
            if (param_6 < 0x101) {
              *puVar5 = *(int *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 4) << 8 | 0xff;
              puVar5[1] = *(int *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 1) * 4) << 8 |
                          0xff;
              puVar5[2] = *(int *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 2) * 4) << 8 |
                          0xff;
              puVar5[3] = *(int *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 3) * 4) << 8 |
                          0xff;
            }
            else {
              *puVar5 = *(int *)(param_5 + (uint)puVar3[uVar1] * 4) << 8 | 0xff;
              puVar5[1] = *(int *)(param_5 + (uint)puVar3[uVar1 + 1] * 4) << 8 | 0xff;
              puVar5[2] = *(int *)(param_5 + (uint)puVar3[uVar1 + 2] * 4) << 8 | 0xff;
              puVar5[3] = *(int *)(param_5 + (uint)puVar3[uVar1 + 3] * 4) << 8 | 0xff;
            }
            uVar1 += 4;
            puVar5 = puVar5 + 4;
          } while (uVar1 != param_2);
        }
LAB_7f0cb07c:
        iVar4 += 1;
        param_4 = param_4 + (param_2 + 3 & 0xffc);
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = (param_2 + 3 & 0xffc) * param_3 * 4;
    break;
  case 3:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        uVar1 = 0;
        if (0 < (int)param_2) {
          if ((param_2 & 1) == 0) {
            iVar2 = 0;
          }
          else {
            uVar1 = 1;
            if (param_6 < 0x101) {
              *(ushort *)param_4 = *(short *)(param_5 + (uint)*(byte *)puStack20 * 2) << 1 | 1;
            }
            else {
              *(ushort *)param_4 = *(short *)(param_5 + (uint)*puVar3 * 2) << 1 | 1;
            }
            iVar2 = 2;
            if (param_2 == 1) goto LAB_7f0cb394;
          }
          puVar8 = (ushort *)((int)param_4 + iVar2);
          do {
            if (param_6 < 0x101) {
              *puVar8 = *(short *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 2) << 1 | 1;
              puVar8[1] = *(short *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 1) * 2) << 1
                          | 1;
            }
            else {
              *puVar8 = *(short *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2) * 2) << 1 | 1;
              puVar8[1] = *(short *)(param_5 + (uint)*(ushort *)((int)puVar3 + iVar2 + 2) * 2) << 1
                          | 1;
            }
            uVar1 += 2;
            iVar2 += 4;
            puVar8 = puVar8 + 2;
          } while (uVar1 != param_2);
        }
LAB_7f0cb394:
        iVar4 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 3 & 0xffc) * 2);
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = (param_2 + 3 & 0xffc) * param_3 * 2;
    break;
  case 5:
  case 7:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        uVar1 = 0;
        if (0 < (int)param_2) {
          puVar5 = param_4;
          if ((param_2 & 3) != 0) {
            do {
              if (param_6 < 0x101) {
                *(char *)puVar5 =
                     (char)*(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 2);
              }
              else {
                *(char *)puVar5 = (char)*(undefined2 *)(param_5 + (uint)puVar3[uVar1] * 2);
              }
              uVar1 += 1;
              puVar5 = (uint *)((int)puVar5 + 1);
            } while ((param_2 & 3) != uVar1);
            puVar5 = (uint *)((int)param_4 + uVar1);
            if (uVar1 == param_2) goto LAB_7f0cb558;
          }
          do {
            if (param_6 < 0x101) {
              *(char *)puVar5 =
                   (char)*(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1) * 2);
              *(undefined *)((int)puVar5 + 1) =
                   (char)*(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 1) * 2);
              *(undefined *)((int)puVar5 + 2) =
                   (char)*(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 2) * 2);
              *(undefined *)((int)puVar5 + 3) =
                   (char)*(undefined2 *)(param_5 + (uint)*(byte *)((int)puStack20 + uVar1 + 3) * 2);
            }
            else {
              *(char *)puVar5 = (char)*(undefined2 *)(param_5 + (uint)puVar3[uVar1] * 2);
              *(undefined *)((int)puVar5 + 1) =
                   (char)*(undefined2 *)(param_5 + (uint)puVar3[uVar1 + 1] * 2);
              *(undefined *)((int)puVar5 + 2) =
                   (char)*(undefined2 *)(param_5 + (uint)puVar3[uVar1 + 2] * 2);
              *(undefined *)((int)puVar5 + 3) =
                   (char)*(undefined2 *)(param_5 + (uint)puVar3[uVar1 + 3] * 2);
            }
            uVar1 += 4;
            puVar5 = puVar5 + 1;
          } while (uVar1 != param_2);
        }
LAB_7f0cb558:
        iVar4 += 1;
        param_4 = (uint *)((int)param_4 + (param_2 + 7 & 0xff8));
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = (param_2 + 7 & 0xff8) * param_3;
    break;
  case 6:
  case 8:
    iVar4 = 0;
    if (0 < param_3) {
      do {
        iVar2 = 0;
        if (0 < (int)param_2) {
          do {
            if (param_6 < 0x101) {
              *(byte *)((int)param_4 + (iVar2 >> 1)) =
                   (byte)*(undefined2 *)(param_5 + (uint)((byte *)(iVar2 + (int)puStack20))[1] * 2)
                   | (char)*(undefined2 *)(param_5 + (uint)*(byte *)(iVar2 + (int)puStack20) * 2) <<
                     4;
            }
            else {
              *(byte *)((int)param_4 + (iVar2 >> 1)) =
                   (byte)*(undefined2 *)(param_5 + (uint)(puVar3 + iVar2)[1] * 2) |
                   (char)*(undefined2 *)(param_5 + (uint)puVar3[iVar2] * 2) << 4;
            }
            iVar2 += 2;
          } while (iVar2 < (int)param_2);
        }
        iVar4 += 1;
        param_4 = (uint *)((int)param_4 + ((int)(param_2 + 0xf & 0xff0) >> 1));
        puStack20 = (ushort *)((int)puStack20 + param_2);
        puVar3 = puVar3 + param_2;
      } while (iVar4 != param_3);
    }
    iVar4 = ((int)(param_2 + 0xf & 0xff0) >> 1) * param_3;
  }
  return iVar4;
}



// WARNING: Instruction at (ram,0x7f0cb718) overlaps instruction at (ram,0x7f0cb714)
// 

void proc_7F0CB67C(int param_1,int param_2,int param_3,int param_4)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  uint uStack12;
  
  switch(param_4) {
  case 0:
  case 2:
    uStack12 = param_2 + 3U & 0xffc;
    break;
  case 1:
  case 3:
  case 4:
    uStack12 = (int)(param_2 + 3U & 0xffc) >> 1;
    break;
  case 5:
  case 7:
  case 9:
  case 0xb:
    uStack12 = (int)(param_2 + 7U & 0xff8) >> 2;
    break;
  case 6:
  case 8:
  case 10:
  case 0xc:
    uStack12 = (int)(param_2 + 0xfU & 0xff0) >> 3;
  }
  puVar3 = (undefined4 *)(param_1 + uStack12 * 4);
  if ((param_4 == 0) || (param_4 == 2)) {
    iVar4 = 1;
    if (1 < param_3) {
      do {
        iVar5 = 0;
        puVar6 = puVar3;
        if (0 < (int)uStack12) {
          do {
            uVar1 = puVar6[2];
            puVar6[2] = *puVar6;
            uVar2 = puVar6[1];
            iVar5 += 4;
            *puVar6 = uVar1;
            puVar6[1] = puVar6[3];
            puVar6[3] = uVar2;
            puVar6 = puVar6 + 4;
          } while (iVar5 < (int)uStack12);
        }
        iVar4 += 2;
        puVar3 = puVar3 + uStack12 * 2;
      } while (iVar4 < param_3);
    }
  }
  else {
    iVar4 = 1;
    if (1 < param_3) {
      do {
        iVar5 = 0;
        puVar6 = puVar3;
        if (0 < (int)uStack12) {
          do {
            uVar1 = puVar6[1];
            iVar5 += 2;
            puVar6[1] = *puVar6;
            *puVar6 = uVar1;
            puVar6 = puVar6 + 2;
          } while (iVar5 < (int)uStack12);
        }
        iVar4 += 2;
        puVar3 = puVar3 + uStack12 * 2;
      } while (iVar4 < param_3);
    }
  }
  return;
}



void type8_9_doohick(int param_1,int param_2,int param_3,undefined4 param_4,int param_5)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  byte *pbVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  
  iVar2 = 0;
  if (0 < param_3) {
    do {
      iVar3 = 0;
      if (0 < param_2) {
        iVar1 = iVar2 * param_2;
        pbVar5 = (byte *)(iVar1 + param_1);
        do {
          iVar4 = (uint)*pbVar5 + param_5 * 2;
          if (iVar3 < 1) {
            uVar6 = 0;
          }
          else {
            uVar6 = (uint)pbVar5[-1];
          }
          uVar7 = 0;
          if (0 < iVar2) {
            uVar7 = (uint)*(byte *)((iVar2 + -1) * param_2 + iVar3 + param_1);
          }
          uVar8 = 0;
          if ((0 < iVar3) && (0 < iVar2)) {
            uVar8 = (uint)*(byte *)((iVar2 + -1) * param_2 + iVar3 + param_1 + -1);
          }
          switch(param_4) {
          case 0:
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)((int)(iVar4 + uVar6) % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 + uVar6 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 1:
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)((int)(iVar4 + uVar7) % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 + uVar7 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 2:
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)((int)(iVar4 + uVar8) % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 + uVar8 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 3:
            iVar4 = ((uVar6 + uVar7) - uVar8) + iVar4;
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)(iVar4 % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 4:
            iVar9 = uVar7 - uVar8;
            if (iVar9 < 0) {
              iVar9 += 1;
            }
            iVar4 = (iVar9 >> 1) + uVar6 + iVar4;
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)(iVar4 % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 5:
            iVar9 = uVar6 - uVar8;
            if (iVar9 < 0) {
              iVar9 += 1;
            }
            iVar4 = (iVar9 >> 1) + uVar7 + iVar4;
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)(iVar4 % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 == -0x80000000)) {
              trap(0x1800);
            }
            break;
          case 6:
            iVar9 = uVar6 + uVar7;
            if (false) {
              iVar9 += 1;
            }
            iVar4 = (iVar9 >> 1) + iVar4;
            *(undefined *)(param_1 + iVar1 + iVar3) = (char)(iVar4 % param_5);
            if (param_5 == 0) {
              trap(0x1c00);
            }
            if ((param_5 == -1) && (iVar4 == -0x80000000)) {
              trap(0x1800);
            }
          }
          iVar3 += 1;
          pbVar5 = pbVar5 + 1;
        } while (iVar3 != param_2);
      }
      iVar2 += 1;
    } while (iVar2 != param_3);
  }
  return;
}



void proc_7F0CBAF4(int *param_1,int param_2,int param_3)

{
  *param_1 = param_2;
  param_1[1] = param_2 + param_3;
  param_1[2] = param_2;
  param_1[3] = param_2 + param_3;
  return;
}



uint * proc_7F0CBB0C(uint param_1,undefined4 *param_2)

{
  uint *puVar1;
  uint *puVar2;
  uint uVar3;
  
  if (param_2 == NULL) {
    param_2 = &ptr_texture_alloc_start;
    puVar1 = DAT_8008c724;
  }
  else {
    puVar1 = (uint *)param_2[1];
  }
  puVar2 = (uint *)param_2[3];
  if (puVar2 < puVar1) {
    uVar3 = *puVar2;
    while( true ) {
      if (param_1 == uVar3 >> 0x14) {
        return puVar2;
      }
      puVar2 = puVar2 + 4;
      if (puVar1 <= puVar2) break;
      uVar3 = *puVar2;
    }
  }
  return NULL;
}



int proc_7F0CBB64(int param_1)

{
  return *(int *)(param_1 + 0xc) - *(int *)(param_1 + 8);
}



void proc_7F0CBB74(char *param_1,uint *param_2)

{
  char cVar1;
  
  if (*param_1 != -0x48) {
    cVar1 = *param_1;
    do {
      if (cVar1 == -3) {
        if (param_1[4] == -0x55) {
          if (param_1[5] == -0x33) {
            load_image_to_buffer((uint *)(param_1 + 4),param_2);
            cVar1 = param_1[8];
          }
          else {
            cVar1 = param_1[8];
          }
        }
        else {
          cVar1 = param_1[8];
        }
      }
      else {
        cVar1 = param_1[8];
      }
      param_1 = param_1 + 8;
    } while (cVar1 != -0x48);
  }
  return;
}



void load_image_to_buffer(uint *image,uint *buffer)

{
  byte bVar1;
  void *pvVar2;
  uint *puVar3;
  int iVar4;
  u32 uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  byte abStack4000 [4000];
  
  if (buffer == NULL) {
    buffer = &ptr_texture_alloc_start;
  }
  DAT_8008d094 = *image & 0xffff;
  puVar3 = proc_7F0CBB0C(DAT_8008d094,buffer);
  if (puVar3 == NULL) {
    osWritebackDCacheAll();
    osInvalDCache(abStack4000,0x2000);
    uVar6 = *(uint *)(image_entries + DAT_8008d094);
    romCopy(abStack4000,&images + (uVar6 & 0xfffff8),
            ((*(uint *)(image_entries + DAT_8008d094 + 1) & 0xffffff) - (uVar6 & 0xffffff)) + 0x1f &
            0xfffffff0);
    bVar1 = abStack4000[uVar6 & 7];
    iVar7 = (int)((uint)bVar1 & 0x80) >> 7;
    iVar8 = (int)((uint)bVar1 & 0x40) >> 6;
    if (((iVar8 == 0) && (iVar4 = proc_7F0CBB64((int)buffer), iVar4 < 0x10cc)) ||
       ((iVar8 != 0 && (iVar4 = proc_7F0CBB64((int)buffer), iVar4 < 0xa28)))) {
      uVar5 = osVirtualToPhysical((void *)*buffer);
      *image = uVar5;
      return;
    }
    *(short *)((void **)buffer)[2] = (short)DAT_8008d094;
    pvVar2 = ((void **)buffer)[3];
    puVar3 = (uint *)((int)pvVar2 + -0x10);
    ((void **)buffer)[2] = (void *)((int)((void **)buffer)[2] + 8);
    *(uint **)((void **)buffer + 3) = puVar3;
    *(ushort *)puVar3 = (ushort)(DAT_8008d094 << 4) | *(ushort *)puVar3 & 0xf;
    *(void **)((int)pvVar2 + -0xc) = ((void **)buffer)[2];
    if (iVar8 == 0) {
      uVar6 = process_huffman_compressed_images
                        (abStack4000 + (uVar6 & 7) + 1,(uint *)((void **)buffer)[2],iVar7,
                         (uint)bVar1 & 0x3f,(int)buffer);
    }
    else {
      uVar6 = image_related_calls_decompressdata
                        (abStack4000 + (uVar6 & 7) + 1,(byte *)((void **)buffer)[2],iVar7,
                         (uint)bVar1 & 0x3f,(int)buffer);
    }
    ((void **)buffer)[2] = (void *)((int)((void **)buffer)[2] + uVar6);
    proc_7F0CBB64((int)buffer);
  }
  uVar5 = osVirtualToPhysical((void *)puVar3[1]);
  *image = uVar5;
  return;
}



void proc_7F0CBE50(object_header *param_1,uint *param_2)

{
  int *piVar1;
  longlong lVar2;
  int iVar3;
  int *piVar4;
  longlong lVar5;
  
  lVar2 = (longlong)param_1->num_image_entries;
  piVar1 = (int *)param_1->offset_img_declaration;
  lVar5 = 0;
  if (0 < lVar2) {
    iVar3 = 0;
    piVar4 = piVar1;
    do {
      if (*piVar4 < 0xbb9) {
        load_image_to_buffer((uint *)(iVar3 + (int)piVar1),param_2);
        lVar2 = (longlong)param_1->num_image_entries;
      }
      lVar5 = (longlong)((int)lVar5 + 1);
      iVar3 += 0xc;
      piVar4 = piVar4 + 3;
    } while (lVar5 < lVar2);
  }
  return;
}



void proc_7F0CBEE8(uint param_1,uint *param_2)

{
  uint uStack4;
  
  uStack4 = param_1;
  load_image_to_buffer(&uStack4,param_2);
  return;
}



void proc_7F0CBF10(undefined4 param_1)

{
  DAT_8008d0a0 = param_1;
  DAT_8008d0a4 = 0;
  DAT_8008d0a8 = 0;
  return;
}



uint proc_7F0CBF2C(uint param_1)

{
  byte bVar1;
  
  if ((int)DAT_8008d0a8 < (int)param_1) {
    do {
      DAT_8008d0a8 += 8;
      bVar1 = *DAT_8008d0a0;
      DAT_8008d0a0 = DAT_8008d0a0 + 1;
      DAT_8008d0a4 = (uint)bVar1 | DAT_8008d0a4 << 8;
    } while ((int)DAT_8008d0a8 < (int)param_1);
  }
  DAT_8008d0a8 -= param_1;
  return DAT_8008d0a4 >> (DAT_8008d0a8 & 0x1f) & (1 << (param_1 & 0x1f)) - 1U;
}



void load_prepare_global_image_bank(void)

{
  void *pvVar1;
  int iVar2;
  
  pvVar1 = allocate_bytes_in_bank(0x2400,4);
  ptr_explosionDL = (char *)((int)pvVar1 + 0xfffU & 0xfffff000);
  romCopy(ptr_explosionDL,&Globalimagetable,0x1400);
  dword_8008D770 = ptr_explosionDL + -0x2000000;
  image = (uint *)(ptr_explosionDL + 0xac8);
  DAT_8008d0bc = ptr_explosionDL + 0xad4;
  DAT_8008d0c0 = ptr_explosionDL + 0xbc4;
  DAT_8008d0c4 = ptr_explosionDL + 0xc0c;
  DAT_8008d0c8 = ptr_explosionDL + 0xc48;
  DAT_8008d0cc = ptr_explosionDL + 0xc54;
  DAT_8008d0d0 = ptr_explosionDL + 0xc60;
  DAT_8008d0d4 = ptr_explosionDL + 0xc6c;
  DAT_8008d0d8 = ptr_explosionDL + 0xc78;
  DAT_8008d0dc = ptr_explosionDL + 0xc84;
  DAT_8008d0e0 = ptr_explosionDL + 0xc90;
  DAT_8008d0e4 = ptr_explosionDL + 0xc9c;
  DAT_8008d0e8 = ptr_explosionDL + 0xca8;
  DAT_8008d0ec = ptr_explosionDL + 0xcb4;
  DAT_8008d0f0 = ptr_explosionDL + 0xcc0;
  DAT_8008d0f4 = ptr_explosionDL + 0xccc;
  DAT_8008d0f8 = ptr_explosionDL + 0xcd8;
  DAT_8008d0fc = ptr_explosionDL + 0xce4;
  DAT_8008d100 = ptr_explosionDL + 0xcf0;
  DAT_8008d104 = ptr_explosionDL + 0xcfc;
  DAT_8008d108 = ptr_explosionDL + 0xd08;
  DAT_8008d10c = ptr_explosionDL + 0xd14;
  DAT_8008d110 = ptr_explosionDL + 0xd20;
  imgcall = ptr_explosionDL + 0xd2c;
  DAT_8008d118 = ptr_explosionDL + 0xd38;
  DAT_8008d11c = ptr_explosionDL + 0xd44;
  DAT_8008d120 = ptr_explosionDL + 0xd5c;
  DAT_8008d124 = ptr_explosionDL + 0xfb4;
  DAT_8008d128 = ptr_explosionDL + 0xfd8;
  DAT_8008d12c = ptr_explosionDL + 0x1020;
  DAT_8008d130 = ptr_explosionDL + 0x102c;
  DAT_8008d134 = ptr_explosionDL + 0x132c;
  proc_7F0CBB74(ptr_explosionDL,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000078,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000120,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x20001c8,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000270,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000318,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x20003c0,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000468,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000510,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x20005b8,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000660,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000708,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x20007b0,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000858,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000900,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x20009a8,NULL);
  proc_7F0CBB74(dword_8008D770 + 0x2000a50,NULL);
  load_image_to_buffer(image,NULL);
  iVar2 = 0;
  do {
    load_image_to_buffer((uint *)(DAT_8008d0c0 + iVar2),NULL);
    iVar2 += 0xc;
  } while (iVar2 < 0x48);
  iVar2 = 0;
  do {
    load_image_to_buffer((uint *)(DAT_8008d0c4 + iVar2),NULL);
    iVar2 += 0xc;
  } while (iVar2 != 0x3c);
  return;
}



void proc_7F0CC4C0(void)

{
  return;
}



void proc_7F0CC4C8(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  
  puVar1 = &DAT_8008d148;
  puVar2 = &DAT_8008d2a8;
  do {
    puVar2 = puVar2 + 0x14;
    puVar1[0xb] = 0;
    puVar2[5] = 0;
    puVar1[0x16] = 0;
    puVar2[10] = 0;
    puVar1[0x21] = 0;
    puVar2[0xf] = 0;
    *puVar1 = 0;
    *puVar2 = 0;
    puVar1 = puVar1 + 0x2c;
    puVar2 = puVar2;
  } while (puVar2 != (undefined4 *)&DAT_8008d348);
  DAT_8008d140 = 0xffffffff;
  return;
}



undefined * proc_7F0CC51C(undefined *param_1,int param_2,undefined *param_3)

{
  undefined uVar1;
  undefined *puVar2;
  undefined *puVar3;
  
  puVar3 = param_3;
  puVar2 = param_3;
  if (0 < param_2) {
    do {
      uVar1 = *param_1;
      param_2 += -1;
      puVar3 = puVar2 + 1;
      param_1 = param_1 + 1;
      *puVar2 = uVar1;
      puVar2 = puVar3;
    } while (0 < param_2);
  }
  return puVar3 + -(int)param_3;
}



undefined8 proc_7F0CC548(int param_1)

{
  if (param_1 != DAT_8008d140) {
    DAT_8008d140 = param_1;
    return 1;
  }
  return 0;
}



undefined8
proc_7F0CC574(int param_1,int param_2,int param_3,int param_4,int param_5,int param_6,int param_7,
             int param_8,int param_9,int param_10,int param_11)

{
  undefined8 uVar1;
  int iVar2;
  
  iVar2 = param_1 * 0x2c;
  uVar1 = 0;
  if (((((((&DAT_8008d148)[param_1 * 0xb] == 0) || (param_2 != *(int *)(&DAT_8008d14c + iVar2))) ||
        (param_3 != *(int *)(&DAT_8008d150 + iVar2))) ||
       ((param_4 != *(int *)(&DAT_8008d154 + iVar2) || (param_5 != *(int *)(&DAT_8008d158 + iVar2)))
       )) || ((param_6 != *(int *)(&DAT_8008d15c + iVar2) ||
              ((param_7 != *(int *)(&DAT_8008d160 + iVar2) ||
               (param_8 != *(int *)(&DAT_8008d164 + iVar2))))))) ||
     ((param_9 != *(int *)(&DAT_8008d168 + iVar2) ||
      ((param_10 != *(int *)(&DAT_8008d16c + iVar2) || (param_11 != *(int *)(&DAT_8008d170 + iVar2))
       ))))) {
    uVar1 = 1;
    (&DAT_8008d148)[param_1 * 0xb] = 1;
    *(int *)(&DAT_8008d14c + iVar2) = param_2;
    *(int *)(&DAT_8008d150 + iVar2) = param_3;
    *(int *)(&DAT_8008d154 + iVar2) = param_4;
    *(int *)(&DAT_8008d158 + iVar2) = param_5;
    *(int *)(&DAT_8008d15c + iVar2) = param_6;
    *(int *)(&DAT_8008d160 + iVar2) = param_7;
    *(int *)(&DAT_8008d164 + iVar2) = param_8;
    *(int *)(&DAT_8008d168 + iVar2) = param_9;
    *(int *)(&DAT_8008d16c + iVar2) = param_10;
    *(int *)(&DAT_8008d170 + iVar2) = param_11;
  }
  return uVar1;
}



undefined8 proc_7F0CC690(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  int iVar1;
  undefined8 uVar2;
  
  iVar1 = param_1 * 0x14;
  uVar2 = 0;
  if (((((&DAT_8008d2a8)[param_1 * 5] == 0) || (param_2 != *(int *)(&DAT_8008d2ac + iVar1))) ||
      (param_3 != *(int *)(&DAT_8008d2b0 + iVar1))) ||
     ((param_4 != *(int *)(&DAT_8008d2b4 + iVar1) || (param_5 != *(int *)(&DAT_8008d2b8 + iVar1)))))
  {
    uVar2 = 1;
    (&DAT_8008d2a8)[param_1 * 5] = 1;
    *(int *)(&DAT_8008d2ac + iVar1) = param_2;
    *(int *)(&DAT_8008d2b0 + iVar1) = param_3;
    *(int *)(&DAT_8008d2b4 + iVar1) = param_4;
    *(int *)(&DAT_8008d2b8 + iVar1) = param_5;
  }
  return uVar2;
}



ulonglong proc_7F0CC714(uint *param_1,ulonglong param_2)

{
  ulonglong uVar1;
  int iVar3;
  ulonglong uVar2;
  short *psVar4;
  
  uVar1 = (ulonglong)*(byte *)(param_1 + 2);
  if (param_2 == 0) {
    return uVar1;
  }
  if (-1 < (int)(param_1[3] << 2)) {
    uVar2 = 0;
    if (0 < (longlong)param_2) {
      if ((param_2 & 3) != 0) {
        do {
          uVar1 = SEXT48((int)uVar1 + 1 >> 1);
          uVar2 = SEXT48((int)uVar2 + 1);
        } while ((param_2 & 3) != uVar2);
        if (uVar2 == param_2) {
          return uVar1;
        }
      }
      do {
        uVar1 = SEXT48(((((int)uVar1 + 1 >> 1) + 1 >> 1) + 1 >> 1) + 1 >> 1);
        uVar2 = SEXT48((int)uVar2 + 4);
      } while (uVar2 != param_2);
    }
    return uVar1;
  }
  iVar3 = 0;
  if (0 < DAT_8008d090) {
    psVar4 = &DAT_8008c730;
    do {
      if ((longlong)(int)(*param_1 >> 0x14) == (longlong)*psVar4) {
        return (ulonglong)*(byte *)((int)&DAT_8008c730 + iVar3 * 0x10 + (int)param_2 + 1);
      }
      iVar3 += 1;
      psVar4 = psVar4 + 8;
    } while (iVar3 < DAT_8008d090);
  }
  return 1;
}



ulonglong proc_7F0CC7FC(uint *param_1,ulonglong param_2)

{
  ulonglong uVar1;
  int iVar3;
  ulonglong uVar2;
  short *psVar4;
  
  uVar1 = (ulonglong)*(byte *)((int)param_1 + 9);
  if (param_2 == 0) {
    return uVar1;
  }
  if (-1 < (int)(param_1[3] << 2)) {
    uVar2 = 0;
    if (0 < (longlong)param_2) {
      if ((param_2 & 3) != 0) {
        do {
          uVar1 = SEXT48((int)uVar1 + 1 >> 1);
          uVar2 = SEXT48((int)uVar2 + 1);
        } while ((param_2 & 3) != uVar2);
        if (uVar2 == param_2) {
          return uVar1;
        }
      }
      do {
        uVar1 = SEXT48(((((int)uVar1 + 1 >> 1) + 1 >> 1) + 1 >> 1) + 1 >> 1);
        uVar2 = SEXT48((int)uVar2 + 4);
      } while (uVar2 != param_2);
    }
    return uVar1;
  }
  iVar3 = 0;
  if (0 < DAT_8008d090) {
    psVar4 = &DAT_8008c730;
    do {
      if ((longlong)(int)(*param_1 >> 0x14) == (longlong)*psVar4) {
        return (ulonglong)(byte)(&DAT_8008c738)[iVar3 * 0x10 + (int)param_2];
      }
      iVar3 += 1;
      psVar4 = psVar4 + 8;
    } while (iVar3 < DAT_8008d090);
  }
  return 1;
}



int proc_7F0CC8E4(uint *param_1,ulonglong param_2)

{
  ulonglong uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  
  uVar4 = param_1[2] & 3;
  uVar1 = proc_7F0CC714(param_1,param_2);
  iVar2 = (int)uVar1;
  if (uVar4 == 3) {
    iVar3 = iVar2 + 3;
    if (iVar3 < 0) {
      iVar3 = iVar2 + 6;
    }
    iVar3 >>= 2;
  }
  else {
    iVar3 = iVar2 + 3;
    if (uVar4 == 2) {
      if (iVar3 < 0) {
        iVar3 = iVar2 + 6;
      }
      iVar3 >>= 2;
    }
    else {
      iVar3 = iVar2 + 0xf;
      if (uVar4 == 1) {
        iVar3 = iVar2 + 7;
        if (iVar3 < 0) {
          iVar3 = iVar2 + 0xe;
        }
        iVar3 >>= 3;
      }
      else {
        if (iVar3 < 0) {
          iVar3 = iVar2 + 0x1e;
        }
        iVar3 >>= 4;
      }
    }
  }
  return iVar3;
}



int proc_7F0CC994(uint *param_1,ulonglong param_2)

{
  ulonglong uVar1;
  int iVar2;
  
  uVar1 = proc_7F0CC7FC(param_1,param_2);
  iVar2 = proc_7F0CC8E4(param_1,(longlong)(int)param_2);
  return iVar2 * (int)uVar1;
}



void proc_7F0CC9D4(uint *param_1,undefined4 *param_2,int *param_3)

{
  int iVar1;
  uint uVar2;
  ulonglong uVar3;
  ulonglong uVar4;
  
  uVar2 = param_1[2] & 3;
  uVar3 = SEXT48((int)(uint)(*(byte *)((int)param_1 + 0xb) >> 5));
  if (uVar3 == 0) {
    uVar3 = 1;
  }
  *param_3 = 0;
  if (uVar2 == 3) {
    *param_2 = 3;
  }
  else {
    if (uVar2 == 2) {
      *param_2 = 2;
    }
    else {
      if (uVar2 == 1) {
        *param_2 = 2;
      }
      else {
        *param_2 = 2;
      }
    }
  }
  uVar4 = 0;
  if (uVar3 != 0) {
    do {
      iVar1 = proc_7F0CC994(param_1,uVar4);
      uVar4 = SEXT48((int)uVar4 + 1);
      *param_3 = *param_3 + iVar1 * 4;
    } while (uVar4 != uVar3);
  }
  return;
}



int proc_7F0CCA9C(int param_1)

{
  int iVar1;
  
  param_1 += -1;
  iVar1 = 0;
  if (0 < param_1) {
    do {
      param_1 >>= 1;
      iVar1 += 1;
      if (param_1 < 1) {
        return iVar1;
      }
    } while (iVar1 != 8);
  }
  return iVar1;
}



undefined8 proc_7F0CCACC(longlong param_1)

{
  if (param_1 == 1) {
    return 2;
  }
  if (param_1 == 2) {
    return 1;
  }
  return 0;
}



int proc_7F0CCAFC(float param_1)

{
  int iVar1;
  
  iVar1 = (int)param_1;
  if (param_1 <= (float)iVar1) {
    return iVar1;
  }
  return iVar1 + 1;
}



int proc_7F0CCB38(uint *param_1)

{
  int iVar1;
  uint uVar2;
  
  iVar1 = proc_7F0CC8E4(param_1,0);
  uVar2 = param_1[2] & 3;
  if (uVar2 == 3) {
    iVar1 = proc_7F0CCAFC((2.00000000 / (float)(iVar1 << 2)) * 2048.00000000);
  }
  else {
    if (uVar2 == 2) {
      iVar1 = proc_7F0CCAFC((4.00000000 / (float)(iVar1 << 2)) * 2048.00000000);
    }
    else {
      if (uVar2 == 1) {
        iVar1 = proc_7F0CCAFC((8.00000000 / (float)(iVar1 << 3)) * 2048.00000000);
      }
      else {
        iVar1 = proc_7F0CCAFC((16.00000000 / (float)(iVar1 << 4)) * 2048.00000000);
      }
    }
  }
  return iVar1;
}



uint * proc_7F0CCC50(uint *param_1,uint *param_2,int param_3,uint param_4,uint param_5,uint param_6)

{
  int iVar4;
  int iVar5;
  uint uVar6;
  longlong lVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  uint uVar7;
  uint uVar8;
  uint *puVar9;
  uint *puVar10;
  
  uVar7 = *param_2 >> 0x14;
  iVar4 = proc_7F0CCA9C((uint)*(byte *)(param_2 + 2));
  iVar5 = proc_7F0CCA9C((uint)*(byte *)((int)param_2 + 9));
  uVar6 = proc_7F0CC8E4(param_2,0);
  param_1[1] = 0xffffffff;
  *param_1 = (param_6 & 0xff) << 8 | 0xfa000000;
  puVar9 = param_1 + 2;
  lVar1 = proc_7F0CC548((param_2[3] >> 0x1e) << 0xe);
  if (lVar1 != 0) {
    *puVar9 = 0xba000e02;
    puVar9 = param_1 + 4;
    param_1[3] = (param_2[3] >> 0x1e) << 0xe;
  }
  lVar1 = proc_7F0CC574(0,(param_2[2] << 0x1b) >> 0x1d,param_2[2] & 3,uVar6,
                        (*(uint *)&image_entries[uVar7].flag3 >> 0x1c) +
                        uVar6 * ((uint)(byte)image_entries[uVar7].flag3 & 0xf),0,0,
                        iVar4 - (uint)((byte)image_entries[uVar7].flag4 >> 4),
                        iVar5 - ((uint)*(ushort *)&image_entries[uVar7].flag3 & 0xf),param_4,param_5
                       );
  puVar10 = puVar9;
  if (lVar1 != 0) {
    *puVar9 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (param_2[2] & 3) << 0x13 |
              (uVar6 & 0x1ff) << 9 |
              (*(uint *)&image_entries[uVar7].flag3 >> 0x1c) +
              uVar6 * ((uint)(byte)image_entries[uVar7].flag3 & 0xf) & 0x1ff;
    puVar10 = puVar9 + 2;
    uVar2 = proc_7F0CCACC(0);
    uVar3 = proc_7F0CCACC(0);
    puVar9[1] = ((uint)uVar3 & 3) << 8 | ((uint)uVar2 & 3) << 0x12 |
                (iVar5 - (uint)*(ushort *)&image_entries[uVar7].flag3 & 0xf) << 0xe |
                (param_5 & 0xf) << 10 |
                (iVar4 - (uint)((byte)image_entries[uVar7].flag4 >> 4) & 0xf) << 4 | param_4 & 0xf;
  }
  iVar4 = 0;
  if ((param_3 == 2) && (-1 < (int)(param_2[3] << 2))) {
    iVar4 = 2;
  }
  if (param_3 == 2) {
    if ((int)(param_2[3] << 2) < 0) {
      uVar6 = 0;
    }
    else {
      uVar6 = 2;
    }
  }
  else {
    uVar6 = 0;
  }
  if (param_3 == 2) {
    if ((int)(param_2[3] << 2) < 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = 2;
    }
  }
  else {
    iVar5 = 0;
  }
  uVar7 = iVar5 + ((uint)*(byte *)(param_2 + 2) - 1) * 4;
  if (param_3 == 2) {
    if ((int)(param_2[3] << 2) < 0) {
      iVar5 = 0;
    }
    else {
      iVar5 = 2;
    }
  }
  else {
    iVar5 = 0;
  }
  uVar8 = iVar5 + ((uint)*(byte *)((int)param_2 + 9) - 1) * 4;
  lVar1 = proc_7F0CC690(0,iVar4,uVar6,uVar7,uVar8);
  if (lVar1 != 0) {
    *puVar10 = iVar4 << 0xc | 0xf2000000U | uVar6;
    puVar10[1] = (uVar7 & 0xfff) << 0xc | uVar8 & 0xfff;
    puVar10 = puVar10 + 2;
  }
  return puVar10;
}



uint * proc_7F0CCFBC(uint *param_1,uint *param_2,int param_3,longlong param_4)

{
  uint uVar1;
  byte bVar2;
  uint *puVar3;
  uint uVar4;
  
  uVar4 = 0;
  bVar2 = *(byte *)(param_3 + 0xb) >> 5;
  if (bVar2 != 0) {
    uVar4 = (uint)bVar2 - 1;
  }
  if (param_4 == 0) {
    uVar1 = *param_2;
    *param_2 = uVar1 & 0xffffc7ff;
    *param_2 = uVar1 & 0xffffc7ff | uVar4 << 0xb;
    puVar3 = param_1;
  }
  else {
    if (param_2 == NULL) {
      param_1[1] = 0xffffffff;
      *param_1 = (uVar4 & 7) << 0xb | 0xbb000001;
      puVar3 = param_1 + 2;
    }
    else {
      uVar4 = *param_2 & 0xffffc7ff | uVar4 << 0xb;
      puVar3 = param_1;
      if (uVar4 != *param_2) {
        *param_1 = uVar4;
        puVar3 = param_1 + 2;
        param_1[1] = param_2[1];
      }
    }
  }
  return puVar3;
}



uint * expland_c0_DL_psuedocommands(uint *param_1,uint *param_2,uint param_3)

{
  longlong lVar1;
  uint uVar2;
  uint uVar3;
  uint *puVar4;
  uint *puVar5;
  uint uStack8;
  uint uStack4;
  
  proc_7F0CC9D4(param_2,&uStack4,(int *)&uStack8);
  if (param_2[3] >> 0x1e == 0) {
    *param_1 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xfd000000 | (uStack4 & 3) << 0x13;
    puVar4 = param_1 + 2;
    param_1[1] = param_2[1];
    lVar1 = proc_7F0CC574(7,(param_2[2] << 0x1b) >> 0x1d,uStack4,0,param_3,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar4 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (uStack4 & 3) << 0x13 |
                param_3 & 0x1ff;
      param_1[3] = 0x7000000;
      puVar4 = param_1 + 4;
    }
    *puVar4 = 0xe6000000;
    puVar4[1] = 0;
    puVar4[2] = 0xf3000000;
    uStack8 -= 1;
    if (0x7fe < (int)uStack8) {
      uStack8 = 0x7ff;
    }
    puVar4[3] = (uStack8 & 0xfff) << 0xc | 0x7000000;
    puVar4[4] = 0xe7000000;
    puVar4[5] = 0;
  }
  else {
    puVar5 = param_1 + 2;
    *param_1 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xfd000000 | (uStack4 & 3) << 0x13;
    param_1[1] = param_2[1];
    lVar1 = proc_7F0CC574(7,(param_2[2] << 0x1b) >> 0x1d,uStack4,0,param_3,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar5 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (uStack4 & 3) << 0x13 |
                param_3 & 0x1ff;
      param_1[3] = 0x7000000;
      puVar5 = param_1 + 4;
    }
    *puVar5 = 0xe6000000;
    puVar5[1] = 0;
    puVar5[2] = 0xf3000000;
    uVar2 = uStack8 - 1;
    if (0x7fe < (int)uVar2) {
      uVar2 = 0x7ff;
    }
    puVar5[3] = (uVar2 & 0xfff) << 0xc | 0x7000000;
    puVar5[4] = 0xe7000000;
    puVar5[5] = 0;
    uVar2 = 0x3ff - (uint)*(byte *)((int)param_2 + 10);
    puVar4 = puVar5 + 6;
    if (uStack8 <= uVar2) {
      uVar2 = 0;
    }
    lVar1 = proc_7F0CC574(7,0,0,1,0x100,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar4 = 0xf5000300;
      puVar5[7] = 0x7000000;
      puVar4 = puVar5 + 8;
    }
    uVar3 = (uVar2 & 0x3ff) << 2;
    *puVar4 = 0xe6000000;
    puVar4[1] = 0;
    puVar4[2] = (uStack8 - uVar2 & 0x3ff) << 0xe | 0xf0000000 | uVar3;
    puVar4[3] = ((uint)*(byte *)((int)param_2 + 10) + (uStack8 - uVar2) & 0x3ff) << 0xe | 0x7000000
                | uVar3;
    puVar4[4] = 0xe7000000;
    puVar4[5] = 0;
  }
  return puVar4 + 6;
}



uint * proc_7F0CD430(uint *param_1,uint *param_2,int param_3,int param_4,int param_5,uint param_6,
                    uint param_7)

{
  ulonglong uVar1;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  longlong lVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  uint uVar9;
  int iVar10;
  int iVar11;
  ulonglong uVar12;
  uint *puVar13;
  uint uVar14;
  uint uStack12;
  uint uStack4;
  
  uStack4 = param_7;
  uVar9 = (uint)(*(byte *)((int)param_2 + 0xb) >> 5) + param_6;
  if ((int)param_6 < (int)uVar9) {
    uVar12._4_4_ = 0;
    uStack12 = param_6;
    do {
      uVar12 = SEXT48((int)uVar12._4_4_);
      uVar1 = proc_7F0CC714(param_2,uVar12);
      uVar5 = proc_7F0CCA9C((int)uVar1);
      uVar1 = proc_7F0CC7FC(param_2,uVar12);
      uVar6 = proc_7F0CCA9C((int)uVar1);
      uVar7 = proc_7F0CC8E4(param_2,uVar12);
      iVar8 = proc_7F0CC994(param_2,uVar12);
      uVar14 = (param_2[3] << 2) >> 0x1f;
      lVar2 = proc_7F0CC548((param_2[3] >> 0x1e) << 0xe);
      puVar13 = param_1;
      if (lVar2 != 0) {
        *param_1 = 0xba000e02;
        puVar13 = param_1 + 2;
        param_1[1] = (param_2[3] >> 0x1e) << 0xe;
      }
      lVar2 = proc_7F0CC574(uStack12,(param_2[2] << 0x1b) >> 0x1d,param_2[2] & 3,uVar7,uStack4,
                            param_3,param_4,uVar5,uVar6,uVar12._4_4_,uVar12._4_4_);
      param_1 = puVar13;
      if (lVar2 != 0) {
        param_1 = puVar13 + 2;
        *puVar13 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (param_2[2] & 3) << 0x13 |
                   (uVar7 & 0x1ff) << 9 | uStack4 & 0x1ff;
        uVar3 = proc_7F0CCACC((longlong)param_4);
        uVar4 = proc_7F0CCACC((longlong)param_3);
        puVar13[1] = ((uint)uVar4 & 3) << 8 | (uStack12 & 7) << 0x18 | ((uint)uVar3 & 3) << 0x12 |
                     (uVar6 & 0xf) << 0xe | (uVar12._4_4_ & 0xf) << 10 | (uVar5 & 0xf) << 4 |
                     uVar12._4_4_ & 0xf;
      }
      if (param_5 == 2) {
        if (uVar14 == 0) {
          iVar10 = 2;
        }
        else {
          iVar10 = 0;
        }
      }
      else {
        iVar10 = 0;
      }
      if (param_5 == 2) {
        if (uVar14 == 0) {
          uVar5 = 2;
        }
        else {
          uVar5 = 0;
        }
      }
      else {
        uVar5 = 0;
      }
      uVar1 = proc_7F0CC714(param_2,uVar12);
      if (param_5 == 2) {
        if (uVar14 == 0) {
          iVar11 = 2;
        }
        else {
          iVar11 = 0;
        }
      }
      else {
        iVar11 = 0;
      }
      uVar6 = iVar11 + ((int)uVar1 + -1) * 4;
      uVar1 = proc_7F0CC7FC(param_2,uVar12);
      if (param_5 == 2) {
        if (uVar14 == 0) {
          iVar11 = 2;
        }
        else {
          iVar11 = 0;
        }
      }
      else {
        iVar11 = 0;
      }
      uVar7 = iVar11 + ((int)uVar1 + -1) * 4;
      lVar2 = proc_7F0CC690(uStack12,iVar10,uVar5,uVar6,uVar7);
      uVar12._4_4_ += 1;
      if (lVar2 != 0) {
        *param_1 = iVar10 << 0xc | 0xf2000000U | uVar5;
        param_1[1] = (uStack12 & 7) << 0x18 | (uVar6 & 0xfff) << 0xc | uVar7 & 0xfff;
        param_1 = param_1 + 2;
      }
      uStack12 += 1;
      uStack4 += iVar8;
    } while (uStack12 != uVar9);
  }
  return param_1;
}



uint * proc_7F0CD7AC(uint *param_1,uint *param_2)

{
  uint uVar2;
  longlong lVar1;
  uint uVar3;
  uint *puVar4;
  uint *puVar5;
  uint uStack8;
  uint uStack4;
  
  uVar2 = proc_7F0CCB38(param_2);
  proc_7F0CC9D4(param_2,&uStack4,(int *)&uStack8);
  if (param_2[3] >> 0x1e == 0) {
    *param_1 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xfd000000 | (uStack4 & 3) << 0x13;
    puVar4 = param_1 + 2;
    param_1[1] = param_2[1];
    lVar1 = proc_7F0CC574(7,(param_2[2] << 0x1b) >> 0x1d,uStack4,0,0,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar4 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (uStack4 & 3) << 0x13;
      param_1[3] = 0x7000000;
      puVar4 = param_1 + 4;
    }
    *puVar4 = 0xe6000000;
    puVar4[1] = 0;
    puVar4[2] = 0xf3000000;
    uStack8 -= 1;
    if (0x7fe < (int)uStack8) {
      uStack8 = 0x7ff;
    }
    puVar4[3] = (uStack8 & 0xfff) << 0xc | 0x7000000 | uVar2 & 0xfff;
    puVar4[4] = 0xe7000000;
    puVar4[5] = 0;
  }
  else {
    puVar5 = param_1 + 2;
    *param_1 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xfd000000 | (uStack4 & 3) << 0x13;
    param_1[1] = param_2[1];
    lVar1 = proc_7F0CC574(7,(param_2[2] << 0x1b) >> 0x1d,uStack4,0,0,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar5 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (uStack4 & 3) << 0x13;
      param_1[3] = 0x7000000;
      puVar5 = param_1 + 4;
    }
    *puVar5 = 0xe6000000;
    puVar5[1] = 0;
    puVar5[2] = 0xf3000000;
    uVar3 = uStack8 - 1;
    if (0x7fe < (int)uVar3) {
      uVar3 = 0x7ff;
    }
    puVar5[3] = (uVar3 & 0xfff) << 0xc | 0x7000000 | uVar2 & 0xfff;
    puVar5[4] = 0xe7000000;
    puVar5[5] = 0;
    uVar2 = 0x3ff - (uint)*(byte *)((int)param_2 + 10);
    puVar4 = puVar5 + 6;
    if (uStack8 <= uVar2) {
      uVar2 = 0;
    }
    lVar1 = proc_7F0CC574(7,0,0,1,0x100,0,0,0,0,0,0);
    if (lVar1 != 0) {
      *puVar4 = 0xf5000300;
      puVar5[7] = 0x7000000;
      puVar4 = puVar5 + 8;
    }
    uVar3 = (uVar2 & 0x3ff) << 2;
    *puVar4 = 0xe6000000;
    puVar4[1] = 0;
    puVar4[2] = (uStack8 - uVar2 & 0x3ff) << 0xe | 0xf0000000 | uVar3;
    puVar4[3] = ((uint)*(byte *)((int)param_2 + 10) + (uStack8 - uVar2) & 0x3ff) << 0xe | 0x7000000
                | uVar3;
    puVar4[4] = 0xe7000000;
    puVar4[5] = 0;
  }
  return puVar4 + 6;
}



uint * proc_7F0CDB64(uint *param_1,uint *param_2,int param_3,int param_4,int param_5,uint param_6)

{
  uint uVar4;
  uint uVar5;
  uint uVar6;
  longlong lVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint *puVar10;
  uint *puVar11;
  
  uVar4 = proc_7F0CCA9C((uint)*(byte *)(param_2 + 2));
  uVar5 = proc_7F0CCA9C((uint)*(byte *)((int)param_2 + 9));
  uVar6 = proc_7F0CC8E4(param_2,0);
  uVar9 = (param_2[3] << 2) >> 0x1f;
  lVar1 = proc_7F0CC548((param_2[3] >> 0x1e) << 0xe);
  puVar10 = param_1;
  if (lVar1 != 0) {
    *param_1 = 0xba000e02;
    puVar10 = param_1 + 2;
    param_1[1] = (param_2[3] >> 0x1e) << 0xe;
  }
  lVar1 = proc_7F0CC574(param_6,(param_2[2] << 0x1b) >> 0x1d,param_2[2] & 3,uVar6,0,param_3,param_4,
                        uVar4,uVar5,0,0);
  puVar11 = puVar10;
  if (lVar1 != 0) {
    puVar11 = puVar10 + 2;
    *puVar10 = ((param_2[2] << 0x1b) >> 0x1d) << 0x15 | 0xf5000000 | (param_2[2] & 3) << 0x13 |
               (uVar6 & 0x1ff) << 9;
    uVar2 = proc_7F0CCACC((longlong)param_4);
    uVar3 = proc_7F0CCACC((longlong)param_3);
    puVar10[1] = ((uint)uVar3 & 3) << 8 | (param_6 & 7) << 0x18 | ((uint)uVar2 & 3) << 0x12 |
                 (uVar5 & 0xf) << 0xe | (uVar4 & 0xf) << 4;
  }
  iVar7 = 0;
  if ((param_5 == 2) && (uVar9 == 0)) {
    iVar7 = 2;
  }
  if (param_5 == 2) {
    if (uVar9 == 0) {
      uVar4 = 2;
    }
    else {
      uVar4 = 0;
    }
  }
  else {
    uVar4 = 0;
  }
  if (param_5 == 2) {
    if (uVar9 == 0) {
      iVar8 = 2;
    }
    else {
      iVar8 = 0;
    }
  }
  else {
    iVar8 = 0;
  }
  uVar5 = iVar8 + ((uint)*(byte *)(param_2 + 2) - 1) * 4;
  if (param_5 == 2) {
    if (uVar9 == 0) {
      iVar8 = 2;
    }
    else {
      iVar8 = 0;
    }
  }
  else {
    iVar8 = 0;
  }
  uVar6 = iVar8 + ((uint)*(byte *)((int)param_2 + 9) - 1) * 4;
  lVar1 = proc_7F0CC690(param_6,iVar7,uVar4,uVar5,uVar6);
  if (lVar1 != 0) {
    *puVar11 = iVar7 << 0xc | 0xf2000000U | uVar4;
    puVar11[1] = (param_6 & 7) << 0x18 | (uVar5 & 0xfff) << 0xc | uVar6 & 0xfff;
    puVar11 = puVar11 + 2;
  }
  return puVar11;
}



uint * proc_7F0CDE18(uint *param_1,uint *param_2,int param_3,int param_4,int param_5)

{
  uint *puVar1;
  
  puVar1 = expland_c0_DL_psuedocommands(param_1,param_2,0);
  puVar1 = proc_7F0CD430(puVar1,param_2,param_3,param_4,param_5,0,0);
  if (*(byte *)((int)param_2 + 0xb) >> 5 == 1) {
    puVar1 = proc_7F0CD430(puVar1,param_2,param_3,param_4,param_5,1,0);
  }
  return puVar1;
}



uint * proc_7F0CDEA8(uint *param_1,uint *param_2,int param_3,int param_4,int param_5,uint *param_6,
                    uint param_7,uint param_8,uint param_9)

{
  uint uVar1;
  uint *puVar2;
  
  uVar1 = proc_7F0CC994(param_6,0);
  puVar2 = proc_7F0CD7AC(param_1,param_6);
  *puVar2 = 0xe8000000;
  puVar2[1] = 0;
  puVar2 = expland_c0_DL_psuedocommands(puVar2 + 2,param_2,uVar1);
  puVar2 = proc_7F0CCC50(puVar2,param_6,param_5,param_7,param_8,param_9);
  puVar2 = proc_7F0CD430(puVar2,param_2,param_3,param_4,param_5,1,uVar1);
  if (*(byte *)((int)param_2 + 0xb) >> 5 == 1) {
    puVar2 = proc_7F0CD430(puVar2,param_2,param_3,param_4,param_5,2,uVar1);
  }
  return puVar2;
}



uint * proc_7F0CDFA8(uint *param_1,uint *param_2,int param_3,int param_4,int param_5,uint param_6,
                    uint param_7,uint param_8)

{
  uint *puVar1;
  
  puVar1 = expland_c0_DL_psuedocommands(param_1,param_2,0);
  puVar1 = proc_7F0CCC50(puVar1,param_2,param_5,param_6,param_7,param_8);
  puVar1 = proc_7F0CD430(puVar1,param_2,param_3,param_4,param_5,1,0);
  if (*(byte *)((int)param_2 + 0xb) >> 5 == 1) {
    puVar1 = proc_7F0CD430(puVar1,param_2,param_3,param_4,param_5,2,0);
  }
  return puVar1;
}



uint * proc_7F0CE064(uint *param_1,uint *param_2,int param_3,int param_4,int param_5)

{
  uint *puVar1;
  
  puVar1 = proc_7F0CD7AC(param_1,param_2);
  puVar1 = proc_7F0CDB64(puVar1,param_2,param_3,param_4,param_5,0);
  return puVar1;
}



uint * proc_7F0CE0AC(uint *param_1,uint *param_2,int param_3,int param_4,int param_5)

{
  uint *puVar1;
  
  puVar1 = proc_7F0CD7AC(param_1,param_2);
  puVar1 = proc_7F0CDB64(puVar1,param_2,param_3,param_4,param_5,0);
  puVar1 = proc_7F0CDB64(puVar1,param_2,param_3,param_4,param_5,1);
  return puVar1;
}



uint * process_microcode_sort_display_modes_expand_image_calls
                 (uint *param_1,int param_2,uint *param_3,uint *param_4)

{
  byte bVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  uint uVar5;
  uint *puVar6;
  uint *puVar7;
  uint *puVar8;
  int *piVar9;
  int iVar10;
  longlong lVar11;
  ulonglong imageID;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  int iStack60;
  uint *puStack12;
  
  param_2 >>= 3;
  puStack12 = NULL;
  bVar3 = false;
  bVar2 = false;
  iStack60 = 1;
  bVar4 = false;
  proc_7F0CC4C8();
  puVar6 = param_3;
  if (param_4 == NULL) {
    param_4 = &ptr_texture_alloc_start;
    puVar6 = param_3;
  }
  do {
    if (param_2 < 1) {
      if (bVar4) {
        save_ptrDL_enpoint_to_current_init_lightfixture_table(puVar6);
      }
      return (uint *)((int)puVar6 - (int)param_3);
    }
    bVar1 = *(byte *)param_1;
    if (bVar1 < 0xc1) {
      if (false) {
switchD_7f0ce1d0_caseD_b2:
        uVar5 = *param_1;
        goto LAB_7f0ce724;
      }
      switch(bVar1) {
      case 0xb1:
      case 0xbf:
        iStack60 = 1;
        bVar2 = false;
        *puVar6 = *param_1;
        puVar6[1] = param_1[1];
        puVar7 = puVar6 + 2;
        break;
      default:
        goto switchD_7f0ce1d0_caseD_b2;
      case 0xba:
        if (bVar3) {
          bVar1 = *(byte *)((int)param_1 + 2);
          puVar7 = puVar6;
          if (((bVar1 != 0x11) && (puVar7 = puVar6, bVar1 != 0x14)) &&
             (puVar7 = puVar6, bVar1 != 0x10)) {
            *puVar6 = *param_1;
            puVar6[1] = param_1[1];
            puVar7 = puVar6 + 2;
          }
        }
        else {
          *puVar6 = *param_1;
          puVar6[1] = param_1[1];
          puVar7 = puVar6 + 2;
        }
        break;
      case 0xbb:
        iStack60 = 0;
        *puVar6 = *param_1;
        puVar6[1] = param_1[1];
        puVar7 = puVar6 + 2;
        puStack12 = puVar6;
        break;
      case 0xc0:
        puVar7 = puVar6;
        if (!bVar2) {
          *puVar6 = 0xe7000000;
          puVar7 = puVar6 + 2;
          puVar6[1] = 0;
          bVar2 = true;
        }
        if (bVar4) {
          bVar4 = false;
          save_ptrDL_enpoint_to_current_init_lightfixture_table(puVar7);
          uVar5 = param_1[1];
        }
        else {
          uVar5 = param_1[1];
        }
        imageID = (longlong)(int)uVar5 & 0xfff;
        uVar5 = (uint)imageID;
        if ((imageID == (longlong)DAT_800483c4) && (DAT_800483c8 != 0)) {
          if (*(char *)(DAT_800483c8 + uVar5 * 4) == -1) {
            bVar3 = false;
          }
          else {
            bVar3 = true;
          }
        }
        else {
          bVar3 = false;
        }
        proc_7F0CBEE8(uVar5,param_4);
        puVar6 = proc_7F0CBB0C(uVar5,param_4);
        if (puVar6 != NULL) {
          lVar11 = (longlong)iStack60;
          iStack60 = 0;
          puVar7 = proc_7F0CCFBC(puVar7,puStack12,(int)puVar6,lVar11);
          uVar15 = *param_1;
          switch(uVar15 & 7) {
          case 0:
            uVar13 = param_1[1];
            uVar16 = uVar15 >> 0x16 & 3;
            uVar17 = uVar15 >> 0x14 & 3;
            uVar12 = uVar15 >> 0x12 & 3;
            uVar14 = uVar15 >> 0xe & 0xf;
            uVar15 = uVar15 >> 10 & 0xf;
            if (DAT_800483c8 != 0) {
              iVar10 = uVar5 * 4;
              if (*(char *)(DAT_800483c8 + iVar10) == -1) {
                *(char *)(DAT_800483c8 + iVar10) = (char)(uVar13 >> 0x18);
                *(byte *)(DAT_800483c8 + iVar10 + 1) =
                     ('\x0f' - (char)uVar14) * ' ' | *(byte *)(DAT_800483c8 + iVar10 + 1) & 0x1f;
                *(byte *)(DAT_800483c8 + iVar10 + 1) =
                     ('\x0f' - (char)uVar15) * '\x04' & 0x1cU |
                     *(byte *)(DAT_800483c8 + iVar10 + 1) & 0xe3;
              }
            }
            if (bVar3) {
              piVar9 = (int *)(DAT_800483c8 + uVar5 * 4);
              puVar7 = proc_7F0CDFA8(puVar7,puVar6,uVar16,uVar17,uVar12,
                                     0xf - (uint)(*(byte *)((int)piVar9 + 1) >> 5),
                                     0xf - ((uint)(*piVar9 << 0xb) >> 0x1d),(uint)*(byte *)piVar9);
              *puVar7 = 0xba001402;
              puVar7[1] = 0x100000;
              puVar7[3] = 0x10000;
              puVar7[2] = 0xba001001;
              puVar7[5] = 0x40000;
              puVar7[4] = 0xba001102;
              puVar7 = puVar7 + 6;
            }
            else {
              puVar7 = proc_7F0CDFA8(puVar7,puVar6,uVar16,uVar17,uVar12,uVar14,uVar15,uVar13 >> 0x18
                                    );
            }
            break;
          case 1:
            uVar5 = param_1[1] >> 0xc & 0xfff;
            proc_7F0CBEE8(uVar5,param_4);
            puVar8 = proc_7F0CBB0C(uVar5,param_4);
            if (puVar8 != NULL) {
              uVar5 = *param_1;
              puVar7 = proc_7F0CDEA8(puVar7,puVar6,uVar5 >> 0x16 & 3,uVar5 >> 0x14 & 3,
                                     uVar5 >> 0x12 & 3,puVar8,uVar5 >> 0xe & 0xf,uVar5 >> 10 & 0xf,
                                     param_1[1] >> 0x18);
            }
            break;
          case 2:
            uVar13 = uVar15 >> 0x16 & 3;
            uVar12 = uVar15 >> 0x14 & 3;
            uVar15 = uVar15 >> 0x12 & 3;
            if (bVar3) {
              piVar9 = (int *)(DAT_800483c8 + uVar5 * 4);
              puVar7 = proc_7F0CDFA8(puVar7,puVar6,uVar13,uVar12,uVar15,
                                     0xf - (uint)(*(byte *)((int)piVar9 + 1) >> 5),
                                     0xf - ((uint)(*piVar9 << 0xb) >> 0x1d),(uint)*(byte *)piVar9);
              *puVar7 = 0xba001402;
              puVar7[1] = 0x100000;
              puVar7[3] = 0x10000;
              puVar7[2] = 0xba001001;
              puVar7[5] = 0x40000;
              puVar7[4] = 0xba001102;
              puVar7 = puVar7 + 6;
            }
            else {
              puVar7 = proc_7F0CDE18(puVar7,puVar6,uVar13,uVar12,uVar15);
            }
            break;
          case 3:
            puVar7 = proc_7F0CE0AC(puVar7,puVar6,uVar15 >> 0x16 & 3,uVar15 >> 0x14 & 3,
                                   uVar15 >> 0x12 & 3);
            break;
          case 4:
            puVar7 = proc_7F0CE064(puVar7,puVar6,uVar15 >> 0x16 & 3,uVar15 >> 0x14 & 3,
                                   uVar15 >> 0x12 & 3);
          }
          if (imageID == 0x5e4) {
            puVar7 = proc_7F09343C(puVar7,1);
            proc_7F0CC4C8();
          }
          if (imageID == 0x5e7) {
            puVar7 = proc_7F09365C(puVar7,1);
            proc_7F0CC4C8();
          }
          lVar11 = check_if_imageID_is_light(imageID);
          if (lVar11 != 0) {
            bVar4 = true;
            add_entry_to_init_lightfixture_table(puVar7);
          }
        }
      }
    }
    else {
      if (bVar1 == 0xe7) {
        bVar2 = true;
        *puVar6 = *param_1;
        puVar6[1] = param_1[1];
        puVar7 = puVar6 + 2;
        goto LAB_7f0ce738;
      }
      uVar5 = *param_1;
LAB_7f0ce724:
      *puVar6 = uVar5;
      puVar6[1] = param_1[1];
      puVar7 = puVar6 + 2;
    }
LAB_7f0ce738:
    param_1 = param_1 + 2;
    param_2 += -1;
    puVar6 = puVar7;
  } while( true );
}



void proc_7F0CE794(int param_1,int param_2,int param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 *puVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  
  iVar5 = (param_3 >> 3) + -1;
  iVar6 = iVar5 * 8;
  puVar7 = (undefined4 *)(iVar6 + param_1);
  puVar4 = (undefined4 *)(iVar6 + param_2);
  iVar6 = param_3 >> 3;
  while (iVar3 = iVar5, iVar6 != 0) {
    uVar1 = *puVar7;
    uVar2 = puVar7[1];
    puVar7 = puVar7 + -2;
    *puVar4 = uVar1;
    puVar4[1] = uVar2;
    iVar5 = iVar3 + -1;
    puVar4 = puVar4 + -2;
    iVar6 = iVar3;
  }
  return;
}



undefined4 decompressdata(void *ptr_src,void *ptr_target,void *ptr_buffer)

{
  DAT_8008d350 = (int)ptr_src + 2;
  DAT_8008d35c = 0;
  DAT_8008d358 = 0;
  DAT_8008d354 = ptr_target;
  DAT_8008d360 = ptr_buffer;
  loop_to_decompress_entire_file();
  return DAT_8008d35c;
}



int proc_7F0CE894(void)

{
  return DAT_8008d350 + DAT_8008d358;
}



// WARNING: Instruction at (ram,0x7f0cee30) overlaps instruction at (ram,0x7f0cee2c)
// 
// WARNING: Could not reconcile some variable overlaps

ulonglong proc_7F0CE8B0(int *param_1,uint param_2,uint param_3,int param_4,int param_5,uint *param_6
                       ,uint *param_7)

{
  uint *puVar1;
  uint uVar2;
  uint *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int *piVar8;
  uint *puVar9;
  int iVar10;
  uint uVar11;
  uint *puVar12;
  int iVar13;
  uint uVar14;
  undefined4 *puVar15;
  uint uVar16;
  uint uVar17;
  int *piVar18;
  int *piVar19;
  uint *puVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint *puStack1436;
  uint auStack1404 [2];
  int aiStack1396 [16];
  uint auStack1332 [288];
  uint auStack180 [16];
  undefined4 uStack116;
  uint uStack112;
  uint uStack72;
  int aiStack68 [15];
  int aiStack8 [2];
  
  bzero(&uStack72,0x44);
  uVar16 = 1;
  uVar21 = param_2;
  piVar18 = param_1;
  if (-(param_2 & 3) == 0) goto LAB_7f0ce948;
  uVar21 = param_2;
  piVar18 = param_1;
  do {
    iVar5 = *piVar18;
    uVar21 -= 1;
    piVar18 = piVar18 + 1;
    puVar3 = &uStack72 + iVar5;
    *puVar3 = *puVar3 + 1;
  } while (-(param_2 & 3) + param_2 != uVar21);
  while (uVar21 != 0) {
LAB_7f0ce948:
    uVar21 -= 4;
    puVar3 = &uStack72 + *piVar18;
    *puVar3 = *puVar3 + 1;
    puVar3 = &uStack72 + piVar18[1];
    *puVar3 = *puVar3 + 1;
    puVar3 = &uStack72 + piVar18[2];
    *puVar3 = *puVar3 + 1;
    puVar3 = &uStack72 + piVar18[3];
    *puVar3 = *puVar3 + 1;
    piVar18 = piVar18 + 4;
  }
  puVar3 = (uint *)aiStack68;
  if (param_2 == uStack72) {
    *param_6 = 0;
    *param_7 = 0;
    return 0;
  }
  do {
    if (*puVar3 != 0) break;
    uVar16 += 1;
    puVar3 = puVar3 + 1;
  } while (uVar16 != 0x11);
  uVar21 = *param_7;
  if (*param_7 < uVar16) {
    uVar21 = uVar16;
  }
  uVar22 = 0x10;
  piVar18 = aiStack8;
  do {
    if (*piVar18 != 0) break;
    uVar22 -= 1;
    piVar18 = piVar18 + -1;
  } while (uVar22 != 0);
  if (uVar22 < uVar21) {
    uVar21 = uVar22;
  }
  *param_7 = uVar21;
  iVar5 = 1 << (uVar16 & 0x1f);
  if (uVar16 < uVar22) {
    do {
      uVar23 = *puVar3;
      puVar3 = puVar3 + 1;
      iVar5 = (iVar5 - uVar23) * 2;
    } while (puVar3 < &uStack72 + uVar22);
  }
  uVar23 = uVar22 - 1;
  iVar10 = 0;
  iVar5 -= *piVar18;
  *piVar18 = *piVar18 + iVar5;
  piVar19 = aiStack68;
  piVar8 = aiStack1396;
  puVar3 = (uint *)(piVar18 + -1);
  if (uVar23 != 0) {
    if (-(uVar23 & 3) != 0) {
      do {
        puVar3 = puVar3 + -1;
        piVar18 = piVar8 + 1;
        iVar10 += *piVar19;
        *piVar8 = iVar10;
        piVar19 = piVar19 + 1;
        piVar8 = piVar18;
      } while (&uStack72 + -(uVar23 & 3) + uVar23 != puVar3);
      piVar8 = piVar18;
      if (puVar3 == &uStack72) goto LAB_7f0ceb2c;
    }
    do {
      iVar13 = *piVar19;
      puVar3 = puVar3 + -4;
      *piVar8 = iVar10 + iVar13;
      iVar10 = iVar10 + iVar13 + piVar19[1];
      piVar8[1] = iVar10;
      iVar10 += piVar19[2];
      piVar8[2] = iVar10;
      iVar10 += piVar19[3];
      piVar8[3] = iVar10;
      piVar19 = piVar19 + 4;
      piVar8 = piVar8 + 4;
    } while (puVar3 != &uStack72);
  }
LAB_7f0ceb2c:
  uVar23 = 0;
  puVar3 = auStack1332;
  iVar10 = *param_1;
  while( true ) {
    param_1 = param_1 + 1;
    if (iVar10 != 0) {
      uVar24 = auStack1404[iVar10];
      puVar3[uVar24] = uVar23;
      auStack1404[iVar10] = uVar24 + 1;
    }
    uVar23 += 1;
    if (param_2 <= uVar23) break;
    iVar10 = *param_1;
  }
  uVar24 = 0;
  iVar10 = -1;
  uVar23 = -uVar21;
  uVar7 = 0;
  uVar6 = 0;
  if ((int)uVar16 <= (int)uVar22) {
    puStack1436 = &uStack72 + uVar16;
    do {
      iVar13 = iVar10 * 4;
      if (*puStack1436 != 0) {
        puVar12 = auStack1404 + iVar10;
        uVar14 = 1 << (uVar16 + 0x1f & 0x1f);
        puVar20 = puVar3;
        uVar11 = *puStack1436;
        do {
          uVar17 = uVar11 - 1;
          if ((int)(uVar23 + uVar21) < (int)uVar16) {
            uVar2 = uVar23 + uVar21;
            puVar3 = (uint *)((int)auStack180 + iVar13);
            do {
              uVar23 = uVar2;
              iVar10 += 1;
              iVar13 += 4;
              puVar12 = puVar12 + 1;
              uVar7 = uVar22 - uVar23;
              if (uVar21 < uVar22 - uVar23) {
                uVar7 = uVar21;
              }
              uVar2 = uVar16 - uVar23;
              uVar6 = 1 << (uVar2 & 0x1f);
              if (uVar11 < uVar6) {
                iVar4 = (uVar6 - uVar17) + -1;
                puVar9 = &uStack72 + uVar16;
                while (uVar2 += 1, uVar2 < uVar7) {
                  puVar1 = puVar9 + 1;
                  puVar9 = puVar9 + 1;
                  if ((uint)(iVar4 * 2) <= *puVar1) break;
                  iVar4 = iVar4 * 2 - *puVar1;
                }
              }
              uVar6 = 1 << (uVar2 & 0x1f);
              iVar4 = DAT_8008d36c * 8;
              DAT_8008d36c = DAT_8008d36c + uVar6 + 1;
              iVar4 += DAT_8008d360;
              uVar7 = iVar4 + 8;
              *param_6 = uVar7;
              *(undefined4 *)(iVar4 + 4) = 0;
              param_6 = (uint *)(iVar4 + 4);
              puVar3[1] = uVar7;
              if (iVar10 != 0) {
                *puVar12 = uVar24;
                uStack116._1_3_ = CONCAT12((char)uVar21,uStack116._2_2_);
                uStack116 = CONCAT13((char)uVar2 + '\x10',uStack116._1_3_);
                puVar15 = (undefined4 *)(*puVar3 + (uVar24 >> (uVar23 - uVar21 & 0x1f)) * 8);
                *puVar15 = uStack116;
                puVar15[1] = uVar7;
                uStack112 = uVar7;
              }
              uVar2 = uVar23 + uVar21;
              puVar3 = puVar3 + 1;
            } while ((int)(uVar23 + uVar21) < (int)uVar16);
          }
          uStack116._1_3_ = CONCAT12((char)(uVar16 - uVar23),uStack116._2_2_);
          if (puVar20 < auStack1332 + param_2) {
            uVar11 = *puVar20;
            if (uVar11 < param_3) {
              if (uVar11 < 0x100) {
                uStack116 = CONCAT13(0x10,uStack116._1_3_);
              }
              else {
                uStack116 = CONCAT13(0xf,uStack116._1_3_);
              }
              puVar3 = puVar20 + 1;
              uStack112 = uStack112 & 0xffff | *puVar20 << 0x10;
            }
            else {
              puVar3 = puVar20 + 1;
              uStack116 = CONCAT13(*(undefined *)((uVar11 - param_3) + param_5),uStack116._1_3_);
              uStack112 = uStack112 & 0xffff |
                          (uint)*(ushort *)(param_4 + *puVar20 * 2 + param_3 * -2) << 0x10;
            }
          }
          else {
            uStack116 = CONCAT13(99,uStack116._1_3_);
            puVar3 = puVar20;
          }
          uVar11 = uVar24 >> (uVar23 & 0x1f);
          if (uVar11 < uVar6) {
            do {
              puVar15 = (undefined4 *)(uVar7 + uVar11 * 8);
              *puVar15 = uStack116;
              uVar11 += 1 << (uVar16 - uVar23 & 0x1f);
              puVar15[1] = uStack112;
            } while (uVar11 < uVar6);
          }
          uVar2 = uVar24 & uVar14;
          uVar11 = uVar14;
          while (uVar2 != 0) {
            uVar24 ^= uVar11;
            uVar2 = uVar24 & uVar11 >> 1;
            uVar11 = uVar11 >> 1;
          }
          uVar24 ^= uVar11;
          if ((uVar24 & (1 << (uVar23 & 0x1f)) - 1U) != *puVar12) {
            do {
              uVar23 -= uVar21;
              puVar20 = puVar12 + -1;
              iVar10 += -1;
              iVar13 += -4;
              puVar12 = puVar12 + -1;
            } while ((uVar24 & (1 << (uVar23 & 0x1f)) - 1U) != *puVar20);
          }
          puVar20 = puVar3;
          uVar11 = uVar17;
        } while (uVar17 != 0);
      }
      uVar16 += 1;
      puStack1436 = puStack1436 + 1;
    } while ((int)uVar16 <= (int)uVar22);
  }
  return (ulonglong)(iVar5 != 0 && uVar22 != 1);
}



undefined8 proc_7F0CEEF0(int param_1,int param_2,ulonglong param_3,uint param_4)

{
  byte bVar1;
  undefined uVar2;
  uint uVar3;
  bool bVar4;
  undefined *puVar5;
  int iVar6;
  byte *pbVar7;
  uint __n;
  ulonglong uVar8;
  ulonglong uVar9;
  byte *pbVar10;
  undefined *puVar11;
  ulonglong uVar12;
  int iVar13;
  uint uVar14;
  ulonglong uVar15;
  uint uVar16;
  uint uVar17;
  int iVar18;
  
  iVar6 = (int)param_3;
  uVar12 = SEXT48(DAT_8008d368);
  uVar8 = (ulonglong)zlib_masks[iVar6];
  uVar9 = (ulonglong)zlib_masks[param_4];
  iVar18 = DAT_8008d35c;
  uVar16 = DAT_8008d364;
  do {
    bVar4 = uVar12 < param_3;
    while( true ) {
      if (bVar4) {
        do {
          pbVar7 = (byte *)(DAT_8008d350 + DAT_8008d358);
          DAT_8008d358 += 1;
          __n = (uint)uVar12;
          uVar12 = SEXT48((int)(__n + 8));
          uVar16 |= (uint)*pbVar7 << (__n & 0x1f);
        } while (uVar12 < param_3);
      }
      __n = (uint)uVar12;
      pbVar7 = (byte *)((uVar16 & (uint)uVar8) * 8 + param_1);
      uVar15 = (ulonglong)*pbVar7;
      if (*pbVar7 < 0x11) {
        bVar1 = pbVar7[1];
      }
      else {
        bVar1 = pbVar7[1];
        while( true ) {
          iVar13 = (int)uVar15 + -0x10;
          __n = (int)uVar12 - (uint)bVar1;
          uVar16 >>= (uint)bVar1 & 0x1f;
          while (uVar12 = SEXT48((int)__n), uVar12 < (ulonglong)(longlong)iVar13) {
            pbVar10 = (byte *)(DAT_8008d350 + DAT_8008d358);
            DAT_8008d358 += 1;
            uVar14 = __n & 0x1f;
            __n += 8;
            uVar16 |= (uint)*pbVar10 << uVar14;
          }
          pbVar7 = (byte *)(((uint)zlib_masks[iVar13] & uVar16) * 8 + *(int *)(pbVar7 + 4));
          uVar15 = (ulonglong)*pbVar7;
          if (*pbVar7 < 0x11) break;
          bVar1 = pbVar7[1];
        }
        bVar1 = pbVar7[1];
      }
      uVar16 >>= (uint)bVar1 & 0x1f;
      iVar13 = __n - (uint)bVar1;
      uVar12 = SEXT48(iVar13);
      if (uVar15 == 0x10) break;
      if (uVar15 == 0xf) {
        DAT_8008d35c = iVar18;
        DAT_8008d364 = uVar16;
        DAT_8008d368 = iVar13;
        return 0;
      }
      __n = (uint)uVar15;
      while (uVar12 < uVar15) {
        pbVar10 = (byte *)(DAT_8008d350 + DAT_8008d358);
        DAT_8008d358 += 1;
        uVar14 = (uint)uVar12;
        iVar13 = uVar14 + 8;
        uVar12 = SEXT48(iVar13);
        uVar16 |= (uint)*pbVar10 << (uVar14 & 0x1f);
      }
      uVar14 = iVar13 - __n;
      uVar17 = uVar16 >> (__n & 0x1f);
      __n = ((uint)zlib_masks[__n] & uVar16) + (uint)*(ushort *)(pbVar7 + 4);
      while (uVar14 < param_4) {
        pbVar7 = (byte *)(DAT_8008d350 + DAT_8008d358);
        DAT_8008d358 += 1;
        uVar16 = uVar14 & 0x1f;
        uVar14 += 8;
        uVar17 |= (uint)*pbVar7 << uVar16;
      }
      pbVar7 = (byte *)((uVar17 & (uint)uVar9) * 8 + param_2);
      uVar12 = (ulonglong)*pbVar7;
      if (*pbVar7 < 0x11) {
        bVar1 = pbVar7[1];
      }
      else {
        bVar1 = pbVar7[1];
        while( true ) {
          uVar16 = (int)uVar12 - 0x10;
          uVar14 -= (uint)bVar1;
          uVar17 >>= (uint)bVar1 & 0x1f;
          while (uVar14 < uVar16) {
            pbVar10 = (byte *)(DAT_8008d350 + DAT_8008d358);
            DAT_8008d358 += 1;
            uVar3 = uVar14 & 0x1f;
            uVar14 += 8;
            uVar17 |= (uint)*pbVar10 << uVar3;
          }
          pbVar7 = (byte *)(((uint)zlib_masks[uVar16] & uVar17) * 8 + *(int *)(pbVar7 + 4));
          uVar12 = (ulonglong)*pbVar7;
          if (*pbVar7 < 0x11) break;
          bVar1 = pbVar7[1];
        }
        bVar1 = pbVar7[1];
      }
      uVar14 -= (uint)bVar1;
      uVar17 >>= (uint)bVar1 & 0x1f;
      while ((ulonglong)(longlong)(int)uVar14 < uVar12) {
        pbVar10 = (byte *)(DAT_8008d350 + DAT_8008d358);
        DAT_8008d358 += 1;
        uVar16 = uVar14 & 0x1f;
        uVar14 += 8;
        uVar17 |= (uint)*pbVar10 << uVar16;
      }
      uVar16 = (uint)uVar12;
      uVar12 = SEXT48((int)(uVar14 - uVar16));
      iVar13 = (iVar18 - (uint)*(ushort *)(pbVar7 + 4)) - ((uint)zlib_masks[uVar16] & uVar17);
      uVar16 = uVar17 >> (uVar16 & 0x1f);
      do {
        if ((uint)(iVar18 - iVar13) < __n) {
          do {
            puVar5 = (undefined *)(DAT_8008d354 + iVar18);
            if (((undefined *)(DAT_8008d350 + DAT_8008d358) <= puVar5) &&
               (puVar5 + -(int)(undefined *)(DAT_8008d350 + DAT_8008d358) < (undefined *)0x8000)) {
              do {
                    // WARNING: Do nothing block with infinite loop
              } while( true );
            }
            puVar11 = (undefined *)(iVar13 + DAT_8008d354);
            __n -= 1;
            iVar13 += 1;
            iVar18 += 1;
            *puVar5 = *puVar11;
          } while (__n != 0);
        }
        else {
          uVar14 = (iVar18 + __n + DAT_8008d354) - 1;
          if (((uint)(DAT_8008d350 + DAT_8008d358) <= uVar14) &&
             (uVar14 - (DAT_8008d350 + DAT_8008d358) < 0x8000)) {
            do {
                    // WARNING: Do nothing block with infinite loop
            } while( true );
          }
          memcpy((void *)(DAT_8008d354 + iVar18),(void *)(DAT_8008d354 + iVar13),__n);
          uVar8 = SEXT48((int)uVar8);
          uVar9 = SEXT48((int)uVar9);
          param_3 = SEXT48(iVar6);
          iVar13 += __n;
          iVar18 = iVar18 + __n;
        }
        __n = 0;
      } while (false);
      bVar4 = uVar12 < param_3;
    }
    puVar5 = (undefined *)(DAT_8008d354 + iVar18);
    if (puVar5 < (undefined *)(DAT_8008d350 + DAT_8008d358)) {
      uVar2 = (undefined)*(undefined2 *)(pbVar7 + 4);
    }
    else {
      if (puVar5 + -(int)(undefined *)(DAT_8008d350 + DAT_8008d358) < (undefined *)0x8000) {
        do {
                    // WARNING: Do nothing block with infinite loop
        } while( true );
      }
      uVar2 = (undefined)*(undefined2 *)(pbVar7 + 4);
    }
    iVar18 += 1;
    *puVar5 = uVar2;
  } while( true );
}



undefined8 zlib_decompressor_type0(void)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined *puVar5;
  byte *pbVar6;
  
  uVar4 = DAT_8008d368 - (DAT_8008d368 & 7);
  DAT_8008d364 >>= DAT_8008d368 & 7;
  while (uVar4 < 0x10) {
    pbVar6 = (byte *)(DAT_8008d350 + DAT_8008d358);
    DAT_8008d358 += 1;
    uVar3 = uVar4 & 0x1f;
    uVar4 += 8;
    DAT_8008d364 |= (uint)*pbVar6 << uVar3;
  }
  uVar4 -= 0x10;
  uVar2 = DAT_8008d364 & 0xffff;
  uVar3 = 0;
  while (uVar4 < 0x10) {
    pbVar6 = (byte *)(DAT_8008d350 + DAT_8008d358);
    DAT_8008d358 += 1;
    uVar1 = uVar4 & 0x1f;
    uVar4 += 8;
    uVar3 |= (uint)*pbVar6 << uVar1;
  }
  DAT_8008d368 = uVar4 - 0x10;
  DAT_8008d364 = uVar3 >> 0x10;
  while( true ) {
    if (uVar2 == 0) {
      return 0;
    }
    uVar2 -= 1;
    while (DAT_8008d368 < 8) {
      pbVar6 = (byte *)(DAT_8008d350 + DAT_8008d358);
      DAT_8008d358 += 1;
      uVar4 = DAT_8008d368 & 0x1f;
      DAT_8008d368 += 8;
      DAT_8008d364 |= (uint)*pbVar6 << uVar4;
    }
    puVar5 = (undefined *)(DAT_8008d354 + DAT_8008d35c);
    if (((undefined *)(DAT_8008d350 + DAT_8008d358) <= puVar5) &&
       (puVar5 + -(int)(undefined *)(DAT_8008d350 + DAT_8008d358) < (undefined *)0x8000)) break;
    *puVar5 = (char)DAT_8008d364;
    DAT_8008d35c += 1;
    DAT_8008d368 -= 8;
    DAT_8008d364 = DAT_8008d364 >> 8;
  }
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



undefined8 zlib_decompressor_type1(void)

{
  uint *puVar1;
  uint *puVar2;
  undefined4 *puVar3;
  uint uStack1172;
  undefined4 uStack1168;
  undefined4 auStack1164 [28];
  undefined4 auStack1052 [114];
  uint auStack596 [112];
  uint auStack148 [24];
  uint auStack52 [8];
  uint uStack20;
  uint uStack16;
  uint uStack12;
  uint auStack8 [2];
  
  puVar1 = &uStack1172;
  do {
    puVar2 = puVar1 + 4;
    puVar1[1] = 8;
    puVar1[2] = 8;
    puVar1[3] = 8;
    *puVar1 = 8;
    puVar1 = puVar2;
  } while (puVar2 != auStack596);
  if (puVar2 < auStack148) {
    puVar1 = puVar2;
    do {
      puVar2 = puVar1 + 1;
      *puVar1 = 9;
      puVar1 = puVar2;
    } while (puVar2 < auStack148);
  }
  if (puVar2 < auStack52) {
    puVar1 = puVar2;
    do {
      puVar2 = puVar1 + 1;
      *puVar1 = 7;
      puVar1 = puVar2;
    } while (puVar2 < auStack52);
  }
  if (puVar2 < &uStack20) {
    do {
      puVar1 = puVar2 + 1;
      *puVar2 = 8;
      puVar2 = puVar1;
    } while (puVar1 < &uStack20);
  }
  uStack16 = 7;
  proc_7F0CE8B0((int *)&uStack1172,0x120,0x101,(int)zlib_lbase,(int)zlib_lextra,auStack8,&uStack16);
  uStack1168 = 5;
  uStack1172 = 5;
  puVar3 = auStack1164;
  do {
    puVar3 = puVar3 + 4;
    puVar3[1] = 5;
    puVar3[2] = 5;
    puVar3[3] = 5;
    *puVar3 = 5;
    puVar3 = puVar3;
  } while (puVar3 != auStack1052);
  uStack20 = 5;
  proc_7F0CE8B0((int *)&uStack1172,0x1e,0,(int)zlib_dbase,(int)zlib_dextra,&uStack12,&uStack20);
  proc_7F0CEEF0(auStack8[0],uStack12,(longlong)(int)uStack16,uStack20);
  return 0;
}



undefined8 zlib_decompressor_type2(void)

{
  byte bVar1;
  ushort uVar2;
  ushort uVar3;
  bool bVar4;
  uint *puVar5;
  uint uVar6;
  int iVar7;
  u8 *puVar8;
  byte *pbVar9;
  ulonglong uVar10;
  uint uVar11;
  uint uVar12;
  uint local_528 [316];
  uint local_38;
  uint local_34;
  uint local_30;
  uint local_2c;
  u32 local_24;
  uint local_20;
  uint local_1c;
  uint local_18 [6];
  
  local_34 = DAT_8008d368;
  uVar6 = DAT_8008d368;
  uVar11 = DAT_8008d364;
  if (DAT_8008d368 < 5) {
    do {
      pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
      DAT_8008d358 += 1;
      local_34 = uVar6 + 8;
      uVar11 |= (uint)*pbVar9 << (uVar6 & 0x1f);
      uVar6 = local_34;
    } while (local_34 < 5);
  }
  local_34 -= 5;
  local_2c = (uVar11 & 0x1f) + 0x101;
  uVar11 >>= 5;
  while (local_34 < 5) {
    pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
    DAT_8008d358 += 1;
    uVar6 = local_34 & 0x1f;
    local_34 += 8;
    uVar11 |= (uint)*pbVar9 << uVar6;
  }
  local_34 -= 5;
  local_30 = (uVar11 & 0x1f) + 1;
  uVar11 >>= 5;
  while (local_34 < 4) {
    pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
    DAT_8008d358 += 1;
    uVar6 = local_34 & 0x1f;
    local_34 += 8;
    uVar11 |= (uint)*pbVar9 << uVar6;
  }
  local_38 = uVar11 >> 4;
  local_34 -= 4;
  uVar6 = 0;
  if ((uVar11 & 0xf) != 0xfffffffc) {
    puVar8 = zlib_order;
    do {
      uVar6 += 1;
      while (local_34 < 3) {
        pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
        DAT_8008d358 += 1;
        uVar12 = local_34 & 0x1f;
        local_34 += 8;
        local_38 |= (uint)*pbVar9 << uVar12;
      }
      bVar1 = *puVar8;
      uVar12 = local_38 & 7;
      puVar8 = puVar8 + 1;
      local_38 >>= 3;
      local_528[(uint)bVar1] = uVar12;
      local_34 -= 3;
    } while (uVar6 != (uVar11 & 0xf) + 4);
  }
  if (uVar6 < 0x13) {
    pbVar9 = zlib_order + uVar6;
    do {
      bVar1 = *pbVar9;
      pbVar9 = pbVar9 + 1;
      local_528[(uint)bVar1] = 0;
    } while (pbVar9 < zlib_order + 0x13);
  }
  local_20 = 7;
  proc_7F0CE8B0((int *)local_528,0x13,0x13,0,0,local_18,&local_20);
  uVar6 = local_2c + local_30;
  uVar2 = zlib_masks[local_20];
  uVar10 = 0;
  uVar11 = 0;
  DAT_8008d368 = local_34;
  DAT_8008d364 = local_38;
  if (uVar6 != 0) {
    do {
      while (DAT_8008d368 < local_20) {
        pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
        DAT_8008d358 += 1;
        uVar12 = DAT_8008d368 & 0x1f;
        DAT_8008d368 = DAT_8008d368 + 8;
        DAT_8008d364 = DAT_8008d364 | (uint)*pbVar9 << uVar12;
      }
      local_1c = (DAT_8008d364 & (uint)uVar2) * 8 + local_18[0];
      DAT_8008d364 >>= (uint)*(byte *)(local_1c + 1) & 0x1f;
      DAT_8008d368 -= (uint)*(byte *)(local_1c + 1);
      uVar3 = *(ushort *)(local_1c + 4);
      if (uVar3 < 0x10) {
        local_528[uVar11] = (uint)uVar3;
        uVar11 += 1;
        uVar10 = (ulonglong)uVar3;
LAB_7f0cfae8:
        bVar4 = uVar11 < uVar6;
      }
      else {
        if (uVar3 != 0x10) {
          uVar10 = 0;
          if (uVar3 == 0x11) {
            while (DAT_8008d368 < 3) {
              pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
              DAT_8008d358 += 1;
              uVar12 = DAT_8008d368 & 0x1f;
              DAT_8008d368 += 8;
              DAT_8008d364 |= (uint)*pbVar9 << uVar12;
            }
            uVar12 = DAT_8008d364 & 7;
            DAT_8008d364 >>= 3;
            DAT_8008d368 -= 3;
            iVar7 = uVar12 + 2;
            if (uVar12 != 0xfffffffd) {
              puVar5 = local_528 + uVar11;
              do {
                *puVar5 = 0;
                uVar11 += 1;
                puVar5 = puVar5 + 1;
                bVar4 = iVar7 != 0;
                iVar7 += -1;
              } while (bVar4);
              bVar4 = uVar11 < uVar6;
              goto LAB_7f0cfaec;
            }
          }
          else {
            while (DAT_8008d368 < 7) {
              pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
              DAT_8008d358 += 1;
              uVar12 = DAT_8008d368 & 0x1f;
              DAT_8008d368 += 8;
              DAT_8008d364 |= (uint)*pbVar9 << uVar12;
            }
            uVar12 = DAT_8008d364 & 0x7f;
            DAT_8008d364 >>= 7;
            DAT_8008d368 -= 7;
            iVar7 = uVar12 + 10;
            if (uVar12 != 0xfffffff5) {
              puVar5 = local_528 + uVar11;
              do {
                *puVar5 = 0;
                uVar11 += 1;
                puVar5 = puVar5 + 1;
                bVar4 = iVar7 != 0;
                iVar7 += -1;
              } while (bVar4);
            }
          }
          goto LAB_7f0cfae8;
        }
        while (DAT_8008d368 < 2) {
          pbVar9 = (byte *)(DAT_8008d350 + DAT_8008d358);
          DAT_8008d358 += 1;
          uVar12 = DAT_8008d368 & 0x1f;
          DAT_8008d368 += 8;
          DAT_8008d364 |= (uint)*pbVar9 << uVar12;
        }
        uVar12 = DAT_8008d364 & 3;
        DAT_8008d364 >>= 2;
        DAT_8008d368 -= 2;
        iVar7 = uVar12 + 2;
        if (uVar12 == 0xfffffffd) goto LAB_7f0cfae8;
        puVar5 = local_528 + uVar11;
        do {
          *puVar5 = (uint)uVar10;
          uVar11 += 1;
          puVar5 = puVar5 + 1;
          bVar4 = iVar7 != 0;
          iVar7 += -1;
        } while (bVar4);
        bVar4 = uVar11 < uVar6;
      }
LAB_7f0cfaec:
    } while (bVar4);
  }
  local_20 = zlib_data1;
  proc_7F0CE8B0((int *)local_528,local_2c,0x101,(int)zlib_lbase,(int)zlib_lextra,local_18,&local_20)
  ;
  local_24 = zlib_data2;
  proc_7F0CE8B0((int *)(local_528 + local_2c),local_30,0,(int)zlib_dbase,(int)zlib_dextra,&local_1c,
                &local_24);
  proc_7F0CEEF0(local_18[0],local_1c,(longlong)(int)local_20,local_24);
  return 0;
}



undefined8 select_zlib_decompression_routine(uint *param_1)

{
  uint uVar2;
  undefined8 uVar1;
  uint uVar3;
  byte *pbVar4;
  
  if (DAT_8008d368 == 0) {
    do {
      pbVar4 = (byte *)(DAT_8008d350 + DAT_8008d358);
      DAT_8008d358 += 1;
      uVar3 = DAT_8008d368 & 0x1f;
      DAT_8008d368 += 8;
      DAT_8008d364 |= (uint)*pbVar4 << uVar3;
    } while (DAT_8008d368 == 0);
  }
  DAT_8008d368 -= 1;
  uVar3 = DAT_8008d364 >> 1;
  *param_1 = DAT_8008d364 & 1;
  while (DAT_8008d368 < 2) {
    pbVar4 = (byte *)(DAT_8008d350 + DAT_8008d358);
    DAT_8008d358 += 1;
    uVar2 = DAT_8008d368 & 0x1f;
    DAT_8008d368 += 8;
    uVar3 |= (uint)*pbVar4 << uVar2;
  }
  uVar2 = uVar3 & 3;
  DAT_8008d364 = uVar3 >> 2;
  DAT_8008d368 -= 2;
  if (uVar2 == 2) {
    uVar1 = zlib_decompressor_type2();
  }
  else {
    if (uVar2 == 0) {
      uVar1 = zlib_decompressor_type0();
    }
    else {
      if (uVar2 == 1) {
        uVar1 = zlib_decompressor_type1();
      }
      else {
        uVar1 = 2;
      }
    }
  }
  return uVar1;
}



longlong loop_to_decompress_entire_file(void)

{
  longlong lVar1;
  uint uVar2;
  uint uStack4;
  
  DAT_8008d35c = 0;
  DAT_8008d368 = 0;
  DAT_8008d364 = 0;
  uVar2 = 0;
  do {
    DAT_8008d36c = 0;
    lVar1 = select_zlib_decompression_routine(&uStack4);
    if (lVar1 != 0) {
      return lVar1;
    }
    if (uVar2 < DAT_8008d36c) {
      uVar2 = DAT_8008d36c;
    }
  } while (uStack4 == 0);
  while (7 < DAT_8008d368) {
    DAT_8008d368 -= 8;
    DAT_8008d358 += -1;
  }
  return 0;
}



void something_with_rsp_c_debug(void)

{
  get_ptr_debug_notice_list_entry(&rsp_c_debug_notice_list_entry,aRsp_c_debug);
  return;
}



void allocate_init_rsp_buffers(void)

{
  ptr_rsp_buffer_start = (undefined *)allocate_bytes_in_bank(0xa000,6);
  ptr_rspbuffer_end = ptr_rsp_buffer_start + 0xa000;
  return;
}



void load_rsp_microcode(int param_1,int param_2,undefined8 param_3,undefined4 param_4)

{
  undefined *puVar1;
  undefined *msg;
  
  msg = fast3d_related_array;
  *(undefined4 *)(fast3d_related_array + 0x18) = 0x80020d90;
  *(undefined4 *)(msg + 0x1c) = 0xd0;
  *(undefined4 *)(msg + 0x20) = 0x80020e60;
  *(undefined4 *)(msg + 0x28) = 0x8005c820;
  *(undefined **)(msg + 0x38) = ptr_rsp_buffer_start;
  puVar1 = ptr_rspbuffer_end;
  *(int *)(msg + 0x40) = param_1;
  *(int *)(msg + 0x44) = (param_2 - param_1 >> 3) << 3;
  *(undefined4 *)(msg + 0x48) = 0x8008d770;
  *(undefined4 *)(msg + 0x4c) = 0xba0;
  *(undefined **)(msg + 0x3c) = puVar1;
  *(undefined4 *)msg = 0;
  *(undefined4 *)(msg + 8) = 99;
  *(undefined4 *)(msg + 0x50) = 0x8005d9a0;
  *(undefined4 *)(msg + 0x54) = param_4;
  *(undefined4 *)(msg + 0xc) = *(undefined4 *)(fast3d_related_array + 0x58);
  osWritebackDCacheAll();
  osSendMesg(sched_cmdQ,msg,1);
  fast3d_related_array = (undefined *)((uint)fast3d_related_array ^ 0x3a0);
  return;
}



void init_indy_if_not_ready(void)

{
  if (indy_ready != TRUE) {
    indy_ready = TRUE;
    init_indy_if_ready();
  }
  return;
}



void dummy7F0CFF64(void)

{
  return;
}



void init_indy_if_ready(void)

{
  if (indy_ready != FALSE) {
    post_indy__res_cmd_initialize();
  }
  return;
}



void indy_load_resource(char *string,undefined *target)

{
  int iStack16;
  undefined4 uStack12;
  undefined4 auStack8 [2];
  
  if (indy_ready != FALSE) {
    proc_7F0D0BA4(string,0x400000);
    proc_7F0D17FC(auStack8,&uStack12,&iStack16,target);
  }
  return;
}



void indy_send_capture_data(char *string,undefined *data,uint size)

{
  undefined4 uStack4;
  
  if (indy_ready != FALSE) {
    post_indy__res_cmd_send_capture_data(string,size,data);
    proc_7F0D1864(&uStack4);
  }
  return;
}



void indy_load_ramrom_file(char *string,undefined4 target,undefined4 size)

{
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  if (indy_ready != FALSE) {
    post_indy__res_cmd_request_ramrom_file(string,target,size);
    proc_7F0D18AC(&uStack4,&uStack8,&uStack12);
  }
  return;
}



void check_file_exported(char *string,undefined4 address,undefined4 size)

{
  undefined4 uStack4;
  
  if (indy_ready != FALSE) {
    proc_7F0D0DD0(string,size,address);
    proc_7F0D1908(&uStack4);
  }
  return;
}



undefined4 check_file_found_on_indy(char *string,undefined4 *filesize)

{
  undefined4 local_4;
  
  if (indy_ready == FALSE) {
    local_4 = 0;
  }
  else {
    proc_7F0D0B0C(string);
    proc_7F0D17AC(&local_4,filesize);
  }
  return local_4;
}



undefined4 send_command_string(char *param_1)

{
  undefined4 local_4;
  
  if (indy_ready == FALSE) {
    local_4 = 0;
  }
  else {
    proc_7F0D0E74(param_1);
    proc_7F0D1950(&local_4);
  }
  return local_4;
}



void proc_7F0D0124(void)

{
  if (indy_ready != FALSE) {
    rmon_debug_returns_neg_1();
  }
  return;
}



undefined4 send_indy_close_port_cmd(void)

{
  undefined4 uVar1;
  
  uVar1 = send_command_string(aSleep5EtcKillallGhostGload);
  return uVar1;
}



void proc_7F0D0180(void)

{
  int iVar1;
  
  iVar1 = 4;
  while (iVar1 != 100000) {
    iVar1 += 4;
  }
  removed_7000cec0();
  iVar1 = 4;
  while (iVar1 != 100000) {
    iVar1 += 4;
  }
  return;
}



void proc_7F0D01D0(void)

{
  int iVar1;
  
  iVar1 = 4;
  while (iVar1 != 100000) {
    iVar1 += 4;
  }
  removed_7000ceb8();
  iVar1 = 4;
  while (iVar1 != 100000) {
    iVar1 += 4;
  }
  return;
}



// WARNING: Instruction at (ram,0x7f0d02cc) overlaps instruction at (ram,0x7f0d02c8)
// 

undefined8 proc_7F0D0220(undefined *param_1,uint param_2)

{
  undefined uVar1;
  undefined *puVar2;
  uint uVar3;
  uint uVar4;
  undefined *puVar5;
  undefined auStack1280 [4];
  undefined auStack1276 [1276];
  
  puVar5 = auStack1280;
  if (((uint)param_1 & 7) != 0) {
    if (0x500 < param_2) {
      return 0;
    }
    if (false) {
      puVar5 = auStack1276;
    }
    puVar2 = puVar5;
    while (puVar2 < puVar5 + param_2) {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    }
    if (((dword_8004EAC4 & 0x20) != 0) && (param_2 != 0)) {
      if ((param_2 & 3) == 0) {
        uVar4 = 4;
      }
      else {
        uVar3 = 1;
        while ((param_2 & 3) != uVar3) {
          uVar3 += 1;
        }
        uVar4 = uVar3 + 4;
        if (uVar3 == param_2) goto LAB_7f0d02d8;
      }
      while (uVar4 != param_2) {
        uVar4 += 4;
      }
    }
LAB_7f0d02d8:
    proc_7F0D01D0();
    return 1;
  }
  if (((dword_8004EAC4 & 0x20) != 0) && (param_2 != 0)) {
    if ((param_2 & 3) == 0) {
      uVar4 = 4;
    }
    else {
      uVar3 = 1;
      while ((param_2 & 3) != uVar3) {
        uVar3 += 1;
      }
      uVar4 = uVar3 + 4;
      if (uVar3 == param_2) goto LAB_7f0d0338;
    }
    while (uVar4 != param_2) {
      uVar4 += 4;
    }
  }
LAB_7f0d0338:
  proc_7F0D01D0();
  return 1;
}



undefined8 proc_7F0D0358(undefined *param_1,uint param_2,undefined *param_3,uint param_4)

{
  proc_7F0D0220(param_1,param_2);
  proc_7F0D0220(param_3,param_4);
  return 1;
}



void proc_7F0D038C(undefined4 param_1,undefined4 param_2)

{
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack20 = 0x9abf1623;
  uStack16 = 1;
  uStack12 = 0x14;
  uStack8 = param_1;
  uStack4 = param_2;
  proc_7F0D0220((undefined *)&uStack20,0x14);
  return;
}



void proc_7F0D03D4(undefined4 param_1,undefined4 param_2)

{
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack20 = 0x9abf1623;
  uStack16 = 2;
  uStack12 = 0x14;
  uStack8 = param_1;
  uStack4 = param_2;
  proc_7F0D0220((undefined *)&uStack20,0x14);
  return;
}



void proc_7F0D041C(undefined4 param_1,undefined4 param_2)

{
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack20 = 0x9abf1623;
  uStack16 = 0;
  uStack12 = 0x14;
  uStack8 = param_1;
  uStack4 = param_2;
  proc_7F0D0220((undefined *)&uStack20,0x14);
  return;
}



void proc_7F0D0460(undefined4 param_1,undefined4 param_2,char *param_3)

{
  undefined4 uStack276;
  undefined4 uStack272;
  undefined4 uStack268;
  undefined4 uStack264;
  undefined4 uStack260;
  char acStack256 [255];
  undefined uStack1;
  
  uStack276 = 0x9abf1623;
  uStack272 = 3;
  uStack268 = 0x114;
  uStack264 = param_1;
  uStack260 = param_2;
  something_with_strings(acStack256,param_3,0x100);
  uStack1 = 0;
  proc_7F0D0220((undefined *)&uStack276,0x114);
  return;
}



void proc_7F0D04C4(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack24 = 0x9abf1623;
  uStack20 = 4;
  uStack16 = 0x18;
  uStack12 = param_1;
  uStack8 = param_2;
  uStack4 = param_3;
  proc_7F0D0220((undefined *)&uStack24,0x18);
  return;
}



void proc_7F0D0514(undefined4 param_1,undefined4 param_2,char *param_3)

{
  undefined4 uStack276;
  undefined4 uStack272;
  undefined4 uStack268;
  undefined4 uStack264;
  undefined4 uStack260;
  char acStack256 [255];
  undefined uStack1;
  
  uStack276 = 0x9abf1623;
  uStack272 = 5;
  uStack268 = 0x114;
  uStack264 = param_1;
  uStack260 = param_2;
  something_with_strings(acStack256,param_3,0x100);
  uStack1 = 0;
  proc_7F0D0220((undefined *)&uStack276,0x114);
  return;
}



void proc_7F0D0578(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack28 = 0x9abf1623;
  uStack24 = 6;
  uStack20 = 0x1c;
  uStack16 = param_1;
  uStack12 = param_2;
  uStack8 = param_3;
  uStack4 = param_4;
  proc_7F0D0220((undefined *)&uStack28,0x1c);
  return;
}



void proc_7F0D05D0(undefined4 param_1,undefined4 param_2,char *param_3,undefined4 param_4)

{
  undefined4 uStack280;
  undefined4 uStack276;
  undefined4 uStack272;
  undefined4 uStack268;
  undefined4 uStack264;
  char acStack260 [255];
  undefined uStack5;
  undefined4 uStack4;
  
  uStack280 = 0x9abf1623;
  uStack276 = 7;
  uStack272 = 0x118;
  uStack268 = param_1;
  uStack264 = param_2;
  something_with_strings(acStack260,param_3,0x100);
  uStack5 = 0;
  uStack4 = param_4;
  proc_7F0D0220((undefined *)&uStack280,0x118);
  return;
}



void proc_7F0D0644(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  uint param_5,undefined *param_6)

{
  undefined4 uStack32;
  undefined4 uStack28;
  int iStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  uint uStack4;
  
  iStack24 = (param_5 + 3 & 0xfffffffc) + 0x20;
  uStack32 = 0x9abf1623;
  uStack28 = 8;
  uStack4 = param_5;
  uStack20 = param_1;
  uStack16 = param_2;
  uStack12 = param_3;
  uStack8 = param_4;
  proc_7F0D0358((undefined *)&uStack32,0x20,param_6,param_5);
  return;
}



void proc_7F0D06C0(undefined4 param_1,undefined4 param_2,char *param_3,uint param_4,
                  undefined *param_5)

{
  undefined4 uStack276;
  undefined4 uStack272;
  int iStack268;
  undefined4 uStack264;
  undefined4 uStack260;
  char acStack256 [255];
  undefined uStack1;
  
  iStack268 = (param_4 + 3 & 0xfffffffc) + 0x114;
  uStack276 = 0x9abf1623;
  uStack272 = 9;
  uStack264 = param_1;
  uStack260 = param_2;
  something_with_strings(acStack256,param_3,0x100);
  uStack1 = 0;
  proc_7F0D0358((undefined *)&uStack276,0x114,param_5,param_4);
  return;
}



void proc_7F0D0740(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack24 = 0x9abf1623;
  uStack20 = 10;
  uStack16 = 0x18;
  uStack12 = param_1;
  uStack8 = param_2;
  uStack4 = param_3;
  proc_7F0D0220((undefined *)&uStack24,0x18);
  return;
}



void proc_7F0D0790(undefined4 param_1,undefined4 param_2,char *param_3,undefined4 param_4,
                  undefined4 param_5)

{
  undefined4 uStack284;
  undefined4 uStack280;
  undefined4 uStack276;
  undefined4 uStack272;
  undefined4 uStack268;
  char acStack264 [255];
  undefined uStack9;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack284 = 0x9abf1623;
  uStack280 = 0xf;
  uStack276 = 0x11c;
  uStack272 = param_1;
  uStack268 = param_2;
  something_with_strings(acStack264,param_3,0x100);
  uStack9 = 0;
  uStack4 = param_5;
  uStack8 = param_4;
  proc_7F0D0220((undefined *)&uStack284,0x11c);
  return;
}



void proc_7F0D080C(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5)

{
  undefined4 uStack32;
  undefined4 uStack28;
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack32 = 0x9abf1623;
  uStack28 = 0x10;
  uStack24 = 0x20;
  uStack4 = param_5;
  uStack20 = param_1;
  uStack16 = param_2;
  uStack12 = param_3;
  uStack8 = param_4;
  proc_7F0D0220((undefined *)&uStack32,0x20);
  return;
}



void proc_7F0D086C(undefined4 param_1,undefined4 param_2,char *param_3,undefined4 param_4,
                  undefined4 param_5)

{
  undefined4 uStack284;
  undefined4 uStack280;
  undefined4 uStack276;
  undefined4 uStack272;
  undefined4 uStack268;
  char acStack264 [255];
  undefined uStack9;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack284 = 0x9abf1623;
  uStack280 = 0xd;
  uStack276 = 0x11c;
  uStack272 = param_1;
  uStack268 = param_2;
  something_with_strings(acStack264,param_3,0x100);
  uStack9 = 0;
  uStack4 = param_5;
  uStack8 = param_4;
  proc_7F0D0220((undefined *)&uStack284,0x11c);
  return;
}



void proc_7F0D08E8(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack24 = 0x9abf1623;
  uStack20 = 0xe;
  uStack16 = 0x18;
  uStack12 = param_1;
  uStack8 = param_2;
  uStack4 = param_3;
  proc_7F0D0220((undefined *)&uStack24,0x18);
  return;
}



void proc_7F0D0938(undefined4 param_1,undefined4 param_2,char *param_3)

{
  undefined4 uStack1044;
  undefined4 uStack1040;
  undefined4 uStack1036;
  undefined4 uStack1032;
  undefined4 uStack1028;
  char acStack1024 [1023];
  undefined uStack1;
  
  uStack1044 = 0x9abf1623;
  uStack1040 = 0xb;
  uStack1036 = 0x414;
  uStack1032 = param_1;
  uStack1028 = param_2;
  something_with_strings(acStack1024,param_3,0x400);
  uStack1 = 0;
  proc_7F0D0220((undefined *)&uStack1044,0x414);
  return;
}



void proc_7F0D099C(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack24 = 0x9abf1623;
  uStack20 = 0xc;
  uStack16 = 0x18;
  uStack12 = param_1;
  uStack8 = param_2;
  uStack4 = param_3;
  proc_7F0D0220((undefined *)&uStack24,0x18);
  return;
}



void proc_7F0D09EC(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uStack24;
  undefined4 uStack20;
  undefined4 uStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  uStack24 = 0x9abf1623;
  uStack20 = 10;
  uStack16 = 0x18;
  uStack12 = param_1;
  uStack8 = param_2;
  uStack4 = param_3;
  proc_7F0D0220((undefined *)&uStack24,0x18);
  return;
}



undefined8 post_indy__res_cmd_initialize(void)

{
  proc_7F0D038C(0x14,0x14);
  proc_7F0D041C(0x14,0x14);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0A7C(char *param_1)

{
  proc_7F0D038C(0x114,0x114);
  proc_7F0D0460(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0AC4(undefined4 param_1)

{
  proc_7F0D038C(0x18,0x18);
  proc_7F0D04C4(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0B0C(char *param_1)

{
  proc_7F0D038C(0x114,0x114);
  proc_7F0D0514(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0B54(undefined4 param_1,undefined4 param_2)

{
  proc_7F0D038C(0x1c,0x1c);
  proc_7F0D0578(0x14,0x14,param_1,param_2);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0BA4(char *param_1,undefined4 param_2)

{
  proc_7F0D038C(0x118,0x118);
  proc_7F0D05D0(0x14,0x14,param_1,param_2);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0BF4(undefined4 param_1,undefined4 param_2,uint param_3,undefined *param_4)

{
  proc_7F0D038C((param_3 + 3 & 0xfffffffc) + 0x20,0x20);
  proc_7F0D0644(0x14,0x14,param_1,param_2,param_3,param_4);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 post_indy__res_cmd_send_capture_data(char *string,uint size,undefined *data)

{
  proc_7F0D038C((size + 3 & 0xfffffffc) + 0x114,0x114);
  proc_7F0D06C0(0x14,0x14,string,size,data);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0CD0(undefined4 param_1)

{
  proc_7F0D038C(0x18,0x18);
  proc_7F0D0740(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8
post_indy__res_cmd_request_ramrom_file(char *param_1,undefined4 param_2,undefined4 param_3)

{
  proc_7F0D038C(0x11c,0x11c);
  proc_7F0D0790(0x14,0x14,param_1,param_3,param_2);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0D74(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  proc_7F0D038C(0x20,0x20);
  proc_7F0D080C(0x14,0x14,param_1,param_2,param_3);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0DD0(char *param_1,undefined4 param_2,undefined4 param_3)

{
  proc_7F0D038C(0x11c,0x11c);
  proc_7F0D086C(0x14,0x14,param_1,param_3,param_2);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0E2C(undefined4 param_1)

{
  proc_7F0D038C(0x18,0x18);
  proc_7F0D08E8(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0E74(char *param_1)

{
  proc_7F0D038C(0x414,0x414);
  proc_7F0D0938(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0EBC(undefined4 param_1)

{
  proc_7F0D038C(0x18,0x18);
  proc_7F0D099C(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



undefined8 proc_7F0D0F04(undefined4 param_1)

{
  proc_7F0D038C(0x18,0x18);
  proc_7F0D09EC(0x14,0x14,param_1);
  proc_7F0D03D4(0,0);
  return 1;
}



// WARNING: Instruction at (ram,0x7f0d101c) overlaps instruction at (ram,0x7f0d1018)
// 

undefined8 proc_7F0D0F4C(undefined *param_1,uint param_2)

{
  undefined uVar1;
  uint uVar2;
  uint uVar3;
  undefined *puVar4;
  undefined *puVar5;
  undefined auStack1024 [4];
  undefined auStack1020 [1020];
  
  puVar4 = auStack1024;
  if (((uint)param_1 & 7) == 0) {
    proc_7F0D0180();
    if ((dword_8004EAC4 & 0x10) == 0) {
      return 1;
    }
    if (param_2 != 0) {
      if ((param_2 & 3) == 0) {
        uVar3 = 4;
      }
      else {
        uVar2 = 1;
        while ((param_2 & 3) != uVar2) {
          uVar2 += 1;
        }
        uVar3 = uVar2 + 4;
        if (uVar2 == param_2) {
          return 1;
        }
      }
      while (uVar3 != param_2) {
        uVar3 += 4;
      }
    }
    return 1;
  }
  if (0x400 < param_2) {
    return 0;
  }
  if (false) {
    puVar4 = auStack1020;
  }
  proc_7F0D0180();
  puVar5 = puVar4 + param_2;
  while (puVar4 < puVar5) {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    *param_1 = uVar1;
    param_1 = param_1 + 1;
  }
  if (((dword_8004EAC4 & 0x10) != 0) && (param_2 != 0)) {
    if ((param_2 & 3) == 0) {
      uVar3 = 4;
    }
    else {
      uVar2 = 1;
      while ((param_2 & 3) != uVar2) {
        uVar2 += 1;
      }
      uVar3 = uVar2 + 4;
      if (uVar2 == param_2) {
        return 1;
      }
    }
    while (uVar3 != param_2) {
      uVar3 += 4;
    }
  }
  return 1;
}



undefined8 proc_7F0D10A8(void)

{
  proc_7F0D0180();
  proc_7F0D0180();
  return 1;
}



undefined8 proc_7F0D1100(int param_1,int param_2)

{
  undefined8 uVar1;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  proc_7F0D0F4C((undefined *)&iStack20,0x14);
  if (iStack20 == -0x6540e9dd) {
    if (iStack16 == 1) {
      if (iStack12 == 0x14) {
        if ((param_1 == 0) || (iStack8 == param_1)) {
          uVar1 = 1;
          if (iStack4 != param_2) {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D11AC(int param_1,int param_2)

{
  undefined8 uVar1;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  int iStack4;
  
  proc_7F0D0F4C((undefined *)&iStack20,0x14);
  if (iStack20 == -0x6540e9dd) {
    if (iStack16 == 2) {
      if (iStack12 == 0x14) {
        if (iStack8 == param_1) {
          uVar1 = 1;
          if (iStack4 != param_2) {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D1248(int param_1,int param_2,undefined4 *param_3)

{
  undefined8 uVar1;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack24,0x18);
  if (iStack24 == -0x6540e9dd) {
    if (iStack20 == 4) {
      if (iStack16 == 0x18) {
        if (iStack12 == param_1) {
          if (iStack8 == param_2) {
            uVar1 = 1;
            *param_3 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D12F4(int param_1,int param_2,undefined4 *param_3,undefined4 *param_4)

{
  undefined8 uVar1;
  int iStack28;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack28,0x1c);
  if (iStack28 == -0x6540e9dd) {
    if (iStack24 == 6) {
      if (iStack20 == 0x1c) {
        if (iStack16 == param_1) {
          if (iStack12 == param_2) {
            uVar1 = 1;
            *param_3 = uStack8;
            *param_4 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8
proc_7F0D13B0(int param_1,int param_2,undefined4 *param_3,undefined4 *param_4,int *param_5,
             undefined *param_6)

{
  undefined8 uVar1;
  int iStack32;
  int iStack28;
  int iStack24;
  int iStack20;
  int iStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  int iStack4;
  
  proc_7F0D0F4C((undefined *)&iStack32,0x20);
  if (iStack32 == -0x6540e9dd) {
    if (iStack28 == 8) {
      if (iStack24 == (iStack4 + 3U & 0xfffffffc) + 0x20) {
        if (iStack20 == param_1) {
          if (iStack16 == param_2) {
            *param_3 = uStack12;
            *param_4 = uStack8;
            *param_5 = iStack4;
            proc_7F0D0F4C(param_6,iStack4 + 3U & 0xfffffffc);
            uVar1 = 1;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D1498(int param_1,int param_2,undefined4 *param_3)

{
  undefined8 uVar1;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack24,0x18);
  if (iStack24 == -0x6540e9dd) {
    if (iStack20 == 10) {
      if (iStack16 == 0x18) {
        if (iStack12 == param_1) {
          if (iStack8 == param_2) {
            uVar1 = 1;
            *param_3 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8
proc_7F0D1544(int param_1,int param_2,undefined4 *param_3,undefined4 *param_4,undefined4 *param_5)

{
  undefined8 uVar1;
  int iStack32;
  int iStack28;
  int iStack24;
  int iStack20;
  int iStack16;
  undefined4 uStack12;
  undefined4 uStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack32,0x20);
  if (iStack32 == -0x6540e9dd) {
    if (iStack28 == 0x10) {
      if (iStack24 == 0x20) {
        if (iStack20 == param_1) {
          if (iStack16 == param_2) {
            uVar1 = 1;
            *param_3 = uStack12;
            *param_4 = uStack8;
            *param_5 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D160C(int param_1,int param_2,undefined4 *param_3)

{
  undefined8 uVar1;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack24,0x18);
  if (iStack24 == -0x6540e9dd) {
    if (iStack20 == 0xe) {
      if (iStack16 == 0x18) {
        if (iStack12 == param_1) {
          if (iStack8 == param_2) {
            uVar1 = 1;
            *param_3 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D16B8(int param_1,int param_2,undefined4 *param_3)

{
  undefined8 uVar1;
  int iStack24;
  int iStack20;
  int iStack16;
  int iStack12;
  int iStack8;
  undefined4 uStack4;
  
  proc_7F0D0F4C((undefined *)&iStack24,0x18);
  if (iStack24 == -0x6540e9dd) {
    if (iStack20 == 0xc) {
      if (iStack16 == 0x18) {
        if (iStack12 == param_1) {
          if (iStack8 == param_2) {
            uVar1 = 1;
            *param_3 = uStack4;
          }
          else {
            uVar1 = 0;
          }
        }
        else {
          uVar1 = 0;
        }
      }
      else {
        uVar1 = 0;
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



undefined8 proc_7F0D1764(undefined4 *param_1)

{
  proc_7F0D1100(0x18,0x18);
  proc_7F0D1248(0x14,0x14,param_1);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D17AC(undefined4 *param_1,undefined4 *param_2)

{
  proc_7F0D1100(0x1c,0x1c);
  proc_7F0D12F4(0x14,0x14,param_1,param_2);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D17FC(undefined4 *param_1,undefined4 *param_2,int *param_3,undefined *param_4)

{
  proc_7F0D1100(0,0x20);
  proc_7F0D13B0(0x14,0x14,param_1,param_2,param_3,param_4);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D1864(undefined4 *param_1)

{
  proc_7F0D1100(0x18,0x18);
  proc_7F0D1498(0x14,0x14,param_1);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D18AC(undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  proc_7F0D1100(0x20,0x20);
  proc_7F0D1544(0x14,0x14,param_1,param_2,param_3);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D1908(undefined4 *param_1)

{
  proc_7F0D1100(0x18,0x18);
  proc_7F0D160C(0x14,0x14,param_1);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D1950(undefined4 *param_1)

{
  proc_7F0D1100(0x18,0x18);
  proc_7F0D16B8(0x14,0x14,param_1);
  proc_7F0D11AC(0,0);
  return 1;
}



undefined8 proc_7F0D1998(int param_1,int param_2)

{
  undefined8 uVar1;
  int aiStack20 [3];
  int iStack8;
  int iStack4;
  
  proc_7F0D0F4C((undefined *)aiStack20,0x14);
  if (aiStack20[0] == -0x6540e9dd) {
    if ((param_1 == 0) || (iStack8 == param_1)) {
      if (param_2 == 0) {
        uVar1 = 1;
      }
      else {
        if (iStack4 == param_2) {
          uVar1 = 1;
        }
        else {
          uVar1 = 0;
        }
      }
    }
    else {
      uVar1 = 0;
    }
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



void something_game_c_debug_related(void)

{
  get_ptr_debug_notice_list_entry(&game_c_debug_notice_list_entry,aGame_c_debug);
  return;
}



void reset_mem_bank_5(void)

{
  proc_7F0BD234();
  resetMemBank(5);
  something_mem_bank_a0('\x05');
  return;
}



void proc_7F0D1A7C(void)

{
  set_bank_nextentry_to_NULL(5);
  something_mem_bank_a0('\x05');
  return;
}



char * get_compile_time(void)

{
  return build_date;
}



undefined4 * proc_7F0D1AC0(undefined4 *param_1)

{
  flt_8004EAF4 = 0.00000000;
  flt_8004EAF0 = 0.00000000;
  *param_1 = 0xba000c02;
  param_1[1] = 0;
  param_1[3] = 0xc0;
  param_1[2] = 0xba000602;
  param_1[5] = 1;
  param_1[4] = 0xb6000000;
  param_1[6] = 0xe7000000;
  param_1[7] = 0;
  param_1[8] = 0xba001301;
  param_1[9] = 0;
  param_1[0xb] = 0x300000;
  param_1[10] = 0xba001402;
  param_1[0xd] = 0xf0a4000;
  param_1[0xc] = 0xb900031d;
  param_1[0xf] = 0x800000;
  param_1[0xe] = 0xba001701;
  return param_1 + 0x10;
}



void proc_7F0D1B94(uint *param_1,float param_2,uint param_3,uint param_4,int param_5)

{
  int in_stack_00000010;
  
  proc_7F0D1BD0(param_1,(float)param_3,param_3,param_4,param_5,in_stack_00000010,2);
  return;
}



uint * proc_7F0D1BD0(uint *param_1,float param_2,uint param_3,uint param_4,int param_5,int param_6,
                    int param_7)

{
  int iVar1;
  float fVar2;
  uint *puVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  float fVar8;
  float fVar9;
  int iVar10;
  int iVar11;
  int in_stack_00000018;
  
  fVar2 = flt_8004EAF4;
  if (0.00000000 < (float)param_3) {
    fVar9 = flt_8004EAF4 / 10.00000000;
    *param_1 = 0xf7000000;
    fVar8 = fVar2 + (float)param_3;
    puVar3 = param_1 + 2;
    uVar6 = (param_4 & 0xf8) << 8 | (param_5 & 0xf8U) << 3 | param_6 >> 2 & 0x3eU | 1;
    param_1[1] = uVar6 << 0x10 | uVar6;
    iVar10 = (int)fVar9;
    iVar11 = (int)(fVar8 / 10.00000000);
    if ((iVar10 <= iVar11) && (iVar10 < 3)) {
      iVar5 = iVar10 * 0xdb;
      uVar6 = (int)((fVar2 * 219.00000000) / 10.00000000) + iVar10 * -0xdb + 0x32;
      iVar1 = iVar10 * -0xdb;
      while( true ) {
        uVar7 = (int)((fVar8 * 219.00000000) / 10.00000000) + iVar1 + 0x32;
        uVar4 = uVar6;
        if ((int)uVar6 < 0x32) {
          uVar4 = 0x32;
        }
        iVar5 += 0xdb;
        if (0x10d < (int)uVar7) {
          uVar7 = 0x10d;
        }
        if ((int)uVar4 <= (int)uVar7) {
          *puVar3 = (uVar7 & 0x3ff) << 0xe | 0xf6000000 |
                    (param_7 + in_stack_00000018 + iVar10 * 7 + 0x11U & 0x3ff) << 2;
          puVar3[1] = (uVar4 & 0x3ff) << 0xe | (in_stack_00000018 + iVar10 * 7 + 0x12U & 0x3ff) << 2
          ;
          puVar3 = puVar3 + 2;
        }
        iVar10 += 1;
        uVar6 -= 0xdb;
        if ((iVar11 < iVar10) || (2 < iVar10)) break;
        iVar1 = -iVar5;
      }
    }
    flt_8004EAF4 = flt_8004EAF4 + (float)param_3;
    param_1 = puVar3;
  }
  return param_1;
}



void proc_7F0D1DCC(float param_1)

{
  if (0.00000000 < param_1) {
    flt_8004EAF4 = flt_8004EAF4 + param_1;
  }
  return;
}



void proc_7F0D1DFC(uint *param_1,float param_2,uint param_3,uint param_4,int param_5)

{
  proc_7F0D1B94(param_1,(float)param_3,(uint)((flt_8004EAF0 + (float)param_3) - flt_8004EAF4),
                param_4,param_5);
  return;
}



void proc_7F0D1E44(uint *param_1,float param_2,uint param_3,uint param_4,int param_5,int param_6,
                  int param_7)

{
  proc_7F0D1BD0(param_1,(float)param_3,(uint)((flt_8004EAF0 + (float)param_3) - flt_8004EAF4),
                param_4,param_5,param_6,param_7);
  return;
}



uint * proc_7F0D1E98(undefined4 *param_1,undefined8 param_2,undefined8 param_3,int param_4)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  uint *puVar8;
  uint uVar9;
  uint uVar10;
  float fVar11;
  float fVar12;
  
  fVar11 = flt_8004EAF4 / 10.00000000;
  *param_1 = 0xf7000000;
  uVar1 = ((uint)param_2 & 0xf8) << 8 | ((uint)param_3 & 0xf8) << 3 | param_4 >> 2 & 0x3eU | 1;
  param_1[1] = uVar1 << 0x10 | uVar1;
  puVar8 = param_1 + 2;
  if (-1 < (int)fVar11) {
    uVar2 = 0x15;
    uVar1 = 0x12;
    do {
      uVar6 = (uVar1 & 0x3ff) << 2;
      uVar9 = (uVar2 & 0x3ff) << 2;
      puVar8[1] = uVar6 | 0xc8000;
      *puVar8 = uVar9 | 0xf60c8000;
      puVar8[3] = uVar6 | 0x11c000;
      puVar8[2] = uVar9 | 0xf611c000;
      puVar8[4] = uVar9 | 0xf6174000;
      puVar8[5] = uVar6 | 0x174000;
      puVar3 = puVar8 + 6;
      iVar5 = 3;
      uVar10 = 0xf61cc000;
      uVar7 = uVar6 | 0x1cc000;
      fVar12 = 876.00000000;
      iVar4 = iVar5;
      puVar8 = puVar3;
      if (true) {
        do {
          *puVar8 = uVar10 | uVar9;
          puVar8[1] = uVar7;
          uVar10 = ((int)(fVar12 / 10.00000000) + 0x32U & 0x3ff) << 0xe;
          puVar8[2] = uVar10 | 0xf6000000 | uVar9;
          puVar8[3] = uVar10 | uVar6;
          uVar10 = ((int)(((float)(iVar4 + 2) * 219.00000000) / 10.00000000) + 0x32U & 0x3ff) << 0xe
          ;
          iVar5 = iVar4 + 4;
          puVar8[4] = uVar10 | 0xf6000000 | uVar9;
          puVar8[5] = uVar10 | uVar6;
          puVar3 = puVar8 + 8;
          uVar10 = ((int)(((float)(iVar4 + 3) * 219.00000000) / 10.00000000) + 0x32U & 0x3ff) << 0xe
          ;
          puVar8[6] = uVar10 | 0xf6000000 | uVar9;
          puVar8[7] = uVar10 | uVar6;
          uVar7 = ((int)(((float)iVar5 * 219.00000000) / 10.00000000) + 0x32U & 0x3ff) << 0xe;
          uVar10 = uVar7 | 0xf6000000;
          uVar7 |= uVar6;
          fVar12 = (float)(iVar4 + 5) * 219.00000000;
          iVar4 = iVar5;
          puVar8 = puVar3;
        } while (iVar5 != 7);
      }
      *puVar3 = uVar10 | uVar9;
      puVar3[1] = uVar7;
      uVar10 = ((int)(fVar12 / 10.00000000) + 0x32U & 0x3ff) << 0xe;
      puVar3[2] = uVar10 | 0xf6000000 | uVar9;
      puVar3[3] = uVar10 | uVar6;
      uVar10 = ((int)(((float)(iVar5 + 2) * 219.00000000) / 10.00000000) + 0x32U & 0x3ff) << 0xe;
      puVar3[4] = uVar10 | 0xf6000000 | uVar9;
      puVar3[5] = uVar10 | uVar6;
      puVar8 = puVar3 + 8;
      uVar10 = ((int)(((float)(iVar5 + 3) * 219.00000000) / 10.00000000) + 0x32U & 0x3ff) << 0xe;
      puVar3[7] = uVar10 | uVar6;
      puVar3[6] = uVar10 | 0xf6000000 | uVar9;
      uVar1 += 7;
      uVar2 += 7;
    } while (((int)uVar1 <= (int)fVar11 * 7 + 0x12) && (uVar1 != 0x27));
  }
  return puVar8;
}



void proc_7F0D2320(void)

{
  flt_8004EAF0 = (float)((int)(flt_8004EAF4 / 10.00000000) * 10 + 10);
  flt_8004EAF4 = flt_8004EAF0;
  return;
}



void remove_viewport_buffer(void)

{
  viewport_img = 0;
  return;
}



void allocate_viewport_buffer(void)

{
  ulonglong uVar1;
  void *pvVar2;
  
  if (resolution == 0) {
    mainthread._352_4_ = 0x140;
    uVar1 = get_num_players();
    if (uVar1 == 1) {
      mainthread._356_4_ = 0xf0;
    }
    else {
      mainthread._356_4_ = 0x78;
    }
  }
  else {
    mainthread._352_4_ = 0x1b8;
    mainthread._356_4_ = 0x14a;
  }
  pvVar2 = allocate_bytes_in_bank(mainthread._352_4_ * mainthread._356_4_ * 2 + 0x40,4);
  viewport_img = (int)pvVar2 + 0x3fU & 0xffffffc0;
  return;
}



void proc_7F0D2448(undefined4 img,undefined4 iwidth,undefined4 iheight)

{
  viewport_img = img;
  mainthread._352_4_ = iwidth;
  mainthread._356_4_ = iheight;
  return;
}



undefined4 * proc_7F0D2464(undefined4 *param_1)

{
  int iVar1;
  u32 uVar3;
  ulonglong uVar2;
  int iVar4;
  
  if (viewport_img == 0) {
    allocate_viewport_buffer();
  }
  uVar3 = get_cur_playernum();
  if ((int)uVar3 < 2) {
    uVar2 = get_num_players();
    if (uVar2 == 2) {
      uVar3 = get_cur_playernum();
      if (uVar3 == 1) goto LAB_7f0d24c4;
    }
    iVar4 = 0;
  }
  else {
LAB_7f0d24c4:
    iVar4 = 0x12c00;
  }
  iVar1 = viewport_img;
  *param_1 = 0xe7000000;
  param_1[1] = 0;
  param_1[2] = 0xfe000000;
  param_1[3] = iVar1 - iVar4 & 0xffffffc0;
  return param_1 + 4;
}



undefined4 * proc_7F0D2518(undefined4 *param_1)

{
  int iVar1;
  short sVar4;
  short sVar5;
  ulonglong uVar2;
  u32 uVar3;
  uint uVar6;
  uint uStack4;
  
  *param_1 = 0xe7000000;
  param_1[1] = 0;
  param_1[2] = 0xb900031d;
  param_1[3] = 0;
  param_1[4] = mainthread._352_4_ - 1U & 0xfff | 0xff100000;
  param_1[5] = viewport_img + -0x80000000;
  param_1[7] = 0x300000;
  param_1[6] = 0xba001402;
  param_1[8] = 0xf7000000;
  param_1[9] = 0xfffcfffc;
  param_1[10] = 0xed000000;
  sVar4 = get_video2_settings_txtClipW();
  sVar5 = get_video2_settings_txtClipH();
  param_1[0xb] = (int)((float)(int)sVar5 * 4.00000000) & 0xfffU |
                 ((int)((float)(int)sVar4 * 4.00000000) & 0xfffU) << 0xc;
  uVar2 = get_num_players();
  if ((longlong)uVar2 < 3) {
    uStack4 = 0;
    sVar4 = get_video2_settings_txtClipW();
    uVar6 = (int)sVar4 - 1;
  }
  else {
    uVar3 = get_cur_playernum();
    if ((uVar3 == 0) || (uVar3 = get_cur_playernum(), uVar3 == 2)) {
      uStack4 = 0;
      sVar4 = get_video2_settings_txtClipW();
      iVar1 = (int)sVar4;
      if (sVar4 < 0) {
        iVar1 += 1;
      }
      uVar6 = (iVar1 >> 1) - 1;
    }
    else {
      sVar4 = get_video2_settings_txtClipW();
      iVar1 = (int)sVar4;
      if (sVar4 < 0) {
        iVar1 += 1;
      }
      uStack4 = iVar1 >> 1;
      sVar4 = get_video2_settings_txtClipW();
      uVar6 = (int)sVar4 - 1;
    }
  }
  param_1[0xc] = (uVar6 & 0x3ff) << 0xe | 0xf6000000 | (mainthread._356_4_ - 1U & 0x3ff) << 2;
  param_1[0xd] = (uStack4 & 0x3ff) << 0xe;
  param_1[0xe] = 0xe7000000;
  param_1[0xf] = 0;
  return param_1 + 0x10;
}



short getmusictrack_or_randomtrack(u32 stagenum)

{
  music_setup *pmVar1;
  word *pwVar2;
  u32 uVar3;
  longlong lVar4;
  uint uVar5;
  word wVar6;
  
  if (music_setup_entries[0].stage_id != 0) {
    pmVar1 = music_setup_entries;
    lVar4 = (longlong)music_setup_entries[0].stage_id;
    do {
      if ((longlong)(int)stagenum == lVar4) {
        if (pmVar1->main_music != -1) {
          return pmVar1->main_music;
        }
        uVar5 = 0;
        pwVar2 = random_tracks;
        wVar6 = random_tracks[1];
        if (random_tracks[0] != 0) {
          while( true ) {
            uVar5 += 1;
            if (wVar6 == 0) break;
            wVar6 = pwVar2[2];
            pwVar2 = pwVar2 + 1;
          }
        }
        uVar3 = get_random_value();
        if (uVar5 != 0) {
          return random_tracks[uVar3 % uVar5];
        }
        trap(0x1c00);
        return random_tracks[uVar3 % uVar5];
      }
      lVar4 = (longlong)pmVar1[1].stage_id;
      pmVar1 = pmVar1 + 1;
    } while (lVar4 != 0);
  }
  uVar5 = 0;
  pwVar2 = random_tracks;
  wVar6 = random_tracks[1];
  if (random_tracks[0] != 0) {
    while( true ) {
      uVar5 += 1;
      if (wVar6 == 0) break;
      wVar6 = pwVar2[2];
      pwVar2 = pwVar2 + 1;
    }
  }
  uVar3 = get_random_value();
  if (uVar5 == 0) {
    trap(0x1c00);
  }
  return (short)random_tracks[uVar3 % uVar5];
}



short proc_7F0D2848(short param_1)

{
  music_setup *pmVar1;
  short sVar2;
  music_setup *pmVar3;
  
  pmVar3 = music_setup_entries;
  sVar2 = music_setup_entries[0].stage_id;
  if (music_setup_entries[0].stage_id != 0) {
    do {
      if (param_1 == sVar2) {
        return pmVar3->bg_sound;
      }
      pmVar1 = pmVar3 + 1;
      pmVar3 = pmVar3 + 1;
      sVar2 = pmVar1->stage_id;
    } while (pmVar1->stage_id != 0);
  }
  return 0xffff;
}



short proc_7F0D2890(short param_1)

{
  music_setup *pmVar1;
  short sVar2;
  music_setup *pmVar3;
  
  pmVar3 = music_setup_entries;
  sVar2 = music_setup_entries[0].stage_id;
  if (music_setup_entries[0].stage_id != 0) {
    do {
      if (param_1 == sVar2) {
        return pmVar3->xtrack;
      }
      pmVar1 = pmVar3 + 1;
      pmVar3 = pmVar3 + 1;
      sVar2 = pmVar1->stage_id;
    } while (pmVar1->stage_id != 0);
  }
  return 0xffff;
}



void proc_7F0D28E0(int param_1,int param_2,undefined8 param_3,byte *param_4)

{
  byte bVar1;
  byte *pbVar2;
  uint uVar3;
  uint uVar4;
  byte bVar5;
  int iVar6;
  uint uVar7;
  byte bVar8;
  byte bVar9;
  
  uVar3 = (uint)param_3;
  bVar5 = *(byte *)((uVar3 << 2 & 0x3e0) + (param_2 >> 3) + param_1 + 0x1800);
  uVar4 = (uint)bVar5;
  pbVar2 = (byte *)(((uVar3 & 0xc0) << 5 | (uVar3 & 7) << 8 | uVar3 << 2 & 0xe0 | param_2 >> 3) +
                   param_1);
  if (((bVar5 & 0x80) == 0) || (DAT_8004ed04 == '\0')) {
    uVar3 = (int)(uint)bVar5 >> 3;
  }
  else {
    uVar3 = uVar4;
    uVar4 = (int)(uint)bVar5 >> 3;
  }
  uVar4 &= 7;
  uVar3 &= 7;
  iVar6 = 0;
  if ((bVar5 & 0x40) == 0) {
    uVar4 += 8;
    uVar3 += 8;
  }
  bVar5 = (byte)uVar4;
  do {
    bVar1 = *pbVar2;
    iVar6 += 1;
    pbVar2 = pbVar2 + 0x100;
    uVar7 = uVar3;
    if ((bVar1 & 0x80) != 0) {
      uVar7 = uVar4;
    }
    bVar9 = (byte)uVar3;
    bVar8 = bVar9;
    if ((bVar1 & 0x40) != 0) {
      bVar8 = bVar5;
    }
    *param_4 = bVar8 | (byte)(uVar7 << 4);
    uVar7 = uVar3;
    if ((bVar1 & 0x20) != 0) {
      uVar7 = uVar4;
    }
    bVar8 = bVar9;
    if ((bVar1 & 0x10) != 0) {
      bVar8 = bVar5;
    }
    param_4[1] = bVar8 | (byte)(uVar7 << 4);
    uVar7 = uVar3;
    if ((bVar1 & 8) != 0) {
      uVar7 = uVar4;
    }
    bVar8 = bVar9;
    if ((bVar1 & 4) != 0) {
      bVar8 = bVar5;
    }
    param_4[2] = bVar8 | (byte)(uVar7 << 4);
    uVar7 = uVar3;
    if ((bVar1 & 2) != 0) {
      uVar7 = uVar4;
    }
    if ((bVar1 & 1) != 0) {
      bVar9 = bVar5;
    }
    param_4[3] = bVar9 | (byte)(uVar7 << 4);
    param_4 = param_4 + 0x20;
  } while (iVar6 != 8);
  return;
}



void proc_7F0D2A84(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  byte *pbVar3;
  longlong lVar4;
  longlong lVar5;
  int local_8;
  
  DAT_8004ed08 += 1;
  if ((int)(uint)DAT_8004ed08 % 0x19 == 0) {
    DAT_8004ed08 = 0;
    iVar1 = 0;
    do {
      *(undefined *)(mainthread._380_4_ + iVar1) = 1;
      *(undefined *)(mainthread._380_4_ + iVar1 + 1) = 1;
      *(undefined *)(mainthread._380_4_ + iVar1 + 2) = 1;
      iVar2 = mainthread._380_4_ + iVar1;
      iVar1 += 4;
      *(undefined *)(iVar2 + 3) = 1;
    } while (iVar1 != 0x300);
    DAT_8004ed04 = '\x01' - DAT_8004ed04;
  }
  local_8 = 0;
  do {
    iVar1 = 0;
    lVar5 = (longlong)(local_8 + 0x40);
    do {
      lVar4 = (longlong)local_8;
      pbVar3 = (byte *)(((local_8 >> 6) * 4 + (iVar1 >> 6)) * 0x800 + param_2);
      if (lVar4 < lVar5) {
        do {
          if (iVar1 < iVar1 + 0x40) {
            iVar2 = iVar1;
            do {
              if (*(char *)((((int)lVar4 >> 3) << 5 | iVar2 >> 3) + mainthread._380_4_) != '\0') {
                proc_7F0D28E0(param_1,iVar2,lVar4,pbVar3);
              }
              iVar2 += 8;
              pbVar3 = pbVar3 + 4;
            } while (iVar2 < iVar1 + 0x40);
          }
          lVar4 = (longlong)((int)lVar4 + 8);
          pbVar3 = pbVar3 + 0xe0;
        } while (lVar4 < lVar5);
      }
      iVar1 += 0x40;
    } while (iVar1 < 0x100);
    local_8 = local_8 + 0x40;
  } while (lVar5 < 0xc0);
  iVar1 = 0;
  do {
    *(undefined *)(mainthread._380_4_ + iVar1) = 0;
    *(undefined *)(mainthread._380_4_ + iVar1 + 1) = 0;
    *(undefined *)(mainthread._380_4_ + iVar1 + 2) = 0;
    iVar2 = mainthread._380_4_ + iVar1;
    iVar1 += 4;
    *(undefined *)(iVar2 + 3) = 0;
  } while (iVar1 != 0x300);
  return;
}



// WARNING: Instruction at (ram,0x7f0d2e2c) overlaps instruction at (ram,0x7f0d2e28)
// 

void spectrum_p1controller_to_kempston(void)

{
  ulonglong uVar1;
  int iVar2;
  int iVar3;
  undefined1 *puVar4;
  byte bStack13;
  int iStack12;
  int iStack8;
  int iStack4;
  
  iStack4 = 0;
  iStack8 = 0;
  iStack12 = 0;
  bStack13 = 0;
  redirect_to_ramrom_replay_and_record_handlers_if_set();
  uVar1 = get_controller_buttons_held
                    ('\0',R_CBUTTONS|L_CBUTTONS|D_CBUTTONS|U_CBUTTONS|R_TRIG|L_TRIG|DUMMY_2|DUMMY_1|
                          R_JPAD|L_JPAD|D_JPAD|U_JPAD|START_BUTTON|Z_TRIG|B_BUTTON|A_BUTTON);
  iVar2 = get_controller_3dstick_L_R('\0',-3,3);
  iVar3 = get_controller_3dstick_U_D('\0',-3,3);
  byte_8004EC34 = 0xff;
  puVar4 = &DAT_8004ec35;
  do {
    puVar4 = puVar4 + 4;
    puVar4[1] = 0xff;
    puVar4[2] = 0xff;
    puVar4[3] = 0xff;
    *puVar4 = 0xff;
    puVar4 = puVar4;
  } while (puVar4 != (undefined1 *)0x8004ec3d);
  if (((uVar1 & 0x202) != 0) || (iVar2 < -1)) {
    iStack12 = 1;
  }
  if (((uVar1 & 0x101) != 0) || (1 < iVar2)) {
    bStack13 = 1;
  }
  if (((uVar1 & 0x808) != 0) || (1 < iVar3)) {
    iStack4 = 1;
  }
  if (((uVar1 & 0x404) != 0) || (iVar3 < -1)) {
    iStack8 = 1;
  }
  if ((mainthread[413] == '\x02') && ((uVar1 & 0xc000) != 0)) {
    iStack4 = 1;
  }
  if (((mainthread[413] == '\x04') || (mainthread[413] == '\a')) && ((uVar1 & 0xc000) != 0)) {
    iStack8 = 1;
  }
  if (((((mainthread[413] == '\0') || (mainthread[413] == '\x01')) ||
       ((mainthread[413] == '\x06' || ((mainthread[413] == '\t' || (mainthread[413] == '\x04'))))))
      || (mainthread[413] == '\a')) && ((uVar1 & 0xc000) != 0)) {
    byte_8004EC38 &= 0xfe;
  }
  if (((mainthread[413] == '\x02') || (mainthread[413] == '\b')) && ((uVar1 & 0xc000) != 0)) {
    DAT_8004ec37 &= 0xef;
  }
  if ((mainthread[413] == '\x05') && ((uVar1 & 0xc000) != 0)) {
    DAT_8004ec37 &= 0xfb;
  }
  if (mainthread[413] == '\x03') {
    if ((uVar1 & 0xc000) != 0) {
      byte_8004EC38 &= 0xef;
    }
    if ((uVar1 & 0x8000) != 0) {
      byte_8004EC34 &= 0xfd;
    }
    if ((uVar1 & 0x4000) != 0) {
      DAT_8004ec3b &= 0xfe;
    }
  }
  if (mainthread[413] == '\x06') {
    if ((uVar1 & 0x8000) != 0) {
      iStack4 = 1;
    }
    if ((uVar1 & 0x4000) != 0) {
      DAT_8004ec3b &= 0xfe;
    }
  }
  if (mainthread[413] == '\x01') {
    if ((uVar1 & 0xc000) != 0) {
      byte_8004EC34 &= 0xfd;
    }
    if ((uVar1 & 0x200) != 0) {
      DAT_8004ec37 &= 0xf7;
    }
    if ((uVar1 & 0x400) != 0) {
      DAT_8004ec37 &= 0xef;
    }
    if ((uVar1 & 0x100) != 0) {
      byte_8004EC38 &= 0xef;
    }
  }
  if ((uVar1 & 0x20) != 0) {
    iVar2 = 0;
    do {
      *(undefined *)(mainthread._376_4_ + iVar2) = 0;
      *(undefined *)(mainthread._376_4_ + iVar2 + 1) = 0;
      *(undefined *)(mainthread._376_4_ + iVar2 + 2) = 0;
      iVar3 = mainthread._376_4_ + iVar2;
      iVar2 += 4;
      *(undefined *)(iVar3 + 3) = 0;
    } while (iVar2 != 0x4000);
  }
  byte_8004EC40 =
       ((uVar1 & 0x2000) != 0) << 4 | (byte)(iStack4 << 3) | (byte)(iStack8 << 2) |
       (byte)(iStack12 << 1) | bStack13;
  return;
}



void init_spectrum_game(byte param_1)

{
  uint uVar1;
  void *pvVar2;
  undefined4 *puVar3;
  bool bVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  ushort uVar8;
  undefined *puVar9;
  uint uVar10;
  undefined *puVar11;
  
  mainthread._388_4_ = allocate_bytes_in_bank(0x100,4);
  uVar5 = 0;
  do {
    bVar4 = false;
    uVar1 = 0;
    uVar10 = uVar5;
    while( true ) {
      uVar1 += 1;
      if ((uVar10 & 1) != 0) {
        bVar4 = (bool)(bVar4 ^ 1);
      }
      if (uVar1 == 8) break;
      uVar10 = (int)uVar5 >> (uVar1 & 0x1f);
    }
    if (bVar4) {
      *(undefined *)((int)mainthread._388_4_ + uVar5) = 0;
    }
    else {
      *(undefined *)((int)mainthread._388_4_ + uVar5) = 4;
    }
    uVar5 += 1;
  } while ((int)uVar5 < 0x100);
  mainthread._384_4_ = allocate_bytes_in_bank(0x6000,4);
  mainthread._380_4_ = allocate_bytes_in_bank(0x300,4);
  iVar6 = 0;
  do {
    puVar9 = (undefined *)((int)mainthread._380_4_ + iVar6);
    iVar6 += 1;
    *puVar9 = 1;
  } while (iVar6 < 0x300);
  pvVar2 = allocate_bytes_in_bank(0x10000,4);
  mainthread._376_4_ = pvVar2;
  _load_resource_named_to_membank((byte *)aEmDataSpec_rom_seg_rz,1,0x100,4);
  iVar6 = 0;
  mainthread._368_4_ = pvVar2;
  do {
    puVar11 = (undefined *)((int)mainthread._368_4_ + iVar6);
    puVar9 = (undefined *)((int)mainthread._376_4_ + iVar6);
    iVar6 += 1;
    *puVar9 = *puVar11;
  } while (iVar6 < 0x4000);
  puVar3 = (undefined4 *)((int)(char)param_1 & 0xff);
  mainthread[413] = param_1;
  if (&i < puVar3) {
    mainthread[413] = 0;
    puVar3 = NULL;
  }
  _load_resource_named_to_membank((&aEmDataSabre_seg_rz_ptr)[(int)puVar3],1,0x100,4);
  iVar6 = 0;
  mainthread._372_4_ = puVar3;
  do {
    *(undefined *)((int)mainthread._376_4_ + iVar6 + 0x4000) =
         *(undefined *)((int)mainthread._372_4_ + iVar6 + 0x1b);
    *(undefined *)((int)mainthread._376_4_ + iVar6 + 0x4001) =
         *(undefined *)((int)mainthread._372_4_ + iVar6 + 0x1c);
    *(undefined *)((int)mainthread._376_4_ + iVar6 + 0x4002) =
         *(undefined *)((int)mainthread._372_4_ + iVar6 + 0x1d);
    iVar7 = iVar6 + 4;
    *(undefined *)((int)mainthread._376_4_ + iVar6 + 0x4003) =
         *(undefined *)((int)mainthread._372_4_ + iVar6 + 0x1e);
    iVar6 = iVar7;
  } while (iVar7 != 0xc000);
  mainthread[410] = (byte)((int)(uint)*(byte *)((int)mainthread._372_4_ + 0x13) >> 2) & 1;
  uVar8 = (ushort)*(byte *)(mainthread._372_4_ + 6) * 0x100 +
          (ushort)*(byte *)((int)mainthread._372_4_ + 0x17);
  mainthread[412] = *(char *)((int)mainthread._372_4_ + 0x19);
  if (mainthread[412] != '\0') {
    mainthread[412] += '\x01';
  }
  mainthread[392] = *(undefined *)((int)mainthread._372_4_ + 0x16);
  mainthread[393] = *(undefined *)((int)mainthread._372_4_ + 0x15);
  mainthread[394] = *(undefined *)((int)mainthread._372_4_ + 0xe);
  mainthread[395] = *(undefined *)((int)mainthread._372_4_ + 0xd);
  mainthread[396] = *(undefined *)(mainthread._372_4_ + 3);
  mainthread[397] = *(undefined *)((int)mainthread._372_4_ + 0xb);
  mainthread[398] = *(undefined *)((int)mainthread._372_4_ + 10);
  mainthread[399] = *(undefined *)((int)mainthread._372_4_ + 9);
  mainthread[400] = *(undefined *)(mainthread._372_4_ + 2);
  mainthread[401] = *(undefined *)((int)mainthread._372_4_ + 7);
  mainthread[402] = *(undefined *)((int)mainthread._372_4_ + 6);
  mainthread[403] = *(undefined *)((int)mainthread._372_4_ + 5);
  mainthread[404] = *(undefined *)(mainthread._372_4_ + 1);
  mainthread[405] = *(undefined *)((int)mainthread._372_4_ + 3);
  mainthread[406] = *(undefined *)((int)mainthread._372_4_ + 2);
  mainthread[407] = *(undefined *)((int)mainthread._372_4_ + 1);
  mainthread[408] = *(undefined *)mainthread._372_4_;
  mainthread[409] = *(undefined *)(mainthread._372_4_ + 5);
  mainthread[411] = mainthread[410];
  mainthread._414_2_ =
       (ushort)*(byte *)((int)mainthread._372_4_ + 0x12) * 0x100 +
       (ushort)*(byte *)((int)mainthread._372_4_ + 0x11);
  mainthread._416_2_ =
       (ushort)*(byte *)(mainthread._372_4_ + 4) * 0x100 +
       (ushort)*(byte *)((int)mainthread._372_4_ + 0xf);
  mainthread._418_2_ = uVar8 + 2;
  mainthread._420_2_ =
       CONCAT11(*(undefined *)((int)mainthread._376_4_ + (uint)uVar8 + 1),
                *(undefined *)((uint)uVar8 + (int)mainthread._376_4_));
  return;
}



void run_spectrum_game(void)

{
  spectrum_p1controller_to_kempston();
  spectrum_hw_emulation();
  proc_7F0D2A84(mainthread._376_4_ + 0x4000,mainthread._384_4_);
  return;
}



undefined4 * spectrum_draw_screen(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iStack100;
  
  *param_1 = 0xe7000000;
  param_1[1] = 0;
  param_1[3] = 0x8004ed0c;
  param_1[2] = 0xfd100000;
  param_1[4] = 0xf5000300;
  param_1[5] = 0x7000000;
  param_1[6] = 0xe6000000;
  param_1[7] = 0;
  param_1[8] = 0xf0000000;
  param_1[9] = 0x703c000;
  param_1[10] = 0xba001301;
  param_1[0xb] = 0;
  param_1[0xd] = 0xf0a4000;
  param_1[0xc] = 0xb900031d;
  param_1[0xe] = 0xfcffffff;
  param_1[0xf] = 0xfffcf87c;
  param_1[0x10] = 0xba000c02;
  param_1[0x11] = 0;
  param_1[0x13] = 0xffffffff;
  param_1[0x12] = 0xbb000001;
  param_1 = param_1 + 0x14;
  iStack100 = 0;
  iVar1 = 0;
  do {
    iVar3 = iVar1 + 1;
    iVar5 = iStack100 << 0xb;
    iVar4 = 0;
    do {
      *param_1 = 0xe7000000;
      param_1[1] = 0;
      param_1[2] = 0xfd100000;
      param_1[3] = iVar5 + mainthread._384_4_;
      param_1[5] = 0x7000000;
      param_1[4] = 0xf5100000;
      param_1[7] = 0;
      param_1[6] = 0xe6000000;
      param_1[9] = 0x73ff200;
      param_1[8] = 0xf3000000;
      param_1[0xb] = 0;
      param_1[10] = 0xe7000000;
      param_1[0xc] = 0xba000e02;
      param_1[0xd] = 0x8000;
      param_1[0xf] = 0x18060;
      iVar2 = iVar4 + 1;
      param_1[0xe] = 0xf5400800;
      param_1[0x10] = 0xf2000000;
      param_1[0x11] = 0x7e07e0;
      param_1[0x12] =
           (iVar2 * 0x40 + 0x20U & 0x3ff) << 0xe | 0xe4000000 | (iVar3 * 0x40 + 0x18) * 4 & 0xfffU;
      param_1[0x13] = (iVar4 * 0x40 + 0x20U & 0x3ff) << 0xe | (iVar1 * 0x40 + 0x18) * 4 & 0xfffU;
      param_1[0x14] = 0xb4000000;
      param_1[0x15] = 0;
      iVar5 += 0x800;
      param_1[0x16] = 0xb3000000;
      param_1[0x17] = 0x4000400;
      param_1 = param_1 + 0x18;
      iVar4 = iVar2;
    } while (iVar2 != 4);
    iStack100 += 4;
    iVar1 = iVar3;
  } while (iVar3 != 3);
  return param_1;
}



ulonglong spectrum_input_handling(undefined8 param_1,uint param_2,char param_3)

{
  int iVar1;
  ulonglong uVar2;
  uint uVar3;
  
  param_2 &= 0xff;
  if (param_3 == -2) {
    uVar2 = 0xff;
    iVar1 = 0;
    do {
      if ((param_2 & 1) == 0) {
        uVar2 &= (ulonglong)(byte)(&byte_8004EC34)[iVar1];
      }
      if ((param_2 >> 1 & 1) == 0) {
        uVar2 &= (ulonglong)(byte)(&DAT_8004ec35)[iVar1];
      }
      uVar3 = param_2 >> 3;
      if ((param_2 >> 2 & 1) == 0) {
        uVar2 &= (ulonglong)(byte)(&DAT_8004ec36)[iVar1];
      }
      param_2 >>= 4;
      if ((uVar3 & 1) == 0) {
        uVar2 &= (ulonglong)(byte)(&DAT_8004ec37)[iVar1];
      }
      iVar1 += 4;
    } while (iVar1 != 8);
    return uVar2;
  }
  if (param_3 == '\x1f') {
    return (ulonglong)byte_8004EC40;
  }
  return 0xff;
}



void dummy7F0D37D4(void)

{
  return;
}



undefined8 proc_7F0D37DC(undefined8 param_1,undefined8 param_2,char param_3,byte param_4)

{
  if (param_3 == -2) {
    if ((param_4 & 7) != dword_8004ED54._0_1_) {
      dword_8004ED54._0_1_ = param_4 & 7;
    }
    return 0;
  }
  return 0;
}



// WARNING: Instruction at (ram,0x7f0d39d8) overlaps instruction at (ram,0x7f0d39d4)
// 

void spectrum_hw_emulation(void)

{
  ushort uVar1;
  undefined uVar2;
  uint uVar3;
  char cStack43;
  ushort uStack30;
  ushort uStack24;
  undefined uStack20;
  char cStack19;
  
  cStack19 = mainthread[410];
  uStack20 = mainthread[411];
  uStack30 = mainthread._418_2_;
  uStack24 = mainthread._420_2_;
  if ((true) || (cStack43 == '\0')) {
    do {
      cStack43 = '\x01';
      uVar3 = (uint)uStack24;
      uStack24 += 1;
      if (true) {
                    // WARNING: Could not recover jumptable at 0x7f0d3a34. Too many branches
                    // WARNING: Treating indirect jump as call
        (*(code *)(&jpt_70107964)[(uint)*(byte *)(uVar3 + mainthread._376_4_)])();
        return;
      }
    } while ((true) || (false));
  }
  uVar1 = uStack24;
  if ((false) &&
     ((uVar1 = uStack24, cStack43 != '\0' && (uVar1 = uStack24, mainthread[410] != '\0')))) {
    uVar1 = uStack24 + 1;
    if (*(char *)((uint)uStack24 + mainthread._376_4_) != 'v') {
      uVar1 = uStack24;
    }
    uStack24 = uVar1;
    uStack20 = 0;
    cStack19 = '\0';
    uVar2 = (undefined)uStack24;
    if (((mainthread[412] == '\0') || (mainthread[412] == '\x01')) || (mainthread[412] == '\x02')) {
      uStack30 = mainthread._418_2_ - 2;
      if (uStack30 < 0x5b00) {
        if (uStack30 < 0x5800) {
          if (0x3fff < uStack30) {
            *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
            *(undefined *)
             (mainthread._380_4_ + ((int)((uint)uStack30 & 0x1800) >> 3 | (uint)uStack30 & 0xff)) =
                 1;
          }
        }
        else {
          *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
          *(undefined *)(mainthread._380_4_ + (uint)uStack30 + -0x5800) = 1;
        }
      }
      else {
        *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
      }
      if ((uint)uStack30 + 1 < 0x5b00) {
        if ((uint)uStack30 + 1 < 0x5800) {
          if (0x3fff < (uint)uStack30 + 1) {
            *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
            *(undefined *)
             (mainthread._380_4_ +
             ((int)((uint)uStack30 + 1 & 0x1800) >> 3 | (uint)uStack30 + 1 & 0xff)) = 1;
          }
        }
        else {
          *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
          *(undefined *)(mainthread._380_4_ + (uint)uStack30 + -0x57ff) = 1;
        }
      }
      else {
        *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
      }
      uStack24 = 0x38;
      uVar1 = uStack24;
    }
    else {
      uVar1 = uStack24;
      if (mainthread[412] == '\x03') {
        uVar3 = (uint)mainthread[408] << 8 | 0xff;
        uStack30 = mainthread._418_2_ - 2;
        uVar1 = CONCAT11(*(undefined *)(mainthread._376_4_ + uVar3 + 1),
                         *(undefined *)(uVar3 + mainthread._376_4_));
        if (uStack30 < 0x5b00) {
          if (uStack30 < 0x5800) {
            if (0x3fff < uStack30) {
              *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
              *(undefined *)
               (mainthread._380_4_ + ((int)((uint)uStack30 & 0x1800) >> 3 | (uint)uStack30 & 0xff))
                   = 1;
            }
          }
          else {
            *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
            *(undefined *)(mainthread._380_4_ + (uint)uStack30 + -0x5800) = 1;
          }
        }
        else {
          *(undefined *)(mainthread._376_4_ + (uint)uStack30) = uVar2;
        }
        if ((uint)uStack30 + 1 < 0x5b00) {
          if ((uint)uStack30 + 1 < 0x5800) {
            if (0x3fff < (uint)uStack30 + 1) {
              *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
              *(undefined *)
               (mainthread._380_4_ +
               ((int)((uint)uStack30 + 1 & 0x1800) >> 3 | (uint)uStack30 + 1 & 0xff)) = 1;
            }
          }
          else {
            *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
            *(undefined *)(mainthread._380_4_ + (uint)uStack30 + -0x57ff) = 1;
          }
        }
        else {
          *(undefined *)(mainthread._376_4_ + (uint)uStack30 + 1) = (char)((uint)uStack24 >> 8);
        }
      }
    }
  }
  uStack24 = uVar1;
  mainthread[410] = cStack19;
  mainthread[411] = uStack20;
  mainthread._418_2_ = uStack30;
  mainthread._420_2_ = uStack24;
  return;
}



// WARNING: This function may have set the stack pointer

void entry(void)

{
  OSThread *pOVar1;
  undefined *puVar2;
  
  pOVar1 = &rmonThread;
  puVar2 = &_BSS_SIZE;
  do {
    puVar2 = puVar2 + -8;
    pOVar1->next = NULL;
    pOVar1->priority = 0;
    pOVar1 = (OSThread *)&pOVar1->queue;
  } while (puVar2 != NULL);
  boot();
  return;
}



void boot(void)

{
  setCopReg(0,Index,1,0);
  setCopReg(0,EntryLo0,0x1f,0);
  setCopReg(0,EntryLo1,1,0);
  setCopReg(0,EntryHi,0x70000000,0);
  setCopReg(0,PageMask,0x7fe000,0);
  TLB_write_indexed_entry(Index,EntryHi,EntryLo0,EntryLo1,PageMask);
  init((EVP_PKEY_CTX *)0x70000000);
  return;
}


